/** 
 * RealGrid v2.6.1.1449
 * Copyright (C) 2013-2023 WooriTech Inc.
 * All Rights Reserved.
 */
var RealGrid=function(){"use strict";var i="undefined"!=typeof globalThis?globalThis:"undefined"!=typeof window?window:"undefined"!=typeof global?global:"undefined"!=typeof self?self:{};function t(t){return t&&t.__esModule&&Object.prototype.hasOwnProperty.call(t,"default")?t.default:t}function e(t,e){return t(e={exports:{}},e.exports),e.exports}var o=function(t,e){return(o=Object.setPrototypeOf||({__proto__:[]}instanceof Array?function(t,e){t.__proto__=e}:function(t,e){for(var i in e)e.hasOwnProperty(i)&&(t[i]=e[i])}))(t,e)};var n=function(){return(n=Object.assign||function(t){for(var e,i=1,o=arguments.length;i<o;i++)for(var n in e=arguments[i])Object.prototype.hasOwnProperty.call(e,n)&&(t[n]=e[n]);return t}).apply(this,arguments)};function r(t){var e="function"==typeof Symbol&&Symbol.iterator,i=e&&t[e],o=0;if(i)return i.call(t);if(t&&"number"==typeof t.length)return{next:function(){return{value:(t=t&&o>=t.length?void 0:t)&&t[o++],done:!t}}};throw new TypeError(e?"Object is not iterable.":"Symbol.iterator is not defined.")}function s(t,e){var i="function"==typeof Symbol&&t[Symbol.iterator];if(!i)return t;var o,n,r=i.call(t),s=[];try{for(;(void 0===e||0<e--)&&!(o=r.next()).done;)s.push(o.value)}catch(t){n={error:t}}finally{try{o&&!o.done&&(i=r.return)&&i.call(r)}finally{if(n)throw n.error}}return s}function u(t){return this instanceof u?(this.v=t,this):new u(t)}var ne=Object.freeze({__proto__:null,__extends:function(t,e){function i(){this.constructor=t}o(t,e),t.prototype=null===e?Object.create(e):(i.prototype=e.prototype,new i)},get __assign(){return n},__rest:function(t,e){var i={};for(n in t)Object.prototype.hasOwnProperty.call(t,n)&&e.indexOf(n)<0&&(i[n]=t[n]);if(null!=t&&"function"==typeof Object.getOwnPropertySymbols)for(var o=0,n=Object.getOwnPropertySymbols(t);o<n.length;o++)e.indexOf(n[o])<0&&Object.prototype.propertyIsEnumerable.call(t,n[o])&&(i[n[o]]=t[n[o]]);return i},__decorate:function(t,e,i,o){var n,r=arguments.length,s=r<3?e:null===o?o=Object.getOwnPropertyDescriptor(e,i):o;if("object"==typeof Reflect&&"function"==typeof Reflect.decorate)s=Reflect.decorate(t,e,i,o);else for(var a=t.length-1;0<=a;a--)(n=t[a])&&(s=(r<3?n(s):3<r?n(e,i,s):n(e,i))||s);return 3<r&&s&&Object.defineProperty(e,i,s),s},__param:function(i,o){return function(t,e){o(t,e,i)}},__metadata:function(t,e){if("object"==typeof Reflect&&"function"==typeof Reflect.metadata)return Reflect.metadata(t,e)},__awaiter:function(t,s,a,l){return new(a=a||Promise)(function(i,e){function o(t){try{r(l.next(t))}catch(t){e(t)}}function n(t){try{r(l.throw(t))}catch(t){e(t)}}function r(t){var e;t.done?i(t.value):((e=t.value)instanceof a?e:new a(function(t){t(e)})).then(o,n)}r((l=l.apply(t,s||[])).next())})},__generator:function(o,n){var r,s,a,l={label:0,sent:function(){if(1&a[0])throw a[1];return a[1]},trys:[],ops:[]},t={next:e(0),throw:e(1),return:e(2)};return"function"==typeof Symbol&&(t[Symbol.iterator]=function(){return this}),t;function e(i){return function(t){var e=[i,t];if(r)throw new TypeError("Generator is already executing.");for(;l;)try{if(r=1,s&&(a=2&e[0]?s.return:e[0]?s.throw||((a=s.return)&&a.call(s),0):s.next)&&!(a=a.call(s,e[1])).done)return a;switch(s=0,(e=a?[2&e[0],a.value]:e)[0]){case 0:case 1:a=e;break;case 4:return l.label++,{value:e[1],done:!1};case 5:l.label++,s=e[1],e=[0];continue;case 7:e=l.ops.pop(),l.trys.pop();continue;default:if(!(a=0<(a=l.trys).length&&a[a.length-1])&&(6===e[0]||2===e[0])){l=0;continue}if(3===e[0]&&(!a||e[1]>a[0]&&e[1]<a[3]))l.label=e[1];else if(6===e[0]&&l.label<a[1])l.label=a[1],a=e;else{if(!(a&&l.label<a[2])){a[2]&&l.ops.pop(),l.trys.pop();continue}l.label=a[2],l.ops.push(e)}}e=n.call(o,l)}catch(t){e=[6,t],s=0}finally{r=a=0}if(5&e[0])throw e[1];return{value:e[0]?e[1]:void 0,done:!0}}}},__exportStar:function(t,e){for(var i in t)e.hasOwnProperty(i)||(e[i]=t[i])},__values:r,__read:s,__spread:function(){for(var t=[],e=0;e<arguments.length;e++)t=t.concat(s(arguments[e]));return t},__spreadArrays:function(){for(var t=0,e=0,i=arguments.length;e<i;e++)t+=arguments[e].length;for(var o=Array(t),n=0,e=0;e<i;e++)for(var r=arguments[e],s=0,a=r.length;s<a;s++,n++)o[n]=r[s];return o},__await:u,__asyncGenerator:function(t,e,i){var n,r,s;if(Symbol.asyncIterator)return n=i.apply(t,e||[]),r=[],s={},o("next"),o("throw"),o("return"),s[Symbol.asyncIterator]=function(){return this},s;throw new TypeError("Symbol.asyncIterator is not defined.");function o(o){n[o]&&(s[o]=function(i){return new Promise(function(t,e){1<r.push([o,i,t,e])||a(o,i)})})}function a(t,e){try{(i=n[t](e)).value instanceof u?Promise.resolve(i.value.v).then(l,h):d(r[0][2],i)}catch(t){d(r[0][3],t)}var i}function l(t){a("next",t)}function h(t){a("throw",t)}function d(t,e){t(e),r.shift(),r.length&&a(r[0][0],r[0][1])}},__asyncDelegator:function(o){var n,t={};return e("next"),e("throw",function(t){throw t}),e("return"),t[Symbol.iterator]=function(){return this},t;function e(e,i){t[e]=o[e]?function(t){return(n=!n)?{value:u(o[e](t)),done:"return"===e}:i?i(t):t}:i}},__asyncValues:function(s){var t,e;if(Symbol.asyncIterator)return(t=s[Symbol.asyncIterator])?t.call(s):(s=r(s),e={},i("next"),i("throw"),i("return"),e[Symbol.asyncIterator]=function(){return this},e);throw new TypeError("Symbol.asyncIterator is not defined.");function i(r){e[r]=s[r]&&function(n){return new Promise(function(t,e){var i,o;n=s[r](n),i=t,t=e,o=n.done,e=n.value,Promise.resolve(e).then(function(t){i({value:t,done:o})},t)})}}},__makeTemplateObject:function(t,e){return Object.defineProperty?Object.defineProperty(t,"raw",{value:e}):t.raw=e,t},__importStar:function(t){if(t&&t.__esModule)return t;var e={};if(null!=t)for(var i in t)Object.hasOwnProperty.call(t,i)&&(e[i]=t[i]);return e.default=t,e},__importDefault:function(t){return t&&t.__esModule?t:{default:t}},__classPrivateFieldGet:function(t,e){if(e.has(t))return e.get(t);throw new TypeError("attempted to get private field on non-instance")},__classPrivateFieldSet:function(t,e,i){if(e.has(t))return e.set(t,i),i;throw new TypeError("attempted to set private field on non-instance")}}),a=e(function(t,e){Object.defineProperty(e,"__esModule",{value:!0}),e.defineProp=function(t,e,i){i.enumerable=!0,i.configurable=!0,Object.defineProperty(t.prototype,e,i)},i._dp=e.defineProp}),h=(t(a),a.defineProp,e(function(t,e){Object.defineProperty(e,"__esModule",{value:!0}),e.globalRealGridInfo={name:"RealGrid",version:"2.6.1.1449",license:"enterprise",code:null},e.licenseNo=""})),ht=(t(h),h.globalRealGridInfo,h.licenseNo,e(function(t,e){Object.defineProperty(e,"__esModule",{value:!0}),e.T_HASH="$_hash",e.T_VIEW="$_view",e.T_ROW="$_row",e.T_FIX="$_fix",e.T_HEI="$_hei",e.T_IDX="$_idx",e.T_FOC="$_foc",e.T_LEV="$_lev",(o=e.ValueType||(e.ValueType={})).TEXT="text",o.NUMBER="number",o.BOOLEAN="boolean",o.DATETIME="datetime",o.OBJECT="object",o.CHAR="char",o.UNUM="unum",o.INT="int",o.UINT="uint",o.DATE="date",(o=e.SortDirection||(e.SortDirection={})).ASCENDING="ascending",o.DESCENDING="descending",o.NONE="none",(o=e.SortCase||(e.SortCase={})).SENSITIVE="sensitive",o.INSENSITIVE="insensitive",(o=e.PagingSource||(e.PagingSource={})).ROWS="rows",o.ITEMS="items",(o=e.SortMode||(e.SortMode={})).AUTO="auto",o.EXPLICIT="explicit",(o=e.FilterMode||(e.FilterMode={})).AUTO="auto",o.EXPLICIT="explicit",(o=i=e.RowGroupAdornments||(e.RowGroupAdornments={})).NONE="none",o.HEADER="header",o.FOOTER="footer",o.SUMMARY="summary",o.BOTH="both",e.isHeaderAdornment=function(t){return t==i.BOTH||t==i.HEADER},e.isFooterAdornment=function(t){return t==i.BOTH||t==i.FOOTER},e.isFooterOnlyAdornment=function(t){return t==i.FOOTER||t==i.SUMMARY},(o=e.ValidationMode||(e.ValidationMode={})).ALWAYS="always",o.UPDATE="update",o.INSERT="insert",(o=e.ValidationLevel||(e.ValidationLevel={})).ERROR="error",o.WARNING="warning",o.INFO="info",o.IGNORE="ignore";var i,o,n={error:1,warning:2,info:3,ignore:4};e.ValidationLevel_compare=function(t,e){return n[t]-n[e]},(o=e.SummaryMode||(e.SummaryMode={})).NONE="none",o.AGGREGATE="aggregate",o.STATISTICAL="statistical",(o=e.ColumnHeaderItemLocation||(e.ColumnHeaderItemLocation={})).NONE="none",o.LEFT_EDGE="leftEdge",o.RIGHT_EDGE="rightEdge",o.TOP_EDGE="topEdge",o.BOTTOM_EDGE="bottomEdge",o.LEFT="left",o.RIGHT="right",o.TOP="top",o.BOTTOM="bottom",o.CENTER="center",(o=e.BlankState||(e.BlankState={})).NONE="none",o.HEAD="head",o.BODY="body",o.TAIL="tail",(o=e.GridFitStyle||(e.GridFitStyle={})).NONE="none",o.EVEN="even",o.EVEN_FILL="evenFill",o.FILL="fill",(o=e.RowMaskType||(e.RowMaskType={})).NONE="none",o.ROW="row",o.DATA="data",o.FILL="fill",o.CELL="cell",(o=e.TextInputCase||(e.TextInputCase={})).NORMAL="normal",o.UPPER="upper",o.LOWER="lower",o.DEFAULT="default",(o=e.DefaultShowDate||(e.DefaultShowDate={})).NORMAL="normal",o.TODAY="today",o.TODAY_WHEN_NULL="todayWhenNull",o.DEFAULT="default",o.DEFAULT_WHEN_NULL="defaultWhenNull",(o=e.SortStyle||(e.SortStyle={})).NONE="none",o.EXCLUSIVE="exclusive",o.INCLUSIVE="inclusive",o.REVERSE="reverse",(o=e.MenuItemType||(e.MenuItemType={})).NORMAL="normal",o.CHECK="check",o.RADIO="radio",o.SEPARATOR="separator",(o=e.HandleVisibility||(e.HandleVisibility={})).VISIBLE="visible",o.HOVERED="hovered",o.ALWAYS="always",o.HIDDEN="hidden",(o=e.CellButton||(e.CellButton={})).NONE="none",o.ACTION="action",o.POPUP="popup",(o=e.ButtonVisibility||(e.ButtonVisibility={})).ALWAYS="always",o.DEFAULT="default",o.VISIBLE="visible",o.HIDDEN="hidden",o.ROWFOCUSED="rowfocused",(o=e.IconLocation||(e.IconLocation={})).LEFT="left",o.RIGHT="right",o.LEFT_EDGE="leftEdge",o.RIGHT_EDGE="rightEdge",o.TOP="top",o.BOTTOM="bottom",o.TOP_EDGE="topEdge",o.BOTTOM_EDGE="bottomEdge",o.CENTER="center",(o=e.RefreshMode||(e.RefreshMode={})).ALL="all",o.VISIBLE_ONLY="visibleOnly",(o=e.ScrollOnEditing||(e.ScrollOnEditing={})).CANCEL="cancel",o.COMMIT="commit",o.DEFAULT="default",(o=e.ItemType||(e.ItemType={})).ROW="row",o.GROUP="group",o.FOOTER="footer",o.TREE="tree",(o=e.SummaryType||(e.SummaryType={})).COUNT="count",o.SUM="sum",o.MAX="max",o.MIN="min",o.AVG="avg",o.VAR="var",o.VARP="varp",o.STDEV="stdev",o.STDEVP="stdevp",o.DATACOUNT="datacount",o.DATAAVG="dataavg",(o=e.ExpanderVisibility||(e.ExpanderVisibility={})).ALWAYS="always",o.DEFAULT="default",o.NONE="none",(o=e.ExitGridWhenTab||(e.ExitGridWhenTab={})).ROW="row",o.GRID="grid",o.NONE="none",(o=e.GroupShowMode||(e.GroupShowMode={})).EXPAND="expand",o.COLLAPSE="collapse",o.ALWAYS="always",(o=e.SyncGridHeight||(e.SyncGridHeight={})).NONE="none",o.OVER="over",o.ALWAYS="always",(o=e.InlineFilterOperator||(e.InlineFilterOperator={})).EQUAL="equal",o.NOT_EQUAL="notEqual",o.CONTAINS="contains",o.NOT_CONTAINS="notContains",o.STARTS_WITH="startsWith",o.ENDS_WITH="endsWith",o.RESET="reset",o.GREATER="greater",o.GREATER_EQUAL="greaterEqual",o.LOWER="lower",o.LOWER_EQUAL="lowerEqual",o.BETWEEN="between",o.EMPTY="empty",(o=e.TreeExpanderIconStyle||(e.TreeExpanderIconStyle={})).TRIANGLE="triangle",o.SQUARE="square"})),nt=(t(ht),ht.T_HASH,ht.T_VIEW,ht.T_ROW,ht.T_FIX,ht.T_HEI,ht.T_IDX,ht.T_FOC,ht.T_LEV,ht.ValueType,ht.SortDirection,ht.SortCase,ht.PagingSource,ht.SortMode,ht.FilterMode,ht.RowGroupAdornments,ht.isHeaderAdornment,ht.isFooterAdornment,ht.isFooterOnlyAdornment,ht.ValidationMode,ht.ValidationLevel,ht.ValidationLevel_compare,ht.SummaryMode,ht.ColumnHeaderItemLocation,ht.BlankState,ht.GridFitStyle,ht.RowMaskType,ht.TextInputCase,ht.DefaultShowDate,ht.SortStyle,ht.MenuItemType,ht.HandleVisibility,ht.CellButton,ht.ButtonVisibility,ht.IconLocation,ht.RefreshMode,ht.ScrollOnEditing,ht.ItemType,ht.SummaryType,ht.ExpanderVisibility,ht.ExitGridWhenTab,ht.GroupShowMode,ht.SyncGridHeight,ht.InlineFilterOperator,ht.TreeExpanderIconStyle,e(function(t,e){function i(t,e,i,o){void 0===e&&(e=0),void 0===i&&(i=0),void 0===o&&(o=0),this.x=t=void 0===t?0:t,this.y=e,this.width=i,this.height=o}Object.defineProperty(e,"__esModule",{value:!0}),_dp(i,"left",{get:function(){return this.x},set:function(t){t-=this.x;this.x+=t,this.width-=t}}),_dp(i,"right",{get:function(){return this.x+this.width},set:function(t){t-=this.x+this.width;this.width+=t}}),_dp(i,"top",{get:function(){return this.y},set:function(t){t-=this.y;this.y+=t,this.height-=t}}),_dp(i,"bottom",{get:function(){return this.y+this.height},set:function(t){t-=this.y+this.height;this.height+=t}}),_dp(i,"isEmpty",{get:function(){return 0===this.width||0===this.height}}),i.prototype.clone=function(){return new i(this.x,this.y,this.width,this.height)},i.prototype.getInner=function(){return new i(0,0,this.width,this.height)},i.prototype.equals=function(t){return t===this||t&&this.x===t.x&&this.y===t.y&&this.width===t.width&&this.height===t.height},i.prototype.leftBy=function(t){return this.x+=t,this.width-=t,this},i.prototype.rightBy=function(t){return this.width+=t,this},i.prototype.topBy=function(t){return this.y+=t,this.height-=t,this},i.prototype.bottomBy=function(t){return this.height+=t,this},i.prototype.shrink=function(t,e){return this.width-=t,this.height-=e,this},i.prototype.expand=function(t,e){return this.width+=t,this.height+=e,this},i.prototype.contains=function(t,e){return t>=this.x&&t<=this.x+this.width&&e>=this.y&&e<=this.y+this.height},i.prototype.setEmpty=function(){return this.width=this.height=0,this},i.prototype.move=function(t,e){return void 0===e&&(e=0),this.x=t=void 0===t?0:t,this.y=e,this},i.prototype.set=function(t,e,i,o){return this.x=t,this.y=e,this.width=i,this.height=o,this},i.prototype.setWidth=function(t){return this.width=t,this},i.prototype.copy=function(t){return this.x=t.x,this.y=t.y,this.width=t.width,this.height=t.height,this},i.prototype.copyHorz=function(t){return this.x=t.x,this.width=t.width,this},i.prototype.copyVert=function(t){return this.y=t.y,this.height=t.height,this},i.prototype.inflate=function(t,e,i,o){return void 0===t&&(t=0),e=void 0!==(e=void 0===e?void 0:e)?e:t,i=void 0!==(i=void 0===i?void 0:i)?i:t,o=void 0!==(o=void 0===o?void 0:o)?o:e,t&&(this.left=this.x-t),e&&(this.top=this.y-e),i&&(this.right=this.right+i),o&&(this.bottom=this.bottom+o),this},i.prototype.offset=function(t,e){return this.x+=t,this.y+=e,this},i.prototype.round=function(){var t=this.clone();return t.x>>>=0,t.y>>>=0,t.width>>>=0,t.height>>>=0,t},i.prototype.union=function(t){var e=this.clone();return e.left=Math.min(this.x,t.x),e.right=Math.max(this.right,t.right),e.top=Math.min(this.y,t.y),e.bottom=Math.max(this.bottom,t.bottom),e},i.prototype.normalize=function(){return this.width<0&&(this.x-=this.width,this.width*=-1),this.height<0&&(this.y-=this.height,this.height*=-1),this},i.prototype.toString=function(){return"{x: "+this.x+", y: "+this.y+", width: "+this.width+", height: "+this.height+"}"},i.Temp=new i,e.Rectangle=i})),re=(t(nt),nt.Rectangle,e(function(t,e){Object.defineProperty(e,"__esModule",{value:!0});var i=navigator.userAgent,o=0<=navigator.platform.toUpperCase().indexOf("MAC"),n=!!window.opera||0<=i.indexOf(" OPR/"),r=!!window.whale,s=!!window.chrome&&!n,a=void 0!==window.InstallTrigger,l=0<Object.prototype.toString.call(HTMLElement).indexOf("Constructor")||!s&&!n&&0<=i.indexOf("Safari"),h=l&&("Win32"==navigator.platform||0<=i.indexOf("Windows")),d=0<=i.toLowerCase().indexOf("edge/"),u=/iPad|iPhone|iPod/.test(i)&&!window.MSStream,c=0<=i.toLowerCase().indexOf("edg/")&&0<=i.toLowerCase().indexOf("chrome/"),_=function(){for(var t=3,e=document.createElement("div"),i=e.getElementsByTagName("i");e.innerHTML="\x3c!--[if gt IE "+ ++t+"]><i></i><![endif]--\x3e",i[0];);return 4<t?t:void 0}(),p=void 0!==_&&_<=9,_=void 0!==_&&_<=8,f=!!i.match(/Trident.*rv\:11\./),g=-1!==navigator.appVersion.indexOf("MSIE 10"),m=-1!==navigator.appVersion.indexOf("MSIE 9"),f=f||g||m,y=(new Date).getTime(),v=void 0,C=void 0,w=void 0,x=void 0;function b(t){return t.defaultView||t.parentWindow}e.getWin=function(t){return t&&t.ownerDocument&&(t.ownerDocument.defaultView||t.ownerDocument.parentWindow)},e.getDoc=function(t){return t&&t.ownerDocument},e.getDocWin=b;I.stopEvent=function(t,e){void 0===e&&(e=!1),t.preventDefault?(t.preventDefault(),t.stopPropagation()):t.returnValue=!1,e&&t.stopImmediatePropagation()},I.setDebugging=function(t,e,i){I.$$_trace=t,I.$$_debugging=e,I.$$_keyLog=i},I.isDebugging=function(){return I.$$_debugging},I.isTrace=function(){return this.$$_trace},I.log=function(t){for(var e=[],i=1;i<arguments.length;i++)e[i-1]=arguments[i];I.isDebugging()&&console.log(t,e)},I.keyLog=function(t){for(var e=[],i=1;i<arguments.length;i++)e[i-1]=arguments[i];I.$$_keyLog&&console.log(t,e)},I.trace=function(t){for(var e=[],i=1;i<arguments.length;i++)e[i-1]=arguments[i];I.isTrace()&&console.log(t,e)},I.isArray=function(t){return Array.isArray(t)},I.isObject=function(t){return null!=t&&"object"==typeof t},I.makeArray=function(t,e){return void 0===e&&(e=!1),null!=t?I.isArray(t)?t:[t]:e?[]:void 0},I.isNumber=function(t){return"number"==typeof t},I.getNumber=function(t,e){return isNaN(parseFloat(t))?e:parseFloat(t)},I.getTimer=function(){return(new Date).getTime()-y},I.isWhiteSpace=function(t){return!t||!t.trim()},I.pad=function(t,e,i){return e=Math.max(e||2,1),i=i||"0",new Array(e-String(t).length+1).join(i)+t},I.pick=function(){for(var t=[],e=0;e<arguments.length;e++)t[e]=arguments[e];for(var i,o=t.length,n=0;n<o;n++)if(null!=(i=t[n]))return i},I.included=function(t){for(var e=[],i=1;i<arguments.length;i++)e[i-1]=arguments[i];for(var o=e.length,n=0;n<o;n++)if(e[n]==t)return!0;return!1},I.valueIn=function(t,e){if("object"==typeof e)for(var i=Object.keys(e),o=0;o<i.length;o++)if(e[i[o]]===t)return!0;return!1},I.compareTextValue=function(t,e,i,o){return t===e||(t=String(t),e=null==e?void 0:String(e),!t&&!e)||!(!t||!e)&&(i||(t=t.toLowerCase(),e=e.toLowerCase()),o?0<=e.indexOf(t):t==e)},I.cast=function(t,e){return t instanceof e?t:null},I.toInt=function(t,e){t=parseInt(t,e||10);return isNaN(t)?0:t},I.toFloat=function(t){t=parseFloat(t);return isNaN(t)?0:t},I.hex=function(t,e,i){void 0===e&&(e=2),void 0===i&&(i="0"),e=Math.max(e||2,1);t=t.toString(16);return i=i||"0",new Array(e-t.length+1).join(i)+t},I.deepCopy=function(t){if(null==t||"object"!=typeof t)return t;if(t instanceof Date)return new Date(t);for(var e=I.isArray(t)?[]:{},i=0,o=Object.keys(t);i<o.length;i++){var n=o[i];t.hasOwnProperty(n)&&(e[n]=I.deepCopy(t[n]))}return e},I.extendObj=function(t,e){if(null==t||"object"!=typeof t||null==e||"object"!=typeof e)return e;for(var i=0,o=Object.keys(t);i<o.length;i++){var n=o[i];t.hasOwnProperty(n)&&void 0===e[n]&&(e[n]=t[n])}},I.getBounds=function(t){var e=new nt.Rectangle;return e.x=t.offsetLeft,e.y=t.offsetTop,e.width=t.offsetWidth,e.height=t.offsetHeight,e},I.toStr=function(t){return"number"==typeof t?isNaN(t)?"":String(t):null!=t?String(t):""},I.setBounds=function(t,e,i,o,n){t=t.style;t.left=e+"px",t.top=i+"px",t.width=o+"px",t.height=n+"px"},I.getClientRect=function(t){var e=t.getBoundingClientRect();return e.cx=t.offsetLeft,e.cy=t.offsetTop,e},I.getChildIndex=function(t){if(t){var e=t.parentNode;if(e)for(var i=e.children,o=i.length;o--;)if(i[o]===t)return o}return-1},I.clearChildren=function(t){for(var e;e=t.lastChild;)t.removeChild(e)},I.clearElements=function(t){for(var e;e=t.lastChild;)I.clearElements(e),t.removeChild(e)},I.addChild=function(t,e){return!(!t||!e||e.parentNode===t||(t.appendChild(e),0))},I.removeChild=function(t,e){return!(!t||!e||e.parentNode!==t||(t.removeChild(e),0))},I.disableSelection=function(t){t=t.style;t["-moz-user-select"]="-moz-none",t["-khtml-user-select"]="none",t["-webkit-user-select"]="none",t["-o-user-select"]="none",t["-ms-user-select"]="none",t["user-select"]="none"},I.setMobile=function(t){v=t},I.setTablet=function(t){w=t},I.isMobile=function(){return void 0!==v?v:C=void 0===C?this.$_checkMobile():C},I.isTablet=function(){return void 0!==w?w:x=void 0===x?this.$_checkTablet():x},I.$_checkTablet=function(){return I.isMobile()&&/(ipad|tablet|(android(?!.*mobile))|(windows(?!.*phone)(.*touch))|kindle|playbook|silk|(puffin(?!.*(IP|AP|WP))))/.test(i.toLowerCase())},I.$_checkMobile=function(){var t=!1;return t=(t=i.match(/Android/i)||i.match(/webOS/i)||i.match(/iPhone/i)||i.match(/iPad/i)||i.match(/iPod/i)||i.match(/BlackBerry/i)||i.match(/Windows Phone/i)?!0:t)||"ontouchstart"in window&&0<=i.indexOf("Macintosh")},I.getBrowserSize=function(t){var t=t?t.ownerDocument:document,e=t.defaultView;return{width:e.innerWidth||t.documentElement.clientWidth||t.body.clientWidth,height:e.innerHeight||t.documentElement.clientHeight||t.body.clientHeight}},I.move=function(t,e,i){t.style.left=e+"px",t.style.top=i+"px"},I.htmlEncode=function(t){return document.createElement("a").appendChild(document.createTextNode(t)).parentNode.innerHTML},I.detach=function(t){return t&&t.parentNode&&t.parentNode.removeChild(t),null},I.getSize=function(t){t=t.getBoundingClientRect();return{width:t.width,height:t.height}},I.getScrolled=function(t){var e=t.body,i=b(t),t=t.documentElement;return{sx:i.pageXOffset||t.scrollLeft||e.scrollLeft,sy:i.pageYOffset||t.scrollTop||e.scrollTop}},I.getOffset=function(t){var e=t.ownerDocument,i=e.defaultView,t=t.getBoundingClientRect(),o=e.body,e=e.documentElement,n=i.pageYOffset||e.scrollTop||o.scrollTop,i=i.pageXOffset||e.scrollLeft||o.scrollLeft,r=e.clientTop||o.clientTop||0,e=e.clientLeft||o.clientLeft||0,o=t.left+i-e,i=t.top+n-r;return{x:Math.round(o),y:Math.round(i)}},I.isAncestorOf=function(t,e){for(var i=e.parentElement;i;){if(i==t)return!0;i=i.parentElement}return!1},I.equalNumbers=function(t,e){return isNaN(t)&&isNaN(e)||!isNaN(t)&&t==e},I.equalArrays=function(t,e){if(t!==e){if(null==t||null==e)return!1;var i=t.length;if(i!=e.length)return!1;for(var o=0;o<i;++o)if(t[o]!==e[o])return!1}return!0},I.equalObjects=function(t,e){return t==e||JSON.stringify(t)===JSON.stringify(e)},I.isLeapYear=function(t){return t%4==0&&t%100!=0||t%400==0},I.incMonth=function(t,e){var i=t.getDate();return t.setDate(1),t.setMonth(t.getMonth()+e),t.setDate(Math.min(i,I.month_days[I.isLeapYear(t.getFullYear())?1:0][t.getMonth()])),t},I.setClassName=function(t,e){(e=e||"")!=t.className&&(t.className=e)},I.addClassName=function(t,e){var i;e=e||"",t.classList?t.classList.add(e):((i=t.className.split(" ")).indexOf(e)<0&&i.push(e),t.className=i.join(" "))},I.removeClassName=function(t,e){var i,o;t.classList?t.classList.remove(e):(i=void 0,0<=(i=(o=t.className.split(" ")).indexOf(e))&&o.splice(i,1),t.className=o.join(" "))},I.setStyle=function(t,e){var i,o=e.style;for(i in t)null!=t[i]?o[i]=t[i]:(o.removeProperty?o.removeProperty(i):o.removeAttribute&&o.removeAttribute(i),o[i]="")},I.getBoundingClientRect2=function(t){t=t.getBoundingClientRect();return{left:t.left,right:t.right,width:t.right-t.left,top:t.top,bottom:t.bottom,height:t.bottom-t.top}},I.getTextLength=function(t){for(var e=0,i=0,o=0;t&&(i=t.charCodeAt(o));o++)e+=i>>7?2:1;return e},I.setTextProp=function(t){t.textProp=this.ieAll?"textContent":"innerText"},I.isEmpty=function(t){return t&&0<Object.keys(t).length},I.isPassive=function(){if(null===I.$_supportPassive){I.$_supportPassive=!1;try{addEventListener("test",null,Object.defineProperty({},"passive",{get:function(){I.$_supportPassive=!0}}))}catch(t){}}return I.$_supportPassive},I.hangulToChosungAll=function(t){for(var e=["ㄱ","ㄲ","ㄴ","ㄷ","ㄸ","ㄹ","ㅁ","ㅂ","ㅃ","ㅅ","ㅆ","ㅇ","ㅈ","ㅉ","ㅊ","ㅋ","ㅌ","ㅍ","ㅎ"],i="",o=0;o<t.length;o++){var n=t.charCodeAt(o)-44032;i+=-1<n&&n<11172?e[Math.floor(n/588)]:t[o]}return i},I.hangulToChosung=function(t){var e,i,o={cho:t,org:t};return/[ㄱ-힝]/.test(t)&&(e=["ㄱ","ㄲ","ㄴ","ㄷ","ㄸ","ㄹ","ㅁ","ㅂ","ㅃ","ㅅ","ㅆ","ㅇ","ㅈ","ㅉ","ㅊ","ㅋ","ㅌ","ㅍ","ㅎ"],i=t.charCodeAt(0)-44032,o.cho=e[((i-(e=i%28))/28-(i=(i-e)/28%21))/21]||t,o.org=["ㅏ","ㅐ","ㅑ","ㅒ","ㅓ","ㅔ","ㅕ","ㅖ","ㅗ","ㅘ","ㅙ","ㅚ","ㅛ","ㅜ","ㅝ","ㅞ","ㅟ","ㅠ","ㅡ","ㅢ","ㅣ"][i]?t:void 0),o},I.addQuot=function(t,e){return t=t&&(0<=t.indexOf("\n")||0<=t.indexOf("\r\n")||'"'==t.charAt(0))?'"'+(t=t.replace(/\"/g,'""'))+'"':t},I.addQuatation=function(t,e,i,o){return null===(t=null!=t&&((i||o)&&(i&&(t=t&&t.replace(/\n/g,i)),o)&&(t=t&&t.replace(/\r/g,o)),e||0<=t.indexOf("\n")||0<=t.indexOf(",")||0<=t.indexOf('"'))?'"'+t.replace(/\"/g,'""')+'"':t)?"":t},I.isClickableTemplate=function(t,e){return Array.prototype.some.call(t.querySelectorAll("input, textarea, a, select, button, [tabindex]"),function(t){return e===t})},I.isFocusableTemplate=function(t,i){return Array.prototype.some.call(t.querySelectorAll("input, textarea, select"),function(t){var e=t.type;return t===i&&"button"!==e&&"checkbox"!==e})},I.objectToCssText=function(e){return"string"==typeof e?e:e?Object.keys(e).map(function(t){return t.split(/(?=[A-Z])/).join("-").toLowerCase()+":"+e[t]}).join(";"):null},I.getLast=function(t){return t[t.length-1]},I.camelToHyphen=function(t,e,i){return void 0===i&&(i="-"),t&&(e?t.split(/(?=[A-Z])/).join(i).toUpperCase():t.split(/(?=[A-Z])/).join(i).toLowerCase())},I.find=function(t,e){for(var i=0;i<t.length;i++)if(e.call(null,t[i],i,t))return t[i]},I.isIE=f,I.isEdge=d,I.ieAll=f||d,I.ieOld=p,I.isMac=o,I.isSafari=l,I.isWinSafari=h,I.isChrome=s,I.isFirefox=a,I.isOpera=n,I.ieLeg=_,I.ieTen=g,I.ieNine=m,I.isiOS=u,I.isChromium=s||c||r||n,I.TextProp=I.ieAll?"innerText":"textContent",I.week_days=window.RG_CONST&&window.RG_CONST.WEEKDAYS?window.RG_CONST.WEEKDAYS:["일","월","화","수","목","금","토"],I.month_days=[[31,28,31,30,31,30,31,31,30,31,30,31],[31,29,31,30,31,30,31,31,30,31,30,31]],I.colonreg=/;(?=(?:[^"]*"[^"]*")*(?![^"]*"))/,I.$_INVISIBLE_EDIT_BOUNDS=new nt.Rectangle(-1e4,-1e4,100,100),I.$$_debugging=!1,I.$$_keyLog=!1,I.$$_trace=null,I.$_supportPassive=null;f=I;function I(){}function E(){}e.Utils=f,E.encode=function(t){var e,i,o,n,r,s,a="",l=0,h=E.CHARACTERS;for(t=E.utf8_encode(t);l<t.length;)o=(e=t.charCodeAt(l++))>>2,n=(3&e)<<4|(e=t.charCodeAt(l++))>>4,r=(15&e)<<2|(i=t.charCodeAt(l++))>>6,s=63&i,isNaN(e)?r=s=64:isNaN(i)&&(s=64),a=a+h.charAt(o)+h.charAt(n)+h.charAt(r)+h.charAt(s);return a},E.decode=function(t){var e,i,o,n,r,s,a="",l=0,h=E.CHARACTERS;for(t=t.replace(/[^A-Za-z0-9\+\/\=]/g,"");l<t.length;)o=h.indexOf(t.charAt(l++)),e=(15&(n=h.indexOf(t.charAt(l++))))<<4|(r=h.indexOf(t.charAt(l++)))>>2,i=(3&r)<<6|(s=h.indexOf(t.charAt(l++))),a+=String.fromCharCode(o<<2|n>>4),64!=r&&(a+=String.fromCharCode(e)),64!=s&&(a+=String.fromCharCode(i));return a=E.utf8_decode(a)},E.utf8_encode=function(t){t=t.replace(/\r\n/g,"\n");for(var e="",i=0;i<t.length;i++){var o=t.charCodeAt(i);o<128?e+=String.fromCharCode(o):e=127<o&&o<2048?(e+=String.fromCharCode(o>>6|192))+String.fromCharCode(63&o|128):(e=(e+=String.fromCharCode(o>>12|224))+String.fromCharCode(o>>6&63|128))+String.fromCharCode(63&o|128)}return e},E.utf8_decode=function(t){for(var e,i,o="",n=0,r=0,s=t.length;n<s;)(e=t.charCodeAt(n))<128?(o+=String.fromCharCode(e),n++):191<e&&e<224?(r=t.charCodeAt(n+1),o+=String.fromCharCode((31&e)<<6|63&r),n+=2):(r=t.charCodeAt(n+1),i=t.charCodeAt(n+2),o+=String.fromCharCode((15&e)<<12|(63&r)<<6|63&i),n+=3);return o},E.CHARACTERS="ABCDEFGHIJKLMNOPQRSTUVWXYZabcdefghijklmnopqrstuvwxyz0123456789+/=",E.btoa=function(t){for(var e,i,o,n=E.CHARACTERS,r="",s=0,a=(t=String(t)).length%3;s<t.length;){if(255<(e=t.charCodeAt(s++))||255<(i=t.charCodeAt(s++))||255<(o=t.charCodeAt(s++)))throw new TypeError("Failed to execute 'btoa' on 'Window': The string to be encoded contains characters outside of the Latin1 range.");r+=n.charAt((e=e<<16|i<<8|o)>>18&63)+n.charAt(e>>12&63)+n.charAt(e>>6&63)+n.charAt(63&e)}return a?r.slice(0,a-3)+"===".substring(a):r},e.Base64=E})),b=(t(re),re.getWin,re.getDoc,re.getDocWin,re.Utils,re.Base64,e(function(t,e){var i,o;Object.defineProperty(e,"__esModule",{value:!0}),(o=i=e.RowState||(e.RowState={})).NONE="none",o.CREATED="created",o.UPDATED="updated",o.DELETED="deleted",o.CREATE_AND_DELETED="createAndDeleted",e.isDeletedState=function(t){return t==i.DELETED||t==i.CREATE_AND_DELETED}})),k=(t(b),b.RowState,b.isDeletedState,e(function(t,e){function i(t){this.format=t}Object.defineProperty(e,"__esModule",{value:!0}),_dp(i,"format",{get:function(){return this._format},set:function(t){t!=this._format&&(this._format=t,this.parse(t))}}),i.prototype.toBool=function(t){return!!this.toBoolStrict(t)},i.prototype.toBoolEx=function(t){var e=this._sensitive?t:t.toLowerCase(),t=this.$_toBool(t);return null!=t?t:e?Boolean(e):void 0},i.prototype.toBoolStrict=function(t){return this.$_toBool(t)},i.prototype.toText=function(t){return t?this._trueText:this._falseText},i.prototype.$_toBool=function(t){if(this._values){t=this._sensitive?t:t.toLowerCase();if(t in this._values)return this._values[t]}},i.prototype.parse=function(t){var e,i,o=this;this._values={},t?(this._trueText=this._falseText=null,t=t.split(/[;\:]/),i=this._sensitive="0"!=t[2],e=t[0]?(i?t[0]:t[0].toLowerCase()).split(","):null,i=t[1]?(i?t[1]:t[1].toLowerCase()).split(","):null,e&&e.forEach(function(t){o._values[t]=!1,o._falseText=o._falseText||t}),i&&i.forEach(function(t){o._values[t]=!0,o._trueText=o._trueText||t})):(this._values[this._trueText="true"]=!0,this._values[this._falseText="false"]=!1)},i.Default=new i("false,f,0:true,t,1:0"),e.BooleanConverter=i})),l=(t(k),k.BooleanConverter,e(function(t,e){function m(t){this._format=null,this._baseYear=2e3,this._patterns=[],this._amText="AM",this._pmText="PM",t&&(this.format=t)}Object.defineProperty(e,"__esModule",{value:!0}),_dp(m,"format",{get:function(){return this._format},set:function(t){if(t!=this._format){if(!t)throw new Error("Invalid empty date format");this._format=t,this.parseFormat(t)}}}),_dp(m,"baseYear",{get:function(){return this._baseYear},set:function(t){t!=this._baseYear&&(this._baseYear=t)}}),_dp(m,"amText",{get:function(){return this._amText},set:function(t){t!=this._amText&&(this._amText=t)}}),_dp(m,"pmText",{get:function(){return this._pmText},set:function(t){t!=this._pmText&&(this._pmText=t)}}),m.prototype.parse=function(t){try{for(var e=0,i=1,o=1,n=0,r=0,s=0,a=0,l=0,h=0,d=this._patterns.length,u=0,c=t.length,_=0;_<d&&u<c;_++){var p=this._patterns[_],f=p.c,g=p.len;switch(f){case"y":e=parseInt(t.substr(u,g));break;case"M":i=parseInt(t.substr(u,g));break;case"d":o=parseInt(t.substr(u,g));break;case"a":if(this._amText&&t.indexOf(this._amText,u)==u)l=12,g=this._amText.length;else{if(!this._pmText||t.indexOf(this._pmText,u)!=u)return null;h=12,g=this._pmText.length}break;case"H":case"h":n=parseInt(t.substr(u,g));break;case"m":r=parseInt(t.substr(u,g));break;case"s":s=parseInt(t.substr(u,g));break;case"S":a=parseInt(t.substr(u,g));break;case".":case"/":case"-":case":":case" ":if(m.DATE_SEPARATORS.indexOf(t.charAt(u))<0)return null;break;default:return null}u+=g}return e<100&&(e+=this._baseYear),0<l?12==n&&(n=0):0<h&&n<12&&(n+=12),new Date(e,i-1,o,n,r,s,a)}catch(t){return null}},m.prototype.parseFormat=function(t){var e,i,o,n=t,r=n.length,s=0;for(this._patterns=[];s<r;)if(e=s,i=n.charAt(s),re.Utils.isWhiteSpace(i)){for(s++;s<r&&re.Utils.isWhiteSpace(n.charAt(s));)s++;this._patterns.push({c:" ",p:e,len:s-e})}else{switch(o=0,i){case"y":4!=(o=this.getPattern(n,s,i))&&2!=o&&this.throwInvalidFormat(n);break;case"M":case"d":case"H":case"h":case"m":case"s":2!=(o=this.getPattern(n,s,i))&&this.throwInvalidFormat(n);break;case"S":3!=(o=this.getPattern(n,s,i))&&this.throwInvalidFormat(n);break;case"a":case".":case"/":case"-":case":":1!=(o=this.getPattern(n,s,i))&&this.throwInvalidFormat(n);break;default:this.throwInvalidFormat(n)}0<o&&(this._patterns.push({c:i,p:s,len:o}),s+=o)}},m.prototype.throwInvalidFormat=function(t){throw new Error("Invalid date format: "+t)},m.prototype.throwInvalidValue=function(t){throw new Error("Invalid date format: "+t)},m.prototype.getPattern=function(t,e,i){for(var o=1;++e<t.length&&t.charAt(e)==i;)o++;return o},m.DATE_SEPARATORS="./-: ",e.DateTimeParser=m})),g=(t(l),l.DateTimeParser,e(function(t,e){Object.defineProperty(e,"__esModule",{value:!0});o.initialize=function(){o.Default.amText="AM",o.Default.pmText="PM",o.Default.baseYear=2e3},_dp(o,"format",{get:function(){return this._format},set:function(t){t!=this._format&&(this._format=t,this.parse(t))}}),_dp(o,"amText",{get:function(){return this._parser.amText},set:function(t){this._parser.amText=t}}),_dp(o,"pmText",{get:function(){return this._parser.pmText},set:function(t){this._parser.pmText=t}}),_dp(o,"baseYear",{get:function(){return this._parser.baseYear},set:function(t){this._parser.baseYear=t}}),o.prototype.toDate=function(t){if(!t)return null;var e=null;switch(this._type){case 0:e=this._parser.parse(t);break;case 2:var i=parseInt(t),e=new Date(i);break;default:e=new Date(t)}return e&&!isNaN(e.getTime())?e:null},o.prototype.parse=function(t){var e;t&&(e=t.toLowerCase(),this._type=Math.max(0,o.Formats.indexOf(e)),0==this._type)&&(this._parser.format=t)},o.Formats=["custom","iso","timestamp","platform"],o.Default=new o("yyyy/MM/dd HH:mm:ss");var i=o;function o(t){this._format="",this._type=0,this._parser=new l.DateTimeParser(null),this.format=t}(e.DateTimeReader=i).initialize()})),se=(t(g),g.DateTimeReader,e(function(t,e){Object.defineProperty(e,"__esModule",{value:!0});var i=0;function _(t){this.$_disposed=!1,t||(this.$_hash=i++)}_.prototype.dispose=function(){return this.$_disposed||this.$_disposing||(this.$_disposed=!0,this.$_disposing=!0,this._doDispose()),null},_.prototype._doDispose=function(){},_dp(_,"disposing",{get:function(){return this.$_disposing}}),_.prototype.isMe=function(t){return t==this.$_hash},_.prototype.$_getters=function(t){for(var e=[],i=Object.getOwnPropertyNames(t),o=0,n=i.length;o<n;o++){var r=i[o],s=Object.getOwnPropertyDescriptor(t,r);s&&s.get&&e.push(r)}return e},_.prototype.doAssignSimple=function(t){return!1},_.prototype.assignFrom=function(t){var e=Object.getPrototypeOf(this);if(t instanceof _)for(var i=Object.getPrototypeOf(t),o={};i&&i.constructor!=_;){for(var n=this.$_getters(i),r=0,s=n.length;r<s;r++)if(!((u=n[r])in o)){o[u]=null;var a=Object.getOwnPropertyDescriptor(e,u);if(a)a.set&&(h=Object.getOwnPropertyDescriptor(i,u).get)&&a.set.call(this,h.call(t));else for(var l=Object.getPrototypeOf(e);l;){var h,d=Object.getOwnPropertyDescriptor(l,u);l=d?(d.set&&(h=Object.getOwnPropertyDescriptor(i,u).get)&&d.set.call(this,h.call(t)),null):Object.getPrototypeOf(l)}}i=Object.getPrototypeOf(i)}else if(!this.doAssignSimple(t))for(var u in t)if(a=Object.getOwnPropertyDescriptor(e,u))a.set&&a.set.call(this,t[u]);else for(l=Object.getPrototypeOf(e);l;){var c=Object.getOwnPropertyDescriptor(l,u);l=c?(c.set&&c.set.call(this,t[u]),null):Object.getPrototypeOf(l)}},_.prototype.extend=function(t){for(var e in t)this.hasOwnProperty(e)&&(this[e]=t[e])},_.prototype.toProxy=function(t){void 0===t&&(t=!0);for(var e={},i=Object.getPrototypeOf(this),o=[];i&&i.constructor!=_;){for(var n=this.$_getters(i),r=0,s=n.length;r<s;r++){var a=n[r],l=Object.getOwnPropertyDescriptor(i,a);if(l)l.get&&l.set&&o.indexOf(a)<0&&(o.push(a),d=l.get.call(this),!t&&void 0===d||(e[a]=d));else for(var h=Object.getPrototypeOf(i);h;)var d,u=Object.getOwnPropertyDescriptor(h,a),h=u?(u.get&&u.set&&o.indexOf(a)<0&&(o.push(a),d=u.get.call(this),!t&&void 0===d||(e[a]=u.get.call(this))),null):Object.getPrototypeOf(h)}i=Object.getPrototypeOf(i)}return e},e.Base=_})),$=(t(se),se.Base,e(function(V,t){Object.defineProperty(t,"__esModule",{value:!0});B=Error,ne.__extends(N,B);var B,n=N;function N(t,e){var i=B.call(this,t)||this;return i.message=t,i.tokenPos=e,i}t.ExpressionSyntaxError=n;$=Error,ne.__extends(H,$);var $,A=H;function H(t){var e=$.call(this,t)||this;return e.message=t,e}t.ExpressionEvaluationError=A;function e(){for(var t=[],e=0;e<arguments.length;e++)t[e]=arguments[e];for(var i=[],o=0,n=t;o<n.length;o++)i[n[o]]=!0;return i}var U=e(26,27),G=e(40,45,46,47,48,49,50,51,52,53,54,55,56,57,41,42,43,44),W=e(4,5,18,19),j=e(11,3,2,14,15,16,17),z=(i.prototype.clear=function(){this._source=null},i.prototype.next=function(){var t=this._source.charCodeAt(this._run);this._tokenPos=this._run,t<256?this._procs[t].call(this):this.identProc()},i.prototype.unkownProc=function(){this._tokenId=0,this._run++},i.prototype.symbolProc=function(){this._tokenId=80,this._run++},i.prototype.commaProc=function(){this._tokenId=32,this._run++},i.prototype.crProc=function(){this._tokenId=33,10==this._source.charCodeAt(this._run+1)?this._run+=2:this._run++,this._lineNo++,this._linePos=this._run},i.prototype.lfProc=function(){this._tokenId=33,this._run++,this._lineNo++,this._linePos=this._run},i.prototype.equalProc=function(){this._tokenId=40,this._run++},i.prototype.greaterProc=function(){"="==this._source.charAt(this._run+1)?(this._tokenId=42,this._run+=2):(this._tokenId=41,this._run++)},i.prototype.lowerProc=function(){"="==this._source.charAt(this._run+1)?(this._tokenId=44,this._run+=2):">"==this._source.charAt(this._run+1)?(this._tokenId=45,this._run+=2):(this._tokenId=43,this._run++)},i.prototype.nextIdent=function(){for(var t=this._run;t<this._len&&!this.IS_IDENT[this._source.charCodeAt(t)];)t++;for(var e=t;t<this._len&&this.IS_IDENT[this._source.charCodeAt(t)];)t++;return e<t?(this._nextRun=t,this._source.substr(e,t-e).toLowerCase()):null},i.prototype.identProc=function(){for(var t=this._run;this._run<this._len&&(this.IS_IDENT[this._source.charCodeAt(this._run)]||255<this._source.charCodeAt(this._run));)this._run++;var e=this._source.substr(t,this._run-t).toLowerCase();if(this.Keywords.hasOwnProperty(e))switch(this._tokenId=this.Keywords[e],this._tokenId){case 13:if(e=this.nextIdent())switch(e){case"like":this._tokenId=47,this._run=this._nextRun;break;case"ilike":this._tokenId=49,this._run=this._nextRun;break;case"match":this._tokenId=51,this._run=this._nextRun;break;case"imatch":this._tokenId=53,this._run=this._nextRun;break;case"likehan":this._tokenId=56,this._run=this._nextRun;break;case"ilikehan":this._tokenId=57,this._run=this._nextRun}break;case 26:"not"==(e=this.nextIdent())&&(this._tokenId=27,this._run=this._nextRun)}else this._tokenId=10},i.prototype.integerProc=function(){for(this._tokenId=64,this._run++;this._run<this._len&&this.IS_INTEGER[this._source.charCodeAt(this._run)];)this._run++},i.prototype.numberProc=function(){for(this._tokenId=64,this._run++;this._run<this._len&&this.IS_NUMBER[this._source.charCodeAt(this._run)];){if("."==this._source.charAt(this._run)){if("."==this._source.charAt(this._run+1))break;this._tokenId=63}this._run++}},i.prototype.minusProc=function(){this._tokenId=4,this._run++},i.prototype.plusProc=function(){this._tokenId=5,this._run++},i.prototype.pointProc=function(){"."==this._source.charAt(this._run+1)?(this._tokenId=68,this._run+=2):(this._tokenId=65,this._run++)},i.prototype.roundOpenProc=function(){this._tokenId=66,this._run++},i.prototype.roundCloseProc=function(){this._tokenId=67,this._run++},i.prototype.slashProc=function(){this._tokenId=2,this._run++},i.prototype.spaceProc=function(){for(this._tokenId=71,this._run++;this._run<this._len&&this.IS_WHITE[this._source.charCodeAt(this._run)];)this._run++},i.prototype.bracketOpenProc=function(){this._tokenId=69,this._run++},i.prototype.bracketCloseProc=function(){this._tokenId=70,this._run++},i.prototype.starProc=function(){this._tokenId=3,this._run++},i.prototype.modProc=function(){this._tokenId=15,this._run++},i.prototype.stringProc=function(){this._tokenId=61;do{var t=this._source.charCodeAt(this._run);if(this.IS_END[t])throw new n("Untermintated string",t)}while(t==this.BACKSLASH&&this._run++,this._run++,this._run<this._len&&this._source.charCodeAt(this._run)!=this.QUOTATION);this._run++},i.prototype.smallStringProc=function(){this._tokenId=61;do{var t=this._source.charCodeAt(this._run);if(this.IS_END[t])throw new n("Untermintated string",t)}while(t==this.BACKSLASH&&this._run++,this._run++,this._run<this._len&&this._source.charCodeAt(this._run)!=this.SQUOTATION);this._run++},i.prototype.initProcs=function(){this._procs=[];for(var t=1;t<=255;t++)this._procs[t]=this.symbolProc;for(t=1;t<=32;t++)this._procs[t]=this.spaceProc;this._procs[10]=this.lfProc,this._procs[13]=this.crProc,this._procs["$".charCodeAt(0)]=this.integerProc,this._procs[this.QUOTATION]=this.stringProc,this._procs[this.SQUOTATION]=this.smallStringProc;for(t=0;t<=9;t++)this._procs["0".charCodeAt(0)+t]=this.numberProc;for(t="A".charCodeAt(0);t<="Z".charCodeAt(0);t++)this._procs[t]=this.identProc;for(t="a".charCodeAt(0);t<="z".charCodeAt(0);t++)this._procs[t]=this.identProc;this._procs["_".charCodeAt(0)]=this.identProc,this._procs["(".charCodeAt(0)]=this.roundOpenProc,this._procs[")".charCodeAt(0)]=this.roundCloseProc,this._procs["*".charCodeAt(0)]=this.starProc,this._procs["+".charCodeAt(0)]=this.plusProc,this._procs[",".charCodeAt(0)]=this.commaProc,this._procs["-".charCodeAt(0)]=this.minusProc,this._procs[".".charCodeAt(0)]=this.pointProc,this._procs["/".charCodeAt(0)]=this.slashProc,this._procs["%".charCodeAt(0)]=this.modProc,this._procs["<".charCodeAt(0)]=this.lowerProc,this._procs["=".charCodeAt(0)]=this.equalProc,this._procs[">".charCodeAt(0)]=this.greaterProc,this._procs["[".charCodeAt(0)]=this.bracketOpenProc,this._procs["]".charCodeAt(0)]=this.bracketCloseProc},_dp(i,"tokenId",{get:function(){return this._tokenId}}),_dp(i,"tokenLoc",{get:function(){return{x:this._tokenPos-this._linePos,y:this._lineNo}}}),_dp(i,"tokenLen",{get:function(){return this._run-this._tokenPos}}),_dp(i,"token",{get:function(){return this._source.substr(this._tokenPos,this.tokenLen)}}),_dp(i,"isSpace",{get:function(){return 71==this._tokenId}}),i.prototype.init=function(t){this._source=t,this._len=t.length,this._lineNo=0,this._linePos=0,this._tokenPos=0,this._runAhead=this._run=0,this._tokenId=0},i.prototype.charAhread=function(){for(this._runAhead=this._run;this._runAhead<this._len&&0<this._source.charCodeAt(this._runAhead)&&this._source.charCodeAt(this._runAhead)<=32;)this._runAhead++;return this._source.charCodeAt(this._runAhead)},i.prototype.nextId=function(t){for(;this.next(),this._run<this._len&&this._tokenId!=t;);return null},i.prototype.nextNoSpace=function(){if(this._run<this._len)for(;this.next(),this._run<this._len&&this.isSpace;);return null},i.prototype.isFirstInLine=function(){if(0==this._tokenPos)return!0;var t,e=this._tokenPos;for(e--;0<e&&this.IS_WHITE[this._source.charCodeAt(e)];)e--;return 0==e||10==(t=this._source.charCodeAt(e))||13==t},i);function i(){this.IS_IDENT=[],this.IS_INTEGER=[],this.IS_NUMBER=[],this.IS_WHITE=[],this.IS_END=[],this.QUOTATION='"'.charCodeAt(0),this.SQUOTATION="'".charCodeAt(0),this.BACKSLASH="\\".charCodeAt(0),this.Keywords={str:20,num:21,bool:23,not:13,len:24,and:11,in:12,mod:15,or:18,div:14,shl:16,shr:17,xor:19,trim:25,is:26,like:46,ilike:48,match:50,imatch:52,likehan:54,ilikehan:55,defined:35,null:34,empty:36,nan:37,datestr:90,year:91,month:92,day:93,hour:94,rounddown:95},this._procs=null,this._source=null,this._len=0,this._tokenId=0,this._run=0,this._runAhead=0,this._nextRun=0,this._lineNo=0,this._linePos=0;for(var t=this._tokenPos=0;t<256;t++)this.IS_IDENT[t]=t=="_".charCodeAt(0)||t>="0".charCodeAt(0)&&t<="9".charCodeAt(0)||t>="a".charCodeAt(0)&&t<="z".charCodeAt(0)||t>="A".charCodeAt(0)&&t<="Z".charCodeAt(0),this.IS_INTEGER[t]=t>="0".charCodeAt(0)&&t<="9".charCodeAt(0)||t>="a".charCodeAt(0)&&t<="f".charCodeAt(0)||t>="A".charCodeAt(0)&&t<="F".charCodeAt(0),this.IS_NUMBER[t]=t>="0".charCodeAt(0)&&t<="9".charCodeAt(0)||t==".".charCodeAt(0)||t=="e".charCodeAt(0)||t=="E".charCodeAt(0),this.IS_WHITE[t]=1<=t&&t<=9||11==t||14<=t&&t<=32,this.IS_END[t]=0==t;this.initProcs()}Y=se.Base,ne.__extends(r,Y),r.prototype.isIdentifier=function(t){throw new Error("Token is not a valid Identifier: "+t)},r.prototype.evaluateIdentifier=function(t){throw new Error("Invalid identifier key: "+t)},r.prototype.evaluateIndexerI=function(t,e){throw new Error("Invalid identifier indexer: "+t)},r.prototype.evaluateIndexerS=function(t,e,i){throw new Error("Invalid identifier indexer: "+t)};var Y,o=r;function r(){return Y.call(this)||this}t.ExpressionRuntime=o;_dp(a,"value",{get:function(){}}),_dp(a,"asLiteral",{get:function(){return null}}),a.prototype.prepareValue=function(){},a.prototype.getLiteral=function(){},a.prototype.isIdentifier=function(t){return!1},a.prototype.toString=function(){return String(this)};var s=a;function a(){}t.ExpressionNode=s;l=s,ne.__extends(q,l);var l,h=q;function q(){return null!==l&&l.apply(this,arguments)||this}var X;X=s,ne.__extends(d,X),d.prototype.evaluate=function(t){},d.prototype.toString=function(){return""},d.Default=new d;function d(){return X.call(this)||this}K=s,ne.__extends(c,K),c.prototype.evaluate=function(t){if(this._literal)return this._literal.value;if(!this._rightExpr)return this._leftExpr.evaluate(t);var e=this._leftExpr.evaluate(t),i=this._rightExpr.evaluate(t);switch(this._operator){case 40:return e==i;case 45:return e!=i;case 41:return i<e;case 42:return i<=e;case 43:return e<i;case 44:return e<=i;case 46:return this.calcLike(e,i,!1);case 47:return!this.calcLike(e,i,!1);case 48:return this.calcLike(e,i,!0);case 49:return!this.calcLike(e,i,!0);case 54:return this.calcLikeHan(e,i,!1);case 56:return!this.calcLikeHan(e,i,!1);case 55:return this.calcLikeHan(e,i,!0);case 57:return!this.calcLikeHan(e,i,!0);case 50:return this.calcMatch(e,i,!1);case 51:return!this.calcMatch(e,i,!1);case 52:return this.calcMatch(e,i,!0);case 53:return!this.calcMatch(e,i,!0);default:throw new A("Unknown operator: "+this._operator)}},c.prototype.toString=function(){var t="";if(this._literal)t=this._literal.toString();else if(this._rightExpr){var e=this._leftExpr.toString(),i=this._rightExpr.toString(),o=void 0;switch(this._operator){case 40:o="=";break;case 45:o="<>";break;case 41:o=">";break;case 42:o=">=";break;case 43:o="<";break;case 44:o="<=";break;case 46:o="like";break;case 47:o="not like";break;case 48:o="ilike";break;case 49:o="not ilike";break;case 50:o="match";break;case 51:o="not match";break;case 52:o="imatch";break;case 53:o="not imatch";break;case 54:o="likeHan";break;case 56:o="not likehan";break;case 55:o="ilikeHan";break;case 57:o="not ilikehan";break;case 32:o=",";break;default:o="<<ERROR>>"}t="("+e+" "+o+" "+i+")"}else t=this._leftExpr.toString();return t},c.prototype.isIdentifier=function(t){return this._leftExpr&&!this._rightExpr&&this._leftExpr.isIdentifier(t)},c.prototype.prepareValue=function(){this._leftExpr.prepareValue(),null==this._rightExpr?this._literal=this._leftExpr.getLiteral():this._rightExpr.prepareValue()},c.prototype.getLiteral=function(){return this._literal},c.prototype.calcLike=function(t,e,i){var o,n,t=String(t),e=String(e);return!(!t||!e)&&(i&&(t=t.toLowerCase(),e=e.toLowerCase()),1<(i=e.length)?(o="%"==e.charAt(0),n="%"==e.charAt(i-1),o&&n?(e=e.substr(1,i-2),0<=t.indexOf(e,0)):o?(e=e.substr(1,i-1),t.lastIndexOf(e)==t.length-e.length):n?(e=e.substr(0,i-1),0==t.indexOf(e,0)):t==e):"%"!=e&&t==e)},c.prototype.calcLikeHan=function(t,e,i){if(t&&e){t=String(t);var o=(e=String(e)).length,n="%"==e.charAt(0),r="%"==e.charAt(o-1);if(e=n&&r?e.substr(1,o-2):n?e.substr(1,o-1):r?e.substr(0,o-1):e,t.length<e.length)return;i&&(t=t.toLowerCase(),e=e.toLowerCase());var s=re.Utils.hangulToChosungAll(t),a=re.Utils.hangulToChosungAll(e),l=-1,h=void 0;if(n&&r){for(;0<=(l=s.indexOf(a,l+1));){for(var d=0;d<a.length&&d+l<s.length;d++){var u=re.Utils.hangulToChosung(t[d+l]);if((c=re.Utils.hangulToChosung(e[d])).org&&c.org!==u.org||!c.cho||c.cho!==u.cho){h=!1;break}h=!0}if(h)return!0}return!1}if(n){if((l=s.lastIndexOf(a))===s.length-a.length){for(d=0;d<a.length;d++){u=re.Utils.hangulToChosung(t[l+d]);if((c=re.Utils.hangulToChosung(e[d])).org&&c.org!==u.org||!c.cho||c.cho!==u.cho){h=!1;break}h=!0}if(h)return!0}return!1}if(r){if(0===s.indexOf(a)){for(d=0;d<a.length;d++){var c,u=re.Utils.hangulToChosung(t[d]);if((c=re.Utils.hangulToChosung(e[d])).org&&c.org!==u.org||!c.cho||c.cho!==u.cho){h=!1;break}h=!0}if(h)return!0}return!1}return t==e}return!1},c.prototype.calcMatch=function(t,e,i){return new RegExp(e,"m"+(i?"i":"")).test(t)};var K,u=c;function c(){var t=K.call(this)||this;return t._operator=0,t}_=s,ne.__extends(f,_),_dp(f,"value",{get:function(){}}),_dp(f,"asLiteral",{get:function(){return this}}),f.prototype.evaluate=function(t){};var _,p=f;function f(){return null!==_&&_.apply(this,arguments)||this}g=p,ne.__extends(Z,g),Z.prototype.toString=function(){return"defined"};var g,J=Z;function Z(){return null!==g&&g.apply(this,arguments)||this}m=p,ne.__extends(tt,m),tt.prototype.toString=function(){return"empty"};var m,Q=tt;function tt(){return null!==m&&m.apply(this,arguments)||this}y=p,ne.__extends(v,y),_dp(v,"value",{get:function(){return NaN}}),v.prototype.toString=function(){return"null"};var y,et=v;function v(){return null!==y&&y.apply(this,arguments)||this}C=p,ne.__extends(ot,C),ot.prototype.toString=function(){return"NaN"};var C,it=ot;function ot(){return null!==C&&C.apply(this,arguments)||this}nt=u,ne.__extends(w,nt),w.prototype.prepareValue=function(){this._leftExpr.prepareValue(),this._literal=this._leftExpr.getLiteral()},w.prototype.getLiteral=function(){return null},w.prototype.evaluate=function(t){var e,i=this._literal?this._literal.value:this._leftExpr.evaluate(t);switch(this._value){case w.DEFINED:e=void 0!==i;break;case w.NULL:e=null==i;break;case w.EMPTY:e=null==i||0==String(i).length;break;case w.NAN:e=null===i||isNaN(i);break;default:return}return this._isNot?!e:e},w.prototype.toString=function(){var t="<<ERROR>>";switch(this._value){case w.DEFINED:t="defined";break;case w.NULL:t="null";break;case w.EMPTY:t="empty";break;case w.NAN:t="NaN"}return"("+(this._isNot?"is not ":"is ")+t+")"},w.DEFINED=0,w.NULL=1,w.EMPTY=2,w.NAN=3;var nt,rt=w;function w(t,e,i){var o=nt.call(this)||this;return o._leftExpr=t,o._operator=e,o._isNot=27==e,o._value=-1,i instanceof J?o._value=w.DEFINED:i instanceof et?o._value=w.NULL:i instanceof Q?o._value=w.EMPTY:i instanceof it&&(o._value=w.NAN),o}st=h,ne.__extends(x,st),_dp(x,"value",{get:function(){return this._value}}),_dp(x,"asLiteral",{get:function(){return this}}),x.prototype.evaluate=function(t){return this._value},x.prototype.toString=function(){return String(this._value)};var st,at=x;function x(t){var e=st.call(this)||this;return e._value=Number(t),e}lt=h,ne.__extends(b,lt),_dp(b,"value",{get:function(){return this._value}}),_dp(b,"asLiteral",{get:function(){return this}}),b.prototype.evaluate=function(t){return this._value},b.prototype.toString=function(){return String(this._value)};var lt,ht=b;function b(t){var e=lt.call(this)||this;return e._value=parseInt(t),e}dt=h,ne.__extends(I,dt),_dp(I,"value",{get:function(){return this._value}}),_dp(I,"asLiteral",{get:function(){return this}}),I.prototype.evaluate=function(t){return this._value},I.prototype.toString=function(){return"'"+this._value+"'"};var dt,ut=I;function I(t){for(var e=dt.call(this)||this,i=(e._value=t.substr(1,t.length-2),""),o=0,n=!1;o<e._value.length;)"\\"!=e._value[o]||n?(n=!1,i+=e._value[o++]):(n=!0,o++);return e._value=i,e}ct=s,ne.__extends(E,ct),_dp(E,"identifier",{get:function(){return this._literal}}),E.prototype.evaluate=function(t){return-651212==this._idKey&&(this._idKey=t.isIdentifier(this._literal)),t.evaluateIdentifier(this._idKey)},E.prototype.toString=function(){return this._literal};var ct,_t=E;function E(t){var e=ct.call(this)||this;return e._idKey=-651212,e._literal=t,e}pt=u,ne.__extends(S,pt),S.prototype.prepareValue=function(){var t=this._indexer.asLiteral;t||this._indexer instanceof u&&(this._indexer.prepareValue(),t=this._indexer.getLiteral()),t&&("string"==typeof(t=t.value)?this._strIndex=t:this._intIndex=parseInt(t),this._capital)&&this._strIndex&&(this._strIndex=this._strIndex.toUpperCase())},S.prototype.getLiteral=function(){return null},S.prototype.evaluate=function(t){var e;return-1490313==this._idKey&&(this._idKey=t.isIdentifier(this._ident)),this._strIndex?t.evaluateIndexerS(this._idKey,this._strIndex,this._capital):isNaN(this._intIndex)?"string"==typeof(e=this._indexer.evaluate(t))?t.evaluateIndexerS(this._idKey,e,this._capital):t.evaluateIndexerI(this._idKey,e):t.evaluateIndexerI(this._idKey,this._intIndex)},S.prototype.toString=function(){return this._ident+"["+this._indexer.toString()+"]"};var pt,ft=S;function S(t,e,i){var o=pt.call(this)||this;return o._idKey=-1490313,o._intIndex=NaN,o._strIndex=null,o._ident=t,o._indexer=e,o._capital=i,o}gt=s,ne.__extends(R,gt),R.prototype.prepareValue=function(){this._literal=this._factor.asLiteral,!this._literal&&this._factor instanceof s&&(this._factor.prepareValue(),this._literal=this._factor.getLiteral())},R.prototype.getLiteral=function(){return null};var gt,o=R;function R(t){var e=gt.call(this)||this;return e._factor=t,e}mt=o,ne.__extends(T,mt),T.prototype.evaluate=function(t){t=this._literal instanceof h?this._literal.value:this._factor.evaluate(t);return t?t.length:0},T.prototype.toString=function(){return"(len "+this._factor+")"};var mt,yt=T;function T(t){return mt.call(this,t)||this}vt=o,ne.__extends(D,vt),D.prototype.evaluate=function(t){t=this._literal instanceof h?this._literal.value:this._factor.evaluate(t);return t&&t.trim()},D.prototype.toString=function(){return"(trim "+this._factor+")"};var vt,Ct=D;function D(t){return vt.call(this,t)||this}wt=o,ne.__extends(k,wt),k.prototype.evaluate=function(t){return-(this._literal instanceof h?this._literal.value:this._factor.evaluate(t))},k.prototype.toString=function(){return"-"+this._factor};var wt,xt=k;function k(t){return wt.call(this,t)||this}bt=o,ne.__extends(M,bt),M.prototype.evaluate=function(t){return this._literal instanceof h?this._literal.value:this._factor.evaluate(t)},M.prototype.toString=function(){return"+"+this._factor};var bt,It=M;function M(t){return bt.call(this,t)||this}Et=o,ne.__extends(F,Et),F.prototype.evaluate=function(t){return!(this._literal instanceof h?this._literal.value:this._factor.evaluate(t))},F.prototype.toString=function(){return"(not "+this._factor+")"};var Et,St=F;function F(t){return Et.call(this,t)||this}Rt=o,ne.__extends(Dt,Rt),Dt.prototype.evaluate=function(t){t=this._literal instanceof h?this._literal.value:this._factor.evaluate(t);return Boolean(t)},Dt.prototype.toString=function(){return"(bool "+this._factor+")"};var Rt,Tt=Dt;function Dt(t){return Rt.call(this,t)||this}kt=o,ne.__extends(Ft,kt),Ft.prototype.evaluate=function(t){t=this._literal instanceof h?this._literal.value:this._factor.evaluate(t);return Number(t)},Ft.prototype.toString=function(){return"(num "+this._factor+")"};var kt,Mt=Ft;function Ft(t){return kt.call(this,t)||this}Lt=o,ne.__extends(Pt,Lt),Pt.prototype.evaluate=function(t){t=this._literal instanceof h?this._literal.value:this._factor.evaluate(t);return String(t)},Pt.prototype.toString=function(){return"(str "+this._factor+")"};var Lt,Ot=Pt;function Pt(t){return Lt.call(this,t)||this}Vt=o,ne.__extends(Nt,Vt),Nt.prototype.evaluate=function(t){var e,t=this._literal instanceof h?this._literal.value:this._factor.evaluate(t);return t instanceof Date&&(t=(e=re.Utils.pad)(t.getFullYear(),4)+e(t.getMonth()+1,2)+e(t.getDate(),2)),String(t)},Nt.prototype.toString=function(){return"(datestr "+this._factor+")"};var Vt,Bt=Nt;function Nt(t){return Vt.call(this,t)||this}$t=o,ne.__extends(Ht,$t),Ht.prototype.evaluate=function(t){t=this._literal instanceof h?this._literal.value:this._factor.evaluate(t);return t instanceof Date?t.getFullYear():null},Ht.prototype.toString=function(){return"(year "+this._factor+")"};var $t,At=Ht;function Ht(t){return $t.call(this,t)||this}Ut=o,ne.__extends(Wt,Ut),Wt.prototype.evaluate=function(t){t=this._literal instanceof h?this._literal.value:this._factor.evaluate(t);return t instanceof Date?t.getMonth()+1:null},Wt.prototype.toString=function(){return"(month "+this._factor+")"};var Ut,Gt=Wt;function Wt(t){return Ut.call(this,t)||this}jt=o,ne.__extends(Yt,jt),Yt.prototype.evaluate=function(t){t=this._literal instanceof h?this._literal.value:this._factor.evaluate(t);return t instanceof Date?t.getDate():null},Yt.prototype.toString=function(){return"(day "+this._factor+")"};var jt,zt=Yt;function Yt(t){return jt.call(this,t)||this}qt=o,ne.__extends(Kt,qt),Kt.prototype.evaluate=function(t){t=this._literal instanceof h?this._literal.value:this._factor.evaluate(t);return t instanceof Date?t.getHours():null},Kt.prototype.toString=function(){return"(hour "+this._factor+")"};var qt,Xt=Kt;function Kt(t){return qt.call(this,t)||this}Jt=o,ne.__extends(Qt,Jt),Qt.prototype.evaluate=function(t){var e=this._factor,i=e.getLiteral();if(e.getLiteral())return i.value;if(e._rightExpr){var i=e._leftExpr.evaluate(t),o=e._rightExpr.evaluate(t);if(32!==e._operator)throw new A("Unknown operator: "+e._operator);o=Math.pow(10,o);return Math.floor(i*o)/o}return e._leftExpr.evaluate(t)},Qt.prototype.toString=function(){return"(rounddown "+this._factor+")"};var Jt,Zt=Qt;function Qt(t){return Jt.call(this,t)||this}te=s,ne.__extends(L,te),L.prototype.addFactor=function(t){this._factors.push(t)},L.prototype.addOperator=function(t){this._operators.push(t)},L.prototype.isIdentifier=function(t){return 1==this._factors.length&&this._factors[0]instanceof _t&&this._factors[0].identifier==t},L.prototype.prepareValue=function(){for(var t,e=0,i=this._factors.length;e<i;e++)this._factors[e].prepareValue();0==this._operators.length&&(t=this._factors[0],this._literal=t.asLiteral,this._literal||(this._literal=t.getLiteral()))},L.prototype.getLiteral=function(){return this._literal},L.prototype.evaluate=function(t){if(this._literal)return this._literal.value;for(var e=this._factors.length,i=this._factors[0].evaluate(t),o=1;o<e;o++){var n=this._factors[o].evaluate(t);switch(this._operators[o-1]){case 11:i=i&&n;break;case 3:i*=n;break;case 2:i/=n;break;case 14:i=Math.floor(Math.floor(i)/Math.floor(n));break;case 15:i%=n;break;case 16:i<<=n;break;case 17:i>>=n}}return i},L.prototype.toString=function(){var t="";if(this._literal)t=this._literal.toString();else if(1==this._factors.length)t=this._factors[0].toString();else{for(var t="("+this._factors[0].toString(),e=1;e<this._factors.length;e++){switch(this._operators[e-1]){case 11:t+=" and ";break;case 3:t+=" * ";break;case 2:case 14:t+=" / ";break;case 15:t+=" mod ";break;case 16:t+=" shl ";break;case 17:t+=" shr "}t+=this._factors[e].toString()}t+=")"}return t};var te,ee=L;function L(){var t=te.call(this)||this;return t._factors=[],t._operators=[],t._literal=null,t}ie=s,ne.__extends(O,ie),O.prototype.addTerm=function(t){this._terms.push(t)},O.prototype.addOperator=function(t){this._operators.push(t)},O.prototype.isIdentifier=function(t){return 1==this._terms.length&&this._terms[0].isIdentifier(t)},O.prototype.prepareValue=function(){for(var t=0,e=this._terms.length;t<e;t++)this._terms[t].prepareValue();0==this._operators.length&&(this._literal=this._terms[0].getLiteral())},O.prototype.getLiteral=function(){return this._literal},O.prototype.evaluate=function(t){if(this._literal)return this._literal.value;for(var e=this._terms.length,i=this._terms[0].evaluate(t),o=1;o<e;o++){var n=this._terms[o].evaluate(t);switch(this._operators[o-1]){case 4:i-=n;break;case 5:i+=n;break;case 18:i=i||n;break;case 19:i^=n}}return i},O.prototype.toString=function(){var t="";if(this._literal)t=this._literal.toString();else if(1==this._terms.length)t=this._terms[0].toString();else{for(var t="("+this._terms[0].toString(),e=1;e<this._terms.length;e++){switch(this._operators[e-1]){case 4:t+=" - ";break;case 5:t+=" + ";break;case 18:t+=" or ";break;case 19:t+=" xor ";break;default:t+=" <<ERROR>> "}t+=this._terms[e].toString()}t+=")"}return t};var ie,oe=O;function O(){var t=ie.call(this)||this;return t._terms=[],t._operators=[],t._literal=null,t}function P(){this._node=null,this._capitalIndexers=null,this._lexer=new z}P.prototype.syntaxError=function(t,e){throw new n(t,e)},P.prototype.expected=function(t){if(t!=this._lexer.tokenId)throw new n("Token is not a expected kind ["+t+"]: "+this._lexer.tokenId,this._lexer.tokenLoc);this.nextToken()},P.prototype.nextToken=function(){this._lexer.nextNoSpace()},P.prototype.doExpression=function(){var t,e=null,i=this.doSimpleExpression();if(U[t=this._lexer.tokenId]){this.nextToken();var o=this.doSimpleExpression(),o=(o.prepareValue(),o.getLiteral());if(!(o instanceof p))throw new n("is operator's operand must be defined, null or empty: "+this._lexer.tokenId,null);e=new rt(i,t,o)}else(e=new u)._leftExpr=i,!G[this._lexer.tokenId]&&32!=this._lexer.tokenId||(e._operator=this._lexer.tokenId,this.nextToken(),e._rightExpr=this.doSimpleExpression());return e},P.prototype.doSimpleExpression=function(){var t=new oe;for(t.addTerm(this.doTerm());W[this._lexer.tokenId];)t.addOperator(this._lexer.tokenId),this.nextToken(),t.addTerm(this.doTerm());return t},P.prototype.doTerm=function(){var t=new ee;for(t.addFactor(this.doFactor());j[this._lexer.tokenId];)t.addOperator(this._lexer.tokenId),this.nextToken(),t.addFactor(this.doFactor());return t},P.prototype.doFactor=function(){var t=this._lexer.tokenId;switch(t){case 61:return this.doCharString();case 66:return this.doRoundOpen();case 10:return this.doIdentifier();case 64:return this.doInteger();case 63:return this.doNumber();case 4:return this.doMinus();case 5:return this.doPlus();case 13:return this.doNot();case 35:return this.doDefined();case 34:return this.doNull();case 36:return this.doEmpty();case 37:return this.doNaN();case 23:return this.doToBool();case 21:return this.doToNumber();case 20:return this.doToString();case 24:return this.doLength();case 25:return this.doTrim();case 90:return this.doToDateString();case 91:return this.doToYear();case 92:return this.doToMonth();case 93:return this.doToDay();case 94:return this.doToHour();case 95:return this.doRoundDown()}throw new n("Unkown token: "+t,this._lexer.tokenLoc)},P.prototype.doCharString=function(){var t=this._lexer.token;return this.nextToken(),new ut(t)},P.prototype.doRoundOpen=function(){this.nextToken();var t=this.doExpression();return this.expected(67),t},P.prototype.doIdentifier=function(){var t,e=this._lexer.token;return this.nextToken(),69==this._lexer.tokenId?(this.nextToken(),t=this.doExpression(),this.expected(70),new ft(e,t,0<=this._capitalIndexers.indexOf(e))):new _t(e)},P.prototype.doNumber=function(){var t=this._lexer.token;return this.nextToken(),new at(t)},P.prototype.doInteger=function(){var t=this._lexer.token;return this.nextToken(),new ht(t)},P.prototype.doMinus=function(){return this.nextToken(),new xt(this.doFactor())},P.prototype.doPlus=function(){return this.nextToken(),new It(this.doFactor())},P.prototype.doNot=function(){return this.nextToken(),new St(this.doFactor())},P.prototype.doDefined=function(){return this.nextToken(),new J},P.prototype.doNull=function(){return this.nextToken(),new et},P.prototype.doEmpty=function(){return this.nextToken(),new Q},P.prototype.doNaN=function(){return this.nextToken(),new it},P.prototype.doToBool=function(){return this.nextToken(),new Tt(this.doFactor())},P.prototype.doToNumber=function(){return this.nextToken(),new Mt(this.doFactor())},P.prototype.doToString=function(){return this.nextToken(),new Ot(this.doFactor())},P.prototype.doLength=function(){return this.nextToken(),new yt(this.doFactor())},P.prototype.doTrim=function(){return this.nextToken(),new Ct(this.doFactor())},P.prototype.doToDateString=function(){return this.nextToken(),new Bt(this.doFactor())},P.prototype.doToYear=function(){return this.nextToken(),new At(this.doFactor())},P.prototype.doToMonth=function(){return this.nextToken(),new Gt(this.doFactor())},P.prototype.doToDay=function(){return this.nextToken(),new zt(this.doFactor())},P.prototype.doToHour=function(){return this.nextToken(),new Xt(this.doFactor())},P.prototype.doRoundDown=function(){return this.nextToken(),new Zt(this.doFactor())},P.prototype.parse=function(t,e){return t?(this._capitalIndexers=e||[],this._lexer.init(t),this.nextToken(),(e=this.doExpression())&&e.prepareValue(),this._lexer.clear(),this._capitalIndexers=null,e):null},P.prototype.evaluate=function(t,e,i){return this.parse(t,i).evaluate(e)},P.Default=new P,t.ExpressionParser=P})),_=(t($),$.ExpressionSyntaxError,$.ExpressionEvaluationError,$.ExpressionRuntime,$.ExpressionNode,$.ExpressionParser,e(function(t,e){Object.defineProperty(e,"__esModule",{value:!0});var n,a=["value","values"],i=(n=se.Base,ne.__extends(o,n),_dp(o,"hash",{get:function(){return this._fieldName}}),_dp(o,"index",{get:function(){return this._index}}),_dp(o,"fieldName",{get:function(){return this._fieldName},set:function(t){if(!(t=t&&t.trim()))throw new Error("Field name must be exists.");t!=this._orgFieldName&&(this._orgFieldName=t,this._orgAttrName="@"+t,this._fieldName=t.toUpperCase(),this.changed())}}),_dp(o,"orgFieldName",{get:function(){return this._orgFieldName}}),_dp(o,"orgAttrName",{get:function(){return this._orgAttrName}}),_dp(o,"dataType",{get:function(){return this._dataType},set:function(t){t!=this._dataType&&(this._dataType=t,this.resetTypes(),this.changed())}}),_dp(o,"runType",{get:function(){return this._runType}}),_dp(o,"subType",{get:function(){return this._subType},set:function(t){(t=t||null)!=this._subType&&(this._subType=t,this.resetTypes(),this.changed())}}),_dp(o,"subTypeEnabled",{get:function(){return this._subTypeEnabled},set:function(t){t!=this._subTypeEnabled&&(this._subTypeEnabled=t,this.resetTypes(),this.changed())}}),_dp(o,"baseField",{get:function(){return this._baseField},set:function(t){t!=this._orgBaseField&&(this._orgBaseField=t,this._baseField=t&&t.toUpperCase(),this.changed())}}),_dp(o,"length",{get:function(){return this._length},set:function(t){(t=t||0)!=this._length&&(this._length=t,this.resetTypes(),this.changed())}}),_dp(o,"set",{get:function(){return this._set},set:function(t){t!==this._set&&(this._set=t,this.resetTypes(),this.changed())}}),_dp(o,"minimum",{get:function(){return this._minimum},set:function(t){t!=this._minimum&&(this._minimum=t,this.resetTypes(),this.changed())}}),_dp(o,"maximum",{get:function(){return this._maximum},set:function(t){t!=this._maximum&&(this._maximum=t,this.resetTypes(),this.changed())}}),_dp(o,"required",{get:function(){return this._required},set:function(t){t!=this._required&&(this._required=t,this.changed())}}),_dp(o,"header",{get:function(){return this._header},set:function(t){t!=this._header&&(this._header=t,this.changed())}}),_dp(o,"defaultValue",{get:function(){return this._defaultValue},set:function(t){t!=this._defaultValue&&(this._defaultValue=t)}}),_dp(o,"nullValue",{get:function(){return this._nullValue}}),_dp(o,"booleanFormat",{get:function(){return this._booleanFormat},set:function(t){t!=this._booleanFormat&&(this._booleanFormat=t,this._boolParser=t?new k.BooleanConverter(t):null,this.changed())}}),_dp(o,"datetimeFormat",{get:function(){return this._datetimeFormat},set:function(t){t!=this._datetimeFormat&&((this._datetimeFormat=t)?(this._dateParser=new g.DateTimeReader(t),this._dateParser.amText=this._amText,this._dateParser.pmText=this._pmText,this._dateParser.baseYear=this._baseYear):this._dateParser=null,this.changed())}}),_dp(o,"amText",{get:function(){return this._amText},set:function(t){t!=this._amText&&(this._amText=t,this._dateParser&&(this._dateParser.amText=t),this.changed())}}),_dp(o,"pmText",{get:function(){return this._pmText},set:function(t){t!=this._pmText&&(this._pmText=t,this._dateParser&&(this._dateParser.pmText=t),this.changed())}}),_dp(o,"baseYear",{get:function(){return this._baseYear},set:function(t){t!=this._baseYear&&(this._baseYear=t,this._dateParser&&(this._dateParser.baseYear=t),this.changed())}}),_dp(o,"valueExpression",{get:function(){return this._valueExpression},set:function(t){t!=this._valueExpression&&(this._valueExpression=t)}}),_dp(o,"valueCallback",{get:function(){return this._valueCallback},set:function(t){t!=this._valueCallback&&(this._valueCallback=t)}}),_dp(o,"tag",{get:function(){return this._tag},set:function(t){this._tag=t}}),_dp(o,"objectKey",{get:function(){return this._objectKey},set:function(t){this._objectKey=t}}),_dp(o,"objectCallback",{get:function(){return this._objectCallback},set:function(t){this._objectCallback=t}}),_dp(o,"calculated",{get:function(){return!!this._valueExpression||!!this._valueCallback}}),_dp(o,"updatable",{get:function(){return!this._valueExpression&&!this._valueCallback&&this._updatable},set:function(t){t!=this._updatable&&(this._updatable=t)}}),o.prototype.isEmpty=function(t){var e=null==t||""===t;return e=e||this._dataType!=ht.ValueType.NUMBER?e:isNaN(t)},o.prototype.equalValues=function(t,e){return this._equalValues(t,e)},o.prototype.sameValues=function(t,e){return this._sameValues(t,e)},o.prototype.readValue=function(t){return this._readValue(t)},o.prototype.getBool=function(t,e){return"boolean"==typeof e?e:(this._boolParser||t).toBool(e)},o.prototype.getDate=function(t,e){return e instanceof Date?new Date(e.getTime()):"number"==typeof e?new Date(e):(this._dateParser||t).toDate(e)},o.prototype.clone=function(){var t=new o(this.fieldName,this.dataType,this.length);return t._orgFieldName=this._orgFieldName,t._orgAttrName=this._orgAttrName,t._boolParser=this._boolParser,t._dateParser=this._dateParser,t._orgBaseField=this._orgBaseField,t._baseField=this._baseField,t._defaultValue=this._defaultValue,t._valueCallback=this._valueCallback,t._valueExpression=this._valueExpression,t},o.prototype.$_resetTypes=function(t){this.resetTypes(t)},o.prototype.assignFrom=function(t){"fieldName"in t&&(this.fieldName=t.fieldName),"subType"in t&&(this._subType=t.subType),"set"in t&&(this._set=t.set instanceof Array?t.set.slice():null),"defaultValue"in t&&(this._defaultValue=t.defaultValue),"baseField"in t&&(this.baseField=t.baseField),"booleanFormat"in t&&(this.booleanFormat=t.booleanFormat),"amText"in t&&(this._amText=t.amText),"pmText"in t&&(this._pmText=t.pmText),"baseYear"in t&&(this._baseYear=t.baseYear),"header"in t&&(this._header=t.header),"datetimeFormat"in t&&(this.datetimeFormat=t.datetimeFormat),"objectKey"in t&&(this._objectKey=t.objectKey),"objectCallback"in t&&(this._objectCallback=t.objectCallback),"required"in t&&(this._required=t.required),"minimum"in t&&(this._minimum=t.minimum),"maximum"in t&&(this._maximum=t.maximum),"valueExpression"in t&&(this.valueExpression=t.valueExpression),"valueCallback"in t&&(this._valueCallback=t.valueCallback),"tag"in t&&(this._tag=t.tag)},o.prototype.$_setIndex=function(t){this._index=t},o.prototype.$_prepare=function(t){this._owner=t},o.prototype.changed=function(){},o.prototype.resetTypes=function(t){if(!this._typeLock){t&&(this._ownerBoolParser=t.boolParser,this._ownerDateParser=t.dateParser);var e=this._dataType,i=this._subType;if(this._runType=e,this._ranged=!1,(!this._owner||this._owner.subTypeEnabled)&&this._subTypeEnabled){if(i)switch(e){case ht.ValueType.TEXT:i==ht.ValueType.CHAR&&0<this._length&&(e=i);break;case ht.ValueType.NUMBER:i!=ht.ValueType.UNUM&&i!=ht.ValueType.INT&&i!=ht.ValueType.UINT||(e=i);break;case ht.ValueType.DATETIME:i==ht.ValueType.DATE&&(e=i)}if(this._runType=e,this._runSet=null,this._set&&this._set.length){if(this._runType==ht.ValueType.DATETIME){this._runSet=[];for(var o=0;o<this._set.length;o++)(n=this.getDate(this._ownerDateParser,this._set[o]))&&this._runSet.push(n.getTime());this._runSet.length<1&&(this._runSet=null)}else if(this._runType==ht.ValueType.DATE){this._runSet=[];for(var n,r,o=0;o<this._set.length;o++)(n=this.getDate(this._ownerDateParser,this._set[o]))&&(r=new Date(n.getDate()),this._runSet.push(r.setHours(0,0,0,0)));this._runSet.length<1&&(this._runSet=null)}else this._runSet=this._set;this._ranged=!0}if(!this._ranged)switch(this._dataType){case ht.ValueType.NUMBER:this._runMin=Number(this._minimum),this._runMax=Number(this._maximum),isNaN(this._runMin)||isNaN(this._runMax)?this._ranged=!isNaN(this._runMin)||!isNaN(this._runMax):this._ranged=this._runMin<=this._runMax;break;case ht.ValueType.DATETIME:case ht.ValueType.DATE:this._runMin=this.getDate(this._ownerDateParser,this._minimum),this._runMax=this.getDate(this._ownerDateParser,this._maximum),this._runMin&&this._runMax?this._ranged=this._runMin.getTime()<=this._runMax.getTime():this._ranged=this._runMin||this._runMax}switch(this._runType){case ht.ValueType.TEXT:this._equalValues=this.equalTextValues,this._sameValues=this.sameTextValues,this._readValue=this.readTextValue,this._nullValue=null;break;case ht.ValueType.CHAR:this._equalValues=this.equalTextValues,this._sameValues=this.sameTextValues,this._readValue=this.readCharValue,this._nullValue=null;break;case ht.ValueType.NUMBER:this._equalValues=this.equalNumberValues,this._sameValues=this.sameNumberValues,this._readValue=this.readNumberValue,this._nullValue=NaN;break;case ht.ValueType.UNUM:this._equalValues=this.equalNumberValues,this._sameValues=this.sameNumberValues,this._readValue=this.readUnumValue,this._nullValue=NaN;break;case ht.ValueType.INT:this._equalValues=this.equalNumberValues,this._sameValues=this.sameNumberValues,this._readValue=this.readIntValue,this._nullValue=NaN;break;case ht.ValueType.UINT:this._equalValues=this.equalNumberValues,this._sameValues=this.sameNumberValues,this._readValue=this.readUintValue,this._nullValue=NaN;break;case ht.ValueType.DATETIME:this._equalValues=this.equalDateValues,this._sameValues=this.sameDateValues,this._readValue=this.readDatetimeValue,this._nullValue=null;break;case ht.ValueType.DATE:this._equalValues=this.equalDateValues,this._sameValues=this.sameDateValues,this._readValue=this.readDateValue,this._nullValue=null;break;case ht.ValueType.BOOLEAN:this._equalValues=this.equalBoolValues,this._sameValues=this.sameBoolValues,this._readValue=this.readBooleanValue,this._nullValue=!1;break;case ht.ValueType.OBJECT:this._equalValues=this.equalObjectValues,this._sameValues=this.sameObjectValues,this._readValue=this.readObjectValues,this._nullValue=!1;break;default:this._equalValues=this.equalDummyValues,this._sameValues=this.sameDummyValues,this._readValue=this.readDummyValue,this._nullValue=void 0}}}},o.prototype.$_refreshFormats=function(t){this._owner=t,this._dateParser&&(this._dateParser.baseYear||(this._dateParser.baseYear=t.baseYear),this._dateParser.amText||(this._dateParser.amText=t.amText),this._dateParser.pmText||(this._dateParser.pmText=t.pmText)),this._ownerBoolParser=t.boolParser,this._ownerDateParser=t.dateParser},o.prototype.equalDummyValues=function(t,e){return this.equalTextValues(t,e)},o.prototype.sameDummyValues=function(t,e){return null==t?null==e:null!=e&&t==e},o.prototype.equalTextValues=function(t,e){return void 0===t?void 0===e:void 0!==e&&t==e},o.prototype.sameTextValues=function(t,e){return null==t||""==t?null==e||""==e:null!=e&&""!=e&&t==e},o.prototype.equalNumberValues=function(t,e){return void 0===t?void 0===e:void 0!==e&&(isNaN(t)?isNaN(e):!isNaN(e)&&t==e)},o.prototype.sameNumberValues=function(t,e){return isNaN(t)?isNaN(e):!isNaN(e)&&t==e},o.prototype.equalDateValues=function(t,e){return void 0===t?void 0===e:void 0!==e&&(t instanceof Date?e instanceof Date&&t.getTime()==e.getTime():!(e instanceof Date))},o.prototype.sameDateValues=function(t,e){return t instanceof Date?e instanceof Date&&t.getTime()==e.getTime():!(e instanceof Date)},o.prototype.equalBoolValues=function(t,e){return void 0===t?void 0===e:void 0!==e&&Boolean(t)==Boolean(e)},o.prototype.sameBoolValues=function(t,e){return this.equalBoolValues(t,e)},o.prototype.equalObjectValues=function(t,e){return void 0===t||void 0===e?void 0===t==(void 0===e):JSON.stringify(t)===JSON.stringify(e)},o.prototype.sameObjectValues=function(t,e){return null==t||null==e?null==t&&null==e:JSON.stringify(t)===JSON.stringify(e)},o.prototype.readDummyValue=function(t){return t},o.prototype.readTextValue=function(t){return void 0!==t&&(t=null===t?null:String(t),this._ranged)&&this._runSet&&this._runSet.indexOf(t)<0?void 0:t},o.prototype.readCharValue=function(t){return void 0!==t&&(t=(t=null===t?null:String(t))&&t.substr(0,this._length),this._ranged)&&this._runSet&&this._runSet.indexOf(t)<0?void 0:t},o.prototype.readNumberValue=function(t){if(null!=t&&""!==t){t=Number(t);if(this._ranged)if(this._runSet){if(this._runSet.indexOf(t)<0)return}else isNaN(this._runMin)||(t=Math.max(this._runMin,t)),isNaN(this._runMax)||(t=Math.min(this._runMax,t));return t}},o.prototype.readUnumValue=function(t){if(null!=t&&""!==t){t=Math.max(0,Number(t));if(this._ranged){if(this._runSet){if(this._runSet.indexOf(t)<0)return}else isNaN(this._runMin)||(t=Math.max(this._runMin,t)),isNaN(this._runMax)||(t=Math.min(this._runMax,t));t=Math.max(0,t)}return t}},o.prototype.readIntValue=function(t){if(null!=t&&""!==t){t=0<=t?Math.floor(t):Math.ceil(t);if(this._ranged){if(this._runSet){if(this._runSet.indexOf(t)<0)return}else isNaN(this._runMin)||(t=Math.max(this._runMin,t)),isNaN(this._runMax)||(t=Math.min(this._runMax,t));t=0<=t?Math.floor(t):Math.ceil(t)}return t}},o.prototype.readUintValue=function(t){if(null!=t&&""!==t){t=Math.max(0,Math.floor(Math.floor(t)));if(this._ranged){if(this._runSet){if(this._runSet.indexOf(t)<0)return}else isNaN(this._runMin)||(t=Math.max(this._runMin,t)),isNaN(this._runMax)||(t=Math.min(this._runMax,t));t=Math.max(0,Math.floor(Math.floor(t)))}return t}},o.prototype.readDatetimeValue=function(t){if(void 0!==t){if(null===t)return this._nullValue;var e=this.getDate(this._ownerDateParser,t);if(e&&this._ranged)if(this._runSet){for(var i=!1,o=this._runSet.length;o--;)if(e.getTime()==this._runSet[o]){i=!0;break}if(!i)return}else this._runMin&&e.getTime()<this._runMin.getTime()&&(e=new Date(this._runMin)),this._runMax&&e.getTime()>this._runMax.getTime()&&(e=new Date(this._runMax));return e}},o.prototype.readDateValue=function(t){if(void 0!==t){if(null===t)return this._nullValue;var e=this.getDate(this._ownerDateParser,t);if(e&&(e.setHours(0,0,0,0),this._ranged))if(this._runSet){for(var i=!1,o=this._runSet.length;o--;)if(e.getTime()==this._runSet[o]){i=!0;break}if(!i)return}else this._runMin&&e.getTime()<this._runMin.getTime()&&(e=new Date(this._runMin)),this._runMax&&e.getTime()>this._runMax.getTime()&&(e=new Date(this._runMax));return e}},o.prototype.readBooleanValue=function(t){return void 0===t?t:null!==t&&this.getBool(this._ownerBoolParser,t)},o.prototype.readObjectValues=function(e){if("string"==typeof e)try{e=JSON.parse(e)}catch(t){throw new Error("Invalid Object String "+t+"\r\n"+e)}else if(null!=e&&"object"!=typeof e)try{e=JSON.parse(e)}catch(t){}return re.Utils.deepCopy(e)},o.prototype.$_compareObject=function(t,e,i,o){var n=this._objectKey,r=this._objectCallback,i=r?r(this.orgFieldName,i,t):n&&t.hasOwnProperty(n)?t[n]:null,t=r?r(this.orgFieldName,o,e):n&&e.hasOwnProperty(n)?e[n]:null;return t<i?1:i<t?-1:0},o.prototype.$_calculateValue=function(t,e,i,o,n,r,s){return this._valueCallback?this._valueCallback(t.handler,i,o,r,s):this._valueExpression?(this._exprNode||(this._exprNode=$.ExpressionParser.Default.parse(this._valueExpression,a)),e.setValues(s,n),this._exprNode.evaluate(e)):void 0},o);function o(t,e,i){void 0===e&&(e=ht.ValueType.TEXT),void 0===i&&(i=0);var o=n.call(this)||this;return o._index=-1,o._dataType=ht.ValueType.TEXT,o._subType=null,o._runType=ht.ValueType.TEXT,o._length=0,o._subTypeEnabled=!0,o._required=!1,o._updatable=!0,o._ranged=!1,o._runSet=null,o._typeLock=!1,o._objectKey=null,o._objectCallback=null,t&&(o.fieldName=t),null!=e&&(e===ht.ValueType.DATE&&(e=ht.ValueType.DATETIME,o._subType=ht.ValueType.DATE,o._subTypeEnabled=!0),o._dataType=e),o._length=i,o}e.DataField=i})),f=(t(_),_.DataField,e(function(t,e){Object.defineProperty(e,"__esModule",{value:!0}),(e=e.RestoreMode||(e.RestoreMode={})).NONE="none",e.EXPLICIT="explicit",e.AUTO="auto"})),p=(t(f),f.RestoreMode,e(function(t,e){Object.defineProperty(e,"__esModule",{value:!0});i=$.ExpressionRuntime,ne.__extends(n,i),n.prototype.setValues=function(t,e){this._values=t,this._fields=e,this._fieldCount=e?e.length:0},n.prototype.isIdentifier=function(t){return t=t.toLowerCase(),n.IDENTS.hasOwnProperty(t)?n.IDENTS[t]:i.prototype.isIdentifier.call(this,t)},n.prototype.evaluateIdentifier=function(t){throw new $.ExpressionEvaluationError("Invalid identifier key: "+t)},n.prototype.evaluateIndexerI=function(t,e){if(this._values){if(t!=n.ID_VALUE&&t!=n.ID_VALUES)throw new $.ExpressionEvaluationError("Invalid identifier indexer: "+t);if(e<0||e>=this._fieldCount)throw new $.ExpressionEvaluationError("Data field index out of bounds:"+e);return this._values[e]}},n.prototype.evaluateIndexerS=function(t,e,i){if(t!=n.ID_VALUE&&t!=n.ID_VALUES)throw new $.ExpressionEvaluationError("Invalid identifier indexer: "+t);if(this._values&&this._fields){t=this._fields.indexOf(e);if(t<0||t>=this._fieldCount)throw new $.ExpressionEvaluationError("Data field is not exists:"+e);return this._values[t]}},n.IDENTS={value:n.ID_VALUE=0,values:n.ID_VALUES=1};var i,o=n;function n(){var t=i.call(this)||this;return t._values=null,t._fields=null,t._fieldCount=0,t}e.CalculateExpressionRuntime=o})),P=(t(p),p.CalculateExpressionRuntime,e(function(t,e){Object.defineProperty(e,"__esModule",{value:!0});i=se.Base,ne.__extends(n,i),n.prototype._doDispose=function(){return this._listeners=null,i.prototype._doDispose.call(this)},_dp(n,"listenerCount",{get:function(){return this._listeners.length}}),n.prototype.addListener=function(t,e){return null!=t&&this._listeners&&this._listeners.indexOf(t)<0&&(null!=e&&0<=e?this._listeners.splice(e,0,t):this._listeners.push(t)),this},n.prototype.removeListener=function(t){return null!=t&&this._listeners&&0<=(t=this._listeners.indexOf(t))&&this._listeners.splice(t,1),this},n.prototype.clearListener=function(){this._listeners.length=0},n.prototype.fireEvent=function(t){for(var e=1;e<arguments.length;e++)e-1,0;for(var i=Array.prototype.slice.call(arguments,0),o=0,n=(i[0]=this)._listeners.length;o<n;o++){var r=this._listeners[o],s=r[t];s&&s.apply(r,i)}},n.prototype.fireConfirmEvent=function(t){for(var e=1;e<arguments.length;e++)e-1,0;for(var i=Array.prototype.slice.call(arguments,0),o=0,n=(i[0]=this)._listeners.length;o<n;o++){var r=this._listeners[o],s=r[t];if(s){s=s.apply(r,i);if("boolean"==typeof s&&!s)return!1}}return!0},n.prototype.fireMessageEvent=function(t){for(var e=1;e<arguments.length;e++)e-1,0;for(var i=Array.prototype.slice.call(arguments,0),o=0,n=(i[0]=this)._listeners.length;o<n;o++){var r=this._listeners[o],s=r[t];if(s){s=s.apply(r,i);if("string"==typeof s&&s)return s}}return null},n.prototype.fireObjectEvent=function(t){for(var e=1;e<arguments.length;e++)e-1,0;for(var i=Array.prototype.slice.call(arguments,0),o=0,n=(i[0]=this)._listeners.length;o<n;o++){var r=this._listeners[o],s=r[t];if(s){s=s.apply(r,i);if(null!=s)return s}}return null};var i,o=n;function n(){var t=i.call(this)||this;return t._listeners=[],t}e.EventAware=o})),z=(t(P),P.EventAware,e(function(t,e){Object.defineProperty(e,"__esModule",{value:!0});function d(t){return t<10?"0"+t:String(t)}var a=["yy","yyyy","M","MM","d","dd","a","H","HH","h","hh","m","mm","s","ss","S","SS","SSS"],l=[".","/","-",":"],h="Z".charCodeAt(0),u="z".charCodeAt(0),c="A".charCodeAt(0),_="a".charCodeAt(0),p="y".charCodeAt(0),f="M".charCodeAt(0),g="m".charCodeAt(0),m="d".charCodeAt(0),y="H".charCodeAt(0),v="h".charCodeAt(0),C="S".charCodeAt(0),w="s".charCodeAt(0),i=(o.getFormatter=function(t){var e=o.Formatters[t];return e||(o.Formatters[t]=e=new o(t)),e},Object.defineProperty(o,"Default",{get:function(){return o.getFormatter(o.DEFAULT_FORMAT)}}),_dp(o,"format",{get:function(){return this._format},set:function(t){(t=t||o.DEFAULT_FORMAT)!=this._format&&(this._tokens=[],this.parse(t),this._format=t)}}),o.prototype.getText=function(t){if(!this._tokens)return"";for(var e,i=t instanceof Date?t:new Date(t),o=this._tokens,n="",r=0,s=o.length;r<s;r++){var a=o[r],l=a.length;switch(a.charCodeAt(0)){case p:n+=2<l?i.getFullYear():d(i.getFullYear()%100);break;case f:n+=1<l?d(i.getMonth()+1):i.getMonth()+1;break;case m:n+=1<l?d(i.getDate()):i.getDate();break;case y:n+=1<l?d(i.getHours()):i.getHours();break;case v:this._hasAmPm?(0==(h=i.getHours())?h=12:12<h&&(h-=12),n+=1<l?d(h):h):n+=1<l?d(i.getHours()):i.getHours();break;case g:n+=1<l?d(i.getMinutes()):i.getMinutes();break;case w:n+=1<l?d(i.getSeconds()):i.getSeconds();break;case _:case c:i.getHours()<12?n+=this._amText:n+=this._pmText;break;case C:var h=i.getMilliseconds();n+=3==l?(e=h)<10?"00"+e:e<100?"0":String(e):2==l?d(h):h.toString().substr(0,l);break;default:n+=a}}return n},o.prototype.parseDateFormatTokens=function(t){var e=[];if(t)for(var i=t.trim(),o=i.length,n=0;n<o;){var r=i.charAt(n);if(0<=l.indexOf(r))e.push(r),n++;else{for(var s=n++;n<o&&i.charAt(n)==r;)n++;if(r=i.substring(s,n),a.indexOf(r)<0){s=r.charCodeAt(0);if(c<=s&&s<=h||_<=s&&s<=u)throw new Error("Invalid datetime write format: "+t)}e.push(r)}if(n<o&&re.Utils.isWhiteSpace(r=i.charAt(n)))for(e.push(r);n<o&&re.Utils.isWhiteSpace(i.charAt(n));)n++}return e},o.prototype.parse=function(t){this._amText="AM",this._pmText="PM",t&&(t=t.split(";"),this._format=t[0]||o.DEFAULT_FORMAT,this._tokens=this.parseDateFormatTokens(this._format),this._hasAmPm=0<=this._tokens.indexOf("a")||0<=this._tokens.indexOf("A"),1<t.length)&&t[1]&&(0<(t=t[1].split(",")).length&&t[0]&&(this._amText=t[0]),1<t.length)&&t[1]&&(this._pmText=t[1])},o.DEFAULT_FORMAT="yyyy/MM/dd",o.Formatters={},o);function o(t){this._hasAmPm=!1,this.format=t}e.DateTimeWriter=i})),K=(t(z),z.DateTimeWriter,e(function(t,e){function i(t){this.$_parse(this._format=t)}Object.defineProperty(e,"__esModule",{value:!0}),i.getFormatter=function(t){var e=i.Formatters[t];return e||(i.Formatters[t]=e=new i(t)),e},_dp(i,"format",{get:function(){return this._format}}),i.prototype.formatValue=function(t){return void 0===t?this._nullText:t?this._trueText:this._falseText},i.prototype.$_parse=function(t){this._falseText=this._trueText=null,t&&(t=t.split(/[;\:]/),this._falseText=t[0],0<t.length&&(this._trueText=t[1]),1<t.length)&&(this._nullText=t[2])},i.Formatters={},e.BooleanFormatter=i})),Y=(t(K),K.BooleanFormatter,e(function(t,e){Object.defineProperty(e,"__esModule",{value:!0});function h(t){return re.Utils.included(t,"c","f","C","F","a","A")}function i(t){this._groupPos=0,this._replacement="$&,",this.parse(this._format=t)}i.getFormatter=function(t){var e=i.Formatters[t];return e||(i.Formatters[t]=e=new i(t)),e},Object.defineProperty(i,"Default",{get:function(){return i.getFormatter(i.DEFAULT_FORMAT)}}),_dp(i,"format",{get:function(){return this._format}}),_dp(i,"separator",{get:function(){return this._seperator}}),_dp(i,"groupSep",{get:function(){return this._groupSep}}),_dp(i,"minDigits",{get:function(){return this._minDigits}}),_dp(i,"maxDigits",{get:function(){return this._maxDigits}}),i.prototype.parse=function(t){this._minDigits=0,this._maxDigits=0,this._parse(t)},i.prototype.getText=function(t,e){void 0===e&&(e=!0);var i=Number(t);if(isNaN(i))return"";var o=this._minDigits,n=0;if(this._optDecimal&&(t=function(t){t=(""+t).match(/(?:\.(\d+))?(?:[eE]([+-]?\d+))?$/);return t?Math.max(0,(t[1]?t[1].length:0)-(t[2]?+t[2]:0)):0}(i),o=Math.min(Math.max(t,this._minDigits),this._maxDigits)),this._round)switch(n=Math.pow(10,o),this._round){case"c":i=Math.ceil(n*i)/n;break;case"f":var r=i.toString().split("."),i=parseFloat(1<r.length?r[0]+"."+r[1].substr(0,o):r[0])}i="a"===this._round?Math.abs(i):i;t=(i=Number(i.toPrecision(15))).toFixed(o);try{e||(n=parseFloat(t))!==Math.abs(parseFloat(t))||0!==n||(t=Math.abs(i).toFixed(o))}catch(t){}return this._seperator&&(t=t.replace(".",this._seperator)),this._reg?o?t.replace(this._regDecimal,this._replacement):t.replace(this._reg,this._replacement):t},i.prototype._parse=function(t){if(t=t&&t.trim()){var e=".",i=",",o=(-1<t.indexOf(";")&&(t=(n=t.split(";"))[0],1<n.length&&n[1]&&!h(n[1])&&(e=n[1]),2<n.length&&n[2]&&!h(n[2])&&(i=n[2]),this._round=n[3]||n[2]||n[1],this._round=h(this._round)?this._round.toLowerCase():this._round),this._seperator="."==e?null:e,this._groupSep=","==i?null:i,t.length),n=t.indexOf(".");if(this._optDecimal=0<t.indexOf("#",n),0<=n){for(var r=n+1;r<o&&"0"==t.charAt(r);r++)this._minDigits++,this._maxDigits++;for(;r<o&&"#"==t.charAt(r);r++)this._maxDigits++;t=t.substr(0,n)}if(t&&(n=t.length,","==t.charAt(n-1))&&(this._groupPos=3,t=t.substr(0,n-1)),t)for(var s=t.length,a=!0,r=s-1;0<=r;r--){var l=t.charAt(r);if("0"!=l||!a)if(0==this._groupPos&&","==l)this._groupPos=s-r-1;else{if("#"!=l)break;a=!1}}0<this._groupPos&&(this._replacement="$&"+i,this._reg=new RegExp("\\d(?=(\\d{"+this._groupPos+"})+($|\\"+e+"))","g"),this._regDecimal=new RegExp("\\d(?=(\\d{"+this._groupPos+"})+\\"+e+")","g"))}},i.DEFAULT_FORMAT="#,##0.0",i.Formatters={},e.DecimalFormatter=i})),x=(t(Y),Y.DecimalFormatter,e(function(t,e){Object.defineProperty(e,"__esModule",{value:!0});i=se.Base,ne.__extends(n,i),_dp(n,"datetimeFormat",{get:function(){return this._datetimeFormat},set:function(t){t!=this._datetimeFormat&&(this._datetimeFormat=t,this._datetimeWriter=t?z.DateTimeWriter.getFormatter(t):null)}}),_dp(n,"booleanFormat",{get:function(){return this._booleanFormat},set:function(t){t!=this._booleanFormat&&(this._booleanFormat=t,this._booleanFormatter=t?K.BooleanFormatter.getFormatter(t):null)}}),_dp(n,"numberFormat",{get:function(){return this._numberFormat},set:function(t){t!=this._numberFormat&&(this._numberFormat=t,this._numberFormatter=t?Y.DecimalFormatter.getFormatter(t):null)}}),_dp(n,"datetimeCallback",{get:function(){return this._datetimeCallback},set:function(t){this._datetimeCallback=t}}),_dp(n,"booleanCallback",{get:function(){return this._booleanCallback},set:function(t){this._booleanCallback=t}}),_dp(n,"numberCallback",{get:function(){return this._numberCallback},set:function(t){this._numberCallback=t}}),_dp(n,"nullDateText",{get:function(){return this._nullDateText},set:function(t){this._nullDateText=t}}),_dp(n,"nullText",{get:function(){return this._nullText},set:function(t){this._nullText=t}}),_dp(n,"nanText",{get:function(){return this._nanText},set:function(t){this._nanText=t}}),_dp(n,"rowState",{get:function(){return this._rowState},set:function(t){this._rowState=t}}),_dp(n,"datetimeWriter",{get:function(){return this._datetimeWriter}}),_dp(n,"booleanFormatter",{get:function(){return this._booleanFormatter}}),_dp(n,"numberFormatter",{get:function(){return this._numberFormatter}});var i,o=n;function n(t){var e=i.call(this)||this;return e._datetimeWriter=null,e._booleanFormatter=null,e._numberFormatter=null,e.assignFrom(t),e}e.DataOutputOptions=o})),c=(t(x),x.DataOutputOptions,e(function(t,e){Object.defineProperty(e,"__esModule",{value:!0});o.prototype.compare=function(t,e,i){return t.dataType==ht.ValueType.NUMBER?Number(e)-Number(i):i<e?1:e<i?-1:0};var i=o;function o(){}n=Error,ne.__extends(s,n);var n,r=s;function s(t){return n.call(this,t)||this}e.DataSourceError=r;a=Error,ne.__extends(h,a);var a,l=h;function h(){return a.call(this,"Client is editing (call grid.commit() or grid.cancel() first)")||this}e.ClientEditingError=l;d=P.EventAware,ne.__extends(c,d),c.prototype._doDispose=function(){try{this.$_internalClearFields(),this._fieldMap=null}catch(t){}this._fields=this._calcFields=this._fieldNames=this._fieldMap=this._boolParser=this._dateParser=this._comparers=this._clients=this._defComparer=null,d.prototype._doDispose.call(this)},_dp(c,"subTypeEnabled",{get:function(){return this._subTypeEnabled},set:function(t){if(t!=this._subTypeEnabled){this._subTypeEnabled=t;for(var e=0,i=this._fields;e<i.length;e++)i[e].$_resetTypes()}}}),_dp(c,"undoable",{get:function(){return this._undoable},set:function(t){this._undoable=t}}),_dp(c,"insertable",{get:function(){return this._insertable},set:function(t){this._insertable=t}}),_dp(c,"updatable",{get:function(){return this._updatable},set:function(t){this._updatable=t}}),_dp(c,"deletable",{get:function(){return this._deletable},set:function(t){this._deletable=t}}),_dp(c,"softDeleting",{get:function(){return this._softDeleting},set:function(t){this._softDeleting=t}}),_dp(c,"deleteCreated",{get:function(){return this._deleteCreated},set:function(t){this._deleteCreated=t}}),_dp(c,"checkStates",{get:function(){return this._checkStates},set:function(t){t!=this._checkStates&&(this._checkStates=t,this._doCheckStatesChanged())}}),_dp(c,"restoreMode",{get:function(){return this._restoreMode},set:function(t){var e;t!=this._restoreMode&&(e=this._restoreMode,this._restoreMode=t,this._doRestoreModeChanged(e,t))}}),_dp(c,"strictRestore",{get:function(){return this._strictRestore},set:function(t){this._strictRestore=t}}),_dp(c,"booleanFormat",{get:function(){return this._booleanFormat},set:function(t){t!=this._booleanFormat&&(this._booleanFormat=t,this._boolParser=t?new k.BooleanConverter(t):k.BooleanConverter.Default)}}),_dp(c,"datetimeFormat",{get:function(){return this._datetimeFormat},set:function(t){t!=this._datetimeFormat&&(this._datetimeFormat=t,this.$_createDateReader())}}),_dp(c,"baseYear",{get:function(){return this._baseYear},set:function(t){this._baseYear=t}}),_dp(c,"amText",{get:function(){return this._amText},set:function(t){t!=this._amText&&(this._amText=t,this.$_createDateReader())}}),_dp(c,"pmText",{get:function(){return this._pmText},set:function(t){t!=this._pmText&&(this._pmText=t,this.$_createDateReader())}}),_dp(c,"alertClientError",{get:function(){return this._alertClientError},set:function(t){this._alertClientError=t}}),_dp(c,"throwClientError",{get:function(){return this._throwClientError},set:function(t){this._throwClientError=t}}),_dp(c,"commitBeforeDataEdit",{get:function(){return this._commitBeforeDataEdit},set:function(t){this._commitBeforeDataEdit=t}}),_dp(c,"calculateRuntime",{get:function(){return this._calculateRuntime||(this._calculateRuntime=new p.CalculateExpressionRuntime),this._calculateRuntime}}),_dp(c,"local",{get:function(){return!0}}),_dp(c,"immediateUpdate",{get:function(){return!1}}),_dp(c,"summarized",{get:function(){return!1}}),_dp(c,"fieldCount",{get:function(){return this._fields.length}}),_dp(c,"boolParser",{get:function(){return this._boolParser}}),_dp(c,"dateParser",{get:function(){return this._dateParser}}),_dp(c,"eventLocked",{get:function(){return 0<this._eventLock}}),_dp(c,"canUndo",{get:function(){return!1}}),_dp(c,"canRedo",{get:function(){return!1}}),_dp(c,"undoing",{get:function(){return!1}}),_dp(c,"redoing",{get:function(){return!1}}),_dp(c,"valuesCallback",{get:function(){return this._valuesCallback},set:function(t){this._valuesCallback=t}}),c.prototype.registerClient=function(t){t&&this._clients.indexOf(t)<0&&this._clients.push(t)},c.prototype.unregisterClient=function(t){t&&0<=(t=this._clients.indexOf(t))&&this._clients.splice(t,1)},c.prototype.cancelClients=function(){for(var t=0,e=this._clients;t<e.length;t++)e[t].cancelDataEditing()},c.prototype.commitClients=function(){for(var t=0,e=this._clients;t<e.length;t++)e[t].commitDataEditing()},c.prototype.beginUpdate=function(){this._checkClientState(),this._eventLock++},c.prototype.endUpdate=function(t){void 0===t&&(t=!0),this._checkClientState(),this._eventLock=Math.max(0,this._eventLock-1),0==this._eventLock&&(t&&(0<this._resetLock?this._fireReset():this._fireRefresh(),0<this._countLock)&&this._fireRowCountChanged(),this._resetLock=this._countLock=0)},c.prototype.addField=function(t,e,i){if(this._checkClientState()){var o;this.beginUpdate();try{(o=this.$_internalAddField(t))&&o.$_resetTypes(this)}finally{e&&this._doFieldsReset(),this.endUpdate()}return o}},c.prototype.clearFields=function(){this._checkClientState()&&0<this._fields.length&&(this.$_internalClearFields(),this._doFieldsReset())},c.prototype.setFields=function(t){if(this._checkClientState()){this.beginUpdate();try{if(this.$_internalClearFields(),t)for(var e=0,i=t.length;e<i;e++){var o=this.$_internalAddField(t[e]);o&&o.$_resetTypes(this)}}finally{this.endUpdate(),this._doFieldsReset()}}},c.prototype.getField=function(t){return"string"==typeof t&&(t=this.getFieldIndex(t)),this._fields[t]},c.prototype.getFields=function(){return this._fields.slice()},c.prototype.fieldByName=function(t){if(t)for(var e=t.toUpperCase(),i=0,o=this._fields;i<o.length;i++){var n=o[i];if(n.fieldName==e)return n}return null},c.prototype.getFieldNames=function(){for(var t=[],e=0;e<this._fields.length;e++)t.push(this._fields[e].fieldName);return t},c.prototype.getOrgFieldNames=function(){for(var t=[],e=0;e<this._fields.length;e++)t.push(this._fields[e].orgFieldName);return t},c.prototype.getFieldName=function(t){return this._checkFieldIndex(t),this._fields[t].fieldName},c.prototype.getOrgFieldName=function(t){return this._checkFieldIndex(t),this._fields[t].orgFieldName},c.prototype.getFieldIndex=function(t){if("number"==typeof t)return t;if(t){t=t.toUpperCase();if(t in this._fieldMap)return this._fieldMap[t]}return-1},c.prototype.getFieldIndexC=function(t){return t in this._fieldMap?this._fieldMap[t]:-1},c.prototype.getBaseField=function(t){return 0<=t&&t<this._fields.length?this.getFieldIndex(this._fields[t].baseField):-1},c.prototype.getValueType=function(t){return this._fields[t].dataType},c.prototype.getDefaultValue=function(t){return this._fields[t].defaultValue()},c.prototype.hasData=function(t){return!1},c.prototype.objectToRow=function(t){var e=[],i=this._valuesCallback;if(i){i=i.call(this,this.$_handler,t);if(i&&Array.isArray(i))return i.slice()}if(t)for(var o=0,n=this.fieldCount;o<n;o++){var r=this.getOrgFieldName(o);t.hasOwnProperty(r)&&(e[o]=t[r])}return e},c.prototype.canUpdateField=function(t,e){if(0<=e&&e<this._fields.length){if(!this._fields[e].updatable&&0<=t)try{var i=this.getRowState(t);return!i||i==b.RowState.CREATED||i==b.RowState.CREATE_AND_DELETED}catch(t){return!1}return!0}return!1},c.prototype.getDataComparer=function(t){return 0<=t&&this._comparers[t]},c.prototype.setDataComparer=function(t,e){this._comparers[t]=e||void 0},c.prototype.canSummarize=function(t){return 0<=t&&t<this.fieldCount},c.prototype.getDistinctValues=function(t,e,i){return void 0===i&&(i=ht.SortDirection.ASCENDING),null},c.prototype.exportToJson=function(){},c.prototype.exportToXml=function(){},c.prototype.canUpdateRow=function(t){return!1},c.prototype.canAppendRow=function(){return!1},c.prototype.canInsertRow=function(t){return!1},c.prototype.canDeleteRow=function(t){return!1},c.prototype.undo=function(){},c.prototype.redo=function(){},c.prototype.clearCommandStack=function(){},c.prototype._convertValues=function(t,e){var i,o="*"in e&&"*"==e["*"]?t:{};for(i in e)o[e[i]]=t[i];return o},c.prototype.getClientsBusy=function(){var t={busy:!1,cnt:0,client:null};if(!this.disposing)for(var e=this._clients.length;e--;)this._clients[e].isDataEditing()&&(t.busy=!0,t.cnt++,t.client=this._clients[e]);return t},c.prototype._checkClientState=function(){if(this.getClientsBusy().busy){if(this._throwClientError)throw new l;return this._alertClientError&&alert((new l).message),!1}return!0},c.prototype._checkFieldIndex=function(t){if(t<0||t>=this._fields.length)throw new r("Invalid field index: "+t)},c.prototype.$_internalClearFields=function(){this._checkClientState();for(var t=0,e=this._fields;t<e.length;t++)e[t].$_setIndex(-1);this._fields.splice(0,this._fields.length),this._calcFields.splice(0,this._calcFields.length),this._fieldNames.splice(0,this._fieldNames.length),this._fieldMap={}},c.prototype.$_internalInsertField=function(t,e){this._checkClientState();var i=this._fields.length;if(t<0||i<t)throw re.Utils.isDebugging(),new r("index is out of bounds:"+t);if(e){e.$_prepare(this),this._fields.splice(t,0,e),this._fieldNames.splice(t,0,e.fieldName),e.calculated&&this._calcFields.push(e),e.$_setIndex(t);for(var o=(this._fieldMap[e.fieldName]=t)+1;o<=i;o++)(e=this._fields[o]).$_setIndex(o),this._fieldMap[e.fieldName]=o;return t}return-1},c.prototype.$_addField=function(t,e,i,o){if(!t)throw new r("fieldName must be exists.");if(0<=this.getFieldIndex(t))throw new r("fieldName is already exists: "+t);t=new _.DataField(t,e,i);return o&&t.assignFrom(o),this.$_internalInsertField(this._fields.length,t),t},c.prototype.$_internalAddField=function(t){var e=null;return"string"==typeof t?e=this.$_addField(t,ht.ValueType.TEXT,0):t instanceof _.DataField?(e=t.clone(),this.$_internalInsertField(this._fields.length,e)):t&&(e=this.$_addField(t.fieldName,t.dataType||ht.ValueType.TEXT,t.length,t)),e},c.prototype._internalCalculateValues=function(t,e){var i=this._calcFields;if(0<i.length){for(var o=[],n=0;n<t.length;n++)o[n]=this.getField(n).readValue(t[n]);for(var n=0,r=i.length;n<r;n++){var s=i[n],a=this._fieldMap[s.fieldName];t[a]=o[a]=s.readValue(s.$_calculateValue(this,this.calculateRuntime,e,s.orgFieldName,this._fieldNames,this.getOrgFieldNames(),o))}}},c.prototype.refreshFieldFormats=function(){for(var t=0,e=this._fields;t<e.length;t++)e[t].$_refreshFormats(this)},c.prototype.refreshFieldFormat=function(t){t&&t.$_refreshFormats(this)},c.prototype._getRowValues=function(){return new Array(this.fieldCount)},c.prototype.$_createOutputRows=function(t,e,i){void 0===i&&(i=0);var o=this.fieldCount,n=t.length,r=(e=e instanceof x.DataOutputOptions?e:new x.DataOutputOptions(e)).nullDateText,s=e.nullText,a=e.nanText;try{for(var l=0;l<o;l++){var h=this.getField(l),d=h.dataType,u=h.orgFieldName,c=void 0,_=void 0,p=void 0,f=void 0,g=void 0,m=void 0;if(d==ht.ValueType.DATETIME&&((c=e.datetimeCallback)||(f=e.datetimeWriter)||r))if(c)for(var y=0;y<n;y++)(w=t[y])[u]=c(this.handler,y+i,u,w[u]);else for(y=0;y<n;y++){var v=(w=t[y])[u];w[u]=v?f?f.getText(w[u]):v:r}else if(d==ht.ValueType.BOOLEAN&&((_=e.booleanCallback)||(g=e.booleanFormatter)))if(_)for(y=0;y<n;y++)(w=t[y])[u]=_(this.handler,y+i,u,w[u]);else for(y=0;y<n;y++)(w=t[y])[u]=g.formatValue(w[u]);else if(d==ht.ValueType.NUMBER&&((p=e.numberCallback)||(m=e.numberFormatter)||a))if(p)for(y=0;y<n;y++)(w=t[y])[u]=p(this.handler,y+i,u,w[u]);else for(y=0;y<n;y++){var C=(w=t[y])[u];w[u]=null==C||isNaN(C)?a:m?m.getText(C):C}else if(null!=s)for(y=0;y<n;y++){var w,C=(w=t[y])[u];w[u]=null==C?s:C}}}finally{e&&e.dispose()}},c.prototype.$_sortRows=function(t,e,i,o,n){do{var r,s=o,a=n,l=t[Math.floor((o+n)/2)];do{for(;s<=a&&!(i(e,l,t[s])<=0);)s++;for(;s<=a&&!(0<=i(e,l,t[a]));)a--}while(s<=a&&(s!=a&&(r=t[s],t[s]=t[a],t[a]=r),s++,a--),s<=a)}while(o<a&&this.$_sortRows(t,e,i,o,a),(o=s)<n)},c.prototype.$_createDateReader=function(){this._datetimeFormat?(this._dateParser=new g.DateTimeReader(this._datetimeFormat),this._dateParser.amText=this._amText,this._dateParser.pmText=this._pmText,this._dateParser.baseYear=this._baseYear):this._dateParser=g.DateTimeReader.Default},c.prototype._doCheckStatesChanged=function(){},c.prototype._doRestoreModeChanged=function(t,e){},c.prototype._doFieldsReset=function(){},c.prototype._fireReset=function(){},c.prototype._fireRowCountChanged=function(){},c.prototype._fireRefresh=function(){},c.prototype._fireCommandStackChanged=function(t,e){this._eventLock<=0&&this.fireEvent(c.COMMAND_STACK_CHANGED,t,e)},c.COMMAND_STACK_CHANGED="onDataSourceCommandStackChanged";var d,u=c;function c(){var t=d.call(this)||this;return t._subTypeEnabled=!0,t._undoable=!1,t._insertable=!0,t._updatable=!0,t._deletable=!0,t._softDeleting=!1,t._deleteCreated=!1,t._checkStates=!0,t._restoreMode=f.RestoreMode.NONE,t._strictRestore=!1,t._booleanFormat=null,t._datetimeFormat=null,t._baseYear=2e3,t._amText="AM",t._pmText="PM",t._alertClientError=!0,t._throwClientError=!1,t._commitBeforeDataEdit=!1,t._fields=[],t._calcFields=[],t._fieldNames=[],t._fieldMap={},t._defComparer=new i,t._comparers=[],t._boolParser=k.BooleanConverter.Default,t._dateParser=g.DateTimeReader.Default,t._eventLock=0,t._resetLock=0,t._countLock=0,t._clients=[],t}e.DataSource=u})),m=(t(c),c.DataSourceError,c.ClientEditingError,c.DataSource,e(function(t,e){Object.defineProperty(e,"__esModule",{value:!0});i=se.Base,ne.__extends(n,i),n.prototype.connect=function(t){},n.prototype.disconnect=function(){},n.prototype.clearRows=function(){},n.prototype.setRows=function(){},n.prototype.setRowCount=function(t){},n.prototype.insertRow=function(t){},n.prototype.insertRows=function(t,e){},n.prototype.removeRow=function(t){},n.prototype.removeRows=function(t){},n.prototype.updateRow=function(t){},n.prototype.updateRows=function(t,e){},n.prototype.updateRowList=function(t){},n.prototype.setValue=function(t,e){},n.prototype.moveRow=function(t,e){},n.prototype.moveRows=function(t,e,i){},n.prototype.moveRowList=function(t,e){},n.prototype.changeStates=function(t){};var i,o=n;function n(){return i.call(this)||this}e.DataTag=o;r=se.Base,ne.__extends(s,r),s.prototype._doDispose=function(){this._owner=null,this._tags=null,r.prototype._doDispose.call(this)},s.prototype.add=function(t){null!=this._tags&&t&&this._tags.indexOf(t)<0&&(this._tags.push(t),t.connect(this._owner))},s.prototype.remove=function(t){var e;null!=this._tags&&t&&0<=(e=this._tags.indexOf(t))&&(this._tags.splice(e,1),t.disconnect())},s.prototype.clearRows=function(){if(null!=this._tags)for(var t=0,e=this._tags;t<e.length;t++)e[t].clearRows()},s.prototype.setRows=function(){if(null!=this._tags)for(var t=0,e=this._tags;t<e.length;t++)e[t].setRows()},s.prototype.setRowCount=function(t){if(null!=this._tags)for(var e=0,i=this._tags;e<i.length;e++)i[e].setRowCount(t)},s.prototype.insertRow=function(t){if(null!=this._tags)for(var e=0,i=this._tags;e<i.length;e++)i[e].insertRow(t)},s.prototype.insertRows=function(t,e){if(null!=this._tags)for(var i=0,o=this._tags;i<o.length;i++)o[i].insertRows(t,e)},s.prototype.removeRow=function(t){if(null!=this._tags)for(var e=0,i=this._tags;e<i.length;e++)i[e].removeRow(t)},s.prototype.removeRows=function(t){if(null!=this._tags)for(var e=0,i=this._tags;e<i.length;e++)i[e].removeRows(t)},s.prototype.updateRow=function(t){if(null!=this._tags)for(var e=0,i=this._tags;e<i.length;e++)i[e].updateRow(t)},s.prototype.updateRows=function(t,e){if(null!=this._tags)for(var i=0,o=this._tags;i<o.length;i++)o[i].updateRows(t,e)},s.prototype.updateRowList=function(t){if(null!=this._tags)for(var e=0,i=this._tags;e<i.length;e++)i[e].updateRowList(t)},s.prototype.setValue=function(t,e){if(null!=this._tags)for(var i=0,o=this._tags;i<o.length;i++)o[i].setValue(t,e)},s.prototype.moveRow=function(t,e){if(null!=this._tags)for(var i=0,o=this._tags;i<o.length;i++)o[i].moveRow(t,e)},s.prototype.moveRows=function(t,e,i){if(null!=this._tags)for(var o=0,n=this._tags;o<n.length;o++)n[o].moveRows(t,e,i)},s.prototype.moveRowList=function(t,e){if(null!=this._tags)for(var i=0,o=this._tags;i<o.length;i++)o[i].moveRowList(t,e)};var r,o=s;function s(t){var e=r.call(this)||this;return e._tags=[],e._owner=t,e}e.DataTagCollection=o})),d=(t(m),m.DataTag,m.DataTagCollection,e(function(t,e){Object.defineProperty(e,"__esModule",{value:!0});i.prototype.dispose=function(){this._exprNode=null},_dp(i,"criteria",{get:function(){return this._criteria},set:function(t){t!=this._criteria&&(this._criteria=t,this._exprNode=t?$.ExpressionParser.Default.parse(t,i.CAPITAL_INDEXERS):null)}}),i.prototype.select=function(t,e,i){return!this._exprNode||(t.setRow(e,i),this._exprNode.evaluate(t))},i.CAPITAL_INDEXERS=["value","values","len"];var r=i;function i(t){this._active=!1,this._exprNode=null,this.criteria=t}e.DataFilter=r;n.prototype.dispose=function(){return this._filters&&this._filters.forEach(function(t,e){t.dispose()}),this._filters=null},_dp(n,"filterMode",{get:function(){return this._filterMode},set:function(t){t=t&&t.toLocaleLowerCase();t!=this._filterMode&&(this._filterMode=t,this._or=this._filterMode==n.FILTER_OR)}}),n.prototype.load=function(t){if(!t||t instanceof Array||(t=[t]),this._filters=[],t instanceof Array)for(var e=0,i=t.length;e<i;e++){var o=void 0,n=t[e];n&&("string"==typeof n?o=new r(n):n.criteria&&(o=new r(n.criteria))),o&&this._filters.push(o)}},n.prototype.prepare=function(t,e){t.prepare(e)},n.prototype.select=function(t,e,i){var o=this._filters,n=o.length;if(this._or){for(var r=0;r<n;r++)if(1==o[r].select(t,e,i))return!0;return!1}for(r=0;r<n;r++)if(0==o[r].select(t,e,i))return!1;return!0},n.FILTER_AND="and",n.FILTER_OR="or";var o=n;function n(t,e){this._filterMode=n.FILTER_AND,this._or=!1,this.load(t),e&&(this.filterMode=e)}e.DataFilterCollection=o;s=$.ExpressionRuntime,ne.__extends(a,s),a.prototype._doDispose=function(){this._ds=null,s.prototype._doDispose.call(this)},a.prototype.prepare=function(t){this._ds=t,this._fieldCount=t?t.fieldCount:0},a.prototype.setRow=function(t,e){this._row=t,this._values=e},a.prototype.isIdentifier=function(t){return t=t.toLowerCase(),a.IDENTS.hasOwnProperty(t)?a.IDENTS[t]:s.prototype.isIdentifier.call(this,t)},a.prototype.evaluateIdentifier=function(t){if(t===a.ID_ROW)return this._row;throw new $.ExpressionEvaluationError("Invalid identifier key: "+t)},a.prototype.evaluateIndexerI=function(t,e){if(e<0||e>=this._fieldCount)throw new $.ExpressionEvaluationError("Data field index out of bounds:"+e);switch(t){case a.ID_VALUE:case a.ID_VALUES:return this._values[e]}throw new $.ExpressionEvaluationError("Invalid identifier indexer: "+t)},a.prototype.evaluateIndexerS=function(t,e,i){switch(t){case a.ID_VALUE:case a.ID_VALUES:var o=this.getField(e,i);return this._values[o]}throw new $.ExpressionEvaluationError("Invalid identifier indexer: "+t)},a.prototype.getField=function(t,e){e=e?this._ds.getFieldIndexC(t):this._ds.getFieldIndex(t);if(e<0||e>=this._fieldCount)throw new $.ExpressionEvaluationError("Data field is not exits:"+t);return e},a.IDENTS={row:a.ID_ROW=0,value:a.ID_VALUE=1,values:a.ID_VALUES=2};var s,o=a;function a(){var t=s.call(this)||this;return t._ds=null,t._fieldCount=0,t._row=-1,t._values=null,t}e.DataFilterRuntime=o})),C=(t(d),d.DataFilter,d.DataFilterCollection,d.DataFilterRuntime,e(function(t,e){Object.defineProperty(e,"__esModule",{value:!0});i=c.DataSource,ne.__extends(n,i),n.prototype._doDispose=function(){this._tags=this._tags.dispose(),this._filters=this._filters&&this._filters.dispose(),this._filterRuntime=this._filterRuntime.dispose(),this._commandListeners=null,i.prototype._doDispose.call(this)},n.prototype.editCommandStackChanged=function(t,e,i){this._fireCommandStackChanged(e,i)},_dp(n,"filters",{get:function(){return this._filters}}),_dp(n,"filterRuntime",{get:function(){return this._filterRuntime}}),_dp(n,"deletedCount",{get:function(){return 0}}),_dp(n,"tags",{get:function(){return this._tags}}),n.prototype.addTag=function(t){this._tags.add(t)},n.prototype.removeTag=function(t){this._tags.remove(t)},n.prototype.setFilterMode=function(t){this._filters&&t==this._filters.filterMode||(this._filters?this._filters.filterMode=t:this._filters=new d.DataFilterCollection(null,t))},n.prototype.setFilters=function(t,e){!t||t instanceof d.DataFilterCollection?(this._filters=t,this._filters&&e&&(this._filters.filterMode=e)):this._filters=new d.DataFilterCollection(t,e)},n.prototype.getRowObject=function(t){if(t<0||t>=this.rowCount)throw new c.DataSourceError("row is out of range: "+t);for(var e={},i=0,o=this.fieldCount;i<o;i++){var n=this.getOrgFieldName(i),r=this.getValue(t,i);e[n]=r}return e},n.prototype.compareValues=function(t,e,i){return 0},n.prototype.compareTexts=function(t,e,i,o){return 0},n.prototype.compareNumbers=function(t,e,i){return 0},n.prototype.compareBools=function(t,e,i){return 0},n.prototype.compareObjects=function(t,e,i){return 0},n.prototype.summarize=function(t,e){return!1},n.prototype.summarizeRange=function(t,e,i){return!1},n.prototype.copyRows=function(t,e,i,o){},_dp(n,"hiddenCount",{get:function(){return 0}}),n.prototype.isHiddenRow=function(t){return!1},n.prototype.registerCommandListener=function(t){t&&this._commandListeners&&this._commandListeners.indexOf(t)<0&&this._commandListeners.push(t)},n.prototype.unregisterCommandListener=function(t){t=this._commandListeners?this._commandListeners.indexOf(t):-1;0<=t&&this._commandListeners.splice(t,1)},n.prototype.findRow=function(t,e,i){},n.prototype._doFieldsReset=function(){this._fireReset()},n.prototype._keepCommandStates=function(t){if(0<this._commandListeners.length)return this._commandListeners[0].getCommandStates(t)},n.prototype._yieldCommandStates=function(t,e){if(0<this._commandListeners.length)return this._commandListeners[0].setCommandStates(t,e)},n.prototype.fireDisposed=function(){this._eventLock<=0&&this.fireEvent("onDataProvderDisposed")},n.prototype._fireReset=function(){this._eventLock<=0?this.fireEvent("onDataProviderReset"):this._resetLock++},n.prototype._fireRefresh=function(){this._eventLock<=0&&this.fireEvent("onDataProviderRefresh")},n.prototype._fireRowCountChanged=function(){this._eventLock<=0?this.fireEvent("onDataProviderRowCountChanged"):this._countLock++},n.prototype.fireDataLoadComplated=function(){this._eventLock<=0&&this.fireEvent("onDataProviderDataLoadComplated")},n.prototype.fireRowInserting=function(t,e){return!(this._eventLock<=0)||this.fireConfirmEvent("onDataProviderRowInserting",t,e)},n.prototype.fireRowInserted=function(t){this._eventLock<=0&&(this.fireEvent("onDataProviderRowInserted",t),this.fireEvent("onDataProviderDataChanged"))},n.prototype.fireRowsInserted=function(t,e){this._eventLock<=0&&(this.fireEvent("onDataProviderRowsInserted",t,e),this.fireEvent("onDataProviderDataChanged"))},n.prototype.fireRowRemoving=function(t){return!(this._eventLock<=0)||this.fireConfirmEvent("onDataProviderRowRemoving",t)},n.prototype.fireRowRemoved=function(t){this._eventLock<=0&&(this.fireEvent("onDataProviderRowRemoved",t),this.fireEvent("onDataProviderDataChanged"))},n.prototype.fireRowsRemoving=function(t){return!(this._eventLock<=0)||this.fireConfirmEvent("onDataProviderRowsRemoving",t)},n.prototype.fireRowsRemoved=function(t){this._eventLock<=0&&(this.fireEvent("onDataProviderRowsRemoved",t),this.fireEvent("onDataProviderDataChanged"))},n.prototype.fireRowUpdating=function(t,e){return!(this._eventLock<=0)||this.fireConfirmEvent("onDataProviderRowUpdating",t,e)},n.prototype.fireRowUpdated=function(t){this._eventLock<=0&&(this.fireEvent("onDataProviderRowUpdated",t),this.fireEvent("onDataProviderDataChanged"))},n.prototype.fireRowsUpdated=function(t,e){this._eventLock<=0&&(this.fireEvent("onDataProviderRowsUpdated",t,e),this.fireEvent("onDataProviderDataChanged"))},n.prototype.fireRowListUpdated=function(t){this._eventLock<=0&&(this.fireEvent("onDataProviderRowListUpdated",t),this.fireEvent("onDataProviderDataChanged"))},n.prototype.fireRowMoving=function(t,e){return!(this._eventLock<=0)||this.fireConfirmEvent("onDataProviderRowMoving",t,e)},n.prototype.fireRowMoved=function(t,e){this._eventLock<=0&&this.fireEvent("onDataProviderRowMoved",t,e)},n.prototype.fireRowsMoving=function(t,e,i){return!(this._eventLock<=0)||this.fireConfirmEvent("onDataProviderRowsMoving",t,e,i)},n.prototype.fireRowsMoved=function(t,e,i){this._eventLock<=0&&this.fireEvent("onDataProviderRowsMoved",t,e,i)},n.prototype.fireRowListMoving=function(t,e){return!(this._eventLock<=0)||this.fireConfirmEvent("onDataProviderRowListMoving",t,e)},n.prototype.fireRowListMoved=function(t,e){this._eventLock<=0&&this.fireEvent("onDataProviderRowListMoved",t,e)},n.prototype.fireValueChanging=function(t,e,i){return!(this._eventLock<=0)||this.fireConfirmEvent("onDataProviderValueChanging",t,e,i)},n.prototype.fireValueChanged=function(t,e){this._eventLock<=0&&(this.fireEvent("onDataProviderValueChanged",t,e),this.fireEvent("onDataProviderDataChanged"))},n.prototype.fireRowStateChanged=function(t){this._eventLock<=0&&this.fireEvent("onDataProviderStateChanged",t)},n.prototype.fireRowStatesChanged=function(t){this._eventLock<=0&&this.fireEvent("onDataProviderStatesChanged",t)},n.prototype.fireRowStatesCleared=function(){this._eventLock<=0&&this.fireEvent("onDataProviderStatesCleared")},n.prototype.fireRestoreRows=function(t){this._eventLock<=0&&this.fireEvent("onDataProviderRestoreRows",t)},n.prototype.fireRowHided=function(t,e){this._eventLock<=0&&this.fireEvent("onDataProviderRowHided",t,e)};var i,o=n;function n(){var t=i.call(this)||this;return t._tags=new m.DataTagCollection(t),t._filterRuntime=new d.DataFilterRuntime,t._commandListeners=[],t}e.DataProvider=o})),dt=(t(C),C.DataProvider,e(function(t,e){Object.defineProperty(e,"__esModule",{value:!0});var o,h=["yy","yyyy","M","MM","d","dd","a","A","H","HH","h","hh","m","mm","s","ss"],c=[".","/","-",":"],_="0".charCodeAt(0),p="9".charCodeAt(0),n=[31,28,31,30,31,30,31,31,30,31,30],f=["am","pm","AM","PM","Am","Pm","aM","pM"],i=((i=o=e.DateProperty||(e.DateProperty={}))[i.YEAR=0]="YEAR",i[i.HALF=1]="HALF",i[i.QUARTER=2]="QUARTER",i[i.MONTH=3]="MONTH",i[i.WEEK=4]="WEEK",i[i.DAY=5]="DAY",i[i.HOUR=6]="HOUR",r.getSimpleDateNull=function(t){var e,i,o;return t instanceof Date?t:"number"==typeof t?new Date(t):3==(o=(t=8===t.length&&/^[0-9]*$/.test(t)?t.replace(/(\d{4})(\d{2})(\d{2})/,"$1/$2/$3"):t).split(/[.//-]/)).length&&(e=parseInt(o[0]),i=parseInt(o[1])-1,o=parseInt(o[2]),e==(t=new Date(e,i,o)).getFullYear())&&i==t.getMonth()&&o==t.getDate()?t:null},r.getDateProperty=function(t,e){if(!t)return null;switch(e){case o.YEAR:return t.getFullYear();case o.HALF:return 5<t.getMonth()?2:1;case o.QUARTER:return Math.floor(t.getMonth()/3);case o.MONTH:return t.getMonth();case o.WEEK:var i=new Date(t.getFullYear(),t.getMonth(),1);return i.setDate(i.getDate()-i.getDay()),Math.floor((t.getTime()-i.getTime())/6048e5)+1;case o.DAY:return t.getDate();case o.HOUR:return t.getHours()}},_dp(r,"format",{get:function(){return this._format},set:function(t){t!=this._format&&(this._format=t,this.parse(t))}}),r.prototype.getDate=function(t){var e;if(t=t.trim()){for(var i=this.parseDateFormatTokens(this._format),o=this.parseDateValueTokens(t,this._amText,this._pmText),n=i.length,r=o.length,s=0,a=1,l=1,h=0,d=0,u=0,c=0,_=0,p=0,f=0;p<n&&f<r;){var g=i[p],m=o[f];switch(g.charAt(0)){case"L":var y=String(m);for(p++;p<n&&"E"!=(t=i[p]);){var v=y?parseInt(y.substr(0,t.length)):-1,y=y.substr(t.length);switch(t.charAt(0)){case"Y":case"y":s=Math.max(0,v);break;case"M":a=0<=v?v:1;break;case"D":case"d":l=0<=v?v:1;break;case"H":case"h":h=Math.max(0,v);break;case"m":d=Math.max(0,v);break;case"s":u=Math.max(0,v)}p++}break;case"Y":case"y":s=parseInt(m);break;case"M":a=parseInt(m);break;case"D":case"d":l=parseInt(m);break;case"H":case"h":h=parseInt(m);break;case"m":d=parseInt(m);break;case"s":u=parseInt(m);break;case"a":(t=String(m))&&(t=t.toLowerCase(),this._amText&&t==this._amText.toLowerCase()||"am"==t?c=12:(this._pmText&&t==this._pmText.toLowerCase()||"pm"==t)&&(_=12))}p++,f++}if(s<100&&0<=s&&(s+=this._baseYear),s<0||9999<s)return null;if(re.Utils.included(a,1,3,5,7,8,10,12)){if(l<1||31<l)return null}else if(re.Utils.included(a,4,6,9,11)){if(l<1||30<l)return null}else{if(2!=a)return null;if(29<l)return null;if(29==l&&(s%4!=0||s%100==0)&&s%400!=0)return null}if(h<0||24<h)return null;if((0<c||0<_)&&12<h)return null;if(d<0||59<d)return null;if(u<0||59<u)return null;0<c?h%=12:0<_&&(h=h%12+12),e=new Date(s,a-1,l,h,d,u)}return e},r.prototype.getDateNull=function(t){try{return this.getDate(t)}catch(t){}return null},r.prototype.getText=function(t){for(var e=t,i=(e instanceof Date||(e=new Date(t)),this.parseDateFormatTokens(this._format)),o=0<=i.indexOf("a")||0<=i.indexOf("A"),n="",r=0,s=i.length;r<s;r++){var a,l=i[r],h=l.length;switch(l.charAt(0)){case"L":break;case"Y":case"y":n+=2<h?e.getFullYear():re.Utils.pad(e.getFullYear()%100);break;case"M":n+=1<h?re.Utils.pad(e.getMonth()+1):e.getMonth()+1;break;case"D":case"d":n+=1<h?re.Utils.pad(e.getDate()):e.getDate();break;case"H":n+=1<h?re.Utils.pad(e.getHours()):e.getHours();break;case"h":o?(0==(a=e.getHours())?a=12:12<a&&(a-=12),n+=1<h?re.Utils.pad(a):a):n+=1<h?re.Utils.pad(e.getHours()):e.getHours();break;case"m":n+=1<h?re.Utils.pad(e.getMinutes()):e.getMinutes();break;case"s":n+=1<h?re.Utils.pad(e.getSeconds()):e.getSeconds();break;case"A":case"a":e.getHours()<12?n+=this._amText:n+=this._pmText;break;default:n+=l}}return n},r.prototype.daysOfYear=function(t){for(var e,i=0,o=0;o<t.getMonth();o++)i+=n[o];return 2<=t.getMonth()&&((e=t.getFullYear())%400==0||e%4==0&&e%100!=0)&&i++,i+=t.getDate()},r.prototype.daysOfPriorYears=function(t){return t<=1900?0:365*(--t-1899)+(Math.floor(t/4)-Math.floor(t/100)+Math.floor(t/400)-460)},r.prototype.toExcelDate=function(t){var e=(1e3*(60*(60*t.getHours()+t.getMinutes())+t.getSeconds())+t.getMilliseconds())/864e5,t=this.daysOfPriorYears(t.getFullYear())+this.daysOfYear(t)+e;return 60<=t&&t++,t},r.prototype.parseDateFormatTokens=function(t){var e=[],i=t&&t.trim();if(i){for(var o=i.length,n=0;n<o;){var r=i.charAt(n);if(0<=c.indexOf(r))e.push(r),n++;else{for(var s=n++;n<o&&i.charAt(n)==r;)n++;if(r=i.substring(s,n),h.indexOf(r)<0)throw new Error("Invalid datetime read format: "+t);e.push("A"==r?"a":r)}if(n<o&&re.Utils.isWhiteSpace(r=i.charAt(n)))for(e.push(" ");n<o&&re.Utils.isWhiteSpace(i.charAt(n));)n++}for(var a=[],l=0,o=e.length,n=0;n<o;n++)"a"==(r=e[n])||h.indexOf(r)<0?(1<l&&a.push("E"),a.push(r),l=0):(1==l&&a.splice(a.length-2,0,"L"),a.push(r),l++);e=a}return e},r.prototype.parseDateValueTokens=function(t,e,i){var o=[],n=t.trim();if(n)for(var r=f.slice(),s=(e&&r.push(e),i&&r.push(i),n.length),a=0;a<s;){var l=n.charAt(a);if(0<=c.indexOf(l))o.push(l),a++;else if(l.charCodeAt(0)>=_&&l.charCodeAt(0)<=p){for(var h=a++;a<s&&n.charCodeAt(a)>=_&&n.charCodeAt(a)<=p;)a++;l=n.substring(h,a),o.push(l)}else{for(var d=-1,u=0;u<r.length;u++)if(n.indexOf(r[u],a)==a){d=u;break}if(d<0)throw"Invalid date value: "+n;o.push(r[u]),a+=r[u].length}if(a<s&&re.Utils.isWhiteSpace(l=n.charAt(a)))for(o.push(" ");a<s&&re.Utils.isWhiteSpace(n.charAt(a));)a++}return o},r.prototype.validateDateFormat=function(t){if(t=t&&t.trim()){var e=this.parseDateFormatTokens(t),i=0<=e.indexOf("a");if(i&&0<=e.indexOf("H"))throw"Invalid datetime read format - 'H'와 'a'가 같이 존재할 수 없습니다: "+t;if(0<=e.indexOf("h")&&!i)throw"Invalid datetime read format - 'h'가 있으면 'a'가 반드시 있어야 합니다: "+t}},r.prototype.parse=function(t){this._amText="am",this._pmText="pm",this._baseYear=2e3,t&&(t=t.split(";"),this._format=t[0]||r.DEFAULT_FORMAT,this.validateDateFormat(this._format),1<t.length&&t[1]&&(this._baseYear=parseInt(t[1])),2<t.length)&&t[2]&&(t=t[2].split(","),this._amText=t[0]||"am",1<t.length)&&(this._pmText=t[1]||"pm")},r.Default=new r(r.DEFAULT_FORMAT="yyyy/MM/dd"),r);function r(t){this._baseYear=2e3,this.format=t}e.DateTimeConverter=i})),w=(t(dt),dt.DateProperty,dt.DateTimeConverter,e(function(t,e){Object.defineProperty(e,"__esModule",{value:!0});i=se.Base,ne.__extends(n,i);var i,o=n;function n(t){var e=i.call(this)||this;return e.fields=[],e.values=[],e.startIndex=0,e.wrap=!0,e.select=!0,e.allFields=!0,e.caseSensitive=!1,e.partialMatch=!1,e.compareCallback=null,t&&e.extend(t),e}e.SearchOptions=o;r=se.Base,ne.__extends(s,r);var r,o=s;function s(t){var e=r.call(this)||this;return e.fields=null,e.value=null,e.startIndex=0,e.startFieldIndex=0,e.wrap=!0,e.select=!0,e.caseSensitive=!1,e.partialMatch=!1,e.columns=null,e.compareCallback=null,t&&e.extend(t),e}e.SearchCellOptions=o})),I=(t(w),w.SearchOptions,w.SearchCellOptions,e(function(t,e){Object.defineProperty(e,"__esModule",{value:!0});i=Error,ne.__extends(n,i);var i,o=n;function n(t){return i.call(this,t)||this}e.EditCommandError=o;r=se.Base,ne.__extends(s,r),s.prototype._doDispose=function(){},s.prototype.undo=function(){},s.prototype.redo=function(t){},s.prototype.execute=function(){return this.redo(!1)};var r,o=s;function s(){return r.call(this)||this}e.EditCommand=o;a=o,ne.__extends(l,a),l.prototype._doDispose=function(){a.prototype._doDispose.call(this)},l.prototype.undo=function(){},l.prototype.redo=function(t){},l.prototype.execute=function(){return this.redo(!1)};var a,o=l;function l(){return a.call(this)||this}e.EditCommandGruop=o;h=P.EventAware,ne.__extends(d,h),d.prototype._doDispose=function(){this._owner=null,this._commands=null,h.prototype._doDispose.call(this)},_dp(d,"owner",{get:function(){return this._owner}}),_dp(d,"length",{get:function(){return this._commands.length}}),_dp(d,"canUndo",{get:function(){return 0<=this._current}}),_dp(d,"canRedo",{get:function(){return this._commands.length>this._current+1}}),_dp(d,"undoing",{get:function(){return this._undoing}}),_dp(d,"redoing",{get:function(){return this._redoing}}),d.prototype.undo=function(){if(this.canUndo){var t=this._commands[this._current];this._undoing=!0;try{t.undo()}finally{this._undoing=!1}this._current=this._current-1,this._changed()}},d.prototype.redo=function(t){var e;if(this.canRedo){var i=this._current+1,o=this._commands[i];this._redoing=!0;try{e=o.redo(!0)}finally{this._redoing=!1}this._current=i,this._changed()}return e},d.prototype.execute=function(t){if(t){var e=this._current++,i=(this._commands[this._current]=t,this.$_shrink(this._current+1),void 0);try{i=t.execute()}catch(t){throw this.$_shrink(1+e),this._current=e,t}return this._changed(),i}},d.prototype.flush=function(){var t=this._commands.length;if(0<t){for(;t--;)this._commands[t].dispose();this._commands=[],this._current=-1,this._changed()}},d.prototype._changed=function(){null!=this._owner&&this._owner.editCommandStackChanged(this,this.canUndo,this.canRedo)},d.prototype.$_shrink=function(t){if(0<=t&&t<this._commands.length){for(var e=this._commands.length-1;t<=e;e--)this._commands[e].dispose();this._commands.splice(t,this._commands.length-t)}};var h,o=d;function d(t){var e=h.call(this)||this;return e._commands=[],e._current=-1,e._undoing=!1,e._redoing=!1,e._owner=t,e}e.EditCommandStack=o})),S=(t(I),I.EditCommandError,I.EditCommand,I.EditCommandGruop,I.EditCommandStack,e(function(t,e){Object.defineProperty(e,"__esModule",{value:!0});i=I.EditCommand,ne.__extends(n,i),n.prototype._doDispose=function(){this._ds=null,this._save=null,i.prototype._doDispose.call(this)},n.prototype.redo=function(t){return t?this._doRedo(this._ds,this._save):this._save=this._doRun(this._ds),this._save&&this._save.result},n.prototype.undo=function(){this._doUndo(this._ds,this._save)},n.prototype._setSoftDeleting=function(t,e){t._softDeleting=e},n.prototype._setDeleteCreated=function(t,e){t._deleteCreated=e},n.prototype._cloneRow=function(t){if(re.Utils.isArray(t))return t.slice();if(t){var e,i={};for(e in t)i[e]=t[e];return i}},n.prototype._cloneValues=function(t,e,i){if(void 0===e&&(e=0),void 0===i&&(i=-1),t){for(var o=t.length,n=[],r=(i<0&&(i=o),e=Math.max(0,e),Math.min(o,e+i)),s=e;s<r;s++){var a=t[s];if(re.Utils.isArray(a))n.push(a.slice());else if(a){var l,h={};for(l in a)h[l]=a[l];n.push(h)}}return n}return null};var i,o=n;function n(t){var e=i.call(this)||this;return e._ds=t,e}e.DataEditCommand=o;r=o,ne.__extends(s,r),s.prototype._doDispose=function(){r.prototype._doDispose.call(this)};var r,o=s;function s(t){return r.call(this,t)||this}e.LocalDataEditCommand=o;a=I.EditCommandStack,ne.__extends(l,a);var a,o=l;function l(){return null!==a&&a.apply(this,arguments)||this}e.LocalDataCommandStack=o})),T=(t(S),S.DataEditCommand,S.LocalDataEditCommand,S.LocalDataCommandStack,e(function(t,e){Object.defineProperty(e,"__esModule",{value:!0});n=S.LocalDataEditCommand,ne.__extends(o,n),o.prototype._doRun=function(t){var e={};return e.row=t._keepRow(this._row),(e.result=t.$_setValue(this._row,this._field,this._value))&&(this._newState=t.getRowState(this._row)),e},o.prototype._doRedo=function(t,e){t.$_setValue(this._row,this._field,this._value)},o.prototype._doUndo=function(t,e){t._yieldRow(this._row,e.row),e.row.state!=this._newState&&t.fireRowStateChanged(this._row),t.fireValueChanged(this._row,this._field)};var n,i=o;function o(t,e,i,o){t=n.call(this,t)||this;return t._row=e,t._field=i,t._value=o,t}e.SetValueDataCommand=i})),D=(t(T),T.SetValueDataCommand,e(function(t,e){Object.defineProperty(e,"__esModule",{value:!0});n=S.LocalDataEditCommand,ne.__extends(o,n),o.prototype._doDispose=function(){this._values=null,n.prototype._doDispose.call(this)},o.prototype._doRun=function(t){var e={};return e.row=t._keepRow(this._row),(e.result=t.$_updateRow(this._row,this._values,this._strict))&&(this._newState=t.getRowState(this._row)),e},o.prototype._doRedo=function(t,e){t.$_updateRow(this._row,this._values,this._strict)},o.prototype._doUndo=function(t,e){t._yieldRow(this._row,e.row),e.row.state!=this._newState&&t.fireRowStateChanged(this._row),t.fireRowUpdated(this._row)};var n,i=o;function o(t,e,i,o){t=n.call(this,t)||this;return t._row=e,t._values=t._cloneRow(i),t._strict=o,t}e.UpdateRowDataCommand=i})),M=(t(D),D.UpdateRowDataCommand,e(function(t,e){Object.defineProperty(e,"__esModule",{value:!0});n=S.LocalDataEditCommand,ne.__extends(o,n),o.prototype._doRun=function(t){var e={};return e.result=t.$_insertRow(this._row,this._values),e},o.prototype._doRedo=function(t,e){t.$_insertRow(this._row,this._values)},o.prototype._doUndo=function(t,e){t.$_deleteRow(this._row)};var n,i=o;function o(t,e,i){var o=n.call(this,t)||this;return o._row=e,re.Utils.isArray(i)||(i=t.objectToRow(i)),o._values=i.slice(),o}e.InsertRowDataCommand=i})),F=(t(M),M.InsertRowDataCommand,e(function(t,e){Object.defineProperty(e,"__esModule",{value:!0});i=S.LocalDataEditCommand,ne.__extends(n,i),n.prototype._doRun=function(t){var e={};return this._softDeleting=t.softDeleting,e.row=t._keepRow(this._row),e.result=t.$_deleteRow(this._row),e},n.prototype._doRedo=function(t,e){var i=t.softDeleting;try{this._setSoftDeleting(t,this._softDeleting),t.$_deleteRow(this._row)}finally{this._setSoftDeleting(t,i)}},n.prototype._doUndo=function(t,e){t.$_insertRow(this._row,e.row.values),t._yieldStates(this._row,e.row),t._yieldCommandStates(this._row,e.row.outer)};var i,o=n;function n(t,e){t=i.call(this,t)||this;return t._row=e,t}e.RemoveRowDataCommand=o})),O=(t(F),F.RemoveRowDataCommand,e(function(t,e){Object.defineProperty(e,"__esModule",{value:!0});n=S.LocalDataEditCommand,ne.__extends(o,n),o.prototype._doRun=function(t){var e={};return e.row=t._keepStates(this._row),t.$_setRowState(this._row,this._state,this._force),e},o.prototype._doRedo=function(t,e){t.$_setRowState(this._row,this._state,this._force)},o.prototype._doUndo=function(t,e){t._yieldState(this._row,e.row),e.row.state!=this._state&&t.fireRowStateChanged(this._row)};var n,i=o;function o(t,e,i,o){t=n.call(this,t)||this;return t._row=e,t._state=i,t._force=o,t}e.SetRowStateDataCommand=i})),V=(t(O),O.SetRowStateDataCommand,e(function(t,e){Object.defineProperty(e,"__esModule",{value:!0});o=S.LocalDataEditCommand,ne.__extends(n,o),n.prototype._doDispose=function(){o.prototype._doDispose.call(this)},n.prototype._doRun=function(t){var e={};return e.state=t._keepState(this._row),t.$_changeRowState(this._row,this._state,!0,!0,!0),e},n.prototype._doRedo=function(t,e){t.$_changeRowState(this._row,this._state,!0,!0,!0)},n.prototype._doUndo=function(t,e){t._yieldState(this._row,e.state),e.state!=this._state&&t.fireRowStateChanged(this._row)};var o,i=n;function n(t,e,i){t=o.call(this,t)||this;return t._row=e,t._state=i,t}e.ChangeRowStateDataCommand=i})),B=(t(V),V.ChangeRowStateDataCommand,e(function(t,e){Object.defineProperty(e,"__esModule",{value:!0});o=S.LocalDataEditCommand,ne.__extends(n,o),n.prototype._doRun=function(t){var e={},t=(e.rows=[],e.orgValues=t._keepOrgValues(),t.$_clearRowStates(this._deleteRows,this._rowEvents,!0));return e.rows=t.rows,e.states=t.states,e.values=t.values,e},n.prototype._doRedo=function(t,e){t.$_clearRowStates(this._deleteRows,this._rowEvents,!1)},n.prototype._doUndo=function(t,e){var i=e.rows,o=e.values,n=e.states,r=[];if(o)for(var s=0;s<i.length;s++)t.$_internalInsertRow(s,o[s],e.row,!0);if(n)for(s=0;s<n.length;s++)n[s]&&(t._yieldState(s,n[s]),n[s]!==b.RowState.NONE)&&r.push(s);t._yieldOrgValues(e.rows),(0<i.length||0<n.length)&&t._fireRefresh()};var o,i=n;function n(t,e,i){t=o.call(this,t)||this;return t._deleteRows=e,t._rowEvents=i,t}e.ClearRowStatesDataCommand=i})),N=(t(B),B.ClearRowStatesDataCommand,e(function(t,e){Object.defineProperty(e,"__esModule",{value:!0});a=S.LocalDataEditCommand,ne.__extends(o,a),o.prototype._doDispose=function(){this._values=null,a.prototype._doDispose.call(this)},o.prototype._doRun=function(t){var e={};return t.$_updateRows(this._row,this._values,this._start,this._count,this._strict,this._rowEvents,e),e},o.prototype._doRedo=function(t,e){t.$_updateRows(this._row,this._values,this._start,this._count,this._strict,this._rowEvents,null)},o.prototype._doUndo=function(t,e){var i=e.rows;if(!(i.length<1)){for(var o=e.values,n=e.states,r=e.orgValues,s=0;s<i.length;s++){var a=i[s];t.$_restoreRow(a,o[s],n[s],r[s])}t._fireRefresh()}};var a,i=o;function o(t,e,i,o,n,r,s){t=a.call(this,t)||this;return t._row=e,t._values=t._cloneValues(i,o,n),t._start=0,t._count=t._values.length,t._rowEvents=r,t._strict=s,t}e.UpdateRowsDataCommand=i})),J=(t(N),N.UpdateRowsDataCommand,e(function(t,e){Object.defineProperty(e,"__esModule",{value:!0});o=S.LocalDataEditCommand,ne.__extends(n,o),n.prototype._doRun=function(t){var e={};return this._softDeleting=t.softDeleting,t.$_removeRows(this._rows,this._rowEvents,e),e},n.prototype._doRedo=function(t,e){var i=t.softDeleting;try{this._setSoftDeleting(t,this._softDeleting),t.$_removeRows(this._rows,this._rowEvents,null)}finally{this._setSoftDeleting(t,i)}},n.prototype._doUndo=function(t,e){var i=e.rows,o=e.statedRows;if(!(i.length<1&&o.length<1)){for(var n=e.rowSaves,r=e.states,s=0;s<i.length;s++){var a=i[s],l=n[s];t.$_internalInsertRow(a,l.values,!0),t._yieldRow(a,l,!1)}for(s=0;s<o.length;s++){a=o[s];t._yieldState(a,r[s])}t._fireRefresh();for(s=0;s<i.length;s++){var a=i[s],h=n[s];t._yieldCommandStates(a,h.outer)}}};var o,i=n;function n(t,e,i){t=o.call(this,t)||this;return t._rows=e.slice(),t._rowEvents=i,t}e.RemoveRowsDataCommand=i})),Z=(t(J),J.RemoveRowsDataCommand,e(function(t,e){Object.defineProperty(e,"__esModule",{value:!0});s=S.LocalDataEditCommand,ne.__extends(o,s),o.prototype._doRun=function(t){return t.$_insertRows(this._row,this._values,this._start,this._count,this._rowEvents),{}},o.prototype._doRedo=function(t,e){t.$_insertRows(this._row,this._values,this._start,this._count,this._rowEvents)},o.prototype._doUndo=function(t,e){if(!this._rows){this._rows=[];for(var i=0;i<this._values.length;i++)this._rows.push(this._row+i)}var o=t.softDeleting;try{this._setSoftDeleting(t,!1),t.$_removeRows(this._rows,!1,null)}finally{this._setSoftDeleting(t,o)}};var s,i=o;function o(t,e,i,o,n,r){t=s.call(this,t)||this;return t._row=e,t._values=t._cloneValues(i,o,n),t._start=0,t._count=t._values.length,t._rowEvents=r,t}e.InsertRowsDataCommand=i})),Q=(t(Z),Z.InsertRowsDataCommand,e(function(t,e){Object.defineProperty(e,"__esModule",{value:!0});i=se.Base,ne.__extends(u,i),u.csvToArray=function(t,e,i,o,n,r){void 0===i&&(i=0),void 0===o&&(o=-1),void 0===n&&(n=!1),void 0===r&&(r=",");for(var s=[],a=[],l=e.length,h=0,d=[],u=!1,c=!1;h<l;){var _=e.charAt(h);'"'==_?u?c&&'"'==e.charAt(h+1)?(d.push(_),h++):c&&(c=!1,n)||d.push(_):(u=c=!0,n||d.push(_)):c||_!=r&&"\r"!=_&&"\n"!=_?(u=!0,d.push(_)):(_==r?a.push(d.join("")):"\r"!=_&&"\n"!=_||(a.push(d.join("")),s.push(a),a=[],"\n"==e.charAt(h+1)&&h++),u=!(d=[])),h++}c&&d.splice(0,0,'"'),0<d.length&&a.push(d.join("")),0<a.length&&s.push(a),0<i&&(o<=0?s.splice(0,i):s=s.splice(i,o));for(var p=t.getFields(),f=p.length,g=0<f,m=0,y=s.length;m<y;m++){a=s[m],g&&a.length>f&&(a.length=f);for(var v=0;v<f;v++)a[v]=p[v].readValue(a[v])}return s},u.xmlToRow=function(t,e,i){for(var o=t.childNodes,n=e.length,r=new Array(n),s=0,a=o.length;s<a;s++){var l,h,d=o[s];0<=(l=i.indexOf(d.tagName))&&null!=(h=null==(h=d.nodeValue)&&d.hasChildNodes()?re.Utils.included(d.childNodes[0].nodeType,3,4)?d.childNodes[0].nodeValue:void 0:h)&&(r[l]=h)}for(var u,c,s=0;s<n;s++)void 0===r[s]&&(u=t,c=i[s],null!=(u=u&&u.getAttribute(c)))&&(r[s]=u);return r},u.xmlToArray=function(t,e,i,o){void 0===i&&(i=0),void 0===o&&(o=-1);var n=null,r=u.xmlToRow,s=e?e.length:0;if(s&&(i=Math.max(0,i),o<0&&(o=s),o=Math.min(s-i,o)))for(var a=t.getFields(),l=t.getOrgFieldNames(),n=(a.length,new Array(o)),h=0;h<o;h++){var d=r(e[h+i],a,l);n[h]=d}return n};var i,o=u;function u(){return null!==i&&i.apply(this,arguments)||this}e.DataHelper=o})),tt=(t(Q),Q.DataHelper,e(function(t,e){Object.defineProperty(e,"__esModule",{value:!0});o=S.LocalDataEditCommand,ne.__extends(n,o),n.prototype._doRun=function(t){t.$_moveRow(this._row,this._newRow)},n.prototype._doRedo=function(t,e){t.$_moveRow(this._row,this._newRow)},n.prototype._doUndo=function(t,e){t.$_moveRow(this._newRow,this._row)};var o,i=n;function n(t,e,i){t=o.call(this,t)||this;return t._row=e,t._newRow=i,t}e.MoveRowDataCommand=i})),et=(t(tt),tt.MoveRowDataCommand,e(function(t,e){Object.defineProperty(e,"__esModule",{value:!0});n=S.LocalDataEditCommand,ne.__extends(o,n),o.prototype._doRun=function(t){t.$_moveRows(this._row,this._count,this._newRow)},o.prototype._doRedo=function(t,e){t.$_moveRows(this._row,this._count,this._newRow)},o.prototype._doUndo=function(t,e){t.$_moveRows(this._newRow,this._count,this._row)};var n,i=o;function o(t,e,i,o){t=n.call(this,t)||this;return t._row=e,t._count=i,t._newRow=o,t}e.MoveRowsDataCommand=i})),it=(t(et),et.MoveRowsDataCommand,e(function(t,e){Object.defineProperty(e,"__esModule",{value:!0});s=S.LocalDataEditCommand,ne.__extends(o,s),o.prototype._doRun=function(t){var e={};return e.result=t.$_moveRowList(this._rows,this._newRows[0]),e},o.prototype._doRedo=function(t,e){return t.$_moveRowList(this._rows,this._newRows[0])},o.prototype._doUndo=function(t,e){return t.$_moveRowList(this._newRows,this._rows[0])};var s,i=o;function o(t,e,i){for(var o=s.call(this,t)||this,n=(o._rows=e,o._newRows=e.slice(),i-e[0]),r=0;r<e.length;r++)o._newRows[r]+=n;return o}e.MoveRowListDataCommand=i})),ot=(t(it),it.MoveRowListDataCommand,e(function(t,e){Object.defineProperty(e,"__esModule",{value:!0});o=S.LocalDataEditCommand,ne.__extends(n,o),n.prototype._doDispose=function(){o.prototype._doDispose.call(this)},n.prototype._doRun=function(t){var e={};return t.$_fillValue(this._rowFields,this._value,e),e},n.prototype._doRedo=function(t,e){t.$_fillValue(this._rowFields,this._value,null)},n.prototype._doUndo=function(t,e){var i=e.rows;if(!(i.length<1)){for(var o=e.values,n=e.states,r=e.orgValues,s=0;s<i.length;s++){var a=i[s];t.$_restoreRow(a,o[s],n[s],r[s])}t._fireRefresh()}};var o,i=n;function n(t,e,i){t=o.call(this,t)||this;return t._rowFields=re.Utils.deepCopy(e),t._value=i,t}e.FillValueDataCommand=i})),vt=(t(ot),ot.FillValueDataCommand,e(function(t,e){Object.defineProperty(e,"__esModule",{value:!0});s=S.LocalDataEditCommand,ne.__extends(o,s),o.prototype._doRun=function(t){var e={};return t.$_setRowCount(this._newCount,this._fillDefaults,this._defaultValues,this._rowState,e),e},o.prototype._doRedo=function(t,e){t.$_setRowCount(this._newCount,this._fillDefaults,this._defaultValues,this._rowState,null)},o.prototype._doUndo=function(t,e){if(this._oldCount<this._newCount)t.$_setRowCount(this._oldCount);else if(this._oldCount>this._newCount){var i=e.rows,o=e.statedRows;if(!(i.length<1&&o.length<1)){for(var n=e.rowSaves,r=e.states,s=0;s<i.length;s++){var a=i[s],l=n[s];t.$_internalInsertRow(a,l.values,!0),t._yieldRow(a,l,!1)}for(s=0;s<o.length;s++){a=o[s];t._yieldState(a,r[s])}t._fireRefresh();for(s=0;s<i.length;s++){var a=i[s],h=n[s];t._yieldCommandStates(a,h.outer)}}}};var s,i=o;function o(t,e,i,o,n){void 0===i&&(i=!1),void 0===o&&(o=null),void 0===n&&(n=b.RowState.NONE);var r=s.call(this,t)||this;return r._newCount=e,r._oldCount=t.rowCount,r._fillDefaults=i,r._defaultValues=o,r._rowState=n,r}e.setRowCountDataCommand=i})),Ct=(t(vt),vt.setRowCountDataCommand,e(function(t,e){Object.defineProperty(e,"__esModule",{value:!0});n=S.LocalDataEditCommand,ne.__extends(o,n),o.prototype._doDispose=function(){this._values=null,n.prototype._doDispose.call(this)},o.prototype._doRun=function(t){var e={};return t.$_updateRows2(this._values,this._strict,this._rowEvents,e),e},o.prototype._doRedo=function(t,e){t.$_updateRows2(this._values,this._strict,this._rowEvents,null)},o.prototype._doUndo=function(t,e){var i=e.rows;if(!(i.length<1)){for(var o=e.values,n=e.states,r=e.orgValues,s=0;s<i.length;s++){var a=i[s];t.$_restoreRow(a,o[s],n[s],r[s])}t._fireRefresh()}};var n,i=o;function o(t,e,i,o){t=n.call(this,t)||this;return t._values=re.Utils.deepCopy(e),t._rowEvents=i,t._strict=o,t}e.UpdateRowsDataCommand2=i})),wt=(t(Ct),Ct.UpdateRowsDataCommand2,e(function(t,e){Object.defineProperty(e,"__esModule",{value:!0});r=C.DataProvider,ne.__extends(o,r),o.prototype._doDispose=function(){this._commands=this._commands&&this._commands.dispose(),this._values=null,this._rowIds=null,this._rowStates=null,this._points=null,this._orgValues=null,this._hiddenIds=null,r.prototype._doDispose.call(this)},_dp(o,"handler",{get:function(){return this.$_handler}}),_dp(o,"undoable",{get:function(){return this._undoable&&!!this._commands},set:function(t){t!=this.undoable&&(this._undoable=t,this._commands)&&this._commands.flush()}}),o.prototype.getDataRow=function(t){return this._rowIds.indexOf(t)},_dp(o,"rowCount",{get:function(){return this._values.length}}),_dp(o,"isSummarized",{get:function(){return!0}}),_dp(o,"deletedCount",{get:function(){return this._deletedCount}}),_dp(o,"canUndo",{get:function(){return this._commands&&this._commands.canUndo}}),_dp(o,"canRedo",{get:function(){return this._commands&&this._commands.canRedo}}),_dp(o,"undoing",{get:function(){return this._commands&&this._commands.undoing}}),_dp(o,"redoing",{get:function(){return this._commands&&this._commands.redoing}}),o.prototype.getRowId=function(t){return this._rowIds[t]},o.prototype.$_internalInsertField=function(t,e){if(0<=(t=r.prototype.$_internalInsertField.call(this,t,e))){for(var i=this._values.length,o=0;o<i;o++)(n=this._values[o])&&n.splice(t,0,void 0);if(this._orgValues)for(var n,i=Math.min(i,this._orgValues.length),o=0;o<i;o++)(n=this._orgValues[o])&&n.splice(t,0,void 0)}return t},o.prototype.$_internalClearFields=function(){r.prototype.$_internalClearFields.call(this),this.$_clearRows()},o.prototype.setRowCount=function(t,e,i,o){void 0===e&&(e=!1),void 0===i&&(i=null),void 0===o&&(o=b.RowState.NONE),this.undoable?this._commands.execute(new vt.setRowCountDataCommand(this,t,e,i,o)):this.$_setRowCount(t,e,i,o)},o.prototype.$_setRowCount=function(t,e,i,o,n){if(void 0===e&&(e=!1),void 0===i&&(i=null),void 0===o&&(o=b.RowState.NONE),void 0===n&&(n=null),this._checkClientState()){var r=this._values,s=r.length,a=Math.max(0,t);if(a!=s){var l=this._rowIds,h=this._rowStates;if(this.refreshFieldFormats(),n&&(n.rows=[],n.rowSaves=[],n.statedRows=[],n.states=[]),s<a&&(e||i)){var d=this.fieldCount,u=i;if((u=!u||u instanceof Array?u:this.objectToRow(u))&&u.length<1&&(u=null),e||u)for(var c=u?Math.min(u.length,d):0,_=s;_<a;_++){var p=[];if(e)for(var f=0;f<d;f++){var g=this.getField(f);p[f]=void 0!==g.defaultValue?g.defaultValue:g.nullValue}if(0<c)for(f=0;f<c;f++){var m=u[f];void 0!==m&&(p[f]=this.getField(f).readValue(m))}r[_]=p}}else if(s<a)for(_=s;_<a;_++)r[_]=[];else if(a<s){if(n)for(_=a;_<s;_++){var y=_;n.statedRows.push(y),n.states.push(h[_]),n.rows.push(y),n.rowSaves.push(this._keepRow(y))}if(0<this._deletedCount)for(_=s-1;a<=_;_--)b.isDeletedState(h[_])&&this._deletedCount--}o=this.checkStates&&o?o:b.RowState.NONE,r.length=l.length=h.length=a,this._orgValues&&this._orgValues.length>a&&(this._orgValues.length=a);for(_=s;_<a;_++)h[_]=o,l[_]=this._nextRowId++;for(_=this._hiddenIds.length-1;0<=_;_--){f=this._hiddenIds[_];l.indexOf(f)<0&&this._hiddenIds.splice(_,1)}this.tags.setRowCount(a),this._fireRefresh(),this._fireRowCountChanged()}}},o.prototype.$_clearRows=function(){this._values.length=0,this._values=[],this._rowIds.length=0,this._rowIds=[],this._rowStates.length=0,this._rowStates=[],this._hiddenIds.length=0,this._hiddenIds=[],this._orgValues?(this._orgValues.length=0,this._orgValues=[]):this._orgValues=null,this._deletedCount=0,this.clearCommandStack(),this.tags.clearRows()},o.prototype.clearRows=function(){this._checkClientState()&&(this.$_clearRows(),this._fireRefresh(),this._fireRowCountChanged(),this.fireDataLoadComplated())},o.prototype.setRows=function(t,e,i){if(void 0===e&&(e=0),void 0===i&&(i=-1),this._checkClientState()&&0!=i){this.refreshFieldFormats(),this.beginUpdate();try{this.$_clearRows();var o=this.checkStates,n=this.filters,r=this.filterRuntime,s=void 0;if(t&&0<(s=t.length)&&e<s)if(e=Math.max(0,e),i=i<0?s:Math.min(i,s-e),n){this._values.length=this._rowIds.length=this._rowStates.length=i,n.prepare(r,this);for(var a=s,l=0,h=0,d=e;d<a&&l<i;d++)(u=t[d])instanceof Array||(u=this.objectToRow(u)),n.select(r,h++,u)&&this.$_internalSetRow(l++,u,o);this._values.length=this._rowIds.length=this._rowStates.length=l}else if(e<(a=Math.min(s,e+i))){this._values.length=this._rowIds.length=this._rowStates.length=a-e;for(var u,l=0,d=e;d<a;d++)(u=t[d])instanceof Array||(u=this.objectToRow(u)),this.$_internalSetRow(l++,u,o)}}finally{this.endUpdate(!1),this.clearCommandStack()}this.tags.setRows(),this._fireRefresh(),this._fireRowCountChanged(),this.fireDataLoadComplated()}},o.prototype.setXmlRows=function(t,e,i){void 0===e&&(e=0),void 0===i&&(i=-1),this._checkClientState()&&0!=i&&(t=Q.DataHelper.xmlToArray(this,t,e,i),this.setRows(t))},o.prototype.insertRows=function(t,e,i,o,n){void 0===i&&(i=0),void 0===o&&(o=-1),void 0===n&&(n=!1),this.undoable?this._commands.execute(new Z.InsertRowsDataCommand(this,t,e,i,o,n)):this.$_insertRows(t,e,i,o,n)},o.prototype.$_insertRows=function(t,e,i,o,n){if(this._checkClientState()&&e){var r=e.length;if(!(r<1)&&0!=(o=o<0?r:Math.min(r,o))){if(t<0||t>this._values.length)throw new c.DataSourceError("row is out of bounds:"+t);this.refreshFieldFormats(),i=Math.max(0,i);var s=Math.min(r,i+o);if(n)for(var a=t,l=i;l<s;l++)(h=e[l])instanceof Array||(h=this.objectToRow(h)),this.fireRowInserting(a,h)&&(this.$_internalInsertRow(a,h,!0),this.fireRowInserted(a),this._fireRowCountChanged(),a++);else{for(var h,a=t,l=i;l<s;l++,a++)(h=e[l])instanceof Array||(h=this.objectToRow(h)),this.$_internalInsertRow(a,h,!1);this.tags.insertRows(t,o=s-i),this.fireRowsInserted(t,o),this._fireRowCountChanged()}}}},o.prototype.appendRows=function(t,e,i,o){this.insertRows(this.rowCount,t,e=void 0===e?0:e,i=void 0===i?-1:i,o=void 0===o?!1:o)},o.prototype.insertRowsFrom=function(t,e,i,o){for(var n=[],r=0,s=i;r<s.length;r++){var a=s[r];n.push(t.getRowObject(a))}if(e)for(var l=i.length-1;0<=l;l--)n[l]=this._convertValues(n[l],e);this.insertRows(o,n)},o.prototype.appendRowsFrom=function(t,e,i){this.insertRowsFrom(t,e,i,this.rowCount)},o.prototype.insertXmlRows=function(t,e,i,o,n){void 0===i&&(i=0),void 0===o&&(o=-1),void 0===n&&(n=!1),this._checkClientState()&&(e=Q.DataHelper.xmlToArray(this,e,i,o),this.insertRows(t,e,0,-1,n))},o.prototype.appendXmlRows=function(t,e,i,o){this.insertXmlRows(this.rowCount,t,e,i,o=void 0===o?!1:o)},o.prototype.fillValue=function(t,e){if(this.undoable)return this._commands.execute(new ot.FillValueDataCommand(this,t,e));this.$_fillValue(t,e)},o.prototype.updateRows=function(t,e,i,o,n,r){if(void 0===r&&(r=!1),this.undoable)return this._commands.execute(new N.UpdateRowsDataCommand(this,t,e,i,o,r,n));this.$_updateRows(t,e,i,o,n,r)},o.prototype.updateRows2=function(t,e,i){if(this.undoable)return this._commands.execute(new Ct.UpdateRowsDataCommand2(this,t,i,e));this.$_updateRows2(t,e,i)},o.prototype.updateXmlRows=function(t,e,i,o,n){void 0===n&&(n=!1),this._checkClientState()&&(e=Q.DataHelper.xmlToArray(this,e,i,o),this.updateRows(t,e,0,-1,n))},o.prototype.getValue=function(t,e){this.$_checkRowIndex(t),this._checkFieldIndex(e);t=this._values[t];return t?t[e]:void 0},o.prototype.setValue=function(t,e,i){return this.undoable?this._commands.execute(new T.SetValueDataCommand(this,t,e,i)):this.$_setValue(t,e,i)},o.prototype.$_setValue=function(t,e,i){if(!this._checkClientState())return!1;this.$_checkRowIndex(t),this._checkFieldIndex(e);var o=this.getField(e),n=this._rowStates[t];if(!o)throw new c.DataSourceError("Invalid field: "+e);if(!o.updatable&&(n==b.RowState.NONE||n==b.RowState.UPDATED))return!1;var r,s=this._values[t],i=o.readValue(i);if(s&&o.equalValues(i,s[e]))return!1;this.refreshFieldFormat(o);o=this.checkStates&&(n==b.RowState.NONE||!n);return s||(this._values[t]=s=new Array(this.fieldCount)),o&&this._orgValues&&(r=s.concat()),s[e]=i,this._internalCalculateValues(s,t),o?(r&&(this._orgValues[t]=r),this.$_changeRowState(t,b.RowState.UPDATED,!0)):this._needRestore&&this.restoreState(t),this.tags.setValue(t,e),this.fireValueChanged(t,e),!0},o.prototype.updateRow=function(t,e,i){return this.undoable?this._commands.execute(new D.UpdateRowDataCommand(this,t,e,i)):this.$_updateRow(t,e,i)},o.prototype.getRow=function(t){this.$_checkRowIndex(t);t=this._values[t];return t?t.slice():[]},o.prototype.getRows=function(t,e){void 0===t&&(t=0),void 0===e&&(e=-1);var i=this._values.length,o=Math.max(0,t),t=e<0?i-1:Math.min(i-1,e);if(i<=o||t<o)return[];for(var n=t-o+1,r=new Array(n),s=0;s<n;s++)r[s]=this._values[s+o]?this._values[s+o].slice():[];return r},o.prototype.getRowObject=function(t,e){return this.$_checkRowIndex(t),this.$_getRowObject(t,e)},o.prototype.getRowObjects=function(t,e,i){void 0===t&&(t=0),void 0===e&&(e=-1);var o=this._values.length,n=Math.max(0,t),t=e<0?o-1:Math.min(o-1,e);if(o<=n||t<n)return[];for(var r=t-n+1,s=new Array(r),a=0;a<r;a++)s[a]=this.$_getRowObject(a+n,i);return s},o.prototype.getOutputObject=function(t,e){var i=this.getRowObject(e,null==t?void 0:t.rowState);return t&&this.$_createOutputRows([i],t,e),i},o.prototype.getOutputObjects=function(t,e,i){i=this.getRowObjects(e=void 0===e?0:e,i=void 0===i?-1:i,null==t?void 0:t.rowState);return t&&this.$_createOutputRows(i,t,e),i},o.prototype.getFieldValues=function(t,e,i){void 0===e&&(e=0),void 0===i&&(i=-1),this._checkFieldIndex(t);var o=this._values.length;if(i=i<0?o-1:Math.min(o-1,i),o<=(e=Math.max(0,e))||i<e)return null;for(var n=new Array(i-e+1),r=e;r<=i;r++){var s=this._values[r];n[r-e]=s&&s[t]}return n},o.prototype.hasData=function(t){return 0<=t&&t<this._values.length&&void 0!==this._values[t]},o.prototype.insertRow=function(t,e){return this.undoable?this._commands.execute(new M.InsertRowDataCommand(this,t,e)):this.$_insertRow(t,e)},o.prototype.$_insertRow=function(t,e,i){if(void 0===i&&(i=void 0),!this._checkClientState())return!1;if(t<0||t>this._values.length)throw new c.DataSourceError("row is out of bounds:"+t);return this.refreshFieldFormats(),!(!e||!this.fireRowInserting(t,e)||(re.Utils.isArray(e)||(e=this.objectToRow(e)),this.$_internalInsertRow(t,e,!0),i&&this._yieldStates(t,i),this.fireRowInserted(t),this._fireRowCountChanged(),0))},o.prototype.appendRow=function(t){var e=this.rowCount;return this.insertRow(e,t)?e:-1},o.prototype.removeRow=function(t){if(this.undoable){if(this.softDeleting&&this.checkStates)switch(this._rowStates[t]){case b.RowState.CREATED:if(this.deleteCreated)break;return this._commands.execute(new V.ChangeRowStateDataCommand(this,t,b.RowState.CREATE_AND_DELETED));case b.RowState.DELETED:case b.RowState.CREATE_AND_DELETED:break;default:return this._commands.execute(new V.ChangeRowStateDataCommand(this,t,b.RowState.DELETED))}return this._commands.execute(new F.RemoveRowDataCommand(this,t))}return this.$_removeRow(t)},o.prototype.$_removeRow=function(t){if(!this._checkClientState())return!1;if(this.$_checkRowIndex(t),this.softDeleting&&this.checkStates){switch(this._rowStates[t]){case b.RowState.CREATED:this.deleteCreated?this.$_deleteRow(t):this.$_changeRowState(t,b.RowState.CREATE_AND_DELETED,!0,!0,!0);break;case b.RowState.DELETED:case b.RowState.CREATE_AND_DELETED:break;default:this.$_changeRowState(t,b.RowState.DELETED,!0,!0,!0)}return!0}return this.$_deleteRow(t)},o.prototype.removeRows=function(t,e){void 0===e&&(e=!1),this.undoable?this._commands.execute(new J.RemoveRowsDataCommand(this,t,e)):this.$_removeRows(t,e,null)},o.prototype.$_removeRows=function(t,e,i){if(this._checkClientState()){var o,n=this.deleteCreated;if(t&&!((o=t.length)<1)){if(t=t.slice(),i&&(i.rows=[],i.rowSaves=[],i.statedRows=[],i.states=[]),this.softDeleting&&this.checkStates){for(var r=e?null:[],s=o;s--;){var a=t[s],l=this._rowStates[a],h=!1;switch(this.$_checkRowIndex(a),l){case b.RowState.CREATED:n||(i&&(i.statedRows.push(a),i.states.push(l)),h=this.$_changeRowState(a,b.RowState.CREATE_AND_DELETED,e,!1,!0),t.splice(s,1));break;case b.RowState.DELETED:case b.RowState.CREATE_AND_DELETED:t.splice(s,1);break;default:i&&(i.statedRows.push(a),i.states.push(l)),h=this.$_changeRowState(a,b.RowState.DELETED,e,!1,!0),t.splice(s,1)}r&&h&&r.push(a)}e||r&&0<r.length&&this.fireRowStatesChanged(r)}if(0<(o=t.length)){if(1<o&&t.sort(function(t,e){return t-e}),i)for(s=0;s<o;s++){a=t[s];i.rows.push(a),i.rowSaves.push(this._keepRow(a))}if(e)for(s=o;s--;){a=t[s];this.$_checkRowIndex(a),this.$_deleteRow(a)}else if(this.fireRowsRemoving(t)){for(s=o;s--;){a=t[s],l=this._rowStates[a];this.$_checkRowIndex(a),this.$_internalRemoveRow(a),b.isDeletedState(l)&&this._deletedCount--}this.tags.removeRows(t),this.fireRowsRemoved(t),this._fireRowCountChanged()}}}}},o.prototype.moveRow=function(t,e){if(t!=e)return this.undoable?this._commands.execute(new tt.MoveRowDataCommand(this,t,e)):void this.$_moveRow(t,e)},o.prototype.$_moveRow=function(t,e){this._checkClientState()&&(this.$_checkRowIndex(t),this.$_checkRowIndex(e),this.fireRowMoving(t,e))&&(this.$_internalMoveRow(t,e),this.tags.moveRow(t,e),this.fireRowMoved(t,e))},o.prototype.moveRows=function(t,e,i){if(!(e<1||t==i))return this.undoable?this._commands.execute(new et.MoveRowsDataCommand(this,t,e,i)):void this.$_moveRows(t,e,i)},o.prototype.$_moveRows=function(t,e,i){this._checkClientState()&&(this.$_checkRowIndex(t),this.$_checkRowIndex(i),this.fireRowsMoving(t,e,i))&&(this.$_internalMoveRows(t,e,i),this.tags.moveRows(t,e,i),this.fireRowsMoved(t,e,i))},o.prototype.moveRowList=function(t,e){if(t&&!(t.length<1))return t=t.sort(function(t,e){return t-e}),this.undoable?this._commands.execute(new it.MoveRowListDataCommand(this,t,e)):this.$_moveRowList(t,e)},o.prototype.$_moveRowList=function(t,e){var i;if(this._checkClientState())return i=t[0],this.$_checkRowIndex(i),this.$_checkRowIndex(e),this.fireRowListMoving(t,e)?(this.$_internalMoveRowList(t,e),this.tags.moveRowList(t,e),this.fireRowListMoved(t,e),!0):void 0},o.prototype.getRowState=function(t){return this.$_checkRowIndex(t),this._rowStates[t]||b.RowState.NONE},o.prototype.$_checkDeleted=function(t,e){b.isDeletedState(e)?this._deletedCount++:b.isDeletedState(t)&&!b.isDeletedState(e)&&this._deletedCount--},o.prototype.setRowState=function(t,e,i){return this.undoable?this._commands.execute(new O.SetRowStateDataCommand(this,t,e,i)):this.$_setRowState(t,e,i)},o.prototype.$_setRowState=function(t,e,i){this._checkClientState()&&(this.$_checkRowIndex(t),this._orgValues?this.$_changeRowStateEx(t,e,!0,i,!1):this.$_changeRowState(t,e,!0,i))},o.prototype.setRowStates=function(t,e,i,o){var n;if((void 0===o&&(o=!1),this._checkClientState())&&(t&&!((n=t.length)<1)))if(o)for(var r=0;r<n;r++){var s=t[r];this.$_checkRowIndex(s),this.$_changeRowStateEx(s,e,!0,i,!1)}else{for(var a=[],l=this._rowStates,r=0;r<n;r++){var h=l[s=t[r]];this.$_checkRowIndex(s),e!=h&&(l[s]=e,a.push(s),this.$_checkDeleted(h,e),this._orgValues)&&this.prepareOrgValues(s,h,e)}0<a.length&&this.fireRowStatesChanged(a)}},o.prototype.clearRowStates=function(t,e){void 0===e&&(e=!1),this.undoable?this._commands.execute(new B.ClearRowStatesDataCommand(this,t,e)):this.$_clearRowStates(t,e)},o.prototype.$_clearRowStates=function(t,e,i){if(void 0===e&&(e=!1),void 0===i&&(i=!1),this._checkClientState()){for(var o=[],n=i?[]:null,r=i?[]:null,s=this._rowStates.length;s--;){var a,l=this._rowStates[s];switch(n&&(n[s]=l),r&&(r[s]=null),l){case b.RowState.CREATE_AND_DELETED:case b.RowState.DELETED:t?(o.push(s),r&&(a=this._keepRow(s))&&(r[s]=a.values),e?this.$_deleteRow(s):(this.$_internalRemoveRow(s),this.tags.removeRow(s),this._deletedCount--)):(this.$_changeRowState(s,b.RowState.NONE,e),this._deletedCount--);break;default:this.$_changeRowState(s,b.RowState.NONE,e)}}return this.$_resetOrgValues(),e||(0<o.length&&(this.fireRowsRemoved(o),this._fireRowCountChanged()),this.fireRowStatesCleared()),i?{rows:o,states:n,values:r}:void 0}},o.prototype.$_restoreStates=function(t,e){this.fireRowStatesChanged(t)},o.prototype.getStateRows=function(t){var e=[];if(t)for(var i=0,o=this._rowStates.length;i<o;i++)this._rowStates[i]==t&&e.push(i);return e},o.prototype.getAllStateRows=function(){for(var t={},e=t[b.RowState.CREATED]=[],i=t[b.RowState.UPDATED]=[],o=t[b.RowState.DELETED]=[],n=t[b.RowState.CREATE_AND_DELETED]=[],r=0,s=this._rowStates.length;r<s;r++){var a=this._rowStates[r];a===b.RowState.CREATED?e.push(r):a===b.RowState.UPDATED?i.push(r):a===b.RowState.DELETED?o.push(r):a===b.RowState.CREATE_AND_DELETED&&n.push(r)}return t},o.prototype.getRowStateCount=function(t){var e=t?t.length:0,i=this._rowStates.length,o=0;if(e&&i)if(1<e)for(var n=0;n<i;n++){var r=this._rowStates[n];0<=t.indexOf(r)&&o++}else for(r=t[0],n=0;n<i;n++)this._rowStates[n]===r&&o++;return o},o.prototype.$_restoreState=function(t){if(this._rowStates[t]===b.RowState.UPDATED){var e=this._orgValues[t];if(e){for(var i=this._values[t],o=this.strictRestore,n=0,r=this.fieldCount;n<r;n++){var s=i.length>n?i[n]:void 0,a=e.length>n?e[n]:void 0,l=this.getField(n);if(o){if(!l.equalValues(s,a))return!1}else if(!l.sameValues(s,a))return!1}return this._rowStates[t]=b.RowState.NONE,!0}}return!1},o.prototype.restoreUpdatedStates=function(t){if(this._orgValues&&this._checkClientState()){var e=[];if(null!=t)for(var i=0,o=t.length;i<o;i++){var n=t[i];0<=n&&n<this._values.length&&this.$_restoreState(n)&&e.push(n)}else for(i=0,o=this._values.length;i<o;i++)this.$_restoreState(i)&&e.push(i);0<e.length&&this.fireRowStatesChanged(e)}},o.prototype.$_restoreUpdatedRow=function(t){if(this._rowStates[t]===b.RowState.UPDATED){var e=this._orgValues[t];if(e){for(var i=this._values[t],o=0,n=Math.min(e.length,this.fieldCount);o<n;o++)i[o]=e[o];return this._rowStates[t]=b.RowState.NONE,!0}}return!1},o.prototype.$_restoreRow=function(t,e,i,o){this._values[t]=e.slice(),this._rowStates[t]=i,this._orgValues&&(this._orgValues[t]=o&&o.slice())},o.prototype.restoreUpdatedRows=function(t){if(this._orgValues&&this._checkClientState()){var e=[];if(null!=t)for(var i=0,o=t.length;i<o;i++){var n=t[i];0<=n&&n<this._values.length&&this.$_restoreUpdatedRow(n)&&e.push(n)}else for(i=0,o=this._values.length;i<o;i++)this.$_restoreUpdatedRow(i)&&e.push(i);0<e.length&&(this.fireRestoreRows(e),this.fireRowStatesChanged(e))}},o.prototype.getUpdatedCells=function(t){var e=this.restoreMode;if(!this._orgValues||e!=f.RestoreMode.AUTO&&e!=f.RestoreMode.EXPLICIT)return null;if(null==(t=null==t?this.getStateRows(b.RowState.UPDATED):t))return null;for(var i=[],o=0,n=t.length;o<n;o++){var r=t[o],s=0<=r&&this._orgValues&&r<this._orgValues.length?this._orgValues[r]:null;if(s){for(var a=this._values[r],l=this.strictRestore,h=[],d=0,u=this.fieldCount;d<u;d++){var c=a.length>d?a[d]:void 0,_=s.length>d?s[d]:void 0,p=this.getField(d);p.calculated||(l?p.equalValues(c,_)||h.push({fieldName:this.getOrgFieldName(d),oldValue:s[d],newValue:a[d]}):p.sameValues(c,_)||h.push({fieldName:this.getOrgFieldName(d),oldValue:s[d],newValue:a[d]}))}0<h.length&&i.push({__rowId:r,updatedCells:h})}}return i},o.prototype._doRestoreModeChanged=function(){this.$_resetOrgValues()},o.prototype.findRow=function(t,e,i){if(void 0===i&&(i=0),!(t.length<1||e.length<t.length)){for(var o=[],n=[],r=this._values,s=0,a=t.length;s<a;s++){var l=void 0;0<=(l="string"==typeof t[s]?this.getFieldIndex(t[s]):Number(t[s]))&&l<this.fieldCount&&o.indexOf(l)<0&&(o.push(l),n.push(e[s]))}for(var h=o.length,s=0;s<h;s++)o[s]=this.getField(o[s]);for(s=i,a=r.length;s<a;s++){for(var d=r[s],u=!0,l=0;l<h;l++)if(!o[l].equalValues(n[l],d[l])){u=!1;break}if(u)return s}}return-1},o.prototype.savePoint=function(t){if(void 0===t&&(t=!0),this._checkClientState()){var e=this._values,i=this.fieldCount,o=e?e.length:0;if(0<i&&0<o){for(var n=new Array(o),r=0;r<o;r++){var s=e[r]&&e[r].concat();n[r]=s}i=t?this._rowStates.concat():null,t=this._nextPoint++;return this._points.push({id:t,data:n,states:i}),t}return-1}},o.prototype.rollback=function(t){if(this._checkClientState())for(var e=this._points.length-1;0<=e;e--){var i=this._points[e];if(i.id==t){this.$_removeSavePoints(e+1),this.setRows(i.data);i=i.states;i&&(this._rowStates=i.concat());break}}},o.prototype.$_removeSavePoints=function(t){for(var e=this._points,i=e.length-1;t<=i;i--)e[i].data=null,e.pop()},o.prototype.clearSavePoints=function(){this.$_removeSavePoints(0)},o.prototype.getSavePoints=function(){for(var t=[],e=0,i=this._points.length;e<i;e++)t.push(this._points[e].id);return t},o.prototype.canUpdateRow=function(t){return!(this._rowStates[t]===b.RowState.NONE&&!this.updatable)},o.prototype.canAppendRow=function(){return!0},o.prototype.canInsertRow=function(t){return!0},o.prototype.canDeleteRow=function(t){return!0},o.prototype.getDistinctValues=function(t,e,i){if(void 0===e&&(e=-1),void 0===i&&(i=ht.SortDirection.ASCENDING),e=1<arguments.length?e:-1,this._checkFieldIndex(t),0<(e=e<0?this._values.length:e)){for(var o=this.getField(t).dataType,n=[],r=[],s=void 0,a=0,l=this.rowCount;a<l;a++)switch(s=this._values[a]?this._values[a][t]:void 0,o){case ht.ValueType.NUMBER:null!=s&&isNaN(s)||n.indexOf(s)<0&&n.push(s);break;case ht.ValueType.DATE:case ht.ValueType.DATETIME:s?r.indexOf(s.getTime())<0&&(r.push(s.getTime()),n.push(s)):r.indexOf(void 0)<0&&(r.push(void 0),n.push(void 0));break;default:ht.ValueType.OBJECT;n.indexOf(s)<0&&n.push(s)}return(n=i!==ht.SortDirection.NONE&&(n=re.Utils.included(o,ht.ValueType.DATETIME,ht.ValueType.DATE,ht.ValueType.NUMBER)?n.sort(function(t,e){return t-e}):n.sort(),i===ht.SortDirection.DESCENDING)?n.reverse():n).slice(0,e)}return null},o.prototype.compareValues=function(t,e,i,o){var e=this._values[e],i=this._values[i];return e===i?0:(e=e?e[t]:null,i=i?i[t]:null,null==e?null==i?0:-1:null==i||(e=o?String(e).toLowerCase():e,(i=o?String(i).toLowerCase():i)<e)?1:e<i?-1:0)},o.prototype.compareTexts=function(t,e,i){return this.compareValues(t,e,i,!0)},o.prototype.compareNumbers=function(t,e,i){var e=this._values[e],i=this._values[i];return e===i?0:(e=e?e[t]:NaN,i=i?i[t]:NaN,isNaN(e)?isNaN(i)?0:-1:isNaN(i)||i<e?1:e<i?-1:0)},o.prototype.compareDates=function(t,e,i){var e=this._values[e],i=this._values[i];return e===i?0:(e=e?e[t]:null,i=i?i[t]:null,e instanceof Date?!(i instanceof Date)||i<e?1:e<i?-1:0:i instanceof Date?-1:0)},o.prototype.compareBools=function(t,e,i){var e=this._values[e],i=this._values[i];return e===i?0:(e=!!e&&Boolean(e[t]),i=!!i&&Boolean(i[t]),e&&!i?1:!e&&i?-1:0)},o.prototype.compareObjects=function(t,e,i){var o=this._values[e],n=this._values[i];return o===n?0:(o=o?o[t]:null,n=n?n[t]:null,o?n?this.getField(t).$_compareObject(o,n,e,i):1:n?-1:0)},o.prototype.summarize=function(t,e){var i=this.rowCount;if(i<1)return!1;for(var o=[],n=0;n<i;n++)o.push(n);return this.summarizeRange(t,o,e)},o.prototype.summarizeRange=function(t,e,i){if(null==t||null==e)return!1;t.clear();var o=e.length;if(o<1)return!1;for(var n,r,s,a=this.getField(t.field).dataType===ht.ValueType.NUMBER,l=0,h=t.field,d=0;d<o;){var u=e[d++];null==(g=(f=this._values[u])&&f[h])||a&&isNaN(g)||(a&&(n=l?n+g:g),!a&&""==g||l++,(null==r||g<r)&&(r=g),(null==s||s<g)&&(s=g))}if(t.count=o,0<l)if(t.sum=n,t.min=r,t.max=s,a&&(t.avg=n/o),t.dataCount=l,a&&(t.dataAvg=n/l),i&&a){for(var c=0,_=t.avg,p=0;p<o;p++){var f,g,u=e[p];null!=(g=(f=this._values[u])&&f[h])&&(c+=Math.pow(g-_,2))}t.varsp=c/o,t.vars=c/(o-1)}else t.varsp=NaN,t.vars=NaN;return!0},o.prototype._keepRow=function(t){var e={};return e.rowId=this._rowIds[t],e.values=this._values[t]&&this._values[t].slice(),e.state=this._rowStates[t],e.orgValues=this._orgValues&&this._orgValues[t]&&this._orgValues[t].slice(),e.outer=this._keepCommandStates(t),e},o.prototype._yieldRow=function(t,e,i){void 0===i&&(i=!0),this._rowIds[t]=e.rowId,this._values[t]=e.values&&e.values.slice(),this._rowStates[t]=e.state,this._orgValues&&(this._orgValues[t]=e.orgValues&&e.orgValues.slice()),i&&this._yieldCommandStates(t,e.outer)},o.prototype._keepStates=function(t){var e={};return e.rowId=this._rowIds[t],e.state=this._rowStates[t],e.orgValues=this._orgValues&&this._orgValues[t]&&this._orgValues[t].slice(),e},o.prototype._yieldStates=function(t,e){this._rowIds[t]=e.rowId,this._rowStates[t]=e.state,this._orgValues&&(this._orgValues[t]=e.orgValues&&e.orgValues.slice())},o.prototype._keepState=function(t){return this._rowStates[t]},o.prototype._yieldState=function(t,e){this._rowStates[t]=e},o.prototype._keepOrgValues=function(){var t=this._orgValues;if(t){for(var e=[],i=0;i<t.length;i++)e.push(t[i]&&t[i].slice());return e}return null},o.prototype._yieldOrgValues=function(t){if(this._orgValues)if(t){this._orgValues=[];for(var e=0;e<t.length;e++)this._orgValues.push(t[e]&&t[e].slice())}else this._orgValues=t},o.prototype.$_checkRowIndex=function(t){if(isNaN(t)||t<0||t>=this._values.length)throw re.Utils.isDebugging(),new c.DataSourceError("row is out of bounds: "+t)},o.prototype.$_resetOrgValues=function(){var t=this.restoreMode;this._orgValues=this.checkStates&&t!=f.RestoreMode.NONE?[]:null,this._needRestore=this._orgValues&&t==f.RestoreMode.AUTO},o.prototype.arrayToRow=function(t,e){for(var i=Math.min(t?t.length:0,this.fieldCount),o=new Array(i),n=0;n<i;n++)o[n]=this.getField(n).readValue(t[n]);return this._internalCalculateValues(o,e),o},o.prototype.$_internalSetRow=function(t,e,i){e=this.arrayToRow(e,t);this._values[t]=e,this._rowIds[t]=this._nextRowId++,this.checkStates&&(this._rowStates[t]=b.RowState.NONE)},o.prototype.$_internalInsertRow=function(t,e,i){var e=this.arrayToRow(e,t),o=t==this._values.length;o?(this._values.push(e),this._rowIds.push(this._nextRowId++)):(this._values.splice(t,0,e),this._rowIds.splice(t,0,this._nextRowId++)),i&&this.tags.insertRow(t),o?this._rowStates.push(this.checkStates?b.RowState.CREATED:b.RowState.NONE):(this._rowStates.splice(t,0,this.checkStates?b.RowState.CREATED:b.RowState.NONE),this._orgValues&&this._orgValues.splice(t,0,void 0))},o.prototype.$_updateRow=function(t,e,i){if(this._checkClientState())return this.$_checkRowIndex(t),this.refreshFieldFormats(),!(!e||!this.fireRowUpdating(t,e)||(this.$_internalUpdateRow(t,e,i,!0,!0),this.fireRowUpdated(t),0))},o.prototype.$_updateRows=function(t,e,i,o,n,r,s){if(void 0===s&&(s=null),this._checkClientState()&&e){var a=e.length;if(!(a<1)&&0!=(o=o<0?a:Math.min(a,o))){i=Math.max(0,i),this.refreshFieldFormats();var l=this.rowCount,h=Math.min(a,i+o);if(!(h<=i))if(s&&(s.rows=[],s.values=[],s.states=[],s.orgValues=[]),r)for(var d=t,u=i;u<h&&d<l;u++,d++){var c=e[u];this._values[d]||(this._values[d]=new Array(this.fieldCount)),this.fireRowUpdating(d,c)&&(s&&(s.rows.push(d),s.values.push(this._values[d].slice()),s.states.push(this._rowStates[d]),s.orgValues.push(this._orgValues&&this._orgValues[d])),this.$_internalUpdateRow(d,c,n,!0,!0),this.fireRowUpdated(d))}else{for(var _=[],d=t,u=i;u<h&&d<l;u++,d++){this._rowStates[d]==b.RowState.NONE&&_.push(d),this._values[d]||(this._values[d]=new Array(this.fieldCount)),s&&(s.rows.push(d),s.values.push(this._values[d].slice()),s.states.push(this._rowStates[d]),s.orgValues.push(this._orgValues&&this._orgValues[d]));c=e[u];this.$_internalUpdateRow(d,c,n,!1,!1)}0<_.length&&this.fireRowStatesChanged(_),this.tags.updateRows(t,o=h-i),this.fireRowsUpdated(t,o)}}}},o.prototype.$_updateRows2=function(t,e,i,o){var n=this;if(this._checkClientState()&&t)if(this.refreshFieldFormats(),o&&(o.rows=[],o.values=[],o.states=[],o.orgValues=[]),Object.keys(t).forEach(function(t){return n.$_checkRowIndex(parseInt(t))}),i)for(var r in t){var s=Number(r),a=t[r];this._values[s]||(this._values[s]=new Array(this.fieldCount)),this.fireRowUpdating(s,a)&&(o&&(o.rows.push(s),o.values.push(this._values[s].slice()),o.states.push(this._rowStates[s]),o.orgValues.push(this._orgValues&&this._orgValues[s])),this.$_internalUpdateRow(s,a,e,!0,!0),this.fireRowUpdated(s))}else{var l=[],h=[];for(r in t){s=Number(r),a=(this._rowStates[s]==b.RowState.NONE&&l.push(s),this._values[s]||(this._values[s]=new Array(this.fieldCount)),o&&(o.rows.push(s),o.values.push(this._values[s].slice()),o.states.push(this._rowStates[s]),o.orgValues.push(this._orgValues&&this._orgValues[s])),t[r]);this.$_internalUpdateRow(s,a,e,!1,!1),h.push(s)}0<l.length&&this.fireRowStatesChanged(l),this.tags.updateRowList(h),this.fireRowListUpdated(h)}},o.prototype.$_fillValue=function(t,e,i){if(void 0===i&&(i=null),this._checkClientState()&&Object.keys(t).length){this.refreshFieldFormats(),i&&(i.rows=[],i.values=[],i.states=[],i.orgValues=[]);var o,n=[],r=[];for(o in t){r.push(+o),this._rowStates[o]==b.RowState.NONE&&n.push(+o),this._values[o]||(this._values[o]=new Array(this.fieldCount)),i&&(i.rows.push(o),i.values.push(this._values[o].slice()),i.states.push(this._rowStates[o]),i.orgValues.push(this._orgValues&&this._orgValues[o]));for(var s=this._values[o].slice(),a=0,l=t[o];a<l.length;a++)s[l[a]]=e;this.$_internalUpdateRow(+o,s,!1,!1,!1)}0<n.length&&this.fireRowStatesChanged(n),this.tags.updateRowList(r),this.fireRowListUpdated(r)}},o.prototype.$_internalUpdateRow=function(t,e,i,o,n){for(var r,s=this.getFields(),a=re.Utils.isArray(e),l=Math.min(s.length,(a?e:s).length),h=this._values[t],d=this._rowStates[t],u=this.checkStates&&(d==b.RowState.NONE||!d),c=(h||(this._values[t]=h=new Array(this.fieldCount)),u&&this._orgValues&&(r=re.Utils.deepCopy(h)),!1),_=0;_<l;_++){var p,f=s[_];!f.updatable&&d!=b.RowState.CREATED&&d!=b.RowState.CREATE_AND_DELETED||!a&&!e.hasOwnProperty(f.orgFieldName)||(p=a?e[_]:e[f.orgFieldName],i&&void 0===p)||(c=!this._needRestore||c||(i?!f.equalValues(h[_],f.readValue(p)):!f.sameValues(h[_],f.readValue(p))),h[_]=f.readValue(p))}c&&this._internalCalculateValues(h,t),u&&c?(r&&(this._orgValues[t]=r),this.$_changeRowState(t,b.RowState.UPDATED,o)):this._needRestore&&this.restoreState(t),n&&this.tags.updateRow(t)},o.prototype.$_changeRowState=function(t,e,i,o,n){if(void 0===o&&(o=!1),void 0===n&&(n=!1),this.checkStates||o){o=this._rowStates[t];if((e=e||b.RowState.NONE)!=o)return this._rowStates[t]=e,n&&(!b.isDeletedState(o)&&b.isDeletedState(e)?this._deletedCount++:b.isDeletedState(o)&&!b.isDeletedState(e)&&this._deletedCount--),i&&this.fireRowStateChanged(t),!0}return!1},o.prototype.restoreState=function(t){if(this._rowStates[t]===b.RowState.UPDATED){var e=this._orgValues[t];if(e){for(var i=this._values[t],o=this.strictRestore,n=0,r=this.fieldCount;n<r;n++){var s=i.length>n?i[n]:void 0,a=e.length>n?e[n]:void 0;if(o){if(!this.getField(n).equalValues(s,a))return!1}else if(!this.getField(n).sameValues(s,a))return!1}return this._rowStates[t]=b.RowState.NONE,!0}}return!1},o.prototype.prepareOrgValues=function(t,e,i){i==b.RowState.UPDATED?this._orgValues[t]=this._values[t]?this._values[t].concat():[]:e==b.RowState.UPDATED&&this._orgValues[t]&&(this._orgValues[t]=void 0)},o.prototype.$_changeRowStateEx=function(t,e,i,o,n){var r=this._rowStates[t];return!!this.$_changeRowState(t,e,!1,o,n)&&(this._orgValues&&this.prepareOrgValues(t,r,e),i&&this.fireRowStateChanged(t),!0)},o.prototype.$_getRowObject=function(t,e){var i={},o=this._values[t];if(o){for(var n=0;n<this.fieldCount;n++)i[this.getOrgFieldName(n)]=o[n];e&&(i.__rowState=this.getRowState(t))}return i},o.prototype.$_deleteRow=function(t){var e;return!!this.fireRowRemoving(t)&&(e=this._rowStates[t],this.$_internalRemoveRow(t),b.isDeletedState(e)&&this._deletedCount--,this.tags.removeRow(t),this.fireRowRemoved(t),this._fireRowCountChanged(),!0)},o.prototype.$_internalRemoveRow=function(t){var e=this._rowIds[t];0<=this._hiddenIds.indexOf(e)&&this._hiddenIds.splice(this._hiddenIds.indexOf(e),1),this._values.splice(t,1),this._rowIds.splice(t,1),this._orgValues&&this._orgValues.length>t&&this._orgValues.splice(t,1),this._rowStates.splice(t,1)},o.prototype.$_internalMoveRow=function(t,e){var i=this._values[t],o=this._rowIds[t],n=this._rowStates[t];this._values.splice(t,1),this._rowIds.splice(t,1),this._rowStates.splice(t,1),this._values.splice(e,0,i),this._rowIds.splice(e,0,o),this._rowStates.splice(e,0,n),this._orgValues&&this._orgValues.length>t&&(i=this._orgValues[t],this._orgValues.splice(t,1),this._orgValues.splice(e,0,i))},o.prototype.$_internalMoveRows=function(t,e,i){for(var o=this._values.splice(t,e),n=this._rowIds.splice(t,e),r=this._rowStates.splice(t,e),s=0,a=o.length;s<a;s++)this._values.splice(i+s,0,o[s]),this._rowIds.splice(i+s,0,n[s]),this._rowStates.splice(i+s,0,r[s]);if(this._orgValues&&this._orgValues.length>t)for(s=0,a=(o=this._orgValues.splice(t,e)).length;s<a;s++)this._orgValues.splice(i+s,0,o[s])},o.prototype.$_internalMoveRowList=function(t,e){for(var i=[],o=[],n=[],r=t.length-1;0<=r;r--){var s=t[r];i.push(this._values.splice(s,1)[0]),o.push(this._rowIds.splice(s,1)[0]),n.push(this._rowStates.splice(s,1)[0])}i=i.reverse();for(var o=o.reverse(),n=n.reverse(),a=0,l=t.length;a<l;a++)this._values.splice(e+a,0,i[a]),this._rowIds.splice(e+a,0,o[a]),this._rowStates.splice(e+a,0,n[a]);if(this._orgValues&&this._orgValues.length>t[0]){for(var i=[],h=t.length-1;0<=h;h--)i=this._orgValues.splice(t[h],1)[0];i=i.reverse();for(a=0,l=t.length;a<l;a++)this._orgValues.splice(e+a,0,i[a])}},o.prototype.$_searchDataRow=function(t,e,i,o,n){var r=this.rowCount;if(!(r<1)){var s=Math.min(t.length,e.length);if(!(s<1)){for(var a=!i||i.allFields,l=i&&i.caseSensitive,h=i&&i.partialMatch,d=null,u=[],c=i.compareCallback||re.Utils.compareTextValue,_=0;_<s;_++)u[_]=this.getField(t[_]).dataType;o=Math.max(0,o),n=Math.min(r-1,n);for(var p=o;p<=n;p++){for(var f=!0,_=0;_<s;_++){var g=this.getValue(p,t[_]),m=this.getOrgFieldName(t[_]);switch(u[_]){case ht.ValueType.DATETIME:case ht.ValueType.DATE:var y,f=e[_]instanceof Date?c.call(this.$_handler,e[_],g,l,h,p,m):(d||(y=/[.]/.test(e[_])?"yyyy.MM.dd":/[/]/.test(e[_])?"yyyy/MM/dd":/[-]/.test(e[_])?"yyyy-MM-dd":"yyyyMMdd",d=new dt.DateTimeConverter(y)),c.call(this.$_handler,e[_],g&&d.getText(g),l,h,p,m));break;default:f=c.call(this.$_handler,e[_],g,l,h,p,m)}if(f&&!a)return p;if(!f&&a)break}if(f)return p}}}return-1},o.prototype.searchDataRow=function(t){var e=-1,i=(t=t instanceof w.SearchOptions?t:new w.SearchOptions(t)).fields,o=t.values,n=t.startIndex;if(i&&0<i.length&&o&&0<o.length){for(var r=i.length,s=[],a=0;a<r;a++){var l,h=parseFloat(i[a]);isNaN(h)?0<=(l=this.getFieldIndex(i[a]))&&s.push(l):s.push(h)}0<s.length&&(r=this.rowCount,(e=(n=Math.max(0,n))<r?this.$_searchDataRow(s,o,t,n,r-1):-1)<0)&&t.wrap&&0<n&&(e=this.$_searchDataRow(s,o,t,0,n-1))}return e},o.prototype.$_searchData=function(t,e,i,o,n,r){var s=this.rowCount;if(!(s<1)){for(var a=i&&i.caseSensitive,l=i&&i.partialMatch,h=this.fieldCount,d=t.length,u=null,c=[],_=0;_<h;_++)c[_]=this.getField(_).dataType;o=Math.max(0,o),n=Math.max(0,Math.min(s-1,n)),(r=Math.max(0,r))>=t.length&&(o++,r=0);for(var p=i.compareCallback||re.Utils.compareTextValue,f=o;f<=n;f++)for(_=o<f?0:r;_<d;_++){var g=t[_];if(0<=g&&g<h){var m=this.getValue(f,g),y=!1,v=this.getOrgFieldName(g);switch(c[g]){case ht.ValueType.DATETIME:case ht.ValueType.DATE:var C,y=e instanceof Date?p.call(this.$_handler,e,m,a,l,f,v):(u||(C=/[.]/.test(e)?"yyyy.MM.dd":/[/]/.test(e)?"yyyy/MM/dd":/[-]/.test(e)?"yyyy-MM-dd":"yyyyMMdd",u=new dt.DateTimeConverter(C)),p.call(this.$_handler,e,m&&u.getText(m),a,l,f,v));break;default:y=p.call(this.$_handler,e,m,a,l,f,v)}if(y)return{dataRow:f,fieldIndex:g,searchFieldIndex:_,fieldName:v}}}}return null},o.prototype.searchData=function(t){var e=null,i=(t=t instanceof w.SearchCellOptions?t:new w.SearchCellOptions(t)).fields,o=t.value,n=Math.max(0,t.startIndex),r=Math.max(0,t.startFieldIndex);if(!i||i.length<1)for(var i=[],s=this.getFields(),a=0;a<s.length;a++)i.push(s[a].orgFieldName);if(i&&0<i.length&&null!=o){for(var l,h=void 0,d=i.length,u=[],h=0;h<d;h++)l=parseFloat(i[h]),isNaN(l)?u.push(this.getFieldIndex(i[h])):u.push(l);0<u.length&&(e=!(e=n<(d=this.rowCount)?this.$_searchData(u,o,t,n,d-1,r):null)&&t.wrap&&(0<n||0<t.startFieldIndex)?this.$_searchData(u,o,t,0,n-1,0):e)&&(e.fieldName=this.getOrgFieldName(e.fieldIndex))}return e},o.prototype.isDataChanged=function(t,e){var i;return!(this._rowStates[t]!==b.RowState.UPDATED||!this._orgValues)&&(this.$_checkRowIndex(t),this._checkFieldIndex(e),!!this._orgValues[t])&&(i=this._orgValues[t][e],t=this.getValue(t,e),e=this.getField(e))&&!e.sameValues(i,t)},o.prototype.$_hideRows=function(t,e){if(null!=t){for(var i=re.Utils.isArray(t)?t:[t],o=[],t=this._hiddenIds.length,n=0,r=i.length;n<r;n++){var s=this.getRowId(i[n]);null!=s&&(o.push(s),e?this._hiddenIds.indexOf(s)<0&&this._hiddenIds.push(s):0<=(s=this._hiddenIds.indexOf(s))&&this._hiddenIds.splice(s,1))}this._hiddenIds.length!==t&&this.fireRowHided(o,e)}},o.prototype.hideRows=function(t){this.$_hideRows(t,!0)},o.prototype.showRows=function(t){this.$_hideRows(t,!1)},o.prototype.clearHiddenRows=function(){0<this._hiddenIds.length&&(this._hiddenIds=[],this.fireRowHided([],!1))},o.prototype.getHiddenRows=function(){for(var t=[],e=0,i=this._hiddenIds.length;e<i;e++){var o=this._rowIds.indexOf(this._hiddenIds[e]);0<=o&&t.push(o)}return t.sort(function(t,e){return t-e}),t},o.prototype.isHiddenRow=function(t){t=this._rowIds[t];return 0<=this._hiddenIds.indexOf(t)},_dp(o,"hiddenCount",{get:function(){return this._hiddenIds.length}}),o.prototype.undo=function(){this.canUndo&&this._commands.undo()},o.prototype.redo=function(){this.canRedo&&this._commands.redo(!0)},o.prototype.clearCommandStack=function(){this._commands&&this._commands.flush()};var r,i=o;function o(t,e){var i=r.call(this)||this;return i._points=[],i._nextPoint=0,i._values=[],i._rowIds=[],i._rowStates=[],i._orgValues=null,i._needRestore=!1,i._deletedCount=0,i._nextRowId=0,i._hiddenIds=[],i.$_handler=e,t&&(i.undoable=!0,i._commands=new S.LocalDataCommandStack(i)),i}e.LocalDataProvider=i})),xt=(t(wt),wt.LocalDataProvider,e(function(t,e){Object.defineProperty(e,"__esModule",{value:!0});i=se.Base,ne.__extends(n,i),n.prototype._doDispose=function(){i.prototype._doDispose.call(this)},n.prototype.add=function(t){var e;t&&((e=this._tags||(this._tags=[])).indexOf(t)<0&&e.push(t),t.connect(this._owner))},n.prototype.remove=function(t){var e;t&&this._tags&&0<=(e=this._tags.indexOf(t))&&(this._tags.splice(e,1),t.disconnect())},n.prototype.clearRows=function(){if(this._tags)for(var t=this._tags.length;t--;)this._tags[t].clearRows()},n.prototype.setRows=function(){if(this._tags)for(var t=this._tags.length;t--;)this._tags[t].setRows()},n.prototype.addRow=function(t){if(this._tags)for(var e=this._tags.length;e--;)this._tags[e].addRow(t)},n.prototype.addRows=function(t){if(this._tags)for(var e=this._tags.length;e--;)this._tags[e].addRows(t)},n.prototype.removeRow=function(t){if(this._tags)for(var e=this._tags.length;e--;)this._tags[e].removeRow(t)},n.prototype.removeRows=function(t){if(this._tags)for(var e=this._tags.length;e--;)this._tags[e].removeRows(t)},n.prototype.updateRow=function(t){if(this._tags)for(var e=this._tags.length;e--;)this._tags[e].updateRow(t)},n.prototype.updateRows=function(t){if(this._tags)for(var e=this._tags.length;e--;)this._tags[e].updateRows(t)};var i,o=n;function n(t){var e=i.call(this)||this;return e._tags=new Array,e._owner=t,e}e.TreeDataTagCollection=o})),ut=(t(xt),xt.TreeDataTagCollection,e(function(t,e){function i(){}Object.defineProperty(e,"__esModule",{value:!0}),i.parse=function(t){return(new window.DOMParser).parseFromString(t,"text/xml")},i.toString=function(t){return(new window.XMLSerializer).serializeToString(t)},i.getNodeValue=function(t){return t.firstChild.nodeValue},i.getAttr=function(t,e){return t.getAttribute(e)},i.setAttr=function(t,e,i){t.setAttribute(e,i)},i.addChild=function(t,e,i){t=t.createElement(i);return e.appendChild(t),t},i.addChildWithAttr=function(t,e,i,o,n){t=t.createElement(i);return t.setAttribute(o,n),e.appendChild(t),t},i.addChildWithValue=function(t,e,i,o){t=t.createElement(i);return t.nodeValue=o,e.appendChild(t),t},i.parseXml=function(e){var i=null;try{(i=new ActiveXObject("Microsoft.XMLDOM")).async=!1,i.loadXML(e)}catch(t){if(i)throw t;i=(new window.DOMParser).parseFromString(e,"text/xml")}return i},e.XmlUtils=i})),y=(t(ut),ut.XmlUtils,e(function(t,e){function h(t,e){var i=[];if(t){var o=t.childNodes;if(o)for(var n=0,r=o.length;n<r;n++){var s=o[n];s.tagName===e&&i.push(s)}}return i}Object.defineProperty(e,"__esModule",{value:!0});i=se.Base,ne.__extends(o,i),o.extractJson=function(t,e){var i=t;if(e=e&&e.trim())for(var o=e.split("."),n=0;n<o.length;n++){var r=o[n]&&o[n].trim();if(r){var s,a,l=r.indexOf("["),h=r.lastIndexOf("]");if(0<l&&l<h?(s="$"!=(a=r.substring(0,l))?i[a]:i,i=Array.isArray(s)&&(a=r.substring(l+1,h),0<=(l=parseInt(a)))&&l<s.length?s[l]:null):"$"!=r&&(i=i[r]),!i)break}}return Array.isArray(i)?i:null},o.extractXml=function(t,e){var i=null;if(e=e&&e.trim())for(var o=e.split("."),n=0;n<o.length;n++){var r=o[n]&&o[n].trim();if(r){var s,a=r.indexOf("["),l=r.lastIndexOf("]");if(0<a&&a<l?(s=r.substring(0,a),(i=h(i?i[0]:t,s))&&(s=r.substring(a+1,l),i=i[parseInt(s)])):i=h(i?i[0]:t,r),!i)break}}return i};var i,l,a=o;function o(){return null!==i&&i.apply(this,arguments)||this}e.DataPath=a,(u=l=e.DataFillMode||(e.DataFillMode={})).SET="set",u.APPEND="append",u.INSERT="insert",u.UPDATE="update";n=se.Base,ne.__extends(s,n);var n,r=s;function s(t){var e=n.call(this)||this;if(e.fillMode=l.SET,e.fillPos=0,e.count=-1,e.rootArray=!0,e.rows="row",e.start=0,e.delimiter=",",e.quoted=!1,e.parentId=0,e.childrenField=null,e.treeField=null,e.iconField=null,e.needSorting=!1,e.noStates=!1,t){for(var i in t.hasOwnProperty("append")&&(e.fillMode=l.APPEND),t.hasOwnProperty("fillMode")&&(e.fillMode=t.fillMode),t.hasOwnProperty("fillPos")&&(e.fillPos=t.fillPos),t.hasOwnProperty("count")&&(e.count=t.count),t.hasOwnProperty("rootArray")&&(e.rootArray=t.rootArray),t.hasOwnProperty("rows")&&(e.rows=t.rows),t.hasOwnProperty("start")&&(e.start=t.start),t.hasOwnProperty("delimiter")&&(e.delimiter=t.delimiter),t.hasOwnProperty("quoted")&&(e.quoted=t.quoted),t)void 0!==t[i]&&(e[i]=t[i]);e.parentId=t.parentId||t.parent,e.childrenField=t.childrenField||t.children,e.treeField=t.treeField||t.tree,e.iconField=t.iconField||t.icon,e.needSorting=t.needSorting||t.sorting}return e}e.DataFillOptions=r;d=se.Base,ne.__extends(c,d),c.prototype._doDispose=function(){this._provider=null},c.prototype.load=function(t,e,i){var o=new r(i);if(this._checkEmpty(e,o))return 0;i=this._provider.checkStates;o.noStates&&(this._provider.checkStates=!1);try{switch(t){case"json":return this._loadJson(e,o);case"xml":return this._loadXml(e,o);case"csv":return this._loadCsv(e,o)}}finally{this._provider.checkStates=i,this._provider.fireDataLoadComplated()}},c.prototype._loadJson=function(t,e){"string"==typeof t&&(t=JSON.parse(t));var i=null;if(i=(i=e.rootArray?re.Utils.isArray(t)?t:null:i)||a.extractJson(t,e.rows)){var o=e.fillPos,n=e.start,r=e.count;switch(e.fillMode){case l.APPEND:this._provider.appendRows(i,n,r);break;case l.INSERT:this._provider.insertRows(o,i,n,r);break;case l.UPDATE:this._provider.updateRows(o,i,n,r,!1);break;default:l.SET;this._provider.setRows(i,n,r)}return i.length}return this._fillEmpty(e),0},c.prototype._loadXml=function(t,e){if((t="string"==typeof t?ut.XmlUtils.parse(t):t)&&t.documentElement){var i=e.fillPos,o=e.start,n=e.count,r=e.rows,s=a.extractXml(t.documentElement,r);switch(e.fillMode){case l.APPEND:this._provider.appendXmlRows(s,o,n);break;case l.INSERT:this._provider.insertXmlRows(i,s,o,n);break;case l.UPDATE:this._provider.updateXmlRows(i,s,o,n);break;default:l.SET;this._provider.setXmlRows(s,o,n)}return s.length}return this._fillEmpty(e),0},c.prototype._loadCsv=function(t,e){var i=e.fillPos,o=e.start,n=e.count,r=e.quoted,s=e.delimiter,a=Q.DataHelper.csvToArray(this._provider,t,o,n,r,s);if(a&&0<(n=a.length)){switch(e.fillMode){case l.APPEND:this._provider.appendRows(a,0,n);break;case l.INSERT:this._provider.insertRows(i,a,0,n);break;case l.UPDATE:this._provider.updateRows(i,a,0,n,!1);break;default:l.SET;this._provider.setRows(a,0,n)}return a.length}return this._fillEmpty(e),0},c.prototype._fillEmpty=function(t){t.fillMode===l.SET&&this._provider.setRows(null)},c.prototype._checkEmpty=function(t,e){return!t&&(this._fillEmpty(e),!0)};var d,u=c;function c(t){var e=d.call(this)||this;return e._provider=t,e}e.DataLoader=u})),bt=(t(y),y.DataPath,y.DataFillMode,y.DataFillOptions,y.DataLoader,e(function(t,e){Object.defineProperty(e,"__esModule",{value:!0});o=se.Base,ne.__extends(n,o),n.prototype._doDispose=function(){o.prototype._doDispose.call(this)},_dp(n,"provider",{get:function(){return this._ds}}),_dp(n,"rootRow",{get:function(){return this._rootRow}}),_dp(n,"insertedRows",{get:function(){return this._rows}}),_dp(n,"insertedCount",{get:function(){return this._rowCount}}),n.prototype._prepareLoad=function(t){this._rowCount=0,this._rows=[]},n.prototype._createRow=function(t,e,i){return this._ds.createRow(i,isNaN(i[e])?-1:i[e],i[t],!1)},n.prototype._createRow2=function(t,e,i){return this._ds.createRow(i,e,t,!1)},n.prototype._rowAdded=function(t,e){this._rowCount++,this._rows&&e.parent===t&&this._rows.push(e)},n.prototype._addRow=function(t,e,i,o,n){i=this._createRow(i,o,n);return e._insertChild(e.count,i,!0,!0),this._rowAdded(t,i),i},n.prototype._addRow2=function(t,e,i,o,n){i=this._createRow2(i,o,n);return e._insertChild(e.count,i,!0,!0),this._rowAdded(t,i),i};var o,i=n;function n(t,e){var i=o.call(this)||this;return i._rowCount=0,i._ds=t,i._rootRow=e,i}e.TreeDataSource=i;r=i,ne.__extends(a,r),a.prototype._loadData=function(t,e,i,o,n,r){if(this._prepareLoad(e),!t||t.length<1)return this._rowCount;for(var s=this.provider,a=t.length,l=[],h=new Array(t.length),d=0;d<a;d++)if(l[d]=d,Array.isArray(t[d])){if(Array.isArray(t[d]))for(var u=h[d]=new Array(s.fieldCount),c=0,_=s.fieldCount;c<_;c++)u[c]=t[d][c]}else h[d]=this.provider.objectToRow(t[d]);o&&this.$_sortRows(l,h,i,0,a-1),s.beginUpdate();try{this.$_buildTree(e||this.rootRow,l,h,i,n,r)}finally{s.endUpdate(!1)}return this.insertedCount},a.prototype.$_sortRows=function(t,i,o,e,n){function r(t,e){t=i[t][o],e=i[e][o];return t==e?0:t<e?-1:1}do{var s,a=e,l=n,h=t[Math.floor((e+n)/2)];do{for(;;){if(r(h,t[a])<=0)break;a++}for(;;){if(0<=r(h,t[l]))break;l--}}while(a<=l&&(a!=l&&(s=t[a],t[a]=t[l],t[l]=s),a++,l--),a<=l)}while(e<l&&this.$_sortRows(t,i,o,e,l),(e=a)<n)},a.prototype.$_buildTree=function(s,t,e,a,i,o){function n(t,e,i,o){for(var n=o[a];e!=s;){var r=e.getValue(a);if(t.parentCallback){if(t.parentCallback(r,n))return e}else if(0==n.indexOf(r))return e;e=e.parent}return s}var r=t[0],l=this._createRow(i,o,e[r]),h=n(this,s,0,e[r]);if(h._insertChild(h.count,l,!0,!0),this._rowAdded(s,l),1<t.length)for(var d=t.length,u=l,c=1;c<d;c++)r=t[c],l=this._createRow(i,o,e[r]),(h=n(this,u,0,e[r]))._insertChild(h.count,l,!0,!0),this._rowAdded(s,l),u=l};var r,s=a;function a(t,e){return r.call(this,t,e)||this}l=s,ne.__extends(d,l),d.prototype.load=function(t,e,i,o,n,r){return this._loadData(e,t,i,o,n,r)};var l,h=d;function d(t,e){return l.call(this,t,e)||this}e.ArrayTreeSource=h;u=s,ne.__extends(c,u),c.prototype.load=function(t,e,i,o,n,r){e=Q.DataHelper.csvToArray(this.provider,e);return this._loadData(e,t,i,o,n,r)};var u,h=c;function c(t,e){return u.call(this,t,e)||this}e.CsvTreeSource=h;_=i,ne.__extends(p,_),p.prototype.load=function(t,e,i,o,n){if(this._prepareLoad(t),e){e=y.DataPath.extractJson(e,i);if(e&&0<e.length){this.provider.beginUpdate();try{this.$_buildJsonTree(this.provider,t||this.rootRow,e,i,o,n)}finally{this.provider.endUpdate(!1)}}}return this._rowCount},p.prototype.load2=function(t,e,i,o,n,r){if(this._prepareLoad(t),e){e=y.DataPath.extractJson(e,i);if(e&&0<e.length){this.provider.beginUpdate();try{this.$_buildJsonTree2(this.provider,t||this.rootRow,e,o,n,r)}finally{this.provider.endUpdate(!1)}}}return this._rowCount},p.prototype.$_buildJsonTree=function(t,p,e,f,g,m){t=t.getOrgFieldNames();!function t(e,i,o,n){for(var r=n.length,s=0,a=o.length;s<a;s++){for(var l=o[s],h=new Array(r),d=0;d<r;d++){var u=n[d];l.hasOwnProperty(u)&&(h[d]=l[u])}var c,_=e._addRow(p,i,g,m,h);l.hasOwnProperty(f)&&(c=l[f],Array.isArray(c))&&0<c.length&&t(e,_,c,n)}}(this,p,e,t)},p.prototype.$_buildJsonTree2=function(t,p,e,f,g,m){t=t.getOrgFieldNames();!function t(e,i,o,n){for(var r=n.length,s=0,a=o.length;s<a;s++){for(var l=o[s],h=new Array(r),d=0;d<r;d++){var u=n[d];l.hasOwnProperty(u)&&(h[d]=l[u])}var c,_=e._addRow2(p,i,l[g],isNaN(l[m])?-1:l[m],h);l.hasOwnProperty(f)&&(c=l[f],Array.isArray(c))&&0<c.length&&t(e,_,c,n)}}(this,p,e,t)};var _,h=p;function p(t,e){return _.call(this,t,e)||this}e.JsonTreeSource=h;f=s,ne.__extends(g,f),g.prototype.load=function(t,e,i,o,n){if(this._prepareLoad(t),e){e="string"==typeof e?ut.XmlUtils.parseXml(e):e;if(e){e=y.DataPath.extractXml(e.documentElement,i);if(e&&0<e.length){this.provider.beginUpdate();try{this.$_buildXmlTree(this.provider,t||this.rootRow,e,i,o,n)}finally{this.provider.endUpdate(!1)}}}}return this._rowCount},g.prototype.$_buildXmlTree=function(t,d,e,u,c,_){!function t(e,i,o,n,r){for(var s=0,a=o.length;s<a;s++){var l=o[s],h=Q.DataHelper.xmlToRow(l,n,r),h=e._addRow(d,i,c,_,h);(l=y.DataPath.extractXml(l,u))&&0<l.length&&t(e,h,l,n,r)}}(this,d,e,t.getFields(),t.getOrgFieldNames())};var f,i=g;function g(t,e){return f.call(this,t,e)||this}e.XmlTreeSource=i})),It=(t(bt),bt.TreeDataSource,bt.ArrayTreeSource,bt.CsvTreeSource,bt.JsonTreeSource,bt.XmlTreeSource,e(function(t,e){Object.defineProperty(e,"__esModule",{value:!0});i=S.DataEditCommand,ne.__extends(n,i);var i,o=n;function n(t){return i.call(this,t)||this}e.LocalTreeDataCommand=o;r=I.EditCommandStack,ne.__extends(s,r);var r,o=s;function s(){return null!==r&&r.apply(this,arguments)||this}e.LocalTreeDataCommandStack=o})),Et=(t(It),It.LocalTreeDataCommand,It.LocalTreeDataCommandStack,e(function(t,e){Object.defineProperty(e,"__esModule",{value:!0});n=It.LocalTreeDataCommand,ne.__extends(o,n),o.prototype._doRun=function(t){var e={};return e.row=this._row._keepRow(t),(e.result=this._row.$_update(t,this._values,this._strict,!1))&&(this._newState=this._row.rowState),e},o.prototype._doRedo=function(t,e){this._row.$_update(t,this._values,this._strict,!1)},o.prototype._doUndo=function(t,e){this._row._yieldRow(t,e.row),e.row.state!=this._newState&&t._fireRowStateChanged(this._row,!1),t._rowUpdated(this._row)};var n,i=o;function o(t,e,i,o){t=n.call(this,t)||this;return t._row=e,t._values=t._cloneRow(i),t._strict=o,t}e.UpdateTreeDataCommand=i})),St=(t(Et),Et.UpdateTreeDataCommand,e(function(t,e){Object.defineProperty(e,"__esModule",{value:!0});i=se.Base,ne.__extends(n,i),n.getRowIds=function(t){if(!t)return null;for(var e=[],i=0,o=t;i<o.length;i++){var n=o[i];e.push(n.rowId)}return e},n.prototype._doDispose=function(){i.prototype._doDispose.call(this)},_dp(n,"rowId",{get:function(){return this._rowId}}),_dp(n,"provider",{get:function(){return null}}),_dp(n,"parent",{get:function(){return null}}),_dp(n,"index",{get:function(){var t=this.parent;return null!=t?t._children.indexOf(this):-1}}),_dp(n,"level",{get:function(){return 0}}),_dp(n,"iconIndex",{get:function(){return-1},set:function(t){}}),_dp(n,"hasChildren",{get:function(){return!1}}),_dp(n,"count",{get:function(){return this._children?this._children.length:0}}),_dp(n,"descendantCount",{get:function(){return this._descendantCount}}),_dp(n,"children",{get:function(){return this._children?this._children.concat():null}}),_dp(n,"descendants",{get:function(){var t;return this._children?(function t(e,i){for(var o=0,n=e.count;o<n;o++){var r=e.getChild(o);i.push(r),t(r,i)}}(this,t=[]),t):null}}),_dp(n,"ancestors",{get:function(){var t=null,e=this.parent;if(e)for(t=[];e&&0<=e.rowId;)t.push(e),e=e.parent;return t}}),_dp(n,"rowState",{get:function(){return b.RowState.NONE}}),_dp(n,"values",{get:function(){return null}}),n.prototype.getChild=function(t){if(0<=t){if(!this._children||t>=this._children.length)throw new RangeError("Index is invalid: "+t);return this._children[t]}throw new RangeError("Index is invalid: "+t)},n.prototype.getChildObjects=function(t,e,i,o,n,r){void 0===r&&(r=-1);var s=this._children;if(s){var a=[];e=e||"rows",i=i||"iconIndex";for(var l=0,h=s.length;l<h;l++){var d=s[l],u=d.getObject();o&&(u.__rowId=d._rowId),n&&(u.__rowState=d.rowState),t&&0!==r&&(u[e]=d.getChildObjects(t,e,i,o,n,r-1)),u[i]=d.iconIndex,a.push(u)}return a}return null},n.prototype.$_createTreeOutputRows=function(t,e,i){for(var o=[],n=(!function t(e,i,o){for(var n=0,r=e.length;n<r;n++){var s=e[n];i.push(e[n]),o&&s[o]&&s[o].length&&t(s[o],i,o)}}(t,o,i),this.provider),r=n.fieldCount,s=o.length,a=(e=e instanceof x.DataOutputOptions?e:new x.DataOutputOptions(e)).nullDateText,l=e.nullText,h=e.nanText,d=this.provider.handler,u=0;u<r;u++){var c=n.getField(u),_=c.orgFieldName,p=void 0,f=void 0;if(c.dataType==ht.ValueType.DATETIME&&((p=e.datetimeCallback)||(f=e.datetimeWriter)||null!=a))if(p)for(var g=0;g<s;g++)(m=o[g])[_]=p(d,m._rowId,_,m[_]);else for(g=0;g<s;g++){var m,y=(m=o[g])[_];m[_]=y?f?f.getText(m[_]):y:a}else if(c.dataType==ht.ValueType.BOOLEAN&&((p=e.booleanCallback)||(f=e.booleanFormatter)))if(p)for(g=0;g<s;g++)(m=o[g])[_]=p(d,m._rowId,_,m[_]);else for(g=0;g<s;g++)(m=o[g])[_]=f.formatValue(m[_]);else if(c.dataType==ht.ValueType.NUMBER&&((p=e.numberCallback)||(f=e.numberFormatter)||null!=h))if(p)for(g=0;g<s;g++)(m=o[g])[_]=p(d,m._rowId,_,m[_]);else for(g=0;g<s;g++){var v=(m=o[g])[_];m[_]=null==v||isNaN(v)?h:f?f.getText(v):v}else if(null!=l)for(g=0;g<s;g++){v=(m=o[g])[_];m[_]=null==v?l:v}}for(var C=0,w=o.length;C<w;C++)delete o[C]._rowId},n.prototype.getOutput=function(t,e){var i;return t?((i=this.getObject())&&(i[e||"iconIndex"]=this.iconIndex,i._rowId=this._rowId,t.rowState&&(i.__rowState=this.rowState),this.$_createTreeOutputRows([i],t)),i):null},n.prototype.getChildOutputObjects=function(t,e,i,o){e=this.getChildObjects(e,i,o,!0,null==t?void 0:t.rowState);return e&&t&&this.$_createTreeOutputRows(e,t,i),e},n.prototype.findById=function(t){if(this._children)for(var e=0,i=this._children.length;e<i;e++){var o=this._children[e];if(o.rowId==t)return o;if(o=o.findById(t))return o}return null},n.prototype.indexOf=function(t){return this._children?this._children.indexOf(t):-1},n.prototype.insertChild=function(t,e,i){return this._insertChild(t,e,!1,i)},n.prototype.addChild=function(t,e){return this._insertChild(this.count,t,!1,e)},n.prototype.insertChildren=function(t,e,i){return this._insertChildren(t,e,!1,i)},n.prototype.removeChild=function(t){return this._removeChild(t,!1)},n.prototype.clearChildren=function(){var t=this.provider;t&&!t._checkClientState()||this._removeChildren()},n.prototype.findChild=function(t,e){var i=this.provider;if(!i||!t||t.length<1||!e||e.length<t.length)return null;for(var o=[],n=[],r=0,s=t.length;r<s;r++){var a=void 0;0<=(a="string"==typeof t[r]?i.getFieldIndex(t[r]):Number(t[r]))&&a<i.fieldCount&&o.indexOf(a)<0&&(o.push(a),n.push(e[r]))}for(var r=0,l=o.length;r<l;r++)o[r]=i.getField(o[r]);return this.$_findChild(o,n)},n.prototype.isAncestorOf=function(t){if(t&&t!==this){for(var e=t.parent;e&&e!==this;)e=e.parent;return e===this}return!1},n.prototype.clearRowStates=function(t,e){var i=this.provider;if(i){var o=[],t=t?[]:null,n=(this._collectStateRows(o,t),o.length),r=t?t.length:0;if(0!=n||0!=r){if(e)for(var s=0,a=o.length;s<a;s++)o[s]._changeRowState(b.RowState.NONE,!0,!1);else n&&i.changeRowStates(o,b.RowState.NONE);r&&i.deleteRows(t)}}},n.prototype.toTreeString=function(){for(var t=this.rowId+"",e=new Array(this.level+1).join("  "),i=0;i<this.count;i++)t+="\n"+e+this.getChild(i).toTreeString();return t},n.prototype._checkFieldIndex=function(t){var e=this.provider.fieldCount;if(t<0||e<=t)throw new c.DataSourceError("Field index is out of bounds: "+t)},n.prototype._descendantCountChanged=function(t){this._descendantCount+=t;var e=this.parent;e&&e._descendantCountChanged(t)},n.prototype._moveChild=function(t,e){if(t!=e){if(t<0||t>=this._children.length)throw new RangeError("index is out of range: "+t);if(e<0||e>=this._children.length)throw new RangeError("newIndex is out of range: "+e);var i=this._children[t];if(e<t)for(var o=t;e<o;o--)this._children[o]=this._children[o-1];else for(o=t;o<e;o++)this._children[o]=this._children[o+1];this._children[e]=i}},n.prototype._moveChildren=function(t,e){var i=t[0];if(i!=e){if(i<0||i>=this._children.length)throw new RangeError("index is out of range: "+t[0]);if(e<0||e>=this._children.length)throw new RangeError("newIndex is out of range: "+e);for(var o=this._children,n=[],r=t.length-1;0<=r;r--)n.push(o.splice(t[r],1)[0]);for(r=0;r<n.length;r++)o.splice(e,0,n[r])}},n.prototype._changeParent=function(t,e){if(e<0||e>t._children.length)throw new RangeError("index is out of range: "+e);var i=this.parent,o=this.index;i._children.splice(o,1),i._descendantCountChanged(-1-this.descendantCount),i._detach(this),t._children.splice(e,0,this),t._descendantCountChanged(1+this.descendantCount),t._attach(this)},n.prototype._insertChild=function(t,e,i,o){var n=this.provider;if(n&&!i){if(!n._checkClientState())return!1;n.refreshFieldFormats()}if(!e)throw new Error("child is null");if(this._children=this._children||[],t<0||t>this._children.length)throw new RangeError("Insert index is invalid: "+t);return!(!i&&!this._doChildAdding(t,e)||(this._children.splice(t,0,e),this._descendantCountChanged(1+e.descendantCount),this._attach(e),o||e._changeRowState(b.RowState.CREATED,!0,!1),this._doChildAdded(t,e),0))},n.prototype._insertChildren=function(t,e,i,o){var n=this.provider;if(n&&!i){if(!n._checkClientState())return!1;n.refreshFieldFormats()}if(this._children=this._children||[],t<0||t>this._children.length)throw new RangeError("Insert index is invalid: "+t);if(i||this._doRowsAdding(t,e)){for(var r=0,s=0;s<e.length;s++){var a=e[s];this._children.splice(t+s,0,a),this._attach(a),r+=a.descendantCount,o||a._changeRowState(b.RowState.CREATED,!0,!1)}return this._descendantCountChanged(r),this._doRowsAdded(t,e),!0}return!1},n.prototype._addChild=function(t,e,i){return this._insertChild(this.count,t,e,i)},n.prototype.$_removeChild=function(t,e,i){return!(!i&&!this._doChildRemoving(t)||(this._children.splice(e,1),this._descendantCountChanged(-1-t.descendantCount),this._detach(t),this._doChildRemoved(t),0))},n.prototype._removeChild=function(t,e){var i=this.provider;if(!i||e||i._checkClientState()){if(t&&this._children)for(var o=this._children.length;o--;)if(this._children[o]===t){if(!i.softDeleting||!i.checkStates)return this.$_removeChild(t,o,e);switch(t.rowState){case b.RowState.CREATED:if(i.deleteCreated)return this.$_removeChild(t,o,e);t._changeRowState(b.RowState.CREATE_AND_DELETED,!0,!1);break;case b.RowState.DELETED:case b.RowState.CREATE_AND_DELETED:break;default:t._changeRowState(b.RowState.DELETED,!0,!1)}}return!1}},n.prototype._removeChildren=function(){this._children&&0<this._children.length&&(this._children.splice(0,this._children.length),this._descendantCountChanged(-this._descendantCount),this._doCleared())},n.prototype._setChildren=function(t){this._children&&0<this._children.length&&this._children.splice(0,this._children.length);var e,i=-this._descendantCount;if(t&&0<(e=t.length)){this._children||(this._children=[]);for(var o=0;o<e;o++){var n=t[o];this._children.push(n),i+=1+n.descendantCount,this._attach(n)}}this._descendantCountChanged(i)},n.prototype.$_findChild=function(t,e){for(var i=t.length,o=this.count,n=0;n<o;n++){for(var r=this._children[n],s=!0,a=0;a<i;a++)if(!t[a].equalValues(e[a],r.getValue(t[a].index))){s=!1;break}if(s)return r;if(r=r.$_findChild(t,e))return r}return null},n.prototype._collectStateRows=function(t,e){for(var i=this.count;i--;){var o=this.getChild(i),n=o.rowState;!e||n!=b.RowState.DELETED&&n!=b.RowState.CREATE_AND_DELETED?(n!=b.RowState.NONE&&t.push(o),o._collectStateRows(t,e)):e.push(o)}},n.prototype._clearOrgValues=function(){for(var t=this.count;t--;)this.getChild(t)._clearOrgValues()},n.prototype._restoreState=function(t,e){if(t)for(var i=this.count;i--;)this.getChild(i)._restoreState(!0,e);return!1},n.prototype.$_restoreRow=function(t,e){if(t)for(var i=this.count;i--;)this.getChild(i).$_restoreRow(!0,e);return!1},n.prototype._doChildAdding=function(t,e){var i=this.provider;return!i||i._rowAdding(this,t,e)},n.prototype._doChildAdded=function(t,e){var i=this.provider;i&&i._rowAdded(e)},n.prototype._doRowsAdding=function(t,e){var i=this.provider;return!i||i._rowsAdding(this,t,e)},n.prototype._doRowsAdded=function(t,e){var i=this.provider;i&&i._rowsAdded(this,e)},n.prototype._doChildRemoving=function(t){var e=this.provider;return!e||e._rowRemoving(t)},n.prototype._doChildRemoved=function(t){var e=this.provider;e&&e._rowRemoved(t)},n.prototype._doCleared=function(){var t=this.provider;t&&t._rowCleared(this)};var i,o=n;function n(t){var e=i.call(this)||this;return e._children=null,e._descendantCount=0,e._rowId=t&&t._nextRowId++,e}e.TreeDataRow=o;r=o,ne.__extends(s,r),s.prototype._doDispose=function(){this._provider=null,r.prototype._doDispose.call(this)},s.prototype.set=function(t){for(var e=[],i=0;i<t.count;i++)e.push(t.getChild(i).copy());this._setChildren(e)},_dp(s,"provider",{get:function(){return this._provider}}),_dp(s,"rowId",{get:function(){return-1}}),_dp(s,"index",{get:function(){return 0}}),_dp(s,"hasChildren",{get:function(){return!0}}),s.prototype.copy=function(){for(var t=new s(null),e=0,i=this.count;e<i;e++){var o=this.getChild(e).copy();t._addChild(o,!0,!0)}return t._provider=this._provider,t},s.prototype._changeRowState=function(t,e,i){return!1},s.prototype.getObject=function(){return null},s.prototype.getValue=function(t){},s.prototype.setValue=function(t,e,i){return!1},s.prototype._attach=function(t){t._parent=this},s.prototype._detach=function(t){t._parent===this&&(t._parent=null)},s.prototype.update=function(t,e){return!1},s.prototype.$_setHasChildren=function(t){},s.prototype.$_setIconIndex=function(t){},s.prototype._keepRow=function(t){},s.prototype._yieldRow=function(t,e){},s.prototype._keepStates=function(t){},s.prototype._yieldStates=function(t,e){};var r,o=s;function s(t){var e=r.call(this,t)||this;return e._provider=t,e}e.RootTreeRow=o;a=c.DataSource,ne.__extends(l,a),l.prototype._doDispose=function(){a.prototype._doDispose.call(this)},l.prototype.editCommandStackChanged=function(t,e,i){this._fireCommandStackChanged(e,i)},l.prototype.registerCommandListener=function(t){t&&this._commandListeners.indexOf(t)<0&&this._commandListeners.push(t)},l.prototype.unregisterCommandListener=function(t){t=this._commandListeners.indexOf(t);0<=t&&this._commandListeners.splice(t,1)},l.prototype._keepCommandStates=function(t){if(0<this._commandListeners.length)return this._commandListeners[0].getCommandStates(t)},l.prototype._yieldCommandStates=function(t,e){if(0<this._commandListeners.length)return this._commandListeners[0].setCommandStates(t,e)};var a,o=l;function l(){var t=a.call(this)||this;return t._nextRowId=0,t._commandListeners=[],t}e.TreeDataProvider=o})),Rt=(t(St),St.TreeDataRow,St.RootTreeRow,St.TreeDataProvider,e(function(t,e){Object.defineProperty(e,"__esModule",{value:!0});o=It.LocalTreeDataCommand,ne.__extends(n,o),n.prototype._doRun=function(t){var e,i=t,o={};for(e in this._rowFields){var n=i.rowById(+e)._keepRow(i);o[e]=n}return i.$_fillValue(this._rowFields,this._value),o},n.prototype._doRedo=function(t,e){t.$_fillValue(this._rowFields,this._value)},n.prototype._doUndo=function(t,e){var i,o=t;for(i in this._rowFields)o.rowById(+i)._yieldRow(t,e[i]);t._fireRefresh()};var o,i=n;function n(t,e,i){t=o.call(this,t)||this;return t._rowFields=re.Utils.deepCopy(e),t._value=i,t}e.FillValueTreeDataCommand=i})),Tt=(t(Rt),Rt.FillValueTreeDataCommand,e(function(t,e){Object.defineProperty(e,"__esModule",{value:!0});n=It.LocalTreeDataCommand,ne.__extends(o,n),o.prototype._doRun=function(t){for(var e=t,i=[],o=0,n=this._rows;o<n.length;o++){var r=n[o]._keepRow(e);i.push(r)}return e.$_updateRows(this._rows,this._values,this._strict),i},o.prototype._doRedo=function(t,e){t.$_updateRows(this._rows,this._values,this._strict)},o.prototype._doUndo=function(t,e){for(var i=0;i<this._rows.length;i++)this._rows[i]._yieldRow(t,e[i]);t._fireRefresh()};var n,i=o;function o(t,e,i,o){t=n.call(this,t)||this;return t._rows=e.slice(),t._values=t._cloneValues(i.slice()),t}e.UpdateRowsTreeDataCommand=i})),Dt=(t(Tt),Tt.UpdateRowsTreeDataCommand,e(function(t,e){Object.defineProperty(e,"__esModule",{value:!0});n=It.LocalTreeDataCommand,ne.__extends(o,n),o.prototype._doRun=function(t){var e={};return e.row=this._row._keepRow(t),(e.result=this._row.$_setValue(this._field,this._value,!1))&&(this._newState=this._row.rowState),e},o.prototype._doRedo=function(t,e){this._row.$_setValue(this._field,this._value,!1)},o.prototype._doUndo=function(t,e){this._row._yieldRow(t,e.row),e.row.state!=this._newState&&t._fireRowStateChanged(this._row),t._valueChanged(this._row,this._field)};var n,i=o;function o(t,e,i,o){t=n.call(this,t)||this;return t._row=e,t._field=i,t._value=o instanceof Date?new Date(o):o,t}e.SetValueTreeCommand=i})),kt=(t(Dt),Dt.SetValueTreeCommand,e(function(t,e){Object.defineProperty(e,"__esModule",{value:!0});a=St.TreeDataRow,ne.__extends(n,a),n.prototype._doDispose=function(){this._values=null,this._orgValues=null,a.prototype._doDispose.call(this)},_dp(n,"provider",{get:function(){return this._parent&&this._parent.provider}}),_dp(n,"parent",{get:function(){return this._parent}}),_dp(n,"index",{get:function(){return this._parent?this._parent.indexOf(this):-1}}),_dp(n,"level",{get:function(){return this._parent?this._parent.level+1:0}}),_dp(n,"hasChildren",{get:function(){return this._hasChildren},set:function(t){t!=this._hasChildren&&(this._hasChildren=t,t=this.provider)&&t._hasChildrenChanged(this)}}),_dp(n,"iconIndex",{get:function(){return this._iconIndex},set:function(t){(t=isNaN(t)?-1:t)!=this._iconIndex&&(this._iconIndex=t,t=this.provider)&&t._iconIndexChanged(this)}}),_dp(n,"rowState",{get:function(){return this._state}}),_dp(n,"values",{get:function(){return this._values&&this._values.slice()}}),n.prototype._attach=function(t){t._parent=this},n.prototype._detach=function(t){t._parent===this&&(t._parent=null)},n.prototype._changeRowState=function(t,e,i){var o,n=this.provider;return!(!n||t==this._state||(o=this._state,(this._state=t)==b.RowState.UPDATED&&n._needOrgValues?this._orgValues=this._values.concat():o==b.RowState.UPDATED&&this._orgValues&&(this._orgValues=null),e&&n._stateChanged(this,i),0))},n.prototype.getValue=function(t){if(this.provider){if(this._checkFieldIndex(t),this._values)return this._values[t];throw new Error("Row data is not loaded")}},n.prototype.setValue=function(t,e,i){var o=this.provider;return!!o&&(o.undoable?o._commands.execute(new Dt.SetValueTreeCommand(o,this,t,e)):this.$_setValue(t,e,i))},n.prototype.getObject=function(){var t=this.provider;if(t){for(var e=t.fieldCount,i={},o=0;o<e;o++)i[t.getOrgFieldName(o)]=this._values[o];return i}return null},n.prototype.copy=function(){var t=new n(null,null);t._rowId=this._rowId,t._iconIndex=this._iconIndex,t._hasChildren=this._hasChildren,t._state=this._state,t._values=this._values?this._values.concat():null;for(var e=0,i=this.count;e<i;e++){var o=this.getChild(e).copy();t._addChild(o,!0,!0)}return t},n.prototype.update=function(t,e){var i=this.provider;return!!i&&(i.undoable?i._commands.execute(new Et.UpdateTreeDataCommand(i,this,t,e)):this.$_update(i,t,e,!1))},n.prototype._keepRow=function(t){var e={};return e.values=this._values&&this._values.slice(),e.state=this._state,e.orgValues=this._orgValues&&this._orgValues.slice(),e.outer=t._keepCommandStates(this),e},n.prototype._yieldRow=function(t,e){this._values=e.values&&e.values.slice(),this._state=e.state,this._orgValues=e.orgValues&&e.orgValues.slice(),t._yieldCommandStates(this,e.outer)},n.prototype._keepStates=function(t){},n.prototype._yieldStates=function(t,e){},n.prototype._keepState=function(){return this._state},n.prototype._yieldState=function(t){this._state=t},n.prototype.$_setValue=function(t,e,i){var o,n,r,s=this.provider;if(s&&s._checkClientState()){if(s.refreshFieldFormats(),this._checkFieldIndex(t),this._values)return e!=this._values[t]&&(o=null,n=s.getField(t),r=s.checkStates&&(this._state==b.RowState.NONE||!this._state),!i&&r&&s._needOrgValues&&(o=this._values.concat()),this._values[t]=n.readValue(e),s._internalCalculateValues(this._values,this.rowId),!i&&r?(s._needOrgValues&&(this._orgValues=o),this._state=b.RowState.UPDATED,s._stateChanged(this,!1)):s._needRestore&&this.$_restoreState(s),s._valueChanged(this,t)),!0;throw new Error("Row data is not loaded")}},n.prototype.$_update=function(t,e,i,o){if(!o){if(!t._checkClientState())return;t.refreshFieldFormats()}return!(!e||!o&&!t._rowUpdating(this)||(this.$_internalUpdate(e,i,!0),t._rowUpdated(this),0))},n.prototype._clearOrgValues=function(){this._orgValues&&(this._orgValues.length=0,this._orgValues=null),a.prototype._clearOrgValues.call(this)},n.prototype._restoreState=function(t,e){var i=this.$_restoreState(this.provider);return i&&e&&e.push(this),a.prototype._restoreState.call(this,t,e),i},n.prototype.$_restoreRow=function(t,e){var i=!1;if(this._state===b.RowState.UPDATED){var o=this._orgValues;if(o){for(var n=this._values,r=0,s=Math.min(o.length,this.provider.fieldCount);r<s;r++)n[r]=o[r];this._state=b.RowState.NONE,e&&e.push(this),i=!0}}return a.prototype.$_restoreRow.call(this,t,e),i},n.prototype.$_restoreState=function(t){if(this._state==b.RowState.UPDATED&&this._orgValues){for(var e=this._orgValues,i=this._values,o=this.provider,n=o.strictRestore,r=0,s=o.fieldCount;r<s;r++){var a=i.length>r?i[r]:void 0,l=e.length>r?e[r]:void 0;if(n){if(!o.getField(r).equalValues(a,l))return!1}else if(!o.getField(r).sameValues(a,l))return!1}return this._state=b.RowState.NONE,!0}return!1},n.prototype.$_getUpdatedCells=function(){var t=this._orgValues,e=this._values,i=this.provider,o=i.strictRestore,n=[];if(!t||t.length<=0)return null;for(var r=0,s=i.fieldCount;r<s;r++){var a=e.length>r?e[r]:void 0,l=t.length>r?t[r]:void 0,h=i.getField(r);h.calculated||(o?h.equalValues(a,l)||n.push({fieldName:i.getOrgFieldName(r),oldValue:t[r],newValue:e[r]}):h.sameValues(a,l)||n.push({fieldName:i.getOrgFieldName(r),oldValue:t[r],newValue:e[r]}))}return n},n.prototype.$_setHasChildren=function(t){this._hasChildren=t},n.prototype.$_setIconIndex=function(t){this._iconIndex=isNaN(t)?-1:t},n.prototype.$_internalUpdate=function(t,e,i){var o=!1,n=Array.isArray(t),r=this.provider;if(r){var s=Math.min(r.fieldCount,n?t.length:r.fieldCount),a=r.checkStates&&(this._state==b.RowState.NONE||!this._state),l=null;a&&r._needOrgValues&&(l=this._values.concat());for(var h=0;h<s;h++){var d,u=r.getField(h);(n||t.hasOwnProperty(u.orgFieldName))&&(d=n?t[h]:t[u.orgFieldName],e&&void 0===d||(o=!r._needRestore||o||(e?!u.equalValues(this._values[h],u.readValue(d)):!u.sameValues(this._values[h],u.readValue(d))),this._values[h]=r.getField(h).readValue(d)))}r._internalCalculateValues(this._values,this.rowId),a&&o?(l&&(this._orgValues=l),this._state=b.RowState.UPDATED,i&&r._stateChanged(this,!1)):r._needRestore&&this.$_restoreState(r)}};var a,l=n;function n(t,e){var i=a.call(this,t)||this;if(i._iconIndex=-1,i._hasChildren=!1,i._parent=null,i._values=null,i._orgValues=null,i._state=b.RowState.NONE,t&&e){var o=t.fieldCount;i._values=new Array(o);for(var n=0,r=Math.min(e.length,o);n<r;n++)i._values[n]=t.getField(n).readValue(e[n])}return i}e.TreeDataRowImpl=l;o=St.TreeDataProvider,ne.__extends(r,o),r.prototype._doDispose=function(){this._commands=this._commands&&this._commands.dispose(),this._points=null,this._rootRow=null,this._rowMap=null,this._tags=null,this._hiddenRows=null,o.prototype._doDispose.call(this)},_dp(r,"rootRow",{get:function(){return this._rootRow}}),_dp(r,"parentCallback",{get:function(){return this._parentCallback},set:function(t){this._parentCallback=t}}),_dp(r,"needOrgValues",{get:function(){return this._needOrgValues}}),_dp(r,"needRestore",{get:function(){return this._needRestore}}),_dp(r,"undoable",{get:function(){return this._undoable&&!!this._commands},set:function(t){t!=this.undoable&&(this._undoable=t,this._commands)&&this._commands.flush()}}),_dp(r,"handler",{get:function(){return this.$_handler}}),r.prototype.addTag=function(t){this._tags.add(t)},r.prototype.removeTag=function(t){this._tags.remove(t)},r.prototype.setRows=function(t,e,i,o,n){if(!this._checkClientState())return-1;var r=0,e=this.getFieldIndex(e);if(0<=e){this.beginUpdate();try{this._clearRows(),this.refreshFieldFormats();var s=new bt.ArrayTreeSource(this,this._rootRow);s.parentCallback=this._parentCallback,r=s.load(null,t,e,i,this.getFieldIndex(o),this.getFieldIndex(n)),this._checkSum(r),this.$_prepareMap()}finally{this.endUpdate(!1),this.clearCommandStack()}}return this._tags.setRows(),this._fireReset(),this._fireRowCountChanged(),this.fireDataLoadComplated(),r},r.prototype.setCsvRows=function(t,e,i,o,n){if(!this._checkClientState())return-1;var r=0,e=this.getFieldIndex(e);if(0<=e){this.beginUpdate();try{this._clearRows(),this.refreshFieldFormats();var s=new bt.CsvTreeSource(this,this._rootRow);s.parentCallback=this._parentCallback,r=s.load(null,t,e,i,this.getFieldIndex(o),this.getFieldIndex(n)),this._checkSum(r),this.$_prepareMap()}finally{this.endUpdate(!1),this.clearCommandStack()}}return this._tags.setRows(),this._fireReset(),this._fireRowCountChanged(),this.fireDataLoadComplated(),r},r.prototype.setXmlRows=function(t,e,i,o){if(!this._checkClientState())return-1;var n=0;if(t){this.beginUpdate();try{this._clearRows(),this.refreshFieldFormats();n=new bt.XmlTreeSource(this,this._rootRow).load(null,t,e,this.getFieldIndex(i),this.getFieldIndex(o));this._checkSum(n),this.$_prepareMap()}finally{this.endUpdate(!1),this.clearCommandStack()}}return this._tags.setRows(),this._fireReset(),this._fireRowCountChanged(),this.fireDataLoadComplated(),n},r.prototype.setJsonRows=function(t,e,i,o){if(!this._checkClientState())return-1;if(t){this.beginUpdate();try{this._clearRows(),this.refreshFieldFormats();var n=new bt.JsonTreeSource(this,this._rootRow);this._rowCount=n.load(null,t,e,this.getFieldIndex(i),this.getFieldIndex(o)),this.$_prepareMap()}finally{this.endUpdate(!1),this.clearCommandStack()}}return this._tags.setRows(),this._fireReset(),this._fireRowCountChanged(),this.fireDataLoadComplated(),this.rowCount},r.prototype.setJsonRows2=function(t,e,i,o,n){if(!this._checkClientState())return-1;if(t){this.beginUpdate();try{this._clearRows(),this.refreshFieldFormats();var r=new bt.JsonTreeSource(this,this._rootRow);this._rowCount=r.load2(null,t,e,i,o,n),this.$_prepareMap()}finally{this.endUpdate(!1),this.clearCommandStack()}}return this._tags.setRows(),this._fireReset(),this._fireRowCountChanged(),this.fireDataLoadComplated(),this.rowCount},r.prototype.appendDataRows=function(t,e,i,o,n,r){if(!this._checkClientState())return-1;var s=0,i=this.getFieldIndex(i);if(0<=i){var a=new bt.ArrayTreeSource(this,this._rootRow);a.parentCallback=this._parentCallback,this.beginUpdate();try{this.refreshFieldFormats(),s=a.load(t,e,i,o,this.getFieldIndex(n),this.getFieldIndex(r))}finally{this.endUpdate(!1),0<s&&(e=a.insertedRows)&&0<(s=e.length)&&this._rowsAdded(t,e)}}return s},r.prototype.appendCsvRows=function(t,e,i,o,n,r){if(!this._checkClientState())return-1;var s=0,i=this.getFieldIndex(i);if(0<=i){this.beginUpdate();try{this.refreshFieldFormats();var a=new bt.CsvTreeSource(this,this._rootRow);a.parentCallback=this._parentCallback,s=a.load(t,e,i,o,this.getFieldIndex(n),this.getFieldIndex(r))}finally{this.endUpdate(!1)}}return this._tags.setRows(),this._fireReset(),this._fireRowCountChanged(),s},r.prototype.appendXmlRows=function(t,e,i,o,n){if(!this._checkClientState())return-1;var r=0;if(e){var s=new bt.XmlTreeSource(this,this._rootRow);this.beginUpdate();try{this.refreshFieldFormats(),r=s.load(t,e,i,this.getFieldIndex(o),this.getFieldIndex(n))}finally{this.endUpdate(!1),0<r&&(e=s.insertedRows)&&0<(r=e.length)&&this._rowsAdded(t,e)}}return this._fireRowCountChanged(),r},r.prototype.appendJsonRows=function(t,e,i,o,n){if(!this._checkClientState())return-1;var r=0;if(e){var s=new bt.JsonTreeSource(this,this._rootRow);this.beginUpdate();try{this.refreshFieldFormats(),r=s.load(t,e,i,this.getFieldIndex(o),this.getFieldIndex(n))}finally{this.endUpdate(!1),0<r&&(e=s.insertedRows)&&0<(r=e.length)&&this._rowsAdded(t,e)}}return this._fireRowCountChanged(),r},r.prototype.setIconIndex=function(t,e){return t.iconIndex!=e&&(t.$_setIconIndex(e),!0)},r.prototype.setHasChildren=function(t,e){return e!=t.hasChildren&&(t.$_setHasChildren(e),!0)},r.prototype.getChildCount=function(t){return(t||this._rootRow).count},r.prototype.getRows=function(t){return(t||this._rootRow).children},r.prototype.getDescendantCount=function(t){return(t||this._rootRow).descendantCount},r.prototype.getDescendants=function(t,e){var t=t||this._rootRow;return(e=1<arguments.length?e:0)<=0?t.descendants:e>t.level?(function t(e,i,o){for(var n=0,r=e.count;n<r;n++){var s;i.push(s=e.getChild(n)),o>s.level&&t(s,i,o)}}(t,t=[],e),t):null},r.prototype.getChild=function(t,e){return(t||this._rootRow).getChild(e)},r.prototype.hasData=function(t){return null!=this.rowById(t)},r.prototype.rowById=function(t){var e=this._rowMap[t];return e&&e.rowId===t||(e=this._findRowById(t))&&(this._rowMap[t]=e),e},r.prototype.getDataRow=function(t){var e=this._rowMap[t];return null!=(e=null==e?this._findRowById(t):e)?t:-1},r.prototype.rowsByIds=function(t,e){if(t){for(var i=[],o=0,n=t;o<n.length;o++){var r=n[o],r=this.rowById(r);(r||e)&&i.push(r)}return i}return null},r.prototype.createRow=function(t,e,i,o){var n=null;if((o=void 0===o?!0:o)&&this.refreshFieldFormats(),Array.isArray(t))n=new l(this,t);else if(t){var r,s=new Array(this.fieldCount);for(r in t){var a=this.getFieldIndex(r);0<=a&&(s[a]=t[r])}n=new l(this,s)}return n&&(this._internalCalculateValues(n._values,n.rowId),n._iconIndex=e,n._hasChildren=i),n},r.prototype.clearRows=function(){this._checkClientState()&&(this._clearRows(),this.clearCommandStack(),this._eventLock<=0)&&(this._fireRefresh(),this._fireRowCountChanged(),this.fireDataLoadComplated())},r.prototype.removeRows=function(t){for(var o=[],e=t.length;e--;)(r=this.rowById(t[e]))&&o.push(r);if(this._checkClientState()&&o&&!(o.length<1)){o.sort(function(t,e){return t.level-e.level});for(var i=o,e=o.length;e--;)1<o[e].level&&!function(t,e){for(var i=e;0<=i;i--)if(o[i].isAncestorOf(t))return;return 1}(o[e],e-1)&&o.splice(e,1);if(o.length<1||!this._rowsRemoving(o))return!1;if(this.softDeleting&&this.checkStates){for(var n=[],e=o.length-1;0<=e;e--){var r,s=!1;switch((r=o[e]).rowState){case b.RowState.CREATED:this.deleteCreated||(s=r._changeRowState(b.RowState.CREATE_AND_DELETED,!1,!1),o.splice(e,1));break;case b.RowState.DELETED:case b.RowState.CREATE_AND_DELETED:o.splice(e,1);break;default:s=r._changeRowState(b.RowState.DELETED,!0,!1),o.splice(e,1)}s&&n.push(r)}0<n.length&&this._fireRowStatesChanged(n)}return this.deleteRows(i),!0}},r.prototype.changeRowIndex=function(t,e){var i,o,n;return 0!=e&&!!this._checkClientState()&&(n=(i=t.parent).children.length,o=t.index,0!=(e=(n=Math.min(Math.max(o+e,0),n-1))-o))&&!!this._fireRowSiblingMoving(t,e)&&(i._moveChild(o,n),this._fireRowSiblingMoved(t,e),!0)},r.prototype.changeRowsIndex=function(t,e){if(0==e)return!1;if(!this._checkClientState())return!1;var i=t[0].parent,o=i.children.length,n=t[0].index,o=Math.min(Math.max(n+e,0),o-1);if(0==(e=o-n))return!1;for(var r=[],s=0,a=t;s<a.length;s++){var l=a[s];r.push(l.index)}return!!this._fireRowsSiblingMoving(t,e)&&(i._moveChildren(r,o),this._fireRowsSiblingMoved(t,e),!0)},r.prototype.changeRowParent=function(t,e,i){if(t===e)throw new Error("Parent must not be self.");if(t.isAncestorOf(e))throw new Error("Can`t move to child of a descendant.");var o=t.parent;if(o===e&&i==t.index)return!1;if(!this._checkClientState())return!1;e._children||(e._children=[]);var n=e._children.length;return i=Math.min(Math.max(i,0),n),!!this._fireRowParentChanging(t,e,i)&&(t._changeParent(e,i),e instanceof St.RootTreeRow||this.setHasChildren(e,!0),o instanceof St.RootTreeRow||0!=o.count||this.setHasChildren(o,!1),this._fireRowParentChanged(t,e,i),!0)},r.prototype.moveRows=function(t,e){return this.changeRowsIndex(t,e.index-t[0].index)},r.prototype.toTreeString=function(){return this._rootRow.toTreeString()},r.prototype.beginUpdate=function(){this._checkClientState(),this._eventLock++},r.prototype.endUpdate=function(t){void 0===t&&(t=!0),this._checkClientState(),this._eventLock=Math.max(0,this._eventLock-1),0==this._eventLock&&(t&&(0<this._resetLock?this._fireReset():this._fireRefresh(),this._countDirty)&&this._fireRowCountChanged(),this._resetLock=0,this._countDirty=!1)},r.prototype.$_extractTreeRowIds=function(t){if(t){for(var e=t.length,i=new Array(e),o=0;o<e;o++)i[o]=t[o].rowId;return i}return null},r.prototype.$_searchDataRow=function(t,e,i,o,n,r){var s=t.length;if(!(s<1)){var a=Math.min(e.length,i.length);if(!(a<1)){for(var l=!o||o.allFields,h=o&&o.caseSensitive,d=o&&o.partialMatch,u=null,c=[],_=o.compareCallback||re.Utils.compareTextValue,p=0;p<a;p++)c[p]=this.getField(e[p]).dataType;n=Math.max(0,n),r=Math.min(s-1,r);for(var f=n;f<=r;f++){if(v=!0)for(p=0;p<a;p++){var g=this.rowById(t[f]).getValue(e[p]),m=this.getOrgFieldName(e[p]);switch(c[p]){case ht.ValueType.DATETIME:case ht.ValueType.DATE:var y,v=i[p]instanceof Date?_.call(this.$_handler,i[p],g,h,d,t[f],m):(u||(y=/[.]/.test(i[p])?"yyyy.MM.dd":/[/]/.test(i[p])?"yyyy/MM/dd":/[-]/.test(i[p])?"yyyy-MM-dd":"yyyyMMdd",u=new dt.DateTimeConverter(y)),_.call(this.$_handler,i[p],g&&u.getText(g),h,d,t[f],m));break;default:v=_.call(this.$_handler,i[p],g,h,d,t[f],m)}if(v&&!l)return t[f];if(!v&&l)break}if(v)return t[f]}}}return-1},r.prototype.searchDataRow=function(t,e){var i;if(void 0===e&&(e=null),t instanceof w.SearchOptions||(t=new w.SearchOptions(t)),null!=e){e=this.rowById(e);if(!e)return-1;i=this.$_extractTreeRowIds(e.descendants)}else i=this.$_extractTreeRowIds(this._rootRow.descendants);if(!Array.isArray(i)||i.length<=0)return-1;var e=i.length,o=Math.max(0,i.indexOf(t.startIndex)),n=t.fields,r=t.values,s=-1;if(n&&0<n.length&&r&&0<r.length){for(var a=n.length,l=[],h=0;h<a;h++){var d=n[h];re.Utils.isNumber(d)?l.push(d):0<=(d=this.getFieldIndex(n[h]))&&l.push(d)}0<l.length&&(s=o<e?this.$_searchDataRow(i,l,r,t,o,e-1):-1)<0&&t.wrap&&0<o&&(s=this.$_searchDataRow(i,l,r,t,0,o-1))}return s},r.prototype.$_searchData=function(t,e,i,o,n,r,s){var a=this.rowCount;if(!(a<1)){for(var l=o&&o.caseSensitive,h=o&&o.partialMatch,d=this.fieldCount,u=e.length,c=null,_=[],p=o.compareCallback||re.Utils.compareTextValue,f=0;f<d;f++)_[f]=this.getField(f).dataType;n=Math.max(0,n),r=Math.min(a-1,r),(s=Math.max(0,s))>=e.length&&(n++,s=0);for(var g=n;g<=r;g++)for(f=n<g?0:s;f<u;f++){var m=!1,y=e[f],v=this.getOrgFieldName(e[f]);if(0<=y&&y<d){var C=this.rowById(t[g]).getValue(y);switch(_[y]){case ht.ValueType.DATETIME:case ht.ValueType.DATE:var w,m=i instanceof Date?p.call(this.$_handler,i,C,l,h,t[g],v):(c||(w=/[.]/.test(i)?"yyyy.MM.dd":/[/]/.test(i)?"yyyy/MM/dd":/[-]/.test(i)?"yyyy-MM-dd":"yyyyMMdd",c=new dt.DateTimeConverter(w)),p.call(this.$_handler,i,C&&c.getText(C),l,h,t[g],v));break;default:m=p.call(this.$_handler,i,C,l,h,t[g],v)}if(m)return{dataRow:t[g],fieldIndex:y,searchFieldIndex:f,fieldName:v}}}}return null},r.prototype.searchData=function(t,e){var i;if(void 0===e&&(e=-1),t instanceof w.SearchCellOptions||(t=new w.SearchCellOptions(t)),0<=e){e=this.rowById(e);if(!e)return null;i=this.$_extractTreeRowIds(e.descendants)}else i=this.$_extractTreeRowIds(this._rootRow.descendants);if(!Array.isArray(i)||i.length<=0)return null;var e=i.length,o=null,n=t.fields,r=t.value,s=Math.max(0,t.startFieldIndex),a=Math.max(0,i.indexOf(t.startIndex));if(!n||n.length<1)for(var n=[],l=this.getFields(),h=0;h<l.length;h++)n.push(l[h].orgFieldName);if(n&&0<n.length&&null!=r){for(var d=n.length,u=[],c=0;c<d;c++){var _=n[c];re.Utils.isNumber(_)?u.push(_):u.push(this.getFieldIndex(n[c]))}0<u.length&&!(o=a<e?this.$_searchData(i,u,r,t,a,e-1,s):null)&&t.wrap&&0<a&&(o=this.$_searchData(i,u,r,t,0,a-1,0))}return o},r.prototype.$_hideDataRows=function(t,e){if(null!=t){for(var i=re.Utils.isArray(t)?t:[t],t=this._hiddenRows.length,o=[],n=0,r=i.length;n<r;n++){var s=i[n];null!=this._findRowById(s)&&(o.push(s),e?this._hiddenRows.indexOf(s)<0&&this._hiddenRows.push(s):0<=(s=this._hiddenRows.indexOf(s))&&this._hiddenRows.splice(s,1))}this._hiddenRows.length!==t&&this._fireRowsHiddenChanged(o,e)}},r.prototype.hideRows=function(t){this.$_hideDataRows(t,!0)},r.prototype.showRows=function(t){this.$_hideDataRows(t,!1)},r.prototype.clearHiddenRows=function(){var t;0<this._hiddenRows.length&&(t=this._hiddenRows.concat(),this._hiddenRows=[],this._fireRowsHiddenChanged(t,!1))},r.prototype.getHiddenRows=function(){var t=this._hiddenRows.concat();return t.sort(function(t,e){return t-e}),t},r.prototype.isHiddenRow=function(t){return!!this.rowById(t)&&0<=this._hiddenRows.indexOf(t)},_dp(r,"hiddenCount",{get:function(){return this._hiddenRows.length}}),r.prototype.summarize=function(t,e){if(null==t)return!1;t.clear();var i=this.rowCount;return!(i<1||(t.count=i,t.sum=0,t.min=null,t.max=null,t.dataCount=0,this.$_summarizeChildren(this._rootRow,t),t.avg=t.sum/t.count,t.dataAvg=0===t.dataCount?NaN:t.sum/t.dataCount,e&&(i=this.$_summarizeVars(this._rootRow,t),t.varsp=i/t.count,t.vars=i/(t.count-1)),0))},r.prototype.summarizeRange=function(t,e,i){if(null==t||null==e)return!1;t.clear();var o=e.length;if(o<1)return!1;for(var n=0,r=t.field,s=this.getField(r).dataType===ht.ValueType.NUMBER,a=null,l=null,h=null,d=0;d<o;)null==(p=e[d++].getValue(r))||s&&isNaN(p)||(s&&(a=n?a+p:p),!s&&""==p||n++,(null==l||p<l)&&(l=p),(null==h||h<p)&&(h=p));if(t.count=o,0<n&&(l=null!=l?l:s?NaN:null,h=null!=h?h:s?NaN:null,t.sum=a=null!=a?a:s?NaN:null,t.min=l,t.max=h,t.avg=a/o,t.dataCount=n,t.dataAvg=0===t.dataCount?NaN:t.sum/t.dataCount,i))if(1<o){for(var u=0,c=t.avg,_=0;_<o;_++){var p=e[_].getValue(r);isNaN(p)||(u+=Math.pow(p-c,2))}t.varsp=u/o,t.vars=u/(o-1)}else t.varsp=0,t.vars=0;return!0},_dp(r,"rowCount",{get:function(){return this._rootRow.descendantCount}}),_dp(r,"immediateUpdate",{get:function(){return!0}}),_dp(r,"isSummarized",{get:function(){return!0}}),_dp(r,"canUndo",{get:function(){return this._commands&&this._commands.canUndo}}),_dp(r,"canRedo",{get:function(){return this._commands&&this._commands.canRedo}}),_dp(r,"undoing",{get:function(){return this._commands&&this._commands.undoing}}),_dp(r,"redoing",{get:function(){return this._commands&&this._commands.redoing}}),r.prototype.getRow=function(t){return this.rowById(t).values},r.prototype.deleteRows=function(t){if(this._checkClientState()&&t&&0<t.length){var e=this._softDeleting;this.beginUpdate();try{this._softDeleting=!1,this._tagLock=!0;try{for(var i=t.length-1;0<=i;i--){var o=t[i],n=o&&o.parent;n&&n._removeChild(o,!0)}}finally{this._tagLock=!1}}finally{this._softDeleting=e,this.endUpdate(!1)}this._rowsRemoved(t)}},r.prototype.equalValues=function(t,e,i){var o;return e===i||(o=this._fields[t],e=e.getValue(t),i=i.getValue(t),o.equalValues(e,i))},r.prototype.sameValues=function(t,e,i,o){var n;return e===i||(n=this._fields[t],e=e.getValue(t),i=i.getValue(t),o?String(e).toLowerCase()==String(i).toLowerCase():n.sameValues(e,i))},r.prototype.equalTexts=function(t,e,i){return this.sameValues(t,e,i,!0)},r.prototype.compareValues=function(t,e,i,o){return e!==i?(e=e.getValue(t),i=i.getValue(t),null==e?null==i?0:-1:null==i||(e=o?String(e).toLowerCase():e,(i=o?String(i).toLowerCase():i)<e)?1:e<i?-1:0):0},r.prototype.compareTexts=function(t,e,i){return this.compareValues(t,e,i,!0)},r.prototype.compareNumbers=function(t,e,i){return e!==i?(e=e.getValue(t),i=i.getValue(t),isNaN(e)?isNaN(i)?0:-1:isNaN(i)||i<e?1:e<i?-1:0):0},r.prototype.compareBools=function(t,e,i){return e!==i?(e=e.getValue(t),i=i.getValue(t),e&&!i?1:!e&&i?-1:0):0},r.prototype.compareDates=function(t,e,i){return e!==i?(e=e.getValue(t),i=i.getValue(t),e instanceof Date?!(i instanceof Date)||i<e?1:e<i?-1:0:i instanceof Date?-1:0):0},r.prototype.compareObjects=function(t,e,i){var o=e.values,n=i.values;return o===n?0:(o=o?o[t]:null,n=n?n[t]:null,o?n?this.getField(t).$_compareObject(o,n,e.rowId,i.rowId):1:n?-1:0)},r.prototype.getDistinctValues=function(t,e,i){if(void 0===e&&(e=-1),void 0===i&&(i=ht.SortDirection.ASCENDING),this._checkFieldIndex(t),0<(e=e<0?this.getDescendantCount(this._rootRow):e)){for(var o=this.getDescendants(this._rootRow,0),n=this.getField(t).dataType,r=[],s=[],a=void 0,l=0,h=o.length;l<h;l++)switch(a=o[l].values[t],n){case ht.ValueType.NUMBER:null!=a&&isNaN(a)||r.indexOf(a)<0&&r.push(a);break;case ht.ValueType.DATE:case ht.ValueType.DATETIME:a?s.indexOf(a.getTime())<0&&(s.push(a.getTime()),r.push(a)):(s.push(a),r.push(a));break;default:ht.ValueType.OBJECT;r.indexOf(a)<0&&r.push(a)}return(r=i!==ht.SortDirection.NONE&&(r=re.Utils.included(n,ht.ValueType.DATETIME,ht.ValueType.DATE)?r.sort(function(t,e){return t-e}):r.sort(),i===ht.SortDirection.DESCENDING)?r.reverse():r).slice(0,e)}return null},r.prototype._doFieldsReset=function(){o.prototype._doFieldsReset.call(this),this._clearRows(),this._fireReset()},r.prototype.refreshClients=function(){this._fireRefreshClient()},r.prototype.savePoint=function(t){var e,i;if(void 0===t&&(t=!0),this._checkClientState())return 0<this.fieldCount&&0<this._rootRow.count?(e=this._rootRow.copy(),i=this._nextPoint++,t||e.clearRowStates(!1,!1),this._points.push({id:i,nextRowId:this._nextRowId,data:e}),i):-1},r.prototype.rollback=function(t){if(void 0===t&&(t=0),this._checkClientState())for(var e=this._points.length-1;0<=e;e--){var i=this._points[e];if(i.id==t){this.$_removeSavePoints(e+1),this._rowMap=[],this._rootRow.set(i.data),this._nextRowId=i.nextRowId,this.$_prepareMap(),this._fireReset();break}}},r.prototype.$_removeSavePoints=function(t){for(var e=this._points,i=e.length-1;t<=i;i--)e[i].data=null,e.pop()},r.prototype.clearSavePoints=function(){this.$_removeSavePoints(0)},r.prototype.getSavePoints=function(){for(var t=[],e=0,i=this._points.length;e<i;e++)t.push(this._points[e].id);return t},r.prototype._doCheckStatesChanged=function(){this.$_resetOrgValues()},r.prototype._doRestoreModeChanged=function(){this.$_resetOrgValues()},r.prototype._hasChildrenChanged=function(t){this._fireHasChildrenChanged(t)},r.prototype._iconIndexChanged=function(t){this._fireIconIndexChanged(t)},r.prototype._stateChanged=function(t,e){this._fireRowStateChanged(t,e)},r.prototype._statesChanged=function(t){this._fireRowStatesChanged(t)},r.prototype._valueChanged=function(t,e){this._fireValueChanged(t,e)},r.prototype._rowAdding=function(t,e,i){return this._fireRowAdding(t,e,i)},r.prototype._rowAdded=function(t){this._tagLock||this._tags.addRow(t),this._eventLock<=0&&(this._fireRowAdded(t),this._fireRowCountChanged())},r.prototype._rowsAdding=function(t,e,i){return this._fireRowsAdding(t,e,i)},r.prototype._rowsAdded=function(t,e){this._tagLock||this._tags.addRows(e),this._eventLock<=0&&(this._fireRowsAdded(t,e),this._fireRowCountChanged())},r.prototype._rowRemoving=function(t){return this._fireRowRemoving(t)},r.prototype._rowRemoved=function(t){this._tagLock||this._tags.removeRow(t),this._eventLock<=0&&(this._fireRowRemoved(t),this._fireRowCountChanged()),this.$_removeMap(t)},r.prototype._rowsRemoving=function(t){return this._fireRowsRemoving(t)},r.prototype._rowsRemoved=function(t){this._tagLock||this._tags.removeRows(t),this._eventLock<=0&&(this._fireRowsRemoved(t),this._fireRowCountChanged()),this.$_removeMap(t)},r.prototype._rowCleared=function(t){t&&(t=t.children,this._tags.removeRows(t),this._eventLock<=0)&&(this._fireRowsRemoved(t),this._fireRowCountChanged())},r.prototype._rowUpdating=function(t){return this._fireRowUpdating(t)},r.prototype._rowUpdated=function(t){this._tags.updateRow(t),this._eventLock<=0&&this._fireRowUpdated(t)},r.prototype._rowsUpdating=function(t){return this._fireRowsUpdating(t)},r.prototype._rowsUpdated=function(t){this._tags.updateRows(t),this._eventLock<=0&&this._fireRowsUpdated(t)},r.prototype.getRowId=function(t){return t},r.prototype.getValue=function(t,e){t=this.rowById(t);if(t)return t.getValue(e)},r.prototype.setValue=function(t,e,i){t=this.rowById(t);if(t)return t.setValue(e,i,!1)},r.prototype.getRowObject=function(t){var t=this.rowById(t),e=this.fieldCount,i={},o=t._values;if(o)for(var n=0;n<e;n++)i[this.getOrgFieldName(n)]=o[n];return i},r.prototype.getRowState=function(t){t=this.rowById(t);return t?t.rowState:b.RowState.NONE},r.prototype.setRowState=function(t,e,i){t=this.rowById(t);t&&(this.checkStates||i)&&e!=(i=t.rowState)&&t._changeRowState(e,!0,!!b.isDeletedState(i)||void 0)},r.prototype.changeRowStates=function(t,e){for(var i=t.length,o=[],n=0;n<i;n++){var r=t[n];r._changeRowState(e,!1,!1)&&o.push(r)}0<o.length&&this._fireRowStatesChanged(o)},r.prototype.clearRowStates=function(t,e){this._checkClientState()&&this._rootRow.clearRowStates(t,e)},r.prototype.$_collectStateRows=function(t,e,i){for(var o=0,n=t.count;o<n;o++){var r=t.getChild(o);r.rowState==e&&i.push(r.rowId),this.$_collectStateRows(r,e,i)}},r.prototype.getStateRows=function(t){var e=[];return this.$_collectStateRows(this._rootRow,t,e),e},r.prototype.$_collectAllStateRows=function(t,e){for(var i=0,o=t.count;i<o;i++){var n=t.getChild(i);switch(n.rowState){case b.RowState.CREATED:case b.RowState.UPDATED:case b.RowState.DELETED:case b.RowState.CREATE_AND_DELETED:e[n.rowState].push(n.rowId)}this.$_collectAllStateRows(n,e)}},r.prototype.getAllStateRows=function(){var t={};return t[b.RowState.CREATED]=[],t[b.RowState.UPDATED]=[],t[b.RowState.DELETED]=[],t[b.RowState.CREATE_AND_DELETED]=[],this.$_collectAllStateRows(this._rootRow,t),t},r.prototype.setRowStates=function(t,e,i,o){if(this._checkClientState()){for(var n=o?null:[],r=0,s=t.length;r<s;r++){var a=this.rowById(t[r]);a&&(this.checkStates||i)&&a._changeRowState(e,o,!1)&&!o&&n.push(a)}!o&&0<n.length&&this._fireRowStatesChanged(n)}},r.prototype.$_getRowStateCount=function(t,e){for(var i=0,o=0,n=t.count;o<n;o++){var r=t.getChild(o);0<=e.indexOf(r.rowState)&&i++,i+=this.$_getRowStateCount(r,e)}return i},r.prototype.getRowStateCount=function(t){return this.$_getRowStateCount(this._rootRow,t)},r.prototype.restoreUpdatedStates=function(t){this.restoreUpdatedRows(t)},r.prototype.restoreUpdatedRows=function(t){if(this._checkClientState()){var e=[];if(null==t)this._rootRow.$_restoreRow(!0,e);else for(var i=t.length;i--;){var o=this.rowById(t[i]);o&&o.$_restoreRow(!1,e)}1==e.length?this._fireRowStateChanged(e[0],!1):1<e.length&&this._fireRowStatesChanged(e)}},r.prototype.getUpdatedCells=function(t){var e=this.restoreMode;if(e!=f.RestoreMode.AUTO&&e!=f.RestoreMode.EXPLICIT)return null;if(null==t)t=this.getStateRows(b.RowState.UPDATED);else if(!Array.isArray(t)){if("number"!=typeof t)return null;t=[t]}if(!Array.isArray(t))return null;for(var i=[],o=0,n=t.length;o<n;o++){var r,s=this.rowById(t[o]);s&&(r=s.$_getUpdatedCells())&&0<r.length&&i.push({__rowId:s.rowId,updatedCells:r})}return i},r.prototype.canUpdateRow=function(t){return!0},r.prototype.canInsertRow=function(t){return!0},r.prototype.canDeleteRow=function(t){return!0},r.prototype.isDataChanged=function(t,e){var i;return!(t<0)&&((t=this.rowById(t))||re.Utils.isDebugging(),i=t._orgValues,!(t.rowState!==b.RowState.UPDATED||!i))&&!!i&&(i=i[e],t=t._values[e],e=this._fields[e])&&!e.sameValues(i,t)},r.prototype.$_createFrom=function(t,e){for(var i=t.getObject(),i=(e&&(i=this._convertValues(i,e)),this.objectToRow(i)),o=new l(this,i),n=0;n<t.count;n++){var r=this.$_createFrom(t.getChild(n),e);o.addChild(r,!1)}return o},r.prototype.$_insertRowsFrom=function(t,e,i,o){for(var n=[],r=0,s=t.rowsByIds(i,!1);r<s.length;r++){var a=s[r];n.push(this.$_createFrom(a,e))}t=0<=o?this.rowById(o):null,i=t?t.parent:this.rootRow;0<=o?(o=i.indexOf(t),i.insertChildren(o,n,!1)):i.insertChildren(i.count,n,!1)},r.prototype.insertChildNode=function(t,e,i,o,n,r){var s=re.Utils.getNumber(i[n],-1),a=i[o],l=this.createRow(i,s,a&&0<a.length);if(0<=e?t.insertChild(e,l,r):t.addChild(l,r),a)for(var h=0;h<a.length;h++)this.insertChildNode(l,-1,a[h],o,n,r);return l?l.rowId:-1},r.prototype.insertRowsFrom=function(t,e,i,o){this.$_insertRowsFrom(t,e,i,o)},r.prototype.appendRowsFrom=function(t,e,i){this.$_insertRowsFrom(t,e,i,-1)},r.prototype.fillValue=function(t,e){Object.keys(t).length&&(this.undoable?this._commands.execute(new Rt.FillValueTreeDataCommand(this,t,e)):this.$_fillValue(t,e))},r.prototype.updateRows=function(t,e,i){if(t&&0!=t.length){for(var o=[],n=0;n<t.length;n++){var r=this.rowById(t[n]);r?o.push(r):e.splice(n,1)}this.undoable?this._commands.execute(new Tt.UpdateRowsTreeDataCommand(this,o,e,i)):this.$_updateRows(o,e,i)}},r.prototype._findRowById=function(t){return this._rootRow.findById(t)},r.prototype._checkSum=function(t){if(t!=this.rowCount)throw new Error("Invalid row count: "+t+" <> "+this.rowCount)},r.prototype._clearRows=function(){this._rootRow._removeChildren(),this._rowMap=[],this._rootRow&&0<this._rootRow.descendantCount||(this._nextRowId=1),this._tags.clearRows(),this._checkSum(0)},r.prototype.$_prepareMap=function(){var i=this;!function e(t){t=t.children;t&&t.forEach(function(t){e(i._rowMap[t.rowId]=t)})}(this._rootRow)},r.prototype.$_removeMap=function(t){var e=this;(t=re.Utils.makeArray(t,!0)).forEach(function(t){e._rowMap[t.rowId]=void 0,e.$_removeMap(t.children),t.dispose()})},r.prototype.$_fillValue=function(t,e){if(this._checkClientState()){var i=Object.keys(t);if(i&&i.length){this.refreshFieldFormats();var o,n=[],r=[];for(o in t){for(var s=this.rowById(+o),a=(r.push(s),s.rowState==b.RowState.NONE&&n.push(s),s.values),l=t[o],h=0;h<l.length;h++)a[l[h]]=e;s.$_internalUpdate(a,!1,!1)}0<n.length&&this._fireRowStatesChanged(n),this._tags.updateRows(r),this._fireRowsUpdated(r)}}},r.prototype.$_updateRows=function(t,e,i){if(this._checkClientState()&&t&&e){var o=Math.min(t.length,e.length);if(!(o<1)){this.refreshFieldFormats();for(var n=[],r=0;r<o;r++){var s=t[r];s.rowState==b.RowState.NONE&&n.push(s),s.$_internalUpdate(e[r],i,!1)}0<n.length&&this._fireRowStatesChanged(n),this._tags.updateRows(t),this._fireRowsUpdated(t)}}},r.prototype.findRow=function(t,e){return t&&0<t.length&&e&&e.length>=t.length?this._rootRow.findChild(t,e):null},r.prototype.$_resetOrgValues=function(){this._needOrgValues=this.checkStates&&this.restoreMode!=f.RestoreMode.NONE,this._needRestore=this._needOrgValues&&this.restoreMode==f.RestoreMode.AUTO,this._rootRow._clearOrgValues()},r.prototype.$_summarizeChildren=function(t,e){for(var i=e.field,o=t.count,n=this.getField(e.field).dataType===ht.ValueType.NUMBER,r=0;r<o;r++){var s=t.getChild(r),a=s.getValue(i);null==a||n&&isNaN(a)||(n&&(e.sum=e.dataCount?e.sum+a:a),!n&&""==a||e.dataCount++,(null==e.min||a<e.min)&&(e.min=a),(null==e.max||a>e.max)&&(e.max=a)),this.$_summarizeChildren(s,e)}},r.prototype.$_summarizeVars=function(t,e){for(var i=e.field,o=e.avg,n=t.count,r=0,s=0;s<n;s++){var a=t.getChild(s),l=a.getValue(i);isNaN(l)||(r+=Math.pow(l-o,2)),r+=this.$_summarizeVars(a,e)}return r},r.prototype._fireDisposed=function(){this._eventLock<=0&&this.fireEvent("onTreeDataProviderDisposed")},r.prototype._fireReset=function(){this._eventLock<=0&&this.fireEvent("onTreeDataProviderReset")},r.prototype._fireRefresh=function(){this._eventLock<=0&&this.fireEvent("onTreeDataProviderRefresh")},r.prototype._fireRefreshClient=function(){this._eventLock<=0&&this.fireEvent("onTreeDataProviderRefreshClient")},r.prototype._fireCleared=function(){this._eventLock<=0&&this.fireEvent("onTreeDataProviderCleared")},r.prototype._fireRowCountChanged=function(){this._eventLock<=0&&this.fireEvent("onTreeDataProviderRowCountChanged",this.rowCount)},r.prototype._fireRowAdding=function(t,e,i){return!(this._eventLock<=0)||this.fireConfirmEvent("onTreeDataProviderRowAdding",t,e,i)},r.prototype._fireRowAdded=function(t){this._eventLock<=0&&this.fireEvent("onTreeDataProviderRowAdded",t)},r.prototype._fireRowsAdding=function(t,e,i){return!(this._eventLock<=0)||this.fireConfirmEvent("onTreeDataProviderRowsAdding",t,e,i)},r.prototype._fireRowsAdded=function(t,e){this._eventLock<=0&&this.fireEvent("onTreeDataProviderRowsAdded",t,e)},r.prototype._fireRowRemoving=function(t){return!(this._eventLock<=0)||this.fireConfirmEvent("onTreeDataProviderRowRemoving",t)},r.prototype._fireRowRemoved=function(t){this._eventLock<=0&&this.fireEvent("onTreeDataProviderRowRemoved",t)},r.prototype._fireRowsRemoving=function(t){return!(this._eventLock<=0)||this.fireConfirmEvent("onTreeDataProviderRowsRemoving",t)},r.prototype._fireRowsRemoved=function(t){this._eventLock<=0&&this.fireEvent("onTreeDataProviderRowsRemoved",t)},r.prototype._fireRowUpdating=function(t){return!(this._eventLock<=0)||this.fireConfirmEvent("onTreeDataProviderRowUpdating",t)},r.prototype._fireRowUpdated=function(t){this._eventLock<=0&&this.fireEvent("onTreeDataProviderRowUpdated",t)},r.prototype._fireRowsUpdating=function(t){return!(this._eventLock<=0)||this.fireConfirmEvent("onTreeDataProviderRowsUpdating",t)},r.prototype._fireRowsUpdated=function(t){this._eventLock<=0&&this.fireEvent("onTreeDataProviderRowsUpdated",t)},r.prototype._fireValueChanging=function(t,e,i){return!(this._eventLock<=0)||this.fireConfirmEvent("onTreeDataProviderValueChanging",t,e,i)},r.prototype._fireValueChanged=function(t,e){this._eventLock<=0&&this.fireEvent("onTreeDataProviderValueChanged",t,e)},r.prototype._fireIconIndexChanged=function(t){this._eventLock<=0&&this.fireEvent("onTreeDataProviderIconIndexChanged",t)},r.prototype._fireHasChildrenChanged=function(t){this._eventLock<=0&&this.fireEvent("onTreeDataProviderHasChildrenChanged",t)},r.prototype._fireRowStateChanged=function(t,e){this._eventLock<=0&&this.fireEvent("onTreeDataProviderRowStateChanged",t,e)},r.prototype._fireRowStatesChanged=function(t){this._eventLock<=0&&this.fireEvent("onTreeDataProviderRowStatesChanged",t)},r.prototype._fireRowSiblingMoving=function(t,e){return!(this._eventLock<=0)||this.fireConfirmEvent("onTreeDataProviderRowSiblingMoving",t,e)},r.prototype._fireRowSiblingMoved=function(t,e){this._eventLock<=0&&this.fireEvent("onTreeDataProviderRowSiblingMoved",t,e)},r.prototype._fireRowsSiblingMoving=function(t,e){return!(this._eventLock<=0)||this.fireConfirmEvent("onTreeDataProviderRowsSiblingMoving",t,e)},r.prototype._fireRowsSiblingMoved=function(t,e){this._eventLock<=0&&this.fireEvent("onTreeDataProviderRowsSiblingMoved",t,e)},r.prototype._fireRowParentChanging=function(t,e,i){return!(this._eventLock<=0)||this.fireConfirmEvent("onTreeDataProviderRowParentChanging",t,e,i)},r.prototype._fireRowParentChanged=function(t,e,i){this._eventLock<=0&&this.fireEvent("onTreeDataProviderRowParentChanged",t,e,i)},r.prototype._fireRowsParentChanging=function(t,e,i){return!(this._eventLock<=0)||this.fireConfirmEvent("onTreeDataProviderRowsParentChanging",t,e,i)},r.prototype._fireRowsParentChanged=function(t,e,i){this._eventLock<=0&&this.fireEvent("onTreeDataProviderRowsParentChanged",t,e,i)},r.prototype._fireRowsHiddenChanged=function(t,e){this._eventLock<=0&&this.fireEvent("onTreeDataProviderRowsHideChanged",t,e)},r.prototype.fireDataLoadComplated=function(){this._eventLock<=0&&this.fireEvent("onTreeDataProviderDataLoadComplated")},r.prototype.undo=function(){this.canUndo&&this._commands.undo()},r.prototype.redo=function(){this.canRedo&&this._commands.redo(!0)},r.prototype.clearCommandStack=function(){this._commands&&this._commands.flush()};var o,i=r;function r(t,e){var i=o.call(this)||this;return i._countDirty=!1,i._tagLock=!1,i._points=[],i._nextPoint=0,i._rowMap=[],i._needOrgValues=!1,i._needRestore=!1,i._checkParentProc=null,i._hiddenRows=[],i.$_handler=e,t&&(i._commands=new It.LocalTreeDataCommandStack(i)),i._rootRow=new St.RootTreeRow(i),i._tags=new xt.TreeDataTagCollection(i),i}e.LocalTreeDataProvider=i})),Mt=(t(kt),kt.TreeDataRowImpl,kt.LocalTreeDataProvider,e(function(t,e){Object.defineProperty(e,"__esModule",{value:!0});i=se.Base,ne.__extends(n,i),n.prototype._doDispose=function(){i.prototype._doDispose.call(this)},n.prototype.load=function(t,e,i){var o=new y.DataFillOptions(i);if(!this.$_checkEmpty(e,o))switch(this.$_prepareLoad(o),t=t&&t.toLowerCase()){case"json":return this.$_loadJson(e,o);case"xml":return this.$_loadXml(e,o);case"csv":return this.$_loadCsv(e,o)}return 0},n.prototype.$_loadJson=function(t,e){var i,o,n;return(t="string"==typeof t?JSON.parse(t):t)?(i=e.childrenField,o=e.iconField,e.fillMode==y.DataFillMode.APPEND?(n=this._ds.rowById(e.parentId),this._ds.appendJsonRows(n,t,e.rows,i,o)):this._ds.setJsonRows(t,e.rows,i,o)):0},n.prototype.$_loadXml=function(t,e){var i,o,n;return(t="string"==typeof t?ut.XmlUtils.parseXml(t):t)&&t.documentElement?(i=e.childrenField,o=e.iconField,e.fillMode==y.DataFillMode.APPEND?(n=this._ds.rowById(e.parentId),this._ds.appendXmlRows(n,t,e.rows,i,o)):this._ds.setXmlRows(t,e.rows,i,o)):0},n.prototype.$_loadCsv=function(t,e){var i=e.start,o=e.count,n=e.quoted,r=e.delimiter,t=Q.DataHelper.csvToArray(this._ds,t,i,o,n,r);return t&&0<t.length?(i=e.treeField,o=e.childrenField,n=e.iconField,r=e.needSorting,e.fillMode==y.DataFillMode.APPEND?(e=this._ds.rowById(e.parentId),this._ds.appendDataRows(e,t,i,r,o,n)):this._ds.setRows(t,i,r,o,n),t.length):0},n.prototype.$_fillEmpty=function(t){t.fillMode===y.DataFillMode.SET&&this._ds.setRows(null,null,!1,null,null)},n.prototype.$_checkEmpty=function(t,e){return!t&&(this.$_fillEmpty(e),!0)},n.prototype.$_prepareLoad=function(t){};var i,o=n;function n(t){var e=i.call(this)||this;return e._ds=t,e}e.TreeDataLoader=o})),Ft=(t(Mt),Mt.TreeDataLoader,e(function(t,e){Object.defineProperty(e,"__esModule",{value:!0}),(r=i=e.ExportType||(e.ExportType={})).EXCEL="excel",r.CSV="csv",(r=o=e.ExportTarget||(e.ExportTarget={})).LOCAL="local",r.REMOTE="remote",r.STREAM="stream",n=se.Base,ne.__extends(s,n),_dp(s,"type",{get:function(){return this._type},set:function(t){t&&re.Utils.valueIn(t,i)&&(this._type=t)}}),_dp(s,"target",{get:function(){return this._target},set:function(t){t&&re.Utils.valueIn(t,o)&&(this._target=t)}}),_dp(s,"fileName",{get:function(){var t;return this._fileName?this._fileName.indexOf(".")<0?(t=this.type===i.CSV?".csv":".xlsx",this._fileName+t):this._fileName:this.type===i.CSV?"realgrid.csv":"realgrid.xlsx"},set:function(t){t!=this._fileName&&(this._fileName=t?t.trim():null)}});var i,o,n,r=s;function s(t){var e=n.call(this)||this;return e._type=i.EXCEL,e._target=o.LOCAL,e.url=void 0,e.done=null,e.showProgress=!1,e.progressMessage="Exporting...",e.prepareProgress=10,e.progressCallback=null,e.params=null,e.assignFrom(t),e.extend(t),e}e.ExportBaseOptions=r;a=r,ne.__extends(l,a),_dp(l,"datetimeFormat",{get:function(){return this._datetimeFormat},set:function(t){t!=this._datetimeFormat&&(this._datetimeFormat=t)}}),_dp(l,"booleanFormat",{get:function(){return this._booleanFormat},set:function(t){t!=this._booleanFormat&&(this._booleanFormat=t)}}),_dp(l,"numberFormat",{get:function(){return this._numberFormat},set:function(t){t!=this._numberFormat&&(this._numberFormat=t)}});var a,r=l;function l(t){var e=a.call(this,t)||this;return e.datetimeCallback=null,e.numberCallback=null,e.booleanCallback=null,e.objectCallback=null,e.textCallback=null,e.start=0,e.count=-1,e.replaceCrText=null,e.replaceLfText=null,e.seperator=null,e.assignFrom(t),e.extend(t),e}e.ExportOptions=r})),Lt=(t(Ft),Ft.ExportType,Ft.ExportTarget,Ft.ExportBaseOptions,Ft.ExportOptions,e(function(t,e){function i(){}Object.defineProperty(e,"__esModule",{value:!0}),i.prototype.dispose=function(){return null},i.prototype.saveLocal=function(t,e,i){var o=re.getDocWin(i),e=new Blob([e],{type:"text/csv charset=UTF-8"});o.navigator.msSaveOrOpenBlob||o.navigator.msSaveOrOpenBlob?o.navigator.msSaveOrOpenBlob(e,t):(o=i.createElement("a"),i.body.appendChild(o),e=URL.createObjectURL(e),o.href=e,o.download=t,o.click(),i.body.removeChild(o))},i.prototype.saveServer=function(t,e,i,o,n){var r=(r=(r='<form name="tempForm" action="'+i+'" method="post">')+('<input type="hidden" name="fileName" value = "'+t+'"/>')+('<input type="hidden" name="data" value = "'+e+'"/>'))+'<input id="submitBtn" type="submit"/>'+"</form>";if(n)for(var s in n)r+='<input type="hidden" name="'+s+'" value = "'+n[s]+'"/>';i=o.createElement("div");i.innerHTML=r,o.body.appendChild(i),o.getElementById("submitBtn").click(),o.body.removeChild(i)},e.ExporterBase=i})),Ot=(t(Lt),Lt.ExporterBase,e(function(t,e){Object.defineProperty(e,"__esModule",{value:!0});i=Ft.ExportOptions,ne.__extends(n,i),_dp(n,"type",{get:function(){return Ft.ExportType.CSV}});var i,o=n;function n(t){var e=i.call(this,t)||this;return e.exportFields=null,e.hideFields=null,e.includeFieldNames=!1,e.extend(t),e}e.DataExportOptions=o;r=Lt.ExporterBase,ne.__extends(a,r),a.prototype.dispose=function(){return r.prototype.dispose.call(this),null},a.prototype.export=function(t,e){this._dataSource=t,this._exportOptions=e instanceof o?e:new o(e),this._exportFields=this.$_prepareFields(t,e.exportFields,e.hideFields),this._rows=[],t instanceof kt.LocalTreeDataProvider?this.$_buildTreeBook(function(){this.save()}):t instanceof wt.LocalDataProvider&&this.$_buildBook(function(){this.save()})},a.prototype.$_prepareFields=function(e,t,i){var o=e.getFields();return t?t.map(function(t){return e.fieldByName(t)}).filter(function(t){return t}):i?o.filter(function(t){return i.indexOf(t.orgFieldName)<0}):o},a.prototype.addQuatation=function(t,e){return re.Utils.addQuatation(t,e===ht.ValueType.TEXT,this._exportOptions.replaceLfText,this._exportOptions.replaceCrText)},a.prototype.$_buildFieldName=function(){return this._exportFields.map(function(t){return t.orgFieldName}).join(this._exportOptions.seperator||",")},a.prototype.$_buildBook=function(t){var e=this._exportOptions,i=this._dataSource.rowCount,o=Math.max(0,e.start),n=-1==e.count?i:Math.min(Math.max(e.count,0),i),r=Math.min(i,o+n);e.includeFieldNames&&this._rows.push(this.$_buildFieldName());for(var s=o;s<r;s++)this._rows.push(this.$_buildItem(s));e.target===Ft.ExportTarget.STREAM?(i=this._rows.join("\n"),e.done&&"function"==typeof e.done&&e.done(i)):(e.done&&"function"==typeof e.done&&e.done(),t.call(this))},a.prototype.$_buildTreeBook=function(t){for(var e,i=this._exportOptions,o=this._dataSource.getDescendants(null,0),n=0;n<o.length;n++)this._rows.push(this.$_buildItem(o[n]));i.target===Ft.ExportTarget.STREAM?(e=this._rows.join("\n"),i.done&&"function"==typeof i.done&&i.done(e)):(i.done&&"function"==typeof i.done&&i.done(),t.call(this))},a.prototype.$_buildItem=function(t){for(var e,i,o,n,r=this._dataSource,s=this._exportFields,a=r instanceof kt.LocalTreeDataProvider?(i=t?t.values:[],t.rowId):(i=r.getRow(t),t),l=[],h=s.length,d=this._exportOptions,r=d.seperator,u=0;u<h;u++){if(n=void 0,e=s[u])switch(o=i[e.index],e.dataType){case ht.ValueType.NUMBER:n=isNaN(o)||null==o?"":d.numberCallback?d.numberCallback(a,e.orgFieldName,o):d.numberFormat?Y.DecimalFormatter.getFormatter(d.numberFormat).getText(o):String(o);break;case ht.ValueType.BOOLEAN:null!=o&&(d.booleanCallback?o=d.booleanCallback(a,e.orgFieldName,o):d.booleanFormat&&(o=K.BooleanFormatter.getFormatter(d.booleanFormat).formatValue(o)),n=String(o));break;case ht.ValueType.DATE:case ht.ValueType.DATETIME:o&&(n=d.datetimeCallback?(o=d.datetimeCallback(a,e.orgFieldName,o))instanceof Date?dt.DateTimeConverter.Default.getText(o):o:(d.datetimeFormat?z.DateTimeWriter.getFormatter(d.datetimeFormat):dt.DateTimeConverter.Default).getText(o));break;case ht.ValueType.OBJECT:o&&(n="object"==typeof(o=d.objectCallback?d.objectCallback(a,e.orgFieldName,o):o)?JSON.stringify(o):String(o));break;default:n=null!=(o=d.textCallback?d.textCallback(a,e.orgFieldName,o):o)?String(o):""}l[l.length]=this.addQuatation(n,e&&e.dataType)}return l.join(r||",")},a.prototype.save=function(){var t=this._exportOptions,e=t.fileName,i="\ufeff"+this._rows.join("\n");t.target==Ft.ExportTarget.LOCAL?this.saveLocal(e,i,document):this.saveServer(e,re.Base64.encode(i),t.url,document,t.params)};var r,s=a;function a(){return r.call(this)||this}e.DataCsvExporter=s})),Pt=(t(Ot),Ot.DataExportOptions,Ot.DataCsvExporter,e(function(t,e){Object.defineProperty(e,"__esModule",{value:!0});i.getFieldIndex=function(t,e){return"string"==typeof e?t.getFieldIndex(e):e},i.fillData=function(t,e,i,o){t=new y.DataLoader(t);try{t.load(e,i,o)}finally{t.dispose()}},i.fillTreeData=function(t,e,i,o){t=new Mt.TreeDataLoader(t);try{t.load(e,i,o)}finally{t.dispose()}},i.extractTreeRows=function(t){if(t){for(var e=t.length,i=new Array(e),o=0;o<e;o++)i[o]=t[o].rowId;return i}return null};var o=i;function i(){}function n(){}e.EventListenerBase=n,s.prototype.dispose=function(){this._dp.dispose(),this._dp=null},_dp(s,"subTypeEnabled",{get:function(){return this._dp.subTypeEnabled},set:function(t){this._dp.subTypeEnabled=t}}),_dp(s,"undoable",{get:function(){return this._dp.undoable},set:function(t){this._dp.undoable=t}}),_dp(s,"insertable",{get:function(){return this._dp.insertable},set:function(t){this._dp.insertable=t}}),_dp(s,"updatable",{get:function(){return this._dp.updatable},set:function(t){this._dp.updatable=t}}),_dp(s,"deletable",{get:function(){return this._dp.deletable},set:function(t){this._dp.deletable=t}}),_dp(s,"softDeleting",{get:function(){return this._dp.softDeleting},set:function(t){this._dp.softDeleting=t}}),_dp(s,"deleteCreated",{get:function(){return this._dp.deleteCreated},set:function(t){this._dp.deleteCreated=t}}),_dp(s,"checkStates",{get:function(){return this._dp.checkStates},set:function(t){this._dp.checkStates=t}}),_dp(s,"restoreMode",{get:function(){return this._dp.restoreMode},set:function(t){this._dp.restoreMode=t}}),_dp(s,"strictRestore",{get:function(){return this._dp.strictRestore},set:function(t){this._dp.strictRestore=t}}),_dp(s,"booleanFormat",{get:function(){return this._dp.booleanFormat},set:function(t){this._dp.booleanFormat=t}}),_dp(s,"datetimeFormat",{get:function(){return this._dp.datetimeFormat},set:function(t){this._dp.datetimeFormat=t}}),_dp(s,"baseYear",{get:function(){return this._dp.baseYear},set:function(t){this._dp.baseYear=t}}),_dp(s,"amText",{get:function(){return this._dp.amText},set:function(t){this._dp.amText=t}}),_dp(s,"pmText",{get:function(){return this._dp.pmText},set:function(t){this._dp.pmText=t}}),_dp(s,"commitBeforeDataEdit",{get:function(){return this._dp.commitBeforeDataEdit},set:function(t){this._dp.commitBeforeDataEdit=t}}),_dp(s,"valuesCallback",{get:function(){return this._dp.valuesCallback},set:function(t){this._dp.valuesCallback=t}}),s.prototype.getOptions=function(){var t=this._dp;return{subTypeEnabled:t.subTypeEnabled,undoable:t.undoable,insertable:t.insertable,updatable:t.updatable,deletable:t.deletable,softDeleting:t.softDeleting,deleteCreated:t.deleteCreated,checkStates:t.checkStates,restoreMode:t.restoreMode.toString(),strictRestore:t.strictRestore,booleanFormat:t.booleanFormat,datetimeFormat:t.datetimeFormat,baseYear:t.baseYear,amText:t.amText,pmText:t.pmText,commitBeforeDataEdit:t.commitBeforeDataEdit}},s.prototype.setOptions=function(t){this._dp.assignFrom(t)},s.prototype.beginUpdate=function(){this._dp.beginUpdate()},s.prototype.endUpdate=function(t){this._dp.endUpdate(t=void 0===t?!0:t)},s.prototype.getFields=function(){return this._dp.getFields()},s.prototype.setFields=function(t){re.Utils.isArray(t)&&this._dp.setFields(t)},s.prototype.addField=function(t,e,i){return this._dp.addField(t,e,i)},s.prototype.getFieldCount=function(){return this._dp.fieldCount},s.prototype.fieldByName=function(t){return this._dp.fieldByName(t)},s.prototype.getFieldNames=function(){return this._dp.getFieldNames()},s.prototype.getOrgFieldNames=function(){return this._dp.getOrgFieldNames()},s.prototype.getFieldName=function(t){return this._dp.getFieldName(t)},s.prototype.getOrgFieldName=function(t){return this._dp.getOrgFieldName(t)},s.prototype.getFieldIndex=function(t){return this._dp.getFieldIndex(t)},s.prototype.hasData=function(t){return this._dp.hasData(t)},s.prototype.getValues=function(t){return this._dp.getRow(t)},s.prototype.checkRowStates=function(t){this._dp.checkStates=t},s.prototype.getRowState=function(t){return this._dp.getRowState(t)},s.prototype.getStateRows=function(t){return void 0===t&&(t=b.RowState.NONE),this._dp.getStateRows(t)},s.prototype.getAllStateRows=function(){return this._dp.getAllStateRows()},s.prototype.clearRowStates=function(t,e){this._dp.clearRowStates(t,e=void 0===e?!1:e)},s.prototype.setRowState=function(t,e,i){void 0===e&&(e=b.RowState.NONE),this._dp.setRowState(t,e,i=void 0===i?!1:i)},s.prototype.setRowStates=function(t,e,i,o){void 0===e&&(e=b.RowState.NONE),this._dp.setRowStates(t,e,i=void 0===i?!1:i,o=void 0===o?!1:o)},s.prototype.getRowStateCount=function(t){if(!t)return 0;var e=[];if("*"==t||"all"==t)e.push(b.RowState.CREATED,b.RowState.UPDATED,b.RowState.DELETED,b.RowState.CREATE_AND_DELETED);else for(var i=Array.isArray(t)?t:[t],o=0,n=i.length;o<n;o++)e.push(i[o]);return 0<e.length?this._dp.getRowStateCount(e):void 0},s.prototype.restoreUpdatedStates=function(t){return this._dp.restoreUpdatedStates(t)},s.prototype.restoreUpdatedRows=function(t){return this._dp.restoreUpdatedRows(re.Utils.makeArray(t))},s.prototype.getUpdatedCells=function(t){return this._dp.getUpdatedCells(t)},s.prototype.getDistinctValues=function(t,e,i){void 0===e&&(e=-1);i=(i=void 0===i?ht.SortDirection.ASCENDING:i)||ht.SortDirection.ASCENDING,t="string"==typeof t?this._dp.getFieldIndex(t):t;return this._dp.getDistinctValues(t,e,i)},s.prototype.savePoint=function(t){return this._dp.savePoint(t=void 0===t?!0:t)},s.prototype.rollback=function(t){this._dp.rollback(t=void 0===t?0:t)},s.prototype.clearSavePoints=function(){this._dp.clearSavePoints()},s.prototype.getSavePoints=function(){return this._dp.getSavePoints()},s.prototype.setDataComparer=function(t,e){t="string"==typeof t?this._dp.getFieldIndex(t):t;this._dp.setDataComparer(t,e)},s.prototype.exportToCsv=function(t){(new Ot.DataCsvExporter).export(this._dp,t)},s.prototype.destroy=function(){this.dispose()},s.prototype.undo=function(){this._dp.undo()},s.prototype.redo=function(){this._dp.redo()},s.prototype.clearCommandStack=function(){this._dp.clearCommandStack()},s.prototype.getProvider=function(){return this._dp};var r=s;function s(t){this._dp=this._createProvider(t),this._listener=this._createListener(this._dp)}e.DataProviderBase=r;a=r,ne.__extends(h,a),h.prototype.getRowCount=function(){return this._dp.rowCount},h.prototype.setRowCount=function(t,e,i,o){return void 0===o&&(o=b.RowState.NONE),this._dp.setRowCount(t,e=void 0===e?!1:e,i=void 0===i?null:i,o)},h.prototype.setFilterMode=function(t){this._dp.setFilterMode(t=void 0===t?"and":t)},h.prototype.setFilters=function(t,e){this._dp.setFilters(t,e=void 0===e?"and":e)},h.prototype.fillJsonData=function(t,e){e=e instanceof y.DataFillOptions?e:new y.DataFillOptions(e);o.fillData(this._dp,"json",t,e)},h.prototype.fillXmlData=function(t,e){e=e instanceof y.DataFillOptions?e:new y.DataFillOptions(e);o.fillData(this._dp,"xml",t,e)},h.prototype.fillCsvData=function(t,e){e=e instanceof y.DataFillOptions?e:new y.DataFillOptions(e);o.fillData(this._dp,"csv",t,e)},h.prototype.setRows=function(t,e,i){this._dp.setRows(t,e=void 0===e?0:e,i=void 0===i?-1:i)},h.prototype.addRows=function(t,e,i,o){this._dp.appendRows(t,e=void 0===e?0:e,i=void 0===i?-1:i,o=void 0===o?!1:o)},h.prototype.insertRows=function(t,e,i,o,n){this._dp.insertRows(t,e,i=void 0===i?0:i,o=void 0===o?-1:o,n=void 0===n?!1:n)},h.prototype.updateRows=function(t,e,i,o,n,r){this._dp.updateRows(t,e,i=void 0===i?0:i,o=void 0===o?-1:o,n=void 0===n?!1:n,r=void 0===r?!1:r)},h.prototype.updateRowsByDataRow=function(t,e,i){this._dp.updateRows2(t,e,i)},h.prototype.clearRows=function(){this._dp.clearRows()},h.prototype.updateRow=function(t,e,i){this._dp.updateRow(t,e,i)},h.prototype.hideRows=function(t){this._dp.hideRows(t)},h.prototype.showHiddenRows=function(t){this._dp.showRows(t)},h.prototype.getHiddenRows=function(){return this._dp.getHiddenRows()},h.prototype.isHiddenRow=function(t){return this._dp.isHiddenRow(t)},h.prototype.resetHiddenRows=function(){this._dp.clearHiddenRows()},h.prototype.addRow=function(t){return this._dp.appendRow(t)},h.prototype.insertRow=function(t,e){return this._dp.insertRow(t,e)},h.prototype.removeRow=function(t){this._dp.removeRow(t)},h.prototype.removeRows=function(t,e){this._dp.removeRows(t,e=void 0===e?!1:e)},h.prototype.moveRow=function(t,e){this._dp.moveRow(t,e)},h.prototype.moveRows=function(t,e,i){this._dp.moveRows(t,e,i)},h.prototype.getValue=function(t,e){e=o.getFieldIndex(this._dp,e);return this._dp.getValue(t,e)},h.prototype.setValue=function(t,e,i){e=o.getFieldIndex(this._dp,e);this._dp.setValue(t,e,i)},h.prototype.getRows=function(t,e){return this._dp.getRows(t=void 0===t?0:t,e=void 0===e?-1:e)},h.prototype.getJsonRow=function(t,e){return this._dp.getRowObject(t,e)},h.prototype.getJsonRows=function(t,e,i){return this._dp.getRowObjects(t=void 0===t?0:t,e=void 0===e?-1:e,i=void 0===i?!1:i)},h.prototype.getOutputRow=function(t,e){return this._dp.getOutputObject(t,e)},h.prototype.getOutputRows=function(t,e,i){return this._dp.getOutputObjects(t,e=void 0===e?0:e,i=void 0===i?-1:i)},h.prototype.getFieldValues=function(t,e,i){void 0===e&&(e=0),void 0===i&&(i=-1);t=o.getFieldIndex(this._dp,t);return this._dp.getFieldValues(t,e,i)},h.prototype.searchDataRow=function(t){return t?this._dp.searchDataRow(t):-1},h.prototype.searchData=function(t){return t?this._dp.searchData(t):null},h.prototype._createProvider=function(t){return new wt.LocalDataProvider(t,this)},h.prototype._createListener=function(t){return new _(this,t)};var a,l=h;function h(){var t=null!==a&&a.apply(this,arguments)||this;return t.onRowCountChanged=null,t.onRowUpdating=null,t.onRowUpdated=null,t.onRowsUpdated=null,t.onRowListUpdated=null,t.onRowInserting=null,t.onRowInserted=null,t.onRowsInserted=null,t.onRowDeleting=null,t.onRowDeleted=null,t.onRowsDeleted=null,t.onRowMoving=null,t.onRowMoved=null,t.onRowsMoving=null,t.onRowsMoved=null,t.onRowListMoving=null,t.onRowListMoved=null,t.onValueChanged=null,t.onDataChanged=null,t.onRowStateChanged=null,t.onRowStatesChanged=null,t.onRowStatesCleared=null,t.onRestoreRows=null,t}e.LocalDataProvider=l;d=r,ne.__extends(u,d),u.prototype.dispose=function(){d.prototype.dispose.call(this)},u.prototype.getRowCount=function(){return this._dp.rowCount},u.prototype.setRows=function(t,e,i,o,n){this._dp.setRows(t,e,i=void 0===i?!1:i,o,n)},u.prototype.setCsvRows=function(t,e,i,o,n){this._dp.setCsvRows(t,e,i,o,n)},u.prototype.setXmlRows=function(t,e,i,o){this._dp.setXmlRows(t,e,i,o)},u.prototype.setObjectRows=function(t,e,i,o){this._dp.setJsonRows(t,e,i,o)},u.prototype.setNestedRows=function(t,e,i,o,n){this._dp.setJsonRows2(t,e,i,o,n)},u.prototype.fillJsonData=function(t,e){e=new y.DataFillOptions(e);try{o.fillTreeData(this._dp,"json",t,e)}finally{e.dispose()}},u.prototype.fillXmlData=function(t,e){e=new y.DataFillOptions(e);try{o.fillTreeData(this._dp,"xml",t,e)}finally{e.dispose()}},u.prototype.fillCsvData=function(t,e){e=new y.DataFillOptions(e);try{o.fillTreeData(this._dp,"csv",t,e)}finally{e.dispose()}},u.prototype.getIconIndex=function(t){return this._dp.rowById(t).iconIndex},u.prototype.setIconIndex=function(t,e){this._dp.rowById(t).iconIndex=e},u.prototype.getParent=function(t){t=this._dp.rowById(t);return t&&t.parent?t.parent.rowId:-1},u.prototype.getLevel=function(t){return this._dp.rowById(t).level},u.prototype.getChildCount=function(t){return null==t||-1==t?this._dp.getChildCount(null):(t=this._dp.rowById(t))&&t.children?t.children.length:0},u.prototype.getChildren=function(t){return t=null==t||-1==t?this._dp.getRows(null):this._dp.rowById(t).children,o.extractTreeRows(t)},u.prototype.getDescendantCount=function(t){return null==t||-1==t?this._dp.getDescendantCount(null):this._dp.rowById(t).descendantCount},u.prototype.getDescendants=function(t,e){void 0===e&&(e=-1);var i=null,t=(null!=t&&-1!=t&&(i=this._dp.rowById(t)),this._dp.getDescendants(i,e));return o.extractTreeRows(t)},u.prototype.getAncestors=function(t){t=this._dp.rowById(t);return t&&t.ancestors?o.extractTreeRows(t.ancestors):null},u.prototype.getJsonRow=function(t,e,i,o,n,r){void 0===o&&(o="rows"),void 0===n&&(n="iconIndex"),void 0===r&&(r=-1);var s,t=null==t||t<0?this._dp.rootRow:this._dp.rowById(t);return t?(s=t.getObject()||{},t&&e&&(s.__rowState=t.rowState),i&&0!==r&&(s[o]=t.getChildObjects(i,o,n,!1,e,r-1)),s):null},u.prototype.getJsonRows=function(t,e,i,o,n){void 0===e&&(e=!1),void 0===i&&(i="rows"),void 0===o&&(o="iconIndex");t=null==t||t<=-1?this._dp.rootRow:this._dp.rowById(t);return t?t.getChildObjects(e,i,o,!0,n):null},u.prototype.getOutputRow=function(t,e,i){void 0===i&&(i="iconIndex");t=new x.DataOutputOptions(t);try{var o=null==e||e<0?this._dp.rootRow:this._dp.rowById(e),n=o?o.getOutput(t,i):null}finally{t.dispose()}return n},u.prototype.getOutputRows=function(t,e,i,o,n){void 0===i&&(i=!1),void 0===o&&(o="rows"),void 0===n&&(n="iconIndex");t=new x.DataOutputOptions(t);try{var r=null==e||e<=-1?this._dp.rootRow:this._dp.rowById(e),s=r?r.getChildOutputObjects(t,i,o,n):null}finally{t.dispose()}return s},u.prototype.addChildRow=function(t,e,i,o){void 0===i&&(i=-1),void 0===o&&(o=!1);var n=this._dp,t=n.rowById(t)||n.rootRow,n=n.createRow(e,i,o);return t.addChild(n,!1)?n.rowId:-1},u.prototype.insertChildRow=function(t,e,i,o,n){void 0===o&&(o=-1),void 0===n&&(n=!1);var r=this._dp,t=r.rowById(t)||r.rootRow,r=r.createRow(i,o,n);return t.insertChild(e,r,!1)?r.rowId:-1},u.prototype.insertChildNode=function(t,e,i,o,n,r){void 0===o&&(o="rows"),void 0===n&&(n="iconField"),void 0===r&&(r=!1);var s=this._dp,t=null==t||t<0?s.rootRow:s.rowById(t);if(t)return s.insertChildNode(t,e,i,o,n,r)},u.prototype.updateRow=function(t,e,i){t=this._dp.rowById(t);return!!t&&t.update(e,i)},u.prototype.updateRows=function(t,e,i){this._dp.updateRows(t,e,i)},u.prototype.removeRow=function(t){t=this._dp.rowById(t);return!(!t||!t.parent)&&t.parent.removeChild(t)},u.prototype.removeRows=function(t){return!!(t&&0<t.length)&&this._dp.removeRows(t)},u.prototype.clearRows=function(){this._dp.clearRows()},u.prototype.hideRows=function(t){this._dp.hideRows(t)},u.prototype.showHiddenRows=function(t){this._dp.showRows(t)},u.prototype.getHiddenRows=function(){return this._dp.getHiddenRows()},u.prototype.isHiddenRow=function(t){return this._dp.isHiddenRow(t)},u.prototype.resetHiddenRows=function(){this._dp.clearHiddenRows()},u.prototype.getValue=function(t,e){t=this._dp.rowById(t),e=o.getFieldIndex(this._dp,e);return t?t.getValue(e):null},u.prototype.setValue=function(t,e,i){t=this._dp.rowById(t),e=o.getFieldIndex(this._dp,e);t&&t.setValue(e,i,!1)},u.prototype.moveRowSibling=function(t,e){t=this._dp.rowById(t);return!!t&&this._dp.changeRowIndex(t,e)},u.prototype.changeRowParent=function(t,e,i){t=this._dp.rowById(t),e=e<0?this._dp.rootRow:this._dp.rowById(e);return!(!t||!e)&&this._dp.changeRowParent(t,e,i)},u.prototype.searchDataRow=function(t){return t?this._dp.searchDataRow(t,t.parentId):-1},u.prototype.searchData=function(t){return t?this._dp.searchData(t,t.parentId):null},u.prototype._createProvider=function(t){return new kt.LocalTreeDataProvider(t,this)},u.prototype._createListener=function(t){return new g(this,t)};var d,l=u;function u(t){t=d.call(this,t=void 0===t?!1:t)||this;return t.onRowCountChanged=null,t.onRowAdding=null,t.onRowAdded=null,t.onRowsAdded=null,t.onRowDeleting=null,t.onRowDeleted=null,t.onRowsDeleted=null,t.onRowUpdating=null,t.onRowUpdated=null,t.onRowsUpdating=null,t.onRowsUpdated=null,t.onValueChanged=null,t.onDataChanged=null,t.onRowStateChanged=null,t.onRowStatesChanged=null,t.onRowSiblingMoving=null,t.onRowSiblingMoved=null,t.onRowsSiblingMoving=null,t.onRowsSiblingMoved=null,t.onRowParentChanging=null,t.onRowParentChanged=null,t}e.LocalTreeDataProvider=l;c=n,ne.__extends(p,c),p.prototype.dispose=function(){this._del=null,this._provider.removeListener(this),this._provider=null},p.prototype.onDataProviderRowCountChanged=function(t){this._del.onRowCountChanged?this._del.onRowCountChanged(this._del,t.rowCount):re.Utils.log("onRowCountChanged: "+t.rowCount)},p.prototype.onDataProviderRowUpdating=function(t,e,i){return this._del.onRowUpdating?this._del.onRowUpdating(this._del,e):(re.Utils.log("onRowUpdating: "+e),!0)},p.prototype.onDataProviderRowUpdated=function(t,e){this._del.onRowUpdated?this._del.onRowUpdated(this._del,e):re.Utils.log("onRowUpdated: "+e)},p.prototype.onDataProviderRowsUpdated=function(t,e,i){this._del.onRowsUpdated?this._del.onRowsUpdated(this._del,e,i):re.Utils.log("onRowsUpdated: "+e+", "+i)},p.prototype.onDataProviderRowListUpdated=function(t,e){this._del.onRowListUpdated?this._del.onRowListUpdated(this._del,e):re.Utils.log("onRowListUpdated: "+e)},p.prototype.onDataProviderRowInserting=function(t,e,i){return this._del.onRowInserting?this._del.onRowInserting(this._del,e,i):(re.Utils.log("onRowInserting: "+e),!0)},p.prototype.onDataProviderRowInserted=function(t,e){this._del.onRowInserted?this._del.onRowInserted(this._del,e):re.Utils.log("onRowInserted: "+e)},p.prototype.onDataProviderRowsInserted=function(t,e,i){this._del.onRowsInserted?this._del.onRowsInserted(this._del,e,i):re.Utils.log("onRowsInserted: "+e+", "+i)},p.prototype.onDataProviderRowRemoving=function(t,e){return this._del.onRowDeleting?this._del.onRowDeleting(this._del,e):(re.Utils.log("onRowDeleting: "+e),!0)},p.prototype.onDataProviderRowRemoved=function(t,e){this._del.onRowDeleted?this._del.onRowDeleted(this._del,e):re.Utils.log("onRowDeleted: "+e)},p.prototype.onDataProviderRowsRemoving=function(t,e){return!0},p.prototype.onDataProviderRowsRemoved=function(t,e){this._del.onRowsDeleted?this._del.onRowsDeleted(this._del,e):re.Utils.log("onRowsDeleted: ",e)},p.prototype.onDataProviderRowMoving=function(t,e,i){return this._del.onRowMoving?this._del.onRowMoving(this._del,e,i):(re.Utils.log("onRowMoving: "+e+", "+i),!0)},p.prototype.onDataProviderRowMoved=function(t,e,i){this._del.onRowMoved?this._del.onRowMoved(this._del,e,i):re.Utils.log("onRowMoved: "+e+", "+i)},p.prototype.onDataProviderRowsMoving=function(t,e,i,o){return this._del.onRowsMoving?this._del.onRowsMoving(this._del,e,i,o):(re.Utils.log("onRowsMoving: "+e+", "+i+", "+o),!0)},p.prototype.onDataProviderRowsMoved=function(t,e,i,o){this._del.onRowsMoved?this._del.onRowsMoved(this._del,e,i,o):re.Utils.log("onRowsMoved: "+e+", "+i+", "+o)},p.prototype.onDataProviderRowListMoving=function(t,e,i){return this._del.onRowListMoving?this._del.onRowListMoving(this._del,e,i):(re.Utils.log("onRowListMoving: ",e,", ",i),!0)},p.prototype.onDataProviderRowListMoved=function(t,e,i){this._del.onRowListMoved?this._del.onRowListMoved(this._del,e,i):re.Utils.log("onRowListMoved: ",e,i)},p.prototype.onDataProviderValueChanged=function(t,e,i){this._del.onValueChanged?this._del.onValueChanged(this._del,e,i):re.Utils.log("onValueChanged:"+e+", "+i)},p.prototype.onDataProviderDataChanged=function(t){this._del.onDataChanged?this._del.onDataChanged(this._del):re.Utils.log("onDataChanged")},p.prototype.onDataProviderStateChanged=function(t,e){this._del.onRowStateChanged?this._del.onRowStateChanged(this._del,e):re.Utils.log("onRowStateChanged: "+e)},p.prototype.onDataProviderStatesChanged=function(t,e){this._del.onRowStatesChanged?this._del.onRowStatesChanged(this._del,e):re.Utils.log("onRowStatesChanged",e)},p.prototype.onDataProviderStatesCleared=function(t){this._del.onRowStatesCleared?this._del.onRowStatesCleared(this._del):re.Utils.log("onRowStatesCleared")},p.prototype.onDataProviderRestoreRows=function(t,e){this._del.onRestoreRows?this._del.onRestoreRows(this._del,e):re.Utils.log("onRestoreRows",e)};var c,_=p;function p(t,e){var i=c.call(this)||this;return i._del=t,i._provider=e,i._provider.addListener(i),i}f=n,ne.__extends(m,f),m.prototype.dispose=function(){this._del=null,this._provider.removeListener(this),this._provider=null},m.prototype.onTreeDataProviderRowCountChanged=function(t){this._del.onRowCountChanged?this._del.onRowCountChanged(this._del,t.rowCount):re.Utils.log("onRowCountChanged: "+t.rowCount)},m.prototype.onTreeDataProviderRowAdding=function(t,e,i,o){return this._del.onRowAdding?this._del.onRowAdding(this._del,e.rowId,i,o._values):(re.Utils.log("onRowAdding: "+e.rowId+", "+i,o._values),!0)},m.prototype.onTreeDataProviderRowAdded=function(t,e){this._del.onRowAdded?this._del.onRowAdded(this._del,e.rowId):re.Utils.log("onRowAdded: "+e.rowId)},m.prototype.onTreeDataProviderRowsAdded=function(t,e,i){i=o.extractTreeRows(i);this._del.onRowsAdded?this._del.onRowsAdded(this._del,e.rowId,i):re.Utils.log("onRowsAdded: "+e.rowId,i)},m.prototype.onTreeDataProviderRowRemoving=function(t,e){return this._del.onRowDeleting?this._del.onRowDeleting(this._del,e.rowId):(re.Utils.log("onRowDeleting: "+e.rowId),!0)},m.prototype.onTreeDataProviderRowRemoved=function(t,e){this._del.onRowDeleted?this._del.onRowDeleted(this._del,e.rowId):re.Utils.log("onRowDeleted: "+e.rowId)},m.prototype.onTreeDataProviderRowsRemoved=function(t,e){e=o.extractTreeRows(e);this._del.onRowsDeleted?this._del.onRowsDeleted(this._del,e):re.Utils.log("onRowsDeleted: ",e)},m.prototype.onTreeDataProviderRowUpdating=function(t,e){return this._del.onRowUpdating?this._del.onRowUpdating(this._del,e.rowId):(re.Utils.log("onRowUpdating:"+e.rowId),!0)},m.prototype.onTreeDataProviderRowUpdated=function(t,e){this._del.onRowUpdated?this._del.onRowUpdated(this._del,e.rowId):re.Utils.log("onRowUpdated: "+e.rowId)},m.prototype.onTreeDataProviderRowsUpdating=function(t,e){return this._del.onRowsUpdating?this._del.onRowsUpdating(this._del,St.TreeDataRow.getRowIds(e)):(re.Utils.log("onRowUpdating:"+e.length),!0)},m.prototype.onTreeDataProviderRowsUpdated=function(t,e){this._del.onRowsUpdated?this._del.onRowsUpdated(this._del,St.TreeDataRow.getRowIds(e)):re.Utils.log("onRowsUpdated: "+e.length)},m.prototype.onTreeDataProviderValueChanged=function(t,e,i){this._del.onValueChanged?this._del.onValueChanged(this._del,e.rowId,i):re.Utils.log("onValueChanged: "+e.rowId+", "+i)},m.prototype.onTreeDataProviderRowStateChanged=function(t,e){this._del.onRowStateChanged?this._del.onRowStateChanged(this._del,e.rowId):re.Utils.log("onRowStateChanged: "+e.rowId)},m.prototype.onTreeDataProviderRowStatesChanged=function(t,e){e=o.extractTreeRows(e);this._del.onRowStatesChanged?this._del.onRowStatesChanged(this._del,e):re.Utils.log("onRowStatesChanged: ",e)},m.prototype.onTreeDataProviderRowSiblingMoving=function(t,e,i){return this._del.onRowSiblingMoving?this._del.onRowSiblingMoving(this._del,e.rowId,i):(re.Utils.log("onRowSiblingMoveing: "+e.rowId+", "+i),!0)},m.prototype.onTreeDataProviderRowSiblingMoved=function(t,e,i){this._del.onRowSiblingMoved?this._del.onRowSiblingMoved(this._del,e.rowId,i):re.Utils.log("onSiblingMoved: "+e.rowId+", "+i)},m.prototype.onTreeDataProviderRowsSiblingMoving=function(t,e,i){return this._del.onRowsSiblingMoving?this._del.onRowsSiblingMoving(this._del,St.TreeDataRow.getRowIds(e),i):(re.Utils.log("onRowSiblingMoveing: ",e,i),!0)},m.prototype.onTreeDataProviderRowsSiblingMoved=function(t,e,i){this._del.onRowsSiblingMoved?this._del.onRowsSiblingMoved(this._del,St.TreeDataRow.getRowIds(e),i):re.Utils.log("onSiblingMoved: ",e,i)},m.prototype.onTreeDataProviderRowParentChanging=function(t,e,i,o){if(this._del.onRowParentChanging)return this._del.onRowParentChanging(this._del,e.rowId,i.rowId,o);re.Utils.log("onRowParentChanging: "+e.rowId+", "+i.rowId+", "+o)},m.prototype.onTreeDataProviderRowParentChanged=function(t,e,i,o){this._del.onRowParentChanged?this._del.onRowParentChanged(this._del,e.rowId,i.rowId,o):re.Utils.log("onRowParentChanged: "+e.rowId+", "+i.rowId+", "+o)};var f,g=m;function m(t,e){var i=f.call(this)||this;return i._del=t,i._provider=e,i._provider.addListener(i),i}})),Vt=(t(Pt),Pt.EventListenerBase,Pt.DataProviderBase,Pt.LocalDataProvider,Pt.LocalTreeDataProvider,e(function(t,e){function i(t){this.field=t,this.count=0,this.sum=NaN,this.max=NaN,this.min=NaN,this.avg=NaN,this.vars=NaN,this.varsp=NaN,this.dataCount=0,this.dataAvg=NaN}Object.defineProperty(e,"__esModule",{value:!0}),i.prototype.clear=function(){this.count=this.dataCount=0,this.sum=this.dataAvg=this.max=this.min=this.avg=this.vars=this.varsp=NaN},e.FieldSummary=i})),rt=(t(Vt),Vt.FieldSummary,e(function(t,e){Object.defineProperty(e,"__esModule",{value:!0}),e.ITEM_EXT_CHECKED=1;var i,o=196608,n=4294705152,r=((r=i=e.ItemState||(e.ItemState={})).NORMAL="normal",r.FOCUSED="focused",r.UPDATING="updating",r.INSERTING="inserting",r.APPENDING="appending",r.DUMMY="dummy",e.ItemState_isEditing=function(t){return t==i.UPDATING||t==i.INSERTING||t==i.APPENDING},e.ItemState_isInserting=function(t){return t==i.INSERTING||t==i.APPENDING},e.ItemState_isInsertItem=function(t,e){return t==i.INSERTING||t==i.APPENDING||e==b.RowState.CREATED},s.prototype.clear=function(){return this.styleName=this.readOnly=this.editable=this.style=void 0,this},s.prototype.assign=function(t){"string"==typeof t?this.styleName=t:(null!=t.readOnly&&(this.readOnly=t.readOnly),null!=t.editable&&(this.editable=t.editable),null!=t.styleName&&(this.styleName=t.styleName.trim()),null!=t.style&&(this.style=t.style),null!=t.exportStyleName&&(this.exportStyleName=t.exportStyleName))},s);function s(){}e.RowStyle=r;l.prototype.dispose=function(){this._parent=null},_dp(l,"id",{get:function(){return this._id}}),_dp(l,"index",{get:function(){return this._index}}),_dp(l,"parent",{get:function(){return this._parent}}),_dp(l,"parentIndex",{get:function(){return this._parent?this._parent._index:-1}}),_dp(l,"root",{get:function(){for(var t=this._parent;t&&1<t.level;)t=t._parent;return t}}),_dp(l,"childIndex",{get:function(){return this._parent?this._parent.indexOf(this):-1}}),_dp(l,"level",{get:function(){return this._parent?this._parent.level+1:0}}),_dp(l,"isData",{get:function(){return!1}}),_dp(l,"isDataRow",{get:function(){return!1}}),_dp(l,"visible",{get:function(){return this._parent&&0<=this._index}}),_dp(l,"displayLevel",{get:function(){return this.level}}),_dp(l,"provider",{get:function(){return this._parent&&this._parent.provider}}),_dp(l,"dataSource",{get:function(){return this._parent&&this._parent.dataSource}}),_dp(l,"dataRow",{get:function(){return-1}}),_dp(l,"dataId",{get:function(){return-1}}),_dp(l,"rowState",{get:function(){var t,e=this.dataRow;return 0<=e&&(t=this.dataSource)?t.getRowState(e):b.RowState.NONE}}),_dp(l,"itemState",{get:function(){return i.NORMAL}}),_dp(l,"checked",{get:function(){var t=0!=(this._getExtents()&e.ITEM_EXT_CHECKED);return this.provider.getItemChecked(this,t)}}),_dp(l,"checkable",{get:function(){return 0==(4&this._getExtents())}}),_dp(l,"editable",{get:function(){return!1}}),_dp(l,"readOnly",{get:function(){return 0!=(8&this._getExtents())},set:function(t){this._setExtents(t?8|this._getExtents():-9&this._getExtents())}}),_dp(l,"resizable",{get:function(){return!1}}),_dp(l,"merged",{get:function(){return!1}}),_dp(l,"height",{get:function(){var t=this._getExtents();return t&o?(t&n)>>>18:NaN}}),l.prototype.$_setHeight=function(t,e){var i=this._getExtents();if(t=Math.round(t),isNaN(t)){if(i&o)return this._setExtents(i&~o),!0}else{if(t!=(i&n)>>>18)return t=Math.max(0,Math.min(53247,t))<<18,this._setExtents((i=e?i&~o|131072:i&~o|65536)&~n|t),!0;if(e){if(0==(131072&i))return this._setExtents(i=i&~o|131072),!0}else if(0==(65536&i))return this._setExtents(i=i&~o|65536),!0}},l.prototype.$_clearHeight=function(t){t?this._setExtents(this._getExtents()&~o):this._setExtents(-65537&this._getExtents()),this.heights=null,0==this.index&&re.Utils.log("HEIGHT",this.height)},_dp(l,"heights",{get:function(){return this._heights},set:function(t){this._heights=t}}),l.prototype.getShadowRow=function(){return this.dataRow},l.prototype.getHeight=function(t){return this._heights[t]},l.prototype.setChecked=function(t,e){var i=this.provider;i&&i.checkItem(this,t,void 0,e)},l.prototype.setCheckable=function(t){var e=this.provider;e&&e.setCheckable(this,t)},l.prototype.getAncestor=function(t){if(t<this.level){for(var e=this._parent;e.level>t;)e=e._parent;return e}return this instanceof _?this:null},l.prototype.getVisibleAncestor=function(){var t=this._parent;do{if(t.visible)return t}while(t=t._parent)},l.prototype.getAncestors=function(){var t=null,e=this._parent;if(e)for(t=[];t.push(e),e=e._parent;);return t},l.prototype.isDescendantOf=function(t){if(t){for(var e=this._parent;e&&e!=t;)e=e._parent;return e===t}return!1},l.prototype.getData=function(t){var e=this.dataSource,i=(t=e.getFieldIndex(t),this.getShadowRow());return e&&0<=i?e.getValue(i,t):void 0},l.prototype.setData=function(t,e){var i=this.dataSource;t=i.getFieldIndex(t),i&&i.setValue(this.dataRow,t,e)},l.prototype.getRowData=function(){var t=this.dataRow;if(0<=t){var e=this.dataSource;if(e)return e.getRow(t)}return null},l.prototype.getRowObject=function(){var t=this.dataRow;if(0<=t){var e=this.dataSource;if(e)return e.getRowObject(t)}return null},l.prototype.isChanged=function(t){var e=this.dataSource;return e?e.isDataChanged(this.dataRow,t):void 0},l.prototype.canEdit=function(){return!1},l.prototype._setIndex=function(t){this._index=t},l.prototype._setChecked=function(t){this.provider.setItemChecked(this,t)||this._setExtents(t?this._getExtents()|e.ITEM_EXT_CHECKED:this._getExtents()&~e.ITEM_EXT_CHECKED)},l.prototype._setCheckable=function(t){this._setExtents(t?-5&this._getExtents():4|this._getExtents())},l.PARENT="_parent",l.$$_grid_item_id=0;var a=l;function l(){this._id=l.$$_grid_item_id++,this._index=-1}e.GridItem=a;h=a,ne.__extends(u,h),_dp(u,"dataRowId",{get:function(){return this._dataRowId}}),_dp(u,"editable",{get:function(){return this._editable}}),_dp(u,"readOnly",{get:function(){return this._readOnly}}),u.prototype.setEditable=function(t,e){this._editable=t,this._readOnly=e},u.prototype._getExtents=function(){return this._extents},u.prototype._setExtents=function(t){this._extents=t},_dp(u,"isData",{get:function(){return!0}}),_dp(u,"isDataRow",{get:function(){return!0}}),_dp(u,"dataRow",{get:function(){return this._dataRow}}),_dp(u,"dataId",{get:function(){return this.dataSource.getRowId(this._dataRow)}}),_dp(u,"isLeaf",{get:function(){return!0}}),_dp(u,"resizable",{get:function(){return!0}}),_dp(u,"displayLevel",{get:function(){return 0<=this._displayLevel?this._displayLevel:this.level}}),_dp(u,"type",{get:function(){return ht.ItemType.ROW}}),u.prototype.canEdit=function(){return!0},u.prototype.getShadowRow=function(){return this._dataRow},u.prototype.$_setDisplayLevel=function(t){this._displayLevel=t};var h,d=u;function u(t){var e=h.call(this)||this;return e._displayLevel=-1,e._extents=0,e._dataRow=t,e}e.GridRow=d;c=a,ne.__extends(p,c),p.prototype.dispose=function(){this._children=null,c.prototype.dispose.call(this)},_dp(p,"expanded",{get:function(){return this._expanded}}),_dp(p,"collapsed",{get:function(){return!this.expanded}}),_dp(p,"count",{get:function(){return this._children.length}}),_dp(p,"children",{get:function(){return this._children.slice()}}),_dp(p,"allFooterCount",{get:function(){return 0}}),_dp(p,"first",{get:function(){return 0<this._children.length?this._children[0]:null}}),_dp(p,"last",{get:function(){var t=this._children.length;return 0<t?this._children[t-1]:null}}),_dp(p,"firstItem",{get:function(){var t;return 0<this._children.length?(t=this._children[0])instanceof p?t.firstItem:t:null}}),_dp(p,"firstDataItem",{get:function(){if(0<this._children.length)for(var t=0,e=this._children.length;t<e;t++){if(this._children[t]instanceof p)return this._children[t].firstDataItem;if(this._children[t]instanceof d)return this._children[t]}return null}}),p.prototype.getFirstVisibleItem=function(t){return this},p.prototype.getLastItem=function(t){var e;if(0<this._children.length){for(var i=this._children.length;i&&(e=this._children[i-1],t&&e instanceof y);i--);return e instanceof p?e.getLastItem(t):e}return null},_dp(p,"lastDataItem",{get:function(){var t=this._children.length;if(0<t)for(;0<t;t--){var e=this._children[t-1];if(e instanceof p)return e.lastDataItem;if(e instanceof d)return e}return null}}),_dp(p,"descendantCount",{get:function(){return this._descendantCount}}),_dp(p,"expandable",{get:function(){return!0}}),_dp(p,"collapsable",{get:function(){return!0}}),p.prototype.getItem=function(t){if(t<0||t>=this._children.length)throw new RangeError("index is invalid: "+t);return this._children[t]},p.prototype.getRows=function(){var t=[];return this.$_collectRows(this,t),t},p.prototype.getFooterIndex=function(t){return 0},p.prototype.itemOfRow=function(t){for(var e=this._children.length;e--;)if(this._children[e].dataRow==t)return this._children[e];return null},p.prototype.indexOf=function(t){for(var e=this._children.length-1;0<=e;e--)if(this._children[e]==t)return e;return-1},p.prototype.isDescendant=function(t){if(t&&t!==this){for(var e=t._parent;e&&e!==this;)e=e._parent;return e===this}return!1},p.prototype.getDescendants=function(s){var t;return(!s||this._expanded)&&this._children&&0<this._children.length?(function t(e,i){for(var o=e.count,n=0;n<o;n++){var r=e.getItem(n);i.push(r),r instanceof p&&(!s||r.expanded)&&t(r,i)}}(this,t=[]),t):null},p.prototype.clear=function(){this._summaries=null,this._children.length=0,this._descendantCount=0},p.prototype.insert=function(t,e){this._addChild(e,t)},p.prototype.add=function(t){this._addChild(t,-1)},p.prototype.addAll=function(t){this._addChildren(t)},p.prototype.remove=function(t){var e=this.indexOf(t);0<=e&&(this._children.splice(e,1),t instanceof a)&&(t[a.PARENT]=null)},p.prototype.setItem=function(t,e){var i;t&&e&&t!==e&&(i=this._removeChild(t),this._insertChild(i,e),e._index=t.index)},p.prototype.setExpanded=function(t,e,i){t==this._expanded&&!i||(t?this.provider.expand(this,e,i,0):this.provider.collapse(this,e,i))},p.prototype.getNumber=function(t){t=this.$_getSummary(t);return t instanceof Vt.FieldSummary?t.count:t?t.length:this._descendantCount},p.prototype.getDataCount=function(t){var e=this.$_getSummary(t);if(e instanceof Vt.FieldSummary)return e.dataCount;if(e){var i=this.dataSource,o=e.length,n=0;if(0<o){for(var r=0;r<o;r++){var s=i.getValue(e[r],t);null!=s&&""!==s&&n++}return n}}return 0},p.prototype.getDataAvg=function(t){var e=this.$_getSummary(t);if(e instanceof Vt.FieldSummary)return e.dataAvg;if(e){for(var i=this.dataSource,o=e.length,n=0,r=0,s=0;s<o;s++){var a=i.getValue(e[s],t);isNaN(a)||(n+=a,r++)}return 0<r&&!isNaN(n)?n/r:NaN}return NaN},p.prototype.getSum=function(t){var e=this.$_getSummary(t);if(e instanceof Vt.FieldSummary)return e.sum;if(e){for(var i=this.dataSource,o=e.length,n=void 0,r=0;r<o;r++){var s=i.getValue(e[r],t);isNaN(s)||(n=(isNaN(n)?0:n)+s)}return n}return NaN},p.prototype.getMax=function(t){var e=this.$_getSummary(t),i=this.dataSource,o=i.getField(t).dataType===ht.ValueType.NUMBER;if(e instanceof Vt.FieldSummary)return e.max;if(e){for(var n,r=e.length,s=0,a=null;s<r;)null==(n=i.getValue(e[s++],t))||o&&isNaN(n)||(a=null==a||a<n?n:a);return a}return o?NaN:null},p.prototype.getMin=function(t){var e=this.$_getSummary(t),i=this.dataSource,o=i.getField(t).dataType===ht.ValueType.NUMBER;if(e instanceof Vt.FieldSummary)return e.min;if(e){for(var n,r=e.length,s=0,a=null;s<r;)null==(n=i.getValue(e[s++],t))||o&&isNaN(n)||(a=null==a||n<a?n:a);return a}return o?NaN:null},p.prototype.getAvg=function(t){var e=this.$_getSummary(t);if(e instanceof Vt.FieldSummary)return e.avg;if(e){var i=this.dataSource,o=e.length,n=void 0;if(1<o){for(var n=0,r=0;r<o;r++)n+=i.getValue(e[r],t);return n/o}if(1==o)return n=i.getValue(e[0],t)}return NaN},p.prototype.getVar=function(t,e){void 0===e&&(e=0);var i=this.$_getSummary(t);if(i instanceof Vt.FieldSummary)return 0===e?i.varsp:i.vars;if(i&&this.provider.summaryMode==ht.SummaryMode.STATISTICAL){var o=this.dataSource,n=i.length;if(1<n){for(var r=0,s=0;s<n;s++)r+=o.getValue(i[s],t);for(var a=r/n,r=0,s=0;s<n;s++)r+=Math.pow(o.getValue(i[s],t)-a,2);return r/=n-e}if(1==n)return 0}return NaN},p.prototype.getStdev=function(t,e){void 0===e&&(e=0);var i=this.$_getSummary(t);if(i instanceof Vt.FieldSummary)return 0==e?Math.sqrt(i.varsp):Math.sqrt(i.vars);if(i&&this.provider.summaryMode==ht.SummaryMode.STATISTICAL){var o=this.dataSource,n=i.length;if("string"==typeof t&&(t=o.getFieldIndex(t)),1<n){for(var r=0,s=0;s<n;s++)r+=o.getValue(i[s],t);for(var a=r/n,r=0,s=0;s<n;s++)r+=Math.pow(o.getValue(i[s],t)-a,2);return r=Math.sqrt(r/(n-e))}if(1==n)return 0}return NaN},p.prototype.getStdevp=function(t){return this.getStdev(t,1)},_dp(p,"isLeaf",{get:function(){return!1}}),p.prototype._setExpanded=function(t){this._expanded=t},p.prototype._incDescendants=function(t){this._descendantCount+=t=void 0===t?1:t},p.prototype._insertChild=function(t,e){this._children.splice(t,0,e),e instanceof a&&(e[a.PARENT]=this)},p.prototype._addChild=function(t,e){t&&this.indexOf(t)<0&&(e<0?this._children.push(t):this._children.splice(e,0,t),t[a.PARENT]=this)},p.prototype._addChildren=function(t){var e;if(t&&0<(e=t.length))for(var i=0;i<e;i++){var o=t[i];o&&this.indexOf(o)<0&&(o[a.PARENT]=this)._children.push(o)}},p.prototype._removeChild=function(t){var e=this.indexOf(t);return 0<=e&&(this._children.splice(e,1),t instanceof a)&&(t[a.PARENT]=null),e},p.prototype._exchangeItems=function(t,e){if(t<0||t>=this._children.length)throw new RangeError("index1 is out of range: "+t);if(e<0||e>=this._children.length)throw new RangeError("index2 is out of range: "+e);var i;t!==e&&(i=this._children[t],this._children[t]=this._children[e],this._children[e]=i)},p.prototype._moveChild=function(t,e){var i=this._children.length;if(t<0||i<=t)throw new RangeError("index is out of range: "+t);var o=Math.min(Math.max(t+e,0),i-1),i=this._children[t];if(e<0)for(var n=t;o<n;n--)this._children[n]=this._children[n-1];else for(n=t;n<o;n++)this._children[n]=this._children[n+1];this._children[o]=i},p.prototype.$_collectRows=function(t,e){for(var i=t.count,o=0;o<i;o++){var n=t.getItem(o);n instanceof p?this.$_collectRows(n,e):n.isDataRow&&e.push(n.dataRow)}},p.prototype.$_getSummary=function(t){var e=this.dataSource;if(!(e instanceof C.DataProvider))return null;null==this._summaries&&(this._summaries={}),"string"==typeof t&&(t=e.getFieldIndex(t));var i=this._summaries?this._summaries[t]:null;return i||e.canSummarize(t)&&(i=this.$_summarize(t,e))&&(this._summaries[t]=i),i},p.prototype.$_summarize=function(t,e){var i=this.provider.summaryMode;return i!=ht.SummaryMode.NONE?(null==this._rows&&(this._rows=[],this.$_collectRows(this,this._rows)),3<this._rows.length&&e.canSummarize(t)?(t=new Vt.FieldSummary(t),e.summarizeRange(t,this._rows,i==ht.SummaryMode.STATISTICAL),t):this._rows):null},p.prototype._saveExpanded=function(){this._setExtents(this.expanded?16|this._getExtents():-17&this._getExtents())},p.prototype._restoreExpanded=function(t){if(void 0===t&&(t=!1),this._setExpanded(0!=(16&this._getExtents())),t)for(var e=this.count-1;0<=e;e--){var i=this.getItem(e);i instanceof p&&i._restoreExpanded(!0)}};var c,_=p;function p(){var t=c.call(this)||this;return t._children=[],t._expanded=!1,t._descendantCount=0,t._summaries=null,t._rows=null,t}e.GroupItem=_;f=_,ne.__extends(g,f),g.prototype.dispose=function(){this._allFooters=null,f.prototype.dispose.call(this)},_dp(g,"groupField",{get:function(){return this._groupField}}),_dp(g,"groupValue",{get:function(){return this._groupValue},set:function(t){this._groupValue=t}}),g.prototype._getExtents=function(){return this._extents},g.prototype._setExtents=function(t){this._extents=t},_dp(g,"footer",{get:function(){return this._footer}}),_dp(g,"type",{get:function(){return ht.ItemType.GROUP}}),_dp(g,"footerCount",{get:function(){return this._footers}}),_dp(g,"allFooterCount",{get:function(){return this._allFooters.length}}),g.prototype.getHiddenFooterCount=function(){for(var t=0,e=0;e<this.children.length;e++)this.children[e].hiddenFooter&&t++;return t},g.prototype.getFooter=function(t){return t=this.indexOf(this._footer)+t,this._children[t]},g.prototype.getFooterIndex=function(t){return t.$_footerIndex},g.prototype.isFooter=function(t){if(t===this._footer)return!0;if(1<this._footers)for(var e=this._children,i=e.length-1;0<=i;i--){if(e[i]===t)return!0;if(e[i]===this._footer)break}return!1},g.prototype._addChild=function(t,e){t instanceof y?(this._allFooters.push(t),t[a.PARENT]=this,t.hiddenFooter||(f.prototype._addChild.call(this,t,e),this._footer=this._footer||t,this._footers++)):f.prototype._addChild.call(this,t,e)},g.prototype.getFirstVisibleItem=function(t){if(this.visible)return this;for(var e=0,i=this.children.length;e<i;e++){var o=this.children[e];if(t&&this.footer&&this.footer.visible)return this.footer;if(o instanceof _){var n=o.getFirstVisibleItem(t);if(n)return n}else if(o.visible)return o}return null};var f,r=g;function g(t){var e=f.call(this)||this;return e._footers=0,e._extents=0,e._allFooters=[],e._groupField=t,e}e.GroupItemImpl=r;m=a,ne.__extends(v,m),_dp(v,"footerIndex",{get:function(){return this.$_footerIndex}}),_dp(v,"vindex",{get:function(){return-1<this.$_vindex?this.$_vindex:this.$_footerIndex}}),_dp(v,"hiddenFooter",{get:function(){return this._hiddenFooter},set:function(t){this._hiddenFooter=t}}),v.prototype._getExtents=function(){return this._extents},v.prototype._setExtents=function(t){this._extents=t},_dp(v,"isLeaf",{get:function(){return!0}}),_dp(v,"isData",{get:function(){return!0}}),_dp(v,"displayLevel",{get:function(){return this.level}}),_dp(v,"type",{get:function(){return ht.ItemType.FOOTER}});var m,y=v;function v(){var t=m.call(this)||this;return t.$_footerIndex=0,t._hiddenFooter=!1,t._extents=0,t}e.GroupFooter=y})),Bt=(t(rt),rt.ITEM_EXT_CHECKED,rt.ItemState,rt.ItemState_isEditing,rt.ItemState_isInserting,rt.ItemState_isInsertItem,rt.RowStyle,rt.GridItem,rt.GridRow,rt.GroupItem,rt.GroupItemImpl,rt.GroupFooter,e(function(t,e){Object.defineProperty(e,"__esModule",{value:!0});i=rt.GroupItemImpl,ne.__extends(n,i),_dp(n,"provider",{get:function(){return this._provider}}),_dp(n,"level",{get:function(){return 0}}),_dp(n,"expanded",{get:function(){return!1}}),_dp(n,"isLeaf",{get:function(){return!1}}),_dp(n,"dataSource",{get:function(){return this._provider.dataSource}}),_dp(n,"expandable",{get:function(){return!1}}),_dp(n,"collapsable",{get:function(){return!1}});var i,o=n;function n(t){var e=i.call(this,-1)||this;return e._provider=t,e}e.RootItem=o;r=P.EventAware,ne.__extends(a,r),a.prototype._doDispose=function(){return this._rootItem.dispose(),null},_dp(a,"hideDeleted",{get:function(){return this._hideDeleted},set:function(t){t!=this._hideDeleted&&(this._hideDeleted=t,this._hideDeletedChanged())}}),_dp(a,"summaryMode",{get:function(){return ht.SummaryMode.AGGREGATE},set:function(t){}}),_dp(a,"sortMode",{get:function(){return ht.SortMode.AUTO},set:function(t){}}),_dp(a,"fixedCount",{get:function(){return 0}}),_dp(a,"maxItemCount",{get:function(){return 0},set:function(t){}}),_dp(a,"movable",{get:function(){return!1}}),a.prototype.setFixed=function(t,e,i){},a.prototype.attachItem=function(t){t._parent=this._rootItem},a.prototype.getItemsByIndices=function(t){var e=[];if(t)for(var i=0,o=t.length;i<o;i++){var n=this.getItem(t[i]);n&&e.push(n)}return e},a.prototype.getIndexOfRow=function(t,e){t=this.getItemOfRow(t,e);return t?t.index:-1},a.prototype.getIndicesOfRows=function(t,e){var i=[],o=t?t.length:0;if(o)for(var n=0;n<o;n++){var r=this.getItemOfRow(t[n],e);i.push(r?r.index:-1)}return i},a.prototype.getItemsByRows=function(t,e){void 0===e&&(e=!1);for(var i=[],o=t?t.length:0,n=0;n<o;n++){var r=this.getItemOfRow(t[n],e);r&&i.push(r)}return i},a.prototype.exchange=function(t,e){},a.prototype.setCheckable=function(t,e){t&&e!=t.checkable&&(t._setCheckable(e),this._fireCheckableChanged(t))},a.prototype.setGroupCheckable=function(t){},a.prototype.checkItem=function(t,e,i,o){var n;t&&(n=t.checked,i?(this._clearChecked(),e&&this._setChecked(t,!0),e!=n&&o&&this._fireItemChecked(t),this._fireRefreshClient()):e!=n&&(this._setChecked(t,e),o?this._fireItemChecked(t):this._fireRefreshClient()),this._fireItemCheckChanged([t],e))},a.prototype.checkItems=function(t,e,i){if(t&&0<t.length){for(var o=0,n=t.length;o<n;o++){var r=t[o];r instanceof rt.GridItem&&this._setChecked(r,e)}i?1===t.length?this._fireItemChecked(t[0]):this._fireItemsChecked(t,e):this._fireRefreshClient()}this._fireItemCheckChanged(t,e)},a.prototype.checkAll=function(t,e,i,o,n){var r=this.itemCount;if(i)for(var s=0;s<r;s++){var a=this.getItem(s);a.checkable&&this._setChecked(a,t)}else for(s=0;s<r;s++)this._setChecked(this.getItem(s),t);o?this._fireItemAllChecked(t):this._fireRefreshClient(),this._fireItemCheckChanged(null,t)},a.prototype._setCheckItem=function(t,e){t._setChecked(e)},a.prototype._clearDisplayLevels=function(){},a.prototype.canUpdate=function(t,e){var i,o;return!!t&&!!(i=this.dataSource)&&(o=t.dataRow,!!i.canUpdateField(o,e))&&(e=t.itemState,t=rt.ItemState_isInserting(e)||e===rt.ItemState.DUMMY,0<=o||t)&&(t||i.canUpdateRow(o))},a.prototype.canAppend=function(){var t=this.dataSource;return t&&t.canAppendRow()},a.prototype.canInsert=function(t){var e;return!!t&&(t=t.dataRow,e=this.dataSource)&&e.canInsertRow(t)},a.prototype.canDelete=function(t){var e;return!!t&&(t=t.dataRow,e=this.dataSource,0<=t)&&e&&e.canDeleteRow(t)},a.prototype.appendDummy=function(){},a.prototype.cancelDummy=function(){},a.prototype.findItem=function(t,e,i,o,n){return-1},a.prototype.findCell=function(t,e,i,o,n,r){return null},a.prototype.getNumber=function(t){return NaN},a.prototype.getSum=function(t){return NaN},a.prototype.getMax=function(t){return NaN},a.prototype.getMin=function(t){return NaN},a.prototype.getAvg=function(t){return NaN},a.prototype.getVar=function(t){return NaN},a.prototype.getVarp=function(t){return NaN},a.prototype.getStdev=function(t){return NaN},a.prototype.getStdevp=function(t){return NaN},a.prototype.getDataCount=function(t){return NaN},a.prototype.getDataAvg=function(t){return NaN},_dp(a,"isIndexing",{get:function(){return this._indexing}}),a.prototype.setRowHeight=function(t,e,i){!t.$_setHeight(e,i)||isNaN(e)||(i?this._explicitHeighted=!0:this._rowHeighted=!0)},a.prototype.clearRowHeights=function(t){if(t||this._rowHeighted){for(var e=!1,i=this.itemCount-1;0<=i;i--){var o=this.getItem(i);isNaN(o.height)&&!o.heights||(o.$_clearHeight(t),e=!(o.heights=null))}return this._rowHeighted=!1,t&&(this._explicitHeighted=!1),e}},a.prototype.isRowHeighted=function(t){return void 0===t&&(t=!0),this._rowHeighted||t&&this._explicitHeighted},a.prototype.setCheckFieldIndex=function(t){},a.prototype.getItemChecked=function(t,e){return e},a.prototype.setItemChecked=function(t,e){return!1},_dp(a,"rootItem",{get:function(){return this._rootItem}}),a.prototype._createRootItem=function(){return new o(this)},a.prototype._hideDeletedChanged=function(){},a.prototype.$_canFire=function(){return this._eventLock<=0},a.prototype._setChecked=function(t,e){t._setChecked(e)},a.prototype._clearChecked=function(){for(var t=0,e=this.itemCount;t<e;t++)this._setChecked(this.getItem(t),!1)},a.prototype._resetItemIndicies=function(t){if(this._indexing)for(var e=t,i=this.itemCount;e<i;e++)this.getItem(e)._index=e},a.prototype._setExpanded=function(t,e){t._setExpanded(e)},a.prototype._resetItemIndex=function(t){var e=this.getItem(t);e&&(e._index=t)},a.prototype._incDescendents=function(t,e){t._descendantCount+=e,t.parent&&this._incDescendents(t.parent,e)},a.prototype._copyExtents=function(t,e){t instanceof rt.GridItem&&e instanceof rt.GridItem&&e._setExtents(t._getExtents())},a.prototype._fireReset=function(){this._eventLock<=0&&this.fireEvent("onItemProviderReset")},a.prototype._fireRefresh=function(){this._eventLock<=0&&this.fireEvent("onItemProviderRefresh")},a.prototype._fireRefreshClient=function(){this._eventLock<=0&&this.fireEvent("onItemProviderRefreshClient")},a.prototype._fireItemInserted=function(t){this._eventLock<=0&&this.fireEvent("onItemProviderItemInserted",t)},a.prototype._fireItemDeleted=function(t){this._eventLock<=0&&this.fireEvent("onItemProviderItemDeleted",t)},a.prototype._fireItemUpdated=function(t){this._eventLock<=0&&this.fireEvent("onItemProviderItemUpdated",t)},a.prototype._fireCheckableChanged=function(t){this._eventLock<=0&&this.fireEvent("onItemProviderCheckableChanged",t)},a.prototype._fireItemChecked=function(t){this._eventLock<=0&&this.fireEvent("onItemProviderItemChecked",t)},a.prototype._fireItemsChecked=function(t,e){this._eventLock<=0&&this.fireEvent("onItemProviderItemsChecked",t,e)},a.prototype._fireItemAllChecked=function(t){this._eventLock<=0&&this.fireEvent("onItemProviderItemAllChecked",t)},a.prototype._fireItemCheckChanged=function(t,e){this.fireEvent("onItemProviderItemCheckChanged",t,e)},a.prototype._fireRowStateChanged=function(t){this._eventLock<=0&&this.fireEvent("onItemProviderRowStateChanged",t)},a.prototype._fireRowStatesChanged=function(t){this._eventLock<=0&&this.fireEvent("onItemProviderRowStatesChanged",t)},a.prototype._fireRowStatesCleared=function(){this._eventLock<=0&&this.fireEvent("onItemProviderRowStatesCleared")},a.prototype._fireSort=function(t,e,i){this._eventLock<=0&&this.fireEvent("onItemProviderSort",t,e,i)},a.prototype._fireSorted=function(){this._eventLock<=0&&this.fireEvent("onItemProviderSorted")},a.prototype._fireFilterAdded=function(t,e){this._eventLock<=0&&this.fireEvent("onItemProviderFilterAdded",t,e)},a.prototype._fireFilterRemoved=function(t,e){this._eventLock<=0&&this.fireEvent("onItemProviderFilterRemoved",t,e)},a.prototype._fireFilterCleared=function(t){this._eventLock<=0&&this.fireEvent("onItemProviderFilterCleared",t)},a.prototype._fireFilterAllCleared=function(){this._eventLock<=0&&this.fireEvent("onItemProviderFilterAllCleared")},a.prototype._fireFiltered=function(t,e){this._eventLock<=0&&this.fireEvent("onItemProviderFiltered",t,e)},a.prototype._fireCommandStackChanged=function(t,e){this._eventLock<=0&&this.fireEvent("onItemProviderCommandStackChanged",t,e)},a.prototype._fireDataLoadComplated=function(){this._eventLock<=0&&this.fireEvent("onItemProviderDataLoadComplated")};var r,s=a;function a(t){var e=r.call(this)||this;return e._hideDeleted=!1,e._eventLock=0,e._rowHeighted=!1,e._explicitHeighted=!1,e._indexing=t,e._rootItem=e._createRootItem(),e}e.ItemProvider=s;l=s,ne.__extends(h,l),h.prototype._doDispose=function(){l.prototype._doDispose.call(this)},_dp(h,"source",{get:function(){return this._source},set:function(t){t!=this._source&&(this._source&&this._source.removeListener(this),this._clearItems(),this._source=t,this._source)&&(this._populateItems(),this._source.addListener(this))}}),_dp(h,"dataSource",{get:function(){return this._source&&this._source.dataSource},set:function(t){this._source&&(this._source.dataSource=t)}}),_dp(h,"rowCount",{get:function(){return this._source?this._source.rowCount:0}}),_dp(h,"fixedCount",{get:function(){return this._source?this._source.fixedCount:0}}),_dp(h,"maxItemCount",{get:function(){return this._source?this._source.maxItemCount:0},set:function(t){this._source&&(this._source.maxItemCount=t)}}),_dp(h,"sorted",{get:function(){return this._source&&this._source.sorted}}),h.prototype.setFixed=function(t,e,i){this._source&&this._source.setFixed(t,e,i)},h.prototype.getIndexOfRow=function(t){return this._source?this._source.getIndexOfRow(t,!1):-1},h.prototype.getItemOfRow=function(t,e){return this._source?this._source.getItemOfRow(t,e):null},h.prototype._refreshItems=function(){this._source&&this._source._refreshItems()},h.prototype._clearDisplayLevels=function(){this._source&&this._source._clearDisplayLevels()},h.prototype._initialize=function(){},h.prototype._clearItems=function(){},h.prototype._populateItems=function(){this._resetItemIndicies(0)},h.prototype.onItemProviderReset=function(t){this._populateItems(),this._fireReset()},h.prototype.onItemProviderRefresh=function(t){this._populateItems(),this._fireRefresh()},h.prototype.onItemProviderRefreshClient=function(t){this._fireRefreshClient()},h.prototype.onItemProviderItemInserted=function(t,e){this._resetItemIndicies(0),this._fireItemInserted(e)},h.prototype.onItemProviderItemDeleted=function(t,e){this._resetItemIndicies(0),this._fireItemDeleted(e)},h.prototype.onItemProviderItemUpdated=function(t,e){this._resetItemIndicies(0),this._fireItemUpdated(e)},h.prototype.onItemProviderCheckableChanged=function(t,e){this._fireCheckableChanged(e)},h.prototype.onItemProviderItemChecked=function(t,e){this._fireItemChecked(e)},h.prototype.onItemProviderItemsChecked=function(t,e,i){this._fireItemsChecked(e,i)},h.prototype.onItemProviderItemAllChecked=function(t,e){this._fireItemAllChecked(e)},h.prototype.onItemProviderItemCheckChanged=function(t,e,i){this._fireItemCheckChanged(e,i)},h.prototype.onItemProviderRowStateChanged=function(t,e){this._fireRowStateChanged(e)},h.prototype.onItemProviderRowStatesChanged=function(t,e){this._fireRowStatesChanged(e)},h.prototype.onItemProviderRowStatesCleared=function(t){this._fireRowStatesCleared()},h.prototype.onItemProviderFilterAdded=function(t,e,i){},h.prototype.onItemProviderFilterRemoved=function(t,e,i){},h.prototype.onItemProviderFilterCleared=function(t,e){},h.prototype.onItemProviderFilterAllCleared=function(t){},h.prototype.onItemProviderFiltered=function(t,e,i){},h.prototype.onItemProviderSort=function(t,e,i){},h.prototype.onItemProviderSorted=function(t){},h.prototype.onItemProviderCommandStackChanged=function(t,e,i){this._fireCommandStackChanged(e,i)};var l,s=h;function h(t,e){e=l.call(this,e)||this;return e._initialize(),e.source=t,e}e.ProxyItemProvider=s})),A=(t(Bt),Bt.RootItem,Bt.ItemProvider,Bt.ProxyItemProvider,e(function(t,e){Object.defineProperty(e,"__esModule",{value:!0});r=rt.GridRow,ne.__extends(o,r),_dp(o,"values",{get:function(){},set:function(t){}}),o.prototype.beginEdit=function(t,e){this.$_clearHeight(!0)},o.prototype.setValue=function(t,e){},_dp(o,"resizable",{get:function(){return!1}}),_dp(o,"itemState",{get:function(){return this._state}}),_dp(o,"editable",{get:function(){return!0}}),o.prototype.getData=function(t){return null},o.prototype.setData=function(t,e){},o.prototype.getRowData=function(){return null},o.prototype.getRowObject=function(){return null},o.prototype._clearDisplayLevels=function(){};var r,i=o;function o(t,e,i,o,n){o=r.call(this,o)||this;return o._started=!1,o._checkDiff=!1,o._strictDiff=!1,o._target=e,t.attachItem(o),o._setIndex(i),o._state=n,o.$_setDisplayLevel(e?e.displayLevel:0),o}e.DummyEditItem=i;s=rt.GridRow,ne.__extends(n,s),_dp(n,"values",{get:function(){return this._values.concat()},set:function(t){var e=this.provider,i=this.dataSource,o=i.fieldCount;if(t instanceof Array)for(var o=Math.min(o,t.length),n=0;n<o;n++){var r=i.getField(n),s=this._values[n],a=r.readValue(t[n]);this._values[n]=a,this._started&&!r.equalValues(s,a)&&e._editItemCellUpdated(this,n,s,a)}else if(t)for(n=0;n<o;n++){var l=i.getOrgFieldName(n);t.hasOwnProperty(l)&&(r=i.getField(n),s=this._values[n],a=r.readValue(t[l]),this._values[n]=a,this._started)&&!r.equalValues(s,a)&&e._editItemCellUpdated(this,n,s,a)}}}),_dp(n,"invalidFields",{get:function(){return this._invalidFields}}),n.prototype.beginEdit=function(t,e){rt.ItemState_isInserting(this._state)&&this.$_clearHeight(!0),this._started=!0,this._checkDiff=t,this._strictDiff=e},n.prototype.setValue=function(t,e){var i=this.dataSource;if(t<0&&t>=i.fieldCount)throw new c.DataSourceError("field index is out of bounds: "+t);var i=i.getField(t),o=this._values[t];e=i.readValue(e),this._values[t]=e,this._started&&!i.equalValues(o,e)&&this.provider._editItemCellUpdated(this,t,o,e),this.$_clearHeight(!1)},_dp(n,"resizable",{get:function(){return!1}}),_dp(n,"itemState",{get:function(){return this._state}}),_dp(n,"level",{get:function(){return this._target?this._target.level:1}}),n.prototype.getData=function(t){if((t=this.dataSource.getFieldIndex(t))<0&&t>=this.dataSource.fieldCount)throw new RangeError("field index is out of bounds: "+t);return this._values[t]},n.prototype.setData=function(t,e){var i=this.dataSource;if(t<0&&t>=i.fieldCount)throw new RangeError("field index is out of bounds: "+t);var i=i.getField(t),o=this._values[t],n=!this._checkDiff;e=i.readValue(e),(n=n||(this._strictDiff?!i.equalValues(o,e):!i.sameValues(o,e)))&&(this._values[t]=e,this._changeValues[t]=!0,this.provider._editItemCellUpdated(this,t,o,e),this.provider._editItemCellEdited(this,t)),this.$_clearHeight(!1)},n.prototype.getRowData=function(){return this._values.concat()},n.prototype.getRowObject=function(){var t=this.dataSource;if(t){for(var e={},i=0,o=t.fieldCount;i<o;i++)e[t.getOrgFieldName(i)]=this._values[i];return e}return null},n.prototype.isEdited=function(t){return this._changeValues[t]},n.prototype._setChecked=function(t){this.provider.setItemChecked(this,t)||this._setExtents(t?this._getExtents()|rt.ITEM_EXT_CHECKED:this._getExtents()&~rt.ITEM_EXT_CHECKED)},n.prototype._clearDisplayLevels=function(){};var s,_=n;function n(t,e,i,o,n){o=s.call(this,o)||this;return o._values=[],o._changeValues=[],o._started=!1,o._checkDiff=!1,o._strictDiff=!1,o._invalidFields=[],o._target=e,t.attachItem(o),o._setIndex(i),o._state=n,o.$_setDisplayLevel(e?e.displayLevel:0),o._invalidFields=[],o}e.EditItem=_;a=Bt.ProxyItemProvider,ne.__extends(h,a),h.prototype._doDispose=function(){this._saveDs=null,a.prototype._doDispose.call(this)},h.prototype.isDataEditing=function(){return this.isEditing()},h.prototype.cancelDataEditing=function(){this.isEditing()&&this.fireCancelRequest()},h.prototype.commitDataEditing=function(){this.isEditing()&&this.fireCommitRequest()},h.prototype.editCommandStackChanged=function(t,e,i){var o=this._saveDs;o?this._fireCommandStackChanged(e||o.canUndo,i||o.canRedo):this._fireCommandStackChanged(e,i)},_dp(h,"isCheckDiff",{get:function(){return this._checkDiff},set:function(t){this._checkDiff=t}}),_dp(h,"isCheckCellDiff",{get:function(){return this._checkCellDiff},set:function(t){this._checkCellDiff=t}}),_dp(h,"isStrictDiff",{get:function(){return this._strictDiff},set:function(t){this._strictDiff=t}}),_dp(h,"editingItem",{get:function(){return this._commiting||this.isEditing()?this._editingItem:null}}),_dp(h,"isUpdating",{get:function(){return this._editingState==rt.ItemState.UPDATING}}),_dp(h,"isInserting",{get:function(){return this._editingState==rt.ItemState.INSERTING}}),_dp(h,"isAppending",{get:function(){return this._editingState==rt.ItemState.APPENDING}}),_dp(h,"undoable",{get:function(){return this._undoable&&this._saveDs&&this._saveDs.undoable},set:function(t){t!=this._undoable&&(this._undoable=t,this._commands.flush(),this._saveDs.undoable=t)}}),_dp(h,"cancelWhenLastUndo",{get:function(){return this._cancelWhenLastUndo},set:function(t){this._cancelWhenLastUndo=t}}),_dp(h,"canUndo",{get:function(){return this._commands.canUndo||this._saveDs&&this._saveDs.canUndo}}),_dp(h,"canRedo",{get:function(){return this._commands.canRedo||this._saveDs&&this._saveDs.canRedo}}),_dp(h,"undoing",{get:function(){return this._commands.undoing}}),_dp(h,"redoing",{get:function(){return this._commands.redoing}}),h.prototype.isEditing=function(t){return rt.ItemState_isEditing(this._editingState)&&(!t||t===this._editingItem)},h.prototype.isEdited=function(t){return rt.ItemState_isEditing(this._editingState)&&(!t||t===this._editingItem)&&this._modified},h.prototype.setDiffs=function(t,e,i){this._checkDiff=t,this._checkCellDiff=e,this._strictDiff=i},h.prototype.edit=function(t){if(this.isEditing())return!0;if(t)try{return this._beginUpdate(t),!0}catch(t){throw this.cancel(),t}return!1},h.prototype.editData=function(t,e,i){var o;if(t&&(o=this.dataSource)&&0<=e&&e<o.fieldCount){if(!this.isEditing())try{return this._beginUpdate(t),!0}catch(t){throw this.cancel(),t}this._editingItem.setData(e,i)}return!1},h.prototype.appendDummy=function(){if(!this.isEditing())try{this._beginAppendDummy()}catch(t){this.cancelDummy()}},h.prototype.append=function(t){if(!this.isEditing())try{return this._beginAppend(t),!0}catch(t){throw this.cancel(),t}return!1},h.prototype.insert=function(t,e,i,o){if(!this.isEditing())try{return this._beginInsert(t,e,i,o),!0}catch(t){throw this.cancel(),t}return!1},h.prototype.cancelDummy=function(){this._dummyEditItem&&this._cancelDummyEdit()},h.prototype.cancel=function(){this.isEditing()&&this._cancelEdit()},h.prototype.commit=function(t){if(this.isEditing()){this._commiting=!0;try{var e=this.dataSource;if(e){if(this._editingState==rt.ItemState.UPDATING&&this.isCheckDiff){for(var i=this._editingItem.values,o=i.length,n=this.isStrictDiff,r=!1,s=0;s<o;s++)if(n){if(!e.getField(s).equalValues(this._orgItem.getData(s),i[s])){r=!0;break}}else if(!e.getField(s).sameValues(this._orgItem.getData(s),i[s])){r=!0;break}if(!r)return this._cancelEdit(),!0}return this._commitEdit(t)}}finally{this._commiting=!1}}return!0},h.prototype.execute=function(t){t&&(this.undoable?this._commands.execute(t):t.execute())},h.prototype.undo=function(){this.isEditing()?(this._commands.undo(),!this._commands.canUndo&&this._cancelWhenLastUndo&&this.cancel()):this._saveDs&&this._saveDs.undo()},h.prototype.redo=function(){this.isEditing()?this._commands.redo():this._saveDs&&this._saveDs.redo()},h.prototype.clearCommandStack=function(t){void 0===t&&(t=!0),this._commands.flush(),t&&this._saveDs&&this._saveDs.clearCommandStack()},h.prototype.revert=function(t){},h.prototype.revertAll=function(t){},h.prototype._checkEditing=function(){if(!this.isEditing())throw new Error("itemProvider is not editing")},h.prototype._checkNotEditing=function(){if(this.isEditing())throw new Error("itemProvider is already editing")},h.prototype._beginUpdate=function(t){if(!t)throw new Error("item is null");this._checkNotEditing(),this._modified=!1,this._editingItem=this._doBeginUpdate(t),this._editingItem.beginEdit(this.isCheckCellDiff,this.isStrictDiff),this._editingItem&&(this._orgItem=t,this._editingState=rt.ItemState.UPDATING,this._commands.flush(),this.fireUpdateStarted(this._editingItem))},h.prototype._doBeginUpdate=function(t){return null},h.prototype._beginAppendDummy=function(){this._dummyEditItem=this._doBeginAppendDummy()},h.prototype._doBeginAppendDummy=function(){return null},h.prototype._beginAppend=function(t){this._checkNotEditing(),this._modified=!1,this._editingItem=this._doBeginAppend(t),this._editingItem.beginEdit(this.isCheckCellDiff,this.isStrictDiff),this._editingItem&&(this._editingState=rt.ItemState.APPENDING,this._commands.flush(),this.fireAppendStarted(this._editingItem))},h.prototype._doBeginAppend=function(t){return null},h.prototype._beginInsert=function(t,e,i,o){void 0===i&&(i=!1),void 0===o&&(o=!1),this._checkNotEditing(),this._modified=!1,this._editingItem=this._doBeginInsert(t,e,i,o),this._editingItem.beginEdit(this.isCheckCellDiff,this.isStrictDiff),this._editingItem&&(this._editingState=rt.ItemState.INSERTING,this._resetItemIndicies(0),this._commands.flush(),this.fireInsertStarted(this._editingItem))},h.prototype._doBeginInsert=function(t,e,i,o){return null},h.prototype._updateEditingRow=function(t){return!1},h.prototype._insertEditingRow=function(t){return!1},h.prototype._cancelDummyEdit=function(){this._dummyEditItem=null,this._doCancelDummyEdit()},h.prototype._cancelEdit=function(){this._checkEditing();var e=this._editingState;try{this._editingState=rt.ItemState.NORMAL,this._doCancelEdit(e,this._orgItem)}catch(t){throw this._editingState=e,t}this._modified=!1,this._commands.flush(),this.fireCanceled()},h.prototype._doCancelDummyEdit=function(){},h.prototype._doCancelEdit=function(t,e){t==rt.ItemState.INSERTING&&this._resetItemIndicies(0)},h.prototype._commitEdit=function(t){if(this._checkEditing(),!this.dataSource)throw new Error("data provier is null");try{this.fireItemCommitting(this._editingItem)}catch(t){alert(t.message)}var e=this._editingState,i=!1;if(this.isUpdating)try{this._editingState=rt.ItemState.NORMAL,i=this._doCompleteUpdate(this._orgItem,t)}catch(t){throw this._editingState=e,t}else try{this._editingState=rt.ItemState.NORMAL,i=this._doCompleteInsert(e==rt.ItemState.APPENDING)}catch(t){throw this._editingState=e,t}return i?(this._modified=!1,this._doCommitEdit(e,this._orgItem),this._commands.flush(),this.fireCommitted(this._editingItem)):this._editingState=e,i},h.prototype._doCommitEdit=function(t,e){return!1},h.prototype._editItemCellEdited=function(t,e){t&&this.isEditing(t)&&(this._modified=!0,this.fireItemCellEdited(t,e))},h.prototype._editItemCellUpdated=function(t,e,i,o){this.isEditing(t)&&(this._modified=!0,this.fireItemCellUpdated(t,e,i,o))},h.prototype.$_editingItem=function(){return this._editingItem},h.prototype.$_dummyItem=function(){return this._dummyEditItem},h.prototype.fireUpdateStarted=function(t){this.$_canFire()&&this.fireEvent(h.UPDATE_STARTED,t)},h.prototype.fireAppendStarted=function(t){this.$_canFire()&&this.fireEvent(h.APPEND_STARTED,t)},h.prototype.fireInsertStarted=function(t){this.$_canFire()&&this.fireEvent(h.INSERT_STARTED,t)},h.prototype.fireItemCellEdited=function(t,e){this.$_canFire()&&this.fireEvent(h.CELL_EDITED,t,e)},h.prototype.fireItemCellUpdated=function(t,e,i,o){this.$_canFire()&&this.fireEvent(h.CELL_UPDATED,t,e,i,o)},h.prototype.fireItemCommitting=function(t){this.$_canFire()&&this.fireEvent(h.COMMITTING,t)},h.prototype.fireCommitted=function(t){this.$_canFire()&&this.fireEvent(h.COMMITTED,t)},h.prototype.fireCanceled=function(){this.$_canFire()&&this.fireEvent(h.CANCELED)},h.prototype.fireCommitRequest=function(){this.$_canFire()&&this.fireEvent(h.COMMIT_REQUEST)},h.prototype.fireCancelRequest=function(){this.$_canFire()&&this.fireEvent(h.CANCEL_REQUEST)},h.prototype.onItemProviderReset=function(t){a.prototype.onItemProviderReset.call(this,t);t=this.dataSource;t!=this._saveDs&&(this._saveDs&&this._saveDs.unregisterClient(this),this._saveDs=t,this._saveDs)&&this._saveDs.registerClient(this)},h.prototype.onItemProviderRefresh=function(t){a.prototype.onItemProviderRefresh.call(this,t)},h.prototype.onItemProviderRefreshClient=function(t){a.prototype.onItemProviderRefreshClient.call(this,t)},h.prototype.onItemProviderItemInserted=function(t,e){a.prototype.onItemProviderItemInserted.call(this,t,e)},h.prototype.onItemProviderItemDeleted=function(t,e){a.prototype.onItemProviderItemDeleted.call(this,t,e)},h.prototype.onItemProviderItemUpdated=function(t,e){a.prototype.onItemProviderItemUpdated.call(this,t,e)},h.prototype.onItemProviderCommandStackChanged=function(t,e,i){var o=this._commands;this._fireCommandStackChanged(e||o.canUndo,i||o.canRedo)},h.UPDATE_STARTED="onItemEditUpdateStarted",h.APPEND_STARTED="onItemEditAppendStarted",h.INSERT_STARTED="onItemEditInsertStarted",h.CELL_EDITED="onItemEditCellEdited",h.CELL_UPDATED="onItemEditCellUpdated",h.COMMITTING="onItemEditCommitting",h.COMMITTED="onItemEditCommitted",h.CANCELED="onItemEditCanceled",h.COMMIT_REQUEST="onItemEditCommitRequest",h.CANCEL_REQUEST="onItemEditCancelRequest";var a,l=h;function h(t,e){e=a.call(this,t,e)||this;return e._checkDiff=!1,e._checkCellDiff=!1,e._strictDiff=!1,e._undoable=!1,e._cancelWhenLastUndo=!1,e._orgItem=null,e._editingItem=null,e._dummyEditItem=null,e._editingState=rt.ItemState.NORMAL,e._insertMode=0,e._modified=!1,e._commiting=!1,e._saveDs=null,e._commands=new I.EditCommandStack(e),t&&(e._saveDs=t.dataSource)&&e._saveDs.registerClient(e),e}e.EditableItemProvider=l;d=l,ne.__extends(u,d),u.prototype._doDispose=function(){d.prototype._doDispose.call(this)},_dp(u,"itemCount",{get:function(){var t=this.source.itemCount;return(t+=this.isInserting||this.isAppending?1:0)+(this.$_dummyItem()?1:0)}}),u.prototype.getItem=function(t,e){var i,o,n=this.source;return e?n.getItem(t,e):(e=this.$_editingItem(),i=this.$_dummyItem(),this.isEditing()&&e.index==t?e:(this.isInserting?o=t>e.index?n.getItem(t-1):n.getItem(t):t<n.itemCount&&(o=n.getItem(t)),o||(i&&t==this.itemCount-1?i:null)))},u.prototype.getItems=function(t,e){return this.source.getItems(t,e)},u.prototype._doBeginUpdate=function(t){return this._createEditItem(t,rt.ItemState.UPDATING,null,!1,!1)},u.prototype._doBeginAppendDummy=function(){return this.$_dummyItem()||this._createDummyEditItem()},u.prototype._doBeginAppend=function(t){return this._createEditItem(null,rt.ItemState.APPENDING,t,!1,!1)},u.prototype._doBeginInsert=function(t,e,i,o){return this._createEditItem(t,rt.ItemState.INSERTING,e,i,o)},u.prototype._doCompleteUpdate=function(t,e){var i,o=this.dataSource;return o instanceof C.DataProvider&&(i=this.$_editingItem(),this._copyExtents(i,t),e||o.updateRow(i.dataRow,i.values,!1))},u.prototype._doCompleteInsert=function(t){var e,i,o=this.dataSource,n=!1;return o&&(e=this.$_editingItem(),t=t?o.rowCount:Math.max(0,this._insertRow),i=e.values,n=o.insertRow(t,i,e._index2))&&(o=this.getItemOfRow(t,!0))&&(e._setCheckable(o.checkable),this._copyExtents(e,o),e.heights)&&(o.heights=e.heights.slice()),n},u.prototype.remove=function(t){var e=this.dataSource;t&&!this.isEditing(t)&&e&&0<=(t=t.dataRow)&&e.removeRow(t)},u.prototype.revert=function(t){var e,i;(t=t instanceof rt.GridItem?t:this.getItem(t))&&(e=this.dataSource)&&(t=t.dataRow,(i=e.getRowState(t))==b.RowState.DELETED?e.setRowState(t,b.RowState.NONE,!1):i==b.RowState.CREATE_AND_DELETED&&e.setRowState(t,b.RowState.CREATED,!1))},u.prototype.revertAll=function(t){if(t&&0!=t.length){var e=this.dataSource;if(e)for(var i=t.length;i--;){var o,n=this.getItem(t[i]);n&&(n=n.dataRow,(o=e.getRowState(n))==b.RowState.DELETED?e.setRowState(n,b.RowState.NONE,!1):o==b.RowState.CREATE_AND_DELETED&&e.setRowState(n,b.RowState.CREATED,!1))}}},u.prototype.getRemovableRows=function(t){if(!t||0==t.length)return null;for(var e=[],i=0,o=t.length;i<o;i++){var n=this.getItem(t[i]).dataRow;0<=n&&e.push(n)}return e},u.prototype.removeRows=function(t){t&&(1<t.length?this.dataSource.removeRows(t):this.dataSource.removeRow(t[0]))},u.prototype.updateRows2=function(t){this.dataSource.updateRows2(t,!1,!1)},u.prototype._createDummyEditItem=function(){return new i(this,null,this.itemCount,-1,rt.ItemState.DUMMY)},u.prototype._createEditItem=function(t,e,i,o,n){var r=this.dataSource;if(!r)return null;var s=null,a=r.fieldCount;switch(e){case rt.ItemState.UPDATING:for(var s=new _(this,t,t.index,t.dataRow,e),l=0;l<a;l++)s.setValue(l,t.getData(l));this._copyExtents(t,s),t.heights&&(s._heights=t.heights.slice());break;case rt.ItemState.INSERTING:case rt.ItemState.APPENDING:var h=this._rs,d=e==rt.ItemState.INSERTING&&t?o?t.index+1:t.index:this.itemCount;if(s=new _(this,t,d,-1,e),e==rt.ItemState.INSERTING){var d=t.dataRow,u=t;if(d<=-1){for(var c=this.source._visibleItems;(u=c.getNext(u))&&!(u instanceof rt.GridRow););this._insertRow=u?u.dataRow:r.rowCount}else this._insertRow=o?Math.min(r.rowCount,d+1):d;t instanceof rt.GridRow&&o&&h&&(d=h._pubItems.indexOf(u),0<=d++)&&d<=h._pubItems.length&&(s._index2=d)}if(i)for(l=0;l<a;l++)i.length>l&&s.setValue(l,i[l])}return s};var d,l=u;function u(t,e){t=d.call(this,t,e)||this;return t._insertRow=-1,t}e.EditableItemProviderImpl=l})),Nt=(t(A),A.DummyEditItem,A.EditItem,A.EditableItemProvider,A.EditableItemProviderImpl,e(function(t,e){Object.defineProperty(e,"__esModule",{value:!0});o=Error,ne.__extends(n,o);var o,i=n;function n(t,e){var i=o.call(this,t)||this;return i.message=t,i.tokenPos=e,i}e.ExpressionStatementError=i;r.prototype.evaluate=function(t){return this.literal};var h=r;function r(t){this.literal=t}s.prototype.evaluate=function(t){return this.idKey<0&&(this.idKey=t.isIdentifier(this.ident)),t.evaluateIdentifier(this.idKey)};var d=s;function s(t,e){void 0===e&&(e=-1),this.ident=t,this.idKey=e}a.prototype.evaluate=function(t){var e,i=this.ident,o=i.indexOf("["),n=i.indexOf("]");if(o<n)return e=i.substr(0,o).trim(),i=i.substring(o+1,n).replace(/['|"]/g,"").trim(),this.idKey<0&&(this.idKey=t.isIdentifier(e)),t.evaluateIndexerS(this.idKey,i,this.capital)};var u=a;function a(t,e,i){void 0===e&&(e=-1),void 0===i&&(i=!1),this.ident=t,this.idKey=e,this.capital=i}function l(t,e){void 0===e&&(e=!1),this._silentError=!1,this._tokens=[],this._source=t,this._silentError=e,t&&this._parse(t)}_dp(l,"source",{get:function(){return this._source},set:function(t){t!=this._source&&(this._source=t,this._parse(t))}}),l.prototype.evaluate=function(t){try{for(var e=this._tokens,i="",o=0,n=e.length;o<n;o++)i+=e[o].evaluate(t)||"";return i}catch(t){if(!this._silentError)throw new t}return null},l.prototype._parse=function(t){if(this._tokens=[],t)for(var e=t.length,i=0;i<e;){var o,n,r,s,a=t.indexOf("${",i);if(0<=a&&(0<=(o=t.indexOf("}",a+2))?(i<a&&(n=t.substring(i,a),n=new h(n),this._tokens.push(n)),(l=t.substring(a+2,o).trim())&&(s=r=void 0,n=new((r=l.indexOf("["))&&(s=l.indexOf("]"))&&r<s?u:d)(l),this._tokens.push(n)),i=o+1):a=-1),a<0){var l=t.substr(i,e);n=new h(l),this._tokens.push(n);break}}},e.ExpressionStatement=l})),H=(t(Nt),Nt.ExpressionStatementError,Nt.ExpressionStatement,e(function(t,e){Object.defineProperty(e,"__esModule",{value:!0}),(s=o=e.ActiveState||(e.ActiveState={})).ACTIVE="active",s.UNACTIVE="unactive",s.INDETERMINATE="indeterminate",i=P.EventAware,ne.__extends(n,i),n.prototype._doDispose=function(){this._criteria=null,this._category=null,i.prototype._doDispose.call(this)},_dp(n,"name",{get:function(){return this._name},set:function(t){this._name=t}}),_dp(n,"criteria",{get:function(){return this._criteria},set:function(t){t!=this._criteria&&(this._criteria=t,this.criteriaChanged())}}),_dp(n,"callback",{get:function(){return this._callback},set:function(t){this._callback=t,this.callbackChanged()}}),_dp(n,"text",{get:function(){return this._text},set:function(t){this._text=t,this.changed()}}),_dp(n,"description",{get:function(){return this._description},set:function(t){this._description=t}}),_dp(n,"active",{get:function(){return this._active},set:function(t){t!=this._active&&(this._active=t,this.changed())}}),_dp(n,"visible",{get:function(){return this._visible},set:function(t){this._visible=t,this.changed()}}),_dp(n,"tag",{get:function(){return this._tag},set:function(t){this._tag=t}}),_dp(n,"category",{get:function(){return this._category},set:function(t){this._category=t}}),_dp(n,"level",{get:function(){return this._level},set:function(t){this._level=t}}),n.prototype.toString=function(){return this._text||this._name},n.prototype.changed=function(){this.fireEvent(n.CHANGED)},n.prototype.criteriaChanged=function(){},n.prototype.callbackChanged=function(){},n.CHANGED="onColumnFilterChanged";var o,i,a=n;function n(t){var e=i.call(this)||this;return e._active=!1,e._visible=!0,e._level=0,e._category=null,e.criteria=t,e}e.ColumnFilter=a;r=a,ne.__extends(l,r),_dp(l,"active",{get:function(){for(var t=this._childs.length;t--;)if(!this._childs[t].active)return!1;return!0},set:function(t){for(var e=this._childs.length;e--;)this._childs[e].active=t}}),_dp(l,"count",{get:function(){return this._childs.length}}),_dp(l,"activeState",{get:function(){for(var t=void 0,e=0,i=this._childs.length;e<i;e++){if(null!=t&&this._childs[e].active!=t)return o.INDETERMINATE;t=this._childs[e].active}return t?o.ACTIVE:o.UNACTIVE}}),l.prototype._doDispose=function(){this.clear(),r.prototype._doDispose.call(this)},l.prototype.clear=function(){this._childs=[]},l.prototype.add=function(t,e,i,o,n){o=new a(o);return o.name=e,o.text=i,o.active=n,this.addChild(o),t.add(o),o},l.prototype.addChild=function(t){t.level=this.level+1,(t.category=this)._childs.push(t)},l.prototype.getChild=function(t){return this._childs[t]};var r,s=l;function l(){var t=r.call(this,null)||this;return t._childs=[],t}function h(t){this._model=t,this.parse()}e.ColumnFilterCategory=s,h.prototype._doDispose=function(){this._exprNode=null,this._model=null},_dp(h,"model",{get:function(){return this._model}}),h.prototype.prepare=function(t,e){t.setDataSource(e)},h.prototype.select=function(t,e,i,o){var n=this._model.callback;return n?n.call(this,t._ds.handler,i.dataRow,e.level+1,o,this._model,i.getData(o)):!this._exprNode||(t.setData(i,o,this._model),this._exprNode.evaluate(t))},h.prototype.criteriaChanged=function(){this.parse()},h.prototype.parse=function(){this._model.callback||(this._model.criteria?this._exprNode=$.ExpressionParser.Default.parse(this._model.criteria,null):this._exprNode=null)},e.ColumnFilterRun=h;d=P.EventAware,ne.__extends(u,d),u.prototype._doDispose=function(){d.prototype._doDispose.call(this)},_dp(u,"count",{get:function(){return this._items.length}}),_dp(u,"activeCount",{get:function(){for(var t=0,e=0,i=this._items;e<i.length;e++)i[e].active&&t++;return t}}),_dp(u,"items",{get:function(){return this._items.slice()}}),_dp(u,"isVisible",{get:function(){for(var t=0,e=this._items;t<e.length;t++)if(e[t].visible)return!0;return!1}}),u.prototype.getOwner=function(){return this._owner},u.prototype.getItem=function(t){return this._items[t]},u.prototype.itemByName=function(t){return this._names[t]},u.prototype.indexOf=function(t){for(var e=this._items.length-1;0<=e;e--)if(this._items[e].name==t)return e;return-1},u.prototype.getActiveItems=function(t){for(var e=[],i=this._items.length-1;0<=i;i--)this._items[i].active==t&&e.push(this._items[i]);return e},u.prototype.assignFrom=function(t){if(t!==this){var e=this.clear(!1);if(t)for(var i,o=t instanceof Array?t:[t],n=o.length,r=0;r<n;r++)(t=o[r])&&t.name&&(this.$_checkName(t.name),(i=new a(null)).assignFrom(t),this._items.push(i),(this._names[t.name]=i).addListener(this));(e||0<this.count)&&this.changed(null)}},u.prototype.clear=function(t){void 0===t&&(t=!0);var e=this._items.length;if(0<e){for(var i=0;i<e;i++)this._items[i].removeListener(this);return this._items.length=0,this._names={},t&&this.changed(null),!0}return!1},u.prototype.add=function(t,e){void 0===e&&(e=!0);var i=re.Utils.cast(t,a);i?this._items.indexOf(i)<0&&i.name&&this.$_checkName(i.name):t&&t.name&&(this.$_checkName(t.name),(i=new a(null)).assignFrom(t)),i&&(this._items.push(i),((i._owner=this)._names[i.name]=i).addListener(this),e)&&this.changed(null)},u.prototype.addAll=function(t,e){if((t=t instanceof Array||!t?t:[t])&&0<t.length){for(var i=0,o=t.length,n=0;n<o;n++){var r,s=re.Utils.cast(t[n],a);s?this._items.indexOf(s)<0&&s.name&&(e||this.$_checkName(s.name)):t[n]&&t[n].name&&(e||this.$_checkName(t[n].name),(s=new a(null)).assignFrom(t[n])),s&&(0<=(r=this.indexOf(s.name))?(this._items[r]&&this._items[r].removeListener(this),this._items[r]=s):this._items.push(s),s.addListener(this),this._names[s.name]=s,i++)}0<i&&this.changed(null)}},u.prototype.remove=function(t){if(t){for(var e=this._items.length-1;0<=e;e--){var i=this._items[e];if(i.name==t)return this._items.splice(e,1),delete this._names[i.name],i.removeListener(this),this.changed(null),!0}return!1}},u.prototype.removeItems=function(t){if(t){for(var e=0,i=t.length-1;0<=i;i--){var o,n=this.indexOf(t[i]);0<=n&&(o=this._items[n],this._items.splice(n,1),delete this._names[o.name],o.removeListener(this),e++)}0<e&&this.changed(null)}},u.prototype.activateItems=function(t,e,i){if(void 0===i&&(i=!0),t){var o=0;this._updating=!0;try{for(var n=t.length-1;0<=n;n--){var r=this._names[t[n]];r&&r.active!=e&&(r._active=e,o++)}}finally{this._updating=!1}i&&0<o&&this.changed(null)}},u.prototype.activateAll=function(t){var e=!1;this._updating=!0;try{for(var i=0,o=this._items.length;i<o;i++){var n=this._items[i];n.active!=t&&(n._active=t,e=!0)}}finally{this._updating=!1}e&&this.changed(null)},u.prototype.hideFilters=function(t,e){if(t)for(var i=0,o=t.length;i<o;i++){var n=this._names[t[i]];n&&(n.visible=!e)}},u.prototype.hideAllFilters=function(t){for(var e=0,i=this._items.length;e<i;e++){var o=this._items[e];o&&(o.visible=!t)}},u.prototype.toggleItems=function(t){if(t){var e=0;this._updating=!0;try{for(var i=t.length-1;0<=i;i--){var o=this._names[t[i]];o&&(o._active=!o.active,e++)}}finally{this._updating=!1}0<e&&this.changed(null)}},u.prototype.toggleAll=function(){var t=!1;this._updating=!0;try{for(var e=0,i=this._items.length;e<i;e++){var o=this._items[e];o._active=!o.active,t=!0}}finally{this._updating=!1}t&&this.changed(null)},u.prototype.changed=function(t){this._updating||this.fireEvent(a.CHANGED,t)},u.prototype.$_checkName=function(t){if(this._names.hasOwnProperty(t))throw new Error("Column filter already existes: "+t)},u.prototype.$_userFilterAdd=function(t,e){var i=t instanceof a?t:null;return i||(this.$_checkName(t.name),(i=new a(null)).assignFrom(t)),this.add(i,e),i},u.prototype.onColumnFilterChanged=function(t){this.changed(t)},u.prototype.onColumnFilterSelectorChanged=function(){this.changed(null)},u.prototype.onColumnFilterUserAdd=function(t,e,i){};var d,s=u;function u(t){var e=d.call(this)||this;return e._items=[],e._names={},e._updating=!1,e._nextId=1,e._owner=t,e}e.ColumnFilterCollection=s;c=$.ExpressionRuntime,ne.__extends(_,c),_.prototype._doDispose=function(){this._item=this._ds=null,c.prototype._doDispose.call(this)},_.prototype.setDataSource=function(t){this._ds=t,this._fieldCount=this._ds?this._ds.fieldCount:0},_.prototype.setData=function(t,e,i){this._item=t,this._field=e,this._model=i},_.prototype.isIdentifier=function(t){return t=t.toLowerCase(),_.IDENTS.hasOwnProperty(t)?_.IDENTS[t]:c.prototype.isIdentifier.call(this,t)},_.prototype.$_getLookupText=function(t){t=t._owner._owner;if(t.lookupDisplay){var e=t.lookupSource;if(e){for(var i=t.lookupKeyFieldIds,o=i.length,n=[],r=0;r<o;r++)n.push(this._item.getData(i[r]));return e.lookup(n,t.valueSeparator)}return 0<=(e=t.labelFieldIndex)?this._item.getData(e):t.getLookupLabel(this._item.getData(t.fieldName))}return""},_.prototype.evaluateIdentifier=function(t){switch(t){case _.ID_VALUE:return this._item.getData(this._field);case _.ID_TEXT:return this.$_getLookupText(this._model);case _.ID_STATE:switch(this._item.rowState){case b.RowState.CREATED:return"c";case b.RowState.UPDATED:return"u";case b.RowState.DELETED:return"d";case b.RowState.CREATE_AND_DELETED:return"x"}return;case _.ID_CHANGED_CELL:var e=this._item.dataRow,i=this._field;return 0<=i&&this._item.rowState==b.RowState.UPDATED&&this._ds.isDataChanged(e,i);case _.ID_FIELD:return this._field}throw new $.ExpressionEvaluationError("Invalid identifier key: "+t)},_.prototype.evaluateIndexerI=function(t,e){if(this._item){if(t!=_.ID_VALUE&&t!=_.ID_VALUES)throw new $.ExpressionEvaluationError("Invalid identifier indexer: "+t);if(e<0||e>=this._fieldCount)throw new $.ExpressionEvaluationError("Data field index out of bounds:"+e);return this._item.getData(e)}},_.prototype.evaluateIndexerS=function(t,e,i){if(t!=_.ID_VALUE&&t!=_.ID_VALUES)throw new $.ExpressionEvaluationError("Invalid identifier indexer: "+t);if(this._ds){t=i?this._ds.getFieldIndexC(e):this._ds.getFieldIndex(e);if(t<0||t>=this._fieldCount)throw new $.ExpressionEvaluationError("Data field is not exists:"+e);return this._item.getData(t)}},_.IDENTS={value:_.ID_VALUE=0,field:_.ID_FIELD=1,values:_.ID_VALUES=2,state:_.ID_STATE=3,changedcell:_.ID_CHANGED_CELL=4,text:_.ID_TEXT=5};var c,s=_;function _(){var t=c.call(this)||this;return t._field=-1,t._fieldCount=0,t}e.ColumnFilterRuntime=s})),$t=(t(H),H.ActiveState,H.ColumnFilter,H.ColumnFilterCategory,H.ColumnFilterRun,H.ColumnFilterCollection,H.ColumnFilterRuntime,e(function(t,e){Object.defineProperty(e,"__esModule",{value:!0});i=P.EventAware,ne.__extends(n,i),n.prototype._doDispose=function(){this._grid=null,i.prototype._doDispose.call(this)},_dp(n,"owner",{get:function(){return this._grid}}),_dp(n,"dirty",{get:function(){return this._dirty}}),n.prototype.clean=function(){this._dirty&&(this._dirty=!1)},n.prototype.invalidate=function(){this._grid&&this._grid.invalidate()},n.prototype.refreshOwner=function(){this._grid&&this._grid.refreshView()},n.prototype._changed=function(){this._doChanged(),this._dirty||(this._dirty=!0,this.refreshOwner())},n.prototype._doChanged=function(){};var i,o=n;function n(t){var e=i.call(this)||this;return e._dirty=!1,e._grid=t,e}e.GridObject=o;r=o,ne.__extends(s,r),s.prototype._doDispose=function(){r.prototype._doDispose.call(this)},_dp(s,"visible",{get:function(){return this._visible},set:function(t){t!=this._visible&&(this._visible=t,this._visibleChanged())}}),s.prototype._doChanged=function(){this._grid&&this._grid._visualObjectChanged(this)},s.prototype._visibleChanged=function(){this._changed()};var r,o=s;function s(t){t=r.call(this,t)||this;return t._visible=!0,t}e.VisualObject=o})),At=(t($t),$t.GridObject,$t.VisualObject,e(function(t,e){Object.defineProperty(e,"__esModule",{value:!0});i=$.ExpressionRuntime,ne.__extends(n,i),n.prototype._doDispose=function(){this._item=null,this._group=null,this._dataSource=null,i.prototype._doDispose.call(this)},_dp(n,"index",{get:function(){return this._item.index}}),_dp(n,"item",{get:function(){return this._item}}),n.prototype.setDataSource=function(t){this._dataSource=t,this._fieldCount=t?t.fieldCount:0},n.prototype.setItem=function(t){this._item=t,this._group=re.Utils.cast(t,rt.GroupItem)},n.prototype.isIdentifier=function(t){return t=t.toLowerCase(),n.IDENTS.hasOwnProperty(t)?n.IDENTS[t]:i.prototype.isIdentifier.call(this,t)},n.prototype.evaluateIdentifier=function(t){switch(t){case n.ID_ROW:return this._item.index;case n.ID_DATAROW:return this._item.dataRow;case n.ID_CHECKED:return this._item.checked;case n.ID_STATE:switch(this._item.rowState){case b.RowState.CREATED:return"c";case b.RowState.UPDATED:return"u";case b.RowState.DELETED:return"d";case b.RowState.CREATE_AND_DELETED:return"x"}return;case n.ID_COUNT:return this._group?this._group.count:0;case n.ID_DCOUNT:return this._group?this._group.descendantCount:0}throw new $.ExpressionEvaluationError("Invalid identifier key: "+t)},n.prototype.evaluateIndexerI=function(t,e){if(this._item){if(t!=n.ID_VALUE&&t!=n.ID_VALUES)throw new $.ExpressionEvaluationError("Invalid identifier indexer: "+t);if(e<0||e>=this._fieldCount)throw new $.ExpressionEvaluationError("Data field index out of bounds:"+e);return this._item.getData(e)}},n.prototype.evaluateIndexerS=function(t,e,i){if(t!=n.ID_VALUE&&t!=n.ID_VALUES)throw new $.ExpressionEvaluationError("Invalid identifier indexer: "+t);if(this._dataSource){t=i?this._dataSource.getFieldIndexC(e):this._dataSource.getFieldIndex(e);if(t<0||t>=this._fieldCount)throw new $.ExpressionEvaluationError("Data field is not exists:"+e);return this._item.getData(t)}},n.IDENTS={row:n.ID_ROW=0,datarow:n.ID_DATAROW=1,checked:n.ID_CHECKED=2,value:n.ID_VALUE=3,values:n.ID_VALUES=4,state:n.ID_STATE=5,count:n.ID_COUNT=6,dcount:n.ID_DCOUNT=7};var i,o=n;function n(){var t=i.call(this)||this;return t._item=null,t._group=null,t._dataSource=null,t._fieldCount=0,t}e.DataRowExpressionRuntime=o;r=$.ExpressionRuntime,ne.__extends(a,r),a.prototype._doDispose=function(){this._cell=null,this._item=null,this._ds=null,this._grid=null,r.prototype._doDispose.call(this)},a.prototype.setDataArguments=function(t,e,i){this._ds=t,this._fieldCount=t?t.fieldCount:0,this._cell=e,this._item=i,this._grid=e&&e.index.column.grid},a.prototype.setItem=function(t){this._item=t},a.prototype.isIdentifier=function(t){return t=t.toLowerCase(),a.IDENTS.hasOwnProperty(t)?a.IDENTS[t]:r.prototype.isIdentifier.call(this,t)},a.prototype.evaluateIdentifier=function(t){switch(t){case a.ID_VALUE:return this._item.getData(this._cell.index.dataField);case a.ID_BASE:return 0<=(o=this._cell.index.dataColumn.baseIndex)?this._item.getData(o):void 0;case a.ID_PREV_VALUES:var e=this._cell.index.column,i=this._grid.getDataColumns(),o=i.indexOf(e),n=[];if(i.length||o<0)return;for(var r=0,s=Math.min(o,i.length);r<s;r++)n.push(this._item.getData(i[r].dataIndex));return n.join("`")}throw new $.ExpressionEvaluationError("Invalid identifier key: "+t)},a.prototype.evaluateIndexerI=function(t,e){if(this._item){if(t!=a.ID_VALUE&&t!=a.ID_VALUES)throw new $.ExpressionEvaluationError("Invalid identifier indexer: "+t);if(e<0||e>=this._fieldCount)throw new $.ExpressionEvaluationError("Data field index out of bounds:"+e);return this._item.getData(e)}},a.prototype.evaluateIndexerS=function(t,e,i){if(t!=a.ID_VALUE&&t!=a.ID_VALUES)throw new $.ExpressionEvaluationError("Invalid identifier indexer: "+t);if(this._ds){t=i?this._ds.getFieldIndexC(e):this._ds.getFieldIndex(e);if(t<0||t>=this._fieldCount)throw new $.ExpressionEvaluationError("Data field is not exists:"+e);return this._item.getData(t)}},a.IDENTS={value:a.ID_VALUE=0,values:a.ID_VALUES=1,base:a.ID_BASE=2,prevvalues:a.ID_PREV_VALUES=3};var r,o=a;function a(){var t=r.call(this)||this;return t._fieldCount=0,t}e.EqualBlankRuntime=o;s=$.ExpressionRuntime,ne.__extends(l,s),l.prototype.setGrid=function(t){this._grid=t},l.prototype.setGroup=function(t){this._group=t},l.prototype.isIdentifier=function(t){return t=t.toLowerCase(),l.IDENTS.hasOwnProperty(t)?l.IDENTS[t]:s.prototype.isIdentifier.call(this,t)},l.prototype.evaluateIdentifier=function(t){var e,i,o=this._group;switch(t){case l.ID_GROUP_FIELD:return(e=o.dataSource.getField(o.groupField))?e.fieldName:"";case l.ID_FIELD_HEADER:return(e=o.dataSource.getField(o.groupField))?e.header:"";case l.ID_GROUP_COLUMN:return(i=this._grid?this._grid.columnByField(o.groupField):null)?i.displayText:o.dataSource.getFieldName(o.groupField);case l.ID_COLUMN_HEADER:return(i=this._grid?this._grid.columnByField(o.groupField):null)?i.header.text||i.displayText:o.dataSource.getFieldName(o.groupField);case l.ID_COLUMN_FOOTER:return(i=this._grid?this._grid.columnByField(o.groupField):null)?i.footer.text||i.displayText:o.dataSource.getFieldName(o.groupField);case l.ID_GROUP_VALUE:return o?o.groupValue:void 0;case l.ID_ROW_COUNT:return o.descendantCount}throw new $.ExpressionEvaluationError("Invalid identifier key: "+t)},l.prototype.evaluateIndexerI=function(t,e){switch(t){case l.ID_SUM:case l.ID_MAX:case l.ID_MIN:case l.ID_AVG:case l.ID_DATA_COUNT:case l.ID_DATA_AVG:if(isNaN(e)||e<0)return;var i=void 0;switch(t){case l.ID_SUM:i=this._group.getSum(e);break;case l.ID_MAX:i=this._group.getMax(e);break;case l.ID_MIN:i=this._group.getMin(e);break;case l.ID_AVG:i=this._group.getAvg(e);break;case l.ID_DATA_COUNT:i=this._group.getDataCount(e);break;case l.ID_DATA_AVG:i=this._group.getDataAvg(e)}return isNaN(i)?"":String(i)}throw new $.ExpressionEvaluationError("Invalid identifier indexer: "+t)},l.prototype.evaluateIndexerS=function(t,e,i){var o=this._group.dataSource,o=e?o?o.getFieldIndex(e):-1:this._group.groupField;return this.evaluateIndexerI(t,o)},l.IDENTS={groupfield:l.ID_GROUP_FIELD=0,fieldheader:l.ID_FIELD_HEADER=1,groupcolumn:l.ID_GROUP_COLUMN=2,columnheader:l.ID_COLUMN_HEADER=3,columnfooter:l.ID_COLUMN_FOOTER=4,groupvalue:l.ID_GROUP_VALUE=5,rowcount:l.ID_ROW_COUNT=6,sum:l.ID_SUM=7,max:l.ID_MAX=8,min:l.ID_MIN=9,avg:l.ID_AVG=10,datacount:l.ID_DATA_COUNT=11,dataavg:l.ID_DATA_AVG=12};var s,o=l;function l(){return s.call(this)||this}e.RowGroupStatementRuntime=o})),st=(t(At),At.DataRowExpressionRuntime,At.EqualBlankRuntime,At.RowGroupStatementRuntime,e(function(t,e){Object.defineProperty(e,"__esModule",{value:!0});i=se.Base,ne.__extends(n,i),n.prototype._doDispose=function(){this._index&&this._index.dispose(),this._index=null,i.prototype._doDispose.call(this)},_dp(n,"name",{get:function(){return this._name}}),_dp(n,"index",{get:function(){return this._index}}),_dp(n,"item",{get:function(){return this._index.item}}),_dp(n,"valueColumn",{get:function(){return this._index.valueColumn}}),_dp(n,"dataColumn",{get:function(){return this._index.dataColumn}}),_dp(n,"text",{get:function(){return null}}),_dp(n,"value",{get:function(){}}),_dp(n,"level",{get:function(){return 0}}),n.prototype.setIndex=function(t){this._index.assignFrom(t)},n.prototype.setIndex2=function(t,e,i){this._index._grid=t,this._index.set(e,i)},n.prototype.setLayout=function(t){this._index.layout=t},n.ERROR="<<ERROR>>";var i,o=n;function n(t){var e=i.call(this)||this;return e._index=new _t.CellIndex,e._name=t,e}e.GridCell=o;r=o,ne.__extends(a,r),a.prototype._doDispose=function(){r.prototype._doDispose.call(this)},_dp(a,"model",{get:function(){return this._model},set:function(t){this._model=t}});var r,s=a;function a(t,e){e=r.call(this,e=void 0===e?null:e)||this;return e._model=t,e}e.StyledCell=s;l=o,ne.__extends(h,l),h.prototype._doDispose=function(){l.prototype._doDispose.call(this)},h.prototype.getBlankState=function(){return ht.BlankState.NONE},h.prototype.isValueChanged=function(){return!1};var l,s=h;function h(t){return l.call(this,t)||this}e.ValueCell=s;d=s,ne.__extends(f,d),f.getText=function(t,e){var i=0<=e.dataIndex?t.getData(e.dataIndex):void 0;return f._getText(t,e,i)},f._getText=function(t,e,i){var o=e;if(o.lookupDisplay){var n=o.lookupSource;if(n){for(var r=o.lookupKeyFieldIds,s=r.length,a=[],l=0;l<s;l++)a.push(t.getData(r[l]));h=void 0!==(h=n.lookup(a,o.valueSeparator))?h:null!=o.textOfInvalid?o.textOfInvalid:i}else var n=o.labelFieldIndex,h=0<=n?t.getData(n):o.getLookupLabel(i)}else{n=void 0;h=i,o.valueType==ht.ValueType.NUMBER&&null!=(i=o.nanText)&&isNaN(h)?h=i:(n=o.displayCallback)?h=n(o.grid.handler,_t.DummyCellIndex.tempItem(o.grid,t,e).proxy(),h):null!=h&&"object"==typeof h&&(h=JSON.stringify(h))}return null==h?"":String(h)},f._getDisplayText=function(t,e,i,o,n){var t=t.formatOptions,r=n.textFormatter||void 0===i.textFormat&&t.textFormatter,s=n.numberFormatter||void 0===i.numberFormat&&t.numberFormatter,a=n.booleanFormatter||void 0===i.booleanFormat&&t.boolFormatter,l=n.datetimeWriter||void 0===i.datetimeFormat&&t.datetimeWriter;if(i){switch(i.valueType){case ht.ValueType.TEXT:d=o&&r?r.getText(o):f._getText(e,i,o);break;case ht.ValueType.NUMBER:var h=Number(o),d=isNaN(h)||null==h?i.nanText:0==h&&null!=i.zeroText?i.zeroText:s?s.getText(h,i.displayMinusZero):f._getText(e,i,o);break;case ht.ValueType.DATETIME:d=o instanceof Date&&l?l.getText(o):f._getText(e,i,o);break;case ht.ValueType.BOOLEAN:d=a?a.formatValue(o):f._getText(e,i,o);break;case ht.ValueType.OBJECT:var h=i.getField(),u=e.dataRow,c=i.objectKey||i.objectCallback,_=(c?i:h).objectKey,c=(c?i:h).objectCallback;if(o){var p=d=c&&"function"==typeof c?c(h.orgFieldName,u,o):_&&o.hasOwnProperty(_)?o[_]:f._getText(e,i,o);switch(typeof p){case"string":break;case"number":d=s?s.getText(p,i.displayMinusZero):String(p);break;case"boolean":d=a?a.formatValue(p):String(p);break;default:d=p instanceof Date&&l?l.getText(p):p?String(p):""}}break;default:d=f._getText(e,i,o)}d&&((t=n.prefix)&&(d=t+d),t=n.suffix)&&(d+=t)}return d},f.equalBlankRuntime=function(){return this._equalBlankRuntime||(this._equalBlankRuntime=new At.EqualBlankRuntime),this._equalBlankRuntime},f.prototype._doDispose=function(){d.prototype._doDispose.call(this)},f.prototype.getValue=function(){var t=this.dataColumn.dataIndex;if(0<=t)return this.item.getData(t)},f.prototype.getDisplayText=function(t,e){return f._getDisplayText(t,this.index.item,this.index.dataColumn,this.getValue(),e)},_dp(f,"value",{get:function(){return this.getValue()}}),f.prototype.getBlankState=function(){var t,e,i,o,n,r=ht.BlankState.NONE,s=this.index,a=s.layout,l=this.dataColumn,h=this.item,d=a.equalBlankNode,u=d&&f.equalBlankRuntime();return a&&a.blanked&&a.dataRoot&&0<=h.dataRow&&(t=(a=a.grid).itemCount,d&&u&&u.setDataArguments(h.dataSource,this,h),1<t)&&(s=s.itemIndex,l=l.dataIndex,h=d?(u.setItem(h),d.evaluate(u)):h.getData(l),o=i=e=void 0,0<s?(n=a.getItem(s-1),s<t-1?(o=a.getItem(s+1),n instanceof rt.GridRow&&(e=d?(u.setItem(n),d.evaluate(u)):n.getData(l),h instanceof Date&&e instanceof Date?+h==+e:h==e)?r=o instanceof rt.GridRow&&((i=d?(u.setItem(o),d.evaluate(u)):o.getData(l))instanceof Date&&h instanceof Date?+i==+h:i==h)?ht.BlankState.BODY:ht.BlankState.TAIL:o instanceof rt.GridRow&&((i=d?(u.setItem(o),d.evaluate(u)):o.getData(l))instanceof Date&&h instanceof Date?+i==+h:i==h)&&(r=ht.BlankState.HEAD)):n instanceof rt.GridRow&&((e=d?(u.setItem(n),d.evaluate(u)):n.getData(l))instanceof Date&&h instanceof Date?+e==+h:e==h)&&(r=ht.BlankState.TAIL)):(o=a.getItem(s+1))instanceof rt.GridRow&&((i=d?(u.setItem(o),d.evaluate(u)):o.getData(l))instanceof Date&&h instanceof Date?+i==+h:i==h)&&(r=ht.BlankState.HEAD)),r},f.prototype.isValueChanged=function(){var t=this.dataColumn.dataIndex;return 0<=t&&this.item.isChanged(t)};var d,o=f;function f(t){return d.call(this,(t=void 0===t?null:t)||"dataCell")||this}e.DataCell=o;u=o,ne.__extends(_,u),_.prototype.setItem=function(t){this.$_item=t},_dp(_,"item",{get:function(){return this.$_item}});var u,c=_;function _(){return null!==u&&u.apply(this,arguments)||this}e.HiddenDataCell=c;p=s,ne.__extends(g,p),g.prototype._doDispose=function(){p.prototype._doDispose.call(this)},_dp(g,"text",{get:function(){return""}}),_dp(g,"value",{get:function(){return null}}),g.prototype.getDisplayText=function(t){return this.text};var p,c=g;function g(t){return p.call(this,(t=void 0===t?null:t)||"literalCell")||this}e.LiteralCell=c;m=s,ne.__extends(y,m),y.getText=function(t,e){return void 0===e&&(e=","),t?t.join(e):""},y.prototype._doDispose=function(){m.prototype._doDispose.call(this)},y.prototype.getDisplayText=function(t,e){var i=this.value;return i?i.join(e||","):""},_dp(y,"getText",{get:function(){return null}}),_dp(y,"value",{get:function(){var t=this.index.column;if(t instanceof lt.SeriesColumn){var e=t.fields,i=e?e.length:0;if(0<i){for(var o=this.item,n=new Array(i),r=0;r<i;r++)0<=e[r]&&(n[r]=o.getData(e[r]));return n}}return[]}});var m,c=y;function y(t){return m.call(this,(t=void 0===t?null:t)||"seriesCell")||this}e.SeriesCell=c;v=o,ne.__extends(C,v),C.prototype._doDispose=function(){v.prototype._doDispose.call(this)},C.prototype.getValue=function(){var t=this.index,e=t.item;return e instanceof rt.GridRow?v.prototype.getValue.call(this):(e=(e instanceof rt.GroupItem?e:e.parent).firstItem).getData(t.dataField)},_dp(C,"text",{get:function(){return this.getValue()}});var v,s=C;function C(t){return v.call(this,(t=void 0===t?null:t)||"mergedDataCell")||this}e.MergedDataCell=s})),Ht=(t(st),st.GridCell,st.StyledCell,st.ValueCell,st.DataCell,st.HiddenDataCell,st.LiteralCell,st.SeriesCell,st.MergedDataCell,e(function(t,e){var i;function o(){return i.call(this)||this}Object.defineProperty(e,"__esModule",{value:!0}),i=se.Base,ne.__extends(o,i),o.prototype._doDispose=function(){i.prototype._doDispose.call(this)},_dp(o,"value",{get:function(){return this._value},set:function(t){if(t!=this._value){this._value=t;try{this._error=null,this._parse(t)}catch(t){this._error=t}}}}),_dp(o,"error",{get:function(){return this._error}}),o.prototype.render=function(t,e){this._doRender(t,e,!1)},o.prototype.renders=function(t,e){this._doRender(t,e,!0)};n=o,ne.__extends(s,n),s.prototype._doDispose=function(){n.prototype._doDispose.call(this)},s.prototype._doRender=function(t,e,i){var o,n=this._getBarLength();n<1||((o=this.barWidth)<=0&&(o=Math.floor(e.width/n),o=Math.max(this.minBarWidth,o),0<this.maxBarWidth)&&(o=Math.min(this.maxBarWidth,o)),e.x+=(e.width-(n*=o))/2,e.x=Math.floor(e.x),this._drawBars(t,this.barStyle,i,e.x,e.y,o,e.height))};var n,r=s;function s(){var t=n.call(this)||this;return t.minBarWidth=1,t.maxBarWidth=0,t.barWidth=0,t}var a,l=[2171426,2236706,2236961,1184291,1184546,1249826,1188371,1188626,1253906,2232851,2233106,2298386,1122866,1188146,1188401,1126946,1192226,1192481,2241041,2232626,2232881,2175506,2240786,3219761,3215906,3281186,3281441,3219986,3285266,3285521,2171171,2171681,2302241,1119011,1249571,1250081,1123091,1253651,1254161,2167571,2298131,2298641,1122611,1123121,1253681,1126691,1127201,1257761,3223841,2167601,2298161,2175251,2175761,2175281,3215651,3216161,3346721,3219731,3220241,3350801,3227921,2233361,4395281,1118756,1119266,1184036,1184801,1315106,1315361,1122836,1123346,1188116,1188881,1319186,1319441,2363921,2232596,4272401,2363666,1261841,1118786,1184066,1184321,1131026,1196306,1196561,4264466,4329746,4330001,2171201,2179361,4268321,1118531,1119041,1249601,1130771,1131281,4264211,4264721,1126721,1130801,3215681,4264241,2167826,2167316,2167346,36901138],h=[103,104,105],c=[251658240,15728640,983040,61440,3840,240,15],d=(a=r,ne.__extends(u,a),u.prototype._doDispose=function(){a.prototype._doDispose.call(this)},u.prototype._parse=function(t){this._weights=[];var e=t?t.length:0;if(!(e<1)){var i=this.$_detectType(t),o=l[a=h[i]],n=a;if(this._weights.push(o),2==i)for(var r=0;r<e;r+=2){var s=t.substr(r,2),a=parseInt(s);a=this.$_convert(i,a),this._weights.push(o=l[a]),n+=a*(Math.floor(r/2)+1)}else for(r=0;r<e;r++)a=t.charCodeAt(r),a=this.$_convert(i,a),this._weights.push(o=l[a]),n+=a*(r+1);this._weights.push(l[n%=103]),this._weights.push(l[106])}},u.prototype._getBarLength=function(){return this.quietZoneWidth+11*(this._weights.length-1)+13+this.quietZoneWidth},u.prototype._drawBars=function(t,e,i,o,n,r,s){o+=10*r;for(var a=this._weights.length-1,l=0;l<a;l++)for(var h=this._weights[l],d=0;d<6;d++){var u=(h&c[d+1])>>4*(5-d);u*=r,d%2==0&&(i?t.sbounds(e,o+"",n+"%",u+"",s+"%"):t.bounds(e,o,n,u,s)),o+=u}h=this._weights[a];for(d=0;d<7;d++){u=(h&c[d])>>4*(6-d);u*=r,d%2==0&&(i?t.sbounds(e,o+"",n+"%",u+"",s+"%"):t.bounds(e,o,n,u,s)),o+=u}},u.prototype.$_convert=function(t,e){switch(t){case 0:if(0<=e&&e<32)return e+64;if(32<=e&&e<96)return e-32;break;case 1:if(32<=e&&e<128)return e-32;break;case 2:if(0<=e&&e<=99)return e}throw new Error("Invalid code128 charactor: "+e)},u.prototype.$_detectType=function(t){return t.length%2==0&&/^\d+$/.test(t)?2:/[a-z]/.test(t)?1:0},u);function u(){var t=a.call(this)||this;return t.quietZoneWidth=10,t}e.Code128=d;var _,p={0:"nnnwwnwnn",1:"wnnwnnnnw",2:"nnwwnnnnw",3:"wnwwnnnnn",4:"nnnwwnnnw",5:"wnnwwnnnn",6:"nnwwwnnnn",7:"nnnwnnwnw",8:"wnnwnnwnn",9:"nnwwnnwnn",A:"wnnnnwnnw",B:"nnwnnwnnw",C:"wnwnnwnnn",D:"nnnnwwnnw",E:"wnnnwwnnn",F:"nnwnwwnnn",G:"nnnnnwwnw",H:"wnnnnwwnn",I:"nnwnnwwnn",J:"nnnnwwwnn",K:"wnnnnnnww",L:"nnwnnnnww",M:"wnwnnnnwn",N:"nnnnwnnww",O:"wnnnwnnwn",P:"nnwnwnnwn",Q:"nnnnnnwww",R:"wnnnnnwwn",S:"nnwnnnwwn",T:"nnnnwnwwn",U:"wwnnnnnnw",V:"nwwnnnnnw",W:"wwwnnnnnn",X:"nwnnwnnnw",Y:"wwnnwnnnn",Z:"nwwnwnnnn","-":"nwnnnnwnw",".":"wwnnnnwnn"," ":"nwwnnnwnn",$:"nwnwnwnnn","/":"nwnwnnnwn","+":"nwnnnwnwn","%":"nnnwnwnwn","*":"nwnnwnwnn"},d=(_=r,ne.__extends(f,_),f.prototype._doDispose=function(){_.prototype._doDispose.call(this)},f.prototype._parse=function(t){if(this._codes=[],t){var e=t.length;this._codes.push(p["*"]);for(var i=0;i<e;i++){var o=t.charAt(i),n=p[o];if(!n)throw new Error("Invalid Code39 character: "+o);this._codes.push(n)}this._codes.push(p["*"])}},f.prototype._getBarLength=function(){var t=this._codes.length;return t*(3*this._wideWidth+6)+(t-1)},f.prototype._drawBars=function(t,e,i,o,n,r,s){var a=this._codes.length;if(2<a)for(var l=0;l<a;l++){for(var h=this._codes[l],d=0;d<9;d++){var u="n"==h.charAt(d)?1:this._wideWidth;u*=r,d%2==0&&(i?t.sbounds(e,o+"",n+"%",u+"",s+"%"):t.bounds(e,o,n,u,s)),o+=u}l<a-1&&(o+=r)}},f);function f(){var t=_.call(this)||this;return t._wideWidth=3,t}e.Code39=d})),Ut=(t(Ht),Ht.Code128,Ht.Code39,e(function(t,e){Object.defineProperty(e,"__esModule",{value:!0});var o,a="http://www.w3.org/2000/svg",l=0,r=(o=se.Base,ne.__extends(i,o),i.prototype._doDispose=function(){this.clear(),o.prototype._doDispose.call(this)},_dp(i,"doc",{get:function(){return re.getDoc(this._element)||document}}),i.prototype.init=function(t,e){return this._defs=t,this._element=e,this},i.prototype.clear=function(){this._defs=null,this._element=null,this._transforms=null},i.prototype.save=function(){this._transforms.push(this._trans),this._trans=""},i.prototype.restore=function(){this._trans=this._transforms.pop()},i.prototype.translate=function(t,e){this._trans+="translate("+t+","+e+")"},i.prototype.rotate=function(t){this._trans+="rotate("+180*t/Math.PI+")"},i.prototype.rotateAt=function(t,e,i){this._trans+="rotate("+180*t/Math.PI+","+e+",)"},i.prototype.scale=function(t,e){this._trans+="scale("+t+","+e+")"},i.prototype.clipRect=function(t){this.clip(t.x,t.y,t.width,t.height)},i.prototype.clip=function(t,e,i,o){var n=this.doc,r=l++,s=n.createElementNS(a,"clipPath"),r=(s.setAttributeNS(null,"id","clip"+r),n.createElementNS(a,"rect"));r.x.baseVal.value=t,r.y.baseVal.value=e,r.width.baseVal.value=i,r.height.baseVal.value=o,s.appendChild(r),this._defs.appendChild(s)},i.prototype.sline=function(t,e,i,o,n){var r=this.doc.createElementNS(a,"line");this._element.appendChild(r),r.x1.baseVal.valueAsString=e,r.y1.baseVal.valueAsString=i,r.x2.baseVal.valueAsString=o,r.y2.baseVal.valueAsString=n,t&&r.setAttribute("class",t)},i.prototype.polygon=function(t,e){if(!(null==e||e.length<4)){var i=this.doc.createElementNS(a,"polygon"),o=(this._element.appendChild(i),[]);o.push(e[0]+","+e[1]);for(var n=2;n<e.length;n+=2)o.push(e[n]+","+e[n+1]);this._trans&&i.setAttributeNS(null,"transform",this._trans),i.setAttributeNS(null,"points",o.join(" ")),t&&i.setAttribute("class",t)}},i.prototype.bounds=function(t,e,i,o,n){var r=this.doc.createElementNS(a,"rect");this._element.appendChild(r),r.x.baseVal.value=e,r.y.baseVal.value=n<0?i+n:i,r.width.baseVal.value=o,r.height.baseVal.value=Math.abs(n),t&&r.setAttribute("class",t)},i.prototype.pbounds=function(t,e,i,o,n){var r=this.doc.createElementNS(a,"rect");this._element.appendChild(r),r.x.baseVal.valueAsString=e+"%",r.y.baseVal.valueAsString=(n<0?i+n:i)+"%",r.width.baseVal.valueAsString=o+"%",r.height.baseVal.valueAsString=Math.abs(n)+"%",t&&r.setAttribute("class",t)},i.prototype.sbounds=function(t,e,i,o,n){var r=this.doc.createElementNS(a,"rect");this._element.appendChild(r),r.x.baseVal.valueAsString=e,r.y.baseVal.valueAsString=i,r.width.baseVal.valueAsString=o,r.height.baseVal.valueAsString=n,t&&r.setAttribute("class",t)},i.prototype.scircle=function(t,e,i,o){var n=this.doc.createElementNS(a,"circle");this._element.appendChild(n),n.cx.baseVal.valueAsString=e,n.cy.baseVal.valueAsString=i,n.r.baseVal.valueAsString=o,t&&n.setAttribute("class",t)},i.prototype.ellipse=function(t,e,i,o,n){var r=this.doc.createElementNS(a,"ellipse"),o=o/2,n=n/2;this._element.appendChild(r),r.cx.baseVal.value=e+o,r.cy.baseVal.value=i+n,r.rx.baseVal.value=o,r.ry.baseVal.value=n,t&&r.setAttribute("class",t)},i);function i(t,e){var i=o.call(this)||this;return i._transforms=[],i._defs=t,i._element=e,i}e.SvgRenderer=r;s=se.Base,ne.__extends(h,s),h.createSVG=function(t){var e=re.getDoc(t),i=e.createElementNS(a,"svg"),o=i.style,n=e.createElementNS(a,"defs"),n=(i.appendChild(n),o.background="",o.border="none",o.pointerEvents="none",e.createElementNS(a,"g"));return i.appendChild(n),t.appendChild(i),i},h.renderSVG=function(t,e,i){var o=e.lastElementChild,n=this._renderer.init(e.firstChild,o);o.textContent="",i.call(t,e,n,e.clientWidth,e.clientHeight),n.clear()},h.renderSVG2=function(t,e,i){var o=re.getDoc(e),o=(1<e.childElementCount&&e.removeChild(e.lastElementChild),o.createElementNS(a,"g")),n=this._renderer.init(e.firstChild,o);e.appendChild(o),i.call(t,e,n),n.clear()},h.prototype._doDispose=function(){this._renderer=this._renderer.dispose(),this._element.parentElement&&this._element.parentElement.removeChild(this._element),this._element=this._defs=null,s.prototype._doDispose.call(this)},_dp(h,"element",{get:function(){return this._element}}),h.prototype.render=function(t){this._clear(),t?t.call(this,this._renderer,this._element.clientWidth,this._element.clientHeight):this._doRender(this._renderer,this._element.clientWidth,this._element.clientHeight)},h.prototype._clear=function(){1<this._element.childElementCount&&this._element.removeChild(this._element.lastElementChild);var t=re.getDoc(this._element).createElementNS(a,"g");this._element.appendChild(t),this._renderer._element=t},h.prototype._doRender=function(t,e,i){},h._renderer=new r;var s,n=h;function h(t){var e=s.call(this)||this,i=re.getDoc(t),o=e._element=i.createElementNS(a,"svg"),n=o.style,i=e._defs=i.createElementNS(a,"defs");return o.appendChild(i),n.background="",n.border="none",n.pointerEvents="none",t.appendChild(o),e._renderer=new r(e._defs),e}e.SvgElement=n})),Gt=(t(Ut),Ut.SvgRenderer,Ut.SvgElement,e(function(t,e){Object.defineProperty(e,"__esModule",{value:!0});i=se.Base,ne.__extends(n,i),n.prototype.draw=function(t,e,i){this._doDraw(t,e,i)};var i,o=n;function n(){return null!==i&&i.apply(this,arguments)||this}e.ShapeDrawing=o;var r,h={rectangle:[0,0,1,0,1,1,0,1],triangle:[.5,0,0,1,1,1],itriangle:[0,0,.5,1,1,0],diamond:[.5,0,0,.5,.5,1,1,.5],uparrow:[.5,0,0,.5,.3,.5,.3,1,.7,1,.7,.5,1,.5],downarrow:[.3,0,.3,.5,0,.5,.5,1,1,.5,.7,.5,.7,0],leftarrow:[0,.5,.5,1,.5,.7,1,.7,1,.3,.5,.3,.5,0],rightarrow:[0,.3,0,.7,.5,.7,.5,1,1,.5,.5,0,.5,.3],plus:[.3,0,.3,.3,0,.3,0,.7,.3,.7,.3,1,.7,1,.7,.7,1,.7,1,.3,.7,.3,.7,0],minus:[0,.3,0,.7,1,.7,1,.3],star:[.5,0,.6122,.3454,.9755,.3454,.6816,.559,.7938,.9045,.5,.691,.2061,.9045,.3183,.559,.02447,.3454,.3877,.3454]},d={equal:[[0,.2,0,.4,1,.4,1,.2],[0,.6,0,.8,1,.8,1,.6]]},s=(r=o,ne.__extends(a,r),_dp(a,"shape",{get:function(){return this._shape},set:function(t){this._shape=t?"inverted_triangle"===t?a.INVERTED_TRIANLGE:t.toLowerCase():null}}),a.prototype._doDraw=function(t,e,i){var o=this._shape;if(h.hasOwnProperty(o)){if(l=h[o]){for(var n=0,r=0,s=0,a=(l=l.slice()).length/2;s<a;s++)l[2*s]=n+l[2*s]*e,l[2*s+1]=r+l[2*s+1]*i;l.push(l[0],l[1]),t.polygon(null,l)}}else if(d.hasOwnProperty(o)){o=d[o];if(o){for(var l,n=0,r=0,s=0,a=(l=o[0].slice()).length/2;s<a;s++)l[2*s]=n+l[2*s]*e,l[2*s+1]=r+l[2*s+1]*i;l.push(l[0],l[1]),t.polygon(null,l);for(s=0,a=(l=(l=o[1]).slice()).length/2;s<a;s++)l[2*s]=n+l[2*s]*e,l[2*s+1]=r+l[2*s+1]*i;l.push(l[0],l[1]),t.polygon(null,l)}}},a.RECTANGLE="rectangle",a.TRIANLGE="triangle",a.INVERTED_TRIANLGE="itriangle",a.DIAMOND="diamond",a.UP_ARROW="uparrow",a.DOWN_ARROW="downarrow",a.LEFT_ARROW="leftarrow",a.RIGHT_ARROW="rightarrow",a.PLUS="plus",a.MINUS="minus",a.EQUAL="equal",a.STAR="star",a);function a(t){var e=r.call(this)||this;return e._shape=t,e}e.PolygonShape=s;l=o,ne.__extends(u,l),u.prototype._doDraw=function(t,e,i){t.ellipse(null,0,0,e,i)};var l,s=u;function u(){return null!==l&&l.apply(this,arguments)||this}e.EllipseShape=s})),U=(t(Gt),Gt.ShapeDrawing,Gt.PolygonShape,Gt.EllipseShape,e(function(t,e){function i(){}Object.defineProperty(e,"__esModule",{value:!0}),i.layoutFlex=function(t,e,i,o,n,r){var s=r===ht.IconLocation.CENTER,a=re.Utils.included(r,ht.IconLocation.LEFT,ht.IconLocation.LEFT_EDGE),l=re.Utils.included(r,ht.IconLocation.RIGHT,ht.IconLocation.RIGHT_EDGE),h=re.Utils.included(r,ht.IconLocation.TOP,ht.IconLocation.TOP_EDGE),d=re.Utils.included(r,ht.IconLocation.BOTTOM,ht.IconLocation.BOTTOM_EDGE),r=re.Utils.included(r,ht.IconLocation.LEFT_EDGE,ht.IconLocation.RIGHT_EDGE,ht.IconLocation.TOP_EDGE,ht.IconLocation.BOTTOM_EDGE),t=t.style,u=s||a||l?"row":"column";t.flexDirection=u+=l||d?"-reverse":"",t.justifyContent=r?"start":"center",t.alignItems="center",(t=e.style).paddingTop=h&&r?n+"px":"",t.paddingBottom=d&&r?n+"px":"",(t=i.style).display=s?"none":"",t.paddingLeft=a?o+"px":"",t.paddingRight=l?o+"px":"",t.paddingTop=h?o+"px":"",t.paddingBottom=d?o+"px":"",t.flexGrow=r?"1":""},i.clearFlex=function(t){t=t.style;t.removeProperty("display"),t.removeProperty("flex-direction"),t.removeProperty("justify-content"),t.removeProperty("align-items"),t.removeProperty("flex-grow")},e.RenderHelper=i})),at=(t(U),U.RenderHelper,e(function(V,t){Object.defineProperty(t,"__esModule",{value:!0});var e,B=function(){this.commit=!0,this.value=void 0},i=(t.RendererEditResult=B,e=se.Base,ne.__extends(o,e),o.getRendererStyle=function(t){t=t.firstElementChild;if(t){if(t.classList){if(1<t.classList.length)return t.classList[1]}else{var e=t.className&&t.className.split(" ");if(e&&1<e.length)return e[1]}return t.className}},o.prototype._doDispose=function(){this._dom=null,this._index=null,e.prototype._doDispose.call(this)},o.prototype.clearAndDispose=function(){return this.clearContent(),this.dispose()},o.prototype.initContent=function(t,e,i){this._inited?this._index.assign(t):(this._dom=e,this._index=t.clone(),e.className=this._className=i,this._doInitContent(e),this._inited=!0)},o.prototype.initFormContent=function(t,e){this._inited||((this._dom=t).className=this._className=e,this._doInitContent(t),this._inited=!0)},o.prototype.clearContent=function(){this._inited?(this._dom.className=this._className="",this._inited=!1):this._dom[this._textProp]="",this._doClearContent(this._dom)},o.prototype.checkClassName=function(t){return t!=this._className},o.prototype.initOptions=function(){this._doInitOptions()},_dp(o,"grid",{get:function(){return this._index&&this._index.grid}}),_dp(o,"index",{get:function(){return this._index}}),_dp(o,"styleName",{get:function(){return"rg-renderer"}}),_dp(o,"showTooltip",{get:function(){return this._showTooltip},set:function(t){this._showTooltip=t}}),_dp(o,"ariaLabelCallback",{get:function(){return this._ariaLabelCallback},set:function(t){this._ariaLabelCallback=t,this._changed()}}),_dp(o,"refreshFocusChanged",{get:function(){return this._refreshFocusChanged},set:function(t){this._refreshFocusChanged=t}}),_dp(o,"itemClickable",{get:function(){return this._itemClickable}}),o.prototype.renderCell=function(t,e,i){var o;t.accessibility&&((o=(o=this._ariaLabelCallback||t.body.ariaLabelCallback)&&o.call(this,t.handler,e))?i.cell.setAttribute("aria-label",o):i.cell.removeAttribute("aria-label")),this._doRenderCell(t,e,i,i.width-i.errorWidth-i.buttonWidth-i.editWidth-1,i.height-1)},o.prototype.getTooltip=function(t,e){var i,o;if(this.showTooltip)return o=(i=e.grid).body,e=e.column,(o=o.getCellAt(t.item,e,!1))&&this._makeText(i,o,t)||void 0},o.prototype.canShowInnerFocus=function(){return!1},o.prototype.canEdit=function(){return!1},o.prototype.canEditClickAt=function(t){return!1},o.prototype.preventDefaultEditClick=function(t){t.preventDefault()},o.prototype.editClick=function(t,e){var i=new B;if(this._doEditClick(t,e,i))return i},o.prototype._doEditClick=function(t,e,i){return!1},o.prototype.preventDefaultClick=function(t){t.preventDefault()},o.prototype.canClick=function(t){return!1},o.prototype.canClickSpaceKey=function(t){return!1},o.prototype.click=function(t,e,i){return this._doClick(t,e,i)},o.prototype.itemClick=function(){this._doItemClick()},o.prototype._doItemClick=function(){},o.prototype._doClick=function(t,e,i){},o.prototype.canEditKey=function(t){return!1},o.prototype.editKey=function(t,e){var i=new B;if(this._doEditKey(t,e,i))return i},o.prototype._doEditKey=function(t,e,i){return!1},o.prototype.moveClickElement=function(t,e){},o.prototype._doInitContent=function(t){re.Utils.setTextProp(t)},o.prototype._doClearContent=function(t){t&&(t[this._textProp]="")},o.prototype._doRenderCell=function(t,e,i,o,n){},o.prototype._changed=function(){this._dirty=!0},o.prototype._getValue=function(t,e,i){e=e.item.dataRow;if(0<=e){i=t.dataSource.getFieldIndex(i);if(0<=i)return t.dataSource.getValue(e,i)}},o.prototype._makeText=function(t,e,i){return e.getDisplayText(t,i)||e.dataColumn.placeHolder||""},o.prototype._clearHeight=function(){this._dom.style.height=""},o.prototype._setHeight=function(t){this._dom.style.height=0<=t?t+"px":""},o.prototype._isEmpty=function(t){return null==t||""==t||"number"==typeof t&&isNaN(t)},o.prototype._doInitOptions=function(){},o);function o(){var t=e.call(this)||this;return t._showTooltip=!1,t._refreshFocusChanged=!1,t._textProp=re.Utils.TextProp,t._inited=!1,t._dirty=!1,t._className="",t._itemClickable=!1,t}t.DataCellRenderer=i;n=i,ne.__extends(s,n),s.prototype._doDispose=function(){n.prototype._doDispose.call(this)},_dp(s,"type",{get:function(){return s.TYPE}}),s.prototype._doRenderCell=function(t,e,i,o,n){if(e instanceof st.ValueCell)if(e.index.itemIndex!==t.layoutManager.topIndex)switch(e.getBlankState()){case ht.BlankState.BODY:case ht.BlankState.TAIL:this.$_setText(e.dataColumn.equalBlankText);break;default:this.$_setText(this._makeText(t,e,i))}else this.$_setText(this._makeText(t,e,i))},s.prototype.$_setText=function(t){this._dom[this._textProp]=t||""},s.TYPE="text",s.Default=new s;var n,h,r=s;function s(){return n.call(this)||this}t.TextCellRenderer=r,(r=h=t.BarOrigin||(t.BarOrigin={})).DEFAULT="default",r.LEFT="left",r.RIGHT="right",r.TOP="top",r.BOTTOM="bottom";a=i,ne.__extends(d,a),d.prototype._doDispose=function(){a.prototype._doDispose.call(this)},_dp(d,"barStyle",{get:function(){return this._barStyle},set:function(t){t!=this._barStyle&&(this._barStyle=t,this._changed())}}),_dp(d,"rightBarStyle",{get:function(){return this._rightBarStyle},set:function(t){t!=this._rightBarStyle&&(this._rightBarStyle=t,this._changed())}}),_dp(d,"topBarStyle",{get:function(){return this._topBarStyle},set:function(t){t!=this._topBarStyle&&(this._topBarStyle=t,this._changed())}}),_dp(d,"bottomBarStyle",{get:function(){return this._bottomBarStyle},set:function(t){t!=this._bottomBarStyle&&(this._bottomBarStyle=t,this._changed())}}),_dp(d,"minimum",{get:function(){return this._minimum},set:function(t){t!=this._minimum&&(this._minimum=t,this._changed())}}),_dp(d,"maximum",{get:function(){return this._maximum},set:function(t){t!=this._maximum&&(this._maximum=t,this._changed())}}),_dp(d,"showLabel",{get:function(){return this._showLabel},set:function(t){t!=this._showLabel&&(this._showLabel=t,this._changed())}}),_dp(d,"barWidth",{get:function(){return this._barWidth},set:function(t){t!=this._barWidth&&("string"==typeof(this._barWidth=t)&&"%"==t.charAt(t.length-1)?this._percentShapeWidth=parseFloat(t.substring(0,t.length-1)):this._percentShapeWidth=NaN,this._changed())}}),_dp(d,"origin",{get:function(){return this._origin},set:function(t){t!=this._origin&&(this._origin=t,this._changed())}}),_dp(d,"absoluteValue",{get:function(){return this._absoluteValue},set:function(t){t!=this._absoluteValue&&(this._absoluteValue=t,this._changed())}}),_dp(d,"type",{get:function(){return d.TYPE}}),_dp(d,"styleName",{get:function(){return d.STYLE_NAME}}),d.prototype._doInitContent=function(t){var e,i=re.getDoc(t),i=(t[this._textProp]="",(e=this._div=i.createElement("div")).style.position="relative",t.appendChild(e),(e=this._span=i.createElement("span")).style);i.display="inline-block",i.position="absolute",i.top="50%",i.right="50%",i.msTransform=e.style.transform="translate(50%, -50%)",t.appendChild(e)},d.prototype._doRenderCell=function(t,e,i,o,n){var r=this._div,s=r.style,a=this._absoluteValue?Math.abs(e.value):e.value,l=Math.max(0,Math.min(1,(a-this._minimum)/(this._maximum-this._minimum)));switch(isNaN(l)&&(l=0),this._origin){case h.RIGHT:this.$_renderBar(h.RIGHT,s,l),r.className=this.rightBarStyle||d.BAR_RIGHT_STYLE;break;case h.TOP:this.$_renderBar(h.TOP,s,l),r.className=this.topBarStyle||d.BAR_TOP_STYLE;break;case h.BOTTOM:this.$_renderBar(h.BOTTOM,s,l),r.className=this.bottomBarStyle||d.BAR_BOTTOM_STYLE;break;default:h.LEFT;this.$_renderBar(h.LEFT,s,l),r.className=this.barStyle||d.BAR_STYLE}this.$_setText(this._showLabel?this._makeText(t,e,i):"")},d.prototype.$_renderBar=function(t,e,i){var o;e.removeProperty("transform"),e.removeProperty("ms-transform"),t===h.LEFT||t===h.RIGHT?(e.left=t===h.LEFT?"0px":100*(1-i)+"%",e.width=100*i+"%",isNaN(this._percentShapeWidth)?(o=this._barWidth,e.top="50%",e.msTransform=e.transform="translate(0%,-50%)",e.height=o+"px"):(e.top=(100-this._percentShapeWidth)/2+"%",e.height=this._percentShapeWidth+"%")):(e.top=t===h.TOP?"0px":100*(1-i)+"%",e.height=100*i+"%",isNaN(this._percentShapeWidth)?(o=this._barWidth,e.left="50%",e.msTransform=e.transform="translate(-50%,0%)",e.width=o+"px"):(e.left=(100-this._percentShapeWidth)/2+"%",e.width=this._percentShapeWidth+"%"))},d.prototype.$_setText=function(t){this._span[this._textProp]=t||""},d.TYPE="bar",d.STYLE_NAME="rg-renderer "+(d.STYLE="rg-bar-renderer"),d.BAR_STYLE="rg-bar-renderer-bar",d.BAR_RIGHT_STYLE="rg-bar-renderer-bar-right",d.BAR_TOP_STYLE="rg-bar-renderer-bar-top",d.BAR_BOTTOM_STYLE="rg-bar-renderer-bar-bottom";var a,r=d;function d(){var t=a.call(this)||this;return t._barStyle=d.BAR_STYLE,t._rightBarStyle=d.BAR_RIGHT_STYLE,t._topBarStyle=d.BAR_TOP_STYLE,t._bottomBarStyle=d.BAR_BOTTOM_STYLE,t._minimum=0,t._maximum=100,t._barWidth="80%",t._showLabel=!0,t._origin=h.LEFT,t._absoluteValue=!1,t._percentShapeWidth=80,t}t.BarCellRenderer=r;l=i,ne.__extends(u,l),u.prototype._doDispose=function(){l.prototype._doDispose.call(this)},_dp(u,"imageMap",{get:function(){return this._imageMap},set:function(t){t!==this._imageMap&&(this._imageMap=t,this._changed())}}),_dp(u,"imageCallback",{get:function(){return this._imageCallback},set:function(t){t!==this._imageCallback&&(this._imageCallback=t,this._changed())}}),_dp(u,"imageField",{get:function(){return this._imageField},set:function(t){t!=this._imageField&&(this._imageField=t,this._changed())}}),_dp(u,"titleField",{get:function(){return this._titleField},set:function(t){t!=this._titleField&&(this._titleField=t,this._changed())}}),_dp(u,"titleCallback",{get:function(){return this._titleCallback},set:function(t){t!==this._titleCallback&&(this._titleCallback=t,this._changed())}}),_dp(u,"imageHeight",{get:function(){return this._imageHeight},set:function(t){t!=this._imageHeight&&(this._imageHeight=t,this._changed())}}),_dp(u,"spaceKey",{get:function(){return this._spaceKey},set:function(t){this._spaceKey=t}}),_dp(u,"enterKey",{get:function(){return this._enterKey},set:function(t){this._enterKey=t}}),_dp(u,"type",{get:function(){return u.TYPE}}),_dp(u,"styleName",{get:function(){return u.STYLE_NAME}}),u.prototype._doInitContent=function(t){var e=this._img=re.getDoc(t).createElement("img");e.style.verticalAlign="middle",t.appendChild(e)},u.prototype._doRenderCell=function(t,e,i,o,n){var r=this._img,s=this.$_getImageUrl(t,e);s?(r.src=s,s=this.$_getTitle(t,e),r.alt=s||"",isNaN(this._imageHeight)?r.style.height="":r.style.height=this._imageHeight+"px"):(r.removeAttribute("src"),r.alt="")},u.prototype.canClick=function(t){return t.target===this._img},u.prototype._doClick=function(t,e,i){if(e.target===this._img||"keydown"===e.type)return{type:this.type,value:t.value}},u.prototype._doItemClick=function(){this._img.click()},u.prototype.canClickSpaceKey=function(t){return(this.spaceKey&&32==t.keyCode||this.enterKey&&13===t.keyCode)&&!t.ctrlKey&&!t.shiftKey&&!t.altKey},u.prototype._doInitOptions=function(){this._imageMap=this._imageCallback=this._imageField=this._titleField=this._titleCallback=this._imageHeight=void 0},u.prototype.$_getImageUrl=function(t,e){var i="",o=this._imageCallback;return(i=!(i=!(i=o?o.call(this,t.handler,e):i)&&this._imageMap?this._imageMap[e.value]:i)&&this._imageField?this._getValue(t,e,this._imageField):i)||""},u.prototype.$_getTitle=function(t,e){var i="",o=this._titleCallback;return(i=!(i=o?o.call(this,t.handler,e):i)&&this._titleField?this._getValue(t,e,this._titleField):i)||""},u.TYPE="image",u.STYLE_NAME="rg-renderer "+(u.STYLE="rg-image-renderer");var l,r=u;function u(){var t=l.call(this)||this;return t._spaceKey=!1,t._enterKey=!1,t._itemClickable=!0,t}t.ImageCellRenderer=r;c=i,ne.__extends(_,c),_.prototype._doDispose=function(){c.prototype._doDispose.call(this)},_dp(_,"itemGap",{get:function(){return this._itemGap},set:function(t){t!=this._itemGap&&(this._itemGap=t,this._changed())}}),_dp(_,"verticalEdgePad",{get:function(){return this._verticalEdgePad},set:function(t){t!=this._verticalEdgePad&&(this._verticalEdgePad=t,this._changed())}}),_dp(_,"textVisible",{get:function(){return this._textVisible},set:function(t){t!=this._textVisible&&(this._textVisible=t,this._changed())}}),_.prototype._doClearContent=function(t){c.prototype._doClearContent.call(this,t),this._reset()},_.prototype._reset=function(){this._oldLocation=void 0,this._imgHeight=this._imgWidth=this._imgLeft=this._imgRight=this._imgTop=this._imgBottom=this._spanPadRight=this._spanPadLeft=NaN,this._imgFixed=this._imgMiddle=this._imgCenter=this._spanVis=this._spanCenter=this._spanText=void 0,this._dom&&(this._dom[re.Utils.TextProp]="")},_.prototype.$_setImgFixed=function(t,e,i){e==this._imgFixed&&!i||(this._imgFixed=e,t.style.position=e?"absolute":"")},_.prototype.$_setImgMiddle=function(t,e,i){e==this._imgMiddle&&!i||(this._imgMiddle=e,t.style.verticalAlign=e?"middle":"")},_.prototype.$_setImgCenter=function(t,e,i){e==this._imgCenter&&!i||(this._imgCenter=e,t.style.textAlign=e?"center":"")},_.prototype.$_setImgWidth=function(t,e,i){(e=isNaN(e)?0:e)==this._imgWidth&&!i||(this._imgWidth=e,t.style.width=0<e?e+"px":"")},_.prototype.$_setImgHeight=function(t,e,i){(e=isNaN(e)?0:e)==this._imgHeight&&!i||(this._imgHeight=e,t.style.height=0<e?e+"px":"")},_.prototype.$_setImgBounds=function(t,e,i,o,n,r){e==this._imgTop&&!r||(this._imgTop=e,t.style.top=0<e?e+"px":""),i==this._imgLeft&&!r||(this._imgLeft=i,t.style.left=0<i?i+"px":""),o==this._imgBottom&&!r||(this._imgBottom=o,t.style.bottom=0<o?o+"px":""),n==this._imgRight&&!r||(this._imgRight=n,t.style.right=0<n?n+"px":"")},_.prototype.$_clearImgBounds=function(t,e){(0<this._imgTop||e)&&(this._imgTop=0,t.style.top=""),(0<this._imgLeft||e)&&(this._imgLeft=0,t.style.left=""),(0<this._imgBottom||e)&&(this._imgBottom=0,t.style.bottom=""),(0<this._imgRight||e)&&(this._imgRight=0,t.style.right="")},_.prototype.$_setSpanVis=function(t){t!=this._spanVis&&(this._spanVis=t,this._span.style.display=t?"":"none",this.grid.accessibility)&&(t?this._span.removeAttribute("aria-hidden"):this._span.setAttribute("aria-hidden","true"))},_.prototype.$_setSpanPadLeft=function(t){t!=this._spanPadLeft&&(this._spanPadLeft=t,this._span.style.paddingLeft=0<t?t+"px":"")},_.prototype.$_setSpanPadRight=function(t){t!=this._spanPadRight&&(this._spanPadRight=t,this._span.style.paddingRight=0<t?t+"px":"")},_.prototype.$_setSpanCenter=function(t,e){var i;void 0===e&&(e=0),t!=this._spanCenter&&(i=this._span.style,(this._spanCenter=t)?(i.left="50%",i.top=50+e+"%",i.transform="translate(-50%, -50%)",i.position="absolute"):(i.left="",i.top="",i.transform="",i.position=""))},_.prototype.$_setSpanText=function(t){t!=this._spanText&&(this._spanText=t,t=this._textVisible?this._spanText:void 0,this._span[this._textProp]=t)},_.prototype.$_layoutLeft=function(t,e,i,o){this._reversed&&(t.insertBefore(e,i),this._reversed=!1),this._splitted&&(t.removeChild(this._br),this._splitted=!1),this.$_setImgFixed(e,!1,o),this.$_setImgMiddle(e,!0,o),this.$_setImgCenter(e,!1,o),this.$_clearImgBounds(e,o),this.$_setSpanVis(!0),this.$_setSpanCenter(!1),this.$_setSpanPadLeft(this._itemGap),this.$_setSpanPadRight(0)},_.prototype.$_layoutRight=function(t,e,i,o){this._reversed||(t.insertBefore(i,e),this._reversed=!0),this._splitted&&(t.removeChild(this._br),this._splitted=!1),this.$_setImgFixed(e,!1,o),this.$_setImgMiddle(e,!0,o),this.$_setImgCenter(e,!1,o),this.$_clearImgBounds(e,o),this.$_setSpanVis(!0),this.$_setSpanCenter(!1),this.$_setSpanPadLeft(0),this.$_setSpanPadRight(4)},_.prototype.$_layoutTop=function(t,e,i,o){this._reversed&&(t.insertBefore(e,i),this._reversed=!1),this._splitted||(t.insertBefore(this._br,i),this._splitted=!0),this.$_setImgFixed(e,!1,o),this.$_setImgMiddle(e,!1,o),this.$_setImgCenter(e,!1,o),this.$_clearImgBounds(e,o),this.$_setSpanVis(!0),this.$_setSpanCenter(!1),this.$_setSpanPadLeft(0),this.$_setSpanPadRight(0)},_.prototype.$_layoutBottom=function(t,e,i,o){this._reversed||(t.insertBefore(i,e),this._reversed=!0),this._splitted||(t.insertBefore(this._br,e),this._splitted=!0),this.$_setImgFixed(e,!1,o),this.$_setImgMiddle(e,!1,o),this.$_setImgCenter(e,!1,o),this.$_clearImgBounds(e,o),this.$_setSpanVis(!0),this.$_setSpanCenter(!1),this.$_setSpanPadLeft(0),this.$_setSpanPadRight(0)},_.prototype.$_layoutLeftEdge=function(t,e,i,o,n){this._reversed&&(t.insertBefore(e,i),this._reversed=!1),this._splitted&&(t.removeChild(this._br),this._splitted=!1),this.$_setImgFixed(e,!0,n),this.$_setImgMiddle(e,!0,n),this.$_setImgCenter(e,!1,n),this.$_setImgBounds(e,0,2,0,0,n),this.$_setSpanVis(!0),this.$_setSpanCenter(!1),this.$_setSpanPadLeft(0),this.$_setSpanPadRight(0),i.style.marginLeft=isNaN(o)?"":o+"px"},_.prototype.$_layoutRightEdge=function(t,e,i,o,n){this._reversed||(t.insertBefore(i,e),this._reversed=!0),this._splitted&&(t.removeChild(this._br),this._splitted=!1),this.$_setImgFixed(e,!0,n),this.$_setImgMiddle(e,!0,n),this.$_setImgCenter(e,!1,n),this.$_setImgBounds(e,0,0,0,2,n),this.$_setSpanVis(!0),this.$_setSpanCenter(!1),this.$_setSpanPadLeft(0),this.$_setSpanPadRight(o)},_.prototype.$_layoutTopEdge=function(t,e,i,o,n,r,s,a){this._reversed&&(t.insertBefore(e,i),this._reversed=!1),this._splitted||(t.insertBefore(this._br,i),this._splitted=!0),this.$_setImgFixed(e,!0,a),this.$_setImgMiddle(e,!1,a),this.$_setImgCenter(e,!1,a),this.$_setImgBounds(e,2,(o-r)/2,0,0,a),this.$_setSpanVis(!0),this.$_setSpanCenter(!0,s*((n-s)/n)),this.$_setSpanPadLeft(0),this.$_setSpanPadRight(0)},_.prototype.$_layoutBottomEdge=function(t,e,i,o,n,r,s,a){this._reversed||(t.insertBefore(i,e),this._reversed=!0),this._splitted||(t.insertBefore(this._br,e),this._splitted=!0),this.$_setImgFixed(e,!0,a),this.$_setImgMiddle(e,!1,a),this.$_setImgCenter(e,!0,a),this.$_setImgBounds(e,0,(o-r)/2,2,0,a),this.$_setSpanVis(!0),this.$_setSpanCenter(!0,(n-s)/n*-s),this.$_setSpanPadLeft(0),this.$_setSpanPadRight(0)},_.prototype.$_layoutCenter=function(t,e,i,o){this._reversed&&(t.insertBefore(e,i),this._reversed=!1),this._splitted&&(t.removeChild(this._br),this._splitted=!1),this.$_setImgFixed(e,!1,o),this.$_setImgMiddle(e,!0,o),this.$_setImgCenter(e,!0,o),this.$_clearImgBounds(e,o),this.$_setSpanVis(!1),this.$_setSpanCenter(!0),this.$_setSpanPadLeft(0),this.$_setSpanPadRight(0)};var c,r=_;function _(t,e){void 0===t&&(t=0),void 0===e&&(e=0);var i=c.call(this)||this;return i._itemGap=4,i._verticalEdgePad=2,i._textVisible=!0,i._reversed=!1,i._splitted=!1,i._imgFixed=!1,i._imgMiddle=!1,i._imgCenter=!1,i._imgHeight=16,i._imgWidth=16,i._imgLeft=0,i._imgRight=0,i._imgTop=0,i._imgBottom=0,i._spanVis=void 0,i._spanPadRight=0,i._spanPadLeft=0,i._spanCenter=!1,i._spanText="",i._imgWidth=t,i._imgHeight=e,i}t.FlexibleCellRenderer=r;p=r,ne.__extends(g,p),g.prototype._doDispose=function(){p.prototype._doDispose.call(this)},_dp(g,"iconMap",{get:function(){return this._iconMap},set:function(t){t!==this._iconMap&&(this._iconMap=t,this._changed())}}),_dp(g,"iconCallback",{get:function(){return this._iconCallback},set:function(t){t!==this._iconCallback&&(this._iconCallback=t,this._changed())}}),_dp(g,"titleCallback",{get:function(){return this._titleCallback},set:function(t){this._titleCallback=t,this._changed()}}),_dp(g,"iconUrl",{get:function(){return this._iconUrl},set:function(t){this._iconUrl=t,this._changed()}}),_dp(g,"iconField",{get:function(){return this._iconField},set:function(t){t!=this._iconField&&(this._iconField=t,this._changed())}}),_dp(g,"iconLocation",{get:function(){return this._iconLocation},set:function(t){t!=this._iconLocation&&(this._oldLocation=this._iconLocation,this._iconLocation=t,this._changed())}}),_dp(g,"iconWidth",{get:function(){return this._iconWidth},set:function(t){t!=this._iconWidth&&(this._iconWidth=t,this._changed())}}),_dp(g,"iconHeight",{get:function(){return this._iconHeight},set:function(t){t!=this._iconHeight&&(this._iconHeight=t,this._changed())}}),_dp(g,"spaceKey",{get:function(){return this._spaceKey},set:function(t){this._spaceKey=t}}),_dp(g,"enterKey",{get:function(){return this._enterKey},set:function(t){this._enterKey=t}}),_dp(g,"type",{get:function(){return g.TYPE}}),_dp(g,"styleName",{get:function(){return g.STYLE_NAME+" rg-icon-"+this.$_getStyleName().toLowerCase()}}),g.prototype._doInitContent=function(t){var e=re.getDoc(t),i=this._img=e.createElement("img"),i=(i.alt="",t.appendChild(i),this._span=e.createElement("span"));t.appendChild(i),this._br=e.createElement("br")},g.prototype._reset=function(){p.prototype._reset.call(this),this._imgSrc=this._splitted=this._reversed=void 0},g.prototype._doInitOptions=function(){this._iconMap=this._iconCallback=this._titleCallback=this._iconUrl=this._iconField=void 0,this._iconWidth=this._iconHeight=NaN,this._iconLocation=ht.IconLocation.LEFT},g.prototype._doRenderCell=function(t,e,i,o,n){var r=this._img,s=this._span;if(this.$_setImgWidth(r,this._iconWidth,!1),this.$_setImgHeight(r,this._iconHeight,!1),this.$_setImgSrc(this.$_getIconUrl(t,e),this.$_getTitle(t,e)),this.$_setSpanText(this._makeText(t,e,i)),this._oldLocation!=this._iconLocation){switch(this._iconLocation){case ht.IconLocation.LEFT:this.$_layoutLeft(this._dom,r,s,!1);break;case ht.IconLocation.RIGHT:this.$_layoutRight(this._dom,r,s,!1);break;case ht.IconLocation.TOP:this.$_layoutTop(this._dom,r,s,!1);break;case ht.IconLocation.BOTTOM:this.$_layoutBottom(this._dom,r,s,!1);break;case ht.IconLocation.LEFT_EDGE:this.$_layoutLeftEdge(this._dom,r,s,this._iconWidth,!1);break;case ht.IconLocation.RIGHT_EDGE:this.$_layoutRightEdge(this._dom,r,s,this._iconWidth,!1);break;case ht.IconLocation.TOP_EDGE:this.$_layoutTopEdge(this._dom,r,s,o,n,this._iconWidth,this._iconHeight,!1);break;case ht.IconLocation.BOTTOM_EDGE:this.$_layoutBottomEdge(this._dom,r,s,o,n,this._iconWidth,this._iconHeight,!1);break;case ht.IconLocation.CENTER:this.$_layoutCenter(this._dom,r,s,!1);break;default:this.$_layoutLeft(this._dom,r,s,!1)}this._oldLocation=this._iconLocation}this._iconLocation==ht.IconLocation.TOP_EDGE||this._iconLocation==ht.IconLocation.BOTTOM_EDGE?this._setHeight(n):this._clearHeight()},g.prototype.canClick=function(t){return t.target===this._img},g.prototype.canClickSpaceKey=function(t){return(this.spaceKey&&32==t.keyCode||this.enterKey&&13===t.keyCode)&&!t.ctrlKey&&!t.shiftKey&&!t.altKey},g.prototype._doClick=function(t,e,i){var o={};if(e.target===this._img||"keydown"===e.type)return o.type=this.type,o.value=t.value,o},g.prototype._doItemClick=function(){this._img.click()},g.prototype.$_getIconUrl=function(t,e){var i=void 0,o=this._iconCallback;return(i=void 0===(i=void 0===(i=void 0===(i=o?o.call(this,t.handler,e):i)&&this._iconMap?this._iconMap[e.value]:i)&&this._iconField?this._getValue(t,e,this._iconField):i)?this._iconUrl:i)||""},g.prototype.$_getTitle=function(t,e){var i,o=this._titleCallback;return(i=o?o.call(this,t.handler,e):i)||""},g.prototype.$_setImgSrc=function(t,e){t==this._imgSrc&&e===this._img.alt||((this._imgSrc=t)?(this._img.src=t,this._img.alt=e):(this._img.removeAttribute("src"),this._img.alt=""))},g.prototype.$_getStyleName=function(){return String(this._iconLocation)||String(ht.IconLocation.LEFT)},g.prototype.preventDefaultClick=function(t){t.target===this._img&&(t.preventDefault(),t.stopImmediatePropagation())},g.TYPE="icon",g.STYLE_NAME="rg-renderer "+(g.STYLE="rg-icon-renderer");var p,f=g;function g(){var t=p.call(this)||this;return t._iconWidth=NaN,t._iconHeight=NaN,t._iconLocation=ht.IconLocation.LEFT,t._spaceKey=!1,t._enterKey=!1,t._imgSrc="",t._itemClickable=!0,t}t.IconCellRenderer=f;m=f,ne.__extends(y,m),y.prototype._doInitContent=function(t){m.prototype._doInitContent.call(this,t),t.style.setProperty("display","flex","important")},y.prototype._doClearContent=function(t){m.prototype._doClearContent.call(this,t),U.RenderHelper.clearFlex(t)},y.prototype.$_layoutLeft=function(t,e,i){U.RenderHelper.layoutFlex(t,e,i,this._itemGap,this._verticalEdgePad,ht.IconLocation.LEFT)},y.prototype.$_layoutRight=function(t,e,i){U.RenderHelper.layoutFlex(t,e,i,this._itemGap,this._verticalEdgePad,ht.IconLocation.RIGHT)},y.prototype.$_layoutTop=function(t,e,i){U.RenderHelper.layoutFlex(t,e,i,this._itemGap,this._verticalEdgePad,ht.IconLocation.TOP)},y.prototype.$_layoutBottom=function(t,e,i){U.RenderHelper.layoutFlex(t,e,i,this._itemGap,this._verticalEdgePad,ht.IconLocation.BOTTOM)},y.prototype.$_layoutLeftEdge=function(t,e,i){U.RenderHelper.layoutFlex(t,e,i,this._itemGap,this._verticalEdgePad,ht.IconLocation.LEFT_EDGE)},y.prototype.$_layoutRightEdge=function(t,e,i){U.RenderHelper.layoutFlex(t,e,i,this._itemGap,this._verticalEdgePad,ht.IconLocation.RIGHT_EDGE)},y.prototype.$_layoutTopEdge=function(t,e,i){U.RenderHelper.layoutFlex(t,e,i,this._itemGap,this._verticalEdgePad,ht.IconLocation.TOP_EDGE)},y.prototype.$_layoutBottomEdge=function(t,e,i){U.RenderHelper.layoutFlex(t,e,i,this._itemGap,this._verticalEdgePad,ht.IconLocation.BOTTOM_EDGE)},y.prototype.$_layoutCenter=function(t,e,i){U.RenderHelper.layoutFlex(t,e,i,this._itemGap,this._verticalEdgePad,ht.IconLocation.CENTER)};var m,f=y;function y(){return null!==m&&m.apply(this,arguments)||this}t.FlexIconCellRenderer=f;v=r,ne.__extends(C,v),C.prototype._doDispose=function(){v.prototype._doDispose.call(this)},_dp(C,"getCheckedCallback",{get:function(){return this._getCheckedCallback},set:function(t){t!==this._getCheckedCallback&&(this._getCheckedCallback=t,this._changed())}}),_dp(C,"setCheckedCallback",{get:function(){return this._setCheckedCallback},set:function(t){t!==this._setCheckedCallback&&(this._setCheckedCallback=t,this._changed())}}),_dp(C,"trueValues",{get:function(){return this._trueValues},set:function(t){t!==this._trueValues&&(this._trueValues=t,this.$_resetValues(),this._changed())}}),_dp(C,"falseValues",{get:function(){return this._falseValues},set:function(t){t!==this._falseValues&&(this._falseValues=t,this.$_resetValues(),this._changed())}}),_dp(C,"strictValue",{get:function(){return this._strictValue},set:function(t){t!=this._strictValue&&(this._strictValue=t,this._changed())}}),_dp(C,"threeStates",{get:function(){return this._threeStates},set:function(t){t!=this._threeStates&&(this._threeStates=t,this._changed())}}),_dp(C,"spaceKey",{get:function(){return this._spaceKey},set:function(t){this._spaceKey=t}}),_dp(C,"checkLocation",{get:function(){return this._checkLocation},set:function(t){t!=this._checkLocation&&(this._checkLocation=t,this._changed())}}),_dp(C,"useImages",{get:function(){return this._useImages},set:function(t){t!=this._useImages&&(this._useImages=t,this._changed())}}),_dp(C,"editable",{get:function(){return this._editable},set:function(t){this._editable=t}}),_dp(C,"showInnerFocus",{get:function(){return this._showInnerFocus},set:function(t){this._showInnerFocus=t}}),_dp(C,"type",{get:function(){return C.TYPE}}),_dp(C,"styleName",{get:function(){return C.STYLE_NAME}}),C.prototype.canEdit=function(){var t=this.grid.editOptions;if(t.columnEditableFirst){if(!(null!=this.editable?this:t).editable)return!1}else if(!t.editable||!this.editable)return!1;return this._editable},C.prototype.canShowInnerFocus=function(){return this._showInnerFocus&&this._editable},C.prototype._doInitContent=function(t){var e=re.getDoc(t),i=this._check=e.createElement("input"),o=(i.type="checkbox",i.tabIndex=-1,i.style.display="inline-block",this._span=e.createElement("span")),i=(t.appendChild(i),t.appendChild(o),this._image=e.createElement("span"));i.className=this._checkedStyle,i.style.display="inline-block",this._br=e.createElement("br")},C.prototype._reset=function(){v.prototype._reset.call(this),this._splitted=this._reversed=void 0,this._oldUsed=!1},C.prototype._doRenderCell=function(t,e,i,o,n){var r=this._check,s=this._image,a=this._span,l=this._dom,h=r,d=(this._imgWidth=t.container.measureCheckWidth(),this._imgHeight=t.container.measureCheckHeight(),this.$_getChecked(t,e.value,e.index,this._getCheckedCallback)),u=r.id=C.FOR_ID+"-"+e.dataColumn.$_hash+"-"+e.item.index;if(a.setAttribute("for",u),r.checked=d,r.indeterminate=this._threeStates&&void 0===d,this._useChanged=this._useImages!==this._oldUsed,this._useChanged&&(this._oldUsed?(l.removeChild(s),this._check.style.display="inline-block"):(l.insertBefore(s,this._check),this._check.style.display="none")),this._oldUsed=this._useImages,this._useImages&&(s.className=d?this._checkedStyle:void 0===d&&this.threeStates?this._intermediateStyle:this._uncheckedStyle,h=s),i.merged&&this.canEdit()&&!re.Utils.included(this.checkLocation,ht.IconLocation.TOP_EDGE,ht.IconLocation.BOTTOM_EDGE)&&i.focused||l.style.removeProperty("top"),this.$_setSpanText(this._makeText(t,e,i)),this._oldLocation!=this._checkLocation){switch(this._checkLocation){case ht.IconLocation.LEFT:this.$_layoutLeft(l,h,a);break;case ht.IconLocation.RIGHT:this.$_layoutRight(l,h,a);break;case ht.IconLocation.TOP:this.$_layoutTop(l,h,a);break;case ht.IconLocation.BOTTOM:this.$_layoutBottom(l,h,a);break;case ht.IconLocation.LEFT_EDGE:this.$_layoutLeftEdge(l,h,a);break;case ht.IconLocation.RIGHT_EDGE:this.$_layoutRightEdge(l,h,a);break;case ht.IconLocation.TOP_EDGE:this.$_layoutTopEdge(l,h,a,o,n);break;case ht.IconLocation.BOTTOM_EDGE:this.$_layoutBottomEdge(l,h,a,o,n);break;case ht.IconLocation.CENTER:this.$_layoutCenter(l,h,a);break;default:this.$_layoutLeft(l,h,a)}this._oldLocation=this._checkLocation}this._checkLocation==ht.IconLocation.TOP_EDGE||this._checkLocation==ht.IconLocation.BOTTOM_EDGE?this._setHeight(n):this._clearHeight()},C.prototype.canEditClickAt=function(t){return this.preventDefaultEditClick(t),t.target===this._check||t.target===this._image},C.prototype.preventDefaultEditClick=function(t){t.target===this._check&&t.preventDefault()},C.prototype._doEditClick=function(t,e,i){if(e.target===this._check||e.target===this._image)return this.$_edit(t,i),!0},C.prototype.canEditKey=function(t){return this.spaceKey&&32==t.keyCode&&!t.ctrlKey&&!t.shiftKey&&!t.altKey},C.prototype._doEditKey=function(t,e,i){return this.$_edit(t,i),!0},C.prototype._doItemClick=function(){this._check.click()},C.prototype.moveClickElement=function(t,e){var i=this._dom;e||!this.canEdit()||re.Utils.included(ht.IconLocation.TOP_EDGE,ht.IconLocation.BOTTOM_EDGE)||(i.style.top=t+"px")},C.prototype.$_resetValues=function(){var t;if(this._values={},this._falseValues)if(t=this._falseValues.split(",")){var e=void 0;this._falseValue=0<(e=t.length)?t[0]:void 0;for(var i=0;i<e;i++)this._values[t[i]]=!1}else this._falseValue=void 0;if(this._trueValues)if(t=this._trueValues.split(",")){e=void 0;this._trueValue=0<(e=t.length)?t[0]:void 0;for(i=0;i<e;i++)this._values[t[i]]=!0}else this._trueValue=void 0},C.prototype.$_getChecked=function(t,e,i,o){return o?o(t.handler,i.itemIndex,i.dataColumn,e):((o=i.dataColumn)&&o.valueType===ht.ValueType.OBJECT&&(t=o.getField(),i=o.objectKey||t.objectKey,e=null==e?void 0:e[i]),"boolean"==typeof e?e:(o=String(e),this._values.hasOwnProperty(o)?this._values[o]:!this._threeStates||!this._strictValue&&""!=e&&null!=e?Boolean(e):void 0))},C.prototype.$_edit=function(t,e){var i=t.grid,o=t.dataColumn,n=t.value,r=this.$_getChecked(i,t.value,t,this._getCheckedCallback),r=!r&&(void 0===r||!this._threeStates||void 0),s=this._setCheckedCallback;s?r=s(i.handler,t.itemIndex,t.dataColumn,n,r):void 0!==this._trueValue&&r?r=this._trueValue:void 0!==this._falseValue&&!1===r&&(r=this._falseValue),o&&o.valueType===ht.ValueType.OBJECT?(s=o.getField(),(i=n||{})[o.objectKey||s.objectKey]=r,e.value=i):e.value=r},C.prototype.$_layoutLeft=function(t,e,i){var o=this._useImages,e=o?this._image:e;v.prototype.$_layoutLeft.call(this,t,e,i,o)},C.prototype.$_layoutRight=function(t,e,i){var o=this._useImages,e=o?this._image:e;v.prototype.$_layoutRight.call(this,t,e,i,o)},C.prototype.$_layoutTop=function(t,e,i){var o=this._useImages,e=o?this._image:e;v.prototype.$_layoutTop.call(this,t,e,i,o)},C.prototype.$_layoutBottom=function(t,e,i){var o=this._useImages,e=o?this._image:e;v.prototype.$_layoutBottom.call(this,t,e,i,o)},C.prototype.$_layoutLeftEdge=function(t,e,i){var o=this._useImages,e=o?this._image:e;v.prototype.$_layoutLeftEdge.call(this,t,e,i,this._imgWidth,o)},C.prototype.$_layoutRightEdge=function(t,e,i){var o=this._useImages,e=o?this._image:e;v.prototype.$_layoutRightEdge.call(this,t,e,i,this._imgWidth,o)},C.prototype.$_layoutTopEdge=function(t,e,i,o,n){var r=this._useImages,e=r?this._image:e;v.prototype.$_layoutTopEdge.call(this,t,e,i,o,n,this._imgWidth,this._imgHeight,r)},C.prototype.$_layoutBottomEdge=function(t,e,i,o,n){var r=this._useImages,e=r?this._image:e;v.prototype.$_layoutBottomEdge.call(this,t,e,i,o,n,this._imgWidth,this._imgHeight,r)},C.prototype.$_layoutCenter=function(t,e,i){var o=this._useImages,e=o?this._image:e;v.prototype.$_layoutCenter.call(this,t,e,i,o)},C.prototype.$_setImageMiddle=function(t,e,i){e==this._imgMiddle&&!i||(this._imgMiddle=e)},C.prototype.$_getStyleName=function(){return String(this._checkLocation)||String(ht.IconLocation.LEFT)},C.TYPE="check",C.STYLE="rg-check-renderer",C.FOR_ID="$$-check-cell-renderer",C.STYLE_NAME="rg-renderer "+C.STYLE,C.CHECKED_STYLE="rg-check-renderer-checked",C.UNCHECKED_STYLE="rg-check-renderer-unchecked",C.INTERMEDIATE_STYLE="rg-check-renderer-intermediate";var v,f=C;function C(){var t=v.call(this,16,16)||this;return t._strictValue=!1,t._threeStates=!1,t._checkLocation=ht.IconLocation.CENTER,t._useImages=!1,t._checkedStyle=C.CHECKED_STYLE,t._uncheckedStyle=C.UNCHECKED_STYLE,t._intermediateStyle=C.INTERMEDIATE_STYLE,t._editable=!0,t._spaceKey=!0,t._showInnerFocus=!1,t._oldUsed=!1,t._useChanged=!1,t._values={},t.refreshFocusChanged=!0,t}t.CheckCellRenderer=f;w=f,ne.__extends(x,w),x.prototype._doInitContent=function(t){w.prototype._doInitContent.call(this,t),t.style.setProperty("display","flex","important")},x.prototype._doClearContent=function(t){w.prototype._doClearContent.call(this,t),U.RenderHelper.clearFlex(t)},x.prototype.$_layoutLeft=function(t,e,i){U.RenderHelper.layoutFlex(t,e,i,this._itemGap,this._verticalEdgePad,ht.IconLocation.LEFT)},x.prototype.$_layoutRight=function(t,e,i){U.RenderHelper.layoutFlex(t,e,i,this._itemGap,this._verticalEdgePad,ht.IconLocation.RIGHT)},x.prototype.$_layoutTop=function(t,e,i){U.RenderHelper.layoutFlex(t,e,i,this._itemGap,this._verticalEdgePad,ht.IconLocation.TOP)},x.prototype.$_layoutBottom=function(t,e,i){U.RenderHelper.layoutFlex(t,e,i,this._itemGap,this._verticalEdgePad,ht.IconLocation.BOTTOM)},x.prototype.$_layoutLeftEdge=function(t,e,i){U.RenderHelper.layoutFlex(t,e,i,this._itemGap,this._verticalEdgePad,ht.IconLocation.LEFT_EDGE)},x.prototype.$_layoutRightEdge=function(t,e,i){U.RenderHelper.layoutFlex(t,e,i,this._itemGap,this._verticalEdgePad,ht.IconLocation.RIGHT_EDGE)},x.prototype.$_layoutTopEdge=function(t,e,i,o,n){U.RenderHelper.layoutFlex(t,e,i,this._itemGap,this._verticalEdgePad,ht.IconLocation.TOP_EDGE)},x.prototype.$_layoutBottomEdge=function(t,e,i,o,n){U.RenderHelper.layoutFlex(t,e,i,this._itemGap,this._verticalEdgePad,ht.IconLocation.BOTTOM_EDGE)},x.prototype.$_layoutCenter=function(t,e,i){U.RenderHelper.layoutFlex(t,e,i,this._itemGap,this._verticalEdgePad,ht.IconLocation.CENTER)};var w,f=x;function x(){return null!==w&&w.apply(this,arguments)||this}t.FlexCheckCellRenderer=f;b=i,ne.__extends(I,b),I.prototype._doDispose=function(){b.prototype._doDispose.call(this)},_dp(I,"buttonStyle",{get:function(){return this._buttonStyle},set:function(t){t!=this._buttonStyle&&(this._buttonStyle=t,this._changed())}}),_dp(I,"hideWhenEmpty",{get:function(){return this._hideWhenEmpty},set:function(t){t!=this._hideWhenEmpty&&(this._hideWhenEmpty=t,this._changed())}}),_dp(I,"spaceKey",{get:function(){return this._spaceKey},set:function(t){this._spaceKey=t}}),_dp(I,"enterKey",{get:function(){return this._enterKey},set:function(t){this._enterKey=t}}),_dp(I,"type",{get:function(){return I.TYPE}}),_dp(I,"styleName",{get:function(){return I.STYLE_NAME}}),I.prototype._doInitContent=function(t){var e=this._button=re.getDoc(t).createElement("button");e.type="button",e.tabIndex=-1,e.style.display="inline-block",t.appendChild(e)},I.prototype._doRenderCell=function(t,e,i,o,n){var r=this._button;r[this._textProp]=this._makeText(t,e,i),r.setAttribute("class",this._buttonStyle),r.style.visibility=this._hideWhenEmpty&&this._isEmpty(e.value)?"hidden":""},I.prototype.canClick=function(t){return t.target===this._button},I.prototype.canClickSpaceKey=function(t){return(this.spaceKey&&32==t.keyCode||this.enterKey&&13===t.keyCode)&&!t.ctrlKey&&!t.shiftKey&&!t.altKey},I.prototype._doClick=function(t,e,i){if(e.target===this._button||"keydown"===e.type)return{type:this.type,value:t.value}},I.prototype._doItemClick=function(){this._button.click()},I.TYPE="button",I.STYLE_NAME="rg-renderer "+(I.STYLE="rg-button-renderer"),I.BUTTON_STYLE="rg-button-renderer-button";var b,f=I;function I(){var t=b.call(this)||this;return t._buttonStyle=I.BUTTON_STYLE,t._hideWhenEmpty=!0,t._spaceKey=!0,t._enterKey=!1,t._itemClickable=!0,t}t.ButtonCellRenderer=f;E=i,ne.__extends(S,E),S.prototype._doDispose=function(){E.prototype._doDispose.call(this)},_dp(S,"baseUrl",{get:function(){return this._baseUrl},set:function(t){t!=this._baseUrl&&(this._baseUrl=t,this._changed())}}),_dp(S,"linkField",{get:function(){return this._linkField},set:function(t){t!=this._linkField&&(this._linkField=t,this._changed())}}),_dp(S,"urlCallback",{get:function(){return this._urlCallback},set:function(t){t!==this._urlCallback&&(this._urlCallback=t,this._changed())}}),_dp(S,"titleField",{get:function(){return this._titleField},set:function(t){t!=this._titleField&&(this._titleField=t,this._changed())}}),_dp(S,"titleCallback",{get:function(){return this._titleCallback},set:function(t){t!==this._titleCallback&&(this._titleCallback=t,this._changed())}}),_dp(S,"spaceKey",{get:function(){return this._spaceKey},set:function(t){this._spaceKey=t}}),_dp(S,"enterKey",{get:function(){return this._enterKey},set:function(t){this._enterKey=t}}),_dp(S,"classCallback",{get:function(){return this._classCallback},set:function(t){this._classCallback=t}}),_dp(S,"target",{get:function(){return this._target},set:function(t){this._target=t}}),_dp(S,"type",{get:function(){return S.TYPE}}),_dp(S,"styleName",{get:function(){return S.STYLE_NAME}}),S.prototype._doInitContent=function(t){var e=this._anchor=re.getDoc(t).createElement("a");e.tabIndex=-1,t.appendChild(e)},S.prototype._doInitOptions=function(){this._baseUrl=this._linkField=this._urlCallback=this._titleField=this._titleCallback=this._url=this._classCallback=void 0},S.prototype._doRenderCell=function(t,e,i,o,n){var r=this._anchor,i=(r[this._textProp]=this._makeText(t,e,i),this._url="","#"===this._baseUrl?(r.removeAttribute("target"),r.href="#"):(this._url=this.$_getUrl(t,e),this._url&&(r.target=null==this.target?"_blank":this.target,r.href=this._url)),this.$_getTitle(t,e)),i=(i?r.title=i:delete r.title,this.$_getStyle(t,e));i?r.className=i:r.removeAttribute("class")},S.prototype.preventDefaultClick=function(t){t.target===this._anchor&&(t.preventDefault(),t.stopImmediatePropagation())},S.prototype.canClick=function(t){return t.target===this._anchor},S.prototype._doClick=function(t,e,i){if(e.target===this._anchor||"keydown"===e.type)return{type:this.type,url:this._url,value:t.value}},S.prototype.canClickSpaceKey=function(t){return(this.spaceKey&&32==t.keyCode||this.enterKey&&13===t.keyCode)&&!t.ctrlKey&&!t.shiftKey&&!t.altKey},S.prototype._doItemClick=function(){this._anchor.click()},S.prototype.$_getUrl=function(t,e){var i="",o=this._urlCallback;return(i=o?o.call(this,t.handler,e):i)||(i=this._linkField?this._getValue(t,e,this._linkField):e.value,this._baseUrl&&(i=this._baseUrl+i)),i||""},S.prototype.$_getTitle=function(t,e){var i="",o=this._titleCallback;return(i=!(i=o?o.call(this,t.handler,e):i)&&this._titleField?this._getValue(t,e,this._titleField):i)||""},S.prototype.$_getStyle=function(t,e){var i="",o=this._classCallback;return(i=o?o.call(this,t.handler,e):i)||""},S.TYPE="link",S.STYLE_NAME="rg-renderer "+(S.STYLE="rg-link-renderer");var E,f=S;function S(){var t=E.call(this)||this;return t._spaceKey=!0,t._enterKey=!1,t._itemClickable=!0,t}t.LinkCellRenderer=f;R=r,ne.__extends(T,R),T.prototype._doDispose=function(){R.prototype._doDispose.call(this)},_dp(T,"shapeStyle",{get:function(){return this._shapeStyle},set:function(t){t!=this._shapeStyle&&(this._shapeStyle=t,this._changed())}}),_dp(T,"shape",{get:function(){return this._shape},set:function(t){t!=this._shape&&(this._shape=t,this._changed())}}),_dp(T,"shapeMap",{get:function(){return this._shapeMap},set:function(t){t!==this._shapeMap&&(this._shapeMap=t,this._changed())}}),_dp(T,"shapeCallback",{get:function(){return this._shapeCallback},set:function(t){t!=this._shapeCallback&&(this._shapeCallback=t,this._changed())}}),_dp(T,"shapeWidth",{get:function(){return this._shapeWidth},set:function(t){this._shapeWidth!==t&&(this._shapeWidth=t,this._changed())}}),_dp(T,"shapeHeight",{get:function(){return this._shapeHeight},set:function(t){this._shapeHeight!==t&&(this._shapeHeight=t,this._changed())}}),_dp(T,"shapeLocation",{get:function(){return this._shapeLocation},set:function(t){t!=this._shapeLocation&&(this._oldLocation=this._shapeLocation,this._shapeLocation=t,this._changed())}}),_dp(T,"type",{get:function(){return T.TYPE}}),_dp(T,"styleName",{get:function(){return T.STYLE_NAME}}),T.prototype._doInitContent=function(t){var e=re.getDoc(t),i=(this._svg=Ut.SvgElement.createSVG(t)).style,o=isNaN(this._shapeWidth)||this._shapeWidth<=0?16:this._shapeWidth,n=isNaN(this._shapeHeight)||this._shapeHeight<=0?16:this._shapeHeight,o=(i.display="inline-block",i.width=o+"px",i.height=n+"px",this._span=e.createElement("span"));t.appendChild(o),this._br=e.createElement("br")},T.prototype._reset=function(){R.prototype._reset.call(this),this._splitted=this._reversed=void 0},T.prototype._doRenderCell=function(t,e,i,o,n){var r=this._svg,s=this._span;if(this._runShape=this.$_getShape(t,e),r.setAttribute("class",this._shapeStyle),Ut.SvgElement.renderSVG(t,r,this.$_render.bind(this)),this.$_setSpanText(this._makeText(t,e,i)),this._oldLocation!=this._shapeLocation){switch(this._shapeLocation){case ht.IconLocation.LEFT:this.$_layoutLeft(this._dom,r,s,!1);break;case ht.IconLocation.RIGHT:this.$_layoutRight(this._dom,r,s,!1);break;case ht.IconLocation.TOP:this.$_layoutTop(this._dom,r,s,!1);break;case ht.IconLocation.BOTTOM:this.$_layoutBottom(this._dom,r,s,!1);break;case ht.IconLocation.LEFT_EDGE:this.$_layoutLeftEdge(this._dom,r,s,this._shapeWidth,!1);break;case ht.IconLocation.RIGHT_EDGE:this.$_layoutRightEdge(this._dom,r,s,this._shapeWidth,!1);break;case ht.IconLocation.TOP_EDGE:this.$_layoutTopEdge(this._dom,r,s,o,n,this._shapeWidth,this._shapeHeight,!1);break;case ht.IconLocation.BOTTOM_EDGE:this.$_layoutBottomEdge(this._dom,r,s,o,n,this._shapeWidth,this._shapeHeight,!1);break;case ht.IconLocation.CENTER:this.$_layoutCenter(this._dom,r,s,!1);break;default:this.$_layoutLeft(this._dom,r,s,!1)}this._oldLocation=this._shapeLocation}this._shapeLocation==ht.IconLocation.TOP_EDGE||this._shapeLocation==ht.IconLocation.BOTTOM_EDGE?this._setHeight(n):this._clearHeight()},T.prototype.$_getShape=function(t,e){var i=void 0,o=this._shapeCallback;return i=null==(i=null==(i=o?o.call(this,t.handler,e):i)&&this._shapeMap?this._shapeMap[e.value]:i)?this._shape:i},T.prototype.$_getDrawing=function(t){var e;return t&&("ellipse"==(t=t.toLowerCase())?e=this._ellipse||(this._ellipse=new Gt.EllipseShape):(e=this._polygon||(this._polygon=new Gt.PolygonShape(t)),this._polygon.shape=t)),e},T.prototype.$_render=function(t,e,i,o){var n;this._runShape&&(n=this.$_getDrawing(this._runShape))&&n.draw(e,i,o)},T.TYPE="shape",T.STYLE_NAME="rg-renderer "+(T.STYLE="rg-shape-renderer"),T.SHAPE_STYLE="rg-shape-renderer-shape";var R,f=T;function T(){var t=R.call(this)||this;return t._shapeStyle=T.SHAPE_STYLE,t._shape=Gt.PolygonShape.STAR,t._shapeWidth=16,t._shapeHeight=16,t._shapeLocation=ht.IconLocation.LEFT,t}t.ShapeCellRenderer=f;D=f,ne.__extends(k,D),k.prototype._doInitContent=function(t){t.style.setProperty("display","flex","important"),D.prototype._doInitContent.call(this,t)},k.prototype._doClearContent=function(t){D.prototype._doClearContent.call(this,t),U.RenderHelper.clearFlex(t)},k.prototype.$_layoutLeft=function(t,e,i){U.RenderHelper.layoutFlex(t,e,i,this._itemGap,this._verticalEdgePad,ht.IconLocation.LEFT)},k.prototype.$_layoutRight=function(t,e,i){U.RenderHelper.layoutFlex(t,e,i,this._itemGap,this._verticalEdgePad,ht.IconLocation.RIGHT)},k.prototype.$_layoutTop=function(t,e,i){U.RenderHelper.layoutFlex(t,e,i,this._itemGap,this._verticalEdgePad,ht.IconLocation.TOP)},k.prototype.$_layoutBottom=function(t,e,i){U.RenderHelper.layoutFlex(t,e,i,this._itemGap,this._verticalEdgePad,ht.IconLocation.BOTTOM)},k.prototype.$_layoutLeftEdge=function(t,e,i){U.RenderHelper.layoutFlex(t,e,i,this._itemGap,this._verticalEdgePad,ht.IconLocation.LEFT_EDGE)},k.prototype.$_layoutRightEdge=function(t,e,i){U.RenderHelper.layoutFlex(t,e,i,this._itemGap,this._verticalEdgePad,ht.IconLocation.RIGHT_EDGE)},k.prototype.$_layoutTopEdge=function(t,e,i,o,n){U.RenderHelper.layoutFlex(t,e,i,this._itemGap,this._verticalEdgePad,ht.IconLocation.TOP_EDGE)},k.prototype.$_layoutBottomEdge=function(t,e,i,o,n){U.RenderHelper.layoutFlex(t,e,i,this._itemGap,this._verticalEdgePad,ht.IconLocation.BOTTOM_EDGE)},k.prototype.$_layoutCenter=function(t,e,i){U.RenderHelper.layoutFlex(t,e,i,this._itemGap,this._verticalEdgePad,ht.IconLocation.CENTER)};var D,r=k;function k(){return null!==D&&D.apply(this,arguments)||this}t.FlexShapeCellRenderer=r;M=i,ne.__extends(F,M),F.prototype._doDispose=function(){M.prototype._doDispose.call(this)},_dp(F,"barStyle",{get:function(){return this._barStyle},set:function(t){t!=this._barStyle&&(this._barStyle=t,this._changed())}}),_dp(F,"inactiveStyle",{get:function(){return this._inactiveStyle},set:function(t){t!=this._inactiveStyle&&(this._inactiveStyle=t,this._changed())}}),_dp(F,"barCount",{get:function(){return this._barCount},set:function(t){(t=Math.max(2,t))!=this._barCount&&(this._barCount=t,this._changed())}}),_dp(F,"minimum",{get:function(){return this._minimum},set:function(t){t!=this._minimum&&(this._minimum=t,this._changed())}}),_dp(F,"maximum",{get:function(){return this._maximum},set:function(t){t!=this._maximum&&(this._maximum=t,this._changed())}}),_dp(F,"startRate",{get:function(){return this._startRate},set:function(t){!isNaN(t)&&0<=t&&t<=100&&t!==this._startRate&&(this._startRate=t,this._changed())}}),_dp(F,"endRate",{get:function(){return this._endRate},set:function(t){!isNaN(t)&&0<=t&&t<=100&&t!==this._endRate&&(this._endRate=t,this._changed())}}),_dp(F,"absoluteValue",{get:function(){return this._absoluteValue},set:function(t){t!=this._absoluteValue&&(this._absoluteValue=t,this._changed())}}),_dp(F,"type",{get:function(){return F.TYPE}}),_dp(F,"styleName",{get:function(){return F.STYLE_NAME}}),F.prototype._doInitContent=function(t){var e=this._div=re.getDoc(t).createElement("div");e.style.position="relative",e.style.height="100%",t.appendChild(e);t=(this._svg=Ut.SvgElement.createSVG(e)).style;t.position="absolute",t.left="0px",t.width="100%",t.top=(100-Math.max(this._startRate,this._endRate))/2+"%",t.height=Math.max(this._startRate,this._endRate)+"%"},F.prototype._doRenderCell=function(t,e,i,o,n){var r=this._svg;this._value=parseFloat(e.value),r.setAttribute("class",this._barStyle),Ut.SvgElement.renderSVG2(t,r,this.$_render.bind(this))},F.prototype.$_render=function(t,e){for(var i=this.absoluteValue?Math.abs(this._value):this._value,o=(isNaN(this._minimum)||isNaN(this._maximum)||(i=this._barCount*(i-this._minimum)/(this._maximum-this._minimum)),100/Math.max(this._startRate,this._endRate)),n=(100-2*(this._barCount+1))/this._barCount,r=0,s=this._startRate*o,a=(this._endRate-this._startRate)/(this._barCount-1),l=0;l<this._barCount;l++){var h=l<i?null:this._inactiveStyle;e.sbounds(h,r+"%",100-s+"%",n+"%",s+"%"),r+=2+n,s+=a}},F.TYPE="signalbar",F.STYLE_NAME="rg-renderer "+(F.STYLE="rg-signalbar-renderer"),F.BAR_STYLE="rg-signalbar-renderer-bar",F.INACTIVE_STYLE="rg-signalbar-renderer-inactive";var M,f=F;function F(){var t=M.call(this)||this;return t._barStyle=F.BAR_STYLE,t._inactiveStyle=F.INACTIVE_STYLE,t._barCount=10,t._minimum=NaN,t._maximum=NaN,t._startRate=50,t._endRate=100,t._absoluteValue=!1,t}t.SignalBarCellRenderer=f;L=i,ne.__extends(O,L),O.prototype._doDispose=function(){L.prototype._doDispose.call(this)},_dp(O,"barStyle",{get:function(){return this._barStyle},set:function(t){t!=this._barStyle&&(this._barStyle=t,this._changed())}}),_dp(O,"type",{get:function(){return O.TYPE}}),_dp(O,"styleName",{get:function(){return O.STYLE_NAME}}),O.prototype._doInitContent=function(t){var e=this._div=re.getDoc(t).createElement("div");e.style.position="relative",e.style.height="100%",t.appendChild(e);t=(this._svg=Ut.SvgElement.createSVG(e)).style;t.position="absolute",t.left="0px",t.top="0px",t.width="100%",t.height="100%"},O.prototype._doRenderCell=function(t,e,i,o,n){var r=this._svg;this._value=null==e.value?"":String(e.value),this._value&&(this._value=this._value.toUpperCase()),r.setAttribute("class",this._barStyle),Ut.SvgElement.renderSVG(t,r,this.$_render)},O.TYPE="code39",O.STYLE_NAME="rg-renderer "+(O.STYLE="rg-code39-renderer"),O.BAR_STYLE="rg-code39-renderer-bar";var L,r=O;function O(){var t=L.call(this)||this;return t._barStyle=O.BAR_STYLE,t._barcode=new Ht.Code39,t.$_render=function(t,e,i,o){this._value&&(this._barcode.value=this._value,this._barcode.renders(e,new nt.Rectangle(0,0,i,100)))}.bind(t),t}t.Code39CellRenderer=r;N=i,ne.__extends(P,N),P.prototype._doDispose=function(){N.prototype._doDispose.call(this)},_dp(P,"barStyle",{get:function(){return this._barStyle},set:function(t){t!=this._barStyle&&(this._barStyle=t,this._changed())}}),_dp(P,"type",{get:function(){return P.TYPE}}),_dp(P,"styleName",{get:function(){return P.STYLE_NAME}}),P.prototype._doInitContent=function(t){var e=this._div=re.getDoc(t).createElement("div");e.style.position="relative",e.style.height="100%",t.appendChild(e);t=(this._svg=Ut.SvgElement.createSVG(e)).style;t.position="absolute",t.left="0px",t.top="0px",t.width="100%",t.height="100%"},P.prototype._doRenderCell=function(t,e,i,o,n){var r=this._svg;this._value=null==e.value?"":String(e.value),r.setAttribute("class",this._barStyle),Ut.SvgElement.renderSVG(t,r,this.$_render)},P.TYPE="code128",P.STYLE_NAME="rg-renderer "+(P.STYLE="rg-code128-renderer"),P.BAR_STYLE="rg-code128-renderer-bar";var N,f=P;function P(){var t=N.call(this)||this;return t._barStyle=P.BAR_STYLE,t._barcode=new Ht.Code128,t.$_render=function(t,e,i,o){this._value&&(this._barcode.value=this._value,this._barcode.renders(e,new nt.Rectangle(0,0,i,100)))}.bind(t),t}t.Code128CellRenderer=f})),Wt=(t(at),at.RendererEditResult,at.DataCellRenderer,at.TextCellRenderer,at.BarOrigin,at.BarCellRenderer,at.ImageCellRenderer,at.FlexibleCellRenderer,at.IconCellRenderer,at.FlexIconCellRenderer,at.CheckCellRenderer,at.FlexCheckCellRenderer,at.ButtonCellRenderer,at.LinkCellRenderer,at.ShapeCellRenderer,at.FlexShapeCellRenderer,at.SignalBarCellRenderer,at.Code39CellRenderer,at.Code128CellRenderer,e(function(t,e){Object.defineProperty(e,"__esModule",{value:!0});var a=/\$\{[^{}]*\}/g,i=(_dp(o,"template",{get:function(){return this._template},set:function(t){this._template=t,this.$_parse(t)}}),_dp(o,"pattern",{set:function(t){this._pattern=t}}),o.prototype.realize=function(t,e,i,o){for(var n="",r=0,s=this._tokens;r<s.length;r++){var a=s[r];"string"==typeof a?n+=a||"":1==a.type?n+=e.value||"":2==a.type?n+=e.item.getData(t.dataSource.getFieldIndex(a.field))||"":4===a.type?n+=(e instanceof st.DataCell?e.getDisplayText(t,i):e.value)||"":n+=o?o.call(this,t.handler,e,a.field)||"":a.field}return n},o.prototype.realizeHeader=function(t,e,i){for(var o,n="",r=0,s=this._tokens;r<s.length;r++){var a=s[r];"string"==typeof a?n+=a:1==a.type?n+=t.displayText:null!=(o=t.getValue(a.field))?n+=String(o):n+=e?e.call(this,i.handler,t,a.field)+""||"":a.field}return n},o.prototype.realizeSummary=function(t,e,i,o){for(var n,r=this._tokens,s="",a=t.column,l=a.grid,h=0,d=r;h<d.length;h++){var u=d[h];"string"==typeof u?s+=u:1==u.type?s+=e.getDisplayText(i)||"":null!=(n=t.getValue(u.field))?s+=String(n):s+=o?o.call(this,l.handler,a,t.summaryIndex,t,u.field)||"":u.field}return s},o.prototype.realizeGroupSummary=function(t,e,i,o){for(var n,r=this._tokens,s="",a=t.column,l=a.grid,h=0,d=r;h<d.length;h++){var u=d[h];"string"==typeof u?s+=u:1==u.type?s+=e.getDisplayText(i)||"":null!=(n=t.getValue(u.field))?s+=String(n):s+=o?o.call(this,l.handler,a,t.summaryIndex,e.index.item.parent,u.field)||"":u.field}return s},o.prototype.realizeForm=function(t,e,i){for(var o="",n=0,r=this._tokens;n<r.length;n++){var s=r[n];"string"==typeof s?o+=s:1!=s.type&&2!=s.type&&(i?i.call(this,t.getHandler(),e,s.field):o+=s.field)}return o},o.prototype.$_parse=function(t){var e=this._tokens=[];if(t){for(var i=t.length,o=this._pattern||a,n=0;s=o.exec(t);){var r=s[0],s=s.index,s=(n<s&&(e.push(t.substring(n,s)),n=s),r.substring(2,r.length-1)),s={type:"value"===s?1:"text"===s?4:0==s.indexOf("value:")?2:3,field:s};2==s.type&&(s.field=s.field.substring(6)),e.push(s),n+=r.length}n<i&&e.push(t.substring(n,i))}},o);function o(){this._template="",this._tokens=[]}e.HtmlTemplateParser=i;n=at.DataCellRenderer,ne.__extends(s,n),s.prototype._doDispose=function(){n.prototype._doDispose.call(this)},_dp(s,"template",{get:function(){return this._parser.template},set:function(t){t!=this._parser.template&&(this._parser.template=t,this._changed())}}),_dp(s,"pattern",{set:function(t){t!=this._pattern&&(t instanceof RegExp?this._pattern=t:this._pattern=t?new RegExp(t):void 0,this._parser.pattern=this._pattern,this._parser.template=this.template)}}),_dp(s,"output",{get:function(){return this._output},set:function(t){this._output=t}}),_dp(s,"callback",{get:function(){return this._callback},set:function(t){t!==this._callback&&(this._callback=t,this._changed())}}),_dp(s,"valueCallback",{get:function(){return this._valueCallback},set:function(t){t!==this._valueCallback&&(this._valueCallback=t,this._changed())}}),_dp(s,"inputFocusable",{get:function(){return this._inputFocusable},set:function(t){this._inputFocusable!==t&&(this._inputFocusable=t)}}),s.prototype.clearAndAssignFrom=function(t){this.valueCallback=void 0,this.callback=void 0,this.pattern=void 0,this.template="",n.prototype.assignFrom.call(this,t)},_dp(s,"type",{get:function(){return s.TYPE}}),s.prototype._doClearContent=function(t){n.prototype._doClearContent.call(this,t),this._html=null},s.prototype.canClick=function(t){var e=re.getWin(this._dom),t=t.target;return!(t instanceof e.HTMLTableCellElement&&0<=t.className.indexOf("rg-")||this._dom===t)},s.prototype.click=function(t,e,i){return this._doClick(t,e,i||e.target)},s.prototype._doRenderCell=function(t,e,i,o,n){var r=this._callback;r?this.$_setHtml(r.call(this,t.handler,e,o,n)):this.$_setHtml(this._parser.realize(t,e,i,this._valueCallback))},s.prototype._doClick=function(t,e,i){return{type:this.type,target:e.target,value:t.value}},s.prototype.$_setHtml=function(t){t!=this._html&&(this._html=t,this._dom.innerHTML=t)},s.TYPE="html";var n,r=s;function s(){var t=n.call(this)||this;return t._output=void 0,t._inputFocusable=!1,t._html="",t._parser=new i,t.template="<span>${value}</span>",t._itemClickable=!0,t}e.TemplateCellRenderer=r})),jt=(t(Wt),Wt.HtmlTemplateParser,Wt.TemplateCellRenderer,e(function(t,e){Object.defineProperty(e,"__esModule",{value:!0});i=se.Base,ne.__extends(n,i),n.prototype.run=function(t,e,i,o,n,r,s){this._rs=t.provider;var a=this._ds=this._rs.dataSource,t=(this._parent=t,this._field=e,this._ds.getField(e));if(this._labelComparer=this._ds._comparers[e]||this._rs._labelComparer[e],this._labelComparer)this._comparer=this.$_userComparer;else switch(t.dataType){case ht.ValueType.NUMBER:case ht.ValueType.DATETIME:this._comparer=a.compareNumbers;break;case ht.ValueType.BOOLEAN:this._comparer=a.compareBools;break;case ht.ValueType.OBJECT:this._comparer=a.compareObjects.bind(a);break;default:this._comparer=(o?a.compareTexts:a.compareValues).bind(a)}this.$_sort(n,r,i,s)},n.prototype.$_sort=function(t,e,i,o){do{var n,r=this._parent,s=this._field,a=t,l=e,h=Math.floor((t+e)/2),d=r.getItem(h).dataRow,u=r.getItem(h).row;do{if(i==ht.SortDirection.ASCENDING){for(;a<=l;){if((n=0==(n=this._comparer(this._field,u,r.getItem(a).row))&&o?d-r.getItem(a).dataRow:n)<=0)break;a++}for(;a<=l;){if(0<=(n=0==(n=this._comparer(s,u,r.getItem(l).row))&&o?d-r.getItem(l).dataRow:n))break;l--}}else{for(;a<=l;){if(0<=(n=0==(n=this._comparer(s,u,r.getItem(a).row))&&o?d-r.getItem(a).dataRow:n))break;a++}for(;a<=l;){if((n=0==(n=this._comparer(s,u,r.getItem(l).row))&&o?d-r.getItem(l).dataRow:n)<=0)break;l--}}}while(a<=l&&(a!=l&&r._exchangeItems(a,l),a++,l--),a<=l)}while(t<l&&this.$_sort(t,l,i,o),(t=a)<e)};var i,o=n;function n(){var t=i.call(this)||this;return t.$_userComparer=function(t,e,i){if(this._labelComparer)return this._labelComparer(t,e._rowId,i.rowId)},t}e.TreeItemsSorter=o})),zt=(t(jt),jt.TreeItemsSorter,e(function(t,e){Object.defineProperty(e,"__esModule",{value:!0});i=At.DataRowExpressionRuntime,ne.__extends(o,i);var i,n=o;function o(){return i.call(this)||this}e.CheckableExpressionRuntime=n;r=m.DataTag,ne.__extends(a,r),a.clearCheckables=function(t){for(var e=t.itemCount;e--;)t.getItem(e)._setCheckable(!0)},a.prototype.connect=function(t){this._runtime.setDataSource(t)},a.prototype.disconnect=function(){},a.prototype.clearRows=function(){a.clearCheckables(this._owner)},a.prototype.setRows=function(){for(var t=this._owner._rows,e=t.length;e--;){var i=t[e];this.$_setCheckable(i)}},a.prototype.insertRow=function(t){t=this._owner.getItemOfRow(t,!0);this.$_setCheckable(t)},a.prototype.insertRows=function(t,e){for(var i=0;i<e;i++){var o=this._owner.getItemOfRow(t+i,!0);o instanceof rt.GridItem&&this.$_setCheckable(o)}},a.prototype.updateRow=function(t){t=this._owner.getItemOfRow(t,!0);this.$_setCheckable(t)},a.prototype.updateRows=function(t,e){for(var i=0;i<e;i++){var o=this._owner.getItemOfRow(t+i,!0);o instanceof rt.GridItem&&this.$_setCheckable(o)}},a.prototype.updateRowList=function(t){for(var e=0,i=t;e<i.length;e++){var o=i[e],o=this._owner.getItemOfRow(o,!0);o instanceof rt.GridItem&&this.$_setCheckable(o)}},a.prototype.changeStates=function(t){if(t)for(var e=t.length;e--;){var i=this._owner.getItemOfRow(t[e],!0);i instanceof rt.GridItem&&this.$_setCheckable(i)}},a.prototype.$_setCheckable=function(t){var e=this._callback,e=e?e.call(this,t.dataSource.handler,t):(this._runtime.setItem(t),this._exprNode.evaluate(this._runtime));t._setCheckable(e)};var r,s=a;function a(t,e,i){var o=r.call(this)||this;return o._runtime=new n,o._owner=t,o._exprNode=$.ExpressionParser.Default.parse(e,["value","values"]),o._runtime=new n,o._callback=i,o}l=Bt.ItemProvider,ne.__extends(d,l),d.prototype._doDispose=function(){function t(t){for(var e=0,i=t.length;e<i;e++)t[e]&&t[e].dispose();t.length=0}this.dataSource=null,t(this._rows),t(this._filteredItems),t(this._pageItems),t(this._sortedItems),t(this._pubItems),t(this._items),t(this._distinctRows),this._filterRuntime&&this._filterRuntime.dispose(),this._filterRuntime=null,this._sortFields.length=0,this._labelComparer=null,this._summaryMap=null,this._checkableTag=null,l.prototype._doDispose.call(this)},d.prototype.getCommandStates=function(t){t=this._rows[t];return t&&t._getExtents()},d.prototype.setCommandStates=function(t,e){t=this._rows[t];null!=e&&t&&t._setExtents(e)},_dp(d,"isFilterOr",{get:function(){return this._filterOr},set:function(t){t!=this._filterOr&&(this._filterOr=t,this.$_buildItems(),this._fireRefresh())}}),_dp(d,"isFiltered",{get:function(){return this._filtered}}),_dp(d,"isSorted",{get:function(){return this._sorted}}),_dp(d,"isPaging",{get:function(){return this._paging}}),_dp(d,"pageStartIndex",{get:function(){return this._pageStart}}),_dp(d,"sorter",{get:function(){return this._sorter||this._defSorter},set:function(t){this._sorter=t}}),_dp(d,"summaryMode",{get:function(){return this._summaryMode},set:function(t){t!=this._summaryMode&&(this._summaryMode=t,this.$_resetSummary(),this.$_buildItems(),this._fireRefresh())}}),_dp(d,"sortMode",{get:function(){return this._sortMode},set:function(t){this._sortMode=t}}),_dp(d,"filterMode",{get:function(){return this._filterMode},set:function(t){this._filterMode=t}}),_dp(d,"checkableExpression",{get:function(){return this._checkableExpression},set:function(t){t!=this._checkableExpression&&(this._checkableExpression=t,this._checkableTag&&(this._checkableTag.disconnect(),this._checkableTag=null),t)&&(this._checkableTag=new s(this,t),this._dataSource)&&this._checkableTag.connect(this._dataSource)}}),_dp(d,"checkableCallback",{set:function(t){this._checkableTag&&(this._checkableTag.disconnect(),this._checkableTag=null),t&&(this._checkableTag=new s(this,null,t),this._dataSource)&&this._checkableTag.connect(this._dataSource)}}),_dp(d,"labelComparer",{get:function(){return this._labelComparer},set:function(t){this._labelComparer=t||{}}}),d.prototype.getFieldDomain=function(t){for(var e=this._rows.length,i=[],o=void 0,n=0;n<e;n++){var r=this._dataSource.getValue(n,t);r!=o&&i.indexOf(r)<0&&i.push(r),o=r}return i},d.prototype.beginFilter=function(){this._filterLock++},d.prototype.endFilter=function(t,e,i){void 0===t&&(t=!0),void 0===e&&(e=null),void 0===i&&(i=null),0<this._filterLock&&(this._filterLock=Math.max(0,this._filterLock-1),0==this._filterLock)&&t&&this.applyFilters(!0,e,i)},d.prototype.hasFilter=function(t){t=this._filters[t];return t&&0<t.length},d.prototype.addFilter=function(t,e){var i=e&&e.criteria;if(0<=t){this._fireFilterAdded(t,i);i=this._filters[t];if(i||(this._filters[t]=i=[]),e.criteria||e.callback)return t=new H.ColumnFilterRun(e),i.push(t),this.applyFilters(),t}},d.prototype.removeFilter=function(t,e){this._filtered&&this._filters[t]&&(this._fireFilterRemoved(t,e.model),0<=(e=(t=this._filters[t]).indexOf(e)))&&(t.splice(e,1),this.applyFilters())},d.prototype.clearFilters=function(t){this._filtered&&this._filters[t]&&(this._fireFilterCleared(t),0<(t=this._filters[t]).length)&&(t.length=0,this.applyFilters())},d.prototype.clearAllFilters=function(){this._filtered&&(this._fireFilterAllCleared(),this._filters=[],this.applyFilters())},d.prototype.hasFilters=function(){for(var t=this._filters.length,e=0;e<t;e++){var i=this._filters[e];if(i&&0<i.length)return!0}return!1},d.prototype.applyFilters=function(t,e,i){if(void 0===t&&(t=!0),void 0===e&&(e=null),void 0===i&&(i=null),!(0<this._filterLock)){this.$_buildItems();try{t&&this._fireRefresh()}finally{this._fireFiltered(e,i)}}},d.prototype.orderBy=function(t,e,i,o){void 0===o&&(o=!0),this._fireSort(t=void 0===t?null:t,e=void 0===e?null:e,i=void 0===i?null:i),this._sortFields=[],this._sortDirections=[],this._sortCases=[];for(var n=t?t.length:0,r=e?e.length:0,s=i?i.length:0,a=0;a<r;a++)e[a]=e[a]==ht.SortDirection.ASCENDING||e[a]==ht.SortDirection.DESCENDING?e[a]:ht.SortDirection.ASCENDING;for(a=0;a<n;a++)this._sortFields.push(t[a]),a<r?this._sortDirections.push(e[a]):0<r?this._sortDirections.push(e[r-1]):this._sortDirections.push(ht.SortDirection.ASCENDING),a<s?this._sortCases.push(i[a]):0<s?this._sortCases.push(i[s-1]):this._sortCases.push(ht.SortCase.SENSITIVE);this._sorted=this.$_checkSorted(),this.$_buildItems();try{o&&this._fireRefresh()}finally{this._fireSorted()}},d.prototype.getSortFields=function(){return this._sortFields.slice()},d.prototype.getSortDirections=function(){return this._sortDirections.slice()},d.prototype.getSortCases=function(){return this._sortCases.concat()},d.prototype.setPaging=function(t,e,i,o){void 0===e&&(e=10),void 0===i&&(i=-1),void 0===o&&(o=null),e=Math.max(e,1),i=Math.max(i,-1),t==this._paging&&e==this._pageSize&&i==this._pageCount&&o==this._pagingSource||(this._currPage=0,this._paging=t,this._pagingSource=o,this._pageSize=e,this._pageCount=i,this.$_buildItems(),this._fireRefresh())},_dp(d,"page",{get:function(){return this._paging?this._currPage:-1}}),d.prototype.setPage=function(t,e){void 0===t&&(t=0),void 0===e&&(e=-1),this._paging&&(t=Math.max(0,Math.min(this.pageCount-1,t)),e=Math.max(-1,e),t==this._currPage&&e==this._pageStartIndex||(this._currPage=t,this._pageStartIndex=e,this.$_buildPage(),this._fireRefresh()))},_dp(d,"pageCount",{get:function(){var t;return this._paging?0<=this._pageCount?this._pageCount:(t=this.$_getPageItems(),Math.floor((t.length+this._pageSize-1)/this._pageSize)):0},set:function(t){this._paging&&(t=Math.max(-1,t))!=this._pageCount&&(this._pageCount=t,this.$_buildPage(),this._fireRefresh())}}),d.prototype.getPageOfDataRow=function(t){if(this._paging){if(!(t<0||t>=this._dataSource.rowCount)){var e=this.$_getPageItems();if(e&&e.length)for(var i=0;i<e.length;i++)if(e[i].dataRow===t)return Math.floor(i/this._pageSize)}return-1}return 0},d.prototype.getCheckedRows=function(t){for(var e=t?this._dataSource.rowCount:this.itemCount,i=[],o=0;o<e;o++){var n=(t?this._rows:this._pubItems)[o];n.checked&&i.push(n.dataRow)}return i},d.prototype.resetCheckables=function(){for(var t=this._rows.length;t--;)this._rows[t]._setCheckable(!0);this._fireRefresh()},d.prototype.applyCheckables=function(){this._checkableTag?this._checkableTag.setRows():s.clearCheckables(this),this._fireRefresh()},d.prototype.setCheckFieldIndex=function(t){this._checkFieldIndex=t},d.prototype.getItemChecked=function(t,e){return-1<this._checkFieldIndex?this.dataSource.getField(this._checkFieldIndex).readBooleanValue(t.getData(this._checkFieldIndex)):e},d.prototype.setItemChecked=function(t,e){var i;return-1<this._checkFieldIndex&&(!!(i=this.dataSource.getField(this._checkFieldIndex)).readBooleanValue(t.getData(this._checkFieldIndex))!=e&&(i=(i._boolParser||i._ownerBoolParser).toText(e),t.setData(this._checkFieldIndex,i)),!0)},d.prototype.getJsonRows=function(){return this._pubItems.map(function(t){return t.getRowObject()})},_dp(d,"dataSource",{get:function(){return this._dataSource},set:function(t){t!==this._dataSource&&(this.$_clearRows(!0),this._dataSource&&(this._checkableTag&&this._checkableTag.disconnect(),this._dataSource.removeListener(this),this._dataSource.unregisterCommandListener(this)),this._dataSource=t,this._dataSource&&(this._checkableTag&&this._checkableTag.connect(this._dataSource),this.$_buildRows(),this._dataSource.addListener(this),this._dataSource.registerCommandListener(this)),this.disposing||(this.$_resetSummary(),this._fireReset()))}}),_dp(d,"itemCount",{get:function(){return this._pubCount}}),_dp(d,"rowCount",{get:function(){return this._pubCount}}),_dp(d,"fixedCount",{get:function(){return this._fixedCount}}),_dp(d,"maxItemCount",{get:function(){return this._maxItemCount},set:function(t){(t=Math.max(0,t))!=this._maxItemCount&&(this._maxItemCount=t,this._refreshItems())}}),_dp(d,"sorted",{get:function(){return this._sorted}}),_dp(d,"movable",{get:function(){return!this.sorted}}),d.prototype._hideDeletedChanged=function(){this.$_buildItems(),this._fireRefresh()},d.prototype.getItem=function(t){return t<0||t>=this._pubCount?null:this._pubItems[t]},d.prototype.getItems=function(t,e){return this._pubItems.slice(t,t+e)},d.prototype.getIndexOfRow=function(t){return 0<=t&&t<this._rows.length&&(t=this._rows[t])&&0<=this._pubItems.indexOf(t)?t.index:-1},d.prototype.getItemOfRow=function(t,e){return 0<=t&&t<this._rows.length&&(0<=(t=this._rows[t]).index||e)?t:null},d.prototype._refreshItems=function(){var t={};this.$_saveExtents(t),this.$_clearRows(!1),this.$_buildRows(t),this._fireRefresh()},d.prototype.setFixed=function(t,e,i){(t=Math.max(0,t))==this._fixedCount&&e==this._fixedSorting&&i==this._filtering||(this._fixedCount=t,this._fixedSorting=e,this._fixedFiltering=i,this.$_buildItems(),this._fireRefresh())},d.prototype.exchange=function(t,e){if(t!=e&&!this._sorted&&!this._filtered){if(t<0||t>=this._rows.length)throw new Error("index1 is out of bounds: "+t);if(e<0||e>=this._rows.length)throw new Error("index2 is out of bounds: "+t);var i=this._rows[t];this._rows[t]=this._rows[e],this._rows[e]=i}},d.prototype.clearDisplayLevels=function(){for(var t=this._rows,e=t.length,i=0;i<e;i++)t[i]._displayLevel=-1},d.prototype.getAllItems=function(){return this._pubItems.slice()},d.prototype.getNumber=function(t){t=this.$_getSummary(t);return t?t.count:this.itemCount},d.prototype.getSum=function(t){t=this.$_getSummary(t);return t?t.sum:NaN},d.prototype.getMax=function(t){t=this.$_getSummary(t);return t?t.max:NaN},d.prototype.getMin=function(t){t=this.$_getSummary(t);return t?t.min:NaN},d.prototype.getAvg=function(t){t=this.$_getSummary(t);return t?t.avg:NaN},d.prototype.getVar=function(t){t=this.$_getSummary(t);return t?t.vars:NaN},d.prototype.getVarp=function(t){t=this.$_getSummary(t);return t?t.varsp:NaN},d.prototype.getStdev=function(t){t=this.$_getSummary(t);return t?Math.sqrt(t.vars):NaN},d.prototype.getStdevp=function(t){t=this.$_getSummary(t);return t?Math.sqrt(t.varsp):NaN},d.prototype.getDataCount=function(t){t=this.$_getSummary(t);return t?t.dataCount:0},d.prototype.getDataAvg=function(t){t=this.$_getSummary(t);return t?t.dataAvg:NaN},d.prototype.$_saveExtents=function(t){for(var e=0,i=this._rows.length;e<i;e++){var o=this._rows[e];0<=o.dataRowId&&(t[o.dataRowId]={exts:o._extents,heights:o.heights&&o.heights.slice()})}},d.prototype.$_clearRows=function(t){t&&this.clearRowHeights(!0),this._rows.length=0,this._filteredItems.length=0,this._filtered=!1,this._sorted=!1,this._sortedItems.length=0,this._pubItems=this._rows,this.$_clearDistincts()},d.prototype.$_clearIndicies=function(){for(var t=this._rows.length;t--;)this._rows[t]._index=-1},d.prototype.$_clearDistincts=function(){for(var t=this._distinctRows.length;t--;)this._distinctRows[t]=null;this._distinctRows.length=0},d.prototype.$_buildRows=function(t){void 0===t&&(t=null);var e=this._dataSource;if(e){this._filtered=this.$_checkFiltered(),this._sorted=this.$_checkSorted(),this._rowCount=e.rowCount,!this._filtered&&!this._paging&&0<this.maxItemCount&&(this._rowCount=Math.min(this._rowCount,this.maxItemCount)),this._rows=new Array(this._rowCount);for(var i=0,o=this._rowCount;i<o;i++){var n,r=this._rows[i]=this.$_createRow(i);t&&t.hasOwnProperty(r.dataId)&&(n=t[r.dataId],r._extents=n.exts,r.heights=n.heights&&n.heights.slice())}this.$_buildItems(),this._checkableTag&&this._checkableTag.setRows(),0==this._rowCount&&this.clearRowHeights(!0)}},d.prototype.$_resetCounts=function(){this._filtered?this._pubCount=this._itemCount=this._items.length:this._pubCount=this._itemCount=this._rowCount=this._rows.length},d.prototype.$_buildItems=function(t,e){void 0===t&&(t=!1),void 0===e&&(e=!1);var i=0<this.maxItemCount?this.maxItemCount:this._rows.length;if(this._rowCount=this._rows.length,this._pubItems=this._items=this._rows,this._pubCount=this._itemCount=this._rows.length,this._filtered=this.$_checkFiltered(),this._sorted=this.$_checkSorted(),(this._filtered||this._paging)&&this.$_clearIndicies(),this._filtered){if(this._filteredItems.length=0,this.hideDeleted||0<this._dataSource.hiddenCount)for(var o=0;o<this._rowCount;o++){var n=this._rows[o],r=this._dataSource.getRowState(this._rows[o].dataRow),s=this._dataSource.isHiddenRow(this._rows[o].dataRow);this.hideDeleted&&b.isDeletedState(r)||s?n._index=-1:n._index=0}else for(o=0;o<this._rowCount;o++)this._rows[o]._index=0;var a=this.fixedCount,l=0<a&&!this._fixedFiltering,h=this._rows.length;if(!t)for(var o=0,d=this._filters.length;o<d;o++)if(_=this._filters[o])for(var u=0;u<_.length;u++)_[u].prepare(this._filterRuntime,this._dataSource);this._paging||(h=Math.min(h,i));for(var c=0,o=0;o<this._rowCount&&c<h;o++)if(0<=(n=this._rows[o]).index)if(t||l&&c<a)this._filteredItems.push(n),c++;else{for(var _,p=!this._filterOr,f=0,g=0,d=this._filters.length;g<d;g++)if((_=this._filters[g])&&f++,this._filterOr){if(_&&this.$_select(_,n,g)){p=!0;break}}else if(_&&!this.$_select(_,n,g)){p=!1;break}p||0===f?(this._filteredItems.push(n),c++):n._index=-1}this._pubItems=this._items=this._filteredItems,this._pubCount=this._itemCount=this._items.length}else this._filteredItems.length=0;if(this._sorted){if(e)for(var m=this._sortedItems,o=m.length;o--;)m[o].index<0&&m.splice(o,1);else this.$_sortRows();this._pubItems=this._sortedItems}else this._sortedItems.length=0;this._paging&&this.$_buildPageItems(),this.$_clearSummary(),this._resetItemIndicies(0)},d.prototype.$_buildPageItems=function(){for(var t=this.$_getPageItems(),e=(this._pageItems.length=0,this._pageStart=0<=this._pageStartIndex?this._pageStartIndex:this._currPage*this._pageSize),i=t.length,o=0<this.maxItemCount?this.maxItemCount:i,n=Math.min(this._pageSize,o);e<i&&0<n;e++,n--)this._pageItems.push(t[e]);this._pubItems=this._pageItems,this._pubCount=this._pubItems.length},d.prototype.$_buildPage=function(){this.$_clearIndicies(),this.$_buildPageItems(),this._resetItemIndicies(0)},d.prototype.$_compareFuncs=function(t,e){for(var i={},o=this._dataSource,n=0,r=t.length;n<r;n++){var s=o.getField(t[n]);if(s){var a=o.getDataComparer(s.index)||this._labelComparer[s.index],l=e[n]==ht.SortCase.INSENSITIVE;if(!a)switch(s.dataType){case ht.ValueType.DATETIME:case ht.ValueType.NUMBER:a=o.compareNumbers.bind(o);break;case ht.ValueType.BOOLEAN:a=o.compareBools.bind(o);break;case ht.ValueType.OBJECT:a=o.compareObjects.bind(o);break;default:a=(l?o.compareTexts:o.compareValues).bind(o)}a&&(i[t[n]]=a)}}return i},d.prototype.$_sortRows=function(t){var t=(t=void 0===t?null:t)||this._items.slice(),e=[],l=(0<this._fixedCount&&!this._fixedSorting&&(e=t.splice(0,this._fixedCount)),this.$_compareFuncs(this._sortFields,this._sortCases));t.sort(function(t,e){for(var i,o,n,r=0,s=0,a=this._sortFields.length;s<a&&(o=this._sortDirections[s],n=this._sortFields.length==s+1,!(i=l[this._sortFields[s]])||0===(r=i(this._sortFields[s],t.dataRow,e.dataRow)));s++);return r=0===(r*=o===ht.SortDirection.DESCENDING?-1:1)&&n?o===ht.SortDirection.DESCENDING?e.dataRow-t.dataRow:t.dataRow-e.dataRow:r}.bind(this)),this._sortedItems=e.concat(t)},d.prototype.$_createRow=function(t){t=new rt.GridRow(t);return this.attachItem(t),t._dataRowId=t.dataId,t},d.prototype.$_createAllRow=function(){for(var t=0;t<this._rowCount;t++)this._rows[t]||(this._rows[t]=this.$_createRow(t))},d.prototype.$_resetSummary=function(){this._summaryMap=[]},d.prototype.$_clearSummary=function(){if(this._summaryMap)for(var t=this._summaryMap.length-1;0<=t;t--)this._summaryMap[t]&&this._summaryMap[t].clear()},d.prototype.$_getSummary=function(t){var e,i=this._summaryMap[t];return i||(e=this._dataSource)&&e.canSummarize(t)&&(i=new Vt.FieldSummary(t),this._summaryMap[t]=i),i&&0==i.count&&0<this.itemCount&&this.$_summarize(i),i},d.prototype.$_summarize=function(t){var e=this._dataSource;if(e)if(this._filtered){for(var i=this._items.length,o=new Array(i),n=0;n<i;n++)o[n]=this._pubItems[n].dataRow;e.summarizeRange(t,o,this._summaryMode==ht.SummaryMode.STATISTICAL)}else e.summarize(t,this._summaryMode==ht.SummaryMode.STATISTICAL)},d.prototype.$_needSort=function(){return this._sorted&&this._sortMode==ht.SortMode.AUTO},d.prototype.$_needFilter=function(){return this._filtered&&this._filterMode==ht.FilterMode.AUTO},d.prototype.$_checkFiltered=function(){if(this._dataSource)return this._filters.length=this._dataSource.fieldCount,this.hasFilters()||this.hideDeleted&&0<this._dataSource.deletedCount||0<this._dataSource.hiddenCount},d.prototype.$_select=function(t,e,i){for(var o=0,n=t.length;o<n;o++)if(t[o].select(this._filterRuntime,e.parent,e,i))return!0},d.prototype.$_checkSorted=function(){for(var t=this._sortFields.length-1;0<=t;t--)this._sortFields[t]>this._dataSource.fieldCount&&(this._sortFields.splice(t,1),this._sortDirections.splice(t,1),this._sortCases.splice(t,1));return this._sortFields&&0<this._sortFields.length},d.prototype.$_getPageItems=function(){return this._sorted?this._sortedItems:this._filtered?this._filteredItems:this._items},d.prototype.onDataSourceCommandStackChanged=function(t,e,i){this._fireCommandStackChanged(e,i)},d.prototype.onDataProviderDisposed=function(t){this._checkableTag&&this._checkableTag.disconnect(),this.$_clearRows(!0),this.$_resetSummary(),this._fireReset(),this.dataSource=null},d.prototype.onDataProviderReset=function(t){this.$_clearRows(!0),this.$_buildRows(),this.$_resetSummary(),this._fireReset()},d.prototype.onDataProviderRefresh=function(t){this._refreshItems()},d.prototype.onDataProviderRefreshClient=function(t){this._fireRefreshClient()},d.prototype.onDataProviderRowCountChanged=function(t,e){this._fireRefreshClient()},d.prototype.onDataProviderDataLoadComplated=function(){this._fireDataLoadComplated()},d.prototype.onDataProviderRowInserting=function(t,e,i){return!0},d.prototype.onDataProviderRowInserted=function(t,e,i){var o=this._rows,n=e<o.length?o[e]:null,r=this.$_createRow(e);o.splice(e,0,r);for(var s,a=e,l=o.length;a<l;a++)o[a]._dataRow=a;this.$_needFilter()||this.$_needSort()||this._paging?this.$_buildItems():(this._filtered&&(s=this._filteredItems,e=null!=i?i:Math.max(0,n?s.indexOf(n):s.length),s.splice(e,0,r)),this._sorted&&(s=this._sortedItems,e=null!=i?i:Math.max(0,n?s.indexOf(n):s.length),s.splice(e,0,r)),this.$_clearSummary(),this.$_resetCounts(),this._resetItemIndicies(this._sorted?0:e)),this._checkableTag&&this._checkableTag.insertRow(e),this._fireItemInserted(r)},d.prototype.onDataProviderRowsInserted=function(t,e,i,o){if(!(i<0)){for(var n,r=this._rows,s=e<r.length?r[e]:null,a=[],l=0;l<i;l++)a.push(n=this.$_createRow(e+l)),r.splice(e+l,0,n);for(var h=r.length,l=e;l<h;l++)r[l]._dataRow=l;if(this.$_needFilter()||this.$_needSort()||this._paging)this.$_buildItems();else{if(this._filtered){var d=this._filteredItems;e=null!=o?o:Math.max(0,s?d.indexOf(s):d.length);for(l=0;l<a.length;l++)d.splice(e+l,0,a[l])}if(this._sorted){d=this._sortedItems;e=null!=o?o:Math.max(0,s?d.indexOf(s):d.length);for(l=0;l<a.length;l++)d.splice(e+l,0,a[l])}this.$_clearSummary(),this.$_resetCounts(),this._resetItemIndicies(e)}this._checkableTag&&this._checkableTag.insertRows(e,i),this._fireRefresh()}},d.prototype.onDataProviderRowRemoving=function(t,e){return!0},d.prototype.$_silentRemoveRow=function(t){var e,i;this._filtered&&0<=(i=(e=this._filteredItems).indexOf(t))&&e.splice(i,1),this._sorted&&0<=(i=(e=this._sortedItems).indexOf(t))&&e.splice(i,1),this.$_clearSummary(),this.$_resetCounts(),this._resetItemIndicies(0)},d.prototype.onDataProviderRowRemoved=function(t,e){var i=this._rows,o=i[e];i.splice(e,1);for(var n=i.length-1;e<=n;n--)i[n]._dataRow=n;this.$_needFilter()||this.$_needSort()||this._paging?this.$_buildItems():this.$_silentRemoveRow(o),0==i.length&&this.clearRowHeights(!0),this._fireItemDeleted(o)},d.prototype.onDataProviderRowsRemoving=function(t,e){return!0},d.prototype.$_silentRemoveRows=function(t){if(this._filtered)for(var e=this._filteredItems,i=0;i<t.length;i++){var o=t[i];0<=(n=e.indexOf(o))&&e.splice(n,1)}if(this._sorted)for(e=this._sortedItems,i=0;i<t.length;i++){var n,o=t[i];0<=(n=e.indexOf(o))&&e.splice(n,1)}this.$_clearSummary(),this.$_resetCounts(),this._resetItemIndicies(0)},d.prototype.onDataProviderRowsRemoved=function(t,e){if(e&&!(e.length<1)){1<e.length&&e.sort(function(t,e){return t-e});for(var i=this._rows,o=e[0],n=[],r=e.length-1;0<=r;r--)n.push(i[e[r]]),i.splice(e[r],1);for(r=this._rows.length-1;o<=r;r--)i[r]._dataRow=r;this.$_needFilter()||this.$_needSort()||this._paging?this.$_buildItems():this.$_silentRemoveRows(n),0==e.length&&this.clearRowHeights(!0),this._fireRefresh()}},d.prototype.onDataProviderRowUpdating=function(t,e,i){return!0},d.prototype.onDataProviderRowUpdated=function(t,e){this.$_needFilter()||this.$_needSort()||this._paging?this.$_buildItems():this.$_clearSummary(),this._checkableTag&&this._checkableTag.updateRow(e),this._rows[e]&&this._fireItemUpdated(this._rows[e])},d.prototype.onDataProviderRowsUpdated=function(t,e,i){this.$_needFilter()||this.$_needSort()||this._paging?this.$_buildItems():this.$_clearSummary(),this._checkableTag&&this._checkableTag.updateRows(e,i),this._fireRefresh()},d.prototype.onDataProviderRowListUpdated=function(t,e){this.$_needFilter()||this.$_needSort()||this._paging?this.$_buildItems():this.$_clearSummary(),this._checkableTag&&this._checkableTag.updateRowList(e),this._fireRefresh()},d.prototype.onDataProviderValueChanging=function(t,e,i,o){return!0},d.prototype.onDataProviderValueChanged=function(t,e,i){this.$_needFilter()||this.$_needSort()||this._paging?this.$_buildItems():this.$_clearSummary(),this._checkableTag&&this._checkableTag.updateRow(e),this._rows[e]&&this._fireItemUpdated(this._rows[e])},d.prototype.onDataProviderRowMoving=function(t,e,i){return!0},d.prototype.onDataProviderRowMoved=function(t,e,i){for(var o=this._rows,n=o.splice(e,1),r=(o.splice(i,0,n[0]),o.length),s=e=Math.min(e,i);s<r;s++)o[s]._dataRow=s;(this._sorted||this._paging||this.hideDeleted)&&(this.$_buildItems(),this._resetItemIndicies(0)),this._fireRefresh()},d.prototype.onDataProviderRowsMoving=function(t,e,i,o){return!0},d.prototype.onDataProviderRowsMoved=function(t,e,i,o){this._refreshItems()},d.prototype.onDataProviderRowListMoving=function(t,e,i){return!0},d.prototype.onDataProviderRowListMoved=function(t,e,i){this._refreshItems()},d.prototype.onDataProviderStateChanged=function(t,e){var i;this.hideDeleted&&(i=this._rows[e],b.isDeletedState(i.rowState))&&(this.$_needFilter()||this.$_needSort()||this._paging?this.$_buildItems():this.$_checkFiltered()&&(!this._filteredItems||this._filteredItems.length<=0)||this.isSorted&&(!this._sortedItems||this._sortedItems.length<=0)?this.$_buildItems(!0,!0):this.$_silentRemoveRow(i),this._fireRefresh()),this._checkableTag&&this._checkableTag.updateRow(e),this._fireRowStateChanged(this._rows[e])},d.prototype.onDataProviderRowHided=function(t,e,i){this._filtered=this.$_checkFiltered(),i?(this.$_needFilter()||this.$_needSort()||this._paging?this.$_buildItems():this.$_checkFiltered()&&(!this._filteredItems||this._filteredItems.length<=0)||this.isSorted&&(!this._sortedItems||this._sortedItems.length<=0)?this.$_buildItems(!0,!0):(i=this.getItemsByRows(e),this.$_silentRemoveRows(i)),this._fireRefresh()):this._refreshItems()},d.prototype.onDataProviderStatesChanged=function(t,e){if(this.hideDeleted){for(var i,o=!1,n=0,r=e.length;n<r;n++){var s=e[n],s=this._rows[s];if(b.isDeletedState(s.rowState)){o=!0;break}}o&&(this.$_needFilter()||this.$_needSort()||this._paging?this.$_buildItems():this.$_checkFiltered()&&(!this._filteredItems||this._filteredItems.length<=0)||this.isSorted&&(!this._sortedItems||this._sortedItems.length<=0)?this.$_buildItems(!0,!0):(i=this.getItemsByRows(e),this.$_silentRemoveRows(i)),this._fireRefresh())}this._checkableTag&&this._checkableTag.changeStates(e),this._fireRowStatesChanged(this.getItemsByRows(e))},d.prototype.onDataProviderRestoreRows=function(t,e){this.$_needFilter()||this.$_needSort()||this._paging?this.$_buildItems():this.$_clearSummary(),this._checkableTag&&this._checkableTag.changeStates(e),this._fireRowStatesChanged(this.getItemsByRows(e)),this._fireRefresh()},d.prototype.onDataProviderStatesCleared=function(t){this._pubCount!=t.rowCount&&this._refreshItems(),this._fireRowStatesCleared()};var l,h=d;function d(t){t=l.call(this,t)||this;return t._sortMode=ht.SortMode.AUTO,t._filterMode=ht.FilterMode.AUTO,t._filterOr=!1,t._checkableExpression=null,t._rows=[],t._filteredItems=[],t._pageItems=[],t._sortedItems=[],t._pubItems=t._rows,t._items=t._rows,t._distinctRows=[],t._rowCount=0,t._fixedCount=0,t._fixedSorting=!1,t._maxItemCount=0,t._itemCount=0,t._pubCount=0,t._filtered=!1,t._filtering=!1,t._filters=[],t._filterRuntime=new H.ColumnFilterRuntime,t._filterLock=0,t._fixedFiltering=!1,t._sorted=!1,t._sortFields=[],t._sortDirections=[],t._sortCases=[],t._labelComparer={},t._sorter=null,t._defSorter=null,t._paging=!1,t._pagingSource=ht.PagingSource.ROWS,t._pageSize=10,t._pageCount=-1,t._pageStartIndex=-1,t._currPage=0,t._pageStart=0,t._summaryMode=ht.SummaryMode.AGGREGATE,t._summaryMap=null,t._checkableTag=null,t._checkFieldIndex=-1,t}e.DefaultItemProvider=h})),E=(t(zt),zt.CheckableExpressionRuntime,zt.DefaultItemProvider,e(function(t,e){Object.defineProperty(e,"__esModule",{value:!0});n=se.Base,ne.__extends(o,n),o.clearCheckables=function(t){for(var o=function(t){if(t){t.setCheckable(!0);for(var e=t.count;e--;){var i=t.getItem(e);i instanceof c&&o(i)}}},e=t.itemCount;e--;){var i=t.getItem(e);i instanceof c&&o(i)}},o.prototype.connect=function(t){this._runtime.setDataSource(t)},o.prototype.disconnect=function(){},o.prototype.clearRows=function(){o.clearCheckables(this._owner)},o.prototype.setRows=function(){for(var t=this._owner.itemCount;t--;){var e=this._owner.getItem(t);e instanceof c&&this.$_setCheckable(e,!0)}},o.prototype.addRow=function(t,e){void 0===e&&(e=!0);t=this._owner.getItemOfRow(t.rowId);t instanceof c&&this.$_setCheckable(t,e)},o.prototype.addRows=function(t){for(var e=t.length;e--;){var i=this._owner.getItemOfRow(t[e].rowId);i instanceof c&&this.$_setCheckable(i,!0)}},o.prototype.updateRow=function(t){t=this._owner.getItemOfRow(t.rowId);t instanceof c&&this.$_setCheckable(t,!1)},o.prototype.updateRows=function(t){for(var e=0,i=t;e<i.length;e++){var o=i[e],o=this._owner.getItemOfRow(o.rowId);o instanceof c&&this.$_setCheckable(o,!1)}},o.prototype.changeStates=function(t){for(var e=t.length;e--;){var i=this._owner.getItemOfRow(t[e].rowId);i instanceof c&&this.$_setCheckable(i,!1)}},o.prototype.$_setCheckable=function(t,e){if(t){var i=this._callback,o=void 0,o=i?i.call(this,t.dataSource.handler,t):(this._runtime.setItem(t),this._exprNode.evaluate(this._runtime));if(t.setCheckable(o),e)for(var n=t.count;n--;){var r=t.getItem(n);r instanceof c&&this.$_setCheckable(r,!0)}}};var n,i=o;function o(t,e,i){var o=n.call(this)||this;return o._owner=t,o._exprNode=$.ExpressionParser.Default.parse(e,["value","values"]),o._runtime=new zt.CheckableExpressionRuntime,o._callback=i,o}r=se.Base,ne.__extends(a,r),a.prototype.connect=function(t){this._extents={}},a.prototype.disconnect=function(){this._extents={}},a.prototype.clearRows=function(){this._extents={}},a.prototype.setRows=function(){},a.prototype.addRow=function(t){this._extents[t.rowId]=0;for(var e=t.count-1;0<=e;e--)this.addRow(t.getChild(e))},a.prototype.addRows=function(t){for(var e=0,i=t;e<i.length;e++){var o=i[e];this.addRow(o)}},a.prototype.removeRow=function(t){delete this._extents[t.rowId];for(var e=t.count-1;0<=e;e--)this.removeRow(t.getChild(e))},a.prototype.removeRows=function(t){for(var e=0,i=t;e<i.length;e++){var o=i[e];this.removeRow(o)}},a.prototype.updateRow=function(t){},a.prototype.updateRows=function(t){},a.prototype.getExtents=function(t){var e=this._extents[t.rowId];return void 0===e?this._extents[t.rowId]=0:e},a.prototype.setExtents=function(t,e){this._extents[t.rowId]=e};var r,s=a;function a(){var t=null!==r&&r.apply(this,arguments)||this;return t._extents={},t}l=rt.GridItem,ne.__extends(d,l),d.prototype._getExtents=function(){return this._extents},d.prototype._setExtents=function(t){this._extents=t},_dp(d,"isLeaf",{get:function(){return!0}}),_dp(d,"type",{get:function(){}});var l,h=d;function d(){var t=l.call(this)||this;return t._extents=0,t}e.TreeItemFooter=h;u=rt.GroupItem,ne.__extends(_,u),_.getTemp=function(t,e){return _.$_tempItem._dataRow=t,_.$_tempItem[rt.GridItem.PARENT]=e,_.$_tempItem},_.prototype.dispose=function(){this._dataRow=null,u.prototype.dispose.call(this)},_dp(_,"iconHeight",{get:function(){return this._iconHeight},set:function(t){this._iconHeight=t}}),_dp(_,"row",{get:function(){return this._dataRow}}),_dp(_,"rowId",{get:function(){return this._dataRow?this._dataRow.rowId:-1}}),_dp(_,"iconIndex",{get:function(){return this._dataRow?this._dataRow.iconIndex:-1}}),_dp(_,"hasChildren",{get:function(){return 0<this.count||this._dataRow&&this._dataRow.hasChildren}}),_dp(_,"rootItem",{get:function(){for(var t=this;1<t.level;)t=t.parent;return t}}),_dp(_,"summaryMode",{get:function(){return ht.SummaryMode.AGGREGATE}}),_dp(_,"editable",{get:function(){return this._editable}}),_dp(_,"readOnly",{get:function(){return this._readOnly}}),_.prototype.setEditable=function(t,e){this._editable=t,this._readOnly=e},_.prototype._getExtents=function(){var t=this.provider;return t?t._extents.getExtents(this):0},_.prototype._setExtents=function(t){var e;null!=(e=this.provider)&&e._extents.setExtents(this,t)},_dp(_,"isData",{get:function(){return!0}}),_dp(_,"isDataRow",{get:function(){return!0}}),_dp(_,"footer",{get:function(){return this._footer}}),_dp(_,"footerCount",{get:function(){return this._footer?1:0}}),_dp(_,"dataRow",{get:function(){return this._dataRow?this._dataRow.rowId:-1}}),_.prototype.getShadowRow=function(){return this._dataRow?this._dataRow.rowId:-1},_dp(_,"dataId",{get:function(){return this._dataRow?this._dataRow.rowId:-1}}),_dp(_,"descendantCount",{get:function(){return this._dataRow.descendantCount}}),_dp(_,"rowState",{get:function(){return this._dataRow.rowState}}),_dp(_,"isLeaf",{get:function(){return!this.hasChildren}}),_dp(_,"resizable",{get:function(){return!0}}),_dp(_,"type",{get:function(){return ht.ItemType.TREE}}),_.prototype.getFooter=function(t){return this._footer},_.prototype.isFooter=function(t){return t===this._footer},_.prototype.canEdit=function(){return!0},_.prototype.createFooter=function(){this._footer||(this._footer=new h)},_.prototype.setExpanded=function(t,e,i){t==this.expanded&&!i||(t?this.provider.expand(this,e,i,0):this.provider.collapse(this,e,i))},_.prototype.getData=function(t){return t=this.dataSource?this.dataSource.getFieldIndex(t):t,this._dataRow.getValue(t)},_.prototype.setData=function(t,e){t=this.dataSource?this.dataSource.getFieldIndex(t):t,this._dataRow.setValue(t,e,!1)},_.prototype.setItem=function(t,e){u.prototype.setItem.call(this,t,e),e._addChildren(t.children),t.clear()},_.prototype.exchange=function(t,e){this._exchangeItems(t,e)},_.prototype.moveChild=function(t,e){var i=t+e,o=this._children,n=o[t];if(e<0)for(var r=t;i<r;r--)o[r]=o[r-1];else for(r=t;r<i;r++)o[r]=o[r+1];o[i]=n},_.prototype.moveChildren=function(t,e,i){for(var o=this._children,n=o.splice(t,e),r=t+i,s=0;s<e;s++)o.splice(r+s,0,n[s])},_.prototype.changeParent=function(t,e){this.parent.remove(this),t&&t.insert(e,this)},_.prototype.getRowData=function(){return this._dataRow&&this._dataRow._values.concat()},_.$_tempItem=new _(null);var u,c=_;function _(t){var e=u.call(this)||this;return e._iconHeight=0,e._dataRow=t,e}e.TreeItem=c;p=c,ne.__extends(g,p),_dp(g,"id",{get:function(){return-1}}),_dp(g,"provider",{get:function(){return this._rs}}),_dp(g,"level",{get:function(){return 0}}),_dp(g,"expanded",{get:function(){return!0}}),g.prototype.setExpanded=function(t,e,i){},_dp(g,"isLeaf",{get:function(){return!1}}),_dp(g,"visible",{get:function(){return!0}}),_dp(g,"dataSource",{get:function(){return this._rs.dataSource}});var p,f=g;function g(t){var e=p.call(this,null)||this;return e._rs=t,e}e.RootTreeItem=f;m=se.Base,ne.__extends(v,m),_dp(v,"provider",{get:function(){return this._rs}}),_dp(v,"count",{get:function(){return this._items.length}}),_dp(v,"fixedCount",{get:function(){return this._fixedCount}}),v.prototype.getItem=function(t){return this._items[t]},v.prototype.setItem=function(t,e){this._items[t]=e},v.prototype.indexOf=function(t){return this._items.indexOf(t)},v.prototype.clear=function(){this._items.length=0},v.prototype.expand=function(t,e,i){void 0===i&&(i=0),t&&this.$_expandItem(t,e,i)},v.prototype.collapse=function(t){if(t)for(var e=this._rs,i=this._items,o=t.index+1;o<i.length&&i[o].level>t.level;){if(i[o]==t.footer){e.footerWhenCollapsed||(i[o]._index=-1,i.splice(o,1));break}i[o]._index=-1,i.splice(o,1)}},v.prototype.getNext=function(t){return t&&t.visible&&t.index<this.count-1?this._items[t.index+1]:null},v.prototype.getPrior=function(t){return t&&t.visible&&0<t.index?this._items[t.index-1]:null},v.prototype.insert=function(t,e){this._items.splice(e,0,t)},v.prototype.remove=function(t){var e=this._items,i=e.indexOf(t);if(0<=i&&(e.splice(i,1),t.expanded))for(;i<e.length&&t.isDescendant(e[i]);)e.splice(i,1)},v.prototype.$_collectChildren=function(t,e,i,o){for(var n=0,r=t.count;n<r;n++){var s=t.getItem(n);s&&(e.push(s),i&&s.level<o||s.expanded)&&this.$_collectChildren(s,e,i,o)}t.footer&&e.push(t.footer)},v.prototype.$_expandItem=function(t,e,i){var o=this._items,n=this._list,r=t instanceof f?this._fixedCount:t.index+1;if(i=Math.max(0,i),n.length=0,this.$_collectChildren(t,n,e,0<i?t.level+i:1e6),e){for(var s=r,a=o.length;s<a&&!(o[s].level<=t.level);s++);o.splice(r,s-r)}for(s=0,a=n.length;s<a;s++)o.splice(r+s,0,n[s])},v.prototype._clearAndInit=function(t){this.clear(),this._fixedCount=Math.min(t,this._rs.itemCount);for(var e=0;e<this._fixedCount;e++)this._items.push(this._rs.getItem(e))};var m,y=v;function v(t){var e=m.call(this)||this;return e._fixedCount=0,e._items=new Array,e._list=new Array,e._rs=t,e}C=Bt.ItemProvider,ne.__extends(x,C),x.prototype._doDispose=function(){this._filters=null,this._filterRuntime=null,this._sorter=null,this._sortFields=null,this._sortDirections=null,this._sortCases=null,this._visibleItems=null,this._itemMap=null,this._summaryMap=null,this._checkableExpression=null,this._checkableCallback=null,this._checkableTag=null,this._labelComparer=null,C.prototype._doDispose.call(this)},x.prototype.getCommandStates=function(t){t=this._itemMap[t.rowId];return t&&t._getExtents()},x.prototype.setCommandStates=function(t,e){t=t&&this._itemMap[t.rowId];null!=e&&t&&t._setExtents(e)},_dp(x,"expandWhenGrouping",{get:function(){return this._expandWhenGrouping},set:function(t){t!=this._expandWhenGrouping&&(this._expandWhenGrouping=t)}}),_dp(x,"footerWhenExpanded",{get:function(){return this._footerWhenExpanded},set:function(t){t!=this._footerWhenExpanded&&(this._footerWhenExpanded=t)}}),_dp(x,"footerWhenCollapsed",{get:function(){return this._footerWhenCollapsed},set:function(t){t!=this._footerWhenCollapsed&&(this._footerWhenCollapsed=t)}}),_dp(x,"labelComparer",{get:function(){return this._labelComparer},set:function(t){this._labelComparer=t||{}}}),_dp(x,"summaryMode",{get:function(){return this._summaryMode},set:function(t){t!=this._summaryMode&&(this._summaryMode=t,this.$_resetSummary(),this._fireRefresh())}}),_dp(x,"groupSummaryMode",{get:function(){return this._groupSummaryMode},set:function(t){t!=this._groupSummaryMode&&(this._groupSummaryMode=t,this.$_resetGroupSummary(),this._fireRefresh())}}),_dp(x,"hideDeleted",{get:function(){return this._hideDeleted},set:function(t){t!=this._hideDeleted&&(this._hideDeleted=t,this._saveAndRefresh())}}),_dp(x,"checkableExpression",{get:function(){return this._checkableExpression},set:function(t){t!=this._checkableExpression&&(this._checkableExpression=t,this._checkableTag&&(this._checkableTag.disconnect(),this._checkableTag=null),t)&&(this._checkableTag=new i(this,t),this.dataSource)&&this._checkableTag.connect(this.dataSource)}}),_dp(x,"checkableCallback",{get:function(){return this._checkableCallback},set:function(t){t!=this._checkableCallback&&(this._checkableCallback=t,this._checkableTag&&(this._checkableTag.disconnect(),this._checkableTag=null),t)&&(this._checkableTag=new i(this,null,t),this.dataSource)&&this._checkableTag.connect(this.dataSource)}}),_dp(x,"sortMode",{get:function(){return this._sortMode},set:function(t){t!=this._sortMode&&(this._sortMode=t)}}),_dp(x,"includeParentItem",{get:function(){return this._includeParentItem},set:function(t){this._includeParentItem=t}}),x.prototype.$_needSort=function(){return this._sortFields&&0<this._sortFields.length&&this._sortMode==ht.SortMode.AUTO},x.prototype.insertItem=function(t,e,i,o){var n=this._visibleItems,r=(t.collapsed&&n.expand(t,!1),n.indexOf(t.getItem(i)));if(o){t.insert(i+1,e);for(var s=n.count,a=t.level+1;++r<s&&!(n.getItem(r).level<=a););}else t.insert(i,e);n.insert(e,r)},x.prototype.appendItem=function(t,e){for(var i,o=this._visibleItems,n=(t.collapsed&&o.expand(t,!1),i=0<t.count?o.indexOf(t.getItem(t.count-1)):o.indexOf(t),o.count),r=t.level;++i<n&&!(o.getItem(i).level<=r););t.add(e),o.insert(e,i)},x.prototype.removeItem=function(t){this._visibleItems.remove(t),t.parent.remove(t)},x.prototype.$_calcLevel=function(t,e,i){for(var o,n=t.count,r=e,s=0;s<n;s++)(o=t.getItem(s))&&(r=Math.max(r,e+1),i&&!o.expanded||(r=Math.max(r,this.$_calcLevel(o,e+1,i))));return r},x.prototype.getLevels=function(t){return this.$_calcLevel(this._rootItem,0,t)},x.prototype.$_setExpanded=function(t,e,i){if(this._setExpanded(t,!0),this.dataSource.setHasChildren(t.row,!1),e)for(var o=0,n=t.count;o<n;o++){var r=t.getItem(o);r instanceof c&&(r.expanded||r.level<i)&&this.$_setExpanded(r,!0,i)}},x.prototype._expandItem=function(t,e,i,o,n){if(t&&(e||!t.expanded)&&(!n||this._fireExpanding(t))){this._visibleItems.collapse(t),this._visibleItems.expand(t,i,o),this._resetItemIndicies(t===this._rootItem?0:t.index),this.$_setExpanded(t,i,0<o?t.level+o:1e6);try{this._fireRefresh()}finally{n&&this._fireExpanded(t)}}},x.prototype.expand=function(t,e,i,o){this._expandItem(t,i,e,o=void 0===o?0:o,!0)},x.prototype.expandAll=function(t){this._expandItem(this._rootItem,!0,!0,0<t?t+1:0,!0)},x.prototype.$_setCollapsed=function(t,e){if(this._setExpanded(t,!1),e)for(var i=0,o=t.count;i<o;i++){var n=t.getItem(i);n instanceof c&&this.$_setCollapsed(n,!0)}},x.prototype._collapseItem=function(t,e,i,o){if(t&&(e||t.expanded)&&(!o||this._fireCollapsing(t))){this._visibleItems.collapse(t),this.$_setCollapsed(t,i),t==this._rootItem&&this._visibleItems.expand(this._rootItem,!1),this._resetItemIndicies(t===this._rootItem?0:t.index);try{this._fireRefresh()}finally{o&&this._fireCollapsed(t)}}},x.prototype.collapse=function(t,e,i){this._collapseItem(t,i,e,!0)},x.prototype.collapseAll=function(){this._collapseItem(this._rootItem,!0,!0,!0)},x.prototype.$_saveExpanded=function(t){t._saveExpanded();for(var e=0,i=t.count;e<i;e++)this.$_saveExpanded(t.getItem(e))},x.prototype.orderBy=function(t,e,i,o){void 0===o&&(o=!0),this._fireSort(t,e,i),this._sortFields=[],this._sortDirections=[],this._sortCases=[];for(var n=t?t.length:0,r=e?e.length:0,s=i?i.length:0,a=0;a<n;a++)this._sortFields.push(t[a]),a<r?this._sortDirections.push(e[a]):0<r?this._sortDirections.push(e[r-1]):this._sortDirections.push(ht.SortDirection.ASCENDING),a<s?this._sortCases.push(i[a]):0<s?this._sortCases.push(i[s-1]):this._sortCases.push(ht.SortCase.SENSITIVE);try{this._saveAndRefresh(!0,o),o&&this._fireRefresh()}finally{this._fireSorted()}},x.prototype.getSortFields=function(){return this._sortFields.concat()},x.prototype.getSortDirections=function(){return this._sortDirections.concat()},x.prototype.getSortCases=function(){return this._sortCases.concat()},x.prototype.beginFiltering=function(){this._filterLock++},x.prototype.$_prepareFiltering=function(t,e){for(var i=e._dataRow.count,o=e.rowId,n=o<=-1||this.$_selectItem(e.parent,e),r=0;r<i;r++){var s=new c(e._dataRow._children[r]);s[rt.GridItem.PARENT]=e,s&&!this.dataSource.isHiddenRow(s.rowId)&&(n=this.$_prepareFiltering(t,s)||n)}return t[o]=n},x.prototype.endFiltering=function(t,e,i){var o={};t&&this._includeParentItem&&(o={},this.$_prepareFilters(),this.$_prepareFiltering(o,this._rootItem)),0<this._filterLock&&(this._filterLock=Math.max(0,this._filterLock-1),t)&&0==this._filterLock&&this.applyFilters(e,i,o)},x.prototype.hasFilter=function(t){t=this._filters[t];return!!t&&0<t.length},x.prototype.addFilter=function(t,e){this._fireFilterAdded(t,e.text);var i=this._filters[t],t=(i||(this._filters[t]=i=[]),new H.ColumnFilterRun(e));return i.push(t),t},x.prototype.removeFilter=function(t,e){if(this._filtered&&this._filters[t]){this._fireFilterRemoved(t,e);for(var i=this._filters[t],o=i.length;o--;)if(i[o].model===e){i.splice(o,1),this.applyFilters(null,null);break}}},x.prototype.clearFilters=function(t){var e;this._filtered&&this._filters[t]&&(this._fireFilterCleared(t),e=this._filters[t])&&0<e.length&&(e.splice(0,e.length),this._filters[t]=null,this.applyFilters(null,null))},x.prototype.clearAllFilters=function(){this._filtered&&(this._fireFilterAllCleared(),this._filters={},this.applyFilters(null,null))},x.prototype.hasFilters=function(){for(var t in this._filters){t=this._filters[t];if(t&&0<t.length)return!0}return!1},x.prototype.$_prepareFilters=function(){var t,e=this.dataSource,i=e.fieldCount;for(t in this._filters)Number(t)>=i&&(this._filters[t]=null);if(this._filtered=this.hasFilters())for(var o in this._filters){var n=this._filters[o];if(n)for(var r=n.length;r--;)n[r].prepare(this._filterRuntime,e)}},x.prototype.applyFilters=function(t,e,i){if(i||this.$_prepareFilters(),0==this._filterLock){this.$_saveExpanded(this._rootItem),this.$_clearItems(),this.$_buildTree(!0,i);try{this._fireRefresh()}finally{this._fireFiltered(t,e)}}},x.prototype.getItemByRow=function(t){return t?this._itemMap[t.rowId]:null},x.prototype.getCheckedRows=function(){var t=[];return function t(e,i){if(e instanceof c)for(var o=0,n=e.count;o<n;o++){var r=e.getItem(o),s=void 0;r.checked&&(s=r.row)&&i.push(s),t(r,i)}}(this._rootItem,t),t},x.prototype.getCheckedRowIds=function(){var t=[];return function t(e,i){if(e instanceof c)for(var o=0,n=e.count;o<n;o++){var r=e.getItem(o),s=void 0;r.checked&&0<=(s=r.dataRow)&&i.push(s),t(r,i)}}(this._rootItem,t),t},x.prototype.resetCheckables=function(){this._checkableTag&&(this._checkableTag.clearRows(),this._fireRefresh())},x.prototype.applyCheckables=function(){this._checkableTag?this._checkableTag.setRows():i.clearCheckables(this),this._fireRefresh()},x.prototype.$_checkChildren=function(t,e,i){for(var o=0,n=t.count;o<n;o++){var r=t.getItem(o);!r||i&&!r.checkable||this._setCheckItem(r,e),r instanceof c&&this.$_checkChildren(r,e,i)}},x.prototype._clearChecked=function(){this.$_checkChildren(this._rootItem,!1,!1)},x.prototype.checkAll=function(t,e,i,o){e?C.prototype.checkAll.call(this,t,e,i,o,!1):(this.$_checkChildren(this._rootItem,t,i),o?this._fireItemAllChecked(t):this._fireRefreshClient())},x.prototype.setCheckFieldIndex=function(t){this._checkFieldIndex=t},x.prototype.setItemChecked=function(t,e){return-1<this._checkFieldIndex&&(t.setData(this._checkFieldIndex,e),!0)},x.prototype.getItemChecked=function(t,e){return 0<=this._checkFieldIndex?t.getData(this._checkFieldIndex):e},_dp(x,"dataSource",{get:function(){return this._ds},set:function(t){t!==this._ds&&(this.$_clearItems(),this.$_resetSummary(),this._ds&&(this._ds.removeTag(this._extents),this._ds.removeListener(this),this._ds.unregisterCommandListener(this)),this._ds=t,this._ds&&(this.$_buildTree(),this._ds.addTag(this._extents),this._ds.addListener(this,0),this._ds.registerCommandListener(this)),this._fireReset())}}),_dp(x,"itemCount",{get:function(){return this._visibleItems.count}}),_dp(x,"rowCount",{get:function(){return this._itemCount}}),_dp(x,"sorted",{get:function(){return this._sortFields&&0<this._sortFields.length}}),_dp(x,"movable",{get:function(){return!this.sorted}}),x.prototype._createRootItem=function(){var t=new f(this);return this._setExpanded(t,!0),t},x.prototype.getItem=function(t){return 0<=t&&t<this._visibleItems.count?this._visibleItems.getItem(t):null},x.prototype.getItems=function(t,e){throw new Error("Method not implemented.")},x.prototype.getItemOfRow=function(t,e){return this._itemMap[t]},x.prototype.$_collectItems=function(t,e){for(var i=0,o=t.count;i<o;i++){var n=t.getItem(i);n instanceof c&&(e.push(n),this.$_collectItems(n,e))}},x.prototype.getAllItems=function(){var t=[];return this.$_collectItems(this._rootItem,t),t},x.prototype.getJsonRows=function(){return this.getAllItems().map(function(t){var e=t.getRowObject();return e.__level=t.level,e})},x.prototype.getNumber=function(t){t=this.$_getSummary(t);return t?t.count:this.itemCount},x.prototype.getSum=function(t){t=this.$_getSummary(t);return t?t.sum:NaN},x.prototype.getMax=function(t){t=this.$_getSummary(t);return t?t.max:NaN},x.prototype.getMin=function(t){t=this.$_getSummary(t);return t?t.min:NaN},x.prototype.getAvg=function(t){t=this.$_getSummary(t);return t?t.avg:NaN},x.prototype.getVar=function(t){t=this.$_getSummary(t);return t?t.vars:NaN},x.prototype.getVarp=function(t){t=this.$_getSummary(t);return t?t.varsp:NaN},x.prototype.getStdev=function(t){t=this.$_getSummary(t);return t?Math.sqrt(t.vars):NaN},x.prototype.getStdevp=function(t){t=this.$_getSummary(t);return t?Math.sqrt(t.varsp):NaN},x.prototype.getDataCount=function(t){t=this.$_getSummary(t);return t?t.dataCount:0},x.prototype.getDataAvg=function(t){t=this.$_getSummary(t);return t?t.dataAvg:NaN},x.prototype.findItem=function(t,e,i,o,n){var r=this.dataSource;if(r){var s=this.itemCount;if(!(s<1)){var a=Math.min(t.length,e.length);if(!(a<1)){for(var l=!i||i.allFields,h=i&&i.caseSensitive,d=i&&i.partialMatch,u=null,c=[],_="function"==typeof(_=i.compareCallback)?_:re.Utils.compareTextValue,p=0;p<a;p++)c[p]=r.getField(t[p]).dataType;o=Math.max(0,o),n=Math.min(this._visibleItems.count-1,n);for(var f=o;f<=n;f++){var g=this._visibleItems.getItem(f),m=g.dataRow;if(w=0<=g.dataRow)for(p=0;p<a;p++){var y=g.getData(t[p]),v=r.getOrgFieldName(t[p]);switch(c[p]){case ht.ValueType.DATETIME:case ht.ValueType.DATE:var C,w=e[p]instanceof Date?_.call(r.handler,e[p],y,h,d,m,v):(u||(C=/[.]/.test(e[p])?"yyyy.MM.dd":/[/]/.test(e[p])?"yyyy/MM/dd":/[-]/.test(e[p])?"yyyy-MM-dd":"yyyyMMdd",u=new dt.DateTimeConverter(C)),_.call(r.handler,e[p],y&&u.getText(y),h,d,m,v));break;default:w=_.call(r.handler,e[p],y,h,d,m,v)}if(w&&!l)return f;if(!w&&l)break}if(w)return f}}}}return-1},x.prototype.findCell=function(t,e,i,o,n,r){var s=this.dataSource;if(s){var a=this.itemCount;if(!(a<1)){for(var l=i&&i.caseSensitive,h=i&&i.partialMatch,d=s.fieldCount,u=t.length,c=null,_=[],p=0;p<d;p++)_[p]=s.getField(p).dataType;o=Math.max(0,o),n=Math.min(this._visibleItems.count-1,n),(r=Math.max(0,r))>=t.length&&(o++,r=0);for(var f="function"==typeof(f=i.compareCallback)?f:re.Utils.compareTextValue,g=o;g<=n;g++){var m=this._visibleItems.getItem(g),y=m.dataRow,v=!1;if(0<=m.dataRow)for(p=o<g?0:r;p<u;p++){var C=t[p],w=s.getOrgFieldName(C);if(0<=C&&C<d){var x=m.getData(C);switch(_[C]){case ht.ValueType.DATETIME:case ht.ValueType.DATE:var b,v=e instanceof Date?f.call(s.handler,e,x,l,h,y,w):(c||(b=/[.]/.test(e)?"yyyy.MM.dd":/[/]/.test(e)?"yyyy/MM/dd":/[-]/.test(e)?"yyyy-MM-dd":"yyyyMMdd",c=new dt.DateTimeConverter(b)),f.call(s.handler,e,x&&c.getText(x),l,h,y,w));break;default:v=f.call(s.handler,e,x,l,h,y,w)}if(v)return{itemIndex:g,fieldIndex:C,searchFieldIndex:p}}}}}}return null},x.prototype.$_internalAddItem=function(t,e,i){var o=c.getTemp(e,t),n=this.dataSource;return!(this.hideDeleted&&b.isDeletedState(o.rowState)||n.isHiddenRow(e.rowId))&&o&&(null!=i?i:this.$_selectItem(t,o))?(o=new c(e),t.insert(e.index,o),this._itemCount++,this._itemMap[e.rowId]=o):void 0},x.prototype.$_internalRemoveItem=function(t){t&&(t.parent.remove(t),this._itemCount--,this._itemMap[t.row.rowId]=void 0)},x.prototype.$_internalRowStateChanged=function(t,e){var i;void 0===e&&(e=!0),t&&(this.hideDeleted&&b.isDeletedState(t.rowState)?(i=t.parent,this.$_internalRemoveItem(t),this.$_clearSummary(),i.expanded&&i.visible&&(this._visibleItems.remove(t),e=!0),e&&this._fireRefresh()):this._fireItemChanged(t))},x.prototype.$_selectField=function(t,e,i,o){for(var n=0,r=t.length;n<r;n++){var s=t[n];if(!(s.model instanceof H.ColumnFilterCategory)&&s.select(this._filterRuntime,e,i,o))return!0}return!1},x.prototype.$_selectItem=function(t,e){if(!e)return!1;for(var i in this._filters){var o=this._filters[i];if(o&&!this.$_selectField(o,t,e,Number(i)))return!1}return!!e},x.prototype._setItem=function(t,e){this._visibleItems.setItem(t.index,e),this._resetItemIndex(t.index)},x.prototype.$_resetVisibleItems=function(){this._visibleItems._clearAndInit(this.fixedCount),this._visibleItems.expand(this._rootItem,!1),this._setExpanded(this._rootItem,!0),this._resetItemIndicies(0)},x.prototype.$_clearItems=function(){this._visibleItems.clear(),this._rootItem.clear(),this._itemMap=[],this._itemCount=0},x.prototype.$_buildItems=function(t,e,i){void 0===e&&(e=!1);for(var o=t.row,n=o.count,r=0;r<n;r++){var s=o.getChild(r),a=this.$_internalAddItem(t,s,i?i[s.rowId]:null);a&&(e&&a._restoreExpanded(),0<s.count)&&this.$_buildItems(a,e,i)}},x.prototype.$_sortItem=function(t){var e=t.count;1<e&&this.$_sort(t,0,0,e-1);for(var i=0;i<e;i++){var o=t.getItem(i);o instanceof c&&this.$_sortItem(o)}},x.prototype.$_sort=function(t,e,i,o){var n=this._sortFields[e],r=this._sortDirections[e],s=this.dataSource,a=this._sortCases[e]==ht.SortCase.INSENSITIVE;this._sorter.run(t,n,r,a,i,o,e+1==this._sortFields.length);var l=(s.getField(n).dataType==ht.ValueType.TEXT&&a?s.equalTexts:s.equalValues).bind(s);if(e+1<this._sortFields.length){for(var h=i,d=h;h<o;)l(n,t.getItem(++h).row,t.getItem(h-1).row)||(this.$_sort(t,e+1,d,h-1),d=h);d<o&&this.$_sort(t,e+1,d,o)}},x.prototype.$_buildTree=function(t,e){void 0===t&&(t=!1);for(var i=this.dataSource,o=(this._rootItem._dataRow=i.rootRow,this._itemMap[this._rootItem._dataRow.rowId]=this._rootItem,this.$_buildItems(this._rootItem,t,e),this.$_clearSummary(),i.fieldCount),n=this._sortFields,r=this._sortDirections,s=this._sortCases,a=n.length;a--;)(n[a]<0||n[a]>=o)&&(n.splice(a,1),r.splice(a,1),s.splice(a,1));this.sorted&&0<this._rootItem.count&&this.$_sortItem(this._rootItem),this.$_resetVisibleItems(),this._checkableTag&&this._checkableTag.setRows()},x.prototype.$_resetSummary=function(){this._summaryMap=[]},x.prototype.$_resetGroupSummary=function(){},x.prototype.$_clearSummary=function(){if(this._summaryMap)for(var t=this._summaryMap.length;t--;)this._summaryMap[t]&&this._summaryMap[t].clear()},x.prototype.$_getSummary=function(t){var e,i=this._summaryMap[t];return i||(e=this.dataSource)&&e.canSummarize(t)&&(i=new Vt.FieldSummary(t),this._summaryMap[t]=i),i&&0==i.count&&0<this.itemCount&&this.$_summarize(i),i},x.prototype.$_summarize=function(t){var e=this.dataSource;if(e)if(this._filtered||this.hideDeleted||0<e.hiddenCount){for(var i=this._rootItem.getDescendants(!1),o=i.length,n=[],r=0;r<o;r++){var s=i[r];s instanceof c&&!e.isHiddenRow(s.rowId)&&n.push(s.row)}t.count=n.length,e.summarizeRange(t,n,this.summaryMode==ht.SummaryMode.STATISTICAL)}else t.count=e.rowCount,e.summarize(t,this.summaryMode==ht.SummaryMode.STATISTICAL)},x.prototype._fireItemChanged=function(t){this._eventLock<=0&&this.fireEvent(x.ITEM_CHANGED,t)},x.prototype._fireExpanding=function(t){return!(this._eventLock<=0)||this.fireConfirmEvent(x.EXPANDING,t)},x.prototype._fireExpanded=function(t){this._eventLock<=0&&this.fireEvent(x.EXPANDED,t)},x.prototype._fireCollapsing=function(t){return!(this._eventLock<=0)||this.fireConfirmEvent(x.COLLAPSING,t)},x.prototype._fireCollapsed=function(t){this._eventLock<=0&&this.fireEvent(x.COLLAPSED,t)},x.prototype._fireParentChanging=function(t,e,i){return!(this._eventLock<=0)||this.fireConfirmEvent(x.PARENT_CHANGING,t,e,i)},x.prototype._fireParentChanged=function(t,e,i){this._eventLock<=0&&this.fireEvent(x.PARENT_CHANGED,t,e,i)},x.prototype._refreshItems=function(){this.$_clearItems(),this.$_buildTree(),this._fireRefresh()},x.prototype._saveAndRefresh=function(t,e){void 0===e&&(e=!0),(t=void 0===t?!0:t)&&this.$_saveExpanded(this._rootItem);var i={};this.hasFilters()&&!function e(t,i){i[t.dataId]=!0,0<t.children.length&&t.children.forEach(function(t){e(t,i)})}(this._rootItem,i),this.$_clearItems(),this.$_buildTree(t,i),e&&this._fireRefresh()},x.prototype.onDataSourceCommandStackChanged=function(t,e,i){this._fireCommandStackChanged(e,i)},x.prototype.onTreeDataProviderDisposed=function(t){this.$_clearItems(),this.$_resetSummary(),this._fireReset(),this.dataSource=null},x.prototype.onTreeDataProviderReset=function(t){this.$_clearItems(),this.$_resetSummary(),this.$_buildTree(),this._fireReset()},x.prototype.onTreeDataProviderRefresh=function(t){this._refreshItems()},x.prototype.onTreeDataProviderRefreshClient=function(t){this._fireRefreshClient()},x.prototype.onDataProvderCleared=function(t){this._refreshItems()},x.prototype.onTreeDataProviderRowCountChanged=function(t,e){},x.prototype.onTreeDataProviderRowAdding=function(t,e,i){return!0},x.prototype.onTreeDataProviderRowAdded=function(t,e){var i,o=this._itemMap[e.parent.rowId];o&&((i=this.$_internalAddItem(o,e,!0))?(this.$_buildItems(i),this.$_clearSummary(),o.expanded?this._expandItem(o,!0,!1,0,!1):this._fireItemChanged(o)):this.$_resetVisibleItems()),this._checkableTag&&(this._checkableTag.addRow(e,!1),0<e.parent.level)&&this._checkableTag.addRow(e.parent,!1),this.$_needSort()&&this._saveAndRefresh()},x.prototype.onTreeDataProviderRowsAdded=function(t,e,i){var o,n=this._itemMap[e.rowId];if(n&&i&&0<(o=i.length)){for(var r=0;r<o;r++){var s=i[r],s=this.$_internalAddItem(n,s,!0);s&&this.$_buildItems(s)}this.$_clearSummary(),n.expanded?this._expandItem(n,!0,!1,0,!1):this._fireItemChanged(n),this._checkableTag&&(this._checkableTag.addRows(i),0<e.level)&&this._checkableTag.addRow(e)}this.$_needSort()&&this._saveAndRefresh()},x.prototype.onTreeDataProviderRowRemoving=function(t,e){return!0},x.prototype.onTreeDataProviderRowRemoved=function(t,e){var i,e=this._itemMap[e.rowId];e&&(i=e.parent,this.$_internalRemoveItem(e),this.$_clearSummary(),i.expanded)&&i.visible&&(this._visibleItems.remove(e),this._fireRefresh())},x.prototype.onTreeDataProviderRowsRemoving=function(t,e){return!0},x.prototype.onTreeDataProviderRowsRemoved=function(t,e){for(var i=e.length,o=!1,n=0;n<i;n++){var r,s=e[n],s=this._itemMap[s.rowId];s&&(r=s.parent,this.$_internalRemoveItem(s),r.expanded)&&r.visible&&(this._visibleItems.remove(s),o=!0)}this.$_clearSummary(),o&&this._fireRefresh()},x.prototype.onTreeDataProviderRowUpdating=function(t,e){return!0},x.prototype.onTreeDataProviderRowUpdated=function(t,e){var i;this.$_needSort()?this._saveAndRefresh():(i=this._itemMap[e.rowId],this.$_clearSummary(),this._fireItemUpdated(i)),this._checkableTag&&this._checkableTag.updateRow(e)},x.prototype.onTreeDataProviderRowsUpdating=function(t,e){return!0},x.prototype.onTreeDataProviderRowsUpdated=function(t,e){this.$_needSort()?this._saveAndRefresh():(this.$_clearSummary(),this._fireRefresh()),this._checkableTag&&this._checkableTag.updateRows(e)},x.prototype.onTreeDataProviderValueChanging=function(t,e,i){return!0},x.prototype.onTreeDataProviderValueChanged=function(t,e,i){var o;this.$_needSort()?this._saveAndRefresh():(o=this._itemMap[e.rowId],this.$_clearSummary(),this._fireItemUpdated(o)),this._checkableTag&&this._checkableTag.updateRow(e)},x.prototype.onTreeDataProviderIconIndexChanged=function(t,e){e=this._itemMap[e.rowId];e&&e.visible&&this._fireItemChanged(e)},x.prototype.onTreeDataProviderHasChildrenChanged=function(t,e){e=this._itemMap[e.rowId];e&&e.visible&&this._fireItemChanged(e)},x.prototype.onTreeDataProviderRowStateChanged=function(t,e,i){var o=this._itemMap[e.rowId];this.$_internalRowStateChanged(o,i),this._checkableTag&&this._checkableTag.updateRow(e),!o&&i&&this._saveAndRefresh()},x.prototype.onTreeDataProviderRowStatesChanged=function(t,e){var i=e.length,o=!1;if(1==i){var n=e[0],o=!(h=this._itemMap[n.rowId]);this.$_internalRowStateChanged(h),this._checkableTag&&this._checkableTag.updateRow(n),o&&this._saveAndRefresh()}else if(0<i){var r=!1;if(this.hideDeleted)for(var s=0,a=e.length;s<a;s++){var l,h=this._itemMap[e[s].rowId];o=o||!h,h&&b.isDeletedState(h.rowState)&&(l=h.parent,this.$_internalRemoveItem(h),l.expanded&&l.visible&&this._visibleItems.remove(h),r=!0)}this._checkableTag&&this._checkableTag.changeStates(e),r&&this.$_clearSummary(),o?this._saveAndRefresh():this._fireRefresh()}},x.prototype.onTreeDataProviderRowSiblingMoved=function(t,e,i){this.$_needSort()||(e=this._itemMap[e.rowId])&&(e.parent.moveChild(e.childIndex,i),this.$_resetVisibleItems(),this._fireRefresh())},x.prototype.onTreeDataProviderRowsSiblingMoved=function(t,e,i){var o;this.$_needSort()||(o=this._itemMap[e[0].rowId])&&(o.parent.moveChildren(o.childIndex,e.length,i),this.$_resetVisibleItems(),this._fireRefresh())},x.prototype.onTreeDataProviderRowParentChanged=function(t,e,i,o){e=this._itemMap[e.rowId];e&&(i=this._itemMap[i.rowId],this.$_needSort()&&(o=i?i.count():0),e.changeParent(i,o),this.$_resetVisibleItems(),this._fireRefresh())},x.prototype.onTreeDataProviderRowsParentChanged=function(t,e,i,o){if(this._itemMap[e[0].rowId]){var n=this._itemMap[i.rowId];this.$_needSort()&&(o=n?n.count():0);for(var r=0;r<e.length;r++){var s=e[r];this._itemMap[s.rowId].changeParent(n,o+r)}this.$_resetVisibleItems(),this._fireRefresh()}},x.prototype.onTreeDataProviderRowsHideChanged=function(t,e,i){if(i){for(var o=!1,n=0,r=e.length;n<r;n++){var s,a=e[n],a=this._itemMap[a];a&&(s=a.parent,this.$_internalRemoveItem(a),s.expanded&&s.visible&&this._visibleItems.remove(a),o=!0)}o&&this.$_clearSummary(),this._fireRefresh()}else this._saveAndRefresh()},x.prototype.onTreeDataProviderDataLoadComplated=function(){this._fireDataLoadComplated()},x.ITEM_CHANGED="onTreeItemProviderItemChanged",x.EXPANDING="onTreeItemProviderExpanding",x.EXPANDED="onTreeItemProviderExpanded",x.COLLAPSING="onTreeItemProviderCollapsing",x.COLLAPSED="onTreeItemProviderCollapsed",x.PARENT_CHANGING="onTreeItemProviderParentChanging",x.PARENT_CHANGED="onTreeItemProviderParentChanged";var C,w=x;function x(){var t=C.call(this,null)||this;return t._sortMode=ht.SortMode.AUTO,t._expandWhenGrouping=!0,t._footerWhenExpanded=!0,t._footerWhenCollapsed=!0,t._labelComparer={},t._summaryMode=ht.SummaryMode.AGGREGATE,t._groupSummaryMode=ht.SummaryMode.AGGREGATE,t._checkableExpression=null,t._checkableCallback=null,t._extents=new s,t._filters={},t._filterRuntime=new H.ColumnFilterRuntime,t._filtered=!1,t._sorter=new jt.TreeItemsSorter,t._sortFields=[],t._sortDirections=[],t._sortCases=[],t._visibleItems=new y(t),t._itemMap=[],t._itemCount=0,t._summaryMap=null,t._filterLock=0,t._includeParentItem=!0,t._checkFieldIndex=-1,t}e.TreeItemProvider=w})),Yt=(t(E),E.TreeItemFooter,E.TreeItem,E.RootTreeItem,E.TreeItemProvider,e(function(t,e){Object.defineProperty(e,"__esModule",{value:!0});i=se.Base,ne.__extends(n,i),n.prototype.getCount=function(t){return this._rs.getNumber(t)},n.prototype.getSum=function(t){return this._rs.getSum(t)},n.prototype.getMax=function(t){return this._rs.getMax(t)},n.prototype.getMin=function(t){return this._rs.getMin(t)},n.prototype.getAvg=function(t){return this._rs.getAvg(t)},n.prototype.getVar=function(t){return this._rs.getVar(t)},n.prototype.getVarp=function(t){return this._rs.getVarp(t)},n.prototype.getStdev=function(t){return this._rs.getStdev(t)},n.prototype.getStdevp=function(t){return this._rs.getStdevp(t)},n.prototype.getDataCount=function(t){return this._rs.getDataCount(t)},n.prototype.getDataAvg=function(t){return this._rs.getDataAvg(t)};var i,o=n;function n(t){var e=i.call(this)||this;return e._rs=t,e}e.DefaultSummarizer=o})),qt=(t(Yt),Yt.DefaultSummarizer,e(function(t,e){Object.defineProperty(e,"__esModule",{value:!0});n=E.TreeItem,ne.__extends(i,n),i.prototype.dispose=function(){this._values=null,n.prototype.dispose.call(this)},_dp(i,"values",{get:function(){return this._values.concat()},set:function(t){var e=this.dataSource,i=e.fieldCount;if(t)for(var i=Math.min(i,t.length),o=0;o<i;o++){var n=e.getField(o),r=this._values[o],s=n.readValue(t[o]);this._values[o]=s,this._started&&parent&&!n.equalValues(r,s)&&this._rs._editItemCellUpdated(this,o,r,s)}else this._values=[]}}),_dp(i,"invalidFields",{get:function(){return this._invalidFields}}),i.prototype.beginEdit=function(t,e){this._started=!0,this._checkDiff=t,this._strictDiff=e},i.prototype.setValue=function(t,e){var i=this.dataSource;if(t<0&&t>=i.fieldCount)throw new RangeError("field index is out of bounds: "+t);var i=i.getField(t),o=this._values[t];e=i.readValue(e),this._values[t]=e,this._started&&this.parent&&!i.equalValues(o,e)&&this._rs._editItemCellUpdated(this,t,o,e)},_dp(i,"dataSource",{get:function(){return this._rs.dataSource}}),_dp(i,"itemState",{get:function(){return this._state}}),_dp(i,"rowState",{get:function(){return this._target?this._target.rowState:b.RowState.NONE}}),_dp(i,"expanded",{get:function(){return!!this._target&&this._target.expanded}}),i.prototype.getData=function(t){var e=this.dataSource;if((t=e.getFieldIndex(t))<0||t>=e.fieldCount)throw new RangeError("field index is out of bounds: "+t);return this._values[t]},i.prototype.setData=function(t,e){var i=this.dataSource;if((t=i.getFieldIndex(t))<0||t>=i.fieldCount)throw new RangeError("field index is out of bounds: "+t);var i=i.getField(t),o=this._values[t],n=(e=i.readValue(e),!this._checkDiff);(n=n||(this._strictDiff?!i.equalValues(o,e):!i.sameValues(o,e)))&&(this._values[t]=e,this._changeValues[t]=!0,this.parent)&&(this._rs._editItemCellUpdated(this,t,o,e),this._rs._editItemCellEdited(this,t))},i.prototype.getRowData=function(){return this._values.concat()},i.prototype.getRowObject=function(){var t=this.dataSource;if(t){for(var e={},i=0,o=t.fieldCount;i<o;i++)e[t.getOrgFieldName(i)]=this._values[i];return e}return null},i.prototype.isEdited=function(t){return this._changeValues[t]},_dp(i,"provider",{get:function(){return this._rs&&this._rs.source}});var n,a=i;function i(t,e,i){var o=n.call(this,e&&e.row)||this;return o._values=[],o._changeValues=[],o._started=!1,o._checkDiff=!1,o._strictDiff=!1,o._invalidFields=[],o._rs=t,o._target=e,o._state=i,o}e.TreeEditItem=a;o=A.EditableItemProvider,ne.__extends(s,o),s.prototype._doDispose=function(){this._rs=null,this._summarizer=null,o.prototype._doDispose.call(this)},_dp(s,"summarizer",{get:function(){return this._summarizer}}),s.prototype.getLevels=function(t){return this._rs.getLevels(t)},s.prototype.setLabelComparer=function(t){this._rs.labelComparer=t},s.prototype.orderBy=function(t,e,i){this._rs.orderBy(t,e,i)},s.prototype.getSortFields=function(){return this._rs.getSortFields()},s.prototype.getSortDirections=function(){return this._rs.getSortDirections()},s.prototype.getSortCases=function(){return this._rs.getSortCases()},_dp(s,"labelComparer",{get:function(){return this._rs.labelComparer},set:function(t){this._rs.labelComparer=t}}),s.prototype.isFiltered=function(t){return null!=t?this._rs.hasFilter(t):this._rs.hasFilters()},s.prototype.addFilter=function(t,e){this._rs.addFilter(t,e)},s.prototype.removeFilter=function(t,e){this._rs.removeFilter(t,e)},s.prototype.clearFilters=function(t){this._rs.clearFilters(t)},s.prototype.clearAllFilters=function(){this._rs.clearAllFilters()},s.prototype.beginFiltering=function(){this._rs.beginFiltering()},s.prototype.endFiltering=function(t,e){this._rs.endFiltering(!0,t,e)},_dp(s,"includeParentItem",{set:function(t){this._rs.includeParentItem=t}}),s.prototype.expand=function(t,e,i,o){this._rs.expand(t,e,i,o)},s.prototype.collapse=function(t,e){this._rs.collapse(t,e)},s.prototype.expandAll=function(t){this._rs.expandAll(t)},s.prototype.collapseAll=function(){this._rs.collapseAll()},s.prototype.getCheckedRows=function(){return this._rs.getCheckedRows()},s.prototype.getCheckedRowIds=function(){return this._rs.getCheckedRowIds()},_dp(s,"checkableExpression",{set:function(t){this._rs.checkableExpression=t}}),_dp(s,"checkableCallback",{set:function(t){this._rs.checkableCallback=t}}),s.prototype.resetCheckables=function(){this._rs.resetCheckables()},s.prototype.applyCheckables=function(){this._rs.applyCheckables()},s.prototype.getAllItems=function(){return this._rs.getAllItems()},s.prototype.getItem=function(t){return this._rs.getItem(t)},s.prototype.getItemOfRow=function(t){return this._rs.getItemOfRow(t)},s.prototype.findItem=function(t,e,i,o,n){return this._rs.findItem(t,e,i,o,n)},s.prototype.findCell=function(t,e,i,o,n,r){return this._rs.findCell(t,e,i,o,n,r)},s.prototype.checkItem=function(t,e,i,o){this._rs.checkItem(t,e,i,o)},s.prototype.checkAll=function(t,e,i,o){this._rs.checkAll(t,e,i,o)},s.prototype.setCheckFieldIndex=function(t){this._rs.setCheckFieldIndex(t)},s.prototype.getJsonRows=function(){return this._rs.getJsonRows()},_dp(s,"summaryMode",{get:function(){return this._rs.summaryMode},set:function(t){this._rs.summaryMode=t}}),_dp(s,"groupSummaryMode",{set:function(t){this._rs.groupSummaryMode=t}}),_dp(s,"hideDeleted",{get:function(){return this._rs.hideDeleted},set:function(t){this._rs.hideDeleted=t}}),_dp(s,"sortMode",{get:function(){return this._rs.sortMode},set:function(t){this._rs.sortMode=t}}),_dp(s,"itemCount",{get:function(){return this._rs.itemCount}}),_dp(s,"rowCount",{get:function(){return this._rs.rowCount}}),_dp(s,"sorted",{get:function(){return this._rs.sorted}}),_dp(s,"movable",{get:function(){return this._rs.movable}}),s.prototype.getItems=function(t,e){throw new Error("Method not implemented.")},s.prototype.canAppend=function(){return!1},s.prototype.canInsert=function(t){return!!t},s.prototype.canDelete=function(t){return!!t},s.prototype.$_replaceItem=function(t,e){t.parent.setItem(t,e),this._rs._setItem(t,e)},s.prototype._doBeginUpdate=function(t){return this._editingItem=this._editItem=this._createEditItem(t,rt.ItemState.UPDATING,null),this.$_replaceItem(t,this._editItem),this._editItem},s.prototype._doBeginAppend=function(t){return this._editingItem=this._editItem=this._createEditItem(null,rt.ItemState.APPENDING,t),this._editItem},s.prototype._doBeginInsert=function(t,e,i,o){return void 0===i&&(i=!1),(o=void 0===o?!1:o)?(this._appending=!0,t.setExpanded(!0,!1,!1),this._editingItem=this._editItem=this._createEditItem(null,rt.ItemState.INSERTING,e),this._rs.appendItem(t,this._editItem)):(o=t.parent,this._appending=!1,this._insertAfter=i,this._insertIndex=o.indexOf(t),this._editingItem=this._editItem=this._createEditItem(t,rt.ItemState.INSERTING,e),this._rs.insertItem(o,this._editItem,this._insertIndex,this._insertAfter)),this._editItem},s.prototype._doCompleteUpdate=function(e){var t=!1;if(this.dataSource){this.$_replaceItem(this._editItem,e);var i=this._editItem.row;try{t=i.update(this._editItem.values,!1)}catch(t){throw this.$_replaceItem(e,this._editItem),t}t||this.$_replaceItem(e,this._editItem)}return t},s.prototype._doCompleteInsert=function(t){var e=this.dataSource,i=this._editItem,o=!1;if(e){var n=i.parent,r=n.row,e=e.createRow(i.values,-1,!1),s=i.parent.indexOf(i);this._rs.removeItem(i);try{o=this.isAppending?r.addChild(e,!1):r.insertChild(s,e,!1)}catch(t){throw this._appending?this._rs.appendItem(n,i):this._rs.insertItem(n,i,this._insertIndex,this._insertAfter),t}o?(r=n.itemOfRow(e.rowId),i.setCheckable(r.checkable),this._copyExtents(i,r),i.heights&&(r.heights=i.heights.slice())):this._appending?this._rs.appendItem(n,i):this._rs.insertItem(n,i,this._insertIndex,this._insertAfter)}return o},s.prototype._doCancelEdit=function(t,e){t==rt.ItemState.UPDATING?(this.$_replaceItem(this._editItem,e),this._copyExtents(this._editItem,e)):t==rt.ItemState.INSERTING&&this._editItem.parent&&this._rs.removeItem(this._editItem),o.prototype._doCancelEdit.call(this,t,e)},s.prototype._doCommitEdit=function(t,e){return t!=rt.ItemState.UPDATING&&rt.ItemState.INSERTING,o.prototype._doCommitEdit.call(this,t,e)},s.prototype.remove=function(t){t&&(t=t.row)&&t.parent.removeChild(t)},s.prototype.getRemovableRows=function(t){if(0<t.length){for(var e=[],i=0,o=t.length;i<o;i++){var n=this._rs.getItem(t[i]);e.push(n.dataId)}return e}},s.prototype.removeRows=function(t){t&&this.dataSource.removeRows(t)},s.prototype.updateRows2=function(t){},s.prototype.setDataSource=function(t){this._rs.dataSource=t},_dp(s,"rootItem",{get:function(){return this._rs._rootItem}}),s.prototype._createEditItem=function(t,e,i){this._editingItem=null;var o=this.dataSource;if(!o)return null;var n=o.fieldCount;switch(e){case rt.ItemState.UPDATING:for(var r=this._editingItem=new a(this,t,e),s=0;s<n;s++)r.setValue(s,t.getData(s));this._copyExtents(t,r),t.heights&&(r.heights=t.heights.slice());break;case rt.ItemState.INSERTING:case rt.ItemState.APPENDING:if((r=this._editingItem=new a(this,null,e))._setExtents(0),i)for(s=0;s<n;s++)i.length>s&&r.setValue(s,i[s])}return this._editingItem},s.prototype.onItemProviderFilterAdd=function(t,e,i){},s.prototype.onItemProviderFilterRemove=function(t,e,i){},s.prototype.onItemProviderFilterClear=function(t,e){},s.prototype.onItemProviderFilterClearAll=function(t){},s.prototype.onItemProviderFilterAdded=function(t,e,i){this._fireFilterAdded(e,i)},s.prototype.onItemProviderFilterRemoved=function(t,e,i){this._fireFilterRemoved(e,i)},s.prototype.onItemProviderFilterCleared=function(t,e){this._fireFilterCleared(e)},s.prototype.onItemProviderFilterAllCleared=function(t){this._fireFilterAllCleared()},s.prototype.onItemProviderFiltered=function(t,e,i){this._fireFiltered(e,i)},s.prototype.onItemProviderSort=function(t,e,i){this._fireSort(e,i,null)},s.prototype.onItemProviderSorted=function(t){this._fireSorted()},s.prototype.onItemProviderDataLoadComplated=function(){this._fireDataLoadComplated()},s.prototype.onTreeItemProviderItemChanged=function(t,e){this._eventLock<=0&&this.fireEvent(E.TreeItemProvider.ITEM_CHANGED,e)},s.prototype.onTreeItemProviderExpanding=function(t,e){return!(this._eventLock<=0)||this.fireConfirmEvent(E.TreeItemProvider.EXPANDING,e)},s.prototype.onTreeItemProviderExpanded=function(t,e){this._eventLock<=0&&this.fireEvent(E.TreeItemProvider.EXPANDED,e)},s.prototype.onTreeItemProviderCollapsing=function(t,e){return!(this._eventLock<=0)||this.fireConfirmEvent(E.TreeItemProvider.COLLAPSING,e)},s.prototype.onTreeItemProviderCollapsed=function(t,e){this._eventLock<=0&&this.fireEvent(E.TreeItemProvider.COLLAPSED,e)};var o,r=s;function s(t){t=o.call(this,null,t)||this;return t._observers=[],t._appending=!1,t._insertAfter=!1,t._insertIndex=-1,t._rs=new E.TreeItemProvider,t.source=t._rs,t._summarizer=new Yt.DefaultSummarizer(t._rs),t}e.TreeGridItemProvider=r})),G=(t(qt),qt.TreeEditItem,qt.TreeGridItemProvider,e(function(t,e){Object.defineProperty(e,"__esModule",{value:!0});i=Error,ne.__extends(n,i);var i,o=n;function n(t){t=i.call(this,t)||this;return Object.setPrototypeOf(t,n.prototype),t}e.AbortError=o;r=o,ne.__extends(s,r),s.prototype.toString=function(){return"Validation failed["+this.level.toUpperCase()+"]: "+this.message};var r,p=s;function s(t,e,i,o){e=r.call(this,e)||this;return Object.setPrototypeOf(e,s.prototype),e.level=t,e.column=i,e.userMessage=o,e}e.ValidationError=p;a=se.Base,ne.__extends(h,a),_dp(h,"name",{get:function(){return this._name}}),_dp(h,"active",{get:function(){return this._active},set:function(t){this._active=t}}),_dp(h,"mode",{get:function(){return this._mode},set:function(t){this._mode=t}}),_dp(h,"level",{get:function(){return this._level},set:function(t){this._level=t}}),_dp(h,"criteria",{get:function(){return this._criteria},set:function(t){t!=this._criteria&&(this._criteria=t,this._exprNode=t?$.ExpressionParser.Default.parse(t,h.CAPITAL_INDEXERS):null)}}),_dp(h,"message",{get:function(){return this._message},set:function(t){this._message=t}}),_dp(h,"description",{get:function(){return this._description},set:function(t){this._description=t}}),h.prototype.validate=function(t){if(this._exprNode&&!this._exprNode.evaluate(t))throw t=this._message||this._description||this._name||this._criteria,new p(this._level,t,null,this._message)},h.prototype.doAssignSimple=function(t){if("string"==typeof t)return this.criteria=t,!0},h.CAPITAL_INDEXERS=["value","values"];var a,l=h;function h(t){var e=a.call(this)||this;return e._active=!0,e._mode=ht.ValidationMode.ALWAYS,e._level=ht.ValidationLevel.ERROR,e._name=t,e}e.EditValidation=l;d=se.Base,ne.__extends(u,d),u.prototype._doDispose=function(){this._items=null,d.prototype._doDispose.call(this)},_dp(u,"count",{get:function(){return this._items.length}}),_dp(u,"items",{get:function(){return this._items.slice()},set:function(t){this.assignFrom(t)}}),u.prototype.clear=function(){this._items=[]},u.prototype.addAll=function(t){if(t&&0<t.length)for(var e=0,i=t.length;e<i;e++)this._items.push(t[e])},u.prototype.validate=function(t,e,i,o){for(var n=0;n<this._items.length;n++){var r=this._items[n];if(r.active&&(r.mode==t||r.mode==ht.ValidationMode.ALWAYS))try{r.validate(e)}catch(t){if(!(i=i&&!this._isColumn)||ht.ValidationLevel_compare(r.level,o)<0)throw t instanceof p?(t.level=r.level,t):new p(r.level,t)}}},u.prototype.assignFrom=function(t){if(t!==this&&(this.clear(),t))for(var e=0,i=(t=re.Utils.isArray(t)?t:[t]).length;e<i;e++){var o=new l;o.assignFrom(t[e]),this._items.push(o)}};var d,o=u;function u(t){var e=d.call(this)||this;return e._items=[],e._isColumn=t,e}e.EditValidationCollection=o;c=$.ExpressionRuntime,ne.__extends(_,c),_.prototype._doDispose=function(){this._item=null,this._dataSource=null,c.prototype._doDispose.call(this)},_dp(_,"item",{get:function(){return this._item},set:function(t){this._item=t,this._dataSource=this._item.dataSource,this._fieldCount=this._dataSource?this._dataSource.fieldCount:0}}),_.prototype.isIdentifier=function(t){return t=t.toLowerCase(),_.IDENTS.hasOwnProperty(t)?_.IDENTS[t]:c.prototype.isIdentifier.call(this,t)},_.prototype.evaluateIdentifier=function(t){switch(t){case _.ID_ROW:return this._item.index;case _.ID_DATAROW:return this._item.dataRow;case _.ID_CHECKED:return this._item.checked}throw new $.ExpressionEvaluationError("Invalid identifier key: "+t)},_.prototype.evaluateIndexerI=function(t,e){if(e<0||e>=this._fieldCount)throw new $.ExpressionEvaluationError("Data field index out of bounds:"+e);switch(t){case _.ID_VALUE:case _.ID_VALUES:return this._item.getData(e)}throw new $.ExpressionEvaluationError("Invalid identifier indexer: "+t)},_.prototype.evaluateIndexerS=function(t,e,i){var o=i?this._dataSource.getFieldIndexC(e):this._dataSource.getFieldIndex(e);if(o<0||o>=this._fieldCount)throw new $.ExpressionEvaluationError("Data field is not exists:"+e);switch(t){case _.ID_VALUE:case _.ID_VALUES:return this._item.getData(o)}throw new $.ExpressionEvaluationError("Invalid identifier indexer: "+t)},_.IDENTS={row:_.ID_ROW=0,datarow:_.ID_DATAROW=1,checked:_.ID_CHECKED=2,value:_.ID_VALUE=3,values:_.ID_VALUES=4};var c,o=_;function _(){var t=c.call(this)||this;return t._item=null,t._dataSource=null,t._fieldCount=0,t}e.DataRowValidationRuntime=o;f=$.ExpressionRuntime,ne.__extends(g,f),g.prototype._doDispose=function(){this._index=null,this._dataSource=null,f.prototype._doDispose.call(this)},g.prototype.setIndex=function(t){this._index=t,this._value=this._index.item.getData(this._index.dataColumn.dataIndex),this._dataSource=this._index.item.dataSource},g.prototype.isIdentifier=function(t){return t=t.toLowerCase(),g.IDENTS.hasOwnProperty(t)?g.IDENTS[t]:f.prototype.isIdentifier.call(this,t)},g.prototype.evaluateIdentifier=function(t){switch(t){case g.ID_VALUE:return this._value;case g.ID_ROW:return this._index.itemIndex;case g.ID_DATAROW:return this._index.item.dataRow;case g.ID_INDEX:return this._index.column.index;case g.ID_FIELD:return this._index.dataColumn.dataIndex;case g.ID_CHECKED:var e=this._index.item;return!!e&&e.checked;case g.ID_TAG:return this._index.column.tag;case g.ID_BASE:e=this._index.dataColumn.baseIndex;return 0<=e?this._index.item.getData(e):void 0}throw new $.ExpressionEvaluationError("Invalid identifier key: "+t)},g.prototype.evaluateIndexerI=function(t,e){var i=this._dataSource.fieldCount;if(e<0||i<=e)throw new $.ExpressionEvaluationError("Data field index out of bounds:"+e);switch(t){case g.ID_VALUE:case g.ID_VALUES:return this._index.item.getData(e)}throw new $.ExpressionEvaluationError("Invalid identifier indexer: "+t)},g.prototype.evaluateIndexerS=function(t,e,i){var o=i?this._dataSource.getFieldIndexC(e):this._dataSource.getFieldIndex(e),i=this._dataSource.fieldCount;if(o<0||i<=o)throw new $.ExpressionEvaluationError("Data field is not exists:"+e);switch(t){case g.ID_VALUE:case g.ID_VALUES:return this._index.item.getData(o)}throw new $.ExpressionEvaluationError("Invalid identifier indexer: "+t)},g.IDENTS={value:g.ID_VALUE=0,row:g.ID_ROW=1,datarow:g.ID_DATAROW=2,index:g.ID_INDEX=3,field:g.ID_FIELD=4,checked:g.ID_CHECKED=5,tag:g.ID_TAG=6,base:g.ID_BASE=7,values:g.ID_VALUES=8};var f,o=g;function g(){return f.call(this)||this}e.DataCellValidationRuntime=o;m=se.Base,ne.__extends(y,m),_dp(y,"owner",{get:function(){return this._owner}}),_dp(y,"cellList",{get:function(){return this._cellList}}),y.prototype.validateCell=function(t,e,i){this.$_validateCell(t,e,!0,this._owner.editOptions.commitLevel,i)},y.prototype.validateRow=function(t,e,i,o){var n=this._owner.editOptions.commitLevel;if(!i)for(var r=this._owner.getDataColumns(),s=0,a=r.length;s<a;s++){var l=r[s],l=_t.CellIndex.temp(this._owner,t.index,l);try{this.$_validateCell(l,e,!0,n,o)}catch(t){if(!(t instanceof p))throw t;if(ht.ValidationLevel_compare(t.level,n)<0)throw t;o||this.addInvalidateCell(l,t)}}var h,i=this._owner.validations;i&&0<i.count&&((h=this._owner.rowValidationRuntime).item=t,i.validate(e?ht.ValidationMode.INSERT:ht.ValidationMode.UPDATE,h,!0,n)),this.owner._fireValidateRow(t,e,t.getRowObject())},y.prototype.clearInvalidCells=function(t){this.$_clearInvalidateList(t)},y.prototype.clearInvalidCell=function(t){this.$_clearInvalidateCell(t)},y.prototype.getError=function(t){return t.item?(this._cellList[rt.ItemState_isEditing(t.item.itemState)?-1:t.dataId]||{})[t.dataField]:null},y.prototype.cloneError=function(t,e){var i=this._cellList;i[t]&&(i[e]=JSON.parse(JSON.stringify(i[t])))},y.prototype.addInvalidateCell=function(t,e){this.$_addInvalidateCell(t,e)},y.prototype.getInvalidCells=function(){var t,e=[],i=this._cellList;for(t in i){var o,n=i[t];for(o in n){var r=n[o];e.push({column:r.column,dataRow:r.dataRow,message:r.message,level:r.level})}}return 0<e.length?e:null},y.prototype.validateCells=function(t,e,i){var o=this._owner,n=o.getDataColumns(),r=[];if(t=re.Utils.makeArray(t))for(var s=0,a=t.length;s<a;s++)(l=o.getItem(t[s]))&&l.isDataRow&&(delete this._cellList[l.dataId],r.push(l));else{if(e)for(s=0,a=o.itemCount;s<a;s++)(l=o.getItem(s))&&l.isDataRow&&(delete this._cellList[l.dataId],r.push(l));else r=!o.isTree()&&o.paged&&i?o.itemSource.getPagingAllItems():o.getAllItems();this._cellList={}}for(var l,s=0,h=r.length;s<h;s++)if((l=r[s]).isDataRow)for(var d=0,a=n.length;d<a;d++){var u=n[d],u=_t.DummyCellIndex.tempItem(o,l,u);try{this.$_validateCell(u,!1,!1,ht.ValidationLevel.IGNORE,!1)}catch(t){}}return o.refreshView(),this.getInvalidCells()},y.prototype.clearInvalidateList=function(){this.$_clearInvalidateList()},y.prototype.checkRowIds=function(){var t,e=this.owner.dataSource;for(t in this._cellList){var i=parseInt(t);e.getDataRow(i)<0&&delete this._cellList[i]}},y.prototype.$_validateCell=function(e,t,i,o,n){var r=e.dataColumn;if(r){var s=this.owner.editOptions.validateOnlyEditColumn,a=!0;if((e.item instanceof A.EditItem||e.item instanceof qt.TreeEditItem)&&(a=e.item.isEdited(r.dataIndex)),!s||a||r.required)try{var l=e.item.getData(r.dataIndex);if(r.required){var h,d=r.grid,u=d&&d.dataSource&&d.dataSource.getField(r.dataIndex);if(u&&u.isEmpty(l))throw h=r.requiredMessage||"Value is required: "+r.fieldName,new p(r.requiredLevel||ht.ValidationLevel.ERROR,h,r,r.requiredMessage)}var c,_=r.validations;_&&0<_.count&&((c=this._owner.columnValidationRuntime).setIndex(e),_.validate(t?ht.ValidationMode.INSERT:ht.ValidationMode.UPDATE,c,i,o)),this.owner._fireValidateCell(e,t,e.item.getData(e.dataField)),n||this.$_clearInvalidateCell(e)}catch(t){throw t instanceof p&&(t.column=r,n||this.$_addInvalidateCell(e,t)),t}}},y.prototype.$_addInvalidateCell=function(t,e){var i,o=rt.ItemState_isEditing(t.item.itemState)?-1:t.dataId,n=t.dataColumn&&t.dataColumn.dataIndex;null==o||n<=-1||(((i=this._cellList)[o]=i[o]||{})[n]={dataRow:t.dataRow,message:e.message,userMessage:e.userMessage,level:e.level,column:t.dataColumn.name})},y.prototype.$_clearInvalidateCell=function(t){var e=rt.ItemState_isEditing(t.item.itemState)?-1:t.dataId,t=t.dataField,e=this._cellList[e];e&&e[t]&&delete e[t]},y.prototype.$_clearInvalidateList=function(t){null!=t?delete this._cellList[t]:this._cellList={},this._owner.refreshView()};var m,o=y;function y(t){var e=m.call(this)||this;return e._cellList={},e._owner=t,e}e.ValidationManager=o})),Xt=(t(G),G.AbortError,G.ValidationError,G.EditValidation,G.EditValidationCollection,G.DataRowValidationRuntime,G.DataCellValidationRuntime,G.ValidationManager,e(function(t,e){Object.defineProperty(e,"__esModule",{value:!0});var i=/(.*)/;function o(t){this._pattern=i,this._replace="$1",this.$_parse(this._format=t)}o.getFormatter=function(t){var e=o.Formatters[t];return e||(o.Formatters[t]=e=new o(t)),e},_dp(o,"format",{get:function(){return this._format}}),o.prototype.getText=function(t){return t&&t.replace(this._pattern,this._replace)},o.prototype.$_parse=function(t){var e,i;t&&1<(t=t.trim().split(re.Utils.colonreg)).length&&(e=t[0].trim(),i=t[1].trim(),e)&&i&&(e='"'==e.charAt(0)?e.substr(1,e.length-2):e)&&(i='"'==i.charAt(0)?e.substr(1,i.length-2):i)&&(this._pattern=new RegExp(e,t[2]||""),this._replace=i)},o.Formatters={},e.TextFormatter=o})),q=(t(Xt),Xt.TextFormatter,e(function(t,e){Object.defineProperty(e,"__esModule",{value:!0});i=rt.GroupFooter,ne.__extends(o,i),o.prototype.getShadowRow=function(){var t=this.parent.firstDataItem;return t?t.dataRow:-1};var i,m=o;function o(){return i.call(this)||this}e.MergedGroupFooter=m;n=rt.GroupItemImpl,ne.__extends(r,n),_dp(r,"groupLevel",{get:function(){return this._level}}),r.prototype.getShadowRow=function(){var t=this.firstDataItem;return t?t.dataRow:-1},_dp(r,"merged",{get:function(){return!0}});var n,y=r;function r(t,e){e=n.call(this,e)||this;return e._level=0,e._level=t,e}e.MergedGroupHeader=y;s=se.Base,ne.__extends(l,s),l.prototype._doDispose=function(){s.prototype._doDispose.call(this)},_dp(l,"provider",{get:function(){return this._rs}}),_dp(l,"count",{get:function(){return this._items.length}}),_dp(l,"fixedCount",{get:function(){return this._fixedCount}}),_dp(l,"items",{get:function(){return this._items.slice()}}),_dp(l,"rowCount",{get:function(){if(isNaN(this._rowCount)){for(var t=this._items,e=0,i=t.length-1;0<=i;i--)t[i]instanceof rt.GridRow&&e++;this._rowCount=e}return this._rowCount}}),l.prototype.getItem=function(t){return this._items[t]},l.prototype.clear=function(t){for(var e=this._rs,i=0,o=(t=(t=void 0===t?null:t)||this._items).length;i<o;i++){var n=t[i];n._parent=e._rootItem,n._index=-1,n instanceof rt.GroupItemImpl&&n._children&&this.clear(n._children)}t.length=0,this.$_changed()},l.prototype.expand=function(t,e,i,o){return this.$_expandItem(t,e,i,o),this.$_changed(),!0},l.prototype.collapse=function(t,e){var i,o,n,r,s=this._rs,a=this._items;if(t._expanded=!1,s.mergeMode){if(0<=(o=t.index)?(a.splice(o,1),t._index=-1):(o=this.$_firstIndex(t,s.expandedAdornments==ht.RowGroupAdornments.SUMMARY,!0))<0&&(o=t.firstItem.index),0<=o)for(;o<a.length;){if(!(n=a[o]).isDescendantOf(t))break;a.splice(o,1),n._index=-1,e&&(n instanceof rt.GroupItem||n instanceof m)&&(r=n instanceof rt.GroupItem?n:n instanceof m&&n.parent._expanded?n.parent:null)&&(r._expanded=!1)}switch(h=t.footerCount,s.collapsedAdornments){case ht.RowGroupAdornments.BOTH:t._index=o,a.splice(o++,0,t);for(var l=0;l<h;l++)a.splice(o+l,0,i=t.getFooter(l)),i._index=o+l;break;case ht.RowGroupAdornments.FOOTER:case ht.RowGroupAdornments.SUMMARY:if(h=t.footerCount)for(l=0;l<h;l++)a.splice(o+l,0,i=t.getFooter(l)),i._index=o+l;else if(h=t.allFooterCount)for(l=0;l<h;l++)a.splice(o+l,0,i=t._allFooters[l]),i._index=o+l;break;default:ht.RowGroupAdornments.HEADER;t._index=o,a.splice(o,0,t)}}else{for(0<=(o=t.index)?(a.splice(o,1),t._index=-1):(o=this.$_firstIndex(t,s.expandedAdornments==ht.RowGroupAdornments.SUMMARY,!1))<0&&(o=t.firstItem.index);o<a.length;){if(!(n=a[o]).isDescendantOf(t))break;a.splice(o,1),n._index=-1,e&&(n instanceof rt.GroupItem||n instanceof rt.GroupFooter)&&(r=n instanceof rt.GroupItem?n:n instanceof rt.GroupFooter&&n.parent._expanded?n.parent:null)&&(r._expanded=!1)}switch(s.collapsedAdornments){case ht.RowGroupAdornments.BOTH:t._index=o,a.splice(o++,0,t);for(var h=t.footerCount,l=0;l<h;l++)(i=t.getFooter(l))._index=o+l,a.splice(o+l,0,i);break;case ht.RowGroupAdornments.FOOTER:case ht.RowGroupAdornments.SUMMARY:if(h=t.footerCount)for(l=0;l<h;l++)(i=t.getFooter(l))._index=o+l,a.splice(o+l,0,i);else for(l=0;l<t.allFooterCount;l++)(i=t._allFooters[l])._index=o+l,a.splice(o+l,0,i);break;default:ht.RowGroupAdornments.HEADER;t._index=o,a.splice(o,0,t)}}return this.$_changed(),!0},l.prototype.getNext=function(t){return null!=t&&t.visible&&t.index<this.count-1?this._items[t.index+1]:null},l.prototype.getPrior=function(t){return null!=t&&t.visible&&0<t.index?this._items[t.index-1]:null},l.prototype.$_changed=function(){this._rowCount=NaN},l.prototype.$_collectChildren=function(t,e,i,o,n){var r=this._rs,s=r.expandedAdornments,a=r.collapsedAdornments;if(o&&t&&t._setExpanded(!0),r.mergeMode){var l=void 0;if(!(t instanceof Bt.RootItem))if(s==ht.RowGroupAdornments.HEADER||s==ht.RowGroupAdornments.BOTH)e.push(t);else if(s==ht.RowGroupAdornments.SUMMARY)for(var h=0,d=t.footerCount;h<d;h++)l=t.getFooter(h),e.push(l);for(var u=0,c=t.count;u<c;u++)if((f=t.getItem(u))instanceof rt.GroupItem){var _=f;if(i&&(!n||_.level<=n)||_.expanded)this.$_collectChildren(_,e,i,o,n);else{var p=_.footerCount;switch(a){case ht.RowGroupAdornments.BOTH:e.push(_);for(h=0;h<p;h++)l=_.getFooter(h),e.push(l);break;case ht.RowGroupAdornments.SUMMARY:case ht.RowGroupAdornments.FOOTER:if(p)for(h=0;h<p;h++)l=_.getFooter(h),e.push(l);else for(h=0;h<_.allFooterCount;h++)l=_._allFooters[h],e.push(l);break;default:ht.RowGroupAdornments.HEADER;e.push(_)}}}else t.isFooter(f)||e.push(f);if(!(t instanceof Bt.RootItem)&&t.footer&&(s==ht.RowGroupAdornments.FOOTER||s==ht.RowGroupAdornments.BOTH))for(u=0,c=t.footerCount;u<c;u++)e.push(t.getFooter(u))}else{if(!(t instanceof Bt.RootItem))if(s==ht.RowGroupAdornments.SUMMARY){l=t.footer,p=t.footerCount;if(l){h=t.indexOf(l);e.push(l);for(u=1;u<p;u++)l=t.getItem(h+u),e.push(l)}else{p=t.allFooterCount;for(u=0;u<p;u++)l=t._allFooters[u],e.push(l)}}else ht.isHeaderAdornment(s)&&e.push(t);for(var f,u=0,c=t.count;u<c;u++)if((f=t.getItem(u))instanceof rt.GroupItem){var _=f,l=void 0,p=void 0;if(i&&(!n||_.level<=n)||_.expanded)this.$_collectChildren(_,e,i,o,n);else switch(a){case ht.RowGroupAdornments.HEADER:e.push(_);break;case ht.RowGroupAdornments.FOOTER:case ht.RowGroupAdornments.SUMMARY:if(l=_.footer){if(p=_.footerCount,e.push(l),1<p)for(var h=_.indexOf(l),g=1;g<p;g++)l=_.getItem(h+g),e.push(l)}else{p=_.allFooterCount;for(g=0;g<p;g++)l=_._allFooters[g],e.push(l)}break;case ht.RowGroupAdornments.NONE:break;default:ht.RowGroupAdornments.BOTH;if(e.push(_),(l=_.footer)&&(p=_.footerCount,e.push(l),1<p))for(h=_.indexOf(l),g=1;g<p;g++)l=_.getItem(h+g),e.push(l)}}else f instanceof rt.GroupFooter||e.push(f);if(!(t instanceof Bt.RootItem))if(ht.isFooterAdornment(s))if(l=t.footer){p=t.footerCount;if(e.push(l),1<p)for(h=t.indexOf(l),u=1;u<p;u++)l=t.getItem(h+u),e.push(l)}}},l.prototype.$_expandItem=function(t,e,i,o){var n;if(t instanceof Bt.RootItem)n=this._fixedCount;else{if(this._rs.mergeMode)switch(this._rs.collapsedAdornments){case ht.RowGroupAdornments.BOTH:n=t.index,this._items.splice(n,1+t.footerCount);break;case ht.RowGroupAdornments.FOOTER:case ht.RowGroupAdornments.SUMMARY:var r=t.footer;r?(n=r.index,this._items.splice(n,t.footerCount)):0<t.allFooterCount&&(n=t._allFooters[0].index,this._items.splice(n,t.allFooterCount));break;default:ht.RowGroupAdornments.HEADER;n=t.index,this._items.splice(n,1)}else switch(this._rs.collapsedAdornments){case ht.RowGroupAdornments.BOTH:n=t.index,this._items.splice(n,1+t.footerCount);break;case ht.RowGroupAdornments.FOOTER:case ht.RowGroupAdornments.SUMMARY:0<t.footerCount?(n=t.footer.index,this._items.splice(n,t.footerCount)):0<t.allFooterCount&&(n=t._allFooters[0].index,this._items.splice(n,t.allFooterCount));break;default:ht.RowGroupAdornments.HEADER;n=t.index,this._items.splice(n,1)}i&&(t._index=-1)}this._list.splice(0,this._list.length),this.$_collectChildren(t,this._list,e,i,o);for(var s=this._list.length,a=0;a<s;a++)this._items.splice(n+a,0,this._list[a])},l.prototype.$_firstIndex=function(t,e,i){var o=t.index;if(0<=o)return o;for(var n=this._items,r=0,s=n.length;r<s;r++){var a=n[r];if(t.isDescendant(a))return a.index}return-1},l.prototype.$_clearAndInit=function(t,e){if(this.clear(),t){this._fixedCount=Math.min(e,t.itemCount);for(var i=0;i<this._fixedCount;i++)this._items.push(t.getItem(i))}else this._fixedCount=0},l.prototype.$_resetIndices=function(t){for(var e=t=void 0===t?0:t,i=this._items.length;e<i;e++)this._items[e]._index=e};var s,a=l;function l(t){var e=s.call(this)||this;return e._fixedCount=0,e._items=[],e._list=[],e._rowCount=NaN,e._rs=t,e}var h,f=function(t,e){this.startIndex=t,this.endIndex=e,this.level=0,this.children=[]},d=(h=Bt.ProxyItemProvider,ne.__extends(u,h),u.prototype._doDispose=function(){this._callbackOnwer=null,this._visibleItems=this._visibleItems.dispose(),h.prototype._doDispose.call(this)},u.prototype.groupfFooterCounterChanged=function(t){this.$_footerCounterChanged()},u.prototype.$_footerCounterChanged=function(){this._populateItems(),this._fireRefresh()},_dp(u,"footerCounter",{get:function(){return this._footerCounter},set:function(t){t!=this._footerCounter&&(t&&t.setCounterAware(null),(this._footerCounter=t)&&t.setCounterAware(this),this.$_footerCounterChanged())}}),_dp(u,"expandedAdornments",{get:function(){return this._expandedAdornments},set:function(t){t!=this._expandedAdornments&&(this._expandedAdornments=t,this.grouped)&&(this._populateItems(),this._fireRefresh())}}),_dp(u,"collapsedAdornments",{get:function(){return this._collapsedAdornments},set:function(t){t!=this._collapsedAdornments&&(this._collapsedAdornments=t,this.grouped)&&(this._populateItems(),this._fireRefresh())}}),u.prototype.resetAdornments=function(t,e,i){(i||e.expandedAdornments!=this._expandedAdornments||e.collapsedAdornments!=this._collapsedAdornments||e.indentVisible!=this._indentVisible)&&(this._expandedAdornments=e.expandedAdornments,this._collapsedAdornments=e.collapsedAdornments,this._callbackOnwer=t,this._footerCallback=e.createFooterCallback,this._valueForGroupCallback=e.valueForGroupCallback,this._indentVisible=e.indentVisible,this.grouped)&&(this._populateItems(),this._fireRefresh())},_dp(u,"expandWhenGrouping",{get:function(){return this._expandWhenGrouping},set:function(t){this._expandWhenGrouping=t}}),_dp(u,"mergeMode",{get:function(){return this._mergeMode}}),_dp(u,"summaryMode",{get:function(){return this._summaryMode},set:function(t){t!=this._summaryMode&&(this._summaryMode=t,this._populateItems(),this._fireRefresh())}}),_dp(u,"grouped",{get:function(){return this._grouped}}),_dp(u,"groupCount",{get:function(){return this._groupFields?this._groupFields.length:0}}),_dp(u,"groupSorting",{get:function(){return this._groupSorting},set:function(t){this._groupSorting!=t&&(this._groupSorting=t)}}),_dp(u,"visibleRowCount",{get:function(){return this._visibleItems.rowCount}}),_dp(u,"indentVisible",{get:function(){return this._indentVisible}}),u.prototype.canGrouping=function(t){return this.fireGrouping(t)},u.prototype.groupBy=function(t){this.groupByMode(t,this._mergeMode)},u.prototype.groupByMode=function(t,e){this._mergeMode=e,this._groupFields=t?t.concat():null,e||this._clearDisplayLevels(),this._populateItems();try{this._fireRefresh()}finally{this.fireGrouped(t)}},u.prototype.isGroupedField=function(t){if(this._groupFields)for(var e=this._groupFields.length;e--;)if(this._groupFields[e]==t)return!0;return!1},u.prototype.getGroupLevel=function(t){if(this._groupFields&&0<=t)for(var e=this._groupFields.length;e--;)if(this._groupFields[e]==t)return e+1;return 0},_dp(u,"groupedFields",{get:function(){return this._groupFields?this._groupFields.concat():null}}),u.prototype.expand=function(t,e,i,o){if(t&&(!t.expanded||i)&&this.fireExpand(t)&&(t.expanded&&this._visibleItems.collapse(t,!1),this._visibleItems.expand(t,e,!0,o))){this._resetItemIndicies(t.index);try{this._fireRefresh()}finally{this.fireExpanded(t)}}},u.prototype.$_collapseChild=function(t,e,i){for(var o=0,n=t.count;o<n;o++){var r=t.getItem(o);r instanceof rt.GroupItemImpl&&(r._expanded=!1,this.$_collapseChild(r,e,i))}},u.prototype.collapse=function(t,e,i,o){if(t&&t.expanded){if(this.fireCollapse(t)&&this._visibleItems.collapse(t,e)){0<=t.index&&this._resetItemIndicies(t.index);try{this._fireRefresh()}finally{this.fireCollapsed(t,o)}}}else t&&e&&i&&this.$_collapseChild(t,e,i)},u.prototype.collapseAll=function(t){for(var e=0;e<this._rootItem.count;e++){var i=this._rootItem.getItem(e);i instanceof rt.GroupItem&&this.collapse(i,t,!0,null)}},u.prototype.expandAll=function(t,e){for(var i=0;i<this._rootItem.count;i++){var o=this._rootItem.getItem(i);o instanceof rt.GroupItem&&this.expand(o,t,!0,e)}},u.prototype.findItem=function(t,e,i,o,n){var r=this.dataSource;if(r){var s=this.itemCount;if(!(s<1)){var a=Math.min(t.length,e.length);if(!(a<1)){var l=!i||i.allFields,h=i&&i.caseSensitive,d=i&&i.partialMatch,u=null,c=[];o=Math.max(0,o),n=Math.min(s-1,n);for(var _=0;_<a;_++)c[_]=r.getField(t[_]).dataType;for(var p="function"==typeof(p=i.compareCallback)?p:re.Utils.compareTextValue,f=o;f<=n;f++){var g=this.$_getItem(f),m=g.dataRow;if(w=0<=m)for(_=0;_<a;_++){var y=g.getData(t[_]),v=r.getOrgFieldName(t[_]);switch(c[_]){case ht.ValueType.DATETIME:case ht.ValueType.DATE:var C,w=e[_]instanceof Date?p.call(r.handler,e[_],y,h,d,m,v):(u||(C=/[.]/.test(e[_])?"yyyy.MM.dd":/[/]/.test(e[_])?"yyyy/MM/dd":/[-]/.test(e[_])?"yyyy-MM-dd":"yyyyMMdd",u=new dt.DateTimeConverter(C)),p.call(r.handler,e[_],y&&u.getText(y),h,d,m,v));break;default:w=p.call(r.handler,e[_],y,h,d,m,v)}if(w&&!l)return f;if(!w&&l)break}if(w)return f}}}}return-1},u.prototype.findCell=function(t,e,i,o,n,r){var s=this.dataSource;if(s){var a=this.itemCount;if(!(a<1)){for(var l=i&&i.caseSensitive,h=i&&i.partialMatch,d=this.dataSource.fieldCount,u=t.length,c=null,_=[],p="function"==typeof(p=i.compareCallback)?p:re.Utils.compareTextValue,f=0;f<d;f++)_[f]=s.getField(f).dataType;o=Math.max(0,o),n=Math.min(a-1,n),(r=Math.max(0,r))>=t.length&&(o++,r=0);for(var g=o;g<=n;g++){var m=this.$_getItem(g),y=m.dataRow;if(0<=y)for(f=o<g?0:r;f<u;f++){var v=t[f];if(0<=v&&v<d){var C=m.getData(v),w=s.getOrgFieldName(v),x=!1;switch(_[v]){case ht.ValueType.DATETIME:case ht.ValueType.DATE:var b,x=e instanceof Date?p.call(s.handler,e,C,l,h,y,w):(c||(b=/[.]/.test(e)?"yyyy.MM.dd":/[/]/.test(e)?"yyyy/MM/dd":/[-]/.test(e)?"yyyy-MM-dd":"yyyyMMdd",c=new dt.DateTimeConverter(b)),p.call(s.handler,e,C&&c.getText(C),l,h,y,w));break;default:x=p.call(s.handler,e,C,l,h,y,w)}if(x)return{itemIndex:g,fieldIndex:v,searchFieldIndex:f}}}}}}return null},u.prototype.getGroupItem=function(r){return function t(e){for(var i=0,o=e.children.length;i<o;i++){var n=e.children[i];if(n.id===r)return n;if(n instanceof rt.GroupItemImpl&&(n=t(n)))return n}}(this._rootItem)},_dp(u,"itemCount",{get:function(){return this._grouped?this._visibleItems.count:this.source.itemCount}}),u.prototype.getItem=function(t,e){return this.grouped&&!e?0<=t&&t<this._visibleItems.count?this._visibleItems.getItem(t):null:this.source.getItem(t,e)},u.prototype.getItems=function(t,e){if(this.grouped){for(var i=this._visibleItems,o=[],n=Math.min(i.count,t+e-1),r=t;r<n;r++){var s=i.getItem(r);o.push(s)}return o}return this.source.getItems(t,e)},u.prototype.getAllItems=function(){var t;return this.grouped?((t=new a(this)).expand(this.rootItem,!0,!1,0),t.items):this.source?this.source.getAllItems():null},u.prototype.getIndexOfRow=function(t){if(this.grouped){for(var e=this._visibleItems,i=0,o=e.count;i<o;i++)if(e.getItem(i).dataRow==t)return i;return-1}return this.source.getIndexOfRow(t,!1)},u.prototype.getItemOfRow=function(t,e){if(this.grouped){for(var i=this._visibleItems,o=0,n=i.count;o<n;o++){var r=i.getItem(o);if(r.dataRow==t)return r}return null}return this.source.getItemOfRow(t,e)},u.prototype._initialize=function(){h.prototype._initialize.call(this),this._visibleItems=new a(this)},u.prototype._clearItems=function(){this._visibleItems.clear(),this.rootItem.clear()},u.prototype._populateItems=function(){this.$_populateItems(!1)},u.prototype._resetItemIndicies=function(t){this.isIndexing&&this.grouped?this._visibleItems.$_resetIndices(t):h.prototype._resetItemIndicies.call(this,t)},u.prototype._clearChecked=function(){this.grouped?this.$_checkChildren(this.rootItem,!1,!1,!1):h.prototype._clearChecked.call(this),this._editItem&&this._editItem._setChecked(!1)},u.prototype.$_groupCheckable=function(t,e){for(var i=0,o=t.count;i<o;i++){var n=t.getItem(i);(n instanceof rt.GroupItem||n instanceof rt.GroupFooter)&&n.setCheckable(e),n instanceof rt.GroupItem&&this.$_groupCheckable(n,e)}},u.prototype.setGroupCheckable=function(t){t!=this._checkable&&(this._checkable=t,this.$_groupCheckable(this.rootItem,t))},u.prototype.checkAll=function(t,e,i,o,n){if(!this._editItem||i&&!this._editItem.checkable||this._editItem._setChecked(t),e||!this.grouped)h.prototype.checkAll.call(this,t,e,i,o,n);else{e=this._visibleItems.fixedCount;if(0<e)if(i)for(var r=e;r--;){var s=this.getItem(r);s.checkable&&s._setChecked(t)}else for(r=e;r--;)this.getItem(r)._setChecked(t);e=-1<this.source._checkFieldIndex;e&&this.dataSource.beginUpdate();try{this.$_checkChildren(this.rootItem,t,i,n)}finally{e&&this.dataSource.endUpdate(!1)}this._fireItemCheckChanged(null,t),o?this._fireItemAllChecked(t):this._fireRefreshClient()}},u.prototype.getItemChecked=function(t,e){return this.source.getItemChecked(t,e)},u.prototype.setItemChecked=function(t,e){return this.source.setItemChecked(t,e)},u.prototype.getFirstRow=function(){for(var t=0,e=this._visibleItems.count;t<e;t++){var i=this._visibleItems.getItem(t);if(i instanceof rt.GridRow)return i}},u.prototype.getLastRow=function(){for(var t=this._visibleItems.count-1;0<=t;t--){var e=this._visibleItems.getItem(t);if(e instanceof rt.GridRow)return e}},u.prototype.getPrevRow=function(t){if(t)for(var e=(t=t.visible?t:t.getVisibleAncestor()).index-1;0<=e;e--)if((t=this._visibleItems.getItem(e))instanceof rt.GridRow)return t;return this.getFirstRow()},u.prototype.getNextRow=function(t){if(t)for(var e=(t=t.visible?t:t.getVisibleAncestor()).index+1,i=this._visibleItems.count;e<i;e++)if((t=this._visibleItems.getItem(e))instanceof rt.GridRow)return t;return this.getLastRow()},u.prototype.$_saveExpand=function(t,e){for(var i=0,o=t.count;i<o;i++){var n,r,s,a=t.getItem(i);(a instanceof rt.GroupItemImpl||a instanceof y)&&(n=a.firstItem._dataRowId,r=this.dataSource.getDataRow(n),s=a._groupField,0<=r)&&0<=s&&(e[n]={expanded:a._expanded,children:[]},this.$_saveExpand(a,e[n].children))}},u.prototype.$_restoreExpand=function(t,e){for(var i=0,o=t.count;i<o;i++){var n,r,s,a=t.getItem(i);(a instanceof rt.GroupItemImpl||a instanceof y)&&(n=a.firstItem._dataRowId,r=this.dataSource.getDataRow(n),s=a._groupField,0<=r)&&0<=s&&e[n]&&(a._setExpanded(e[n].expanded),this.$_restoreExpand(a,e[n].children))}},u.prototype.$_populateItems=function(t){var e={},i=this.source.itemCount,o=this._rootItem;if(t&&0<i&&o&&this.$_saveExpand(o,e),this._clearItems(),this.source){if(this._groupFields){for(var n=this.dataSource.fieldCount,r=this._groupFields.length-1;0<=r;r--)this._groupFields[r]>=n&&this._groupFields.splice(r,1);this._grouped=0<this._groupFields.length}else this._grouped=!1;this._grouped&&0<i&&(this.$_buildGroupItems(i),t&&this.$_restoreExpand(o,e),this.$_resetVisibleItems())}},u.prototype.$_checkChildren=function(t,e,i,o){for(var n=0,r=t.count;n<r;n++){var s=t.getItem(n);s&&(!i||(o||s.isDataRow)&&s.checkable)&&s._setChecked(e),s instanceof rt.GroupItem&&this.$_checkChildren(s,e,i,o)}},u.prototype.$_getItem=function(t){return(this._grouped?this._visibleItems:this.source).getItem(t)},u.prototype.$_resetVisibleItems=function(){this._visibleItems.$_clearAndInit(this.source,this.fixedCount),this.source&&this.source.itemCount>this._visibleItems.fixedCount&&this._visibleItems.expand(this.rootItem,!1,!1,0),this._resetItemIndicies(0)},u.prototype.$_buildGroupItems=function(t){t>this.fixedCount&&(t=new f(this.fixedCount,t-1),this.$_buildGroups(t,this.source,this._groupFields),this.$_buildItems(this.rootItem,t,this._groupFields),this.mergeMode)&&(this._clearDisplayLevels(),this.$_resetDisplayLevels(this.rootItem))},u.prototype.$_resetDisplayLevels=function(t){for(var e=0,i=t.count;e<i;e++){var o,n=re.Utils.cast(t.getItem(e),rt.GroupItem);n&&((o=re.Utils.cast(n.firstItem,rt.GridRow))&&o._displayLevel<0&&(o._displayLevel=n.level),this.$_resetDisplayLevels(n))}},u.prototype.$_buildGroups=function(t,e,i){if(!(i.length<=t.level)){var o=t.startIndex,n=t.endIndex;if(!(n<o)){for(var r=t.level+1,s=i[t.level],a=this.dataSource.getField(s),l=new f(o,o),h=(l.level=r,t.children.push(l),!this.mergeMode&&this._valueForGroupCallback),d=(c=e.getItem(o)).getData(s),d=h?h.call(this._callbackOnwer,this._callbackOnwer,c.dataRow,a.orgFieldName,d):d,u=o+1;u<=n;u++){var c,_=(c=e.getItem(u)).getData(s),_=h?h.call(this._callbackOnwer,this._callbackOnwer,c.dataRow,a.orgFieldName,_):_;a.equalValues(_,d)||(l&&(l.endIndex=u-1,l.groupValue=d),(l=new f(u,u)).level=r,t.children.push(l)),d=_}l&&(l.endIndex=n,l.groupValue=d);for(var u=0,p=t.children.length;u<p;u++)this.$_buildGroups(t.children[u],e,i)}}},u.prototype.$_buildItems=function(t,e,i){var o=this.mergeMode,n=e.children.length;if(0<n)for(var r=e.level,s=i[e.level],a=0;a<n;a++){var l=o?new y(r,s):new rt.GroupItemImpl(s);l._setExpanded(this.expandWhenGrouping),t.add(l),l.setCheckable(this._checkable),this.$_buildItems(l,e.children[a],i),l.groupValue=e.children[a].groupValue}else{var h=e.endIndex-e.startIndex+1,d=this.source.getItems(e.startIndex,h);t.addAll(d),this._incDescendents(t,h)}if(0<(r=t.level)){var u=this._callbackOnwer,c=this._footerCallback;if(this._footerCounter)for(var _=0,a=0,p=this._footerCounter.getGroupFooterCount(t);a<p;a++){var f,g=!(!c||c(u,t,a));(f=new(o?m:rt.GroupFooter)).$_footerIndex=a,f.$_vindex=g?-1:_++,f.hiddenFooter=g,t.add(f),f.setCheckable(this._checkable)}else(c||c(u,t,0))&&(f=new(o?m:rt.GroupFooter),t.add(f))}},u.prototype.$_setEditItem=function(t){this._editItem=t},u.prototype.$_setDummyEditItem=function(t){this._dummyEditItem=t},u.prototype.fireGrouping=function(t){return this.fireConfirmEvent(u.GROUPING,t)},u.prototype.fireGrouped=function(t){this.fireEvent(u.GROUPED)},u.prototype.fireExpand=function(t){return this.fireConfirmEvent(u.EXPAND,t)},u.prototype.fireExpanded=function(t){this.fireEvent(u.EXPANDED,t)},u.prototype.fireCollapse=function(t){return this.fireConfirmEvent(u.COLLAPSE,t)},u.prototype.fireCollapsed=function(t,e){this.fireEvent(u.COLLAPSED,t,e)},u.prototype.onItemProviderRefresh=function(t){this.grouped?(this.$_populateItems(!0),this._fireRefresh()):(this._resetItemIndicies(0),h.prototype.onItemProviderRefresh.call(this,t))},u.prototype.onItemProviderItemInserted=function(t,e){this.grouped?(this.$_populateItems(!0),this._fireRefresh()):(this._resetItemIndicies(0),h.prototype.onItemProviderItemInserted.call(this,t,e))},u.prototype.onItemProviderItemDeleted=function(t,e){this.grouped?(this.$_populateItems(!0),this._fireRefresh()):(this._resetItemIndicies(0),h.prototype.onItemProviderItemDeleted.call(this,t,e))},u.prototype.onItemProviderItemUpdated=function(t,e){this.grouped?(this.$_populateItems(!0),this._fireRefresh()):(this._resetItemIndicies(0),h.prototype.onItemProviderItemUpdated.call(this,t,e))},u.GROUPING="onGroupedItemProviderGrouping",u.GROUPED="onGroupedItemProviderGrouped",u.EXPAND="onGroupedItemProviderExpand",u.EXPANDED="onGroupedItemProviderExpanded",u.COLLAPSE="onGroupedItemProviderCollapse",u.COLLAPSED="onGroupedItemProviderCollapsed",u);function u(t,e){t=h.call(this,t,e)||this;return t._expandedAdornments=ht.RowGroupAdornments.BOTH,t._collapsedAdornments=ht.RowGroupAdornments.HEADER,t._indentVisible=!0,t._expandWhenGrouping=!1,t._mergeMode=!1,t._summaryMode=ht.SummaryMode.AGGREGATE,t._groupSorting=!0,t._grouped=!1,t._checkable=!0,t}e.GroupedItemProvider=d})),Kt=(t(q),q.MergedGroupFooter,q.MergedGroupHeader,q.GroupedItemProvider,e(function(t,e){Object.defineProperty(e,"__esModule",{value:!0});i=se.Base,ne.__extends(n,i),n.prototype._changed=function(){},n.INIT_COUNT=200;var i,o=n;function n(){return i.call(this)||this}e.GridMergeRule=o;r=o,ne.__extends(s,r),s.getDefault=function(t,e){var i=s.$_default;return i._level=t,i._mergeMode=e,i},s.prototype.parseInit=function(t,e,i,o,n){var r=t.itemCount;(o=Math.min(r-i,o))<1||(this._mergeMode?this.$_parseMerged(t,e,i,o,n):this.$_parseNormal(t,e,i,o,n))},s.prototype.parseBounds=function(t,e,i,o,n){var r=t.itemCount;if(!(r<1)){for(i=Math.max(0,i);0<=i&&n[i]<=0;){var s=t.getItem(i);if(s==this.$_getAncestor(s,this._level))break;i--}for(;i<=o&&0<n[i];)i++;i<=o&&(this._mergeMode?this.$_parseMergedBounds(t,e,i,o,n):this.$_parseNormalBounds(t,e,i,o,n))}},s.prototype.$_getAncestor=function(t,e){for(var i=(i=re.Utils.cast(t,rt.GroupItem))||t.parent;i.level>e;)i=i.parent;return i},s.prototype.$_parseNormal=function(t,e,i,o,n){var r=t.itemCount;if(!(r<1)){var s,a=t.fixedCount,l=t.getItem(i),h=i,d=h+1;for(n[h]=h+1;d<r;)s=t.getItem(d),(d==a||s.level!=l.level||s.constructor!==l.constructor||s instanceof rt.GroupFooter||s instanceof rt.GroupItemImpl)&&(h=d),n[d]=h+1,d++,l=s}},s.prototype.$_parseMerged=function(t,e,i,o,n){var r=t.itemCount;if(!(r<1))for(var s=t.getItem(i),a=this.$_getAncestor(s,this._level),l=i,h=n[l]=l+1;h<r;){var s=t.getItem(h),d=this.$_getAncestor(s,this._level);if(d!=a){if(o<=h)break;a=d,l=h}n[h]=l+1,h++}},s.prototype.$_parseNormalBounds=function(t,e,i,o,n){var r=t.itemCount;if(!(r<1)){var s,a=t.fixedCount,l=t.getItem(i),h=i,d=h+1;for(n[h]=h+1;d<r;)s=t.getItem(d),d!=a&&s.level==l.level&&s.constructor===l.constructor||(h=d),n[d]=h+1,d++,l=s}},s.prototype.$_parseMergedBounds=function(t,e,i,o,n){var r=t.itemCount;if(!(r<1)){var s=t.getItem(i),a=this.$_getAncestor(s,this._level),l=i,h=l+1;for(n[l]=l+1;h<r;){var s=t.getItem(h),d=this.$_getAncestor(s,this._level);if(d!=a){if(o<h)break;a=d,l=h}n[h]=l+1,h++}}},s.$_default=new s;var r,g=s;function s(){var t=r.call(this)||this;return t._level=0,t._mergeMode=!1,t}e.RowGroupMergeRule=g;a=$.ExpressionRuntime,ne.__extends(h,a),h.getObjectText=function(t,e,i,o){var n=e.objectKey||e.objectCallback,r=(n?e:i).objectKey,n=(n?e:i).objectCallback;return n&&"function"==typeof n?n(i.orgFieldName,t.dataRow,o):r&&o.hasOwnProperty(r)?o[r]:JSON.stringify(o)},h.prototype._doDispose=function(){this._item=null,this._ds=null,this._grid=null,this._layout=null,a.prototype._doDispose.call(this)},h.prototype.setDataSource=function(t){this._ds=t,this._fieldCount=t?t.fieldCount:0},h.prototype.setLayout=function(t){this._layout=t,this._column=t.firstColumn,this._grid=t.grid},h.prototype.setCell=function(t){this._item=t.item,this._field=t.dataField},h.prototype.setItem=function(t,e){this._item=t,this._field=e},h.prototype.clear=function(){this._item=null,this._field=null,this._layout=null,this._column=null,this._grid=null,this._ds=null},h.prototype.isIdentifier=function(t){return t=t.toLowerCase(),h.IDENTS.hasOwnProperty(t)?h.IDENTS[t]:a.prototype.isIdentifier.call(this,t)},h.prototype.evaluateIdentifier=function(t){if(this._item){var e=void 0;switch(t){case h.ID_ROW:return this._item.index;case h.ID_DATAROW:return this._item.dataRow;case h.ID_CHECKED:return this._item.checked;case h.ID_GROUP:return this._item.parent;case h.ID_VALUE:var i=this._ds.getField(this._field);return null!=(e=this._item.getData(this._field))&&i.dataType===ht.ValueType.OBJECT?h.getObjectText(this._item,this._column,i,e):e;case h.ID_PREV_VALUES:var o=this._grid.getDataColumns(),i=o.indexOf(this._column);if(!o.length||i<1)return"";for(var n=[],r=0,s=Math.min(i,o.length);r<s;r++)null!=(e=this._item.getData(o[r].dataIndex))&&this._ds.getField(o[r].dataIndex).dataType===ht.ValueType.OBJECT?n.push(h.getObjectText(this._item,o[r],o[r].getField(),e)):n.push(e);return n.join("`")}throw new $.ExpressionEvaluationError("Invalid identifier key: "+t)}},h.prototype.evaluateIndexerI=function(t,e){if(this._item){if(t!=h.ID_VALUE&&t!=h.ID_VALUES)throw new $.ExpressionEvaluationError("Invalid identifier indexer: "+t);if(e<0||e>=this._fieldCount)throw new $.ExpressionEvaluationError("Data field index out of bounds:"+e);t=this._item.getData(e);return null!=t&&this._ds.getField(e).dataType===ht.ValueType.OBJECT?(e=this._column.grid.columnByField(e),h.getObjectText(this._item,e,e.getField(),t)):t}},h.prototype.evaluateIndexerS=function(t,e,i){if(t!=h.ID_VALUE&&t!=h.ID_VALUES)throw new $.ExpressionEvaluationError("Invalid identifier indexer: "+t);if(this._ds){t=i?this._ds.getFieldIndexC(e):this._ds.getFieldIndex(e);if(t<0||t>=this._fieldCount)throw new $.ExpressionEvaluationError("Data field is not exists:"+e);i=this._item.getData(t);return null!=i&&this._ds.getField(t).dataType===ht.ValueType.OBJECT?(e=this._column.grid.columnByField(t),h.getObjectText(this._item,e,e.getField(),i)):i}},h.IDENTS={row:h.ID_ROW=0,datarow:h.ID_DATAROW=1,checked:h.ID_CHECKED=2,value:h.ID_VALUE=3,values:h.ID_VALUES=4,group:h.ID_GROUP=5,prevvalues:h.ID_PREV_VALUES=6};var a,l=h;function h(){var t=a.call(this)||this;return t._item=null,t._field=-1,t._ds=null,t._fieldCount=0,t._grid=null,t._layout=null,t}var d,m={},o=(d=o,ne.__extends(u,d),u.createRule=function(t){t="string"==typeof t?t:t&&t.criteria;return t?new u(t):null},u.prototype._doDispose=function(){this._runtime.clear(),this._runtime=null,d.prototype._doDispose.call(this)},_dp(u,"criteria",{get:function(){return this._criteria},set:function(t){(t=t?t.trim():null)!=this._criteria&&(this._criteria=t,this._exprNode=t?$.ExpressionParser.Default.parse(t,null):null,this._changed())}}),u.prototype.parseInit=function(t,e,i,o,n){var r=this._layout.isBreakMergeOnEmpty(),s=t.fixedCount,a=t.itemCount,l=t.dataSource.rowCount;if(!((o=Math.min(a-i,o))<1||l<=0)){this._runtime.setDataSource(t.dataSource),this._runtime.setLayout(this._layout);for(var h=null,d=i;d<a&&(h=t.getItem(d),!this.$_isRow(h,!1));)n[d]=d+1,d++;if(!(a<=d)){var u,c=this._exprNode.isIdentifier("value")&&this._layout.getDataColumn().valueType!==ht.ValueType.OBJECT,_=i=d;if(n[_]=_+1,!(h.dataRow>=l))for(u=c?h.getData(e):(this._runtime.setItem(h,e),this._exprNode.evaluate(this._runtime)),d=i+1;d<a;d++)if(h=t.getItem(d),this.$_isRow(h,!1)){if(h.dataRow>=l)break;var p=void 0,p=c?h.getData(e):(this._runtime.setItem(h,e),this._exprNode.evaluate(this._runtime));if(d==s||null==p&&r||(p instanceof Date&&u instanceof Date?+p!=+u:p!=u)){if(o<=d)break;_=d,u=p}n[d]=_+1}else{if(o<=d)break;u=m,n[_=d]=_+1}}}},u.prototype.parseBounds=function(t,e,i,o,n){var r=this._layout.isBreakMergeOnEmpty(),s=t.itemCount;if(!(s<1)){var a=t.fixedCount,l=this._exprNode.isIdentifier("value")&&this._layout.getDataColumn().valueType!==ht.ValueType.OBJECT,h=m,d=Math.max(0,i),u=d,c=-1;if(this._runtime.setDataSource(t.dataSource),this._runtime.setLayout(this._layout),0<d&&n[d]<=0){var _=t.getItem(d);if(this.$_isRow(_,!1)){var p=void 0;for(p=l?t.getItem(d).getData(e):(this._runtime.setItem(_,e),this._exprNode.evaluate(this._runtime)),d--;0<=d&&(_=t.getItem(d),this.$_isRow(_,!1))&&(h=l?_.getData(e):(this._runtime.setItem(_,e),this._exprNode.evaluate(this._runtime)),!(d==a||null==h&&r||(h instanceof Date&&p instanceof Date?+h!=+p:h!=p)));)d--;for(var f=u-1;d<f;f--)n[f]=d+2;d<u-1&&(c=d+1)}else{n[d]=d+1;for(f=u-1;d<f;f--)n[f]=d+2;for(d+1<u-1&&(c=d+2),d--;0<=d&&n[d]<=0&&!this.$_isRow(t.getItem(d),!1);)n[d]=d+1,d--}}for(d=Math.max(0,i);d<=o&&0<n[d];)d++;for(;d<=o&&!this.$_isRow(t.getItem(d),!1);)n[d]=d+1,d++;if(d<o){u=d,_=t.getItem(d),p=void 0;for(p=l?_.getData(e):(this._runtime.setItem(_,e),this._exprNode.evaluate(this._runtime)),d++;d<s;)if(_=t.getItem(d),this.$_isRow(_,!1)){if(h=l?_.getData(e):(this._runtime.setItem(_,e),this._exprNode.evaluate(this._runtime)),d==a||void 0===h&&r||(h instanceof Date&&p instanceof Date?+h!=+p:h!=p)){var g=u;0<=c&&(g=c,c=-1);for(f=u;f<d;f++)n[f]=g+1;if(o<=d)break;p=h,u=d}else n[d]=u+1;d++}else{g=u;0<=c&&(g=c,c=-1);for(f=u;f<d;f++)n[f]=g+1;for(n[d]=d+1,d++;d<s&&!this.$_isRow(t.getItem(d),!1);)n[d]=d+1,d++;if(o<=(u=d))break}if(d==s&&(h instanceof Date&&p instanceof Date?+h==+p:h==p))for(g=0<=c?c:u,f=u;f<d;f++)n[f]=g+1}}},u.prototype.$_isRow=function(t,e){var i=t instanceof rt.GridRow&&!(t instanceof A.DummyEditItem);return i=i&&!e?(e=t.parent).expanded||e.firstItem!==t:i},u.$_runtime=null,u);function u(t){var e=d.call(this)||this;return e._runtime=u.$_runtime=u.$_runtime||new l,e.criteria=t,e}e.ColumnMergeRule=o;c=se.Base,ne.__extends(_,c),_dp(_,"head",{get:function(){return-1}}),_dp(_,"tail",{get:function(){return-1}});var c,o=_;function _(){return c.call(this)||this}e.GridMergeRoom=o;p=o,ne.__extends(f,p),f.borrow=function(t){var e=f.$_rooms.pop();return e?(e._head=t.top,e._tail=t.bottom):e=new f(t),e},f.returnTo=function(t){var e;t&&(e=f.$_rooms).indexOf(t)<0&&e.push(t)},_dp(f,"column",{get:function(){return this._column}}),_dp(f,"head",{get:function(){return this._head}}),_dp(f,"tail",{get:function(){return this._tail}}),_dp(f,"scope",{get:function(){return this._column}}),_dp(f,"group",{get:function(){return this._group},set:function(t){this._group=t}}),f.prototype.getHead=function(t){return t?t.set(this._head,this._column):t=this._column.grid.getIndex(this._head,this._column),t},f.prototype.getTail=function(t){return t?t.set(this._tail,this._column):t=this._column.grid.getIndex(this._tail,this._column),t},f.prototype.isHead=function(t){return t.column==this._column&&t.itemIndex==this._head},f.prototype.isTail=function(t){return t.column==this._column&&t.itemIndex==this._tail},f.prototype.contains=function(t){return t.column==this._column&&t.itemIndex>=this._head&&t.itemIndex<=this._tail},f.$_rooms=new Array,f.$_roomCount=0;var p,y=f;function f(t){var e=p.call(this)||this;return e._group=null,e._column=t.c1._columnObj,e._head=t.top,e._tail=t.bottom,e}e.ColumnMergeRoom=y;var v,C=65535,o=(v=se.Base,ne.__extends(w,v),w.prototype._doDispose=function(){this._layout=null,this._rooms=this._fixedRooms=null,v.prototype._doDispose.call(this)},_dp(w,"count",{get:function(){return this._rooms.length}}),w.prototype.clear=function(){this._flags=null,this._rooms=[],this._inited=!1},w.prototype.initialize=function(t){if(!this._inited){var e=this._layout.grid,i=e.rowGroup,o=e.itemSource,n=this._layout.firstColumn,r=e.getGroupLevel(n.dataIndex),r=e.isGroupedColumn(n)&&n.mergeGrouped?g.getDefault(r,i.mergeMode):this._layout.$_mergeRuleObj();if(r){for(var s=this._flags=new Array(o.itemCount),i=e.fixedOptions.mergeRows?0:o.fixedCount,a=o.itemCount;a--;)s[a]=0;r._layout=this._layout,r.parseInit(o,n.dataIndex,i,t,s)}this._inited=!0}},w.prototype.refreshRooms=function(t,e,i){if(this._nextId=0,this._inited&&this._flags&&!(e<t)){var o=this._layout.grid,n=this._layout.firstColumn;if(o&&n){var r,s,a=this._rooms,l=o.layoutManager.fixedItemCount,h=o.itemSource,d=o.getGroupLevel(n.dataIndex),u=0<d&&n.mergeGrouped?g.getDefault(d,o.rowGroup.mergeMode):this._layout.$_mergeRuleObj(),c=o.displayOptions.editItemMerging,_=0;if(this._fixedRooms.length=0,this._rooms.length=0,u&&(u._layout=this._layout,u.parseBounds(h,n.dataIndex,t,e,this._flags)),i)for(;_<l;)(r=this.$_checkFixedMerge(h,n,_,l))?(d<1&&(p=new y(r),this._fixedRooms.push(p)),_=r.r2+1):_+=1;for(_=t;_<=e;)if(r=this.$_checkMerge(h,n,_,0==a.length,l)){if(d<1)(s=h.getItem(r.r2))instanceof q.MergedGroupHeader||s instanceof q.MergedGroupFooter||(p=new y(r),this._rooms.push(p));else if((s=(c?h.source:h).getItem(r.top)).level>=d){for(var p,f=s instanceof rt.GroupItem?s:s.parent;f.level>d;)f=f.parent;(p=new y(r)).group=f,a.push(p)}_=r.r2+1}else _+=1}}},w.prototype.getFixedRooms=function(){return this._fixedRooms.slice()},w.prototype.getRooms=function(){return this._rooms.slice()},w.prototype.scroll=function(t){},w.prototype.getRoom=function(t){for(var e=t.rowFixed?this._fixedRooms:this._rooms,i=e.length-1;0<=i;i--)if(e[i].contains(t))return e[i];return null},w.prototype.prepareCells=function(t,e){if(0<t){for(var i=this._fixedCells,o=0;o<i.length;o++)i[o]=-1;for(;i.length<t;)i.push(-1)}for(var n=this._cells,o=0;o<n.length;o++)n[o]=-1;for(;n.length<e;)n.push(-1)},w.prototype.refreshCells=function(t,e){for(var i=this.getFixedRooms(),o=i.length-1;0<=o;o--){var n=i[o];this.addFixedCells(n.head,n.tail-n.head+1)}for(o=(i=this.getRooms()).length-1;0<=o;o--){var n=i[o],r=Math.max(0,n.head-e-t),s=n.tail-e-t;this.addCells(r,s-r+1)}},w.prototype.addFixedCells=function(t,e){for(var i=this._fixedCells,o=this._nextId++,n=t+1;n<t+e;n++)i[n]=o+C;return i[t]=o},w.prototype.addCells=function(t,e){for(var i=this._cells,o=this._nextId++,n=t+1;n<t+e;n++)i[n]=o+C;return i[t]=o},w.prototype.isMerged=function(t,e){return t<e?-1<this._fixedCells[t]:-1<this._cells[t-e]},w.prototype.isMergeRoot=function(t,e){return t<e?-1<this._fixedCells[t]&&this._fixedCells[t]<C:-1<this._cells[t-=e]&&this._cells[t]<C},w.prototype.isHidden=function(t,e){return t<e?this._fixedCells[t]>=C:this._cells[t-e]>=C},w.prototype.getMerged=function(t,e){var i=1;if(t<e)for(var o=(r=this._fixedCells)[t],n=t+1;n<r.length&&r[n]-C==o;n++,i++);else for(var r,o=(r=this._cells)[t-=e],n=t+1;n<r.length&&r[n]-C==o;n++,i++);return i},w.prototype.getMerged2=function(t,e,i,o){for(var n=this._cells,r=n[i],s=t.itemSource,a=s.getItem(e++).isData?o:1,l=i+1;l<n.length&&n[l]-C==r;l++)a+=s.getItem(e++).isData?o:1;return a},w.prototype.$_checkFixedMerge=function(t,e,i,o){if(0<o){var n=e.grid,r=n.displayOptions,s=e.mergeEdit&&n.editOptions.commitByCell||r.editItemMerging,a=i,l=this._flags[a],n=t.getItem(a);if(l<=0||rt.ItemState_isEditing(n.itemState)&&!s)return null;for(;a&&!(this._flags[a-1]<l||rt.ItemState_isEditing(t.getItem(a-1).itemState));)a--;for(var h=i+1;h<=o;){var d=rt.ItemState_isEditing(t.getItem(h).itemState);if(h==o||this._flags[h]>l||d&&!s)return a+1<h||d?_t.CellRange.createRange(a,e.layout,h-1,e.layout):null;h++}}return null},w.prototype.$_checkMerge=function(t,e,i,o,n){if(0<=i){var r=e.grid,s=r.displayOptions,a=e.mergeEdit&&r.editOptions.commitByCell&&r.isEditing()&&r.isItemEditing()||s.editItemMerging,l=i,h=this._flags[l],d=t.getItem(l);if(h<=0||rt.ItemState_isEditing(d.itemState)&&!a)return null;if(o)for(;n<l&&!(this._flags[l-1]<h||rt.ItemState_isEditing(t.getItem(l-1).itemState));)l--;for(var u=t.itemCount,c=i+1;c<u;){var _,p=rt.ItemState_isEditing(t.getItem(c).itemState);if(this._flags[c]>h||this._flags[c]<=0||p&&!a)return l+1<c||(_=e instanceof lt.DataColumn?e.groupLevel:-1,(d=t.getItem(l))instanceof q.MergedGroupHeader&&d.collapsed)||d instanceof q.MergedGroupFooter&&d.parent.level==_&&(c==i+1||d.parent.collapsed)||(d instanceof q.MergedGroupHeader||d instanceof q.MergedGroupFooter)&&d.parent.level>_?_t.CellRange.createRange(l,e.layout,c-1,e.layout):null;c++}if(l<c)return l+1<c||(_=e instanceof lt.DataColumn?e.groupLevel:-1,(d=t.getItem(l))instanceof q.MergedGroupHeader&&d.collapsed)||d instanceof q.MergedGroupFooter&&d.parent.level==_&&(c==i+1||d.parent.collapsed)||(d instanceof q.MergedGroupHeader||d instanceof q.MergedGroupFooter)&&d.parent.level>_?_t.CellRange.createRange(l,e.layout,c-1,e.layout):null}return null},w.MERGE_ROOMS="mergeRooms",w);function w(t){var e=v.call(this)||this;return e._flags=null,e._fixedRooms=[],e._rooms=[],e._inited=!1,e._fixedCells=[],e._cells=[],e._nextId=0,(e._layout=t)._merges=e}e.ColumnMergeManager=o})),lt=(t(Kt),Kt.GridMergeRule,Kt.RowGroupMergeRule,Kt.ColumnMergeRule,Kt.GridMergeRoom,Kt.ColumnMergeRoom,Kt.ColumnMergeManager,e(function(V,t){Object.defineProperty(t,"__esModule",{value:!0});i=$t.GridObject,ne.__extends(o,i),o.prototype._doDispose=function(){this._column=null,this._template=null,i.prototype._doDispose.call(this)},_dp(o,"column",{get:function(){return this._column}}),_dp(o,"template",{get:function(){return this._template&&this._template.template},set:function(t){t!=this.template&&(t?(this.template||(this._template=new Wt.HtmlTemplateParser),this._template.template=t):this._template=void 0,this._changed())}}),_dp(o,"values",{get:function(){return this._values},set:function(t){t!==this._values&&(t?re.Utils.extendObj(t,this._values={}):this._values=void 0,this._changed())}}),_dp(o,"popupMenu",{get:function(){return this._popupMenu},set:function(t){t!=this._popupMenu&&(this._popupMenu=t,this._popupMenuName="string"==typeof t?t:null)}}),_dp(o,"popupMenuName",{get:function(){var t;return this._popupMenuName||(this._popupMenu?(this._popupMenuName="$$_column_popup_menu"+this.$_hash,(t=this.column.grid)&&t.addPopupMenu(this._popupMenuName,this._popupMenu,!0),t&&this._popupMenuName):null)},set:function(t){null!=t&&"string"!=typeof t||(this._popupMenuName=t,this._changed())}}),o.prototype.getValue=function(t){return this._values&&this._values[t]},o.prototype.setValue=function(t,e){this._values||(this._values={}),this._values[t]!=e&&(this._values[t]=e,this._changed())};var i,e=o;function o(t){var e=i.call(this,null)||this;return e._column=t,e}function n(){}t.ColumnObject=e,n.prototype.clear=function(){return this.styleName=this.exportStyleName=this.textFormat=this.datetimeFormat=this.numberFormat=this.booleanFormat=this.prefix=this.suffix=void 0,this},n.prototype.assign=function(t){if("string"==typeof t)this.styleName=t;else if(t)for(var e=0,i=Object.keys(t);e<i.length;e++){var o=i[e];this[o]=re.Utils.deepCopy(t[o])}return this},t.ColumnSummaryStyle=n;r=e,ne.__extends(a,r),a.prototype._doDispose=function(){r.prototype._doDispose.call(this)},_dp(a,"summaryIndex",{get:function(){var t=this.$_owner;return t?t.getIndex(this):-1}}),_dp(a,"index",{get:function(){return this.summaryIndex}}),_dp(a,"valueCallback",{get:function(){return this._valueCallback},set:function(t){t!==this._valueCallback&&(this._valueCallback=t,this._changed())}}),_dp(a,"text",{get:function(){return this._text},set:function(t){t!=this._text&&(this._text=t,this._changed())}}),_dp(a,"expression",{get:function(){return this._expression},set:function(t){(t=t&&t.trim())!=this._expression&&(this._expression=t,this._exprNode=t?$.ExpressionParser.Default.parse(t):void 0,this._changed())}}),_dp(a,"styleName",{get:function(){return this._styleName},set:function(t){t!=this._styleName&&(this._styleName=t,this._changed())}}),_dp(a,"exportStyleName",{get:function(){return this._exportStyleName},set:function(t){this._exportStyleName=t}}),_dp(a,"styleCallback",{get:function(){return this._styleCallback},set:function(t){t!=this._styleCallback&&(this._styleCallback=t,this._changed())}}),_dp(a,"templateCallback",{get:function(){return this._templateCallback},set:function(t){this._templateCallback=t,this._changed()}}),_dp(a,"numberFormat",{get:function(){return this._numberFormat},set:function(t){t!=this._numberFormat&&(this._numberFormat=t,this._numberFormatter=t?Y.DecimalFormatter.getFormatter(t):null,this._changed())}}),_dp(a,"datetimeFormat",{get:function(){return this._datetimeFormat},set:function(t){t!=this._datetimeFormat&&(this._datetimeFormat=t,this._datetimeWriter=t?z.DateTimeWriter.getFormatter(t):null,this._changed())}}),_dp(a,"booleanFormat",{get:function(){return this._booleanFormat},set:function(t){t!=this._booleanFormat&&(this._booleanFormat=t,this._boolFormatter=t?K.BooleanFormatter.getFormatter(t):null,this._changed())}}),_dp(a,"textFormat",{get:function(){return this._textFormat},set:function(t){t!=this._textFormat&&(this._textFormat=t,this._textFormatter=t?Xt.TextFormatter.getFormatter(t):null,this._changed())}}),_dp(a,"prefix",{get:function(){return this._prefix},set:function(t){t!=this._prefix&&(this._prefix=t,this._changed())}}),_dp(a,"suffix",{get:function(){return this._suffix},set:function(t){t!=this._suffix&&(this._suffix=t,this._changed())}}),_dp(a,"textFormatter",{get:function(){return this._textFormatter}}),_dp(a,"numberFormatter",{get:function(){return this._numberFormatter}}),_dp(a,"datetimeWriter",{get:function(){return this._datetimeWriter}}),_dp(a,"boolFormatter",{get:function(){return this._boolFormatter}}),a.prototype.evaluate=function(t,e){if(this._exprNode)return this._exprNode.evaluate(t)},a.prototype.realizeSummary=function(t,e){var i=this._template;if(i)return i.realizeSummary(this,t,e,this._templateCallback)},a.prototype.realizeGroupSummary=function(t,e){var i=this._template;if(i)return i.realizeGroupSummary(this,t,e,this._templateCallback)},a.prototype.doAssignSimple=function(t){return"string"==typeof t&&(this.expression=t,!0)},a.prototype._doChanged=function(){};var r,s=a;function a(t){return r.call(this,t)||this}t.ColumnSummary=s;l=se.Base,ne.__extends(d,l),d.prototype._doDispose=function(){this._column=null,this._items&&this._items.forEach(function(t){t.dispose()}),this._items=null,l.prototype._doDispose.call(this)},_dp(d,"column",{get:function(){return this._column}}),_dp(d,"count",{get:function(){return this._items.length}}),_dp(d,"type",{get:function(){return this._type}}),d.prototype.get=function(t){return 0<=t&&t<this.column.grid.getSummaryCount(this._type)&&!this._items[t]&&(this._items[t]=this.$_createSummary()),this._items[t]},d.prototype.getIndex=function(t){return this._items.indexOf(t)},d.prototype.assignFrom=function(t){var e=t&&t.items?re.Utils.makeArray(t.items,!0):re.Utils.makeArray(t,!0),i=this._items;if(re.Utils.isArray(e)){for(var o=Math.max(e.length,1),n=0;n<o;n++)i[n]||(i[n]=this.$_createSummary()),i[n].assignFrom(e[n]);this._items.length=o}};var l,h=d;function d(t,e){var i=l.call(this)||this;return i._items=[],i._column=t,i._type=e,i._items.push(i.$_createSummary()),i}u=s,ne.__extends(_,u),_.prototype._doChanged=function(){this.column._headerSummaryChanged()};var u,c=_;function _(t){var e=u.call(this,t.column)||this;return e.$_owner=t,e}t.ColumnHeaderSummary=c;p=h,ne.__extends(g,p),g.prototype.$_createSummary=function(){return new c(this)};var p,f=g;function g(t,e){return p.call(this,t,e)||this}t.ColumnHeaderSummaryCollection=f;m=e,ne.__extends(v,m),v.prototype._doDispose=function(){m.prototype._doDispose.call(this)},_dp(v,"text",{get:function(){return this._text},set:function(t){t!=this._text&&(this._text=t,this._changed())}}),_dp(v,"itemOffset",{get:function(){return this._itemOffset},set:function(t){t!=this._itemOffset&&(this._itemOffset=t,this._changed())}}),_dp(v,"itemGap",{get:function(){return this._itemGap},set:function(t){t!=this._itemGap&&(this._itemGap=t,this._changed())}}),_dp(v,"checkLocation",{get:function(){return this._checkLocation},set:function(t){t!=this._checkLocation&&(this._checkLocation=t,this._changed())}}),_dp(v,"showTooltip",{get:function(){return this._showTooltip},set:function(t){t!=this._showTooltip&&(this._showTooltip=t,this._changed())}}),_dp(v,"tooltip",{get:function(){return this._tooltip},set:function(t){t!=this._tooltip&&(this._tooltip=t,this._changed())}}),_dp(v,"edgeMark",{get:function(){return this._edgeMark},set:function(t){t!==this._edgeMark&&(this._edgeMark=t,this._changed())}}),_dp(v,"displayText",{get:function(){var t,e=this.column,i=this._text;return i=(i=!i&&e instanceof N?(t=e.getField())?t.header||t.orgFieldName:e.fieldName:i)||e.name}}),_dp(v,"styleName",{get:function(){return this._styleName},set:function(t){this._styleName!==t&&(this._styleName=t,this._changed())}}),_dp(v,"exportStyleName",{get:function(){return this._exportStyleName},set:function(t){t!=this._exportStyleName&&(this._exportStyleName=t)}}),_dp(v,"templateCallback",{get:function(){return this._templateCallback},set:function(t){this._templateCallback=t,this._changed()}}),v.prototype.realizeTemplate=function(){var t=this._template;if(t)return t.realizeHeader(this,this.templateCallback,this.column.grid)},v.prototype._doChanged=function(){this.column&&this.column._headerChanged()},v.prototype.doAssignSimple=function(t){return"string"==typeof t&&(this.text=t,!0)};var m,y=v;function v(t){t=m.call(this,t)||this;return t._checkLocation=ht.ColumnHeaderItemLocation.NONE,t}t.ColumnHeader=y;C=s,ne.__extends(w,C),w.prototype._doChanged=function(){this.column._footerChanged()};var C,B=w;function w(t){var e=C.call(this,t.column)||this;return e.$_owner=t,e}t.ColumnFooter=B;x=h,ne.__extends(I,x),I.prototype.$_createSummary=function(){return new B(this)};var x,b=I;function I(t,e){return x.call(this,t,e)||this}function E(){}t.ColumnFooterCollection=b,E.prototype.clear=function(){return this.styleName=this.exportStyleName=this.renderer=this.editable=this.editor=this.readOnly=this.textFormat=this.datetimeFormat=this.numberFormat=this.booleanFormat=this.prefix=this.suffix=this.edgeMark=this.style=this.excelFormat=this.cellProtectProps=void 0,this},E.prototype.assign=function(t){if("string"==typeof t)this.styleName=t;else if(t)if(t instanceof R)for(var e=0,i=Object.keys(this);e<i.length;e++)(o=i[e])in t&&(this[o]=re.Utils.deepCopy(t[o]));else for(var o,n=0,r=Object.keys(t);n<r.length;n++)"readonly"===(o=r[n]).toLowerCase()?this.readOnly=t[o]:this.hasOwnProperty(o)&&(this[o]=re.Utils.deepCopy(t[o]));return this},E.prototype.toFormatter=function(t){var e;return t=t||{textFormatter:void 0,numberFormatter:void 0,datetimeWriter:void 0,booleanFormatter:void 0,prefix:void 0,suffix:void 0},!(e=this.textFormat)||t.textFormatter&&t.textFormatter.format==e||(t.textFormatter=Xt.TextFormatter.getFormatter(e)),!(e=this.numberFormat)||t.numberFormatter&&t.numberFormatter.format==e||(t.numberFormatter=Y.DecimalFormatter.getFormatter(e)),!(e=this.datetimeFormat)||t.datetimeWriter&&t.datetimeWriter.format==e||(t.datetimeWriter=z.DateTimeWriter.getFormatter(e)),!(e=this.booleanFormat)||t.booleanFormatter&&t.booleanFormatter.format==e||(t.booleanFormatter=K.BooleanFormatter.getFormatter(e)),!(e=this.prefix)||t.prefix&&t.prefix==e||(t.prefix=e),!(e=this.suffix)||t.suffix&&t.suffix==e||(t.suffix=e),t},t.ColumnStyle=E;S=se.Base,ne.__extends(T,S),T.prototype._doDispose=function(){this._layout=null,this.$_owner=null,this._header=this._header&&this._header.dispose(),this._footers=this._footers&&this._footers.dispose(),this._headerSummaries=this._headerSummaries&&this._headerSummaries.dispose(),this._groupFooters=this._groupFooters&&this._groupFooters.dispose(),S.prototype._doDispose.call(this)},_dp(T,"name",{get:function(){return this._name},set:function(t){t!=this._name&&(this._name=t,this._changed())}}),T.prototype._layoutChanged=function(){this._changed(),this._layout&&this._layout._changed()},_dp(T,"visible",{get:function(){return this._visible},set:function(t){t!=this._visible&&(this._visible=t,this._layout&&this._layoutChanged(),this._propChanged("visible",this._visible,!this._visible))}}),_dp(T,"width",{get:function(){return(null==this._width||isNaN(this._width))&&this.grid?this._width=this.grid.displayOptions.defaultColumnWidth:this._width},set:function(t){var e;t=Math.max(0,t),isNaN(t)||t==this._width||(e=this._width,this._width=t,this._layoutChanged(),this._propChanged("width",this._width,e))}}),_dp(T,"fillWidth",{get:function(){return this._fillWidth},set:function(t){t=Math.max(0,t),isNaN(t)||t==this._fillWidth||(this._fillWidth=t,this._layoutChanged())}}),_dp(T,"resizable",{get:function(){return this._resizable},set:function(t){t!=this._resizable&&(this._resizable=t,this._changed())}}),_dp(T,"movable",{get:function(){return this._movable},set:function(t){t!=this._movable&&(this._movable=t,this._changed())}}),_dp(T,"checked",{get:function(){return this._checked},set:function(t){t!=this._checked&&(this._checked=t,this._changed())}}),_dp(T,"header",{get:function(){return this._header}}),T.prototype.setHeader=function(t){this._header.assignFrom(t)},_dp(T,"footers",{get:function(){return this._footers}}),T.prototype.setFooters=function(t){this._footers.assignFrom(t),this._changed()},_dp(T,"footer",{get:function(){return this._footers.get(0)}}),T.prototype.setFooter=function(t){this.setFooters(t)},_dp(T,"headerSummaries",{get:function(){return this._headerSummaries}}),T.prototype.setHeaderSummaries=function(t){this._headerSummaries.assignFrom(t),this._changed()},_dp(T,"headerSummary",{get:function(){return this._headerSummaries.get(0)}}),T.prototype.setHeaderSummary=function(t){this.setHeaderSummaries(t)},_dp(T,"groupFooters",{get:function(){return this._groupFooters}}),T.prototype.setGroupFooters=function(t){this._groupFooters.assignFrom(t),this._changed()},_dp(T,"groupFooter",{get:function(){return this._groupFooters.get(0)}}),T.prototype.setGroupFooter=function(t){this.setGroupFooters(t)},_dp(T,"grid",{get:function(){return this._layout?this._layout.grid:this.$_owner?this.$_owner.owner:void 0}}),_dp(T,"tag",{get:function(){return this._tag},set:function(t){this._tag=t}}),_dp(T,"index",{get:function(){return this._index}}),_dp(T,"displayText",{get:function(){return this._header.text||this._name||"col_"+this._index}}),_dp(T,"displayWidth",{get:function(){return this._layout?this._layout.domWidth:this._width}}),_dp(T,"displayIndex",{get:function(){return this._layout?this._layout.vindex:-1}}),_dp(T,"dataRoot",{get:function(){return this}}),_dp(T,"layout",{get:function(){return this._layout}}),T.prototype.clean=function(){this._dirty=!1},T.prototype.isWritable=function(){return!1},T.prototype.stateFor=function(t){return this._states[t]},T.prototype.setState=function(t,e){this._states[t]=e},T.prototype.getFooter=function(t){return this._footers.get(t)},T.prototype.getHeaderSummary=function(t){return this._headerSummaries.get(t)},T.prototype.assignFrom=function(t){S.prototype.assignFrom.call(this,t),this._header.assignFrom(t.header),this._footers.assignFrom(t.footers||t.footer),this._headerSummaries.assignFrom(t.summaries||t.summary||t.headerSummaries||t.headerSummary),this._groupFooters.assignFrom(t.groupFooters||t.groupFooter)},T.prototype.toString=function(){return this.displayText},T.prototype._prepareLayout=function(t,e){},T.prototype._changed=function(){var t;!this._dirty&&(this._dirty=!0,t=this.grid)&&t.invalidateColumn(this)},T.prototype._propChanged=function(t,e,i){var o=this.grid;o&&o._fireColumnPropertyChanged(this,t,e,i)},T.prototype.$_setIndex=function(t){this._index=t},T.prototype._headerChanged=function(){this._changed()},T.prototype._headerSummaryChanged=function(){this._changed()},T.prototype._footerChanged=function(){this._changed()},T.prototype._resetIndices=function(t){},T.prototype.$_layoutIndexChanged=function(t,e){this._propChanged("displayIndex",e,t)},T.prototype.$_layoutWidthChanged=function(t,e){this._propChanged("displayWidth",e,t)};var S,R=T;function T(t){var e=S.call(this)||this;return e._visible=!0,e._resizable=!0,e._movable=!0,e._checked=!1,e._fillWidth=NaN,e._dirty=!1,e._index=-1,e._states={},e._header=new y(e),e._footers=new b(e,"footer"),e._headerSummaries=new f(e,"summary"),e._groupFooters=new b(e,"groupFooter"),t&&e.assignFrom(t),e}t.GridColumn=R;D=R,ne.__extends(k,D),k.prototype._doDispose=function(){this._popupMenu=null,this._popupMenuName=null,D.prototype._doDispose.call(this)},_dp(k,"numberFormat",{get:function(){return this._numberFormat},set:function(t){t!==this._numberFormat&&(this._numberFormat=t,this._numberFormatter=t?Y.DecimalFormatter.getFormatter(t):null,this._changed())}}),_dp(k,"displayMinusZero",{get:function(){return this._displayMinusZero},set:function(t){this._displayMinusZero!=t&&(this._displayMinusZero=t,this._changed())}}),_dp(k,"datetimeFormat",{get:function(){return this._datetimeFormat},set:function(t){t!==this._datetimeFormat&&(this._datetimeFormat=t,this._datetimeWriter=t?z.DateTimeWriter.getFormatter(t):null,this._changed())}}),_dp(k,"booleanFormat",{get:function(){return this._booleanFormat},set:function(t){t!==this._booleanFormat&&(this._booleanFormat=t,this._boolFormatter=t?K.BooleanFormatter.getFormatter(t):null,this._changed())}}),_dp(k,"textFormat",{get:function(){return this._textFormat},set:function(t){t!==this._textFormat&&(this._textFormat=t,this._textFormatter=t?Xt.TextFormatter.getFormatter(t):null,this._changed())}}),_dp(k,"prefix",{get:function(){return this._prefix},set:function(t){t!=this._prefix&&(this._prefix=t,this._changed())}}),_dp(k,"suffix",{get:function(){return this._suffix},set:function(t){t!=this._suffix&&(this._suffix=t,this._changed())}}),_dp(k,"blankWhenCopy",{get:function(){return this._blankWhenCopy},set:function(t){t!=this._blankWhenCopy&&(this._blankWhenCopy=t,this._changed())}}),_dp(k,"blankWhenExport",{get:function(){return this._blankWhenExport},set:function(t){t!=this._blankWhenExport&&(this._blankWhenExport=t,this._changed())}}),_dp(k,"ignoreDefaultDynamicStyles",{get:function(){return this._ignoreDefaultDynamicStyles},set:function(t){t!=this._ignoreDefaultDynamicStyles&&(this._ignoreDefaultDynamicStyles=t,this._changed())}}),_dp(k,"textInputCase",{get:function(){return this._textInputCase},set:function(t){t!=this._textInputCase&&(this._textInputCase=t,this._changed())}}),_dp(k,"styleName",{get:function(){return this._styleName},set:function(t){t!=this._styleName&&(this._styleName=t,this._changed())}}),_dp(k,"exportStyleName",{get:function(){return this._exportStyleName},set:function(t){t!=this._exportStyleName&&(this._exportStyleName=t)}}),_dp(k,"styleCallback",{get:function(){return this._styleCallback},set:function(t){t!=this._styleCallback&&(this._styleCallback=t,this._changed())}}),_dp(k,"renderer",{get:function(){return this._renderer},set:function(t){this._renderer=t,this.grid&&this._layout&&this.grid.$_rendererChanged(this._layout),this._changed()}}),_dp(k,"editor",{get:function(){return this._editor},set:function(t){this._editor=t,this._changed()}}),_dp(k,"button",{get:function(){return this._button},set:function(t){t!=this._button&&(this._button=t,this._changed())}}),_dp(k,"buttonVisibility",{get:function(){return this._buttonVisibility},set:function(t){t!=this._buttonVisibility&&(this._buttonVisibility=t,this._changed())}}),_dp(k,"buttonVisibleCallback",{get:function(){return this._buttonVisibleCallback},set:function(t){this._buttonVisibleCallback=t,this._changed()}}),_dp(k,"editButtonVisibility",{get:function(){return this._editButtonVisibility},set:function(t){t!=this._editButtonVisibility&&(this._editButtonVisibility=t,this._changed())}}),_dp(k,"textFormatter",{get:function(){return this._textFormatter}}),_dp(k,"numberFormatter",{get:function(){return this._numberFormatter}}),_dp(k,"datetimeWriter",{get:function(){return this._datetimeWriter}}),_dp(k,"boolFormatter",{get:function(){return this._boolFormatter}}),_dp(k,"popupMenu",{get:function(){return this._popupMenu},set:function(t){t!=this._popupMenu&&(this._popupMenu=t,this._popupMenuName="string"==typeof t?t:null)}}),_dp(k,"popupMenuName",{get:function(){return this._popupMenuName||(this._popupMenu?(this._popupMenuName="$$_column_popup_menu"+this.$_hash,this.grid.addPopupMenu(this._popupMenuName,this._popupMenu,!0),this.grid&&this._popupMenuName):null)},set:function(t){null!=t&&"string"!=typeof t||(this._popupMenuName=t,this._changed())}}),_dp(k,"edgeMark",{get:function(){return this._edgeMark},set:function(t){t!==this._edgeMark&&(this._edgeMark=t,this._changed())}}),k.prototype.getCellStyle=function(t){return this._styleCallback&&this._styleCallback(this.grid.handler,t)},k.prototype.affix=function(t){return this._prefix&&(t=this._prefix+t),this._suffix&&(t+=this._suffix),t},k.prototype._prepareLayout=function(t,e){D.prototype._prepareLayout.call(this,t,e)};var D,e=k;function k(t){t=D.call(this,t)||this;return t._blankWhenCopy=!1,t._blankWhenExport=!1,t._ignoreDefaultDynamicStyles=!1,t._textInputCase=ht.TextInputCase.NORMAL,t._button=ht.CellButton.NONE,t._buttonVisibility=ht.ButtonVisibility.DEFAULT,t._editButtonVisibility=ht.ButtonVisibility.DEFAULT,t._displayMinusZero=!0,t}t.ValueColumn=e;M=e,ne.__extends(F,M),F.prototype._doDispose=function(){this._mergeRuleObj=this._mergeRuleObj&&this._mergeRuleObj.dispose(),this._filters=this._filters&&this._filters.dispose(),this._autoFilters=this._autoFilters&&this._autoFilters.dispose(),this._inlineFilters=this._inlineFilters&&this._inlineFilters.dispose(),this.validations=this._validations&&this._validations.dispose(),M.prototype._doDispose.call(this)},_dp(F,"fieldIndex",{get:function(){return this._fieldIndex},set:function(t){(t=Math.max(-1,t))!=this._fieldIndex&&(this._fieldIndex=t,this._changed())}}),_dp(F,"fieldName",{get:function(){return this._fieldName},set:function(t){t!=this._fieldName&&(this._fieldName=t,this._changed())}}),_dp(F,"editable",{get:function(){return this._editable},set:function(t){t!=this._editable&&(this._editable=t,this._changed())}}),_dp(F,"readOnly",{get:function(){return this._readOnly},set:function(t){t!=this._readOnly&&(this._readOnly=t,this._changed())}}),_dp(F,"nanText",{get:function(){return this._nanText},set:function(t){t!=this._nanText&&(this._nanText=t,this._changed())}}),_dp(F,"zeroText",{get:function(){return this._zeroText},set:function(t){t!=this._zeroText&&(this._zeroText=t,this._changed())}}),_dp(F,"defaultValue",{get:function(){return this._defaultValue},set:function(t){this._defaultValue=t}}),_dp(F,"valueSeparator",{get:function(){return this._valueSeparator},set:function(t){t!=this._valueSeparator&&(this._valueSeparator=t,this._changed())}}),_dp(F,"mergeRule",{get:function(){return this._mergeRule},set:function(t){t!=this._mergeRule&&(this._mergeRule=t,this._mergeRuleObj&&this._mergeRuleObj.dispose(),this._mergeRuleObj=t?Kt.ColumnMergeRule.createRule(t):null,t=this.grid)&&this.layout&&t._columnMergeRuleChanged(this.layout)}}),_dp(F,"breakMergeOnEmpty",{get:function(){return this._breakMergeOnEmpty},set:function(t){t!=this._breakMergeOnEmpty&&(this._breakMergeOnEmpty=t,t=this.grid)&&this.layout&&t._columnMergeRuleChanged(this.layout)}}),_dp(F,"equalBlank",{get:function(){return this._equalBlank},set:function(t){t!=this._equalBlank&&(this._equalBlank=t,this._layoutChanged())}}),_dp(F,"equalBlankExpression",{get:function(){return this._equalBlankExpression},set:function(t){t!=this._equalBlankExpression&&(this._equalBlankExpression=t,this._equalBlankNode=t?$.ExpressionParser.Default.parse(t,null):void 0,this._layoutChanged())}}),_dp(F,"equalBlankText",{get:function(){return this._equalBlankText},set:function(t){t!=this._equalBlankText&&(this._equalBlankText=t,this._layoutChanged())}}),_dp(F,"equalBlankLine",{get:function(){return this._equalBlankLine},set:function(t){t!=this._equalBlankLine&&(this._equalBlankLine=t,this._layoutChanged())}}),_dp(F,"mergeEdit",{get:function(){return!!this._mergeEdit},set:function(t){t!=this._mergeEdit&&(this._mergeEdit=t)}}),_dp(F,"excelFormat",{get:function(){return this._excelFormat},set:function(t){t!=this._excelFormat&&(this._excelFormat=t,this._changed())}}),_dp(F,"excelFormulaStatement",{get:function(){return this._excelFormulaStatement},set:function(t){t!=this._excelFormulaStatement&&((this._excelFormulaStatement=t)?this._excelFormulaExprStatement?this._excelFormulaExprStatement.source=t:this._excelFormulaExprStatement=new Nt.ExpressionStatement(t):this._excelFormulaExprStatement=null,this._changed())}}),_dp(F,"excelFormulaExprStatement",{get:function(){return this._excelFormulaExprStatement}}),_dp(F,"dataIndex",{get:function(){return this._dataIndex}}),_dp(F,"baseIndex",{get:function(){return this._baseIndex}}),_dp(F,"valueType",{get:function(){return this._valueType}}),_dp(F,"groupLevel",{get:function(){return this._groupLevel}}),_dp(F,"values",{get:function(){return this._values},set:function(t){t!=this._values&&(this._values=t?t.map(function(t,e){return null!=t?String(t):t}):[],this._lookupMap=null,this._changed())}}),_dp(F,"labels",{get:function(){return this._labels},set:function(t){t!=this._labels&&(this._labels=t&&t.slice(),this._lookupMap=null,this._changed())}}),_dp(F,"lookupDisplay",{get:function(){return this._lookupDisplay},set:function(t){this._lookupDisplay!=t&&(this._lookupDisplay=t,this._changed())}}),_dp(F,"lookupSource",{get:function(){return this._lookupSource}}),_dp(F,"lookupSourceId",{get:function(){return this._lookupSourceId},set:function(t){this._lookupSourceId!=t&&(this._lookupSourceId=t,this._changed(),this.grid)&&this.$_resetLookup(this.grid)}}),_dp(F,"lookupKeyFields",{get:function(){return this._lookupKeyFields},set:function(t){t!=this._lookupKeyFields&&(this._lookupKeyFields=re.Utils.makeArray(t,!0).slice(),this._changed(),this.grid)&&this.$_resetLookup(this.grid)}}),_dp(F,"lookupKeyFieldIds",{get:function(){return this._lookupKeyFieldIds}}),_dp(F,"labelField",{get:function(){return this._labelField},set:function(t){this._labelField!=t&&(this._labelField=t,this._changed())}}),_dp(F,"textOfInvalid",{get:function(){return this._textOfInvalid},set:function(t){this._textOfInvalid!=t&&(this._textOfInvalid=t,this._changed())}}),_dp(F,"placeHolder",{get:function(){return this._placeHolder},set:function(t){t!==this._placeHolder&&(this._placeHolder=t,this._changed())}}),_dp(F,"placeHolderStyleName",{get:function(){return this._placeHolderStyleName},set:function(t){t!==this._placeHolderStyleName&&(this._placeHolderStyleName=t,this._changed())}}),_dp(F,"labelFieldIndex",{get:function(){return this._labelFieldIndex}}),_dp(F,"displayCallback",{get:function(){return this._displayCallback},set:function(t){this._displayCallback=t,this._changed()}}),_dp(F,"mergeGrouped",{get:function(){return this._mergeGrouped}}),_dp(F,"sortable",{get:function(){return this._sortable},set:function(t){t!=this._sortable&&(this._sortable=t,this._changed())}}),_dp(F,"sortOrder",{get:function(){return this._sortOrder},set:function(t){this._sortOrder=t}}),_dp(F,"sortDirection",{get:function(){return this._sortDirection},set:function(t){this._sortDirection=t}}),_dp(F,"sortByLabel",{get:function(){return this._sortByLabel},set:function(t){this._sortByLabel!==t&&(this._sortByLabel=t,this._changed())}}),_dp(F,"filterable",{get:function(){return this._filterable},set:function(t){t!=this._filterable&&(this._filterable=t,this._changed())}}),_dp(F,"autoFilter",{get:function(){return this._autoFilter},set:function(t){t!==this._autoFilter&&(!(this._autoFilter=t)&&this._autoFilters&&0<this._autoFilters.count&&this._autoFilters.clear(),this._changed())}}),_dp(F,"filters",{get:function(){return this._filters},set:function(t){t instanceof H.ColumnFilterCollection||this.setFilters(t)}}),_dp(F,"autoFilters",{get:function(){return this._autoFilters}}),_dp(F,"showInlineFilter",{get:function(){return this._showInlineFilter},set:function(t){t!==this._showInlineFilter&&(this._showInlineFilter=t,this._changed())}}),_dp(F,"required",{get:function(){return this._required},set:function(t){t!=this._required&&(this._required=t,this._changed())}}),_dp(F,"requiredMessage",{get:function(){return this._requiredMessage},set:function(t){t!=this._requiredMessage&&(this._requiredMessage=t,this._changed())}}),_dp(F,"requiredLevel",{get:function(){return this._requiredLevel},set:function(t){t!=this._requiredLevel&&(this._requiredLevel=t,this._changed())}}),_dp(F,"validations",{get:function(){return this._validations},set:function(t){this._validations.assignFrom(t)}}),_dp(F,"groupable",{get:function(){return this._groupable},set:function(t){this._groupable!=t&&(this._groupable=t)}}),_dp(F,"objectKey",{get:function(){return this._objectKey},set:function(t){t!=this._objectKey&&(this._objectKey=t,this._changed())}}),_dp(F,"objectCallback",{get:function(){return this._objectCallback},set:function(t){this._objectCallback=t,this._changed()}}),_dp(F,"displayText",{get:function(){return this.header.text||this.fieldName||this.name||"col_"+this.index}}),_dp(F,"lookupData",{get:function(){return this._lookupData},set:function(t){if(t!==this._lookupData){var e,i,o={};if(this._lookupData=re.Utils.deepCopy(t),t){re.Utils.isArray(t)?o.list=t:o=t,this._labels=[],this._values=[],this._lookupMap=null;for(var n=o.hasOwnProperty("value")?o.value:"value",r=o.hasOwnProperty("label")?o.label:"label",s=0,a=o.list.length;s<a;s++)null!=(i=null!=(e=o.list[s])[n]?e[n]:e.code)&&this._values.push(null!=e[n]?e[n]:e.code),null!=i&&this._labels.push(null!=e[r]?e[r]:null!=e.text?e.text:i)}else this._labels=null,this._values=null,this._lookupMap=null;this._changed()}}}),_dp(F,"cellProtectProps",{get:function(){return this._cellProtectProps},set:function(t){this._cellProtectProps=t}}),F.prototype.getField=function(){var t=this._dataIndex;if(0<=t){var e=this.grid.dataSource;if(e)return e.getField(t)}return null},F.prototype.getLookupLabel=function(t){if(!this._lookupMap){var e=this._values,i=this._labels;if(e&&0<e.length){this._lookupMap={};for(var o=0;o<e.length;o++)i&&i.length>o?this._lookupMap[e[o]]=i[o]:this._lookupMap[e[o]]=e[o]}}var n;if("string"==typeof t&&t&&this._valueSeparator){for(var r=t.split(this._valueSeparator),s=[],o=0,a=r.length;o<a;o++)s.push(this._lookupMap&&this._lookupMap[r[o]]?this._lookupMap[r[o]]:r[o]);if(s.length<=0)return"";n=s.join(this._valueSeparator)}else n=this._lookupMap?this._lookupMap[t]:void 0;return n||(null!=this.textOfInvalid?this.textOfInvalid:t)},F.prototype.getLookupIndex=function(t){if(this._values&&0<this._values.length)for(var e=0,i=this._values.length;e<i;e++)if(this._values[e]==t)return e;return-1},F.prototype.getLookupIndices=function(t){var e=[];if(t&&this._values&&0<this._values.length)for(var i=re.Utils.isArray(t)?t:String(t).split(this._valueSeparator),o=0,n=i.length;o<n;o++)0<=this._values.indexOf(i[o])&&e.push(this._values.indexOf(i[o]));return e},F.prototype.getLookupValue=function(t){if(this._values&&0<this._values.length)return this._values[t]},F.prototype.getLookupValues=function(t){var e=[];if(this._values&&0<this._values.length)for(var i=0,o=t.length;i<o;i++)0<=t[i]&&t[i]<this._values.length&&e.push(this._values[t[i]]);return e},F.prototype.getSourceValue=function(t){var e=this._values,i=this._labels;if(i&&e){i=i.indexOf(t);if(0<=i&&e.length>i)return e[i];if(0<=(i=e.indexOf(t)))return e[i]}},F.prototype.getSourceValues=function(t){var e=this._values,i=this._labels;if(i&&e){for(var o,n=[],r=this._valueSeparator,s=0,a=(t=re.Utils.isArray(t)?t:r&&t?String(t).split(r):re.Utils.makeArray(t)).length;s<a;s++)0<=(o=i.indexOf(t[s]))&&e.length>o?n.push(e[o]):n.push(t[s]);if(0<n.length&&r)return n.join(r);if(0<n.length)return n.join()}},_dp(F,"$_filters",{get:function(){return this._autoFilter?this._autoFilters:this._filters}}),F.prototype.clearFilters=function(){this.setFilters(null)},F.prototype.addFilters=function(t,e){var i;!t||(i=this.grid)&&!i.canFiltering()||this._filters.addAll(re.Utils.makeArray(t),e)},F.prototype.removeFilters=function(t){var e;!t||(e=this.grid)&&!e.canFiltering()||this._filters.removeItems(re.Utils.makeArray(t))},F.prototype.activateFilters=function(t,e){var i;!t||(i=this.grid)&&!i.canFiltering()||this.$_filters.activateItems(re.Utils.makeArray(t),e)},F.prototype.activateAllFilters=function(t){var e=this.grid;e&&!e.canFiltering()||this.$_filters.activateAll(t)},F.prototype.hideColumnFilters=function(t,e){this.$_filters.hideFilters(re.Utils.makeArray(t),e)},F.prototype.hideAllColumnFilters=function(t){this.$_filters.hideAllFilters(t)},F.prototype.toggleFilters=function(t){var e;!t||(e=this.grid)&&!e.canFiltering()||this.$_filters.toggleItems(re.Utils.makeArray(t))},F.prototype.toggleAllFilters=function(){var t=this.grid;t&&!t.canFiltering()||this.$_filters.toggleAll()},F.prototype.getFilter=function(t){var e=this.$_filters,t=e.indexOf(t);return e.getItem(t)},F.prototype.getActiveFilters=function(t){return this.$_filters.getActiveItems(t)},_dp(F,"hasFilters",{get:function(){return this._autoFilter||0<this._filters.count}}),F.prototype.isFiltered=function(){return 0<this.$_filters.activeCount||0<this._inlineFilters.activeCount},F.prototype.setFilters=function(t){var e=this.grid;e&&!e.canFiltering()||this._filters.assignFrom(t)},F.prototype.autoFilterRefresh=function(t){var e=this.grid,i=null==e?void 0:e.dataSource;e&&i&&this._autoFilter&&(e=e.filterSelector._manager)&&e.buildItems(this,i,!0,t)},F.prototype.setInlineFilter=function(t,e){var i=this._inlineFilters,o=i.getItem(0);o||(i.add({name:"inlineFilter"},!1),o=i.getItem(0)),o.criteria!=t&&(void 0===t?(o.criteria=void 0,e?o.active=!1:o._active=!1):(o._active=!1,o.criteria=t,o.active=!!o.criteria))},F.prototype.onColumnFilterChanged=function(t,e){var i=this.grid;i&&i.columnFilterChanged(t,e)},F.prototype._prepareLayout=function(t,e){M.prototype._prepareLayout.call(this,t,e)},F.prototype._resetIndices=function(t){this._dataIndex=-1,this._baseIndex=-1;var e=t.dataSource;e&&(this._fieldName?this._dataIndex=e.getFieldIndex(this._fieldName):this._dataIndex=this._fieldIndex,0<=this._dataIndex&&(this._baseIndex=e.getBaseField(this._dataIndex),this._valueType=e.getValueType(this._dataIndex)),this._labelFieldIndex=e.getFieldIndex(this._labelField),this.$_resetLookup(t))},F.prototype.isWritable=function(){var t=this.grid.editOptions,t=t.columnEditableFirst?null!=this._editable?this._editable:t.editable:t.editable&&!1!==this._editable;return t&&!this._readOnly},F.prototype.assignFrom=function(t){M.prototype.assignFrom.call(this,t)},F.prototype.$_setMergeGrouped=function(t){this._mergeGrouped=t},F.prototype.$_setGroupLevel=function(t){this._groupLevel=t},F.prototype.$_resetLookup=function(t){if(this._lookupKeyFields&&0<this._lookupKeyFields.length&&this._lookupSourceId){for(var e=this._lookupKeyFields.length,i=this._lookupKeyFieldIds=new Array(e),o=0;o<e;o++)i[o]=t.dataSource.getFieldIndex(this._lookupKeyFields[o]);this._lookupSource=t.lookupProvider.getSource(this._lookupSourceId)}else this._lookupSource=null,this._lookupKeyFieldIds=[]},F.prototype._changed=function(){M.prototype._changed.call(this)},F.CAPITAL_INDEXERS=["value","values"];var M,N=F;function F(t){var e=M.call(this)||this;return e._fieldIndex=-1,e._readOnly=!1,e._valueSeparator=",",e._breakMergeOnEmpty=!1,e._equalBlank=!1,e._equalBlankText="",e._values=null,e._labels=null,e._lookupDisplay=!1,e._lookupSource=null,e._lookupKeyFields=null,e._lookupKeyFieldIds=null,e._mergeGrouped=!1,e._sortable=!0,e._sortOrder=-1,e._sortByLabel=!1,e._filterable=!0,e._autoFilter=!1,e._lookupData=null,e._required=!1,e._requiredLevel=ht.ValidationLevel.ERROR,e._validations=new G.EditValidationCollection(!0),e._groupable=!0,e._dataIndex=-1,e._baseIndex=-1,e._valueType=ht.ValueType.TEXT,e._groupLevel=-1,e._labelFieldIndex=-1,e._filters=new H.ColumnFilterCollection(e),e._filters.addListener(e),e._autoFilters=new H.ColumnFilterCollection(e),e._autoFilters.addListener(e),e._inlineFilters=new H.ColumnFilterCollection(e),e._inlineFilters.addListener(e),t&&e.assignFrom(t),e}t.DataColumn=N;L=e,ne.__extends(O,L),O.prototype._doDispose=function(){L.prototype._doDispose.call(this)},_dp(O,"fieldNames",{get:function(){return this._fieldNames},set:function(t){t!=this._fieldNames&&(this._fieldNames=t,this._fieldArray=t?t.split(","):[],this._changed())}}),_dp(O,"fields",{get:function(){return this._fields}}),O.prototype._resetIndices=function(t){this._fields=[];var e=t.dataSource;if(e)for(var i=0,o=this._fieldArray.length;i<o;i++){var n=this._fieldArray[i],r=n.split("..");if(1<r.length){var s=e.getFieldIndex(r[0]),r=e.getFieldIndex(r[1]);if(0<=s&&0<=r)for(var a=Math.min(s,r),l=Math.max(s,r),h=a;h<=l;h++)this._fields.push(h)}else 0<=(h=e.getFieldIndex(n))&&this._fields.push(h)}};var L,s=O;function O(t){var e=L.call(this)||this;return e._fieldArray=e._fieldArray||[],e._fields=e._fields||[],t&&e.assignFrom(t),e}function P(){this._layouts={}}t.SeriesColumn=s,P.prototype._doDispose=function(){this._layouts=null},P.prototype.find=function(t){return this._layouts[t]},P.prototype.clear=function(){this._layouts={}},P.prototype.load=function(t){if(t=re.Utils.makeArray(t),this._layouts={},t)for(var e=0,i=t.length;e<i;e++){var o=t[e];o.name&&!this._layouts[o.name]&&(this._layouts[o.name]=o.items)}},t.ColumnLayoutCollection=P})),Jt=(t(lt),lt.ColumnObject,lt.ColumnSummaryStyle,lt.ColumnSummary,lt.ColumnHeaderSummary,lt.ColumnHeaderSummaryCollection,lt.ColumnHeader,lt.ColumnFooter,lt.ColumnFooterCollection,lt.ColumnStyle,lt.GridColumn,lt.ValueColumn,lt.DataColumn,lt.SeriesColumn,lt.ColumnLayoutCollection,e(function(t,e){Object.defineProperty(e,"__esModule",{value:!0}),(e=e.CellLayoutType||(e.CellLayoutType={})).GROUP="group",e.COLUMN="column",e.PROXY="proxy"})),ct=(t(Jt),Jt.CellLayoutType,e(function(t,e){Object.defineProperty(e,"__esModule",{value:!0});i=se.Base,ne.__extends(o,i),o.compareLoc=function(t,e){var i,o;return null==t||null==e?0:null==t?-1:null==e?1:((i=t.root.vindex)==(o=e.root.vindex)&&(o=(t.group===e.group?(i=t.vindex,e):(i=t.dataRoot.vindex,e.dataRoot)).vindex),i-o)},o.getSource=function(t){return t instanceof y?t.source:t},o.prototype._doDispose=function(){this._header=this._header&&this._header.dispose(),i.prototype._doDispose.call(this)},_dp(o,"grid",{get:function(){var t;return this.$_grid||(t=this.root)&&t._parent.grid}}),_dp(o,"source",{get:function(){return this}}),_dp(o,"isNull",{get:function(){return!1}}),_dp(o,"isProxy",{get:function(){return!1}}),_dp(o,"type",{get:function(){return this._type}}),_dp(o,"visible",{get:function(){return this._visible},set:function(t){t!=this._visible&&(this._visible=t,this._changed(),this._propChanged("visible",this._visible,!this._visible))}}),o.prototype.$_isVisible=function(t){return this._visible},_dp(o,"header",{get:function(){return this._header}}),_dp(o,"owner",{get:function(){return this._parent&&this._parent.owner}}),_dp(o,"parent",{get:function(){return this._parent}}),_dp(o,"group",{get:function(){return this._parent instanceof T?null:this._parent}}),_dp(o,"root",{get:function(){if(!this._root)for(var t=this;t;){if(t._parent instanceof T)return this._root=t;t=t._parent}return this._root}}),_dp(o,"isRoot",{get:function(){return this.root===this}}),_dp(o,"dataRoot",{get:function(){if(!this._dataRoot){var t=this.group;if(t)for(;t=(this._dataRoot=t).group;);else this._dataRoot=this}return this._dataRoot}}),_dp(o,"index",{get:function(){return this._index}}),_dp(o,"vindex",{get:function(){return this._vindex},set:function(t){var e=this._vindex;this._parent&&this._parent.$_changeChildVIndex(this,t),this._vindex!=e&&(this._propChanged("displayIndex",this._vindex,e),t=this.firstColumn)&&this instanceof m&&t.$_layoutIndexChanged(e,this._vindex)}}),_dp(o,"row",{get:function(){return this._row}}),_dp(o,"col",{get:function(){return this._col}}),_dp(o,"hrow",{get:function(){return this._hrow}}),_dp(o,"hcol",{get:function(){return this._hcol}}),_dp(o,"width",{get:function(){return this._getWidth(this._width)},set:function(t){t=Math.max(0,t),(t=this.grid?Math.max(t,this.grid.displayOptions.minCellWidth):t)!=this._width&&(this._width=t,this._parent)&&this._parent._childWidthChanged(this)}}),_dp(o,"fillWidth",{get:function(){return this._getFillWidth(this._fillWidth)},set:function(t){(t=Math.max(0,t))!=this._fillWidth&&(this._fillWidth=t,this._parent)&&this._parent._childFillWidthChanged(this)}}),_dp(o,"groupShowMode",{get:function(){return this._groupShowMode},set:function(t){t!=this._groupShowMode&&(this._groupShowMode=t,this._changed())}}),_dp(o,"domWidth",{get:function(){var t,e,i;return!!this.grid&&this.grid.layoutManager.isColumnFitted?(e=(t=this.grid).layoutManager,t=t.fixedOptions.colCount,i=e.cellCount,(e=this.$_fixed?e._fixedCellPoints:this.$_rfixed?e._rightCellPoints:this.grid.layoutManager._cellPoints)[(i=this.$_fixed?this._col:this.$_rfixed?this._col-(i-t):this._col-t)+(this instanceof f?this._clen:this._defColSpan)]-e[i]):this.cellWidth}}),_dp(o,"distance",{get:function(){return this._col}}),_dp(o,"cspan",{get:function(){return this._cspan}}),_dp(o,"hspan",{get:function(){return this._hspan}}),_dp(o,"hlen",{get:function(){return this._hlen}}),_dp(o,"merged",{get:function(){return this._merged}}),_dp(o,"isFixed",{get:function(){return this.$_fixed||this.$_rfixed}}),o.prototype.load=function(t){"string"!=typeof t&&(void 0!==t.width&&(this.width=t.width),void 0!==t.header&&this._header.assignFrom(t.header),void 0!==t.fillWidth&&(this.fillWidth=t.fillWidth),this.groupShowMode=re.Utils.valueIn(t.groupShowMode,ht.GroupShowMode)?t.groupShowMode:ht.GroupShowMode.ALWAYS,void 0!==t.visible)&&(this.visible=t.visible)},o.prototype.isColumn=function(t){return!1},o.prototype.cleanColumns=function(){},o.prototype.findLayout=function(t){return null},o.prototype.getHeaderSpan=function(){return 1},o.prototype.getSummarySpan=function(t){return 1},o.prototype.getFooterSpan=function(t){return 1},o.prototype.getDataSpan=function(){return 1},o.prototype.getGroupFooterSpan=function(t,e){return 1},o.prototype.getDataColumn=function(){return null},o.prototype.getFooterUserSpan=function(t){return null},o.prototype.getSummaryUserSpan=function(t){return null},o.prototype._createHeader=function(){return null},o.prototype._headerChanged=function(){this._changed()},o.prototype._prepareLayout=function(t,e,i){this.$_grid=t,this.$_fixed=e,this.$_rfixed=i,this._merged=!1},o.prototype._detach=function(){this._parent=void 0,this._index=-1,this._vindex=-1,this._row=-1,this._col=-1,this._cspan=1,this._hspan=1,this._dspan=1,this._clen=1,this._hlen=1,this._dlen=1,this._root=void 0,this._dataRoot=void 0},o.prototype._getWidth=function(t){return t},o.prototype._getFillWidth=function(t){return t},o.prototype.changeCellWidth=function(t,e,i){var o=this.owner,n=o&&o.grid,n=n&&n._loading,r=i?this.cellWidth:this.domWidth,s=this.domWidth,a=this.grid.displayOptions.minCellWidth;if(isNaN(r)&&n&&i)this.width=t;else{n=t-r;if(e&&!i&&(n*=this.cellWidth/(isNaN(this._fitWidth)?this.cellWidth:this._fitWidth)),n=Math.round(n)){if(this.grid._columnsDirty&&this.owner.$_refresh(this.grid._columns,a),!(o&&o.isShowing(this)))return this instanceof f||1<this._defColSpan?void 0:void(this._cellWidth=t);if(o){var l=this._col,h=void 0,h=this instanceof f?this._clen:this._defColSpan,d=(o.$_changeCellWidths(l,h,n,a),o._cellWidths);if(d&&d.length)for(var u=o._dataCells,c=0;c<u.length;c++)for(var _=u[c],p=0;p<h;p++)_[l+p]._cellWidth=d[l+p];o.$_calcGroupWidths()}setTimeout(function(){var t;this.domWidth!=s&&(t=this.firstColumn,this._propChanged("displayWidth",this.domWidth,s),t)&&this instanceof m&&t.$_layoutWidthChanged(s,this.domWidth)}.bind(this),50)}}},o.prototype._setFitWidth=function(t){this._fitWidth=t},o.prototype._clearFitWidth=function(){this._fitWidth=NaN},o.prototype._changed=function(){this._parent&&this._parent._changed()},o.prototype.$_setMerged=function(t){this._merged=t},o.prototype._propChanged=function(t,e,i){var o=this.grid;o&&o._fireLayoutPropertyChanged(this,t,e,i)};var i,g=o;function o(){var t=i.call(this)||this;return t._visible=!0,t._width=NaN,t._fillWidth=NaN,t._index=-1,t._vindex=-1,t._row=0,t._col=0,t._hrow=0,t._hcol=0,t._cspan=1,t._hspan=1,t._dspan=1,t._clen=1,t._hlen=1,t._dlen=1,t._cellWidth=0,t._fitWidth=NaN,t._defColSpan=1,t._header=t._createHeader(),t._header&&(t._header._layout=t),t}e.CellLayoutItem=g;n=g,ne.__extends(r,n),_dp(r,"cellWidth",{get:function(){return this._cellWidth},set:function(t){}}),_dp(r,"isNull",{get:function(){return!0}}),_dp(r,"isProxy",{get:function(){return!0}}),_dp(r,"source",{get:function(){return this._source}}),_dp(r,"visible",{get:function(){return this._source.visible}}),r.prototype.$_isVisible=function(t){return this._source.$_isVisible(t)},_dp(r,"cols",{get:function(){return this._source.cols}}),_dp(r,"headerRows",{get:function(){return this._source.headerRows}}),_dp(r,"rows",{get:function(){return this._source.rows}}),_dp(r,"root",{get:function(){return this._source.root}}),_dp(r,"displayText",{get:function(){return null}}),_dp(r,"first",{get:function(){return this}}),_dp(r,"last",{get:function(){return this}}),_dp(r,"firstColumn",{get:function(){return this._source.firstColumn}}),_dp(r,"lastColumn",{get:function(){return this._source.lastColumn}}),_dp(r,"boundColumn",{get:function(){return this._source.boundColumn}}),r.prototype.load=function(t){},r.prototype._isResizable=function(){return!1},r.prototype._isMovable=function(){return!1},r.prototype.clearMergeGrouped=function(){};var n,y=r;function r(t,e){var i=n.call(this)||this;return i._type=Jt.CellLayoutType.PROXY,i._source=t,i._index=e,i}e.ProxyCellLayoutItem=y;s=g,ne.__extends(a,s),a.prototype._doDispose=function(){this._column=this._columnObj=null,this._merges=this._merges&&this._merges.dispose(),this._mergeRuleObj=this._mergeRuleObj&&this._mergeRuleObj.dispose(),this._equalBlankNode=null,s.prototype._doDispose.call(this)},_dp(a,"column",{get:function(){return this._column}}),_dp(a,"cellWidth",{get:function(){var t;return this.owner.isShowing(this)?(t=this.owner.getCellWidths(this._col,this._defColSpan),(t=isNaN(t)?this.width:t)||this._cellWidth):this._cellWidths&&this._cellWidths.reduce(function(t,e){return t+e},0)||this._cellWidth},set:function(t){var e;this.owner._loading||(e=!!this.grid&&this.grid.layoutManager.isColumnFitted,t=Math.max(this.grid.displayOptions.minCellWidth,t),this.changeCellWidth(t,e,!0))}}),_dp(a,"merges",{get:function(){return this._merges}}),_dp(a,"mergeRule",{get:function(){return this._mergeRule},set:function(t){t!==this._mergeRule&&(this._mergeRule=t,this._mergeRuleObj&&this._mergeRuleObj.dispose(),this._mergeRuleObj=t?Kt.ColumnMergeRule.createRule(t):void 0===t?void 0:null,t=this.grid)&&t._columnMergeRuleChanged(this)}}),_dp(a,"breakMergeOnEmpty",{get:function(){return this._breakMergeOnEmpty},set:function(t){t!==this._breakMergeOnEmpty&&(this._breakMergeOnEmpty=t,t=this.grid)&&t._columnMergeRuleChanged(this)}}),a.prototype.isBreakMergeOnEmpty=function(){return void 0===this._breakMergeOnEmpty?this._columnObj instanceof lt.DataColumn&&this._columnObj.breakMergeOnEmpty:this._breakMergeOnEmpty},_dp(a,"equalBlank",{get:function(){return this._equalBlank},set:function(t){t!==this._equalBlank&&(this._equalBlank=t,this._changed())}}),_dp(a,"equalBlankNode",{get:function(){return this._blankNodeRun}}),_dp(a,"blanked",{get:function(){return this._blanked}}),_dp(a,"equalBlankExpression",{get:function(){return this._equalBlankExpression},set:function(t){t!==this._equalBlankExpression&&(this._equalBlankExpression=t,this._equalBlankNode=t?$.ExpressionParser.Default.parse(t,null):void 0===t?void 0:null,this._changed())}}),_dp(a,"cellSpan",{get:function(){return this._cellSpan},set:function(t){(t=Math.max(1,t))!=this._cellSpan&&(this._cellSpan=t,this._changed())}}),_dp(a,"headerSpan",{get:function(){return this._headerSpan},set:function(t){t!=this._headerSpan&&(void 0!==t&&(t=Math.max(1,t)),this._headerSpan=t,this._changed())}}),_dp(a,"summarySpan",{get:function(){return this._summarySpans?this._summarySpans[0]:void 0},set:function(t){this._summarySpans=this._summarySpans||[],t!=this._summarySpans[0]&&(void 0!==t&&(t=Math.max(1,t)),this._summarySpans[0]=t,this._changed())}}),_dp(a,"summarySpans",{get:function(){return this._summarySpans&&this._summarySpans.slice()},set:function(t){t!==this._summarySpans&&(this._summarySpans=t&&t.slice(),this._changed())}}),_dp(a,"footerSpan",{get:function(){return this._footerSpans&&this._footerSpans[0]},set:function(t){this._footerSpans=this._footerSpans||[],t!=this._footerSpans[0]&&(void 0!==t&&(t=Math.max(1,t)),this._footerSpans[0]=t,this._changed())}}),_dp(a,"footerSpans",{get:function(){return this._footerSpans&&this._footerSpans.slice()},set:function(t){t!==this._footerSpans&&(this._footerSpans=t&&t.slice(),this._changed())}}),_dp(a,"dataSpan",{get:function(){return this._dataSpan},set:function(t){t!=this._dataSpan&&(void 0!==t&&(t=Math.max(1,t)),this._dataSpan=t,this._changed())}}),_dp(a,"groupFooterSpan",{get:function(){return this._groupFooterSpans&&this._groupFooterSpans[0]},set:function(t){this._groupFooterSpans=this._groupFooterSpans||[],t!=this._groupFooterSpans[0]&&(void 0!==t&&(t=Math.max(1,t)),this._groupFooterSpans[0]=t,this._changed())}}),_dp(a,"groupFooterSpans",{get:function(){return this._groupFooterSpans&&this._groupFooterSpans.slice()},set:function(t){t!==this._groupFooterSpans&&(this._groupFooterSpans=t&&t.slice(),this._changed())}}),_dp(a,"spanCallback",{get:function(){return this._spanCallback},set:function(t){t!=this._spanCallback&&(this._spanCallback=t,this._changed())}}),_dp(a,"summarySpanCallback",{get:function(){return this._summarySpanCallback},set:function(t){t!=this._summarySpanCallback&&(this._summarySpanCallback=t,this._changed())}}),_dp(a,"footerSpanCallback",{get:function(){return this._footerSpanCallback},set:function(t){t!=this._footerSpanCallback&&(this._footerSpanCallback=t,this._changed())}}),_dp(a,"groupFooterSpanCallback",{get:function(){return this._groupFooterSpanCallback},set:function(t){t!=this._groupFooterSpanCallback&&(this._groupFooterSpanCallback=t,this._changed())}}),_dp(a,"footerUserSpans",{get:function(){return this._footerUserSpans},set:function(t){this._footerUserSpans=re.Utils.makeArray(t,!0).slice(),this._changed()}}),_dp(a,"summaryUserSpans",{get:function(){return this._summaryUserSpans},set:function(t){this._summaryUserSpans=re.Utils.makeArray(t,!0).slice(),this._changed()}}),_dp(a,"groupFooterUserSpans",{get:function(){return this._groupFooterUserSpans},set:function(t){this._groupFooterUserSpans=re.Utils.makeArray(t,!0).slice(),this._changed()}}),_dp(a,"groupFooterUserSpanCallback",{get:function(){return this._groupFooterUserSpanCallback},set:function(t){t!=this._groupFooterUserSpanCallback&&(this._groupFooterUserSpanCallback=t,this._changed())}}),a.prototype.canMerge=function(){return null!=this._mergeRuleObj||(this._columnObj instanceof lt.DataColumn?!!this._columnObj.mergeGrouped||(void 0===this._mergeRuleObj?null!=this._columnObj._mergeRuleObj:void 0):void 0)},_dp(a,"isNull",{get:function(){return!this._columnObj}}),_dp(a,"cols",{get:function(){return this._cols}}),_dp(a,"headerRows",{get:function(){return 1}}),_dp(a,"rows",{get:function(){return this._rows}}),_dp(a,"first",{get:function(){return this}}),_dp(a,"last",{get:function(){return this}}),_dp(a,"firstColumn",{get:function(){return this._columnObj}}),_dp(a,"lastColumn",{get:function(){if(this._columnObj)return this._columnObj;for(var t=this.parent.visibles,e=t.indexOf(this);0<e--;){var i=t[e];if(i instanceof a&&i.lastColumn)return i.lastColumn}return null}}),_dp(a,"boundColumn",{get:function(){return this._columnObj}}),_dp(a,"displayText",{get:function(){return this._header&&this._header.text||this._columnObj&&this._columnObj.displayText||this.toString()}}),a.prototype.getHeaderSpan=function(){return void 0===this._headerSpan?this._cellSpan:this._headerSpan},a.prototype.getSummarySpan=function(t){var e,i=this._summarySpanCallback,o=this._summarySpans;return i?void 0===(e=i(this.grid.handler,this,t))&&o&&o.length>t&&(e=o[t]):o&&o.length>t&&(e=o[t]),void 0===e?this._cellSpan:e},a.prototype.getFooterSpan=function(t){var e,i=this._footerSpanCallback,o=this._footerSpans;return i?void 0===(e=i(this.grid.handler,this,t))&&o&&o.length>t&&(e=o[t]):o&&o.length>t&&(e=o[t]),void 0===e?this._cellSpan:e},a.prototype.getFooterUserSpan=function(t){return this._footerUserSpans&&this._footerUserSpans[t]},a.prototype.getSummaryUserSpan=function(t){return this._summaryUserSpans&&this._summaryUserSpans[t]},a.prototype.getGroupFooterUserSpan=function(t,e){var i,o=this._groupFooterUserSpanCallback;return(i=o?o(this.grid.handler,this,t,t.index,e):i)||this._groupFooterUserSpans&&this._groupFooterUserSpans[e]},a.prototype.getGroupFooterSpan=function(t,e){var i,o=this._groupFooterSpanCallback,n=this._groupFooterSpans;return o?void 0===(i=o(this.grid.handler,this,t,e))&&n&&n.length>e&&(i=n[e]):n&&n.length>e&&(i=n[e]),void 0===i?this._cellSpan:i},a.prototype.getDataSpan=function(){return void 0===this._dataSpan?this._cellSpan:this._dataSpan},a.prototype.getDataColumn=function(){return this._columnObj},a.prototype._createHeader=function(){return new h(this)},a.prototype._isResizable=function(){return!this._columnObj||this._columnObj.resizable},a.prototype._isMovable=function(){for(var t=!0,e=this.parent;e;)t=t&&e.childColumnMovable,e=e.parent;return t&&(!this._columnObj||this._columnObj.movable)},a.prototype.isColumn=function(t){return this._columnObj===t},a.prototype.findLayout=function(t){return t&&this._columnObj===t?this:null},a.prototype.load=function(t){this.assignFrom(t),s.prototype.load.call(this,t),this._columnObj||"string"!=typeof this._column||(t=this.owner&&this.owner.grid,this._columnObj=t?t.columnByName(this._column):null)},a.prototype.cleanColumns=function(){this._columnObj&&this._columnObj.clean()},a.prototype.$_isVisible=function(t){return t?this._visible:this._visible&&(!this._columnObj||this._columnObj.visible)},a.prototype._getWidth=function(t){return isNaN(t)?this._columnObj?this._columnObj.width:NaN:t},a.prototype._getFillWidth=function(t){return isNaN(t)?this._columnObj?this._columnObj.fillWidth:NaN:t},a.prototype._prepareLayout=function(t,e,i){s.prototype._prepareLayout.call(this,t,e,i),this._columnObj&&(this._columnObj._prepareLayout(t,this),e=this.parent.direction===v.VERTICAL?this.cellSpan+this._dspan-1:this._dspan,this._blanked=e===this.owner.dataRows)&&(this._blankNodeRun=this._equalBlankNode,this._blanked=this._equalBlank||null!=this._blankNodeRun,this._blanked||(void 0===this._equalBlankNode&&(this._blanked=null!=(this._blankNodeRun=this._columnObj._equalBlankNode)),this._blanked)||void 0!==this._equalBlank||(this._blanked=this._columnObj._equalBlank))},a.prototype.toString=function(){return"string"==typeof this._column?this._column:s.prototype.toString.call(this)},a.prototype.clearMergeGrouped=function(){this.firstColumn instanceof lt.DataColumn&&this.firstColumn.$_setMergeGrouped(!1)},a.prototype.$_bindColumn=function(t,e,i){if(void 0===i&&(i=!1),this._columnObj||(this._columnObj=e.columnByName(this._column)),this._columnObj){e=this._columnObj.$_hash;if(t[e])throw new Error("Column is already contained in layouts: "+(this._columnObj.name||this._columnObj.displayText));i||(this._columnObj._layout=this),i||(this._columnObj._layout=this),t[e]=this}},a.prototype.$_mergeRuleObj=function(){return this._mergeRuleObj||(void 0===this._mergeRuleObj&&this._columnObj instanceof lt.DataColumn?this._columnObj._mergeRuleObj:null)};var s,v,m=a;function a(t){var e=s.call(this)||this;return e._cellSpan=1,e._cellWidths=[],e._cols=1,e._rows=1,e._blanked=!1,e._type=Jt.CellLayoutType.COLUMN,e._column=t,e._columnObj=t instanceof lt.ValueColumn?t:null,e}e.CellLayoutColumnItem=m,(M=v=e.ColumnLayoutDirection||(e.ColumnLayoutDirection={})).VERTICAL="vertical",M.HORIZONTAL="horizontal";l=se.Base,ne.__extends(d,l),_dp(d,"layout",{get:function(){return this._layout}}),_dp(d,"text",{get:function(){return this._text},set:function(t){t!=this._text&&(this._text=t,this._changed())}}),_dp(d,"styleName",{get:function(){return this.layout.firstColumn.header.styleName},set:function(t){this.layout.firstColumn.header.styleName=t}}),_dp(d,"exportStyleName",{get:function(){return this.layout.firstColumn.header.exportStyleName},set:function(t){this.layout.firstColumn.header.exportStyleName=t}}),_dp(d,"rows",{get:function(){return 1}}),d.prototype.isVisible=function(){return!0},d.prototype.getDisplayText=function(){return this._text},d.prototype.doAssignSimple=function(t){return"string"==typeof t&&(this.text=t,!0)},d.prototype._changed=function(){this._layout&&this._layout._headerChanged()};var l,h=d;function d(t){var e=l.call(this)||this;return e._layout=t,e}e.CellLayoutHeader=h;u=h,ne.__extends(_,u),_dp(_,"visible",{get:function(){return this._visible},set:function(t){t!=this._visible&&(this._visible=t,this._changed())}}),_dp(_,"template",{get:function(){return this._template&&this._template.template},set:function(t){t!=this.template&&(t?(this.template||(this._template=new Wt.HtmlTemplateParser),this._template.template=t):this._template=void 0,this._changed())}}),_dp(_,"values",{get:function(){return this._values},set:function(t){t!==this._values&&(t?re.Utils.extendObj(t,this._values={}):this._values=void 0,this._changed())}}),_dp(_,"showTooltip",{get:function(){return this._showTooltip},set:function(t){t!==this._showTooltip&&(this._showTooltip=t,this._changed())}}),_dp(_,"tooltip",{get:function(){return this._tooltip},set:function(t){t!==this._tooltip&&(this._tooltip=t,this._changed())}}),_dp(_,"edgeMark",{get:function(){return this._edgeMark},set:function(t){t!==this._edgeMark&&(this._edgeMark=t,this._changed())}}),_dp(_,"styleName",{get:function(){return this._styleName},set:function(t){t!==this._styleName&&(this._styleName=t,this._changed())}}),_dp(_,"exportStyleName",{get:function(){return this._exportStyleName},set:function(t){this._exportStyleName=t}}),_dp(_,"rows",{get:function(){return Math.max(1,this._rows||1)},set:function(t){t!==this._rows&&(this._rows=t,this._changed())}}),_dp(_,"templateCallback",{get:function(){return this._templateCallback},set:function(t){this._templateCallback=t,this._changed()}}),_.prototype.realizeTemplate=function(){var t=this._template;if(t)return t.realizeHeader(this,null,this._layout.grid)},_.prototype.getValue=function(t){return this._values&&this._values[t]},_.prototype.doAssignSimple=function(t){return!u.prototype.doAssignSimple.call(this,t)&&"boolean"==typeof t&&(this.visible=t,!0)},_.prototype.isVisible=function(){return this._visible},_.prototype.getDisplayText=function(){return this.text||this.layout.name},_dp(_,"displayText",{get:function(){return this.getDisplayText()}});var u,c=_;function _(t){t=u.call(this,t)||this;return t._visible=!0,t._showTooltip=void 0,t}e.CellLayoutGroupHeader=c;p=g,ne.__extends(C,p),C.getNext=function(t){var e=t&&t.parent;return e?(t=e.nextOf(t))||C.getNext(e):null},C.getPrev=function(t){var e=t&&t.parent;return e?(t=e.prevOf(t))||C.getPrev(e):null},C.isTop=function(t){for(var e=t&&t.parent;e;){if(e.vertical&&1<e.visibleCount&&0<t.vindex)return!1;e=(t=e).parent}return!0},C.isBottom=function(t){for(var e=t&&t.parent;e;){if(e.vertical&&1<e.visibleCount&&t.vindex<e.visibleCount-1)return!1;e=(t=e).parent}return!0},C.isLeft=function(t){for(var e=t&&t.parent;e;){if(!e.vertical&&1<e.visibleCount&&0<t.vindex)return!1;e=(t=e).parent}return!0},C.isRight=function(t){return C.isBottom(t)},C.prototype._doDispose=function(){this._items.forEach(function(t){t&&t.dispose()}),this._visibles=this._items=null,p.prototype._doDispose.call(this)},_dp(C,"name",{get:function(){return this._name}}),_dp(C,"direction",{get:function(){return this._direction},set:function(t){(t=t!=v.VERTICAL?v.HORIZONTAL:t)!=this._direction&&(this._direction=t,this._changed())}}),_dp(C,"vertical",{get:function(){return this._direction==v.VERTICAL}}),_dp(C,"horizontal",{get:function(){return this._direction!=v.VERTICAL}}),_dp(C,"resizable",{get:function(){return this._resizable},set:function(t){this._resizable=t}}),_dp(C,"movable",{get:function(){return this._movable},set:function(t){this._movable=t}}),_dp(C,"hideChildHeaders",{get:function(){return this._hideChildHeaders},set:function(t){t!=this._hideChildHeaders&&(this._hideChildHeaders=t,this._changed())}}),_dp(C,"childColumnMovable",{get:function(){return this._childColumnMovable},set:function(t){this._childColumnMovable=t}}),_dp(C,"count",{get:function(){return this._items.length}}),_dp(C,"items",{get:function(){return this._items.slice()},set:function(t){this._items=t?t.slice():[];for(var e=0,i=this._items;e<i.length;e++)i[e]._parent=this;this._changed()}}),_dp(C,"visibleCount",{get:function(){return this._visibles.length}}),_dp(C,"visibles",{get:function(){return this._visibles.slice()}}),C.prototype.$_isVisible=function(t){return this.visible&&0<this._visibles.length},_dp(C,"expandable",{get:function(){return this._expandable},set:function(t){t!=this._expandable&&(this._expandable=t,this._changed())}}),_dp(C,"expanded",{get:function(){return this._expanded},set:function(t){t!=this._expanded&&this.owner.expandLayout(this,t)}}),C.prototype.indexOf=function(t){for(var e=0;e<this._items.length;e++)if(this._items[e]===t)return e;return-1},C.prototype.getItem=function(t){return this._items[t]},C.prototype.getVisible=function(t){return this._visibles[t]},C.prototype.addLayout=function(t,e){if(!this.owner.isDefault()){var i,o,n,r=this.grid,s=this.owner;if(r&&r._checkEditing(),"string"==typeof t?n=s.layoutByName(t):t instanceof lt.ValueColumn?n=s.layoutByColumn(t):t&&"string"==typeof t.column&&(n=s.layoutByName(t.column)),n)throw new Error("addLayout fail - Column or Group is already contained in layouts: "+n.firstColumn.name);if("string"==typeof t||t instanceof lt.ValueColumn)i="string"==typeof t&&a(r,t),o=new m(t);else if(t)if("string"==typeof t.column)i=a(r,t.column),o=new m(t.column);else if((t.type===Jt.CellLayoutType.GROUP||t.items)&&t.name){if(s.layoutByName(t.name))throw new Error("addLayout fail - group is already contained in layouts: "+t.name);o=new C(t.name,t.direction)}return o?("object"==typeof t&&o.load(t),this.addItem(o,e),(o instanceof m&&i||o instanceof C&&o._items.length)&&this.owner._root&&this.owner._root.resetColumns(r._columns),o):void 0}function a(t,e){t=t.columnByName(e);if(t)return t;throw new Error("not exists column "+e)}},C.prototype.removeLayout=function(t){var e;this.owner.isDefault()||((e=this.grid)&&e._checkEditing(),"string"==typeof t?t=this.layoutByName(t):t instanceof lt.ValueColumn&&(t=t.layout),t instanceof g&&t.parent.removeItem(t,!0))},C.prototype.addItem=function(t,e){void 0===e&&(e=this._items.length),null!=t&&0<=e&&e<=this._items.length&&(this._items.splice(e,0,t),(t._parent=this)._changed())},C.prototype.clear=function(t){void 0===t&&(t=!0);for(var e=0,i=this._items;e<i.length;e++){var o=i[e];t&&o instanceof C&&o.clear(),o._detach()}this._items=[],this._visibles=[],this._cols=0,this._rows=0,this._headerRows=0},C.prototype.removeItem=function(t,e){var i=this.indexOf(t);if(0<=i){if(t instanceof m&&1<t.cellSpan)for(var o=t.cellSpan-1;o--;){var n=this._items.splice(i+o,1)[0];n&&(n._detach(),e)&&n.dispose()}this._items.splice(i,1),t._detach(),e&&t.dispose(),this._changed()}},C.prototype.layoutByName=function(t){if(t)for(var e=0,i=this._items;e<i.length;e++){var o=i[e];if(o instanceof m&&o.firstColumn.name===t)return o;if(o instanceof C){if(o.name===t)return o;o=o.layoutByName(t);if(o)return o}}return null},C.prototype.nextOf=function(t){try{var e=this.$_checkVisible(t);if(e<this.visibleCount-1)return t=S(this,e+1)}catch(t){}return null},C.prototype.prevOf=function(t){try{var e=this.$_checkVisible(t);if(0<e)return t=R(this,e-1)}catch(t){}return null},C.prototype.isExpandable=function(){return this.expandable&&0<this._expandedLayouts.length&&0<this._collapsedLayouts.length},C.prototype.expandAll=function(e,i){this.expandable&&(this.expanded=e),this._items.forEach(function(t){t instanceof C&&t.expandAll(e,i)})},C.prototype._clearFitWidth=function(){p.prototype._clearFitWidth.call(this);for(var t=0,e=this._visibles;t<e.length;t++)e[t]._clearFitWidth()},_dp(C,"cellWidth",{get:function(){return this.owner.getCellWidths(this._col,this._clen)},set:function(t){var e=!!this.grid&&this.grid.layoutManager.isColumnFitted;this.changeCellWidth(t,e,!0)}}),_dp(C,"cols",{get:function(){return this._cols}}),_dp(C,"headerRows",{get:function(){return this._headerRows}}),_dp(C,"rows",{get:function(){return this._rows}}),_dp(C,"first",{get:function(){return 0<this._visibles.length?this._visibles[0].first:this}}),_dp(C,"last",{get:function(){var t=this._visibles?this._visibles.length:0;return 0<t?this._visibles[t-1].last:this}}),_dp(C,"firstColumn",{get:function(){return this._visibles&&0<this._visibles.length?this._visibles[0].firstColumn:null}}),_dp(C,"lastColumn",{get:function(){for(var t=this._visibles?this._visibles.length-1:-1;0<=t;t--){var e=this._visibles[t].lastColumn;if(e)return e}return null}}),_dp(C,"boundColumn",{get:function(){return this.firstColumn}}),_dp(C,"displayText",{get:function(){return this._header&&this._header.text||this._name}}),C.prototype._createHeader=function(){return new c(this)},C.prototype.load=function(t){this.clear(),void 0!==t.hideChildHeaders&&(this.hideChildHeaders=t.hideChildHeaders),this.expandable=t.expandable,this._expanded=null==t.expanded||t.expanded,void 0!==t.resizable&&(this.resizable=t.resizable),void 0!==t.childColumnMovable&&(this.childColumnMovable=t.childColumnMovable),void 0!==t.movable&&(this.movable=t.movable),t.items&&this._loadItems(t.items),p.prototype.load.call(this,t)},C.prototype.findLayout=function(t){for(var e=0,i=this._items;e<i.length;e++){var o=i[e].findLayout(t);if(o)return o}return null},C.prototype.cleanColumns=function(){for(var t=0,e=this.items.length;t<e;t++)this.getItem(t).cleanColumns()},C.prototype._isResizable=function(){return this._resizable},C.prototype._isMovable=function(){for(var t=this._movable,e=this.parent;e;)t=t&&e.childColumnMovable,e=e.parent;return t},C.prototype._setFitWidth=function(t){if(p.prototype._setFitWidth.call(this,t),this.vertical)for(var e=0,i=this._visibles;e<i.length;e++)(l=i[e])instanceof m?(h=l._cellWidth/this.cellWidth*t,l._setFitWidth(h)):l._setFitWidth(t);else{for(var o=0,n=0,r=this._visibles;n<r.length;n++)o+=(l=r[n])._cellWidth;for(var s=0,a=this._visibles;s<a.length;s++){var l,h=(l=a[s])._cellWidth/o*t;l._setFitWidth(h)}}},C.prototype._prepareLayout=function(t,e,i){p.prototype._prepareLayout.call(this,t,e,i);for(var o=0,n=this._visibles;o<n.length;o++)n[o]._prepareLayout(t,e,i)},C.prototype.toString=function(){return this._name||p.prototype.toString.call(this)},C.prototype.clearMergeGrouped=function(){for(var t=0,e=this.items.length;t<e;t++)this.getItem(t).clearMergeGrouped()},C.prototype._loadItems=function(t){for(var e,i=0,o=0,n=t;o<n.length;o++){var r=n[o],s=void 0;i++,"string"==typeof r?e=s=new m(r):"number"==typeof r?(s=new y(e,i))._width=r:r&&(r.type===Jt.CellLayoutType.GROUP||r.items?s=new C(r.name,r.direction):"string"==typeof r.column?e=s=new m(r.column):r instanceof lt.ValueColumn&&(e=s=new m(r))),s&&(s._parent=this,s.load(r),this._items.push(s))}},C.prototype.$_bindColumns=function(t,e,i){for(var o=0,n=this._items;o<n.length;o++){var r=n[o];r._root=null,r instanceof C?r.$_bindColumns(t,e,i):r.isProxy||r.$_bindColumn(t,e,i)}},C.prototype.$_parseExpandLayouts=function(i){var o=this;this._expandedLayouts.length=this._collapsedLayouts.length=0,this.items.forEach(function(t,e){if(!t.isProxy){switch(t.groupShowMode){case ht.GroupShowMode.EXPAND:o._expandedLayouts.push(t);break;case ht.GroupShowMode.COLLAPSE:o._collapsedLayouts.push(t);break;default:o._expandedLayouts.push(t),o._collapsedLayouts.push(t)}t instanceof C&&t.$_parseExpandLayouts(i)}})},C.prototype.$_parseHeaderCells=function(t,e,i){var o=this._direction===v.HORIZONTAL,n=0,r=this._header.isVisible()?this._header.rows:0;if(r&&this._hideChildHeaders)this._cspan=this._clen=this._cols,this._hlen=this._headerRows;else{for(var s=0,a=this._visibles;s<a.length;s++){var l=a[s],h=!l.isProxy&&l.header.isVisible()?l.header.rows:l.isProxy&&!o?1:0;if(l._hrow=e,l._hcol=i,l._hspan=h,l._hlen=h,l instanceof C){if(0<h&&(t[e][i]=l),l.$_parseHeaderCells(t,e+h,i),0<h)for(var d=0;d<h;d++)for(var u=0===d?1:0;u<l.cols;u++)t[e+d][i+u]=new y(l,u);o?i+=l.cols:e+=l.headerRows}else if(t[e][i]=l,o){for(d=1;d<this.headerRows-r;d++)t[e+d][i]=new y(l,d),l._hspan++;l._hlen=l._hspan,i+=l.cols}else{for(d=1;d<this.cols;d++)t[e][i+d]=new y(l,d);e+=l.rows}o?n=Math.max(l._hlen,n):n+=l._hlen}this._hlen=o?n+r:Math.max(1,n+r)}},C.prototype.$_fillHorz=function(t,e,i,o,n,r,s){for(var a=o+r,l=n,h=l+i-1,d=0,u=e-r;d<u;d++)for(var c=h;l<=c;c--)if(null!=(_=t[a+d][c])){for(var _=g.getSource(_),p=c+1;p<=h;p++){var f=t[a+d][p]=new y(_,p-l);s?(f._hrow=a+d,f._hcol=p):(f._row=a+d,f._col=p,_.row===f.row&&(_._cspan++,_ instanceof m)&&_._clen++)}break}},C.prototype.$_fillVert=function(t,e,i,o,n,r,s){for(var a=o+r,l=o+e-1,h=n+i-1,d=n;d<=h;d++)for(var u=l;a<=u;u--)if(null!=(c=t[u][d])){for(var c=g.getSource(c),_=u+1;_<=l;_++){var p=t[_][d]=new y(c,_-a);s?(p._hrow=_,p._hcol=d,c.hcol===p.hcol&&(c._hspan++,c instanceof m)&&c._hlen++):(p._row=_,p._col=d,c.col===p.col&&(c._dspan++,c instanceof m)&&c._dlen++)}break}},C.prototype.$_adjustHeaderCells=function(t){var e=this._header.isVisible()?this._header.rows:0;if(e&&this._hideChildHeaders){this._hspan=this._hlen;for(var i=0,o=0;o<this._hlen;o++)for(var n,r,s,a=0;a<this._clen;a++)(o||a)&&(n=this._hrow+o,r=this._hcol+a,(s=t[n][r]=new y(this,i++))._hrow=n,s._hcol=r)}else if(this._direction===v.VERTICAL){for(var l=this._clen,h=0,d=this._visibles;h<d.length;h++)(u=d[h])instanceof C&&(u._clen=this._clen,u.$_adjustHeaderCells(t));this.$_fillVert(t,this._hlen,l,this._hrow,this._hcol,e,!0),this.$_fillHorz(t,this._hlen,l,this._hrow,this._hcol,e,!0)}else{for(var u,c=0,_=this._visibles;c<_.length;c++)(u=_[c])instanceof C&&(u._hlen=this._hlen-e,u.$_adjustHeaderCells(t));this.$_fillVert(t,this._hlen,this._cols,this._hrow,this._hcol,e,!0),this.$_fillHorz(t,this._hlen,this._cols,this._hrow,this._hcol,e,!0)}},C.prototype.$_parseDataCells=function(t,e,i){for(var o,n=this._direction!=v.VERTICAL,r=0,s=0,a=0,l=this._visibles;a<l.length;a++){var h=l[a];if(h._row=e,h._col=i,h._dspan=1,h._dlen=1,h._cspan=1,h._clen=1,h instanceof C){if(h.$_parseDataCells(t,e,i),n)i+=h.cols;else if(e+=h.rows,2==this.rows){for(var d=1/0,u=0,c=0,_=this.visibles;c<_.length;c++){var p=_[c],d=Math.min(d,p.cols),u=Math.max(u,p.cols);p.ignoreCalcWidth=!1}if(1===d&&1<u)for(var f=0,g=this.visibles;f<g.length;f++)(p=g[f]).ignoreCalcWidth=1===p.cols}}else if(t[e][i]=h,n){for(var m=1;m<this.rows;m++)t[e+m][i]=o=new y(h,m),h._dspan++,o._col=i,o._row=e+m;h._dlen=h._dspan,i+=h.cols}else{for(m=1;m<this.cols;m++)t[e][i+m]=o=new y(h,m),h._cspan++,o._col=i+m,o._row=e;h._clen=h._cspan,e+=h.rows}n?(s+=h._clen,r=Math.max(h._dlen,r)):(s=Math.max(h._clen,s),r+=h._dlen)}n?(s=Math.max(1,s),this._dlen=r):this._dlen=Math.max(1,r),this._cspan=this._clen=s},C.prototype.$_adjustDataCells=function(t){if(this._direction===v.VERTICAL)for(var e=0,i=this._visibles;e<i.length;e++)(o=i[e])instanceof C&&(o._cspan=o._clen=this._clen,o.$_adjustDataCells(t));else for(var o,n=0,r=this._visibles;n<r.length;n++)(o=r[n])instanceof C&&(o._dlen=this._dlen,o.$_adjustDataCells(t));this.$_fillVert(t,this._dlen,this._clen,this._row,this._col,0,!1),this.$_fillHorz(t,this._dlen,this._clen,this._row,this._col,0,!1)},C.prototype.$_calcSpans=function(){var t=this._header.isVisible();if(this._direction==v.HORIZONTAL){for(var e=0,i=1,o=1,n=0,r=this._visibles;n<r.length;n++)(l=r[n])instanceof C&&l.$_calcSpans(),e+=l.cols,i=Math.max(i,l.headerRows),o=Math.max(o,l.rows);this._rows=o,this._cols=e,t&&this._hideChildHeaders?this._headerRows=this._header.rows:this._headerRows=i+(t?this._header.rows:0)}else{this._cols=1,this._headerRows=t?this._header.rows:0;for(var s=this._rows=0,a=this._visibles;s<a.length;s++)(l=a[s])instanceof C&&l.$_calcSpans(),this._headerRows+=l.headerRows,this._rows+=l.rows,this._cols=Math.max(l.cols,this._cols);for(var l,h=0,d=this._visibles;h<d.length;h++)(l=d[h])instanceof C&&(l._cols=this._cols);t&&this._hideChildHeaders&&(this._headerRows=this._header.rows)}},C.prototype.$_resetVisibles=function(t){var e=0,i=0,o=this.visibles;this._visibles=[];for(var n=0,r=this._items;n<r.length;n++){var s=r[n],a=(s._index=e++,s instanceof C&&s.$_resetVisibles(t),s.$_isVisible(t));(a=a&&this.expandable?this._expanded?0<=this._expandedLayouts.indexOf(s):0<=this._collapsedLayouts.indexOf(s):a)&&(this._visibles.push(s),s._vindex=i++)}if(!t&&o.length!=this._visibles.length&&this.direction===v.HORIZONTAL)for(var l=this;l;)l._cellWidth=NaN,l.width=NaN,l=l.parent;this.$_calcSpans()},C.prototype.$_getLeaf=function(t,e){for(var i=0,o=this._visibles;i<o.length;i++){var n=o[i];if(n instanceof C){var r=n.row,s=r+n.rows;if(r<=t&&t<s){var s=n.col,a=s+n.cols;if(s<=e&&e<a)return this.$_getLeaf(t-r,e-s)}}else if(n.row===t&&n.col===e)return n}return null},C.prototype.$_collectCellWidths=function(t){for(var e=[],i=0,o=this._visibles;i<o.length;i++){var n,r=o[i],s=r._cellWidth||r.width;r instanceof m&&(isNaN(s)||0==s)&&(s=t),r instanceof C&&(n=r.$_collectCellWidths(t),isNaN(s))&&(s=n),r._cellWidth=s,e.push(s)}var a=this.width;return a=isNaN(a)?this.vertical?Math.max.apply(null,e):e.reduce(function(t,e){return t+e},0):a},C.prototype.$_calcCellWidths=function(t,e,i){if(!i){for(var o=e.slice(),n=0;n<o.length;n++)o[n]=0;var r=this.owner._moveColumn,s=t.slice();r&&(i=s.splice(r.first.row,1),s.splice(0,0,i[0]));for(var a=0;a<s.length;a++)for(var l=s[a],h=0;h<l.length;h++){var d=l[h];r?e[h]=e[h]||d._cellWidth:(!d.isProxy||0<d._cellWidth&&!d.ignoreCalcWidth)&&(e[h]+=d._cellWidth,o[h]++)}for(n=0;n<e.length;n++)e[n]=Math.round(e[n]/Math.max(o[n],1))}for(a=0;a<t.length;a++)for(l=t[a],h=0;h<l.length;h++){var u=l[h];if(u._cellWidth=e[h],u instanceof m)for(var c=u._cellWidths=[],n=0;n<u.cspan;n++)c[n]=e[h+n]||0}},C.prototype._childIndexChanged=function(t){this.parent&&this.parent._childIndexChanged(t)},C.prototype._childWidthChanged=function(t){this.parent&&this.parent._childWidthChanged(t)},C.prototype._childFillWidthChanged=function(t){this.parent&&this.parent._childFillWidthChanged(t)},C.prototype.$_checkVisible=function(t){var e;if(!t||(e=t.vindex)<0||t!==this.getVisible(e))throw new Error("Column is not a visible group member");return e},C.prototype.$_collectHorzColumns=function(t,e,i){if(this.horizontal)for(var o=e;o<=i;o++){var n=this._visibles[o];n instanceof C?n.$_collectHorzColumns(t,0,n.visibleCount-1):n instanceof m&&t.push(n._columnObj)}},C.prototype.$_changeChildVIndex=function(t,e){t&&e!=t.vindex&&0<=e&&e<this._visibles.length&&this.$_changeChildIndex(t,this._visibles[e].index)},C.prototype.$_changeChildIndex=function(t,e){if(t){var i=t.index;if(i!=e&&0<=e&&e<this._items.length){e=e<=i?e:e+(this._items[e].getHeaderSpan()-1)-(t.getHeaderSpan()-1);for(var o=this._items.splice(i,t.getHeaderSpan()),n=0;n<o.length;n++)this._items.splice(e+n,0,o[n]);this.$_resetVisibles(),this._childIndexChanged(t)}}};var p,f=C;function C(t,e){var i=p.call(this)||this;return i._direction=v.HORIZONTAL,i._items=[],i._resizable=!0,i._movable=!0,i._hideChildHeaders=!1,i._childColumnMovable=!0,i._visibles=[],i._cols=0,i._rows=0,i._headerRows=0,i._expandedLayouts=[],i._collapsedLayouts=[],i._type=Jt.CellLayoutType.GROUP,i._name=t,i._direction=e==v.VERTICAL?v.VERTICAL:v.HORIZONTAL,i}e.CellLayoutGroupItem=f;function w(t,e,i){for(var o=i?t.visibleCount:t.count,n=0;n<o;n++){var r,s=i?t.getVisible(n):t.getItem(n);s instanceof m?(r=s._columnObj)&&e.push(r):s instanceof f&&w(s,e,i)}}function x(t,e,i){for(var o=i?t.visibleCount:t.count,n=0;n<o;n++){var r=i?t.getVisible(n):t.getItem(n);r instanceof m?e.push(r):r instanceof f&&x(r,e,i)}}function b(t,e,i,o,n){for(var r=o?t.visibleCount:t.count,s=0;s<r;s++){var a,l=o?t.getVisible(s):t.getItem(s);l instanceof m&&!n?(a=l._columnObj)&&e.push(a.name):l instanceof f&&(i&&!n||e.push(l.name),b(l,e,i,o,n))}}function I(t,e,i){for(var o=i?t.visibleCount:t.count,n=0;n<o;n++){var r,s=i?t.getVisible(n):t.getItem(n);s instanceof m?(r=s._columnObj)instanceof lt.DataColumn&&e.push(r):s instanceof f&&I(s,e,i)}}var E,S=function(t,e){for(var i=e,o=t.visibleCount;i<o;i++){var n=t.getVisible(i);if(n instanceof m)return n;if(n instanceof f&&(n=g.getSource(n.first))instanceof m)return n}return null},R=function(t,e){for(var i=e;0<=i;i--){var o=t.getVisible(i);if(o instanceof m)return o;if(o instanceof f&&(o=g.getSource(o.last))instanceof m)return o}return null},T=(E=f,ne.__extends(D,E),_dp(D,"cellWidth",{get:function(){return this._cellWidth},set:function(t){}}),_dp(D,"expandable",{get:function(){return!1},set:function(t){}}),D.prototype.resetColumns=function(t){0<this.items.length&&(this.$_bindColumns({},t,!1),this.$_resetVisibles(!1))},_dp(D,"grid",{get:function(){return this._owner.grid}}),_dp(D,"owner",{get:function(){return this._owner}}),_dp(D,"root",{get:function(){return this}}),D.prototype._changed=function(){this._owner&&this._owner._changed()},D.prototype._childIndexChanged=function(t){this._owner._itemIndexChanged(t)},D.prototype._childWidthChanged=function(t){this._owner._itemWidthChanged(t)},D.prototype._childFillWidthChanged=function(t){this._owner._itemFillWidthChanged(t)},D.prototype._setColumns=function(t){for(var e=this._items,i=e.length=0,o=t.count;i<o;i++){var n=new m(t.getColumn(i));e.push(n),n._parent=this}this.resetColumns(t)},D);function D(t){var e=E.call(this,"$_root_$",null)||this;return e._owner=t,e.header._visible=!1,e}k=P.EventAware,ne.__extends(F,k),F.prototype._doDispose=function(){this._grid=null,this._root=this._root.dispose(),k.prototype._doDispose.call(this)},_dp(F,"grid",{get:function(){return this._grid}}),_dp(F,"count",{get:function(){return this._root.count}}),_dp(F,"visibleCount",{get:function(){return this._root.visibleCount}}),_dp(F,"headerRows",{get:function(){return this._root._hlen}}),_dp(F,"dataRows",{get:function(){return this._root._dlen}}),_dp(F,"first",{get:function(){return this._root.first}}),_dp(F,"last",{get:function(){return this._root.last}}),_dp(F,"firstColumn",{get:function(){return this._root.firstColumn}}),F.prototype.load=function(t){return this.$_clear(),this._loading=!0,this._root._loadItems(t),this._changed(),this._loading=!1,this},F.prototype.resetColumns=function(t){this._root.resetColumns(t)},F.prototype.cleanColumns=function(){this._root.cleanColumns()},F.prototype.invalidate=function(){this._changed()},F.prototype.invalidateIndices=function(t){this.grid.displayOptions.remergeWhenColumnMoved&&this.grid._populateMerges(),this.grid.clearAddSelection(),this._moveColumn=t,this._changed()},F.prototype.invalidateSize=function(){this._resized||(this._resized=!0,this.grid.invalidateCellLayouts())},F.prototype.getVisible=function(t){return this._root.getVisible(t)},F.prototype.addLayout=function(t,e){return this._root.addLayout(t,e)},F.prototype.removeLayout=function(t){this._root.removeLayout(t)},F.prototype.expandLayout=function(t,e){this.fireExpanding(t,e)&&(t._expanded=e,this._root.$_resetVisibles(),this._changed(),this.fireExpanded(t,e))},F.prototype.setColumns=function(t){this._root._setColumns(t),this._changed()},F.prototype.layoutByColumn=function(t){return t&&this._root.findLayout(t)},F.prototype.layoutByName=function(t){return t&&this._root.layoutByName(t)},F.prototype.getHeaderCellPos=function(t){for(var e=0;e<this._headerCells.length;e++)for(var i=this._headerCells[e],o=0;o<i.length;o++)if(i[o]instanceof m&&i[o]._columnObj===t)return{row:e,col:o}},F.prototype.getDataCellPos=function(t){for(var e=0;e<this._dataCells.length;e++)for(var i=this._dataCells[e],o=0;o<i.length;o++)if(i[o]instanceof m&&i[o]._columnObj===t)return{row:e,col:o}},F.prototype.getDataColumns=function(t){var e=[];return I(this._root,e,t=void 0===t?!0:t),e},F.prototype.collectColumns=function(t,e,i){var o=[];return w(this._root,o,e),o},F.prototype.collectLayouts=function(t){var e=[];return x(this._root,e,!0),e},F.prototype.collectColumnNames=function(t,e,i,r){var o=[],n=this._root;return r?"string"==typeof r?n=function t(e){for(var i=0,o=e.count;i<o;i++){var n=e.getItem(i);if(n instanceof f)return n.name===r?n:t(n)}}(n):r instanceof f&&(n=r):n=this._root,n?(b(n,o,t,e,i),o):null},F.prototype.collectDataColumns=function(t,e){var i=(t.col>e.col?e:t).col,o=(t.col>e.col?t:e).col,n=[];I(this._root,n,!0);for(var r=n.length-1;0<=r;r--){var s=n[r].layout.col;(s<i||o<s)&&n.splice(r,1)}return n},F.prototype.getHorzColumns=function(t,e){void 0===t&&(t=0);var e=null==e?t+this._root.visibleCount-1:t+e-1,i=[];return this._root.$_collectHorzColumns(i,t,e),i},F.prototype.getHomeOf=function(t){return t=g.getSource(t),t=this._dataCells[t?t.row:0][0],g.getSource(t)},F.prototype.getEndOf=function(t){t=g.getSource(t);var e=this._dataCells,i=t?t.row:e.length-1;return t=e[i][e[i].length-1],g.getSource(t)},F.prototype.getTopOf=function(t){return t=this._dataCells[0][t.col],g.getSource(t)},F.prototype.getBottomOf=function(t,e){var i=this._dataCells;return t=i[i.length-1][t.col],e?t:g.getSource(t)},F.prototype.getLowerOf=function(t){t=g.getSource(t);var e=this._dataCells,i=t.row,o=t.col,n=0;return t=(i+t.rows<e.length?e[i+t.rows]:(n=1,e[0]))[o],{dy:n,layout:g.getSource(t)}},F.prototype.getUpperOf=function(t){t=g.getSource(t);var e=this._dataCells,i=t.row,o=t.col,n=0;return t=(0<i?e[i-1]:(n=-1,e[e.length-1]))[o],{dy:n,layout:g.getSource(t)}},F.prototype.getRightOf=function(t){var e=this._dataCells[t.row],i=t.col;return i+t.cols<e.length?(t=e[i+t.cspan],g.getSource(t)):null},F.prototype.getLeftOf=function(t){t=g.getSource(t);var e=this._dataCells[t.row],i=t.col;return 0<i?(t=e[i-1],g.getSource(t)):null},F.prototype.getCellWidths=function(t,e){for(var i=0,o=0;o<e;o++)i+=this._cellWidths[o+t];return i},F.prototype.getLayout=function(l,h,d,u,c,_){function p(t){if(t instanceof m){var e=t.firstColumn;if(e)return i=(i=e.visible&&t.visible||d)&&c.indexOf(e.name)<0||0<=u.indexOf(e.name),(r=t.toProxy(!1)).visible=l?i:t.visible,r.width=(l&&h?t._fitWidth:t._cellWidth)||t.width,r.column=e.name,r}else{if(t.isProxy)return(l&&h?t._fitWidth:t._cellWidth)||t.width;if(t instanceof f){var i,o=t._items,n=[];i=(i=t.visible||d)&&c.indexOf(t.name)<0||0<=u.indexOf(t.name);for(var r,s=0,a=o.length;s<a;s++)n.push(p.call(this,o[s]));if((r=t.toProxy(!1)).name=t.name,r.items=n,r.visible=l?i:t.visible,r.header=t.header&&t.header.toProxy(!1),l&&r.expandable)switch(_){case"current":break;case"expand":r.expanded=!0;break;case"collapse":r.expanded=!1;break;default:r.expandable=!1}return delete r.width,r}}}void 0===u&&(u=[]),void 0===c&&(c=[]),h=h&&!!this.grid.layoutManager.isColumnFitted;for(var t=this._root._items,e=[],i=0,o=t.length;i<o;i++)e.push(p.call(this,t[i]));return e},F.prototype.expandAll=function(t,e){this._root.expandAll(t,e)},F.prototype.isShowing=function(t){for(var e=t;e&&e.parent;){if(e.parent.visibles.indexOf(e)<0)return!1;e=e.parent}return!0},F.prototype.isDefault=function(){return!1},F.prototype._changed=function(){var t;!this._dirty&&(this._dirty=!0,t=this.grid)&&t.invalidateLayout()},F.prototype.$_clear=function(){this._headerCells=[],this._dataCells=[]},F.prototype.$_refresh=function(t,e){this._dirty?(this._root.$_bindColumns({},t),this._root.$_parseExpandLayouts(),this._root.$_resetVisibles(),this.$_parseCells(this._root,t),this.$_calculateCellWidths(this._root,e),this._dirty=!1):this._resized&&this.$_calculateCellWidths(this._root,e),this._resized=!1,this._moveColumn=null},F.prototype.$_refresh2=function(t,e){this._root.$_bindColumns({},t,!0),this._root.$_parseExpandLayouts(),this._root.$_resetVisibles(!0),this.$_parseCells(this._root,t),this.$_calculateCellWidths(this._root,e)},F.prototype.$_prepareMerges=function(t){for(var e=this.collectColumns(!0,!0,!1),i=0,o=e.length;i<o;i++){var n,r=e[i],r=this.layoutByColumn(r);r&&r.canMerge()&&((n=(n=r.merges)||new Kt.ColumnMergeManager(r)).clear(),n.initialize(10),n.refreshRooms(0,t.itemCount-1,!0))}},F.prototype.$_prepareLayout=function(t,e,i){for(var o=0,n=this._root.visibleCount;o<n;o++)this._root.getVisible(o)._prepareLayout(t,o<e,n-i<=o)},F.prototype.$_parseCells=function(t,e){t=t._visibles;this.$_parseHeaderCells(t),this.$_parseDataCells(t)},F.prototype.$_parseHeaderCells=function(t){for(var e=this._headerCells=[],i=0,o=0,n=t;o<n.length;o++)var r=n[o],i=Math.max(i,r.headerRows);for(var s=0;s<i;s++)e.push([]);this._root.$_parseHeaderCells(e,0,0),this._root.$_adjustHeaderCells(e)},F.prototype.$_parseDataCells=function(t){for(var e=this._dataCells=[],i=0,o=0,n=t;o<n.length;o++)var r=n[o],i=Math.max(i,r.rows);for(var s=0;s<i;s++)e.push([]);this._root.$_parseDataCells(e,0,0),this._root.$_adjustDataCells(e);for(var a=0,l=e;a<l.length;a++)for(var h=l[a],d=0;d<h.length;){var u=h[d];if(u._defColSpan=1,u.isNull)d++;else for(;++d<h.length;){var c=h[d];if(!(!c||c.isProxy&&c.source===u||c.isNull&&c.group===u.group))break;u._defColSpan++}}},F.prototype.$_calculateCellWidths=function(t,e){if(this._dirty){this._cellWidths&&!(this._cellWidths.length<=0)&&this._moveColumn||t.$_collectCellWidths(e);for(var i=this._cellWidths=[],o=0,n=t.cols;o<n;o++)i.push(0);t.$_calcCellWidths(this._dataCells,i,!1)}else this._resized&&t.$_calcCellWidths(this._dataCells,this._cellWidths,!0)},F.prototype.$_clearFitWidths=function(){this._root._clearFitWidth()},F.prototype._columnsChanged=function(t){},F.prototype._columnChanged=function(t){},F.prototype._itemIndexChanged=function(t){this.invalidateIndices(t)},F.prototype._itemWidthChanged=function(t){this.invalidateSize()},F.prototype._itemFillWidthChanged=function(t){this.grid.layoutManager.isColumnFitted&&this.invalidateSize()},F.prototype._clearMergeGrouped=function(){this._root.clearMergeGrouped()},F.prototype.$_changeCellWidths=function(t,e,i,o){for(var n=this._cellWidths,r=[],s=0,a=0;a<e;a++)s+=n[t+a],r.push(s);for(var l=i/s,a=0;a<e-1;a++)r[a]=Math.round(r[a]*l);r[e-1]=i;for(a=e-1;0<a;a--)n[t+a]=Math.max(n[t+a]+r[a]-r[a-1],o);n[t]=Math.max(n[t]+r[0],o),this.invalidateSize()},F.prototype.$_calcGroupWidths=function(){var a=this._cellWidths;!function t(e){for(var i=0,o=0;o<e._clen;o++)i+=a[e.col+o];e._width=e._cellWidth=i;for(var n=0,r=e.visibles;n<r.length;n++){var s=r[n];s instanceof f&&t(s)}}(this._root)},F.prototype.fireExpanding=function(t,e){return this.fireConfirmEvent(e?F.LAYOUT_EXPANDING:F.LAYOUT_COLLAPSING,t)},F.prototype.fireExpanded=function(t,e){this.fireEvent(e?F.LAYOUT_EXPANDED:F.LAYOUT_COLLAPSED,t)},F.LAYOUT_EXPANDING="onLayoutExpanding",F.LAYOUT_COLLAPSING="onLayoutCollapsing",F.LAYOUT_EXPANDED="onLayoutExpanded",F.LAYOUT_COLLAPSED="onLayoutCollapsed";var k,M=F;function F(t){var e=k.call(this)||this;return e._cellWidths=[],e._grid=t,e._root=new T(e),e}e.GridCellLayout=M;L=M,ne.__extends(O,L),O.prototype._columnsChanged=function(t){this.setColumns(t),L.prototype._columnsChanged.call(this,t)},O.prototype.addLayout=function(t){return null},O.prototype.removeLayout=function(t){},O.prototype.isDefault=function(){return!0};var L,M=O;function O(t){return L.call(this,t)||this}e.DefaultCellLayout=M})),_t=(t(ct),ct.CellLayoutItem,ct.ProxyCellLayoutItem,ct.CellLayoutColumnItem,ct.ColumnLayoutDirection,ct.CellLayoutHeader,ct.CellLayoutGroupHeader,ct.CellLayoutGroupItem,ct.GridCellLayout,ct.DefaultCellLayout,e(function(t,e){Object.defineProperty(e,"__esModule",{value:!0}),(a=o=e.VerticalMoveStep||(e.VerticalMoveStep={})).ROW="row",a.CELL="cell",n=se.Base,ne.__extends(r,n),r.temp=function(t,e,i){return void 0===e&&(e=0),(r.$_temp=r.$_temp?r.$_temp:new r)._grid=t,r.$_temp._itemIndex=e,r.$_temp._layout=i instanceof ct.CellLayoutItem?i:i&&i.layout,r.$_temp},r.areEquals=function(t,e){return t==e||t&&e&&t._grid===e._grid&&t._itemIndex===e._itemIndex&&t._layout===e._layout},r.equalsTo=function(t,e,i){return t&&t._itemIndex===e&&t.layout===i},r.clearTemp=function(){r.$_temp&&(r.$_temp=r.$_temp.dispose())},r.compareHorz=function(t,e){if(t&&e)return t.layout.distance-e.layout.distance},r.prototype._doDispose=function(){this._grid=null,this._layout=null,n.prototype._doDispose.call(this)},_dp(r,"grid",{get:function(){return this._grid}}),_dp(r,"itemIndex",{get:function(){return this._itemIndex},set:function(t){this._itemIndex=t}}),_dp(r,"layout",{get:function(){return this._layout},set:function(t){this._layout=t}}),_dp(r,"column",{get:function(){return this._layout&&this._layout.firstColumn},set:function(t){"string"==typeof t&&(t=this.grid&&this.grid.columnByName(t)),this._layout=t&&t.layout}}),_dp(r,"dataColumn",{get:function(){var t=this.column;return t instanceof lt.DataColumn?t:null}}),_dp(r,"valueColumn",{get:function(){var t=this.column;return t instanceof lt.ValueColumn?t:null}}),_dp(r,"dataField",{get:function(){var t=this.dataColumn;return t instanceof lt.DataColumn?t.dataIndex:-1}}),_dp(r,"item",{get:function(){return this._grid&&this._grid.getItem(this._itemIndex)}}),_dp(r,"dataRow",{get:function(){var t=this.item;return t?t.dataRow:-1},set:function(t){this._grid&&(t=this._grid.getItemOfRow(t,!1))&&(this.itemIndex=t.index)}}),_dp(r,"fieldName",{set:function(t){this._grid&&(t=this._grid.columnByField(t))&&(this.column=t)}}),_dp(r,"fieldIndex",{set:function(t){this._grid&&(t=this._grid.columnByField(t))&&(this.column=t)}}),_dp(r,"dataId",{get:function(){var t=this.item;return t?t.dataId:-1}}),_dp(r,"value",{get:function(){var t=this.column;if(t instanceof lt.DataColumn){var e=t.dataIndex;if(e<0)throw new Error("Not exists data field: "+t.fieldName);t=this.item;if(t)return t.getData(e);throw new Error("Invalid item index: "+this._itemIndex)}}}),_dp(r,"fixed",{get:function(){var t,e=this._layout;return!!(this._grid&&e&&e.visible)&&(t=this._grid.layoutManager,(e=e.root.vindex)<t.fixedLayoutCount||e>=t.rightFirstLayout||0<=this._itemIndex&&this._itemIndex<t.fixedItemCount)}}),_dp(r,"rowFixed",{get:function(){var t;return!!this._grid&&(t=this._grid.layoutManager,0<=this._itemIndex)&&this._itemIndex<t.fixedItemCount}}),_dp(r,"colFixed",{get:function(){var t;return!!(this._grid&&this._layout&&this._layout.visible)&&(t=this._grid.layoutManager,this._layout.root.vindex<t.fixedLayoutCount)}}),_dp(r,"rightFixed",{get:function(){var t;return!!(this._grid&&this._layout&&this._layout.visible)&&(t=this._grid.layoutManager,this._layout.root.vindex>=t.rightFirstLayout)}}),_dp(r,"isTop",{get:function(){return!this._layout||!this._layout.group||(this.$_isSpanned()?this.grid.$_isTopCell(this):ct.CellLayoutGroupItem.isTop(this._layout))}}),_dp(r,"isBottom",{get:function(){return!this._layout||!this._layout.group||(this.$_isSpanned()?this.grid.$_isBottomCell(this):ct.CellLayoutGroupItem.isBottom(this._layout))}}),_dp(r,"isLeft",{get:function(){var t;return!!this._layout&&((t=this._layout.group)?0==t.vindex&&ct.CellLayoutGroupItem.isLeft(this._layout):0==this._layout.vindex)}}),_dp(r,"isRight",{get:function(){var t;return!!this._layout&&((t=this._layout.group)?0==t.vindex&&ct.CellLayoutGroupItem.isRight(this._layout):this._layout.vindex==this._grid.visibleLayoutCount-1)}}),_dp(r,"isFirst",{get:function(){if(this._layout&&(this._grid&&0<this._grid.visibleLayoutCount))return ct.CellLayoutItem.getSource(this._grid.activeCellLayout.first)===this._layout;return!1}}),_dp(r,"isEditableFirst",{get:function(){var t=this._grid;if(t&&this._layout){var e=t.collectColumns(!0,!0,!0),i=e.indexOf(this._layout.firstColumn);if(0<=i){for(var o=i;o--;){var n=e[o];if(n instanceof lt.SeriesColumn)return!1;n=r.temp(t,this.itemIndex,n);if(t.getWritableAt(n))return!1}return!0}}return!1}}),_dp(r,"isEditableLast",{get:function(){var t=this._grid;if(t&&this._layout)for(var e=t.collectColumns(!0,!0,!0),i=e.indexOf(this._layout.firstColumn)+1,o=e.length;i<o;i++){var n=e[i];if(n instanceof lt.SeriesColumn)return!1;n=r.temp(t,this.itemIndex,n);if(t.getWritableAt(n))return!1}return!0}}),_dp(r,"isLast",{get:function(){if(this._layout&&(this._grid&&0<this._grid.visibleLayoutCount))return ct.CellLayoutItem.getSource(this._grid.activeCellLayout.last)===this._layout;return!1}}),r.prototype.set=function(t,e,i){return void 0!==i&&(this._grid=i),this._itemIndex=t,this._layout=e instanceof lt.GridColumn?e.layout:e,this},r.prototype.assign=function(t){return t?(t.grid&&(this._grid=t._grid),this._itemIndex=t._itemIndex,this._layout=t._layout):(this._itemIndex=-1,this._layout=null),this},r.prototype.reset=function(){return this._itemIndex=-1,this._layout=null,this},r.prototype.clone=function(){return new r(this._grid,this._itemIndex,this._layout)},r.prototype.proxy=function(){return{itemIndex:isNaN(this._itemIndex)?-1:this._itemIndex,column:this.column?this.column.name:null,dataRow:this.dataRow,fieldIndex:this.dataColumn?this.column.dataIndex:-1,fieldName:this.dataColumn?this.column.fieldName:null}},r.prototype.normalize=function(t){return t&&(this._grid=t,this._layout||(this._layout=t.getFirstLayout()),this._itemIndex=Math.max(0,Math.min(this._itemIndex,t.itemCount-1))),this},r.prototype.incRow=function(t){this._grid&&(this._itemIndex=Math.max(0,Math.min(this._grid.itemCount-1,this._itemIndex+t)))},r.prototype.first=function(){this._grid&&(this._itemIndex=0)},r.prototype.last=function(){this._grid&&(this._itemIndex=this._grid.itemCount-1)},r.prototype.right=function(){var t=this._grid&&this.$_gridLayout().getRightOf(this._layout);t&&(this._layout=t)},r.prototype.left=function(){var t=this._grid&&this.$_gridLayout().getLeftOf(this._layout);t&&(this._layout=t)},r.prototype.next=function(){var t=d(this._grid,this._layout);if(t)return this._layout=t,!0},r.prototype.prev=function(){var t=u(this._grid,this._layout);if(t)return this._layout=t,!0},r.prototype.home=function(){this._layout=this._grid&&this.$_gridLayout().getHomeOf(this._layout)},r.prototype.end=function(){this._layout=this._grid&&this.$_gridLayout().getEndOf(this._layout)},r.prototype.firstCell=function(){this._layout=this._grid&&ct.CellLayoutItem.getSource(this.grid.activeCellLayout.first)},r.prototype.lastCell=function(){this._layout=this.grid&&ct.CellLayoutItem.getSource(this.grid.activeCellLayout.last)},r.prototype.down=function(t,e,i){void 0===t&&(t=o.ROW),this._grid&&(t==o.ROW&&!e||this.isBottom||i?this._itemIndex<this._grid.itemCount-1&&(t==o.CELL&&(this._layout=this.$_gridLayout().getTopOf(this._layout)),this.incRow(1)):this._grid.spanned?this._layout=this._grid.$_getLowerOfCell(this):this._layout=this.$_gridLayout().getLowerOf(this._layout).layout)},r.prototype.up=function(t,e,i){void 0===t&&(t=o.ROW),this._grid&&(t==o.ROW&&!e||this.isTop||i?0<this._itemIndex&&(t==o.CELL&&(this._grid.spanned?(e=this._grid.$_getUpperOfCell(this),this._layout=e||this.$_gridLayout().getBottomOf(this._layout)):this._layout=this.$_gridLayout().getBottomOf(this._layout)),this.incRow(-1)):this._grid.spanned?this._layout=this._grid.$_getUpperOfCell(this):this._layout=this.$_gridLayout().getUpperOf(this._layout).layout)},r.prototype.getValue=function(){var t,e;if(this._grid)return t=this.dataColumn,e=this._grid.getItem(this._itemIndex),t&&e&&e.getData(t.dataIndex)},r.prototype.assignFrom=function(t){t instanceof r?(this._grid=t._grid,this._layout=t._layout,this._itemIndex=t._itemIndex):n.prototype.assignFrom.call(this,t)},r.prototype.toString=function(){return"("+this._itemIndex+", "+this.column+")"},r.prototype.$_gridLayout=function(){return this._grid._activeCellLayout},r.prototype.$_isSpanned=function(){return this._grid&&this._grid.spanned};var o,n,i=r;function r(t,e,i){void 0===e&&(e=-1);var o=n.call(this,!0)||this;return o._itemIndex=-1,o._grid=t,o._itemIndex=e,o._layout=i instanceof lt.GridColumn?i.layout:i,o}e.CellIndex=i;s=i,ne.__extends(l,s),l.tempItem=function(t,e,i){return(l.$_itemTemp=l.$_itemTemp?l.$_itemTemp:new l)._grid=t,l.$_itemTemp._item=e,l.$_itemTemp._itemIndex=e.index,l.$_itemTemp._layout=i instanceof ct.CellLayoutItem?i:i&&i.layout,l.$_itemTemp},_dp(l,"item",{get:function(){return this._item}});var s,a=l;function l(t,e,i){t=s.call(this,t,e&&e.index,i)||this;return t._item=e,t}e.DummyCellIndex=a;var h,d=function(t,e){if(!t||!e)return null;var i=t.layoutManager,o=ct.CellLayoutGroupItem.getNext(e);if(o)return o;for(var n=(e.group?e.root:e).vindex+1,r=i.layoutCount;n<r;n++){if((o=i.getLayout(n))instanceof ct.CellLayoutColumnItem)return o;if(o instanceof ct.CellLayoutGroupItem&&(o=ct.CellLayoutItem.getSource(o.first)))return o}},u=function(t,e){if(!t||!e)return null;var i=t.layoutManager,o=ct.CellLayoutGroupItem.getPrev(e);if(o)return o;for(var n=(e.group?e.root:e).vindex-1;0<=n;n--){if((o=i.getLayout(n))instanceof ct.CellLayoutColumnItem)return o;if(o instanceof ct.CellLayoutGroupItem&&(o=ct.CellLayoutItem.getSource(o.last)))return o}},a=(h=se.Base,ne.__extends(c,h),c.$_setRange=function(t,e,i,o,n){return t._row1=e<=o?e:o,t._row2=e<=o?o:e,t._col1=i.col<=n.col?i:n,t._col2=i.col<=n.col?n:i,t},c.create=function(t,e){return e&&t!==e?c.$_setRange(new c,t.itemIndex,t.layout,e.itemIndex,e.layout):((e=new c)._row1=e._row2=t.itemIndex,e._col1=e._col2=t.layout,e)},c.temp=function(t,e){var i=c.$_TEMP;return e&&t!==e?c.$_setRange(i,t.itemIndex,t.layout,e.itemIndex,e.layout):(i._row1=i._row2=t.itemIndex,i._col1=i._col2=t.layout,i)},c.createRange=function(t,e,i,o){return c.$_setRange(new c,t,e,i,o)},_dp(c,"empty",{get:function(){return this._row2<this._row1||!this._col2&&!this._col2}}),_dp(c,"r1",{get:function(){return this._row1}}),_dp(c,"c1",{get:function(){return this._col1}}),_dp(c,"r2",{get:function(){return this._row2}}),_dp(c,"c2",{get:function(){return this._col2}}),_dp(c,"top",{get:function(){return this._row1<=this._row2?this._row1:this._row2}}),_dp(c,"bottom",{get:function(){return this._row1<=this._row2?this._row2:this._row1}}),_dp(c,"firstCell",{get:function(){var t=new i;return t.itemIndex=this._row1<=this._row2?this._row1:this._row2,this._col1.col===this._col2.col?t.layout=this._col1.row<=this._col2.row?this._col1:this._col2:t.layout=this._col1.col<=this._col2.col?this._col1:this._col2,t}}),_dp(c,"lastCell",{get:function(){var t=new i;return t.itemIndex=this._row1>=this._row2?this._row1:this._row2,this._col1.col===this._col2.col?t.layout=this._col1.row>=this._col2.row?this._col1:this._col2:t.layout=this._col1.col>=this._col2.col?this._col1:this._col2,t}}),c.prototype.contains=function(t,e){return!!e&&(e=e.col,t>=this._row1)&&t<=this._row2&&e>=this._col1.col&&e<=this._col2.col},c.prototype.normalize=function(){var t;return this._row1>this._row2&&(t=this._row1,this._row1=this._row2,this._row2=t),this._col1.col<=this._col2.col&&!(this._col1.row>this._col2.row)||(t=this._col1,this._col1=this._col2,this._col2=t),this},c.prototype.normalizeData=function(){return this.normalize(),this},c.prototype.intersectsWith=function(t){return!1},c.NULL=new c,c.$_TEMP=new c,c);function c(){var t=h.call(this)||this;return t._row1=0,t._row2=0,t}e.CellRange=a})),Zt=(t(_t),_t.VerticalMoveStep,_t.CellIndex,_t.DummyCellIndex,_t.CellRange,e(function(t,e){Object.defineProperty(e,"__esModule",{value:!0});i=$.ExpressionRuntime,ne.__extends(o,i),o.prototype._doDispose=function(){i.prototype._doDispose.call(this)},o.prototype.isIdentifier=function(t){return t=t.toLowerCase(),o.IDENTS.hasOwnProperty(t)?o.IDENTS[t]:i.prototype.isIdentifier.call(this,t)},o.prototype.evaluateIdentifier=function(t){switch(t){case o.ID_COUNT:return this._getCount();case o.ID_SUM:return this._getSum();case o.ID_MAX:return this._getMax();case o.ID_MIN:return this._getMin();case o.ID_AVG:return this._getAvg();case o.ID_VAR:return this._getVar();case o.ID_VARP:return this._getVarp();case o.ID_STDEV:return this._getStdev();case o.ID_STDEVP:return this._getStdevp();case o.ID_DATA_COUNT:return this._getDataCount();case o.ID_DATA_AVG:return this._getDataAvg()}throw new $.ExpressionEvaluationError("Invalid identifier key: "+t)},o.prototype.evaluateIndexerI=function(t,e){throw new $.ExpressionEvaluationError("Invalid identifier indexer: "+t)},o.prototype.evaluateIndexerS=function(t,e,i){throw new $.ExpressionEvaluationError("Invalid identifier indexer: "+t)},o.IDENTS={count:o.ID_COUNT=0,sum:o.ID_SUM=1,max:o.ID_MAX=2,min:o.ID_MIN=3,avg:o.ID_AVG=4,var:o.ID_VAR=5,varp:o.ID_VARP=6,stdev:o.ID_STDEV=7,stdevp:o.ID_STDEVP=8,datacount:o.ID_DATA_COUNT=9,dataavg:o.ID_DATA_AVG=10};var i,n=o;function o(){return i.call(this)||this}e.SummaryExpressionRuntime=n;r=n,ne.__extends(a,r),a.prototype._doDispose=function(){this._grid=null,this._ds=null,this._column=null,this._summarizer=null,r.prototype._doDispose.call(this)},a.prototype.setColumn=function(t,e){this._column=t,this._grid=t.grid,this._ds=this._grid.dataSource,this._fieldCount=this._ds.fieldCount,this._summarizer=e},a.prototype.isIdentifier=function(t){return t=t.toLowerCase(),n.IDENTS.hasOwnProperty(t)?n.IDENTS[t]:r.prototype.isIdentifier.call(this,t)},a.prototype.evaluateIndexerI=function(t,e){if(this._summarizer){if(e<0||e>=this._fieldCount)throw new $.ExpressionEvaluationError("Data field index out of bounds: "+e);switch(t){case n.ID_SUM:return this._summarizer.getSum(e);case n.ID_COUNT:return this._summarizer.getCount(e);case n.ID_MAX:return this._summarizer.getMax(e);case n.ID_MIN:return this._summarizer.getMin(e);case n.ID_AVG:return this._summarizer.getAvg(e);case n.ID_VAR:return this._summarizer.getVar(e);case n.ID_VARP:return this._summarizer.getVarp(e);case n.ID_STDEV:return this._summarizer.getStdev(e);case n.ID_STDEVP:return this._summarizer.getStdevp(e);case n.ID_DATA_COUNT:return this._summarizer.getDataCount(e);case n.ID_DATA_AVG:return this._summarizer.getDataAvg(e)}throw new $.ExpressionEvaluationError("Invalid identifier indexer: "+t)}switch(t){case n.ID_SUM:case n.ID_COUNT:return 0;case n.ID_MAX:case n.ID_MIN:case n.ID_AVG:case n.ID_VAR:case n.ID_VARP:case n.ID_STDEV:case n.ID_STDEVP:return NaN}},a.prototype.evaluateIndexerS=function(t,e,i){if(this._summarizer&&this._ds){var o=i?this._ds.getFieldIndexC(e):this._ds.getFieldIndex(e);if(o<0||o>=this._fieldCount)throw new $.ExpressionEvaluationError("Data field index out of bounds: "+o);switch(t){case n.ID_SUM:return this._summarizer.getSum(o);case n.ID_COUNT:return this._summarizer.getCount(o);case n.ID_MAX:return this._summarizer.getMax(o);case n.ID_MIN:return this._summarizer.getMin(o);case n.ID_AVG:return this._summarizer.getAvg(o);case n.ID_VAR:return this._summarizer.getVar(o);case n.ID_VARP:return this._summarizer.getVarp(o);case n.ID_STDEV:return this._summarizer.getStdev(o);case n.ID_STDEVP:return this._summarizer.getStdevp(o)}throw new $.ExpressionEvaluationError("Invalid identifier indexer: "+t)}switch(t){case n.ID_SUM:case n.ID_COUNT:return 0;case n.ID_MAX:case n.ID_MIN:case n.ID_AVG:case n.ID_VAR:case n.ID_VARP:case n.ID_STDEV:case n.ID_STDEVP:return NaN}},a.prototype._getCount=function(){return this._summarizer?this._summarizer.getCount(this._column.dataIndex):0},a.prototype._getSum=function(){return this._summarizer?this._summarizer.getSum(this._column.dataIndex):0},a.prototype._getMax=function(){return this._summarizer?this._summarizer.getMax(this._column.dataIndex):NaN},a.prototype._getMin=function(){return this._summarizer?this._summarizer.getMin(this._column.dataIndex):NaN},a.prototype._getAvg=function(){return this._summarizer?this._summarizer.getAvg(this._column.dataIndex):NaN},a.prototype._getVar=function(){return this._summarizer?this._summarizer.getVar(this._column.dataIndex):NaN},a.prototype._getVarp=function(){return this._summarizer?this._summarizer.getVarp(this._column.dataIndex):NaN},a.prototype._getStdev=function(){return this._summarizer?this._summarizer.getStdev(this._column.dataIndex):NaN},a.prototype._getStdevp=function(){return this._summarizer?this._summarizer.getStdevp(this._column.dataIndex):NaN},a.prototype._getDataCount=function(){return this._summarizer?this._summarizer.getDataCount(this._column.dataIndex):NaN},a.prototype._getDataAvg=function(){return this._summarizer?this._summarizer.getDataAvg(this._column.dataIndex):NaN};var r,s=a;function a(){return r.call(this)||this}e.ColumnSummaryRuntime=s;l=s,ne.__extends(h,l),h.prototype._doDispose=function(){l.prototype._doDispose.call(this)},_dp(h,"item",{get:function(){return this._item}}),h.prototype.setItem=function(t){this._item=t},h.prototype._getCount=function(){return this._item.getNumber(this._column.dataIndex)},h.prototype._getSum=function(){return this._item.getSum(this._column.dataIndex)},h.prototype._getMax=function(){return this._item.getMax(this._column.dataIndex)},h.prototype._getMin=function(){return this._item.getMin(this._column.dataIndex)},h.prototype._getAvg=function(){return this._item.getAvg(this._column.dataIndex)},h.prototype._getVar=function(){return this._item.getVar(this._column.dataIndex,1)},h.prototype._getVarp=function(){return this._item.getVar(this._column.dataIndex,0)},h.prototype._getStdev=function(){return this._item.getStdev(this._column.dataIndex,1)},h.prototype._getStdevp=function(){return this._item.getStdev(this._column.dataIndex,0)},h.prototype._getDataCount=function(){return this._item.getDataCount(this._column.dataIndex)},h.prototype._getDataAvg=function(){return this._item.getDataAvg(this._column.dataIndex)};var l,s=h;function h(){return l.call(this)||this}e.RowGroupSummaryRuntime=s})),Qt=(t(Zt),Zt.SummaryExpressionRuntime,Zt.ColumnSummaryRuntime,Zt.RowGroupSummaryRuntime,e(function(t,e){Object.defineProperty(e,"__esModule",{value:!0});i=se.Base,ne.__extends(n,i),n.prototype._doDispose=function(){this._clearColumn(),this._columns=null,this._owner=null,this._nameMap=null,i.prototype._doDispose.call(this)},_dp(n,"owner",{get:function(){return this._owner}}),_dp(n,"count",{get:function(){return this._columns.length}}),_dp(n,"columns",{get:function(){return this._columns.slice()}}),n.prototype.getColumn=function(t){return this._columns[t]},n.prototype.setColumns=function(t){if(this._columns.length=0,this._nameMap={},t)for(var e=0,i=t;e<i.length;e++){var o=i[e],o=this._addColumn(o);if(!o)throw new Error("column is undefined");o.$_owner=this}this._orgColumns=this._columns.slice()},n.prototype.add=function(t,e){t=this._addColumn(t,void 0===e?-1:e);return null!=t&&(t.$_owner=this),t},n.prototype.remove=function(t){return!!this._removeColumn(t)},n.prototype.resetIndices=function(){if(this._owner)for(var t=0,e=this._columns.length;t<e;t++){var i=this._columns[t];i.$_setIndex(t),i._resetIndices(this._owner)}},n.prototype.resetSortStates=function(){if(this._owner)for(var t=this._owner.getSortDirections(),e=this._owner.getSortFields(),i=0,o=this._columns.length;i<o;i++){var n=this._columns[i];n instanceof lt.DataColumn&&(n.sortOrder=e.indexOf(n.dataIndex),n.sortDirection=t[n.sortOrder])}},n.prototype.columnByName=function(t){return this._nameMap[t]},n.prototype.columnByField=function(t){if(0<=t)for(var e=0,i=this.count;e<i;e++){var o=this.getColumn(e);if(o instanceof lt.DataColumn&&o.dataIndex==t)return o}return null},n.prototype.columnsByField=function(t){var e=[];if(0<=t)for(var i=0,o=this.count;i<o;i++){var n=this.getColumn(i);n instanceof lt.DataColumn&&n.dataIndex==t&&e.push(n)}return e},n.prototype.columnByTag=function(t){if(t)for(var e=0,i=this.count;e<i;e++){var o=this.getColumn(e),n=o.tag;if(re.Utils.isArray(t)&&re.Utils.equalArrays(t,n)||t instanceof Date&&n instanceof Date&&t.getTime()===n.getTime()||"object"==typeof t&&"object"==typeof n&&re.Utils.equalObjects(t,n)||n===t)return o}return null},n.prototype.columnsByTag=function(t){if(t){for(var e=[],i=0,o=this.count;i<o;i++){var n=this.getColumn(i),r=n.tag;(re.Utils.isArray(t)&&re.Utils.equalArrays(t,r)||t instanceof Date&&r instanceof Date&&t.getTime()===r.getTime()||"object"==typeof t&&"object"==typeof r&&re.Utils.equalObjects(t,r)||r===t)&&e.push(n)}return e.length?e:null}return null},n.prototype.restoreColumns=function(){this._restoreColumn()},n.prototype._addColumn=function(t,e){void 0===e&&(e=-1);var i=this._columns;if((t=!t||t instanceof lt.GridColumn?t:pi.GridBase.createColumn(t="string"==typeof t?{fieldName:t}:t))instanceof lt.GridColumn){if(0<=i.indexOf(t))throw new Error("column is already contained");e<0?i.push(t):i.splice(e,0,t);var o=t.name;if(!o||this._nameMap[o])if(o=t instanceof lt.DataColumn?t.fieldName:t instanceof lt.SeriesColumn?"series":"column",this._nameMap[o]){for(var n=0;n<1e3;n++)if(!this._nameMap[o+n]){t.name=o+=n;break}}else t.name=o;return o&&(this._nameMap[o]=t),t}return null},n.prototype._removeColumn=function(t){var e=this._columns.indexOf(t);return 0<=e&&(this._columns.splice(e,1),t.$_owner=void 0,delete this._nameMap[t.name],!0)},n.prototype._restoreColumn=function(){this._columns=this._orgColumns.slice()},n.prototype._clearColumn=function(){for(var t=0,e=this._columns;t<e.length;t++)e[t].dispose()};var i,o=n;function n(t){var e=i.call(this)||this;return e._columns=[],e._orgColumns=[],e._nameMap={},e._owner=t,e}e.ColumnCollection=o})),te=(t(Qt),Qt.ColumnCollection,e(function(t,e){Object.defineProperty(e,"__esModule",{value:!0});i=st.GridCell,ne.__extends(n,i),n.prototype._doDispose=function(){i.prototype._doDispose.call(this)},_dp(n,"text",{get:function(){return this._text},set:function(t){this._text=t}}),_dp(n,"template",{get:function(){return this._template},set:function(t){this._template=t}}),_dp(n,"itemOffset",{get:function(){return this._itemOffset},set:function(t){this._itemOffset=t}}),_dp(n,"itemGap",{get:function(){return this._itemGap},set:function(t){this._itemGap=t}}),_dp(n,"checkLocation",{get:function(){return this._checkLocation},set:function(t){this._checkLocation=t}}),_dp(n,"checked",{get:function(){return this._checked},set:function(t){this._checked=t}}),_dp(n,"showTooltip",{get:function(){return this._showTooltip},set:function(t){this._showTooltip=t}}),_dp(n,"tooltip",{get:function(){return this._tooltip},set:function(t){this._tooltip=t}}),_dp(n,"edgeMark",{get:function(){return this._edgeMark},set:function(t){this._edgeMark=t}});var i,o=n;function n(){var t=i.call(this,"headerCell")||this;return t._itemOffset=2,t._itemGap=2,t._checkLocation=ht.ColumnHeaderItemLocation.NONE,t._checked=!1,t}e.HeaderCell=o;r=$t.VisualObject,ne.__extends(a,r),a.prototype._doDispose=function(){this._cell=null,r.prototype._doDispose.call(this)},_dp(a,"minRowHeight",{get:function(){return this._minRowHeight},set:function(t){t!=this._minRowHeight&&(this._minRowHeight=t,this._changed())}}),_dp(a,"minHeight",{get:function(){return this._minHeight},set:function(t){t!=this._minHeight&&(this._minHeight=t,this._changed())}}),_dp(a,"height",{get:function(){return this._height},set:function(t){t!=this._height&&(this._height=t,this._changed())}}),_dp(a,"displayHeight",{get:function(){return this._grid.headerView.height}}),_dp(a,"heights",{get:function(){return this._heights&&this._heights.slice()},set:function(t){if(t!=this._heights){t=re.Utils.makeArray(t,!0),this._heights=t&&t.slice();for(var e=0;e<this._heights.length;e++)this._heights[e]=Math.max(this._minRowHeight,isNaN(this._heights[e])?this._minRowHeight:this._heights[e]);this._changed()}}}),_dp(a,"resizable",{get:function(){return this._resizable},set:function(t){t!=this._resizable&&(this._resizable=t,this._changed())}}),_dp(a,"itemOffset",{get:function(){return this._itemOffset},set:function(t){t!=this._itemOffset&&(this._itemOffset=t,this._changed())}}),_dp(a,"itemGap",{get:function(){return this._itemGap},set:function(t){t!=this._itemGap&&(this._itemGap=t,this._changed())}}),_dp(a,"showTooltip",{get:function(){return this._showTooltip},set:function(t){t!=this._showTooltip&&(this._showTooltip=t,this._changed())}}),_dp(a,"showSelection",{get:function(){return this._showSelection},set:function(t){t!=this._showSelection&&(this._showSelection=t,this._changed())}}),_dp(a,"sortWidth",{get:function(){return this._sortWidth},set:function(t){t!=this._sortWidth&&(this._sortWidth=t,this._changed())}}),_dp(a,"sortHeight",{get:function(){return this._sortHeight},set:function(t){t!=this._sortHeight&&(this._sortHeight=t,this._changed())}}),_dp(a,"filterWidth",{get:function(){return this._filterWidth},set:function(t){t!=this._filterWidth&&(this._filterWidth=t,this._changed())}}),_dp(a,"filterHeight",{get:function(){return this._filterHeight},set:function(t){t!=this._filterHeight&&(this._filterHeight=t,this._changed())}}),_dp(a,"popupWidth",{get:function(){return this._popupWidth},set:function(t){t!=this._popupWidth&&(this._popupWidth=t,this._changed())}}),_dp(a,"popupHeight",{get:function(){return this._popupHeight},set:function(t){t!=this._popupHeight&&(this._popupHeight=t,this._changed())}}),_dp(a,"expanderWidth",{get:function(){return this._expanderWidth},set:function(t){t!=this._expanderWidth&&(this._popupWidth=t,this._changed())}}),_dp(a,"expanderHeight",{get:function(){return this._expanderHeight},set:function(t){t!=this._expanderHeight&&(this._popupHeight=t,this._changed())}}),_dp(a,"showPopupMenu",{get:function(){return this._showPopupMenu},set:function(t){t!=this._showPopupMenu&&(this._showPopupMenu=t,this._changed())}}),_dp(a,"checkWidth",{get:function(){return this._checkWidth},set:function(t){t!=this._checkWidth&&(this._checkWidth=t,this._changed())}}),_dp(a,"checkHeight",{get:function(){return this._checkHeight},set:function(t){t!=this._checkHeight&&(this._checkHeight=t,this._changed())}}),_dp(a,"styleName",{get:function(){return this._styleName},set:function(t){t!=this._styleName&&(this._styleName=t,this._changed())}}),_dp(a,"exportStyleName",{get:function(){return this._exportStyleName},set:function(t){this._exportStyleName=t}}),a.prototype.setCalcHeights=function(t){this._calcHeights=t.slice()},a.prototype.getCalcHeights=function(){return this._calcHeights},a.prototype.getCell=function(t){var e,i,o=this._cell,n=(o.setLayout(t),(t instanceof ct.CellLayoutGroupItem?t:t.firstColumn).header);return n&&(o.text=n.displayText,o.template=n.realizeTemplate(),o.showTooltip=n.showTooltip,o.tooltip=n.tooltip,o.edgeMark=n.edgeMark,n instanceof lt.ColumnHeader)&&(e=t.firstColumn,i=void 0,o.index.set(-1,t.firstColumn),o.itemOffset=void 0===(i=n.itemOffset)?this._itemOffset:i,o.itemGap=void 0===(i=n.itemGap)?this._itemGap:i,o.checkLocation=n.checkLocation,o.checked=e.checked),o},a.prototype.getStyleName=function(){return this._styleName};var r,s=a;function a(t){t=r.call(this,t)||this;return t._minRowHeight=21,t._minHeight=23,t._height=0,t._resizable=!1,t._itemOffset=2,t._itemGap=2,t._showSelection=!1,t._showTooltip=!1,t._sortWidth=16,t._sortHeight=16,t._filterWidth=16,t._filterHeight=16,t._popupWidth=16,t._popupHeight=16,t._expanderWidth=16,t._expanderHeight=16,t._checkWidth=16,t._checkHeight=16,t._showPopupMenu=ht.HandleVisibility.VISIBLE,t._cell=new o,t.visible=!0,t}e.GridHeader=s})),ee=(t(te),te.HeaderCell,te.GridHeader,e(function(t,e){Object.defineProperty(e,"__esModule",{value:!0});i=$.ExpressionRuntime,ne.__extends(n,i),n.prototype._doDispose=function(){this._cell=null,i.prototype._doDispose.call(this)},n.prototype.setCell=function(t){this._cell=t},n.prototype.isIdentifier=function(t){return t=t.toLowerCase(),n.IDENTS.hasOwnProperty(t)?n.IDENTS[t]:i.prototype.isIdentifier.call(this,t)},n.prototype.evaluateIdentifier=function(t){switch(t){case n.ID_VALUE:return this._cell.value;case n.ID_FIELD:return this._cell.index.dataField;case n.ID_LEVEL:return this._cell.level}throw new $.ExpressionEvaluationError("Invalid identifier key: "+t)},n.prototype.evaluateIndexerI=function(t,e){},n.prototype.evaluateIndexerS=function(t,e,i){},n.IDENTS={value:n.ID_VALUE=0,field:n.ID_FIELD=1,level:n.ID_LEVEL=2};var i,o=n;function n(){return i.call(this)||this}e.FooterExpressionRuntime=o;r=st.GridCell,ne.__extends(a,r),a.prototype._doDispose=function(){r.prototype._doDispose.call(this)},_dp(a,"level",{get:function(){return 0}}),_dp(a,"error",{get:function(){return this._error}}),_dp(a,"errorDetail",{get:function(){return this._errorDetail}}),a.prototype.calculate=function(){var t=this.valueColumn,e=t&&t.grid;if(this._value=NaN,this._error=null,e&&e.itemSource.summaryMode!=ht.SummaryMode.NONE){var i=this._getSummary(t,this._childIndex),o=i&&i.expression,n=void 0;try{o&&0<e.dataCount&&t instanceof lt.DataColumn&&0<=t.dataIndex&&((r=e.columnSummaryRuntime).setColumn(t,e.summarizer),n=i.evaluate(r,this._childIndex));var r,s=i&&i.valueCallback;s&&(n=s(e.handler,t,this._childIndex,i,n)),this._value=n}catch(t){this._error=t,this._errorDetail=t}}},_dp(a,"text",{get:function(){if(this._error)return st.GridCell.ERROR}}),_dp(a,"value",{get:function(){return this._value}}),a.prototype.getDisplayText=function(t){var e,i=this._value,o=this.valueColumn,n="";return void 0!==i&&o&&("string"==typeof i?n=i+"":"boolean"==typeof i?n=String(i):i instanceof Date?n=(e=t.datetimeWriter)?e.getText(this._value):String(i):"number"!=typeof i||isNaN(i)?null==i&&(n=""):n=(e=t.numberFormatter)?e.getText(i):String(i)),n&&((e=t.prefix)&&(n=e+n),e=t.suffix)&&(n+=e),n=!n&&o?null==(i=this._getSummary(o,this._childIndex))?void 0:i.text:n},a.prototype.getSummary=function(){return this._getSummary(this.valueColumn,this._childIndex)},a.prototype.getTemplate=function(t){var e=this._getSummary(this.valueColumn,this._childIndex);return e?e.realizeSummary(this,t):void 0};var r,s=a;function a(t){t=r.call(this,t)||this;return t._childIndex=0,t._error=null,t._errorDetail=null,t}e.SummaryCell=s;l=s,ne.__extends(d,l),d.prototype._doDispose=function(){l.prototype._doDispose.call(this)},_dp(d,"footerIndex",{get:function(){return this._childIndex},set:function(t){t!=this._childIndex&&(this._childIndex=t)}}),d.prototype._getSummary=function(t,e){return t&&t.footers.get(e)};var l,h=d;function d(){return l.call(this,"footerCell")||this}e.FooterCell=h;u=$t.VisualObject,ne.__extends(c,u),c.prototype._doDispose=function(){u.prototype._doDispose.call(this)},_dp(c,"styleName",{get:function(){return this._styleName},set:function(t){t!=this._styleName&&(this._styleName=t,this._changed())}}),_dp(c,"displayIndex",{get:function(){return this._displayIndex}}),_dp(c,"minHeight",{get:function(){return this._minHeight},set:function(t){(t=Math.max(0,t))!=this._minHeight&&(this._minHeight=t,this._changed())}}),_dp(c,"height",{get:function(){return this._height},set:function(t){(t=Math.max(0,t))!=this._height&&(this._height=t,this._changed())}}),_dp(c,"cellStyleCallback",{get:function(){return this._cellStyleCallback},set:function(t){t!==this._cellStyleCallback&&(this._cellStyleCallback=t,this.refreshOwner())}}),c.prototype.getCell=function(t){var e=this._cell,t=t.firstColumn;return e.index.set(-1,t),e._childIndex=this._childIndex,e.calculate(),e},c.prototype.getCellStyle=function(t,e,i){void 0===i&&(i=!0);var o,n=t.getSummary(),r=this._cellStyleCallback,r=(r&&(o=r(this._grid.handler,t),e.assign(o)),n&&(r=n.styleCallback)&&(o=r(this._grid.handler,t),e.assign(o)),e.styleName||n&&n.styleName||"");return i&&(e.styleName=this.getCellStyleName()+" "+r),e},c.prototype.getCellFormatters=function(t,e){return e?(e.numberFormatter=e.numberFormatter||t.numberFormatter,e.datetimeWriter=e.datetimeWriter||t.datetimeWriter,e.booleanFormatter=e.booleanFormatter||t.boolFormatter,e.textFormatter=e.textFormatter||t.textFormatter,e.prefix=e.prefix||t.prefix,e.suffix=e.suffix||t.suffix):((e=this._formatter).numberFormatter=t.numberFormatter,e.datetimeWriter=t.datetimeWriter,e.booleanFormatter=t.boolFormatter,e.textFormatter=t.textFormatter,e.prefix=t.prefix,e.suffix=t.suffix),e},c.prototype._visibleChanged=function(){u.prototype._visibleChanged.call(this),this.$_owner&&this.$_owner.$_visibleChanged(this)};var u,s=c;function c(t){t=u.call(this,t)||this;return t._minHeight=23,t._height=0,t._formatter={numberFormatter:null,datetimeWriter:null,booleanFormatter:null,textFormatter:null,prefix:"",suffix:""},t._childIndex=0,t._displayIndex=0,t._runtime=new o,t._cell=t._createCell(),t.visible=!0,t}e.GridSummaryObject=s;_=s,ne.__extends(f,_),_dp(f,"footerIndex",{get:function(){return this._childIndex}}),f.prototype.getCellStyleName=function(){return f.CELL_CSS},f.prototype._createCell=function(){return new h},f.CELL_CSS="rg-footer-cell";var _,p=f;function f(t){return _.call(this,t)||this}e.GridFooter=p;g=$t.VisualObject,ne.__extends(m,g),m.prototype._doDispose=function(){for(var t=0,e=this._items;t<e.length;t++)e[t].dispose();this._items=null,this._visibles=null,g.prototype._doDispose.call(this)},_dp(m,"canShow",{get:function(){return this.visible&&0<this._visibles.length}}),_dp(m,"count",{get:function(){return this._items.length}}),_dp(m,"visibleCount",{get:function(){return this._visibles.length}}),m.prototype.get=function(t){return this._items[t]},m.prototype.getVisible=function(t){return this._visibles[t]},m.prototype.isVisible=function(){return this.visible&&0<this.visibleCount},m.prototype.assignFrom=function(t){var e;if(g.prototype.assignFrom.call(this,t),t&&t.items?e=re.Utils.makeArray(t.items):re.Utils.isArray(t)&&(e=t),e){for(var i=this._items,o=e.length;i.length>o;)i.pop().dispose();i.length=o;for(var n=0,r=e.length;n<r;n++){var s=e[n];s&&(i[n]||(i[n]=this._createSummary()),i[n].assignFrom(s),i[n].$_owner=this)}this.$_resetVisibles()}},m.prototype.clean=function(){for(var t=0,e=this._items;t<e.length;t++)e[t].clean()},m.prototype.toProxy=function(){for(var t=g.prototype.toProxy.call(this),e=[],i=0;i<this._items.length;i++)e.push(this._items[i].toProxy());return 0<e.length&&(t.items=e.slice()),t},m.prototype.$_visibleChanged=function(t){this.$_resetVisibles()},m.prototype.$_resetVisibles=function(){for(var t=this._visibles.length=0,e=0;t<this._items.length;t++){var i=this._items[t];i._childIndex=t,i.visible&&(this._visibles.push(i),i._displayIndex=e++)}this.owner&&this.owner.refreshView()};var g,s=m;function m(t){var e=g.call(this,t)||this,t=(e._items=[],e._visibles=[],e._createSummary(t));return(t.$_owner=e)._items.push(t),e._visibles.push(e._items[0]),e}e.SummaryCollection=s;y=s,ne.__extends(v,y),v.prototype._createSummary=function(t){return new p(t||this._grid)};var y,s=v;function v(){return null!==y&&y.apply(this,arguments)||this}e.GridFooterCollection=s})),ie=(t(ee),ee.FooterExpressionRuntime,ee.SummaryCell,ee.FooterCell,ee.GridSummaryObject,ee.GridFooter,ee.SummaryCollection,ee.GridFooterCollection,e(function(t,e){Object.defineProperty(e,"__esModule",{value:!0});i=$t.VisualObject,ne.__extends(n,i),_dp(n,"displayOrder",{get:function(){return this._displayOrder},set:function(t){t!=this._displayOrder&&(this._displayOrder=t,this._changed())}}),_dp(n,"headText",{get:function(){return this._headText},set:function(t){t!=this._headText&&(this._headText=t,this._changed())}}),_dp(n,"footText",{get:function(){return this._footText},set:function(t){t!=this._footText&&(this._footText=t,this._changed())}}),_dp(n,"sumText",{get:function(){return this._sumText},set:function(t){t!=this._sumText&&(this._sumText=t,this._changed())}}),_dp(n,"popupMenu",{get:function(){return this._popupMenu},set:function(t){t!=this._popupMenu&&(this._popupMenu=t,this._popupMenuName="string"==typeof t?t:null)}}),_dp(n,"popupMenuName",{get:function(){return this._popupMenuName||(this._popupMenu&&this._grid?(this._popupMenuName=this.getHeadStyleName()+"_menu",this._grid.addPopupMenu(this._popupMenuName,this._popupMenu,!0),this._popupMenuName):null)},set:function(t){null!=t&&"string"!=typeof t||(this._popupMenuName=t,this._changed())}}),_dp(n,"visChanged",{get:function(){return this._visChanged},set:function(t){this._visChanged=t}}),_dp(n,"cellStyleCallback",{get:function(){return this._cellStyleCallback},set:function(t){t!==this._cellStyleCallback&&(this._cellStyleCallback=t,this._changed())}}),n.prototype.getHeadCell=function(){return this._headCell},n.prototype.getFootCell=function(){return this._footCell},n.prototype.getSumCell=function(){return this._sumCell},n.prototype.getFilterCell=function(){return this._filterCell},n.prototype._createHeadCell=function(){return new st.StyledCell(this)},n.prototype._createFootCell=function(){return new st.StyledCell(this)},n.prototype._createSumCell=function(){return new st.StyledCell(this)},n.prototype._createFilterCell=function(){return new st.StyledCell(this)},n.prototype._visibleChanged=function(){i.prototype._visibleChanged.call(this),this._visChanged=!0};var i,o=n;function n(t){t=i.call(this,t)||this;return t._displayOrder=0,t._headText=null,t._footText=null,t._sumText=null,t._headCell=t._createHeadCell(),t._footCell=t._createFootCell(),t._sumCell=t._createSumCell(),t._filterCell=t._createFilterCell(),t.visible=!0,t}e.SectionObject=o})),oe=(t(ie),ie.SectionObject,e(function(t,e){Object.defineProperty(e,"__esModule",{value:!0}),(l=r=e.IndicatorValue||(e.IndicatorValue={})).NONE="none",l.INDEX="index",l.ROW="row",(l=i=e.StateMark||(e.StateMark={})).IMAGE="image",l.TEXT="text",l.NONE="none",o=st.GridCell,ne.__extends(s,o),s.prototype._doDispose=function(){o.prototype._doDispose.call(this)},_dp(s,"indicator",{get:function(){return this._indicator}}),_dp(s,"itemState",{get:function(){return this._itemState},set:function(t){t!=this._itemState&&(this._itemState=t)}}),_dp(s,"text",{get:function(){var t,e=this._indicator,i=this.index,o=i.item,n="";if(o&&o.itemState==rt.ItemState.NORMAL)switch(e.displayValue){case r.INDEX:0<=(t=e.owner.getIndicatorIndex(o))&&(t+=e.indexOffset,e.zeroBase||t++,n=String(t));break;case r.ROW:o.isDataRow&&(t=i.dataRow,t+=e.rowOffset,e.zeroBase||t++,n=String(t))}return n}}),_dp(s,"value",{get:function(){return null}});var r,i,o,n=s;function s(t){var e=o.call(this,"indicatorCell")||this;return e._itemState=rt.ItemState.NORMAL,e._indicator=t,e}e.RowIndicatorCell=n;a=ie.SectionObject,ne.__extends(h,a),h.prototype._doDispose=function(){a.prototype._doDispose.call(this)},_dp(h,"displayValue",{get:function(){return this._displayValue},set:function(t){t!=this._displayValue&&(this._displayValue=t,this._changed())}}),_dp(h,"zeroBase",{get:function(){return this._zeroBase},set:function(t){t!=this._zeroBase&&(this._zeroBase=t,this._changed())}}),_dp(h,"indexOffset",{get:function(){return this._indexOffset},set:function(t){t!=this._indexOffset&&(this._indexOffset=t,this._changed())}}),_dp(h,"rowOffset",{get:function(){return this._rowOffset},set:function(t){t!=this._rowOffset&&(this._rowOffset=t,this._changed())}}),_dp(h,"minWidth",{get:function(){return this._minWidth},set:function(t){t!=this._minWidth&&(this._minWidth=t,this._changed())}}),_dp(h,"maxWidth",{get:function(){return this._maxWidth},set:function(t){t!=this._maxWidth&&(this._maxWidth=t,this._changed())}}),_dp(h,"width",{get:function(){return this._width},set:function(t){t!=this._width&&(this._width=t,this._changed())}}),_dp(h,"displayWidth",{get:function(){return this._displayWidth}}),_dp(h,"selectable",{get:function(){return this._selectable},set:function(t){t!=this._selectable&&(this._selectable=t,this._changed())}}),_dp(h,"mark",{get:function(){return this._mark},set:function(t){t!=this._mark&&(this._mark=t,this._changed())}}),_dp(h,"showFocus",{get:function(){return this._showFocus},set:function(t){t!=this._showFocus&&(this._showFocus=t,this._changed())}}),_dp(h,"showSelection",{get:function(){return this._showSelection},set:function(t){t!=this._showSelection&&(this._showSelection=t,this._changed())}}),h.prototype.getCellType=function(){return"indicator"},_dp(h,"staticOrder",{get:function(){return 0}}),h.prototype.getCell=function(t){var e,i=this._cell;return i.setIndex(t),t.item&&((e=t.item.itemState)==rt.ItemState.NORMAL&&this._grid.focusedIndex.itemIndex==t.itemIndex&&(e=rt.ItemState.FOCUSED),i.itemState=e),i},h.prototype.getHeadStyleName=function(){return"rg-rowindicator-head"},h.prototype.getFootStyleName=function(){return"rg-rowindicator-foot"},h.prototype.getSumStyleName=function(){return"rg-rowindicator-sum"},h.prototype.getFilterStyleName=function(){return"rg-rowindicator-filter"};var a,l=h;function h(t){t=a.call(this,t)||this;return t._displayValue=r.INDEX,t._zeroBase=!1,t._indexOffset=0,t._rowOffset=0,t._minWidth=32,t._maxWidth=0,t._width=0,t._selectable=!0,t._mark=i.IMAGE,t._showFocus=!0,t._showSelection=!0,t._displayWidth=0,t._cell=new n(t),t.headText="No.",t.footText="Σ",t.sumText="Σ",t}e.RowIndicator=l})),ae=(t(oe),oe.IndicatorValue,oe.StateMark,oe.RowIndicatorCell,oe.RowIndicator,e(function(t,e){Object.defineProperty(e,"__esModule",{value:!0});i=st.GridCell,ne.__extends(n,i),n.prototype._doDispose=function(){this._bar=null,i.prototype._doDispose.call(this)},_dp(n,"text",{get:function(){return this._bar._stateTexts[this.item.rowState]}}),_dp(n,"value",{get:function(){return null}});var i,o=n;function n(t){var e=i.call(this,"stateBarCell")||this;return e._bar=t,e}e.StateBarCell=o;r=ie.SectionObject,ne.__extends(a,r),a.prototype._doDispose=function(){r.prototype._doDispose.call(this)},_dp(a,"width",{get:function(){return this._width},set:function(t){t!=this._width&&(this._width=t,this._changed())}}),_dp(a,"mark",{get:function(){return this._mark},set:function(t){t!=this._mark&&(this._mark=t,this._changed())}}),_dp(a,"stateTexts",{get:function(){return ne.__assign({},this._stateTexts)},set:function(t){if(t!=this._stateTexts){for(var e in t)this._stateTexts.hasOwnProperty(e)&&(this._stateTexts[e]=t[e]);this._changed()}}}),_dp(a,"errorVisible",{get:function(){return this._errorVisible},set:function(t){t!=this._errorVisible&&(this._errorVisible=t,this._changed())}}),a.prototype.getCellType=function(){return"state"},_dp(a,"staticOrder",{get:function(){return 1e3}}),a.prototype.getCell=function(t){var e=this._cell;return e.setIndex(t),e},a.prototype.getHeadStyleName=function(){return"rg-statebar-head"},a.prototype.getFootStyleName=function(){return"rg-statebar-foot"},a.prototype.getSumStyleName=function(){return"rg-statebar-sum"},a.prototype.getFilterStyleName=function(){return"rg-statebar-filter"};var r,s=a;function a(t){t=r.call(this,t)||this;return t._width=20,t._mark=oe.StateMark.IMAGE,t._stateTexts={},t._errorVisible=!1,t._stateTexts[b.RowState.CREATED]="C",t._stateTexts[b.RowState.UPDATED]="U",t._stateTexts[b.RowState.DELETED]="D",t._stateTexts[b.RowState.CREATE_AND_DELETED]="X",t._cell=new o(t),t}e.StateBar=s})),le=(t(ae),ae.StateBarCell,ae.StateBar,e(function(t,e){Object.defineProperty(e,"__esModule",{value:!0});i=st.GridCell,ne.__extends(n,i),n.prototype._doDispose=function(){i.prototype._doDispose.call(this)},_dp(n,"getText",{get:function(){return String(this.index.dataRow)}}),_dp(n,"value",{get:function(){return this.item.checked}});var i,o=n;function n(){return i.call(this,"checkBarCell")||this}e.CheckBarCell=o;r=ie.SectionObject,ne.__extends(a,r),a.prototype._doDispose=function(){r.prototype._doDispose.call(this)},_dp(a,"width",{get:function(){return this._width},set:function(t){t!=this._width&&(this._width=t,this._changed())}}),_dp(a,"exclusive",{get:function(){return this._exclusive},set:function(t){t!=this._exclusive&&(this._exclusive=t,this._changed())}}),_dp(a,"checkLocation",{get:function(){return this._checkLocation},set:function(t){t!=this._checkLocation&&(this._checkLocation=t,this._changed())}}),_dp(a,"itemGap",{get:function(){return this._itemGap},set:function(t){t!=this._itemGap&&(this._itemGap=t,this._changed())}}),_dp(a,"showAll",{get:function(){return this._showAll},set:function(t){t!=this._showAll&&(this._showAll=t,this._changed())}}),_dp(a,"showGroup",{get:function(){return this._showGroup},set:function(t){t!=this._showGroup&&(this._showGroup=t,this._grid.itemSource.setGroupCheckable(t),this._changed())}}),_dp(a,"visibleOnly",{get:function(){return this._visibleOnly},set:function(t){t!=this._visibleOnly&&(this._visibleOnly=t,this._changed())}}),_dp(a,"checkableOnly",{get:function(){return this._checkableOnly},set:function(t){t!=this._checkableOnly&&(this._checkableOnly=t,this._changed())}}),_dp(a,"checkableExpression",{get:function(){return this._checkableExpression},set:function(t){t!=this._checkableExpression&&(this._checkableExpression=t,this._grid.itemSource.checkableExpression=t,this._changed())}}),_dp(a,"checkableCallback",{get:function(){return this._checkableCallback},set:function(t){this._checkableCallback=t,this._grid.itemSource.checkableCallback=t,this._changed()}}),_dp(a,"syncHeadCheck",{get:function(){return this._syncHeadCheck},set:function(t){t!=this._syncHeadCheck&&(this._syncHeadCheck=t,this._changed())}}),_dp(a,"fieldName",{get:function(){return this._fieldName},set:function(t){t!=this._fieldName&&(this._fieldName=t,this._fieldIndex=this._grid.dataSource.getFieldIndex(t),this._grid._checkFieldIndex(this._fieldIndex),this._changed())}}),_dp(a,"fieldIndex",{get:function(){return this._fieldIndex}}),_dp(a,"useImages",{get:function(){return this._useImages},set:function(t){this._useImages!==t&&(this._useImages=t,this._changed())}}),_dp(a,"mergeRule",{get:function(){return this._mergeRule},set:function(t){t!=this._mergeRule&&(this._mergeRule=t,this._mergeRuleObj&&this._mergeRuleObj.dispose(),this._mergeRuleObj=t?f.createRule(t):null,this._changed(),this.owner._columnMergeRuleChanged(null))}}),_dp(a,"breakMergeOnEmpty",{get:function(){return this._breakMergeOnEmpty},set:function(t){t!=this._breakMergeOnEmpty&&(this._breakMergeOnEmpty=t,this._changed())}}),a.prototype.getCell=function(t){var e=this._cell;return e.setIndex(t),e._exclusive=this._exclusive,e},a.prototype.getHeadStyleName=function(){return"rg-checkbar-head"},a.prototype.getFootStyleName=function(){return"rg-checkbar-foot"},a.prototype.getSumStyleName=function(){return"rg-checkbar-sum"},a.prototype.getFilterStyleName=function(){return"rg-checkbar-filter"},a.prototype.canMerge=function(){return null!=this._mergeRuleObj},a.prototype.getCellType=function(){return"check"},_dp(a,"staticOrder",{get:function(){return 2e3}}),_dp(a,"merges",{get:function(){return this._merges}}),_dp(a,"merged",{get:function(){return this._merged}});var r,s=a;function a(t){t=r.call(this,t)||this;return t._width=20,t._exclusive=!1,t._showAll=!0,t._showGroup=!0,t._visibleOnly=!1,t._checkableOnly=!0,t._syncHeadCheck=!1,t._useImages=!1,t._checkLocation=ht.ColumnHeaderItemLocation.TOP,t._itemGap=5,t._fieldIndex=-1,t._breakMergeOnEmpty=!1,t._cell=new o,t._merged=!1,t}e.CheckBar=s;l=se.Base,ne.__extends(d,l),d.$_setRange=function(t,e,i){return t._row1=e<=i?e:i,t._row2=e<=i?i:e,t},d.create=function(t,e){return e&&t!==e?d.$_setRange(new d,t.itemIndex,e.itemIndex):((e=new d)._row1=e._row2=t.itemIndex,e)},d.temp=function(t,e){var i=d.$_TEMP;return e&&t!==e?d.$_setRange(i,t.itemIndex,e.itemIndex):(i._row1=i._row2=t.itemIndex,i)},d.createRange=function(t,e){return d.$_setRange(new d,t,e)},_dp(d,"empty",{get:function(){return this._row2<this._row1}}),_dp(d,"r1",{get:function(){return this._row1}}),_dp(d,"r2",{get:function(){return this._row2}}),_dp(d,"top",{get:function(){return this._row1<=this._row2?this._row1:this._row2}}),_dp(d,"bottom",{get:function(){return this._row1<=this._row2?this._row2:this._row1}}),_dp(d,"firstCell",{get:function(){var t=new _t.CellIndex;return t.itemIndex=this._row1<=this._row2?this._row1:this._row2,t}}),_dp(d,"lastCell",{get:function(){var t=new _t.CellIndex;return t.itemIndex=this._row1>=this._row2?this._row1:this._row2,t}}),d.prototype.contains=function(t){return t>=this._row1&&t<=this._row2},d.prototype.intersectsWith=function(t){return!1},d.NULL=new d,d.$_TEMP=new d;var l,h=d;function d(){var t=l.call(this)||this;return t._row1=0,t._row2=0,t}e.IndexRange=h;u=$.ExpressionRuntime,ne.__extends(_,u),_.prototype._doDispose=function(){this._item=null,this._ds=null,u.prototype._doDispose.call(this)},_.prototype.setDataSource=function(t){this._ds=t,this._fieldCount=t?t.fieldCount:0},_.prototype.setCell=function(t){this._item=t.item},_.prototype.setItem=function(t){this._item=t},_.prototype.clear=function(){this._item=null,this._ds=null},_.prototype.isIdentifier=function(t){return t=t.toLowerCase(),_.IDENTS.hasOwnProperty(t)?_.IDENTS[t]:u.prototype.isIdentifier.call(this,t)},_.prototype.evaluateIdentifier=function(t){if(this._item){switch(t){case _.ID_ROW:return this._item.index;case _.ID_DATAROW:return this._item.dataRow;case _.ID_GROUP:return this._item.parent}throw new $.ExpressionEvaluationError("Invalid identifier key: "+t)}},_.prototype.evaluateIndexerI=function(t,e){if(this._item){if(t!=_.ID_VALUE&&t!=_.ID_VALUES)throw new $.ExpressionEvaluationError("Invalid identifier indexer: "+t);if(e<0||e>=this._fieldCount)throw new $.ExpressionEvaluationError("Data field index out of bounds:"+e);return this._item.getData(e)}},_.prototype.evaluateIndexerS=function(t,e,i){if(t!=_.ID_VALUE&&t!=_.ID_VALUES)throw new $.ExpressionEvaluationError("Invalid identifier indexer: "+t);if(this._ds){t=i?this._ds.getFieldIndexC(e):this._ds.getFieldIndex(e);if(t<0||t>=this._fieldCount)throw new $.ExpressionEvaluationError("Data field is not exists:"+e);return this._item.getData(t)}},_.IDENTS={row:_.ID_ROW=0,datarow:_.ID_DATAROW=1,checked:_.ID_CHECKED=2,value:_.ID_VALUE=3,values:_.ID_VALUES=4,group:_.ID_GROUP=5,prevvalues:_.ID_PREV_VALUES=6};var u,c=_;function _(){var t=u.call(this)||this;return t._item=null,t._ds=null,t._fieldCount=0,t}var p,y={},f=(p=Kt.GridMergeRule,ne.__extends(g,p),g.createRule=function(t){t="string"==typeof t?t:t&&t.criteria;return t?new g(t):null},g.prototype._doDispose=function(){this._runtime.clear(),this._runtime=null,p.prototype._doDispose.call(this)},_dp(g,"criteria",{get:function(){return this._criteria},set:function(t){(t=t?t.trim():null)!=this._criteria&&(this._criteria=t,this._exprNode=t?$.ExpressionParser.Default.parse(t,null):null,this._changed())}}),g.prototype.parseInit=function(t,e,i,o,n){var r=this._checkBar.breakMergeOnEmpty,s=t.fixedCount,a=t.itemCount,l=t.dataSource.rowCount;if(!((o=Math.min(a-i,o))<1||l<=0)){this._runtime.setDataSource(t.dataSource);for(var h=null;i<a&&(h=t.getItem(i),!this.$_isRow(h,!1));)n[i]=i+1,i++;if(!(a<=i)){this._runtime.setItem(h);var d=this._exprNode.evaluate(this._runtime),u=h.checked,c=i;if(n[c]=c+1,!(h.dataRow>=l)){this._runtime.setItem(h);for(var _=i+1;_<a;_++)if(h=t.getItem(_),this.$_isRow(h,!1)){if(h.dataRow>=l)break;this._runtime.setItem(h);var p=this._exprNode.evaluate(this._runtime),f=h.checked;if(_==s||void 0===p&&r||(p instanceof Date&&d instanceof Date?+p!=+d:p!=d)||f!=u){if(o<=_)break;c=_,d=p,u=f}n[_]=c+1}else{if(o<=_)break;d=y,n[c=_]=c+1}}}}},g.prototype.parseBounds=function(t,e,i,o,n){var r=this._checkBar.breakMergeOnEmpty,s=t.itemCount;if(!(s<1)){var a,l,h,d=t.fixedCount,u=y,c=Math.max(0,i),_=c,p=-1;if(this._runtime.setDataSource(t.dataSource),0<c&&n[c]<=0){var f=t.getItem(c);if(this.$_isRow(f,!1)){for(this._runtime.setItem(f),l=this._exprNode.evaluate(this._runtime),h=f.checked,c--;0<=c&&(f=t.getItem(c),this.$_isRow(f,!1))&&(this._runtime.setItem(f),u=this._exprNode.evaluate(this._runtime),a=f.checked,!(c==d||void 0===u&&r||(u instanceof Date&&l instanceof Date?+u!=+l:u!=l)||h!=a));)c--;for(var g=_-1;c<g;g--)n[g]=c+2;c<_-1&&(p=c+1)}else{n[c]=c+1;for(g=_-1;c<g;g--)n[g]=c+2;for(c+1<_-1&&(p=c+2),c--;0<=c&&n[c]<=0&&!this.$_isRow(t.getItem(c),!1);)n[c]=c+1,c--}}for(c=Math.max(0,i);c<=o&&0<n[c];)c++;for(;c<=o&&!this.$_isRow(t.getItem(c),!1);)n[c]=c+1,c++;if(c<o){_=c,f=t.getItem(c);for(this._runtime.setItem(f),l=this._exprNode.evaluate(this._runtime),h=f.checked,c++;c<s;)if(f=t.getItem(c),this.$_isRow(f,!1)){if(this._runtime.setItem(f),u=this._exprNode.evaluate(this._runtime),a=f.checked,c==d||void 0===u&&r||(u instanceof Date&&l instanceof Date?+u!=+l:u!=l)||h!=a){var m=_;0<=p&&(m=p,p=-1);for(g=_;g<c;g++)n[g]=m+1;if(o<=c)break;l=u,h=a,_=c}else n[c]=_+1;c++}else{m=_;0<=p&&(m=p,p=-1);for(g=_;g<c;g++)n[g]=m+1;for(n[c]=c+1,c++;c<s&&!this.$_isRow(t.getItem(c),!1);)n[c]=c+1,c++;if(o<=(_=c))break}if(c==s&&(u instanceof Date&&l instanceof Date?+u==+l:u==l)||h!=a)for(m=0<=p?p:_,g=_;g<c;g++)n[g]=m+1}}},g.prototype.$_isRow=function(t,e){var i=t instanceof rt.GridRow&&!(t instanceof A.DummyEditItem);return i=i&&!e?(e=t.parent).expanded||e.firstItem!==t:i},g.$_runtime=null,g);function g(t){var e=p.call(this)||this;return e._runtime=g.$_runtime=g.$_runtime||new c,e.criteria=t,e}e.CheckBarMergeRule=f;m=Kt.GridMergeRoom,ne.__extends(C,m),C.borrow=function(t,e){var i=C.$_rooms.pop();return i?(i._head=t.top,i._tail=t.bottom):i=new C(t,e),i},C.returnTo=function(t){var e;t&&(e=C.$_rooms).indexOf(t)<0&&e.push(t)},_dp(C,"head",{get:function(){return this._head}}),_dp(C,"tail",{get:function(){return this._tail}}),_dp(C,"scope",{get:function(){return this._checkBar}}),_dp(C,"group",{get:function(){return null},set:function(t){}}),C.prototype.getHead=function(t){return t?t.set(this._head,null):t=new _t.CellIndex(this._checkBar.owner,this._head,null),t},C.prototype.getTail=function(t){return t?t.set(this._tail,null):t=new _t.CellIndex(this._checkBar.owner,this._tail,null),t},C.prototype.isHead=function(t){return t.itemIndex==this._head},C.prototype.isTail=function(t){return t.itemIndex==this._tail},C.prototype.contains=function(t){return t.itemIndex>=this._head&&t.itemIndex<=this._tail},C.$_rooms=new Array;var m,v=C;function C(t,e){var i=m.call(this)||this;return i._checkBar=e,i._head=t.top,i._tail=t.bottom,i}e.CheckBarMergeRoom=v;var w,x=65535,s=(w=se.Base,ne.__extends(b,w),b.prototype._doDispose=function(){this._checkBar=null,this._rooms=this._fixedRooms=null,w.prototype._doDispose.call(this)},_dp(b,"count",{get:function(){return this._rooms.length}}),b.prototype.clear=function(){this._flags=null,this._rooms=[],this._inited=!1},b.prototype.initialize=function(t){if(!this._inited){var e=this._checkBar.owner,i=e.itemSource,o=this._checkBar._mergeRuleObj;if(o){for(var n=this._flags=new Array(i.itemCount),e=e.fixedOptions.mergeRows?0:i.fixedCount,r=i.itemCount;r--;)n[r]=0;o._checkBar=this._checkBar,o.parseInit(i,-1,e,t,n)}this._inited=!0}},b.prototype.refreshRooms=function(t,e,i){if(this._nextId=0,this._inited&&this._flags&&!(e<t)){var o=this._checkBar.owner;if(o){var n,r,s,a=this._rooms,l=o.layoutManager.fixedItemCount,h=o.itemSource,o=this._checkBar._mergeRuleObj,d=0;if(this._fixedRooms.length=0,this._rooms.length=0,o&&(o._checkBar=this._checkBar,o.parseBounds(h,-1,t,e,this._flags)),i)for(;d<l;)(n=this.$_checkFixedMerge(h,d,l))?(s=new v(n,this._checkBar),this._fixedRooms.push(s),d=n.r2+1):d+=1;for(d=t;d<=e;)null!=(n=this.$_checkMerge(h,d,0==a.length,l))?((r=h.getItem(n.r2))instanceof q.MergedGroupHeader||r instanceof q.MergedGroupFooter||(s=new v(n,this._checkBar),this._rooms.push(s)),d=n.r2+1):d+=1}}},b.prototype.getFixedRooms=function(){return this._fixedRooms.slice()},b.prototype.getRooms=function(){return this._rooms.slice()},b.prototype.scroll=function(t){},b.prototype.getRoom=function(t){for(var e=t.rowFixed?this._fixedRooms:this._rooms,i=e.length-1;0<=i;i--)if(e[i].contains(t))return e[i];return null},b.prototype.prepareCells=function(t,e){if(0<t){for(var i=this._fixedCells,o=0;o<i.length;o++)i[o]=-1;for(;i.length<t;)i.push(-1)}for(var n=this._cells,o=0;o<n.length;o++)n[o]=-1;for(;n.length<e;)n.push(-1)},b.prototype.refreshCells=function(t,e){for(var i=this.getFixedRooms(),o=i.length-1;0<=o;o--){var n=i[o];this.addFixedCells(n.head,n.tail-n.head+1)}for(o=(i=this.getRooms()).length-1;0<=o;o--){var n=i[o],r=Math.max(0,n.head-e-t),s=n.tail-e-t;this.addCells(r,s-r+1)}},b.prototype.addFixedCells=function(t,e){for(var i=this._fixedCells,o=this._nextId++,n=t+1;n<t+e;n++)i[n]=o+x;return i[t]=o},b.prototype.addCells=function(t,e){for(var i=this._cells,o=this._nextId++,n=t+1;n<t+e;n++)i[n]=o+x;return i[t]=o},b.prototype.isMerged=function(t,e){return t<e?-1<this._fixedCells[t]:-1<this._cells[t-e]},b.prototype.isMergeRoot=function(t,e){return t<e?-1<this._fixedCells[t]&&this._fixedCells[t]<x:-1<this._cells[t-=e]&&this._cells[t]<x},b.prototype.isHidden=function(t,e){return t<e?this._fixedCells[t]>=x:this._cells[t-e]>=x},b.prototype.getMerged=function(t,e){var i=1;if(t<e)for(var o=(r=this._fixedCells)[t],n=t+1;n<r.length&&r[n]-x==o;n++,i++);else for(var r,o=(r=this._cells)[t-=e],n=t+1;n<r.length&&r[n]-x==o;n++,i++);return i},b.prototype.getMerged2=function(t,e,i,o){for(var n=this._cells,r=n[i],s=t.itemSource,a=s.getItem(e++).isData?o:1,l=i+1;l<n.length&&n[l]-x==r;l++)a+=s.getItem(e++).isData?o:1;return a},b.prototype.$_checkFixedMerge=function(t,e,i){if(0<i){var o=e,n=this._flags[o];if(n<=0)return null;for(var r=e+1;r<=i;){if(r==i||this._flags[r]>n)return o+1<r?h.createRange(o,r-1):null;r++}}return null},b.prototype.$_checkMerge=function(t,e,i,o){if(0<=e){var n=e,r=this._flags[n];t.getItem(n);if(r<=0)return null;if(i)for(;o<n&&!(this._flags[n-1]<r);)n--;for(var s=t.itemCount,a=e+1;a<s;){if(this._flags[a]>r||this._flags[a]<=0)return!(n+1<a)&&t.getItem(n).isDataRow?null:h.createRange(n,a-1);a++}if(n<a)return!(n+1<a)&&t.getItem(n).isDataRow?null:h.createRange(n,a-1)}return null},b.MERGE_ROOMS="mergeRooms",b);function b(t){var e=w.call(this)||this;return e._flags=null,e._fixedRooms=[],e._rooms=[],e._inited=!1,e._fixedCells=[],e._cells=[],e._nextId=0,(e._checkBar=t)._merges=e}e.CheckBarMergeManager=s})),he=(t(le),le.CheckBarCell,le.CheckBar,le.IndexRange,le.CheckBarMergeRule,le.CheckBarMergeRoom,le.CheckBarMergeManager,e(function(t,e){function i(t,e){void 0===e&&(e=0),this.x=t=void 0===t?0:t,this.y=e}Object.defineProperty(e,"__esModule",{value:!0}),i.empty=function(){return new i},i.create=function(t,e){return new i(t=void 0===t?0:t,e=void 0===e?0:e)},_dp(i,"isEmpty",{get:function(){return 0===this.x||0===this.y}}),i.prototype.clone=function(){return new i(this.x,this.y)},i.prototype.equals=function(t){return t===this||t&&this.x===t.x&&this.y===t.y},i.prototype.setEmpty=function(){return this.x=this.y=0,this},i.prototype.set=function(t,e){return this.x=t,this.y=e,this},i.prototype.round=function(){var t=this.clone();return t.x>>>=0,t.y>>>=0,t},i.prototype.toString=function(){return"{x: "+this.x+", y: "+this.y+"}"},e.Point=i})),pt=(t(he),he.Point,e(function(t,e){Object.defineProperty(e,"__esModule",{value:!0});o=P.EventAware,ne.__extends(n,o),n.prototype._doDispose=function(){if(this._dom&&(this._removeEventListeners(this._dom),re.Utils.detach(this._dom),this._dom=null),this._elements){for(var t=0,e=this._elements;t<e.length;t++)e[t].dispose();this._elements.length=0}this._parent=null,o.prototype._doDispose.call(this)},_dp(n,"name",{get:function(){return this._name}}),_dp(n,"container",{get:function(){return this._parent&&this._parent.container}}),_dp(n,"parent",{get:function(){return this._parent}}),_dp(n,"childCount",{get:function(){return this._elements?this._elements.length:0}}),_dp(n,"isSingleton",{get:function(){return this._parent&&1==this._parent.childCount&&this._parent._elements[0]===this}}),_dp(n,"x",{get:function(){return this._x},set:function(t){t!=this._x&&(this._x=t,this.invalidate())}}),_dp(n,"y",{get:function(){return this._y},set:function(t){t!=this._y&&(this._y=t,this.invalidate())}}),_dp(n,"width",{get:function(){return this._width},set:function(t){(t=Math.max(0,t))!=this._width&&(this._width=t,this.sizeChanged())}}),_dp(n,"height",{get:function(){return this._height},set:function(t){(t=Math.max(0,t))!=this._height&&(this._height=t,this.sizeChanged())}}),_dp(n,"right",{get:function(){return this._x+this._width}}),_dp(n,"bottom",{get:function(){return this._y+this._height}}),_dp(n,"position",{get:function(){return new he.Point(this._x,this._y)}}),_dp(n,"bounds",{get:function(){return new nt.Rectangle(this._x,this._y,this._width,this._height)}}),_dp(n,"clientRect",{get:function(){return new nt.Rectangle(0,0,this._width,this._height)}}),_dp(n,"visible",{get:function(){return this._visible},set:function(t){t!=this._visible&&(this._visible=t,this._dom&&(this._dom.style.display=this._visible?this._getCssDisplay():"none"),this.invalidate(!0),this._visibleChanged())}}),_dp(n,"mouseEnabled",{get:function(){return this._mouseEnabled},set:function(t){this._mouseEnabled=t}}),_dp(n,"hovered",{get:function(){return this._hovered},set:function(t){t!=this._hovered&&(this._hovered=t,this._hoverChanged())}}),_dp(n,"isLayer",{get:function(){return!1}}),_dp(n,"clickable",{get:function(){return!1}}),_dp(n,"mouseX",{get:function(){var t=this.container;if(t){for(var e=t._currentX,i=this;i&&void 0!==i;)e-=i._x,i=i._parent;return e}return NaN}}),_dp(n,"mouseY",{get:function(){var t=this.container;if(t){for(var e=t._currentY,i=this;i&&void 0!==i;)e-=i._y,i=i._parent;return e}return NaN}}),_dp(n,"doc",{get:function(){return re.getDoc(this._dom)}}),_dp(n,"style",{get:function(){return this._dom&&this._dom.style}}),n.prototype.isDom=function(t){return t===this._dom},n.prototype.canHover=function(){return!0},n.prototype.getChildren=function(){return this._elements&&this._elements.concat()},n.prototype.getChild=function(t){return this._elements[t]},n.prototype.indexOf=function(t){return this._elements?this._elements.indexOf(t):-1},n.prototype.contains=function(t){return this._elements&&0<=this._elements.indexOf(t)},n.prototype.getAncestor=function(t){for(var e=this._parent;e;){if(e instanceof t)return e;e=e._parent}return null},n.prototype.addChild=function(t){return this.insertChild(-1,t)},n.prototype.insertChild=function(t,e){var i,o,n;return!(!e||this.contains(e)||(i=this._elements||[],o=e._dom,t<0||t>=i.length?(this._dom&&o&&this._dom.appendChild(o),i.push(e)):(o&&(n=this._elements[t]._dom,this._dom)&&n&&this._dom.insertBefore(o,n),i.splice(t,0,e)),this._elements=i,e._parent=this,e.$_attached(this),this.invalidate(),0))},n.prototype.removeChild=function(t){if(t&&this._elements){var e=this._elements.indexOf(t);if(0<=e)return this.removeChildAt(e)===t}return!1},n.prototype.removeChildAt=function(t){var e;return 0<=t&&t<this.childCount?(e=this._elements[t],this._elements.splice(t,1),this._dom&&e._dom&&this._dom.removeChild(e._dom),e._parent=null,e._dirty=!1,e.$_detached(this),this.invalidate(),e):null},n.prototype.removeLast=function(){return this._elements&&0<this._elements.length?this.removeChildAt(this._elements.length-1):null},n.prototype.clear=function(){var t=this._elements;if(0<(t?t.length:0)){for(var e=0,i=t;e<i.length;e++){var o=i[e];o._parent=null,o.$_detached(this)}if(this._elements=[],this._dom)for(;this._dom.lastChild;)this._dom.removeChild(this._dom.lastChild);return this.invalidate(),!0}return!1},n.prototype.hideAll=function(){if(this._elements)for(var t=0,e=this._elements;t<e.length;t++)e[t].visible=!1},n.prototype.invalidate=function(t,e){var i;if(void 0===e&&(e=!1),((t=void 0===t?!1:t)||!this._dirty)&&(this._dirty=!0,i=this.container)&&i.invalidateElement(this),e&&this._elements)for(var o=0,n=this._elements;o<n.length;o++)n[o].invalidate(t,!0)},n.prototype.validate=function(){this._dirty=!1},n.prototype.invalidateLayout=function(){var t=this.container;t&&t.invalidateLayout()},n.prototype.getBounds=function(t){return(t=void 0===t?null:t)?t.set(this._x,this._y,this._width,this._height):new nt.Rectangle(this._x,this._y,this._width,this._height)},n.prototype.getClientRect=function(t){return(t=void 0===t?null:t)?t.set(0,0,this._width,this._height):new nt.Rectangle(0,0,this._width,this._height)},n.prototype.containsInBounds=function(t,e){return t>=this._x&&t<this._x+this._width&&e>=this._y&&e<this._y+this._height},n.prototype.containsInClient=function(t,e){return 0<=t&&t<this._width&&0<=e&&e<this._height},n.prototype.parentToElement=function(t,e,i){for(var o=this;o&&o!=t;)e-=o._x,i-=o._y,o=o._parent;return new he.Point(e,i)},n.prototype.translateBy=function(t,e){var i=t;for(e=(e=void 0===e?null:e)||new nt.Rectangle(0,0,this._width,this._height);i&&i!==this;)e.x-=i._x,e.y-=i._y,i=i._parent;return e},n.prototype.topBy=function(t,e){for(var i=this._y+e,o=this._parent;o&&o!==t;)i+=o._y,o=o._parent;return i},n.prototype.boundsBy=function(t,e){var i=this._x,o=this._y,n=this._parent;for((e=void 0===e?null:e)&&(i+=e.x,o+=e.y);n&&n!==t;)i+=n._x,o+=n._y,n=n._parent;return e?new nt.Rectangle(i,o,e.width,e.height):new nt.Rectangle(i,o,this._width,this._height)},n.prototype.boundsByContainer=function(t){for(var e=this._x,i=this._y,o=((t=void 0===t?null:t)&&(e+=t.x,i+=t.y),this._parent);o&&void 0!==o._x;)e+=o._x,i+=o._y,o=o._parent;return t?new nt.Rectangle(e,i,t.width,t.height):new nt.Rectangle(e,i,this._width,this._height)},n.prototype.pointByContainer=function(t,e){for(var i=this._parent;i&&void 0!==i._x;)t+=i._x,e+=i._y,i=i._parent;return new he.Point(t+this._x,e+this._y)},n.prototype.containerToElement=function(t,e){for(var i=this;i;)t-=i._x,e-=i._y,i=i._parent;return new he.Point(t,e)},n.prototype.boundsByScreen=function(t){return t=this.boundsByContainer(t=void 0===t?null:t),t=this.container.toScreen(t)},n.prototype.hitTest=function(t,e){return 0<=t&&t<this._width&&0<=e&&e<this._height},n.prototype.findChildAt=function(t,e,i){var o=this._elements,n=o?o.length:0;if(0<n)for(var r=n-1;0<=r;r--){var s=o[r];if(s.visible){var a=t-s._x,l=e-s._y;if((i||s._mouseEnabled)&&(s.isLayer||s.hitTest(a,l))){a=s.findChildAt(a,l,i);if(a)return a;if(!s.isLayer&&s._mouseEnabled)return s}}}return null},n.prototype.move=function(t,e){t==this._x&&e==this._y||(this._x=t,this._y=e,this.invalidate())},n.prototype.resize=function(t,e){t==this._width&&e==this._height||(this._width=t,this._height=e,this.invalidate())},n.prototype.setBounds=function(t,e,i,o){t==this._x&&e==this._y&&i==this._width&&o==this._height||(this._x=t,this._y=e,this._width=i,this._height=o,this.sizeChanged())},n.prototype.setBoundsI=function(t,e,i,o){e>>=0,i>>=0,o>>=0,(t>>=0)==this._x&&e==this._y&&i==this._width&&o==this._height||(this._x=t,this._y=e,this._width=i,this._height=o,this.sizeChanged())},n.prototype.setRect=function(t){t.x==this._x&&t.y==this._y&&t.width==this._width&&t.height==this._height||(this._x=t.x,this._y=t.y,this._width=t.width,this._height=t.height,this.sizeChanged())},n.prototype.setRectI=function(t){var e=t.x>>0,i=t.y>>0,o=t.width>>0,t=t.height>>0;e==this._x&&i==this._y&&o==this._width&&t==this._height||(this._x=e,this._y=i,this._width=o,this._height=t,this.sizeChanged())},n.prototype.draw=function(){this._dirty&&this._dom&&(this._beforeDraw(this._dom),this._doDraw(this._dom),this._dirty=!1)},n.prototype.resetSize=function(){this._dom&&this._setSizeStyle(this._dom.style)},n.prototype.getHtml=function(){return this._dom&&this._dom.outerHTML},n.prototype.setImportantStyle=function(t,e){this._dom.style.setProperty(t,e,"important")},n.prototype._createDom=function(t){return t.createElement("div")},n.prototype._initDom=function(t){var e=t.style;e.position="absolute",e.boxSizing="border-box",this._addEventListeners(t)},n.prototype._addEventListeners=function(t){},n.prototype._removeEventListeners=function(t){},n.prototype.$_attached=function(t){this._doAttached(t)},n.prototype._doAttached=function(t){},n.prototype.$_detached=function(t){this._doDetached(t)},n.prototype._doDetached=function(t){},n.prototype._setSizeStyle=function(t){t.width=this._width+"px",t.height=this._height+"px"},n.prototype._getCssDisplay=function(){return"block"},n.prototype.resetStyleName=function(){this._setClassName(this._dom)},n.prototype._setClassName=function(t){var e=this._getCssSelector();e!=this._className&&(this._className=e,(t||this._dom).className=e||"")},n.prototype.applyBounds=function(){var t=this._dom.style;t.left=this._x+"px",t.top=this._y+"px",this._setSizeStyle(t)},n.prototype._beforeDraw=function(t){this._setClassName(t);t=t.style;t.left=this._x+"px",t.top=this._y+"px",this._setSizeStyle(t)},n.prototype._hoverChanged=function(){},n.prototype._visibleChanged=function(){},n.prototype.sizeChanged=function(){this.invalidate(),this._doSizeChanged()},n.prototype._doSizeChanged=function(){};var o,i=n;function n(t,e){void 0===e&&(e=null);var i=o.call(this)||this,e=(i._x=0,i._y=0,i._width=0,i._height=0,i._visible=!0,i._mouseEnabled=!0,i._elements=null,i._dirty=!0,i._hovered=!1,i._className="",i._name=e,i._dom=i._createDom(t));return e&&i._initDom(e),i}e.VisualElement=i;r=i,ne.__extends(s,r),_dp(s,"isLayer",{get:function(){return!0}}),s.prototype._getCssSelector=function(){},s.prototype._doDraw=function(t){};var r,i=s;function s(){return null!==r&&r.apply(this,arguments)||this}e.LayerElement=i;a=i,ne.__extends(l,a),_dp(l,"active",{get:function(){return this._active}}),l.prototype.$_activateView=function(){this._active||(this._doActivateView(),this._active=!0)},l.prototype.$_deactivateView=function(){void 0!==this.active&&!this._active||(this._dodDeactivateView(),this._active=!1)};var a,i=l;function l(t,e){void 0===e&&(e=!1);t=a.call(this,t)||this;return t._active=e,t}e.ViewLayer=i})),W=(t(pt),pt.VisualElement,pt.LayerElement,pt.ViewLayer,e(function(t,e){Object.defineProperty(e,"__esModule",{value:!0}),(r=i=e.SelectionMode||(e.SelectionMode={})).NONE="none",r.SINGLE="single",r.EXTENDED="extended",(r=n=e.SelectionStyle||(e.SelectionStyle={})).BLOCK="block",r.ROWS="rows",r.COLUMNS="columns",r.SINGLE_ROW="singleRow",r.SINGLE_COLUMN="singleColumn",r.SINGLE="single",r.NONE="none",(r=e.SelectionDisplay||(e.SelectionDisplay={})).CELL="cell",r.CELL_AND_BORDER="cellAndBorder",r.MASK="mask",e.isSingleSelectionStyle=function(t){return t==n.SINGLE_ROW||t==n.SINGLE_COLUMN||t==n.SINGLE},e.isRowSelection=function(t){t=t&&t.style;return t==n.ROWS||t==n.SINGLE_ROW},e.isColumnSelection=function(t){t=t&&t.style;return t==n.COLUMNS||t==n.SINGLE_COLUMN},o=se.Base,ne.__extends(s,o),s.prototype._doDispose=function(){o.prototype._doDispose.call(this)},_dp(s,"grid",{get:function(){return this._manager&&this._manager.grid}}),_dp(s,"runStyle",{get:function(){return this._runStyle}}),s.prototype.setValues=function(t){var e=this.grid.dataSource,i=this._getRows(),o=this.grid,n={};if(i&&i.rows&&0<i.rows.length&&i.fields&&0<i.fields.length){for(var r=0;r<i.rows.length;r++){for(var s=[],a=0;a<i.fields.length;a++)o.getWritable(o.getItemIndexOfRow(i.rows[r]),o.columnByField(i.fields[a]))&&s.push(i.fields[a]);s.length&&(n[i.rows[r]]=s.slice())}e.fillValue(n,t)}},s.prototype.inflate=function(t,e){switch(t){case"left":this._inflateLeft(e);break;case"right":this._inflateRight(e);break;case"top":this._inflateTop(e);break;case"bottom":this._inflateBottom(e)}},s.prototype.getItems=function(t){void 0===t&&(t=!0);for(var e=this.grid,i=[],o=this.getBounds(),n=o.top,r=o.bottom,s=n;s<=r;s++){var a=e.getItem(s);a&&(!t||0<=a.dataRow)&&i.push(a)}return i},s.prototype.getItemIndices=function(t){void 0===t&&(t=!0);for(var e=this.grid,i=[],o=this.getBounds(),n=o.top,r=o.bottom,s=n;s<=r;s++){var a=e.getItem(s);a&&(!t||0<=a.dataRow)&&i.push(a.index)}return i},s.prototype.getRows=function(){for(var t=this.grid,e=[],i=this.getBounds(),o=i.top,n=i.bottom,r=o;r<=n;r++){var s=t.getItem(r);s&&0<=s.dataRow&&0<=(s=s.dataRow)&&e.push(s)}return e},s.prototype._resized=function(){this._manager&&this._manager.$_itemResized(this)},s.prototype.toProxy=function(){var t=this.grid,e=this.getBounds(),i=t.getItem(e.r1),t=t.getItem(e.r2);return{style:this.style,startItem:e.r1,startRow:i?i.dataRow:-1,startColumn:e.c1.firstColumn.name,endItem:e.r2,endRow:t?t.dataRow:-1,endColumn:e.c2.lastColumn.name,startLayout:e.c1,endLayout:e.c2}},_dp(s,"startItem",{get:function(){return this.getBounds().r1}}),_dp(s,"startRow",{get:function(){var t=this.grid.getItem(this.getBounds().r1);return t?t.dataRow:-1}}),_dp(s,"startColumn",{get:function(){return this.getBounds().c1.firstColumn.name}}),_dp(s,"endItem",{get:function(){return this.getBounds().r2}}),_dp(s,"endRow",{get:function(){var t=this.grid.getItem(this.getBounds().r2);return t?t.dataRow:-1}}),_dp(s,"endColumn",{get:function(){return this.getBounds().c2.firstColumn.name}}),_dp(s,"startLayout",{get:function(){return this.getBounds().c1}}),_dp(s,"endLayout",{get:function(){return this.getBounds().c2}});var i,n,o,r=s;function s(t,e){var i=o.call(this)||this;return i._manager=t,i._runStyle=e,i}e.SelectionItem=r;a=P.EventAware,ne.__extends(h,a),h.prototype._doDispose=function(){this._grid=null,this._items=null,a.prototype._doDispose.call(this)},_dp(h,"grid",{get:function(){return this._grid}}),_dp(h,"exclusiveMode",{get:function(){return this._grid.displayOptions.selectionMode!==i.EXTENDED}}),_dp(h,"count",{get:function(){return this._items.length}}),_dp(h,"single",{get:function(){return 1==this._items.length&&this._items[0].single}}),h.prototype.lock=function(){this._locked=!0},h.prototype.unlock=function(){this._locked=!1},h.prototype.getItem=function(t){return this._items[t]},h.prototype.getItems=function(){return this._items.slice()},h.prototype.lastItem=function(){return this._items[this._items.length-1]},h.prototype.add=function(t,e,i){if(this._locked)return null;if(i==n.NONE)return this.clear(),null;this.exclusiveMode&&this.clear();var o=null;switch(i){case n.COLUMNS:o=new m(this,i,t.layout,e.layout);break;case n.SINGLE_COLUMN:o=new m(this,i,t.layout,t.layout);break;case n.ROWS:o=new p(this,i,t.itemIndex,e.itemIndex);break;case n.SINGLE_ROW:o=new p(this,i,t.itemIndex,t.itemIndex);break;case n.BLOCK:o=new u(this,i,t,e);break;case n.SINGLE:o=new u(this,i,t,t)}return o&&this.$_addItem(o)},h.prototype.remove=function(t){var e;this._locked||0<=(e=this._items.indexOf(t))&&(this._items.splice(e,1),this.fireEvent(h.REMOVED,t),this._changed())},h.prototype.clear=function(){this._locked||0<this._items.length&&(this._items.length=0,this.fireEvent(h.CLEARED))},h.prototype.selectRow=function(t,e){e&&this.clear(),this.containsItem(t,p)||this.$_addItem(new p(this,n.ROWS,t,t))},h.prototype.containsItem=function(t,e){for(var i=0,o=this._items.length;i<o;i++){var n=this._items[i];if((!e||n instanceof e)&&n.containsItem(t))return!0}return!1},h.prototype.containsLayout=function(t){for(var e=0,i=this._items.length;e<i;e++)if(this._items[e].containsLayout(t))return!0;return!1},h.prototype.containsCell=function(t){return this.contains(t.itemIndex,t.layout)},h.prototype.contains=function(t,e){for(var i=0,o=this._items.length;i<o;i++)if(this._items[i].contains(t,e))return!0;return!1},h.prototype.normalize=function(){},h.prototype.canResize=function(t){return t&&!e.isSingleSelectionStyle(t._runStyle)},h.prototype._changed=function(t){this.fireEvent(h.CHANGED,t)},h.prototype.$_addItem=function(t){if(t)return this._items.indexOf(t)<0&&(this._items.push(t),this.fireEvent(h.ADDED,t),this._changed(t)),t;throw new Error("item is null")},h.prototype.$_itemResized=function(t){this.fireEvent(h.RESIZED,t),this._changed(t)},h.prototype.$_ended=function(t){this.fireEvent(h.ENDED,t)},h.CHANGED="onSelectionChanged",h.ADDED="onSelectionAdded",h.REMOVED="onSelectionRemoved",h.CLEARED="onSelectionCleared",h.RESIZED="onSelectionResized",h.ENDED="onSelectionEnded";var a,l=h;function h(t){var e=a.call(this)||this;return e._items=[],e._locked=!1,e._grid=t,e}e.SelectionManager=l;d=r,ne.__extends(c,d),_dp(c,"startIndex",{get:function(){return this._startIndex}}),_dp(c,"endIndex",{get:function(){return this._endIndex}}),_dp(c,"style",{get:function(){return this._runStyle||n.BLOCK}}),_dp(c,"single",{get:function(){return _t.CellIndex.areEquals(this._startIndex,this._endIndex)}}),c.prototype.getBounds=function(){var t,e,i,o,n=this.grid;return this._startIndex.normalize(n),this._endIndex.normalize(n),_t.CellIndex.areEquals(this._startIndex,this._endIndex)?_t.CellRange.create(this._startIndex):(n=n.activeCellLayout._dataCells,t=this._startIndex.layout,e=this._endIndex.layout,o=i=void 0,o=t.col<=e.col?(i=n[0][t.col],n[n.length-1][e.col]):(i=n[0][e.col],n[n.length-1][t.col]),_t.CellRange.createRange(this._startIndex.itemIndex,i,this._endIndex.itemIndex,o))},c.prototype.containsItem=function(t){var e=Math.min(this._startIndex.itemIndex,this._endIndex.itemIndex),i=Math.max(this._startIndex.itemIndex,this._endIndex.itemIndex);return e<=t&&t<=i},c.prototype.containsLayout=function(t){var e,i;return!!t&&(this.single?this._startIndex.layout===t:(t=t.distance,(e=this._startIndex.layout.distance)<(i=this._endIndex.layout.distance)?e<=t&&t<=i:i<=t&&t<=e))},c.prototype.contains=function(t,e){return this.getBounds().contains(t,e)},c.prototype.resizeTo=function(t){this.grid.isValid(t)&&!_t.CellIndex.areEquals(t,this._endIndex)&&(this._endIndex.assign(t),this._resized())},c.prototype.moveRow=function(t){this._startIndex.itemIndex+=t,this._endIndex.itemIndex+=t},c.prototype.intersectsWith=function(t){return this.getBounds().intersectsWith(t.getBounds())},c.prototype.mergeWith=function(t){},c.prototype.getData=function(t){if(0==(t=void 0===t?-1:t))return null;var e,i=this.grid,o=i.collectDataColumns(this._startIndex.layout,this._endIndex.layout);if(!o||(e=o.length)<1)return null;for(var n=Math.min(this._startIndex.itemIndex,this._endIndex.itemIndex),r=Math.max(this._startIndex.itemIndex,this._endIndex.itemIndex),s=[],a=n;a<=r;a++){var l=i.getItem(a);if(l&&l.isDataRow){var h={};h.__rowId=l.dataRow;for(var d=0;d<e;d++){var u=o[d];h[u.fieldName]=l.getData(u.dataIndex)}if(s.push(h),0<t&&s.length==t)break}}return s},c.prototype._inflateLeft=function(t){this._startIndex.layout.distance<=this._endIndex.layout.distance?t.layout!==this._startIndex.layout&&(this._startIndex.layout=t.layout,this._resized()):t.layout!==this._endIndex.layout&&(this._endIndex.layout=t.layout,this._resized())},c.prototype._inflateRight=function(t){this._startIndex.layout.distance>this._endIndex.layout.distance?t.layout!==this._startIndex.layout&&(this._startIndex.layout=t.layout,this._resized()):t.layout!==this._endIndex.layout&&(this._endIndex.layout=t.layout,this._resized())},c.prototype._inflateTop=function(t){var e=this.grid,e=Math.max(0,Math.min(e.itemCount-1,t.itemIndex));this._startIndex.itemIndex<=this._endIndex.itemIndex?e!==this._startIndex.itemIndex&&(this._startIndex.itemIndex=e,this._resized()):e!==this._endIndex.itemIndex&&(this._endIndex.itemIndex=e,this._resized())},c.prototype._inflateBottom=function(t){var e=this.grid,e=Math.max(0,Math.min(e.itemCount-1,t.itemIndex));this._startIndex.itemIndex>this._endIndex.itemIndex?e!==this._startIndex.itemIndex&&(this._startIndex.itemIndex=e,this._resized()):e!==this._endIndex.itemIndex&&(this._endIndex.itemIndex=e,this._resized())},c.prototype._getRows=function(){var t=this.grid,e=t.collectDataColumns(this._startIndex.layout,this._endIndex.layout);if(e&&!(e.length<1)){for(var i=Math.min(this._startIndex.itemIndex,this._endIndex.itemIndex),o=Math.max(this._startIndex.itemIndex,this._endIndex.itemIndex),n=[],r=[],s=i;s<=o;s++)n.push(t.getItem(s).dataRow);for(var a=0,l=e;a<l.length;a++){var h=l[a];r.push(h.dataIndex)}return{rows:n,fields:r}}},c.prototype.toString=function(){return this._startIndex+" ~ "+this._endIndex};var d,u=c;function c(t,e,i,o){t=d.call(this,t,e)||this;return t._startIndex=i.clone(),t._endIndex=o.clone(),re.Utils.isDebugging()&&t._startIndex.layout,re.Utils.isDebugging()&&t._endIndex.layout,t}e.BlockSelection=u;_=r,ne.__extends(f,_),_dp(f,"startRow",{get:function(){return this._startRow}}),_dp(f,"endRow",{get:function(){return this._endRow}}),_dp(f,"topRow",{get:function(){return Math.min(this._startRow,this._endRow)}}),_dp(f,"bottomRow",{get:function(){return Math.max(this._startRow,this._endRow)}}),_dp(f,"style",{get:function(){return this._runStyle||n.ROWS}}),_dp(f,"single",{get:function(){return!1}}),f.prototype.getBounds=function(){var t=this.grid,e=t.itemCount;return this._startRow=Math.max(0,Math.min(e-1,this._startRow)),this._endRow=Math.max(0,Math.min(e-1,this._endRow)),this._startRow<=this._endRow?_t.CellRange.createRange(this._startRow,t.activeCellLayout.first,this._endRow,t.activeCellLayout.last):_t.CellRange.createRange(this._endRow,t.activeCellLayout.first,this._startRow,t.activeCellLayout.last)},f.prototype.contains=function(t,e){return this.containsItem(t)},f.prototype.containsItem=function(t){return t>=this.topRow&&t<=this.bottomRow},f.prototype.containsLayout=function(t){return!0},f.prototype.resizeTo=function(t){t=Math.max(0,t.itemIndex);t!=this._endRow&&(this._endRow=Math.max(0,Math.min(this.grid.itemCount-1,t)),this._resized())},f.prototype.moveRow=function(t){this._startRow+=t,this._endRow+=t},f.prototype.intersectsWith=function(t){return this.getBounds().intersectsWith(t.getBounds())},f.prototype.mergeWith=function(t){},f.prototype.getData=function(t){if(0==(t=void 0===t?-1:t))return null;var e=this.grid,i=e.collectDataColumns(e.getVisibleLayout(0),e.getVisibleLayout(e.visibleLayoutCount-1));if(!i)return null;var o=i.length;if(o<1)return null;for(var n=Math.max(0,Math.min(this._startRow,this._endRow)),r=Math.min(e.itemCount-1,Math.max(this._startRow,this._endRow)),s=[],a=n;a<=r;a++){var l=e.getItem(a);if(l&&l.isDataRow){var h={};h.__rowId=l.dataRow;for(var d=0;d<o;d++){var u=i[d];h[u.fieldName]=l.getData(u.dataIndex)}if(s.push(h),0<t&&s.length==t)break}}return s},f.prototype._inflateLeft=function(t){},f.prototype._inflateRight=function(t){},f.prototype._inflateTop=function(t){t=t.itemIndex;t!=this.topRow&&(this._startRow<=this._endRow?this._startRow=Math.max(0,Math.min(this.grid.itemCount-1,t)):this._endRow=Math.max(0,Math.min(this.grid.itemCount-1,t)),this._resized())},f.prototype._inflateBottom=function(t){t=t.itemIndex;t!=this.bottomRow&&(this._startRow>this._endRow?this._startRow=Math.max(0,Math.min(this.grid.itemCount-1,t)):this._endRow=Math.max(0,Math.min(this.grid.itemCount-1,t)),this._resized())},f.prototype._getRows=function(){var t=this.grid,e=t.activeCellLayout,e=t.collectDataColumns(e.first,e.last);if(e){var i=e.length;if(!(i<1)){for(var i=Math.max(0,Math.min(this._startRow,this._endRow)),o=Math.min(t.itemCount-1,Math.max(this._startRow,this._endRow)),n=[],r=[],s=i;s<=o;s++)n.push(t.getItem(s).dataRow);for(var a=0,l=e;a<l.length;a++){var h=l[a];r.push(h.dataIndex)}return{rows:n,fields:r}}}};var _,p=f;function f(t,e,i,o){t=_.call(this,t,e)||this;return t._startRow=i,t._endRow=o,t}e.RowSelection=p;g=r,ne.__extends(y,g),_dp(y,"startLayout",{get:function(){return this._startLayout}}),_dp(y,"endLayout",{get:function(){return this._endLayout}}),_dp(y,"leftLayout",{get:function(){return this._startLayout.col<=this._endLayout.col?this._startLayout:this._endLayout}}),_dp(y,"rightLayout",{get:function(){return this._startLayout.col>this._endLayout.col?this._startLayout:this._endLayout}}),_dp(y,"style",{get:function(){return this._runStyle||n.COLUMNS}}),_dp(y,"single",{get:function(){return!1}}),y.prototype.getBounds=function(){var t=this.grid.activeCellLayout,e=this._startLayout,i=this._endLayout,o=(e.col>i.col&&(o=e,e=i,i=o),e=t.getTopOf(e),i=t.getBottomOf(i,!0),this.grid.itemCount-1);return _t.CellRange.createRange(0,e,o,i)},y.prototype.contains=function(t,e){return this.containsLayout(e)},y.prototype.containsItem=function(t){return!0},y.prototype.containsLayout=function(t){return t.col>=this.leftLayout.col&&t.col<=this.rightLayout.col},y.prototype.resizeTo=function(t){t.layout!==this._endLayout&&(this._endLayout=t.layout,this._resized())},y.prototype.moveRow=function(t){},y.prototype.intersectsWith=function(t){return this.getBounds().intersectsWith(t.getBounds())},y.prototype.mergeWith=function(t){},y.prototype.getData=function(t){if(0==(t=void 0===t?-1:t))return null;var e=this.grid,i=e.collectDataColumns(this._startLayout,this._endLayout);if(!i)return null;for(var o=e.itemCount,n=[],r=0;r<o;r++){var s=e.getItem(r);if(s&&s.isDataRow){var a={};a.__rowId=s.dataRow;for(var l=0,h=i.length;l<h;l++)a[i[l].fieldName]=s.getData(i[l].dataIndex);if(n.push(a),0<t&&n.length==t)break}}return n},y.prototype._inflateLeft=function(t){t=t.layout;t!==this.leftLayout&&(this._startLayout.distance<=this._endLayout.distance?this._startLayout=t:this._endLayout=t,this._resized())},y.prototype._inflateRight=function(t){t=t.layout;t!==this.rightLayout&&(this._startLayout.distance>this._endLayout.distance?this._startLayout=t:this._endLayout=t,this._resized())},y.prototype._inflateTop=function(t){},y.prototype._inflateBottom=function(t){},y.prototype._getRows=function(){var t=this.grid,e=t.collectDataColumns(this._startLayout,this._endLayout);if(e){for(var i=t.itemCount,o=[],n=[],r=0;r<i;r++)o.push(t.getItem(r).dataRow);for(var s=0,a=e;s<a.length;s++){var l=a[s];n.push(l.dataIndex)}return{rows:o,fields:n}}};var g,m=y;function y(t,e,i,o){t=g.call(this,t,e)||this;return t._startLayout=i,t._endLayout=o,t}e.ColumnSelection=m;v=pt.LayerElement,ne.__extends(w,v),w.prototype._getCssSelector=function(){return"rg-selection"},w.prototype._initDom=function(t){v.prototype._initDom.call(this,t),this.setImportantStyle("pointer-events","none")};var v,C=w;function w(t){return v.call(this,t,"selectionView")||this}e.SelectionView=C;x=pt.LayerElement,ne.__extends(I,x),_dp(I,"item",{get:function(){return this._item}}),I.prototype.prepare=function(){this._toped=this._bottomed=this._lefted=this._righted=!1},I.prototype.updateElement=function(){var t=0,e=0,i=this.width,o=this.height;this._lefted&&(t-=10,i+=10),this._righted&&(i+=10),this._toped&&(e-=10,o+=10),this._bottomed&&(o+=10),this._view.setBounds(t,e,i,o)},I.prototype._initDom=function(t){x.prototype._initDom.call(this,t),this.setImportantStyle("overflow","hidden"),this.setImportantStyle("pointer-events","none")};var x,b=I;function I(t){var e=x.call(this,t,"selectionMask")||this;return e._toped=!1,e._bottomed=!1,e._lefted=!1,e._righted=!1,e._view=new C(t),e.addChild(e._view),e}e.SelectionMask=b;E=pt.LayerElement,ne.__extends(S,E),S.prototype._doDispose=function(){E.prototype._doDispose.call(this)},S.prototype.addView=function(t){var e=t.$_hash,i=this._views[e];return i||(i=this._pool.pop()||new b(this.doc),this._views[e]=i),i._item=t,this.addChild(i),i},S.prototype.removeView=function(t){var t=t.$_hash,e=this._views[t];e&&(this.removeChild(e),this._pool.push(e),delete this._views[t])},S.prototype.clearViews=function(){for(var t in this._views){t=this._views[t];this.removeChild(t),this._pool.push(t)}this._views={}},S.prototype.layout=function(){var t,e=this._grid.layoutManager,i=new nt.Rectangle,o=Object.keys(this._views);for(t in this._views){var n=this._views[t],r=n.item,s=!1;1===o.length&&r.single&&_t.CellIndex.areEquals(r._startIndex,this._grid.focusedIndex)||(n.prepare(),r instanceof p?(s=this.$_getSelectionRowsRect(e,r,n,i),n._lefted=!0,n._righted=!0):r instanceof m?(s=this.$_getSelectionColumnsRect(e,r,n,i),n._toped=!0,n._bottomed=!0):s=this.$_getSelectionRangeRect(e,r,n,i),s&&(r=e.contentBounds.y+e.footerBounds.y,i.bottom>r)&&(n._bottomed=!0,i.bottom=r)),n.visible=s,n.visible&&(n.setRectI(i),n.updateElement(),n.invalidate())}},S.prototype.$_getSelectionRowsRect=function(t,e,i,o){var n=this._grid,e=e.getBounds(),r=e.r1,e=e.r2,s=t.itemCount,a=t.fixedItemCount,l=n.topIndex;if(0<a){if(l+a+s<=r||e<0||a<=r&&e<l+a)return!1;var h=t.fixedHeight+n.fixedOptions.rowBarHeight;r<a?d=t.getTableItemBounds(Math.max(0,r)):((d=t.getTableItemBounds(Math.max(0,r-l))).y<h&&(i._toped=!0),d.y=Math.max(d.y,h)),e<a?u=t.getTableItemBounds(e):r<=a&&e<a+l?u=t.getTableItemBounds(Math.min(a+l,a)-1):l<=e?(u=t.getTableItemBounds(Math.min(t.itemCount+a-1,e-l))).y=Math.max(u.y,h):u=d}else{if(!(0<s))return!1;if(l+s<=r||e<l)return!1;var h=r-l,d=t.getTableItemBounds(Math.max(0,h)),u=t.getTableItemBounds(Math.min(s-1,e-l));h<0&&(i._toped=!0)}return o.copy(d.union(u)),o.offset(t.fixedContentBounds.x,t.contentBounds.y+t.bodyBounds.y),o.right=(0<t.rightLayoutCount?t.rightContentBounds:t.contentBounds).right,!0},S.prototype.$_getSelectionColumnsRect=function(t,e,i,o,n){var r=this._grid,e=e.getBounds(),s=t.fixedLayoutCount,a=t.rightLayoutCount,l=(t.rightFirstLayout,e.c1.col),h=e.c2.col,r=(r.fixedOptions.colBarWidth,t.getDataRect(e.c1)),e=t.getDataRect(e.c2);return o.left=Math.min(r.x,e.x),o.right=Math.max(r.right,e.right),o.y=t.contentBounds.y+t.headerBounds.bottom+t.summaryBounds.height,o.height=Math.min(t.dataBounds.height,t.footerBounds.y),n&&n.copy(o),s<=l&&(r=t.fixedContentBounds.right,o.x<r&&(i._lefted=!0,o.left=Math.max(o.left,r)),o.right<r)&&(i._righted=!0,o.width=0),0<a&&(e=t.rightFirstLayout,n=t.rightContentBounds,o.left>n.left?o.width=0:h<e&&o.right>=t.rightContentBounds.left&&(o.right=Math.min(o.right,t.rightContentBounds.x),i._righted=!0)),!0},S.prototype.$_getSelectionRangeRect=function(t,e,i,o,n){var r=this._rangeRect;return!!this.$_getSelectionRowsRect(t,e,i,r)&&(o.y=r.y,o.bottom=r.bottom,this.$_getSelectionColumnsRect(t,e,i,r,n),o.x=r.x,o.right=r.right,n&&(n.y=o.y,n.height=o.height),!0)};var E,l=S;function S(t,e){e=E.call(this,t.doc,e)||this;return e._pool=[],e._views={},e._rangeRect=new nt.Rectangle,e._grid=t,e}e.SelectionLayer=l})),L=(t(W),W.SelectionMode,W.SelectionStyle,W.SelectionDisplay,W.isSingleSelectionStyle,W.isRowSelection,W.isColumnSelection,W.SelectionItem,W.SelectionManager,W.BlockSelection,W.RowSelection,W.ColumnSelection,W.SelectionView,W.SelectionMask,W.SelectionLayer,e(function(t,e){Object.defineProperty(e,"__esModule",{value:!0});var o,n=re.Utils.isSafari?1:0,l=(o=P.EventAware,ne.__extends(r,o),r.copyProc=function(t,e){return t.isDisabled()||t.editing?void 0:(null!=(t=t._grid.copyToClipboard(e,null))&&(e.clipboardData?e.clipboardData.setData("text/plain",t):window.clipboardData.setData("Text",t)),e.preventDefault())},r.getEditorType=function(t){return"string"==typeof t?t:t?t.type:"line"},r.getEditorType2=function(t,e){return"string"==typeof t?t:t&&t.type?t.type:"string"==typeof e?e:e&&e.type?e.type:"line"},r.prototype._doDispose=function(){this.unprepare(),this._editor=re.Utils.detach(this._editor),this._container=re.Utils.detach(this._container),this._container=null,this._grid=null,this._controller=null,o.prototype._doDispose.call(this)},_dp(r,"native",{get:function(){return!1}}),_dp(r,"buttonCount",{get:function(){return 0}}),_dp(r,"hasList",{get:function(){return!1}}),_dp(r,"emptyValue",{get:function(){return this._emptyValue},set:function(t){t!=this._emptyValue&&(this._emptyValue=t,this._changed())}}),_dp(r,"textCase",{get:function(){return this._textCase},set:function(t){t!=this._textCase&&(this._textCase=t,this._changed())}}),_dp(r,"datetimeFormat",{get:function(){return this._datetimeFormat},set:function(t){t!=this._datetimeFormat&&((this._datetimeFormat=t)?(this._saveDateConverter||(this._saveDateConverter=new dt.DateTimeConverter(t)),this._saveDateConverter.format=t,this._dateConverter=this._saveDateConverter):this._dateConverter=dt.DateTimeConverter.Default)}}),_dp(r,"todayChar",{get:function(){return this._todayChar},set:function(t){t!=this._todayChar&&(this._todayChar=t,this._changed())}}),_dp(r,"nowChar",{get:function(){return this._nowChar},set:function(t){t!=this._nowChar&&(this._nowChar=t,this._changed())}}),_dp(r,"booleanFormat",{get:function(){return this._booleanFormat},set:function(t){t!=this._booleanFormat&&((this._booleanFormat=t)?(this._saveBoolConverter||(this._saveBoolConverter=new k.BooleanConverter(t)),this._saveBoolConverter.format=t,this._boolConverter=this._saveBoolConverter):this._boolConverter=k.BooleanConverter.Default)}}),_dp(r,"editor",{get:function(){return this._editor}}),_dp(r,"visible",{get:function(){return parseInt(this._container.style.width)>n&&parseInt(this._container.style.height)>n}}),r.prototype.setVisible=function(t,e){var i,o,e=(e=void 0===e?!1:e)?!t:this.visible;t||(this._container.style.width=n+"px",this._container.style.height=n+"px",re.Utils.isMobile()&&((i=this._grid)?(i=i.container._containerDom,o=re.getDoc(this._container),this._editor===o.activeElement&&i&&i.focus()):this._editor.blur())),t!=e&&this._doVisibleChanged(t)},r.prototype._doVisibleChanged=function(t){this.setEditorZIndex(t)},_dp(r,"readOnly",{get:function(){return this._readOnly},set:function(t){var e=re.getWin(this._container);this._editor instanceof e.HTMLInputElement&&(this._editor.readOnly=this._readOnly=t)}}),_dp(r,"textReadOnly",{get:function(){return this._textReadOnly}}),r.prototype._setTextReadOnly=function(t){t!=this._textReadOnly&&(this._textReadOnly=t,this._changed())},_dp(r,"allowEmpty",{get:function(){return this._allowEmpty}}),r.prototype._setAllowEmpty=function(t){t!=this._allowEmpty&&(this._allowEmpty=t,this._changed())},_dp(r,"editing",{get:function(){return this._started}}),_dp(r,"editIndex",{get:function(){return this._editIndex}}),_dp(r,"value",{get:function(){return this._editor.value}}),_dp(r,"listing",{get:function(){return!1}}),r.prototype.hasButton=function(t,e){return!1},r.prototype.applyOptions=function(t){t&&this.assignFrom(t)},r.prototype.setEditIndex=function(t){this._editIndex.assign(t)},r.prototype.setController=function(t){this._controller=t},r.prototype.prepare=function(){!this.native&&this._editor&&this._editor.removeAttribute("type")},r.prototype.unprepare=function(){},r.prototype.beginEdit=function(t,e){this._started||(this._started=this._doBeginEdit())&&(t&&this.clear(),e)&&this.selectAll()},r.prototype.endEdit=function(){this._started&&(this._doEndEdit(),this._started=!1)},r.prototype.isEdited=function(){return!1},r.prototype.isDisabled=function(){return!this._grid||this._grid.container.disabled},r.prototype.caretToLast=function(){},r.prototype.commit=function(){this._doCommit()},r.prototype.setReadOnly=function(t){this._editor.readOnly=this._readOnly=t},r.prototype.getEditValue=function(t,e){},r.prototype.setEditValue=function(t){this._oldValue=t},r.prototype.setCellEditValue=function(t,e){!this.readOnly&&this._requestStart(e)&&(this.setEditValue(t),this._doChanged())},r.prototype.getEditText=function(){return""},r.prototype.selectAll=function(t){void 0===t&&(t=!1),!this._grid.$_editFocused||!t&&re.Utils.isMobile()||this._selectAll()},r.prototype.clear=function(){var t=re.getWin(this._container);this._editor instanceof t.HTMLInputElement&&(this._editor.value="")},r.prototype.setFocus=function(){this._grid.handler._draggable||this._isMobile&&this.hasList||this._editor.focus({preventScroll:!0})},r.prototype.setEditorTitle=function(t){},r.prototype.setBounds=function(t,e,i,o,n){},r.prototype.setCellBounds=function(t,e,i,o){this._cellBounds.set(t,e,i,o)},r.prototype.closeList=function(t){},r.prototype.dropDownList=function(t){},r.prototype.buttonClicked=function(t,e){},r.prototype.buttonDown=function(t,e){},r.prototype.buttonUp=function(t,e){},r.prototype.setButtonStyle=function(t,e,i,o,n){return!1},r.prototype.initOptions=function(){this._emptyValue=void 0,this.booleanFormat=null,this._todayChar=null,this._nowChar=null,this.datetimeFormat=null,this._textCase=ht.TextInputCase.DEFAULT,this._checkHangeul=!1},r.prototype.$_setEditorId=function(t){},r.prototype._changed=function(){},r.prototype.$_setController=function(t){this._controller=t},r.prototype._editField=function(){return this._grid.dataSource?this._grid.dataSource.getField(this._editIndex.dataField):null},r.prototype._isDateEditor=function(){return!1},r.prototype._requestStart=function(t){return this._started||(this.selectAll(),this._controller.onEditorStart(this))},r.prototype._valToStr=function(e){var t=this.editIndex,i="";try{if(void 0!==e||this._mask){var o=t.grid.dataSource.getField(t.dataField);if(o)switch(o.dataType){case ht.ValueType.DATETIME:e&&(i=this._dateConverter.getText(e)),this._mask&&(i=this._mask.writeBuffer(i));break;case ht.ValueType.BOOLEAN:i=this._boolConverter.toText(e);break;case ht.ValueType.NUMBER:isNaN(e)||(i=re.Utils.toStr(e));break;case ht.ValueType.OBJECT:var n=t.column._objectKey||o.objectKey;e&&(i=n&&e.hasOwnProperty(n)?e[n]:null!=e&&"object"==typeof e?JSON.stringify(e):"");break;default:i=this._mask?this._mask.writeBuffer(e):e}else i=e}}catch(t){i=e}return null===i?"":i},r.prototype._strToVal=function(t){t=re.Utils.toStr(t);var e=this._editIndex,i=e.dataColumn&&this._textCase==ht.TextInputCase.DEFAULT?e.dataColumn.textInputCase:this._textCase;try{var o=e.grid.dataSource.getField(e.dataField);if(o){var n,r,s=o.dataType;if(s==ht.ValueType.DATETIME||t&&this._isDateEditor()&&s==ht.ValueType.TEXT)return n=s==ht.ValueType.DATETIME,r=null,!(r=t&&t==this._nowChar?new Date:r)&&t&&t==this._todayChar&&(r=new Date).setHours(0,0,0,0),r||(this._mask&&(t=this._mask.getStripValue()),r=this._dateConverter.getDate(t)),n?!r||isNaN(r.getFullYear())?void 0:r:r?this._dateConverter.getText(r):void 0;if(s==ht.ValueType.BOOLEAN)return this._boolConverter.toBoolEx(t);if(s==ht.ValueType.NUMBER)return parseFloat(t);s==ht.ValueType.TEXT&&this._mask&&(t=this._mask.getStripValue())}return i===ht.TextInputCase.UPPER?t&&t.toLocaleUpperCase():i===ht.TextInputCase.LOWER?t&&t.toLocaleLowerCase():t}catch(t){}},r.prototype._dispatchKeyDown=function(t){return this._controller,this._controller.onEditorKeyDown(this,t)},r.prototype._dispatchKeyPress=function(t){return this._controller,this._controller.onEditorKeyPress(this,t)},r.prototype._dispatchKeyUp=function(t){return this._controller,this._controller.onEditorKeyUp(this,t)},r.prototype._dispatchChange=function(){this._controller.onEditorChange(this)},r.prototype._dispatchSearch=function(t){this._controller.onEditorSearch(this,t)},r.prototype._dispatchSearchCellButtonClick=function(t){return this._controller.onSearchCellButtonClick(this,t)},r.prototype._dispatchCommit=function(){this._controller.onEditorCommit(this)},r.prototype._sendToParent=function(t,e,i){var o=re.Utils.isMac&&t.metaKey||!re.Utils.isMac&&t.ctrlKey;if(2==(e=void 0===e?void 0:e)){if(this._dispatchKeyPress(t))return t.preventDefault&&(t.preventDefault(),t.stopImmediatePropagation()),!0}else if(3==e){if(this._dispatchKeyUp(t))return t.preventDefault&&(t.preventDefault(),t.stopImmediatePropagation()),!0;try{var n=this._controller._grid,r=n.editOptions;if(r.maxLengthToNextCell){var s=r.skipReadOnly,a=n.activeTool,l=this.maxLength,h=this.editIndex.clone(),d=re.Utils.included(t.keyCode,38,33,40,34,113,9,13);if(!this._checkHangeul&&!d&&!o&&!t.altKey&&n&&n.isEditing(h)&&0<l&&!this._composing&&47<t.keyCode){var u,c=this._mask?this._mask.getStripValue():this._editor.value;if(this instanceof b&&this.maxLengthExceptComma&&(u=this.getEditValue(),isNaN(u)&&null!=u||(c=String(u))),c&&c.length>=l)return n.getBodyViewAt(h).spanRight(n.layoutManager,h),h.right(),s&&a._checkReadOnly(h)&&(a._skipReadOnly(h,1)||(h=this.editIndex.clone())),_t.CellIndex.areEquals(h,this.editIndex)||a.setFocused(h,!0,!0),!0}}}catch(t){if(t instanceof G.ValidationError)throw t;return!0}}else if(this._dispatchKeyDown(t))return t.preventDefault&&(t.preventDefault(),t.stopImmediatePropagation()),!0;return!1},r.prototype._commitListValue=function(t){this._editIndex&&this._grid._editorStarted(this,this._editIndex)&&this._grid.setCellValue(this._editIndex,t);var e,t=this._grid;t?(t=t.container._containerDom,e=re.getDoc(t),this._editor==e.activeElement&&t&&t.focus()):this._editor.blur()},r.Unselected={},r.InvalidFormat={},r.EDITOR_CSS="rg-editor ",r.CONTAINER_CSS="rg-editor-container",r);function r(t,e){var i=o.call(this)||this;return i._textCase=ht.TextInputCase.DEFAULT,i._readOnly=!1,i._textReadOnly=!1,i._allowEmpty=!1,i._isMobile=re.Utils.isMobile(),i._isTablet=re.Utils.isTablet(),i._started=!1,i._dateConverter=dt.DateTimeConverter.Default,i._boolConverter=k.BooleanConverter.Default,i._cellBounds=new nt.Rectangle,i._checkHangeul=!1,i._composing=!1,i._grid=t,i._options=t.editorOptions,i._parentElement=e,i._editor=i._createEditor(e),i._editor.className=r.EDITOR_CSS+i._getInputSelector(),i._container&&(i._container.className=r.CONTAINER_CSS),(i._editor.$_owner=i)._editIndex=t.getIndex(),i._editor&&((e=t.container).$_addListener(i._editor,"focus",function(t){this._grid.$_setEditFocused(!0,t)}.bind(i),!1),e.$_addListener(i._editor,"focusin",function(t){this._grid.$_setEditFocused(!0,t)}.bind(i),!1),e.$_addListener(i._editor,"blur",function(t){this._grid.$_setEditFocused(!1,t)}.bind(i),!1),e.$_addListener(i._editor,"focusout",function(t){this._grid.$_setEditFocused(!1,t)}.bind(i),!1)),i.setVisible(!1,!0),i.$_setEditorId(i._editor),i}e.CellEditor=l;s.prototype.dispose=function(){return this._definitions=null,this._tests=null,this._editor._editor&&(this._editor._editor.onclick=null),this._editor=null},_dp(s,"includedFormat",{get:function(){return this._includedFormat},set:function(t){t!=this._includedFormat&&(this._includedFormat=t,this._changed())}}),_dp(s,"placeHolder",{get:function(){return this._placeHolder},set:function(t){t!=this._placeHolder&&(this._placeHolder=t,this._changed())}}),_dp(s,"editMask",{get:function(){return this._editMask},set:function(t){t!=this._editMask&&(this._editMask=t,this._changed())}}),_dp(s,"definitions",{get:function(){return this._definitions},set:function(t){t!=this._definitions&&(this._definitions=t,this._changed())}}),_dp(s,"invalidFormatMessage",{get:function(){return this._invalidFormatMessage},set:function(t){t!=this._invalidFormatMessage&&(this._invalidFormatMessage=t,this._changed())}}),_dp(s,"showInvalidFormatMessage",{get:function(){return this._showInvalidFormatMessage},set:function(t){t!=this._showInvalidFormatMessage&&(this._showInvalidFormatMessage=t,this._changed())}}),_dp(s,"overWrite",{get:function(){return this._overwrite},set:function(t){t!=this._overwrite&&(this._overwrite=t,this._changed())}}),_dp(s,"allowEmpty",{get:function(){return this._allowEmpty},set:function(t){t!=this._allowEmpty&&(this._allowEmpty=t,this._changed())}}),_dp(s,"restrictNull",{get:function(){return this._restrictNull},set:function(t){t!=this._restrictNull&&(this._restrictNull=t,this._changed())}}),s.prototype.clickHandler=function(t){this.restrictNull&&this._moveCaret()},s.prototype.clearBuffer=function(t,e){t=0<arguments.length?t:0,e=1<arguments.length?e:this._tests.length;for(var i=t;i<e;i++)this._buffer[i]=this.$_getPlaceHolder(i),this._defBuffer[i]=""},s.prototype.writeBuffer=function(t,e){if(void 0===e&&(e=!1),t){e&&this.clearBuffer();for(var i=0,o=0,n=this._tests.length;i<n;i++)if(this._tests[i]&&this._tests[i]instanceof RegExp)for(var r;r=t[o++];)if(this._tests[i].test(r)){this._buffer[i]=r,this._defBuffer[i]=r;break}}return this._buffer&&this._buffer.join("")},s.prototype.getStripValue=function(){var t=[],e=[];if(""==this._defBuffer.join(""))return null;if(this.includedFormat)for(var i=0,o=this._buffer.length;i<o;i++){var n=this._buffer[i];!this._tests[i]||this._tests[i].test(n)?t.push(n):n==this.$_getPlaceHolder(i)&&this._tests[i].test(" ")&&t.push(" ")}else for(i=0,o=this._buffer.length;i<o;i++)this._tests[i]&&this._tests[i]instanceof RegExp&&this._tests[i].test(this._buffer[i])&&(0<e.length&&(t=t.concat(e),e=[]),t.push(this._buffer[i]));return t.join("")},s.prototype.setOptions=function(t){"string"==typeof t?this.$_parseMask(t):(t.definitions&&this.$_parseDefinitions(t.definitions),t.placeHolder&&(this._placeHolder=t.placeHolder),t.editMask&&this.$_parseMask(t.editMask),null!=t.includedFormat&&(this._includedFormat=t.includedFormat),t.invalidFormatMessage&&(this._invalidFormatMessage=t.invalidFormatMessage),null!=t.allowEmpty&&(this._allowEmpty=t.allowEmpty),null!=t.showInvalidFormatMessage&&(this._showInvalidFormatMessage=t.showInvalidFormatMessage),null!=t.overwrite&&(this._overwrite=t.overwrite),null!=t.overWrite&&(this._overwrite=t.overWrite),this._restrictNull&&this._editor&&((t=this._editor._editor).onclick||(t.onclick=this.clickHandler.bind(this))))},s.prototype.checkValid=function(){var t=[];if(this.allowEmpty){for(var e=0,i=this._tests.length;e<i;e++)t[e]=this.$_getPlaceHolder(e);if(t.join("")===this._buffer.join(""))return!0}for(e=0,i=this._tests.length;e<i;e++){var o=this._buffer[e];if(this._tests[e]&&!this._tests[e].test(o)&&o==this.$_getPlaceHolder(e)&&!this._tests[e].test(" "))return!1}return!0},s.prototype._changed=function(){},s.prototype._moveCaret=function(t,e){for(var i=this._editor._editor,o=t=0<arguments.length?t:i.selectionStart,n=e=1<arguments.length?e:i.selectionEnd,r=t-1;0<=r;r--){if(this._tests[r]&&this._tests[r].test(this._buffer[r])){o=r+1;break}o=r}for(r=e-1;0<=r;r--){if(this._tests[r]&&this._tests[r].test(this._buffer[r])){n=r+1;break}n=r}if(o==t&&n==e)return o!=t||n!=e;for(r=o;r<=t&&!this._tests[r];r++)o++;for(r=n;r<=e&&!this._tests[r];r++)n++;return i.setSelectionRange(o,n),!0},s.prototype.$_setCaret=function(t,e){this._editor._editor.setSelectionRange(t,e)},s.prototype.$_parseDefinitions=function(t){for(var e in t)"string"==typeof t[e]&&(this._definitions[e]=new RegExp(t[e]))},s.prototype.$_parseMask=function(t){var e=this._tests=[],i=this._definitions,o=t.split("");this._editMask=t,this._buffer=[];for(var n=0,r=o.length;n<r;n++)e.push(i[o[n]]),this._buffer.push(i[o[n]]?this.$_getPlaceHolder(n):o[n])},s.prototype.$_getPlaceHolder=function(t){return this._placeHolder&&this._placeHolder.length>t?this._placeHolder[t]:!this._tests[t]&&this._editMask&&this._editMask.length>t?this._editMask[t]:"_"},s.prototype.$_seekPrev=function(t){for(;0<=--t&&!this._tests[t];);return t},s.prototype.$_seekNext=function(t){for(;++t<this._editMask.length&&!this._tests[t];);return t},s.prototype.$_shiftL=function(t,e){var i=this._editMask.length,o=this._buffer;if(0<=t)for(var n=t,r=this.$_seekNext(e);n<i;n++)if(this._tests[n]){if(!(r<i&&this._tests[n].test(o[r])))break;o[n]=o[r],this._defBuffer[n]=this._defBuffer[r],o[r]=this.$_getPlaceHolder(r),this._defBuffer[r]="",r=this.$_seekNext(r)}},s.prototype.$_shiftR=function(t){for(var e,i,o=this._editMask.length,n=this._buffer,r=t,s=this.$_getPlaceHolder(t);r<o;r++)if(this._tests[r]){if(e=this.$_seekNext(r),i=n[r],this._defBuffer[r]=s,n[r]=s,!(e<o&&this._tests[e].test(i)))break;s=i}},s.prototype.keydown=function(t){var e=this._editor.editor;if(!e.readOnly){var t=t.which||t.keyCode,i=e.selectionStart,o=e.selectionEnd;if(46===t||8===t)i==o&&(i=46!==t?this.$_seekPrev(i):o=this.$_seekNext(i-1),o=46===t?this.$_seekNext(o):o),this.clearBuffer(i,o),this._overwrite||this.$_shiftL(i,o-1),e.value=this.writeBuffer(),this.$_setCaret(Math.max(0,i),Math.max(0,i));else if(39===t||35===t)return this._moveCaret();this._pStart=e.selectionStart}},s.prototype.keyPress=function(t){var e,i,o=this._editor.editor;o.readOnly||(this.restrictNull&&this._moveCaret(),e=o.selectionStart,i=o.selectionEnd,t=t.which||t.keyCode,this.clearBuffer(e,i),e!==i&&this.$_shiftL(e,i-1),i=this.$_seekNext(e-1),this._editMask&&this._editMask.length>i&&this._tests[i]&&this._tests[i].test(t=String.fromCharCode(t))&&(this._overwrite||this.$_shiftR(e),this._buffer[i]=t,this._defBuffer[i]=t,o.value=this.writeBuffer(),i=this.$_seekNext(i),this.$_setCaret(Math.max(0,i),Math.max(0,i))),this._pStart=o.selectionStart)},s.prototype.input=function(t){var e,i=this._editor.editor;i.readOnly||(e=i.value,/[ㄱ-ㅎㅏ-ㅣ가-힝]/.test(e)&&(i.value=i.value.replace(/[ㄱ-ㅎㅏ-ㅣ가-힝]/g,""),null!=this._pStart)&&i.setSelectionRange(this._pStart,this._pStart))};var i=s;function s(t,e){this._includedFormat=!1,this._showInvalidFormatMessage=!0,this._overwrite=!1,this._allowEmpty=!1,this._restrictNull=!1,this._definitions={9:/[0-9 ]/,0:/[\d]/,a:/[A-Za-z]/,"*":/[A-Za-z0-9]/},this._tests=null,this._defBuffer=[],this._editor=t,e&&this.setOptions(e)}e.EditMask=i;a=l,ne.__extends(d,a),_dp(d,"maxLength",{get:function(){return this._maxLength},set:function(t){t!=this._maxLength&&(this._maxLength=t,this._changed())}}),_dp(d,"fontSize",{get:function(){return this._fontSize},set:function(t){this._fontSize=isNaN(t)?0:Math.max(0,t)}}),d.prototype.initOptions=function(){a.prototype.initOptions.call(this),this._maxLength=0},_dp(d,"readonly",{set:function(t){this._editor.readOnly=this._readOnly=t}}),d.prototype.isEdited=function(){return this._modified},d.prototype.setVisible=function(t,e){a.prototype.setVisible.call(this,t,e);e=this._container.style;if(t?(e.border="",e.boxShadow=""):(e.border="none",e.boxShadow="none"),re.Utils.isWinSafari){try{this._editor.style.width=this._container.getBoundingClientRect().width+"px",this._container.style.cssText=this._container.style.cssText.replace(/border-width: initial; border-color: initial; /g,"")}catch(t){}setTimeout(function(){this._editor.style.width="100%"}.bind(this),0)}},d.prototype.setEditIndex=function(t){a.prototype.setEditIndex.call(this,t);var e=this._editor.style,e=(re.Utils.isMobile()?e.fontSize=Math.max(this.fontSize,16)+"px":0<this.fontSize&&(e.fontSize=this.fontSize+"px"),t.valueColumn);if(e)switch(this._textCase==ht.TextInputCase.DEFAULT?e.textInputCase:this._textCase){case ht.TextInputCase.LOWER:this._editor.style.textTransform="lowercase";break;case ht.TextInputCase.UPPER:this._editor.style.textTransform="uppercase";break;default:this._editor.style.textTransform="none"}},d.prototype.getEditText=function(){return this._editor.value},d.prototype.setEditValue=function(t){a.prototype.setEditValue.call(this,t),this._editor.value=this._valToStr(t)},d.prototype.getEditValue=function(e,t){void 0===e&&(e=!0);var i=this._editField(),o=this._emptyValue;try{var n,r,s=i.dataType,a=this._editor.value;if(s==ht.ValueType.TEXT)a||void 0===this._emptyValue||(a=this._emptyValue),void 0===(o=this._strToVal(a))&&(o="");else{if(s===ht.ValueType.OBJECT)return n=this._editIndex.dataColumn.objectKey||i.objectKey,(r=this._editIndex.item.getData(i.index)||{})[n]=a,r;if(re.Utils.isWhiteSpace(a))if(void 0!==this._emptyValue)o=this._strToVal(this._emptyValue);else switch(s){case ht.ValueType.NUMBER:isNaN(this._oldValue)&&(o=NaN);break;case ht.ValueType.DATETIME:null===this._oldValue&&(o=null);break;case ht.ValueType.BOOLEAN:}else o=this._strToVal(a)}if(o===l.InvalidFormat)return o;o=i.readValue(o)}catch(t){if(e)throw t;o=this._emptyValue}return o},d.prototype._selectAll=function(){this._editor.select&&this._editor.select()},d.prototype._setSelectionRange=function(t,e){try{this._editor.setSelectionRange(t,e)}catch(t){}},d.prototype._doBeginEdit=function(){if(this._modified=!1,this.visible)return this._editor.value||this._setSelectionRange(0,0),!0},d.prototype._doEndEdit=function(){this._modified=!1},d.prototype._doCommit=function(){};var a,h=d;function d(){var t=null!==a&&a.apply(this,arguments)||this;return t._maxLength=0,t._fontSize=0,t._modified=!1,t}e.TextCellEditorBase=h;u=h,ne.__extends(_,u),_.prototype._doDispose=function(){this._editor.$_owner=null,this._editor.onkeydown=null,this._editor.onkeyup=null,this._editor.onkeypress=null,this._editor.oninput=null,this._editor.onpaste=null,this._editor.oncopy=null,u.prototype._doDispose.call(this)},_dp(_,"mask",{get:function(){return this._mask}}),_dp(_,"text",{get:function(){return this._editor.value},set:function(t){!this._editor||t==this._editor.value&&t==this._controller.getData(this._editIndex)||(this._editor.value=t,this._doChanged())}}),_.prototype.setMask=function(t){this._mask=null,t&&(this._mask=new i(this,t))},_.prototype.setAlignment=function(t){this._container.style.textAlign="left"},_.prototype._createContainer=function(t){var t=t.createElement("div"),e=t.style;return t.spellcheck=!1,t.setAttribute("aria-hidden","true"),e.position="absolute",e.width="0px",e.height="0px",e.padding="0px",e.margin="0px",t},_.prototype._createEditor=function(t){var e=re.getDoc(t),t=(this._container=this._createContainer(e),t.appendChild(this._container),e.createElement("input")),e=t.style,e=(t.setAttribute("aria-hidden","true"),t.autocomplete="off",e.position="absolute",e.boxSizing="border-box",e.margin="0px",e.padding="0px 2px",e.wordWrap="normal",e.overflow="hidden",e.resize="none",e.border="none",e.outline="none",e.left="0px",e.top="0px",e.width="100%",e.height="100%",e["-webkit-user-modify"]="read-write-plaintext-only",e["white-space"]="pre",e["-webkit-transform"]="translateZ(0)",t.tabIndex=-1,t.onkeydown=this._keyDownHandler.bind(this),t.onkeyup=this._keyUpHandler.bind(this),t.onkeypress=this._keyPressHandler.bind(this),t.oninput=this._inputHandler.bind(this),t.onpaste=this._pasteHandler.bind(this),t.oncopy=this._copyHandler.bind(this),this._grid.container);return e.$_addListener(t,"compositionstart",this._compositionstartHandler.bind(this),!1),e.$_addListener(t,"compositionupdate",this._compositionupdateHandler.bind(this),!1),e.$_addListener(t,"compositionend",this._compositionendHandler.bind(this),!1),e.$_addListener(t,"text",this._textHandler.bind(this),!1),this._container.appendChild(t),this._defMaxLength=0<t.maxLength?t.maxLength:1e6,t},_.prototype.initOptions=function(){u.prototype.initOptions.call(this),this._editor.readOnly=this._readOnly=!1,this._mask&&(this._mask=this._mask.dispose())},_.prototype.applyOptions=function(t){u.prototype.applyOptions.call(this,t),t.mask&&this.setMask(t.mask)},_.prototype.caretToLast=function(){var t=re.Utils.toStr(this._editor.value).length;this._setSelectionRange(t,t)},_.prototype.setEditIndex=function(t){u.prototype.setEditIndex.call(this,t),this._editor.maxLength=0<this.maxLength?this.maxLength:this._defMaxLength},_.prototype.setEditorZIndex=function(t){var e=this._editor.style,i=this._grid.displayOptions.baseZindex;t?e.zIndex=String(i+0):e.removeProperty("z-index")},_.prototype._doChanged=function(){this._requestStart(),this._started&&(this._textReadOnly||!this._editor.readOnly||this.allowEmpty&&""===this.text)&&(this._modified=!0,this._dispatchChange())},_.prototype.setBounds=function(t,e,i,o,n){re.Utils.setBounds(this._container,t,e,i,o),0==i||0==o?this._editor.style.width="100%":0<n&&(this._editor.style.height=Math.round(o-4)+"px",this._editor.style.width=n+"px")},_.prototype._keyDownHandler=function(t){if(!this.isDisabled()){var e,i=this._editor,o=t.keyCode;if((re.Utils.isIE||re.Utils.isEdge)&&!this.visible&&t.ctrlKey&&90==o)return!1;if(re.Utils.isIE&&t.ctrlKey&&86==t.keyCode&&i.readOnly)return t.preventDefault(),this._pasteHandler(t),!1;if(!re.Utils.isIE||!t.ctrlKey||67!=t.keyCode&&45!=t.keyCode||""!=this._editor.value){switch(this._inputValue=i.value,o){case 8:case 46:this._sendToParent(t)||(!this.visible&&this._requestStart()?i.readOnly&&!this.allowEmpty||!this._controller._getData(this._editIndex)||(this._mask?(t.preventDefault(),t.stopImmediatePropagation(),this._mask.keydown(t),this._doChanged()):this.text=""):this._mask&&(t.preventDefault(),t.stopImmediatePropagation(),this._mask.keydown(t),this._doChanged()),8===o&&i.readOnly&&(t.preventDefault(),t.stopImmediatePropagation()));break;case 9:return!this._sendToParent(t);case 37:if(!this.visible||0==i.selectionEnd&&i.selectionEnd==i.selectionStart)return!this._sendToParent(t);if(i.readOnly&&re.Utils.isChrome)return!this._sendToParent(t);t.stopImmediatePropagation();break;case 39:if(!this.visible||i.selectionEnd==i.value.length&&i.selectionEnd==i.selectionStart)return!this._sendToParent(t);if(i.readOnly&&re.Utils.isChrome)return!this._sendToParent(t);t.altKey||t.ctrlKey||t.shiftKey||!this._mask||!this._mask.restrictNull||(e=i.selectionStart,this._mask._moveCaret(e+1,e+1)&&(t.preventDefault(),t.stopImmediatePropagation())),t.stopImmediatePropagation();break;case 36:if(!this.visible)return!this._sendToParent(t);t.stopImmediatePropagation();break;case 35:if(!this.visible)return!this._sendToParent(t);this._mask&&this._mask.restrictNull&&(e=i.value?i.value.length-1:0,this._mask._moveCaret(e,e))&&(t.preventDefault(),t.stopImmediatePropagation()),t.stopImmediatePropagation();break;case 32:if(this.visible)break;return!this._sendToParent(t);case 38:case 33:case 40:case 34:case 13:case 27:case 113:case 45:return t.preventDefault(),t.stopImmediatePropagation(),!this._sendToParent(t);case 229:this._sendToParent(t);break;default:return!this._sendToParent(t,null,!0)}return re.Utils.isFirefox?!t.ctrlKey&&!t.altKey&&229!==o&&32<=o&&(o<112||130<o)&&this._requestStart():re.Utils.isIE,!0}t.preventDefault(),re.getDoc(this._editor).execCommand("copy")}},_.prototype._keyUpHandler=function(t){if(!this.isDisabled()){var e=t.keyCode;switch(8!=e&&46!=e||re.Utils.ieOld&&this.visible&&!this._editor.readOnly&&this._editor.value!=this._inputValue&&this._doChanged(),t.keyCode){case 37:case 39:case 36:case 35:case 32:this.visible||this._sendToParent(t,3);break;default:this._sendToParent(t,3)}}},_.prototype._keyPressHandler=function(t){var e;this.isDisabled()||(e=t.which||t.keyCode,this._sendToParent(t,2),re.Utils.isFirefox?t.ctrlKey||t.altKey||!(0==e||32<=e)||(this._requestStart()?this._mask&&(this._mask._pStart=t.target.selectionStart,this._mask.keyPress(t),this._doChanged(),t.preventDefault()):t.preventDefault()):re.Utils.isMac&&t.metaKey&&(122===e||121===e)?t.preventDefault():re.Utils.isMac&&t.metaKey&&(99===e||118===e)||32<=e&&(this._requestStart()?this._mask&&(this._mask._pStart=t.target.selectionStart,this._mask.keyPress(t),this._doChanged(),t.preventDefault()):t.preventDefault()))},_.prototype._textHandler=function(){this.isDisabled()||this._requestStart()},_.prototype._compositionstartHandler=function(t){this.isDisabled()||(this._composing=!0,this._requestStart(),this._started&&!this._editor.readOnly&&(this._modified=!0,this._dispatchChange(),this._checkHangeul=!0))},_.prototype._compositionendHandler=function(){this._composing=!1},_.prototype._compositionupdateHandler=function(){this._composing=!0},_.prototype._changeHandler=function(t){},_.prototype._inputHandler=function(t){this.isDisabled()||re.Utils.isIE&&!this._started||"historyUndo"!==t.inputType&&"historyRedo"!==t.inputType&&(this._mask&&this._mask.input(t),this._doChanged())},_.prototype._pasteHandler=function(t){if(!this.isDisabled()){var e=this._grid.pasteOptions;try{var i,o,n,r,s=void 0,a=(t.originalEvent||t).clipboardData;null!=(s=a?a.getData("text/plain"):window.clipboardData.getData("text"))&&(this.visible?(this._mask&&(t.preventDefault(),r=(i=this._editor).value,o=i.selectionStart,n=i.selectionEnd,r=r.substr(0,o)+s+r.substr(n),i.value=this._mask.writeBuffer(r,!0)),this._doChanged()):(t.preventDefault(),this._grid.pasteFromClipboard(s,t)))}catch(t){if(t instanceof G.ValidationError){if(e.throwValidationError)throw t}else if(t instanceof G.AbortError)alert(t.message);else if(t)throw t}}},_.prototype._copyHandler=function(t){l.copyProc(this,t)},_.prototype._getInputSelector=function(){return null};var u,c=_;function _(){return null!==u&&u.apply(this,arguments)||this}e.TextCellEditor=c;p=c,ne.__extends(g,p),_dp(g,"inputCharacters",{get:function(){return this._inputCharacters},set:function(t){t!=this._inputCharacters&&(this._inputCharacters=t)}}),_dp(g,"ignoreCharacters",{get:function(){return this._ignoreCharacters},set:function(t){t!=this._ignoreCharacters&&(this._ignoreCharacters=t)}}),g.prototype.initOptions=function(){this._inputCharacters=null,this._ignoreCharacters=null,p.prototype.initOptions.call(this)},g.prototype._inputHandler=function(t){this.$_resetValue(),p.prototype._inputHandler.call(this,t)},g.prototype._keyDownHandler=function(t){return this._pStart=t.target.selectionStart,p.prototype._keyDownHandler.call(this,t)},g.prototype._createEditor=function(t){t=p.prototype._createEditor.call(this,t);return t.tabIndex=-1,t},g.prototype._getInputSelector=function(){return g.INPUT_CSS},g.prototype.$_resetValue=function(){var t,e,i=this._editor,o=i.value;this.visible&&((t=this.inputCharacters)&&(e=new RegExp("[^"+t+"]","g")).test(o)&&(i.value=o=o.replace(e,""),null!=this._pStart)&&i.setSelectionRange(this._pStart,this._pStart),(t=this.ignoreCharacters)&&(e=new RegExp("["+t+"]","g")).test(o)&&(i.value=i.value.replace(e,""),null!=this._pStart)&&i.setSelectionRange(this._pStart,this._pStart),this._pStart=null)},g.INPUT_CSS="rg-text-editor";var p,f=g;function g(t,e){return p.call(this,t,e)||this}e.LineCellEditor=f;m=c,ne.__extends(y,m),y.prototype._createEditor=function(t){t=m.prototype._createEditor.call(this,t);return t.setAttribute("type","password"),t.tabIndex=-1,t},y.prototype._getInputSelector=function(){return y.INPUT_CSS},y.prototype.prepare=function(){},y.INPUT_CSS="rg-password-editor";var m,f=y;function y(t,e){return m.call(this,t,e)||this}e.PasswordCellEditor=f;v=h,ne.__extends(C,v),C.prototype._doDispose=function(){this._editor.onkeydown=null,this._editor.onkeyup=null,this._editor.onkeypress=null,this._editor.oninput=null,this._editor.onpaste=null,this._editor.oncopy=null,v.prototype._doDispose.call(this)},_dp(C,"minHeight",{get:function(){return this._minHeight},set:function(t){t!=this._minHeight&&(this._minHeight=t,this._changed())}}),_dp(C,"height",{get:function(){return this._height},set:function(t){this._height=t}}),_dp(C,"altEnterNewLine",{get:function(){return this._altEnterNewLine},set:function(t){t!=this._altEnterNewLine&&(this._altEnterNewLine=t,this._changed())}}),_dp(C,"text",{get:function(){return this._editor.value}}),C.prototype.setAlignment=function(t){this._container.style.textAlign="left"},C.prototype.initOptions=function(){v.prototype.initOptions.call(this),this._minHeight=0,this._height=0,this._altEnterNewLine=!1,this._editor.style.setProperty("overflow","hidden"),this.setReadOnly(!1)},C.prototype.setEditIndex=function(t){v.prototype.setEditIndex.call(this,t),this._editor.maxLength=0<this.maxLength?this.maxLength:2e9},C.prototype.setCellEditValue=function(t){v.prototype.setCellEditValue.call(this,t,!1)},C.prototype.setEditorZIndex=function(t){var e=this._editor.style,i=this._grid.displayOptions.baseZindex;t?e.zIndex=String(i+0):e.removeProperty("z-index")},C.prototype._doChanged=function(){this._requestStart(),this._started&&!this._editor.readOnly&&(this._modified=!0,this._dispatchChange(),this.$_resetBounds())},C.prototype.$_resetBounds=function(){var t=re.Utils.getClientRect(this._container),e=(this._height<0?(r=this._grid.getEditCellBounds(this,this._editIndex).height,r+=re.Utils.isMobile()?3:1):0<this._height&&(r=this._height),t.cx),i=t.cy,o=t.width,n=Math.round(t.height),r=(this._editor.scrollWidth>o&&(o=this._editor.scrollWidth+6),r?(this._editor.style.overflow="auto",n=r):this._editor.scrollHeight>n&&(n=this._editor.scrollHeight+6),isNaN(this._minHeight)?0:this._minHeight);0<r&&(n=Math.max(n,r)),t=re.Utils.getClientRect(this._parentElement),o=Math.min(t.width,o),n=Math.min(t.height,n),e+o>t.width&&(e=t.width-o),i+n>t.height&&(i=t.height-n),re.Utils.setBounds(this._container,Math.max(e,0),Math.max(i,0),o,n)},C.prototype.$_createContainer=function(t){var t=t.createElement("div"),e=t.style;return t.spellcheck=!1,t.setAttribute("aria-hidden","true"),e.position="absolute",e.width="0px",e.height="0px",e.padding="0px",e.margin="0px",t},C.prototype._createEditor=function(t){var e=re.getDoc(t),t=(this._container=this.$_createContainer(e),t.appendChild(this._container),e.createElement("textarea")),e=t.style,e=(t.autocomplete="off",t.setAttribute("aria-hidden","true"),e.position="absolute",e.margin="0px",e.padding="0px",e.wordWrap="normal",e.overflow="hidden",e.resize="none",e.border="none",e.outline="none",e.left="0px",e.top="0px",e.width="100%",e.height="100%",e["-webkit-user-modify"]="read-write-plaintext-only",e["white-space"]="pre",e["-webkit-transform"]="translateZ(0)",t.tabIndex=-1,t.onkeydown=this._keyDownHandler.bind(this),t.onkeyup=this._keyUpHandler.bind(this),t.onkeypress=this._keyPressHandler.bind(this),t.oninput=this._inputHandler.bind(this),t.onpaste=this._pasteHandler.bind(this),t.oncopy=this._copyHandler.bind(this),this._grid.container);return e.$_addListener(t,"compositionstart",this._compositionstartHandler.bind(this),!1),e.$_addListener(t,"compositionupdate",this._compositionupdateHandler.bind(this),!1),e.$_addListener(t,"compositionend",this._compositionendHandler.bind(this),!1),e.$_addListener(t,"text",this._textHandler.bind(this),!1),this._container.appendChild(t),t},C.prototype.setBounds=function(t,e,i,o){re.Utils.setBounds(this._container,t,e,i,o),t>re.Utils.$_INVISIBLE_EDIT_BOUNDS.x&&this.$_resetBounds()},C.prototype._getInputSelector=function(){return C.INPUT_CSS},C.prototype._textHandler=function(){this.isDisabled()||this._requestStart()},C.prototype._compositionstartHandler=function(t){this.isDisabled()||(this._composing=!0,this._requestStart())},C.prototype._compositionendHandler=function(){this._composing=!1},C.prototype._compositionupdateHandler=function(){this._composing=!0},C.prototype._keyDownHandler=function(t){if(!this.isDisabled()){var e=this._editor,i=t.keyCode;if((re.Utils.isIE||re.Utils.isEdge)&&!this.visible&&t.ctrlKey&&90==i)return!1;if(!re.Utils.isIE||!t.ctrlKey||67!=t.keyCode&&45!=t.keyCode||""!=this._editor.value){switch(i){case 8:case 46:this._sendToParent(t)||!this.visible&&this._requestStart()&&(t.preventDefault(),t.stopImmediatePropagation(),!this._editor.readOnly)&&this._controller.getData(this._editIndex)&&(this._editor.value="",this._modified=!0,this._dispatchChange());break;case 9:return!this._sendToParent(t);case 37:if(!this.visible||0==e.selectionEnd&&e.selectionEnd==e.selectionStart)return!this._sendToParent(t);break;case 39:if(!this.visible||e.selectionEnd==e.value.length&&e.selectionEnd==e.selectionStart)return!this._sendToParent(t);break;case 36:case 35:case 38:case 33:case 40:case 34:if(!this.visible)return!this._sendToParent(t);t.stopImmediatePropagation();break;case 32:if(this.visible)break;return!this._sendToParent(t);case 13:var o,n=t.ctrlKey||re.Utils.isMac&&t.metaKey;if(this.altEnterNewLine){if(!(t.altKey&&this.editing||t.shiftKey))return!this._sendToParent(t)}else if(!(n&&this.editing||t.shiftKey))return!this._sendToParent(t);(this.altEnterNewLine&&t.altKey||!this.altEnterNewLine&&n)&&!t.shiftKey&&(t.preventDefault(),t.stopImmediatePropagation(),n=e.value)&&(o=e.selectionEnd,n=n.substring(0,o)+"\r\n"+n.substring(o),e.value=n,e.setSelectionRange(o+1,o+1),this._doChanged());break;case 27:case 113:case 45:return t.preventDefault(),t.stopImmediatePropagation(),!this._sendToParent(t);case 229:break;default:return this._sendToParent(t,null,!0),!0}return t.keyCode,!0}t.preventDefault(),re.getDoc(this._editor).execCommand("copy")}},C.prototype._keyUpHandler=function(t){if(!this.isDisabled()){var e=t.keyCode;switch(8!=e&&46!=e||re.Utils.ieOld&&this.visible&&!this._editor.readOnly&&this._editor.value!=this._inputValue&&this._doChanged(),t.keyCode){case 37:case 39:case 36:case 35:case 32:this.visible||this._sendToParent(t,3);break;default:this._sendToParent(t,3)}}},C.prototype._keyPressHandler=function(t){var e=t.which||t.keyCode;this.isDisabled()||(re.Utils.isMac&&t.metaKey&&(122===e||121===e)?t.preventDefault():re.Utils.isMac&&t.metaKey&&(99===e||118===e)||32<=e&&(this._requestStart()||t.preventDefault()))},C.prototype._inputHandler=function(t){this.isDisabled()||"historyUndo"!==t.inputType&&"historyRedo"!==t.inputType&&this._doChanged()},C.prototype._pasteHandler=function(t){if(!this.isDisabled())if(this.visible)this._doChanged();else{t.preventDefault();var e=this._grid.pasteOptions;try{var i=void 0,o=(t.originalEvent||t).clipboardData;null!=(i=o?o.getData("text/plain"):window.clipboardData.getData("text"))&&this._grid.pasteFromClipboard(i,t)}catch(t){if(t instanceof G.ValidationError){if(e.throwValidationError)throw t}else if(t instanceof G.AbortError)alert(t.message);else if(t)throw t}}},C.prototype._copyHandler=function(t){l.copyProc(this,t)},C.INPUT_CSS="rg-multiline-editor";var v,f=C;function C(t,e){return v.call(this,t,e)||this}e.MultiLineCellEditor=f;var w,x=/[ㄱ-ㅎㅏ-ㅣ가-힝]/g,b=(w=c,ne.__extends(I,w),_dp(I,"positiveOnly",{get:function(){return this._positiveOnly},set:function(t){t!=this._positiveOnly&&(this._positiveOnly=t,this.$_resetRistrict())}}),_dp(I,"integerOnly",{get:function(){return this._integerOnly},set:function(t){t!=this._integerOnly&&(this._integerOnly=t,this.$_resetRistrict())}}),_dp(I,"editFormat",{get:function(){return this._editFormat},set:function(t){t!=this._editFormat&&((this._editFormat=t)?(t=this._decimalFormatter=new Y.DecimalFormatter(t))&&(this._decSep=t.separator||".",this._groupSep=t.groupSep||",",this._decLen=Math.max(t.minDigits,t.maxDigits)):(this._decimalFormatter=void 0,this._decSep=".",this._groupSep=",",this._decLen=void 0))}}),_dp(I,"multipleChar",{get:function(){return this._multipleChar},set:function(t){t!=this._multipleChar&&(this._multipleChar=t,this._changed())}}),_dp(I,"addString",{get:function(){return this._addString},set:function(t){t!=this._addString&&(this._addString=t,this._changed())}}),_dp(I,"maxLengthExceptComma",{get:function(){return this._maxLengthExceptComma},set:function(t){t!=this._maxLengthExceptComma&&(this._maxLengthExceptComma=t,this._changed())}}),_dp(I,"maxIntegerLength",{get:function(){return this._maxIntegerLength},set:function(t){t!=this._maxIntegerLength&&(this._maxIntegerLength=t,this._changed())}}),_dp(I,"blankWhenSpace",{get:function(){return this._blankWhenSpace},set:function(t){t!=this._blankWhenSpace&&(this._blankWhenSpace=t,this._changed())}}),_dp(I,"step",{get:function(){return this._step},set:function(t){t!==this._step&&0!=t&&(this._step=t,this._changed())}}),_dp(I,"max",{get:function(){return this._max},set:function(t){this._max=t}}),_dp(I,"min",{get:function(){return this._min},set:function(t){this._min=t}}),_dp(I,"delay",{get:function(){return this._delay},set:function(t){t!==this._delay&&(this._delay=t)}}),_dp(I,"textReadOnly",{get:function(){return this._textReadOnly},set:function(t){this._setTextReadOnly(t)}}),_dp(I,"direction",{get:function(){return this._direction},set:function(t){this._direction=t}}),_dp(I,"showStepButton",{get:function(){return this._showStepButton},set:function(t){this._showStepButton=t}}),I.prototype.setMask=function(t){this._mask=null},I.prototype.initOptions=function(){w.prototype.initOptions.call(this),this.editFormat=void 0,this._positiveOnly=!1,this._integerOnly=!1,this._multipleChar=void 0,this._addString="000",this._blankWhenSpace=!1,this._maxLengthExceptComma=!1,this._maxIntegerLength=0,this._step=1,this._min=this._max=void 0,this._delay=100,this._active=!1,this._direction="vertical",this._showStepButton=!1,this._textReadOnly=!1,this.$_resetRistrict()},I.prototype.hasButton=function(t,e){return null!=e.showStepButton&&e.showStepButton},_dp(I,"buttonCount",{get:function(){return 2}}),I.prototype.setEditIndex=function(t){w.prototype.setEditIndex.call(this,t),this._editor.maxLength=this.maxLengthExceptComma||this.maxLength<=0?this._defMaxLength:this.maxLength},I.prototype._inputHandler=function(t){t.data&&t.data.match(x)?t.target.value=this._inputValue:(this._editFormat&&this.$_editFormatting(t),w.prototype._inputHandler.call(this,t))},I.prototype._keyPressHandler=function(t){var e,i,o,n,r,s,a;re.Utils.isFirefox&&(t.ctrlKey||0===t.charCode)||(e=!0,i=String.fromCharCode(t.keyCode||t.charCode),this._regx.test(i)&&!(t.target.value&&0<=t.target.value.indexOf(this._decSep)&&i==this._decSep)||this._multipleChar&&i===this._multipleChar||(e=!1,this.blankWhenSpace&&" "===i)||t.preventDefault(),s=t.target.selectionStart,r=t.target.selectionEnd,o=t.target.value,a=new RegExp("\\"+this._groupSep,"g"),(n=o?o.split(""):[]).splice(s,r-s,i===this._multipleChar?this._addString:i),n=n.join("").replace(a,""),0<this.maxLength&&e&&this.maxLengthExceptComma&&o&&((n=(r=n&&"-"===n[0])?n.substr(1):n).length>this.maxLength&&t.preventDefault(),n=r?"-"+n:n),0<this._maxIntegerLength&&i!==this._decSep&&(s=Math.floor(this.$_strToNum(n)),isNaN(s)||(a=Math.abs(s).toString().length,this._maxIntegerLength<a&&t.preventDefault())),this._isMultiple=i==this._multipleChar),w.prototype._keyPressHandler.call(this,t)},I.prototype._keyDownHandler=function(t){if(!this.isDisabled()){var e=t.keyCode||t.charCode;if(this._isMultiple=!1,(8===e||46===e)&&this.editing&&this._editFormat){var i=t.target,o=i.value,n=o.length,r=o&&o.split(""),s=i.selectionStart,a=i.selectionEnd;if(s!==a)return w.prototype._keyDownHandler.call(this,t);var l=o[8===e?s-1:s];l!==this._groupSep&&l!==this._decSep||l===this._decSep&&s===(8===e?o.length:o.length-1)||(r.splice(8===e?s-2:s+1,1),i.value=r.join(""),this.$_editFormatting(t),o=i.value,l=n-(8===e?o.length:n),i.setSelectionRange(s-l,a-l),this._doChanged(),t.preventDefault())}return w.prototype._keyDownHandler.call(this,t)}},I.prototype._compositionstartHandler=function(t){this.isDisabled()||this._requestStart()},I.prototype._dispatchChange=function(){this.visible&&(this.$_resetValue(),w.prototype._dispatchChange.call(this))},I.prototype.setEditValue=function(t){t=parseFloat(t);isNaN(t)?this._editor.value="":this._editFormat&&"number"==typeof t?this._editor.value=this.$_formatNum(t,this._decimalFormatter.minDigits,this._decimalFormatter._maxDigits):this._editor.value=t},I.prototype.getEditValue=function(e,t){void 0===e&&(e=!0),this.$_resetValue();var i=this._emptyValue;try{var o,n,r=this._editor.value;(r=r&&r.trim())&&(o=new RegExp("\\"+this._groupSep,"g"),n=new RegExp("[\\"+this._decSep+"]+","g"),r=(r=(r=(r=(r=(r=r.replace(o,"")).replace(n,".")).replace(/\++/g,"+")).replace(/\-+/g,"-")).replace(/\+\-/g,"+")).replace(/\-\+/g,"-")),i=r?parseFloat(r):null!=i?i:void 0}catch(t){if(e)throw t}return i},I.prototype.setCellEditValue=function(t){this.readOnly||!this._requestStart()||"string"!=typeof t&&"number"!=typeof t||(t=this.$_strToNum(t),this.setEditValue(t),this._doChanged())},I.prototype.buttonDown=function(t,e){var i,o=e.target;re.Utils.stopEvent(e),"up"===o.$_editButtonType?i=this.step:"down"===o.$_editButtonType&&(i=-this.step),i&&(this.$_changeStepValue(i),this._active=!0,setTimeout(function(){this._active&&!this._stepTimer&&(this._stepTimer=setInterval(function(){this.$_changeStepValue(i)}.bind(this),this._delay))}.bind(this),300))},I.prototype.buttonUp=function(t,e){this._active=!1,clearInterval(this._stepTimer),this._stepTimer=null},I.prototype.setButtonStyle=function(t,e,i,o,n){var r=t.style;return i?(0===e?r.top="0px":r.removeProperty("top"),0===e?r.removeProperty("bottom"):r.bottom="0px",r.right=o+"px",r.height="9px"):(r.top="0px",r.removeProperty("bottom"),r.right=o+n*e+"px",r.height="100%"),r.width=n+"px",t.className=0===e?"rg-button-step-up":"rg-button-step-down",t.$_editButtonType=0===e?"up":"down",!0},I.prototype._getInputSelector=function(){return I.INPUT_CSS},I.prototype.setFocus=function(){this._stepChanged||w.prototype.setFocus.call(this)},I.prototype.$_strToNum=function(t){t=""+t;var e=new RegExp("\\"+this._decSep,"g"),i=new RegExp("\\"+this._groupSep,"g"),o="-"===t[0],i=(t=t.replace(i,"").replace(e,".").replace(/\+/g,""),parseFloat(t));return isNaN(i)?NaN:o?-Math.abs(i):i},I.prototype.$_formatNum=function(t,e,i){var o=t<0||0==t&&1/t==-1/0?"-":"",i=Math.max(e,i),i=isNaN(i)?2:i,n=parseInt(t=Math.abs(+t||0).toFixed(i))+"",r=3<n.length?n.length%3:0;if(0<=t.indexOf(".")){for(var s=t.split(".")[1].split("");0<s.length&&"0"===s[s.length-1]&&s.length>e;)s.splice(s.length-1,1);t=s.join(""),i=s.length}return o+(r?n.substr(0,r)+this._groupSep:"")+n.substr(r).replace(/(\d{3})(?=\d)/g,"$1"+this._groupSep)+(i?this._decSep+t:"")},I.prototype.$_editFormatting=function(t){var e,i=t.target.value,o=i&&"-"===i[0],n=i&&i[i.length-1]==this._decSep,r=t.target.selectionStart,s=t.target.selectionEnd,a=(this._isMultiple&&this._addString&&(i=i.replace(new RegExp("\\"+this._multipleChar,"gi"),this._addString),r+=this._addString.length,s+=this._addString.length),i.split(this._decSep)),l=(1<a.length&&(a.length=2,a[1]=a[1].substr(0,this._decimalFormatter._maxDigits),i=a.join(this._decSep)),a=2==a.length?Math.min(a[1].length,null!=this._decLen?this._decLen:99):0,this.$_strToNum(i));isNaN(l)||((0<this.maxLength||0<this.maxIntegerLength)&&(l=Math.abs(l),e=String(l).split("."),0<this.maxIntegerLength&&(e[0]=e[0].substr(0,this.maxIntegerLength)),e=e.join("."),0<this.maxLength&&(e=e.substr(0,this.maxLength)),l=parseFloat(e),o)&&(l=-l),i=this.$_formatNum(l,a,this._decimalFormatter.maxDigits),e=(i=n&&this._decLen&&i.indexOf(this._decSep)<0?i+this._decSep:i).length,o=t.target.value.length,1==Math.abs(e-o)&&(o<e?(r++,s++):i.indexOf(this._decSep)>=r&&(r--,s--)),t.target.value=i,t.target.setSelectionRange(r,s))},I.prototype.$_resetValue=function(){var t,e,i,o;this.visible&&(e=(t=this._editor).selectionStart,i=t.selectionEnd,o=t.value?t.value.length:0,t.value=t.value.replace(x,"").trim(),(t.value?t.value.length:0)==o?t.setSelectionRange(e,i):t.setSelectionRange(i,i))},I.prototype.$_resetRistrict=function(){this._positiveOnly&&this._integerOnly?this._regx=this._regxPosInt:this._positiveOnly?this._regx=this._regxPos:this._integerOnly?this._regx=this._regxInt:this._regx=this._regxAll},I.prototype.$_changeStepValue=function(t){var e=null==(e=this.getEditValue())||e==isNaN(e)?0:e;e+=t,null!=this._max&&(e=Math.min(this._max,e)),null!=this._min&&(e=Math.max(this._min,e)),this.setEditValue(e),this._stepChanged=!0,this._doChanged(),this._stepChanged=!1},I.INPUT_CSS="rg-number-editor",I);function I(t,e){t=w.call(this,t,e)||this;return t._addString="000",t._maxIntegerLength=0,t._step=1,t._delay=100,t._regxAll=/[\d]|,|\.|\-|\+|e|E/,t._regxPos=/[\d]|,|\.|\+|e|E/,t._regxInt=/[\d]|,|\+|\-/,t._regxPosInt=/[\d]|,|\+/,t._regx=t._regxAll,t._decLen=void 0,t._decimalFormatter=void 0,t._isMultiple=!1,t._decSep=".",t._groupSep=",",t._active=!1,t._stepChanged=!1,t._editor.style["ime-mode"]="disabled",t._editor.style["-webkit-ime-mode"]="disabled",t._editor.style["-moz-ime-mode"]="disabled",t._editor.style["-ms-ime-mode"]="disabled",t}e.NumberCellEditor=b;E=pt.VisualElement,ne.__extends(R,E),R.prototype._getCssSelector=function(){return"rg-editor-marquee"},R.prototype._initDom=function(t){E.prototype._initDom.call(this,t),t.style.pointerEvents="none"},R.prototype._doDraw=function(t){},R.prototype.spread=function(){var t=this._dom,e=t.style,i=t.parentElement.getBoundingClientRect();e.left="0",e.top="0",e.width=i.width+"px",e.height=i.height+"px",this._setClassName(t)};var E,S=R;function R(){return null!==E&&E.apply(this,arguments)||this}e.EditorMarquee=S;T=c,ne.__extends(D,T),D.prototype.hasButton=function(t,e){return!0},_dp(D,"buttonCount",{get:function(){return 1}}),_dp(D,"hasList",{get:function(){return!0}}),D.prototype._showMarquee=function(t){this._marquee&&(t.appendChild(this._marquee._dom),this._marquee.spread())},D.prototype._centerPopup=function(t,e){var i=e.getBoundingClientRect(),o=t.getBoundingClientRect();t.appendChild(e),e.style.left=(o.width-i.width)/2+"px",e.style.top=(o.height-i.height)/2+"px"},D.prototype._closeMarquee=function(){this._marquee&&re.Utils.detach(this._marquee._dom)},D.prototype._isMarquee=function(t){return this._marquee&&t===this._marquee._dom},_dp(D,"textReadOnly",{get:function(){return this._textReadOnly},set:function(t){this._setTextReadOnly(t)}}),_dp(D,"allowEmpty",{get:function(){return this._allowEmpty},set:function(t){this._setAllowEmpty(t)}});var T,h=D;function D(t,e){t=T.call(this,t,e)||this;return t._isMobile&&(e=re.getDoc(e),t._marquee=new S(e)),t}e.PopupCellEditor=h})),de=(t(L),L.CellEditor,L.EditMask,L.TextCellEditorBase,L.TextCellEditor,L.LineCellEditor,L.PasswordCellEditor,L.MultiLineCellEditor,L.NumberCellEditor,L.EditorMarquee,L.PopupCellEditor,e(function(t,e){Object.defineProperty(e,"__esModule",{value:!0}),(_=c=e.DropDownPosition||(e.DropDownPosition={})).BUTTON="button",_.EDITOR="editor",(_=r=e.DropDownSortStyle||(e.DropDownSortStyle={})).NONE="none",_.ASCENDING="ascending",_.DESCENDING="descending",(_=v=e.DropDownValueLabel||(e.DropDownValueLabel={})).VALUE="value",_.LABEL="label",_.VALUE_LABEL="valueLabel",_.LABEL_VALUE="labelValue",i=P.EventAware,ne.__extends(n,i),n.prototype._doDispose=function(){this._container=null,this._containerElement=null,this._items=null,re.Utils.clearElements(this._element),this._element.parentNode&&this._element.parentNode.removeChild(this._element),this._element=null,i.prototype._doDispose.call(this)},_dp(n,"minWidth",{get:function(){return this._minWidth},set:function(t){t!=this._minWidth&&(this._minWidth=t,this._changed())}}),_dp(n,"maxWidth",{get:function(){return this._maxWidth},set:function(t){t!=this._maxWidth&&(this._maxWidth=t,this._changed())}}),_dp(n,"dropDownCount",{get:function(){return this._dropDownCount},set:function(t){t!=this._dropDownCount&&(this._dropDownCount=t,this._changed())}}),_dp(n,"caseSensitive",{get:function(){return this._caseSensitive},set:function(t){t!=this._caseSensitive&&(this._caseSensitive=t,this._changed())}}),_dp(n,"partialMatch",{get:function(){return this._partialMatch},set:function(t){t!=this._partialMatch&&(this._partialMatch=t,this._changed())}}),_dp(n,"sortStyle",{get:function(){return this._sortStyle},set:function(t){t!=this._sortStyle&&(this._sortStyle=t,this._changed())}}),_dp(n,"items",{get:function(){return this._items},set:function(t){if(this._items=[],t)for(var e=0,i=t.length;e<i;e++)this._items.push({label:t[e].label,value:t[e].value,index:e})}}),_dp(n,"itemIndex",{get:function(){return this._itemIndex}}),_dp(n,"dropDownPosition",{get:function(){return this._dropDownPosition},set:function(t){t!=this._dropDownPosition&&(this._dropDownPosition=t,this._changed())}}),_dp(n,"dropDownWidth",{get:function(){return this._dropDownWidth},set:function(t){t!=this._dropDownWidth&&(this._dropDownWidth=t,this._changed())}}),_dp(n,"displayLabels",{get:function(){return this._displayLabels},set:function(t){t!==this._displayLabels&&(this._displayLabels=t,this._changed())}}),_dp(n,"separator",{get:function(){return this._separator},set:function(t){t!=this._separator&&(this._separator=t,this._changed())}}),_dp(n,"itemColumned",{get:function(){return this._itemColumned},set:function(t){t!=this._itemColumned&&(this._itemColumned=t,this._changed())}}),_dp(n,"viewGridInside",{get:function(){return this._viewGridInside},set:function(t){t!=this._viewGridInside&&(this._viewGridInside=t,this._changed())}}),_dp(n,"trimLabelText",{get:function(){return this._trimLabelText},set:function(t){t!=this._trimLabelText&&(this._trimLabelText=t,this._changed())}}),_dp(n,"initCount",{get:function(){return this._initCount},set:function(t){t!=this._initCount&&(this._initCount=t,this._changed())}}),_dp(n,"moreItemCount",{get:function(){return this._moreItemCount},set:function(t){t!=this._moreItemCount&&(this._moreItemCount=t,this._changed())}}),_dp(n,"moreText",{get:function(){return this._moreText},set:function(t){t!=this._moreText&&(this._moreText=t,this._changed())}}),_dp(n,"listing",{get:function(){return this._containerElement&&this._containerElement.contains(this._element)}}),_dp(n,"itemCount",{get:function(){return 0==this.initCount?this._items&&this._items.length:this._element.children.length}}),_dp(n,"valueIndex",{get:function(){var t=this._items,e=this._itemIndex;return t&&0<=e&&e<t.length?t[e].index:-1},set:function(t){if(t=Math.max(-1,t),this._itemIndex=-1,0<=t)for(var e=0,i=this._items.length;e<i;e++)if(this._items[e].index==t){this._itemIndex=t;break}this.listing&&this._refreshItems()}}),_dp(n,"selected",{get:function(){return this._selected}}),n.prototype.setItemIndex=function(t,e,i){var o=this._element.childNodes;(t=Math.max(-1,t))<this._items.length&&(e||t!=this._itemIndex||t>=o.length-1)&&(i&&t>=o.length-1&&(e=o[o.length-1]).isMoreButton&&(i=t-(o.length-1),i=(Math.floor(i/this.moreItemCount)+1)*this.moreItemCount,this.$_addMoreItems(e,i)),this._itemIndex=t,this.listing&&this._refreshItems(),this._selected=0<=t)},n.prototype.setZIndex=function(t){this._element.style.zIndex=String(t)},n.prototype.show=function(t,e,i,o,n){this._containerElement=this._viewGridInside?this._container._container:t,this._sortStyle!=r.NONE&&this.$_sortItems(),this._show(e,i,o,n)},n.prototype.hide=function(){re.Utils.detach(this._element),this._containerElement=null},n.prototype.currentIsMore=function(t){t=this._element.childNodes[null!=t?t:this._itemIndex];return t&&t.isMoreButton},n.prototype.addMoreItems=function(){var t;this.currentIsMore(null)&&(t=this._element.childNodes[this._itemIndex],this.$_addMoreItems(t,0))},n.prototype._changed=function(){},n.prototype._createList=function(t){t=t.createElement("div");return t.className="rg-dropdownlist",t.id="rg-dropdown-list-"+o.$$_LIST_ID++,t.setAttribute("role","listbox"),t},n.prototype.$_sortItems=function(){this._sortStyle==r.ASCENDING?this._items.sort(function(t,e){return t.label<e.label?-1:t.label>e.label?1:0}):this._items.sort(function(t,e){return t.label>e.label?-1:t.label<e.label?1:0})},n.prototype._show=function(t,e,i,o){var n,r=this._element;r&&((n=r.style).position="absolute",n.cssFloat="none",n.clear="both",n.boxSizing="border-box",n.minWidth="20px",n.minHeight="10px",n.overflow="auto",this._firstChild=null,re.Utils.clearChildren(r),re.Utils.disableSelection(r),this._containerElement.appendChild(r),this._cellWidth=i,this._editBounds=o,n.width="10px",this._buildItems(),this.$_resetHeight(),this._resetWidth(i),this.$_resetPosition(t,e,i,o),this._selected=!1)},n.prototype._getListElement=function(){return this._element},n.prototype.$_resetHeight=function(){var t,e,i,o,n=this._getListElement();this._firstChild?(i=re.getWin(this._firstChild),t=re.Utils.getClientRect(this._firstChild),i=this._firstChild.currentStyle||i.getComputedStyle(this._firstChild),e=parseInt(i.marginTop.replace("px","")),e=isNaN(e)?0:e,i=parseInt(i.marginBottom.replace("px","")),i=isNaN(i)?0:i,o=0<this._dropDownCount?Math.min(this._dropDownCount,this._items.length):this._items.length,n.style.height=(t.height+e)*o+4+i+"px"):n.style.height="10px"},n.prototype._resetWidth=function(t){var e=this._element,i=re.Utils.getClientRect(e),o=this._dropDownWidth,n=o,r=e.offsetWidth?e.offsetWidth+(re.Utils.ieOld&&"border-box"===e.style.boxSizing?17:0):0,s=(n<0?n=t:0==n&&(n=10),e.style.width=n+"px",0);if(this._firstChild){for(var t=re.getWin(this._firstChild),t=this._firstChild.currentStyle||t.getComputedStyle(this._firstChild),a=parseInt(t.marginLeft.replace("px","")),a=isNaN(a)?0:a,t=parseInt(t.marginRight.replace("px","")),t=isNaN(t)?0:t,l=e.childNodes,h=0;h<l.length;h++)s=Math.max(s,l[h].scrollWidth);s+=e.offsetWidth-e.clientWidth+a+t+2}o<0&&(s=Math.max(s,n));a=re.Utils.getBrowserSize(),n=s=Math.min(s,a.width);re.Utils.ieOld&&(0<=o||n<s)&&(n+=20),n<i.width?e.style.overflowX="hidden":e.style.overflowX="auto",e.style.width=Math.max(n,r)+"px"},n.prototype.$_resetPosition=function(t,e,i,o){var n=re.getDoc(this._element),r=re.getWin(this._element),s=re.Utils.getBrowserSize(),a=re.Utils.getClientRect(this._containerElement),l=re.Utils.getClientRect(this._container._container),h=s.width,s=s.height,d=re.Utils.getClientRect(this._element),u=r.pageXOffset||n.documentElement.scrollLeft,r=r.pageYOffset||n.documentElement.scrollTop;n.documentElement.scrollWidth>n.documentElement.clientWidth&&(s-=18),n.documentElement.scrollHeight>n.documentElement.clientHeight&&(h-=18),t+=l.left-a.left,e+=l.top-a.top,(re.Utils.ieTen||re.Utils.ieOld||re.Utils.ieLeg)&&(t+=n.documentElement.scrollLeft,e+=n.documentElement.scrollTop),e+d.height>s+r&&o&&(e=e-o.height-d.height)<0&&(e=s-d.height-2),this._dropDownPosition!=c.EDITOR?t=Math.max(0,t+i-d.width):t+d.width>h+u&&(t=h-d.width),!re.Utils.isMobile()&&this._viewGridInside&&o&&(e=o.bottom-a.top+2,a.bottom<o.bottom+d.height||s+r<o.bottom+d.height)&&(e=o.top-d.height-a.top-2),re.Utils.isMobile()||this._element.offsetParent||(t+=n.documentElement.offsetLeft,e+=n.documentElement.offsetTop),re.Utils.move(this._element,Math.max(0,t),Math.max(0,e))},n.prototype._resetItems=function(t,e,i,o){re.Utils.clearChildren(this._element),this._firstChild=null,this._buildItems(),this.$_resetHeight(),this._resetWidth(i),this.$_resetPosition(t,e,i,o)},n.prototype._buildItems=function(t,e){void 0===t&&(t=0),void 0===e&&(e=0);function i(t,e){var e=e&&e.value?e.value.toString():"",i=r.createElement("span");return i.style.whiteSpace="pre",i.innerHTML=e?re.Utils.htmlEncode(e):"&nbsp;",i.tabIndex=-1,i.className="rg-dropdown-value",re.Utils.disableSelection(i),t.appendChild(i),i}function o(t,e){var i=r.createElement("span");i.style.whiteSpace="pre",i.innerHTML=e?re.Utils.htmlEncode(e):"&nbsp;",i.tabIndex=-1,i.className="rg-dropdown-seperator",re.Utils.disableSelection(i),t.appendChild(i)}var n,r=re.getDoc(this._element),s=0,a=function(t,e){var e=e&&e.label?e.label.toString():"",e=this._trimLabelText?e.trim():e,i=r.createElement("span");return this._trimLabelText||(i.style.whiteSpace="pre"),i.innerHTML=e?re.Utils.htmlEncode(e):"&nbsp;",i.tabIndex=-1,i.className="rg-dropdown-label",re.Utils.disableSelection(i),t.appendChild(i),i}.bind(this),l=this._items,h=e||(0<this._element.children.length?this.moreItemCount:this.initCount);if(l&&!(l.length<1)){for(var d,u=t,c=l.length;u<c;u++){if(this._initCount&&h<=u-t&&u<c){var _=r.createElement("div"),p=_.style;p.position="relative",p.cssFloat="none",p.paddingTop="1px",p.paddingBottom="1px",p.paddingLeft="2px",p.paddingRight="2px",p.whiteSpace="nowrap",p.cursor="pointer",p.textAlign="center",re.Utils.disableSelection(_),_.nextIndex=u,_.onclick=this._nextClickHandler,_.isMoreButton=!0,_.className="rg-dropdown-more",a(_,{label:this.moreText}),this._element.appendChild(_);break}var f=l[u],g=r.createElement("div"),p=(g.setAttribute("role","option"),g.id=this._element.id+"-"+u.toString(),g.style),m=(p.position="relative",p.cssFloat="none",p.paddingTop="1px",p.paddingBottom="1px",p.paddingLeft="2px",p.paddingRight="2px",p.whiteSpace="nowrap",p.cursor="default",g.className=u==this._itemIndex?"rg-dropdown-select rg-dropdown-item":"rg-dropdown-item",u===this._itemIndex?g.setAttribute("aria-selected","true"):g.removeAttribute("aria-selected"),re.Utils.disableSelection(g),this._element.appendChild(g),0==u&&(this._firstChild=g),g.onclick=this._clickHandler,null);switch(this.displayLabels){case v.LABEL:a(g,f);break;case v.VALUE:i(g,f);break;case v.LABEL_VALUE:m=a(g,f),o(g,this._separator),i(g,f);break;case v.VALUE_LABEL:m=i(g,f),o(g,this._separator),a(g,f)}m&&this._itemColumned&&(_=m,d=void 0,d=re.Utils.getTextLength(_.textContent),s<d)&&(n=_,s=d)}if(this._itemColumned&&n)for(var y=Math.ceil(n.getBoundingClientRect().width),u=0,c=this._element.childNodes.length;u<c;u++)(m=this._element.childNodes[u].firstChild).style.display="inline-block",m.style.width=y+"px"}},n.prototype.$_addMoreItems=function(t,e){var i=t.nextIndex;t.parentNode&&t.parentNode.removeChild(t),this._buildItems(i,e),this._resetWidth(this._cellWidth),this.fireEvent(n.EDITOR_FOCUS)},n.prototype._refreshItems=function(){for(var t=this._element.childNodes,e=0;e<t.length;e++)(i=t[e]).className=e==this._itemIndex?"rg-dropdown-select rg-dropdown-item":"rg-dropdown-item",e==this._itemIndex?i.setAttribute("aria-selected","true"):i.removeAttribute("aria-selected"),e==this._itemIndex&&this.fireEvent(n.ACTIVE_DESCENDENT,i.id);var i,o=this._itemIndex;0<=o&&o<t.length&&((i=t[o]).offsetTop<this._element.scrollTop?this._element.scrollTop=i.offsetTop:(o=i.offsetTop+re.Utils.getSize(i).height)>=this._element.scrollTop+this._element.clientHeight&&(this._element.scrollTop=o-this._element.clientHeight))},n.prototype.$_search=function(t,e){void 0===e&&(e=!1);try{if(this._items&&0<this._items.length&&t){for(var i=this._items,o=i.length,n=this._caseSensitive?t:t.toLowerCase(),r=[],s=0;s<o;s++){if(d=i[s].label.toString())if(d=this._caseSensitive?d:d.toLowerCase(),this._partialMatch){for(var a="",l=0;l<d.length;l++){var h=re.Utils.hangulToChosung(d[l]);a+=re.Utils.hangulToChosung(n[l]).org?h.org:h.cho}if(a==n)return void this.setItemIndex(s,e,!0)}else if(d==n)return void this.setItemIndex(s,e,!0);r.push(d)}for(s=0;s<o;s++){var d=r[s];if(this._partialMatch){for(var u=!1,l=0;l<n.length;l++){var c=re.Utils.hangulToChosung(d[l]);if(!(c.org&&c.org==n[l]||c.cho&&c.cho==n[l])){u=!1;break}u=!0}if(u)return void this.setItemIndex(s,e,!0)}else if(d&&0==d.indexOf(n))return void this.setItemIndex(s,e,!0)}for(s=0;s<o;s++){d=r[s];if(this._partialMatch){var _=re.Utils.hangulToChosungAll(d),p=re.Utils.hangulToChosungAll(n),f=_.indexOf(p),a=d.substr(0,f);if(~f)for(var l=0,g=f,m=n.length;l<m;l++,g++){h=re.Utils.hangulToChosung(d[g]);a+=re.Utils.hangulToChosung(n[l]).org?h.org:h.cho}if(a&&0<a.indexOf(n))return void this.setItemIndex(s,e,!0)}else if(d&&0<d.indexOf(n))return void this.setItemIndex(s,e,!0)}}this.setItemIndex(-1)}finally{e&&(this._selected=!0)}},n.CLOSE_UP="onDropDownListCloseUp",n.EDITOR_FOCUS="onDropDownListEditorFocus",n.ACTIVE_DESCENDENT="onDropDownListActiveDescendant";var c,r,v,i,s=n;function n(t){var e=i.call(this)||this;return e._minWidth=0,e._maxWidth=0,e._dropDownCount=8,e._caseSensitive=!1,e._partialMatch=!1,e._sortStyle=r.NONE,e._items=null,e._itemIndex=-1,e._dropDownPosition=c.BUTTON,e._dropDownWidth=-1,e._displayLabels=null,e._separator=null,e._itemColumned=!1,e._viewGridInside=!1,e._trimLabelText=!0,e._initCount=0,e._moreItemCount=25,e._moreText=null,e._selected=!1,e._clickHandler=function(t){t=t.currentTarget,t=re.Utils.getChildIndex(t);0<=t&&(this._itemIndex=t,this._selected=!0,this.fireEvent(n.CLOSE_UP,!0))}.bind(e),e._nextClickHandler=function(t){t=t.currentTarget;this.$_addMoreItems(t)}.bind(e),e._container=t,e._element=e._createList(t.doc),e}e.DropDownList=s;a=L.PopupCellEditor,ne.__extends(l,a),l.prototype._doDispose=function(){this._globalMouseHandler=null,this._list.removeListener(this),this._list.dispose(),this._list=this._items=this._values=this._labels=null,a.prototype._doDispose.call(this)},_dp(l,"values",{get:function(){return this._values},set:function(t){(t=re.Utils.makeArray(t,!0))?this._values=t.map(function(t){return null!=t?String(t):t}):this._values=[]}}),_dp(l,"labels",{get:function(){return this._labels},set:function(t){this._labels=t?t.slice():[]}}),_dp(l,"displayLabels",{get:function(){return this._displayLabels},set:function(t){t!=this._displayLabels&&(this._displayLabels=t,this._changed())}}),_dp(l,"domainOnly",{get:function(){return this._domainOnly},set:function(t){t!=this._domainOnly&&(this._domainOnly=t,this._changed())}}),_dp(l,"dropDownWidth",{get:function(){return this._dropDownWidth},set:function(t){t!=this._dropDownWidth&&(this._dropDownWidth=t,this._changed())}}),_dp(l,"dropDownPosition",{get:function(){return this._dropDownPosition},set:function(t){t!=this._dropDownPosition&&(this._dropDownPosition=t,this._changed())}}),_dp(l,"dropDownCount",{get:function(){return this._dropDownCount},set:function(t){t!=this._dropDownCount&&(this._dropDownCount=t,this._changed())}}),_dp(l,"itemSortStyle",{get:function(){return this._itemSortStyle},set:function(t){t!=this.itemSortStyle&&(this._itemSortStyle=t,this._changed())}}),_dp(l,"caseSensitive",{get:function(){return this._caseSensitive},set:function(t){t!=this._caseSensitive&&(this._caseSensitive=t,this._changed())}}),_dp(l,"partialMatch",{get:function(){return this._partialMatch},set:function(t){t!=this._partialMatch&&(this._partialMatch=t,this._changed())}}),_dp(l,"commitOnSelect",{get:function(){return this._commitOnSelect},set:function(t){t!=this._commitOnSelect&&(this._commitOnSelect=t,this._changed())}}),_dp(l,"dropDownWhenClick",{get:function(){return this._dropDownWhenClick},set:function(t){t!=this._dropDownWhenClick&&(this._dropDownWhenClick=t,this._changed())}}),_dp(l,"trimLabelText",{get:function(){return this._trimLabelText},set:function(t){t!=this._trimLabelText&&(this._trimLabelText=t,this._changed())}}),_dp(l,"separator",{get:function(){return this._separator},set:function(t){t!=this._separator&&(this._separator=t,this._changed())}}),_dp(l,"itemColumned",{get:function(){return this._itemColumned},set:function(t){t!=this._itemColumned&&(this._itemColumned=t,this._changed())}}),_dp(l,"listing",{get:function(){return this._list.listing}}),l.prototype.dropDown=function(t){if(void 0===t&&(t=!1),!this.readOnly&&!this.listing&&!this._closing){this._refreshItems();var e,i,o,n=re.getDoc(this._container),r=re.getWin(this._container);if(t||this._items&&0<this._items.length)return t=this._list,o=this._options,e=n.documentElement,i=re.Utils.getClientRect(this._container),t.viewGridInside=o.viewGridInside,t.displayLabels=this.displayLabels,t.separator=this.separator,t.itemColumned=this.itemColumned,t.items=this._items,this._saveIndex=this._selectedIndex,this._saveText=this._editor.value,t.caseSensitive=this._caseSensitive,t.partialMatch=this._partialMatch,t.dropDownCount=this._dropDownCount,t.dropDownWidth=this._dropDownWidth,t.dropDownPosition=this._dropDownPosition,t.sortStyle=this._itemSortStyle,t.valueIndex=this._selectedIndex,t.trimLabelText=this._trimLabelText,o=this._grid.displayOptions,t.setZIndex(o.baseZindex+3),this._isMobile&&!this._isTablet?(this._showMarquee(e),t.viewGridInside=!1,t.show(e,0,0,0,null),this._centerPopup(e,t._element)):t.show(n.documentElement,i.cx+1,i.cy+i.height,this._cellBounds.width,re.Utils.getClientRect(this._editor)),t.$_search(this._editor.value,!0),this._setEditorAria("aria-expanded","true"),r.addEventListener("mousedown",this._globalMouseHandler),!0}return!1},l.prototype.closeUp=function(t,e){if(this.listing){this._closing=!0;var i=this._isMobile&&!this._isTablet;try{re.getWin(this._container).removeEventListener("mousedown",this._globalMouseHandler),this._closeMarquee(),this._list.hide();var o,n,r=void 0;t&&this._list.selected&&0<=(r=this._list.valueIndex)&&this._items&&this._items.length>r?(this._selectedIndex=this._list.valueIndex,o=this._items[r].value,n=this._labeling?this._items[r].label:this._items[r].value,this._editor.value=n,i?this._commitListValue(o):(r==this._saveIndex&&n==this._saveText||this._dispatchChange(),e&&this._commitOnSelect&&this._dispatchCommit())):this._selectedIndex=-1}finally{this._closing=!1,this._setEditorAria("aria-expanded","false"),this.setActiveDescendant(null)}return!0}},l.prototype.initOptions=function(){a.prototype.initOptions.call(this),this._values=[],this._labels=[],this._displayLabels=v.LABEL,this._separator=" - ",this._itemColumned=!1,this._domainOnly=!1,this._textReadOnly=!1,this._dropDownWidth=-1,this._dropDownPosition=c.BUTTON,this._dropDownCount=8,this._itemSortStyle=r.NONE,this._caseSensitive=!1,this._partialMatch=!1,this._commitOnSelect=!0,this._dropDownWhenClick=!1,this._viewGridInside=!1,this._initCount=0,this._moreItemCount=25,this._moreText=window.RG_CONST&&window.RG_CONST.MORETEXT||"더보기",this._setEditorAria("aria-activedescendant",null)},l.prototype.setEditIndex=function(t){a.prototype.setEditIndex.call(this,t),this._lookup=!1,this._labeling=!1,this._domain=null,this._items=null,this._refreshItems()},l.prototype.setEditValue=function(t){var e=-1;if(this._value=t,this._lookup){var i,o=this._domain;o?i=0<=(n=e=o.keys?o.keys.indexOf(t):-1)&&o.values&&o.values.length>n?o.values[n]:t:e=this._editIndex.dataColumn.getLookupIndex(t),this._labeling?(i=o?0<=e&&o.values&&o.values.length>e?o.values[e]:t:0<=e?this._editIndex.dataColumn.getLookupLabel(t):t,a.prototype.setEditValue.call(this,i)):a.prototype.setEditValue.call(this,t)}else if(this._values){for(var n=0,r=this._values.length;n<r;n++)if(t==this._values[n]){e=n;break}this._labeling&&this._labels&&(e<0||this._labels.length>e)?(i=0<=e?this._labels[n]:t,a.prototype.setEditValue.call(this,i)):a.prototype.setEditValue.call(this,t)}else a.prototype.setEditValue.call(this,t);this._selectedIndex=e},l.prototype.isEdited=function(){var t=a.prototype.isEdited.call(this);return t=t&&this.domainOnly?void 0!==this.$_getEditValue(!1):t},l.prototype._getInputSelector=function(){return l.INPUT_CSS},l.prototype._setEditorAria=function(t,e){e?this._editor.setAttribute(t,e):this._editor.removeAttribute(t)},l.prototype._createDropDown=function(t){return new s(t)},l.prototype.setCellEditValue=function(t,e){a.prototype.setCellEditValue.call(this,t,e)},l.prototype.getEditValue=function(t,e){return void 0===t&&(t=!0),!this.isEdited()&&this._selectedIndex<0?this._value:this.$_getEditValue(t,e)},l.prototype.setBounds=function(t,e,i,o,n){a.prototype.setBounds.call(this,t,e,i,o,n)},l.prototype._createEditor=function(t){return a.prototype._createEditor.call(this,t)},l.prototype._textHandler=function(){this._requestStart()},l.prototype._compositionstartHandler=function(t){a.prototype._compositionstartHandler.call(this,t)},l.prototype._keyDownHandler=function(t){if(!this.isDisabled()){var e=this._list,i=e.itemIndex;switch(t.keyCode){case 8:case 46:if(!t.ctrlKey&&!t.shiftKey&&this.domainOnly&&this.allowEmpty||t.ctrlKey||t.shiftKey||!this.textReadOnly)break;return this._requestStart(),t.preventDefault(),!0;case 32:if(this.listing&&e.currentIsMore(i))return e.addMoreItems(),t.preventDefault(),!0;break;case 13:if(this.listing&&e.currentIsMore(i))return e.addMoreItems(),t.preventDefault(),!0;if(this.closeUp(!0,!1))return!this._sendToParent(t);break;case 27:if(this.closeUp(!1,!1))return t.preventDefault(),!0;break;case 40:if(!t.shiftKey&&t.altKey&&!this.listing)return this._requestStart(),t.preventDefault(),!0;if(this.listing)return this._list.setItemIndex(Math.min(e.itemCount-1,i+1)),t.preventDefault(),!0;break;case 34:if(this.listing)return this._list.setItemIndex(Math.min(e.itemCount-1,i+e.dropDownCount)),t.preventDefault(),!0;break;case 38:if(t.altKey&&this.listing)return this.closeUp(!1,!1),t.preventDefault(),!0;if(this.listing)return this._list.setItemIndex(Math.max(0,i-1)),t.preventDefault(),!0;break;case 33:if(this.listing)return this._list.setItemIndex(Math.max(0,i-e.dropDownCount)),t.preventDefault(),!0}return a.prototype._keyDownHandler.call(this,t)}},l.prototype._keyPressHandler=function(t){this.isDisabled()||(a.prototype._keyPressHandler.call(this,t),t.keyCode&&this.textReadOnly&&t.preventDefault())},l.prototype._inputHandler=function(t){this.isDisabled()||(this.textReadOnly&&(t.target.value=this._oldValue||""),a.prototype._inputHandler.call(this,t))},l.prototype._pasteHandler=function(t){this.isDisabled()||a.prototype._pasteHandler.call(this,t)},l.prototype._copyHandler=function(t){this.isDisabled()||a.prototype._copyHandler.call(this,t)},l.prototype._requestStart=function(t){return!!a.prototype._requestStart.call(this,t)&&(this._isMobile?t&&this.dropDown():!1!==t&&this.dropDown(),!0)},l.prototype._doChanged=function(){this._selectedIndex=-1,a.prototype._doChanged.call(this),this.listing&&this._list.$_search(this._editor.value)},l.prototype.dropDownList=function(t){this.dropDown(t)&&this._setEditorAria("aria-expanded","true")},l.prototype.closeList=function(t){this.closeUp(t,!1),this._setEditorAria("aria-expanded","false")},l.prototype.buttonClicked=function(t){this.listing?this.closeUp(!1,!1):this.dropDown()},l.prototype.$_setItems=function(t,e){this._items=[];for(var i=0,o=t.length;i<o;i++)this._items.push({value:t[i],label:(e&&e.length>i?e:t)[i]})},l.prototype._refreshItems=function(t,e){void 0===t&&(t=!1),void 0===e&&(e=!1);var i=this.editIndex,o=i.item;if(this._values&&(0<this._values.length||e))this.$_setItems(this._values,this._labels),this._labeling=this.displayLabels!==v.VALUE&&this._labels&&this._labels.length>=this._values.length;else if(i.dataColumn&&i.item&&(0<=i.dataRow||rt.ItemState_isEditing(o.itemState))){e=i.dataColumn;if(e.lookupSource){for(var n=e.lookupKeyFieldIds,r=[],s=0;s<n.length-1;s++)r.push(o.getData(n[s]));var i=e.lookupSource.getTextDomain(r);i&&i.values&&0<i.values.length&&(this.$_setItems(i.keys,i.values),this._labeling=!0,this._lookup=!0,this._domain=i)}else e.values&&0<e.values.length&&(this.$_setItems(e.values,e.labels),this._labeling=this.displayLabels!==v.VALUE&&e.labels&&e.labels.length>=e.values.length,this._lookup=!0)}t&&this.listing&&(this._list.items=this._items,i=re.Utils.getClientRect(this._container),this._list._resetItems(i.cx-1,i.cy+i.height,this._cellBounds.width,re.Utils.getClientRect(this._editor)))},l.prototype.$_getEditValue=function(t,e){var i,o=this.text,t=L.TextCellEditor.prototype.getEditValue.call(this,t=void 0===t?!0:t,e=void 0===e?!1:e),e=t,n=this._editIndex.dataColumn,r=this._selectedIndex,s=0<=r;if(this._lookup){if(this._domain){if(this._labeling&&(e=0<=(i=s?r:this._domain.values?this._domain.values.indexOf(o):-1)&&this._domain.keys&&this._domain.keys.length>i?this._domain.keys[i]:e),this.domainOnly&&e&&(!this._domain.keys||this._domain.keys.indexOf(e)<0))return L.CellEditor.Unselected}else if(this._labeling&&(e=s?n.getLookupValue(r):n.getSourceValue(o)||t),this.domainOnly&&e&&(!n.values||n.values.indexOf(e)<0))return L.CellEditor.Unselected}else if(this._labeling&&0<=(i=s?r:this._labels?this._labels.indexOf(o):-1)&&i<this._values.length&&(e=this._values[i]),this.domainOnly&&e&&(!this._values||this._values.indexOf(e)<0))return L.CellEditor.Unselected;return e},l.prototype.setActiveDescendant=function(t){this._setEditorAria("aria-activedescendant",t)},l.prototype.onDropDownListCloseUp=function(t,e){this.closeUp(e,!0),re.Utils.isMobile()||this.setFocus()},l.prototype.onDropDownListEditorFocus=function(){this.setFocus()},l.prototype.onDropDownListActiveDescendant=function(t,e){this.setActiveDescendant(e)},l.INPUT_CSS="rg-list-editor",l.$$_LIST_ID=0;var a,o=l;function l(t,e){e=a.call(this,t,e)||this,e._values=null,e._items=null,e._labels=null,e._displayLabels=v.LABEL,e._domainOnly=!1,e._dropDownWidth=-1,e._dropDownPosition=c.BUTTON,e._dropDownCount=8,e._itemSortStyle=r.NONE,e._caseSensitive=!1,e._partialMatch=!1,e._commitOnSelect=!0,e._dropDownWhenClick=!1,e._trimLabelText=!0,e._separator=null,e._itemColumned=!1,e._lookup=!1,e._labeling=!1,e._domain=null,e._closing=!1,e._selectedIndex=-1,e._globalMouseHandler=function(t){var e=t.target;if(this._isMarquee(e))this.closeUp(!1);else{for(;e;){if(e==this._list._element)return;e=e.parentElement}this.closeUp(!0)}}.bind(e),t=e._list=e._createDropDown(t.container);return e._setEditorAria("aria-owns",t._element.id),e._setEditorAria("aria-expanded","false"),e._setEditorAria("aria-haspopup","true"),e._setEditorAria("role","combobox"),e._list.addListener(e),e}e.DropDownCellEditor=o;h=s,ne.__extends(g,h),_dp(g,"valueIndices",{get:function(){return this._selectItemIndices.slice()},set:function(t){this._selectItemIndices=[],null!=t&&(this._selectItemIndices=t.slice(),this.listing&&this._refreshItems(),this._selected=!1)}}),g.prototype.changeCheckIndex=function(t,e,i){var o=this._listElement.childNodes;if(0<=t&&t<o.length){for(var o=o[t],n=o.getElementsByTagName("input"),r=void 0,s=0,a=n.length;s<a;s++)if("checkbox"==n[s].type){r=n[s];break}r&&(r.checked=null!=e?e:!r.checked,this.$_changeCheckIndex(o,t,r.checked,i))}},g.prototype.$_changeCheckIndex=function(t,e,i,o){var n=this._selectItemIndices;e<0||e>=this._items.length||(e=this._items[e].index,i?n.indexOf(e)<0&&n.push(e):0<=n.indexOf(e)&&n.splice(n.indexOf(e),1),t.className="rg-multicheck-item"+(i?" rg-multicheck-select":""),t.setAttribute("aria-selected",i?"true":"false"),this._selected=!0,o&&this.fireEvent(g.CHECK_CLICK))},g.prototype._createList=function(){var t=this._container.doc,e=t.createElement("div"),i=(e.className="rg-multicheck",e.id="rg-dropdown-list-"+o.$$_LIST_ID++,e.setAttribute("role","listbox"),t.createElement("div")),i=(i.className="rg-multicheck-allcheck",(this._allCheckElement=i).style.paddingLeft="2px",re.Utils.disableSelection(i),e.appendChild(i),t.createElement("div")),i=(i.className="rg-multicheck-list",this._listElement=i,e.appendChild(i),t.createElement("div"));return i.style.textAlign="center",i.style.whiteSpace="nowrap",i.className="rg-multicheck-button",(this._buttonElement=i).style.margin="2px",re.Utils.disableSelection(i),e.appendChild(i),e},g.prototype._getListElement=function(){return this._listElement},g.prototype.setZIndex=function(t){var e=this._element.style;e.zIndex=String(t),(e=this._listElement.style).zIndex=String(t)},g.prototype.$_toggleAllCheck=function(){for(var t=this._listElement.childElementCount,e=this._allCheck.checked,i=0;i<t;i++)this.changeCheckIndex(i,e,!1);this.fireEvent(g.CHECK_CLICK)},g.prototype._show=function(t,e,i,o){var n,r=this._element;r&&((n=r.style).position="absolute",n.cssFloat="none",n.clear="both",n.boxSizing="border-box",n.minWidth="20px",n.minHeight="10px",n.overflow="visible",(n=this._listElement.style).position="relative",n.cssFloat="none",n.clear="both",n.boxSizing="border-box",n.minWidth="20px",n.minHeight="10px",n.overflow="auto",(n=this._buttonElement.style).position="relative",n.cssFloat="none",n.clear="both",n.boxSizing="border-box",n.marginLeft="0px",n.marginRight="0px",this._firstChild=null,re.Utils.clearChildren(this._listElement),re.Utils.disableSelection(this._listElement),this._containerElement.appendChild(r),this._buildItems(),this.$_buildButtons(),this.$_resetHeight(),this._resetWidth(i),this.$_resetPosition(t,e,i,o),this._itemIndex=-1,this._selectItemIndices.length&&this.setItemIndex(this._selectItemIndices.slice().sort(function(t,e){return t-e})[0]),this._selected=!1)},g.prototype._resetWidth=function(t){h.prototype._resetWidth.call(this,t);var t=this._element,e=Math.floor(this._buttonElement.getBoundingClientRect().width),i=t.getBoundingClientRect().width;isNaN(e)||(i=Math.max(i,e)),t.style.width=i+"px"},g.prototype._resetItems=function(t,e,i,o){re.Utils.clearChildren(this._listElement),this._firstChild=null,this._buildItems(),this.$_buildButtons(),this.$_resetHeight(),this._resetWidth(i),this.$_resetPosition(t,e,i,o)},g.prototype._buildItems=function(){var i,n=this._container.doc,o=0,t=function(t,e,i){var e=e?e.value.toString():"",o=n.createElement("label");return o.style.whiteSpace="pre",o.innerHTML=e?re.Utils.htmlEncode(e):"&nbsp;",o.htmlFor=i&&i.id,o.tabIndex=-1,o.className="rg-dropdown-value",re.Utils.disableSelection(o),t.appendChild(o),o}.bind(this),e=function(t,e,i){var e=e?e.label.toString():"",e=this._trimLabelText?e.trim():e,o=n.createElement("label");return this._trimLabelText||(o.style.whiteSpace="pre"),o.innerHTML=e?re.Utils.htmlEncode(e):"&nbsp;",o.htmlFor=i&&i.id,o.tabIndex=-1,o.className="rg-dropdown-label",re.Utils.disableSelection(o),t.appendChild(o),o}.bind(this),r=function(t,e){var i=n.createElement("span");i.style.whiteSpace="pre",i.style.pointerEvents="none",i.innerHTML=e?re.Utils.htmlEncode(e):"&nbsp;",i.tabIndex=-1,i.className="rg-dropdown-separator",re.Utils.disableSelection(i),t.appendChild(i)}.bind(this),s=function(t){var e=re.Utils.getTextLength(t.textContent);o<e&&(i=t,o=e)}.bind(this),a=this._items;if(a&&!(a.length<1)){for(var l=0,h=a.length;l<h;l++){var d=a[l],u=n.createElement("div"),c=(u.setAttribute("role","option"),u.id=this._element.id+"-"+l.toString(),u.style),c=(c.position="relative",c.cssFloat="none",c.paddingTop="1px",c.paddingBottom="1px",c.paddingLeft="2px",c.paddingRight="2px",c.whiteSpace="nowrap",c.cursor="default",0<=this._selectItemIndices.indexOf(a[l].index)),_=(u.className="rg-multicheck-item"+(c?" rg-multicheck-select":""),re.Utils.disableSelection(u),this._listElement.appendChild(u),0==l&&(this._firstChild=u),u.onclick=this._clickHandler,n.createElement("input")),p=(_.id="$multiCheck_item_"+g.$_checkId++,_.type="checkBox",_.onclick=this._checkClickHandler,_.checked=c,u.setAttribute("aria-selected",c?"true":"false"),u.appendChild(_),null);switch(this.displayLabels){case v.LABEL:e(u,d,_);break;case v.VALUE:t(u,d,_);break;case v.LABEL_VALUE:p=e(u,d,_),r(u,this.separator),t(u,d,_);break;case v.VALUE_LABEL:p=t(u,d,_),r(u,this.separator),e(u,d,_)}p&&this.itemColumned&&(s(p),u._span=p)}if(this.itemColumned&&i){var f=Math.ceil(i.getBoundingClientRect().width);if(0<f)for(l=0,h=this._listElement.childNodes.length;l<h;l++)(p=this._listElement.childNodes[l]._span)&&(p.style.display="inline-block",p.style.width=f+"px")}}},g.prototype.setButtonOptions=function(t,e,i,o,n){this._acceptText=t,this._cancelText=e,this._showButtons=i,this._showAllCheck=o,this._allCheckText=n,this.$_buildButtons()},g.prototype.$_buildButtons=function(){var t,e,i=this._container.doc;this._buttonElement&&(this._buttonElement.style.display=this._showButtons?"":"none",re.Utils.clearChildren(this._buttonElement),t=(e=i.createElement("label")).style,e.innerHTML=this._acceptText,e.onclick=this._acceptClickHandler,e.className="rg-multicheck-accept",t.cursor="pointer",re.Utils.disableSelection(e),this._buttonElement.appendChild(e),t=(e=i.createElement("label")).style,e.innerHTML=this._cancelText,e.onclick=this._cancelClickHandler,e.className="rg-multicheck-cancel",t.marginLeft="2px",t.cursor="pointer",re.Utils.disableSelection(e),this._buttonElement.appendChild(e),(t=this._allCheckElement).onclick=this._allCheckClickHandler,re.Utils.clearChildren(t),this._showAllCheck?(t.style.display="",(e=i.createElement("input")).type="checkbox",e.id="$multiCheck_item_"+g.$_checkId++,e.onclick=this._allCheckClickHandler,this._allCheck=e,t.appendChild(e),(i=i.createElement("label")).innerHTML=this._allCheckText,i.htmlFor=e.id,i.tabIndex=-1,re.Utils.disableSelection(i),t.appendChild(i)):t.style.display="none")},g.prototype._refreshItems=function(){for(var t,e=this._listElement.childNodes,i=-1,o=0;o<e.length;o++){var i=o<this._items.length?this._items[o].index:-1,n=e[o];o===this._itemIndex?(re.Utils.addClassName(n,"rg-multicheck-selectitem"),this.fireEvent(s.ACTIVE_DESCENDENT,n.id)):re.Utils.removeClassName(n,"rg-multicheck-selectitem")}0<=(i=this._itemIndex)&&i<e.length&&((n=e[i]).offsetTop<this._listElement.scrollTop?this._listElement.scrollTop=n.offsetTop:(t=n.offsetTop+re.Utils.getSize(n).height)>=this._listElement.scrollTop+this._listElement.clientHeight&&(this._listElement.scrollTop=t-this._listElement.clientHeight))},g.CLOSE_UP_2="onMultiCheckListCloseUp",g.CANCEL="onMultiCheckListCancel",g.CHECK_CLICK="onMultiCheckListCheckClick",g.$_checkId=0;var h,d=g;function g(t){t=h.call(this,t)||this;return t._selectItemIndices=[],t._acceptText=null,t._cancelText=null,t._showButtons=!1,t._showAllCheck=!1,t._acceptClickHandler=function(t){this.fireEvent(g.CLOSE_UP_2,!0)}.bind(t),t._cancelClickHandler=function(t){this.fireEvent(g.CANCEL,!1)}.bind(t),t._checkClickHandler=function(t){t.stopImmediatePropagation();var e,t=t.currentTarget,i=t.parentElement;i&&(e=re.Utils.getChildIndex(i),t=t.checked,this.$_changeCheckIndex(i,e,t,!0))}.bind(t),t._allCheckClickHandler=function(t){t.stopImmediatePropagation(),2==t.eventPhase&&t.currentTarget==this._allCheckElement?(this._allCheck.checked=!this._allCheck.checked,this.$_toggleAllCheck()):2==t.eventPhase&&t.currentTarget==this._allCheck&&this.$_toggleAllCheck()}.bind(t),t._clickHandler=function(t){var e=t.currentTarget;if(2==t.eventPhase){for(var t=re.Utils.getChildIndex(e),i=void 0,o=e.getElementsByTagName("input"),n=0,r=o.length;n<r;n++)if("checkbox"==o[n].type){i=o[n];break}i&&(i.checked=!i.checked),this.$_changeCheckIndex(e,t,i.checked,!0)}}.bind(t),t}u=o,ne.__extends(p,u),_dp(p,"showButtons",{get:function(){return this._showButtons},set:function(t){this._showButtons=t}}),_dp(p,"acceptText",{get:function(){return this._acceptText},set:function(t){this._acceptText=t}}),_dp(p,"cancelText",{get:function(){return this._cancelText},set:function(t){this._cancelText=t}}),_dp(p,"allCheckText",{get:function(){return this._allCheckText},set:function(t){this._allCheckText=t}}),_dp(p,"showAllCheck",{get:function(){return this._showAllCheck},set:function(t){this._showAllCheck=t}}),p.prototype._createDropDown=function(t){return new d(t)},p.prototype.setMask=function(t){this._mask=null},p.prototype.dropDown=function(t){if(void 0===t&&(t=!1),!this.readOnly&&!this.listing&&!this._closing){this._refreshItems();var e,i,o=re.getDoc(this._container),n=re.getWin(this._container);if(t||this._items&&0<this._items.length)return t=this._list,e=this._options,this._selectedIndices=this._selectedIndices||[],t.viewGridInside=e.viewGridInside,t.displayLabels=this.displayLabels,t.separator=this.separator,t.itemColumned=this.itemColumned,t.items=this._items,e=re.Utils.getClientRect(this._container),this._saveIndices=this._selectedIndices.slice(),this._saveText=this._editor.value,t.caseSensitive=this.caseSensitive,t.dropDownCount=this.dropDownCount,t.dropDownWidth=this.dropDownWidth,t.dropDownPosition=this.dropDownPosition,t.setButtonOptions(this.acceptText,this.cancelText,this.showButtons,this.showAllCheck,this.allCheckText),t.sortStyle=this.itemSortStyle,t.valueIndices=this._selectedIndices.slice(),t.trimLabelText=this.trimLabelText,i=this._grid.displayOptions,t.setZIndex(i.baseZindex+3),this._isMobile&&!this._isTablet?(i=o.documentElement,t.viewGridInside=!1,this._showMarquee(i),t.show(i,0,0,0,null),this._centerPopup(i,t._element)):t.show(o.documentElement,e.cx+1,e.cy+e.height,this._cellBounds.width,re.Utils.getClientRect(this._editor)),n.addEventListener("mousedown",this._globalMouseHandler),!0}return!1},p.prototype.getCheckValues=function(t,e,i){for(var o=[],n=0,r=t.length;n<r;n++)0<=t[n]&&t[n]<e.length&&o.push(this._labeling&&!i?e[t[n]].label:e[t[n]].value);return o},p.prototype.closeUp=function(t,e){if(this.listing){this._closing=!0;try{var i,o=this._list,n=this.editIndex&&this.editIndex.dataColumn;re.getWin(this._container).removeEventListener("mousedown",this._globalMouseHandler),this._closeMarquee(),o.hide(),t&&o.selected?(this._selectedIndices=o.valueIndices.slice(),this._editor.value=this.getCheckValues(this._selectedIndices,this._items).join(n.valueSeparator),re.Utils.equalArrays(this._saveIndices,this._selectedIndices)&&this._editor.value==this._saveText||(this._isMobile?(i=this.getCheckValues(this._selectedIndices,this._items,!0).join(n.valueSeparator),this._commitListValue(i)):(this._dispatchChange(),e&&this.commitOnSelect&&this._dispatchCommit()))):this._selectedIndices=this._saveIndices.slice()}finally{this._closing=!1}return!0}return!1},p.prototype.initOptions=function(){u.prototype.initOptions.call(this),this._showButtons=!0,this._showAllCheck=!1,this._acceptText=window.RG_CONST&&window.RG_CONST.MULTICHECKACCEPT?window.RG_CONST.MULTICHECKACCEPT:"Accept",this._cancelText=window.RG_CONST&&window.RG_CONST.MULTICHECKCANCEL?window.RG_CONST.MULTICHECKCANCEL:"Cancel",this._allCheckText=window.RG_CONST&&window.RG_CONST.MULTICHECKALLCHECK?window.RG_CONST.MULTICHECKALLCHECK:"Check All"},p.prototype.applyOptions=function(t){u.prototype.applyOptions.call(this,t)},p.prototype.setEditValue=function(t){var e,i=[],o=[],n=-1,r=re.Utils.isArray(t)?t:t?t.split(this._editIndex.dataColumn.valueSeparator):[];if(this._value=t,this._lookup){var s=this._domain;if(s)for(var a=0,l=r.length;a<l;a++)0<=(n=s.keys.indexOf(r[a]))&&(i.push(n),o.push(n<s.values.length?s.values[n]:r[a]));else i=this._editIndex.dataColumn.getLookupIndices(t);this._labeling?(e=s?o.join(this._editIndex.dataColumn.valueSeparator):0<i.length?this._editIndex.dataColumn.getLookupLabel(t):t,L.TextCellEditor.prototype.setEditValue.call(this,e)):L.TextCellEditor.prototype.setEditValue.call(this,t)}else if(this._values){for(a=0,l=r.length;a<l;a++)0<=(n=this._values.indexOf(r[a]))&&(i.push(n),o.push(this._labels&&0<=n&&this._labels.length>n?this._labels[n]:r[a]));this._labeling&&this._labels?(e=o.join(this._editIndex.dataColumn.valueSeparator),L.TextCellEditor.prototype.setEditValue.call(this,e)):L.TextCellEditor.prototype.setEditValue.call(this,t)}else L.TextCellEditor.prototype.setEditValue.call(this,t);this._selectedIndices=i},p.prototype.setCellEditValue=function(t,e){u.prototype.setCellEditValue.call(this,t,e)},p.prototype.getEditValue=function(t,e){return void 0===t&&(t=!0),void 0===e&&(e=!1),this.isEdited()||this._list.selected?this.$_getEditValue(t,e):this._value},p.prototype._keyDownHandler=function(t){if(!this.isDisabled()){var e=this._list;if(t.ctrlKey&&65==t.keyCode&&this.listing)return t.preventDefault(),e._allCheck.checked=!e._allCheck.checked,e.$_toggleAllCheck(),!0;if(32===t.keyCode)if(this.listing)return e.changeCheckIndex(e.itemIndex,null,!0),t.preventDefault(),!0;return u.prototype._keyDownHandler.call(this,t)}},p.prototype._keyPressHandler=function(t){u.prototype._keyPressHandler.call(this,t),this._list._selected=!1},p.prototype._inputHandler=function(t){u.prototype._inputHandler.call(this,t),this._list._selected=!1},p.prototype.$_getEditValue=function(t,e){function i(t,e,i,o,n){var r=[],s=e&&e.split(n.valueSeparator);if(s&&0<s.length)for(var a=0,l=s.length;a<l;a++)0<=o.indexOf(s[a])&&o.indexOf(s[a])<i.length?r.push(i[o.indexOf(s[a])]):(0<=i.indexOf(s[a])||!t.domainOnly)&&r.push(s[a]);return r}void 0===t&&(t=!1),void 0===e&&(e=!1);var o=this._strToVal(this.text),t=L.TextCellEditor.prototype.getEditValue.call(this,t,e),n=t,r=this._editIndex.dataColumn,s=this._selectedIndices.slice(),a=[],e=this._list.selected;if(this._lookup){if(this._domain){if(this._labeling){if(e)for(var l=0,h=s.length;l<h;l++)s[l]<this._domain.keys.length&&a.push(this._domain.keys[s[l]]);else o&&(a=i(this,o,this._domain.keys,this._domain.values,r));n=a.join(r.valueSeparator)}}else if(this._labeling&&void 0===(n=e?r.getLookupValues(s):r.getSourceValues(o))&&(n=t),this.domainOnly&&n){if(!r.values)return L.CellEditor.Unselected;for(l=(n=re.Utils.isArray(n)?n:n&&n.split?n.split(r.valueSeparator):[n]).length-1;0<=l;l--)r.values.indexOf(n[l])<0&&n.splice(l,1)}}else{if(this._labeling){if(e)for(l=0,h=s.length;l<h;l++)s[l]<this._values.length&&a.push(this._values[s[l]]);else o&&(a=i(this,o,this._values,this._labels,r));n=a.join(r.valueSeparator)}if(this.domainOnly&&n){if(!this._values)return L.CellEditor.Unselected;for(l=(n=re.Utils.isArray(n)?n:n&&n.split?n.split(r.valueSeparator):[n]).length-1;0<=l;l--)this._values.indexOf(n[l])<0&&n.splice(l,1)}}return re.Utils.isArray(n)?n.join(r.valueSeparator):n},p.prototype._getInputSelector=function(){return p.INPUT_CSS},p.prototype.onMultiCheckListCloseUp=function(t,e){this.closeUp(e,!0),this._isMobile||this.setFocus()},p.prototype.onMultiCheckListCheckClick=function(t){this._editor.value=this.getCheckValues(t._selectItemIndices,this._items).join(this.editIndex.dataColumn.valueSeparator),this._selectedIndices=t._selectItemIndices.slice(),this._saveIndices=t._selectItemIndices.slice(),this._modified=!0,this._dispatchChange(),this._isMobile||this._editor.focus()},p.prototype.onMultiCheckListCancel=function(){this._isMobile?this._controller.closeList(!1):this._controller.cancelEditor(!0)},p.INPUT_CSS="rg-multicheck-editor";var u,_=p;function p(t,e){t=u.call(this,t,e)||this;return t._showButtons=!0,t._showAllCheck=!1,t._setEditorAria("aria-multiselectable","true"),t}e.MultiCheckCellEditor=_;f=o,ne.__extends(m,f),_dp(m,"searchLength",{get:function(){return this._searchLength},set:function(t){t!=this._searchLength&&(this._searchLength=t,this._changed())}}),_dp(m,"searchDelay",{get:function(){return this._searchDelay},set:function(t){t!=this._searchDelay&&(this._searchDelay=t,this._changed())}}),_dp(m,"useCtrlEnterKey",{get:function(){return this._useCtrlEnterKey},set:function(t){t!=this._useCtrlEnterKey&&(this._useCtrlEnterKey=t,this._changed())}}),_dp(m,"useEnterKey",{get:function(){return this._useEnterKey},set:function(t){t!=this._useEnterKey&&(this._useEnterKey=t,this._changed())}}),_dp(m,"initCount",{get:function(){return this._initCount},set:function(t){t!=this._initCount&&(this._initCount=t,this._changed())}}),_dp(m,"moreItemCount",{get:function(){return this._moreItemCount},set:function(t){t!=this._moreItemCount&&(this._moreItemCount=t,this._changed())}}),_dp(m,"moreText",{get:function(){return this._moreText},set:function(t){t!=this._moreText&&(this._moreText=t,this._changed())}}),_dp(m,"reInquery",{get:function(){return this._reInquery},set:function(t){t!=this._reInquery&&(this._reInquery=t,this._changed())}}),m.prototype.fillItems=function(t,e,i){return!(!this.listing||t!=this.getEditText()||(this.values=e,this.labels=i,this._refreshItems(!0,!0),this._list.$_search(this._editor.value,!0),0))},m.prototype._keyDownHandler=function(t){var e;if(!this.isDisabled())return 13==t.keyCode&&(t.ctrlKey?this.useCtrlEnterKey:this.useEnterKey&&(!this._items||this._items.length<1))&&this.editing?(t.preventDefault(),t.stopImmediatePropagation(),this.$_stopTimer(),(e=this.getEditText())&&e!=this._searchKey&&(this._searchKey=e,this._dispatchSearch(e)),!0):f.prototype._keyDownHandler.call(this,t)},m.prototype._keyUpHandler=function(t){this.isDisabled()||(f.prototype._keyUpHandler.call(this,t),re.Utils.isChrome&&this.$_search())},m.prototype._inputHandler=function(t){this.isDisabled()||(f.prototype._inputHandler.call(this,t),re.Utils.isChrome)||this.$_search()},m.prototype._doEndEdit=function(){f.prototype._doEndEdit.call(this),this.$_stopTimer(),this._searchKey=null},m.prototype.dropDown=function(t){var e=this._list;return e&&(e.initCount=this.initCount,e.moreItemCount=this.moreItemCount,e.moreText=this.moreText),f.prototype.dropDown.call(this,!0)},m.prototype.buttonClicked=function(t){var e,i;this.listing?this.closeUp(!1,!1):(this.dropDown(),e=this.getEditText(),(i=this._dispatchSearchCellButtonClick(e))&&"object"==typeof i&&i.values&&this.fillItems(e,i.values,i.labels))},m.prototype._getInputSelector=function(){return m.INPUT_CSS},m.prototype.$_search=function(){var t=this.getEditText();t&&t.length>=this._searchLength?this.$_startTimer():this.$_stopTimer()},m.prototype.$_startTimer=function(){this.$_stopTimer(),!this.reInquery&&this.listing&&0<this._list._items.length||(this._timer=setInterval(function(){var t=this.getEditText();t&&t!=this._searchKey&&(this._searchKey=t,this.$_stopTimer(),this._dispatchSearch(t,!0))}.bind(this),this._searchDelay))},m.prototype.$_stopTimer=function(){this._timer&&clearInterval(this._timer)},m.INPUT_CSS="rg-search-editor",m.SEARCH="onSearchCellEditorSearch";var f,_=m;function m(t,e){t=f.call(this,t,e)||this;return t._searchLength=1,t._searchDelay=1e3,t._useCtrlEnterKey=!1,t._useEnterKey=!1,t._initCount=0,t._moreItemCount=25,t._reInquery=!0,t._timer=void 0,t._editor.setAttribute("aria-autocomplate","list"),t}e.SearchCellEditor=_;y=L.TextCellEditor,ne.__extends(C,y),C.prototype._dodispose=function(){this._editor&&this._editor.removeEventListener("change",this.$_selectChanged),this._values=null,this._labels=null,this._items=null,y.prototype.dispose.call(this)},_dp(C,"native",{get:function(){return!0}}),_dp(C,"buttonCount",{get:function(){return 1}}),C.prototype.hasButton=function(t,e){return null==t||t},C.prototype._createEditor=function(t){var e=re.getDoc(t),t=(this._container=this._createContainer(e),t.appendChild(this._container),e.createElement("select")),e=t.style;return t.setAttribute("aria-hidden","true"),e.position="absolute",e.boxSizing="border-box",e.margin="0px",e.padding="0px",e.wordWrap="normal",e.overflow="hidden",e.resize="none",e.border="none",e.outline="none",e.left="0px",e.top="0px",e.width="100%",e.height="100%",this.$_selectChanged=function(t){t=t.target;this._itemIndex!==t.selectedIndex&&(this._dispatchChange(),this._dispatchCommit())}.bind(this),t.addEventListener("change",this.$_selectChanged),this._container.appendChild(t),t},C.prototype._getInputSelector=function(){return C.INPUT_CSS},C.prototype.initOptions=function(){y.prototype.initOptions.call(this),this._values=[],this._labels=[],this._items=[],this._itemIndex=-1},C.prototype.setEditIndex=function(t){y.prototype.setEditIndex.call(this,t),this._refreshItems(),this._resetPosition()},C.prototype.setEditValue=function(t){y.prototype.setEditValue.call(this,t),this._itemIndex=-1;for(var e=this._editor.options,i=0,o=e.length;i<o;i++)e[i].value===t?e[this._itemIndex=i].selected=!0:e[i].selected=!1},C.prototype.prepare=function(){var t=re.getWin(this._container);this._handled||(t.addEventListener("keydown",this._globalKeyDownHandler),this._handled=!0)},C.prototype.unprepare=function(){re.getWin(this._container).removeEventListener("keydown",this._globalKeyDownHandler),this._handled=!1},C.prototype._keyDownHandler=function(t){if(!this.isDisabled()){var e=t.keyCode,i=re.Utils.isIE&&this.visible;switch(e){case 40:if(t.altKey)return this._requestStart(),!0;if(i)return!1;break;case 13:case 38:case 33:case 34:case 36:case 35:if(i)return!1}return y.prototype._keyDownHandler.call(this,t)}},C.prototype._resetPosition=function(){var t=this._grid;t.editorLender||((t=t.getEditCellBounds(this,this._editIndex)).x--,t.y--,this.setBounds(t.x,t.y,0,0,0))},C.prototype._refreshItems=function(t,e){void 0===e&&(e=!1);var i=this.editIndex,o=i.item;if(this._values&&(0<this._values.length||e))this.$_setItems(this._values,this._labels);else if(i.dataColumn&&i.item&&(0<=i.dataRow||rt.ItemState_isEditing(o.itemState))){e=i.dataColumn;if(e.lookupSource){for(var n=e.lookupKeyFieldIds,r=[],s=0;s<n.length-1;s++)r.push(o.getData(n[s]));i=e.lookupSource.getTextDomain(r);i&&i.values&&0<i.values.length&&this.$_setItems(i.keys,i.values)}else e.values&&0<e.values.length&&this.$_setItems(e.values,e.labels)}},C.prototype.$_setItems=function(t,e){this._items=[];for(var i=this._editor,o=i.options,n=re.getDoc(i),r=o.length-1;0<=r;r--)o.remove(r);for(var r=0,s=t.length;r<s;r++){var a=n.createElement("option");a.value=t[r],a.text=(e&&e.length>r?e:t)[r],this._items.push({value:a.value,label:a.text}),i.options.add(a,null)}},C.prototype.getEditValue=function(){return this.$_getEditValue()},C.prototype.$_getEditValue=function(){return this._editor.value},C.INPUT_CSS="rg-nlist-editor";var y,_=C;function C(t,e){t=y.call(this,t,e)||this;return t._values=null,t._items=null,t._labels=null,t._sortStyle=r.NONE,t._itemIndex=-1,t._displayLabels=null,t._separator=null,t._itemColumned=!1,t._trimLabelText=!0,t.$_selectChanged=null,t._handled=!1,t._globalKeyDownHandler=function(t){var e=re.getWin(this._container);if(!(t.target instanceof e.HTMLTableCellElement))return this._keyDownHandler(t)}.bind(t),t}e.NativeListCellEditor=_})),ue=(t(de),de.DropDownPosition,de.DropDownSortStyle,de.DropDownValueLabel,de.DropDownList,de.DropDownCellEditor,de.MultiCheckCellEditor,de.SearchCellEditor,de.NativeListCellEditor,e(function(t,e){Object.defineProperty(e,"__esModule",{value:!0});i=se.Base,ne.__extends(n,i),n.prototype._doDispose=function(){i.prototype._doDispose.call(this)},n.prototype.lastLayout=function(){throw new Error("Method not implemented.")},n.prototype.getText=function(t,e,i,o){throw new Error("Method not implemented.")},n.prototype.getCellText=function(t,e){throw new Error("Method not implemented.")},n.prototype.getRows=function(t,e,i){throw new Error("Method not implemented.")},n.prototype.getCell=function(t,e,i){throw new Error("Method not implemented.")};var i,o=n;function n(){return i.call(this)||this}e.ClipboardData=o;r=se.Base,ne.__extends(s,r),s.prototype._doDispose=function(){r.prototype._doDispose.call(this)},_dp(s,"rowCount",{get:function(){return this._lines.length}}),_dp(s,"colCount",{get:function(){return this._colCount},set:function(t){this._colCount=t}}),_dp(s,"empty",{get:function(){return 0==this._lines.length||0==this._colCount}}),_dp(s,"single",{get:function(){return 1==this._lines.length&&1==this._colCount}}),_dp(s,"blockPaste",{get:function(){return this._blockPaste},set:function(t){this._blockPaste=t}}),_dp(s,"startIndex",{get:function(){return this._startIndex}}),s.prototype.get=function(t){return this._lines[t]},s.prototype._parse=function(t,e,i){var o,n,r,s,a,l=this._lines,h=[],d=t.length,u=0,c="";if(""===t)h.push(t),l.push(h),this._colCount=1;else{for(;u<d;)a=!1,o=t.charAt(u),n=u<d-1?t.charAt(u+1):"",'"'==o?s?r&&'"'==n?(c+=o,u++):r?r=!1:c+=o:r=s=!0:r||"\r"!=o&&"\n"!=o&&"\t"!=o?(s=!0,c+=o):("\t"==o&&(h.push(c),a=!0),"\r"!=o&&"\n"!=o||(h.push(c),this._colCount=Math.max(this._colCount,h.length),l.push(h),h=[],"\r"==o&&"\n"==n&&u++),c="",s=!1),u++;(0<(c=r?'"'+c:c).length||a)&&h.push(c),0<h.length&&(this._colCount=Math.max(this._colCount,h.length),l.push(h))}if(e&&e instanceof W.BlockSelection&&!e.single&&(!i||1===this._colCount&&1===l.length)){var i=e.startIndex,_=e.endIndex;if(i&&_){for(var p,e=e.grid,f=i.layout,g=_.layout,i=i.itemIndex,_=_.itemIndex,m=(f.col>g.col&&(p=f,f=g,g=p),_<i&&(p=i,i=_,_=p),f=e.activeCellLayout.getTopOf(f),(g=e.activeCellLayout.getBottomOf(g,!0)).col-f.col+1),y=(g.row-f.row+1)*(_-i+1),u=0,v=0,C=l.length;v<C;v++){for(var w=l[v].slice(),x=w.length;x<m;x++)l[v].push(w[u]),u=u>=w.length?0:u;this._colCount=Math.max(this._colCount,l[v].length)}u=0;for(v=l.length;v<y;v++)l.push(l[u++]),u=u>=l.length?0:u;this._blockPaste=!0,this._startIndex=_t.CellIndex.temp(e,i,f)}}};var r,w=s;function s(t,e,i){var o=r.call(this)||this;return o._colCount=0,o._blockPaste=!1,o._lines=[],o._colCount=0,o._blockPaste=!1,o._parse(t,e,i),o}e.ClipboardSource=w;a=o,ne.__extends(h,a),h.prototype._doDispose=function(){return a.prototype._doDispose.call(this)},h.prototype.lastLayout=function(){return this._lastLayout},h.prototype.getText=function(o,t,e,i){var n,r,s,a=o.grid,l=this._rangeToCells(o,null,t,i),h=[];if(a.copyOptions.includeHeaderText)for(s=0;s<l.length;s++){for(var d=[],u=0;u<l[s].length;u++)n=re.Utils.cast(l[s][u],lt.DataColumn),d.push(n?re.Utils.addQuot(n.header.displayText):"");h.push(d.join("\t"))}if(!e){e=[];for(var c=t.r1,_=t.r2;c<=_;c++)e.push(c)}return e.forEach(function(t){var e=a.getItem(t);if(0<=e.dataRow||rt.ItemState_isInserting(e.itemState))for(s=0;s<l.length;s++){var i=[];for(u=0;u<l[s].length;u++)(n=re.Utils.cast(l[s][u],lt.DataColumn))&&!n.blankWhenCopy?(r=_t.CellIndex.temp(a,t,n).clone(),i.push(o.getData(r))):i.push("");h.push(i.join("\t"))}}),h.join("\r\n")+"\r\n"},h.prototype.getCellText=function(t,e){var i="";return t.grid.copyOptions.includeHeaderText&&(i=e.dataColumn.header.displayText+"\r\n"),i+=t.getData(e)},h.prototype.getRows=function(t,e,i){if(null==e)return null;var o=i.grid,n=o.pasteOptions,r=o.getSelection(),s=i.dataColumn;if(r&&r.single&&!o.isTree()&&s.mergeEdit&&o.editOptions.commitByCell)var a=o.getMergedItems(i.itemIndex,s,!0,!0),l=new _t.CellIndex(o,a[0],s),a=new _t.CellIndex(o,a[a.length-1],s),r=new W.BlockSelection(o.selections,W.SelectionStyle.BLOCK,l,a),l=!0;else{if(n.selectBlockPaste&&1<o.selections.count)return void alert("multi selection paste not supported");r=n.selectBlockPaste&&r}var h=new w(e,r,l);if(h.empty)return null;if(h.single)return h.get(0)[0];h.blockPaste&&h.startIndex&&i.assign(h.startIndex);for(var d,s=o.activeCellLayout._dataCells,a=s[0][i.layout.col],n=s[s.length-1][Math.min(s[0].length-1,i.layout.col+h.colCount-1)],e=new _t.CellIndex(o,i.itemIndex,a),r=new _t.CellIndex(o,i.itemIndex,n),l=_t.CellRange.create(e,r),u=this._rangeToCells(t,h,l,null),c=void 0,_=void 0,p=void 0,f=[],g=0,m=h.rowCount;g<m;){for(var y={columns:[],values:[]},c=0;c<u.length&&g<m;c++,g++){var v=u[c],C=h.get(g);for(y.columns.push(v),y.values.push(p=[]),d=Math.min(C.length,v.length),_=0;_<d;_++)v[_]?p.push(C[_]):p.push("")}f.push(y)}return f},h.prototype.getCell=function(t,e,i){return!e||(e=new w(e)).empty?null:e.get(0)[0]},h.prototype._rangeToCells=function(t,e,i,o){i.normalizeData(),this._lastLayout=null;var n=i.c1,r=i.c2,s=t.grid.activeCellLayout._dataCells,a=n===r?n.row:0,l=n===r?n.row:s.length-1,h=[];if(o){for(var d=[],u=a;u<=l;u++){for(var c=[],_=0;_<s[0].length;_++){var p=s[u][_];0<=o.indexOf(p)?(c.push(p.firstColumn),d[_]=d[_]||p):c.push(null)}h.push(c)}for(_=s[0].length-1;0<=_;_--)for(u=a;u<=l;u++)d[_]||h[u].splice(_,1)}else for(u=a;u<=l;u++){for(c=[],_=n.col;_<=r.col;_++)(p=s[u][_])instanceof ct.CellLayoutColumnItem?c.push(p.firstColumn):c.push(null);h.push(c)}return this._lastLayout=s[l][r.col],h};var a,l=h;function h(){var t=a.call(this)||this;return t._lastLayout=null,t}e.DefaultClipboardData=l;d=rt.GridItem,ne.__extends(c,d),_dp(c,"isLeaf",{get:function(){return!0}}),_dp(c,"dataSource",{get:function(){return this._grid.dataSource}}),_dp(c,"checked",{get:function(){return 0!=(this._getExtents()&rt.ITEM_EXT_CHECKED)}}),_dp(c,"type",{get:function(){return ht.ItemType.ROW}}),c.prototype._getExtents=function(){return 0},c.prototype._setExtents=function(t){},_dp(c,"values",{set:function(t){this._values=t}}),_dp(c,"dataRow",{get:function(){return this._dataRow},set:function(t){this._dataRow=t}}),_dp(c,"dataId",{get:function(){return this.dataSource.getRowId(this._dataRow)}}),c.prototype.getRowObject=function(){for(var t={},e=this.dataSource,i=0<=this._dataRow&&e.getRow(this._dataRow),o=0,n=e.fieldCount;o<n;o++){var r=e.getOrgFieldName(o),s=this._values.hasOwnProperty(o)?this._values[o]:i&&i[o];t[r]=s}return t},c.prototype.getRowData=function(){for(var t=[],e=this.dataSource,i=0<=this._dataRow&&e.getRow(this._dataRow),o=0,n=e.fieldCount;o<n;o++){var r=this._values.hasOwnProperty(o)?this._values[o]:i&&i[o];t[o]=r}return t},c.prototype.getData=function(t){return t=this.dataSource.getFieldIndex(t),(this._values.hasOwnProperty(t)||this._dataRow<0?this._values:this.dataSource.getRow(this._dataRow))[t]},c.prototype.setIndex=function(t){this._setIndex(t)};var d,u=c;function c(t){var e=d.call(this)||this;return e._values=null,e._dataRow=-1,e._grid=t,e}e.ClipboardItem=u;_=_t.CellIndex,ne.__extends(f,_),f.prototype._doDispose=function(){return _.prototype._doDispose.call(this)},_dp(f,"item",{get:function(){return this._item}});var _,p=f;function f(t,e){t=_.call(this,t)||this;return t._item=e,t}function g(t){this._grid=t,this._data=new l,this._appendingItem=new u(t),this._appendingIndex=new p(t,this._appendingItem)}e.ClipboardIndex=p,g.prototype.dispose=function(){return null},_dp(g,"grid",{get:function(){return this._grid}}),_dp(g,"appendingIndex",{get:function(){return this._appendingIndex}}),_dp(g,"isPasting",{get:function(){return this._pasting}}),g.prototype.getDataRoots=function(){var t=this._grid._activeCellLayout._dataCells,e=[];if(t.length&&t[0].length)for(var i=0,o=t[0].length;i<o;i++)e.push(t[0][i].dataRoot);return e},g.prototype.getData=function(t){var e,i,o,n=this.grid,r=t.layout.firstColumn,s=n.getItem(t.itemIndex),a=n.copyOptions,l=a.datetimeFormat?z.DateTimeWriter.getFormatter(a.datetimeFormat):null,h=a.booleanFormat?K.BooleanFormatter.getFormatter(a.booleanFormat):null,d=a.copyTextCallback;if(s&&(rt.ItemState_isInserting(s.itemState)||0<=s.dataRow)&&(o=s.getData(r.dataIndex),r)&&null!=(e=n.dataSource.getField(r.dataIndex))){if(null==(i=d?d.call(this,n,t.itemIndex,t.dataColumn,o):void 0))if(a.copyDisplayText)i=n.getDisplayText(t);else switch(e.dataType){case ht.ValueType.DATETIME:case ht.ValueType.DATE:i=o?l?l.getText(o):String(o):"";break;case ht.ValueType.BOOLEAN:i=null!=o?h?h.formatValue(o):String(o):"";break;case ht.ValueType.NUMBER:i=null==o||isNaN(o)?"":String(o);break;case ht.ValueType.OBJECT:i=o&&"object"==typeof o?JSON.stringify(o):"";break;default:i=a.lookupDisplay&&(r.lookupDisplay||r.labelField)?st.DataCell.getText(s,r):null!=o?String(o):""}return re.Utils.addQuot(i)}return""},g.prototype.copyEmtpyToClipboard=function(){return""},g.prototype.copyToClipboard=function(t,e,i){return this._data.getText(this,t,e,i)},g.prototype.copyCellToClipboard=function(t){return this._data.getCellText(this,t)},g.prototype.pasteCellFromClipboard=function(t,e){(t=this._correctIndex(t))&&this._grid.isValid(t)&&null!=e&&(e=this._data.getCell(this,e,t),this._pasteSingleCell(t,e))},g.prototype.pasteFromClipboard=function(t,e){var i=t.clone();(t=this._correctIndex(t))&&this._grid.isValid(t)&&(null!=e&&null!=(e=this._data.getRows(this,e,t))&&("string"==typeof e?this._pasteSingleCell(t,e):1==e.length?this._pasteSingleLine(t,e[0]):1<e.length&&this._pasteMultiLines(t,e)),_t.CellIndex.areEquals(t,i)||this._grid.setFocusedIndex(i,!1,!1))},g.prototype._correctIndex=function(t){var e;return t&&(e=this._grid,t.normalize(e),this._grid.isValid(t))&&e.pasteOptions.selectionBase&&0<e.selections.count&&(e=e.selections.getItem(0).getBounds().firstCell,t.column=e.column,t.itemIndex=e.itemIndex),t},g.prototype._convertValue=function(t,e,i,o,n,r){var s,a=void 0,l=i.dataIndex,h=t.getField(l),d=this._grid;switch(h.dataType){case ht.ValueType.NUMBER:var a=NaN,u=void 0;o?(p=void 0,(e.applyNumberFormat||e.applyMaxLength)&&(f=d.body.getCell(r,!1),f=(p="object"!=typeof(p=i.getCellStyle(f))?void 0:p)&&p.editor||i.editor,"number"===L.CellEditor.getEditorType(f))&&((s=d.delegate.getCellEditor("number")).initOptions(),s.applyOptions(f)),f=i.name,e.applyNumberFormat&&(p=s&&s.editFormat||p&&p.numberFormat||i.numberFormat||d.formatOptions.numberFormat)&&(u=new Y.DecimalFormatter(p)),(p=e.numberCharExpOfCol(f))&&(o=o.replace(p,"")),(p=e.numberSeparatorOfCol(f))&&(o=o.replace(p,".")),a=u?+parseFloat(o).toFixed(u.maxDigits):parseFloat(o),e.applyMaxLength&&(f=String(a).split("."),s&&0<s.maxIntegerLength&&(f[0]=f[0].substr(0,s.maxIntegerLength)),o=f.join("."),s&&0<s.maxLength&&(o=o.substr(0,s.maxLength)),a=parseFloat(o))):""==o&&(a=null);break;case ht.ValueType.DATETIME:a=null;var c=e.dateReaders;if(o&&c)for(var _=0;_<c.length&&!(a=c[_].toDate(o));_++);null===(a=null===a&&(a=new Date(o),isNaN(a.getTime()))?null:a)&&(a=h.readValue(o));break;case ht.ValueType.BOOLEAN:var p=e.boolReader;(a=void 0)===(a=o&&p?p.toBoolStrict(o):a)&&(a=h.readValue(o));break;default:if(o=String(o))if(s instanceof de.DropDownCellEditor){s.initOptions(),s.applyOptions(i.editor);var u=e.checkDomainOnly&&s.domainOnly,f=e.convertLookupLabel,p=-1,g=[],m=[];if(u||f)if(s.values&&0<s.values.length)m=s.values,g=s.labels;else if(i.lookupSource){for(var y=i.lookupSource,v=i.lookupKeyFieldIds,C=[],_=0;_<v.length-1;_++)C.push(n[v[_]]);y=y.getTextDomain(C),m=y&&y.keys,g=y&&y.values}else i.values&&0<i.values.length&&(m=i.values,g=i.labels);o=f&&m&&g&&m.indexOf(o)<0&&0<=(p=g.indexOf(o))?m[p]:o,o=!(m&&0<=m.indexOf(o))&&u?"":o}else e.applyMaxLength&&s&&s instanceof L.TextCellEditor&&0<s.maxLength&&(o=o.substr(0,s.maxLength)),i.textInputCase==ht.TextInputCase.LOWER?o=o.toLocaleLowerCase():i.textInputCase==ht.TextInputCase.UPPER&&(o=o.toLocaleUpperCase());a=o}return a},g.prototype._fireRowsPasted=function(t){for(var e=this._grid,i=[],o=0;o<t.length;o++)i.push(e.getItemIndexOfRow(t[o]));0<i.length&&e._fireItemsPasted(i)},g.prototype._cellWritable=function(t,e,i){var o=this._grid,i=o._fireCellPasting(t,i);if("boolean"==typeof i)return i;if(!o.pasteOptions.checkReadOnly)return!0;i=o.body.getIndexCellStyle(t);if(i&&(null!=i.readOnly||null!=i.editable))return(null==i.editable||i.editable)&&!i.readOnly;i=o.body.getRowStyle(t.item,t.itemIndex<o.fixedOptions.rowCount);if("object"==typeof i&&(null!=i.readOnly||null!=i.editable))return(null==i.editable||i.editable)&&!i.readOnly;i=o.fixedOptions;if((t.colFixed||t.rightFixed)&&!i.editable||t.rowFixed&&!i.rowEditable)return!1;var n,i=t.item&&t.item.itemState;switch(e||i){case rt.ItemState.NORMAL:case rt.ItemState.FOCUSED:case rt.ItemState.UPDATING:n=o.canUpdate(t.item,t.dataField);break;default:n=!0}e=this.grid.getBodyCellAt(t,!1);if(e&&e.renderer2&&e.renderer2.canEdit())return n&&!t.dataColumn.readOnly;if(!e){i=t.dataColumn.renderer;if(i&&"check"===i.type&&null!=i.editable)return n&&i.editable&&!t.dataColumn.readOnly}return n&&t.dataColumn.isWritable()},g.prototype._applyMaskValue=function(t,e){var i,o=this.grid.body.getIndexCellStyle(t);return o.editor&&o.editor.mask?i=o.editor.mask:o.editor||(i=t.dataColumn.editor&&t.dataColumn.editor.mask),i?((o=new L.EditMask(null,i)).clearBuffer(),o.writeBuffer(e,!0),o.checkValid()?o.getStripValue():null):e},g.prototype._applyInputChars=function(t,e){var i,o;return e=this.grid.pasteOptions.applyInputChars&&(t=this.grid.body.getIndexCellStyle(t).editor||t.dataColumn.editor)&&((o=t.inputCharacters)&&(i=new RegExp("[^"+o+"]","g")).test(e)&&(e=e.replace(i,"")),o=t.ignoreCharacters)&&(i=new RegExp("["+o+"]","g")).test(e)?e.replace(i,""):e},g.prototype._pasteSingleCell=function(t,e){var i=this._grid,o=i.dataSource,n=t.dataColumn,r=i.pasteOptions;if(null!=e&&o&&n&&n.isWritable()&&!i.editOptions.readOnly&&t.item.canEdit()){(e=e.lastIndexOf("\r\n")==e.length-1?e.substr(0,e.length-2):e).lastIndexOf("\n")==e.length-1&&(e=e.substr(0,e.length-1));o=this._convertValue(o,r,n,e,t.item&&t.item.getRowData(),t),o=r.applyEditMask?this._applyMaskValue(t,o):o;if(o=this._applyInputChars(t,o),this._cellWritable(t,null,o))if(i.isItemEditing()||r.startEdit&&i.edit(t)){var s=t.item,e=[],a=[];a[t.dataField]=o,e[t.dataField]=s.getData(t.dataField),i.setCellUpdateEventLock(r.noEditEvent);try{s.setData(n.dataIndex,o)}finally{i.setCellUpdateEventLock(!1)}i.validateCellCommit(t,t.item.getData(t.dataField)),i.editOptions.commitByCell&&i.commit(!1,!1,!0),i._fireEditItemPasted(s,[t.dataField],e,a),i.refreshView()}else{this._pasting=!0;try{var l=i.validationManager,h=r.forceRowValidation,d=r.forceColumnValidation,u=(s=t.item,this._appendingItem.values=h||d?s.getRowData():[]),c=(u[n.dataIndex]=o,rt.ItemState_isInserting(s.itemState));if(this._appendingItem.dataRow=s.dataRow,this._appendingItem.setIndex(s.index),this._appendingIndex.column=null,this._appendingIndex.itemIndex=t.itemIndex,h&&l.validateRow(this._appendingItem,c,!0,!0),d){this._appendingIndex.column=n;try{l.validateCell(this._appendingIndex,c,!0)}catch(t){if(!(t instanceof G.ValidationError))throw t;if(ht.ValidationLevel_compare(t.level,i.editOptions.commitLevel)<0)throw t}}l.clearInvalidCell(this._appendingIndex),i.updatePastedRow(s,u,!h)}finally{this._pasting=!1}}}},g.prototype._pasteSingleLine=function(t,e){var i,o=this._grid,n=o.dataSource,r=o.pasteOptions,s=o.editOptions,a=!1;if(n&&!s.readOnly&&n){if(o.isItemEditing()||r.startEdit&&o.edit(t)){for(var l=[],h=[],d=[],u=t.column,c=t.item,_=Math.min(e.columns.length,e.values.length),p=0;p<_;p++)for(var f=e.columns[p],g=e.values[p],m=0;m<g.length;m++){var y=f[m],v=g[m];if(y){var C=_t.CellIndex.temp(o,t.itemIndex,y),w=c.getData(y.dataIndex),x=this._convertValue(n,r,y,v,c&&c.getRowData(),C);x=r.applyEditMask?this._applyMaskValue(C,x):x,x=this._applyInputChars(C,x),o.setCellUpdateEventLock(r.noEditEvent);try{(i=this._cellWritable(C,null,x))&&c.setData(y.dataIndex,x)}finally{o.setCellUpdateEventLock(!1)}i&&(t.column=y,o.validateCellCommit(t,c.getData(y.dataIndex)),l.push(y.dataIndex),h[y.dataIndex]=w,d[y.dataIndex]=x,a=!0)}}a&&(s.commitByCell&&o.commit(!1),o._fireEditItemPasted(c,l,h,d),t.column=u,o.refreshView())}else{this._pasting=!0;try{var b=o.validationManager,I=r.forceRowValidation,E=r.forceColumnValidation,S=this._appendingItem,d=(c=t.item,S.setIndex(c.index),S.dataRow=c.dataRow,this._appendingIndex.column=null,this._appendingIndex.itemIndex=t.itemIndex,S.values=I||E?c.getRowData():[]),f=(_=Math.min(e.columns.length,e.values.length),void 0),g=void 0;for(p=0;p<_;p++)for(f=e.columns[p],g=e.values[p],m=0;m<g.length;m++)(y=f[m])&&(C=_t.DummyCellIndex.tempItem(o,S,y),x=this._convertValue(n,r,y,g[m],S&&S.getRowData(),C),x=r.applyEditMask?this._applyMaskValue(C,x):x,x=this._applyInputChars(C,x),i=this._cellWritable(C,null,x))&&(d[y.dataIndex]=x,a=!0);if(a){var R=rt.ItemState_isInserting(c.itemState);if(I&&b.validateRow(S,R,!0,!0),E)for(p=0;p<_;p++)for(f=e.columns[p],g=e.values[p],m=0;m<g.length;m++){this._appendingIndex.column=f[m];try{b.validateCell(this._appendingIndex,R,!0)}catch(t){if(!(t instanceof G.ValidationError))throw t;if(ht.ValidationLevel_compare(t.level,s.commitLevel)<0)throw t}}b.clearInvalidCells(c.dataId),o.updatePastedRow(c,d,!I)}}finally{this._pasting=!1}}o.selections.clear(),o.selections.add(t,new _t.CellIndex(o,t.itemIndex,this._data.lastLayout()),W.SelectionStyle.BLOCK)}},g.prototype._pasteMultiLines=function(e,t){var i=this._grid,o=i.dataSource;if(o){var n=i.pasteOptions,r=n.checkReadOnly;if(!r||!i.editOptions.readOnly){var s,a=n.noDataEvent,l=t.length,h=e.itemIndex,V=o.fieldCount,d=i.getDataColumns(!1),u=d.length,c=i.validationManager,_=n.forceRowValidation,p=n.forceColumnValidation,f=this._appendingItem,g=this._appendingIndex,m=void 0,y=void 0,v=void 0,C=void 0,w=n.eventEachRow,x=[],B=(n.commitEdit&&i.commit(!1)||i.cancel(),i.itemCount),b=(a&&o.beginUpdate(),void 0),I=void 0;i.isTree()||(b=(s=i.itemSource).filterMode,I=s.sortMode,s.filterMode=ht.FilterMode.EXPLICIT,s.sortMode=ht.SortMode.EXPLICIT);try{for(this._pasting=!0,m=0;m<l&&h<B;m++)try{if((P=i.getItem(h)).itemState==rt.ItemState.APPENDING)break;for(;P&&P.dataRow<0;)h++,P=i.getItem(h);if(null==P)break;var E=t[m],S=f.values=_||p?P.getRowData():[],R=_||p?P.getRowData():[],T=!1,D=[];for(f.setIndex(P.index),f.dataRow=P.dataRow,v=Math.min(E.columns.length,E.values.length),y=0;y<v;y++)for(var N=E.columns[y],k=E.values[y],C=0;C<k.length;C++)(M=N[C])&&M instanceof lt.DataColumn&&(F=_t.DummyCellIndex.tempItem(i,f,M),L=this._convertValue(o,n,M,k[C],f&&f.getRowData(),F),L=n.applyEditMask?this._applyMaskValue(F,L):L,L=this._applyInputChars(F,L),O=this._cellWritable(F,null,L))&&(T=T||O||!r,D.push(M.dataIndex),R[M.dataIndex]=P.getData(M.dataIndex),S[M.dataIndex]=L);if(T)try{g.column=null,g.itemIndex=P.index;var $=rt.ItemState_isInserting(P.itemState);if(_&&c.validateRow(f,$,!0,!0),p)for(C=0;C<u;C++){var M=d[C];g.column=M;try{c.validateCell(g,$,!0)}catch(t){if(!(t instanceof G.ValidationError))throw t;if(ht.ValidationLevel_compare(t.level,i.editOptions.commitLevel)<0)throw t}}i.updatePastedRow(P,S,!_),c.clearInvalidCells(f.dataId),w&&i._fireEditItemPasted(P,D,R,S),x.push(P.dataRow)}catch(t){if(n.stopOnError)throw t}h++}catch(t){throw h=Math.max(e.itemIndex,h-1),i.setFocusedIndex(e,!1),i.selections.clear(),i.selections.add(e,new _t.CellIndex(i,h,this._data.lastLayout()),W.SelectionStyle.BLOCK),t}if(m<l&&n.enableAppend){for(;m<l;m++){E=t[m],S=f.values=[],R=[];f.dataRow=-1,f.setIndex(-1);try{for(var A,D=[],v=Math.min(E.columns.length,E.values.length),y=0;y<v;y++){var F,L,O,N=E.columns[y],k=E.values[y];for(C=0;C<k.length;C++)(M=N[C])&&(F=_t.DummyCellIndex.tempItem(i,f,M),L=this._convertValue(o,n,M,k[C],S,F),L=n.applyEditMask?this._applyMaskValue(F,L):L,L=this._applyInputChars(F,L),O=this._cellWritable(F,rt.ItemState.APPENDING,L))&&(D.push(M.dataIndex),S[M.dataIndex]=L,R[M.dataIndex]=void 0)}if(n.fillColumnDefaults)for(C=0;C<u;C++)-1<(M=d[C]).dataIndex&&void 0===S[M.dataIndex]&&void 0!==M.defaultValue&&(S[M.dataIndex]=M.defaultValue);if(n.fillFieldDefaults)for(C=0;C<V;C++)void 0===S[C]&&void 0!==(A=o.getField(C)).defaultValue&&(S[C]=A.defaultValue);try{if(this._appendingIndex.column=null,this._appendingIndex.itemIndex=-1,_&&c.validateRow(f,!0,!0,!0),n.forceColumnValidation)for(C=0;C<u;C++){M=d[C];this._appendingIndex.column=M;try{c.validateCell(this._appendingIndex,!0,!0)}catch(t){if(!(t instanceof G.ValidationError))throw t;if(ht.ValidationLevel_compare(t.level,i.editOptions.commitLevel)<0)throw t}}i.appendPastedRow(S);var P,H=o.rowCount-1;w&&(P=i.getItem(i.getItemIndexOfRow(H)),i._fireEditItemPasted(P,D,R,S)),x.push(H)}catch(t){if(n.stopOnError)throw t}}catch(t){throw h=Math.max(e.itemIndex,i.itemCount-1),i.setFocusedIndex(e,!1),i.selections.clear(),i.selections.add(e,new _t.CellIndex(e.grid,h,this._data.lastLayout()),W.SelectionStyle.BLOCK),t}}h=a?-1:i.itemCount}this._fireRowsPasted(x)}catch(t){throw this._fireRowsPasted(x),t}finally{this._pasting=!1,a&&(o.endUpdate(),h<0)&&(h=o.rowCount),!i.isTree()&&((s=i.itemSource).isFiltered(null)&&s.filterMode!==b||s.sorted&&s.sortMode!==I)&&(s.filterMode=b,s.sortMode=I,s._refreshItems())}i.setFocusedIndex(e,!1),i.selections.clear(),i.selections.add(e,new _t.CellIndex(e.grid,h-1,this._data.lastLayout()),W.SelectionStyle.BLOCK)}}},e.ClipboardManager=g})),ce=(t(ue),ue.ClipboardData,ue.ClipboardSource,ue.DefaultClipboardData,ue.ClipboardItem,ue.ClipboardIndex,ue.ClipboardManager,e(function(t,e){Object.defineProperty(e,"__esModule",{value:!0});i=$t.VisualObject,ne.__extends(a,i),a.prototype._doDispose=function(){this._dataCell=this._dataCell.dispose(),this._hiddenCell=this._hiddenCell.dispose(),this._literalCell=this._literalCell.dispose(),this._seriesCell=this._seriesCell.dispose(),this._mergedCell=this._mergedCell.dispose(),this._cs=null,this._rowCs=null,i.prototype._doDispose.call(this)},_dp(a,"cellStyleCallback",{get:function(){return this._cellStyleCallback},set:function(t){t!==this._cellStyleCallback&&(this._cellStyleCallback=t,this.refreshOwner())}}),_dp(a,"rowStyleCallback",{get:function(){return this._rowStyleCallback},set:function(t){t!==this._rowStyleCallback&&(this._rowStyleCallback=t,this.refreshOwner())}}),_dp(a,"ariaLabelCallback",{get:function(){return this._ariaLabelCallback},set:function(t){this._ariaLabelCallback=t,this.refreshOwner()}}),_dp(a,"cellButtonWidth",{get:function(){return this._cellButtonWidth},set:function(t){t!=this._cellButtonWidth&&(this._cellButtonWidth=t,this.refreshOwner())}}),_dp(a,"cellButtonHeight",{get:function(){return this._cellButtonHeight},set:function(t){t!=this._cellButtonHeight&&(this._cellButtonHeight=t,this.$_resetButtonHeight(),this.refreshOwner())}}),_dp(a,"editButtonWidth",{get:function(){return this._editButtonWidth},set:function(t){t!=this._editButtonWidth&&(this._editButtonWidth=t,this.refreshOwner())}}),_dp(a,"editButtonHeight",{get:function(){return this._editButtonHeight},set:function(t){t!=this._editButtonHeight&&(this._editButtonHeight=t,this.$_resetButtonHeight(),this.refreshOwner())}}),_dp(a,"errorIconWidth",{get:function(){return this._errorIconWidth},set:function(t){t!=this._errorIconWidth&&(this._errorIconWidth=t,this.refreshOwner())}}),_dp(a,"errorIconHeight",{get:function(){return this._errorIconHeight},set:function(t){t!=this._errorIconHeight&&(this._errorIconHeight=t,this.$_resetButtonHeight(),this.refreshOwner())}}),_dp(a,"buttonHeight",{get:function(){return this._buttonHeight}}),a.prototype.$_resetButtonHeight=function(){this._buttonHeight=Math.max(this._cellButtonHeight,this._editButtonHeight,this._errorIconHeight)},a.prototype.getCell=function(t,e){return this.getCellAt(t.item,t.column,e)},a.prototype.getCellAt=function(t,e,i){var o,n=this._grid;return i?o=this._mergedCell:e instanceof lt.DataColumn?t.index<0||t instanceof ue.ClipboardItem?(o=this._hiddenCell,this._hiddenCell.setItem(t)):o=this._dataCell:o=e instanceof lt.SeriesColumn?this._seriesCell:e instanceof st.LiteralCell?this._literalCell:this._dataCell,o.setIndex2(n,t?t.index:-1,e),e instanceof lt.DataColumn&&((i=n.validationManager.getError(o.index))?(o.error=i.message,o.errorLevel=i.level):(o.error=null,o.errorLevel=ht.ValidationLevel.IGNORE)),o},a.prototype.getHidden=function(t,e){return this._hiddenCell.setIndex(t),this._hiddenCell.setItem(e),this._hiddenCell},a.prototype.getCellSimple=function(t,e){var i=t.column,e=e?this._mergedCell:i instanceof lt.SeriesColumn?this._seriesCell:i instanceof st.LiteralCell?this._literalCell:this._dataCell;return e.setIndex(t),e},a.prototype.getIndexCellStyle=function(t,e){t=this.getCell(t,!1);return this.getCellStyle(t,this._cs.clear(),!1,e)},a.prototype.getCellStyle=function(t,e,i,o){void 0===o&&(o=!0);var n,r=t.valueColumn,s=this._cellStyleCallback,s=(s&&(n=s(this._grid.handler,t),e.assign(n)),r&&(n=r.getCellStyle(t),e.assign(n)),e.styleName||r&&r.styleName||"");return o&&(e.styleName="rg-data-cell "+(i?"rg-merged-cell ":"")+s),e},a.prototype.getCellFormatters=function(t,e,i,o){return e?(e.numberFormatter=e.numberFormatter||t.numberFormatter,e.datetimeWriter=e.datetimeWriter||t.datetimeWriter,e.booleanFormatter=e.booleanFormatter||t.boolFormatter,e.textFormatter=e.textFormatter||t.textFormatter,e.prefix=e.prefix||t.prefix,e.suffix=e.suffix||t.suffix):((e=this._formatter).numberFormatter=t.numberFormatter,e.datetimeWriter=t.datetimeWriter,e.booleanFormatter=t.boolFormatter,e.textFormatter=t.textFormatter,e.prefix=t.prefix,e.suffix=t.suffix),i&&(i=(t=i.grid).body.getCell(i,!1),e=(o=t.body.getCellStyle(i,o)).toFormatter(e)),e},a.prototype.getRowStyle=function(t,e,i,o){void 0===i&&(i=!1),void 0===o&&(o=!0);var n=this._rowStyleCallback,r=this._grid,s=this._rowCs;return s.clear(),o&&n&&(o=n(r.handler,t,e)||{},s.assign(o)),s.styleName||(n=a.ROW_STYLE,t.index%2&&r.displayOptions.useAlternateRowStyle&&(n+=a.ALTERNATE_ROW_STYLE),e&&(n+=a.FIXED_ROW_STYLE),i||(n+=a.STATE_ROW_STYLES[t.rowState]||""),t.checked&&(n+=a.CHECKED_ROW_STYLE),s.styleName=n),s},a.prototype._prepareUpdate=function(){var t=this._grid=this.owner;this._ds=t.dataSource,this._showChangeMarker=t.displayOptions.showChangeMarker},a.ROW_STYLE=" rg-data-row",a.ALTERNATE_ROW_STYLE=" rg-alternate-row",a.FIXED_ROW_STYLE=" rg-fixed-row",a.CHECKED_ROW_STYLE=" rg-checked-row",a.STATE_ROW_STYLES={created:" rg-created-row",deleted:" rg-deleted-row",createAndDeleted:" rg-deleted-row",updated:" rg-updated-row"};var i,o=a;function a(t){t=i.call(this,t)||this;return t._cellButtonWidth=16,t._cellButtonHeight=16,t._editButtonWidth=16,t._editButtonHeight=16,t._errorIconWidth=16,t._errorIconHeight=16,t._showChangeMarker=!1,t._formatter={numberFormatter:null,datetimeWriter:null,booleanFormatter:null,textFormatter:null,prefix:"",suffix:""},t._buttonHeight=16,t._dataCell=new st.DataCell,t._hiddenCell=new st.HiddenDataCell,t._literalCell=new st.LiteralCell,t._seriesCell=new st.SeriesCell,t._mergedCell=new st.MergedDataCell,t._cs=new lt.ColumnStyle,t._rowCs=new rt.RowStyle,t}e.GridBody=o})),_e=(t(ce),ce.GridBody,e(function(t,e){Object.defineProperty(e,"__esModule",{value:!0});i=se.Base,ne.__extends(n,i),n.prototype._doDispose=function(){return this._grid=null,i.prototype._doDispose.call(this)},_dp(n,"grid",{get:function(){return this._grid}}),n.prototype._changed=function(){this._grid&&this._grid.optionsChanged(this)},n.prototype._invalidateOwner=function(){this._grid&&this._grid.invalidate()},n.prototype._layoutOwner=function(){this._grid&&this._grid.invalidateLayout()},n.prototype._refreshOwner=function(){this._grid&&this._grid.refreshView()},n.prototype._invalidateEditor=function(){};var i,o=n;function n(t){var e=i.call(this)||this;return e._grid=t,e}e.GridBaseOptions=o})),pe=(t(_e),_e.GridBaseOptions,e(function(t,e){Object.defineProperty(e,"__esModule",{value:!0});i=_e.GridBaseOptions,ne.__extends(n,i),n.prototype._doDispose=function(){i.prototype._doDispose.call(this)},_dp(n,"colCount",{get:function(){return this._colCount},set:function(t){(t=Math.max(0,t))!=this._colCount&&(this._colCount=t,this.grid)&&this._refreshOwner()}}),_dp(n,"rightCount",{get:function(){return this._rightCount},set:function(t){(t=Math.max(0,t))!=this._rightCount&&(this._rightCount=t,this.grid)&&this._refreshOwner()}}),_dp(n,"rowCount",{get:function(){return this._rowCount},set:function(t){(t=Math.max(0,t))!=this._rowCount&&(this._rowCount=t,this.$_resetItemSource())}}),_dp(n,"rightFixed",{get:function(){return this._rightFixed},set:function(t){t!=this._rightFixed&&(this._rightFixed=t,this._refreshOwner())}}),_dp(n,"exceptFromFiltering",{get:function(){return this._exceptFromFiltering},set:function(t){t!=this._exceptFromFiltering&&(this._exceptFromFiltering=t,this.$_resetItemSource())}}),_dp(n,"exceptFromSorting",{get:function(){return this._exceptFromSorting},set:function(t){t!=this._exceptFromSorting&&(this._exceptFromSorting=t,this.$_resetItemSource())}}),_dp(n,"editable",{get:function(){return this._editable},set:function(t){t!=this._editable&&(this._editable=t,this._refreshOwner())}}),_dp(n,"rowEditable",{get:function(){return this._rowEditable},set:function(t){t!=this._rowEditable&&(this._rowEditable=t,this._refreshOwner())}}),_dp(n,"resizable",{get:function(){return this._resizable},set:function(t){t!=this._resizable&&(this._resizable=t)}}),_dp(n,"rowResizable",{get:function(){return this._rowResizable},set:function(t){t!=this._rowResizable&&(this._rowResizable=t)}}),_dp(n,"movable",{get:function(){return this._movable},set:function(t){t!=this._movable&&(this._movable=t)}}),_dp(n,"colBarWidth",{get:function(){return this._colBarWidth},set:function(t){(t=Math.max(0,t))!=this._colBarWidth&&(this._colBarWidth=t,this._refreshOwner())}}),_dp(n,"rightBarWidth",{get:function(){return this._rightBarWidth},set:function(t){(t=Math.max(0,t))!=this._rightBarWidth&&(this._rightBarWidth=t,this._refreshOwner())}}),_dp(n,"rowBarHeight",{get:function(){return this._rowBarHeight},set:function(t){(t=Math.max(0,t))!=this._rowBarHeight&&(this._rowBarHeight=t,this._refreshOwner())}}),_dp(n,"mergeRows",{get:function(){return this._mergeRows},set:function(t){t!=this._mergeRows&&(this._mergeRows=t,this.grid._columnMergeRuleChanged(null))}}),n.prototype.$_resetItemSource=function(){var t=this.grid;t&&(t=t.itemSource)&&t.setFixed(this._rowCount,!this._exceptFromSorting,!this._exceptFromFiltering)},n.ROW_BAR_STYLE="rg-fixed-row-bar",n.ROW_BAR_CELL_STYLE="rg-fixed-row-bar-cell",n.COLUMN_BAR_STYLE="rg-fixed-column-bar";var i,o=n;function n(t){t=i.call(this,t)||this;return t._colCount=0,t._rightCount=0,t._rowCount=0,t._rightFixed=!0,t._exceptFromFiltering=!0,t._exceptFromSorting=!0,t._editable=!0,t._rowEditable=!0,t._resizable=!1,t._rowResizable=!1,t._movable=!1,t._colBarWidth=3,t._rightBarWidth=3,t._rowBarHeight=3,t._mergeRows=!1,t}e.FixedOptions=o})),fe=(t(pe),pe.FixedOptions,e(function(t,e){Object.defineProperty(e,"__esModule",{value:!0});i=_e.GridBaseOptions,ne.__extends(n,i),n.prototype._doDispose=function(){i.prototype._doDispose.call(this)},_dp(n,"refreshMode",{get:function(){return this._refreshMode},set:function(t){t!=this._refreshMode&&(this._refreshMode=t,this._changed())}}),_dp(n,"columnResizable",{get:function(){return this._columnResizable},set:function(t){this._columnResizable=t}}),_dp(n,"columnMovable",{get:function(){return this._columnMovable},set:function(t){this._columnMovable=t}}),_dp(n,"defaultColumnWidth",{get:function(){return this._defaultColumnWidth},set:function(t){t!=this._defaultColumnWidth&&(this._defaultColumnWidth=t,this._changed())}}),_dp(n,"fitStyle",{get:function(){return this._fitStyle},set:function(t){t!=this._fitStyle&&(this._fitStyle=t,this._changed())}}),_dp(n,"fitStyleIncludeFixed",{get:function(){return this._fitStyleIncludeFixed},set:function(t){t!=this._fitStyleIncludeFixed&&(this._fitStyleIncludeFixed=t,this._changed())}}),_dp(n,"rowResizable",{get:function(){return this._rowResizable},set:function(t){this._rowResizable=t}}),_dp(n,"eachRowResizable",{get:function(){return this._eachRowResizable},set:function(t){this._eachRowResizable=t}}),_dp(n,"autoClearHeights",{get:function(){return this._autoClearHeights},set:function(t){t!=this._autoClearHeights&&(this._autoClearHeights=t,this._changed())}}),_dp(n,"refCalcHeights",{get:function(){return this._refCalcHeights},set:function(t){t!=this._refCalcHeights&&(this._refCalcHeights=t)}}),_dp(n,"rowHeight",{get:function(){return this._rowHeight},set:function(t){t!=this._rowHeight&&(this._rowHeight=t,this._autoClearHeights&&this.grid&&this.grid.clearRowHeights(!1),this._changed())}}),_dp(n,"dataHeights",{get:function(){return this._dataHeights},set:function(t){t&&0<t.length?this._dataHeights=t.slice():this._dataHeights=null,this._changed()}}),_dp(n,"minTableRowHeight",{get:function(){return this._minTableRowHeight},set:function(t){(t=Math.max(n.MIN_TABLE_ROW_HEIGHT,t))!=this._minTableRowHeight&&(this._minTableRowHeight=t,this._changed())}}),_dp(n,"minRowHeight",{get:function(){return this._minRowHeight},set:function(t){(t=Math.max(n.MIN_TABLE_ROW_HEIGHT,t))!=this._minRowHeight&&(this._minRowHeight=t,this._changed())}}),_dp(n,"maxRowHeight",{get:function(){return this._maxRowHeight},set:function(t){(t=Math.max(0,t))!=this._maxRowHeight&&(this._maxRowHeight=t,this._autoClearHeights&&this.grid&&this.grid.clearRowHeights(!1),this._changed())}}),_dp(n,"minCellWidth",{get:function(){return this._minCellWidth},set:function(t){(t=Math.max(0,t))!=this._minCellWidth&&(this._minCellWidth=t,this._changed())}}),_dp(n,"hscrollBar",{get:function(){return this._hscrollBar},set:function(t){t!=this._hscrollBar&&(this._hscrollBar=t,this._changed())}}),_dp(n,"vscrollBar",{get:function(){return this._vscrollBar},set:function(t){t!=this._vscrollBar&&(this._vscrollBar=t,this._changed())}}),_dp(n,"liveScroll",{get:function(){return this._liveScroll},set:function(t){t!=this._liveScroll&&(this._liveScroll=t,this._changed())}}),_dp(n,"scrollDuration",{get:function(){return this._scrollDuration},set:function(t){this._scrollDuration=t}}),_dp(n,"hscrollDuration",{get:function(){return this._hscrollDuration},set:function(t){this._hscrollDuration=t}}),_dp(n,"hintDelay",{get:function(){return this._hintDelay},set:function(t){this._hintDelay=Math.max(t,0)}}),_dp(n,"rowChangeDelay",{get:function(){return this._rowChangeDelay},set:function(t){this._rowChangeDelay=t}}),_dp(n,"horzPageScroll",{get:function(){return this._horzPageScroll},set:function(t){this._horzPageScroll=t}}),_dp(n,"emptyMessage",{get:function(){return this._emptyMessage},set:function(t){t!=this._emptyMessage&&(this._emptyMessage=t,this.grid.setEmptyMessage(t))}}),_dp(n,"showEmptyMessage",{get:function(){return this._showEmptyMessage},set:function(t){t!=this._showEmptyMessage&&(this._showEmptyMessage=t,this._changed())}}),_dp(n,"focusVisible",{get:function(){return this._focusVisible},set:function(t){t!=this._focusVisible&&(this._focusVisible=t,this._changed())}}),_dp(n,"focusType",{get:function(){return this._focusType},set:function(t){t!==this.focusType&&(this._focusType=t,this._changed())}}),_dp(n,"rowFocusType",{get:function(){return this._rowFocusType},set:function(t){t!=this._rowFocusType&&(this._rowFocusType=t,this._changed())}}),_dp(n,"wheelEnabled",{get:function(){return this._wheelEnabled},set:function(t){this._wheelEnabled=t}}),_dp(n,"wheelScrollLines",{get:function(){return this._wheelScrollLines},set:function(t){this._wheelScrollLines=t}}),_dp(n,"wheelScrollHorz",{get:function(){return this._wheelScrollHorz},set:function(t){this._wheelScrollHorz=t}}),_dp(n,"wheelAccelDelay",{get:function(){return this._wheelAccelDelay},set:function(t){this._wheelAccelDelay=t}}),_dp(n,"wheelAccelScroll",{get:function(){return this._wheelAccelScroll},set:function(t){this._wheelAccelScroll=t}}),_dp(n,"wheelDeltaY",{get:function(){return this._wheelDeltaY},set:function(t){this._wheelDeltaY=t}}),_dp(n,"wheelEventPropagate",{get:function(){return this._wheelEventPropagate},set:function(t){this._wheelEventPropagate=t}}),_dp(n,"rightClickable",{get:function(){return this._rightClickable},set:function(t){this._rightClickable=t}}),_dp(n,"remergeWhenColumnMoved",{get:function(){return this._remergeWhenColumnMoved},set:function(t){this._remergeWhenColumnMoved=t}}),_dp(n,"editItemMerging",{get:function(){return this._editItemMerging},set:function(t){t!=this._editItemMerging&&(this._editItemMerging=t,this._changed())}}),_dp(n,"showInnerFocus",{get:function(){return this._showInnerFocus},set:function(t){t!=this._showInnerFocus&&(this._showInnerFocus=t,this._changed())}}),_dp(n,"toastZIndex",{get:function(){return this._toastZIndex},set:function(t){this._toastZIndex=t}}),_dp(n,"popupDropdownCount",{get:function(){return this._popupDropdownCount},set:function(t){this._popupDropdownCount=t}}),_dp(n,"selectionMode",{get:function(){return this._selectionMode},set:function(t){t!=this._selectionMode&&(this._selectionMode=t,this.grid.clearAddSelection())}}),_dp(n,"selectionStyle",{get:function(){return this._selectionStyle},set:function(t){t!=this._selectionStyle&&(this.grid.selections.clear(),this._selectionStyle=t,this._refreshOwner())}}),_dp(n,"selectionDisplay",{get:function(){return this._selectionDisplay},set:function(t){t!=this._selectionDisplay&&(this._selectionDisplay=t,this._refreshOwner())}}),_dp(n,"spanSelecting",{get:function(){return this._spanSelecting},set:function(t){t!=this._spanSelecting&&(this._spanSelecting=t,this._refreshOwner())}}),_dp(n,"rowHoverType",{get:function(){return this._rowHoverType},set:function(t){t!=this._rowHoverType&&(this._rowHoverType=t,this._refreshOwner())}}),_dp(n,"rowBlockType",{get:function(){return this._rowBlockType},set:function(t){t!=this._rowBlockType&&(this._rowBlockType=t,this._refreshOwner())}}),_dp(n,"rowBlockCallback",{get:function(){return this._rowBlockCallback},set:function(t){t!==this._rowBlockCallback&&(this._rowBlockCallback=t,this._rowBlockType!=ht.RowMaskType.NONE)&&this._refreshOwner()}}),_dp(n,"showEmptyTooltip",{get:function(){return this._showEmptyTooltip},set:function(t){this._showEmptyTooltip=t}}),_dp(n,"showChangeMarker",{get:function(){return this._showChangeMarker},set:function(t){t!=this._showChangeMarker&&(this._showChangeMarker=t,this._refreshOwner())}}),_dp(n,"scrollMessageCallback",{get:function(){return this._scrollMessageCallback},set:function(t){this._scrollMessageCallback=t}}),_dp(n,"showNativeEditButton",{get:function(){return this._showNativeEditButton},set:function(t){t!=this._showNativeEditButton&&(this._showNativeEditButton=t,this._changed())}}),_dp(n,"baseZindex",{get:function(){return this._baseZindex},set:function(t){this._baseZindex=Math.max(t,0)}}),_dp(n,"useAlternateRowStyle",{get:function(){return this._useAlternateRowStyle},set:function(t){t!=this._useAlternateRowStyle&&(this._useAlternateRowStyle=t,this._changed())}}),_dp(n,"useFocusClass",{get:function(){return this._useFocusClass},set:function(t){t!=this._useFocusClass&&(t||(this.grid.setFocusedClass(this.grid.focusedIndex,!1),this.grid.setFocusedRowClass(this.grid.focusedIndex,!1)),this._useFocusClass=t,this._changed())}}),_dp(n,"editButtonHeight",{get:function(){return this.grid.body.editButtonHeight},set:function(t){this.grid.body.editButtonHeight=t}}),_dp(n,"watchDisplayChange",{get:function(){return this._watchDisplayChange},set:function(t){t!=this._watchDisplayChange&&(this._watchDisplayChange=t,this.grid.setWatchTimer(t))}}),_dp(n,"syncGridHeight",{get:function(){return this._syncGridHeight},set:function(t){t!=this._syncGridHeight&&((this._syncGridHeight=t)!==ht.SyncGridHeight.ALWAYS&&this.grid.recallHeight(),this._changed())}}),_dp(n,"rowHeightCallback",{get:function(){return this._rowHeightCallback},set:function(t){this._rowHeightCallback=t,this.grid.clearRowHeights(!1),this._changed()}}),n.MIN_TABLE_ROW_HEIGHT=20;var i,o=n;function n(t){var e=i.call(this,t)||this;return e._refreshMode=ht.RefreshMode.ALL,e._columnResizable=!0,e._columnMovable=!0,e._minCellWidth=8,e._defaultColumnWidth=100,e._fitStyle=ht.GridFitStyle.NONE,e._rowResizable=!1,e._eachRowResizable=!1,e._autoClearHeights=!0,e._rowHeight=0,e._refCalcHeights=!0,e._dataHeights=null,e._minTableRowHeight=23,e._minRowHeight=23,e._maxRowHeight=0,e._hscrollBar=!0,e._vscrollBar=!0,e._liveScroll=!0,e._scrollDuration=0,e._hscrollDuration=0,e._hintDelay=0,e._rowChangeDelay=0,e._horzPageScroll=!1,e._emptyMessage="이 곳에 표시할 메시지를 DisplayOptions.emptyMessage 속성으로 설정합니다.",e._showEmptyMessage=!1,e._focusVisible=!0,e._focusType="layer",e._rowFocusType=ht.RowMaskType.NONE,e._wheelEnabled=!0,e._wheelScrollLines=3,e._wheelScrollHorz=16,e._wheelAccelDelay=0,e._wheelAccelScroll=null,e._wheelDeltaY=0,e._wheelEventPropagate=!0,e._rightClickable=!0,e._remergeWhenColumnMoved=!0,e._editItemMerging=!1,e._showInnerFocus=!0,e._toastZIndex=3e3,e._popupDropdownCount=0,e._selectionMode=W.SelectionMode.SINGLE,e._selectionStyle=W.SelectionStyle.BLOCK,e._selectionDisplay=W.SelectionDisplay.CELL,e._spanSelecting=!0,e._rowHoverType=ht.RowMaskType.NONE,e._rowBlockType=ht.RowMaskType.NONE,e._showEmptyTooltip=!1,e._showChangeMarker=!0,e._showNativeEditButton=!1,e._baseZindex=2e3,e._useAlternateRowStyle=!0,e._useFocusClass=!1,e._watchDisplayChange=!0,e._syncGridHeight=ht.SyncGridHeight.NONE,re.Utils.isMobile()&&(e._selectionStyle=W.SelectionStyle.NONE),(re.Utils.ieNine||re.Utils.ieTen)&&(e._focusType="line"),t.setWatchTimer(e._watchDisplayChange),e}e.DisplayOptions=o})),ge=(t(fe),fe.DisplayOptions,e(function(t,e){function i(t,e){void 0===e&&(e=0),this.width=t=void 0===t?0:t,this.height=e}Object.defineProperty(e,"__esModule",{value:!0}),i.empty=function(){return new i},i.create=function(t,e){return new i(t=void 0===t?0:t,e=void 0===e?0:e)},_dp(i,"isEmpty",{get:function(){return 0===this.width||0===this.height}}),i.prototype.clone=function(){return new i(this.width,this.height)},i.prototype.equals=function(t){return t===this||t&&this.width===t.width&&this.height===t.height},i.prototype.setEmpty=function(){return this.width=this.height=0,this},i.prototype.set=function(t,e){return this.width=t,this.height=e,this},i.prototype.round=function(){var t=this.clone();return t.width>>>=0,t.height>>>=0,t},i.prototype.toString=function(){return"{width: "+this.width+", height: "+this.height+"}"},i.EMPTY=new i,e.Size=i})),me=(t(ge),ge.Size,e(function(t,e){Object.defineProperty(e,"__esModule",{value:!0});i=pt.VisualElement,ne.__extends(n,i),n.prototype._doDispose=function(){i.prototype._doDispose.call(this)},_dp(n,"grid",{get:function(){for(var t=this.parent;t;){if(t instanceof pi.GridBase)return t;t=t.parent}return null}}),n.prototype.measure=function(t,e,i){return this._setClassName(this._dom),this._doMeasure(t,e,i)},n.prototype.layoutContent=function(t){this._doPrepareContent(t),this._doLayoutContent(t)},n.prototype._getCssSelector=function(){return""},n.prototype._getCssDisplay=function(){return"table"},n.prototype._doDraw=function(t){this._doRender(t)},n.prototype._doMeasure=function(t,e,i){return new ge.Size(e,i)},n.prototype._doPrepareContent=function(t){},n.prototype._doLayoutContent=function(t){},n.prototype._doRender=function(t){};var i,o=n;function n(t,e){return i.call(this,t,e=void 0===e?null:e)||this}e.GridElement=o,e.isItemElement=function(t){return t&&"itemIndex"in t};r=o,ne.__extends(a,r),a.prototype._doDispose=function(){this._model=null,r.prototype._doDispose.call(this)},_dp(a,"model",{get:function(){return this._model}}),a.prototype.setCursor=function(t){t!==this._cursor&&(this._cursor=t,this._dom.style.cursor=t)};var r,s=a;function a(t,e,i){t=r.call(this,t,i=void 0===i?null:i)||this;return t._ff=re.Utils.isFirefox,t._chromium=re.Utils.isChromium,t._textProp=re.Utils.TextProp,t._cursor="default",t._model=e,t}e.VisualObjectElement=s;l=o,ne.__extends(h,l),h.prototype._doDispose=function(){l.prototype._doDispose.call(this)},h.prototype.setMessage=function(t){this._span[re.Utils.TextProp]=t},h.prototype._createDom=function(t){var e=l.prototype._createDom.call(this,t),t=this._span=t.createElement("span");return e.appendChild(t),e},h.prototype._getCssSelector=function(){return"rg-empty-grid"},h.prototype._doDraw=function(t){this.setMessage(this.grid.displayOptions.emptyMessage)};var l,s=h;function h(t){return l.call(this,t,"emptyGridView")||this}e.EmptyGridElement=s})),ye=(t(me),me.GridElement,me.isItemElement,me.VisualObjectElement,me.EmptyGridElement,e(function(t,e){Object.defineProperty(e,"__esModule",{value:!0});o=me.VisualObjectElement,ne.__extends(n,o),n.prototype._doDispose=function(){this._tbody=this._thead=this._table=null,o.prototype._doDispose.call(this)},_dp(n,"tableRowCount",{get:function(){return this._tbody.childElementCount}}),n.prototype.getCellPoint=function(t,e){return(e=e||new he.Point).x+=t.offsetLeft,e.y+=t.offsetTop,e},n.prototype._getTableHidden=function(){return!0},n.prototype._getTableCaption=function(){return""},n.prototype._createDom=function(t){var e=t.createElement("div"),i=this._table=t.createElement("table"),o=(this._getTableHidden()&&i.setAttribute("aria-hidden","true"),i.setAttribute("role","grid"),i.createCaption()),o=(o.textContent="grid table ",o.style);return o.width=o.height="0px",o.overflow="hidden",o.setProperty("padding","0px","important"),o.boxSizing="border-box",(o=i.style).setProperty("table-layout","fixed","important"),o.setProperty("width","100%","important"),i.className="rg-table",e.appendChild(i),this._thead=t.createElement("thead"),i.appendChild(this._thead),this._tbody=t.createElement("tbody"),i.appendChild(this._tbody),e},n.prototype._initDom=function(t){o.prototype._initDom.call(this,t),t[ht.T_VIEW]=this[ht.T_HASH],t.style.overflow="hidden"},n.prototype._doPrepareContent=function(t){var e=this._getExplicitWidth(t);re.Utils.equalNumbers(e,this._explicitWidth)||(this._table.style.width=0<e?e+"px":"100%",this._explicitWidth=e),this._doPrepareTableExtents(t),this._doPrepareTable(t)},n.prototype._doDraw=function(t){this._doRender(t),this._doRenderTable(this._tbody)},n.prototype._getExplicitWidth=function(t){return NaN},n.prototype._doPrepareTableExtents=function(t){},n.prototype._doPrepareTable=function(t){this._doPrepareTableHead(t,this._thead),this._doPrepareTableRows(t,this._tbody)},n.prototype._doPrepareTableHead=function(t,e){for(var i,o=re.getDoc(e),n=(0==e.childElementCount?((i=o.createElement("tr")).setAttribute("role","row"),e.appendChild(i),this._getTableHidden()&&i.setAttribute("aria-hidden","true"),(s=i.style).setProperty("border","0px none","important")):i=e.lastElementChild,this._getCellCount(t));i.childElementCount<n;)(r=o.createElement("th")).scope="col",(s=r.style).setProperty("margin","0px","important"),s.setProperty("padding","0px","important"),s.setProperty("font-size","0px","important"),s.setProperty("line-height","0px","important"),s.height="0px",i.appendChild(r);for(;i.childElementCount>n;)i.removeChild(i.lastChild);for(var r,s,a=i.children,l=0;l<a.length;l++)(s=(r=a[l]).style).width=this._getCellWidth(t,l)+"px"},n.prototype._prepareTableRowCells=function(t,e){for(var i=this._getCellCount(t),o=re.getDoc(e),n=e.childElementCount;n<i;){var r=o.createElement("td"),s=(r.setAttribute("role","gridcell"),e.appendChild(r),this._prepareCellContent(r,n++));r.appendChild(s)}for(;e.childElementCount>i;)e.removeChild(e.lastChild);return e.childElementCount},n.prototype._isFixedHeight=function(t){return!0},n.prototype._getMinRowHeight=function(t){return t.minRowHeight},n.prototype._doPrepareTableRow=function(t,e,i,o){this._prepareTableRowCells(t,o);var n=this._isFixedHeight(t),r=o.children,s=this._isDataTable(),i=n?this._getTableRowHeight(t,i):this._getMinRowHeight(t),a=i-2+"px",t=o.style;o[ht.T_VIEW]=this[ht.T_HASH],o[ht.T_FIX]=n,o[ht.T_HEI]=n?i:0,s||n?t.setProperty("height",i+"px"):t.removeProperty("height"),t.display="";for(var l=0,h=r.length;l<h;l++){var d=r[l],u=(this._ff&&(d.style.height="100%"),d.firstElementChild),d=(u||(u=this._prepareCellContent(d,l),d.appendChild(u)),u.style),u=n?a:"";!n&&s&&d.removeProperty("height"),u!=d.maxHeight&&(d.maxHeight=u),"hidden"!==d.overflow&&(d.overflow="hidden")}},n.prototype._doRenderTable=function(t){for(var e=t.children,i=0;i<e.length;i++){var o=e[i];this._renderRow(o,i)}},n.prototype._renderRow=function(t,e){this._doDrawRow(e,t);for(var i=t.children,o=0;o<i.length;o++){var n=i[o];this._renderCell(n.lastElementChild,e,o)}},n.prototype._renderCell=function(t,e,i){this._doDrawCell(e,i,t)},n.prototype._prepareCellContent=function(t,e){return re.getDoc(t).createElement("div")},n.prototype._doDrawRow=function(t,e){},n.prototype._doDrawCell=function(t,e,i){},n.prototype._getTableRow=function(t,e){return this._tbody.children[e]},n.prototype._getTableRows=function(t,e,i){for(var o=[],n=0;n<i;n++)o.push(this._tbody.children[e+n]);return o},n.prototype._getTableCell=function(t,e){return this._tbody.children[t].children[e]},n.prototype.getCellContent=function(t,e){return this._tbody.children[t].children[e].firstElementChild},n.prototype.getContentAt=function(t){var e=t.grid.layoutManager,i=e.fixedItemCount,o=t.column?t.column.index:0,i=0<i?t.itemIndex<i?t.itemIndex:t.itemIndex-e.topIndex+1:t.itemIndex-e.topIndex;return this.getCellContent(i,o)};var o,i=n;function n(t,e,i){t=o.call(this,t,e,i=void 0===i?null:i)||this;return t._explicitWidth=NaN,t}e.TableBaseElement=i;r=i,ne.__extends(a,r),a.prototype._isDataTable=function(){return!1},a.prototype._doPrepareTableRows=function(t,e){for(var i=this._getTableRowCount(t),o=re.getDoc(e);e.childElementCount<i;){var n=o.createElement("tr");e.appendChild(n)}for(;e.childElementCount>i;)e.removeChild(e.lastChild);for(var r=e.children,s=0;s<i;s++)(n=r[s]).style.height=this._getTableRowHeight(t,s)+"px",this._doPrepareTableRow(t,s,s,n)},a.prototype._getTableRowCount=function(t){return 1};var r,s=a;function a(){return null!==r&&r.apply(this,arguments)||this}e.SimpleTableElement=s;l=i,ne.__extends(h,l),h.prototype._isDataTable=function(){return!0},h.prototype._getTrs=function(t){return 1},h.prototype._getTableRowCount=function(t){var e=t.fixedItemCount,t=e+t.itemCount;return t*this._trs+(0<e?1:0)},h.prototype.$_getTableIndex=function(t,e){var t=t.fixedItemCount,i=e*this._trs;return 0<t&&t<=e?1+i:i},h.prototype._getTableRow=function(t,e){t=this.$_getTableIndex(t,e);return this._tbody.children[t]},h.prototype._doPrepareTableRows=function(t,e){for(var i=t.$_getItems(),o=this._trs=this._getTrs(t),n=t.fixedItemCount,r=t.itemCount+n,s=this._trCount=this._getTableRowCount(t),a=re.getDoc(e);e.childElementCount<s;){var l=a.createElement("tr");l.setAttribute("role","row"),e.appendChild(l)}for(;e.childElementCount>s;)e.removeChild(e.lastChild);var h=e.children,d=0,u=0;if(0<n){for(d=0;d<n;d++)for(var c=0;c<o;c++,u++)this._doPrepareTableRow(t,d,u,h[u]);this.$_prepareFixedBar(t,h[u++])}for(;d<r&&u<s;d++)for(var _=i[d].isData?o:1,c=0;c<_&&u<s;c++,u++)this._doPrepareTableRow(t,d,u,h[u])},h.prototype.$_prepareFixedBar=function(t,e){for(var i=re.getWin(e),o=this._prepareTableRowCells(t,e),n=t.fixedBarHeight,r=e.style,s=(0<n?r.height=t.fixedBarHeight+"px":r.display="none",e.children),a=0;a<o;a++){var l=s[a];l instanceof i.HTMLTableCellElement&&(l.rowSpan=1,l.style.display=""),(l=s[a].firstElementChild)&&(l.style.maxHeight="0px",l.style.overflow="hidden")}return n},h.prototype._getTableRowHeight=function(t,e){return t.getTableRowHeight(e,1)},h.prototype._getCellContent=function(t){return t.firstElementChild},h.prototype._updateCellContent=function(t,e,i){this._doUpdateCellContent(t,e,this._getCellContent(i))},h.prototype._doUpdateCellContent=function(t,e,i){};var l,s=h;function h(){var t=null!==l&&l.apply(this,arguments)||this;return t._trCount=0,t._trs=1,t}e.DataTableElement=s})),ve=(t(ye),ye.TableBaseElement,ye.SimpleTableElement,ye.DataTableElement,e(function(t,e){Object.defineProperty(e,"__esModule",{value:!0});i=me.GridElement,ne.__extends(n,i),n.prototype._doDispose=function(){this._index&&this._index.dispose(),this._index=null,this._cellDom=re.Utils.detach(this._cellDom),i.prototype._doDispose.call(this)},_dp(n,"fixed",{get:function(){return this._fixed}}),_dp(n,"index",{get:function(){return this._index},set:function(t){_t.CellIndex.areEquals(this._index,t)||(this._index.assignFrom(t),this._changed())}}),_dp(n,"item",{get:function(){return this._index.item}}),n.prototype.updateCell=function(t,e,i){i!=this._cellDom&&(i&&this._clearCellDom(i),this._clearCellCache(),this._cellDom=i),this.index=e.index,this._doPrepareValue(t,e),this._doUpdateContent(t,e,this._cellDom)},n.prototype.removeCellDom=function(t){(t=void 0===t?!1:t)&&this._cellDom&&this._clearCellDom(this._cellDom),this._cellDom=null,this._clearCellCache()},n.prototype._createDom=function(t){return null},n.prototype._clearCellDom=function(t){t.innerHTML=""},n.prototype._clearCellCache=function(){},_dp(n,"valueColumn",{get:function(){return this._index.valueColumn}}),_dp(n,"dataColumn",{get:function(){return this._index.dataColumn}}),n.prototype._changed=function(){this.invalidate()},n.prototype._doPrepareValue=function(t,e){},n.prototype._doUpdateContent=function(t,e,i){},n.prototype._doLayoutContent=function(t){};var i,o=n;function n(t,e){t=i.call(this,t,e=void 0===e?null:e)||this;return t._fixed=!1,t._index=new _t.CellIndex,t}e.CellElement=o;r=o,ne.__extends(s,r),s.prototype._doPrepareValue=function(t,e){};var r,o=s;function s(t,e){return r.call(this,t,e=void 0===e?null:e)||this}e.ValueCellElement=o})),ft=(t(ve),ve.CellElement,ve.ValueCellElement,e(function(t,e){Object.defineProperty(e,"__esModule",{value:!0});i=at.TextCellRenderer,ne.__extends(r,i),_dp(r,"valueSeparator",{get:function(){return this._valueSeparator},set:function(t){t!=this._valueSeparator&&(this._valueSeparator=t,this._changed())}}),_dp(r,"type",{get:function(){return r.SERIES_TYPE}}),r.prototype._makeText=function(t,e){return e.getDisplayText(t,this._valueSeparator)||""},r.SERIES_TYPE="series";var i,o,n=r;function r(){var t=i.call(this)||this;return t._valueSeparator=",",t}function s(){return o.call(this)||this}e.SeriesTextCellRenderer=n,o=at.DataCellRenderer,ne.__extends(s,o),s.prototype._getValues=function(t){return t.value||[]};a=s,ne.__extends(l,a),l.interfaced=function(t){t=t.type;return!!t&&(t==d.TYPE||t==_.TYPE||t==g.TYPE)},_dp(l,"baseValue",{get:function(){return this._baseValue},set:function(t){t!=this._baseValue&&(this._baseValue=t,this._changed())}}),_dp(l,"firstStyle",{get:function(){return this._firstStyle},set:function(t){t!=this._firstStyle&&(this._firstStyle=t,this._changed())}}),_dp(l,"lastStyle",{get:function(){return this._lastStyle},set:function(t){t!=this._lastStyle&&(this._lastStyle=t,this._changed())}}),_dp(l,"highStyle",{get:function(){return this._highStyle},set:function(t){t!=this._highStyle&&(this._highStyle=t,this._changed())}}),_dp(l,"lowStyle",{get:function(){return this._lowStyle},set:function(t){t!=this._lowStyle&&(this._lowStyle=t,this._changed())}}),_dp(l,"belowStyle",{get:function(){return this._belowStyle},set:function(t){t!=this._belowStyle&&(this._belowStyle=t,this._changed())}}),_dp(l,"pointStyle",{get:function(){return this._pointStyle},set:function(t){t!=this._pointStyle&&(this._pointStyle=t,this._changed())}}),l.prototype._doInitContent=function(t){var e=re.getDoc(t),e=this._div=e.createElement("div");e.style.position="relative",e.style.height="100%",t.appendChild(e);t=(this._svg=Ut.SvgElement.createSVG(e)).style;t.position="absolute",t.left="0px",t.top="0px",t.width="100%",t.height="100%"},l.prototype._doRenderCell=function(t,e,i,o,n){this._div;var r=this._svg;r.setAttribute("class",this._getChartStyle()),this._values=this._getValues(e),Ut.SvgElement.renderSVG2(t,r,this.$_render)},l.prototype._getPoints=function(t,e,i){for(var o=t.length,n=[],r=i-e,s=0;s<o;s++){var a=t[s],l=5+s/(o-1)*90,a=10+(isNaN(a)||0==r?80:80*(1-(a-e)/r));n.push(l,a)}return n},l.prototype._getBasePoint=function(t,e,i){e-=t;return 0+(isNaN(i)||0==e?100:100*(1-(i-t)/e))};var a,n=l;function l(){var t=a.call(this)||this;return t._baseValue=NaN,t.$_render=function(t,e,i,o){var n=this._values;if(n&&n.length){for(var r=n.length,s=n[0],a=n[0],l=1;isNaN(s)&&l<r;)a=s=n[l++];for(;l<r;l++){var h=n[l];isNaN(h)||(h<s&&(s=h),a<h&&(a=h))}var d=isNaN(this._baseValue)?s:this._baseValue;isNaN(s)||this._renderChart(e,n,s,a,d)}}.bind(t),t}e.SparkChartRenderer=n;h=n,ne.__extends(u,h),u.interfaced=function(t){t=t.type;return!!t&&t==u.TYPE},_dp(u,"chartStyle",{get:function(){return this._chartStyle},set:function(t){t!=this._chartStyle&&(this._chartStyle=t,this._changed())}}),_dp(u,"curved",{get:function(){return this._curved},set:function(t){t!=this._curved&&(this._curved=t,this._changed())}}),_dp(u,"type",{get:function(){return u.TYPE}}),_dp(u,"styleName",{get:function(){return u.STYLE_NAME}}),u.prototype._getChartStyle=function(){return this._chartStyle},u.prototype._renderChart=function(t,e,i,o,n){for(var r,s=isNaN(n)?o:Math.max(o,n),n=isNaN(n)?i:Math.min(i,n),a=this._getPoints(e,n,s),l=e.length,h=0;h<l-1;h++)t.sline(null,a[2*h]+"%",a[2*h+1]+"%",a[2*(h+1)]+"%",a[2*(h+1)+1]+"%"),(r=this.pointStyle)&&(d=a[2*h],u=a[2*h+1],t.scircle(r,d+"%",u+"%","2"));if((r=this.firstStyle)&&(d=a[0],u=a[1],t.scircle(r,d+"%",u+"%","2")),(r=this.lastStyle)&&(d=a[2*(l-1)],u=a[2*(l-1)+1],t.scircle(r,d+"%",u+"%","2")),r=this.highStyle)for(h=0;h<l;h++)e[h]>=o&&(d=a[2*h],u=a[2*h+1],t.scircle(r,d+"%",u+"%","2"));if(r=this.lowStyle)for(var d,u,h=0;h<l;h++)e[h]<=i&&(d=a[2*h],u=a[2*h+1],t.scircle(r,d+"%",u+"%","2"))},u.TYPE="sparkline",u.STYLE="rg-sparkline-renderer",u.CHART_STYLE="rg-sparkline-renderer-chart",u.LAST_STYLE="rg-sparkline-renderer-last",u.HIGH_STYLE="rg-sparkline-renderer-high",u.LOW_STYLE="rg-sparkline-renderer-low",u.STYLE_NAME="rg-renderer "+u.STYLE;var h,d=u;function u(){var t=h.call(this)||this;return t._chartStyle=u.CHART_STYLE,t._curved=!1,t.lastStyle=u.LAST_STYLE,t.highStyle=u.HIGH_STYLE,t.lowStyle=u.LOW_STYLE,t}e.SparkLineRenderer=d;c=n,ne.__extends(p,c),p.interfaced=function(t){t=t.type;return!!t&&t==p.TYPE},_dp(p,"chartStyle",{get:function(){return this._chartStyle},set:function(t){t!=this._chartStyle&&(this._chartStyle=t,this._changed())}}),_dp(p,"barWidth",{get:function(){return this._barWidth},set:function(t){(t=Math.max(0,t))!=this._barWidth&&(this._barWidth=t,this._changed())}}),_dp(p,"type",{get:function(){return p.TYPE}}),_dp(p,"styleName",{get:function(){return p.STYLE_NAME}}),p.prototype._getChartStyle=function(){return this._chartStyle},p.prototype._renderChart=function(t,e,i,o,n){for(var r=isNaN(n)?o:Math.max(o,n),s=isNaN(n)?i:n,a=e.length,l=this._getBasePoint(s,r,n),h=100/a,d=0+h/2,u=r-s,c=h*this._barWidth,_=0;_<a;_++){var p,f=e[_];isNaN(f)||(p=f<=i&&this.lowStyle?this.lowStyle:o<=f&&this.highStyle?this.highStyle:f<n&&this.belowStyle?this.belowStyle:0==_&&this.firstStyle?this.firstStyle:_==a-1&&this.lastStyle?this.lastStyle:null,f=0==u?1:Math.max(1,Math.floor(100*(f-s)/u)),t.pbounds(p,d-c/2,l,c,-f)),d+=h}},p.TYPE="sparkcolumn",p.STYLE="rg-sparkcolumn-renderer",p.CHART_STYLE="rg-sparkcolumn-renderer-chart",p.LAST_STYLE="rg-sparkcolumn-renderer-last",p.HIGH_STYLE="rg-sparkcolumn-renderer-high",p.LOW_STYLE="rg-sparkcolumn-renderer-low",p.STYLE_NAME="rg-renderer "+p.STYLE;var c,_=p;function p(){var t=c.call(this)||this;return t._chartStyle=p.CHART_STYLE,t._barWidth=.8,t.lastStyle=p.LAST_STYLE,t.highStyle=p.HIGH_STYLE,t.lowStyle=p.LOW_STYLE,t}e.SparkColumnRenderer=_;f=n,ne.__extends(m,f),m.interfaced=function(t){t=t.type;return!!t&&t==m.TYPE},_dp(m,"chartStyle",{get:function(){return this._chartStyle},set:function(t){t!=this._chartStyle&&(this._chartStyle=t,this._changed())}}),_dp(m,"barWidth",{get:function(){return this._barWidth},set:function(t){(t=Math.max(0,t))!=this._barWidth&&(this._barWidth=t,this._changed())}}),_dp(m,"belowHeight",{get:function(){return this._belowHeight},set:function(t){(t=Math.max(0,t))!=this._belowHeight&&(this._belowHeight=t,this._changed())}}),_dp(m,"type",{get:function(){return m.TYPE}}),_dp(m,"styleName",{get:function(){return m.STYLE_NAME}}),m.prototype._getChartStyle=function(){return this._chartStyle},m.prototype._renderChart=function(t,e,i,o,n){for(var r=e.length,s=100/r,a=0+s/2,l=s*this._barWidth,h=0+100*(1-this._belowHeight),d=0;d<r;d++){var u,c=e[d];isNaN(c)||c==n||(u=null,c<n&&this.belowStyle&&(u=this.belowStyle),c=c<n?100:0,t.pbounds(u,Math.floor(a-l/2),Math.floor(c),Math.floor(l),Math.floor(h-c))),a+=s}},m.TYPE="sparkwinloss",m.STYLE="rg-sparkwinloss-renderer",m.CHART_STYLE="rg-sparkwinloss-renderer-chart",m.BELOW_STYLE="rg-sparkwinloss-renderer-below",m.STYLE_NAME="rg-renderer "+m.STYLE;var f,g=m;function m(){var t=f.call(this)||this;return t._chartStyle=m.CHART_STYLE,t._barWidth=.8,t._belowHeight=.4,t.belowStyle=m.BELOW_STYLE,t}e.SparkWinLossRenderer=g})),X=(t(ft),ft.SeriesTextCellRenderer,ft.SparkChartRenderer,ft.SparkLineRenderer,ft.SparkColumnRenderer,ft.SparkWinLossRenderer,e(function(t,e){Object.defineProperty(e,"__esModule",{value:!0});i=ve.ValueCellElement,ne.__extends(n,i),_dp(n,"text",{get:function(){return this._text}}),n.prototype._doUpdateContent=function(t,e,i){i[re.Utils.TextProp]=this._text};var i,o=n;function n(t,e){return i.call(this,t,e||"dataCellView")||this}e.DataCellElement=o;r=me.GridElement,ne.__extends(s,r),s.prototype._doDispose=function(){this._item=null,r.prototype._doDispose.call(this)},_dp(s,"itemIndex",{get:function(){return this._item.index}}),s.prototype.updateItem=function(t,e,i,o){this._item=t,this._domIndex=e,this._trs=i,this._fixedHeight=o},s.prototype.clearContent=function(t,e){},s.prototype._createDom=function(){return null},s.prototype.$_getDefaultRenderer=function(t,e){return at.TextCellRenderer.TYPE},s.prototype._changed=function(){this.invalidate()},s.prototype._getTableRow=function(t,e){return this.parent._getTableRow(t,this._domIndex)},s.prototype._getTableRows=function(t){return this.parent._getTableRows(t,this._domIndex,this._trs)},s.prototype._getCellContent=function(t){return this.parent.getCellContent(this._domIndex,t)};var r,o=s;function s(t,e){t=r.call(this,t,e=void 0===e?null:e)||this;return t._domIndex=-1,t._trs=1,t._fixedHeight=!1,t}e.ItemElement=o;var a,p="rg-expander-expanded",f="rg-expander-collapsed",o=(a=o,ne.__extends(l,a),l.isExpander=function(t){t=t.className;return"string"==typeof t&&(t==p||t==f||0<=t.indexOf("rg-tree-expanded")||0<=t.indexOf("rg-tree-collapsed"))},l.prototype.resetButtons=function(t,e,i){for(var o=t.layoutManager,n=this._trs,r=this.parent._cells,s=this._getFirstCell(o),a=this._getStartCell(o)-s,l=this._getEndCell(o)-s,h=e&&i&&e.head===i.head&&t.canMergeEditing(i),d=0;d<n;d++)for(var u=r[this._domIndex+d],c=a;c<=l;c++){var _=u[c],p=_.layout,f=p.firstColumn;!p.isProxy&&this._item.isDataRow&&f instanceof lt.ValueColumn&&(h||this.$_setButtons(t,_,_.cell.firstElementChild))}},l.prototype.moveCellButtons=function(t,e,i){var o,n,i=Math.min(i-e.item.index,e.rowSpan-1);this.grid.canMergeEditing(e)||i==e.buttonsOffset||(o=(n=e.rowIndex)+i,n=t.getTableItemBounds(n),o=t.getTableItemBounds(o),t=t.grid.body.buttonHeight,n=o.y-n.y,n=Math.floor(n+(o.height-t)/2),e.buttons.style.top=n+"px",e.buttonsOffset=i)},l.prototype.cellRefresh=function(t,e,i,o,n){var r=t.layoutManager;this._updateDataCell(t,r,e,i,o,n)},l.prototype.clearContent=function(t,e){for(var i=this.parent,o=this._getFirstCell(t),n=this._getStartCell(t)-o,r=this._getEndCell(t)-o,s=0;s<e;s++)for(var a=i._cells[this._domIndex+s],l=n;l<=r;l++){var h=a[l],d=h.renderer2;d&&d.clearContent(),h.setBorderBottom(1)}},l.prototype._doLayoutContent=function(t){for(var e,i=t.grid,o=this._trs,n=i.body,r=this.parent._cells,s=this._getFirstCell(t),a=this._getStartCell(t)-s,l=this._getEndCell(t)-s,s=i.focusedIndex,h=s&&s.itemIndex==this._item.index,d=s.column,s=this._item.index,u=(this._item instanceof q.MergedGroupFooter&&(l=Math.min(l,this._item.parent.level-1),0<=(s=(e=this._item.parent.firstDataItem).index))&&(e=null),_t.CellIndex.temp(i,s)),c=0;c<o;c++)for(var _=r[this._domIndex+c],p=a;p<=l;p++){var f,g=_[p],m=g.layout;m.isProxy||(f=m.firstColumn,g.focused=h&&d===f,g.mouseEntered=!1,u.layout=m,m=e?n.getHidden(u,e):n.getCellAt(this._item,f,!1),g.visible?(g.width=t.getCellWidth(p),g.height=t.getTableRowHeightFixed(g.trow,g.rowSpan),f instanceof lt.ValueColumn?this._updateDataCell(i,t,n,m,f,g):this._clearDataCell(g)):f instanceof lt.ValueColumn&&this._updateDataCell(i,t,n,m,f,g,!1))}},l.prototype._getFirstCell=function(t){return t._firstCell},l.prototype._getLastCell=function(t){return t._lastCell},l.prototype._getStartCell=function(t){return t.getStartCell()},l.prototype._getEndCell=function(t){return this._item instanceof q.MergedGroupHeader?Math.min(t.getStartCell()+this._item.groupLevel,t.getEndCell()):t.getEndCell()},l.prototype._createRenderer=function(t,e,i,o,n){return t.delegate.createRenderer(i,o,n)},l.prototype.$_getRenderer=function(t,e,i,o,n){var r,s,a,l,h=e.valueColumn.renderer,i=i.renderer,h=("string"==typeof i?a=i:i&&(a=i.type,l=i),"string"==typeof h?r=h:h&&(r=h.type,s=h),a||r||(o instanceof lt.SeriesColumn?ft.SeriesTextCellRenderer.SERIES_TYPE:this.$_getDefaultRenderer(t,e)));if(!n.renderer2||n.rendererChanged||n.renderer2.type!=h)return this._createRenderer(t,e,h,s,l);n.renderer2&&i&&n.renderer2.assignFrom(i)},l.prototype.$_getCellWidth2=function(t,e,i){return t.getCellWidth2(e,i)},l.prototype.$_clearAriaProperty=function(t){t.removeAttribute("aria-activedescendant"),t.removeAttribute("aria-haspopup")},l.prototype._renderDataCell=function(t,e,i,o,n,r){var s=n.cell,a=t.doc,l=!1,h=this.$_getRenderer(t,i,o,r,n),h=(h&&(n.renderer2&&n.renderer2.clearAndDispose(),n.renderer2=h,l=!(n.rendererChanged=!1)),s.firstElementChild),d=n.renderer2,u=((n.heighted=this._fixedHeight)&&(h.style.maxHeight=n.height-2+"px"),!l&&d&&d._dom!=h&&(d.clearContent(),l=!0),t.accessibility&&this.$_clearAriaProperty(s),this.$_setButtons(t,n,h),!1),c=n.merged&&t.findGroupItem(n.item,r.dataIndex),c=(c&&r.mergeGrouped&&t.rowGroup.$_isExpanderVisible(c)?((_=n.expander)||((_=n.expander=a.createElement("span")).style.position="absolute",_.style.display="inline-block",_.style.top="2px",_.style.left="2px",s.appendChild(_)),u=c.expanded,_.className=u?p:f):n.clearExpander(),d.styleName),_=(n.expander&&(c+=" "+(u?"rg-expanded-cell":"rg-collapsed-cell")),l?d.initContent(i._index,h,c):d.checkClassName(c)?(d.clearContent(),d.initContent(i._index,h,c)):d.index.assign(i._index),d.renderCell(t,i,n),e._showChangeMarker&&i.isValueChanged());_!=n.valueChanged&&(_?((u=n.changedMarker)||((u=n.changedMarker=a.createElement("div")).className="rg-changed-marker",u.style.position="absolute",u.style.display="block",u.style.top="0px",n.changedMarker=u),s.appendChild(u)):n.changedMarker&&n.valueChanged&&s.removeChild(n.changedMarker),n.valueChanged=_),gt.TableCell.addEdgeMark(o.edgeMark||r.edgeMark,n,a)},l.prototype._clearDataCell=function(t){t.setClassName(""),t.setEditor(null,null),t.button=ht.CellButton.NONE,t.error=void 0,t.editable=!1,t.readonly=!0,t.setBorderBottom(1);var e=t.cell.firstElementChild;this._fixedHeight&&(e.style.maxHeight=t.height-2+"px"),t.renderer2&&t.renderer2.clearContent(),t.valueChanged=!1},l.prototype._updateDataCell=function(t,e,i,o,n,r,s){void 0===s&&(s=!0);var a=i.getCellStyle(o,r.style.clear(),r.merged),l=((null==o.value||""==o.value)&&n instanceof lt.DataColumn&&n.placeHolder&&(a.styleName+=" "+(o.dataColumn.placeHolderStyleName||"rg-data-empty-cell")),a.style&&re.Utils.setStyle(a.style,r.cell),r.refreshFormatters(a),i.getCellFormatters(n,r),r.setEditor(a.editor,n.editor),r.button=n.button,r.error=o.error,r.errorLevel=o.errorLevel,_t.CellIndex.temp(t,r.item.index,r.dataColumn));if(r.editable=t.getEditableAt(l,r.style),r.readonly=t.getReadOnlyAt(l,r.style),r.editable&&!r.readonly||(a.styleName+=" rg-data-readonly-cell"),r.setClassName(a.styleName),!r.merged&&n instanceof lt.DataColumn&&n.layout.blanked&&!n.equalBlankLine)switch(o.getBlankState()){case ht.BlankState.HEAD:case ht.BlankState.BODY:r.setBorderBottom(0);break;case ht.BlankState.TAIL:case ht.BlankState.NONE:r.setBorderBottom(1)}else r.setBorderBottom(1);s?this._renderDataCell(t,i,o,a,r,n):r.renderer2&&(r.renderer2=r.renderer2&&r.renderer2.clearAndDispose())},l.prototype.$_getButtonVisible=function(t,e,i,o){if(o)return r=t.getIndex(e.item.index,e.dataColumn),o(t.handler,r.proxy(),e.focused,e.mouseEntered);var n=!0,o=e&&e.item,r=t.getIndex(t.focusedRow,e.dataColumn),s=e.merged?e.head.contains(t.focusedIndex):o.index===t.focusedRow&&e.dataColumn===t.focusedColumn,a=o.index===t.focusedRow,l=e.mouseEntered&&e.item.isDataRow,h=t.focusedItem&&t.focusedItem.isDataRow;switch(i){case ht.ButtonVisibility.ALWAYS:n=!e.mouseEntered&&!e.focused||e.item.isDataRow;break;case ht.ButtonVisibility.HIDDEN:n=!1;break;case ht.ButtonVisibility.VISIBLE:n=s&&h;break;case ht.ButtonVisibility.ROWFOCUSED:n=a?h:l;break;default:ht.ButtonVisibility.DEFAULT;n=s?h:l}return!a&&e.merged&&i===ht.ButtonVisibility.ROWFOCUSED?e.head.contains(t.focusedIndex)?h:e.head.contains(r)?e.mouseEntered?e.item.isDataRow:h:e.mouseEntered&&e.item.isDataRow:n},l.prototype.$_buttonWidth=function(t,e){var i,o=0;return o=e.button!=ht.CellButton.NONE&&(i=e.layout.getDataColumn(),this.$_getButtonVisible(t,e,i.buttonVisibility,i.buttonVisibleCallback))?t.body.cellButtonWidth:o},l.prototype.$_editButtonWidth=function(t,e){var i,o,n,r,s=0;return s=e.editable&&!e.readonly&&(o=(i=e.layout).getDataColumn(),n=e.editorType,n=t.delegate.getCellEditor(n),r=e.editor||o.editor,n.hasButton(t.displayOptions.showNativeEditButton,r))&&(r=!1,_t.CellIndex.equalsTo(t.focusedIndex,e.item.index,i)&&(r=!!n&&n.listing),(r=t.isEditing()&&e.contains(t.focusedIndex)&&t.canMergeEditing(e)&&0<e.editWidth?!0:r)||this.$_getButtonVisible(t,e,o.editButtonVisibility,null))?t.body.editButtonWidth:s},l.prototype.$_editButtonCount=function(t,e){e=e.editorType,t=t.delegate.getCellEditor(e);return t?t.buttonCount:0},l.prototype.$_editButtonVerti=function(t,e){if("number"===e.editorType)return null==(e=e.editor||e.dataColumn.editor||{}).direction||"horizontal"!==e.direction},l.prototype.$_errorWidth=function(t,e){return e.error?t.body.errorIconWidth:0},l.prototype.$_setButtons=function(t,e,i,o){var n,r,s,a,l=e.cell,h=t.doc,d=t.layoutManager,u=e.dataColumn,c=this.$_buttonWidth(t,e),_=this.$_editButtonWidth(t,e),p=this.$_errorWidth(t,e),f=_&&this.$_editButtonCount(t,e),g=_&&this.$_editButtonVerti(t,e),m=t.canMergeEditing(e),u=u&&(u.buttonVisibility===ht.ButtonVisibility.ROWFOCUSED||u.editButtonVisibility===ht.ButtonVisibility.ROWFOCUSED),y=0,v=0,C=void 0;0<c&&v++,0<_&&(v+=f),0<p&&v++,e.merged&&(l=(e=e.head).cell,i=e.cell.firstElementChild),0<v?((C=e.buttons)||((C=e.buttons=h.createElement("div")).className="rg-cell-buttons",C.style.position="absolute",C.style.overflow="hidden",l.appendChild(C)),n=t.body.buttonHeight,r=e.height,s=-100,(a=C.style).height=n+"px",a.right="0px",e.merged?(S=e.rowIndex,k=d.getTableItemBounds(S),E=S,I=t.getIndex(t.focusedRow,e.dataColumn),!m&&(e.contains(t.focusedIndex)||u&&e.contains(I)||o)?t.focusedRow<t.topIndex?(s=-100,e.buttonsOffset=-1):t.focusedRow>t.topIndex+d.itemCount?(s=1e4,e.buttonsOffset=-1):(E=S+(t.focusedRow-e.item.index),s=(u=d.getTableItemBounds(E)).y-k.y,s=Math.floor(s+(u.height-n)/2),e.buttonsOffset=E-S):(s=e.cell.getBoundingClientRect().height,s=Math.floor((s-n)/2),e.buttonsOffset=m?0:-1)):(s=Math.floor((r-n)/2),e.buttonsOffset=0),a.top=Math.floor(s)+"px",y=C.childElementCount):e.buttons&&(e.clearButtons(),i.style.maxWidth="");for(var w=y;w<v;w++){var x,b=h.createElement("span");(x=b.style).position="absolute",x.display="inline-block",x.height="100%",x.top="0px",C.appendChild(b)}for(w=y;v<w;w--)C.removeChild(C.lastElementChild);var I,E,S,R=0<v?C.children:null,v=0;if(0<c?(e.cellButton=R[v++],(x=e.cellButton.style).right="0px",x.width=c+"px",e.resetButtonClass(),t.accessibility&&(l.removeAttribute("aria-haspopup"),I=e.renderer2)&&e.button==ht.CellButton.POPUP&&!I.itemClickable&&l.setAttribute("aria-haspopup","true"),e.buttonWidth=c):(e.cellButton=null,e.buttonWidth=0),0<_){e.editButtons=[];for(var o=e.editorType,T=t.delegate.getCellEditor(o),w=0;w<f;w++){var D=R[v++];T.setButtonStyle(D,w,g,c,_)||((x=D.style).right=c+_*w+"px",x.width=_+"px",e.resetEditClass(D,w)),e.editButtons.push(D)}e.editWidth=_*(g?1:f);var k=_t.CellIndex.equalsTo(t.editController.editIndex,e.item.index,e.layout),u=t.canMergeEditing(e)&&e.contains(t.editController.editIndex);this.$_setButtonZIndex(t,e,t.isEditing()&&(k||u),T)}else e.editButtons=null,e.editWidth=0;0<p?(e.errorIcon=R[v],(x=e.errorIcon.style).right=c+e.editWidth+"px",x.width=p+"px",e.resetErrorClass(),e.errorWidth=p):(e.errorIcon=null,e.errorWidth=0),C?(E=e.buttonWidth+e.editWidth+e.errorWidth,S=this.$_getCellWidth2(d,e.tcol,e.colSpan),a.width=E+"px",i.style.maxWidth=S-E+"px"):i.style.maxWidth=""},l.prototype.$_setButtonZIndex=function(t,e,i,o){var e=e.merged?e.head:e,n=t.displayOptions.baseZindex;function r(t){!i||o&&o.native?t.removeProperty("z-index"):t.zIndex=String(n+1)}e.editButtons&&e.editButtons.forEach(function(t){r(t.style)}),e.cellButton&&r(e.cellButton.style),e.errorIcon&&r(e.errorIcon.style)},l);function l(t,e){return a.call(this,t,e=void 0===e?null:e)||this}e.RowElement=o;h=o,ne.__extends(u,h),u.prototype._getFirstCell=function(t){return this._getStartCell(t)},u.prototype._getLastCell=function(t){return this._getEndCell(t)},u.prototype._getStartCell=function(t){return 0},u.prototype._getEndCell=function(t){return t.fixedCellCount-1},u.prototype.$_getCellWidth2=function(t,e,i){return t.getFixedCellWidth2(e,i)};var h,d=u;function u(){return null!==h&&h.apply(this,arguments)||this}e.FixedRowElement=d;c=o,ne.__extends(_,c),_.prototype._getFirstCell=function(t){return this._getStartCell(t)},_.prototype._getLastCell=function(t){return this._getEndCell(t)},_.prototype._getStartCell=function(t){return t.cellCount-t.rightCellCount},_.prototype._getEndCell=function(t){return t.cellCount-1},_.prototype.$_getCellWidth2=function(t,e,i){return t.getRightCellWidth2(e,i)};var c,d=_;function _(){return null!==c&&c.apply(this,arguments)||this}e.RightRowElement=d})),gt=(t(X),X.DataCellElement,X.ItemElement,X.RowElement,X.FixedRowElement,X.RightRowElement,e(function(t,e){Object.defineProperty(e,"__esModule",{value:!0});var a="rowspan",l="colspan",i=(o.addEdgeMark=function(t,e,i){if(t!==e.edgeMark){var o=e.cell;if(t){var n=(n=e.edgeMarker)||(e.edgeMarker=i.createElement("div"));switch(t){case"leftTop":n.className="rg-edgemarker-lefttop";break;case"leftBottom":n.className="rg-edgemarker-leftbottom";break;case"rightTop":n.className="rg-edgemarker-righttop";break;case"rightBottom":n.className="rg-edgemarker-rightbottom";break;default:n.className=t}o.appendChild(n)}else e.edgeMarker&&o.removeChild(e.edgeMarker);e.edgeMark=t}},o.prototype.dispose=function(){this.cell=null},o.prototype.setColSpan=function(t){return this.colSpan!=t&&(1<(this.colSpan=t)?this.cell.colSpan=t:this.cell.removeAttribute(l)),this},o.prototype.setRowSpan=function(t){return this.rowSpan!=t&&(1<(this.rowSpan=t)?this.cell.rowSpan=t:this.cell.removeAttribute(a)),this},o.prototype.setVisible=function(t){return t!==this.visible&&(this.visible=t,this.cell.style.display=t?"":"none"),this},o.prototype.set=function(t,e,i){return this.colSpan!=t&&(1<(this.colSpan=t)?this.cell.colSpan=t:this.cell.removeAttribute(l)),this.rowSpan!=e&&(1<(this.rowSpan=e)?this.cell.rowSpan=e:this.cell.removeAttribute(a)),this.visible!==i&&(this.visible=i,this.cell.style.display=i?"":"none"),this},o.prototype.clear=function(t){return 1<this.colSpan&&(this.colSpan=1,this.cell.removeAttribute(l)),1<this.rowSpan&&(this.rowSpan=1,this.cell.removeAttribute(a)),this.visible!==t&&(this.visible=t,this.cell.style.display=t?"":"none"),this},o.prototype.isClickableElt=function(t){return!1},o);function o(t){this.cell=null,this.layout=null,this.visible=void 0,this.spanned=!1,this.rowSpan=1,this.colSpan=1,this.className="",this.width=0,this.height=0,this.text=void 0,this.cell=t}e.TableCell=i;n=i,ne.__extends(r,n),r.prototype.dispose=function(){n.prototype.dispose.call(this),this.renderer2=this.renderer2&&this.renderer2.clearAndDispose(),this.item=null,this.editButtons&&this.editButtons.forEach(function(t){re.Utils.detach(t)}),this.buttons=this.cellButton=this.editButtons=this.errorIcon=null,this.changedMarker=this.expander=null,this.layout=null},_dp(r,"dataColumn",{get:function(){return this.layout.getDataColumn()}}),r.prototype.reset=function(t){return this.renderer2=this.renderer2&&this.renderer2.clearAndDispose(),this.editButtons&&this.editButtons.forEach(function(t){re.Utils.detach(t)}),this.buttons=this.cellButton=this.editButtons=this.errorIcon=null,this.changedMarker=this.expander=null,this.cell=t,this},r.prototype.span=function(t){this.spanned=!0,this.spanHead=t,this.clear(!1)},r.prototype.refreshFormatters=function(t){var e;this.textFormatter=null,this.numberFormatter=null,this.datetimeWriter=null,this.booleanFormatter=null,!(e=t.textFormat)||this.textFormatter&&this.textFormatter.format==e||(this.textFormatter=Xt.TextFormatter.getFormatter(e)),!(e=t.numberFormat)||this.numberFormatter&&this.numberFormatter.format==e||(this.numberFormatter=Y.DecimalFormatter.getFormatter(e)),!(e=t.datetimeFormat)||this.datetimeWriter&&this.datetimeWriter.format==e||(this.datetimeWriter=z.DateTimeWriter.getFormatter(e)),!(e=t.booleanFormat)||this.booleanFormatter&&this.booleanFormatter.format==e||(this.booleanFormatter=K.BooleanFormatter.getFormatter(e)),this.prefix=t.prefix,this.suffix=t.suffix},r.prototype.setClassName=function(t){return t!=this.className&&(this.cell.className=this.className=t,!0)},r.prototype.setEditor=function(t,e){this.editor=t,this.editorType=L.CellEditor.getEditorType2(t,e)},r.prototype.setBorderBottom=function(t){t!=this.borderBottom&&(this.borderBottom=t,this.cell.style.borderBottom=0==t?"0":"")},r.prototype.setMarginRight=function(t,e){e!=this.marginRight&&(this.marginRight=e,t.style.marginRight=e<=0?"":e+"px")},r.prototype.isCellButton=function(t){return t===this.cellButton},r.prototype.isEditButton=function(e){return this.editButtons&&this.editButtons.some(function(t){return t===e})},r.prototype.isButton=function(t){return t===this.cellButton||this.isEditButton(t)},r.prototype.resetButtonClass=function(){var t=this.button==ht.CellButton.POPUP?"rg-button-popup":"rg-button-action";this.cellButton.className=t},r.prototype.resetEditClass=function(t,e){var i;switch(this.editorType){case"date":case"btdate":case"ndate":i="rg-button-calendar";break;default:i="rg-button-list"}t.className=i},r.prototype.resetErrorClass=function(){var t;switch(this.errorLevel){case ht.ValidationLevel.ERROR:t="rg-validation-error";break;case ht.ValidationLevel.WARNING:t="rg-validation-warning";break;case ht.ValidationLevel.INFO:t="rg-validation-info";break;default:t=""}this.errorIcon.className=t},r.prototype.clearExpander=function(){this.expander&&(this.cell.removeChild(this.expander),this.expander=null)},r.prototype.clearButtons=function(){this.buttons&&(this.cell.removeChild(this.buttons),this.buttons=null,this.errorWidth=this.buttonWidth=this.editWidth=0)},r.prototype.getEditIndex=function(t){var e=this.item.index;return this.merged&&(e+=this.buttonsOffset),t.set(e,this.layout.firstColumn)},r.prototype.contains=function(t){var e,i;return t.layout===this.layout&&(t=t.itemIndex,i=(e=this.item.index)+this.rowSpan/this.layout._dspan,e<=t)&&t<i},r.prototype.toString=function(){return"Body Cell("+this.layout.col+", "+this.item.index+", "+this.layout.row+")"};var n,x=r;function r(t){var e=n.call(this,t)||this;return e.cellButton=null,e.editButtons=null,e.errorIcon=null,e.buttons=null,e.changedMarker=null,e.expander=null,e.item=null,e.grouped=!1,e.rowIndex=-1,e.rows=0,e.trow=-1,e.tcol=-1,e.head=null,e.merged=!1,e.spanHead=null,e.heighted=!1,e.buttonsOffset=0,e.template=void 0,e.marginRight=-1,e.style=new lt.ColumnStyle,e.rendererChanged=!1,e.valueChanged=!1,e.mouseEntered=!1,e.focused=!1,e.borderBottom=1,e.readonly=void 0,e.editable=void 0,e.error=void 0,e.errorLevel=ht.ValidationLevel.IGNORE,e.errorWidth=0,e.button=ht.CellButton.NONE,e.buttonWidth=0,e.editWidth=0,e.edgeMarker=null,e.text=t[re.Utils.TextProp],e}e.BodyTableCell=x;u=ye.DataTableElement,ne.__extends(s,u),s.prototype._doDispose=function(){for(var t=0;t<this._cells.length;t++)for(var e=this._cells[t],i=0;i<e.length;i++)e[i].dispose(),e[i]=null;this._cells=null,u.prototype._doDispose.call(this)},_dp(s,"fixed",{get:function(){return!1}}),_dp(s,"rightFixed",{get:function(){return!1}}),_dp(s,"firstCell",{get:function(){return this._cells[0][0]}}),_dp(s,"lastCell",{get:function(){return this._cells[this.tableRowCount-1][0]}}),_dp(s,"spanned",{get:function(){return this._spanned}}),s.prototype.bodyCellByCell=function(t){for(var e=t.parentElement[ht.T_ROW],i=0;i<this._cells.length;i++){var o=this._cells[i],n=o[0].item;if(n&&n.index==e)for(var r=0;r<o.length;r++){var s=o[r];if(s&&s.cell===t)return s}}},s.prototype.bodyCellAt=function(t){for(var e=0;e<this._cells.length;e++){var i=this._cells[e],o=i[0].item;if(o&&o.index==t.itemIndex)for(var n=0;n<i.length;n++){var r=i[n];if(r&&r.layout===t.layout)return r}}},s.prototype.layoutByCell=function(t){t=this.bodyCellByCell(t);return t&&t.layout},s.prototype.columnByCell=function(t){t=this.bodyCellByCell(t);return t&&t.layout&&t.layout._columnObj},s.prototype.cellByLayout=function(t,e,i){void 0===i&&(i=0);for(var o=e=void 0===e?0:e;o<this._cells.length;o++)for(var n=this._cells[o],r=i;r<n.length;r++){var s=n[r];if(s&&s.layout===t)return s}},s.prototype.getCellRectAt=function(t,e,i){e=this.getCellAt(t,e);return e&&this.getCellRect(t,e,i)},s.prototype.getCellRect=function(t,e,i){var o=(e=i&&e.merged?e.head:e).layout,n=e.trow,r=e.rowSpan,i=i||1<r&&r==o.getDataSpan()?r:e.item.isData?o._dspan:1,r=t.getTableRowBounds(n,i),o=e.tcol,n=e.colSpan;return this.fixed?(r.x=t.getFixedCellPoint(o),r.width=t.getFixedCellWidth2(o,n)):this.rightFixed?(r.x=t.getRightCellPoint(o),r.width=t.getRightCellWidth2(o,n)):(r.x=t.getCellPoint(o),r.width=t.getCellWidth2(o,n)),r},s.prototype.getRowView=function(t){for(var e=0,i=this.childCount;e<i;e++){var o=this.getChild(e);if(o._item===t)return o}},s.prototype.getRowIndex=function(t){return this._cells[t][0].item.index},s.prototype.getViewIndex=function(t){return this._cells[t][0].rowIndex},s.prototype.cleanRows=function(t,e){this.$_cleanRowViews(t),this.$_cutTailBodyCells(e),this.$_cleanTableRows(e)},s.prototype.getCheckedLayout=function(t){return t=t.spanned?this.getUpperOf(t):t},s.prototype.getLowerOf=function(t){for(var e=this._cells,i=t.trow,o=t.tcol,n=i+1;n<e.length;n++){var r=e[n][o];if(!r.spanned)return r;if(r.spanHead.trow===r.trow)return r.spanHead}},s.prototype.isBottomCell=function(t){for(var e=this._cells,i=t.rowIndex,o=t.trow,n=t.tcol,r=o+1;r<e.length;r++){var s=e[r][n];if(s.rowIndex!=i)break;if(!s.spanned||s.spanHead.trow===s.trow)return!1}return!0},s.prototype.getUpperOf=function(t){for(var e=this._cells,i=t.trow,o=t.tcol,n=i-1;0<=n;n--){var r=e[n][o];if(!r.spanned)return r;if(r.spanHead.trow===r.trow)return r.spanHead}},s.prototype.isTopCell=function(t){for(var e=this._cells,i=t.rowIndex,o=t.trow,n=t.tcol,r=o-1;0<=r;r--){var s=e[r][n];if(s.rowIndex!=i)break;if(!s.spanned||s.rowIndex===t.rowIndex&&s.trow!==t.trow&&s.layout.source)return!1}return!0},s.prototype.getNextVisibleCell=function(t){for(var e=this.bodyCellAt(t);e&&e.spanned;){if(!t.next())return!1;e=this.bodyCellAt(t)}return null!=e},s.prototype.getPrevVisibleCell=function(t){for(var e=this.bodyCellAt(t);e&&e.spanned;){if(!t.prev())return!1;e=this.bodyCellAt(t)}return null!=e},s.prototype.tdClone=function(t){var e=this.grid;if(t=t&&e.isValid(t)&&this.getCellAt(e.layoutManager,t)){var i=(t=t.merged?t.head:t).cell;if(r=i.parentElement){var o=i.cloneNode(!1),n=(o.appendChild(i.firstElementChild.cloneNode(!1)),o.style.display="none",t.rendererChanged=!0,r.insertBefore(o,i.nextElementSibling),t.reset(o),o.setAttribute("tabindex","0"),[]),r=this._table;if(re.Utils.isIE)for(;r&&r!==e.container._containerDom;)n.push({top:r.scrollTop,left:r.scrollLeft}),r=r.parentElement;if(o.style.display="",o.focus({preventScroll:!0}),re.Utils.detach(i),r=this._table,re.Utils.isIE)for(;r&&r!==e.container._containerDom;){var s=n.shift();s&&s.top!==r.scrollTop&&(r.scrollTop=s.top),s&&s.left!==r.scrollLeft&&(r.scrollLeft=s.left),r=r.parentElement}}else i.focus()}},s.prototype.refreshTdFocused=function(t,e){var i,o=this.grid,n=t&&o.isValid(t)&&this.getCellAt(o.layoutManager,t);function r(t){var e=t.cell;e&&(i.forEach(function(t){t!==e&&t.removeAttribute("tabindex")}),e.setAttribute("tabindex","0"),e.focus({preventScroll:!0}))}n&&(n=n.merged?n.head:n,o=this._tbody,i=Array.prototype.slice.call(o.querySelectorAll("td")),e?r.call(this,n):setTimeout(function(){r.call(this,n)}.bind(this),15))},s.prototype._doAttached=function(t){var e=this._table;e&&e.setAttribute("role",this.grid.isTree()?"treegrid":"grid")},s.prototype._getCssSelector=function(){return"rg-body"},s.prototype._getTableHidden=function(){return!1},s.prototype._getTableCaption=function(){var t=this.grid;return t&&t.accessibility&&t.WaiOptions&&t.WaiOptions.getDescription()||""},s.prototype._isFixedHeight=function(t){return!t.isAutoRowHeights()},s.prototype._getTrs=function(t){return t.trs},s.prototype._getTableRowCount=function(t){var e=t.fixedItemCount,i=this.grid,o=this._trs;if(t.syncHeight()){for(var n=0,r=0,s=this.grid.itemCount;r<s;r++)n+=i.getItem(r).isData?o:1;return n+(e?1:0)}if(t.isAutoRowHeights())return(s=Math.max(0,Math.ceil(t._itemsBounds/t.grid.displayOptions.minTableRowHeight)+this._trs-1))+(t.grid.displayOptions.refCalcHeights?5:0);if(t.isRowGrouped()){for(var a=e+t.itemCount,n=0,l=0;l<a;l++)n+=t.getItem(l).isData?o:1;return n+=e?1:0}return u.prototype._getTableRowCount.call(this,t)},s.prototype.$_getTableIndex=function(t,e){var i=t.fixedItemCount;if(i<=e&&t.isRowGrouped()){var o=this._trs,n=i*o;0<i&&n++;for(var r=i;r<e;r++)t.getItem(r).isData?n+=o:n++;return n}return n=e*this._trs,0<i&&i<=e?n+1:n},s.prototype._prepareCellContent=function(t,e){return this.grid.doc.createElement("div")},s.prototype._doPrepareTableHead=function(t,e){u.prototype._doPrepareTableHead.call(this,t,e);this._table.caption.innerHTML=this._getTableCaption();for(var i=this._getFirstCell(t),o=this._getLastCell(t)-i+1,n=t.cellLayouts._dataCells,r=0;r<1;r++)for(var s=n[r],a=e.children[r],l=0;l<o;l++){var h=(h=s[l+i]).isProxy?h.source:h,d=a.children[l];h&&d&&(d[re.Utils.TextProp]=h.header.getDisplayText()||h.firstColumn.header.displayText)}},s.prototype._doMeasure=function(t,e,i){return this._spanned=!1,new ge.Size},s.prototype.$_refreshRowCells=function(t,e,i,o,n,r,s){for(var a=this._cells,l=s.children,h=this._getFirstCell(t),d=this._getLastCell(t)-h+1,u=a.length,c=o+r;u<c;u++)a.push([]);for(var _=0;_<r;_++){for(var p=a[o],f=l[o],g=(this.grid.accessibility&&(e?(f.removeAttribute("aria-hidden"),f.setAttribute("aria-rowindex",(e.index+2).toString())):(f.setAttribute("aria-hidden","true"),f.removeAttribute("aria-rowindex"))),this._ghostStyle&&re.Utils.setStyle(this._ghostStyle,f),f.children),m=n[_],y=0;y<d;y++){var v=g[y],C=m[y+h],w=p[y];w?w.cell!==v?w.reset(v):w.layout!==C&&(w.rendererChanged=!0,w.layout=C,w.clear(!0)):(w=p[y]=new x(v)).layout=C,w.spanned=!1,w.item=e,w.rowIndex=i,w.trow=o,w.tcol=y}o++;for(y=d;y<p.length;y++)re.Utils.isDebugging()&&p[y],p[y].dispose();p.length=d}},s.prototype.layoutRow=function(t,e,i,o,n){function r(t,e){var i,o=this._ghostStyle=this._ghostStyle||{};for(i in t)o[i]=void 0;re.Utils.setStyle(t,e)}var s,a=t.lm,l=t.fixedItemCount,h=this.model,d=a.cellLayouts._dataCells,u=this._tbody.rows,c=n.isData?this._trs:1,_=(this.$_refreshRowCells(a,n,i,o,d,c,this._tbody),this.childCount<=i?(s=this.$_borrowView(n),this.addChild(s)):s=this.getChild(i),this.$_setRowCellsDisplay(a,t,e,this._cells,n,i,o,c),n.index),d=u[o];if(d.style.display="",d[ht.T_ROW]=_,d[ht.T_IDX]=o,s.updateItem(n,o,c,this._isFixedHeight(a)),n.isDataRow||n instanceof q.MergedGroupHeader){var t=a.getItemBounds(i),p=(t.width=this.width,s.setRect(t),h.getRowStyle(n,_<l)),f=p.styleName;if(n.isDataRow){n.setEditable(p.editable,p.readOnly);for(var g=1;g<this._trs;g++)(m=u[o+g])[ht.T_IDX]=o+g,m[ht.T_ROW]=_,re.Utils.setClassName(m,f),p.style&&r.call(this,p.style,m)}s.layoutContent(a),re.Utils.setClassName(d,f),p.style&&r.call(this,p.style,d)}else if(n.isData){for(var m,g=1;g<this._trs;g++)(m=u[o+g])[ht.T_IDX]=o+g,m[ht.T_ROW]=_;s.clearContent(a,1),n instanceof q.MergedGroupFooter&&s.layoutContent(a)}else s.clearContent(a,1)},s.prototype.layoutFixedBar=function(t,e){var i=t.cellLayouts._dataCells,o=this._tbody,n=o.rows[e],r=this.$_prepareFixedBar(t,n),s=t.grid.hoveredCell;s&&s.trow==e&&s.rowIndex==t.fixedItemCount&&t.grid.$_setHoveredCell(null,-1),n[ht.T_IDX]=e,n[ht.T_ROW]=-99,n.style.display="",re.Utils.setClassName(n,pe.FixedOptions.ROW_BAR_STYLE),this.$_refreshRowCells(t,null,-1,e,i,1,o),this.$_setFixedBarCellsDisplay(t,this._cells,e);for(var a=0,l=this._cells[e];a<l.length;a++){var h=l[a];h.className="",h.clearExpander(),h.clearButtons()}return r},s.prototype._doRender=function(t){},s.prototype._getCellCount=function(t){return t.cellCount-t.fixedCellCount-t.rightCellCount},s.prototype._getCellWidth=function(t,e){return t.getCellWidth(e)},s.prototype._getTableRowHeight=function(t,e){return t.getTableRowHeight(e,1)},s.prototype._doDrawCell=function(t,e,i){},s.prototype.getCellAt=function(t,e){var i=e.layout,o=t.fixedItemCount,n=t.topIndex,r=e.itemIndex;if((0<o&&r<o||n<=r&&o<=r-n&&r-n<o+t.itemCount)&&(o<=r&&(r-=n),(r=this.$_getTableIndex(t,r))<this._cells.length))for(var s=0;s<this._trs;s++){var a=this._cells[r+s];if(a)for(var l=0;l<a.length;l++){var h=a[l];if(h&&h.layout===i)return h}}return null},s.prototype.getCellView=function(t,e){t=this.getCellAt(t,e);return t&&t.cell},s.prototype.spanRight=function(t,e){e&&(t=(t=this.getCellAt(t,e))&&(t.spanned?t.spanHead:t))&&(e.layout=this._cells[t.trow][t.tcol+t.colSpan-1].layout)},s.prototype.spanHead=function(t,e){e&&(t=(t=this.getCellAt(t,e))&&(t.spanned?t.spanHead:t))&&(e.layout=t.layout)},s.prototype._getFirstCell=function(t){return t._firstCell},s.prototype._getLastCell=function(t){return t._lastCell},s.prototype._getStartCell=function(t){return t.getStartCell()},s.prototype._getEndCell=function(t){return t.getEndCell()},s.prototype.$_removeView=function(t){t=this.removeChildAt(t);t.validate(),this._itemViews.push(t)},s.prototype.$_borrowView=function(t){return this._itemViews.pop()||this.createRowElement()},s.prototype.createRowElement=function(){return new X.RowElement(this.doc)},s.prototype.$_setFixedBarCellsDisplay=function(t,e,i){for(var o=this._getFirstCell(t),n=this._getFirstCell(t)-o,r=this._getLastCell(t)-o,s=e[i],a=pe.FixedOptions.ROW_BAR_CELL_STYLE,l=n;l<=r;l++){var h=s[l];h.clear(!0),re.Utils.setClassName(h.cell,a)}},s.prototype.$_setRowCellsDisplay=function(t,e,i,o,n,r,s,a){var l=this._getFirstCell(t),h=this._getFirstCell(t)-l,d=this._getLastCell(t)-l,u=e.grid,c=e.fixedItemCount,_=i,p=n.isData,f=n.level;if(p||e.mergedRowGrouped)for(var g=0;g<a;g++)for(var V=(P=o[s+g]).length,m=h;m<=d;m++){var y=(O=P[m]).layout,v=y.getDataColumn(),C=y.parent,w=C&&C.vertical;if(O.merged=!1,O.head=null,O.grouped=!1,!O.spanned)if(y.isProxy){for(var x=void 0,b=s;b<s+a;b++){var I=o[b];if(!I)break;for(var E=0;E<I.length;E++)if(I[E].layout===y.source){x=I[E];break}if(x)break}x?O.span(x):O.clear(!1)}else if(!p&&f<=m+l)O.grouped=!0,O.clear(!0);else{var S=void 0,R=1,T=(v&&v.mergeGrouped&&v.groupLevel<=n.parent.level||(n.isDataRow?void 0===(R=(S=y.spanCallback)?S(u.handler,y,O.item.index):void 0)&&(R=y.getDataSpan()):0 instanceof rt.GroupFooter),0);if(1<R){var D,k=0,M=y.vindex+1;if(R--,w)for(;k++<R&&k<a;){if(!(D=C.getVisible(M++)))break;T+=D._dspan,this._cells[s+g+k][m].span(O),this._spanned=!0}else for(;k++<R&&m-h+k<V&&M<C.visibleCount;){if(!(D=C.getVisible(M++)))break;T+=D._cspan,P[m+k].span(O),this._spanned=!0}}var F,v=y._cspan,S=y._dspan,L=y.merged&&y.merges;(L=L&&n instanceof q.MergedGroupFooter&&m>=n.parent.level?null:L)?(O.merged=L.isMerged(r,c),L.isHidden(r,c)?(O.set(v+T,S,!1),O.head=_[m-h]):(F=void 0,F=n.isData?(O.rows=L.getMerged(r,c))*S:L.getMerged2(u,n.index,r-c,S),O.set(v+T,F,!0),_[m-h]=O.head=O)):w?O.set(v,S+T,!0):O.set(v+T,S,!0)}}else for(var O,P=o[s],m=h;m<=d;m++)(O=P[m]).clear(!1),O.merged=!1,O.grouped=!0},s.prototype.$_refreshSpans=function(t,e,i){},s.prototype.$_cleanRowViews=function(t){for(;this.childCount>t;)this.$_removeView(this.childCount-1)},s.prototype.$_cutTailBodyCells=function(t){for(var e=this._cells,i=t;i<e.length;i++)for(var o=e[i],n=0;n<o.length;n++)o[n].dispose(),o[n]=null;e.length=t},s.prototype.$_cleanTableRows=function(t){for(var e=this._tbody.rows,i=e.length-1;i>=this._cells.length;i--)for(var o=e[i].cells,n=o.length;n--;){for(var r=o[n];1<r.childElementCount;)r.removeChild(r.lastElementChild);r.removeAttribute(a),r.removeAttribute(l)}for(i=e.length-1;t<=i;i--){var s=e[i];0<s.childElementCount?(s[ht.T_IDX]=-1,s.style.display="none"):re.Utils.detach(s)}},s.prototype.$_resetHeights=function(t,e){var i=this._tbody.children,o=0;if(0<t.length){for(var n=1;n<t.length;n++)i[o++].style.height=t[n]-t[n-1]+"px";o++}for(n=1;n<e.length;n++)i[o++].style.height=e[n]-e[n-1]+"px"},s.prototype.$_resetCellStyleHeights=function(t,e){var i=this._tbody.children,o=0;if(0<t.length){for(var n=1;n<t.length;n++)for(var r=t[n]-t[n-1],s=i[o++].cells,a=0;a<s.length;a++)s[a].style.height=r+"px";o++}for(n=1;n<e.length;n++)for(r=e[n]-e[n-1],s=i[o++].cells,a=0;a<s.length;a++)s[a].style.height=r+"px"},s.prototype.$_resetCellHeights2=function(t,e){for(var i=t.grid.body.buttonHeight,o=0,n=this._cells.length;o<n;o++)for(var r=this._cells[o],s=0,a=r.length;s<a;s++){var l=r[s],h=l.height,d=t.getTableRowHeightFixed(l.trow,l.rowSpan);h!=d&&(l.height=d,0<l.buttonWidth||0<l.editWidth)&&l.buttons&&(l.buttons.style.top=Math.floor((d-i)/2)+"px"),e&&!l.heighted&&(l.cell.firstElementChild.style.maxHeight=l.height-2+"px",re.Utils.ieTen)&&(l.cell.firstElementChild.style.height=l.height-2+"px")}},s.prototype.$_focusChanged=function(t,e,i){this.$_cellStateChanged(t,e,"focused",i)},s.prototype.$_mouseEnteredChanged=function(t,e,i){this.$_cellStateChanged(t,e,"mouseEntered",i)},s.prototype.$_cellStateChanged=function(t,e,i,o){var n,r,s,a,l,h,d=t.canMergeEditing(e);e&&e.item;e&&o!=e[i]&&(n=this.getRowView(e.item))instanceof X.ItemElement&&(r=this.model,s=e.dataColumn,e[i]=o,s)&&(o=r.getCellAt(e.item,s,!1),n.$_setButtons(t,e,e.cell.firstElementChild),e.merged&&e.head&&(l=e.head,a=t.layoutManager,h=this.getCellRect(a,e,!1),a=this.getCellRect(a,e,!0),l=l.renderer2,e.focused?(h=h.top-a.top+h.height/2-a.height/2,l.moveClickElement(h,d)):e.mouseEntered||l.moveClickElement(0,d)),n instanceof X.RowElement)&&e.renderer2&&"focused"===i&&e.renderer2.refreshFocusChanged&&n.cellRefresh(t,r,o,s,e)},s.prototype.$_buttonZIndexChanged=function(t,e,i,o){var n=e&&e.item;n&&n.isDataRow&&(n=this.getRowView(n))instanceof X.ItemElement&&e.dataColumn&&n.$_setButtonZIndex(t,e,i,o)},s.prototype.$_rendererChanged=function(t){for(var e=this._cells,i=0;i<e.length;i++)for(var o=e[i],n=0;n<o.length;n++)o[n].layout===t&&(o[n].rendererChanged=!0)};var u,i=s;function s(t,e){t=u.call(this,t,e,"bodyView")||this;return t._itemViews=[],t._cells=[],t._spanned=!1,t._ghostStyle={},t}e.GridBodyElement=i;h=i,ne.__extends(c,h),_dp(c,"fixed",{get:function(){return!0}}),c.prototype._getCssSelector=function(){return"rg-fixed-body"},c.prototype._getExplicitWidth=function(t){return t.fixedWidth-t.fixedBarWidth},c.prototype._getFirstCell=function(t){return this._getStartCell(t)},c.prototype._getLastCell=function(t){return this._getEndCell(t)},c.prototype._getStartCell=function(t){return 0},c.prototype._getEndCell=function(t){return t.fixedCellCount-1},c.prototype._getCellCount=function(t){return t.fixedCellCount},c.prototype._getCellWidth=function(t,e){return t.getFixedCellWidth(e)},c.prototype.createRowElement=function(){return new X.FixedRowElement(this.doc)};var h,d=c;function c(){return null!==h&&h.apply(this,arguments)||this}e.FixedBodyElement=d;_=i,ne.__extends(p,_),_dp(p,"rightFixed",{get:function(){return!0}}),p.prototype._getCssSelector=function(){return"rg-fixed-body"},p.prototype._getFirstCell=function(t){return this._getStartCell(t)},p.prototype._getLastCell=function(t){return this._getEndCell(t)},p.prototype._getStartCell=function(t){return t.cellCount-t.rightCellCount},p.prototype._getEndCell=function(t){return t.cellCount-1},p.prototype.createRowElement=function(){return new X.RightRowElement(this.doc)},p.prototype._getCellCount=function(t){return t.rightCellCount},p.prototype._getCellWidth=function(t,e){return t.getRightCellWidth(e)};var _,d=p;function p(){return null!==_&&_.apply(this,arguments)||this}e.RightBodyElement=d})),Ce=(t(gt),gt.TableCell,gt.BodyTableCell,gt.GridBodyElement,gt.FixedBodyElement,gt.RightBodyElement,e(function(t,e){Object.defineProperty(e,"__esModule",{value:!0});o=gt.TableCell,ne.__extends(i,o),i.prototype.dispose=function(){o.prototype.dispose.call(this),this.textSpan=this.cell=this.check=this.sort=this.filter=this.expander=null,this.layout=null},i.prototype.span=function(){this.spanned=!0,this.clear(!1)},i.prototype.clear=function(t){o.prototype.clear.call(this,t);var t=this.cell.firstElementChild,e=this.textSpan,i=t.style;return 0<this.checkWidth&&(t.removeChild(this.check),this.check=null,this.checkWidth=0),0<this.filterWidth&&(t.removeChild(this.filter),this.filter=null,this.filterWidth=0),0<this.sortWidth&&(t.removeChild(this.sort),this.sort=null,this.sortWidth=0),0<this.popupWidth&&(t.removeChild(this.popup),this.popup=null,this.popupWidth=0),this.expander&&(t.removeChild(this.expander),this.expander=null),this.className&&(this.cell.className=this.className=""),this.rendererClass&&(t.className=this.rendererClass=""),0!=this.marginLeft&&(i.marginLeft="",this.marginLeft=0),0!=this.marginRight&&(i.marginRight="",this.marginRight=0),0!=this.marginTop&&(i.marginTop="",this.marginTop=0),0!=this.marginBottom&&(i.marginBottom="",this.marginBottom=0),this.text&&(e[re.Utils.TextProp]=this.text=""),this.html&&(e.innerHTML=this.html=""),this},i.prototype.setText=function(t,e){e!=this.text&&(t[re.Utils.TextProp]=this.text=e,this.html="")},i.prototype.setHtml=function(t,e){e!=this.html&&(t.innerHTML=this.html=e,this.text="")},i.prototype.setClassName=function(t){return t!=this.className&&(this.cell.className=this.className=t,!0)},i.prototype.setRendererClassName=function(t,e){e!=this.rendererClass&&(t.className=this.rendererClass=e)},i.prototype.setDivMarigns=function(t,e,i,o,n){e!=this.marginLeft&&(t.marginLeft=e?e+"px":"",this.marginLeft=e),i!=this.marginRight&&(t.marginRight=i?i+"px":"",this.marginRight=i),o!=this.marginTop&&(t.marginTop=o?o+"px":"",this.marginTop=o),n!=this.marginBottom&&(t.marginBottom=n?n+"px":"",this.marginBottom=n)},i.prototype.getIndex=function(t){return t.set(-1,this.layout.firstColumn)},i.prototype.isClickableElt=function(t){return t===this.filter||t===this.popup||t===this.check||t===this.expander};var o,y=i;function i(t){var e=o.call(this,t)||this;return e.check=null,e.sort=null,e.filter=null,e.popup=null,e.textSpan=null,e.expander=null,e.rendererClass="",e.html=void 0,e.tooltip="",e.sortWidth=0,e.filterWidth=0,e.checkWidth=0,e.popupWidth=0,e.expanderWidth=0,e.marginLeft=0,e.marginRight=0,e.marginTop=0,e.marginBottom=0,e.edgeMarker=null,e.textSpan=t.firstElementChild.firstElementChild,e}e.HeaderTableCell=y;n=ye.SimpleTableElement,ne.__extends(D,n),D.renderCell=function(t,e){e[re.Utils.TextProp]=t.text||""},D.prototype._doDispose=function(){for(var t=0;t<this._cells.length;t++)for(var e=this._cells[t],i=0;i<e.length;i++)e[i].dispose(),e[i]=null;this._cells=null,n.prototype._doDispose.call(this)},D.prototype.tableCellByCell=function(t){for(var e=0;e<this._cells.length;e++)for(var i=this._cells[e],o=0;o<i.length;o++){var n=i[o];if(n&&n.cell===t)return n}},D.prototype.tableCellByLayout=function(t){for(var e=0;e<this._cells.length;e++)for(var i=this._cells[e],o=0;o<i.length;o++)if(i[o].layout===t)return i[o]},D.prototype.tableCellByLayout2=function(t,e){var i=this._cells,o=i.length;if(!(o<1)){for(var n=i[0].length,r=this._getFirstCell(t),s=this._getStartCell(t)-r,a=this._getEndCell(t)-r,l=s;l<=a;l++)for(var h=0;h<o;h++)if(i[h][l].layout===e)return i[h][l];for(l=s-1;0<=l;l--)for(h=0;h<o;h++)if(i[h][l].layout===e)return i[h][l];for(l=1+a;l<n;l++)for(h=0;h<o;h++)if(i[h][l].layout===e)return i[h][l]}},D.prototype.layoutByCell=function(t){t=this.tableCellByCell(t);return t&&t.layout},D.prototype.columnByCell=function(t){t=this.layoutByCell(t);return t&&t._columnObj},D.prototype.getSpanRoot=function(t){for(var e=0;e<this._cells.length;e++)for(var i=this._cells[e],o=0;o<i.length;o++){var n=i[o];if(n.layout===t){if(n.spanned)if(n.layout.parent.vertical){for(var r=e-1;0<=r;r--)if(!this._cells[r][o].spanned)return this._cells[r][o].layout}else for(r=o-1;0<=r;r--)if(!i[r].spanned)return i[r].layout;return t}}},D.prototype.refresh=function(t){for(var e=t.focusedColumn,t=t.layoutManager,i=this._getFirstCell(t),o=this._getLastCell(t)-i+1,n=0;n<this._cells.length;n++)for(var r=this._cells[n],s=0;s<o;s++){var a=r[s],l=a.layout;a.visible&&l instanceof ct.CellLayoutColumnItem&&((a=a.cell)[ht.T_FOC]=l.isColumn(e),re.Utils.setClassName(a,this.$_getCellSelector(l,a)))}},D.prototype.getRowAt=function(t){for(var e=1;e<this._rowPoints.length-1;e++)if(t<this._rowPoints[e])return e-1;return this._rowPoints.length-2},D.prototype.getLayoutHeight=function(t,e,i){var o,i=t instanceof ct.CellLayoutGroupItem?(o=t.hrow,i?t.hlen:t.hspan):(o=t.hrow,i?e.rowSpan:t.hspan);return this._rowPoints[o+i]-this._rowPoints[o]},D.prototype.getLayoutPos=function(t){return this._rowPoints[t.hrow]},D.prototype._getCssSelector=function(){return"rg-header"},D.prototype._isFixedHeight=function(){return this._fixedHeight},D.prototype._getMinRowHeight=function(t){return this._minRowHeight},D.prototype._prepareCellContent=function(t,e){var t=re.getDoc(t),i=t.createElement("div"),t=t.createElement("span");return i.appendChild(t),i},D.prototype._doMeasure=function(t,e,i){var o=this.model,n=t.layoutManager.headerRows,r=o.height,s=o.heights,a=[];if(this._minRowHeight=o.minRowHeight,s&&0<s.length){for(var l=0,h=0;h<n;h++)l+=a[h]=Math.max(s[h]||this._minRowHeight,this._minRowHeight);r=l}return r=r<=0?Math.max(this._minRowHeight,t.heightMeasurer.headerHeight)*n:Math.max(this._minRowHeight*n,r),this._fixedHeight=0<=r,r=Math.max(this._minRowHeight*n,o.minHeight,r),o.setCalcHeights(a),ge.Size.create(e,r)},D.prototype._doPrepareTableExtents=function(t){var e=this.model,i=this._rowPoints,o=this.height,n=e.getCalcHeights(),r=Math.floor(o/t.headerRows);if(i.length=this._getTableRowCount(t)+1,(i[0]=0)<i.length){for(var s=1;s<i.length-1;s++)i[s]=i[s-1]+(n[s-1]||r);i[s]=o}},D.prototype.$_refreshHeadTitle=function(t,e){for(var i=this._cells[0],o=e.children[0],n=0;o&&n<i.length;n++){var r=i[n].layout.source,s=o.children[n];s&&r&&(s[re.Utils.TextProp]=r.header.getDisplayText()||r.firstColumn.header.displayText)}},D.prototype._doLayoutContent=function(t){var e=t.grid,i=e.focusedColumn,o=this.model,n=t.cellLayouts._headerCells,r=n.length,s=this._getFirstCell(t),a=this._getStartCell(t)-s,l=this._getEndCell(t)-s;this.$_refreshCells(t,n,this._tbody),this.$_refreshSpans(t,r),this.$_refreshHeadTitle(t,this._thead);for(var h=0;h<r;h++)for(var d=this._cells[h],u=a;u<=l;u++){var c,_,p,f=d[u];!f.visible&&u!==a||(c=void 0,f.layout.isProxy?(c=f.layout.source,f=this.tableCellByLayout(c)):c=f.layout,(_=f.cell)[ht.T_FOC]=c.isColumn(i),f.setClassName(this.$_getCellSelector(c,_)),c.isNull?f.setText(f.textSpan,c.header.getDisplayText()):c instanceof ct.CellLayoutGroupItem?(p=o.getCell(c),this._updateGroupCell(e,o,p,f)):(p=o.getCell(c),this._updateCell(e,o,p,f)))}},D.prototype._doRender=function(t){},D.prototype._getTableRowCount=function(t){return t.headerRows},D.prototype._getTableRowHeight=function(t,e){return this._rowPoints[e+1]-this._rowPoints[e]},D.prototype.$_getCellHeight=function(t){var e=t.layout.hrow,i=this._rowPoints[e];return this._rowPoints[e+t.rowSpan]-i},D.prototype._getCellCount=function(t){return t.cellCount-t.fixedCellCount-t.rightCellCount},D.prototype._getCellWidth=function(t,e){return t.getCellWidth(e)},D.prototype._getCellWidth2=function(t,e,i){return t.getCellWidth2(e,i)},D.prototype._doDrawCell=function(t,e,i){},D.prototype._doPrepareTableRow=function(t,e,i,o){n.prototype._doPrepareTableRow.call(this,t,e,i,o);t=this.model;re.Utils.setClassName(o,t.getStyleName())},D.prototype.$_getCellSelector=function(t,e){var i="",o=t.header.styleName;return t instanceof ct.CellLayoutGroupItem?(i="rg-header-group-cell",o&&(i+=" "+o)):(i="rg-header-cell",e[ht.T_FOC]?i+=" rg-header-focus":this.grid.isSelectedLayout(t)&&(i+=" rg-header-select"),e=t.firstColumn,(o=o||e&&e.header.styleName)&&(i+=" "+o)),i},D.prototype._getFirstCell=function(t){return t._firstCell},D.prototype._getLastCell=function(t){return t._lastCell},D.prototype._getStartCell=function(t){return t.getStartCell()},D.prototype._getEndCell=function(t){return t.getEndCell()},D.prototype.$_refreshCells=function(t,e,i){for(var o=this._cells,n=i.children,r=n.length,s=this._getFirstCell(t),a=this._getLastCell(t)-s+1,l=o.length;l<r;l++)o.push([]);for(var h=0;h<r;h++){for(var d=o[h],u=n[h].children,c=e[h],_=0;_<a;_++){var p=u[_],f=c[_+s],g=d[_];g?g.cell===p&&g.layout!=f&&(g.layout=f,g.clear(!0)):(g=d[_]=new y(u[_])).layout=f,g.height=this.$_getCellHeight(g),g.width=this._getCellWidth(t,_),g.spanned=!1}for(_=a;_<d.length;_++)d[_].dispose();d.length=a}for(h=r;h<o.length;h++)for(var m=o[h],_=0;_<m.length;_++)m[_].dispose(),m[_]=null;o.length=r},D.prototype.$_refreshSpans=function(t,e){for(var i=this._getFirstCell(t),o=this._getFirstCell(t)-i,n=this._getLastCell(t)-i,r=0;r<e;r++)for(var s=this._cells[r],a=s.length,l=o;l<=n;l++){var h=s[l],d=h.layout,u=d.parent,c=u&&u.vertical;if(!h.spanned)if(d.isProxy)h.clear(!1);else{var _=0,p=d.getHeaderSpan()-1;if(0<p){var f=0,g=d.vindex+1;if(c)for(;f++<p&&f<e;)_+=u.getVisible(g++)._hspan,this._cells[r+f][l].span();else for(;f++<p&&l-o+f<a&&g<u.visibleCount;)_+=u.getVisible(g++)._cspan,s[l+f].span()}(d instanceof ct.CellLayoutGroupItem||d.isNull)&&h.clear(!0),c?h.set(d._cspan,d._hspan+_,!0):h.set(d._cspan+_,d._hspan,!0),h.width=this._getCellWidth2(t,l,h.colSpan)}}},D.prototype._updateCell=function(t,e,i,o){var n=t.doc,r=t.sortingOptions,t=t.filteringOptions,s=o.layout.firstColumn,a=i.checkLocation,l=a&&a!=ht.ColumnHeaderItemLocation.NONE?e.checkWidth:0,h=0<l?e.checkWidth:0,d=s&&this.$_canSortHandleVisible(r,s),u=s&&s.sortDirection||ht.SortDirection.NONE,c=d?e.sortWidth:0,_=s&&this.$_canFilterHandleVisible(t,s)?e.filterWidth:0,t=s&&this.$_canPopupHandleVisible(e,s)?e.popupWidth:0,p=o.cell.firstElementChild,f=o.textSpan,g=o.width,m=this.$_getCellHeight(o),y=0,v=0,C=0,w=0,x=p.style,b=(o.setRendererClassName(p,D.RENDERER_STYLE),x.maxHeight=Math.max(m-2,0)+"px",o.check);if(0<l){var I=f.style,E=(b?x=b.style:(b=n.createElement("input"),(o.check=b).type="checkbox",b.className="rg-header-check",(x=b.style).position="absolute",x.display="inline-block",x.verticalAlign="middle"),o.checkWidth<=0&&(p.appendChild(b),o.checkWidth=l),b.checked=s.checked,b.title=i.text+" "+s.checked?"checked":"unchecked",-1),S=-1;switch(I.removeProperty("display"),a){case ht.ColumnHeaderItemLocation.LEFT:case ht.ColumnHeaderItemLocation.LEFT_EDGE:p.insertBefore(b,o.textSpan),a===ht.ColumnHeaderItemLocation.LEFT?(x.position="relative",x.removeProperty("left"),x.removeProperty("top")):(x.position="absolute",y+=l,E=0,S=Math.floor((m-e.checkHeight)/2));break;case ht.ColumnHeaderItemLocation.RIGHT:case ht.ColumnHeaderItemLocation.RIGHT_EDGE:p.insertBefore(o.textSpan,b),a===ht.ColumnHeaderItemLocation.RIGHT?(x.position="relative",x.removeProperty("left"),x.removeProperty("top")):(x.position="absolute",v+=l,E=g-l,S=Math.floor((m-e.checkHeight)/2));break;case"top":case"topEdge":p.insertBefore(b,o.textSpan),a===ht.ColumnHeaderItemLocation.TOP?(I.display="block",x.position="relative",x.removeProperty("left"),x.removeProperty("top")):(x.position="absolute",C+=h,E=Math.floor((g-c-_-e.checkWidth)/2),S=0);break;case"bottom":case"bottomEdge":p.insertBefore(o.textSpan,b),a===ht.ColumnHeaderItemLocation.BOTTOM?(I.display="block",x.position="relative",x.removeProperty("left"),x.removeProperty("top")):(x.position="absolute",w+=h,E=Math.floor((g-c-_-e.checkWidth)/2),S=m-e.checkHeight)}-1<E&&(x.left=E+"px"),-1<S&&(x.top=S+"px")}else 0<o.checkWidth&&(p.removeChild(b),o.checkWidth=0);var R=o.filter,T=(0<_?(R?x=R.style:(R=n.createElement("span"),(x=(o.filter=R).style).position="absolute",x.display="inline-block"),o.filterWidth<=0&&(p.appendChild(R),o.filterWidth=_),R.className="rg-header-filtering"+(s.isFiltered()?" filter-activated":""),x.left=g-(v+=_)+"px",x.top=Math.floor((m-e.filterHeight)/2)+"px",x.width=_+"px",x.height=e.filterWidth+"px"):0<o.filterWidth&&(p.removeChild(R),o.filterWidth=0),o.sort);if(d){switch(T?x=T.style:(T=n.createElement("span"),(x=(o.sort=T).style).position="absolute",x.display="inline-block"),o.sortWidth<=0&&(p.appendChild(T),o.sortWidth=c),u){case ht.SortDirection.DESCENDING:T.className="rg-header-sort-descending";break;case ht.SortDirection.ASCENDING:T.className="rg-header-sort-ascending";break;default:T.className="rg-header-sort-none"}x.left=g-(v+=c)+"px",x.width=c+"px",r.showSortOrder&&0<=s.sortOrder?(T[re.Utils.TextProp]=(s.sortOrder+1).toString(),x.top=Math.max(0,Math.floor((m-e.sortHeight-10)/2))+"px",x.height=Math.min(o.height,e.sortHeight+10)+"px",x.backgroundPositionY=re.Utils.isIE?"5px":"70%",x.lineHeight=re.Utils.isIE?"1.5em":"1em"):(T[re.Utils.TextProp]="",x.backgroundPositionY="center",x.top=Math.floor((m-e.sortHeight)/2)+"px",x.height=e.sortHeight+"px")}else 0<o.sortWidth&&(p.removeChild(T),o.sortWidth=0);R=o.popup,0<t?(R?x=R.style:(R=n.createElement("span"),(x=(o.popup=R).style).position="absolute",x.display="inline-block"),o.popupWidth<=0&&(p.appendChild(R),o.popupWidth=t),R.className="rg-header-popup",x.left=g-(v+=t)+"px",x.top=Math.floor((m-e.popupHeight)/2)+"px",x.width=t+"px",x.height=e.popupWidth+"px"):0<o.popupWidth&&(p.removeChild(R),o.popupWidth=0),x=p.style,o.showTooltip=i.showTooltip,o.tooltip=i.tooltip,o.setDivMarigns(x,y,v,C,w),d=i.template;d?o.setHtml(f,d):o.setText(f,i.text||""),gt.TableCell.addEdgeMark(i.edgeMark,o,n)},D.prototype._updateGroupCell=function(t,e,i,o){var t=t.doc,n=o.cell.firstElementChild,r=o.textSpan,s=this.$_getCellHeight(o),a=o.layout,l=0,h=n.style,d=(h.maxHeight=Math.max(s-2,0)+"px",this.$_canExpanderHandleVisible(a)),u=o.expander,a=(d?(o.expander||((u=o.expander=t.createElement("span")).style.position="absolute",u.style.display="inline-block"),u.className=a.expanded?"rg-column-expanded":"rg-column-collapsed",(d=u.style).left="2px",d.top=Math.floor((s-e.expanderHeight)/2)+"px",d.width=e.expanderWidth+"px",d.height=e.expanderHeight+"px",l+=e.expanderWidth+2,n.appendChild(o.expander)):o.expander&&n.removeChild(o.expander),o.showTooltip=i.showTooltip,o.tooltip=i.tooltip,o.setDivMarigns(h,l,0,0,0),i.template);a?o.setHtml(r,a):o.setText(r,i.text||""),gt.TableCell.addEdgeMark(i.edgeMark,o,t)},D.prototype.$_canPopupHandleVisible=function(t,e){if(null==e.header.popupMenuName)return!1;switch(t.showPopupMenu){case ht.HandleVisibility.VISIBLE:return!0;case ht.HandleVisibility.HOVERED:return this.hovered;case ht.HandleVisibility.ALWAYS:return!0;case ht.HandleVisibility.HIDDEN:return!1}},D.prototype.$_canFilterHandleVisible=function(t,e){e=t.enabled&&e.hasFilters&&e.filterable;return e=e&&t.handleVisibility===ht.HandleVisibility.HIDDEN?!1:e},D.prototype.$_canSortHandleVisible=function(t,e){switch(t.handleVisibility){case ht.HandleVisibility.VISIBLE:return 0<=e.sortOrder;case ht.HandleVisibility.HOVERED:return this.hovered&&0<=e.sortOrder;case ht.HandleVisibility.ALWAYS:return e.sortable||0<=e.sortOrder;case ht.HandleVisibility.HIDDEN:return!1}return 0<=e.sortOrder},D.prototype.$_canCheckHandleVisible=function(t,e){return!1},D.prototype.$_canExpanderHandleVisible=function(t){return t.isExpandable()},D.prototype.$_checkHeight=function(){return this._table.offsetHeight!=this._rowPoints[this._rowPoints.length-1]},D.prototype.$_getHeights=function(t){var e=this._tbody.rows;if(0==t.length)for(var i=0,o=this._rowPoints.length-1;i<o;i++)t[i]=0;for(i=0;i<t.length;i++)t[i]=Math.max(t[i],e[i]?e[i].offsetHeight:0)},D.prototype.$_adjustHeights=function(t){for(var e=this._tbody.rows,i=this._rowPoints,o=i[0]=0,n=i.length-1;o<n;o++)e[o].style.height=t[o]+"px",i[o+1]=i[o]+t[o];return i[i.length-1]},D.prototype.$_distributeHeights=function(t,e){for(var i=e.length,o=0,n=0;n<i;n++)o+=e[n];if(o<t){for(var r=this._tbody.rows,s=t-o,a=s,n=0;n<i-1;n++){var l=Math.floor(s*e[n]/o);e[n]+=l,r[n].style.height=e[n]+"px",a-=l}e[n]+=a,r[n]&&(r[n].style.height=e[n]+"px")}},D.RENDERER_STYLE="rg-header-renderer";var n,r=D;function D(t,e){t=n.call(this,t,e,"headerView")||this;return t._fixedHeight=!0,t._rowPoints=[],t._cells=[],t}e.HeaderElement=r;s=r,ne.__extends(l,s),l.prototype._getExplicitWidth=function(t){return t.fixedWidth-t.fixedBarWidth},l.prototype._getFirstCell=function(t){return this._getStartCell(t)},l.prototype._getLastCell=function(t){return this._getEndCell(t)},l.prototype._getStartCell=function(t){return 0},l.prototype._getEndCell=function(t){return t.fixedCellCount-1},l.prototype._getCellCount=function(t){return t.fixedCellCount},l.prototype._getCellWidth=function(t,e){return t.getFixedCellWidth(e)},l.prototype._getCellWidth2=function(t,e,i){return t.getFixedCellWidth2(e,i)},l.prototype.tableCellByLayout2=function(t,e){return this.tableCellByLayout(e)};var s,a=l;function l(){return null!==s&&s.apply(this,arguments)||this}e.FixedHeaderElement=a;h=r,ne.__extends(d,h),d.prototype._getFirstCell=function(t){return this._getStartCell(t)},d.prototype._getLastCell=function(t){return this._getEndCell(t)},d.prototype._getStartCell=function(t){return t.cellCount-t.rightCellCount},d.prototype._getEndCell=function(t){return t.cellCount-1},d.prototype._getCellCount=function(t){return t.cellCount-1},d.prototype._getCellWidth=function(t,e){return t.getRightCellWidth(e)},d.prototype._getCellWidth2=function(t,e,i){return t.getRightCellWidth2(e,i)},d.prototype.tableCellByLayout2=function(t,e){return this.tableCellByLayout(e)};var h,a=d;function d(){return null!==h&&h.apply(this,arguments)||this}e.RightHeaderElement=a})),we=(t(Ce),Ce.HeaderTableCell,Ce.HeaderElement,Ce.FixedHeaderElement,Ce.RightHeaderElement,e(function(t,e){Object.defineProperty(e,"__esModule",{value:!0});i=se.Base,ne.__extends(n,i),n.prototype._doDispose=function(){this._grid=null,this._rs=null,i.prototype._doDispose.call(this)},_dp(n,"grid",{get:function(){return this._grid}}),_dp(n,"footerCount",{get:function(){return this._footerCount}}),_dp(n,"headerSummaryCount",{get:function(){return this._headerSummaryCount}}),_dp(n,"vscrollBar",{get:function(){return this._vscrollBar}}),_dp(n,"hscrollBar",{get:function(){return this._hscrollBar}}),_dp(n,"scrollBarWidth",{get:function(){return this._scrollBarWidth}}),_dp(n,"scrollBarHeight",{get:function(){return this._scrollBarHeight}}),_dp(n,"dataBounds",{get:function(){return this._dataBounds}}),_dp(n,"bodyBounds",{get:function(){return this._bodyBounds}}),_dp(n,"fixedBodyBounds",{get:function(){return this._fixedBodyBounds}}),_dp(n,"gridBounds",{get:function(){return this._gridBounds}}),_dp(n,"headerBounds",{get:function(){return this._headerBounds}}),_dp(n,"summaryBounds",{get:function(){return this._summaryBounds}}),_dp(n,"footerBounds",{get:function(){return this._footerBounds}}),_dp(n,"filterPanelBounds",{get:function(){return this._filterPanelBounds}}),_dp(n,"topContentBounds",{get:function(){return this._topContentBounds}}),_dp(n,"leftContentBounds",{get:function(){return this._leftContentBounds}}),_dp(n,"rowBarBounds",{get:function(){return this._rowBarBounds}}),_dp(n,"sideContentBounds",{get:function(){return this._sideContentBounds}}),_dp(n,"contentBounds",{get:function(){return this._contentBounds}}),_dp(n,"fixedContentBounds",{get:function(){return this._fixedContentBounds}}),_dp(n,"nonFixedBounds",{get:function(){return this._nonFixedBounds}}),_dp(n,"rightContentBounds",{get:function(){return this._rightContentBounds}}),_dp(n,"headBounds",{get:function(){return this._headBounds}}),_dp(n,"sumBounds",{get:function(){return this._sumBounds}}),_dp(n,"footBounds",{get:function(){return this._footBounds}}),_dp(n,"fixedWidth",{get:function(){return this._fixedWidth}}),_dp(n,"rightWidth",{get:function(){return this._rightWidth}}),_dp(n,"defaultItemHeight",{get:function(){return this._itemHeight}}),_dp(n,"topIndex",{get:function(){return this._topIndex}}),_dp(n,"itemCount",{get:function(){return this._itemCount}}),_dp(n,"fixedItemCount",{get:function(){return this._fixedItemCount}}),_dp(n,"fullItemCount",{get:function(){return this._fullItemCount}}),_dp(n,"fixedTableRowCount",{get:function(){return this._fixedTableRowCount}}),_dp(n,"tableRowCount",{get:function(){return this._tableRowCount}}),_dp(n,"trs",{get:function(){return this._cellLayouts.dataRows}}),_dp(n,"leftPos",{get:function(){return this._leftPos}}),_dp(n,"cellLayouts",{get:function(){return this._cellLayouts}}),_dp(n,"layoutCount",{get:function(){return this._layoutCount}}),_dp(n,"fixedLayoutCount",{get:function(){return this._fixedLayoutCount}}),_dp(n,"rightLayoutCount",{get:function(){return this._rightLayoutCount}}),_dp(n,"firstLayout",{get:function(){return this._firstLayout}}),_dp(n,"lastLayout",{get:function(){return this._lastLayout}}),_dp(n,"rightFirstLayout",{get:function(){return this._layoutCount-this._rightLayoutCount}}),_dp(n,"layoutsLength",{get:function(){return this._layoutsLength}}),_dp(n,"cellCount",{get:function(){return this._cellCount}}),_dp(n,"fixedCellCount",{get:function(){return this._fixedCellCount}}),_dp(n,"rightCellCount",{get:function(){return this._rightCellCount}}),_dp(n,"firstCell",{get:function(){return this._firstCell}}),_dp(n,"lastCell",{get:function(){return this._lastCell}}),_dp(n,"startCell",{get:function(){return this._startCell}}),_dp(n,"endCell",{get:function(){return this._endCell}}),_dp(n,"isColumnFitted",{get:function(){return!!this._fitStyle}}),_dp(n,"scrollWidth",{get:function(){return this._scrollWidth}}),_dp(n,"fixedBarWidth",{get:function(){return this._fixedBarWidth}}),_dp(n,"rightBarWidth",{get:function(){return this._rightBarWidth}}),_dp(n,"fixedHeight",{get:function(){return this._fixedHeight}}),_dp(n,"fixedBarHeight",{get:function(){return this._fixedBarHeight}}),_dp(n,"rowGrouped",{get:function(){return!1}}),_dp(n,"mergedRowGrouped",{get:function(){return!1}}),_dp(n,"rowGroupFields",{get:function(){return null}}),_dp(n,"rowGroupLevels",{get:function(){return 0}}),_dp(n,"clientRect",{get:function(){return this._clientRect}}),_dp(n,"headerRows",{get:function(){return this._cellLayouts.headerRows}}),_dp(n,"dataRows",{get:function(){return this._cellLayouts.dataRows}}),_dp(n,"topPanelVisible",{get:function(){return!1}}),_dp(n,"minRowHeight",{get:function(){return this._minRowHeight}}),_dp(n,"minItemHeight",{get:function(){return this._minItemHeight}}),_dp(n,"fitStyle",{get:function(){return this._fitStyle}}),n.prototype.syncHeight=function(){return this.grid.displayOptions.syncGridHeight!==ht.SyncGridHeight.NONE},n.prototype.fitSyncHeight=function(){return this._fitSyncHeight},n.prototype.getStartCell=function(){return this._refreshMode==ht.RefreshMode.VISIBLE_ONLY?this._startCell:this._firstCell},n.prototype.getEndCell=function(){return this._refreshMode==ht.RefreshMode.VISIBLE_ONLY?this._endCell:this._lastCell},n.prototype.getLayout=function(t){return this._layouts[t]},n.prototype.getLayoutBounds=function(t){return new nt.Rectangle(this._layoutPoints[t],0,this._layoutPoints[t+1]-this._layoutPoints[t],0)},n.prototype.getLayoutWidth=function(t){return this._layoutPoints[t+1]-this._layoutPoints[t]},n.prototype.getPositionToVIndex=function(t){for(var e=this._layoutPoints,i=0;i<e.length-1;i++)if(t>=e[i]&&t<e[i+1])return i;return-1},n.prototype.getFixedLayoutWidth=function(t){return this._fixedLayoutPoints[t+1]-this._fixedLayoutPoints[t]},n.prototype.getRightLayoutWidth=function(t){return this._rightLayoutPoints[t+1]-this._rightLayoutPoints[t]},n.prototype.getCellIndex=function(t){for(var e=this._cellPoints,i=0;i<e.length-1;i++)if(t>=e[i]&&t<e[i+1])return i;return-1},n.prototype.getHorzColumnIndex=function(t){for(var e=t,i=0;e;)i+=!e.group||e.group.horizontal?e.vindex:0,e=e.group;return i},n.prototype.getLeftCell=function(){return this.getCellIndex(this._leftPos)},n.prototype.getCellPoint=function(t){return this._cellPoints[t]},n.prototype.getCellWidth=function(t){return this._cellPoints[t+1]-this._cellPoints[t]},n.prototype.getCellWidth2=function(t,e){var i=this._cellPoints;return i[Math.min(i.length-1,t+e)]-i[t]},n.prototype.getFixedCellPoint=function(t){return this._fixedCellPoints[t]},n.prototype.getFixedCellWidth=function(t){return this._fixedCellPoints[t+1]-this._fixedCellPoints[t]},n.prototype.getFixedCellWidth2=function(t,e){var i=this._fixedCellPoints;return i[Math.min(i.length-1,t+e)]-i[t]},n.prototype.getRightCellPoint=function(t){return this._rightCellPoints[t]},n.prototype.getRightCellWidth=function(t){return this._rightCellPoints[t+1]-this._rightCellPoints[t]},n.prototype.getRightCellWidth2=function(t,e){var i=this._rightCellPoints;return i[Math.min(i.length-1,t+e)]-i[t]},n.prototype.$_getItems=function(){return this._items},n.prototype.getItem=function(t){return this._items[t]},n.prototype.getDataRowHeights=function(t){var e=this.grid.displayOptions,i=[],o=e.dataHeights;if(o&&0<o.length)for(var n=0;n<t;n++){var r=Math.floor(Math.max(e.minTableRowHeight,o[n]||e.minTableRowHeight));i.push(r)}return i.slice()},n.prototype._calcDefaultRowHeight=function(t){var e=this.grid.displayOptions.rowHeight,i=this._dataRowHeights=this.getDataRowHeights(this._trs);return(e=i&&0<i.length?i.reduce(function(t,e){return t+e},0):e)<=0&&(e=t.heightMeasurer.rowHeight*this._trs),0<i.length&&0<this._maxHeight&&(e>this._maxHeight||e<this._minItemHeight)&&(this._dataRowHeights=[]),0<this._maxHeight&&(e=Math.min(this._maxHeight,e)),e=Math.max(this._minItemHeight,e)},n.prototype.measure=function(t,e,i,o,n){var r=this._grid;this._rs=r.itemSource,this._cellLayouts=r._activeCellLayout,this._footerCount=r.footers.visibleCount,this._headerSummaryCount=r.headerSummaries.visibleCount,this._leftPos=e,this._topIndex=i,this._focusIndex&&!r.isValid(this._focusIndex)&&this._focusIndex.normalize(r),this._doMeasure(t,o,n)},n.prototype.layout=function(t){var e=this._grid;this._doLayout(e,t),this._adjustLayout(e,this._gridBounds.clone()),this._prevFocused=this._focusIndex,this._focusIndex=null,this._oldSyncHeight=e.displayOptions.syncGridHeight},n.prototype.getItemHeight=function(t){t=t.index;return t<this._fixedItemCount?this._fixedItemPoints[t+1]-this._fixedItemPoints[t]:(t-=this._fixedItemCount-this._topIndex,this._itemPoints[1+t]-this._itemPoints[t])},n.prototype.getTableItemHeight=function(t){return t<this._fixedItemCount?this._fixedTableItemPoints[t+1]-this._fixedTableItemPoints[t]:(t-=this._fixedItemCount,this._tableItemPoints[t+1]-this._tableItemPoints[t])},n.prototype.getTableItemIndex=function(t){for(var e=0;e<this._fixedItemCount;e++)if(t<=this._fixedTableItemPoints[e+1])return e;for(e=0;e<this._itemCount;e++)if(t<=this._tableItemPoints[e+1])return e+this._fixedItemCount;return-1},n.prototype.getTableItemTop=function(t){return(t<this._fixedItemCount?this._fixedTableItemPoints:(t-=this._fixedItemCount,this._tableItemPoints))[t]},n.prototype.getTableItemBottom=function(t){return(t<this._fixedItemCount?this._fixedTableItemPoints:(t-=this._fixedItemCount,this._tableItemPoints))[t+1]},n.prototype.getItemBounds=function(t){var e,t=0<this._fixedItemCount&&t<this._fixedItemCount?(e=this._fixedItemPoints[t],this._fixedItemPoints[t+1]-e):(t-=this._fixedItemCount,e=this._itemPoints[t],this._itemPoints[t+1]-e);return new nt.Rectangle(0,e,1e3,t)},n.prototype.getItemRect=function(t,e){var i,e=((e=void 0===e?!1:e)?this._fixedContentBounds:this._bodyBounds).y,t=0<this._fixedItemCount&&t<this._fixedItemCount?(i=this._fixedItemPoints[t]+e,this._fixedItemPoints[t+1]+e-i):(t-=this._fixedItemCount,i=this._itemPoints[t]+e,this._itemPoints[t+1]+e-i);return new nt.Rectangle(0,i,1e3,t)},n.prototype.getTableItemBounds=function(t){var e,t=0<this._fixedItemCount&&t<this._fixedItemCount?(e=this._fixedTableItemPoints[t],this._fixedTableItemPoints[t+1]-e):(t-=this._fixedItemCount,e=this._tableItemPoints[t],this._tableItemPoints[t+1]-e);return new nt.Rectangle(0,e,1e3,t)},n.prototype.getTableRowHeightFixed=function(t,e){var i=this._fixedTableRowPoints.length;return t<i-1?this._fixedTableRowPoints[Math.min(t+e,i-1)]-this._fixedTableRowPoints[t]:(1<i&&(t-=i),this._tableRowPoints[Math.min(t+e,this._tableRowPoints.length-1)]-this._tableRowPoints[t])},n.prototype.getTableRowHeight=function(t,e){return t<this._fixedTableRowCount?this._fixedTableRowPoints[Math.min(t+e,this._fixedTableRowPoints.length-1)]-this._fixedTableRowPoints[t]:(0<this._fixedItemCount&&(t-=this._fixedItemCount*this._trs+1),this._tableRowPoints[Math.min(t+e,this._tableRowPoints.length-1)]-this._tableRowPoints[t])},n.prototype.getTableRowBounds=function(t,e){var i,t=0<this._fixedTableRowCount&&t<this._fixedTableRowCount?(i=this._fixedTableRowPoints[t],this._fixedTableRowPoints[Math.min(t+e,this._fixedTableRowCount)]-i):(0<this._fixedTableRowCount&&(t-=this._fixedTableRowCount+1),i=this._tableRowPoints[t],this._tableRowPoints[Math.min(t+e,this._tableRowCount)]-i);return new nt.Rectangle(0,i,1e3,t)},n.prototype.getTableRowIndex=function(t){t-=this.contentBounds.y+this.bodyBounds.y;for(var e=0;e<this._fixedTableRowCount;e++)if(t<=Math.round(this._fixedTableRowPoints[e+1]))return e;for(e=0;e<this._tableRowCount;e++)if(t<=Math.round(this._tableRowPoints[e+1]))return e+(0<this._fixedTableRowCount?this._fixedTableRowCount+1:0);return-1},n.prototype.setLeftPos=function(t,e){var i=this._grid;this._leftPos=e,this.$_calcLeftPos(),i.contentPane.x=this._contentBounds.x=this.fixedContentBounds.right-this._leftPos},n.prototype.isMergedCell=function(t){return!1},n.prototype.getMergeRoom=function(t){var e=t.layout;return e instanceof ct.CellLayoutColumnItem&&e.canMerge()?(e=e.merges)&&e.getRoom(t):null},n.prototype.getHeaderCellAt=function(t,e,i){void 0===i&&(i=!1);var o,n=this._grid,r=this._cellLayouts._headerCells,s=-1;if(t<this._fixedContentBounds.right){o=n.fixedHeaderView,t-=this._fixedContentBounds.x;for(var a=0;a<this._fixedCellCount;a++)if(t>=this._fixedCellPoints[a]&&t<this._fixedCellPoints[a+1]){s=a;break}}else if(t>this._rightContentBounds.x){o=n.rightHeaderView,t-=this._rightContentBounds.x;for(a=0;a<this._rightCellCount;a++)if(t>=this._rightCellPoints[a]&&t<this._rightCellPoints[a+1]){s=a+this._cellCount-this._rightCellCount;break}}else{o=n.headerView,t-=this._contentBounds.x;for(a=0;a<this._cellPoints.length;a++)if(t>=this._cellPoints[a]&&t<this._cellPoints[a+1]){s=a+this._fixedCellCount;break}}if(0<=s)return n=r[o.getRowAt(e-this._headerBounds.y-this._contentBounds.y)][s],(n=o.getSpanRoot(n))&&!i?n.source:n},n.prototype.getHeaderCellRect=function(t,e){void 0===e&&(e=!1);var i,o,n,r,s=this.grid,a=t.hcol,l=this.cellCount-this.rightCellCount;return(l=a<this._fixedCellCount?(o=this._fixedContentBounds.x,n=a,r=(i=s.fixedHeaderView.tableCellByLayout(t))?i.colSpan:t.cols,new nt.Rectangle(this._fixedCellPoints[n]+o,0,this._fixedCellPoints[n+r]-this._fixedCellPoints[n],0)):l<=a?(o=this._rightContentBounds.x+this._grid.fixedOptions.colBarWidth,n=a-l,r=(i=s.rightHeaderView.tableCellByLayout(t))?i.colSpan:t.cols,new nt.Rectangle(this._rightCellPoints[n]+o,0,this._rightCellPoints[n+r]-this._rightCellPoints[n],0)):(o=this._contentBounds.x,n=a-this._fixedCellCount,r=(i=s.headerView.tableCellByLayout(t))?i.colSpan:t.cols,new nt.Rectangle(this._cellPoints[n]+o,0,this._cellPoints[n+r]-this._cellPoints[n],0))).y=this._contentBounds.y+s.headerView.getLayoutPos(t),l.height=s.headerView.getLayoutHeight(t,i,e),l},n.prototype.getLayoutRect=function(t){var e,i,o=this.rightFirstLayout;return t<this._fixedLayoutCount?(e=this._fixedContentBounds.x,new nt.Rectangle(this._fixedLayoutPoints[i=t]+e,0,this._fixedLayoutPoints[i+1]-this._fixedLayoutPoints[i],0)):o<=t?(e=this._rightContentBounds.x+this._grid.fixedOptions.colBarWidth,new nt.Rectangle(this._rightLayoutPoints[i=t-o]+e,0,this._rightLayoutPoints[i+1]-this._rightLayoutPoints[i],0)):(e=this._contentBounds.x,i=t-this._fixedLayoutCount,new nt.Rectangle(this._layoutPoints[i]+e,0,this._layoutPoints[i+1]-this._layoutPoints[i],0))},n.prototype.getDataRect=function(t){var e,i,o=t.col,t=t._clen,n=this.cellCount-this.rightCellCount;return o<this._fixedCellCount?(e=this._fixedContentBounds.x,new nt.Rectangle(this._fixedCellPoints[i=o]+e,0,this._fixedCellPoints[i+t]-this._fixedCellPoints[i],0)):n<=o?(e=this._rightContentBounds.x+this._grid.fixedOptions.colBarWidth,new nt.Rectangle(this._rightCellPoints[i=o-n]+e,0,this._rightCellPoints[i+t]-this._rightCellPoints[i],0)):(e=this._contentBounds.x,i=o-this._fixedCellCount,new nt.Rectangle(this._cellPoints[i]+e,0,this._cellPoints[i+t]-this._cellPoints[i],0))},n.prototype.getBodyView=function(t){var e=this.rightFirstLayout,t=(t instanceof ct.CellLayoutItem?t:t.layout).root.vindex;return t<this._fixedLayoutCount?this._grid.fixedBodyView:e<=t?this._grid.rightBodyView:this._grid.bodyView},n.prototype.mouseToIndex=function(t,e,i,o){if(o.set(-1,null),!(this._layoutCount<1)){var n=this.grid,r=this._summaryBounds.bottom,s=-1;if(r<=(i-=this._contentBounds.y)&&i<this._footerBounds.y){for(var a=0;a<this._fixedItemCount;a++)if(i>=r+this._fixedItemPoints[a]&&i<r+this._fixedItemPoints[a+1]){s=a,i-=r+this._fixedItemPoints[a];break}if(s<0&&0<this._itemCount){for(a=0;a<this._itemCount;a++)if(i>=r+this._itemPoints[a]&&i<r+this._itemPoints[a+1]){s=a;break}0<=s&&(s+=n.topItem)}}else i>=this._footerBounds.y?s=-2:i<this._headerBounds.y&&(s=-3);if(o.itemIndex=s,t){t=n.getCellViewOf(t),n=t&&n.getBodyView(t),n=n instanceof gt.GridBodyElement&&n.layoutByCell(t);if(n)o.layout=n}}return o},n.prototype.mouseToIndexEx=function(t,e,i,o){if(!(this._layoutCount<1)){var n=this.grid,r=this._topIndex+this._fixedItemCount,s=this._summaryBounds.bottom,a=0;if((i-=this._contentBounds.y)<s)a=-1;else if(i>=this._bodyBounds.bottom&&i<this._footerBounds.y)a=r+this._fullItemCount;else if(i>=this._footerBounds.y)a=r+this._fullItemCount;else{a=-1,i-=s;for(var l=0;l<this._fixedItemCount;l++)if(i>=this._fixedItemPoints[l]&&i<this._fixedItemPoints[l+1]){a=l;break}if(a<0&&0<this._itemCount){for(l=0;l<this._itemCount;l++)if(i>=this._itemPoints[l]&&i<this._itemPoints[l+1]){a=l;break}0<=a&&(a+=r)}}o.itemIndex=a;var h=-1,s=this._gridBounds.x;if(e<s)h=Math.max(0,this._firstLayout-1);else if(e>=this._bodyBounds.right&&e<this._clientRect.right)h=n.visibleLayoutCount-1;else{e-=s;for(l=0;l<this._fixedLayoutCount;l++)if(e>=this._fixedLayoutPoints[l]&&e<this._fixedLayoutPoints[l+1]){h=l;break}if(h<0&&0<this._rightLayoutCount)for(var d=e-this._rightContentBounds.x+this._grid.fixedOptions.colBarWidth+s,l=0;l<this._rightLayoutCount;l++)if(d>=this._rightLayoutPoints[l]&&d<this._rightLayoutPoints[l+1]){h=l+this.rightFirstLayout;break}if(h<0){e=e-this._fixedWidth+this._leftPos;for(l=this._firstLayout;l<=this._lastLayout;l++)if(e>=this._layoutPoints[l-this._fixedLayoutCount]&&e<this._layoutPoints[l-this._fixedLayoutCount+1]){h=l;break}}}0<=h&&h<n.visibleLayoutCount?o.layout=n.getVisibleLayout(h):o.layout=null}return o},n.prototype.cellIsVisible=function(t){var e=t.itemIndex,i=this._fixedItemCount;if(i<=e){if(e<this._topIndex+i)return!1;if(0==this._fullItemCount&&e==this._topIndex+i)return!0;if(e>=this._topIndex+i+this._fullItemCount)return!1}e=t.layout,i=e.col;if(this._fixedLayoutCount<=i){if(i=e.col-this._fixedCellCount,this._cellPoints[i]<this._leftPos)return!1;if(this._cellPoints[i+e.cols]-this._leftPos>this._nonFixedBounds.width)return!1}return!0},n.prototype.clearFocusRequest=function(){this._focusIndex=null},n.prototype.focusIsVisible=function(t){return(t=t||this._focusIndex)&&this.cellIsVisible(t)},n.prototype.makeCellVisible=function(t){this._focusIndex=t.clone()},n.prototype.isAutoRowHeights=function(){return this._autoRowHeights},n.prototype.isRowGrouped=function(){return this._rowGrouped},n.prototype.scrollToNextCell=function(){for(var t=0;t<this._cellCount;t++)if(this._cellPoints[t]>this._leftPos)return this._cellPoints[t];return this._leftPos},n.prototype.scrollToPrevCell=function(){for(var t=this._cellCount-1;0<=t;t--)if(this._cellPoints[t]<this._leftPos)return this._cellPoints[t];return this._leftPos},n.prototype.needRelayout=function(){return this._autoRowHeights&&this._fitStyleChanged&&this._fitStyle==ht.GridFitStyle.EVEN_FILL||this.syncHeight()&&this._fitSyncChanged},n.prototype.$_calcFixedCellPoints=function(t,e){var i=this._layoutCount=e.visibleCount,o=e._cellWidths,n=this._fixedLayoutCount=Math.min(t.colCount,i);if(this._rightLayoutCount=Math.max(0,Math.min(t.rightCount,i-n-1)),this._rightFixed=t.rightFixed,this._cellCount=0,this._fixedCellCount=0,this._rightCellCount=0,this._layouts=[],this._fixedLayoutPoints=[],this._fixedWidth=0,this._rightWidth=0,this._rightBarWidth=0,this._fixedCellPoints=[],0<n){var r=this._layouts,s=this._fixedLayoutPoints,a=this._fixedCellPoints,l=0,h=0;s.push(l),a.push(l);for(var d=0;d<n;d++){for(var u=e.getVisible(d),c=u.cols,_=0;_<c;_++)l+=o[h++],a.push(l);r.push(u),s.push(l)}this._fixedCellCount=this._cellCount=h,this._fixedWidth=s[n]+(this._fixedBarWidth=t.colBarWidth)}},n.prototype.$_calcCellPoints=function(t){var e=t.visibleCount-this._fixedLayoutCount-this._rightLayoutCount,i=t._cellWidths,o=this._layoutPoints=[],n=this._cellPoints=[],r=this._fixedLayoutCount,s=this._layouts;if(this._firstCell=this._lastCell=this._cellCount,(this._layoutsLength=0)<e){var a=0,l=this._cellCount;o.push(a),n.push(a);for(var h=0;h<e;h++){for(var d=t.getVisible(h+r),u=d.cols,c=0;c<u;c++)a+=i[l++],n.push(a);s.push(d),o.push(a)}this._layoutsLength=a,this._cellCount=l,this._lastCell=l-1}},n.prototype.$_calcRightCellPoints=function(t,e){var i=e._cellWidths,o=this._layoutCount,n=this._rightLayoutPoints=[],r=this._rightCellPoints=[],s=this._layouts;if(0<this._rightLayoutCount){var a=0,l=this._cellCount;n.push(a),r.push(a);for(var h=o-this._rightLayoutCount;h<o;h++){for(var d=e.getVisible(h),u=0;u<d.cols;u++)a+=i[l++],r.push(a);s.push(d),n.push(a)}this._rightCellCount=l-this._cellCount,this._cellCount=l,this._rightWidth=n[this._rightLayoutCount]+(this._rightBarWidth=t.rightBarWidth)}},n.prototype.$_calcScrollWidth=function(t){this._scrollWidth=t.width-this._leftContentBounds.width-this._sideContentBounds.width-this._fixedContentBounds.width-this._rightContentBounds.width},n.prototype.$_calcLeftPos=function(){var t,e,i,o,n=this._focusIndex&&this._focusIndex.layout;n&&(e=n.root.vindex,t=this._cellPoints,o=this.grid,e>=this._fixedLayoutCount)&&e<this.rightFirstLayout&&(i=t[e=n.col-this._fixedCellCount],o=o.displayOptions.horzPageScroll&&"keydown"===o._eventFrom&&o._prevTop===this._topIndex,i<this._leftPos?(o&&this._leftPos>=t[1+e]&&(i=i-(this.gridBounds.width+t[e]-t[1+e])+(this._fixedContentBounds.width+this._rightContentBounds.width)),this._leftPos=i):(n=t[e+n.cols]-this._leftPos-this._scrollWidth,0<(n=o&&t[e]-this._leftPos>=this._scrollWidth?Math.max(t[e]-t[this.getLeftCell()],n):n)&&(this._leftPos=Math.min(i,this._leftPos+n)))),this._leftPos=Math.max(0,Math.min(this._leftPos,this._layoutsLength-this._scrollWidth)),this._firstLayout=this._fixedLayoutCount,this._lastLayout=0<this._layoutCount?this._layoutCount-this._rightLayoutCount-1:-1},n.prototype.$_checkFitting=function(t,e){var i,o,t=t.fitStyle;return t!=ht.GridFitStyle.NONE&&0<(o=(i=this._cellPoints).length)&&(t==ht.GridFitStyle.EVEN_FILL||0<e-i[o-1])?t:void 0},n.prototype.$_fitColumns=function(t,f,e){var g=this;if(t.fitStyleIncludeFixed&&0<this._fixedCellCount+this._rightCellCount){var i=[this._fixedLayoutPoints,this._layoutPoints,this._rightLayoutPoints],o=0;i.forEach(function(t){0<t.length&&(o+=t[t.length-1])});var n=this._clientRect.width-this._leftContentBounds.width-this._sideContentBounds.width-this._scrollBarWidth-(this._fixedCellCount?this._fixedBarWidth:0)-(this._rightCellCount?this._rightBarWidth:0),m=(i.forEach(function(t){for(var e=1;e<t.length;e++)t[e]=Math.round(t[e]*(n/o))}),0);i.forEach(function(t,e){var i=0===e?g._fixedCellPoints:1===e?g._cellPoints:g._rightCellPoints,o=t.length,n=f._cellWidths,r=0;i.length=0,i.push(r);for(var s=0;s<o-1;s++){var a=g._cellLayouts.getVisible(m++),l=a._cellWidth,h=t[s+1]-t[s],d=h/l,u=a.hcol,c=a.cols,_=r;a._setFitWidth(h);for(var p=0;p<c-1;p++)_+=n[u+p]*d,i.push(Math.round(_));r+=h,i.push(Math.round(r))}i[i.length-1]=t[o-1]}),this._layoutsLength=re.Utils.getLast(this._layoutPoints),this._fixedWidth=this._fixedCellCount?re.Utils.getLast(this._fixedLayoutPoints)+this._fixedBarWidth:0,this._rightWidth=this._rightCellCount?re.Utils.getLast(this._rightLayoutPoints)+this._rightBarWidth:0,this._fixedContentBounds.width=this._fixedWidth,this.$_measureFixedPane(this.grid),this._contentBounds.left=this._fixedContentBounds.right,this._contentBounds.width=this._layoutsLength,this.$_measureContentPane(this.grid),this._rightContentBounds.left=this._contentBounds.right+this._scrollBarWidth,this._rightContentBounds.width=this._rightWidth,this.$_measureRightPane(this.grid),this._nonFixedBounds=new nt.Rectangle(this._fixedContentBounds.right,this._fixedContentBounds.y,this._layoutsLength,this._fixedContentBounds.height)}else{for(var r=0;r<this._layoutCount;r++)(I=this._cellLayouts.getVisible(r)).isFixed&&I._clearFitWidth();for(var s=this._layoutsLength,a=this._layoutPoints,l=a.length,h=this._fixedLayoutCount,d=[],r=1;r<a.length;r++)d.push(a[r]-a[r-1]);if(0<l){var i=t.fitStyle,u=this._layouts;if(i==ht.GridFitStyle.EVEN||i==ht.GridFitStyle.EVEN_FILL)for(r=1;r<l;r++)a[r]=a[r]*e/s;else if(i==ht.GridFitStyle.FILL){for(var c=0,_=0,r=0;r<l-1;r++){var p=u[r+h].fillWidth;0<p?_+=p:c+=d[r]}if(0<_)for(c=e-c,r=1;r<l;r++){var y=(I=u[r-1+h]).fillWidth;a[r]=0<y?a[r-1]+y*c/_:a[r-1]+d[r-1]}else for(r=1;r<l;r++)a[r]=a[r]*e/s}for(var v=0,r=0;r<l-1;r++)a[r]=Math.round(a[r]);for(r=1;r<l-1;r++){var C=a[r]-a[r-1];C<2?a[r]+=v=2-C:0<v&&2+v<C&&(a[r]-=v,v=0)}var w=this._cellPoints=[],x=f._cellWidths,b=0;w.push(b);for(r=0;r<l-1;r++){var I,E=(I=this._cellLayouts.getVisible(r+h))._cellWidth,S=a[r+1]-a[r],R=S/E,T=I.hcol,D=I.cols,k=b;I._setFitWidth(S);for(var M=0;M<D-1;M++)k+=x[T+M]*R,w.push(Math.round(k));b+=S,w.push(Math.round(b))}w[w.length-1]=a[l-1]}this._layoutsLength=a[l-1]=e}},n.prototype.$_measureTopPane=function(t){this._doMeasureTopPane(t,this._topContentBounds)},n.prototype._doMeasureTopPane=function(t,e){e.height=0},n.prototype.$_measureViewHeights=function(t,e){var i=0,t=(t.header.visible?(this._headerBounds=e.clone(),i=t.headerView.measure(t,e.width,e.height).height,this._headerBounds.height=i):this._headerBounds?this._headerBounds.setEmpty():this._headerBounds=new nt.Rectangle,this._fixedHeaderBounds=this._headerBounds.clone(),this._rightHeaderBounds=this._headerBounds.clone(),this._headBounds.y=e.y,this._headBounds.height=i,e.topBy(i),i=0,t.filterPanel.visible?(this._filterPanelBounds=e.clone(),i=t.filterPanelView.measure(t,e.width,e.height).height,this._filterPanelBounds.height=i):(this._filterPanelBounds=this._filterPanelBounds||new nt.Rectangle,this._filterPanelBounds.setEmpty()),this._fixedFilterBounds=this._filterPanelBounds.clone(),this._rightFilterBounds=this._filterPanelBounds.clone(),this._filterBounds.y=e.y,this._filterBounds.height=i,e.topBy(i),i=0,t.headerSummaries.canShow?(this._summaryBounds=e.clone(),i=t.headerSummaryView.measure(t,e.width,e.height).height,t.fixedHeaderSummaryView,this._summaryBounds.height=i):this._summaryBounds?this._summaryBounds.setEmpty():this._summaryBounds=new nt.Rectangle,this._fixedSummaryBounds=this._summaryBounds.clone(),this._rightSummaryBounds=this._summaryBounds.clone(),this._sumBounds.y=e.y,this._sumBounds.height=i,e.topBy(i),i=0,t.footers.canShow?(this._footerBounds=e.clone(),i=t.footerView.measure(t,e.width,e.height).height,this._footerBounds.height=i):this._footerBounds?this._footerBounds.setEmpty():this._footerBounds=new nt.Rectangle,this._fixedFooterBounds=this._footerBounds.clone(),this._rightFooterBounds=this._footerBounds.clone(),this._footBounds.y=e.bottom-this._footerBounds.height,this._footBounds.height=i,this._sumBounds.bottom);i=this._footBounds.y-t,this._rowBarBounds.y=t,this._rowBarBounds.height=i},n.prototype.$_sortSections=function(t){t=[t.rowIndicator,t.stateBar,t.checkBar];return t.sort(function(t,e){var i=t.displayOrder,o=e.displayOrder;return i==o?t.staticOrder-e.staticOrder:i-o}),t},_dp(n,"sectionObjects",{get:function(){return this._sectionObjects}}),n.prototype.$_measureLeftPane=function(t){this._sectionObjects=this.$_sortSections(t);var e=this._leftContentBounds.clone().move();this._headBounds=e.clone(),this._sumBounds=e.clone(),this._footBounds=e.clone(),this._filterBounds=e.clone(),t=t.rowBarContainer.measure(t,e.width,e.height),this._rowBarBounds=e.clone(),this._rowBarBounds.width=t.width,this._leftContentBounds.width=t.width,e.leftBy(t.width),this._headBounds.width=this._sumBounds.width=this._footBounds.width=this._filterBounds.width=this._leftContentBounds.width},n.prototype._measureSidePane=function(t){var e;t.isSidePaneVisible()?(e=this._sideContentBounds.clone(),t=t.sideContentPane.measure(t,e.width,e.height),this._sideContentBounds.width=t.width):this._sideContentBounds.width=0},n.prototype.$_measureFixedPane=function(t){var e=this._fixedContentBounds.width=this._fixedWidth,i=this._fixedContentBounds.clone().move();this._fixedHeaderBounds.x=i.x,this._fixedHeaderBounds.y=i.y,this._fixedHeaderBounds.width=i.width,i.topBy(this._fixedHeaderBounds.height),this._fixedFilterBounds.x=i.x,this._fixedFilterBounds.y=i.y,this._fixedFilterBounds.width=i.width,i.topBy(this._fixedFilterBounds.height),0<e&&(t.fixedFilterView._rowPoints=t.filterPanelView._rowPoints.slice()),this._fixedSummaryBounds.x=i.x,this._fixedSummaryBounds.y=this._fixedFilterBounds.bottom,this._fixedSummaryBounds.width=i.width,i.topBy(this._fixedSummaryBounds.height),0<e&&(t.fixedHeaderSummaryView._rowPoints=t.headerSummaryView._rowPoints.slice()),this._fixedFooterBounds.x=i.x,this._fixedFooterBounds.y=i.bottom-this._fixedFooterBounds.height,this._fixedFooterBounds.width=i.width,i.bottomBy(-this._fixedFooterBounds.height),0<e&&(t.fixedFooterView._rowPoints=t.footerView._rowPoints.slice()),this._fixedBodyBounds=i},n.prototype.$_measureRightPane=function(t){var e=this._rightWidth,i=(this._rightContentBounds.width=e,this._rightContentBounds.clone());i.x=this._rightBarWidth,i.y=0,i.width-=i.x,this._rightHeaderBounds.x=i.x,this._rightHeaderBounds.y=i.y,this._rightHeaderBounds.width=i.width,i.topBy(this._rightHeaderBounds.height),this._rightFilterBounds.x=i.x,this._rightFilterBounds.y=i.y,this._rightFilterBounds.width=i.width,i.topBy(this._rightFilterBounds.height),0<e&&(t.rightFilterView._rowPoints=t.filterPanelView._rowPoints.slice()),this._rightSummaryBounds.x=i.x,this._rightSummaryBounds.y=this._rightFilterBounds.bottom,this._rightSummaryBounds.width=i.width,i.topBy(this._rightSummaryBounds.height),0<e&&(t.rightHeaderSummaryView._rowPoints=t.headerSummaryView._rowPoints.slice()),this._rightFooterBounds.x=i.x,this._rightFooterBounds.y=i.bottom-this._rightFooterBounds.height,this._rightFooterBounds.width=i.width,i.bottomBy(-this._rightFooterBounds.height),0<e&&(t.rightFooterView._rowPoints=t.footerView._rowPoints.slice()),this._rightBodyBounds=i},n.prototype.$_measureContentPane=function(t){var e=this._layoutsLength,e=(this._contentBounds.width=e,this._contentBounds.clone());e.x=e.y=0,this._headerBounds&&(this._headerBounds.x=e.x,this._headerBounds.y=e.y,this._headerBounds.width=e.width,e.topBy(this._headerBounds.height)),this._filterPanelBounds&&(this._filterPanelBounds.x=e.x,this._filterPanelBounds.y=e.y,this._filterPanelBounds.width=e.width,e.topBy(this._filterPanelBounds.height)),this._summaryBounds&&(this._summaryBounds.x=e.x,this._summaryBounds.y=this._filterPanelBounds.bottom,this._summaryBounds.width=e.width,e.topBy(this._summaryBounds.height)),this._dataBounds=e.clone(),this._footerBounds&&(this._footerBounds.x=e.x,this._footBounds.y=this._footerBounds.y=e.bottom-this._footerBounds.height,this._footerBounds.width=e.width,e.bottomBy(-this._footerBounds.height)),this._bodyBounds=e},n.prototype.getRowHeightOfCallback=function(t,e){var i=t.getItem(e),o=t.displayOptions.rowHeightCallback;if(o){var n=o.call(this,t.handler,i.type,e),r=[],s=void 0,a=this.trs;if(null!=n){if(Array.isArray(n))for(r=n.slice(0,a),l=n.length;l<a;l++)r.push(this.minRowHeight);else{for(var s=0,l=1;l<a;l++){var h=Math.max(this.minRowHeight,l%2?Math.floor(n/a):Math.round(n/a));r.push(h),s+=h}r.push(Math.max(n-s,this.minRowHeight))}o=r.reduce(function(t,e){return t+e},0);return i.heights=r.slice(),o}}},n.prototype.$_getItemHeight=function(t,e){var i=t.getItem(e),o=i.height;if(!isNaN(o))return o;if(this._autoRowHeights)return this._minItemHeight;if(t.displayOptions.rowHeightCallback&&re.Utils.included(i.type,ht.ItemType.ROW,ht.ItemType.TREE)){o=this.getRowHeightOfCallback(t,e);if(o)return o}return i.heights=null,this._itemHeight},n.prototype.$_calcItemPoints=function(t){var e=this.grid;if("mousedown"===e._eventFrom&&this._focusIndex&&this._topIndex<this._focusIndex.itemIndex-this._fixedItemCount-Math.max(0,this._fullItemCount-1))return;t=null==t||t;var i=e.itemSource,o=this.syncHeight(),n=o?1/0:this._itemsBounds,r=(this._topIndex=o?0:this._topIndex,0),s=i?Math.min(i.fixedCount,i.itemCount):0;if(this._fixedItemCount=0,this._fixedBarHeight=0,this._fixedHeight=0,this._fixedItemPoints=[],0<s){this._fixedItemPoints.push(r);for(var a=0;a<s&&r<n;a++)r+=this.$_getItemHeight(e,a),this._fixedItemPoints.push(r),this._fixedItemCount++;this._fixedHeight=r,r+=this._fixedBarHeight=e.fixedOptions.rowBarHeight}var l=e.itemCount-this._fixedItemCount;if(this._itemPoints=[r],this._itemCount=0,(this._fullItemCount=0)<l&&r<n){o=this._topIndex,i=-1;this._focusIndex&&(i=this._focusIndex.itemIndex)>=this._fixedItemCount&&i<o+this._fixedItemCount&&(d=i-this._fixedItemCount,null==(h=e.topIndexChanging(o,i-this._fixedItemCount-o,!0,!1))||isNaN(h)||(d=this._topIndex+h),o=this._topIndex=d);for(a=o;a<l&&r<n;a++)r+=this.$_getItemHeight(e,a+this._fixedItemCount),this._itemCount++,this._itemPoints.push(r);if(this._fullItemCount=this._itemCount-(n<r?1:0),t&&i>=this._topIndex+this._fixedItemCount+this._fullItemCount){var h,r=0<this.fixedItemCount?this._fixedHeight+e.fixedOptions.rowBarHeight:0,d=i-this._fixedItemCount-Math.max(0,this._fullItemCount-1)-this._topIndex;null==(h=e.topIndexChanging(this._topIndex,d,t,!1))||isNaN(h)||(d=h),this._topIndex+=d,this._itemPoints=[r],this._itemCount=0,this._fullItemCount=0;for(a=this._topIndex;a<e.itemCount-this._fixedItemCount&&r<n;a++)r+=this.$_getItemHeight(e,a+this._fixedItemCount),this._itemCount++,this._itemPoints.push(r);this._fullItemCount=this._itemCount-(n<=r?1:0)}}else this._topIndex=0},n.prototype.$_updateScrollInfo=function(t,e,i){var o=this._reqScrollBarWidth,n=this._reqScrollBarHeight,i=i?this._tableItemPoints:this._itemPoints,i=i[i.length-1],r=this._layoutsLength,e=e.fitStyle==ht.GridFitStyle.EVEN_FILL,s=this.syncHeight(),t=(this._hscrolled=r>this._scrollWidth,this._vscrolled=!s&&(0<this._topIndex||t.itemCount>this._itemCount+this._fixedItemCount||i>this._bodyBounds.height),0<n&&this._hscrolled&&!e),a=0<o&&this._vscrolled;t!=a&&(t?0<o&&!s&&(a=i>this._bodyBounds.height-n):0<n&&!e&&(t=r>this._scrollWidth-o)),this._hscrollBar=t,this._vscrollBar=a,this._hscrolled=this._hscrolled||t,this._vscrolled=this._vscrolled||a,this._scrollBarWidth=a?o:0,this._scrollBarHeight=t?n:0,this._scrollWidth-=this._scrollBarWidth},n.prototype.$_recalcScrollInfo=function(t){this._scrollWidth+=this._scrollBarWidth,this._bodyBounds.height+=this._scrollBarHeight,this._gridBounds.height+=this._scrollBarHeight,this._clientRect.height+=this._scrollBarHeight,this.$_updateScrollInfo(t,t.displayOptions,!0),this._bodyBounds.height-=this._scrollBarHeight,this._gridBounds.height-=this._scrollBarHeight,this._clientRect.height-=this._scrollBarHeight},n.prototype.$_adjustVerticals=function(){var t=this._scrollBarHeight,e=this._itemPoints;if(0<t){this._leftContentBounds.height-=t,this._footBounds.y-=t,this._rowBarBounds.height-=t,this._sideContentBounds.height-=t,this._fixedContentBounds.height-=t,this._fixedFooterBounds.y-=t,this._fixedBodyBounds.height-=t,this._nonFixedBounds.height-=t,this._contentBounds.height-=t,this._footerBounds.y-=t,this._bodyBounds.height-=t,this._rightContentBounds.height-=t,this._rightFooterBounds.y-=t,this._rightBodyBounds.height-=t;for(var i=this.syncHeight()?1/0:this._bodyBounds.height;e[e.length-2]>i;)this._itemCount--,e.pop();this._fullItemCount=this._itemCount-(e[this._itemCount]>=i?1:0);t=this._focusIndex?this._focusIndex.itemIndex:-1;if(0<=t&&this._itemCount>this._fullItemCount&&t>=this._topIndex+this._fixedItemCount+this._fullItemCount){for(var o=this.grid,n=e[this._itemCount],r=0;i<n;)n-=e[++r];t=o._prevTop+1!==this._topIndex;if(0<r&&"mousedown"!==o._eventFrom){var s=o.topIndexChanging(this._topIndex,r,!!this._focusIndex,!0);null==s||isNaN(s)||(r=s),e.splice(0,r),this._topIndex+=r,this._itemCount-=r,this._fullItemCount-=r;for(var n=e[0],a=0;a<e.length;a++)e[a]-=n;if(n=e[e.length-1],o.itemCount<this._topIndex+this._fixedItemCount+this._itemCount)this._itemCount--;else for(;n<i&&this._topIndex+this._fixedItemCount+this._itemCount<o.itemCount;)e.push(n+=this.$_getItemHeight(o,this._topIndex+this._fixedItemCount+this._itemCount)),this._itemCount++,this._fullItemCount++;t&&(this._topIndex,this._fixedItemCount,this._fullItemCount)}}}this._dataBounds.height=e[e.length-1],this._fullItemCount==this._itemCount&&(s=e[e.length-1],this._rowBarBounds.height=s)},n.prototype.$_adjustHorizontals=function(t){this._rightContentBounds.x-=this._scrollBarWidth,this.$_calcLeftPos();var e=this._cellPoints,i=e.length,o=this._leftPos,n=o+this._nonFixedBounds.width;this._startCell=this._endCell=this._firstCell;for(var r=0;r<i;r++)if(e[r]>o){this._startCell+=r-1;break}for(r=i-2;0<=r;r--)if(e[r]<n){this._endCell+=r;break}},n.prototype.$_calcTableRowPoints=function(){var t=this._trs,e=this._items,i=this._fixedItemCount,o=this._itemCount+i,n=this._fixedTableRowPoints=[],r=this._tableRowPoints=[],s=this._dataRowHeights,a=0;if(this._fixedTableRowCount=this._tableRowCount=0,(this._fixedDataHeight=this._dataHeight=0)<i){for(var l=this._fixedItemPoints;a<i;a++){var h=l[a],d=e[a];if(n.push(h),this._fixedTableRowCount++,d.isData)for(var u=d.heights||s,c=Math.floor((l[a+1]-h)/t),_=Math.round(l[a+1]-h)/t,p=1;p<t;p++)n.push(h+=u[p-1]||(p%2?c:_)),this._fixedTableRowCount++}n.push(this._fixedDataHeight=this._fixedItemPoints[i])}if(0<this.itemCount){for(l=this._itemPoints;a<o;a++){h=l[a-i],c=l[a-i+1]-h;if(d=e[a],r.push(h),this._tableRowCount++,d.isData){u=d.heights||s;for(var f=Math.floor(c/t),_=Math.round(c/t),p=1;p<t;p++)r.push(h+=u[p-1]||(p%2?f:_)),this._tableRowCount++}}r.push(this._dataHeight=l[this._itemCount]),this._dataHeight+=this._fixedDataHeight}},n.prototype._doMeasure=function(t,e,i){var o=this._grid,n=o.displayOptions,r=o.fixedOptions,s=t.clone(),e=(this._refreshMode=n.refreshMode,this._autoRowHeights=n.rowHeight<0,this._items=[],this._trs=this._cellLayouts.dataRows,this._rowGrouped=this.rowGrouped||this.mergedRowGrouped,this._hscrolled=this._vscrolled=!1,this._hscrollBar=this._vscrollBar=!1,this._reqScrollBarWidth=e,this._reqScrollBarHeight=i,this._minRowHeight=n.minTableRowHeight,this._maxHeight=n.maxRowHeight,this._minItemHeight=Math.max(this._minRowHeight*this._trs,n.minRowHeight),1==this._trs&&(this._minRowHeight=this.minItemHeight),o.heightMeasurer.measure(o),this.$_calcFixedCellPoints(r,this._cellLayouts),this.$_calcCellPoints(this._cellLayouts),this.$_calcRightCellPoints(r,this._cellLayouts),this._itemHeight=this._calcDefaultRowHeight(o),o.container._containerDiv),i=(!this.syncHeight()&&this._oldSyncHeight&&this._oldSyncHeight!==o.displayOptions.syncGridHeight&&e.style.height!==o.container._orgCssHeight&&(e.style.height=o.container._orgCssHeight),!function(){this._topContentBounds=s.clone(),this.$_measureTopPane(o),s.topBy(this.topPanelVisible?this._topContentBounds.height:0),this._leftContentBounds=s.clone(),this.$_measureLeftPane(o),s.leftBy(this._leftContentBounds.width),this._sideContentBounds=s.clone(),this._measureSidePane(o),s.leftBy(this._sideContentBounds.width),this.$_measureViewHeights(o,s.clone().move()),this._fixedContentBounds=s.clone(),this.$_measureFixedPane(o),s.leftBy(this._fixedContentBounds.width),this._rightContentBounds=s.clone(),this.$_measureRightPane(o),this._rightContentBounds.x=s.right-this._rightContentBounds.width,s.width-=this._rightContentBounds.width,this._contentBounds=s.clone(),this.$_measureContentPane(o),this._clientRect=t.clone(),this._nonFixedBounds=new nt.Rectangle(this._fixedContentBounds.right,this._fixedContentBounds.y,t.width-this._fixedContentBounds.right-this.rightContentBounds.width,this._fixedContentBounds.height)}.call(this),this._itemsBounds=t.height-this._topContentBounds.height-this._headerBounds.height-this._filterPanelBounds.height-this._summaryBounds.height-this._footBounds.height+1,this.$_calcItemPoints(),this.$_calcScrollWidth(t),this.$_updateScrollInfo(o,n),this._fitStyle);(this._fitStyle=this.$_checkFitting(n,this._scrollWidth))?(this.$_fitColumns(n,this.cellLayouts,this.scrollWidth),this._contentBounds.width=this._layoutsLength):o._activeCellLayout.$_clearFitWidths(),(this._fitStyleChanged=this._fitStyle!=i)&&o.clearRowHeights(!1),this.$_adjustVerticals(),this.$_adjustHorizontals(t),this._gridBounds=new nt.Rectangle(this._fixedContentBounds.x,this._fixedContentBounds.y,t.right-this._fixedContentBounds.x-this._scrollBarWidth,+this._footerBounds.y),this._clientRect.width-=this._scrollBarWidth,this._clientRect.height-=this._scrollBarHeight,this._nonFixedBounds.width-=this._scrollBarWidth,this._topContentBounds.width-=this._scrollBarWidth},n.prototype.$_layoutTopPane=function(t,e){var i=this._topContentBounds;this.topPanelVisible?e.setRect(i):e.setBounds(-10,-10,1,1),this._doLayoutTopPane(t,e)},n.prototype._doLayoutTopPane=function(t,e){},n.prototype.$_layoutLeftPane=function(t,e){var i=this._leftContentBounds;function o(t,e,i,o){t._dom.appendChild(t._table),t.visible=e.visible,i&&(t.setRect(o),t.layoutContent(this))}(e.visible=!i.isEmpty)?(e.setRect(i),o.call(this,t.headView,t.header,!1,this._headBounds),o.call(this,t.sumView,t.headerSummaries,!0,this._sumBounds),o.call(this,t.footView,t.footer,!0,this._footBounds),o.call(this,t.filterView,t.filterPanel,!0,this._filterBounds),t.rowBarContainer.visible=t.rowIndicator.visible||t.stateBar.visible||t.checkBar.visible):[t.headView,t.sumView,t.footView].forEach(function(t){t&&re.Utils.detach(t._table)})},n.prototype._layoutSidePane=function(t,e){var i=this._sideContentBounds;e.setRect(i),(e.visible=!i.isEmpty)&&e.layoutContent(this,i.width,i.height)},n.prototype._prepareItems=function(t){for(var e=this._topIndex+this._fixedItemCount,i=0;i<this._fixedItemCount;i++){var o=this._rs.getItem(i);this._items.push(o)}for(var n=this.grid.bodyView,r=t?n._getTableRowCount(this):this._itemCount,i=0;i<r&&(o=this._rs.getItem(i+e));i++)this._items.push(o);t&&(this._itemCount=this._items.length-this._fixedItemCount)},n.prototype.$_layoutFixedPane=function(t,e){var i,o=this._fixedContentBounds;(e.visible=!o.isEmpty)?(e.setRect(o),((i=t.fixedHeaderView).visible=t.header.visible)&&(i.setRect(this._fixedHeaderBounds),i.layoutContent(this)),((i=t.fixedHeaderSummaryView).visible=t.headerSummaries.canShow)&&(i.setRect(this._fixedSummaryBounds),i.layoutContent(this)),((i=t.fixedFilterView).visible=t.filterPanel.visible)&&(i.setRect(this._fixedFilterBounds),i.layoutContent(this)),((i=t.fixedFooterView).visible=t.footers.canShow)&&(i.setRect(this._fixedFooterBounds),i.layoutContent(this)),(i=t.fixedBodyView).visible=!0,e.layoutContent(this,o.width,o.height)):(t.fixedHeaderView.visible=!1,t.fixedHeaderSummaryView.visible=!1,t.fixedFilterView.visible=!1,t.fixedFooterView.visible=!1,t.fixedBodyView.visible=!1)},n.prototype.$_layoutRightPane=function(t,e){var i,o=this._rightContentBounds;(e.visible=!o.isEmpty)?(this._rightFixed||this._hscrolled||(o.x=this._contentBounds.right),e.setRect(o),((i=t.rightHeaderView).visible=t.header.visible)&&(i.setRect(this._rightHeaderBounds),i.layoutContent(this)),((i=t.rightHeaderSummaryView).visible=t.headerSummaries.canShow)&&(i.setRect(this._rightSummaryBounds),i.layoutContent(this)),((i=t.rightFilterView).visible=t.filterPanel.visible)&&(i.setRect(this._rightFilterBounds),i.layoutContent(this)),((i=t.rightFooterView).visible=t.footers.canShow)&&(i.setRect(this._rightFooterBounds),i.layoutContent(this)),(i=t.rightBodyView).visible=!0,e.layoutContent(this,o.width,o.height)):(t.rightHeaderView.visible=!1,t.rightHeaderSummaryView.visible=!1,t.rightFilterView.visible=!1,t.rightFooterView.visible=!1,t.rightBodyView.visible=!1)},n.prototype.$_layoutContentPane=function(t,e){var i,o=this._contentBounds;(e.visible=!o.isEmpty)?(o.x-=this._leftPos,e.setRect(o),((i=t.headerView).visible=t.header.visible)&&(this._headerBounds.width=o.width,i.setRect(this._headerBounds),i.layoutContent(this)),((i=t.filterPanelView).visible=t.filterPanel.visible)&&(this._filterPanelBounds.width=o.width,i.setRect(this._filterPanelBounds),i.layoutContent(this)),((i=t.headerSummaryView).visible=t.headerSummaries.canShow)&&(this._summaryBounds.width=o.width,i.setRect(this._summaryBounds),i.layoutContent(this)),((i=t.footerView).visible=t.footers.canShow)&&(this._footerBounds.width=o.width,i.setRect(this._footerBounds),i.layoutContent(this)),(i=t.bodyView).visible=!0,this._bodyBounds.width=o.width,e.layoutContent(this,o.width,o.height)):t.headerView.visible=t.headerSummaryView.visible=t.footerView.visible=t.bodyView.visible=!1},n.prototype.$_layoutWatingPane=function(t,e){t=t.bounds.clone();e.setRect(t),e.layoutContent(this,t.width,t.height)},n.prototype._doLayout=function(t,e){this._prepareItems(this._autoRowHeights),this.$_calcTableRowPoints(),o=t._topContentPane,this.$_layoutTopPane(t,o),o=t._leftContentPane,this.$_layoutLeftPane(t,o);var i=Date.now(),o=t._fixedContentPane;this.$_layoutFixedPane(t,o),o=t._rightContentPane,this.$_layoutRightPane(t,o),o=t._contentPane,this.$_layoutContentPane(t,o),re.Utils.trace("LAYOUT CONTENTS: "+(Date.now()-i))},n.prototype.$_adjustHeader=function(t,e,i,o){var n,r=t.fixedHeaderView,s=t.rightHeaderView,a=t.headerView,t=t.header.height,l=a.height,h=0,d=!1;return(d=!(d=!(d=i?r.$_checkHeight():d)&&o?s.$_checkHeight():d)&&e?a.$_checkHeight():d)&&(d=[],n=0,i&&(r.$_getHeights(d),0<t?r.$_distributeHeights(t,d):n=Math.max(n,r.$_adjustHeights(d))),o&&(s.$_getHeights(d),0<t?s.$_distributeHeights(t,d):n=Math.max(n,s.$_adjustHeights(d))),e&&(a.$_getHeights(d),0<t?a.$_distributeHeights(t,d):n=Math.max(n,a.$_adjustHeights(d))),t<0)&&(h+=n-l,this._headBounds.height=n,i&&this._fixedHeaderBounds.height!=n&&(this._fixedHeaderBounds.height=n,r.setRect(this._fixedHeaderBounds),r.$_adjustHeights(d)),o&&this._rightHeaderBounds.height!=n&&(this._rightHeaderBounds.height=n,s.setRect(this._rightHeaderBounds),s.$_adjustHeights(d)),e)&&this._headerBounds.height!=n&&(this._headerBounds.height=n,a.setRect(this._headerBounds),a.$_adjustHeights(d)),h},n.prototype._adjustLayout=function(t,e){var i,o,n=this._autoRowHeights,r=t._fixedContentPane,s=t._rightContentPane,a=t._contentPane,l=t.fixedHeaderView,h=t.rightHeaderView,d=t.headerView,u=t.headView.visible,r=r.visible,s=s.visible,a=a.visible,c=0,_=0,d=this.$_adjustHeader(t,a,r&&d.visible&&l.visible,s&&h.visible),p=(0!=d&&(_=this._fixedFilterBounds.y=this._rightFilterBounds.y=this._filterPanelBounds.y=this._filterBounds.y+=d,r&&(t.fixedFilterView.y=_),s&&(t.rightFilterView.y=_),a&&(t.filterPanelView.y=_),u)&&(t.filterView.y=_),0!=d&&(this._fixedSummaryBounds.y=this._rightSummaryBounds.y=this.summaryBounds.y=this._sumBounds.y=this._filterBounds.bottom),t.headerSummaries.canShow&&0!=d&&(r&&(t.fixedHeaderSummaryView.y=this._fixedSummaryBounds.y),s&&(t.rightHeaderSummaryView.y=this._rightSummaryBounds.y),a&&(t.headerSummaryView.y=this._summaryBounds.y),u)&&(t.sumView.y=this._sumBounds.y),e.topBy(this._headBounds.height+this._sumBounds.height+this._filterBounds.height),0!=d&&(_=this._sumBounds.bottom,c=Math.min(e.height,this._rowBarBounds.height),this._fixedBodyBounds.y=this.bodyBounds.y=this._rightBodyBounds.y=_,this._fixedBodyBounds.height=this._bodyBounds.height=this._rightBodyBounds.height=c),(l=t.fixedBodyView).visible&&l.setRect(this._fixedBodyBounds),(l=t.bodyView).visible&&l.setRect(this._bodyBounds),(l=t.rightBodyView).visible&&l.setRect(this._rightBodyBounds),this.$_layoutBodyRows(t,r,a,s,this._bodyBounds.height),this.$_adjustTableRowHeights(),n&&this.$_recalcScrollInfo(t),this.syncHeight()?(h=this.topContentBounds.height+this.headerBounds.height+this.footerBounds.height+this.summaryBounds.height+this.scrollBarHeight+this._filterBounds.height,u=t.container._containerDom,d=t.container._containerDiv,p=u.offsetWidth-u.clientWidth,o=d.offsetHeight,i=this._tableItemPoints[this._tableItemPoints.length-1],(this._fitSyncHeight=0<this.itemCount&&(o<=h+i+p||t.displayOptions.syncGridHeight===ht.SyncGridHeight.ALWAYS))?d.style.height=h+i+p+"px":(t.recallHeight(),i=o-h-p+(this.topPanelVisible?0:1)),d=new nt.Rectangle(0,0,u.clientWidth,u.clientHeight),t.setRect(d),this._topContentBounds.width=d.width,this.$_layoutTopPane(t,this.grid._topContentPane),this._bodyBounds.height=this._fixedBodyBounds.height=this._rightBodyBounds.height=i,t.bodyView.setRect(this._bodyBounds),t.fixedBodyView.setRect(this._fixedBodyBounds),t.rightBodyView.setRect(this._rightBodyBounds),this._contentBounds.height=this._fixedContentBounds.height=this._rightContentBounds.height=this._headerBounds.height+this._summaryBounds.height+this._bodyBounds.height+this._footerBounds.height+this._filterBounds.height,this._contentBounds.x=this._leftContentBounds.width+this._sideContentBounds.width+this._fixedContentBounds.width,this.$_layoutContentPane(t,t._contentPane),this.$_layoutFixedPane(t,t._fixedContentPane),this.$_layoutRightPane(t,t._rightContentPane),this._gridBounds.height=this._headerBounds.height+this._summaryBounds.height+this._bodyBounds.height+this._filterBounds.height,this._footBounds.y=this._footerBounds.y=this._fixedFooterBounds.y=this._rightFooterBounds.y=this._bodyBounds.bottom,t.footView.setRect(this._footBounds),t.footerView.setRect(this._footerBounds),t.fixedFooterView.setRect(this._fixedFooterBounds),t.rightFooterView.setRect(this._rightFooterBounds),e=this._gridBounds.clone()):this._fitSyncHeight=!1,0<this._topIndex&&(o=n?this._minItemHeight:this._itemHeight,this._contentBounds.y+this._dataBounds.bottom+o<=this._gridBounds.bottom&&(n?this.$_fillBottomAuto(t,r,a,s,this._bodyBounds.height):this.$_fillBottomFixed(t,r,a,s,this._bodyBounds.height)),0==this._topIndex)&&(h=this._vscrollBar,this.$_recalcScrollInfo(t),this._vscrollBar!=h)&&this._fitStyle&&(this.$_layoutBodyRows(t,r,a,s,this._bodyBounds.height,!1),this.$_adjustTableRowHeights()),t.fixedBodyView.visible&&t.fixedBodyView.$_resetCellHeights2(this,n),t.bodyView.visible&&t.bodyView.$_resetCellHeights2(this,n),t.rightBodyView.visible&&t.rightBodyView.$_resetCellHeights2(this,n),this._tableItemPoints);this._dataBounds.height=p[p.length-1],_=this._sumBounds.bottom,c=Math.min(e.height,this._dataBounds.height),this._rowBarBounds.y=_,this._rowBarBounds.height=c,r&&t._fixedContentPane.layoutBars(this,this._fixedContentBounds.width,this._fixedContentBounds.height),s&&t._rightContentPane.layoutBars(this,this._rightContentBounds.width,this._rightContentBounds.height),(l=t.headView).visible&&(l.setRect(this._headBounds),l.layoutContent(this)),t.rowBarContainer.setRect(this._rowBarBounds),t.rowBarContainer.layoutContent(this)},n.prototype.$_layoutBodyRows=function(c,t,e,i,o,n){function r(i,o,n,r){s._items.push(i),p.forEach(function(t,e){t&&t.layoutRow(o,N[e],n,r,i)})}function V(t,e,o,i){var n=t.height,r=[];if(!c.displayOptions.refCalcHeights||isNaN(n)){for(var s=0;s<g;s++)r[s]=0;p.forEach(function(t){for(var e=t&&t._tbody.children,i=0;e&&i<g;i++)r[i]=Math.round(Math.max(r[i],f,e[o+i].offsetHeight))}),t.heights=r}else if(t.heights)r=t.heights;else{for(var a,l=0,s=0;s<g;s++)l+=a=s%2?Math.floor(n/g):Math.round(n/g),r.push(a);r.push(T-l)}var n=0,h=r.reduce(function(t,e){return t+e},0)+3;if(m<h){for(var d=m/h,h=m,u=0;u<r.length-1;u++)h-=r[u]=Math.max(f,Math.floor(r[u]*d));r[r.length-1]=Math.max(f,h)}for(u=0;u<g;u++)n+=r[u],i.push(e+=r[u]);return _.setRowHeight(t,n,!1),n}var t=t&&0<this._fixedCellCount?c.fixedBodyView:null,e=e&&0<this.cellCount?c.bodyView:null,i=0<(i&&this._rightCellCount)?c.rightBodyView:null,B=this._dataRowHeights,s=this;if((n=void 0===n?!0:n)&&this.$_checkColumnMerging(c,this.syncHeight()),n=e||t||i){var _=c.itemSource,a=_?Math.min(_.fixedCount,_.itemCount):0,l=this._autoRowHeights,h={lm:this,grid:c,topIndex:this._topIndex,fixedItemCount:a,mergeFixed:c.fixedOptions.mergeRows,mergedRowGrouped:this.mergedRowGrouped,rowGroupFields:this.rowGroupFields},p=[t,e,i],N=[[],[],[]],f=(p.forEach(function(t){t&&t._doPrepareContent(s)}),o=this.syncHeight()?1/0:o,this._minRowHeight),g=n._trs,m=0<this._maxHeight?Math.min(Math.max(this._maxHeight,f*g),o):o,t=Math.floor(p.reduce(function(t,e){return e?Math.max(e.tableRowCount,t):t},0)/g),d=0,u=0,y=0,v=[],C=[],w=[],x=(this._fixedTableRowCount=0,this._tableRowCount=0,this._fixedDataHeight=this._dataHeight=0,this._items=[],Math.min(a,this._fixedItemCount,Math.ceil(o/f)));if((this._fixedHeight=0)<a){v.push(u),C.push(y);for(var b=d,I=0;I<x;I++)r(_.getItem(I),h,I,b),b+=g;for(I=0;I<a&&u<o;I++){var E=_.getItem(I),S=g;if(this._items.indexOf(E)<0&&r(E,h,I,d),l)y+=T=V(E,y,d,C);else{for(var R=y,T=this._fixedItemPoints[I+1]-this._fixedItemPoints[I],D=Math.floor(T/S),k=Math.round(T/S),M=E.heights||B,F=0;F<S-1;F++)C.push(y+=M[F]||(F%2?k:D));C.push(y=R+T)}this._fixedTableRowCount+=S,u+=T,v.push(u),this._fixedDataHeight=u,d+=S}(this._fixedHeight=u)<o&&(T=0,p.forEach(function(t){t&&(T=t.layoutFixedBar(s,d))}),d++,u+=T,y+=T),t=t-this._fixedItemCount-1}this._fixedItemCount=v.length?v.length-1:0;var L=c.itemCount-this._fixedItemCount,O=[u];if(w.push(u),x=Math.min(L,t,Math.ceil((o-u)/f)),this._itemCount=0,(this._fullItemCount=0)<L&&u<o){for(var P=this._topIndex,b=(this._focusIndex&&(e=this._focusIndex.itemIndex)>=this._fixedItemCount&&e<P+this._fixedItemCount&&(P=this._topIndex=e-this._fixedItemCount),d),I=0;I<x&&I+P<L&&(E=_.getItem(I+P+a));I++)r(E,h,this._fixedItemCount+I,b),b+=E.isData?g:1;for(I=P;I<L&&u<o;I++){S=(E=_.getItem(I+a)).isData?g:1;if(this._items.indexOf(E)<0&&r(E,h,this._fixedItemCount+I-P,d),E.isData)if(l)y+=T=V(E,y,d,w);else{R=y,T=this._itemPoints[I-P+1]-this._itemPoints[I-P],D=Math.floor(T/S);for(k=Math.round(T/S),M=E.heights||B,F=0;F<S-1;F++)w.push(y+=M[F]||(F%2?k:D));w.push(y=R+T)}else T=this._itemPoints[I-P+1]-this._itemPoints[I-P],w.push(y+=T);this._tableRowCount+=S,u+=T,O.push(u),this._itemCount++,this._dataHeight=u,d+=S}this._fullItemCount=this._itemCount-(o<u?1:0)}l&&p.forEach(function(t){t&&t.$_resetHeights(C,w)}),re.Utils.ieOld&&p.forEach(function(t){t&&t.$_resetCellStyleHeights(C,w)}),this._fixedItemPoints=v,this._itemPoints=O,this._fixedTableRowPoints=C,this._tableRowPoints=w,this._dataBounds.height=O[O.length-1];var $=this._items.length=this.fixedItemCount+this._itemCount;p.forEach(function(t){t&&t.cleanRows($,d)})}},n.prototype.$_adjustTableRowHeights=function(){if(this.fixedItemCount+this._itemCount==0)this._tableItemPoints=this._tableRowPoints.slice();else{for(var t=this._items,e=this._trs,i=this._fixedTableRowPoints,o=this._fixedTableItemPoints=[0],n=0,r=1,s=this._fixedItemCount;r<=s;r++,n++)o.push(i[r*e]);for(var i=this._tableRowPoints,o=this._tableItemPoints=[i[0]],r=0,a=0,s=this._itemCount;r<s;r++,n++)t[n].isData?o.push(i[a+=e]):o.push(i[++a])}},n.prototype.$_fillBottomFixed=function(t,e,i,o,n){for(var r=this._dataBounds.height,s=this._topIndex,a=0;(r+=this.$_getItemHeight(this.grid,s--))<this._bodyBounds.height&&0<=s;)a++;this._topIndex=Math.max(0,this._topIndex-a),this.$_calcItemPoints(),this._prepareItems(this._autoRowHeights),this.$_calcTableRowPoints(),this.$_layoutBodyRows(t,e,i,o,n),this.$_adjustTableRowHeights()},n.prototype.$_fillBottomAuto=function(t,e,i,o,n){for(;0<this._topIndex&&this._gridBounds.bottom-this._contentBounds.y-this._dataBounds.bottom>this._minItemHeight;){var r=this._tableItemPoints,s=r[1]-r[0];if(this._topIndex--,this.$_calcItemPoints(!1),this._prepareItems(this._autoRowHeights),this.$_calcTableRowPoints(),this.$_layoutBodyRows(t,e,i,o,n),this.$_adjustTableRowHeights(),s+(r=this._tableItemPoints)[r.length-1]+this._contentBounds.y+this._dataBounds.y>this._gridBounds.bottom){this._topIndex++,this.$_calcItemPoints(),this._prepareItems(this._autoRowHeights),this.$_calcTableRowPoints(),this.$_layoutBodyRows(t,e,i,o,n),this.$_adjustTableRowHeights();break}}},n.prototype.$_prepareColumnMerges=function(t,e,i,o){for(var n=this._fixedItemCount,r=this._itemCount,s=!1,a=0,l=t.length;a<l;a++){var h=t[a],d=h&&h.layout;d&&d.canMerge()&&((u=d.merges)||((u=new Kt.ColumnMergeManager(d)).clear(),u.initialize(Kt.GridMergeRule.INIT_COUNT)),u.refreshRooms(e,i,o),u.prepareCells(n,r),u.refreshCells(n,this.topIndex),h.layout.$_setMerged(!0),s=!0)}var u,c=this.grid.checkBar;return c.canMerge()?((u=c.merges)||((u=new le.CheckBarMergeManager(c)).clear(),u.initialize(Kt.GridMergeRule.INIT_COUNT)),u.refreshRooms(e,i,o),u.prepareCells(n,r),u.refreshCells(n,this.topIndex),c._merged=!0):c._merged=!1,s},n.prototype.$_checkColumnMerging=function(t,e){var i=t.fixedOptions,o=i.rowCount,n=this._contentBounds.height/this._minItemHeight-o,r=this._topIndex,i=0<o&&i.mergeRows,s=(e=void 0===e?!1:e)?o:o+r,e=e?t.itemCount-1:Math.min(t.itemCount-1,o+r+n-1);this.$_prepareColumnMerges(t.getHorzColumns(),s,e,i)};var i,o=n;function n(t){var e=i.call(this)||this;return e._refreshMode=ht.RefreshMode.ALL,e._leftPos=0,e._rightFixed=!0,e._footerCount=0,e._headerSummaryCount=0,e._layoutCount=0,e._fixedLayoutCount=0,e._rightLayoutCount=0,e._firstLayout=0,e._lastLayout=0,e._layoutsLength=0,e._layouts=[],e._layoutPoints=[],e._fixedLayoutPoints=[],e._rightLayoutPoints=[],e._cellCount=0,e._fixedCellCount=0,e._rightCellCount=0,e._firstCell=0,e._lastCell=0,e._startCell=0,e._endCell=0,e._cellPoints=[],e._fixedCellPoints=[],e._rightCellPoints=[],e._trs=1,e._rowGrouped=!1,e._items=[],e._topIndex=0,e._itemCount=0,e._fixedItemCount=0,e._fullItemCount=0,e._fixedItemPoints=[],e._itemPoints=[],e._fixedTableRowCount=0,e._tableRowCount=0,e._fixedTableRowPoints=[],e._tableRowPoints=[],e._fixedTableItemPoints=[],e._tableItemPoints=[],e._fixedDataHeight=0,e._dataRowHeights=[],e._dataHeight=0,e._fixedBarWidth=0,e._rightBarWidth=0,e._fixedBarHeight=0,e._itemsBounds=0,e._fixedWidth=0,e._rightWidth=0,e._fixedHeight=0,e._autoRowHeights=!1,e._minRowHeight=fe.DisplayOptions.MIN_TABLE_ROW_HEIGHT,e._minItemHeight=fe.DisplayOptions.MIN_TABLE_ROW_HEIGHT,e._maxHeight=fe.DisplayOptions.MIN_TABLE_ROW_HEIGHT,e._itemHeight=0,e._hscrolled=!1,e._vscrolled=!1,e._hscrollBar=!1,e._vscrollBar=!1,e._scrollBarWidth=0,e._scrollBarHeight=0,e._scrollWidth=0,e._fitStyle=void 0,e._grid=t,e}e.GridLayoutManager=o})),xe=(t(we),we.GridLayoutManager,e(function(t,e){Object.defineProperty(e,"__esModule",{value:!0});i=gt.TableCell,ne.__extends(o,i),o.prototype.dispose=function(){i.prototype.dispose.call(this),this.layout=null},o.prototype.span=function(){this.spanned=!0,this.clear(!1)},o.prototype.clear=function(t){i.prototype.clear.call(this,t);t=this.cell.firstElementChild;return this.className&&(this.cell.className=this.className=""),this.rendererClass&&(t.className=this.rendererClass=""),this.text&&(t[re.Utils.TextProp]=this.text=""),this.html&&(t.innerHTML=this.html=""),this},o.prototype.refreshFormatters=function(t){var e;this.textFormatter=null,this.numberFormatter=null,this.datetimeWriter=null,this.booleanFormatter=null,!(e=t.textFormat)||this.textFormatter&&this.textFormatter.format==e||(this.textFormatter=Xt.TextFormatter.getFormatter(e)),!(e=t.numberFormat)||this.numberFormatter&&this.numberFormatter.format==e||(this.numberFormatter=Y.DecimalFormatter.getFormatter(e)),!(e=t.datetimeFormat)||this.datetimeWriter&&this.datetimeWriter.format==e||(this.datetimeWriter=z.DateTimeWriter.getFormatter(e)),!(e=t.booleanFormat)||this.booleanFormatter&&this.booleanFormatter.format==e||(this.booleanFormatter=K.BooleanFormatter.getFormatter(e)),this.prefix=t.prefix,this.suffix=t.suffix},o.prototype.setText=function(t){t!==this.text&&(this.cell.firstElementChild[re.Utils.TextProp]=(this.text=t)||"")},o.prototype.setHtml=function(t){t!==this.html&&(this.cell.firstElementChild.innerHTML=(this.html=t)||"")},o.prototype.setClassName=function(t){return t!=this.className&&(this.cell.className=this.className=t,!0)},o.prototype.setRendererClassName=function(t){t!=this.rendererClass&&(this.cell.firstElementChild.className=this.rendererClass=t)};var i,C=o;function o(t){var e=i.call(this,t)||this;return e.summaryIndex=0,e.rowIndex=-1,e.rendererClass="",e.style=new lt.ColumnSummaryStyle,e.html=void 0,e.text=t[re.Utils.TextProp],e}e.SummaryTableCell=C;n=ye.SimpleTableElement,ne.__extends(s,n),s.prototype._doDispose=function(){n.prototype._doDispose.call(this)},s.prototype.tableCellByCell=function(t){for(var e=0;e<this._cells.length;e++)for(var i=this._cells[e],o=0;o<i.length;o++){var n=i[o];if(n&&n.cell===t)return n}return null},s.prototype.layoutByCell=function(t){t=this.tableCellByCell(t);return t&&t.layout},s.prototype.columnByCell=function(t){t=this.layoutByCell(t);return t&&t._columnObj},s.prototype._getCellCount=function(t){return t.cellCount-t.fixedCellCount-t.rightCellCount},s.prototype._getCellWidth=function(t,e){return t.getCellWidth(e)},s.prototype._doDrawCell=function(t,e,i){},s.prototype._doRender=function(t){},s.prototype._getFirstCell=function(t){return t._firstCell},s.prototype._getLastCell=function(t){return t._lastCell},s.prototype._getStartCell=function(t){return t.getStartCell()},s.prototype._getEndCell=function(t){return t.getEndCell()},s.prototype._prepareCellContent=function(t,e){return re.getDoc(t).createElement("div")},s.prototype._doMeasure=function(t,e,i){for(var o=t.layoutManager,n=this._getSummaryRows(o),r=this._getCollection(),s=this._getSummaryHeight(t.heightMeasurer),a=0,l=this._rowPoints=[a],h=0,d=t.layoutManager.getDataRowHeights(n),u=d.reduce(function(t,e){return t+e},0),c=0,_=r.visibleCount;c<_;c++){for(var p=r.getVisible(c),f=Math.max(u,p.height),g=(f<=0&&(f=s*n),f=Math.max(p.minHeight,f),Math.floor(f/n)),m=0,y=0;y<n-1;y++)d[y]?(a+=Math.round(d[y]*(f/u)),l.push(a),m+=Math.round(d[y]*(f/u))):(a+=g,l.push(a),m+=g);a+=f-m,l.push(a),h+=f}return ge.Size.create(e,h)},s.prototype._doPrepareTableExtents=function(t){},s.prototype.$_refreshHeadTitle=function(t,e){for(var i=this._cells[0],o=e.children[0],n=0;o&&n<i.length;n++){var r=i[n].layout.source,s=o.children[n];s&&r&&(s[re.Utils.TextProp]=(r.header.getDisplayText()||r.firstColumn.header.displayText)+" summary")}},s.prototype._doLayoutContent=function(t){var e=t.grid,i=this._getCollection(),o=this._getSummaryCount(t),n=t.cellLayouts._dataCells,r=n.length,s=this._getFirstCell(t),a=this._getStartCell(t)-s,l=this._getEndCell(t)-s;this._refreshCells(t,o,n,this._tbody),this.$_refreshSpans(t,r*o),this.$_refreshHeadTitle(t,this._thead);for(var h=0;h<o;h++)for(var d=i.getVisible(h),u=0;u<r;u++){var c=this._cells[h*r+u],_=this._getTableRow(t,h*r+u);re.Utils.setClassName(_,d.styleName||"");for(var p=a;p<=l;p++){var f,g=c[p];g.visible&&((f=g.layout).isProxy||f instanceof ct.CellLayoutGroupItem?(g.setText(""),g.setClassName(d.getCellStyleName())):(f=d.getCell(f),this._updateCell(e,d,f,g)))}}},s.prototype._updateCell=function(t,e,i,o){var n=i,r=n.getSummary(),i=e.getCellStyle(i,o.style.clear());o.setClassName(i.styleName),o.setRendererClassName(this._getRendererStyle()),o.refreshFormatters(i),r?(e.getCellFormatters(r,o),void 0===(i=n.getTemplate(o))?o.setText(n.getDisplayText(o)):o.setHtml(i)):o.setText("")},s.prototype._getTableRowHeight=function(t,e){return this._rowPoints[e+1]-this._rowPoints[e]},s.prototype._refreshCells=function(t,e,i,o){for(var n=this._cells,r=o.children,s=r.length,a=i.length,l=this._getFirstCell(t),h=this._getLastCell(t)-l+1,d=n.length;d<s;d++)n.push([]);for(var d=0,u=0;d<e&&u<s;d++)for(var c=0;c<a;c++){for(var _=n[u],p=r[u].children,f=i[c],g=0;g<h;g++){var m=f[g+l],y=_[g];y?y.cell===p[g]&&y.layout!=m&&(y.layout=m,y.clear(!0)):(y=_[g]=new C(p[g])).layout=m,y.spanned=!1,y.summaryIndex=d,y.rowIndex=u}u++;for(g=h;g<_.length;g++)_[g].dispose();_.length=h}for(u=s;u<n.length;u++)for(var v=n[u],g=0;g<v.length;g++)v[g].dispose(),v[g]=null;n.length=s},s.prototype.$_refreshSpans=function(t,e){for(var i=this._getFirstCell(t),o=this._getFirstCell(t)-i,n=this._getLastCell(t)-i,r=t.cellLayouts._dataCells.length,s=this._rowPoints,a=0;a<e;a++)for(var l=this._cells[a],h=l.length,d=o;d<=n;d++){var u=l[d],c=u.layout,_=c.parent,p=_&&_.vertical;if(!u.spanned)if(c.isProxy)u.clear(!1);else{var f=0,g=0,m=this._getSpanOf(c,u.summaryIndex)-1,y=this._getUserSpanOf(c,u.summaryIndex);if(y){var v=y.footerCount||0,C=0<v?v*e:y.rowspan||1,w=y.colspan||1;u.set(w,C,!0);for(var x=0;x<C;x++)for(var b=0;b<w;b++){var I=this._cells[x+a]&&this._cells[x+a][b+d];I&&I!==u&&I.span()}}if(!y&&0<m){var E,S=0,R=c.vindex+1;if(p)for(;S++<m&&S<r;){if(!(E=_.getVisible(R++)))break;g+=E._dspan,this._cells[a+S][d].span()}else for(;S++<m&&d-o+S<h&&R<_.visibleCount;){if(!(E=_.getVisible(R++)))break;f+=E._cspan,l[d+S].span()}}c.isNull&&u.clear(!0),y||u.set(c._cspan+f,c._dspan+g,!0),1<u.rowSpan&&(u.height=s[u.rowIndex+u.rowSpan]-s[u.rowIndex],u.cell.firstElementChild.style.maxHeight=u.height-2+"px")}}},s.prototype._doPrepareTableRow=function(t,e,i,o){n.prototype._doPrepareTableRow.call(this,t,e,i,o)};var n,r=s;function s(t,e,i){t=n.call(this,t,e,i)||this;return t._rowPoints=[],t._cells=[],t}e.SummaryElement=r})),be=(t(xe),xe.SummaryTableCell,xe.SummaryElement,e(function(t,e){Object.defineProperty(e,"__esModule",{value:!0});i=xe.SummaryElement,ne.__extends(n,i),n.prototype._doDispose=function(){i.prototype._doDispose.call(this)},n.prototype._getCssSelector=function(){return"rg-footer"},n.prototype._getRendererStyle=function(){return"rg-footer-renderer"},n.prototype._getSummaryRows=function(t){return t.dataRows},n.prototype._getCollection=function(){return this.model},n.prototype._getSummaryHeight=function(t){return t.footerHeight},n.prototype._getSummaryCount=function(t){return t.footerCount},n.prototype._getSpanOf=function(t,e){return t.getFooterSpan(e)},n.prototype._getUserSpanOf=function(t,e){return t.getFooterUserSpan(e)},n.prototype._getTableRowCount=function(t){return t.dataRows*t.footerCount},n.prototype._getSummaryItem=function(t,e){return t.firstColumn.footers.get(e)};var i,o=n;function n(t,e){return i.call(this,t,e,"footerView")||this}e.FooterElement=o;r=o,ne.__extends(a,r),a.prototype._getCssSelector=function(){return"rg-fixed-footer"},a.prototype._getExplicitWidth=function(t){return t.fixedWidth-t.fixedBarWidth},a.prototype._getFirstCell=function(t){return this._getStartCell(t)},a.prototype._getLastCell=function(t){return this._getEndCell(t)},a.prototype._getStartCell=function(t){return 0},a.prototype._getEndCell=function(t){return t.fixedCellCount-1},a.prototype._getCellCount=function(t){return t.fixedCellCount},a.prototype._getCellWidth=function(t,e){return t.getFixedCellWidth(e)};var r,s=a;function a(){return null!==r&&r.apply(this,arguments)||this}e.FixedFooterElement=s;l=o,ne.__extends(h,l),h.prototype._getCssSelector=function(){return"rg-fixed-footer"},h.prototype._getFirstCell=function(t){return this._getStartCell(t)},h.prototype._getLastCell=function(t){return this._getEndCell(t)},h.prototype._getStartCell=function(t){return t.cellCount-t.rightCellCount},h.prototype._getEndCell=function(t){return t.cellCount-1},h.prototype._getCellCount=function(t){return t.rightCellCount},h.prototype._getCellWidth=function(t,e){return t.getRightCellWidth(e)};var l,s=h;function h(){return null!==l&&l.apply(this,arguments)||this}e.RightFooterElement=s})),Ie=(t(be),be.FooterElement,be.FixedFooterElement,be.RightFooterElement,e(function(t,e){Object.defineProperty(e,"__esModule",{value:!0}),e.$_instanceOf=function(t,e){return"object"==typeof t&&0<=Object.prototype.toString.call(t).indexOf(e)},e._gk="dkdl"})),Ee=(t(Ie),Ie.$_instanceOf,Ie._gk,e(function(t,e){Object.defineProperty(e,"__esModule",{value:!0});o=se.Base,ne.__extends(n,o),_dp(n,"container",{get:function(){return this._container}}),_dp(n,"name",{get:function(){return this._name}}),_dp(n,"active",{get:function(){return this._active}}),_dp(n,"dragging",{get:function(){return this._dragging}}),_dp(n,"startWhenCreated",{get:function(){return!1}}),_dp(n,"completed",{get:function(){return this._completed}}),_dp(n,"linkable",{get:function(){return!1}}),_dp(n,"clickable",{get:function(){return!1}}),_dp(n,"scrollable",{get:function(){return!1}}),n.prototype.activate=function(){this._active||(this._doActivate(),this._active=!0)},n.prototype.deactivate=function(){this._active&&(this.cancel(),this._doDeactivate(),this._active=!1)},n.prototype.start=function(t,e,i,o){return void 0===o&&(o=null),this.cancel(),!(!this._active||!this._doStart(t,e,i,o)||(this._currentX=this._startX=e,this._currentY=this._startY=i,this._dragging=!0,this._completed=!1,this._showFeedback(e,i),0))},n.prototype.drag=function(t,e,i){return!(!this._dragging||(this._currentX=e,this._currentY=i,!this._doDrag(t,e,i))||(this._moveFeedback(e,i),0))},n.prototype.cancel=function(){try{if(this._dragging)try{this._dragging=!1,this._doCanceled(this._currentX,this._currentY)}finally{this._doEnded()}}finally{this._hideFeedback()}},n.prototype.drop=function(t,e,i){try{if(this._dragging)try{this._currentX=e,this._currentY=i,this._dragging=!1,this._canAccept(t,e,i)?(this._doCompleted(t,e,i),this._completed=!0):this._doCanceled(e,i)}finally{this._doEnded()}}finally{this._hideFeedback()}},n.prototype.getRequest=function(){return null},n.prototype.getNextRequest=function(t,e){return null},_dp(n,"currentX",{get:function(){return this._currentX}}),_dp(n,"currentY",{get:function(){return this._currentY}}),n.prototype._showFeedback=function(t,e){},n.prototype._moveFeedback=function(t,e){},n.prototype._hideFeedback=function(){},n.prototype._doActivate=function(){},n.prototype._doDeactivate=function(){},n.prototype._doStart=function(t,e,i,o){return!0},n.prototype._doDrag=function(t,e,i){return!0},n.prototype._doCanceled=function(t,e){},n.prototype._canAccept=function(t,e,i){return!0},n.prototype._doCompleted=function(t,e,i){},n.prototype._doEnded=function(){};var o,i=n;function n(t,e){var i=o.call(this)||this;return i._active=!1,i._completed=!1,i._dragging=!1,i._currentX=0,i._currentY=0,i._container=t,i._name=e,i}e.DragTracker=i})),Se=(t(Ee),Ee.DragTracker,e(function(t,e){Object.defineProperty(e,"__esModule",{value:!0}),(n=r=e.DataDropMode||(e.DataDropMode={})).COPY="copy",n.MOVE="move",(n=i=e.DragFeedbackStyle||(e.DragFeedbackStyle={})).LINE="line",n.ROW="row";o=_e.GridBaseOptions,ne.__extends(s,o),s.prototype._doDispose=function(){o.prototype._doDispose.call(this)},_dp(s,"dragCallback",{get:function(){return this._dragCallback},set:function(t){this._dragCallback=t}}),_dp(s,"callback",{get:function(){return this._callback},set:function(t){this._callback=t}}),_dp(s,"dropMode",{get:function(){return this._dropMode},set:function(t){this._dropMode=t}}),_dp(s,"feedbackStyle",{get:function(){return this._feedbackStyle},set:function(t){this._feedbackStyle=t}}),_dp(s,"fieldMap",{get:function(){return this._fieldMap},set:function(t){this._fieldMap=t}}),_dp(s,"fieldMapCallback",{get:function(){return this._fieldMapCallback},set:function(t){this._fieldMapCallback=t}}),_dp(s,"proxyLabel",{get:function(){return this._proxyLabel},set:function(t){this._proxyLabel=t}}),_dp(s,"labelCallback",{get:function(){return this._labelCallback},set:function(t){this._labelCallback=t}}),s.prototype.getEnabled=function(t,e,i,o,n){var r=this._dragCallback;return r?!1!==r(t.handler,e,this.grid.handler,i.index):this.grid!==t||(n-=(r=t.layoutManager).contentBounds.y)<=r.footerBounds.y&&n>=r.summaryBounds.bottom},s.prototype.getLabel=function(t,e,i){var o=this._labelCallback,n=void 0;return n=void 0===(n=o?o(t.handler,e,this.grid.handler,i.index):n)&&this._proxyLabel?(n=(n=(n=this._proxyLabel.replace("${rows}",e.length+"")).replace("${mode}",t==this.grid||this.dropMode==r.MOVE?"이동":"복사")).replace("${from}",e[0]+"")).replace("${to}",i.index+""):n};var r,i,o,n=s;function s(t){t=o.call(this,t)||this;return t._dropMode=r.COPY,t._proxyLabel="${rows}행 ${mode}",t._feedbackStyle=i.LINE,t}e.DataDropOptions=n})),Re=(t(Se),Se.DataDropMode,Se.DragFeedbackStyle,Se.DataDropOptions,e(function(t,e){Object.defineProperty(e,"__esModule",{value:!0});i=Ee.DragTracker,ne.__extends(n,i),n.prototype._doDispose=function(){this._grid=null,i.prototype._doDispose.call(this)},_dp(n,"grid",{get:function(){return this._grid}}),_dp(n,"startWhenCreated",{get:function(){return!1}});var i,o=n;function n(t,e){e=i.call(this,t.container,e)||this;return e._grid=t,e}e.GridDragTracker=o;r=o,ne.__extends(a,r),a.prototype._doDispose=function(){this._request=null,this._feedback=null,r.prototype._doDispose.call(this)},a.prototype.getRequest=function(){return this._request},a.prototype._doStart=function(t,e,i,o){var n=this.grid.layoutManager,r=n.contentBounds.y,n=n.contentBounds.bottom;return this._feedback.resize(2,n-r),this._feedback.move(e-this._offset,r),this.grid.addFeedbackElement(this._feedback),!0},a.prototype._doDrag=function(t,e,i){this._request.layout;var o=this.grid.displayOptions.minCellWidth;return(e-=this._offset)>=this._layoutX+o&&e<this._layoutX+1e6&&(this._feedback.x=e,!0)},a.prototype._doEnded=function(){var t=this.grid.displayOptions.minCellWidth,t=Math.max(t,this._feedback.x-this._layoutX);this.grid.removeFeedbackElement(this._feedback),this._request.layout.changeCellWidth(t,this.grid.layoutManager.isColumnFitted),this.grid.container.setCursor("default")};var r,s=a;function a(t,e){var i=r.call(this,t.layout.grid,"columnResizeTracker")||this,e=(i._request=t,i._feedback=e,t.layout);return i._layoutX=t.x+t.offset-e.domWidth,i._offset=t.offset,i}e.ColumnResizeTracker=s;l=o,ne.__extends(h,l),h.prototype._doDispose=function(){this._request=this._layout=this._cellFeedback=this._feedback=this._target=null,l.prototype._doDispose.call(this)},h.prototype.getRequest=function(){return this._request},h.prototype._doStart=function(t,e,i,o){var n=this.grid,r=n.layoutManager,s=this._layout.parent,r=r.getHeaderCellRect(this._layout,!0),s=(s.horizontal?(this._offset=e-r.x,this._feedback.setBounds(r.x,r.y,h.WING_SIZE,r.height)):(this._offset=i-r.y,this._feedback.setBounds(r.x,r.y,r.width,h.WING_SIZE)),this._feedback.visible=!1,this._cellFeedback.setBounds(r.x,r.y,r.width,r.height),this._cellFeedback.model=n.header.getCell(this._layout),this._cellFeedback.dragging=!1,n.addFeedbackElement(this._cellFeedback),n.addFeedbackElement(this._feedback),this._feedback._dom.style);return!(s.borderLeft=s.borderRight=s.borderTop=s.borderBottom="")},h.prototype._doDrag=function(t,e,i){var o=this.grid,n=this._layout.parent,r=this.grid.layoutManager;return!(i<r.contentBounds.y&&o.canGrouping()||(e<r.gridBounds.x||e>r.clientRect.right?this.$_startTimer():(this.$_stopTimer(),r=r.getHeaderCellAt(e,i),r=this.$_findTarget(r),re.Utils.trace("MOVE: ",this._layout.displayText+" => "+(null==r?void 0:r.displayText)),r&&!o.canMoveToLayout(r)&&(r=null),this.$_setTarget(r),this._cellFeedback.dragging=!0,n.horizontal?this._cellFeedback.x=e-this._offset:this._cellFeedback.y=i-this._offset),0))},h.prototype._doCanceled=function(){this.$_stopTimer()},h.prototype._doCompleted=function(){this.$_stopTimer(),this._target&&(this._layout.vindex=this._target.vindex)},h.prototype._doEnded=function(){this.$_stopTimer(),this.grid.removeFeedbackElement(this._feedback),this.grid.removeFeedbackElement(this._cellFeedback)},h.prototype.getNextRequest=function(t,e){return this.grid.activeTool.getNextRequest(this._request,this._cellFeedback,t,e)},h.prototype.$_startTimer=function(){this._timer||(this._colLoop=this._colPrevLoop=0,this._timer=setInterval(this.$_timerHandler.bind(this),60))},h.prototype.$_stopTimer=function(){this._timer&&(clearInterval(this._timer),this._timer=null)},h.prototype.$_timerHandler=function(){var t=this._grid,e=this.currentX,i=t.layoutManager,o=0;e>i.clientRect.right?(o=Math.max(0,Math.min(3,(e-i.clientRect.right)/40)),this._interval=4-o,this._colLoop++):e<i.gridBounds.x&&(o=Math.max(0,Math.min(3,(i.gridBounds.x-e)/40)),this._interval=4-o,this._colLoop++),0<o&&(this._interval=4-o),this._colLoop-this._colPrevLoop>=2*this._interval&&(this._colPrevLoop=this._colLoop,e>i.clientRect.right?t.leftCell+=1:e<i.gridBounds.left&&0<t.leftPos&&--t.leftCell),this.$_setTarget(null)},h.prototype.$_findTarget=function(t){if(t)for(var e=this._layout.parent;t;){if(t.parent===e)return t;t=t.parent}},h.prototype.$_setTarget=function(t){var e=this._request.layout,i=e.parent,o=this._feedback,n=o._dom.style,r=this.grid.layoutManager;this.currentX,this.currentY;this._target=t,(o.visible=null!=t&&t.parent===i&&t!==e)&&(r=r.getHeaderCellRect(t,!0),i.horizontal?(i=e.hcol,n.height=r.height+"px",t.hcol<i?(n.borderRight="none",n.borderLeft="",o.x=r.x):t.hcol>i&&(n.borderLeft="none",n.borderRight="",o.x=r.right-o.width)):(i=e.row,n.width=r.width+"px",t.row<i?(n.borderBottom="none",n.borderTop="",o.y=r.y):t.row>i&&(n.borderTop="none",n.borderBottom="",o.y=r.bottom-o.height)))},h.WING_SIZE=7;var l,s=h;function h(t,e,i){var o=l.call(this,t.layout.grid,"columnMoveTracker")||this;return o._timer=null,o._colLoop=0,o._colPrevLoop=0,o._interval=0,o._request=t,o._layout=t.layout,o._cellFeedback=e,o._feedback=i,o}e.ColumnMoveTracker=s;d=o,ne.__extends(u,d),u.prototype._doDispose=function(){this._request=null,this._feedback=null,d.prototype._doDispose.call(this)},u.prototype.getRequest=function(){return this._request},u.prototype._doStart=function(t,e,i,o){var n=this.grid.layoutManager,r=n.leftContentBounds.x,n=n.rightContentBounds.right;return this._feedback.resize(n-r,2),this._feedback.move(r,i-this._request.offset),this.grid.addFeedbackElement(this._feedback),!0},u.prototype._doDrag=function(t,e,i){return i-this._request.offset-this._request.rowTop>=this.grid.displayOptions.minRowHeight&&(this._feedback.y=i-this._request.offset,!0)},u.prototype._doCompleted=function(t,e,i){var o=this.grid,n=o.displayOptions,i=Math.max(n.minRowHeight,i-this._request.offset-this._request.rowTop);(i=0===n.maxRowHeight?i:Math.min(n.maxRowHeight,i))>=o.layoutManager.bodyBounds.height&&(i=o.layoutManager.bodyBounds.height-1),this._request.variable?o.setRowHeight(this._request.itemIndex,i):n.rowHeight=i},u.prototype._doEnded=function(){this.grid.removeFeedbackElement(this._feedback)};var d,s=u;function u(t,e){var i=d.call(this,t.grid,"rowResizeTracker")||this;return i._request=t,i._feedback=e,i}e.RowResizeTracker=s;c=o,ne.__extends(_,c),_.prototype._doDispose=function(){this._request=null,this._feedback=null,c.prototype._doDispose.call(this)},_.prototype.getRequest=function(){return this._request},_.prototype._doStart=function(t,e,i,o){var n=this.grid.layoutManager,r=n.leftContentBounds.x,n=n.rightContentBounds.right;return this._feedback.resize(n-r,2),this._feedback.move(r,i-this._request.offset),this.grid.addFeedbackElement(this._feedback),!0},_.prototype._doDrag=function(t,e,i){return i-this._request.offset-this._request.top>=this.grid.header.minHeight&&(this._feedback.y=i-this._request.offset,!0)},_.prototype._doCompleted=function(t,e,i){var o=this.grid.header,i=Math.max(o.minHeight,i-this._request.offset-this._request.top);o.height=i},_.prototype._doEnded=function(){this.grid.removeFeedbackElement(this._feedback)};var c,s=_;function _(t,e){var i=c.call(this,t.grid,"rowResizeTracker")||this;return i._request=t,i._feedback=e,i}e.HeaderResizeTracker=s;p=o,ne.__extends(f,p),f.updateLineFeedback=function(t,e,i,o,n,r,s){var a,l,h,d,u,c,_,p,f,g,m={index:-1,position:0};return n<0||r<0||n>=t.width||r>=t.height?o.visible=!1:(n=o.feedbackStyle=t.dataDropOptions.feedbackStyle,r-=(a=t.layoutManager).contentBounds.y,l=a.contentBounds.right,g=p=-1,h=0,f=2,r<a.summaryBounds.bottom?(g=Math.max(0,a.topIndex-1),p=a.getTableItemTop(0)):r>=a.footerBounds.y?(g=a.topIndex+a.fullItemCount,p=a.getTableItemBottom(a.fullItemCount)):(d=r-a.summaryBounds.bottom,u=a.getTableItemIndex(d),c=a.getTableItemHeight(u),(g=u)>=a.fixedItemCount&&(g+=a.topIndex),g!=e&&(_=a.getTableItemTop(u),n===Se.DragFeedbackStyle.ROW?(f=c,d<(p=_)+(n=Math.floor(c/3))?h=-1:_+2*n<d&&(h=1)):h=d<_+c/2?(p=_,e<g&&(g=Math.max(a.topIndex,g-1)),-1):(0<=(p=-1<u?a.getTableItemBottom(u):s?0:-1)&&g<e&&g++,1))),p+=a.contentBounds.y+a.summaryBounds.bottom,o.visible=e<g?e+i-1<g:0<=g&&g!=e,o.visible?(o.resize(+l,f),0==t.itemCount&&(p+=a.defaultItemHeight),o.move(0,p)):g=-1,r<a.summaryBounds.bottom?t.topIndex--:r>=a.footerBounds.y&&t.topIndex++,m.index=g,m.position=h),m},f.prototype._doDispose=function(){this._request=null,this._proxy=null,this._line=null,p.prototype._doDispose.call(this)},_dp(f,"request",{get:function(){return this._request}}),_dp(f,"sourceItems",{get:function(){return this._sourceItems}}),f.prototype.setEnabled=function(t){this._proxy.setEnabled(t)&&this._proxy.draw()},f.prototype.setLabel=function(t){this._proxy.setLabel(t)&&this._proxy.draw()},_dp(f,"startWhenCreated",{get:function(){return!0}}),_dp(f,"linkable",{get:function(){return!0}}),f.prototype.getRequest=function(){return this._request},f.prototype._doStart=function(t,e,i,o){var n=this.grid,t=re.getDoc(t),r=0==n.selections.count,s=(r||(s=n.selections.getItem(0),r=W.isColumnSelection(s)||!s.containsItem(this._request.itemIndex)),r&&(n.setFocusedItem(this._request.itemIndex),n.selections.selectRow(this._request.itemIndex,!0)),this._sourceItems=n.selections.getItem(0).getItemIndices(),t.body.appendChild(this._proxy._dom),n.addFeedbackElement(this._line),this.$_updateLine(e,i));return this._proxy.setZIndex(n.displayOptions.baseZindex+6),this.$_updateProxy(e,i,s,!1),!0},f.prototype._doDrag=function(t,e,i){var o=this.grid,n=o.layoutManager,r=this.$_updateLine(e,i),t=o.container.findContainer(null,t);return this.$_updateProxy(e,i,r,o.container!==t),(i-=n.contentBounds.y)>n.footerBounds.y||i<n.summaryBounds.bottom?this.$_startTimer():this.$_stopTimer(),!0},f.prototype._doCompleted=function(t,e,i){var o,n=this._targetRow;0<=n.index&&(o=this.grid).canMoveRow(!0,!1)&&o.dataDropOptions.getEnabled(o,this._sourceItems,n,e,i)&&(e=this._request.itemIndex,(i=o.dataDropOptions.callback)?i(o.handler,this._sourceItems,o.handler,n.index):n.index>e?o.moveSelection(n.index-(e+this._sourceItems.length-1),"mouseup"):n.index<e&&o.moveSelection(n.index-e,"mouseup"))},f.prototype._doCanceled=function(t,e){},f.prototype._doEnded=function(){var t=this.grid;this.$_stopTimer(),t.removeFeedbackElement(this._line),t.doc.body.removeChild(this._proxy._dom)},f.prototype.$_updateLine=function(t,e){return this._targetRow=f.updateLineFeedback(this.grid,this._request.itemIndex,this._sourceItems.length,this._line,t,e,!1)},f.prototype.$_updateProxy=function(t,e,i,o){var n=this.grid,r=re.Utils.getOffset(n.container._containerDom),s=(r.y+=e,r.x+=t+20,!0);if(!o)for(var a=n.getSelectedItems(),l=a[0].level,h=1,d=a.length;h<d;h++)if(a[h].level!==l){s=!1;break}s=s&&n.canMoveRow(!0,o)&&(o||n.dataDropOptions.getEnabled(n,this._sourceItems,i,t,e)),o=n.dataDropOptions.getLabel(n,this._sourceItems,i);return this._proxy.move(r.x,r.y),this._proxy.setEnabled(void 0!==s?s:0<=i.index),this._proxy.setLabel(o),this._proxy.draw(),s},f.prototype.$_startTimer=function(){this._timer||(this._timer=setInterval(this.$_timerHandler.bind(this),100))},f.prototype.$_stopTimer=function(){this._timer&&(clearInterval(this._timer),this._timer=null)},f.prototype.$_timerHandler=function(){var t=this.currentX,e=this.currentY;this.$_updateLine(t,e)};var p,s=f;function f(t,e,i){var o=p.call(this,t.grid,"rowMoveTracker")||this;return o._timer=null,o._request=t,o._proxy=e,o._line=i,o}e.RowMoveTracker=s})),Te=(t(Re),Re.GridDragTracker,Re.ColumnResizeTracker,Re.ColumnMoveTracker,Re.RowResizeTracker,Re.HeaderResizeTracker,Re.RowMoveTracker,e(function(t,e){Object.defineProperty(e,"__esModule",{value:!0});n=Re.GridDragTracker,ne.__extends(o,n),o.prototype._doDispose=function(){this._request.dispose(),this._request=null,n.prototype._doDispose.call(this)},_dp(o,"startWhenCreated",{get:function(){return!1}}),_dp(o,"clickable",{get:function(){return!0}}),_dp(o,"scrollable",{get:function(){var t=this._getItem().getBounds();return t.top===t.bottom}}),o.prototype.getRequest=function(){return this._request},o.prototype._doCanceled=function(){},o.prototype._doEnded=function(){var t=this._getItem();this.grid.selections.$_ended(t)},o.prototype.spanHome=function(t){var e=this.grid;e.displayOptions.spanSelecting&&e.getBodyViewAt(t).spanHead(e.layoutManager,t)},o.prototype.spanRight=function(t){var e=this.grid;e.displayOptions.spanSelecting&&e.getBodyViewAt(t).spanRight(e.layoutManager,t)};var n,i=o;function o(t,e,i,o){e=n.call(this,t.index.grid,e)||this;return e._request=t,e._currX=i,e._currY=o,e}e.SelectTracker=i;r=i,ne.__extends(a,r),a.prototype._doDispose=function(){r.prototype._doDispose.call(this)},a.prototype._getItem=function(){return this._item||this.grid.selections.lastItem()},a.prototype._doStart=function(t,e,i,o){var n=this.grid,r=n.selections,s=n.layoutManager,a=o&&o.shiftKey,o=o&&(o.ctrlKey||o.metaKey),l=this._request.index;return!(s.isMergedCell(l)&&!(l=n.pointToIndex(t,e,i,!0)).layout||(a?this._item=0<r.count&&r.lastItem():(s=void 0,o||1===r.count&&r.lastItem()instanceof W.BlockSelection?s=r.lastItem():r.clear(),s&&s instanceof W.BlockSelection?this._item=s:this._item=r.add(l,l,W.SelectionStyle.BLOCK)),!this._item))},a.prototype._doDrag=function(t,e,i){var o,n;if(this._item)return n=(o=this.grid).layoutManager,this._currX=e,(this._currY=i)-n.contentBounds.y>n.footerBounds.y||i<n.gridBounds.y||e<n.gridBounds.x||e>n.clientRect.right?this.$_startTimer():(this.$_stopTimer(),(n=o.pointToIndex(t,e,i,!0)).column&&0<=n.itemIndex&&(0<=_t.CellIndex.compareHorz(n,this._item.startIndex)?(this.spanRight(n),this.spanHome(this._item.startIndex)):this.spanRight(this._item.startIndex),this._item.resizeTo(n))),!0},a.prototype._doEnded=function(){this.$_stopTimer(),r.prototype._doEnded.call(this)},a.prototype.$_startTimer=function(){this._timer||(this._rowLoop=this._rowPrevLoop=this._colLoop=this._colPrevLoop=0,this._timer=setInterval(this.$_timerHandler.bind(this),30),this._grid.selections.lock())},a.prototype.$_stopTimer=function(){this._timer&&(clearInterval(this._timer),this._timer=null,this._grid.selections.unlock())},a.prototype.$_timerHandler=function(){var t=this._grid,e=this._currX,i=this._currY,o=t.layoutManager,n=0,r=0,s=(i>o.footerBounds.y?(r=Math.max(0,Math.min(3,(i-o.footerBounds.y)/40)),this._interval=4-r,this._rowLoop++):i<o.gridBounds.y&&(r=Math.max(0,Math.min(3,(o.gridBounds.y-i)/40)),this._interval=4-r,this._rowLoop++),e>o.clientRect.right?(n=Math.max(0,Math.min(3,(e-o.clientRect.right)/40)),this._interval=4-n,this._colLoop++):e<o.gridBounds.x&&(n=Math.max(0,Math.min(3,(o.gridBounds.x-e)/40)),this._interval=4-n,this._colLoop++),!1);0<Math.max(n,r)&&(this._interval=4-Math.max(n,r)),this._rowLoop-this._rowPrevLoop>=this._interval&&(this._rowPrevLoop=this._rowLoop,i>o.footerBounds.y?t.topItem+o.fullItemCount<t.itemCount&&(t.topIndex=t.topIndex+1,s=!0):i<o.gridBounds.y&&t.topItem>o.fixedItemCount&&(t.topIndex=t.topIndex-1,s=!0)),s||this._colLoop-this._colPrevLoop>=2*this._interval&&(this._colPrevLoop=this._colLoop,e>o.clientRect.right?(t.leftPos+=e-o.clientRect.right,s=!0):e<o.gridBounds.left&&0<t.leftPos&&(t.leftPos-=o.gridBounds.left-e,s=!0)),s&&(n=t.pointToIndex(null,e,i,!1)).column&&(n.itemIndex=Math.min(Math.max(0,n.itemIndex,t.topIndex),t.itemCount-1),this._item.resizeTo(n))};var r,s=a;function a(t,e,i){t=r.call(this,t,"blockSelectTracker",e,i)||this;return t._timer=null,t._rowPrevLoop=0,t._rowLoop=0,t._colPrevLoop=0,t._colLoop=0,t._interval=0,t}e.BlockSelectTracker=s;l=i,ne.__extends(h,l),h.prototype._doDispose=function(){l.prototype._doDispose.call(this)},h.prototype._getItem=function(){return this._item||this.grid.selections.lastItem()},h.prototype._doStart=function(t,e,i,o){var n=this.grid,r=n.selections,s=n.layoutManager,a=o&&o.shiftKey,o=o&&(o.ctrlKey||o.metaKey),l=this._request.index;return s.isMergedCell(l)&&(l=n.pointToIndex(t,e,i,!0)),a?this._item=0<r.count&&r.lastItem():(s=void 0,o||1===r.count&&r.lastItem()instanceof W.RowSelection?s=r.lastItem():r.clear(),s&&s instanceof W.RowSelection?this._item=s:this._item=r.add(l,l,W.SelectionStyle.ROWS)),!!this._item},h.prototype._doDrag=function(t,e,i){var o;return!!this._item&&(o=this.grid.layoutManager,this._currX=e,(this._currY=i)>o.footerBounds.y||i<o.gridBounds.y||e<0||e>o.clientRect.right?this.$_startTimer():(this.$_stopTimer(),0<=(o=this.grid.pointToIndex(t,e,i,!1)).itemIndex&&this._item.resizeTo(o)),!0)},h.prototype._doEnded=function(){this.$_stopTimer(),l.prototype._doEnded.call(this)},h.prototype.$_startTimer=function(){this._timer||(this._loop=this._prevLoop=this._colLoop=this._colPrevLoop=0,this._interval=1,this._timer=setInterval(this.$_timerHandler.bind(this),30),this._grid.selections.lock())},h.prototype.$_stopTimer=function(){this._timer&&(clearInterval(this._timer),this._timer=null,this._grid.selections.unlock())},h.prototype.$_timerHandler=function(){var t,e,i=this._grid,o=this._currX,n=this._currY,r=i.layoutManager;n>r.footerBounds.y?(t=Math.max(0,Math.min(3,(n-r.footerBounds.y)/40)),this._interval=4-t,this._loop++):n<r.gridBounds.y&&(t=Math.max(0,Math.min(3,(r.gridBounds.y-n)/40)),this._interval=4-t,this._loop++),this._loop-this._prevLoop>=this._interval?(this._prevLoop=this._loop,n>r.footerBounds.y?i.topIndex=i.topIndex+1:n<r.gridBounds.y&&(i.topIndex=i.topIndex-1),(e=i.pointToIndex(null,this._currX,this._currY,!1)).itemIndex=Math.min(Math.max(0,e.itemIndex,i.topIndex),i.itemCount-1),this._item.resizeTo(e)):(o>r.clientRect.right?(t=Math.max(0,Math.min(3,(o-r.clientRect.right)/40)),this._interval=4-t,this._colLoop++):o<0&&(t=Math.max(0,Math.min(3,(r.gridBounds.x-o)/40)),this._interval=4-t,this._colLoop++),this._colLoop-this._colPrevLoop>=2*this._interval&&(this._colPrevLoop=this._colLoop,o>r.clientRect.right?i.leftLayout=i.leftLayout+1:o<r.gridBounds.x&&0<i.leftPos&&(i.leftLayout=i.leftLayout-1),0<=(e=i.pointToIndex(null,this._currX,this._currY,!1)).itemIndex)&&(e.itemIndex=Math.min(Math.max(0,e.itemIndex,i.topIndex),i.itemCount-1),this._item.resizeTo(e)))};var l,s=h;function h(t,e,i){t=l.call(this,t,"rowsSelectTracker",e,i)||this;return t._timer=null,t._prevLoop=0,t._loop=0,t._colPrevLoop=0,t._colLoop=0,t._interval=0,t}e.RowsSelectTracker=s;d=i,ne.__extends(u,d),u.prototype._doDispose=function(){d.prototype._doDispose.call(this)},_dp(u,"startWhenCreated",{get:function(){return!0}}),u.prototype._getItem=function(){return this._item||this.grid.selections.lastItem()},u.prototype._doStart=function(t,e,i,o){var n,r=this.grid,s=r.selections,a=r.layoutManager,l=o&&o.shiftKey,o=o&&(o.ctrlKey||o.metaKey),h=this._request.index;return a.isMergedCell(h)&&(h=r.pointToIndex(t,e,i,!0)),l?n=0<s.count&&s.lastItem():o||1===s.count&&s.lastItem()instanceof W.ColumnSelection?n=s.lastItem():s.clear(),n&&n instanceof W.ColumnSelection&&n.containsLayout(h.layout)?this._item=n:this._item=s.add(h,h,W.SelectionStyle.COLUMNS),!!this._item},u.prototype._doDrag=function(t,e,i){var o;return!!this._item&&(o=this.grid.layoutManager,this._currX=e,this._currY=i,e<o.gridBounds.x||e>o.clientRect.right||i>o.footerBounds.y||i<0?this.$_startTimer():(this.$_stopTimer(),null!=(o=this.grid.pointToIndex(t,e,i,!0)).column&&this._item.resizeTo(o)),!0)},u.prototype._doEnded=function(){this.$_stopTimer(),d.prototype._doEnded.call(this)},u.prototype.$_startTimer=function(){this._timer||(this._loop=this._prevLoop=this._rowLoop=this._rowPrevLoop=0,this._interval=1,this._timer=setInterval(this.$_timerHandler.bind(this),30),this._grid.selections.lock())},u.prototype.$_stopTimer=function(){this._timer&&(clearInterval(this._timer),this._timer=null,this._grid.selections.unlock())},u.prototype.$_timerHandler=function(){var t,e,i=this._grid,o=this._currX,n=this._currY,r=i.layoutManager;o>r.clientRect.right?(t=Math.max(0,Math.min(3,(o-r.clientRect.right)/40)),this._interval=4-t,this._loop++):o<r.gridBounds.x&&(t=Math.max(0,Math.min(3,(r.gridBounds.x-o)/40)),this._interval=4-t,this._loop++),this._loop-this._prevLoop>=2*this._interval?(this._prevLoop=this._loop,o>r.clientRect.right?i.leftLayout=i.leftLayout+1:o<r.gridBounds.x&&0<i.leftPos&&(i.leftLayout=i.leftLayout-1),(e=i.pointToIndex(null,this._currX,this._currY,!1)).column&&this._item.resizeTo(e)):(n>r.footerBounds.y?(t=Math.max(0,Math.min(3,(n-r.footerBounds.y)/40)),this._interval=4-t,this._rowLoop++):n<0&&(t=Math.max(0,Math.min(3,(r.gridBounds.y-n)/40)),this._interval=4-t,this._rowLoop++),this._rowLoop-this._rowPrevLoop>=this._interval&&(this._rowPrevLoop=this._rowLoop,n>r.footerBounds.y?i.topIndex=i.topIndex+1:n<r.gridBounds.y&&(i.topIndex=i.topIndex-1),(e=i.pointToIndex(null,this._currX,this._currY,!1)).column)&&this._item.resizeTo(e))};var d,s=u;function u(t,e,i){t=d.call(this,t,"columnsSelectTracker",e,i)||this;return t._timer=null,t._prevLoop=0,t._loop=0,t._rowPrevLoop=0,t._rowLoop=0,t._interval=0,t}e.ColumnsSelectTracker=s})),De=(t(Te),Te.SelectTracker,Te.BlockSelectTracker,Te.RowsSelectTracker,Te.ColumnsSelectTracker,e(function(t,e){Object.defineProperty(e,"__esModule",{value:!0});o=se.Base,ne.__extends(n,o),n.prototype._doDispose=function(){this._dragTracker=null,this._previous=null,this._owner=null,this._mouseEventTarget=null,o.prototype._doDispose.call(this)},_dp(n,"owner",{get:function(){return this._owner}}),_dp(n,"name",{get:function(){return this._name}}),_dp(n,"previous",{get:function(){return this._previous}}),_dp(n,"dragTracker",{get:function(){return this._dragTracker},set:function(t){t!==this._dragTracker&&(this._dragTracker&&this._dragTracker.deactivate(),this._dragTracker=t,this._dragTracker)&&this._dragTracker.activate()}}),_dp(n,"dragging",{get:function(){return this._dragTracker&&this._dragTracker.dragging}}),_dp(n,"touchManager",{get:function(){return this._touchManager}}),_dp(n,"mouseX",{get:function(){return this._mouseX}}),_dp(n,"mouseY",{get:function(){return this._mouseY}}),n.prototype.findElementAt=function(t,e,i){return this._owner.findElementAt(t,e,i)},n.prototype.activate=function(t){this._doActivated(t)},n.prototype.deactivate=function(){this._doDeactivated()},n.prototype.keyDown=function(t){return this._doKeyDown(t)},n.prototype.keyUp=function(t){return this._doKeyUp(t)},n.prototype.keyPress=function(t){return this._doKeyPress(t)},n.prototype.mouseDown=function(t){var e=this._mouseX=this._clickX=t.mouseX,i=this._mouseY=this._clickY=t.mouseY;this.dragging&&this._stopDragTracker(e,i,!1),this._doMouseDown(t)},n.prototype.dragFrom=function(t,e){},n.prototype.dropFrom=function(t,e){},n.prototype.cancelFrom=function(t){},n.prototype.mouseMove=function(t){var e=this._mouseX=t.mouseX,i=this._mouseY=t.mouseY,o=this.dragTracker,n="mousemove"===t.type?t.buttons:"touchmove"===t.type?1:void 0;if(o){if(o.dragging)return void(null==n||0<n||re.Utils.ieOld&&0<=n?o.drag(this._mouseEventTarget,e,i)||(o=o.getNextRequest(e,i))&&(this._stopDragTracker(e,i,!0),this.dragTracker=this._getDragTracker(o,e,i),this._startDragTracker(e,i,t)):this._stopDragTracker(e,i,!0));if(3<=Math.abs(e-this._clickX)||3<=Math.abs(i-this._clickY)){if(null==n||0<n||re.Utils.ieOld&&0<=n)return void this._startDragTracker(e,i,t);this._stopDragTracker(e,i,!0),this._dragTracker=null}}this._doMouseMove(t)},n.prototype.mouseUp=function(t){var e=this._mouseX=t.mouseX,i=this._mouseY=t.mouseY;this.dragging?(this._stopDragTracker(e,i,!1),this._dragTracker.clickable&&this._doMouseUp(t)):(this._dragTracker instanceof Te.SelectTracker&&this._dragTracker._doEnded(),this._dragTracker=null,this._doMouseUp(t))},n.prototype.mouseEnter=function(t){this._doMouseEnter(t)},n.prototype.mouseLeave=function(t){this._doMouseLeave(t)},n.prototype.mouseOver=function(t){this._doMouseOver(t)},n.prototype.mouseOutside=function(){this._doMouseOutside()},n.prototype.mouseWheel=function(t){return this._doMouseWheel(t)},n.prototype.contextMenu=function(t){return this._doContextMenu(t)},n.prototype.click=function(t){this._doClick(t)},n.prototype.dblclick=function(t){this._doDblClick(t)},n.prototype.setFocus=function(t){this._doSetFocus(t)},n.prototype.focusLeave=function(t){this._doFocusLeave(t)},n.prototype.resetFocused=function(){},n.prototype.touchStart=function(t){this._lastTouch=Date.now(),this.touchManager?this.touchManager.touchStart(t):this._doTouchStart(t)},n.prototype.touchMove=function(t){this._lastTouch=Date.now(),this.touchManager?this.touchManager.touchMove(t):this._doTouchMove(t)},n.prototype.touchEnd=function(t){try{this._lastTouch=NaN,this.touchManager?this.touchManager.touchEnd(t):this._doTouchEnd(t)}catch(t){this.touchManager&&this.touchManager.clearTouches()}},n.prototype.touchCancel=function(t){this._lastTouch=NaN,this.touchManager?this.touchManager.touchCancel(t):this._doTouchCancel(t)},n.prototype.lastTouch=function(){return Date.now()-this._lastTouch},_dp(n,"mouseEventTarget",{get:function(){return this._mouseEventTarget}}),n.prototype.isMouseEventTarget=function(t){return t._dom===this._mouseEventTarget},n.prototype._doActivated=function(t){},n.prototype._doDeactivated=function(){},n.prototype._doKeyDown=function(t){return!1},n.prototype._doKeyUp=function(t){return!1},n.prototype._doKeyPress=function(t){return!1},n.prototype._doMouseDown=function(t){},n.prototype._doMouseMove=function(t){},n.prototype._doMouseUp=function(t){},n.prototype._doMouseEnter=function(t){},n.prototype._doMouseLeave=function(t){},n.prototype._doMouseOver=function(t){},n.prototype._doMouseOutside=function(){},n.prototype._doMouseWheel=function(t){return!1},n.prototype._doContextMenu=function(t){},n.prototype._doClick=function(t){},n.prototype._doDblClick=function(t){},n.prototype._doSetFocus=function(t){},n.prototype._doFocusLeave=function(t){},n.prototype._getDragTracker=function(t,e,i){return null},n.prototype._startDragTracker=function(t,e,i){void 0===i&&(i=null),this._dragTracker&&(this._dragTracker.start(this._mouseEventTarget,t,e,i)?this._doDragTrackerStarted(this._dragTracker):this._dragTracker=null)},n.prototype._stopDragTracker=function(t,e,i){var o;this.dragging&&(o=this._dragTracker,i?o.cancel():o.drop(this._mouseEventTarget,t,e),this._doDragTrackerFinished(o,i))},n.prototype._doDragTrackerStarted=function(t){},n.prototype._doDragTrackerFinished=function(t,e){},n.prototype._findTableCell=function(t){return this.owner.getTableCell(t||this.mouseEventTarget)},n.prototype._doTouchStart=function(t){},n.prototype._doTouchMove=function(t){},n.prototype._doTouchEnd=function(t){},n.prototype._doTouchCancel=function(t){};var o,i=n;function n(t,e){var i=o.call(this)||this;return i._clickX=0,i._clickY=0,i._mouseX=0,i._mouseY=0,i._owner=t,i._name=e,i._previous=null,i}e.VisualTool=i;r=se.Base,ne.__extends(s,r),_dp(s,"cursor",{get:function(){return"default"}}),_dp(s,"source",{get:function(){}}),_dp(s,"selectable",{get:function(){return!1}}),_dp(s,"dblClickable",{get:function(){return!1}});var r,i=s;function s(){return r.call(this)||this}e.EditRequest=i})),v=(t(De),De.VisualTool,De.EditRequest,e(function(t,e){Object.defineProperty(e,"__esModule",{value:!0}),(a=n=e.ScrollEventType||(e.ScrollEventType={})).LINE="line",a.PAGE="page",a.THUMB_TRACK="thumbTrack",a.THUMB_END="thumbEnd",a.SCROLL_END="scrollEnd",o=pt.VisualElement,ne.__extends(i,o),i.prototype._doDispose=function(){this._scrollBar=null,o.prototype._doDispose.call(this)},_dp(i,"scrollBar",{get:function(){return this._scrollBar}}),_dp(i,"vertical",{get:function(){return this._scrollBar.vertical}}),i.prototype._doDraw=function(t){this._doRender(t)},i.prototype._doRender=function(t){},i.prototype._changed=function(){this.invalidate()};var n,o,r=i;function i(t,e,i){t=o.call(this,t,i)||this;return t._scrollBar=e,t}s=r,ne.__extends(l,s),l.prototype._getCssSelector=function(){return"rg-scrolledge"};var s,a=l;function l(t){return s.call(this,t,null,"scrollEdgeView")||this}e.ScrollEdge=a;h=r,ne.__extends(u,h),u.prototype._doDispose=function(){h.prototype._doDispose.call(this)},u.prototype._getCssSelector=function(){return"rg-scrolltrack"};var h,d=u;function u(t){return h.call(this,t.doc,t,"scrollTrackView")||this}e.ScrollTrack=d;c=r,ne.__extends(p,c),_dp(p,"enabled",{get:function(){return this._enabled},set:function(t){t!=this._enabled&&(this._enabled=t,this._changed())}}),_dp(p,"far",{get:function(){return this._far}}),p.prototype._getCssSelector=function(){return this.scrollBar.vertical?this._far?"rg-scroll-down":"rg-scroll-up":this._far?"rg-scroll-right":"rg-scroll-left"};var c,_=p;function p(t,e){t=c.call(this,t.doc,t,"scrollButtonView")||this;return t._enabled=!0,t._far=e,t}e.ScrollButton=_;f=r,ne.__extends(m,f),m.prototype._getCssSelector=function(){return"rg-scrollthumb"};var f,g=m;function m(t){return f.call(this,t.doc,t,"scrollThumbView")||this}e.ScrollThumb=g;y=pt.VisualElement,ne.__extends(v,y),v.prototype._doDispose=function(){this._track=this._track.dispose(),this._thumb=this._thumb.dispose(),this._nearButton=this._nearButton.dispose(),this._farButton=this._farButton.dispose(),y.prototype._doDispose.call(this)},_dp(v,"container",{get:function(){return this._container}}),_dp(v,"lineScrollSize",{get:function(){return this._lineScrollSize},set:function(t){(t=Math.max(1,t))!=this._lineScrollSize&&(this._lineScrollSize=t)}}),_dp(v,"pageScrollSize",{get:function(){return this._pageScrollSize},set:function(t){(t=Math.max(1,t))!=this._pageScrollSize&&(this._pageScrollSize=t)}}),_dp(v,"minThumbSize",{get:function(){return this._minThumbSize},set:function(t){(t=Math.max(8,t))!=this._minThumbSize&&(this._minThumbSize=t,this.invalidateLayout())}}),_dp(v,"vertical",{get:function(){return this._vertical}}),_dp(v,"pos",{get:function(){return this._pos}}),_dp(v,"maxPosition",{get:function(){return this._maxPosition}}),_dp(v,"buttonSize",{get:function(){return this._buttonSize}}),_dp(v,"tipView",{set:function(t){this._tipView=t}}),v.prototype.layoutContent=function(){this._needLayout&&(this._needLayout=!1,this._doLayoutContent())},v.prototype.setProperties=function(t,e,i){t=Math.max(0,t),e=Math.max(t,e),t==this._min&&e==this._max&&i==this._page||(this._min=t,this._max=e,this._page=i,this._pos=Math.min(this._max,Math.max(this._min,this._pos)),this._maxPosition=Math.max(0,this._max-this._page),this.invalidate(),this._needLayout=!0)},v.prototype.setPosition=function(t,e){void 0===e&&(e=!0),(t=Math.min(this._maxPosition,Math.max(this._min,t)))!=this._pos&&(this._pos=t,this.invalidate(),this._needLayout=!0,e)&&this.layoutContent()},v.prototype.ptInTrack=function(t,e,i){e=this.containerToElement(t,e);if(this._vertical){if(e.y>=this._nearButton.height&&e.x<this._farButton.y)return!i&&e.y<this._thumb.y||i&&e.y>=this._thumb.bottom}else if(t>=this._nearButton.width&&t<this._farButton.x)return!i&&e.x<this._thumb.x||i&&e.x>=this._thumb.right;return!1},v.prototype.setText=function(t){var e,i;this._tipView&&t&&(this._tipView.show(),this._tipView.setText(t),e=t=void 0,e=this._vertical?(i=this._tipView.width(),t=this.x-i-5,this._thumb.y):(i=this._tipView.height(),t=this._thumb.x,this.y-i-5),this._tipView.move(t,e))},v.prototype._getCssSelector=function(){return this._vertical?"rg-vscrollbar":"rg-hscrollbar"},v.prototype.draw=function(){y.prototype.draw.call(this)},v.prototype._doDraw=function(t){},v.prototype._doSizeChanged=function(){this.invalidateLayout()},v.prototype.invalidateLayout=function(){this._needLayout=!0,y.prototype.invalidateLayout.call(this)},v.prototype._doLayoutContent=function(){var t=this._vertical,e=this._buttonSize,i=this.height,o=this.width,n=(t?i:o)-2*e,r=Math.min(n,Math.max(this._minThumbSize,Math.floor(n*this._page/(this._max-this._min+1)))),s=e+Math.min(n-r,Math.max(0,Math.floor((n-r)*this._pos/(this._maxPosition-this._min))));this._track.setBounds(0,0,o,i),t?(this._nearButton.setBounds(0,0,o,e),this._farButton.setBounds(0,i-e,o,e),r<=n&&this._thumb.setBounds(2,s,o-4,r)):(this._nearButton.setBounds(0,0,e,i),this._farButton.setBounds(o-e,0,e,i),r<=n&&this._thumb.setBounds(s,2,r,i-4))},v.prototype._doScroll=function(t,e,i){this.fireEvent(v.SCROLLED,t,e,i)},v.SCROLLED="onScrollBarScrolled";var y,a=v;function v(t,e){void 0===e&&(e=!1);var i=y.call(this,t.doc,"scrollBarView")||this;return i._lineScrollSize=1,i._pageScrollSize=1,i._minThumbSize=20,i._min=0,i._max=0,i._pos=0,i._page=0,i._maxPosition=0,i._buttonSize=20,i._needLayout=!0,i._tipView=null,i._container=t,i._vertical=e,i._track=new d(i),i.addChild(i._track),i._thumb=new g(i),i.addChild(i._thumb),i._nearButton=new _(i,!1),i.addChild(i._nearButton),i._farButton=new _(i,!0),i.addChild(i._farButton),i}e.ScrollBar=a;C=Ee.DragTracker,ne.__extends(x,C),x.prototype._doDispose=function(){this._thumb=this._thumb&&this._thumb.dispose(),C.prototype._doDispose.call(this)},_dp(x,"thumb",{get:function(){return this._thumb},set:function(t){this._thumb=t}}),_dp(x,"startWhenCreated",{get:function(){return!0}}),x.prototype._doStart=function(t,e,i){var o=this._thumb.scrollBar,e=o.containerToElement(e,i);return o.vertical?this._offset=e.y-this._thumb.y:this._offset=e.x-this._thumb.x,!0},x.prototype._doDrag=function(t,e,i){return this.$_doScroll(e,i,n.THUMB_TRACK)},x.prototype._doCompleted=function(t,e,i){return this.$_doScroll(e,i,n.THUMB_END)},x.prototype._doCanceled=function(t,e){},x.prototype._doEnded=function(){},x.prototype.$_doScroll=function(t,e,i){var o,n=this._thumb.scrollBar,r=n._maxPosition-n._min+1,s=n._buttonSize,t=n.containerToElement(t,e);if(n.vertical){if((o=n.height-2*s-this._thumb.height)<=0)return!1;t.y-=this._offset,t.y=(t.y-s)*r/o,n._doScroll(i,0,Math.max(Math.floor(t.y),0))}else{if((o=n.width-2*s-this._thumb.width)<=0)return!1;t.x-=this._offset,t.x=(t.x-s)*r/o,n._doScroll(i,0,Math.max(Math.floor(t.x),0))}return!0};var C,w=x;function x(t){return C.call(this,t,"scrollThumbTracker")||this}e.ScrollThumbTracker=w;b=P.EventAware,ne.__extends(E,b),_dp(E,"active",{get:function(){return void 0!==this._timer}}),E.prototype.start=function(t){this._button=t,this._scrollBar=t.scrollBar,this._active=!0,setTimeout(function(){this._ready&&(this._ready=!1,clearInterval(this._timer),this._timer=setInterval(function(){this._active&&this.$_fireEvent()}.bind(this),20))}.bind(this),300),this._ready=!0,this.$_fireEvent()},E.prototype.move=function(t,e){t=this._button.containerToElement(t,e);this._active=this._button.containsInClient(t.x,t.y)},E.prototype.stop=function(){this._ready=!1,this._timer&&(clearInterval(this._timer),this._timer),this._button},E.prototype.$_fireEvent=function(){var t=this._button.far?1:-1,e=n.LINE;this._scrollBar._doScroll(e,this._scrollBar.lineScrollSize*t,0)};var b,I=E;function E(){var t=b.call(this)||this;return t._active=!1,t._timer=void 0,t._ready=!1,t}e.ScrollButtonTimer=I;S=se.Base,ne.__extends(T,S),_dp(T,"active",{get:function(){return this._active}}),T.prototype.start=function(t,e,i,o){this._scrollBar=t,this._far=e,this._active=!0,setTimeout(function(){this._ready&&(this._ready=!1,this._timer=setInterval(function(){this._active&&this.$_fireEvent()}.bind(this),50))}.bind(this),300),this._ready=!0;t=this._scrollBar.containerToElement(i,o);this._mouseX=t.x,this._mouseY=t.y,this.$_fireEvent()},T.prototype.move=function(t,e){t=this._scrollBar.containerToElement(t,e);this._mouseX=t.x,this._mouseY=t.y,this._active=this._scrollBar.ptInTrack(t.x,t.y,this._far)},T.prototype.stop=function(){this._ready=!1,this._timer&&clearInterval(this._timer)},T.prototype.$_fireEvent=function(){var t,e=null,i=0,o=this._scrollBar._thumb;this._scrollBar.vertical?(t=this._mouseY,this._far&&t>o.bottom?(e=n.PAGE,i=1):!this._far&&t<o.y&&(e=n.PAGE,i=-1)):(t=this._mouseX,this._far&&t>o.right?(i=1,e=n.PAGE):t<o.x&&(e=n.PAGE,i=-1)),0!=i&&this._scrollBar._doScroll(e,this._scrollBar.pageScrollSize*i,0)};var S,R=T;function T(){var t=S.call(this)||this;return t._active=!1,t._timer=void 0,t._ready=!1,t._mouseX=0,t._mouseY=0,t}e.ScrollTrackTimer=R;D=De.VisualTool,ne.__extends(k,D),k.prototype._doDispose=function(){this._thumbTracker.cancel(),this._thumbTracker=this._thumbTracker.dispose(),this._buttonTimer.stop(),this._buttonTimer=this._buttonTimer.dispose(),this._trackTimer.stop(),this._trackTimer=this._trackTimer.dispose(),D.prototype._doDispose.call(this)},k.prototype._doMouseDown=function(t){var e,i=t.mouseX,t=t.mouseY,o=(this._clickElement=null,this.dragTracker=null,this._buttonTimer.stop(),this._trackTimer.stop(),this.findElementAt(i,t,!1));o instanceof r&&((this._clickElement=o)instanceof _?this._buttonTimer.start(o):o instanceof g?(this._thumbTracker.thumb=o,this.dragTracker=this._thumbTracker):o instanceof d&&(e=o.scrollBar.ptInTrack(i,t,!0),this._trackTimer.start(o.scrollBar,e,i,t)))},k.prototype._doMouseMove=function(t){var e=t.mouseX,i=t.mouseY,o=this._clickElement,t="mousemove"===t.type?t.buttons:"touchmove"===t.type?1:void 0;null==t||0<t||re.Utils.ieOld&&0<=t?o instanceof _&&this._buttonTimer.active?this._buttonTimer.move(e,i):o instanceof d&&this._trackTimer.active&&this._trackTimer.move(e,i):(this._buttonTimer.active&&this._buttonTimer.stop(),this._trackTimer.active&&this._trackTimer.stop())},k.prototype._doMouseUp=function(t){this._clickElement&&this._clickElement.scrollBar._doScroll(n.SCROLL_END,0,-1),this._clickElement=null,this._buttonTimer.stop(),this._trackTimer.stop()},k.prototype._doTouchStart=function(t){this.mouseDown(t),t.preventDefault()},k.prototype._doTouchEnd=function(t){this.mouseUp(t)},k.prototype._doTouchMove=function(t){this.mouseMove(t)};var D,a=k;function k(t){var e=D.call(this,t,"scrollTool")||this;return e._buttonTimer=new I,e._trackTimer=new R,e._thumbTracker=new w(t),e}e.ScrollTool=a;M=se.Base,ne.__extends(F,M),F.prototype._doDispose=function(){this._element=re.Utils.detach(this._element),this._container=null,M.prototype._doDispose.call(this)},F.prototype.show=function(){this._container._container.appendChild(this._element)},F.prototype.hide=function(){re.Utils.detach(this._element)},F.prototype.move=function(t,e){re.Utils.move(this._element,t,e)},F.prototype.setText=function(t){this._element.innerHTML=t},F.prototype.width=function(){return this._element.offsetWidth},F.prototype.height=function(){return this._element.offsetHeight},F.prototype.getRect=function(){return this._element.getBoundingClientRect()},F.prototype.$_createElement=function(t){var t=t.createElement("div"),e=t.style;return e.position="absolute",e.padding="4px 4px",e.boxSizing="border-box",e.display="lnline-block",e.pointerEvents="none",e.userSelect="none",t.className="rg-scroll-tip-view",t};var M,a=F;function F(t){var e=M.call(this)||this;return e._container=t,e._element=e.$_createElement(t.doc),e}e.ScrollTipView=a})),ke=(t(v),v.ScrollEventType,v.ScrollEdge,v.ScrollTrack,v.ScrollButton,v.ScrollThumb,v.ScrollBar,v.ScrollThumbTracker,v.ScrollButtonTimer,v.ScrollTrackTimer,v.ScrollTool,v.ScrollTipView,e(function(t,e){Object.defineProperty(e,"__esModule",{value:!0});o=pt.VisualElement,ne.__extends(n,o),_dp(n,"container",{get:function(){return this._contaner}}),n.prototype._getCssSelector=function(){},n.prototype._doDraw=function(t){};var o,i=n;function n(t,e,i){t=o.call(this,t,e)||this;return t._contaner=i,t}r=P.EventAware,ne.__extends(a,r),a.prototype.getMouseContainer=function(){return a.$_Containers[a.$_mouseContainer]},a.prototype.findContainer=function(t,e){for(var i in a.$_Containers){i=a.$_Containers[i];if(i.contains(e||t.target))return i}return null},a.getActiveGrid=function(){var t=a.$_Containers[a.$_ActiveGrid];return t&&t._gridView},a.setActiveGrid=function(t){var e,i;t!==a.$_ActiveGrid&&(e=void 0,i=(i=a.$_Containers[t])&&i._gridView,window.RealGrid&&(e=window.RealGrid.onActiveGridChanged)&&e((e=(e=a.$_Containers[a.$_ActiveGrid])&&e._gridView)&&e.handler,i&&i.handler),i._fireGridActivated()),a.$_ActiveGrid=t},a.getGridInstance=function(t){if("string"==typeof t&&(t=document.getElementById(t)),Ie.$_instanceOf(t,"HTMLDivElement"))for(var e in a.$_Containers){e=a.$_Containers[e];if(e._containerDiv===t)return e.gridView}},a.clearContainer=function(t){a[t]&&delete a[t],a.$_ActiveGrid===t&&(a.$_ActiveGrid=null)},a.disposeStatic=function(){this.$_Containers=null,this.$_ActiveGrid=null},a.prototype._doDispose=function(){this._activeTool=null,this._defaultTool=this._defaultTool.dispose(),this._scrollTool=this._scrollTool.dispose(),this.$_removeListenerAll(null),re.Utils.detach(this._containerDom),this._containerDom=null,this._container=null,this._doc=null,re.Utils.clearElements(this._containerDiv),r.prototype._doDispose.call(this),delete a.$_Containers[this.$_hash]},_dp(a,"doc",{get:function(){return this._doc}}),_dp(a,"disabled",{get:function(){return this._disabled},set:function(t){t!=this._disabled&&(this._disabled=t,this._doDisabledChanged())}}),_dp(a,"activeTool",{get:function(){return this._activeTool},set:function(t){var e;(t=t||this._defaultTool)!=this._activeTool&&((e=this._activeTool)&&e.deactivate(),this._activeTool=t)&&t.activate(e)}}),_dp(a,"defaultTool",{get:function(){return this._defaultTool}}),_dp(a,"measurer",{get:function(){return this._measurer}}),a.prototype.findElementAt=function(t,e,i){return this._rootElement.findChildAt(t-this._rootElement._x,e-this._rootElement._y,i)},a.prototype.getTableCell=function(t){return null},a.prototype.setCursor=function(t){t!=this._cursor&&(this._containerDom.style.cursor=this._cursor=t)},a.prototype.setFocus=function(){this._containerDom.focus()},a.prototype.updateNow=function(){this._layoutNeeded=!0,this.invalidate(!0),this._render(re.Utils.getTimer())},a.prototype.toScreen=function(t){var e=this._containerDom.getBoundingClientRect();return t.x+=e.left,t.y+=e.top,t},a.prototype.pointToScreen=function(t,e){var i=this._containerDom.getBoundingClientRect();return{x:t+i.left,y:e+i.top}},a.prototype.getBound=function(){var t=this._containerDom.getBoundingClientRect();return new nt.Rectangle(t.left,t.top,t.width,t.height)},a.prototype.getHtml=function(){return this._containerDom.outerHTML},a.prototype.addElement=function(t){return this._rootElement.addChild(t)},a.prototype.removeElement=function(t){return this._rootElement.removeChild(t)},a.prototype.resetSize=function(t){void 0===t&&(t=null),this.updateNow(),t&&setTimeout(t,0)},a.prototype.measureText=function(t,e,i){this._textMeasurer.className=t;t=this._textMeasurer.style;return i?(t.fontSize=i.fontSize,t.fontFamily=i.fontFamily,t.fontWeight=i.fontWeight,t.fontStyle=i.fontStyle):(t.removeProperty("font-size"),t.removeProperty("font-family"),t.removeProperty("font-weight"),t.removeProperty("font-style")),this._textMeasurer.innerHTML=e,this._textMeasurer.offsetWidth},a.prototype.$_refreshCheckMeasurer=function(){var t,e;return this._checkRect||(t=this._checkMeasurer.getBoundingClientRect(),e=re.getDocWin(this._doc).getComputedStyle(this._checkMeasurer),this._checkRect={width:t.width+parseInt(e.marginLeft)+parseInt(e.marginRight),height:t.height+parseInt(e.marginTop)+parseInt(e.marginBottom)}),this._checkRect},a.prototype.measureCheckWidth=function(){return this.$_refreshCheckMeasurer().width},a.prototype.measureCheckHeight=function(){return this.$_refreshCheckMeasurer().height},a.prototype.contains=function(t){if(t instanceof re.getDocWin(this.doc).HTMLElement)for(var e=t.parentElement;e;){if(e===this._containerDom)return!0;e=e.parentElement}return!1},a.prototype.getDomPosition=function(t){return this.offsetDomPosition(t,{x:0,y:0})},a.prototype.offsetDomPosition=function(t,e){var i=re.getDocWin(this._doc),o=this._containerDom.getBoundingClientRect(),t=t.getBoundingClientRect(),i=i.getComputedStyle(this._containerDom);return e.x=t.left-o.left-Math.round(parseFloat(i.borderLeftWidth)),e.y=t.top-o.top-Math.round(parseFloat(i.borderTopWidth)),e},a.prototype.cancelOtherContainer=function(t){for(var e in a.$_Containers){var e=a.$_Containers[e];e!==this&&(e=e._activeTool)&&e.cancelFrom(t)}},a.prototype._doDisabledChanged=function(){},a.prototype.prepareContainer=function(t,e,i){if(!t)throw new Error("container is null!");if(Ie.$_instanceOf(t,"HTMLDivElement")?this._containerDiv=t:this._containerDiv=document.getElementById(t),!Ie.$_instanceOf(this._containerDiv,"HTMLDivElement"))throw new Error("Invalid grid container element: "+t);var t=this._doc=this._containerDiv.ownerDocument,o=re.getDocWin(t),n=this._containerDiv.getElementsByClassName("rg-root");if(n&&0<n.length)throw new Error("Grid is already contained ContainerDiv");o.requestAnimationFrame=o.requestAnimationFrame||o.mozRequestAnimationFrame||o.webkitRequestAnimationFrame||o.msRequestAnimationFrame||function(t){return o.setTimeout(t,10)};var n=this._containerDom=t.createElement("div"),r=(this._container=this._containerDom,n.style),r=(this._cursor=r.cursor,this._containerDiv.appendChild(n),n.setAttribute("tabindex","0"),r.position="relative",r.width="100%",r.height="100%",r.boxSizing="border-box",r.overflow="hidden",r["-webkit-touch-callout"]="none",r["-webkit-user-select"]="none",r["user-select"]="none",r["-webkit-tap-highlight-color"]="rgba(0, 0, 0, 0)",this._rootElement=this._createRootElement(t),this._measurer=t.createElement("div"),this._measurer.setAttribute("aria-hidden","true"),this._container.appendChild(this._measurer),this._textMeasurer=t.createElement("span")),r=(r.setAttribute("aria-hidden","true"),r.style.position="absolute",r.style.left="-10000px",r.style.top="-10000px",r.style.display="block",this._container.appendChild(r),this._checkMeasurer=t.createElement("input"));r.type="checkbox",r.title="grid check measurer",r.tabIndex=-1,r.setAttribute("aria-hidden","true"),r.style.position="absolute",r.style.left="-1000px",r.style.top="-11000px",r.style.display="block",this._container.appendChild(r),this._doPrepareContainer(n,e,i)},a.prototype._doPrepareContainer=function(t,e,i){},a.prototype._createRootElement=function(t){t=new i(t,"root",this);return this._containerDom.appendChild(t._dom),t},a.prototype.isLayoutNeeded=function(){return this._layoutNeeded},a.prototype.invalidateLayout=function(){this._layoutNeeded||(this._layoutNeeded=!0,this.invalidate(!0))},a.prototype.invalidate=function(t){var e=re.getDocWin(this._doc);this._updateRequested&&this._invalidated||!t&&this._drawing||(this._requestTimer||(this._requestTimer=e.requestAnimationFrame(this._containerRender)),this._updateRequested=!0,this._invalidated=!0)},a.prototype.invalidateElement=function(t){var e=re.getDocWin(this._doc);this._drawing||this._updateRequested||(this._requestTimer||(this._requestTimer=e.requestAnimationFrame(this._containerRender)),this._updateRequested=!0)},a.prototype._render=function(t){if(!this.disposing){this._updateRequested=!1,this._drawing=!0;try{this._doBeforeRender(),this.$$_render(t)}finally{this._drawing=!1,this._invalidated=!1,this._requestTimer=null,this._doAfterRender()}}},a.prototype.$$_render=function(t){var e=this._containerDom,i=isNaN(this._testWidth)?e.clientWidth:this._testWidth,e=isNaN(this._testHeight)?e.clientHeight:this._testHeight;if(this._layoutChildren(new nt.Rectangle(0,0,i,e)),this._layoutNeeded)try{this._doLayout(new nt.Rectangle(0,0,i,e))}finally{this._layoutNeeded=!1}else this._doPrepareRender(new nt.Rectangle(0,0,i,e));this._doRenderHtml(new nt.Rectangle(0,0,i,e))},a.prototype._layoutChildren=function(t){},a.prototype._doLayout=function(t){},a.prototype._doAfterRender=function(){},a.prototype._doPrepareRender=function(t){},a.prototype._doRenderHtml=function(t){this._doDrawContainer(t),this._drawElement(this._rootElement),this._validateChildren(this._rootElement)},a.prototype._doDrawContainer=function(t){},a.prototype._drawElement=function(t){t.draw();for(var e=0,i=t.childCount;e<i;e++){var o=t.getChild(e);o.visible&&this._drawElement(o)}},a.prototype._validateChildren=function(t){for(var e=0,i=t.childCount;e<i;e++)t.getChild(e).validate()},a.prototype._setFocusAndScroll=function(t){t.setFocus?t.setFocus():t.focus&&t.focus({preventScroll:!0})},a.prototype._registerEventHandlers=function(t,e){var i=re.getWin(t);t.style.cursor=this._defaultCursor,this.$_addListener(i,"resize",this._resizeHandler.bind(this),!1),this.$_addListener(i,"mousemove",this._mouseMoveHandler.bind(this),!1),this.$_addListener(i,"mouseup",this._mouseUpHandler.bind(this),!1),this.$_addListener(i,"focus",this._focusHandlerFireFox.bind(this),!0),this.$_addListener(i,"focusin",this._focusinHandler.bind(this),!0),this.$_addListener(i,"focusout",this._focusoutHandler.bind(this),!0),this.$_addListener(i,"mousedown",this._globalMouseDownHandler.bind(this),!1),e&&(this.$_addListener(e,"keydown",this._keyDownHandler.bind(this),!1),this.$_addListener(e,"keyup",this._keyUpHandler.bind(this),!1),this.$_addListener(e,"keypress",this._keyPressHandler.bind(this),!1)),this.$_addListener(t,"click",this._clickHandler.bind(this),!1),this.$_addListener(t,"dblclick",this._dblclickHandler.bind(this),!1),this.$_addListener(t,"mousedown",this._mouseDownHandler.bind(this),!1),this.$_addListener(t,"mouseenter",this._mouseEnterHandler.bind(this),!1),this.$_addListener(t,"mouseleave",this._mouseLeaveHandler.bind(this),!1),this.$_addListener(t,"mouseover",this._mouseOverHandler.bind(this),!1),this.$_addListener(t,"focus",this._focusHandler.bind(this),!1),this.$_addListener(t,"contextmenu",this._contextMenuHander.bind(this),!1),this.$_addListener(t,"blur",this._blurHandler.bind(this),!1),this.$_addListener(t,"selectstart",this._selectstartHandler.bind(this),!1),this.$_addListener(t,"wheel",this._wheelHandler.bind(this),!!re.Utils.isPassive()&&{capture:!1,passive:!1}),this.$_addListener(t,"touchstart",this._touchStartHandler.bind(this),!!re.Utils.isPassive()&&{capture:!1,passive:!1}),this.$_addListener(t,"touchmove",this._touchMoveHandler.bind(this),!!re.Utils.isPassive()&&{capture:!1,passive:!1}),this.$_addListener(t,"touchend",this._touchEndHandler.bind(this),!1),this.$_addListener(t,"touchcancel",this._touchCancelHandler.bind(this),!1),this.$_addListener(t,"touchleave",this._touchLeaveHandler.bind(this),!1)},a.prototype.$_addListener=function(t,e,i,o){t in this._eventHandlers||(this._eventHandlers[t]={}),e in this._eventHandlers[t]||(this._eventHandlers[t][e]=[]),this._eventHandlers[t][e].push([i,o]),t.addEventListener(e,i,o),this._eventNodes.indexOf(t)<0&&this._eventNodes.push(t)},a.prototype.$_removeListener=function(t,e){if(t in this._eventHandlers){var i=this._eventHandlers[t];if(e in i)for(var o=i[e],n=o.length;n--;){var r=o[n];t.removeEventListener(e,r[0],r[1])}}},a.prototype.$_removeListenerAll=function(t){for(var e=(t=void 0===t?null:t)?[t]:this._eventNodes,i=0,o=e.length;i<o;i++){var n=e[i];if(n in this._eventHandlers){var r,s=this._eventHandlers[n];for(r in s)for(var a=s[r],l=a.length;l--;){var h=a[l];n.removeEventListener(r,h[0],h[1])}}}},a.prototype._doResized=function(t){},a.prototype._isEnabled=function(){return this._activeTool&&!this._disabled},a.prototype._isOutChildElement=function(t){return!1},a.prototype.$_checkKeyElement=function(t){var e=re.getWin(t.target);return t.target===t.currentTarget&&t.target===this._containerDom||t.target instanceof e.HTMLTableCellElement&&re.Utils.isAncestorOf(this._containerDom,t.target)},a.prototype._keyDownHandler=function(t){this._isEnabled()&&this.$_checkKeyElement(t)&&this._activeTool.keyDown(t)},a.prototype._keyUpHandler=function(t){this._isEnabled()&&this.$_checkKeyElement(t)&&this._activeTool.keyUp(t)},a.prototype._keyPressHandler=function(t){this._isEnabled()&&this.$_checkKeyElement(t)&&this._activeTool.keyPress(t)},a.prototype.eventToContainer=function(t){var e=this._containerDom.getBoundingClientRect();return new he.Point(t.clientX-e.left,t.clientY-e.top)},a.prototype.toOffset=function(t){var e=this._containerDom.getBoundingClientRect();return t.mouseX=t.clientX-e.left,t.mouseY=t.clientY-e.top,t},a.prototype.toOffsetTouch=function(t){var e=this._containerDom.getBoundingClientRect(),i=t.touches[0]||t.changedTouches[0];return t.mouseX=i.clientX-e.left,t.mouseY=i.clientY-e.top,t},a.prototype._clickHandler=function(t){this._isEnabled()?this._activeTool.click(this.toOffset(t)):t.preventDefault()},a.prototype._dblclickHandler=function(t){this._isEnabled()?this._activeTool.dblclick(this.toOffset(t)):t.preventDefault()},a.prototype.$_setMouseTarget=function(t){for(var e=re.getWin(this._containerDom),i=t.target;i&&!(i instanceof e.HTMLElement);)i=i.parentElement||i.parentNode;this.activeTool._mouseEventTarget=i instanceof e.HTMLElement?i:null},a.prototype._mouseDownHandler=function(t){var e;this._isEnabled()?(a.$_mouseContainer=this.$_hash,this.toOffset(t),this._currentX=t.mouseX,this._currentY=t.mouseY,(e=this.findElementAt(this._currentX,this._currentY,!1))&&e.getAncestor(v.ScrollBar)?(this.activeTool.setFocus(),this.activeTool!==this._scrollTool&&(this._scrollTool._previous=this.activeTool),this.activeTool=this._scrollTool):this.activeTool||(this.activeTool!==this._defaultTool&&(this._defaultTool._previous=this.activeTool),this.activeTool=this._defaultTool),this.$_setMouseTarget(t),this.activeTool.mouseDown(t)):t.preventDefault()},a.prototype._mouseMoveHandler=function(t){var e;if(this._containerDom.parentElement&&(this.toOffset(t),this._currentX=t.mouseX,this._currentY=t.mouseY,this._isEnabled())){e=this._activeTool,this.$_setMouseTarget(t),e.mouseMove(t);var i=e.dragTracker;if(i&&i.linkable&&a.$_mouseContainer==this.$_hash)for(var o in a.$_Containers){o=a.$_Containers[o];o!==this&&(e=o._activeTool)&&e.dragFrom(t,i)}}},a.prototype._mouseUpHandler=function(t){var e,i,o,n=a.$_mouseContainer==this.$_hash,r=this._activeTool;try{this.toOffset(t),this._currentX=t.mouseX,this._currentY=t.mouseY,this._isEnabled()?(e=r.dragTracker,this.$_setMouseTarget(t),r.mouseUp(t),r instanceof v.ScrollTool&&(this.activeTool=r.previous),e&&e.linkable&&n&&(i=this.findContainer(t))&&i!==this&&(o=i._activeTool)&&o.dropFrom(t,e)):t.preventDefault()}finally{r&&(this.setCursor("default"),r.dragTracker=null),n&&(a.$_mouseContainer=-1)}},a.prototype._mouseEnterHandler=function(t){this._isEnabled()&&this._activeTool.mouseEnter(this.toOffset(t))},a.prototype._mouseLeaveHandler=function(t){this._isEnabled()&&this._activeTool.mouseLeave(this.toOffset(t))},a.prototype._mouseOverHandler=function(t){this._isEnabled()&&this._activeTool.mouseOver(this.toOffset(t))},a.prototype._contextMenuHander=function(t){this.toOffset(t),this._currentX=t.mouseX,this._currentY=t.mouseY,this._isEnabled()&&(this.$_setMouseTarget(t),this._activeTool.contextMenu(this.toOffset(t)))},a.prototype._wheelHandler=function(t){this._isEnabled()&&(this.$_setMouseTarget(t),this._activeTool.mouseWheel(this.toOffset(t)))&&re.Utils.stopEvent(t)},a.prototype._focusHandler=function(t){},a.prototype._blurHandler=function(t){},a.prototype._selectstartHandler=function(t){return!1},a.prototype._focusinHandler=function(t){},a.prototype._globalMouseDownHandler=function(t){re.Utils.isAncestorOf(this._containerDiv,t.target)||this._isOutChildElement(t)||(this._focused=!1,this._isEnabled()&&this._activeTool.focusLeave(t))},a.prototype._focusoutHandler=function(t){re.Utils.isAncestorOf(this._containerDiv,t.target)&&t.relatedTarget&&!re.Utils.isAncestorOf(this._containerDiv,t.relatedTarget)&&!this._isOutChildElement(t)&&(this._focused=!1,this._isEnabled())&&this._activeTool.focusLeave(t)},a.prototype._focusHandlerFireFox=function(t){t.target===this._containerDom||re.Utils.isAncestorOf(this._containerDom,t.target)?this._isEnabled()&&(this._containerDom.setAttribute("tabindex","-1"),this._focused=!0,this._activeTool.setFocus(t.target)):this._isOutChildElement(t)||(this._containerDom.setAttribute("tabindex","0"),this._focused=!1)},a.prototype._touchStartHandler=function(t){var e;this._isEnabled()?(this._activeTool.setFocus(),this.toOffsetTouch(t),this._currentX=t.mouseX,this._currentY=t.mouseY,(e=this.findElementAt(this._currentX,this._currentY,!1))&&e.getAncestor(v.ScrollBar)?this.activeTool=this._scrollTool:this.activeTool||(this.activeTool=this._defaultTool),this._isEnabled()&&(this.$_setMouseTarget(t),this._activeTool.touchStart(t))):t.preventDefault()},a.prototype._touchMoveHandler=function(t){this.toOffsetTouch(t),this._currentX=t.mouseX,this._currentY=t.mouseY,this._isEnabled()&&(this.$_setMouseTarget(t),this._activeTool.touchMove(t))},a.prototype._touchEndHandler=function(t){this.toOffsetTouch(t),this._currentX=t.mouseX,this._currentY=t.mouseY,this._isEnabled()&&(this.$_setMouseTarget(t),this._activeTool.touchEnd(t),this._activeTool instanceof v.ScrollTool)&&(this.activeTool=this._activeTool.previous)},a.prototype._touchCancelHandler=function(t){this._isEnabled()&&(this.$_setMouseTarget(t),this._activeTool.touchCancel(t))},a.prototype._touchLeaveHandler=function(t){this._isEnabled()&&this._activeTool.touchEnd(t)},a.$_Containers={},a.$_mouseContainer=-1,a.$_ActiveGrid=null;var r,s=a;function a(t,e,i){var o=r.call(this)||this;return o._disabled=!1,o._updateRequested=!1,o._layoutNeeded=!1,o._invalidated=!1,o._captured=!1,o._focusing=!1,o._focusingTarget=null,o._hovered=null,o._currentX=0,o._currentY=0,o._rendered=0,o._defaultCursor="default",o._drawing=!1,o._clicked=0,o._clicket=0,o._children=[],o._eventHandlers={},o._eventNodes=[],o._contextMenu=null,o._containerRender=o._render.bind(o),o._scrollTool=new v.ScrollTool(o),o._cursor="default",o._testWidth=NaN,o._testHeight=NaN,o.prepareContainer(t,e,i),o.invalidateLayout(),o._registerEventHandlers(o._rootElement._dom,o._containerDom),o.activeTool=o._defaultTool=o._createDefaultTool(),a.$_Containers[o.$_hash]=o}e.VisualContainer=s})),Me=(t(ke),ke.VisualContainer,e(function(t,e){Object.defineProperty(e,"__esModule",{value:!0});o=ve.CellElement,ne.__extends(i,o),_dp(i,"model",{get:function(){return this._model}}),i.prototype.setStyleName=function(t,e,i){i==this._styleName&&e==this._cellDom||(this._styleName=i,this._className="",this._setClassName(t))},i.prototype._getCssSelector=function(){return this._styleName},i.prototype._clearCellCache=function(){o.prototype._clearCellCache.call(this),this._textChanged=!0},i.prototype._doPrepareValue=function(t,e){this._model.headText!=this._text&&(this._text=this._model.headText||"",this._textChanged=!0)},i.prototype._doUpdateContent=function(t,e,i){this._textChanged&&(this._textChanged=!1,i[re.Utils.TextProp]=this._text)};var o,n=i;function i(t,e,i){t=o.call(this,t,i=void 0===i?"gridHeadCellView":i)||this;return t._text="",t._styleName="",t._textChanged=!1,t._model=e,t}e.GridHeadCellElement=n;r=n,ne.__extends(a,r),_dp(a,"checked",{get:function(){return this._checked},set:function(t){this._checked=t}}),a.prototype._clearCellCache=function(){this._check=this._image=this._span=this._label=null},a.prototype._doUpdateContent=function(t,e,i){var o,n,t=t.doc,r=this.model,s=r.showAll&&!r.exclusive;if(s&&!this._check&&((n=this._check=t.createElement("input")).id="$$-grid-head-check-"+this.model.$_hash,o=n.style,n.type="checkbox",n.className="rg-checkbox",n.tabIndex=-1,o.display=r.useImages?"none":"inline-block",i.appendChild(n),(o=(n=this._image=t.createElement("span")).style).display=r.useImages?"inline-block":"none",i.appendChild(n),(n=this._label=t.createElement("label")).setAttribute("for",this._check.id),n[re.Utils.TextProp]="grid head check",(o=n.style).display="none",i.appendChild(n)),s?(this._check.style.display=r.useImages?"none":"inline-block",this._image.style.display=r.useImages?"inline-block":"none",this._image.className=this._checked?"rg-checkbar-head-checked":"rg-checkbar-head-unchecked",this._check.checked=this._checked):(re.Utils.detach(this._check),re.Utils.detach(this._image),re.Utils.detach(this._label),this._check=this._image=this._label=null),this._textChanged&&(this._span||(this._span=t.createElement("span"),this._span.style.display="block",i.appendChild(this._span)),this._span[re.Utils.TextProp]=this._text),s&&this._span&&this._text){var a=r.useImages?this._image:this._check,l=this._span,h=a.parentElement,d=null!=r.itemGap?r.itemGap+"px":"5px";switch((o=l.style).margin="",r.checkLocation){case ht.ColumnHeaderItemLocation.BOTTOM:h.insertBefore(l,a),o.display="block",o.marginBottom=d;break;case ht.ColumnHeaderItemLocation.LEFT:h.insertBefore(a,l),o.display="inline-block",o.marginLeft=d;break;case ht.ColumnHeaderItemLocation.RIGHT:h.insertBefore(l,a),o.display="inline-block",o.marginRight=d;break;default:ht.ColumnHeaderItemLocation.TOP;h.insertBefore(a,l),o.display="block",o.marginTop=d}}},a.prototype.$_updateContent=function(){var t=this.model;t.showAll&&!t.exclusive&&(this._check.checked=this._checked,this._image.className=this._checked?"rg-checkbar-head-checked":"rg-checkbar-head-unchecked")};var r,s=a;function a(t,e){t=r.call(this,t,e,"chekHeadCellView")||this;return t._checked=!1,t}e.CheckHeadCellElement=s;l=ye.SimpleTableElement,ne.__extends(d,l),d.prototype._doDispose=function(){this._cells=null,l.prototype._doDispose.call(this)},_dp(d,"allChecked",{get:function(){return this._checkCell.checked},set:function(t){var e=this._checkCell;e.checked=t,e.$_updateContent()}}),d.prototype.getHeadModel=function(t){for(var e=0;e<this._cells.length;e++)if(t===this._getTableCell(0,e))return this._cells[e].model},d.prototype.getCellType=function(t){t=this.getHeadModel(t);return t instanceof ie.SectionObject?t.getCellType():void 0},d.prototype._getCssSelector=function(){return"rg-head"},d.prototype._doPrepareTableExtents=function(t){var e,i=t.grid.rowBarContainer,t=t.sectionObjects;this._cells=[];for(var o=0,n=t;o<n.length;o++){var r=n[o];r instanceof oe.RowIndicator&&(((e=this._indicatorCell).visible=e.model.visible)?(this._cells.push(e),e.width=i.rowIndicator.width):e.removeCellDom()),r instanceof ae.StateBar&&(((e=this._stateCell).visible=e.model.visible)?(this._cells.push(e),e.width=i.stateBar.width):e.removeCellDom()),r instanceof le.CheckBar&&(((e=this._checkCell).visible=e.model.visible)?(this._cells.push(e),e.width=i.checkBar.width):e.removeCellDom(!0))}},d.prototype._prepareCellContent=function(t,e){return this.grid.doc.createElement("div")},d.prototype._doLayoutContent=function(t){for(var e=t.grid,i=this._cells.length,o=this._getTableRowCount(t),t=this._thead,n=t&&t.children[0],r=0;r<i;r++){var s,a=this._cells[r],l=a.model,h=l.getHeadCell(),d=this._getTableCell(0,r),u=d.firstElementChild,c=this.$_getCellSelector()+" "+l.getHeadStyleName();if(this._chromium){d.rowSpan=o,u.style.maxHeight=this.height-2+"px";for(var _=1;_<o;_++)this._getTableCell(_,r).style.display="none"}n&&(s=n.children[r])&&(s[re.Utils.TextProp]=l.getCellType()+" head"),a.setStyleName(d,u,c),a.updateCell(e,h,u)}},d.prototype._doRender=function(t){},d.prototype._getTableRowCount=function(t){return this._chromium?Math.max(1,t.headerRows):1},d.prototype._getTableRowHeight=function(t,e){var t=t.grid;return!this._chromium||!t.fixedHeaderView.visible&&!t.headerView.visible||(t=(t.headerView.visible?t.headerView:t.fixedHeaderView)._rowPoints).length<2?this.height:t[e+1]-t[e]},d.prototype._getCellCount=function(t){return this._cells.length},d.prototype._getCellWidth=function(t,e){return this._cells[e].width},d.prototype._doPrepareTableRow=function(t,e,i,o){l.prototype._doPrepareTableRow.call(this,t,e,i,o);e=t.grid.header.styleName;re.Utils.setClassName(o,e)},d.prototype.$_getCellSelector=function(){return d.CELL_CSS},d.CELL_CSS="rg-head-cell";var l,h=d;function d(t){var e=l.call(this,t.doc,null,"gridHeadView")||this,i=(e._cells=[],t.doc);return e.addChild(e._indicatorCell=new n(i,t.rowIndicator)),e.addChild(e._stateCell=new n(i,t.stateBar)),e.addChild(e._checkCell=new s(i,t.checkBar)),e}e.GridHeadElement=h})),Fe=(t(Me),Me.GridHeadCellElement,Me.CheckHeadCellElement,Me.GridHeadElement,e(function(t,e){Object.defineProperty(e,"__esModule",{value:!0});i=ve.CellElement,ne.__extends(n,i),_dp(n,"model",{get:function(){return this._model},set:function(t){t!==this._model&&(this._model=t,this._changed())}}),_dp(n,"text",{get:function(){return this._text},set:function(t){t!=this._text&&(this._text=t||"",this._textChanged=!0,this._changed())}}),n.prototype.setStyleName=function(t,e){e!=this._styleName&&(this._styleName=e,this._setClassName(t))},n.prototype._getCssSelector=function(){return this._styleName},n.prototype._doUpdateContent=function(t,e,i){this._textChanged&&(this._textChanged=!1,i[re.Utils.TextProp]=this._text)},n.prototype._doRender=function(t){};var i,o=n;function n(t){t=i.call(this,t,"gridFootCellView")||this;return t._text="",t._styleName="",t._textChanged=!1,t}e.GridFootCellElement=o;r=ye.SimpleTableElement,ne.__extends(a,r),a.prototype._doDispose=function(){this._cells=null,r.prototype._doDispose.call(this)},a.prototype.getFootModel=function(t){for(var e=0;e<this._cells.length;e++)if(t===this._getTableCell(0,e))return this._cells[e].model},a.prototype.getCellType=function(t){t=this.getFootModel(t);return t instanceof ie.SectionObject?t.getCellType():void 0},a.prototype._getCssSelector=function(){return"rg-foot"},a.prototype._doPrepareTableExtents=function(t){for(var e,i=t.grid.rowBarContainer,t=t.sectionObjects,o=this._count=0,n=t;o<n.length;o++){var r=n[o];r.visible&&(((e=this._cells[this._count++]).model=r)instanceof oe.RowIndicator?e.width=i.rowIndicator.width:r instanceof ae.StateBar?e.width=i.stateBar.width:r instanceof le.CheckBar&&(e.width=i.checkBar.width))}},a.prototype._prepareCellContent=function(t,e){return this.grid.doc.createElement("div")},a.prototype._doLayoutContent=function(t){for(var e=t.grid,i=this._count,t=this._thead,o=t&&t.children[0];this.childCount<i;)this.addChild(this._cells[this.childCount]);for(;this.childCount>i;)this.removeLast();for(var n=0;n<i;n++){var r,s=this.getChild(n),a=s.model,l=a.getFootCell(),h=this._getTableCell(0,n),d=h.firstElementChild,u=this.$_getCellSelector()+" "+a.getFootStyleName();o&&(r=o.children[n])&&(r[re.Utils.TextProp]=a.getCellType()+" foot"),s.setStyleName(h,u),s.text=a.footText,s.updateCell(e,l,d)}},a.prototype._doRender=function(t){},a.prototype._getTableRowCount=function(t){return 1},a.prototype._getTableRowHeight=function(t,e){return this.height},a.prototype._getCellCount=function(t){return this._count},a.prototype._getCellWidth=function(t,e){return this._cells[e].width},a.prototype.$_getCellSelector=function(){return a.CELL_CSS},a.CELL_CSS="rg-foot-cell";var r,s=a;function a(t){var e=r.call(this,t,null,"gridFootView")||this;e._cells=[];for(var i=e._count=0;i<3;i++)e.addChild(e._cells[i]=new o(t));return e}e.GridFootElement=s})),Le=(t(Fe),Fe.GridFootCellElement,Fe.GridFootElement,e(function(t,e){Object.defineProperty(e,"__esModule",{value:!0});i=_e.GridBaseOptions,ne.__extends(n,i),n.prototype._doDispose=function(){i.prototype._doDispose.call(this)},_dp(n,"textFormat",{get:function(){return this._textFormat},set:function(t){t!=this._textFormat&&(this._textFormat=t,this._textFormatter=t?Xt.TextFormatter.getFormatter(t):null,this._changed())}}),_dp(n,"datetimeFormat",{get:function(){return this._datetimeFormat},set:function(t){t!=this._datetimeFormat&&(this._datetimeFormat=t,this._datetimeWriter=t?z.DateTimeWriter.getFormatter(t):null,this._changed())}}),_dp(n,"numberFormat",{get:function(){return this._numberFormat},set:function(t){t!=this._numberFormat&&(this._numberFormat=t,this._numberFormatter=t?Y.DecimalFormatter.getFormatter(t):null,this._changed())}}),_dp(n,"booleanFormat",{get:function(){return this._booleanFormat},set:function(t){t!=this._booleanFormat&&(this._booleanFormat=t,this._boolFormatter=t?K.BooleanFormatter.getFormatter(t):null,this._changed())}}),_dp(n,"textFormatter",{get:function(){return this._textFormatter}}),_dp(n,"numberFormatter",{get:function(){return this._numberFormatter}}),_dp(n,"datetimeWriter",{get:function(){return this._datetimeWriter}}),_dp(n,"boolFormatter",{get:function(){return this._boolFormatter}});var i,o=n;function n(t){t=i.call(this,t)||this;return t._numberFormat=Y.DecimalFormatter.DEFAULT_FORMAT,t._datetimeFormat=z.DateTimeWriter.DEFAULT_FORMAT,t._datetimeWriter=z.DateTimeWriter.Default,t._numberFormatter=Y.DecimalFormatter.Default,t}e.FormatOptions=o})),Oe=(t(Le),Le.FormatOptions,e(function(t,e){Object.defineProperty(e,"__esModule",{value:!0});i=se.Base,ne.__extends(n,i),n.prototype._doDispose=function(){i.prototype._doDispose.call(this)},_dp(n,"message",{get:function(){return this._message},set:function(t){this._message=t}}),_dp(n,"visible",{get:function(){return this._visible},set:function(t){t!=this._visible&&(this._visible=t)}}),_dp(n,"zIndex",{get:function(){return this._zIndex},set:function(t){t!=this._zIndex&&(this._zIndex=t)}}),_dp(n,"styleName",{get:function(){return this._styleName},set:function(t){this._styleName=t}}),n.prototype.assignFrom=function(t){"string"==typeof t?(this._message=t,this._message&&(this._visible=!0)):"boolean"==typeof t?this._visible=t:i.prototype.assignFrom.call(this,t)};var i,o=n;function n(t){var e=i.call(this)||this;return e._message="",e._visible=!0,e._zIndex=void 0,e._styleName="rg-toast",t&&e.assignFrom(t),e}e.ToastOptions=o;r=se.Base,ne.__extends(a,r),a.prototype._doDispose=function(){r.prototype._doDispose.call(this)},_dp(a,"minWidth",{get:function(){return this._minWidth},set:function(t){this._minWidth=t}}),_dp(a,"maxWidth",{get:function(){return this._maxWidth},set:function(t){this._maxWidth=t}}),_dp(a,"dropDownCount",{get:function(){return this._dropdownCount},set:function(t){this._dropdownCount=t}}),a.prototype.show=function(t){this._showing=!0;try{this.$_show(t)}finally{this._showing=!1}},a.prototype.hide=function(){var t=this._element;t&&t.parentNode&&this._container._container.removeChild(t)},a.prototype.$_createElement=function(t){var e=t.createElement("div"),t=(e.onkeydown=function(t){27==t.keyCode&&this.hide()}.bind(this),this.$_disableSelection(e),this._span=t.createElement("span"));return this.$_disableSelection(t),e.appendChild(t),e},a.prototype.$_show=function(t){var e,i,o,n=t.message;n&&(e=this._element)&&(o=this._span,i=this._container._gridView.displayOptions,o.innerHTML=n,e.className=t.styleName,e.style.position="absolute",e.style.overflow="hidden",e.style.zIndex=null!=t.zIndex?t.zIndex:i.toastZIndex,this._container._container.appendChild(e),o=re.Utils.getBoundingClientRect2(e),n=re.Utils.getBoundingClientRect2(this._container._container),t=o.width+10,i=o.height+10,o=n.width,n=n.height,e.style.left=(o-t)/2+"px",e.style.top=(n-i)/2+"px")},a.prototype.$_disableSelection=function(t){void 0!==t.onselectstart?t.onselectstart=function(){return!1}:void 0!==t.style.MozUserSelect?t.style.MozUserSelect="none":t.onmousedown=function(){return!1}};var r,s=a;function a(t){var e=r.call(this)||this;return e._minWidth=0,e._maxWidth=0,e._dropdownCount=8,e._showing=!1,e._container=t,e._element=e.$_createElement(t.doc),e}e.ToastView=s;l=se.Base,ne.__extends(d,l),d.prototype._doDispose=function(){l.prototype._doDispose.call(this)},_dp(d,"visible",{get:function(){return this._active}}),d.prototype.show=function(t,e,i){(!this._active||e)&&(this.close(),t=t instanceof o?t:t?new o(t):null)&&t.visible?(this._toast||(this._toast=new s(this._container)),this._toast.show(t),this._active=!0,i&&setTimeout(function(){try{i()}finally{this.close()}}.bind(this),0)):i&&i()},d.prototype.close=function(){this._active&&(this._toast&&this._toast.hide(),this._active=!1)};var l,h=d;function d(t){var e=l.call(this)||this;return e._active=!1,e._container=t.container,e}e.ToastManager=h})),Pe=(t(Oe),Oe.ToastOptions,Oe.ToastView,Oe.ToastManager,e(function(t,e){Object.defineProperty(e,"__esModule",{value:!0});i=_e.GridBaseOptions,ne.__extends(n,i),n.prototype._doDispose=function(){this._toast=this._toast.dispose(),i.prototype._doDispose.call(this)},_dp(n,"enabled",{get:function(){return this._enabled},set:function(t){t!=this._enabled&&(this._enabled=t,this._changed())}}),_dp(n,"style",{get:function(){return this._style},set:function(t){t!=this._style&&(this._style=t,this._changed())}}),_dp(n,"handleVisibility",{get:function(){return this._handleVisibility},set:function(t){t!=this._handleVisibility&&(this._handleVisibility=t,this._refreshOwner())}}),_dp(n,"commitBeforeSorting",{get:function(){return this._commitBeforeSorting},set:function(t){t!=this._commitBeforeSorting&&(this._commitBeforeSorting=t,this._changed())}}),_dp(n,"keepFocusedRow",{get:function(){return this._keepFocusedRow},set:function(t){t!=this._keepFocusedRow&&(this._keepFocusedRow=t,this._changed())}}),_dp(n,"textCase",{get:function(){return this._textCase},set:function(t){t!=this._textCase&&(this._textCase=t,this._changed())}}),_dp(n,"showSortOrder",{get:function(){return this._showSortOrder},set:function(t){t!=this._showSortOrder&&(this._showSortOrder=t,this._changed())}}),_dp(n,"pageSorting",{get:function(){return this._pageSorting},set:function(t){t!=this._pageSorting&&(this._pageSorting=t,this._changed())}}),_dp(n,"toast",{get:function(){return this._toast}});var i,o=n;function n(t){t=i.call(this,t)||this;return t._enabled=!0,t._style=ht.SortStyle.EXCLUSIVE,t._handleVisibility=ht.HandleVisibility.VISIBLE,t._commitBeforeSorting=!0,t._toast=new Oe.ToastOptions({visible:!1,message:"Sorting..."}),t._keepFocusedRow=!1,t._textCase=ht.SortCase.SENSITIVE,t._showSortOrder=!1,t._pageSorting=!1,t}e.SortingOptions=o})),Ve=(t(Pe),Pe.SortingOptions,e(function(t,e){Object.defineProperty(e,"__esModule",{value:!0});i=pt.LayerElement,ne.__extends(n,i),n.prototype._doDispose=function(){i.prototype._doDispose.call(this)},_dp(n,"grid",{get:function(){for(var t=this.parent;t;){if(t instanceof pi.GridBase)return t;t=t.parent}return null}}),n.prototype.measure=function(t,e,i){return this._doMeasure(t,e,i)},n.prototype.layoutContent=function(t,e,i){this._doLayoutContent(t,e,i)},n.prototype._doMeasure=function(t,e,i){return new ge.Size(e,i)},n.prototype._doLayoutContent=function(t,e,i){};var i,o=n;function n(t,e){return i.call(this,t,e=void 0===e?null:e)||this}e.ContentPane=o;r=o,ne.__extends(a,r),a.prototype._initDom=function(t){r.prototype._initDom.call(this,t)};var r,s=a;function a(){return null!==r&&r.apply(this,arguments)||this}e.LeftContentPane=s;l=o,ne.__extends(h,l);var l,s=h;function h(){return null!==l&&l.apply(this,arguments)||this}e.DataContentPane=s;d=pt.LayerElement,ne.__extends(c,d),c.prototype._getCssSelector=function(){return pe.FixedOptions.COLUMN_BAR_STYLE};var d,u=c;function c(t){var e=d.call(this,t.doc,"fixedColumnBar")||this;return e._grid=t,e}_=s,ne.__extends(p,_),p.prototype._doDispose=function(){_.prototype._doDispose.call(this)},p.prototype.layoutBars=function(t,e,i){this._layoutBars(t,e,i)},p.prototype._doLayoutContent=function(t,e,i){this._barView||(this._barView=this._createBar(t.grid),this.addChild(this._barView),this._barView2=this._createBar(t.grid),this.addChild(this._barView2)),_.prototype._doLayoutContent.call(this,t,e,i)},p.prototype._createBar=function(t){return new u(t)},p.prototype._layoutBars=function(t,e,i){var o=t.fixedBarWidth,n=t.footBounds.height;this._barView.visible=0<o,this._barView2.visible=!1,this._barView.visible&&(t=Math.min(i-n,t.dataBounds.bottom),this._barView.setBounds(e-o,0,o,t),0<n)&&(this._barView2.visible=!0,this._barView2.setBounds(e-o,i-n,o,n))};var _,s=p;function p(t,e){return _.call(this,t,e=void 0===e?null:e)||this}e.FixedContentPane=s;f=pt.LayerElement,ne.__extends(m,f),m.prototype._getCssSelector=function(){return"rg-right-column-bar"};var f,g=m;function m(){return null!==f&&f.apply(this,arguments)||this}y=s,ne.__extends(v,y),v.prototype._createBar=function(){return new g(this.doc,"rightColumnBar")},v.prototype._layoutBars=function(t,e,i){var o=t.rightBarWidth,n=t.footBounds.height;this._barView.visible=0<o,this._barView2.visible=!1,this._barView.visible&&(t=Math.min(i-n,t.dataBounds.bottom),this._barView.setBounds(0,0,o,t),0<n)&&(this._barView2.visible=!0,this._barView2.setBounds(0,i-n,o,n))};var y,s=v;function v(){return null!==y&&y.apply(this,arguments)||this}e.RightContentPane=s;C=o,ne.__extends(w,C),_dp(w,"message",{get:function(){return this._message},set:function(t){t!=this._message&&(this._message=t,this._dom.innerHTML=t,this.invalidate())}}),w.prototype._getCssSelector=function(){return"rg-message-pane"},w.prototype._doLayoutContent=function(t,e,i){C.prototype._doLayoutContent.call(this,t,e,i)};var C,s=w;function w(t,e){t=C.call(this,t,e=void 0===e?null:e)||this;return t.visible=!1,t}e.MessagePane=s})),Be=(t(Ve),Ve.ContentPane,Ve.LeftContentPane,Ve.DataContentPane,Ve.FixedContentPane,Ve.RightContentPane,Ve.MessagePane,e(function(t,e){Object.defineProperty(e,"__esModule",{value:!0});function o(t){if(!t)return null;t=(t=String(t))&&t.replace(/[^0-9]/g,"");var e,i,o=parseInt(t.substr(0,4)),t=parseInt(t.substr(4,2));return isNaN(o)||o<=0||isNaN(t)||t<0?null:(i=4-(e=new Date(o,0,1)).getDay()+1,e.setDate(i),e.getFullYear()==o&&t--,i=7*t,e.setDate(e.getDate()+i),e)}function k(t,o,e){function i(t){var t=new Date(t),e=(e=t.getDay())<o?-3-e:4-e,i=t.getDate();return t.setDate(i+e),t}var n=t.getFullYear(),r=i(new Date(n,0,1)),t=i(new Date(n,t.getMonth(),t.getDate())),s=r.getFullYear(),a=t.getFullYear(),n=a<n?(r=i(new Date(s,0,1)),Math.ceil((t.valueOf()-r.valueOf())/6048e5)+(r.getFullYear()===a?1:0)):n<a?1:Math.ceil((t.valueOf()-r.valueOf())/6048e5)+(s===a?1:0);return String(a)+(null!=e?e:"")+(n<10?"0"+n:String(n))}var i,r=/[ㄱ-ㅎㅏ-ㅣ가-힝]/g,n=(i=se.Base,ne.__extends(s,i),s.prototype._doDispose=function(){this._owner=null,this._tooltips=null,this._items=null,i.prototype._doDispose.call(this)},_dp(s,"tooltips",{get:function(){return this._tooltips},set:function(t){this._tooltips=t}}),_dp(s,"items",{get:function(){return this._items},set:function(t){this._items=t.slice()}}),_dp(s,"enabled",{get:function(){return this._enabled},set:function(t){this._enabled=t}}),_dp(s,"count",{get:function(){return this._items&&this._items.length}}),_dp(s,"styleName",{get:function(){return this._styleName||""},set:function(t){this._styleName=t}}),s.prototype.load=function(t){this.clear()},s.prototype.clear=function(){this._items=[],this._tooltips=[]},s.prototype.contains=function(t){return!1},s.prototype.getTooltip=function(t){return null},s);function s(t){var e=i.call(this)||this;return e._tooltips=[],e._items=[],e._enabled=!0,e._owner=t,e}e.Holiday=n;a=n,ne.__extends(h,a),h.prototype._doDispose=function(){a.prototype._doDispose.call(this)},h.prototype.load=function(t){if(a.prototype.load.call(this,t),t){var e=re.Utils.makeArray(t.dates,!0);t.tooltips=re.Utils.makeArray(t.tooltips,!0);for(var i=0,o=e.length;i<o;i++){var n=e[i],r=void 0;if(n instanceof Date||"number"==typeof n)(r=new Date(n)).setHours(0,0,0,0);else if("string"==typeof n){var s=(n=4!==n.length&&8!==n.length||!/^[0-9]*$/.test(n)?n:4===n.length?n.replace(/(\d{2})(\d{2})/,"$1/$2"):n.replace(/(\d{4})(\d{2})(\d{2})/,"$1/$2/$3")).split(/[.//-]/);if(2==s.length)try{r=parseInt(s[0]).toString()+"/"+parseInt(s[1]).toString()}catch(t){}else 3==s.length&&(r=dt.DateTimeConverter.getSimpleDateNull(n))}r&&(this._items.push(r),t.tooltips[i])&&this._tooltips.push(t.tooltips[i])}null!=t.enabled&&(this.enabled=!!t.enabled),this.styleName=t.styleName}},h.prototype.getItemIndex=function(t){for(var e=0,i=this._items.length;e<i;e++){var o=this._items[e];if(o instanceof Date&&o.getFullYear()===t.getFullYear()&&o.getMonth()===t.getMonth()&&o.getDate()===t.getDate())return e;if(o===t.getMonth()+1+"/"+t.getDate())return e}return-1},h.prototype.contains=function(t){return 0<=this.getItemIndex(t)},h.prototype.getTooltip=function(t){t=this.getItemIndex(t);return 0<=t?this._tooltips[t]:null};var a,l=h;function h(t,e){t=a.call(this,t)||this;return e&&t.load(e),t}d=n,ne.__extends(c,d),c.prototype._doDispose=function(){d.prototype._doDispose.call(this)},c.prototype.load=function(t){d.prototype.load.call(this,t),t&&(this._items=re.Utils.makeArray(t.days,!0),this._tooltips=re.Utils.makeArray(t.tooltips,!0),this.enabled=!!t.enabled,this.styleName=t.styleName)},c.prototype.contains=function(t){return t instanceof Date&&0<=this._items.indexOf(t.getDay())},c.prototype.getTooltip=function(t){t=t instanceof Date?this._items.indexOf(t.getDay()):this._items.indexOf(t);return 0<=t?this._tooltips[t]:null};var d,u=c;function c(t,e){t=d.call(this,t)||this;return e&&t.load(e),t}_=se.Base,ne.__extends(f,_),f.prototype._doDispose=function(){this._editor=null,this._items=null,_.prototype._doDispose.call(this)},_dp(f,"items",{get:function(){return this._items},set:function(t){this._items=t}}),_dp(f,"editor",{get:function(){return this._editor},set:function(t){this._editor=t}}),_dp(f,"isNull",{get:function(){return-1==this._count}}),_dp(f,"count",{get:function(){return this._count}}),f.prototype.setNull=function(){this.clear()},f.prototype.getDateConvert=function(){return this._editor&&this._editor._dateConverter},f.prototype.clear=function(){for(var t=0,e=this._items.length;t<e;t++)this._items[t].clear();this._items=[],this._count=-1},f.prototype.load=function(t){if(this.clear(),t){for(var e=0,i=(t=re.Utils.isArray(t)?t:[t]).length;e<i;e++){var o=t[e],n=void 0;switch(o.type){case"day":n=new u(this,o);break;case"date":n=new l(this,o)}0<n.count&&this._items.push(n)}this._count=this._items.length}else this._count=-1},f.prototype.contains=function(t){for(var e=0,i=this._items.length;e<i;e++)if(this._items[e].contains(t))return this._items[e];return null};var _,p=f;function f(){var t=_.call(this)||this;return t._items=[],t._count=-1,t}e.HolidayCollection=p;g=P.EventAware,ne.__extends(y,g),y.prototype._doDispose=function(){this._listElement=null,re.Utils.detach(this._element),g.prototype._doDispose.call(this)},_dp(y,"month",{get:function(){return this._month},set:function(t){this._month=t}}),_dp(y,"listElement",{get:function(){return this._listElement}}),_dp(y,"listing",{get:function(){return this._container&&this._container.contains(this._element)}}),y.prototype.show=function(t,e,i,o){var n;(this._container=t)&&(t.appendChild(this._element),t=re.getDoc(t),n=re.Utils.getClientRect(this._element),t=re.Utils.getScrolled(t),o&&this._listElement&&(o=this._listElement.getBoundingClientRect().width,e=parseInt(this._listElement.style.left.replace("px",""))+o/2,i=parseInt(this._listElement.style.top.replace("px",""))),e=Math.max(t.sx,e-n.width-2),i=Math.max(t.sy,i-n.height/2+13),re.Utils.move(this._element,e,i))},y.prototype.hide=function(){re.Utils.detach(this._element),this._container=null},y.prototype.$_createPicker=function(t){var e=t.createElement("div"),i=e.style;i.position="absolute",i.cssFloat="none",i.clear="both",i.boxSizing="border-box",e.className="rg-cal-month-picker",e.onkeydown=function(t){27==t.keyCode&&this.hide()}.bind(this);for(var o=1;o<=12;o++){var n=t.createElement("div"),r=n.style,r=(r.position="relative",r.cssFloat="none",n.className="rg-cal-month-picker-item",re.Utils.disableSelection(n),e.appendChild(n),n.onclick=this._clickHandler,n.onmouseup=this._clickHandler,t.createElement("span"));r.innerHTML=re.Utils.htmlEncode((this._months?this._months[o-1]:o)+" "),r.tabIndex=-1,re.Utils.disableSelection(r),n.appendChild(r)}return e},y.CLOSE_UP="onMonthPickerCloseUp";var g,m=y;function y(t,e){var i=g.call(this)||this,o=(i._month=-1,i._clickHandler=function(t){re.Utils.stopEvent(t,!0);t=t.currentTarget,t=re.Utils.getChildIndex(t);0<=t&&(this._month=t,this.fireEvent(y.CLOSE_UP,this._month)),this.hide()}.bind(i),re.getDoc(e));return i._listElement=e,i._months=t.months,i._element=i.$_createPicker(o),i._element.style.zIndex=String(t._baseZindex+2),i}v=P.EventAware,ne.__extends(w,v),w.prototype._doDispose=function(){this._monthPicker=this._monthPicker&&this._monthPicker.dispose(),this._element&&(this._element.removeEventListener("mouseup",this._mouseupHandler),re.Utils.detach(this._element)),v.prototype._doDispose.call(this)},_dp(w,"minWidth",{get:function(){return this._minWidth},set:function(t){t!=this._minWidth&&(this._minWidth=t,this._changed())}}),_dp(w,"maxWidth",{get:function(){return this._maxWidth},set:function(t){t!=this._maxWidth&&(this._maxWidth=t,this._changed())}}),_dp(w,"minDate",{get:function(){return this._minDate},set:function(t){t!=this._minDate&&(this._minDate=t,this._changed())}}),_dp(w,"maxDate",{get:function(){return this._maxDate},set:function(t){t!=this._maxDate&&(this._maxDate=t,this._changed())}}),_dp(w,"yearNavigation",{get:function(){return this._yearNavigation},set:function(t){t!=this._yearNavigation&&(this._yearNavigation=t,this._changed())}}),_dp(w,"dropDownPosition",{get:function(){return this._dropDownPosition},set:function(t){t!=this._dropDownPosition&&(this._dropDownPosition=t,this._changed())}}),_dp(w,"showToday",{get:function(){return this._showToday},set:function(t){t!=this._showToday&&(this._showToday=t,this._changed())}}),_dp(w,"yearDisplayFormat",{get:function(){return this._yearDisplayFormat},set:function(t){t!=this._yearDisplayFormat&&(this._yearDisplayFormat=t,this._changed())}}),_dp(w,"monthDisplayFormat",{get:function(){return this._monthDisplayFormat},set:function(t){t!=this._monthDisplayFormat&&(this._monthDisplayFormat=t,this._changed())}}),_dp(w,"months",{get:function(){return this._months},set:function(t){t!=this._months&&(this._months=t,this._changed())}}),_dp(w,"viewGridInside",{get:function(){return this._viewGridInside},set:function(t){t!=this._viewGridInside&&(this._viewGridInside=t,this._changed())}}),_dp(w,"showWeeks",{get:function(){return this._showWeeks},set:function(t){t!=this._showWeeks&&(this._showWeeks=t,this._changed())}}),_dp(w,"startWeek",{get:function(){return this._startWeek},set:function(t){t!=this._startWeek&&(this._startWeek=t,this._changed())}}),_dp(w,"weekSelectable",{get:function(){return this._weekSelectable},set:function(t){t!=this._weekSelectable&&(this._weekSelectable=t,this._changed())}}),_dp(w,"weekSeparator",{get:function(){return this._weekSeparator},set:function(t){t!=this._weekSeparator&&(this._weekSeparator=t,this._changed())}}),_dp(w,"holidays",{get:function(){return this._holidays},set:function(t){t!=this._holidays&&(this._holidays=t,this._changed())}}),_dp(w,"date",{get:function(){return this._date},set:function(t){t?this._date&&this._date.getTime()===t.getTime()||(this._currDate=new Date(t),this._date=new Date(t),this.listing&&this.$_buildCalendar()):null===t&&(this._date=null)}}),_dp(w,"listing",{get:function(){return this._containerElement&&this._containerElement.contains(this._element)}}),_dp(w,"monthListing",{get:function(){return this._monthPicker.listing}}),_dp(w,"selected",{get:function(){return this._selected}}),_dp(w,"canceled",{get:function(){return this._canceled}}),_dp(w,"focused",{get:function(){return this._focused},set:function(t){t!=this._focused&&(this._focused=t,this._element.style.border=t?"1px solid rgba(50, 50, 50, 1)":"1px solid rgba(50, 50, 50, 0.3)",this._element.style.boxShadow=t?"rgba(0, 0, 0, 0.8) 1px 2px 5px":"rgba(0, 0, 0, 0.5) 1px 2px 5px",this._headerElement.style.backgroundColor=t?"rgba(0, 200, 200, 0.1)":"#e8e8e8",this._calendar.tHead.style.opacity=t?"1.0":"0.5")}}),_dp(w,"today",{get:function(){return this.date=new Date}}),_dp(w,"showButtons",{get:function(){return this._showButtons},set:function(t){t!=this._showButtons&&(this._footer&&(this._footer.style.display=t?"":"none"),this._showButtons=t),this._showButtons=t}}),_dp(w,"saveLabel",{get:function(){return this._saveLabel},set:function(t){t!=this._saveLabel&&(this._saveElement&&(this._saveElement.textContent=t),this._saveLabel=t)}}),_dp(w,"cancelLabel",{get:function(){return this._cancelLabel},set:function(t){t!=this._cancelLabel&&(this._cancelElement&&(this._cancelElement.textContent=t),this._cancelLabel=t)}}),_dp(w,"deleteLabel",{get:function(){return this._deleteLabel},set:function(t){t!=this._deleteLabel&&(this._deleteElement&&(this._deleteElement.textContent=t),this._deleteLabel=t)}}),w.prototype.setWeekDays=function(t){t!=this._weekDays&&(re.Utils.isArray(t)&&7<=t.length?this._weekDays=t:this._weekDays=re.Utils.week_days)},w.prototype.closeMonth=function(){this._monthPicker.hide()},w.prototype.show=function(t,e,i,o,n){this._containerElement=!re.Utils.isMobile()&&this._viewGridInside?this._container._container:t,this.$_show(e,i,o,n)},w.prototype.hide=function(){this.focused=!1,this._monthPicker.hide(),re.Utils.detach(this._element),this._containerElement=null},w.prototype.incDay=function(t){var e;return this._date.getMonth()==this._currDate.getMonth()?(e=new Date(this._date),this._date&&e.setDate(this._date.getDate()+t)):(e=this._currDate,e=new Date(e.getFullYear(),e.getMonth(),1)),this.date=e},w.prototype.incMonth=function(t){var e;return this._date.getMonth()==this._currDate.getMonth()?(e=new Date(this._date),this._date&&re.Utils.incMonth(e,t)):(e=this._currDate,e=new Date(e.getFullYear(),e.getMonth(),1)),this.date=e},w.prototype.startDay=function(){var t=new Date(this._currDate),e=t.getDay()-this._startWeek;return t.setDate(t.getDate()-(7+e)%7),this.date=t},w.prototype.endDay=function(){var t=new Date(this._currDate),e=t.getDay()-this._startWeek;return t.setDate(t.getDate()+(6-e)),this.date=t},w.prototype._changed=function(){},w.prototype.$_getCellDate=function(t,e){t=new Date(t);return t.setDate(e),t},w.prototype.$_createPicker=function(t){var e=this._container.doc,i=e.createElement("div"),o=(this._id=i.id="rg-calendar-"+b.$$_LIST_ID++,i.style);return o.position="absolute",o.cssFloat="none",o.clear="both",o.boxSizing="border-box",o.margin="0px",o.overflow="auto",o.zIndex=String(t._baseZindex+2),i.className="rg-calendar",this._header=this.$_createHeader(e),i.appendChild(this._header),this._calendar=this.$_createCalendar(e),i.appendChild(this._calendar),this._footer=this.$_createFooter(e),i.appendChild(this._footer),i},w.prototype.$_createHeader=function(t){var i=this,e=this._headerElement=t.createElement("div"),o=e.style,n=(o.position="relative",e.className="rg-cal-header",t.createElement("div")),r=((o=n.style).position="relative",o.textAlign="center",o.height="100%",e.appendChild(e.$_title=n),n.className="rg-cal-yearmonth",t.createElement("span")),r=((o=r.style).position="relative",o.verticalAlign="top",o.height="16px",r.className="rg-cal-year",n.appendChild(n.$_year=r),r.innerHTML="2020년",r.onclick=function(t){},this.$_createYearSpin(t)),r=(n.appendChild(n.$_yearSpin=r),t.createElement("span")),n=((o=r.style).position="relative",o.verticalAlign="top",r.className="rg-cal-month",n.appendChild(n.$_month=r),r.innerHTML="1월",r.onmousedown=function(t){re.Utils.stopEvent(t,!0);t=re.Utils.getOffset(this._headerElement.$_title.$_month);this._monthPicker.show(this._containerElement,t.x,t.y,!re.Utils.isMobile()&&this._viewGridInside)}.bind(this),t.createElement("span")),r=((o=n.style).position="absolute",o.left="4px",o.minWidth="17px",o.minHeight="17px",n.className="rg-cal-prev-month",e.appendChild(e.$_prev=n),n.onclick=function(t){re.Utils.incMonth(this._currDate,-1),this.$_buildCalendar()}.bind(this),t.createElement("span")),n=((o=r.style).position="absolute",o.right="4px",o.minWidth="17px",o.minHeight="17px",r.className="rg-cal-next-month",e.appendChild(e.$_next=r),r.onclick=function(t){re.Utils.incMonth(this._currDate,1),this.$_buildCalendar()}.bind(this),this._todayElement=t.createElement("span"));return(o=n.style).position="absolute",o.right="35px",o.top="2px",n.className="rg-cal-today-button",e.appendChild(n),n.innerHTML="Today",n.onclick=function(t){var e=new Date;i.focused=!0,i.date=e,i._selected=!0,i._editor.$_selectDate(i._currDate)},e},w.prototype.$_createYearSpin=function(t){var e=t.createElement("div"),i=e.style,o=(i.display="inline-block",i.visibility="hidden",i.position="relative",i.width="15px",i.height="100%",i.marginRight="2px",t.createElement("span")),o=((i=o.style).position="absolute",i.top="10%",i.left="0px",i.width="15px",i.height="40%",i.display="block",o.className="rg-cal-next-year",e.appendChild(o),o.onclick=function(t){this._currDate.setFullYear(this._currDate.getFullYear()+1),this.$_buildCalendar()}.bind(this),t.createElement("span"));return(i=o.style).position="absolute",i.top="50%",i.left="0px",i.width="15px",i.height="40%",i.display="block",o.className="rg-cal-prev-year",e.appendChild(o),o.onclick=function(t){this._currDate.setFullYear(this._currDate.getFullYear()-1),this.$_buildCalendar()}.bind(this),e},w.prototype.$_createFooter=function(t){var e,i=t.createElement("div"),o=i.style;return o.display="none",i.className="rg-cal-buttons",e=this._deleteElement=t.createElement("span"),this._deleteLabel&&(e.textContent=this._deleteLabel),e.className="rg-cal-delete-button",(o=e.style).float="left",e.onclick=function(t){this._selected=!0,this.date=null,this._editor.$_selectDate(null)}.bind(this),i.appendChild(e),e=this._saveElement=t.createElement("span"),this._saveLabel&&(e.textContent=this._saveLabel),e.className="rg-cal-save-button",(o=e.style).float="right",e.onclick=function(t){this.fireEvent(w.CLOSE_UP,!0)}.bind(this),i.appendChild(e),e=this._cancelElement=t.createElement("span"),this._cancelLabel&&(e.textContent=this._cancelLabel),e.className="rg-cal-cancel-button",(o=e.style).float="right",e.onclick=function(t){this._selected=!1,this._canceled=!0,this.fireEvent(w.CLOSE_UP,!1)}.bind(this),i.appendChild(e),i},w.prototype.$_createCalendar=function(t){var e=["sun","mon","tue","wed","thu","fri","sat"],i=t.createElement("table"),o=((h=i.style).margin="2px",i.className="rg-cal-days-table",i.createTHead()),n=(o.className="rg-cal-weeks",t.createElement("tr")),r=(o.appendChild(n),[]),s=t.createElement("th"),a=((h=s.style).minWidth="20px",h.textAlign="center",s.className="rg-cal-week-year-week",n.appendChild(s),t.createElement("span"));s.appendChild(a),o.$_weeks=s;for(var l=0;l<7;l++){var h,d=t.createElement("th"),u=((h=d.style).minWidth="20px",h.textAlign="center",d.className="rg-cal-week-"+e[l],n.appendChild(d),t.createElement("span"));u.innerHTML=re.Utils.htmlEncode(this._weekDays[l]),d.appendChild(u),r.push(u)}o.$_cells=r;for(var c=t.createElement("tbody"),_=(c.className="rg-cal-days",i.appendChild(i.$_body=c),c.$_rows=[]),p=c.$_yearweeks=[],f=0;f<6;f++){var g=t.createElement("tr"),m=(c.appendChild(g),_.push(g),g.$_cells=r=[],t.createElement("td")),y=((h=m.style).padding="1px",g.appendChild(m),t.createElement("span"));m.appendChild(m.$_span=y),p.push(m);for(l=0;l<7;l++){var v=t.createElement("td"),C=((h=v.style).padding="1px",v.className="rg-cal-day rg-cal-week-"+e[(l+this._startWeek)%7],g.appendChild(v),v.onclick=this._clickHandler,v.ondblclick=this._dblClickHandler,t.createElement("span"));v.appendChild(v.$_span=C),v.id=this._id+"-"+f.toString()+"-"+l.toString(),r.push(v)}}return i},w.prototype.$_show=function(t,e,i,o){var n=re.getDoc(this._element),r=re.getDocWin(n),s=(this.focused=!1,this._selected=!1,this._canceled=!1,this._header.$_title.$_yearSpin.style.visibility=this._yearNavigation?"visible":"hidden",this._footer.style.display=this.showButtons?"":"none",this._todayElement.style.display=this._showToday?"initial":"none",this._header.$_title.style.marginRight=this._showToday?"70px":"40px",this._date),s=(this._currDate=s?new Date(s):new Date,this._today=new Date,this.$_buildCalendar(),re.Utils.disableSelection(this._element),this._containerElement.appendChild(this._element),re.Utils.getBrowserSize()),a=re.Utils.getClientRect(this._containerElement),l=re.Utils.getClientRect(this._container._container),h=s.width,s=s.height,d=re.Utils.getClientRect(this._element),u=r.pageXOffset||n.documentElement.scrollLeft,r=r.pageYOffset||n.documentElement.scrollTop;n.documentElement.scrollWidth>n.documentElement.clientWidth&&(s-=18),n.documentElement.scrollHeight>n.documentElement.clientHeight&&(h-=18),t+=l.left-a.left,e+=l.top-a.top,(re.Utils.ieTen||re.Utils.ieOld||re.Utils.ieLeg)&&(t+=n.documentElement.scrollLeft,e+=n.documentElement.scrollTop),e+d.height>s+r&&(e=e-o.height-d.height)<0&&(e=s-d.height-2),this._dropDownPosition!=de.DropDownPosition.EDITOR?t=Math.max(0,t+i-d.width):t+d.width>h+u&&(t=h-d.width),!re.Utils.isMobile()&&this._viewGridInside&&(e=o.bottom-a.top+2,a.bottom<o.bottom+d.height||s+r<o.bottom+d.height)&&(e=o.top-d.height-a.top-2),re.Utils.isMobile()||this._element.offsetParent||(t+=n.documentElement.offsetLeft,e+=n.documentElement.offsetTop),re.Utils.move(this._element,Math.max(0,t),Math.max(0,e))},w.prototype.$_checkFocusedWeek=function(t,e,i){var o=["rg-cal-week-year-week"];this.$_isFocusedWeek(t,e.$_yearWeek)&&o.push("rg-cal-week-year-focusweek"),this.weekSelectable&&o.push("rg-week-selectable"),e.className=o.join(" ")},w.prototype.$_isFocusedWeek=function(t,e){return t&&e&&k(t,this._startWeek)==e},w.prototype.$_isFocusedDay=function(t,e){var i=this._date;return i&&t.getFullYear()==i.getFullYear()&&t.getMonth()==i.getMonth()&&e==i.getDate()},w.prototype.$_isToday=function(t,e){var i=this._today;return i&&t.getFullYear()==i.getFullYear()&&t.getMonth()==i.getMonth()&&e==i.getDate()},w.prototype.$_buildCalendar=function(){for(var t,e,i=["sun","mon","tue","wed","thu","fri","sat"],o=this._header,n=this._currDate,r=o.$_prev,s=o.$_next,o=o.$_title,a=n.getFullYear(),l=n.getMonth(),h=(o.$_year.innerHTML=(this._yearDisplayFormat?this._yearDisplayFormat.replace("{Y}",a+""):a+"년")+"&nbsp;",this._months&&0<this._months.length?o.$_month.innerHTML=this._months[l]:o.$_month.innerHTML=this._monthDisplayFormat?this._monthDisplayFormat.replace("{M}",(l+1).toString()):l+1+"월",o.$_year.innerText+o.$_month.innerText),d=(r.title=0==l?a-1+"/12":a+"/"+re.Utils.pad(l),s.title=11==l?a+1+"/01":a+"/"+re.Utils.pad(l+2),this._calendar.tHead.$_cells),u=0;u<7;u++){var c=d[(u+7-this._startWeek)%7];c.innerHTML=re.Utils.htmlEncode(this._weekDays[u]),c.parentElement.className="rg-cal-week-"+i[u]}this._calendar.tHead.$_weeks.style.display=this.showWeeks?"":"none";for(var o=this._calendar.$_body,_=o.$_yearweeks,u=0,p=_.length;u<p;u++)_[u].style.display=this.showWeeks?"":"none",_[u].onclick=this.weekSelectable?this._yearWeekClickHandler:null,_[u].ondblclick=this.weekSelectable?this._dblClickHandler:null;var f,g,m=o.$_rows,y=re.Utils.month_days[re.Utils.isLeapYear(a)?1:0][l],v=new Date(n),C=(v.setDate(1),(v.getDay()+7-this._startWeek)%7),w=(30==y&&6==C||31==y&&5<=C?re.Utils.addChild(o,m[5]):re.Utils.removeChild(o,m[5]),28==y&&0==C?re.Utils.removeChild(o,m[4]):re.Utils.addChild(o,m[4]),0),x=_[0];if(d=m[0].$_cells,0<C)for(var r=a,s=l-1,b=(s<0&&(r--,s=11),re.Utils.month_days[re.Utils.isLeapYear(r)?1:0][s]),u=0;u<C;u++){(D=d[u]).removeAttribute("title");var I=new Date(this._currDate),E=(D.$_day=u-C,I.setDate(D.$_day+1),this._editor.containsRange(I));0===u&&(x.$_yearWeek=k(I,this._startWeek),x.$_span.innerText=x.$_yearWeek.substr(4,2),this.$_checkFocusedWeek(this._currDate,x,E)),D.$_span.innerHTML=b-C+u+1,D.className="rg-cal-day rg-cal-prev-day "+(E?"":"rg-cal-disable-day ")+"rg-cal-week-"+i[(u+this._startWeek)%7]}for(u=C;u<7;u++){E=((D=d[u]).removeAttribute("title"),D.$_day=w++,D.$_span.innerHTML=w,(v=new Date(this._currDate)).setDate(w),this._editor.containsRange(v));0===u&&(x.$_yearWeek=k(v,this._startWeek),x.$_span.innerText=x.$_yearWeek.substr(4,2),this.$_checkFocusedWeek(this._currDate,x,E)),f=this.$_isFocusedDay(n,w),g=this.$_isToday(n,w),f&&this._editor._editor.setAttribute("aria-activedescendant",D.id),D.setAttribute("aria-label",h+" "+w.toString()),g?D.setAttribute("aria-current","date"):D.removeAttribute("aria-current"),E?D.removeAttribute("aria-disabled"):D.setAttribute("aria-disabled","true"),t="rg-cal-day "+(f?"rg-cal-focusday ":""),t=(t=(t+=g?"rg-cal-today ":"")+((e=this._holidays&&this._holidays.contains(v))?e.styleName+" rg-cal-holiday ":"")+(E?"":"rg-cal-disable-day "))+("rg-cal-week-"+i[(u+this._startWeek)%7]),D.className=t,e&&(t=e.getTooltip(this.$_getCellDate(n,w)))&&(D.title=t)}for(var S=1;S<6&&w<y;S++)for(var d=m[S].$_cells,R=_[S],u=0;u<7;u++)if(w<y){E=((D=d[u]).removeAttribute("title"),D.$_day=w++,(v=new Date(this._currDate)).setDate(w),this._editor.containsRange(v));0===u&&(R.$_yearWeek=k(v,this._startWeek),R.$_span.innerText=R.$_yearWeek.substr(4,2),this.$_checkFocusedWeek(this._currDate,R,E)),D.$_span.innerHTML=w,f=this.$_isFocusedDay(n,w),g=this.$_isToday(n,w),f&&this._editor._editor.setAttribute("aria-activedescendant",D.id),D.setAttribute("aria-label",h+" "+w.toString()),g?D.setAttribute("aria-current","date"):D.removeAttribute("aria-current"),E?D.removeAttribute("aria-disabled"):D.setAttribute("aria-disabled","true"),t="rg-cal-day "+(f?"rg-cal-focusday ":""),t=(t=(t+=this.$_isToday(n,w)?"rg-cal-today ":"")+((e=this._holidays&&this._holidays.contains(v))?e.styleName+" rg-cal-holiday ":"")+(E?"":"rg-cal-disable-day "))+("rg-cal-week-"+i[(u+this._startWeek)%7]),D.className=t,e&&(t=e.getTooltip(this.$_getCellDate(n,w)))&&(D.title=t)}else for(var T=1;u<7;u++){(D=d[u]).removeAttribute("title"),D.$_day=w++,(v=new Date(this._currDate)).setDate(w);var D,E=this._editor.containsRange(v);D.$_span.innerHTML=T++,D.className="rg-cal-day rg-cal-next-day "+(E?"":"rg-cal-disable-day ")+"rg-cal-week-"+i[(u+this._startWeek)%7]}},w.prototype.onMonthPickerCloseUp=function(t,e){e-=this._currDate.getMonth();e&&(re.Utils.incMonth(this._currDate,e),this.$_buildCalendar()),re.Utils.isMobile()||this._editor.setFocus()},w.CLOSE_UP="onDatePickerCloseUp";var v,C=w;function w(t,e){var i=v.call(this)||this;return i._minWidth=0,i._maxWidth=0,i._yearNavigation=!1,i._dropDownPosition=de.DropDownPosition.BUTTON,i._showToday=!0,i._viewGridInside=!1,i._showWeeks=!1,i._startWeek=0,i._weekSelectable=!1,i._weekSeparator="",i._date=new Date,i._selected=!1,i._focused=!0,i._canceled=!1,i._clickHandler=function(t){var e,t=this.$_getCellDate(this._currDate,t.currentTarget.$_day+1);!this._editor.containsRange(t)||(e=this._holidays&&this._holidays.contains(t))&&!e.enabled||(this.date=new Date(t),this._selected=!0,this.focused=!0,this._editor.$_selectDate(this._date),this.showButtons)||this.fireEvent(w.CLOSE_UP,!0)}.bind(i),i._dblClickHandler=function(t){this.fireEvent(w.CLOSE_UP,!0)}.bind(i),i._yearWeekClickHandler=function(t){var e,t=t.currentTarget.$_yearWeek;(e=t?o(t):e)&&this._editor.containsRange(e)&&(this._date=new Date(e),this._selected=!0,this._editor.$_selectDate(this._date),this.showButtons||this.fireEvent(w.CLOSE_UP,!0))}.bind(i),i._mouseupHandler=function(t){this._isMobile||this._editor.setFocus()}.bind(i),i._editor=e,i._container=t,i._yearDisplayFormat=e.yearDisplayFormat,i._monthDisplayFormat=e.monthDisplayFormat,i._months=e.months,i._weekDays=re.Utils.week_days,i._element=i.$_createPicker(e),i._element.addEventListener("mouseup",i._mouseupHandler),i._monthPicker=new m(e,i._element),i._monthPicker.addListener(i),i}x=L.PopupCellEditor,ne.__extends(I,x),I.prototype._doDispose=function(){this._globalMouseHandler=null,this._holidayCollection=this._holidayCollection.dispose(),this._list=this._list&&this._list.dispose(),x.prototype._doDispose.call(this)},_dp(I,"editFormat",{get:function(){return this._editFormat},set:function(t){t!=this._editFormat&&(this._editFormat=t,this.datetimeFormat=t,this._changed())}}),_dp(I,"minDate",{get:function(){return this._minDate},set:function(t){t!=this._minDate&&(this._minDate=t?t instanceof Date?t:"string"==typeof t?this._dateConverter.getDateNull(t):null:null,this._minDate&&this._minDate.setHours(0,0,0,0),this._changed())}}),_dp(I,"maxDate",{get:function(){return this._maxDate},set:function(t){t!=this._maxDate&&(this._maxDate=t?t instanceof Date?t:"string"==typeof t?this._dateConverter.getDateNull(t):null:null,this._maxDate&&this._maxDate.setHours(23,59,59),this._changed())}}),_dp(I,"yearNavigation",{get:function(){return this._yearNavigation},set:function(t){this._yearNavigation=t}}),_dp(I,"dropDownPosition",{get:function(){return this._dropDownPosition},set:function(t){this._dropDownPosition=t}}),_dp(I,"dropDownWhenClick",{get:function(){return this._dropDownWhenClick},set:function(t){t!=this._dropDownWhenClick&&(this._dropDownWhenClick=t,this._changed())}}),_dp(I,"showToday",{get:function(){return this._showToday},set:function(t){this._showToday=t}}),_dp(I,"yearDisplayFormat",{get:function(){return this._yearDisplayFormat},set:function(t){this._yearDisplayFormat=t}}),_dp(I,"monthDisplayFormat",{get:function(){return this._monthDisplayFormat},set:function(t){this._monthDisplayFormat=t}}),_dp(I,"months",{get:function(){return this._months},set:function(t){this._months=t}}),_dp(I,"weekDays",{get:function(){return this._weekDays},set:function(t){this._weekDays=t}}),_dp(I,"showWeeks",{get:function(){return this._showWeeks},set:function(t){this._showWeeks=t}}),_dp(I,"startWeek",{get:function(){return this._startWeek},set:function(t){t=null==t||isNaN(t=Math.floor(t))?0:t,this._startWeek=t}}),_dp(I,"weekSelectable",{get:function(){return this._weekSelectable},set:function(t){this._weekSelectable=t}}),_dp(I,"weekSeparator",{get:function(){return this._weekSeparator},set:function(t){this._weekSeparator=t}}),_dp(I,"commitOnSelect",{get:function(){return this._commitOnSelect},set:function(t){t!=this._commitOnSelect&&(this._commitOnSelect=t,this._changed())}}),_dp(I,"defaultShowDate",{get:function(){return this._defaultShowDate},set:function(t){t!=this._defaultShowDate&&(this._defaultShowDate=t,this._changed())}}),_dp(I,"defaultDate",{get:function(){return this._defaultDate},set:function(t){t!=this._defaultDate&&(this._defaultDate=t instanceof Date?new Date(t):t,this._changed())}}),_dp(I,"holidays",{get:function(){return this._holidays},set:function(t){(this._holidays=t)?(this._holidayCollection=this._holidayCollection||new p,(this._holidayCollection.editor=this)._holidayCollection.load(t)):this._holidayCollection.setNull(),this._changed()}}),_dp(I,"listing",{get:function(){return this._list.listing}}),_dp(I,"monthListing",{get:function(){return this._list.monthListing}}),_dp(I,"showButtons",{get:function(){return this._showButtons},set:function(t){this._showButtons=t}}),_dp(I,"saveLabel",{get:function(){return this._saveLabel},set:function(t){this._saveLabel=t}}),_dp(I,"cancelLabel",{get:function(){return this._cancelLabel},set:function(t){this._cancelLabel=t}}),_dp(I,"deleteLabel",{get:function(){return this._deleteLabel},set:function(t){this._deleteLabel=t}}),I.prototype.dropDown=function(t){var e,i,o,n,r;if(!(this.readOnly||this._controller._readOnly||this.listing||this._closing))return n=re.getDoc(this._container),e=re.getDocWin(n),i=this._grid.editorOptions,o=this._list,n=n.documentElement,r=re.Utils.getClientRect(this._container),o.viewGridInside=i.viewGridInside,o.yearNavigation=this._yearNavigation,o.dropDownPosition=this._dropDownPosition,o.showToday=this._showToday,o.yearDisplayFormat=this._yearDisplayFormat,o.monthDisplayFormat=this._monthDisplayFormat,o.months=this._months,o.minDate=this._minDate,o.maxDate=this._maxDate,o.showWeeks=this._showWeeks,o.startWeek=this._startWeek||0,o.weekSelectable=this.weekSelectable,o.weekSeparator=this.weekSeparator,o.showButtons=this.showButtons,o.saveLabel=this.saveLabel,o.cancelLabel=this.cancelLabel,o.deleteLabel=this.deleteLabel,o.holidays=(this._holidayCollection.isNull?i:this)._holidayCollection,this._weekDays&&0<this._weekDays.length&&o.setWeekDays(this._weekDays),this.$_setListDate(),this._isMobile&&!this._isTablet?(this._showMarquee(n),o.show(n,0,0,0,null),this._centerPopup(n,o._element)):o.show(n,r.cx+1,r.cy+r.height,this._cellBounds.width,re.Utils.getClientRect(this._editor)),o.focused=t,this._editor.setAttribute("aria-expanded","true"),e.addEventListener("mousedown",this._globalMouseHandler),!0},I.prototype.closeUp=function(t){if(this.listing){var e=re.getDoc(this._container),e=re.getDocWin(e);this._closing=!0;try{e.removeEventListener("mousedown",this._globalMouseHandler),this._closeMarquee(),this._list.hide(),t&&this._list.selected?this._isMobile&&!this._isTablet?(this._started=!0,this.$_selectDate(this._list.date),this._dispatchCommit()):(this.$_selectDate(this._list.date),this._commitOnSelect&&this._dispatchCommit()):this._list.canceled&&this._controller.cancelEditor(!1)}finally{this._closing=!1,this._editor.setAttribute("aria-expanded","false")}return!0}},I.prototype.containsRange=function(t){return(!this._minDate||t>=this._minDate)&&(!this._maxDate||t<=this._maxDate)},I.prototype.initOptions=function(){x.prototype.initOptions.call(this),this._dropDownWhenClick=!1,this._yearNavigation=!1,this._textReadOnly=!1,this._showToday=!0,this._minDate=new Date(1970,0,1),this._maxDate=new Date(2100,11,31),this._showWeeks=!1,this._startWeek=0,this._weekSelectable=!1,this._weekSeparator="",this._commitOnSelect=!1,this._defaultShowDate=ht.DefaultShowDate.NORMAL,this._holidayCollection&&this._holidayCollection.setNull(),this._showButtons=!0,this._cancelLabel="Cancel",this._saveLabel="Save",this._deleteLabel="Delete"},I.prototype.setEditIndex=function(t){x.prototype.setEditIndex.call(this,t);t=this._editField().dataType;this._weekSelectable=this._weekSelectable&&t!==ht.ValueType.DATE&&t!==ht.ValueType.DATETIME},I.prototype.setEditValue=function(t){x.prototype.setEditValue.call(this,t),this.weekSelectable?this._date=o(t):this._date="string"==typeof t?this._dateConverter.getDateNull(t):t},I.prototype.getEditValue=function(t,e){void 0===e&&(e=!1);var t=x.prototype.getEditValue.call(this,t=void 0===t?!0:t),i=this._editField().dataType;return t&&e&&(i==ht.ValueType.DATE||i==ht.ValueType.DATETIME)&&(t=this._minDate?Math.max(this._minDate.getTime(),t):t,t=(t=this._maxDate?Math.min(this._maxDate.getTime(),t):t)&&new Date(t)),t},I.prototype._createEditor=function(t){return x.prototype._createEditor.call(this,t)},I.prototype._textHandler=function(){this._requestStart(!1)},I.prototype._compositionstartHandler=function(t){this.isDisabled()||this._requestStart(!1)},I.prototype._keyDownHandler=function(t){if(!this.isDisabled()){var e=this._list;if(e.monthListing)return 27==t.keyCode&&(this.closeMonthList(),re.Utils.stopEvent(t,!0),!0);var i=this.listing,o=i&&e.focused;switch(t.keyCode){case 13:if(this.closeUp(!0))return re.Utils.stopEvent(t,!0),!this._sendToParent(t);break;case 27:if(this.closeUp(!1))return re.Utils.stopEvent(t,!0),!0;break;case 36:if(o)return t.preventDefault(),this.$_selectDate(e.startDay()),re.Utils.stopEvent(t,!0),!0;break;case 35:if(o)return re.Utils.stopEvent(t,!0),this.$_selectDate(e.endDay()),!0;break;case 37:if(o)return re.Utils.stopEvent(t,!0),this.$_selectDate(e.incDay(-1)),!0;break;case 39:if(o)return re.Utils.stopEvent(t,!0),this.$_selectDate(e.incDay(1)),!0;break;case 33:if(o)return re.Utils.stopEvent(t,!0),this.$_selectDate(e.incMonth(t.shiftKey?-12:-1)),!0;break;case 34:if(o)return re.Utils.stopEvent(t,!0),this.$_selectDate(e.incMonth(t.shiftKey?12:1)),!0;break;case 40:if(t.altKey&&!i)return this._requestStart(),re.Utils.stopEvent(t,!0),this._list.focused=!0,this.$_setListDate(),!0;if(i)return re.Utils.stopEvent(t,!0),o?this.$_selectDate(e.incDay(7)):this._list.focused=!0,!0;break;case 38:if(t.altKey&&i)return this.closeUp(!1),re.Utils.stopEvent(t,!0),!0;if(i)return re.Utils.stopEvent(t,!0),o?this.$_selectDate(e.incDay(-7)):this._list.focused=!1,!0;break;case 84:(t.altKey||t.altKey&&t.ctrlKey)&&i&&(re.Utils.stopEvent(t,!0),this._list.date=new Date,this.$_selectDate(this._list.date))}return x.prototype._keyDownHandler.call(this,t)}},I.prototype._keyPressHandler=function(t){if(!this.isDisabled()){var e=this._list,i=t.keyCode||t.which,o=String.fromCharCode(i);if(o.toLocaleLowerCase()==this.todayChar){if(re.Utils.stopEvent(t,!0),this.listing)return e.focused=!0,this.$_selectDate(e.today),!0}else{if(re.Utils.isFirefox&&(t.ctrlKey||0===i))return void x.prototype._keyPressHandler.call(this,t);if(re.Utils.isMac&&t.metaKey&&re.Utils.included(i,99,118))return void x.prototype._keyPressHandler.call(this,t);if(!this._regx.test(o))return void t.preventDefault()}x.prototype._keyPressHandler.call(this,t),t.keyCode&&this.textReadOnly&&t.preventDefault()}},I.prototype.$_resetValue=function(t){var e,i,o,n;void 0===t&&(t=!1),(this.visible||t)&&(e=(t=this._editor).selectionStart,i=t.selectionEnd,o=t.value?t.value.length:0,t.value=t.value.replace(r,""),n=t.value?t.value.length:0,this._isMobile||(n==o?t.setSelectionRange(e,i):t.setSelectionRange(i,i)))},I.prototype._dispatchChange=function(){(this._isMobile||this.visible)&&(this.$_resetValue(this._isMobile),x.prototype._dispatchChange.call(this))},I.prototype._changeHandler=function(t){x.prototype._changeHandler.call(this,t)},I.prototype._pasteHandler=function(t){x.prototype._pasteHandler.call(this,t)},I.prototype._copyHandler=function(t){x.prototype._copyHandler.call(this,t)},I.prototype._requestStart=function(t){return!!x.prototype._requestStart.call(this)&&(this._isMobile?t&&this.dropDown(!1):!1!==t&&this.dropDown(!1),!0)},I.prototype.setBounds=function(t,e,i,o,n){x.prototype.setBounds.call(this,t,e,i,o,n)},I.prototype._doChanged=function(){this._isMobile?!this._controller.readOnly&&this._controller.editable&&(this._modified=!0,this._dispatchChange()):(this._started||this._requestStart(),this._started&&!this._controller.readOnly&&this._controller.editable&&(this._modified=!0,this._dispatchChange()))},I.prototype.dropDownList=function(t){this.dropDown(!0)},I.prototype.closeList=function(t){this.closeUp(t)},I.prototype.closeMonthList=function(){this._list.closeMonth()},I.prototype.buttonClicked=function(t){this.listing?this.closeUp(!1):this.dropDown(!0)},I.prototype._getInputSelector=function(){return I.INPUT_CSS},I.prototype._isDateEditor=function(){var t=this._editField().dataType;return t==ht.ValueType.DATE||t==ht.ValueType.DATETIME||!this.weekSelectable},I.prototype.$_selectDate=function(t){var e;t?(this._date=t,this.containsRange(t)&&(e=void 0,e=this.weekSelectable?k(t,this._startWeek,this.weekSeparator):this._dateConverter.getText(this._date),this._mask&&(e=this._mask.writeBuffer(e)),this._editor.value=e,this._doChanged())):(this._date=null,this._mask&&this._mask.clearBuffer(),this._editor.value="",this._doChanged())},I.prototype.$_setListDate=function(){var t,e=this._defaultDate instanceof Date?new Date(this._defaultDate):this._dateConverter.getDateNull(this._defaultDate),i=this._editor.value;switch(this._mask&&(i=this._mask.getStripValue()),t=this.weekSelectable?o(i):this._dateConverter.getDateNull(i),this._defaultShowDate){case ht.DefaultShowDate.TODAY:t=new Date;break;case ht.DefaultShowDate.NORMAL:break;case ht.DefaultShowDate.TODAY_WHEN_NULL:t=t||new Date;break;case ht.DefaultShowDate.DEFAULT_WHEN_NULL:t=t||e;break;case ht.DefaultShowDate.DEFAULT:t=e}t&&(this._list.date=t)},I.prototype.onDatePickerCloseUp=function(t,e){this.closeUp(e),this._isMobile||this.setFocus()},I.INPUT_CSS="rg-date-editor",I.$$_LIST_ID=0;var x,b=I;function I(t,e){var e=x.call(this,t,e)||this,i=(e._minDate=new Date(1970,0,1),e._maxDate=new Date(2100,11,31),e._yearNavigation=!1,e._dropDownPosition=de.DropDownPosition.BUTTON,e._dropDownWhenClick=!1,e._showToday=!0,e._yearDisplayFormat="{Y}년",e._monthDisplayFormat="{M}월",e._months=null,e._weekDays=null,e._showWeeks=!1,e._startWeek=0,e._weekSelectable=!1,e._weekSeparator="",e._commitOnSelect=!1,e._holidays=null,e._showButtons=!0,e._saveLabel="Save",e._cancelLabel="Cancel",e._deleteLabel="Delete",e._holidayCollection=new p,e._closing=!1,e._regx=/[0-9]|\.|\-|\/|a|A|p|P|m/,e._globalMouseHandler=function(t){var e=t.target;if(this._isMarquee(e))this.closeUp(!1);else{for(;e;){if(e===this._list._element)return void this._list._monthPicker.hide();if(e===this._list._monthPicker._element)return;e=e.parentElement}this.closeUp(!0)}}.bind(e),t.editorOptions),i=(e._yearDisplayFormat=i.yearDisplayFormat,e._monthDisplayFormat=i.monthDisplayFormat,e._months=i.months,e._weekDays=i.weekDays,e._baseZindex=t.displayOptions.baseZindex,e._list=new C(t.container,e),e._list.addListener(e),e._editor);return i.setAttribute("aria-owns",e._list._element.id),i.setAttribute("aria-expanded","false"),i.setAttribute("aria-haspopup","true"),e}e.DateCellEditor=b;E=P.EventAware,ne.__extends(R,E),R.prototype._doDispose=function(){this._jquery=null,this._editor=null,this._container=null,this._containerElement=null,E.prototype._doDispose.call(this)},_dp(R,"dropDownPosition",{get:function(){return this._dropDownPosition},set:function(t){this._dropDownPosition=t}}),_dp(R,"date",{get:function(){return this._date},set:function(t){(this._date=t).getTime()!==this._date.getTime()&&(this._currDate=new Date(t),this._date=new Date(t),this.listing)&&(t=new Date(t.getFullYear(),t.getMonth(),t.getDate()),this._jquery)&&this._jquery(this._element).datepicker("update",t)}}),_dp(R,"minDate",{get:function(){return this._minDate},set:function(t){this._minDate=t}}),_dp(R,"maxDate",{get:function(){return this._maxDate},set:function(t){this._maxDate=t}}),_dp(R,"viewGridInside",{get:function(){return this._viewGridInside},set:function(t){this._viewGridInside=t}}),_dp(R,"listing",{get:function(){return this._jquery&&this._jquery(this._element).data("datepicker")}}),_dp(R,"selected",{get:function(){return this._selected}}),_dp(R,"focused",{get:function(){return this._focused},set:function(t){t!=this._focused&&(this._focused=t,this._element.style.border=t?"1px solid rgba(50, 50, 50, 1)":"1px solid rgba(50, 50, 50, 0.3)",this._element.style.boxShadow=t?"rgba(0, 0, 0, 0.8) 1px 2px 5px":"rgba(0, 0, 0, 0.5) 1px 2px 5px")}}),R.prototype.$_destroy=function(){this._jquery&&this._jquery(this._element).datepicker("destroy")},R.prototype.keydown=function(t){this._jquery&&(this._jquery(this._element).datepicker("keydown",t),(t=this._jquery(this._element).data("datepicker").viewDate)instanceof Date)&&(this.date=t,this._editor)&&this._editor.selectDate(this._date)},R.prototype.$_createList=function(t){var t=t.createElement("div"),e=t.style;return e.position="absolute",e.cssFloat="none",e.clear="both",e.boxSizing="border-box",e.zIndex=String(this._editor._baseZindex+2),e.margin="0px",e.overflow="auto",t.className="rg-calendar",t},R.prototype.show=function(t,e,i,o,n){if(this._containerElement=re.Utils.isMobile()&&this._viewGridInside?this._container._container:t,!this.$_createCalendar())return alert("BootStrap DatePicker Not Include"),!1;this.$_show(e,i,o,n)},R.prototype.$_createCalendar=function(){var t,e=this._element,i=this._btOptions;return this._date&&(t=new Date(this._date.getFullYear(),this._date.getMonth(),this._date.getDate())),!!this._jquery&&(this._jquery(e).datepicker&&this._jquery(e).datepicker(i).datepicker("setDate",t).on("changeDate",function(t){t=t.date;t&&!this._editor.containsRange(t)||(this._date=t?new Date(t):void 0,this._selected=!0,this.fireEvent(C.CLOSE_UP,!0))}.bind(this)),!0)},R.prototype.$_show=function(t,e,i,o){var n=this._container.doc,r=re.getDocWin(n),s=(this.focused=!1,this._selected=!1,this._containerElement.appendChild(this._element),this._date),s=(this._currDate=s?new Date(s):new Date,re.Utils.getBrowserSize()),a=re.Utils.getClientRect(this._containerElement),l=re.Utils.getClientRect(this._container._container),h=s.width,s=s.height,d=re.Utils.getClientRect(this._element),u=r.pageXOffset||n.documentElement.scrollLeft,r=r.pageYOffset||n.documentElement.scrollTop;n.documentElement.scrollWidth>n.documentElement.clientWidth&&(s-=18),n.documentElement.scrollHeight>n.documentElement.clientHeight&&(h-=18),t+=l.left-a.left,e+=l.top-a.top,(re.Utils.ieTen||re.Utils.ieOld||re.Utils.ieLeg)&&(t+=n.documentElement.scrollLeft,e+=n.documentElement.scrollTop),e+d.height>s+r&&o&&(e=e-o.height-d.height)<0&&(e=s-d.height-2),this._dropDownPosition!=de.DropDownPosition.EDITOR?t=Math.max(0,t+i-d.width):t+d.width>h+u&&(t=h-d.width),!re.Utils.isMobile()&&this._viewGridInside&&o&&(e=o.bottom-a.top+2,a.bottom<o.bottom+d.height||s+r<o.bottom+d.height)&&(e=o.top-d.height-a.top-2),re.Utils.isMobile()||this._element.offsetParent||(t+=n.documentElement.offsetLeft,e+=n.documentElement.offsetTop),re.Utils.move(this._element,Math.max(0,t),Math.max(0,e))},R.prototype.today=function(){return this.date=new Date},R.prototype.incDay=function(t){var e;return this._date.getMonth()==this._currDate.getMonth()?(e=new Date(this._date),this._date&&e.setDate(this._date.getDate()+t)):(e=this._currDate,e=new Date(e.getFullYear(),e.getMonth(),1)),this.date=e},R.prototype.incMonth=function(t){var e;return this._date.getMonth()==this._currDate.getMonth()?(e=new Date(this._date),this._date&&re.Utils.incMonth(e,t)):(e=this._currDate,e=new Date(e.getFullYear(),e.getMonth(),1)),this.date=e},R.prototype.firstDay=function(){var t=new Date(this._currDate);return this._date&&t.setDate(1),this.date=t},R.prototype.lastDay=function(){var t,e,i=new Date(this._currDate);return this._date&&(e=i.getFullYear(),t=i.getMonth(),e=re.Utils.month_days[re.Utils.isLeapYear(e)?1:0][t],i.setDate(e)),this.date=i};var E,S=R;function R(t,e,i){var o=E.call(this)||this,n=(o._dropDownPosition=de.DropDownPosition.BUTTON,o._viewGridInside=!1,o._selected=!1,o._focused=!1,re.getDocWin(t.doc));return o._jquery=n&&n.jQuery,o._editor=e,o._container=t,o._btOptions=i,o._element=o.$_createList(t.doc),o}T=L.PopupCellEditor,ne.__extends(D,T),D.prototype._doDispose=function(){this._globalMouseHandler=null,T.prototype._doDispose.call(this)},_dp(D,"list",{get:function(){return this._list},set:function(t){this._list=t}}),_dp(D,"btOptions",{get:function(){return this._btOptions},set:function(t){this._btOptions=t}}),_dp(D,"editFormat",{get:function(){return this.datetimeFormat},set:function(t){this.datetimeFormat=t}}),_dp(D,"minDate",{get:function(){return this._minDate},set:function(t){this._minDate=t?t instanceof Date?t:"string"==typeof t?this._dateConverter.getDateNull(t):null:null,this._minDate&&this._minDate.setHours(0,0,0,0)}}),_dp(D,"maxDate",{get:function(){return this._maxDate},set:function(t){this._maxDate=t?t instanceof Date?t:"string"==typeof t?this._dateConverter.getDateNull(t):null:null,this._maxDate&&this._maxDate.setHours(23,59,59)}}),_dp(D,"dropDownPosition",{get:function(){return this._dropDownPosition},set:function(t){this._dropDownPosition=t}}),_dp(D,"dropDownWhenClick",{get:function(){return this._dropDownWhenClick},set:function(t){this._dropDownWhenClick=t}}),_dp(D,"commitOnSelect",{get:function(){return this._commitOnSelect},set:function(t){this._commitOnSelect=t}}),D.prototype.dropDown=function(){var t,e,i,o,n;return!(this.readOnly||this._controller._readOnly||this.listing||this._closing||(t=re.getDoc(this._container),e=re.getDocWin(t),i=this._grid,i=this._list=new S(i.container,this,this._btOptions),o=t.documentElement,n=re.Utils.getBounds(this._container),i.addListener(this),i.viewGridInside=this._options&&this._options.viewGridInside,i.dropDownPosition=this._dropDownPosition,i.minDate=this._minDate,i.maxDate=this._maxDate,this.$_setListDate(),this._isMobile&&!this._isTablet?(this._showMarquee(o),i.show(o,0,0,0,null),this._centerPopup(o,i._element)):i.show(t.documentElement,n.x+1,n.y+n.height,this._cellBounds.width,re.Utils.getClientRect(this._editor)),e.addEventListener("mousedown",this._globalMouseHandler),0))},D.prototype.closeUp=function(t){if(this.listing){var e=re.getDoc(this._container),e=re.getDocWin(e);this._closing=!0;try{e.removeEventListener("mousedown",this._globalMouseHandler),this._closeMarquee(),t&&this._list.selected&&(this._isMobile&&!this._isTablet?(this._started=!0,this.$_selectDate(this._list.date),this._dispatchCommit()):(this.$_selectDate(this._list.date),this._commitOnSelect&&this._dispatchCommit()))}finally{this.$_listDestroy(),this._closing=!1}return!0}return!1},D.prototype.buttonClicked=function(t){this.listing?this.closeUp(!1):this.dropDown()},D.prototype.dropDownList=function(){this.dropDown()},D.prototype.closeList=function(t){this.closeUp(t)},D.prototype.$_setListDate=function(){var t=this._editor.value,t=(t&&this._mask&&(t=this._mask.getStripValue()),this._dateConverter.getDateNull(t));t&&(this._list.date=t)},D.prototype.selectDate=function(t){this.$_selectDate(t)},D.prototype.$_selectDate=function(t){var e;t&&t!=this._date?(this._date=t,this.containsRange(t)&&(e=this._dateConverter.getText(this._date),this._mask&&(e=this._mask.writeBuffer(e)),this._editor.value=e,this._doChanged())):void 0===t&&(this._editor.value=this._mask?(this._mask.clearBuffer(),this._mask.writeBuffer(null)):"",this._doChanged())},D.prototype.containsRange=function(t){return(!this._minDate||t>=this._minDate)&&(!this._maxDate||t<=this._maxDate)},_dp(D,"listing",{get:function(){return!!this._list&&this._list.listing}}),D.prototype.initOptions=function(){T.prototype.initOptions.call(this),this._dropDownWhenClick=!1,this._textReadOnly=!1,this._viewGridInside=!1,this._minDate=new Date(1970,0,1),this._maxDate=new Date(2100,11,31),this._commitOnSelect=!1},D.prototype._isDateEditor=function(){return!0},D.prototype.setEditValue=function(t){T.prototype.setEditValue.call(this,t),this._date="string"==typeof t?this._dateConverter.getDateNull(t):t},D.prototype.getEditValue=function(t,e){var t=T.prototype.getEditValue.call(this,t),i=this._editField().dataType;return t&&e&&(i==ht.ValueType.DATE||i==ht.ValueType.DATETIME)&&(t=t.getTime(),t=this._minDate?Math.max(this._minDate.getTime(),t):t,t=(t=this._maxDate?Math.min(this._maxDate.getTime(),t):t)&&new Date(t)),t},D.prototype._requestStart=function(t){return!!T.prototype._requestStart.call(this,t)&&(this._isMobile?t&&this.dropDown():!1!==t&&this.dropDown(),!0)},D.prototype._textHandler=function(){this._requestStart()},D.prototype._compositionstartHandler=function(){this._requestStart()},D.prototype._keyDownHandler=function(t){if(!this.isDisabled()){var e=this._list,i=this.listing,o=i&&e.focused;switch(t.keyCode){case 13:if(this.closeUp(!0))return re.Utils.stopEvent(t,!0),!this._sendToParent(t);break;case 27:if(this.closeUp(!1))return re.Utils.stopEvent(t,!0),!0;break;case 36:if(o)return re.Utils.stopEvent(t,!0),this.$_selectDate(e.firstDay()),!0;break;case 35:if(o)return re.Utils.stopEvent(t,!0),this.$_selectDate(e.lastDay()),!0;break;case 37:case 39:if(o)return re.Utils.stopEvent(t,!0),e&&e.keydown(t),!0;break;case 33:if(o)return re.Utils.stopEvent(t,!0),this.$_selectDate(e.incMonth(-1)),!0;break;case 34:if(o)return re.Utils.stopEvent(t,!0),this.$_selectDate(e.incMonth(1)),!0;break;case 40:if(t.altKey&&!i)return this._requestStart(),re.Utils.stopEvent(t,!0),!0;if(i)return re.Utils.stopEvent(t,!0),o?e.keydown(t):(e.focused=!0,this.$_setListDate()),!0;break;case 38:if(t.altKey&&i)return this.closeUp(!1),re.Utils.stopEvent(t,!0),!0;if(i)return re.Utils.stopEvent(t,!0),!o||e.date.getDate()<=7?e.focused=!1:e.keydown(t),!0;break;case 84:(t.altKey||t.altKey&&t.ctrlKey)&&i&&(re.Utils.stopEvent(t,!0),e.date=new Date,this.$_selectDate(e.date))}return T.prototype._keyDownHandler.call(this,t)}},D.prototype._keyPressHandler=function(t){if(!this.isDisabled()){var e=this._list,i=String.fromCharCode(t.keyCode||t.charCode);if(i.toLocaleLowerCase()==this.todayChar){if(re.Utils.stopEvent(t,!0),this.listing)return e.focused=!0,this.$_selectDate(e.today()),!0}else{if(re.Utils.isFirefox&&(t.ctrlKey||0===t.charCode))return T.prototype._keyPressHandler.call(this,t);if(!this._regx.test(i))return void t.preventDefault()}T.prototype._keyPressHandler.call(this,t),t.keyCode&&this.textReadOnly&&t.preventDefault()}},D.prototype.$_resetValue=function(t){var e,i,o,n;void 0===t&&(t=!1),(this.visible||t)&&(e=(t=this._editor).selectionStart,i=t.selectionEnd,o=t.value?t.value.length:0,t.value=t.value.replace(r,""),n=t.value?t.value.length:0,this._isMobile||(n==o?t.setSelectionRange(e,i):t.setSelectionRange(i,i)))},D.prototype.setBounds=function(t,e,i,o,n){T.prototype.setBounds.call(this,t,e,i,o,n)},D.prototype._doChanged=function(){this._isMobile?!this._controller.readOnly&&this._controller.editable&&(this._modified=!0,this._dispatchChange()):(this._started&&this._requestStart(),this._started&&!this._controller.readOnly&&this._controller.editable&&(this._modified=!0,this._dispatchChange()))},D.prototype._dispatchChange=function(){(this._isMobile||this.visible)&&(this.$_resetValue(this._isMobile),T.prototype._dispatchChange.call(this))},D.prototype.onDatePickerCloseUp=function(t,e){this.closeUp(e),this._isMobile||this.setFocus()},D.prototype._getInputSelector=function(){return D.INPUT_CSS},D.prototype.$_listDestroy=function(){var t=this._list&&this._list._element.parentElement;this._list&&(this._list.$_destroy(),t.removeChild(this._list._element),this._list.dispose(),delete this._list)},D.INPUT_CSS="rg-btdate-editor";var T,n=D;function D(t,e){t=T.call(this,t,e)||this;return t._minDate=new Date(1970,0,1),t._maxDate=new Date(2100,11,31),t._dropDownPosition=de.DropDownPosition.BUTTON,t._dropDownWhenClick=!1,t._commitOnSelect=!1,t._regx=/[0-9]|\.|\-|\/|a|A|p|P|m/,t._closing=!1,t._globalMouseHandler=function(t){var e=t.target;if(this._isMarquee(e))this.closeUp(!1);else{for(;e;){if(e==this._list._element)return;e=e.parentNode}this.closeUp(!0)}}.bind(t),t}e.BTDateCellEditor=n;M=L.TextCellEditor,ne.__extends(F,M),_dp(F,"minDate",{get:function(){return this._minDate},set:function(t){t!=this._minDate&&(this._minDate=t?t instanceof Date?t:"string"==typeof t?this._dateConverter.getDateNull(t):null:null,this._minDate&&this._minDate.setHours(0,0,0,0),this._changed())}}),_dp(F,"maxDate",{get:function(){return this._maxDate},set:function(t){t!=this._maxDate&&(this._maxDate=t?t instanceof Date?t:"string"==typeof t?this._dateConverter.getDateNull(t):null:null,this._maxDate&&this._maxDate.setHours(23,59,59),this._changed())}}),_dp(F,"native",{get:function(){return!0}}),_dp(F,"buttonCount",{get:function(){return 1}}),F.prototype._createEditor=function(t){t=M.prototype._createEditor.call(this,t);return t.setAttribute("type","date"),t.tabIndex=this._isMobile?-1:0,t},F.prototype._getInputSelector=function(){return F.INPUT_CSS},F.prototype.initOptions=function(){M.prototype.initOptions.call(this)},F.prototype.hasButton=function(t,e){return null==t||t},F.prototype.setVisible=function(t,e){M.prototype.setVisible.call(this,t,e=void 0===e?!1:e),this.visible&&this._editor.click()},F.prototype.setEditIndex=function(t){M.prototype.setEditIndex.call(this,t);t=this._editor;t.min=this._minDate?this.$_toInputDate(this._minDate):"",t.max=this._maxDate?this.$_toInputDate(this._maxDate):""},F.prototype.setEditValue=function(t){this._date="string"==typeof t?this._dateConverter.getDateNull(t):t,this._editor.value=this.$_toInputDate(this._date)},F.prototype._keyDownHandler=function(t){if(!this.isDisabled()){if(40===t.keyCode)if(t.altKey)return this._requestStart(),!0;return M.prototype._keyDownHandler.call(this,t)}},F.prototype.setBounds=function(t,e,i,o,n){M.prototype.setBounds.call(this,t,e,i,o,0),this._editor&&re.Utils.isiOS&&(this._editor.style.minWidth=i+"px",this._editor.style.width=i+"px")},F.prototype.$_toInputDate=function(t){return t?F.Formatter.getText(t):""},F.INPUT_CSS="rg-ndate-editor",F.Formatter=new dt.DateTimeConverter("yyyy-MM-dd");var M,n=F;function F(t,e){t=M.call(this,t,e)||this;return t._minDate=new Date(1970,0,1),t._maxDate=new Date(2100,11,31),t}e.NativeDateCellEditor=n})),Ne=(t(Be),Be.Holiday,Be.HolidayCollection,Be.DateCellEditor,Be.BTDateCellEditor,Be.NativeDateCellEditor,e(function(t,e){Object.defineProperty(e,"__esModule",{value:!0});i=_e.GridBaseOptions,ne.__extends(n,i),n.prototype._doDispose=function(){i.prototype._doDispose.call(this)},_dp(n,"readOnly",{get:function(){return this._readOnly},set:function(t){t!=this._readOnly&&(this._readOnly=t,this._refreshOwner(),this._invalidateEditor())}}),_dp(n,"editable",{get:function(){return this._editable},set:function(t){t!=this._editable&&(this._editable=t,this._refreshOwner(),this._invalidateEditor())}}),_dp(n,"columnEditableFirst",{get:function(){return this._columnEditableFirst},set:function(t){t!=this._columnEditableFirst&&(this._columnEditableFirst=t,this._refreshOwner(),this._invalidateEditor())}}),_dp(n,"checkable",{get:function(){return this._checkable},set:function(t){t!=this._checkable&&(this._checkable=t,this._changed())}}),_dp(n,"updatable",{get:function(){return this._updatable},set:function(t){t!=this._updatable&&(this._updatable=t,this._changed())}}),_dp(n,"appendable",{get:function(){return this._appendable},set:function(t){t!=this._appendable&&(this._appendable=t,this.displayEmptyEditRow=this._displayEmptyEditRow,this._changed())}}),_dp(n,"insertable",{get:function(){return this._insertable},set:function(t){t!=this._insertable&&(this._insertable=t,this._changed())}}),_dp(n,"deletable",{get:function(){return this._deletable},set:function(t){t!=this._deletable&&(this._deletable=t,this._changed())}}),_dp(n,"revertable",{get:function(){return this._revertable},set:function(t){t!=this._revertable&&(this._revertable=t,this._changed())}}),_dp(n,"erasable",{get:function(){return this._erasable},set:function(t){t!=this._erasable&&(this._erasable=t,this._changed())}}),_dp(n,"movable",{get:function(){return this._movable},set:function(t){t!=this._movable&&(this._movable=t,this._changed())}}),_dp(n,"commitByCell",{get:function(){return this._commitByCell},set:function(t){t!=this._commitByCell&&(this._commitByCell=t,this._changed())}}),_dp(n,"editWhenFocused",{get:function(){return this._editWhenFocused},set:function(t){this._editWhenFocused=t}}),_dp(n,"commitWhenNoEdit",{get:function(){return this._commitWhenNoEdit},set:function(t){this._commitWhenNoEdit=t}}),_dp(n,"commitWhenExitLast",{get:function(){return this._commitWhenExitLast},set:function(t){this._commitWhenExitLast=t}}),_dp(n,"commitWhenLeave",{get:function(){return this._commitWhenLeave},set:function(t){this._commitWhenLeave=t}}),_dp(n,"crossWhenExitLast",{get:function(){return this._crossWhenExitLast},set:function(t){this._crossWhenExitLast=t}}),_dp(n,"validateOnEdited",{get:function(){return this._validateOnEdited},set:function(t){this._validateOnEdited=t}}),_dp(n,"validateOnExit",{get:function(){return this._validateOnExit},set:function(t){this._validateOnExit=t}}),_dp(n,"hintOnError",{get:function(){return this._hintOnError},set:function(t){this._hintOnError=t}}),_dp(n,"removeValidateOnCommit",{get:function(){return this._removeValidateOnCommit},set:function(t){this._removeValidateOnCommit=t}}),_dp(n,"validateOnlyEditColumn",{get:function(){return this._validateOnlyEditColumn},set:function(t){this._validateOnlyEditColumn=t}}),_dp(n,"deleteRowsMessage",{get:function(){return this._deleteRowsMessage},set:function(t){this._deleteRowsMessage=t}}),_dp(n,"invalidFormatMessage",{get:function(){return this._invalidFormatMessage},set:function(t){this._invalidFormatMessage=t}}),_dp(n,"showInvalidFormatMessage",{get:function(){return this._showInvalidFormatMessage},set:function(t){this._showInvalidFormatMessage=t}}),_dp(n,"confirmWhenDelete",{get:function(){return this._confirmWhenDelete},set:function(t){this._confirmWhenDelete=t}}),_dp(n,"editWhenClickFocused",{get:function(){return this._editWhenClickFocused},set:function(t){this._editWhenClickFocused=t}}),_dp(n,"commitLevel",{get:function(){return this._commitLevel},set:function(t){this._commitLevel=t}}),_dp(n,"useTabKey",{get:function(){return this._useTabKey},set:function(t){this._useTabKey=t}}),_dp(n,"useArrowKeys",{get:function(){return this._useArrowKeys},set:function(t){this._useArrowKeys=t}}),_dp(n,"skipReadOnly",{get:function(){return this._skipReadOnly},set:function(t){this._skipReadOnly=t}}),_dp(n,"skipReadOnlyCell",{get:function(){return this._skipReadOnlyCell},set:function(t){this._skipReadOnlyCell=t}}),_dp(n,"verticalMoveStep",{get:function(){return this._verticalMoveStep},set:function(t){this._verticalMoveStep=t}}),_dp(n,"enterToTab",{get:function(){return this._enterToTab},set:function(t){this._enterToTab=t}}),_dp(n,"enterToNextRow",{get:function(){return this._enterToNextRow},set:function(t){this._enterToNextRow=t}}),_dp(n,"enterToEdit",{get:function(){return this._enterToEdit},set:function(t){this._enterToEdit=t}}),_dp(n,"maxLengthToNextCell",{get:function(){return this._maxLengthToNextCell},set:function(t){this._maxLengthToNextCell=t}}),_dp(n,"forceInsert",{get:function(){return this._forceInsert},set:function(t){this._forceInsert=t}}),_dp(n,"forceAppend",{get:function(){return this._forceAppend},set:function(t){this._forceAppend=t}}),_dp(n,"checkDiff",{get:function(){return this._checkDiff},set:function(t){this._checkDiff=t}}),_dp(n,"checkCellDiff",{get:function(){return this._checkCellDiff},set:function(t){this._checkCellDiff=t}}),_dp(n,"strictDiff",{get:function(){return this._strictDiff},set:function(t){this._strictDiff=t}}),_dp(n,"deletableWhenEdit",{get:function(){return this._deletableWhenEdit},set:function(t){this._deletableWhenEdit=t}}),_dp(n,"showCommitError",{get:function(){return this._showCommitError},set:function(t){this._showCommitError=t}}),_dp(n,"firstCellWhenInsert",{get:function(){return this._firstCellWhenInsert},set:function(t){this._firstCellWhenInsert=t}}),_dp(n,"appendWhenInsertKey",{get:function(){return this._appendWhenInsertKey},set:function(t){this._appendWhenInsertKey=t}}),_dp(n,"appendWhenExitLast",{get:function(){return this._appendWhenExitLast},set:function(t){this._appendWhenExitLast=t}}),_dp(n,"showOnlyValidationMessage",{get:function(){return this._showOnlyValidationMessage},set:function(t){this._showOnlyValidationMessage=t}}),_dp(n,"displayEmptyEditRow",{get:function(){return this._displayEmptyEditRow},set:function(t){var e=this.grid;this._displayEmptyEditRow=t,this._displayEmptyEditRow&&this._appendable?e.itemSource.appendDummy():e.itemSource.cancelDummy(),this._refreshOwner()}}),_dp(n,"buttonClickWhenSpace",{get:function(){return this._buttonClickWhenSpace},set:function(t){this._buttonClickWhenSpace=t}}),_dp(n,"exitGridWhenTab",{get:function(){return this._exitGridWhenTab},set:function(t){this._exitGridWhenTab=t}}),_dp(n,"cancelWhenLastUndo",{get:function(){return this._cancelWhenLastUndo},set:function(t){this._cancelWhenLastUndo=t}}),_dp(n,"exceptDataClickWhenButton",{get:function(){return this._exceptDataClickWhenButton},set:function(t){this._exceptDataClickWhenButton=t}}),_dp(n,"scrollOnEditing",{get:function(){return this._scrollOnEditing},set:function(t){this._scrollOnEditing=t}}),n.prototype.isWritable=function(){return this._editable&&!this._readOnly},n.prototype.canUpdate=function(t){return!this._readOnly&&(t||this._updatable)},n.prototype.canInsert=function(){return!this._readOnly&&this._insertable},n.prototype.canAppend=function(){return!this._readOnly&&this._appendable},n.prototype.canDelete=function(){return!this._readOnly&&this._deletable};var i,o=n;function n(t){t=i.call(this,t)||this;return t._readOnly=!1,t._editable=!re.Utils.isMobile(),t._checkable=!0,t._updatable=!0,t._appendable=!1,t._insertable=!1,t._deletable=!1,t._revertable=!1,t._erasable=!1,t._movable=!1,t._commitByCell=!1,t._editWhenFocused=!1,t._commitWhenNoEdit=!1,t._commitWhenExitLast=!1,t._commitWhenLeave=!1,t._crossWhenExitLast=!1,t._validateOnEdited=!0,t._validateOnExit=!1,t._hintOnError=!0,t._deleteRowsMessage=window.RG_CONST&&window.RG_CONST.DELETEROWSMESSAGE?window.RG_CONST.DELETEROWSMESSAGE:"선택된 행(들)을 삭제하시겠습니까??",t._invalidFormatMessage=window.RG_CONST&&window.RG_CONST.INVALIDFORMATMESSAGE?window.RG_CONST.INVALIDFORMATMESSAGE:"잘못된 입력 유형입니다.",t._showInvalidFormatMessage=!0,t._confirmWhenDelete=!0,t._editWhenClickFocused=!1,t._commitLevel=ht.ValidationLevel.IGNORE,t._useTabKey=!0,t._useArrowKeys=!0,t._skipReadOnly=!1,t._skipReadOnlyCell=!1,t._verticalMoveStep=_t.VerticalMoveStep.CELL,t._enterToTab=!1,t._enterToNextRow=!1,t._enterToEdit=!1,t._maxLengthToNextCell=!1,t._forceInsert=!1,t._forceAppend=!1,t._checkDiff=!1,t._checkCellDiff=!1,t._strictDiff=!1,t._deletableWhenEdit=!0,t._showCommitError=!1,t._firstCellWhenInsert=!1,t._appendWhenInsertKey=!1,t._appendWhenExitLast=!1,t._showOnlyValidationMessage=!0,t._displayEmptyEditRow=!1,t._buttonClickWhenSpace=!1,t._exitGridWhenTab=ht.ExitGridWhenTab.NONE,t._cancelWhenLastUndo=!1,t._exceptDataClickWhenButton=!1,t._removeValidateOnCommit=!1,t._validateOnlyEditColumn=!1,t._columnEditableFirst=!1,t}e.EditOptions=o;r=$.ExpressionRuntime,ne.__extends(a,r),a.prototype._doDispose=function(){this._cell=null,r.prototype._doDispose.call(this)},_dp(a,"value",{set:function(t){this._value=t}}),_dp(a,"cell",{set:function(t){this._cell=t}}),a.prototype.isIdentifier=function(t){return t=t.toLowerCase(),a.IDENTS.hasOwnProperty(t)?a.IDENTS[t]:r.prototype.isIdentifier.call(this,t)},a.prototype.evaluateIdentifier=function(t){switch(t){case a.ID_VALUE:return this._value;case a.ID_ROW:return this._cell.itemIndex+1;case a.ID_COLUMN_HEADER:var e=this._cell&&this._cell.column;return e&&e.header&&e.header.text?e.header.text:e.displayText}throw new $.ExpressionEvaluationError("Invalid identifier key: "+t)},a.IDENTS={value:a.ID_VALUE=0,row:a.ID_ROW=1,dcount:a.ID_COLUMN_HEADER=2};var r,s=a;function a(){return r.call(this)||this}e.EditorTitleExpressionRuntime=s;l=_e.GridBaseOptions,ne.__extends(h,l),h.prototype._doDispose=function(){l.prototype._doDispose.call(this)},_dp(h,"yearDisplayFormat",{get:function(){return this._yearDisplayFormat},set:function(t){t!=this._yearDisplayFormat&&(this._yearDisplayFormat=t,this._changed())}}),_dp(h,"monthDisplayFormat",{get:function(){return this._monthDisplayFormat},set:function(t){t!=this._monthDisplayFormat&&(this._monthDisplayFormat=t,this._changed())}}),_dp(h,"months",{get:function(){return this._months},set:function(t){t!=this._months&&(this._months=t,this._changed())}}),_dp(h,"weekDays",{get:function(){return this._weekDays},set:function(t){t!=this._weekDays&&(this._weekDays=t,this._changed())}}),_dp(h,"viewGridInside",{get:function(){return this._viewGridInside},set:function(t){t!=this._viewGridInside&&(this._viewGridInside=t,this._changed())}}),_dp(h,"titleStatement",{get:function(){return this._titleStatement},set:function(t){t!=this._titleStatement&&((this._titleStatement=t)?this._titleExprStatement?this._titleExprStatement.source=t:this._titleExprStatement=new Nt.ExpressionStatement(t):this._titleExprStatement=null,this._changed())}}),_dp(h,"holidays",{get:function(){return this._holidays},set:function(t){t!=this._holidays&&((this._holidays=t)?(this._holidayCollection=this._holidayCollection||new Be.HolidayCollection,this._holidayCollection.load(t)):this._holidayCollection&&this._holidayCollection.clear(),this._changed())}});var l,o=h;function h(t){t=l.call(this,t)||this;return t._yearDisplayFormat=window.RG_CONST&&window.RG_CONST.YEARDISPLAYFORMAT?window.RG_CONST.YEARDISPLAYFORMAT:"{Y}년",t._monthDisplayFormat=window.RG_CONST&&window.RG_CONST.MONTHDISPLAYFORMAT?window.RG_CONST.MONTHDISPLAYFORMAT:"{M}월",t._months=null,t._weekDays=null,t._viewGridInside=!1,t._holidays=null,t._titleExprRuntime=new s,t}e.EditorOptions=o;d=_e.GridBaseOptions,ne.__extends(u,d),u.prototype._doDispose=function(){d.prototype._doDispose.call(this)},_dp(u,"enabled",{get:function(){return this._enabled},set:function(t){this._enabled=t}}),_dp(u,"singleMode",{get:function(){return this._singleMode},set:function(t){this._singleMode=t}}),_dp(u,"datetimeFormat",{get:function(){return this._datetimeFormat},set:function(t){this._datetimeFormat=t}}),_dp(u,"booleanFormat",{get:function(){return this._booleanFormat},set:function(t){this._booleanFormat=t}}),_dp(u,"lookupDisplay",{get:function(){return this._lookupDisplay},set:function(t){this._lookupDisplay=t}}),_dp(u,"copyDisplayText",{get:function(){return this._copyDisplayText},set:function(t){this._copyDisplayText=t}}),_dp(u,"includeHeaderText",{get:function(){return this._includeHeaderText},set:function(t){this._includeHeaderText=t}}),_dp(u,"copyTextCallback",{get:function(){return this._copyTextCallback},set:function(t){this._copyTextCallback=t}});var d,o=u;function u(t){t=d.call(this,t)||this;return t._enabled=!0,t}e.CopyOptions=o;c=_e.GridBaseOptions,ne.__extends(_,c),_.prototype._doDispose=function(){c.prototype._doDispose.call(this)},_dp(_,"enabled",{get:function(){return this._enabled},set:function(t){this._enabled=t}}),_dp(_,"singleMode",{get:function(){return this._singleMode},set:function(t){this._singleMode=t}}),_dp(_,"startEdit",{get:function(){return this._startEdit},set:function(t){this._startEdit=t}}),_dp(_,"commitEdit",{get:function(){return this._commitEdit},set:function(t){this._commitEdit=t}}),_dp(_,"enableAppend",{get:function(){return this._enableAppend},set:function(t){this._enableAppend=t}}),_dp(_,"fillFieldDefaults",{get:function(){return this._fillFieldDefaults},set:function(t){this._fillFieldDefaults=t}}),_dp(_,"fillColumnDefaults",{get:function(){return this._fillColumnDefaults},set:function(t){this._fillColumnDefaults=t}}),_dp(_,"forceRowValidation",{get:function(){return this._forceRowValidation},set:function(t){this._forceRowValidation=t}}),_dp(_,"forceColumnValidation",{get:function(){return this._forceColumnValidation},set:function(t){this._forceColumnValidation=t}}),_dp(_,"datetimeFormats",{get:function(){return this._datetimeFormats},set:function(t){if(t!==this._datetimeFormats)if(this._datetimeFormats=t&&t.concat(),t){this._dateReaders=[];for(var e=0;e<this._datetimeFormats.length;e++)this._dateReaders.push(new g.DateTimeReader(this._datetimeFormats[e]))}else this._dateReaders=null}}),_dp(_,"dateReaders",{get:function(){return this._dateReaders}}),_dp(_,"booleanFormat",{get:function(){return this._booleanFormat},set:function(t){t!=this._booleanFormat&&(this._booleanFormat=t,this._boolReader=t&&new k.BooleanConverter(t))}}),_dp(_,"boolReader",{get:function(){return this._boolReader}}),_dp(_,"numberChars",{get:function(){return this._numberChars},set:function(t){if(t!==this._numberChars)if((this._numberChars=t)&&0<t.length){for(var e="[",i=0;i<t.length;i++){var o=t[i];e+="\\"==o?"\\"+o:o}e+="]",this._numberCharExp=new RegExp(e,"g")}else this._numberCharExp=null}}),_dp(_,"numberSeparator",{get:function(){return this._numberSeparator},set:function(t){this._numberSeparator=t}}),_dp(_,"numberCharsOfCols",{get:function(){return this._numberCharsOfCols},set:function(t){if(t!==this._numberCharsOfCols&&(this._numberCharsOfCols=t,this._numberCharExpOfCols={},t))for(var e in t){var i=t[e];if(i instanceof Array&&0<i.length){for(var o="[",n=0,r=i.length;n<r;n++){var s=i[n];o+="\\"==s?"\\"+s:s}o+="]",this._numberCharExpOfCols[e]=new RegExp(o,"g")}else this._numberCharExpOfCols[e]=null}}}),_dp(_,"numberCharExp",{get:function(){return this._numberCharExp}}),_dp(_,"numberSeparatorOfCols",{get:function(){return this._numberSeparatorOfCols},set:function(t){this._numberSeparatorOfCols=t}}),_dp(_,"selectionBase",{get:function(){return this._selectionBase},set:function(t){this._selectionBase=t}}),_dp(_,"selectBlockPaste",{get:function(){return this._selectBlockPaste},set:function(t){this._selectBlockPaste=t}}),_dp(_,"stopOnError",{get:function(){return this._stopOnError},set:function(t){this._stopOnError=t}}),_dp(_,"noEditEvent",{get:function(){return this._noEditEvent},set:function(t){t!=this._noEditEvent&&(this._noEditEvent=t,this._changed())}}),_dp(_,"noDataEvent",{get:function(){return this._noDataEvent},set:function(t){this._noDataEvent=t}}),_dp(_,"eventEachRow",{get:function(){return this._eventEachRow},set:function(t){this._eventEachRow=t}}),_dp(_,"checkReadOnly",{get:function(){return this._checkReadOnly},set:function(t){this._checkReadOnly=t}}),_dp(_,"checkDomainOnly",{get:function(){return this._checkDomainOnly},set:function(t){this._checkDomainOnly=t}}),_dp(_,"convertLookupLabel",{get:function(){return this._convertLookupLabel},set:function(t){this._convertLookupLabel=t}}),_dp(_,"applyNumberFormat",{get:function(){return this._applyNumberFormat},set:function(t){this._applyNumberFormat=t}}),_dp(_,"applyEditMask",{get:function(){return this._applyEditMask},set:function(t){this._applyEditMask=t}}),_dp(_,"applyMaxLength",{get:function(){return this._applyMaxLength},set:function(t){this._applyMaxLength=t}}),_dp(_,"applyInputChars",{get:function(){return this._applyInputChars},set:function(t){this._applyInputChars=t}}),_dp(_,"throwValidationError",{get:function(){return this._throwValidationError},set:function(t){this._throwValidationError=t}}),_.prototype.numberCharExpOfCol=function(t){return t&&this._numberCharExpOfCols&&this._numberCharExpOfCols[t]?this._numberCharExpOfCols[t]:this._numberCharExp},_.prototype.numberSeparatorOfCol=function(t){return t&&this._numberSeparatorOfCols&&this._numberSeparatorOfCols[t]?this._numberSeparatorOfCols[t]:this._numberSeparator};var c,o=_;function _(t){t=c.call(this,t)||this;return t._enabled=!0,t._startEdit=!0,t._commitEdit=!0,t._enableAppend=!0,t._numberCharsOfCols={},t._numberSeparatorOfCols={},t._stopOnError=!0,t._throwValidationError=!0,t}e.PasteOptions=o;p=_e.GridBaseOptions,ne.__extends(f,p),f.prototype._doDispose=function(){p.prototype._doDispose.call(this)},_dp(f,"longTapDuration",{get:function(){return this._longTapDuration},set:function(t){t!=this._longTapDuration&&(this._longTapDuration=t,this._changed())}}),_dp(f,"doubleTapInterval",{get:function(){return this._doubleTapInterval},set:function(t){t!=this._doubleTapInterval&&(this._doubleTapInterval=t,this._changed())}}),_dp(f,"tapThreshold",{get:function(){return this._tapThreshold},set:function(t){t!=this._tapThreshold&&(this._tapThreshold=t,this._changed())}}),_dp(f,"showEditCommander",{get:function(){return this._showEditCommander},set:function(t){t!=this._showEditCommander&&(this._showEditCommander=t,this._changed())}}),_dp(f,"showTooltip",{get:function(){return this._showTooltip},set:function(t){t!=this._showTooltip&&(this._showTooltip=t,this._changed())}}),_dp(f,"scrollOnEditing",{get:function(){return this.grid.editOptions.scrollOnEditing},set:function(t){this.grid.editOptions.scrollOnEditing=t}});var p,o=f;function f(t){t=p.call(this,t)||this;return t._longTapDuration=500,t._doubleTapInterval=300,t._tapThreshold=4,t._showEditCommander=!0,t._showTooltip=!1,t}e.MobileOptions=o})),j=(t(Ne),Ne.EditOptions,Ne.EditorTitleExpressionRuntime,Ne.EditorOptions,Ne.CopyOptions,Ne.PasteOptions,Ne.MobileOptions,e(function(t,e){Object.defineProperty(e,"__esModule",{value:!0});i=De.EditRequest,ne.__extends(n,i),n.prototype._doDispose=function(){this._grid=null,i.prototype._doDispose.call(this)},_dp(n,"grid",{get:function(){return this._grid}}),n.prototype.canFocus=function(){return!0};var i,o=n;function n(t){var e=i.call(this)||this;return e._grid=t,e}e.GridEditRequest=o;r=o,ne.__extends(a,r),a.prototype._doDispose=function(){this._index.dispose(),this._index=null,r.prototype._doDispose.call(this)},_dp(a,"index",{get:function(){return this._index}});var r,s=a;function a(t){var e=r.call(this,t.grid)||this;return e._index=t,e}e.CellRequest=s;l=s,ne.__extends(h,l),h.prototype._doDispose=function(){l.prototype._doDispose.call(this)},_dp(h,"style",{get:function(){return this._style}}),_dp(h,"manager",{get:function(){return this.grid.selections}}),_dp(h,"selectable",{get:function(){return!0}});var l,s=h;function h(t,e){t=l.call(this,t)||this;return t._style=e,t}e.SelectRequest=s;d=o,ne.__extends(u,d),u.prototype._doDispose=function(){this._layout=null,d.prototype._doDispose.call(this)},_dp(u,"layout",{get:function(){return this._layout}}),_dp(u,"x",{get:function(){return this._x}}),_dp(u,"y",{get:function(){return this._y}}),_dp(u,"offset",{get:function(){return this._offset}}),u.prototype.init=function(t,e,i,o){return this._layout=t,this._x=e,this._y=i,this._offset=o,this},_dp(u,"cursor",{get:function(){return"col-resize"}});var d,s=u;function u(t){return d.call(this,t)||this}e.ColumnResizeRequest=s;c=o,ne.__extends(_,c),_.prototype._doDispose=function(){this._layout=null,c.prototype._doDispose.call(this)},_dp(_,"layout",{get:function(){return this._layout}}),_dp(_,"x",{get:function(){return this._x}}),_dp(_,"y",{get:function(){return this._y}}),_dp(_,"offset",{get:function(){return this._offset}}),_.prototype.init=function(t,e,i,o){return this._layout=ct.CellLayoutItem.getSource(t),this._x=e,this._y=i,this._offset=o,this},_dp(_,"cursor",{get:function(){return"default"}});var c,s=_;function _(t){return c.call(this,t)||this}e.ColumnMoveRequest=s;p=o,ne.__extends(f,p),f.prototype._doDispose=function(){p.prototype._doDispose.call(this)},_dp(f,"itemIndex",{get:function(){return this._itemIndex}}),_dp(f,"variable",{get:function(){return this._variable}}),_dp(f,"rowTop",{get:function(){return this._rowTop}}),_dp(f,"offset",{get:function(){return this._offset}}),f.prototype.init=function(t,e,i,o){return this._itemIndex=t,this._variable=e,this._rowTop=i,this._offset=o,this},_dp(f,"cursor",{get:function(){return"row-resize"}}),f.prototype.canFocus=function(){return!1};var p,s=f;function f(t){t=p.call(this,t)||this;return t._itemIndex=-1,t._variable=!1,t._rowTop=0,t._offset=0,t}e.RowResizeRequest=s;g=o,ne.__extends(m,g),m.prototype._doDispose=function(){g.prototype._doDispose.call(this)},_dp(m,"top",{get:function(){return this._top}}),_dp(m,"offset",{get:function(){return this._offset}}),m.prototype.init=function(t,e){return this._top=t,this._offset=e,this},_dp(m,"cursor",{get:function(){return"row-resize"}});var g,s=m;function m(t){t=g.call(this,t)||this;return t._offset=0,t._top=0,t}e.HeaderResizeRequest=s;y=o,ne.__extends(v,y),v.prototype._doDispose=function(){y.prototype._doDispose.call(this)},_dp(v,"itemIndex",{get:function(){return this._itemIndex}}),_dp(v,"offset",{get:function(){return this._offset}}),v.prototype.init=function(t,e){return this._selStyle=t&&t.style,this._selStyle==W.SelectionStyle.COLUMNS||this._selStyle==W.SelectionStyle.SINGLE_COLUMN?(this._itemIndex=e,this._offset=0):(this._itemIndex=this._selStyle?t.getBounds().top:e,this._offset=e-this._itemIndex),this},_dp(v,"cursor",{get:function(){return"move"}}),v.prototype.canFocus=function(){return this._selStyle==W.SelectionStyle.COLUMNS||this._selStyle==W.SelectionStyle.SINGLE_COLUMN};var y,s=v;function v(t){t=y.call(this,t)||this;return t._itemIndex=-1,t._offset=0,t}e.RowMoveRequest=s})),$e=(t(j),j.GridEditRequest,j.CellRequest,j.SelectRequest,j.ColumnResizeRequest,j.ColumnMoveRequest,j.RowResizeRequest,j.HeaderResizeRequest,j.RowMoveRequest,e(function(t,e){Object.defineProperty(e,"__esModule",{value:!0});i=se.Base,ne.__extends(o,i),o.prototype._doDispose=function(){i.prototype._doDispose.call(this)},_dp(o,"visible",{get:function(){return this._visible},set:function(t){this._visible=t}}),_dp(o,"message",{get:function(){return this._message},set:function(t){this._message=t}}),o.prototype.assignFrom=function(t){"string"==typeof t?(this._message=t,this._message&&(this._visible=!0)):"boolean"==typeof t?this._visible=t:t&&i.prototype.assignFrom.call(this,t)};var i,r=o;function o(t){var e=i.call(this)||this;return e._visible=!0,t&&e.assignFrom(t),e}e.TooltipOptions=r;n=se.Base,ne.__extends(a,n),a.prototype._doDispose=function(){n.prototype._doDispose.call(this),this._element&&this._element.removeEventListener("touchend",this.$_touchendHandler),re.Utils.detach(this._element)},_dp(a,"minWidth",{get:function(){return this._minWidth},set:function(t){this._minWidth=t}}),_dp(a,"maxWidth",{get:function(){return this._maxWidth},set:function(t){this._maxWidth=t}}),_dp(a,"dropDownCount",{get:function(){return this._dropDownCount},set:function(t){this._dropDownCount=t}}),a.prototype.show=function(t,e,i,o,n){this._showing=!0;try{this.$_show(t,e,i,o,n)}finally{this._showing=!1}},a.prototype.hide=function(){var t=this._element;t&&t.parentNode&&this._container._container.removeChild(t)},a.prototype.$_createElement=function(t){var e=t.createElement("div");return e.style.pointerEvents="none",e.onkeydown=function(t){27==t.keyCode&&this.hide()}.bind(this),this.$_disableSelection(e),this._span=t.createElement("span"),e.appendChild(this._span),this.$_disableSelection(this._span),e},a.prototype.$_disableSelection=function(t){void 0!==t.onselectstart?t.onselectstart=function(){return!1}:void 0!==t.style.MozUserSelect?t.style.MozUserSelect="none":t.onmousedown=function(){return!1}},a.prototype.$_show=function(t,e,i,o,n){var r=this._container.gridView.displayOptions.baseZindex+4,s=this._element,t=t.message;s&&t&&(this._span.innerHTML=t.replace(/\n/g,"<br>"),re.Utils.setClassName(s,"rg-tooltip"),(t=s.style).position="absolute",t.left=e+"px",t.top=i+"px",t.overflow="hidden",t.zIndex=String(r),this._container._container.appendChild(s),e=s.getBoundingClientRect(),r=this._container._container.getBoundingClientRect(),t.left=e.right>r.right?Math.max(r.right-e.width-r.left-2,0)+"px":s.style.left,e.bottom>r.bottom&&(s.style.top=n?Math.max(0,i-(e.bottom-r.bottom))+"px":Math.max(i-e.height-o,0)+"px"),t.visibility="visible")};var n,s=a;function a(t){var e=n.call(this)||this;return e._minWidth=0,e._maxWidth=0,e._dropDownCount=8,e._showing=!1,e.$_touchendHandler=null,e._container=t,e._element=e.$_createElement(t.doc),e.$_touchendHandler=function(t){t.preventDefault(),this.hide()}.bind(e),re.Utils.isMobile()&&e._element.addEventListener("touchend",e.$_touchendHandler,!1),e}e.ToolTipView=s;l=se.Base,ne.__extends(d,l),d.prototype._doDispose=function(){this._container=null,l.prototype._doDispose.call(this)},_dp(d,"visible",{get:function(){return this._active}}),d.prototype.show=function(t,e,i,o,n){if(!this._active&&(this.close(),(t=t instanceof r?t:t?new r(t):null)&&t.visible))return this._tipView||(this._tipView=new s(this._container)),this._tipView.show(t,e,i,o,n),(t=this._container.gridView)&&this._pos.set(t.mouseX,t.mouseY),this._active=!0;return!1},d.prototype.close=function(t,e){if(this._active&&void 0!==t){var i=this._pos;if(Math.abs(i.x-t)<4&&Math.abs(i.y-e)<4)return!1}return this._timer&&clearTimeout(this._timer),!(!this._active||(this._tipView&&this._tipView.hide(),this._active=!1))};var l,h=d;function d(t){var e=l.call(this)||this;return e._active=!1,e._pos=new he.Point,e._container=t.container,e}e.TooltipManager=h})),Ae=(t($e),$e.TooltipOptions,$e.ToolTipView,$e.TooltipManager,e(function(t,e){Object.defineProperty(e,"__esModule",{value:!0});i=se.Base,ne.__extends(n,i),n.prototype._doDispose=function(){i.prototype._doDispose.call(this)},_dp(n,"name",{get:function(){return this._name}}),n.prototype.start=function(t,e,i,o){return this._doStart(t,e,i,o)},n.prototype.move=function(t,e){},n.prototype.stop=function(t,e){this._doEnd()},n.prototype.drag=function(t,e,i,o){return this._doDrag(t,e,i,o)},n.prototype.drop=function(t,e){try{this._doDrop(t,e)}finally{this._doEnd()}},n.prototype.cancel=function(){try{this._doCancel()}finally{this._doEnd()}},n.prototype.end=function(t){this._doEnd()},n.prototype._doStart=function(t,e,i,o){},n.prototype._doDrag=function(t,e,i,o){return!1},n.prototype._doDrop=function(t,e){},n.prototype._doCancel=function(){},n.prototype._doEnd=function(){};var i,o=n;function n(t){var e=i.call(this)||this;return e._name=t,e}e.MobileDragTracker=o;r=j.GridEditRequest,ne.__extends(s,r),s.prototype._doDispose=function(){r.prototype._doDispose.call(this)},_dp(s,"targetElement",{get:function(){return this._targetElement},set:function(t){this._targetElement=t}});var r,o=s;function s(t){return r.call(this,t)||this}e.MobileEditRequest=o;a=o,ne.__extends(h,a),h.prototype._doDispose=function(){a.prototype._doDispose.call(this)};var a,l=h;function h(t){return a.call(this,t)||this}e.TouchScorllRequest=l;d=o,ne.__extends(u,d),u.prototype._doDispose=function(){d.prototype._doDispose.call(this)},_dp(u,"handle",{get:function(){return this._handle},set:function(t){this._handle=t}});var d,l=u;function u(t){return d.call(this,t)||this}e.TouchSelectRequest=l;c=Re.GridDragTracker,ne.__extends(_,c),_dp(_,"request",{get:function(){return this._request},set:function(t){this._request=t}}),_.prototype.stop=function(){},_.prototype.end=function(t){this._doEnd(t)},_.prototype._doEnd=function(t){},_.prototype.getRequest=function(){return this._request};var c,o=_;function _(t,e){return c.call(this,t,e)||this}e.TouchDragTracker=o;p=o,ne.__extends(f,p),f.prototype._doDispose=function(){this._grid=null,p.prototype._doDispose.call(this)},f.prototype._doStart=function(t,e,i,o){var n=this._grid;if(n.isEditing())switch(n.mobileOptions.scrollOnEditing){case ht.ScrollOnEditing.CANCEL:n.cancelEditor(!0);break;case ht.ScrollOnEditing.COMMIT:n.commitEditor(!0);break;case ht.ScrollOnEditing.DEFAULT:}return this._tapX=e,this._tapY=i,!(this._scrolling=void 0)},f.prototype._doDrag=function(t,e,i){var o=this._grid,n=e-this._tapX,r=i-this._tapY;if(this._tapX=e,this._tapY=i,this._vertical=Math.abs(2*r)>=Math.abs(n),this._vertical){if(5<Math.abs(r)){var e=o.topIndex,i=o.layoutManager,s=i.fullItemCount,a=o.itemCount,i=r/i.defaultItemHeight,i=-(0<r?Math.ceil(i):Math.floor(i)),r=0<r?-1:1;if(s===a)return this._scrolling=!1;if(void 0===this._scrolling){if(a<=e+s&&1==r||0==e&&-1==r)return this._scrolling=!1;this._scrolling=!0}else this._scrolling&&(o.topIndex=o.topIndex+i)}}else o.leftPos=o.leftPos-n;return!0};var p,l=f;function f(t){t=p.call(this,t,"mobileBodyScrollTracker")||this;return t._tapX=NaN,t._tapY=NaN,t._vertical=!0,t}e.TouchScrollTracker=l;g=o,ne.__extends(m,g),m.prototype._doStart=function(t,e,i,o){return!0},m.prototype._doDrag=function(t,e,i){var o,e=this._grid.pointToIndex(null,e,i,!1);return e&&0<=e.itemIndex&&(o=(i=this.request.handle).selectionMask.item)&&o.inflate(i.dir,e),!0};var g,l=m;function m(t){return g.call(this,t)||this}e.TouchSelectTracker=l})),He=(t(Ae),Ae.MobileDragTracker,Ae.MobileEditRequest,Ae.TouchScorllRequest,Ae.TouchSelectRequest,Ae.TouchDragTracker,Ae.TouchScrollTracker,Ae.TouchSelectTracker,e(function(t,e){Object.defineProperty(e,"__esModule",{value:!0});i=se.Base,ne.__extends(n,i),n.prototype._doDispose=function(){this._container=null,i.prototype._doDispose.call(this)},n.prototype._touchToOffset=function(t,e){t=t._containerDom.getBoundingClientRect();return e.x=e.clientX-t.left,e.y=e.clientY-t.top,e},n.prototype._toOffset=function(t){return this._touchToOffset(this._container,t)};var i,o=n;function n(t){var e=i.call(this)||this;return e._container=t,e}e.TouchManager=o;r=o,ne.__extends(s,r),s.prototype._doDispose=function(){r.prototype._doDispose.call(this)},_dp(s,"touchHandler",{get:function(){return this._touchHandler},set:function(t){this._touchHandler=t}}),_dp(s,"dragHandler",{get:function(){return this._dragHandler},set:function(t){this._dragHandler=t}}),_dp(s,"dragStartHandler",{get:function(){return this._dragStartHandler},set:function(t){this._dragStartHandler=t}}),_dp(s,"dragEndHandler",{get:function(){return this._dragEndHandler},set:function(t){this._dragEndHandler=t}}),_dp(s,"swipeHandler",{get:function(){return this._swipeHandler},set:function(t){this._swipeHandler=t}}),_dp(s,"tapHandler",{get:function(){return this._tapHandler},set:function(t){this._tapHandler=t}}),_dp(s,"doubleTapHandler",{get:function(){return this._doubleTapHandler},set:function(t){this._doubleTapHandler=t}}),_dp(s,"longTapHandler",{get:function(){return this._longTapHandler},set:function(t){this._longTapHandler=t}}),_dp(s,"touchEndHandler",{get:function(){return this._touchEndHandler},set:function(t){this._touchEndHandler=t}}),_dp(s,"touchEndt",{get:function(){return this._touchEndt}}),_dp(s,"options",{get:function(){return this._mobileOptions}}),s.prototype.isSingleTouch=function(){return 1==this._touches.length},s.prototype.clearTouches=function(){this._touches=[]},s.prototype.removeTouches=function(t){for(var e,i=0,o=t.length;i<o;i++)e=t[i],-1<(e=this._touches.indexOf(e.identifier))&&this._touches.splice(e,1)},s.prototype.touchStart=function(t){clearTimeout(this._longTapTimer);var e,i=t.changedTouches;if(1<t.touches.length||0<this._touches.length)for(var o=0,n=i.length;o<n;o++)e=i[o],this._touches.push(e.identifier);else 0<i.length?(e=this._toOffset(i[0]),this._tracker&&(this._tracker.stop&&this._tracker.stop(e.x,e.y),this._tracker=null),this._touchId=e.identifier,this._touches.push(e.identifier),this._dragging=!1,this._touchHandler&&(this._tracker=this._touchHandler(t,e.x,e.y)),0==this._tapped?(this._started=re.Utils.getTimer(),this._prevX=this._startX=e.x,this._prevY=this._startY=e.y):(this._seconded=re.Utils.getTimer(),this._prevX=e.x,this._prevY=e.y),this._events=[],this._events.push({x:e.x,y:e.y,t:t.timeStamp}),this._scrollY=window.scrollY,this._longTapTimer=setTimeout(function(){this._longTapHandler&&this._longTapHandler(t,this._startX,this._startY)&&(this._touchId=void 0,this._tapped=0)}.bind(this),this.options.longTapDuration)):alert("no touch ?")},s.prototype.touchMove=function(t){var e,i,o=this.$_findTouch(t);o&&this.isSingleTouch()&&(e=!1,this._dragging&&this._tracker?e=this._dragHandler&&this._dragHandler(this._prevX,this._prevY,o.x,o.y):(Math.abs(this._prevX-o.x)>this.options.tapThreshold||Math.abs(this._prevY-o.y)>this.options.tapThreshold)&&(clearTimeout(this._longTapTimer),this._tapped=0,this._dragging=!0,e=this._tracker=this._dragStartHandler&&this._dragStartHandler(this._startX,this._startY,o.x,o.y)),(i=this._tracker)instanceof Ae.TouchScrollTracker&&i._vertical?i._scrolling?t.preventDefault():re.Utils.isiOS||e&&t.cancelable&&t.preventDefault():(i instanceof Re.ColumnMoveTracker||e&&t.cancelable)&&t.preventDefault(),this._prevX=o.x,this._prevY=o.y,this._events.push({x:o.x,y:o.y,t:t.timeStamp}),30<this._events.length)&&this._events.splice(0,15)},s.prototype.touchEnd=function(t){var e,i,o;clearTimeout(this._longTapTimer),void 0===this._touchId?(this._touchEndHandler&&this._touchEndHandler(t),this.clearTouches()):((e=this.$_findTouch(t))&&this.isSingleTouch()?(i=(o=this._container)._currentX=e.x,o=o._currentY=e.y,this._dragging&&this._tracker?(this._touchId=void 0,this._tapped=0,this._swipeHandler&&this.$_checkSwipe(t)||this._dragEndHandler&&this._dragEndHandler(i,o,!1)):0==this._tapped?(this._tapped=1,this._tapHandler&&this._tapHandler(t,this._startX,this._startY)):1==this._tapped?(this._touchId=void 0,re.Utils.getTimer()-this._started<this.options.doubleTapInterval?(this._tapped=0,this._doubleTapHandler&&this._doubleTapHandler(t,this._prevX,this._prevY)):(this._tapped=1,this._started=this._seconded,this._startX=this._prevX,this._startY=this._prevY,this._tapHandler&&this._tapHandler(t,this._prevX,this._prevY))):alert("touch end")):this._dragEndHandler&&this._dragEndHandler(null,null,!1),this._tracker=null,t.touches.length<=0&&this.clearTouches(),this.removeTouches(t.changedTouches),re.Utils.isiOS&&(this._touchEndt=re.Utils.getTimer()))},s.prototype.touchCancel=function(t){this.clearTouches(),clearTimeout(this._longTapTimer),this._dragEndHandler&&this._dragEndHandler(null,null,!0),this._tracker=null},s.prototype.$_findTouch=function(t){for(var e=t.changedTouches,i=0;i<e.length;i++){var o=e[i];if(o.identifier==this._touchId)return this._toOffset(o)}return null},s.prototype.$_checkSwipe=function(t){var e=this._events,i=e.length;if(!(i<2)){for(var o=e[i-1],n=e[i-2],r=i-3;0<=r&&!(100<o.t-n.t);r--)n=e[r];var s,a,i=n.x,l=n.y,h=o.x,d=o.y,u=Math.sqrt(Math.pow(i-h,2)+Math.pow(l-d,2))/Math.max(16,o.t-n.t);return.1<u?(s=Math.log(.1/u)/Math.log(.998),u=u*(1-Math.pow(.998,1+s))/(1-.998),a="right",45<(d=(d=Math.round(180*Math.atan2(d-l,h-i)/Math.PI))<0?360+d:d)&&d<=135?a="bottom":135<d&&d<=225?a="left":225<d&&d<=315&&(a="top"),this._swipeHandler(s,u,a,t)):void 0}};var r,o=s;function s(t,e){t=r.call(this,t)||this;return t._touchId=void 0,t._started=null,t._seconded=null,t._startX=NaN,t._startY=NaN,t._tapped=0,t._dragging=!1,t._prevX=NaN,t._prevY=NaN,t._longTapTimer=void 0,t._tracker=null,t._events=[],t._touches=[],t._mobileOptions=e,t}e.SingleTouchManager=o})),Ue=(t(He),He.TouchManager,He.SingleTouchManager,e(function(t,e){Object.defineProperty(e,"__esModule",{value:!0});i=at.DataCellRenderer,ne.__extends(n,i),n.prototype._doDispose=function(){i.prototype._doDispose.call(this)},_dp(n,"type",{get:function(){return this._type}});var i,o=n;function n(t){var e=i.call(this)||this;return e._type=t,e}e.CustomCellRenderer=o;r=at.DataCellRenderer,ne.__extends(s,r),s.prototype._doDispose=function(){r.prototype._doDispose.call(this)},_dp(s,"inputFocusable",{get:function(){return this._inputFocusable},set:function(t){this._inputFocusable!==t&&(this._inputFocusable=t)}}),_dp(s,"type",{get:function(){return this._impl&&this._impl.type}}),s.prototype._doInitContent=function(t){this._impl&&this._impl.initContent&&this._impl.initContent.call(this,t)},s.prototype._doClearContent=function(t){this._impl&&this._impl.clearContent&&this._impl.clearContent.call(this,t)},s.prototype._doRenderCell=function(t,e,i,o,n){var r={};r.focused=i.focused,this._impl&&this._impl.render&&this._impl.render.call(this,t.handler,e,o,n,r)},s.prototype.preventDefaultEditClick=function(t){return(this._impl&&this._impl.preventEditClick?this._impl.preventEditClick:r.prototype.preventDefaultEditClick).call(this,t)},s.prototype._doEditClick=function(t,e,i){return(this._impl&&this._impl.editClick?this._impl.editClick:r.prototype._doEditClick).call(this,t,e,i)},s.prototype.preventDefaultClick=function(t){return(this._impl&&this._impl.preventClick?this._impl.preventClick:r.prototype.preventDefaultClick).call(this,t)},s.prototype._doClick=function(t,e){return this._impl&&this._impl.click?this._impl.click.call(this,e):r.prototype._doClick.call(this,t,e)},s.prototype._doEditKey=function(t,e,i){return this._impl&&this._impl.editKey?this._impl.editKey.call(this,e,i):r.prototype._doEditKey.call(this,t,e,i)},s.prototype.canClick=function(t){return(this._impl&&this._impl.canClick?this._impl:r.prototype).canClick.call(this,t)},s.prototype.canEdit=function(){return(this._impl&&this._impl.canEdit?this._impl:r.prototype).canEdit.call(this)},s.prototype.canEditKey=function(t){return(this._impl&&this._impl.canEditKey?this._impl:r.prototype).canEditKey.call(this,t)};var r,o=s;function s(t,e){var i=r.call(this)||this;return i._inputFocusable=!1,t&&"function"==typeof t.render?(i._impl=t,i._impl.type=e,i.assignFrom(i._impl)):i._impl=null,i._itemClickable=!0,i}e.CustomCellRendererImpl=o})),Ge=(t(Ue),Ue.CustomCellRenderer,Ue.CustomCellRendererImpl,e(function(t,e){Object.defineProperty(e,"__esModule",{value:!0});r=I.EditCommand,ne.__extends(i,r),i.prototype.undo=function(){this._row.setData(this._field,this._oldValue),this.$_focusCell()},i.prototype.redo=function(){this._row.setData(this._field,this._value),this.$_focusCell()},i.prototype.$_focusCell=function(){var t=this._column.grid,e=t.focusedIndex.clone();e.layout=this._column.layout,t.setFocusedIndex(e),t.makeCellVisible(e)};var r,n=i;function i(t,e,i,o){var n=r.call(this)||this;return n._row=t,n._field=e,n._value=i,n._column=o,n._oldValue=re.Utils.deepCopy(t.getData(e)),n}e.EditValueCommand=n;o=se.Base,ne.__extends(a,o),a.prototype._doDispose=function(){this._grid=null,this._editIndex&&this._editIndex.dispose(),this._editIndex=null,this._editor&&this._editor.dispose(),this._editor=null,this._defaultEditor&&this._defaultEditor.dispose(),this._defaultEditor=null,this._editors=null,o.prototype._doDispose.call(this)},_dp(a,"readOnly",{get:function(){return this._readOnly}}),_dp(a,"editable",{get:function(){return this._editable}}),a.prototype.onEditorStart=function(t){if(!t.visible&&!this._commiting&&!this._canceling)return this._activateEditor(!1,!1)},a.prototype.onEditorKeyDown=function(t,e){var i=e.ctrlKey;return this._editor&&(this._editor.textReadOnly||i||e.altKey||!this._isEditKey(e.keyCode)?this._editor.textReadOnly?this._editor._editor.readOnly=this._editor.textReadOnly:229==e.keyCode&&this._editor.setReadOnly(this._readOnly):this._editor.setReadOnly(this._readOnly)),this._grid.activeTool.keyDown(e)},a.prototype.onEditorKeyPress=function(t,e){return this._grid.activeTool.keyPress(e)},a.prototype.onEditorKeyUp=function(t,e){return this._grid.activeTool.keyUp(e)},a.prototype.onEditorChange=function(t){var e;this._modified||(this._modified=!0,this._grid._editorStarted(t,this._editIndex)),this.editing&&(this._grid.makeCellVisible(this._editIndex),e=(e=t.getEditValue(!1,!1))===L.CellEditor.Unselected?t.getEditText():e,this._grid._editorChange(t,this._editIndex,e))},a.prototype.onEditorSearch=function(t,e){this._grid._editorSearch(this._editor,this._editIndex,e)},a.prototype.onSearchCellButtonClick=function(t,e){return this._grid._searchCellButtonClick(this._editor,this._editIndex,e)},a.prototype.onEditorCommit=function(t){return this.commitEditor(!0)},_dp(a,"editIndex",{get:function(){return this._editIndex.clone()}}),_dp(a,"editing",{get:function(){return this._editor&&this._editor.editing}}),_dp(a,"editValue",{get:function(){return this._editor&&this._editor.value}}),a.prototype.setFocus=function(t,e){if(e&&(!this._editor||e!==this._editor.editor)){var i=re.getWin(e),o=this._grid,n=void 0,r=null==(r=this._editor)?void 0:r.editor;if((e instanceof i.HTMLInputElement||e instanceof i.HTMLSelectElement)&&(n=o.getTableCell(e))){var i=o.getCellType(n),s=o.getTableView(n),s=s&&s.tableCellByCell&&s.tableCellByCell(n);if("data"===i){var a=this._grid.focusedIndex.clone(),a=this._grid.getBodyCellAt(a,!0),a=a&&a.renderer2;if((a instanceof Wt.TemplateCellRenderer||a instanceof Ue.CustomCellRendererImpl)&&a.inputFocusable)return;r&&(r.tabIndex=-1)}else if("inlineFilter"===i){if(o.isItemEditing()&&o.filterPanel.beforeCommit&&o.commit(!1),!o.isEditing())return r&&(r.tabIndex=0),void o.makeColumnVisible(s.layout&&s.layout.firstColumn)}else if(re.Utils.included(i,"header","layoutHeader","footer","summary")&&!s.isClickableElt(e)&&re.Utils.isFocusableTemplate(n,e))return}}this.$_focusToEditor(t,e)},a.prototype.resetEditor=function(t){if(this.editing){if(this._grid.isValid(this._editIndex)){if(this._resetBounds(),t&&this.editing){t=this.getData(this._editIndex);this._resetting=!0;try{this._editor.setEditValue(t),this._editor.beginEdit(!1,!0)}finally{this._resetting=!1}}}else this.hideEditor();return!0}},a.prototype.reprepareEditor=function(t){_t.CellIndex.areEquals(t,this._editIndex)&&(this.editing?this._editor.selectAll():(this._needPrepare=!0,this._prepareEditor(t)))},a.prototype.invalidateEditor=function(){this._dirty=!0},a.prototype.closeList=function(t){this._editor&&this._editor.closeList(t)},a.prototype.focusedIndexChanging=function(){return!this.editing||(this.closeList(!0),this.commitEditor(!0))},a.prototype.focusedIndexChanged=function(t,e,i){this._hideEditor(),this._grid.isValid(e)&&(i?this._prepareEditor(e):this._needPrepare=!0)},a.prototype.prepareEditor=function(t){this._needPrepare&&(this._needPrepare=!1,this._grid.isValid(t))&&this._prepareEditor(t)},a.prototype.requestPrepareEditor=function(){this._needPrepare=!0},a.prototype.dataColumnChanged=function(t){t&&this._editor&&this._editIndex&&this._editIndex.dataColumn===t&&(t=!t.isWritable()||t.readOnly)!=(!this._editable||this._readOnly)&&(this.editing?this._editor.setReadOnly(t):this._prepareEditor(this._editIndex))},a.prototype.showEditor=function(t,e){var i=this._grid;if(i&&i.isValid(t)&&t.item.canEdit())return this._editor&&this._editor.editing?(i.makeCellVisible(t),!0):this._editor&&!this._editor.editing&&(this._showEditorTimer||this._prepareEditor(t),i.makeCellVisible(t),this._activateEditor(!1,!0,e))?(i.editorLender&&i.editorLender.editorShow(t),!0):void 0},a.prototype.showList=function(t){var e=this._grid,i=this._editor;if(i&&i.editing&&(e.makeCellVisible(t),this.cancelEditor(!0)),e&&e.isValid(t)&&(this._prepareEditor(t),e.makeCellVisible(t),i)&&this._editable&&!i.editing)return i.dropDownList(!0),!0},a.prototype.caretToLast=function(){this._editor&&this._editor.caretToLast()},a.prototype.hideEditor=function(){if(this.editing){this._modified=!1,this._resetting=!0;try{this._internalHideEditor(this._editor),this._prepareEditor(this._editIndex)}finally{this._resetting=!1}}},a.prototype.commitEditor=function(t,e,i){if(void 0===e&&(e=!1),void 0===i&&(i=!0),!this.editing||this._commiting)return!0;var o=this._editor;if(!o)return!1;var n,r,s=this._grid,a=s.editOptions,l=this._editIndex,h=l.dataColumn,d=!0,u=o._mask;this._commiting=!0;try{if(o.commit(),(this._modified||o.isEdited())&&h&&0<=h.dataIndex)try{try{(r=u&&!u.checkValid()?L.CellEditor.InvalidFormat:o.getEditValue(!0,!0))===L.CellEditor.InvalidFormat?(d=!1,a.showInvalidFormatMessage&&u&&u.showInvalidFormatMessage&&alert(u&&u.invalidFormatMessage||a.invalidFormatMessage)):d=r===L.CellEditor.Unselected?!(this._modified=!1):(c={text:o.getEditText(),value:r},this._grid.getEditValue(o,l,c),r=c.value,this._grid.editorCommit(l,this._getData(l),r))}catch(t){d=!1}this._grid.isItemEditing()?d&&r!==L.CellEditor.Unselected&&(this._setData(l,r),this._grid.isItemEditing(l.item)&&(r=this._getData(l),this._grid.validateCellCommit(l,r)),this._modified=!1):this._modified=!1}catch(t){n=t,d=!1}if(this._resetting=!0,t)try{this._internalHideEditor(o),this._prepareEditor(l,i),o.isEdited()||this._grid.activeTool.resetFocused()}finally{this._resetting=!1}if(n){if(e)throw n;a.showCommitError&&alert(n.message||n)}}finally{this._commiting=!1}if(d&&s.isCellEditing()){var u=s.itemSource,c=u.editingItem.invalidFields,t=s.validationManager.getError(l);if(t)return c.push(h.dataIndex),a.showCommitError&&alert(t.userMessage||t.message||t),!1;if(0<=c.indexOf(h.dataIndex)&&c.splice(c.indexOf(h.dataIndex),1),s.validationManager.clearInvalidCell(l),0<c.length)return!0;i=s.canMergeEditing(s.getBodyCellAt(l,!0));if(!u.commit(i))return u.cancel(),!0;s.validationManager.cloneError(-1,l.dataId);var _=_t.CellIndex.temp(s,l.itemIndex,h);if(i){var p=h.layout.merges.getRoom(l),f={},g={};g[h.fieldName]=r;for(var m=p.head;m<=p.tail;m++){var y=s.getItem(m);_.itemIndex=y.index,y.isDataRow&&(f[y.dataRow]=g),s.validationManager.clearInvalidCell(_)}u.updateRows2(f)}}return d},a.prototype.cancelEditor=function(t){if(this.editing){this._canceling=!0;try{try{this._modified=!1,this._grid.editorCancel(this._editor,this._editIndex)}catch(t){throw t}this._resetting=!0;try{this._internalHideEditor(this._editor),this._prepareEditor(this._editIndex)}finally{this._resetting=!1}}finally{this._canceling=!1,this._grid.editorCanceled()}var e;this._grid.editOptions.commitByCell&&(e=this._grid.itemSource).isUpdating&&e.cancel()}},a.prototype.fillSearchItems=function(t,e,i,o){this.editing&&this._editIndex.column===t&&this._editor instanceof de.SearchCellEditor&&this._editor.fillItems(e,i,o)},a.prototype.buttonClicked=function(t,e){var i=this._editor,o=this._grid,n=o.getBodyCellAt(t,!1),r=t.layout.getDataColumn();i&&_t.CellIndex.areEquals(this._editIndex,t)&&i.hasButton(o.displayOptions.showNativeEditButton,n.editor||r.editor)&&i.buttonClicked(this._editIndex,e)},a.prototype.buttonDown=function(t,e){this._editor&&this._editor.buttonDown(t,e)},a.prototype.buttonUp=function(t,e){this._editor&&this._editor.buttonUp(t,e)},a.prototype.getData=function(t){return this._getData(t)},a.prototype.setEditValue=function(t,e){this._editor&&this._editor.setCellEditValue(t,e)},a.prototype.currentEditor=function(){return this._editor},a.prototype._internalHideEditor=function(t){this.closeList(!1),t.setVisible(!1,!1),t.endEdit(),this._grid._loading||this._grid._fireHideEditor(t.editIndex),this._grid.editorLender&&this._grid.editorLender.editorHide(this._editIndex)},a.prototype.$_hideEdit=function(t,e){e&&(e.setEditIndex(t),e.setVisible(!1),this.$_focusToEditor())},a.prototype.$_getCellEditor=function(t){var e,i=this._grid,t=((e=i.editorLender?i.editorLender.getEditor(t):(e=i.getBodyCellAt(t))&&e.editor)||(t=t.valueColumn)&&(e=t.editor),i.delegate.getCellEditor(L.CellEditor.getEditorType(e)));return t&&(t.initOptions(),e&&t.applyOptions(e),t.setController(this)),t},a.prototype.resetEditable=function(t){var e,i,o,n,r=this._editor;return!!r&&(n=this._grid,r.setReadOnly(!1),n.editorLender?(this._editor.setEditIndex(t),this._editable=!0):(r=n.editorOptions,e=t.valueColumn,i=t.item,o=n.canEditAt(t),r._titleExprStatement&&this._editor.setEditorTitle(t),o?((r=!n.canWriteAt(t))||(r=!(n=(o=i.dataSource)?o.getField(t.dataField):null)||n.dataType==ht.ValueType.OBJECT&&null==(e.objectKey||n.objectKey)),this._readOnly=r,this._editor.setReadOnly(this._readOnly),this._editor.setEditIndex(t),this._editable=!0):(this._editable=!1,this.$_hideEdit(t,this._editor),!1)))},a.prototype._prepareEditor=function(t,e){void 0===e&&(e=!0);var i,o=this._grid,n=o.editOptions;(o.active||o.editorLender)&&(this._dirty=!1,this._grid.isValid(t))&&t.item.canEdit()&&(this._hideEditor(e),this._editor=this.$_getCellEditor(t),this._editor)&&(this._editIndex.assign(t),i=this._getData(t),this.resetEditable(t)?(this._editor.prepare(),this._editor.setEditValue(i),this._editor.selectAll(),n.editWhenFocused&&!this._editor.editing?(this._showEditorTimer&&clearTimeout(this._showEditorTimer),this._canceling||this._resetting||(this._showEditorTimer=setTimeout(function(){this._editor.editing||o.showEditor(null,!1,this._editor.dropDownWhenClick),this._showEditorTimer=null}.bind(this),100))):this._editor.setVisible(!1),e&&this.$_focusToEditor()):this._editor&&(this._editor.editor.value=this._editor._valToStr(i)))},a.prototype._hideEditor=function(t){if(void 0===t&&(t=!0),this._editor)try{this._editor.setVisible(!1)}finally{this._editor.unprepare(),this._editor.endEdit(),this._editor=null,this._editable=!1,t&&this.$_focusToEditor()}},a.prototype._initEditor=function(t,e,i){this._dirty&&(this._dirty=!1,this._starting||this._prepareEditor(this._editIndex));var o=this._editor;o&&(o.endEdit(),this._resetBounds(),o.setVisible(!0,!0),o.beginEdit(t,e),t&&o.clear(),e&&o.selectAll(),i&&o.dropDownList(!1),this.$_focusToEditor(!0))},a.prototype.$_setEditorAttrs=function(t){var e=this._editor;if(e){for(var i in t)"callback"!=i&&e._editor.setAttribute(i,t[i]);"function"==typeof t.callback&&t.callback()}},a.prototype._editorActivated=function(t){this._grid.editorActivated(t)},a.prototype._activateEditor=function(t,e,i){void 0===i&&(i=!1);var o=this._grid,n=this._editor,r=this._editIndex,s={},a={};return!(!this._editable||!n||n.editing||!o.$_canShowEditor(r,s,a)||(s.type&&(n=this._editor=o.delegate.getCellEditor(L.CellEditor.getEditorType(s.type))||n),re.Utils.isEmpty(s)||(n.applyOptions(s),n.setEditIndex(r)),o=n._editor,n.textReadOnly?n.textReadOnly&&o&&(o.readOnly=n.textReadOnly):n.setReadOnly(this._readOnly),this._initEditor(t,e,i),re.getDoc(o).activeElement===o||re.Utils.isMobile()&&n.hasList||o.focus(),this._modified=!1,this._editorActivated(this._editor),this.$_setEditorAttrs(a),0))},a.prototype._resetBounds=function(){var t,e;this._editor&&(t=this._grid.getEditCellBounds(this._editor,this._editIndex),e=this._grid.getEditBounds(this._editor,this._editIndex).width,t.x--,t.y--,t.width++,t.height++,re.Utils.isMobile()&&(--t.y,t.height+=2),this._editor.setBounds(t.x,t.y,t.width,t.height,e),t=this._grid.getEditCellBounds(this._editor,this._editIndex),this._editor.setCellBounds(t.x,t.y,t.width,t.height),t.x<0)&&(this._resetFocused=!0)},a.prototype.$_focusToEditor=function(t,e){var i=this._grid;(t||i.$_editFocused)&&(t=this._editor||this._defaultEditor,i.$_showFocusCell=i.$_showFocusCell||e&&t&&e!==t._editor,i.container._setFocusAndScroll(t),this.editing||this._editor&&this._editor.selectAll())},a.prototype.$_focusToContainer=function(){},a.prototype._getData=function(t){var e=t.dataColumn,t=t.item;if(e&&t&&t.isDataRow){e=e.dataIndex;if(0<=e)return t.getData(e)}},a.prototype._setData=function(t,e){var i,o=t.item;o&&0<=(i=t.dataColumn.dataIndex)&&(this._grid.undoable?this._grid.execute(new n(t.item,i,e,t.column)):o.setData(i,e))},a.prototype._isEditKey=function(t){return 8==t||46<=t&&t<=90||96<=t&&t<=111||186<=t&&t<=222||13==t&&this._grid.editOptions.enterToEdit};var o,s=a;function a(t){var e=o.call(this)||this;return e._editIndex=new _t.CellIndex,e._editors=[],e._starting=!1,e._editRow=-1,e._needPrepare=!1,e._modified=!1,e._commiting=!1,e._canceling=!1,e._resetting=!1,e._dirty=!1,e._editable=!1,e._readOnly=!1,e.$_editFocused=!1,e._resetFocused=!1,e._grid=t,e._defaultEditor=t.delegate.getDefaultCellEditor(),e._defaultEditor&&e._defaultEditor.setController(e),e._defaultEditor&&e._internalHideEditor(e._defaultEditor),e}e.DefaultEditController=s})),We=(t(Ge),Ge.EditValueCommand,Ge.DefaultEditController,e(function(t,e){Object.defineProperty(e,"__esModule",{value:!0});o=me.VisualObjectElement,ne.__extends(n,o),n.prototype._doDispose=function(){o.prototype._doDispose.call(this)},n.prototype.getCellIndex=function(t){return t.parentElement[ht.T_ROW]},n.prototype._createDom=function(){return null},n.prototype._prepareContent=function(t,e){var i=re.getDoc(t).createElement("div");return this._prepareCellContent(i,t),i},n.prototype._clearCellContent=function(t){t=t.firstElementChild;t&&re.Utils.detach(t)},n.prototype._prepareCellContent=function(t,e){},n.prototype._updateCellContent=function(t,e,i,o){i[this._textProp]=e.text},n.prototype._doRender=function(t){},n.prototype.$_setCol=function(t){(this._colChanged=t!=this._col)&&(this._col=t)},n.prototype._layoutCell=function(t,e,i){var o;this._colChanged&&(i.removeAttribute("rowspan"),i.style.removeProperty("display"),o=i.firstElementChild,this._clearCellContent(o),this._prepareCellContent(o,i))},n.prototype._getTableCell=function(t){return this.parent._tbody.children[t].children[this._col]},n.prototype.$_getCellSelector=function(t,e){var i=this.model.cellStyleCallback,o=this.grid,n=t.parentElement[ht.T_ROW],n=o.getItem(n),o=o.getCellType(t);return i&&(t=i(this.grid.handler,o,null==n?void 0:n.index))?" "+t:""};var o,i=n;function n(t,e,i){t=o.call(this,t,e,i)||this;return t._col=-1,t._colChanged=!1,t}e.RowBarElement=i})),je=(t(We),We.RowBarElement,e(function(t,e){Object.defineProperty(e,"__esModule",{value:!0});a=We.RowBarElement,ne.__extends(o,a),o.prototype._doDispose=function(){a.prototype._doDispose.call(this)},o.prototype.refresh=function(t,e){for(var i=0;i<e;i++){var o=this._getTableCell(i);o[ht.T_FOC]=t.isFocusedRow(o.parentElement[ht.T_ROW]),re.Utils.setClassName(o,this.$_getCellSelector(o))}},o.prototype._getCssSelector=function(){return"rg-rowindicator"},o.prototype.measureWidth=function(t){var e,i=this.model,o=i.width;return 0==o&&t.dataSource&&(e=t.dataSource.rowCount+"",o=t.container.measureText("rg-rowindicator-cell",e)+1),o=Math.max(0<i.minWidth?i.minWidth:o,Math.min(0<i.maxWidth?i.maxWidth:o)),i._displayWidth=o},o.prototype._layoutCell=function(t,e,i){a.prototype._layoutCell.call(this,t,e,i),e&&(e=this.model.getCell(e),re.Utils.setClassName(i,this.$_getCellSelector(i)),this._updateCellContent(t,e,i.firstElementChild,i))},o.prototype.$_getCellSelector=function(t,e){var i=this.grid,o=t.parentElement[ht.T_ROW],n=t[ht.T_FOC],r=this.model,s="rg-rowindicator-cell";return-99===o?pe.FixedOptions.ROW_BAR_CELL_STYLE:(n?(s+=r.showFocus?" rg-rowindicator-focus":"",n=i.getItem(o),re.Utils.isDebugging(),n=n&&n.itemState,rt.ItemState_isInserting(n)?s+=" rg-rowindicator-inserting":n==rt.ItemState.UPDATING&&(s+=" rg-rowindicator-editing")):i.isSelectedItem(o)&&r.showSelection&&(s+=" rg-rowindicator-select"),s+a.prototype.$_getCellSelector.call(this,t,e))};var a,i=o;function o(t,e){return a.call(this,t,e,"rowIndicatorView")||this}e.RowIndicatorElement=i})),ze=(t(je),je.RowIndicatorElement,e(function(t,e){Object.defineProperty(e,"__esModule",{value:!0});s=We.RowBarElement,ne.__extends(o,s),o.prototype.rowOf=function(t){return t.parentElement[ht.T_ROW]},o.prototype._getCssSelector=function(){return"rg-statebar"},o.prototype.measureWidth=function(t){return t.stateBar.width},o.prototype._layoutCell=function(t,e,i){var o,n,r;s.prototype._layoutCell.call(this,t,e,i),e&&(n=(r=(o=this.model).mark)==oe.StateMark.IMAGE,this._textMark=r==oe.StateMark.TEXT,r=o.getCell(e),re.Utils.setClassName(i,this.$_getCellSelector(i,n)),this._updateCellContent(t,r,i.firstElementChild,i))},o.prototype._updateCellContent=function(t,e,i,o){i[re.Utils.TextProp]=this._textMark&&e.text||""},o.prototype.$_getCellSelector=function(t,e){var i=this.grid,o=i.getItem(t.parentElement[ht.T_ROW]),n=o.dataRow,r="rg-statebar-cell ";if(i.isItemEditing(o)&&this._error&&this.model.errorVisible)switch(this._error.level){case ht.ValidationLevel.INFO:r+=" rg-statebar-info";break;case ht.ValidationLevel.WARNING:r+=" rg-statebar-warning";break;case ht.ValidationLevel.ERROR:r+=" rg-statebar-error"}else if(0<=n&&e)switch(o.rowState){case b.RowState.UPDATED:r+=" rg-statebar-updated";break;case b.RowState.CREATED:r+=" rg-statebar-created";break;case b.RowState.DELETED:r+=" rg-statebar-deleted";break;case b.RowState.CREATE_AND_DELETED:r+=" rg-statebar-create-and-deleted"}return r+=s.prototype.$_getCellSelector.call(this,t,e)};var s,i=o;function o(t,e){t=s.call(this,t,e,"stateBarView")||this;return t._textMark=!1,t}e.StateBarElement=i})),Ye=(t(ze),ze.StateBarElement,e(function(t,e){Object.defineProperty(e,"__esModule",{value:!0});s=We.RowBarElement,ne.__extends(a,s),a.prototype.rowOf=function(t){return t.parentElement[ht.T_ROW]},a.prototype._getCssSelector=function(){return"rg-checkbar"},a.prototype._doPrepareContent=function(t){t=t.grid.checkBar;(this._typeChanged=t.exclusive!==this._exclusive)&&(this._exclusive=t.exclusive),(this._imageChanged=t.useImages!==this._useImage)&&(this._useImage=t.useImages)},a.prototype._clearCellContent=function(t){t[this._textProp]="",s.prototype._clearCellContent.call(this,t)},a.prototype._prepareCellContent=function(t,e){var i=re.getDoc(t),e=a.FOR_ID+this.rowOf(e)+"-"+this.model.$_hash,o=i.createElement("input"),n=o.style,o=(o.type=this._exclusive?"radio":"checkbox",o.id=e,o.tabIndex=-1,o.className=this._exclusive?"rg-radio":"rg-checkbox",n.display=this._useImage?"none":"inline-block",t.appendChild(o),i.createElement("span")),o=((n=o.style).display=this._useImage?"inline-block":"none",t.appendChild(o),i.createElement("label"));o.setAttribute("for",e),(n=o.style).display="none",t.appendChild(o)},a.prototype.measureWidth=function(t){return this.model.width},a.prototype._layoutCell=function(t,e,i){s.prototype._layoutCell.call(this,t,e,i);var o=e&&this.model.getCell(e),n=(re.Utils.setClassName(i,this.$_getCellSelector(i)),i.style.display="",i.removeAttribute("rowspan"),t.fixedOptions.rowCount),r=t.checkBar;r._merged&&e&&(r=r._merges,e=(e=e.itemIndex)<n?e:e-t.layoutManager.topIndex,r.isMerged(e,n)?r.isHidden(e,n)?(i.style.display="none",i.removeAttribute("rowspan")):(r=r.getMerged(e,n),i.rowSpan=r):i.removeAttribute("rowspan")),o&&this._updateCellContent(t,o,i.firstElementChild.firstElementChild,i)},a.prototype._updateCellContent=function(t,e,i,o){var e=e.item,t=t.checkBar,n=a.FOR_ID+this.rowOf(o)+"-"+this.model.$_hash;i.checked=e&&e.checked,i.disabled=e&&!e.checkable,i.id=n;o.firstElementChild.style.display=e instanceof rt.GridRow||e instanceof E.TreeItem||t.showGroup&&t.fieldIndex<0&&!t.merged?"":"none";var t=this._useImage,r=(this._typeChanged&&(i.setAttribute("type",this._exclusive?"radio":"checkbox"),i.className=this._exclusive?"rg-radio":"rg-checkbox"),i.nextElementSibling),i=(this._imageChanged&&r&&(i.style.display=t?"none":"inline-block",r.style.display=t?"inline-block":"none"),t&&r&&(t=i.checked?this._exclusive?"rg-checkbar-radio-checked":"rg-checkbar-checked":this._exclusive?"rg-checkbar-radio-unchecked":"rg-checkbar-unchecked",t+=i.disabled?" disabled":"",r.className=t),r.nextElementSibling);i.removeAttribute("for"),i.setAttribute("for",n),i[re.Utils.TextProp]=this.rowOf(o)+1+" row "+(e&&e.checkable?e.checked?"checked":"unchecked":"check disable")},a.prototype.getCheckBox=function(t){return t.firstElementChild.firstElementChild},a.prototype.$_getCellSelector=function(t,e){var i=a.CELL_CSS,o=t.parentElement[ht.T_ROW],o=this.grid.getItem(o);return(i+=o&&o.checkable?"":" rg-checkbar-disabled")+s.prototype.$_getCellSelector.call(this,t,e)},a.prototype.$_setPrevChecked=function(t){this._prevChecked=t},a.FOR_ID="$$-check-bar-cell",a.CELL_CSS="rg-checkbar-cell";var s,i=a;function a(t,e){t=s.call(this,t,e,"checkBarView")||this;return t._fixedCount=0,t._prevChecked=-1,t._exclusive=!1,t._typeChanged=!1,t._useImage=!1,t._imageChanged=!1,t}e.CheckBarElement=i})),qe=(t(Ye),Ye.CheckBarElement,e(function(t,e){Object.defineProperty(e,"__esModule",{value:!0});o=ye.DataTableElement,ne.__extends(n,o),n.prototype._doDispose=function(){this._bars=this._views=null,o.prototype._doDispose.call(this)},_dp(n,"rowIndicator",{get:function(){return this._indicatorView}}),_dp(n,"stateBar",{get:function(){return this._stateView}}),_dp(n,"checkBar",{get:function(){return this._checkView}}),_dp(n,"stateError",{get:function(){return this._stateView._error},set:function(t){this._stateView._error=t}}),n.prototype.isVisible=function(){return this._indicatorView.visible||this._stateView.visible||this._checkView.visible},n.prototype.getCellIndex=function(t){return t.parentElement[ht.T_ROW]},n.prototype.refresh=function(t){this._indicatorView.visible&&this._indicatorView.refresh(t,this._count)},n.prototype.rowOf=function(t){return t.parentElement[ht.T_ROW]},n.prototype.getCheckBox=function(t){return this._checkView.getCheckBox(t)},n.prototype.getCellType=function(t){t=this._views[t.cellIndex];return t instanceof je.RowIndicatorElement?"indicator":t instanceof ze.StateBarElement?"state":t instanceof Ye.CheckBarElement?"check":void 0},n.prototype.isRowIndicator=function(t){return this._views[t.cellIndex]instanceof je.RowIndicatorElement},n.prototype._getCssSelector=function(){return"rg-rowbarcontainer"},n.prototype._isFixedHeight=function(){return!0},n.prototype._doPrepareContent=function(t){if(this._views.length){this._dom.appendChild(this._table);for(var e=0,i=this._views;e<i.length;e++)i[e]._doPrepareContent(t)}else re.Utils.detach(this._table);o.prototype._doPrepareContent.call(this,t)},n.prototype._prepareCellContent=function(t,e){return this._views[e]._prepareContent(t,e)},n.prototype._getTableRowHeight=function(t,e){var i=t.fixedItemCount;return 0<i&&i<e?t.getTableItemHeight(e-1):t.getTableItemHeight(e)},n.prototype._doMeasure=function(t,e,i){this.$_prepareBars(t);for(var o=0,n=0,r=this._views;n<r.length;n++){var s=r[n];o+=s.width=s.measureWidth(t)}return new ge.Size(o,i)},n.prototype._doLayoutContent=function(t){for(var e=t.grid,i=t.topIndex,o=t.itemCount,n=t.fixedItemCount,r=this._count=n+o,s=this._bars.length,a=e.focusedRow,l=this._views,o=this._thead,h=o&&o.children[0],d=e.displayOptions.useAlternateRowStyle,u=0;u<r;u++){var c=u<n?u:u+i,_=_t.CellIndex.temp(e,c),p=this._getTableRow(t,u);re.Utils.setClassName(p,this.getStyleName(_.item,_.itemIndex%2&&d)),p[ht.T_ROW]=c;for(var f=0;f<s;f++){var g,m=p.cells[f];m[ht.T_FOC]=c==a,l[f]._layoutCell(e,_,m),0===u&&h&&(g=h.cells[f])&&(g[re.Utils.TextProp]=this.getCellType(m)+" column")}}0<n&&this._layoutFixedBar(e.fixedOptions,n)},n.prototype._doUpdateCellContent=function(t,e,i){i[this._textProp]=e.text},n.prototype._doRender=function(t){},n.prototype._getCellCount=function(t){return this._bars.length},n.prototype._getCellWidth=function(t,e){return this._views[e].width},n.prototype.$_prepareBars=function(t){var e=this._bars=[],i=this._views=[];t.rowIndicator.visible&&e.push(t.rowIndicator),t.stateBar.visible&&e.push(t.stateBar),t.checkBar.visible&&e.push(t.checkBar),1<e.length&&e.sort(function(t,e){var i=t.displayOrder,o=e.displayOrder;return i==o?t.staticOrder-e.staticOrder:i-o});for(var o=0,n=e.length;o<n;o++){var r=e[o],s=void 0;(s=r instanceof oe.RowIndicator?this._indicatorView:r instanceof ae.StateBar?this._stateView:this._checkView).$_setCol(o),s._colChanged=s._colChanged||r.visChanged,i.push(s),r.visChanged=!1}this._indicatorView.visible=0<=i.indexOf(this._indicatorView),this._stateView.visible=0<=i.indexOf(this._stateView),this._checkView.visible=0<=i.indexOf(this._checkView)},n.prototype._layoutFixedBar=function(t,e){var i=this._tbody.children[e];i[ht.T_IDX]=e,i[ht.T_ROW]=-99,re.Utils.setClassName(i,pe.FixedOptions.ROW_BAR_STYLE);for(var o=0;o<i.childElementCount;o++){var n=i.children[o],r=(n[ht.T_FOC]=!1,this._views[o]);r._colChanged&&r._layoutCell(this.grid,null,n),re.Utils.setClassName(n,pe.FixedOptions.ROW_BAR_CELL_STYLE)}},n.prototype.getStyleName=function(t,e){var i=n.ROW_STYLE;return(i=(i+=ce.GridBody.STATE_ROW_STYLES[t.rowState]||"")+(e?n.ALTERNATE_ROW_STYLE:"")).trim()},n.ROW_STYLE="rg-row-bar",n.ALTERNATE_ROW_STYLE=" rg-alternate-row-bar";var o,i=n;function n(t){var e=o.call(this,t.doc,null,"rowBarContainer")||this,i=(e._count=0,t.doc);return e._bars=[t.rowIndicator,t.stateBar,t.checkBar],e.addChild(e._indicatorView=new je.RowIndicatorElement(i,t.rowIndicator)),e.addChild(e._stateView=new ze.StateBarElement(i,t.stateBar)),e.addChild(e._checkView=new Ye.CheckBarElement(i,t.checkBar)),e._views=[e._indicatorView,e._stateView,e._checkView],e}e.RowBarContainer=i})),Xe=(t(qe),qe.RowBarContainer,e(function(t,e){Object.defineProperty(e,"__esModule",{value:!0});o=pt.VisualElement,ne.__extends(n,o),n.prototype._doDispose=function(){this._owner=null,o.prototype._doDispose.call(this)},_dp(n,"selectionMask",{get:function(){return this._owner}}),_dp(n,"dir",{get:function(){return this._dir}}),n.prototype._getCssSelector=function(){return n.STYLE_NAME+this._dir+"-handle"},n.prototype._initDom=function(t){o.prototype._initDom.call(this,t),t.style.background="red"},n.prototype._doDraw=function(){},n.STYLE_NAME="rg-selection-handle";var o,i=n;function n(t,e){var i=o.call(this,t.doc,"mobileSelectionHandle")||this;return i._dir=e,i._owner=t,i}e.MobileSelectionHandle=i;r=W.SelectionLayer,ne.__extends(a,r),a.prototype._doDispose=function(){},a.prototype.getSelectHandle=function(t){for(var e in this._views){e=this._views[e];if(e.leftHandle._dom===t)return e.leftHandle;if(e.topHandle._dom===t)return e.topHandle;if(e.bottomHandle._dom===t)return e.bottomHandle;if(e.rightHandle._dom===t)return e.rightHandle}},a.prototype.addView=function(t){var e=t.$_hash,i=this._views[e];return i||(i=this._pool.pop()||new h(this.doc),this._views[e]=i),i._item=t,this.addChild(i),this.addChild(i.leftHandle),this.addChild(i.topHandle),this.addChild(i.bottomHandle),this.addChild(i.rightHandle),i},a.prototype.clearViews=function(){for(var t in this._views){t=this._views[t];this.removeChild(t.leftHandle),this.removeChild(t.topHandle),this.removeChild(t.bottomHandle),this.removeChild(t.rightHandle),this.removeChild(t),this._pool.push(t)}this._views={}},a.prototype.layout=function(){var t,e=this._grid.layoutManager,i=(this._grid.selections,new nt.Rectangle);for(t in this._views){var o=this._views[t],n=o.item,r=!1,s=new nt.Rectangle;o.prepare(),(r=n instanceof W.RowSelection||n instanceof W.ColumnSelection?r:this.$_getMobileSelectionRangeRect(e,n,o,s,i))&&(n=e.footerBounds.y+e.contentBounds.y,s.bottom>n)&&(o._bottomed=!0,s.bottom=n),o.visible=r,o.visible&&(o.setRectI(s),o.updateElement(),this._layoutHandle(o,s,i),o.invalidate(!1,!0))}},a.prototype._layoutHandle=function(t,e,i){var o,n;t._lefted?t.leftHandle.visible=!1:(t.leftHandle.visible=!0,o=i.x-6.5,n=e.y+(e.height-13)/2,t.leftHandle.setBounds(o,n,13,13)),o=i.x+(i.width-13)/2,n=e.y-6.5,!t._toped&&o>=e.x?(t.topHandle.visible=!0,t.topHandle.setBounds(o,n,13,13)):t.topHandle.visible=!1,n=e.bottom-6.5,!t._bottomed&&o>=e.x?(t.bottomHandle.visible=!0,t.bottomHandle.setBounds(o,n,13,13)):t.bottomHandle.visible=!1,t._righted?t.rightHandle.visible=!1:(t.rightHandle.visible=!0,o=i.right-6.5,n=e.y+(e.height-13)/2,t.rightHandle.setBounds(o,n,13,13))},a.prototype.$_getMobileSelectionRowsRect=function(t,e,i,o){return r.prototype.$_getSelectionRowsRect.call(this,t,e,i,o)},a.prototype.$_getMobileSelectionColumnsRect=function(t,e,i,o){return r.prototype.$_getSelectionColumnsRect.call(this,t,e,i,o)},a.prototype.$_getMobileSelectionRangeRect=function(t,e,i,o,n){return r.prototype.$_getSelectionRangeRect.call(this,t,e,i,o,n)};var r,s=a;function a(t,e){return r.call(this,t,e)||this}e.MobileSelectionLayer=s;l=W.SelectionMask,ne.__extends(d,l),d.prototype._doDispose=function(){this._leftHandle=this._leftHandle.dispose(),this._topHandle=this._topHandle.dispose(),this._bottomHandle=this._bottomHandle.dispose(),this._rightHandle=this._rightHandle.dispose(),l.prototype._doDispose.call(this)},_dp(d,"leftHandle",{get:function(){return this._leftHandle}}),_dp(d,"topHandle",{get:function(){return this._topHandle}}),_dp(d,"bottomHandle",{get:function(){return this._bottomHandle}}),_dp(d,"rightHandle",{get:function(){return this._rightHandle}}),d.prototype.prepare=function(){l.prototype.prepare.call(this)},d.prototype.updateElement=function(){l.prototype.updateElement.call(this)},d.prototype._initDom=function(t){l.prototype._initDom.call(this,t),this.setImportantStyle("overflow","hidden"),this.setImportantStyle("pointer-events","none")},d.prototype._visibleChanged=function(){this._leftHandle.visible=this._topHandle.visible=this._bottomHandle.visible=this._rightHandle.visible=this.visible};var l,h=d;function d(t){t=l.call(this,t)||this;return t._leftHandle=new i(t,"left"),t._topHandle=new i(t,"top"),t._bottomHandle=new i(t,"bottom"),t._rightHandle=new i(t,"right"),t}e.MobileSelectionMask=h})),R=(t(Xe),Xe.MobileSelectionHandle,Xe.MobileSelectionLayer,Xe.MobileSelectionMask,e(function(V,t){Object.defineProperty(t,"__esModule",{value:!0});r.getData=function(t){var e=new r;return e.cellType=t,e},r.getSub=function(t,e){var i=new r;return i.cellType=t,i.subType=e,i},r.getField=function(t,e,i){var o=new r;return o.cellType=t,o.field=o.fieldIndex=e,o.fieldName=i,o},r.getItem=function(t,e,i){var o=new r;return o.cellType=t,o.itemIndex=e,null!=i&&(o.dataRow=i),o},r.getLayout=function(t,e){var i=new r;return i.cellType=t,e instanceof ct.CellLayoutGroupItem?(i.subType="layoutHeader",i.column=e.name):(i.column=e.firstColumn&&e.firstColumn.name,e.firstColumn instanceof lt.DataColumn&&(i.field=i.fieldIndex=e.firstColumn.dataIndex,i.fieldName=e.firstColumn.fieldName)),i},r.getCell=function(t,e,i){var o=new r,n=("data"===t&&(o.editable=e.editable,o.readOnly=e.readonly),e.layout);return o.cellType=t,o.itemIndex=i?i.itemIndex:e.item.index,o.dataRow=(i||e.item).dataRow,o.column=e.layout.firstColumn&&e.layout.firstColumn.name,n.firstColumn instanceof lt.DataColumn&&(o.field=o.fieldIndex=n.firstColumn.dataIndex,o.fieldName=n.firstColumn.fieldName),o},r.getGroupFooter=function(t,e,i,o){var n=new r,i=i.firstColumn;return n.cellType=t,n.itemIndex=e,n.index=o,n.column=i&&i.name,i instanceof lt.DataColumn&&(n.field=n.fieldIndex=i.dataIndex,n.fieldName=i.fieldName),n},r.getSummary=function(t,e,i){var o=new r;return o.cellType=t,o.index=e,o.column=i.firstColumn&&i.firstColumn.name,i.firstColumn instanceof lt.DataColumn&&(o.field=o.fieldIndex=i.firstColumn.dataIndex,o.fieldName=i.firstColumn.fieldName),o},r.getGroupElt=function(t,e){var i=new r;return i.cellType=t,i.groupLevel=e,i};var f=r;function r(){}t.ClickData=f;s=pt.LayerElement,ne.__extends(e,s),_dp(e,"focusType",{get:function(){return this._focusType},set:function(t){t!==this._focusType&&(this._focusType=t,this.$_typeChanged(t))}}),e.prototype.$_createLine=function(t){function e(t,e,i){t=t.createElement("div"),t.className=e?"rg-focus-inner-line":"rg-focus-line",e=t.style;return e.display="none",e.position="absolute",e.boxSizing="border-box",e.left="0px",e.top="0px",1!==i&&(e.borderTop="none"),2!==i&&(e.borderBottom="none"),3!==i&&(e.borderLeft="none"),4!==i&&(e.borderRight="none"),t}var i=re.getDoc(t);t.appendChild(this._topLine=e(i,this._inner,1)),t.appendChild(this._bottomLine=e(i,this._inner,2)),t.appendChild(this._leftLine=e(i,this._inner,3)),t.appendChild(this._rightLine=e(i,this._inner,4))},e.prototype.$_typeChanged=function(t){var e=this._dom.style;this._topLine||this.$_createLine(this._dom),"line"===t?(e.height="0px",e.width="0px",e.border="none",this._topLine.style.display=this._bottomLine.style.display=this._leftLine.style.display=this._rightLine.style.display="block",this.invalidate()):(e.removeProperty("border"),this._topLine.style.display=this._bottomLine.style.display=this._leftLine.style.display=this._rightLine.style.display="none")},e.prototype.$_linePosition=function(t,e,i,o){var n=this._topLine.style,r=this._bottomLine.style,s=this._leftLine.style,a=this._rightLine.style,l=this.parent.width,h=this.parent.height;r.left=n.left=-t+"px",r.width=n.width=l+t+"px",r.top=o-2+"px",a.height=s.height=h+"px",a.left=i-2+"px",r.display=h<o?"none":"block",s.display=t<0?"none":"block",a.display=l<i?"none":"block"},e.prototype.setEditing=function(t,e,i){t!=this._editing&&(this._editing=t,this.resetStyleName())},e.prototype.setActivated=function(t){this._setClassName(null)},e.prototype._getCssSelector=function(){return(this._inner?"rg-focus-inner":this._editing?"rg-focus-editing":"rg-focus")+(this.container._focused?"":" rg-deactive-focus")},e.prototype.setBounds=function(t,e,i,o){var n;"line"===this._focusType?((n=this._dom.style).left=t+"px",n.top=e+"px",this.width=i,this.height=o,this.$_linePosition(t,e,i,o)):(this.x++,s.prototype.setBounds.call(this,t,e,i,o))},e.prototype._initDom=function(t){s.prototype._initDom.call(this,t),this.setImportantStyle("pointer-events","none")},e.prototype._beforeDraw=function(t){var e;"line"===this._focusType?(this._setClassName(t),(e=t.style).left=this.x+"px",e.top=this.y+"px"):s.prototype._beforeDraw.call(this,t)};var s,o=e;function e(t,e){t=s.call(this,t,"focusView")||this;return t._editing=!1,t._focusType="layer",t._inner=e,t}t.FocusView=o;n=pt.LayerElement,ne.__extends(i,n),i.prototype._doDispose=function(){this._focusView&&this._focusView.dispose(),this._focusView=null,n.prototype._doDispose.call(this)},_dp(i,"focusType",{get:function(){return this._focusType},set:function(t){t!==this._focusType&&(this._focusType=t,this._focusView.focusType=t,this.$_typeChanged(t))}}),i.prototype.$_typeChanged=function(t){var e=this._dom.style;"line"===t?(e.removeProperty("overflow"),e.width="0px",e.height="0px"):(e.overflow="hidden",e.width=this.width+"px",e.height=this.height+"px")},i.prototype.updateElement=function(t,e,i,o,n){this._focusView.setBounds(t,e,i,o),this._focusView.setEditing(n,0,!1)},i.prototype.setActivated=function(t){this._focusView.setActivated(t)},i.prototype._getCssSelector=function(){return"rg-focus-mask"},i.prototype._initDom=function(t){n.prototype._initDom.call(this,t),this.setImportantStyle("pointer-events","none"),this.setImportantStyle("background","none"),this.setImportantStyle("border","none"),this.setImportantStyle("overflow","hidden")},i.prototype._beforeDraw=function(t){var e;"line"===this._focusType?(this._setClassName(t),(e=t.style).left=this.x+"px",e.top=this.y+"px"):n.prototype._beforeDraw.call(this,t)},i.prototype.setRect=function(t){"line"===this._focusType?t.x==this.x&&t.y==this.y&&t.width==this.width&&t.height==this.height||(this.x=t.x,this.y=t.y,this.width=t.width,this.height=t.height):n.prototype.setRect.call(this,t)};var n,a=i;function i(t,e){void 0===e&&(e=!1);var i=n.call(this,t,"focusMask")||this;return i._focusType="layer",i._focusView=new o(t,e),i.addChild(i._focusView),i}t.FocusMask=a;l=pt.LayerElement,ne.__extends(d,l),d.prototype._doDispose=function(){l.prototype._doDispose.call(this)},d.prototype._getCssSelector=function(){return"rg-rowblock"},d.prototype._initDom=function(t){l.prototype._initDom.call(this,t),this.setImportantStyle("pointer-events","none")};var l,h=d;function d(t){t=l.call(this,t,"rowBlockView")||this;return t.visible=!1,t}t.RowBlockView=h;u=pt.LayerElement,ne.__extends(_,u),_.prototype._getCssSelector=function(){return"_rg-col-resizer_"},_.prototype._initDom=function(t){u.prototype._initDom.call(this,t),this.setImportantStyle("pointer-events","none")};var u,c=_;function _(t){return u.call(this,t,"headerCellResizer")||this}t.HeaderCellResizer=c;p=pt.LayerElement,ne.__extends(m,p),m.prototype._doDispose=function(){this._model=null,p.prototype._doDispose.call(this)},_dp(m,"model",{set:function(t){this._model=t,this._modelChanged=!0}}),m.prototype._createDom=function(t){var e=t.createElement("table"),i=(e.setAttribute("aria-hidden","true"),e.createCaption());i.textContent="grid table feedback",i.style.width=i.style.height="0px",i.style.padding="none",i.style.boxSizing="border-box",i.style.overflow="hidden";e.style.setProperty("table-layout","fixed","important");var i=t.createElement("tbody"),o=(e.appendChild(i),t.createElement("tr")),i=(i.appendChild(o),this._cell=t.createElement("td"));return o.appendChild(i),i.className="rg-header rg-header-cell _rg-header-cell-feedback_",e},m.prototype._getCssSelector=function(){return"rg-table"},m.prototype._doDraw=function(t){this.dragging&&!this._modelChanged||(Ce.HeaderElement.renderCell(this._model,this._cell),this._modelChanged=!1)};var p,g=m;function m(t){t=p.call(this,t,"headerCellFeedback")||this;return t._modelChanged=!1,t.dragging=!1,t}t.HeaderCellFeedback=g;y=pt.LayerElement,ne.__extends(C,y),C.prototype._getCssSelector=function(){return"_rg-header-cell-mover_"},C.prototype._initDom=function(t){y.prototype._initDom.call(this,t)},C.prototype._doDraw=function(t){};var y,v=C;function C(t){return y.call(this,t,"headerCellMover")||this}t.HeaderCellMover=v;w=pt.LayerElement,ne.__extends(b,w),_dp(b,"feedbackStyle",{set:function(t){this._feedbackStyle=t}}),b.prototype._getCssSelector=function(){return this._feedbackStyle===Se.DragFeedbackStyle.LINE?"_rg-row-mover-line_":"_rg-row-mover-block_"},b.prototype._initDom=function(t){w.prototype._initDom.call(this,t),this.setImportantStyle("pointer-events","none")};var w,x=b;function b(t){t=w.call(this,t,"rowMoverLine")||this;return t._feedbackStyle=Se.DragFeedbackStyle.LINE,t}t.RowMoverLine=x;I=pt.LayerElement,ne.__extends(S,I),S.prototype.setEnabled=function(t){if(t!=this._enabled)return this._enabled=t,this.invalidate(),!0},S.prototype.setLabel=function(t){if(t!=this._label)return this._label=t,this.invalidate(),!0},S.prototype.setZIndex=function(t){this._dom.style.zIndex=String(t)},S.prototype._getCssSelector=function(){var t="_rg-row-mover-proxy_";return this._enabled||(t+=" _rg-row-mover-proxy-disabled_"),t},S.prototype._initDom=function(t){I.prototype._initDom.call(this,t),this.setImportantStyle("pointer-events","none"),t.style.whiteSpace="nowrap"},S.prototype._setSizeStyle=function(t){},S.prototype._doDraw=function(t){t[re.Utils.TextProp]=this._label};var I,E=S;function S(t){t=I.call(this,t,"rowMover")||this;return t._enabled=!0,t._label="1행 이동",t}t.RowMoverProxy=E;R=De.VisualTool,ne.__extends(D,R),D.prototype._doDispose=function(){this._skipIndex&&this._skipIndex.dispose(),this._skipIndex=null,this._tempInnerIndex=this._tempInnerIndex.dispose(),this._focusMask=this._focusMask.dispose(),this._innerFocusMask=this._innerFocusMask.dispose(),this._rowFocusView&&this._rowFocusView.dispose(),this._rowFocusView=null,this._rowBlockMask&&this._rowBlockMask.dispose(),this._rowBlockMask=null,this._grid=null,R.prototype._doDispose.call(this)},_dp(D,"grid",{get:function(){return this._grid}}),_dp(D,"focused",{get:function(){return this._grid.focusedIndex}}),D.prototype.setFocused=function(t,e,i){var o,n=this._grid;return!!n.isValid(t)&&(o=n.getItem(t.itemIndex),!n.isEditing()&&o instanceof A.DummyEditItem&&n.append(),this._grid.setFocusedIndex(t,e,!0,i))},D.prototype.layoutChanged=function(){this.$_resetFocusView(),this.$_resetRowBlockMask(),this.$_resetFocusButton(this.grid.focusedIndex),this._doLayoutChanged()},D.prototype.resetFocused=function(){this.$_resetFocusView()},D.prototype.focusedIndexChanging=function(t){},D.prototype.focusedIndexChanged=function(t,e){var i=this.grid,o=i.layoutManager,n=o.fixedItemCount,r=e.itemIndex;this.grid.setFocusedClass(t,!1),t.itemIndex!==e.itemIndex&&this.grid.setFocusedRowClass(t,!1),(!this.grid.isValid(e)||0<n&&r<n||r>=o.topIndex+n&&r<=n+o.topIndex+o.fullItemCount)&&this.$_resetFocusView(),!i.isEditing()&&e.item instanceof A.DummyEditItem&&i.append()},D.prototype.currentRowChanged=function(t,e){var i,o=this.grid,n=o.displayOptions;this._rowBlockStart=-1,this._rowBlockEnd=-1,n.rowBlockType!=ht.RowMaskType.NONE&&(n=n.rowBlockCallback)&&(i=null,(i=n(o.handler,o.getItemIndexOfRow(e)))?(this._rowBlockStart=i.start,this._rowBlockEnd=i.end):this._rowBlockStart=this._rowBlockEnd=-1),this.$_resetRowBlockMask()},D.prototype.getNextRequest=function(t,e,i,o){return null},D.prototype.isMouseEventTarget=function(t){if(t instanceof ve.CellElement){var e=t.getAncestor(ye.TableBaseElement);if(e)return e.getContentAt(t.index)==this.mouseEventTarget}return R.prototype.isMouseEventTarget.call(this,t)},D.prototype._doSetFocus=function(t){re.Utils.isMobile()||this.grid.setFocus(t),this._focusMask.setActivated(this.grid.container._focused)},D.prototype._doFocusLeave=function(t){this.grid._resetTdFocus=void 0,this.grid.editOptions.commitWhenLeave&&(this.grid.isEditing()||this.grid.isItemEdited())&&this.grid.commit(!1,void 0,!1),this._focusMask.setActivated(this.grid.container._focused)},D.prototype._doLayoutChanged=function(){},D.prototype.$_resetFocusView=function(){var t,e,i,o,n,r,s,a=this._grid,l=a.layoutManager,h=a.displayOptions,d=a.focusedIndex,u=this._tempInnerIndex.assign(d),c=!1,_=!1,p=!1,f=(h.focusVisible&&a.isValid(u)&&!a.isEditing()&&(t=u.item,(y=f=(e=a.getBodyViewAt(u)).getCellAt(l,u))||!u.layout.merged||!(i=l.getMergeRoom(u))||(u.itemIndex=l.fixedItemCount+l.topIndex,f=i.contains(u)?e.getCellAt(l,u):f)||(u.itemIndex=l.fixedItemCount+l.topIndex+l.itemCount-1,i.contains(u)&&(f=e.getCellAt(l,u))),f&&!f.grouped?(i=a.isEditing(),g=e.getCellRectAt(l,u,!0),0<(g=e.boundsByContainer(g)).width&&0<g.height&&(f=0,v=g.width,u.colFixed||u.rightFixed||(s=l.fixedContentBounds,f=Math.max(0,s.right-g.x),v=Math.max(0,g.width-f),s=l.rightContentBounds,v-=g.right-s.x),0<v)&&(i&&(g.y--,g.height+=1),m=g.clone(),(s=l.footerBounds.clone()).y+=l.contentBounds.y,Math.max(0,g.bottom-s.y),g.width=Math.min(g.width,v),g.x+=f,g.bottom=Math.min(g.bottom,s.y),this._focusMask.setRect(g),this._focusMask.focusType=h.focusType,this._focusMask.updateElement(-f,0,m.width,m.height,i),c=!0,a.canMergeEditing(y)&&!1||(y&&y.merged?h.showInnerFocus&&(o=e.getCellRectAt(l,u,!1)).height<g.height&&(this._innerFocusMask.focusType=h.focusType,o.height=Math.min(o.height,g.height),n=(o=e.boundsByContainer(o)).width-8,r=o.height-8,o.bottom=Math.min(g.bottom+4,o.bottom),this._innerFocusMask.setRect(o.inflate(-4,-4,-4,-4)),this._innerFocusMask.updateElement(0,0,n,r,i),p=!0):(v=e.getCellAt(l,u))&&v.renderer2&&v.editable&&v.renderer2.canShowInnerFocus()&&(o=e.getCellRectAt(l,u,!1),n=(o=e.boundsByContainer(o)).width-8,r=o.height-8,o.bottom=Math.min(g.bottom+4,o.bottom),this._innerFocusMask.setRect(o.inflate(-4,-4,-4,-4)),this._innerFocusMask.updateElement(0,0,n,r,i),p=!0)))):t.isData||(s=a.getRowView(e,t))&&(g=s.boundsByContainer(),this._focusMask.updateElement(0,0,g.width,g.height,!1),g.x<l.leftContentBounds.right&&(g.x=l.leftContentBounds.right,g.width-=l.leftContentBounds.right-g.x),this._focusMask.setRect(g),c=!0)),h.rowFocusType);if(f!=ht.RowMaskType.NONE){var g,m=l.footerBounds.y+l.contentBounds.y,y=l.fixedItemCount,v=u.itemIndex;if(0<=(v=y<=v?v-l.topIndex:v)&&v<=l.itemCount-1){switch((g=l.getTableItemBounds(v)).y+=l.contentBounds.y+l.bodyBounds.y,g.bottom>m&&(g.bottom=m),f){case ht.RowMaskType.DATA:g.x=a.fixedContentPane.x,g.right=(a.rightContentPane.width?a.rightContentPane:a.contentPane).right;break;case ht.RowMaskType.FILL:g.x=0,g.width=a.width;break;case ht.RowMaskType.ROW:g.x=0,g.right=(a.rightContentPane.width?a.rightContentPane:a.contentPane).right}this._rowFocusView.setRect(g),_=!0}else _=!1}this._rowFocusView.visible=_,this._focusMask.visible=c,this._innerFocusMask.visible=p,this._focusMask.visible,a.setFocusedClass(d,!0),a.setFocusedRowClass(d,!0)},D.prototype.$_resetRowBlockMask=function(){var t=this.grid,e=t.layoutManager,i=e.fixedItemCount,o=t.topItem,n=this._rowBlockMask,r=t.displayOptions.rowBlockType,s=this._rowBlockStart,a=this._rowBlockEnd,l=Math.max(s-o+i,i),o=Math.min(Math.max(a-o+i),e.itemCount+i-1);if(n.visible=r&&r!=ht.RowMaskType.NONE&&0<=l&&0<=o&&l<e.itemCount&&l<=o&&s!==a,n.visible){var i=e.footerBounds.y+e.contentBounds.y,h=e.getTableItemBounds(l),s=e.getTableItemBounds(o);switch((h=h.union(s)).y+=e.contentBounds.y+e.bodyBounds.y,h.bottom>i&&(h.bottom=i),r){case ht.RowMaskType.DATA:h.x=t.fixedContentPane.x,h.right=(t.rightContentPane.width?t.rightContentPane:t.contentPane).right;break;case ht.RowMaskType.FILL:h.x=0,h.width=t.width;break;case ht.RowMaskType.ROW:h.x=0,h.right=(t.rightContentPane.width?t.rightContentPane:t.contentPane).right}n.setRect(h)}},D.prototype.$_resetFocusButton=function(t){var e,i,o,n,r=this.grid;r.isValid(t)&&(e=r.getBodyViewAt(t),i=r.getBodyCellAt(t),t=this._tempIndex.assign(t),i||!t.layout.merged||!(o=(n=r.layoutManager).getMergeRoom(t))||(t.itemIndex=n.fixedItemCount+n.topIndex,i=o.contains(t)?r.getBodyCellAt(t):i)||(t.itemIndex=n.fixedItemCount+n.topIndex+n.itemCount-1,o.contains(t)&&(i=r.getBodyCellAt(t))),n=e&&i&&e.getRowView(i.item))&&n.$_setButtons(r,i,i.cell.firstElementChild,o)},D.prototype._doCancel=function(t){if(t.closeFilterSelector(),t.isEditing())t.cancelEditor(!0);else if(t.isItemEditing())t.itemEditCancel()&&t.cancel();else if(this.dragging&&this.dragTracker)try{this._stopDragTracker(null,null,!0),this.dragTracker.cancel(),this.dragTracker.linkable&&t.container.cancelOtherContainer(this.dragTracker)}catch(t){throw t}finally{this.dragTracker=null}},D.prototype._doEnter=function(e,i,t,o){var n=e.isEditing(),o=o.shiftKey;if(n&&!i.enterToTab)e.commitEditor(!0);else{var r=t.clone(),s=i.skipReadOnly,a=i.skipReadOnlyCell;if(e.isValid(r))if(i.enterToNextRow&&(!o&&r.itemIndex<e.itemCount-1||o&&0<r.itemIndex))o?r.up():r.down(),a&&this._checkReadOnly(r)&&(this._skipReadOnlyCell(r,o?-1:1)||r.assign(t));else if(!o&&(!i.enterToEdit||n)&&i.enterToTab&&i.crossWhenExitLast&&(r.isLast||i.skipReadOnly&&r.isEditableLast)&&r.itemIndex<e.itemCount-1)r.down(),r.firstCell(),s&&this._skipReadOnly(r,1);else if(o&&(!i.enterToEdit||n)&&i.enterToTab&&i.crossWhenExitLast&&(r.isFirst||i.skipReadOnly&&r.isEditableFirst)&&0<r.itemIndex)r.up(),r.lastCell(),s&&this._skipReadOnly(r,-1);else if((!n||i.enterToTab)&&i.commitWhenExitLast&&r.isLast){try{e.commit(i.commitWhenNoEdit)}catch(t){throw t instanceof G.ValidationError&&(t=e._fireValidationFail(r.item.index,t.column,t))&&alert(i.showOnlyValidationMessage&&t.userMessage?t.userMessage:t.toString()),t}i.appendWhenExitLast&&r.itemIndex===e.itemCount-1&&(e.append(),e.isItemEditing())&&(r.down(),r.firstCell())}else(i.enterToTab&&(e.isEditing()||this._checkReadOnly(r))||!i.enterToEdit)&&(e.isEditing()&&e.commitEditor(!0),o?(r.prev(),this._getPrevVisible(e,r)):(r.next(),this._getNextVisible(e,r)),s)&&!this._skipReadOnly(r,o?-1:1)&&r.assign(t);else r.normalize(e);_t.CellIndex.areEquals(r,t)?e.isValid(r)&&i.enterToEdit&&!n&&!e.isEditing()&&t&&t.dataColumn&&!this._checkReadOnly(t)&&e.showEditor(t):this.setFocused(r,!0,!0)}return!0},D.prototype._doTab=function(e,i,t,o,n,r){var s=t.clone(),a=!1;if(e.isValid(s)){if(i.useTabKey){var l=i.exitGridWhenTab;if(n){if(i.crossWhenExitLast&&(s.isFirst||i.skipReadOnly&&s.isEditableFirst)&&0<s.itemIndex?(s.up(),s.lastCell()):(s.prev(),this._getPrevVisible(e,s)),i.skipReadOnly&&!this._skipReadOnly(s,-1)&&s.assign(t),_t.CellIndex.areEquals(s,t)&&l){switch(l){case"row":a=!0;break;case"grid":a=s.itemIndex<=0}if(a)return re.Utils.isMobile()||e.container._containerDom.setAttribute("tabindex","-1"),!1}}else{if(i.crossWhenExitLast&&(s.isLast||i.skipReadOnly&&s.isEditableLast)&&s.itemIndex<e.itemCount-1)s.down(null,i.skipReadOnly&&s.isEditableLast&&i.crossWhenExitLast),s.firstCell();else if(i.commitWhenExitLast&&s.isLast){try{e.commit(i.commitWhenNoEdit)}catch(t){throw t instanceof G.ValidationError&&(t=e._fireValidationFail(s.itemIndex,t.column,t))&&alert(i.showOnlyValidationMessage&&t.userMessage?t.userMessage:t.toString()),t}i.appendWhenExitLast&&(e.append(),e.isItemEditing())&&(s.down(),s.firstCell())}else s.next(),this._getNextVisible(e,s);if(i.skipReadOnly&&!this._skipReadOnly(s,1)&&s.assign(t),_t.CellIndex.areEquals(s,t)&&l){switch(l){case"row":a=!0;break;case"grid":a=s.itemIndex>=e.itemCount-1}if(a)return!1}}return _t.CellIndex.areEquals(s,t)||this.setFocused(s,!0,!0),r&&(r.preventDefault&&r.preventDefault(),r.stopImmediatePropagation()),!0}}else s.normalize(e),this._skipReadOnly(s,1);return n&&!re.Utils.isMobile()&&e.container._containerDom.setAttribute("tabindex","-1"),!1},D.prototype._getNextVisible=function(t,e){t.getBodyViewAt(e).getNextVisibleCell(e)},D.prototype._getPrevVisible=function(t,e){t.getBodyViewAt(e).getPrevVisibleCell(e)},D.prototype._checkReadOnly=function(t){var e=this.grid;return!e.isValid(t)||(null!=(e=e.getWritableAt(t))?!e:!t.dataColumn.isWritable())},D.prototype._skipReadOnly=function(t,e){var i=!1;if(this.grid.editOptions.skipReadOnly){var o=this._skipIndex;if(o.assign(t),!(i=!this._checkReadOnly(o)))if(0<e){for(;o.next();)if(!this._checkReadOnly(o)){t.assign(o),i=!0;break}}else for(;o.prev();)if(!this._checkReadOnly(o)){t.assign(o),i=!0;break}}return i},D.prototype._skipReadOnlyCell=function(t,e,i){var o=this.grid,n=!t.dataColumn.isWritable()&&!0;return!n&&o.editOptions.skipReadOnlyCell&&((o=this._skipIndex).assign(t),n=!this._checkReadOnly(o)),n},D.prototype._commitCancel=function(e,i){var o=this.grid;try{switch(e.itemState){case rt.ItemState.INSERTING:return o.commit(i.forceInsert)||o.cancel(!0),!0;case rt.ItemState.APPENDING:return o.commit(i.forceAppend)||o.cancel(!0),!0;case rt.ItemState.UPDATING:return o.commit(i.commitWhenNoEdit)||o.cancel(!0),!0}}catch(t){if(t instanceof G.ValidationError)return(t=o._fireValidationFail(e.index,t.column,t))&&alert(i.showOnlyValidationMessage&&t.userMessage?t.userMessage:t.toString()),!1;if(t instanceof G.AbortError)return!1;throw t}return!1},D.prototype._doColumnHeaderClicked=function(t,e){},D.prototype._editButtonClicked=function(t,e){};var R,T=D;function D(t,e){var e=R.call(this,t,e)||this,i=(e._rowBlockStart=-1,e._rowBlockEnd=-1,t.doc),t=e._grid=t.gridView;return e._skipIndex=t.getIndex(),e._tempIndex=t.getIndex(),e._tempInnerIndex=t.getIndex(),t.addFeedbackElement(e._rowBlockMask=new h(i)),t.addFeedbackElement(e._rowFocusView=new N(i)),t.addFeedbackElement(e._focusMask=new a(i)),t.addFeedbackElement(e._innerFocusMask=new a(i,!0)),e}t.GridTool=T;k=pt.LayerElement,ne.__extends(M,k),M.prototype._doDispose=function(){k.prototype._doDispose.call(this)},M.prototype._getCssSelector=function(){return"rg-rowhover"},M.prototype._initDom=function(t){k.prototype._initDom.call(this,t),this.setImportantStyle("pointer-events","none")};var k,B=M;function M(t){t=k.call(this,t,"rowHoverView")||this;return t.visible=!1,t}t.RowHoverView=B;F=pt.LayerElement,ne.__extends(L,F),L.prototype._doDispose=function(){F.prototype._doDispose.call(this)},L.prototype._getCssSelector=function(){return"rg-rowfocus"},L.prototype._initDom=function(t){F.prototype._initDom.call(this,t),this.setImportantStyle("pointer-events","none")};var F,N=L;function L(t){t=F.call(this,t,"rowFocusView")||this;return t.visible=!1,t}t.RowFocusView=N;O=T,ne.__extends(P,O),P.prototype._doDispose=function(){this._clickCell=null,this._clickElement=null,this._cellResizer=this._cellResizer.dispose(),this._cellMover=this._cellMover.dispose(),this._cellFeedback=this._cellFeedback.dispose(),this._rowMoverLine=this._rowMoverLine.dispose(),this._rowMoverProxy=this._rowMoverProxy.dispose(),this._colResizeReq=this._colResizeReq.dispose(),this._colMoveReq=this._colMoveReq.dispose(),this._rowMoveReq=this._rowMoveReq.dispose(),this._rowResizeReq=this._rowResizeReq.dispose(),this._headerResizeReq=this._headerResizeReq.dispose(),this._touchManager=this._touchManager&&this._touchManager.dispose(),O.prototype._doDispose.call(this)},P.prototype._doDeactivated=function(){this._clickCell=this._clickElement=null},P.prototype._doDragTrackerFinished=function(t,e){t.clickable||(this._clickCell=this._clickElement=null)},P.prototype.$_getIndexAt=function(t,e,i,o,n){t=t.getDataCellIndex(o,this._tempIndex),o=i.getCellAt(e,t);if(o&&o.merged){e=e.getTableRowIndex(n);if(e<0)return t;n=i.getRowIndex(e);t.itemIndex=Math.min(Math.max(o.item.index,n),o.item.index+o.rowSpan-1)}return t},P.prototype._doMouseDown=function(t){var e=t.mouseX,i=t.mouseY,o=t.ctrlKey||t.metaKey,n=t.shiftKey,r=t.altKey,s="mousedown"===t.type?t.button:0,a=this.grid,l=a.layoutManager,h=a.editOptions,d=a.focusedIndex.clone(),u=a.selections.exclusiveMode;this._hideTooltip(),a.closePopups(),a.setEventFrom("mousedown"),this._clickCell=null,this._clickElement=null;if(0==s||a.displayOptions.rightClickable){var c=this._tempIndex,_=this.mouseEventTarget,d=0==s&&(this._getEditRequest(_,d,e,i,o,n,r)||this._getSelectRequest(_,e,i,o,n,r));if(!(d instanceof j.GridEditRequest)||d.canFocus())if(_=this._clickCell=this._findTableCell(),r=this._clickElement=this.findElementAt(e,i,!1),_){var p=a.getTableView(_),f=p instanceof Ce.HeaderElement,g=p instanceof gt.GridBodyElement,m=p instanceof qe.RowBarContainer&&p.isRowIndicator(_);if(f||g||m){var y=a.selections.lastItem();if(g?c=this.$_getIndexAt(a,l,p,_,i):f?(c.assign(a.focusedIndex),c.layout=p.layoutByCell(_)):(c.assign(a.focusedIndex),c.itemIndex=_.parentElement[ht.T_ROW]),f){if(o&&n)y&&this.$_resizeSelection(y,c,W.SelectionStyle.COLUMNS);else if(n)return}else{if(n&&y)return _=f?W.SelectionStyle.COLUMNS:m?W.SelectionStyle.ROWS:null,void this.$_resizeSelection(y,c,_);if(g){if(this.$_checkAppending(a.focusedIndex,!0,c))return this._clickElement=null,void(this._clickCell=null);var v,n=p.getCellAt(l,c),f=p.bodyCellByCell(this._clickCell);f&&n&&0===s&&f.isEditButton(t.target)?this.setFocused(c,!0,!0)&&n.editable&&!n.readonly&&a.editController.buttonDown(c,t):_t.CellIndex.areEquals(c,this.focused)&&h.editWhenClickFocused?a.showEditor():(v=!(o&&a.selections.containsCell(c)),this.setFocused(c,u||!o,v))}else m&&a.rowIndicator.selectable&&(null==c.column&&c.item.isDataRow&&(c.layout=a.getFirstLayout()),d instanceof j.SelectRequest?(this.setFocused(c,u||!o,!1),1===(_=y&&W.isRowSelection(y)?y.getItemIndices():[]).length&&_[0]===c.itemIndex||a.selections.selectRow(c.itemIndex,!o)):(v=void 0,v=a.displayOptions.selectionStyle===W.SelectionStyle.SINGLE_ROW?!(o&&a.selections.containsItem(c.itemIndex,null)):!(o&&a.selections.containsCell(c)),this.setFocused(c,u||!o,v)))}}}else me.isItemElement(r)&&(c.assign(a.focusedIndex),c.itemIndex=r.itemIndex,this.setFocused(c,!0,!0));!d||a.isItemEditing()&&d.selectable||(this.dragTracker=this._getDragTracker(d,e,i))}a.$_resetHovering(e,i);g=this.dragTracker;g&&g.startWhenCreated&&(g instanceof Te.SelectTracker&&t.shiftKey,this._startDragTracker(e,i,t))},P.prototype.$_checkOtherGridRowMoving=function(t,e){var i=this.grid,o=i.container,n=o.getMouseContainer(),r={index:-1,position:0};if(n&&n!==o)if(o.findContainer(t)!==o)i.removeFeedbackElement(this._rowMoverLine);else if(e instanceof Re.RowMoveTracker){var s,t=o.eventToContainer(t),o=o.findElementAt(t.x,t.y,!1);if(0==i.itemCount||o instanceof X.RowElement||o instanceof We.RowBarElement||o instanceof qe.RowBarContainer)return t=Re.RowMoveTracker.updateLineFeedback(i,Number.MAX_VALUE,1,this._rowMoverLine,t.x,t.y,!0),s=i.canMoveRow(!0,!0)&&i.dataDropOptions.getEnabled(n.gridView,e.sourceItems,t),n=i.dataDropOptions.getLabel(n.gridView,e.sourceItems,t),e.setEnabled(s),e.setLabel(n),i.addFeedbackElement(this._rowMoverLine),s?t:r;o&&e.setEnabled(!1),i.removeFeedbackElement(this._rowMoverLine)}return r},P.prototype.dragFrom=function(t,e){e instanceof Re.RowMoveTracker&&this.$_checkOtherGridRowMoving(t,e)},P.prototype.dropFrom=function(t,e){var i;e instanceof Re.RowMoveTracker&&(t=0==(i=this.grid).itemCount?{index:0,position:0}:this.$_checkOtherGridRowMoving(t,e),i.removeFeedbackElement(this._rowMoverLine),0<=t.index)&&i.$_dropData(e.grid,e.sourceItems,t)},P.prototype.cancelFrom=function(t){var e=this.grid;t instanceof Re.RowMoveTracker&&e.removeFeedbackElement(this._rowMoverLine)},P.prototype._doMouseMove=function(t){var e=t.mouseX,i=t.mouseY,o=t.ctrlKey||t.metaKey,n=t.shiftKey,t=t.altKey,r=this.grid,s=r.layoutManager,e=(r.$_resetHovering(e,i)||this._hideTooltip(),this._getEditRequest(this.mouseEventTarget,r.focusedIndex,e,i,o,n,t));e&&e.cursor?r.setCursor(this.mouseEventTarget,e.cursor):r.setCursor(this.mouseEventTarget,"default"),e||this.dragging||(n=(o=this._findTableCell())&&r.getTableView(o))instanceof gt.GridBodyElement&&(t=n.bodyCellByCell(o))&&t.merged&&(e=t.head||t,o=this.$_getIndexAt(r,s,n,o,i),e.contains(r.focusedIndex)||(t.buttons&&(i=n.getRowView(e.item))instanceof X.RowElement&&i.moveCellButtons(s,e,o.itemIndex),t=r.canMergeEditing(e),e.renderer2&&e.renderer2.refreshFocusChanged&&(i=n.getCellRectAt(s,o,!1),r=n.getCellRect(s,e,!0),o=e.renderer2,n=i.top-r.top+i.height/2-r.height/2,o.moveClickElement(n,t))))},P.prototype._doMouseUp=function(t){var e=t.mouseX,i=t.mouseY,o=(this.findElementAt(e,i,!1),this._findTableCell()),n=this.grid,r=n.layoutManager,s=(n.setEventFrom("mouseup"),n.getCellType(o));n.setCursor(this.mouseEventTarget,"default"),n.editController.buttonUp(null,t),"data"!==s||!n.isValid(n.focusedIndex)||r.focusIsVisible(n.focusedIndex)||this.dragTracker&&!this.dragTracker.scrollable||(r.makeCellVisible(n.focusedIndex),n.invalidateLayout()),!o||o!=this._clickCell||"header"!==s||this._getEditRequest(this.mouseEventTarget,n.focusedIndex,e,i,!1,!1,!1)instanceof j.ColumnResizeRequest||(r=n.getHeaderView(o).layoutByCell(o))&&this.$_columnHeaderClicked(t,r)},P.prototype._doClick=function(t,e,i){e=e||t.mouseX,i=i||t.mouseY;var o=this.grid,e=this.findElementAt(e,i,!1),n=this._findTableCell(),r=this.focused;if((!o._eventFrom||0<=o._eventFrom.indexOf("key"))&&(this._clickCell=n=this._findTableCell(t.target),r=n&&o.getDataCellIndex(n)),o.setEventFrom(null),n&&n==this._clickCell){var s=o.getCellType(n),a=void 0;switch(s){case"head":this.$_gridCellClicked(d=f.getSub(s,o.headView.getCellType(n))),"check"===d.subType&&(l=o.headView._checkCell,re.Utils.included(t.target,l._check,l._image,l._span))&&this._checkAllClicked();break;case"foot":this.$_gridCellClicked(f.getSub(s,o.footView.getCellType(n)));break;case"indicator":case"state":case"check":"check"===s&&this.$_checkCellClicked2(n,t),l=o.rowBarContainer.rowOf(n),a=o.getRowOfItem(l),this.$_gridCellClicked(f.getItem(s,l,a));break;case"header":var l=o.getHeaderView(n),h=o.headerView.tableCellByCell(n);h&&h.isClickableElt(t.target)||this.$_gridCellClicked(f.getLayout(s,l.layoutByCell(n)));break;case"data":h=o.getBodyView(n).bodyCellByCell(n);if(_t.CellIndex.equalsTo(r,h.item.index,h.layout)||h.contains(r))if(h.grouped)this.$_gridCellClicked(f.getItem("groupHeader",h.item.index,null));else{if(h.isCellButton(t.target))return this.$_cellButtonClicked(h),void(o.editOptions.exceptDataClickWhenButton||this.$_gridCellClicked(f.getCell(s,h,r)));if(X.RowElement.isExpander(t.target))return void(o.editOptions.exceptDataClickWhenButton||this.$_gridCellClicked(f.getCell(s,h,r)));l=o.editController._editor;if(h.isEditButton(t.target)||!h.readonly&&l&&l.dropDownWhenClick)return o.canMergeEditing(h)?this._tempIndex=o.focusedIndex.clone():h.getEditIndex(this._tempIndex),this._editButtonClicked(this._tempIndex,t),void this.$_gridCellClicked(f.getCell(s,h,r));l=h.renderer2;if(l&&(d=f.getCell(s,h,r),this.$_performRendererClick(h,t,d)))return void(o.editOptions.exceptDataClickWhenButton&&l.itemClickable||this.$_gridCellClicked(d));this.$_gridCellClicked(f.getCell(s,h,r))}break;case"footer":l=o.getFooterView(n).tableCellByCell(n);this.$_gridCellClicked(f.getSummary(s,l.summaryIndex,l.layout));break;case"summary":var d=o.getSummaryView(n).tableCellByCell(n);this.$_gridCellClicked(f.getSummary(s,d.summaryIndex,d.layout));break;case"inlineFilter":h=o.getFilterView(n).tableCellByCell(n),l=t.target;l===h.operatorButton&&o.popupMenuManager.show(h.popupMenu,l,this._tempIndex.set(-1,h.layout,this.grid));break;case"sum":this.$_gridCellClicked(f.getSub(s,o.sumView.getCellType(n)));break;case"filter":this.$_gridCellClicked(f.getSub(s,o.filterView.getCellType(n)));break;case"groupFooter":d=o.getBodyView(n).bodyCellByCell(n),l=d.item.footerIndex;this.$_gridCellClicked(f.getGroupFooter(s,d.item.index,d.layout,l));break;case"groupHead":case"groupFoot":h=n[ht.T_LEV];this.$_gridCellClicked(f.getGroupElt(s,h));break;case"groupBar":d=n[ht.T_ROW],a=this.grid.getRowOfItem(d);this.$_gridCellClicked(f.getItem(s,d,a))}}else e&&e===this._clickElement&&(i=this._getClickData(e,t))&&("gridEmpty"===i.cellType&&o.isEditing()&&o.commitEditor(!0),this.$_gridCellClicked(i))},P.prototype._getClickData=function(t,e){if(t instanceof pi.GridBase||t instanceof me.EmptyGridElement||t instanceof gt.GridBodyElement)return f.getData("gridEmpty")},P.prototype.$_commitRendererEdit=function(e,t,i){var o=t.item,n=t.dataField,r=t.dataColumn,s=!1;try{(s=e.editorCommit(t,o.getData(n),i))&&(e.undoable?e.execute(new Ge.EditValueCommand(t.item,n,i,t.column)):o.setData(n,i),e.isItemEditing(t.item))&&e.validateCellCommit(t,i)}catch(t){if(!e.editOptions.showCommitError)throw t;alert(t.message||t)}if(s&&e.isCellEditing()){o=e.itemSource,n=o.editingItem.invalidFields,s=e.validationManager.getError(t);if(s)n.push(r.dataIndex),e.editOptions.showCommitError&&alert(s.userMessage||s.message||s);else if(0<=n.indexOf(r.dataIndex)&&n.splice(n.indexOf(r.dataIndex),1),e.validationManager.clearInvalidCell(t),!(0<n.length)){s=e.canMergeEditing(e.getBodyCellAt(t,!0));if(o.commit(s)||o.cancel(),s){var a=r.layout.merges.getRoom(t),l={},h={};h[r.fieldName]=i;for(var d=a.head;d<=a.tail;d++){var u=e.getItem(d);u.isDataRow&&(l[u.dataRow]=h)}o.updateRows2(l)}}}},P.prototype.$_performRendererClick=function(t,e,i){var o=t.renderer2,n=this.grid,r=n.layoutManager;if(o){r=t.merged?(e.mouseX,t=e.mouseY,s=(a=this._findTableCell())&&n.getTableView(a),this.$_getIndexAt(n,r,s,a,t)):o.index;var s=n.canWriteAt(r)&&o.canEdit();if(s&&_t.CellIndex.areEquals(r,n.focusedIndex)&&o.canEditClickAt(e)&&n.edit(r)){var a=o.editClick(r,e);if(a)return a.commit&&this.$_commitRendererEdit(n,r,a.value),!0}if(o.canClick(e)){t=o.click(r,e);if(t)return re.Utils.extendObj(i,t),!1===n._fireCellItemClicked(r,t)&&o.preventDefaultClick(e),!0}return o.preventDefaultEditClick(e),!1}},P.prototype.$_performRendererKey=function(t,e){var i=t.renderer2,o=t.head;if(i)n=i.index;else{if(!o||!(i=o.renderer2))return;o=t.rowIndex-o.rowIndex;(n=i.index.clone()).incRow(o)}var n,o=this.grid,r=o.canWriteAt(n)&&i.canEdit();if(_t.CellIndex.areEquals(n,o.focusedIndex))return n=f.getCell(o.getCellType(t.cell),t,n),r&&i.canEditKey(e)||i.canClickSpaceKey(e)?(i.itemClick(),!0):32===e.keyCode&&o.editOptions.buttonClickWhenSpace?(t.button===ht.CellButton.ACTION||t.button===ht.CellButton.POPUP?(o.closePopups(),t.cellButton.click()):this.$_gridCellClicked(n),!0):void 0},P.prototype._doDblClick=function(t){var e=t.mouseX,i=t.mouseY,o=t.ctrlKey||t.metaKey,n=t.shiftKey,r=t.altKey,s=this.grid,a=s.layoutManager,l=this.focused,h=this.findElementAt(e,i,!1),d=this._findTableCell();if(s.setEventFrom(null),d&&d==this._clickCell){var u=s.getCellType(d),c=void 0;switch(u){case"head":this.$_gridCellDblClicked(f.getSub(u,s.headView.getCellType(d)));break;case"foot":this.$_gridCellDblClicked(f.getSub(u,s.footView.getCellType(d)));break;case"indicator":case"state":case"check":_=s.rowBarContainer.rowOf(d),c=s.getRowOfItem(_),this.$_gridCellDblClicked(f.getItem(u,_,c));break;case"header":var _=s.getHeaderView(d),p=s.headerView.tableCellByCell(d),p=(p&&p.isClickableElt(t.target)||this.$_gridCellDblClicked(f.getLayout(u,_.layoutByCell(d))),this._getEditRequest(this.mouseEventTarget,s.focusedIndex,e,i,o,n,r));p instanceof j.ColumnResizeRequest&&(_=p.layout).firstColumn&&s.fitLayoutWidth(_);break;case"data":var p=s.getBodyView(d),_=p.bodyCellByCell(d),p=this.$_getIndexAt(s,a,p,d,i);X.RowElement.isExpander(t.target)||(_.grouped?this.$_gridCellDblClicked(f.getItem("groupHeader",_.item.index,null)):(this.$_gridCellDblClicked(f.getCell(u,_,l)),_t.CellIndex.areEquals(p,l)&&(_=s.editController.currentEditor(),s.showEditor(p,void 0,re.Utils.isMobile()&&_.hasList))));break;case"footer":p=s.getFooterView(d).tableCellByCell(d);this.$_gridCellDblClicked(f.getSummary(u,p.summaryIndex,p.layout));break;case"summary":_=s.getSummaryView(d).tableCellByCell(d);this.$_gridCellDblClicked(f.getSummary(u,_.summaryIndex,_.layout));break;case"sum":this.$_gridCellDblClicked(f.getSub(u,s.sumView.getCellType(d)));break;case"groupFooter":p=s.getBodyView(d).bodyCellByCell(d),_=p.item.footerIndex;this.$_gridCellDblClicked(f.getGroupFooter(u,p.item.index,p.layout,_));break;case"groupHead":case"groupFoot":p=d[ht.T_LEV];this.$_gridCellDblClicked(f.getGroupElt(u,p));break;case"groupBar":_=d[ht.T_ROW],c=s.getRowOfItem(_);this.$_gridCellDblClicked(f.getItem(u,_,c))}}else h&&h===this._clickElement&&(h=this._getClickData(h,t))&&this.$_gridCellDblClicked(h)},P.prototype._doMouseWheel=function(t){var e=this.grid,i=(e.setEventFrom(null),e.scrollOnEditing(),e.displayOptions);if(!i.wheelEnabled||t.ctrlKey)return!1;if((t.shiftKey||Math.abs(t.deltaX)>Math.abs(t.deltaY))&&0!==i.wheelScrollHorz)return n=e.leftPos,r=Math.abs(i.wheelScrollHorz||16)*(0<(t.deltaX||t.deltaY)?1:-1),e.leftPos=n+r,!0;var o,n=e.topIndex,r=Date.now(),s=Math.abs(i.wheelScrollLines),a=(s=s||3,e.displayOptions.wheelDeltaY);if(0<a){if(!(this._wheelDeltaY+Math.abs(t.deltaY)>=a))return void(this._wheelDeltaY+=Math.abs(t.deltaY));this._wheelDeltaY=0}return 0<i.wheelAccelDelay&&(r>this._prevScroll+300?this._checkScroll=r:this._checkScroll+i.wheelAccelDelay<r&&((a=i.wheelAccelScroll)&&!isNaN(a)?s=parseInt(a):"string"==typeof a&&0<(a=a.trim()).indexOf("%")&&(o=e.itemCount,s=parseInt(a.substr(0,a.length-1))/100*o))),this._prevScroll=r,e.topIndex=e.topIndex+(0<t.deltaY?s:-s),!i.wheelEventPropagate||n!=e.topIndex},P.prototype._doMouseEnter=function(t){},P.prototype._doMouseLeave=function(t){var e=t.mouseX,t=t.mouseY;this._hideTooltip(),this.$_setHoveredHeaderCell(null,e,t),this.$_setHoveredCell(null,e,t)},P.prototype._doMouseOver=function(t){},P.prototype._doContextMenu=function(t){return this.grid.doContextMenu(t)},P.prototype.$_doHome=function(t,e,i){var o=t.clone();if(t.first(),i&&this._checkReadOnly(t)&&!this._skipReadOnlyCell(t,1,o))return t.assign(e),!0},P.prototype.$_doEnd=function(t,e,i){var o=t.clone();if(t.last(),i&&this._checkReadOnly(t)&&!this._skipReadOnlyCell(t,-1,o))return t.assign(e),!0},P.prototype._doKeyDown=function(t){var e,i=t.keyCode,o=t.ctrlKey,n=re.Utils.isMac,r=n&&t.metaKey||!n&&t.ctrlKey,s=t.shiftKey,a=t.altKey,l=this.grid,h=l.editOptions,d=l.layoutManager,u=l.popupMenuManager,c=h.skipReadOnly,_=h.skipReadOnlyCell,p=l.focusedIndex,f=p.clone(),g=h.verticalMoveStep;if(!l._fireKeyDown(t))return!0;if(!l.isEditing()&&l.accessibility&&re.Utils.included(i,40,34,38,33,32,37,39)&&re.Utils.stopEvent(t),u.isShow()&&re.Utils.included(i,37,39,38,40,13,32))return m=l.getBodyCellAt(p),u.keyDown(t,m&&m.cell),!0;if((l.setEventFrom("keydown"),p&&!l.isEditing())&&((m=l.getBodyCellAt(p))&&this.$_performRendererKey(m,t)))return!0;if(!l.isEditing()&&l.accessibility&&(67===i||86===i)&&r)return l.editController.setFocus(!0),!1;if(27==i)l.closePopups(),this._doCancel(l);else{if(13==i)return this._doEnter(l,h,f,t);if(9==i)return this._doTab(l,h,f,o,s,t);if(113==i)!l.isEditing()&&f.dataColumn&&(l.accessibility&&l.$_setEditFocused(!0,null),l.showEditor(f,s));else{if(re.Utils.isMac&&t.metaKey&&t.shiftKey&&90===t.keyCode)return l.redo();if(90==i&&r)return l.undo();if(89==i&&r)return l.redo();if(45==i)h.appendWhenInsertKey||0==l.itemCount?l.append():l.insert(f.item,t.shiftKey,o);else{if(46==i)return o&&s?(l.revertSelection(),!0):o?(l.deleteSelection(),!0):!!s&&(l.eraseSelection(!1),!0);if(a&&s&&40==i)l.moveSelection(1,"keydown");else if(a&&s&&38==i)l.moveSelection(-1,"keydown");else if(32==i&&s&&r&&l.rowBarContainer.rowIndicator.visible){var u=l.selections.getItem(0),m=u&&(u.style===W.SelectionStyle.BLOCK||W.isRowSelection(u))&&u.getItems(l.checkBar.merged||0<=l.checkBar.fieldIndex);m||l.checkBar.merged?(m=m||[f.item],l.toggleChecks(m,f.item)):l.toggleCheck(f.itemIndex)}else if(l.editOptions.useArrowKeys&&re.Utils.included(i,36,35,39,37,40,38,34,33)){re.Utils.isMobile()&&t&&t.preventDefault&&t.preventDefault();var y=l.itemCount;if(40==i&&0==y)l.append();else if(l.isValid(f)){if(!((re.Utils.included(i,40,34)||35==i&&o)&&f.isBottom&&this.$_checkAppending(f)||(re.Utils.included(i,38,33)||36==i&&o)&&f.isTop&&this.$_checkAppending(f,!0))){var v=l.getBodyViewAt(f);if(v){switch(i){case 36:if(o){if(this.$_doHome(f,p,c))break}else f.home(),this._skipReadOnly(f,1);break;case 35:if(o){if(this.$_doEnd(f,p,c))break}else f.end(),this._skipReadOnly(f,-1);break;case 39:v.spanRight(d,f),f.right(),c&&this._checkReadOnly(f)&&!this._skipReadOnly(f,1)&&f.assign(p);break;case 37:f.left(),c&&this._checkReadOnly(f)&&!this._skipReadOnly(f,-1)&&f.assign(p);break;case 38:if(n&&r)this.$_doHome(f,p,c);else try{if(0==f.itemIndex&&f.isTop){if(this.$_commitCancel(f.item,h))return!0;o&&n?f.first():l.filterPanel.visible?l.inlineFilterFocus(f.layout):f.up(g)}else if(o&&n)f.first();else{if(o)return void l.topIndex--;f.up(g,l.isItemEditing(f.item))}}finally{_&&this._checkReadOnly(f)&&(this._skipReadOnlyCell(f,-1)||f.assign(p))}break;case 33:if(o&&!n)return l.topIndex=l.topIndex-d.fullItemCount,!0;e=f.clone(),f.incRow(-d.fullItemCount),c&&this._checkReadOnly(f)&&!this._skipReadOnlyCell(f,1,e)&&f.assign(p);break;case 40:if(n&&r)this.$_doEnd(f,p,c);else try{if(f.itemIndex!=y-1||!f.isBottom&&g!=_t.VerticalMoveStep.ROW)if(o&&n)f.last();else{if(o)return l.topIndex++,!0;f.down(g,l.isItemEditing(f.item))}else{if(f.isBottom&&this._commitCancel(f.item,h))return!0;l.append(),o&&n?f.last():f.down(g,l.isItemEditing(f.item))}}finally{_&&this._checkReadOnly(f)&&(this._skipReadOnlyCell(f,1)||f.assign(p))}break;case 34:if(f.itemIndex==l.itemCount-1&&f.isBottom&&rt.ItemState_isInserting(f.item.itemState))return l.commit(h.forceAppend),!0;if(o&&!n)return l.topIndex=l.topIndex+d.fullItemCount,!0;e=f.clone(),f.incRow(d.fullItemCount),c&&this._checkReadOnly(f)&&!this._skipReadOnlyCell(f,-1,e)&&f.assign(p)}v.spanHead(d,f),s&&0<l.selections.count&&!W.isSingleSelectionStyle(l.displayOptions.selectionStyle)?(this.setFocused(f,!1,!1),l.selections.lastItem().resizeTo(f)):this.setFocused(f,!0,!0)}}}else f.normalize(l),this.setFocused(f,!0,!0);return!0}}}}return O.prototype._doKeyDown.call(this,t)},P.prototype._doKeyPress=function(t){this.grid._fireKeyPress(t)},P.prototype._doKeyUp=function(t){var e,i,o;re.Utils.isIE&&(e=t.ctrlKey,i=t.keyCode,o=this.grid,90===i)&&e&&o.undo(),this.grid._fireKeyUp(t)},P.prototype._editButtonClicked=function(t,e){this.grid.makeCellVisible(t),this.grid.showEditor(t)&&this.grid.editorButtonClicked(t,e),O.prototype._editButtonClicked.call(this,t,e)},P.prototype._getSelectRequest=function(t,e,i,o,n,r){var s=this.grid,a=s.displayOptions,l=a.selectionMode,a=a.selectionStyle,t=this._findTableCell(t);if(t){var h=s.getCellType(t);if("indicator"==h){if(s.rowIndicator.selectable&&l!=W.SelectionMode.NONE&&a!=W.SelectionStyle.NONE&&!W.isSingleSelectionStyle(a))return new j.SelectRequest(s.getIndex(s.rowBarContainer.getCellIndex(t)),W.SelectionStyle.ROWS)}else if("header"==h){if(o){var d=s.headerView.columnByCell(t);if(s.rowIndicator.selectable&&l!=W.SelectionMode.NONE&&a!=W.SelectionStyle.NONE&&!W.isSingleSelectionStyle(a))return new j.SelectRequest(s.getIndex(-1,d),W.SelectionStyle.COLUMNS)}}else if("data"==h){d=s.getDataCellIndex(t,this._tempIndex);if(o&&s.selections.containsCell(d))return null;if(l!=W.SelectionMode.NONE&&a!=W.SelectionStyle.NONE&&!W.isSingleSelectionStyle(a)&&!re.Utils.isMobile())return new j.SelectRequest(d.clone(),a)}}return null},P.prototype._getEditRequest=function(t,e,i,o,n,r,s){var a=re.getDocWin(this.grid.doc),l=this.grid,h=l.layoutManager,d=l.displayOptions,u=this._findTableCell(t);if(!u)return null;var c=l.getTableView(u),r=this.$_getRowResizeRequest(c,u,i,o,n,r,s);if(r)return r;if(c instanceof qe.RowBarContainer&&c.isRowIndicator(u)){if((s=s&&(re.Utils.isIE||re.Utils.isEdge)?n:s)&&l.canMoveRow(!1,!1)){var _=l.getSelection(),p=l.rowBarContainer.rowOf(u),r=!1;if(_?r=_.containsItem(p):p==e.itemIndex&&(r=!0),r)return this._rowMoveReq.init(_,p)}}else if(c instanceof Ce.HeaderElement){if(t instanceof a.HTMLInputElement)return null;if(!n){r=c.layoutByCell(u);if(r){a=l.cellToContainer(u,this._reqPoint.setEmpty());if(d.columnResizable&&r._isResizable()&&(l.fixedOptions.resizable||r.root.vindex>=h.fixedLayoutCount&&r.root.vindex<h.rightFirstLayout)){var f=l.headerView.tableCellByLayout2(h,r);if(a.x+=f?f.width:r.domWidth,i>=a.x-3&&i<=a.x+3)return this._colResizeReq.init(r,i,o,i-a.x)}if(d.columnMovable&&r._isMovable()&&(!r.isRoot||l.canMoveLayout(r)))return this._colMoveReq.init(r,i,o,i-a.x)}}}else if(c instanceof gt.GridBodyElement){h=l.getDataCellIndex(u,this._tempIndex),p=h&&h.itemIndex;if(l.canMoveRow(!1,!1)&&0<=p)return d=!1,_=l.getSelection(),(f=l.getBodyCellAt(h,!0)).expander===t?null:(s&&(re.Utils.isIE||re.Utils.isEdge)&&(s=n),_?(d=_.containsItem(p))&&!s&&(d=_.containsLayout(h.layout)&&this._canMoveRowAt(c,h,i)):e&&p==e.itemIndex&&(d=!!s||_t.CellIndex.areEquals(h,e)&&this._canMoveRowAt(c,h,i)),d?this._rowMoveReq.init(_,p):void 0)}else if(c instanceof Me.GridHeadElement){r=c.boundsByContainer();if(l.header.resizable&&o<=r.bottom+1&&o>=r.bottom-2)return this._headerResizeReq.init(r.top,o-r.bottom-1)}},P.prototype.$_resizeSelection=function(t,e,i){var o=this.grid.selections,n=t?t.runStyle:i;!W.isSingleSelectionStyle(n)&&re.Utils.included(i,W.SelectionStyle.ROWS,W.SelectionStyle.COLUMNS,W.SelectionStyle.SINGLE_COLUMN)&&(n=i),t?(t.runStyle!=n&&(this.grid.selections.clear(),i=t.getBounds(),t=o.add(i.firstCell,i.lastCell,n)),o.canResize(t)&&t.resizeTo(e)):o.add(e,e,n)},P.prototype._canMoveRowAt=function(t,e,i){return i<t.boundsByContainer(t.getCellRectAt(this.grid.layoutManager,e,!1)).x+20},P.prototype.$_getRowResizeRequest=function(t,e,i,o,n,r,s){var a=-1,l=this.grid;if(t instanceof qe.RowBarContainer?a=e.parentElement.$_row:t instanceof gt.GridBodyElement&&(l.rowBarContainer.isVisible()||t.rightFixed||(0<l.fixedOptions.colCount&&t.fixed||0===l.fixedOptions.colCount)&&0===e.cellIndex&&(a=e.parentElement.$_row)),!(a<0)){var h=l.layoutManager,e=l.displayOptions,d=e.eachRowResizable&&!n,u=h.fixedItemCount,c=h.contentBounds.y,_=t.boundsByContainer(this._tempRect.setWidth(t.width));if(!(_.width<=0||i<_.x||i>=_.right))if(a<u){if(l.fixedOptions.rowResizable&&(!e.dataHeights||e.dataHeights.length<=0)&&((_=h.getItemRect(a)).y+=c,o<=_.bottom+2)&&o>=_.bottom-3)return this._rowResizeReq.init(a,d,_.y,o-_.bottom-1)}else if(e.rowResizable&&(!e.dataHeights||e.dataHeights.length<=0))for(var p=h.itemCount,f=l.topIndex,g=0;g<p;g++){var m=g+f+u;if(m==a&&((_=h.getItemRect(g+u)).y+=c,o<=_.bottom+2)&&o>=_.bottom-3)return this._rowResizeReq.init(m,d,_.y,o-_.bottom-1)}}return null},P.prototype._getDragTracker=function(t,e,i){if(t instanceof j.SelectRequest)switch(t.style){case W.SelectionStyle.ROWS:return new Te.RowsSelectTracker(t,e,i);case W.SelectionStyle.COLUMNS:return new Te.ColumnsSelectTracker(t,e,i);case W.SelectionStyle.BLOCK:return new Te.BlockSelectTracker(t,e,i)}else{if(t instanceof j.ColumnResizeRequest)return new Re.ColumnResizeTracker(t,this._cellResizer);if(t instanceof j.ColumnMoveRequest)return new Re.ColumnMoveTracker(t,this._cellFeedback,this._cellMover);if(t instanceof j.RowResizeRequest)return new Re.RowResizeTracker(t,this._cellResizer);if(t instanceof j.RowMoveRequest)return new Re.RowMoveTracker(t,this._rowMoverProxy,this._rowMoverLine);if(t instanceof j.HeaderResizeRequest)return new Re.HeaderResizeTracker(t,this._cellResizer)}return null},P.prototype.$_checkCellClicked2=function(t,e){if(t!==e.target&&t.firstElementChild!==e.target){var i=re.getWin(t),o=this.grid,n=o.rowBarContainer.getCheckBox(t);if(o.editOptions.checkable){var r=o.getEditItem(),t=o.getItem(t.parentElement[ht.T_ROW]);if(r&&r.dataRow!==t.dataRow){var s=o.editOptions;switch(r.itemState){case rt.ItemState.APPENDING:o.commit(s.forceAppend);break;case rt.ItemState.INSERTING:o.commit(s.forceInsert);break;case rt.ItemState.UPDATING:o.commit(s.commitWhenNoEdit)}}e.target instanceof i.HTMLSpanElement&&(n.checked=o.checkBar.exclusive||!n.checked),this._doCheck(n,t,e.shiftKey)}else e.preventDefault()}},P.prototype._doCheck=function(t,e,i){var o=this.grid,n=o.checkBar,r=o.rowBarContainer.checkBar;if(o.editOptions.checkable){var s=o.checkBar;if(e.checkable&&(s.showGroup||0<=e.dataRow)&&t){var a=r._prevChecked,l=void 0,h=void 0,d=[],u=-1,c=-1,_=void 0;if(i&&0<=a&&!n.exclusive||s.merged){i&&0<=a?(l=_t.CellIndex.temp(o,a,null),h=o.getItem(a).checked,c=s.merged?(u=(_=s.merges.getRoom(l))?_.head:a,_?_.tail:a):(u=a,e.index)):(h=t.checked,u=c=e.index,r.$_setPrevChecked(e.index),n.exclusive&&o.itemSource._clearChecked());for(var c=s.merged?(l=_t.CellIndex.temp(o,e.index,null),_=s.merges.getRoom(l),u=Math.min(_?_.head:e.index,u),Math.max(_?_.tail:e.index,c)):(u=Math.min(u,e.index),Math.max(u,c)),p=u;p<=c;p++){var f=o.getItem(p);f.checkable&&0<=f.dataRow&&d.push(f)}0<d.length&&o.itemSource.checkItems(d,h,!0)}else o.itemSource.checkItem(e,t.checked,s.exclusive,!0),r.$_setPrevChecked(e.index)}}},P.prototype._checkAllClicked=function(){var t,e,i=this.grid;!i.empty&&i.editOptions.checkable&&(t=i.checkBar,e=i.headView,t.showAll)&&!t.exclusive&&(e.allChecked=!e.allChecked,i.itemSource.checkAll(e.allChecked,t.visibleOnly,t.checkableOnly,!0,t.showGroup&&!t.merged&&t.fieldIndex<0))},P.prototype._doColumnHeaderClicked=function(t,e){var i,o,n,r,s;O.prototype._doColumnHeaderClicked.call(this,t,e),2!=t.button&&(i=e instanceof ct.CellLayoutColumnItem?e.getDataColumn():null,n=(o=this.grid).getHeaderView(this._clickCell).tableCellByCell(this._clickCell),i?t.target===n.check?(n.check.checked=i.checked=!i.checked,o._columnCheckedChanged(i)):t.target===n.filter&&i.hasFilters?o.selectColumnFilters(n):t.target===n.popup?(r=i.header.popupMenuName,s=o.getCellViewOf(n.cell),r&&s&&o.popupMenuManager.show(r,s,null)):re.Utils.isClickableTemplate(n.cell,t.target)||!i.sortable||!o.sortingOptions.enabled||this.dragTracker instanceof Te.ColumnsSelectTracker||o.sortColumn(i,t):e instanceof ct.CellLayoutGroupItem&&t.target===n.expander&&e.expandable&&(e.expanded=!e.expanded))},P.prototype.$_columnHeaderClicked=function(t,e){t.button;this._doColumnHeaderClicked(t,e),t.preventDefault()},P.prototype.$_gridCellClicked=function(t){this.grid._fireCellClicked(t)},P.prototype.$_gridCellDblClicked=function(t){this.grid._fireCellDblClicked(t)},P.prototype.$_setHoveredCell=function(t,e,i){var o,n,r,s=this.grid,a=this._findTableCell();t&&a&&(n=s.getTableView(a),o=this.$_getIndexAt(s,s.layoutManager,n,a,i),t===this._tooltipCell&&_t.CellIndex.areEquals(this._tooltipIndex,o)||(this._hideTooltip(e,i),this._tooltipShowTimer&&clearTimeout(this._tooltipShowTimer),n=s.displayOptions.hintDelay,t&&(0<n?(r=this)._tooltipShowTimer=setTimeout(function(){r.$_showTooltip2(t,o)}.bind(r),n):this.$_showTooltip2(t,o))))},P.prototype._hideTooltip=function(t,e){this.grid.tooltipManager.close(t,e),this._tooltipCell=null,this._tooltipIndex.reset()},P.prototype.$_showTooltip2=function(t,e){re.Utils.trace("TOOLTIP...");var i=this.grid,o=i.validationManager.getError(e),n=this._tooltipOptions;i.editOptions.hintOnError&&o?(n.message=o&&o.message,this.$_showTooltip(t,e,n)):(o=t.renderer2,(t.item.isDataRow||t.item instanceof q.MergedGroupHeader)&&(!re.Utils.isMobile()||i.mobileOptions.showTooltip)&&o&&o.showTooltip&&!_t.CellIndex.areEquals(e,this._tooltipIndex)&&((n=o.getTooltip(t,e))||i.displayOptions.showEmptyTooltip)&&(o=i._fireShowTooltip(e,n))&&(this._tooltipOptions.assignFrom(o),this.$_showTooltip(t,e,this._tooltipOptions)))},P.prototype.$_showTooltip=function(t,e,i){var o,n=this.grid,r=n.tooltipManager,s=n.layoutManager;r.visible&&this._tooltipCell==t||(this._hideTooltip(),o=(n=n.getBodyView(t.cell)).getCellRectAt(s,e,!1),o=n.boundsByContainer(o),n=t.layout.isFixed?o.x:Math.max(o.x,s.nonFixedBounds.x),s=o.y+o.height,r.show(i,n,s,o.height,!1),this._tooltipCell=t,this._tooltipIndex.assign(e))},P.prototype.$_showStateError=function(t,e){var i=this.grid,o=i.tooltipManager,n=i.layoutManager,r=this._tooltipOptions;t!==this._tooltipCell&&(this._hideTooltip(),r.message=e,e=i.focusedIndex.itemIndex,i=i.rowBarContainer.boundsByContainer(),e=n.getItemBounds(e<n.fixedItemCount?e:e-n.topIndex),o.show(r,i.x,i.y+e.bottom,e.height,!0),this._tooltipCell=t,this._tooltipIndex.assign(null))},P.prototype.$_setHoveredHeaderCell=function(t,e,i){var o;t!=this._tooltipCell&&(this._hideTooltip(e,i),this._tooltipShowTimer&&clearTimeout(this._tooltipShowTimer),0<(e=this.grid.displayOptions.hintDelay)?(o=this)._tooltipShowTimer=setTimeout(function(){o.$_showHeaderTooltip2(t)}.bind(o),e):this.$_showHeaderTooltip2(t))},P.prototype.$_showHeaderTooltip2=function(t){var e,i=this.grid,o=i.header.showTooltip;!1!==o&&this._tooltipCell!=t&&(e=t&&t.showTooltip,void 0===o?e:!1!==e)&&(o=t.tooltip||t.text)&&(e=i._fireShowHeaderTooltip(t.layout.firstColumn,o))&&(this._tooltipOptions.assignFrom(e),this.$_showHeaderTooltip(t,this._tooltipOptions))},P.prototype.$_showHeaderTooltip=function(t,e){var i,o=this.grid,n=o.tooltipManager,o=o.layoutManager;n.visible&&this._tooltipCell==t||(this._hideTooltip(),i=o.getHeaderCellRect(t.layout,!1),o=t.layout.isFixed?i.x:Math.max(i.x,o.nonFixedBounds.x),i=i.y+i.height,n.show(e,o,i,0,!0),this._tooltipCell=t)},P.prototype.$_cellButtonClicked=function(t){var e=this.grid,i=t.layout.firstColumn;if(i){var o=e.layoutManager,n=t.getEditIndex(this._tempIndex);o.getMergeRoom(n);switch(i.button){case ht.CellButton.POPUP:var r=i.popupMenuName,s=e.getCellViewOf(t.cell);r&&s&&e.popupMenuManager.show(r,s,n);break;case ht.CellButton.ACTION:e._doCellButtonClicked(n)}}},P.prototype.$_commitCancel=function(e,i){var o=this.grid;try{switch(e.itemState){case rt.ItemState.INSERTING:return o.commit(i.forceInsert)||o.cancel(!0),!0;case rt.ItemState.APPENDING:return o.commit(i.forceAppend)||o.cancel(!0),!0;case rt.ItemState.UPDATING:return o.commit(i.commitWhenNoEdit)||o.cancel(!0),!0}}catch(t){if(t instanceof G.ValidationError)return(t=o._fireValidationFail(e.index,t.column,t))&&alert(i.showOnlyValidationMessage&&t.userMessage?t.userMessage:t.toString()),!1;if(t instanceof G.AbortError)return!1;throw t}return!1},P.prototype.$_checkAppending=function(t,e,i){void 0===e&&(e=!1),void 0===i&&(i=null);var o=this.grid;if(t.itemIndex==o.itemCount-1&&rt.ItemState_isInserting(t.item.itemState)){var n=t.itemIndex;if(!i||i.itemIndex!=n){try{o.commit(o.editOptions.forceAppend,!0)?((t=t.clone()).itemIndex=n,o.isValid(t)||(t.itemIndex=o.getItemIndexOfRow(o.dataSource.rowCount-1)),this.setFocused(t,!0,!0)):e&&(o.cancel(!0),i)&&this.setFocused(i,!0,!0)}catch(t){if(t instanceof G.ValidationError)return(t=o._fireValidationFail(n,t.column,t))&&alert(o.editOptions.showOnlyValidationMessage&&t.userMessage?t.userMessage:t.toString()),!0;if(t instanceof G.AbortError)return!0;throw t}return!0}}return!1},P.prototype._stopTapTracker=function(t){if(this.dragTracker)try{this.dragTracker=null}catch(t){throw t}},P.prototype._getTouchRequest=function(t){var e=this.grid,i=e.selectionLayer;if(i instanceof Xe.MobileSelectionLayer){i=i.getSelectHandle(t.target);if(i)return this._touchSelectRequest.handle=i,this._touchSelectRequest}var i=e.getCellViewOf(t.target);return"data"!==e.getCellType(i)||(i=e.getBodyCellbyCell(t.target))&&i.isEditButton(t.target)?void 0:this._touchScrollRequest},P.prototype._getTouchTracker=function(t,e,i){if(!re.Utils.isMobile())return null;var o=re.getWin(t.target);if(t.target instanceof o.HTMLInputElement)return null;o=this._getTouchRequest(t);if(o instanceof Ae.TouchScorllRequest)this._touchScrollTracker.request=o,this.dragTracker=this._touchScrollTracker,this.touchManager.swipeHandler=this.onSwipeHandler.bind(this);else{if(!(o instanceof Ae.TouchSelectRequest))return t=this.mouseEventTarget,o=this._getEditRequest(t,null,e,i,!1,!1,!1)||this._getSelectRequest(t,e,i,!1,!1,!1),(t=this._getDragTracker(o,e,i))?(this.dragTracker=t,this.dragTracker):void 0;this._touchSelectTracker.request=o,this.dragTracker=this._touchSelectTracker}},P.prototype.onTouch=function(t,e,i){clearInterval(this._swipeTimer),this.touchManager.swipeHandler=null,this._stopTapTracker(!1);var o=this.grid,n=this._clickCell=o.getCellViewOf(t.target);return n&&o.getCellType(n)&&o.container._containerDom.focus({preventScroll:!0}),o.closePopups(),this._getTouchTracker(t,e,i),this.dragTracker||null},P.prototype.onTouchEnd=function(t,e,i){var o=this.grid.cellToIndex(t.target);this.grid.editController.buttonUp(o,t)},P.prototype.onTap=function(t,e,i){if(re.Utils.isiOS&&this.touchManager){var o=re.Utils.getTimer();if(this.touchManager.touchEndt+50>o)return}o=this.grid;this._clickCell=o.getCellViewOf(t.target),this._hideTooltip(),o.closeFilterSelector()},P.prototype.onDoubleTapHandler=function(t,e,i){var o=this.grid,n=this._clickCell;"data"===o.getCellType(n)&&(t.mouseX=e,t.mouseY=i,this.dblclick(t),t.preventDefault())},P.prototype.onLongTapHandler=function(t,e,i){var o=this.grid,n=o.cellToIndex(t.target),r=this.grid.getBodyCellbyCell(t.target);if(r&&r.isEditButton(t.target))return this.setFocused(n,!0,!0),r.editable&&!r.readonly&&o.editController.buttonDown(n,t),!0},P.prototype.onDragStartHandler=function(t,e,i,o){var n=this.dragTracker;return n&&n.start(null,i,o)?n:null},P.prototype.onDragHandler=function(t,e,i,o){var n=this.dragTracker,r=!1;if(n&&n.dragging&&!((r=n.drag(this.mouseEventTarget,i,o))||n instanceof Ae.TouchScrollTracker)){var s=n.getNextRequest(i,o);if(s)return this._stopDragTracker(i,o,!0),this.dragTracker=this._getDragTracker(s,i,o),this._startDragTracker(i,o,null),!!this.dragTracker;this._stopDragTracker(i,o,!0),n.cancel()}return r},P.prototype.onDragEndHandler=function(t,e,i){this._stopDragTracker(t,e,i)},P.prototype.onSwipeHandler=function(t,e,i,o){var n=this.grid;if(n.getTableView(this._clickCell)instanceof gt.GridBodyElement){var r=1;switch(i){case"right":n.leftPos=n.leftPos-e/20;break;case"left":n.leftPos=n.leftPos+e/20;break;case"bottom":r=-1;case"top":this._swipeDistance=r*e/20,this._swipeDuration=t,this._swipePrev=this._swipeStarted=re.Utils.getTimer(),this._swipeAmount=0,this._swipeTimer=setInterval(this.$_scrollRow.bind(this),50)}}},P.prototype.$_scrollRow=function(){var t,e=re.Utils.getTimer();!(10<Math.abs(this.touchManager._scrollY-window.scrollY))&&e-this._swipeStarted<this._swipeDuration?(t=e-this._swipePrev,t=Math.floor((this._swipeDistance-this._swipeAmount)*t/this._swipeDuration),this._swipeAmount-=t,this._swipePrev=e,this.grid.topIndex+=t):clearInterval(this._swipeTimer)},P.prototype.$_createTouchManager=function(t,e){return re.Utils.isMobile()?((t=new He.SingleTouchManager(t,e)).touchEndHandler=this.onTouchEnd.bind(this),t.touchHandler=this.onTouch.bind(this),t.tapHandler=this.onTap.bind(this),t.doubleTapHandler=this.onDoubleTapHandler.bind(this),t.longTapHandler=this.onLongTapHandler.bind(this),t.dragStartHandler=this.onDragStartHandler.bind(this),t.dragHandler=this.onDragHandler.bind(this),t.dragEndHandler=this.onDragEndHandler.bind(this),t):null};var O,B=P;function P(t,e){var e=O.call(this,t,e)||this,i=(e._tooltipOptions=new $e.TooltipOptions,e._checkScroll=Date.now(),e._prevScroll=Date.now(),e._wheelDeltaY=0,e._tempRect=new nt.Rectangle,e._reqPoint=new he.Point,e._swipeTimer=null,e._swipeDistance=0,e._swipeDuration=0,e._swipeStarted=null,e._swipePrev=void 0,e._swipeAmount=0,t.doc),o=e.grid;return e._cellResizer=new c(i),e._cellMover=new v(i),e._cellFeedback=new g(i),e._rowMoverLine=new x(i),e._rowMoverProxy=new E(i),e._colResizeReq=new j.ColumnResizeRequest(o),e._colMoveReq=new j.ColumnMoveRequest(o),e._rowResizeReq=new j.RowResizeRequest(o),e._headerResizeReq=new j.HeaderResizeRequest(o),e._rowMoveReq=new j.RowMoveRequest(o),e._tooltipIndex=new _t.CellIndex(o),e._touchManager=e.$_createTouchManager(t,o.mobileOptions),re.Utils.isMobile()&&(e._touchScrollRequest=new Ae.TouchScorllRequest(o),e._touchScrollTracker=new Ae.TouchScrollTracker(o),e._touchSelectRequest=new Ae.TouchSelectRequest(o),e._touchSelectTracker=new Ae.TouchSelectTracker(o)),e}t.GridSelectionTool=B})),Ke=(t(R),R.ClickData,R.FocusView,R.FocusMask,R.RowBlockView,R.HeaderCellResizer,R.HeaderCellFeedback,R.HeaderCellMover,R.RowMoverLine,R.RowMoverProxy,R.GridTool,R.RowHoverView,R.RowFocusView,R.GridSelectionTool,e(function(t,e){Object.defineProperty(e,"__esModule",{value:!0});i=se.Base,ne.__extends(n,i),n.prototype._doDispose=function(){this._grid=null,i.prototype._doDispose.call(this)},_dp(n,"grid",{get:function(){return this._grid}}),n.prototype.getDefaultCellEditor=function(){var t;return this._defaultEditor||(t=this._grid.container._container,this._defaultEditor=new L.LineCellEditor(this._grid,t),this._defaultEditor.setController(this._grid.editController)),this._defaultEditor},n.prototype.getCellEditor=function(t){var e=this._grid.container._container,i=this._cellEditors[t];if(!i){switch(t){case"list":case"dropdown":i=new de.DropDownCellEditor(this._grid,e);break;case"nlist":i=new de.NativeListCellEditor(this._grid,e);break;case"multiline":i=new L.MultiLineCellEditor(this._grid,e);break;case"number":i=new L.NumberCellEditor(this._grid,e);break;case"date":i=new Be.DateCellEditor(this._grid,e);break;case"btdate":i=new Be.BTDateCellEditor(this._grid,e);break;case"search":i=new de.SearchCellEditor(this._grid,e);break;case"checklist":i=new de.MultiCheckCellEditor(this._grid,e);break;case"password":i=new L.PasswordCellEditor(this._grid,e);break;case"ndate":i=new Be.NativeDateCellEditor(this._grid,e);break;default:i=this.getDefaultCellEditor()}(this._cellEditors[t]=i)&&i.setController(this._grid.editController)}return i},n.prototype.$_checkFlexible=function(t,e){if(!re.Utils.ieOld&&!re.Utils.ieTen)return t&&t.flexible||e&&e.flexible},n.prototype.createRenderer=function(t,e,i){var o,n=null;if(t){switch(t){case at.TextCellRenderer.TYPE:n=new at.TextCellRenderer;break;case at.BarCellRenderer.TYPE:n=new at.BarCellRenderer;break;case at.ImageCellRenderer.TYPE:n=new at.ImageCellRenderer;break;case at.IconCellRenderer.TYPE:n=new(this.$_checkFlexible(e,i)?at.FlexIconCellRenderer:at.IconCellRenderer);break;case at.CheckCellRenderer.TYPE:n=new(this.$_checkFlexible(e,i)?at.FlexCheckCellRenderer:at.CheckCellRenderer);break;case at.ButtonCellRenderer.TYPE:n=new at.ButtonCellRenderer;break;case at.ShapeCellRenderer.TYPE:n=new(this.$_checkFlexible(e,i)?at.FlexShapeCellRenderer:at.ShapeCellRenderer);break;case at.LinkCellRenderer.TYPE:n=new at.LinkCellRenderer;break;case at.SignalBarCellRenderer.TYPE:n=new at.SignalBarCellRenderer;break;case at.Code39CellRenderer.TYPE:n=new at.Code39CellRenderer;break;case at.Code128CellRenderer.TYPE:n=new at.Code128CellRenderer;break;case ft.SeriesTextCellRenderer.SERIES_TYPE:n=new ft.SeriesTextCellRenderer;break;case ft.SparkLineRenderer.TYPE:n=new ft.SparkLineRenderer;break;case ft.SparkColumnRenderer.TYPE:n=new ft.SparkColumnRenderer;break;case ft.SparkWinLossRenderer.TYPE:n=new ft.SparkWinLossRenderer;break;case Wt.TemplateCellRenderer.TYPE:n=new Wt.TemplateCellRenderer}(n=n?n:"function"==typeof(o=this._customRenderers[t])?new o(t):new Ue.CustomCellRendererImpl(o,t))||(re.Utils.log("Renderer type is invalid: "+t),n=new at.TextCellRenderer),e&&n.assignFrom(e),i&&n.assignFrom(i)}return n},n.prototype.addCustomRenderer=function(t,e){t&&e&&(this._customRenderers[t]=e)},n.prototype.removeCustomRenderer=function(t){delete this._customRenderers[t]},n.prototype.existsCustomRenderer=function(t){return this._customRenderers.hasOwnProperty(t)},n.prototype.clearCustomRenderers=function(){this._customRenderers={}};var i,o=n;function n(t){var e=i.call(this)||this;return e._cellEditors={},e._customRenderers={},e._grid=t,e}e.GridDelegate=o})),Je=(t(Ke),Ke.GridDelegate,e(function(t,e){Object.defineProperty(e,"__esModule",{value:!0});i=P.EventAware,ne.__extends(n,i),_dp(n,"id",{get:function(){return this._id}}),n.prototype.exists=function(t){return!1},n.prototype._changed=function(){this.fireEvent(n.CHANGED)},n.CHANGED="onLookupSourceChanged";var i,o=n;function n(t){var e=i.call(this)||this;return e._id=t,e}e.LookupSource=o;r=o,ne.__extends(a,r),a.prototype._doDispose=function(){this._tree=this._listMap=null,r.prototype._doDispose.call(this)},a.prototype.clear=function(){this._tree=this._listMap={},this._changed()},a.prototype.exists=function(t){var e;if((t=re.Utils.makeArray(t))&&0<(e=t.length)&&e<=this._levels){if(0<(e=Math.min(e,this._levels)-1)){for(var i=this._tree,o=0;o<e&&(i=i[t[o]]);o++);return null!=i&&i.hasOwnProperty(t[e])}return this._tree.hasOwnProperty(t[0])}return!1},a.prototype.fill=function(t,e){if(t&&0<t.length&&e&&0<e.length){for(var i=Math.min(t.length,e.length),o=0;o<i;o++){var n=re.Utils.makeArray(t[o]);this.$_add(n,e[o])}this._changed()}},a.prototype.fillRows=function(t){if(t&&0<t.length){for(var e=0,i=t.length;e<i;e++)this.$_addRow(t[e]);this._changed()}},a.prototype.add=function(t,e){t&&(this.$_add(t,e),this._changed())},a.prototype.addRow=function(t){t&&(this.$_addRow(t),this._changed())},a.prototype.lookup=function(t,e){if(1<this._levels){var i=void 0,o=this._levels-1,n=this._tree;for(i=0;i<o&&(n=n[t[i]]);i++);}else n=this._tree;var r=t[t.length-1];if(n&&r&&e){for(var s=r.split(e),a=[],i=0,l=s.length;i<l;i++)a.push(n[s[i]]||s[i]);return a.join(e)}return n?n[r]:void 0},a.prototype.getDomain=function(t){if(!t||t.length!=this._levels-1)throw new Error("Keys length must be "+(this._levels-1));var e=this._tree,i=[],o=[];if(1<this._levels)for(s=0,r=t.length;s<r;s++)if(!(e=e[t[s]]))return{keys:i,values:o};if(this._listMap)for(var n=this._listMap[t.slice(0,t.length).join("~!~")],r=n?n.length:0,s=0;s<r;s++)i.push(n[s]),o.push(e[n[s]]);else for(var a in e)i.push(a),o.push(e[a]);return{keys:i,values:o}},a.prototype.getTextDomain=function(t){for(var t=this.getDomain(t),e=t.keys,i=t.values,o=0,n=t.keys.length;o<n;o++)e[o]=e[o]?String(e[o]):null,i[o]=i[o]?String(i[o]):null;return t},a.prototype.$_add=function(t,e){if(t){t=re.Utils.makeArray(t);var i,o,n,r=this._levels;if(t.length<r)throw Error("Keys length must be equals or greater than "+r);for(var s,a=this._tree,l=0;l<r-1;l++)(n=a[o=t[l]])||(a[o]=n={}),a=n;a[i=t[r-1]]=e,this._listMap&&(e=t.slice(0,t.length-1).join("~!~"),s=this._listMap[e],re.Utils.isArray(s)||(this._listMap[e]=s=[]),s.push(i))}},a.prototype.$_addRow=function(t){if(t){if(t.length-1<this._levels)throw Error("Keys length must be equals or greater than "+this._levels);var e=t[this._levels];t=t.slice(0,this._levels),this.$_add(t,e)}};var r,s=a;function a(t,e,i){void 0===e&&(e=0),void 0===i&&(i=!1);t=r.call(this,t)||this;if(e<1)throw new Error("LookupTable levels must be equals or greater than 1");return t._levels=e,t._tree={},t._listMap=i?{}:null,t}l=P.EventAware,ne.__extends(h,l),h.prototype._changed=function(){this.fireEvent(h.CHANGED)},h.CHANGED="onLookupSourceProviderChanged";var l,o=h;function h(){return l.call(this)||this}e.LookupSourceProvider=o;d=o,ne.__extends(u,d),u.prototype.dispose=function(){return d.prototype.dispose.call(this)},u.prototype.load=function(t){if(t=re.Utils.makeArray(t)){this._sources={};for(var e=0,i=t.length;e<i;e++)this.$_add(t[e]);this._changed()}},u.prototype.add=function(t){t=this.$_add(t);return t&&this._changed(),t},u.prototype.remove=function(t){this.$_remove(t)&&this._changed()},u.prototype.getSource=function(t){return this._sources[t]},u.prototype.$_createSource=function(t){var e;return t?((e=new s(t.id,t.levels,t.ordered)).fill(t.keys,t.values),e):null},u.prototype.$_add=function(t){if(t&&t.id&&this._sources[t.id]!=t){var e=this.$_createSource(t);if(e)return this.$_remove(t.id),(this._sources[t.id]=e).addListener(this),e}},u.prototype.$_remove=function(t){if(t){var e=this._sources[t];if(e)return e.removeListener(this),delete this._sources[t],!0}return!1},u.prototype.onLookupSourceChanged=function(t){this._changed()},u.CHANGED="onLookupSourceProviderChanged";var d,o=u;function u(t){void 0===t&&(t=null);var e=d.call(this)||this;return e._sources={},t&&e.load(t),e}e.LocalLookupSourceProvider=o})),Ze=(t(Je),Je.LookupSource,Je.LookupSourceProvider,Je.LocalLookupSourceProvider,e(function(t,e){Object.defineProperty(e,"__esModule",{value:!0});i=P.EventAware,ne.__extends(n,i),n.prototype._doDispose=function(){return i.prototype._doDispose.call(this)},_dp(n,"visible",{get:function(){return this._visible},set:function(t){this._visible=t}}),_dp(n,"enabled",{get:function(){return this._enabled&&!this.isSeparator()},set:function(t){this._enabled=t}}),_dp(n,"label",{get:function(){return this._label},set:function(t){this._label=t}}),_dp(n,"tag",{get:function(){return this._tag},set:function(t){this._tag=t}}),_dp(n,"group",{get:function(){return null}}),_dp(n,"styleName",{get:function(){return this._styleName},set:function(t){this._styleName=t}}),_dp(n,"manager",{get:function(){return null}}),_dp(n,"type",{get:function(){return null}}),_dp(n,"checked",{get:function(){return null}}),n.prototype.click=function(){},n.prototype.isSeparator=function(){return!1};var i,o=n;function n(t){var e=i.call(this)||this;return e._visible=!0,e._enabled=!0,t&&e.assignFrom(t),e}r=o,ne.__extends(s,r),s.prototype._doDispose=function(){this._parent=null,this._callback=null,r.prototype._doDispose.call(this)},_dp(s,"type",{get:function(){return this._type},set:function(t){this._type=t}}),_dp(s,"group",{get:function(){return this._group},set:function(t){this._group=t}}),_dp(s,"checked",{get:function(){return this._checked},set:function(t){this._checked=t}}),_dp(s,"callback",{get:function(){return this._callback},set:function(t){this._callback=t}}),_dp(s,"parent",{get:function(){return this._parent},set:function(t){this._parent=t}}),s.prototype.isSeparator=function(){return"-"===this._label||this._type===ht.MenuItemType.SEPARATOR},s.prototype.getData=function(){return{label:this._label,checked:this._checked,enabled:this._enabled,tag:this.tag}},s.prototype.click=function(){"check"===this._type&&(this._checked=!this._checked),this._parent&&this._parent.itemClicked(this)},_dp(s,"manager",{get:function(){return this._parent.manager}}),s.prototype._itemClicked=function(t){};var r,d=s;function s(t,e){e=r.call(this,e)||this;return e._parent=t,e}e.PopupMenuItem=d;a=o,ne.__extends(l,a),l.prototype._doDispose=function(){this._items&&this._items.forEach(function(t,e){t.dispose()}),this._items=null,this._parent=null,a.prototype._doDispose.call(this)},_dp(l,"name",{get:function(){return this._name},set:function(t){this._name=t}}),_dp(l,"items",{get:function(){return this._items}}),_dp(l,"parent",{get:function(){return this._parent}}),_dp(l,"manager",{get:function(){for(var t=this._parent;t;){if(t.popupMenuManager instanceof f)return t.popupMenuManager;if(t instanceof f)return t;t=t._parent}return null}}),l.prototype.count=function(){return this._items?this._items.length:0},l.prototype.itemClicked=function(t){if(t.parent==this&&t.type===ht.MenuItemType.RADIO){var e=t.group,i=void 0;if(e){for(var o=0;o<this._items.length;o++)(i=this._items[o])instanceof d&&i.type===ht.MenuItemType.RADIO&&i.group===e&&(i.checked=!1);t.checked=!0}}var n=this.manager.grid;"function"==typeof t.callback?t.callback.call(this,n.handler,t.toProxy(),this.manager.clickData):this._parent instanceof f?this._parent.doMenuItemClick(t,this.manager.clickData):this._parent.onMenuItemClick?this._parent.onMenuItemClick(t,this.manager.clickData):this._parent.itemClicked(t)},l.prototype._load=function(t){var e=[];if(t)for(var i=0,o=t.length;i<o;i++){var n=t[i];n=new(re.Utils.isArray(n.children)&&0<n.children.length?l:d)(this,n),e.push(n)}return e},l.CLICKED="onPopupMenuClicked";var a,_=l;function l(t,e){var i=a.call(this,e)||this;return i._name=e.name,i._parent=t,i._items=i._load(e.children),i}e.PopupMenu=_;h=P.EventAware,ne.__extends(u,h),u._borrowView=function(t){var e=u.$_views[t.$_hash]||[];return(u.$_views[t.$_hash]=e).pop()||new u(t)},u._returnView=function(t){u.$_views[t._container.$_hash].push(t)},u.prototype._doDispose=function(){h.prototype._doDispose.call(this)},_dp(u,"parentView",{get:function(){return this._parentView},set:function(t){this._parentView=t}}),_dp(u,"childView",{get:function(){return this._childView},set:function(t){this._childView=t}}),_dp(u,"currDiv",{get:function(){return this._currDiv}}),_dp(u,"manager",{get:function(){return this._menu.manager}}),u.prototype.getElementId=function(){return"rg-popup-"+this._menu.name},u.prototype.show=function(t,e,i,o,n,r,s,a){if(!this._showing){this._showing=!0;try{var l=i.parent;for(this._containerElement=t._container,this._parentView=e,this._firstItem=null,this._menu=i;l._parent&&!(l instanceof pi.GridBase);)l=l.parent;l&&(this._viewGridInside=l instanceof pi.GridBase?l.editorOptions.viewGridInside:l instanceof f&&l.grid.editorOptions.viewGridInside),this.$_show(t,this._menu,o,n,r,s)}finally{this._showing=!1}}},u.prototype.boundsByContainer=function(){return null},u.prototype.hide=function(t){(t=void 0===t?!0:t)&&this._parentView?this._parentView.hide(!0):(this.$_hideChildView(),re.Utils.detach(this._element))},u.prototype.hideChild=function(){this.$_hideChildView()},u.prototype.changeItemIndex=function(t){var e,i=this._itemIndex,o=this._menu._items;if(0==t)this._itemIndex=-1,this.$_refreshItems(this._itemIndex);else if(o&&!(i>=o.length)){for(;;)if(!(e=o[i+=t])||e.enabled)break;e&&(this._itemIndex=i,this.$_refreshItems(this._itemIndex))}},u.prototype.getActiveElementId=function(){var t=this._menu._items[this._itemIndex];return t?t._elementId:""},u.prototype.menuItemClicked=function(t){this._menuItemClicked(t)},u.prototype.$_show=function(t,e,i,o,n,r){if(this._element){var s=t.doc,a=re.getDocWin(s),l=this._element,h=l.style,d=this.manager,u=t.gridView.displayOptions.baseZindex,c=(this._element.style.zIndex=String(u+4),d.dropdownCount),u=this._viewGridInside?t._container:s.documentElement,_=(l.id="rg-popup-"+this._menu.name,this._menu=e,this._itemIndex=-1,re.Utils.clearElements(this._element),this.$_buildItems(e),re.Utils.disableSelection(l),u.appendChild(l),0);if(c&&e.items.length>c)for(var p=0,f=0;p<e.items.length&&f<c;p++){var g=this._element.children[p];g.menuItem.isSeparator()||(_+=g.offsetHeight,f++)}0<_&&_<l.offsetHeight?(h.height=_+2+"px",h.overflow="auto"):(h.removeProperty("height"),h.overflow="hidden");var d=re.Utils.getBrowserSize(),u=re.Utils.ieTen||re.Utils.ieOld?re.Utils.getClientRect(s.body):re.Utils.getClientRect(s.documentElement),t=re.Utils.getClientRect(t._container),m=d.width,d=d.height,l=re.Utils.getClientRect(l),y=a.pageXOffset||s.documentElement.scrollLeft,a=a.pageYOffset||s.documentElement.scrollTop;s.documentElement.scrollWidth>s.documentElement.clientWidth&&(d-=18),s.documentElement.scrollHeight>s.documentElement.clientHeight&&(m-=18),this._viewGridInside?(l.height>=t.height&&(h.height=t.height-4+"px",h.overflow="auto",l=re.Utils.getClientRect(this._element)),o+t.top+l.height>t.bottom&&(o=this._parentView?t.bottom-l.height-t.top-3:o-l.height-r),i+t.left+l.width>t.right&&(i=this._parentView?t.right-l.width-t.left-3:i-l.width-n)):(this._parentView||(i+=t.left-u.left,o+=t.top-u.top),l.height>=d&&(h.height=d-4+"px",h.overflow="auto",l=re.Utils.getClientRect(this._element)),o+l.height>=d+a-3&&(o=o-l.height-3)<0&&(o=Math.max(0,d-l.height-3)),i+l.width>=m+y-3?i=Math.max(0,m-l.width-3):void 0!==n&&l.width<n&&(i+=n-l.width)),re.Utils.move(this._element,Math.max(0,i),Math.max(0,o))}},u.prototype._createElement=function(){var t=function(t){27==t.keyCode&&this.hide()}.bind(this),e=this._container.doc.createElement("div");return e.style.setProperty("position","absolute","important"),e.className="rg-popup-menu",e.setAttribute("role","listbox"),this._container.$_addListener(e,"keydown",t,!1),e},u.prototype._showChild=function(t){var e,i;this!=this.manager.showingView||this._childView&&this._childView._menu===t.menuItem||this._currDiv!==t||(this.$_hideChildView(),e=t.menuItem,i=this._element.getBoundingClientRect(),i=this._element.offsetLeft+i.width-4,t=this._element.offsetTop+t.offsetTop-this._element.scrollTop,this._childView=u._borrowView(this._container),this._childView.show(this._container,this,e,i,t))},u.prototype.$_hideChildView=function(){this.manager.showingView=null,this._childView&&(this._childView.$_hideChildView(),re.Utils.detach(this._childView._element),u._returnView(this._childView)),this._childView=null},u.prototype._menuItemActived=function(t){re.getWin(t);var e=(this._currDiv=t).menuItem,i=this.manager.showingView=this.manager.activeView=t.menuView;e instanceof d?i.childView&&i.$_hideChildView():e instanceof _&&e.enabled&&(this._timer&&clearTimeout(this._timer),this._timer=setTimeout(function(){i._showChild(t)},200))},u.prototype._menuItemDeactived=function(t){},u.prototype._menuItemClicked=function(t){var e=t.menuItem;e instanceof _?e.enabled&&this._showChild(t):e?e.enabled&&(this.hide(!0),e.enabled&&e.click(),this.manager.close()):this.$_hideChildView()},u.prototype.$_refreshItems=function(t){for(var e=this._element,i=0,o=e.childElementCount;i<o;i++){var n,r,s,a,l=e.childNodes[i];i===t?re.Utils.addClassName(l,"rg-popup-item-focused"):re.Utils.removeClassName(l,"rg-popup-item-focused"),i==t&&(n=l.offsetTop,r=l.offsetHeight+4,s=e.offsetHeight,n<(a=e.scrollTop)?e.scrollTop=Math.max(0,e.scrollTop+(n-a)):a+s<n+r&&(e.scrollTop=e.scrollTop+n+r-(a+s)),this._menuItemActived(l))}},u.prototype.$_buildItems=function(t){for(var e=t.items,i=[],o=this._container.doc,n=0,r=e.length;n<r;n++){var s,a,l=u.$_menuId++,h=e[n];h.visible&&((s=o.createElement("div")).menuView=this,s.menuItem=h,s.setAttribute("role","option"),s.id=h._elementId="rg-popup-item"+l,h instanceof d&&h.isSeparator()?(s.className="rg-popup-separator",(a=o.createElement("hr")).className="rg-popup-separator-hr",s.appendChild(a),s.onmouseover=function(t){this._menuItemActived(t.currentTarget)}.bind(this)):(this._firstItem||(this._firstItem=s),i.length=0,i.push("rg-popup-item"),h.group&&i.push("rg-popup-"+h.group),h.enabled||i.push("rg-popup-item-disable"),s.className=i.join(" "),s.onclick=function(t){this._menuItemClicked(t.currentTarget)}.bind(this),s.onmouseover=function(t){this._menuItemActived(t.currentTarget)}.bind(this),s.onmouseout=function(t){this._menuItemDeactived(t.currentTarget)}.bind(this),i=["rg-popup-content"],re.Utils.included(h.type,ht.MenuItemType.CHECK,ht.MenuItemType.RADIO)&&(h.checked?i.push(h.group?"rg-popup-radio-checked":"rg-popup-check-checked"):i.push(h.group?"rg-popup-radio":"rg-popup-check")),h.styleName&&i.push(h.styleName),h instanceof _&&i.push("rg-popup-expander"),(a=o.createElement("span")).id="$popupMenu_item_"+l,a.innerHTML=h.label,a.className=i.join(" "),re.Utils.disableSelection(a),s.appendChild(a)),re.Utils.disableSelection(s),this._element.appendChild(s))}},u.$_menuId=0,u.$_views={};var h,p=u;function u(t){var e=h.call(this)||this;return e._showing=!1,e._viewGridInside=!1,e._container=t,e._element=e._createElement(),e._element.addEventListener("contextmenu",function(t){t.preventDefault()}),e}e.PopupMenuView=p;c=P.EventAware,ne.__extends(g,c),g.prototype._doDispose=function(){this.close(),this._mainView=null,this._showingView=null,this._clickData=null,this._activeView=null,this._container=this._containerDom=null,c.prototype._doDispose.call(this)},_dp(g,"clickData",{get:function(){return this._clickData},set:function(t){this._clickData=t}}),_dp(g,"grid",{get:function(){return this._container.gridView}}),_dp(g,"dropdownCount",{get:function(){if(this._container&&this._container.gridView)return this._container.gridView.displayOptions.popupDropdownCount}}),_dp(g,"showingView",{get:function(){return this._showingView},set:function(t){this._showingView=t}}),_dp(g,"activeView",{get:function(){return this._activeView},set:function(t){this._activeView=t}}),g.prototype.popupManager=function(){return this},g.prototype.isShow=function(){return!!this._mainView},g.prototype.indexOf=function(t){for(var e=this._menus.length;e--;)if(re.Utils.compareTextValue(this._menus[e].name,t,!0,!1))return e;return-1},g.prototype.getMenu=function(t){for(var e=this._menus.length;e--;)if(re.Utils.compareTextValue(this._menus[e].name,t,!0,!1))return this._menus[e];return null},g.prototype.addMenu=function(t,e,i,o){if(void 0===i&&(i=!1),void 0===o&&(o=null),re.Utils.isWhiteSpace(t))throw"Menu name is empty.";var n;return 0<=(n=this.indexOf(t))&&!i?this._menus[n]:(o=new _(o||this,{name:t,children:e}),i&&-1<n?(this._menus[n].dispose(),this._menus[n]=o):this._menus.push(o),o)},g.prototype.removeMenu=function(t){if(-1<(i=this.indexOf(t)))for(var e=this._menus.splice(i,1),i=e.length;0<i;i--)e[i-1].dispose()},g.prototype.clearMenus=function(){this._menus.length=0},g.prototype.show=function(t,e,i){var o,n,r,s,a,l,h,d=this.grid,u=re.getWin(this._containerDom),c=i&&d.getBodyCellAt(i);"string"==typeof t?t=this.getMenu(t):t instanceof _||(t=new _(this,{children:t})),t&&(r=this.grid.container.getBound(),s=void 0,n=(s=(c?c.cellButton||c.merged&&c.head.cellButton||c.cell:e).getBoundingClientRect()).bottom,o=s.left-r.x,n=n-r.y,r=s.width,s=s.height,this._mainView=this._activeView=p._borrowView(this._container),e instanceof u.HTMLTableCellElement?(h=d.getCellType(e),l=d.getTableView(e),a=void 0,"data"===h?a=(c=c||l.bodyCellByCell(e)).grouped?R.ClickData.getItem("groupHeader",c.item.index,null):R.ClickData.getCell(h,c,i):"header"===h&&(c=l.layoutByCell(e),a=R.ClickData.getLayout(h,c)),this.clickData=a):e instanceof u.HTMLElement&&(i=d.getCellViewOf(e),c=(l=d.getTableView(i)).tableCellByCell&&l.tableCellByCell(i),"inlineFilter"===(h=d.getCellType(i)))&&(this.clickData=R.ClickData.getLayout(h,c.layout)),this._mainView.show(this._container,null,t,o,n,r,s),e&&e.setAttribute("aria-activedescendant",this._mainView.getElementId()),u.addEventListener("mousedown",this._grolbalMouseHandler,!1))},g.prototype.showContext=function(t,e,i,o,n){var r;t&&!this._mainView&&(r=re.getWin(this._containerDom),this.clickData=n,this._mainView=this._activeView=p._borrowView(this._container),this._mainView.show(this._container,null,t,i,o,0,0,e),r.addEventListener("mousedown",this._grolbalMouseHandler,!1))},g.prototype.close=function(){var t;this._mainView&&(t=re.getWin(this._containerDom),this._mainView.hide(),p._returnView(this._mainView),this._mainView=null,t.removeEventListener("mousedown",this._grolbalMouseHandler,!1))},g.prototype.keyDown=function(t,e){this._doKeydown(t,e)},g.prototype.doMenuItemClick=function(t,e){this.fireEvent(g.MENU_ITEM_CLICKED,t,e)},g.prototype._doKeydown=function(t,e){var i=this._activeView,o=null==i?void 0:i.currDiv;switch(t.keyCode){case 40:i.changeItemIndex(1);break;case 38:i.changeItemIndex(-1);break;case 37:i.parentView&&(i.changeItemIndex(0),i.hideChild(),this._showingView=this._activeView=i.parentView||this._mainView);break;case 39:i&&i.childView&&(i=this._showingView=this._activeView=i.childView).changeItemIndex(1);break;case 13:case 32:o&&o.parentElement&&i.menuItemClicked(o)}e&&e.setAttribute("aria-activedescendant",i.getActiveElementId())},g.prototype.$_buildItems=function(t){},g.MENU_ITEM_CLICKED="onPopupMenuManagerMenuItemClicked";var c,f=g;function g(t){var e=c.call(this)||this;return e._grolbalMouseHandler=function(t){for(var e=t.target;e;){if(e===this._mainView._element||e.menuItem)return;e=e.parentElement}this.close()}.bind(e),e._container=t,e._containerDom=t._containerDom,e._menus=[],e}e.PopupMenuManager=f})),Qe=(t(Ze),Ze.PopupMenuItem,Ze.PopupMenu,Ze.PopupMenuView,Ze.PopupMenuManager,e(function(t,e){Object.defineProperty(e,"__esModule",{value:!0});i=ee.SummaryCell,ne.__extends(n,i),n.prototype._doDispose=function(){i.prototype._doDispose.call(this)},_dp(n,"summaryIndex",{get:function(){return this._childIndex},set:function(t){this._childIndex=t}}),n.prototype._getSummary=function(t,e){return t&&t.headerSummaries.get(e)};var i,o=n;function n(){return i.call(this,"summaryCell")||this}e.HeaderSummaryCell=o;r=ee.GridSummaryObject,ne.__extends(a,r),_dp(a,"summaryIndex",{get:function(){return this._childIndex}}),a.prototype.getCellStyleName=function(){return a.CELL_CSS},a.prototype._createCell=function(){return new o},a.CELL_CSS="rg-header-summary-cell";var r,s=a;function a(t){return r.call(this,t)||this}e.HeaderSummary=s;l=ee.SummaryCollection,ne.__extends(d,l),d.prototype._createSummary=function(t){return new s(t||this._grid)};var l,h=d;function d(t){t=l.call(this,t)||this;return t.visible=!1,t}e.HeaderSummaryCollection=h})),ti=(t(Qe),Qe.HeaderSummaryCell,Qe.HeaderSummary,Qe.HeaderSummaryCollection,e(function(t,e){Object.defineProperty(e,"__esModule",{value:!0});i=xe.SummaryElement,ne.__extends(n,i),n.prototype._doDispose=function(){i.prototype._doDispose.call(this)},n.prototype._getCssSelector=function(){return"rg-header-summary"},n.prototype._getRendererStyle=function(){return"rg-header-summary-renderer"},n.prototype._getSummaryRows=function(t){return t.dataRows},n.prototype._getCollection=function(){return this.model},n.prototype._getSummaryHeight=function(t){return t.summaryHeight},n.prototype._getSummaryCount=function(t){return t.headerSummaryCount},n.prototype._getSpanOf=function(t,e){return t.getSummarySpan(e)},n.prototype._getUserSpanOf=function(t,e){return t.getSummaryUserSpan(e)},n.prototype._getSummaryItem=function(t,e){return t.firstColumn.headerSummaries.get(e)},n.prototype._getTableRowCount=function(t){return t.dataRows*t.headerSummaryCount};var i,o=n;function n(t,e){return i.call(this,t,e,"headerSummaryView")||this}e.HeaderSummaryElement=o;r=o,ne.__extends(a,r),a.prototype._getCssSelector=function(){return"rg-fixed-header-summary"},a.prototype._getExplicitWidth=function(t){return t.fixedWidth-t.fixedBarWidth},a.prototype._getFirstCell=function(t){return this._getStartCell(t)},a.prototype._getLastCell=function(t){return this._getEndCell(t)},a.prototype._getStartCell=function(t){return 0},a.prototype._getEndCell=function(t){return t.fixedCellCount-1},a.prototype._getCellCount=function(t){return t.fixedCellCount},a.prototype._getCellWidth=function(t,e){return t.getFixedCellWidth(e)};var r,s=a;function a(){return null!==r&&r.apply(this,arguments)||this}e.FixedHeaderSummaryElement=s;l=o,ne.__extends(h,l),h.prototype._getCssSelector=function(){return"rg-fixed-header-summary"},h.prototype._getFirstCell=function(t){return this._getStartCell(t)},h.prototype._getLastCell=function(t){return this._getEndCell(t)},h.prototype._getStartCell=function(t){return t.cellCount-t.rightCellCount},h.prototype._getEndCell=function(t){return t.cellCount-1},h.prototype._getCellCount=function(t){return t.rightCellCount},h.prototype._getCellWidth=function(t,e){return t.getRightCellWidth(e)};var l,s=h;function h(){return null!==l&&l.apply(this,arguments)||this}e.RightHeaderSummaryElement=s})),ei=(t(ti),ti.HeaderSummaryElement,ti.FixedHeaderSummaryElement,ti.RightHeaderSummaryElement,e(function(t,e){Object.defineProperty(e,"__esModule",{value:!0});i=ve.CellElement,ne.__extends(n,i),_dp(n,"model",{get:function(){return this._model},set:function(t){t!==this._model&&(this._model=t,this._changed())}}),_dp(n,"text",{get:function(){return this._text},set:function(t){t!=this._text&&(this._text=t||"",this._textChanged=!0,this._changed())}}),n.prototype.setStyleName=function(t,e){e!=this._styleName&&(this._styleName=e,this._setClassName(t))},n.prototype._getCssSelector=function(){return this._styleName},n.prototype._doUpdateContent=function(t,e,i){this._textChanged&&(this._textChanged=!1,i[re.Utils.TextProp]=this._text)},n.prototype._doRender=function(t){};var i,o=n;function n(t){t=i.call(this,t,"gridSumCellView")||this;return t._text="",t._styleName="",t._textChanged=!1,t}e.GridSumCellElement=o;r=ye.SimpleTableElement,ne.__extends(a,r),a.prototype._doDispose=function(){this._cells=null,r.prototype._doDispose.call(this)},a.prototype.getSumModel=function(t){for(var e=0;e<this._cells.length;e++)if(t===this._getTableCell(0,e))return this._cells[e].model},a.prototype.getCellType=function(t){t=this.getSumModel(t);return t instanceof ie.SectionObject?t.getCellType():void 0},a.prototype._getCssSelector=function(){return"rg-sum"},a.prototype._doPrepareTableExtents=function(t){for(var e,i=t.grid.rowBarContainer,t=t.sectionObjects,o=this._count=0,n=t;o<n.length;o++){var r=n[o];r.visible&&(((e=this._cells[this._count++]).model=r)instanceof oe.RowIndicator?e.width=i.rowIndicator.width:r instanceof ae.StateBar?e.width=i.stateBar.width:r instanceof le.CheckBar&&(e.width=i.checkBar.width))}},a.prototype._prepareCellContent=function(t,e){return this.grid.doc.createElement("div")},a.prototype._doLayoutContent=function(t){for(var e=t.grid,i=this._count,o=this._getTableRowCount(t),t=this._thead,n=t&&t.children[0];this.childCount<i;)this.addChild(this._cells[this.childCount]);for(;this.childCount>i;)this.removeLast();for(var r=0;r<i;r++){var s,a=this.getChild(r),l=a.model,h=l.getSumCell(),d=this._getTableCell(0,r),u=d.firstElementChild,c=this.$_getCellSelector()+" "+l.getSumStyleName();if(this._chromium){d.rowSpan=o;for(var _=1;_<o;_++)this._getTableCell(_,r).style.display="none"}n&&(s=n.children[r])&&(s[re.Utils.TextProp]=l.getCellType()+" sum"),a.setStyleName(d,c),a.text=l.sumText,a.updateCell(e,h,u)}},a.prototype._doRender=function(t){},a.prototype._getTableRowCount=function(t){return this._chromium?Math.max(1,t.dataRows)*t.headerSummaryCount:1},a.prototype._getTableRowHeight=function(t,e){return this._chromium?(t=t.grid.headerSummaryView._rowPoints)[e+1]-t[e]:this.height},a.prototype._getCellCount=function(t){return this._count},a.prototype._getCellWidth=function(t,e){return this._cells[e].width},a.prototype.$_getCellSelector=function(){return"rg-sum-cell"},a.CELL_CSS="rg-sum-cell";var r,s=a;function a(t){var e=r.call(this,t,null,"gridSumView")||this;e._cells=[];for(var i=e._count=0;i<3;i++)e.addChild(e._cells[i]=new o(t));return e}e.GridSumElement=s})),ii=(t(ei),ei.GridSumCellElement,ei.GridSumElement,e(function(t,e){Object.defineProperty(e,"__esModule",{value:!0});i=_e.GridBaseOptions,ne.__extends(n,i),n.prototype._doDispose=function(){this._selector=this._selector.dispose(),this._automating=this._automating.dispose(),this._toast=this._toast.dispose(),i.prototype._doDispose.call(this)},_dp(n,"enabled",{get:function(){return this._enabled},set:function(t){t!=this._enabled&&(this._enabled=t,this._refreshOwner())}}),_dp(n,"handleVisibility",{get:function(){return this._handleVisibility},set:function(t){t!=this._handleVisibility&&(this._handleVisibility=t,this._refreshOwner())}}),_dp(n,"commitBeforeFiltering",{get:function(){return this._commitBeforeFiltering},set:function(t){t!=this._commitBeforeFiltering&&(this._commitBeforeFiltering=t)}}),_dp(n,"includeParentItem",{get:function(){return this._includeParentItem},set:function(t){t!=this._includeParentItem&&(this._includeParentItem=t)}}),_dp(n,"selector",{get:function(){return this._selector}}),_dp(n,"automating",{get:function(){return this._automating}}),_dp(n,"toast",{get:function(){return this._toast}}),n.prototype.assignFrom=function(t){i.prototype.assignFrom.call(this,t),t.selector&&this._selector.assignFrom(t.selector),t.automating&&this._automating.assignFrom(t.automating),t.toast&&this._toast.assignFrom(t.toast)};var i,o=n;function n(t){var e=i.call(this,t)||this;return e._enabled=!0,e._handleVisibility=ht.HandleVisibility.VISIBLE,e._commitBeforeFiltering=!0,e._toast=new Oe.ToastOptions({visible:!1,message:"Filtering..."}),e._includeParentItem=!0,e._selector=new s(t),e._automating=new h(t),e}e.FilteringOptions=o;r=_e.GridBaseOptions,ne.__extends(a,r),_dp(a,"listHeight",{get:function(){return this._listHeight},set:function(t){t!=this._listHeight&&(this._listHeight=t)}}),_dp(a,"showButtons",{get:function(){return!!this._showButtons},set:function(t){this._showButtons=t}}),_dp(a,"partialSearch",{get:function(){return this._partialSearch},set:function(t){t!=this._partialSearch&&(this._partialSearch=t)}}),_dp(a,"acceptText",{get:function(){return this._acceptText},set:function(t){t!=this._acceptText&&(this._acceptText=t)}}),_dp(a,"cancelText",{get:function(){return this._cancelText},set:function(t){t!=this._cancelText&&(this._cancelText=t)}}),_dp(a,"allCheckText",{get:function(){return this._allCheckText},set:function(t){t!=this._allCheckText&&(this._allCheckText=t)}}),_dp(a,"showEmptyFilter",{get:function(){return this._showEmptyFilter},set:function(t){t!==this._showEmptyFilter&&(this._showEmptyFilter=t)}}),_dp(a,"emptyFilterText",{get:function(){return this._emptyFilterText},set:function(t){t!=this._emptyFilterText&&(this._emptyFilterText=t)}}),_dp(a,"searchPlaceholder",{get:function(){return this._searchPlaceholder},set:function(t){t!=this._searchPlaceholder&&(this._searchPlaceholder=t)}}),_dp(a,"searchedCheckText",{get:function(){return this._searchedCheckText},set:function(t){t!=this._searchedCheckText&&(this._searchedCheckText=t)}}),_dp(a,"style",{get:function(){return this._style},set:function(t){t!=this._style&&(this._style=t)}}),_dp(a,"closeWhenClick",{get:function(){return!!this._closeWhenClick},set:function(t){this._closeWhenClick=t}}),_dp(a,"filterReset",{get:function(){return this._filterReset},set:function(t){t!=this._filterReset&&(this._filterReset=t)}}),_dp(a,"filtersResetText",{get:function(){return this._filtersResetText},set:function(t){t!=this._filtersResetText&&(this._filtersResetText=t)}}),_dp(a,"filterResetText",{get:function(){return this._filterResetText},set:function(t){t!=this._filterResetText&&(this._filterResetText=t)}}),_dp(a,"maxWidth",{get:function(){return this._maxWidth},set:function(t){this._maxWidth=Math.max(t,0)}}),_dp(a,"width",{get:function(){return this._width},set:function(t){t!==this._width&&(this._width=t)}}),_dp(a,"minWidth",{get:function(){return this._minWidth},set:function(t){t!==this._minWidth&&(this._minWidth=t)}}),_dp(a,"textToTitle",{get:function(){return!!this._textToTitle},set:function(t){this._textToTitle=!!t}}),_dp(a,"searchIgnoreCase",{get:function(){return!!this._searchIgnoreCase},set:function(t){this._searchIgnoreCase=t}}),_dp(a,"activeWhenEnter",{get:function(){return!!this._activeWhenEnter},set:function(t){this._activeWhenEnter=t}});var r,s=a;function a(t){t=r.call(this,t)||this;return t._listHeight=170,t._partialSearch=!0,t._filterReset=!0,t._filtersResetText="전체 초기화",t._acceptText="확인",t._cancelText="취소",t._allCheckText="(전체 선택)",t._searchedCheckText="(조회 전체 선택)",t._filterResetText="초기화",t._showEmptyFilter=!0,t._emptyFilterText="(값 없음)",t._searchPlaceholder="검색...",t._maxWidth=0,t._width=0,t._minWidth=0,t._style="rg-filter-selector",t}e.FilterSelectorOptions=s;l=_e.GridBaseOptions,ne.__extends(d,l),_dp(d,"dateCategorize",{get:function(){return this._dateCategorize},set:function(t){t!=this._dateCategorize&&(this._dateCategorize=t)}}),_dp(d,"numberCategorize",{get:function(){return this._numberCategorize},set:function(t){t!=this._numberCategorize&&(this._numberCategorize=t)}}),_dp(d,"textCategorize",{get:function(){return this._textCategorize},set:function(t){t!=this._textCategorize&&(this._textCategorize=t)}}),_dp(d,"dateCategoryCallback",{get:function(){return this._dateCategoryCallback},set:function(t){t!=this._dateCategoryCallback&&(this._dateCategoryCallback=t)}}),_dp(d,"numberCategoryCallback",{get:function(){return this._numberCategoryCallback},set:function(t){t!=this._numberCategoryCallback&&(this._numberCategoryCallback=t)}}),_dp(d,"textCategoryCallback",{get:function(){return this._textCategoryCallback},set:function(t){t!=this._textCategoryCallback&&(this._textCategoryCallback=t)}}),_dp(d,"dateYearFormat",{get:function(){return this._dateYearFormat},set:function(t){this._dateYearFormat=t}}),_dp(d,"dateQuarterFormat",{get:function(){return this._dateQuarterFormat},set:function(t){this._dateQuarterFormat=t}}),_dp(d,"dateMonthFormat",{get:function(){return this._dateMonthFormat},set:function(t){this._dateMonthFormat=t}}),_dp(d,"dateDayFormat",{get:function(){return this._dateDayFormat},set:function(t){this._dateDayFormat=t}}),_dp(d,"lookupDisplay",{get:function(){return this._lookupDisplay},set:function(t){this._lookupDisplay=t}}),_dp(d,"filteredDataOnly",{get:function(){return this._filteredDataOnly},set:function(t){this._filteredDataOnly=t}});var l,h=d;function d(t){t=l.call(this,t)||this;return t._dateCategorize=!0,t._numberCategorize=!0,t._textCategorize=!1,t._dateYearFormat="YYYY년도",t._dateQuarterFormat="Q사분기",t._dateMonthFormat="M월",t._dateDayFormat="YYYY-MM-DD",t._lookupDisplay=!1,t}e.FilterAutomatingOptions=h})),oi=(t(ii),ii.FilteringOptions,ii.FilterSelectorOptions,ii.FilterAutomatingOptions,e(function(t,e){Object.defineProperty(e,"__esModule",{value:!0}),(i=S=S||{})[i.ALL=0]="ALL",i[i.YQ=1]="YQ",i[i.YM=2]="YM",i[i.Y=3]="Y",i[i.QM=4]="QM",i[i.Q=5]="Q",i[i.M=6]="M",i[i.NONE=7]="NONE",x.HasPartial=function(t,e,i){if(i&&(t=t&&t.toLowerCase(),e=e&&e.toLowerCase()),0<=t.indexOf(e))return!0;for(var o=re.Utils.hangulToChosungAll(t),n=re.Utils.hangulToChosungAll(e),r=-1,s=!1;0<=(r=o.indexOf(n,r+1));){for(var a=0;a<n.length&&a+r<o.length;a++){var l=re.Utils.hangulToChosung(t[a+r]),h=re.Utils.hangulToChosung(e[a]);if(h.org&&h.org!==l.org||!h.cho||h.cho!==l.cho){s=!1;break}s=!0}if(s)return!0}return!1},x.prototype.dispose=function(){return this._filters=null,this._options=null},_dp(x,"searched",{get:function(){return this._searched}}),x.prototype.buildItems=function(t,e,i,o){void 0===o&&(o=!0);var n=this._options.selector,r=this._options.automating,s=n.emptyFilterText,a=(this._autoFilter=i,this._filters=i?t.autoFilters:t.filters),l=[];if(i){0<t.autoFilters.activeCount&&(l=this._getActivatedFilters(t.autoFilters)),t.autoFilters.clear(!1);var h=!1,d=void 0,u=(this._valueType=t.valueType,r.filteredDataOnly?t.grid.getDistinctItemValues(t.dataIndex):e.getDistinctValues(t.dataIndex));switch(this._valueType){case ht.ValueType.DATETIME:d=(h=r.dateCategorize)&&r.dateCategoryCallback?r.dateCategoryCallback(t,u):this._categorizeDateValues(u,h,s);break;case ht.ValueType.NUMBER:d=(h=r.numberCategorize)&&r.numberCategoryCallback?r.numberCategoryCallback(t,u):this._categorizeNumberValues(u,h,s);break;case ht.ValueType.BOOLEAN:for(var d=[],c=!1,_=0;_<u.length;_++){var p=u[_];null==p?c=!0:d.push({text:p.toString().toUpperCase(),value:p})}c&&n.showEmptyFilter&&d.push({text:s,empty:!0});break;case ht.ValueType.TEXT:h=r.textCategorize;d=t.lookupSource&&this._options.automating.lookupDisplay&&!r.textCategoryCallback?this._categorizeLookupTree(e,t,s):h&&r.textCategoryCallback?r.textCategoryCallback(t,u):this._categorizeTextValues(u,h,s)}d&&this._createCategories(d,null,t.valueType,a),this._filters.activateItems(l,!0,o)}},x.prototype.search=function(t){var e=[];for(var i=0,o=this._filters.count;i<o;i++){var n=this._filters.getItem(i);if(!(n instanceof H.ColumnFilterCategory)){var r=this._autoFilter?n.tag:n.toString(),s=this._autoFilter&&this._options.automating.lookupDisplay&&this._filters.getOwner()&&this._filters.getOwner().lookupDisplay,a=this._options.selector.searchIgnoreCase,l=x.HasPartial;if(l(r,t,a)||s&&l(n.toString(),t,a)){d=h=r=void 0;r=n;if(e.indexOf(r)<0){for(var h=[],d=r;d;)e.indexOf(d)<0&&h.push(d),d=d.category;Array.prototype.push.apply(e,h.reverse())}}}}return e},x.prototype._getActivatedFilters=function(t){for(var e=[],i=t.count;i--;){var o=t.getItem(i);o instanceof H.ColumnFilterCategory||!o.active||e.push(o.name)}return e},x.prototype._createCategories=function(t,e,o,i){var n=i.getOwner(),r=this._options.automating.lookupDisplay&&n.lookupDisplay,s=r&&n.lookupSource;function a(t,e,i){if(s&&i.fieldIds){for(var o=i,n=[],r=0;r<o.fieldIds.length;r++)null==o.keys[r]||""==o.keys[r]?n.push("(values["+o.fieldIds[r]+"] is empty)"):n.push("(values["+o.fieldIds[r]+"] = '"+o.keys[r]+"')");return n.join(" and ")}return null==t||i.empty?"value is empty":e==ht.ValueType.DATETIME?"(year(value) = "+i.year+") and (month(value) = "+(i.month+1)+") and (day(value) = "+i.day+")":e==ht.ValueType.BOOLEAN?i.value?"value":"not(value)":e==ht.ValueType.NUMBER?"value = "+t:"value = '"+(t=t.replace(/\\/g,"\\\\").replace(/\'/g,"\\'"))+"'"}function l(t,e,i){return o===ht.ValueType.TEXT&&t&&!e.empty?n.getLookupLabel(t):i}for(var h=re.Utils.pad,d=0,u=t.length;d<u;d++){var c=t[d],_=c.hasOwnProperty("childs"),p=c.hasOwnProperty("values"),f=void 0,p=((f=_||p?new H.ColumnFilterCategory:new H.ColumnFilter(a(c.value,o,c))).text=!s&&r?l(c.value,c,c.text):c.text,""),p=c.name||(c.empty?x.EMPTY_FILTER:o==ht.ValueType.DATETIME&&_&&e?e.name+" "+c.text:c.text);if(f.name=p,this._filters.add(f,!1),e&&e.addChild(f),f instanceof H.ColumnFilterCategory){if(_)this._createCategories(c.childs,f,o,i);else if(re.Utils.isArray(c.values))for(var g=c.values,m=0,y=g.length;m<y;m++){var v=g[m],C=v+"",w=new H.ColumnFilter(a(v,o,c));w.name=C,w.text=r?l(v,c,C):C,w.tag=C,f.addChild(w),this._filters.add(w,!1)}}else o!=ht.ValueType.DATETIME||c.empty?f.tag=c.text:f.tag=(p=c).year+"-"+h(p.month+1,2)+"-"+h(p.day,2)}},x.prototype._categorizeDateValues=function(t,e,o){if(!t)return null;var C=!1,w=!1,x=!1;function b(d,u,c,_,t){void 0===_&&(_=0),t=-1==(t=void 0===t?-1:t)?d.length-1:t;for(var p,f,g=null,m=_,y=!1,e=function(t){var e,i,o,n,r,s,a=d[t],l=function(t,e,i){for(var o=[],n=0;n<=i;n++)o.push(dt.DateTimeConverter.getDateProperty(t,e[n]));return o}(a,I,u),h=function(t,e,i){if(!t)return null;switch(e[i]){case dt.DateProperty.YEAR:return t.getFullYear().toString();case dt.DateProperty.HALF:return t.getFullYear().toString()+Math.floor(t.getMonth()/6).toString();case dt.DateProperty.QUARTER:return t.getFullYear().toString()+Math.floor(t.getMonth()/3).toString();case dt.DateProperty.MONTH:return t.getFullYear().toString()+t.getMonth().toString();case dt.DateProperty.DAY:return t.getFullYear().toString()+t.getMonth()+t.getDate()}}(a,I,u);_<t&&h!=g&&(e=p[u],f&&(u===I.length-1?((o={text:"",year:f.getFullYear(),month:f.getMonth(),day:f.getDate(),value:f}).text=E[u](o.year,o.month,o.day),c.push(o)):(i={text:"",childs:[]},o=function(){i.year=f.getFullYear()},n=function(){i.quarter=Math.floor(f.getMonth()/3)},r=function(){i.month=f.getMonth()},(s=C&&w&&x?S.ALL:C&&w?S.YQ:C&&x?S.YM:C?S.Y:w&&x?S.QM:w?S.Q:x?S.M:S.NONE)===S.ALL?0===u?o():1===u?(o(),n()):2===u&&(o(),n(),r()):s===S.YQ?0===u?o():1===u&&(o(),n()):s===S.YM?0===u?o():1===u&&(o(),r()):s===S.Y?o():s===S.QM?0===u?n():1===u&&(n(),r()):s===S.Q?n():s===S.M&&r(),i.text=E[u](f.getFullYear(),f.getMonth(),e),c.push(i),b.call(v,d,u+1,i.childs,m,t-1))),m=t),_<t&&null==f&&(y=!0),g=h,p=l,f=a},v=this,i=_;i<=t+1;i++)e(i);0==u&&y&&this._options.selector.showEmptyFilter&&c.push({text:o,empty:!0})}for(var i=dt.DateTimeConverter.getDateProperty,n=0,r=0,s=0,a={year:null,quarter:null,month:null,day:null},l=t.length,h=0;h<l;h++){var d,u,c,_=t[h];_&&(d=i(_,dt.DateProperty.YEAR),u=i(_,dt.DateProperty.QUARTER),c=i(_,dt.DateProperty.MONTH),_=i(_,dt.DateProperty.DAY),!a||d!=a.year?(n++,r++,s++):u!=a.quarter||c!=a.month?(r++,s++):_!=a.day&&s++,a.year=d,a.quarter=u,a.month=c,a.day=_)}function p(t,e){e+="";return t?t.replace("YYYY",e).replace("YY",e.slice(-2)):e}function f(t,e){var i,e=e+1+"";return t?(i=("0"+e).slice(-2),t.replace("QQ",i).replace("Q",e)):e}function g(t,e){var i,e=e+1+"";return t?(i=("0"+e).slice(-2),t.replace("MM",i).replace("M",e)):e}var m=this._options.automating,I=[],E=[],e=(e&&((C=1<n&&6<r)&&(I.push(dt.DateProperty.YEAR),E.push(function(t,e,i){return p(m.dateYearFormat,i)})),(w=6<r/n)&&(I.push(dt.DateProperty.QUARTER),E.push(C?function(t,e,i){return f(m.dateQuarterFormat,i)}:function(t,e,i){return p(m.dateYearFormat,t)+" "+f(m.dateQuarterFormat,i)})),x=9<s&&3<r)&&(I.push(dt.DateProperty.MONTH),E.push(C||w?function(t,e,i){return g(m.dateMonthFormat,i)}:function(t,e,i){return p(m.dateYearFormat,t)+" "+g(m.dateMonthFormat,i)})),I.push(dt.DateProperty.DAY),E.push(function(t,e,i){var t=g(p(m.dateDayFormat,t),e);return e=i,e+="",(i=t)?(t=("0"+e).slice(-2),i.replace("DD",t).replace("D",e)):e}),[]);return b.call(this,t,0,e),e},x.prototype._categorizeNumberValues=function(t,e,i){if(!t||!t.length)return null;var o,n=t.filter(function(t){return null!=t&&!isNaN(t)}).sort(function(t,e){return t-e}),r=n.length,t=n.length!==t.length,s=[];if(e&&15<r)for(o=Math.round(r/Math.min(Math.max(4,Math.round(r/5)),8));0<n.length;){var a=n.splice(0,o);s.push({text:a[0]+" ~ "+a[a.length-1],values:a})}else for(var l=0;l<r;l++)s.push({text:n[l]+"",value:n[l]});return t&&this._options.selector.showEmptyFilter&&s.push({text:i,empty:!0}),s},x.prototype._categorizeLookupTree=function(l,h,d){var u=h.grid,e=[];if(this._options.automating.filteredDataOnly)u._items._rs.getAllItems().forEach(function(t){e.push(t.dataRow)});else if(u.isTree())l.getDescendants(null,-1).forEach(function(t){e.push(t.rowId)});else for(var t=l.rowCount,i=0;i<t;i++)e.push(i);var o=[],n=h.lookupKeyFieldIds,r={},c={};function _(t,e,i,o,n){var r=i.shift(),s=l.getValue(e,r);n.push(r),o.push(s);var a=(a=t[s])||(t[s]={value:s,name:o.join("-"),keys:o.slice(),fieldIds:n.slice()});i.length?(a.text||(a.text=function(t,e,i){var o=c[t];if(!o)for(var n=u.columnsByField(t),r=0;r<n.length;r++)if(n[r].lookupSource||n[r].lookupDisplay){o=c[t]=n[r];break}return o?o.lookupSource?o.lookupSource.lookup(e,o.valueSeparator):o.lookupDisplay?o.getLookupLabel(i):i:i}(r,o,s)||s||d),a.childs=a.childs||{},_(a.childs,e,i,o,n)):a.text||(a.text=s?h.lookupSource.lookup(o,h.valueSeparator)||s:d)}for(i=0;i<e.length;i++)_(r,e[i],n.slice(),[],[]);return function i(o,n){Object.keys(o).sort().forEach(function(t){var e={value:(t=o[t]).value,text:t.text,name:t.name,fieldIds:t.fieldIds,keys:t.keys};n.push(e),t.hasOwnProperty("childs")&&(e.childs=[],i(t.childs,e.childs))})}(r,o),o},x.prototype._categorizeTextValues=function(t,e,i){if(!t)return null;var o=t.length,n=[],r=!1;if(e&&15<o){for(var s=[{},{},{},{}],a=[0,0,0,0],l=[0,0,0,0],h=0;h<o;h++){var d,u,c,_=t[h];_?(u=!1,c=void 0,s[c=48<=(d=(g=_[0]).charCodeAt(0))&&d<=57?0:65<=d&&d<=90||97<=d&&d<=122?1:1e4<=d?2:3][g]?s[c][g].push(_):(s[c][g]=[_],u=!0),a[c]++,u&&l[c]++):r=!0}for(var p=Math.min(Math.max(4,Math.round(o/5)),8),f=0;f<4;f++){var g,m=0==a[f]?0:Math.max(1,Math.min(l[f],Math.round(a[f]/o*p))),y=Math.round(l[f]/m),v=y,C="",w=[];for(g in s[f])v===y&&(C=g),Array.prototype.push.apply(w,s[f][g]),0==--v&&(n.push({text:1==y?g:C+" ~ "+g,values:w}),w=[],v=y)}}else for(var h=0,x=t.length;h<x;h++){var b=t[h];b?n.push({text:b,value:b}):r=!0}return r&&this._options.selector.showEmptyFilter&&n.push({text:i,empty:!0}),n},x.EMPTY_FILTER="$$empty";var S,i=x;function x(t){this._options=t}e.FilteringManager=i})),ni=(t(oi),oi.FilteringManager,e(function(t,e){Object.defineProperty(e,"__esModule",{value:!0});n=P.EventAware,ne.__extends(r,n),_dp(r,"opened",{get:function(){return this._opened}}),_dp(r,"column",{get:function(){return this._targetColumn}}),_dp(r,"doc",{get:function(){return re.getDoc(this._element)}}),r.prototype._doDispose=function(){this._soptions=null,this._manager=this._manager.dispose(),this._grid=null,re.Utils.detach(this._element),n.prototype._doDispose.call(this)},r.prototype.show=function(t,e,i){this._opened&&this.hide();var o=this._element,n=this._soptions,r=this._grid.container._containerDiv,s=r.parentElement,r=((r=r.nextSibling)?s.insertBefore(o,r):s.appendChild(o),this._targetColumn=t,o.className=n.style,o.style.display="block",this._autoFiltering=t.autoFilter,this._build(t,i,this._autoFiltering),e.getBoundingClientRect()),s=this._gridContainer.parentElement.clientWidth,t=n.width,i=o.style,e=0,t=(-1===t?e=n.maxWidth<=0?this._viewWidth:Math.min(n.maxWidth,t,s):0<t&&(e=Math.min(t,s)),0<e&&(i.width=Math.max(e,n.minWidth)+"px"),re.getWin(this._gridContainer)),s=o.getBoundingClientRect(),e=o.offsetParent instanceof t.HTMLBodyElement,n=e?{left:0,top:0}:o.offsetParent.getBoundingClientRect(),s=s.left-n.left+(r.right-s.right)+(e?t.scrollX||t.pageXOffset:o.offsetParent.scrollLeft),r=r.bottom-n.top+(e?t.scrollY||t.pageYOffset:o.offsetParent.scrollTop);i.left=Math.max(0,s)+"px",i.top=r+"px",t.addEventListener("mousedown",this._globalMouseDownHandler,!1),t.addEventListener("keydown",this._globalKeyDownHandler,!1),this._opened=!0},r.prototype.hide=function(){var t;this._opened&&(re.Utils.detach(this._element),(t=re.getWin(this._gridContainer)).removeEventListener("mousedown",this._globalMouseDownHandler,!1),t.removeEventListener("keydown",this._globalKeyDownHandler,!1),this._finalize(),this._element.style.display="none",this._opened=!1)},r.prototype._createItemInfo=function(t){this._items=[],this._roots=[],this._visbleItemMap={};for(var e=(t=t instanceof H.ColumnFilterCollection?t.items:t).length,i=[],o=0;o<e;o++){var n,r=t[o],s=r.level;(this._autoFiltering||r.visible)&&(n={text:r.toString(),index:o,level:s,filter:r},this._items.push(n),r instanceof H.ColumnFilterCategory?n.expanded=!1:n.state=r.active?H.ActiveState.ACTIVE:H.ActiveState.UNACTIVE,i[s]=n,0<s&&((n.parent=r=i[s-1]).childs||(r.childs=[]),r.childs.push(n)),0==s&&this._roots.push(n),this._visbleItemMap[o]=n)}this._calcluateStates(),this._visibleCount=this._calcVisibleItems(),this._dirties=[]},r.prototype._build=function(t,e,i){var o=this._soptions,n=this._applyBatch=o.showButtons,r=this.doc,e=(this._manager.buildItems(t,e,i,!1),this._filters=i?t.autoFilters:t.filters,this._createItemInfo(this._filters),this._headerDiv=r.createElement("div"),this._headerDiv.className="rg-filter-header",o.filterReset&&this._buildReset(this._headerDiv),this._soptions.partialSearch&&this._buildSearchbox(this._headerDiv),this._buildSelectAllBox(),this._element.appendChild(this._headerDiv),this._viewportDiv=r.createElement("div"));e.className="rg-filter-list-viewport",e.style.height=o.listHeight+"px",e.addEventListener("scroll",this._scrollHandler),e.addEventListener("wheel",this._wheelHandler),this._listDiv=r.createElement("div"),this._listDiv.className="rg-filter-list",this._listDiv.style.position="relative",e.appendChild(this._listDiv),this._element.appendChild(e),this._calcAllChecked(),this._calcluateStates(),this._buildItems(),n&&this._buildFooter(this._element),this._searched=!1},r.prototype._finalize=function(){this._roots=[],this._visbleItemMap={};for(var t=this._items.length;t--;)this._items[t].filter=null,this._items[t].parent=null,this._items[t].childs=null,this._items[t]=null;this._items=[],(e=this._resetDiv)&&(e.removeEventListener("click",this._resetClickHandler),this._resetDiv=re.Utils.detach(this._resetDiv)),(e=this._searchDiv)&&(e.removeEventListener("input",this._searchInputHandler),e.removeEventListener("keydown",this._searchKeyDownHandler),this._searchInput=re.Utils.detach(this._searchInput),this._searchDiv=re.Utils.detach(this._searchDiv)),this._selectAllDiv.removeEventListener("click",this._checkAllClickHandler),this._selectAllDiv=re.Utils.detach(this._selectAllDiv),this._headerDiv=re.Utils.detach(this._headerDiv),this._footerDiv&&(this._confirmButton.removeEventListener("click",this._confirmClickHandler),this._cancelButton.removeEventListener("click",this._cancelClickHandler),this._confirmButton=re.Utils.detach(this._confirmButton),this._cancelButton=re.Utils.detach(this._cancelButton),this._footerDiv=re.Utils.detach(this._footerDiv));for(t=this._itemElements.length;t--;)this._removeItem(t);this._itemElements=[];var e=this._viewportDiv;e.removeEventListener("scroll",this._scrollHandler),e.removeEventListener("wheel",this._wheelHandler),this._listDiv=re.Utils.detach(this._listDiv),this._viewportDiv=re.Utils.detach(this._viewportDiv)},r.prototype._buildSelectAllBox=function(){var t=this.doc,e=this._soptions.allCheckText,i=this._selectAllDiv=t.createElement("div"),o=(i.className="rg-filter-select-all",this._soptions.textToTitle&&e&&(i.title=e),this._selectAllCheck=t.createElement("input")),o=(o.type="checkbox",o.className="rg-filter-checkbox",this._setCheckState(o,this._allCheck),i.appendChild(o),this._selectAllText=t.createElement("div")),e=(o.className="rg-filter-text",o.innerHTML=re.Utils.htmlEncode(e),i.appendChild(o),this._columnReset=t.createElement("div"));e.className="rg-filter-column-reset",e.innerHTML=re.Utils.htmlEncode(this._soptions.filterResetText),i.appendChild(e),this._headerDiv.appendChild(this._selectAllDiv),this._selectAllDiv.addEventListener("click",this._checkAllClickHandler)},r.prototype._buildReset=function(t){var e=this.doc,i=this._resetDiv=e.createElement("div");i.className="rg-filter-reset",i.appendChild(e.createTextNode(this._soptions.filtersResetText)),i.addEventListener("click",this._resetClickHandler),t.appendChild(i)},r.prototype._buildItems=function(){for(var t="temp임시",e=re.Utils.getTextLength(t),i=0,o=this._filters.count;i<o;i++){var n=this._filters.getItem(i).toString();e<re.Utils.getTextLength(n)&&(e=re.Utils.getTextLength(n),t=n)}var r=this._buildItemElement(t,0,void 0,"rg-filter-item"),r=(this._element.style.width="unset",this._listDiv.appendChild(r),this._itemHeight=Math.floor(r.getBoundingClientRect().height),this._viewWidth=Math.floor(r.getBoundingClientRect().width)+10,this._listDiv.removeChild(r),this._element.style.width="",this._visibleCount),s=this._viewportDiv.offsetHeight,s=(this._pageCount=Math.min(this._items.length,Math.ceil(s/this._itemHeight)),this._pageCount),a=(this._listDiv.style.height=r*this._itemHeight+"px",r<s?r:s);this._itemElements=[];for(i=0;i<a;i++){var l=this._visibleItems[i];this._itemElements.push(this._buildItem(l,i))}},r.prototype._buildSearchbox=function(t){var e=this.doc,e=this._searchDiv=e.createElement("div"),i=(e.className="rg-filter-searchbox",this._searchInput=this.doc.createElement("input"));i.type="text",i.placeholder=this._soptions.searchPlaceholder,i.className="rg-filter-search-input",i.addEventListener("input",this._searchInputHandler),i.addEventListener("keydown",this._searchKeyDownHandler),e.appendChild(i),t.appendChild(e)},r.prototype._buildFooter=function(t){var e=this.doc,i=(this._footerDiv=e.createElement("div"),this._footerDiv.className="rg-filter-button",this._confirmButton=e.createElement("input")),i=(i.type="button",i.className="rg-filter-accept",i.value=this._soptions.acceptText,i.addEventListener("click",this._confirmClickHandler),this._footerDiv.appendChild(i),this._cancelButton=e.createElement("input"));i.type="button",i.className="rg-filter-cancel",i.value=this._soptions.cancelText,i.addEventListener("click",this._cancelClickHandler),this._footerDiv.appendChild(i),t.appendChild(this._footerDiv)},r.prototype._buildItem=function(t,e){var i=this._items,o=this._listDiv,i=i[t],n=i.expanded,i=this._buildItemElement(i.text,i.level,i.state,"rg-filter-item",n);return i.filter_id=t+"",i.style.position="absolute",i.style.height=this._itemHeight+"px",i.style.top=e*this._itemHeight+"px",i.addEventListener("click",this._itemClickHandler),o.appendChild(i),i},r.prototype._removeItem=function(t){var e=this._itemElements[t];e.removeEventListener("click",this._itemClickHandler),re.Utils.detach(e),this._itemElements.splice(t,1)},r.prototype._buildItemElement=function(t,e,i,o,n){var r=this.doc,s=r.createElement("div"),o=(o&&(s.className=o),this._soptions.textToTitle&&t&&(s.title=t),r.createElement("div")),e=(o.className="rg-filter-item-indent-"+e,s.appendChild(o),r.createElement("div")),o="rg-filter-expander",n=(void 0!==n&&(o+=" "+(n?"rg-filter-expander-expanded":"rg-filter-expander-collapsed")),e.className=o,s.appendChild(e),r.createElement("input")),o=(n.type="checkbox",n.className="rg-filter-checkbox",this._setCheckState(n,i),s.appendChild(n),r.createElement("div")),e=o.style;return o.className="rg-filter-text",e.position="relative",e.display="inline",e.pointerEvents="none",o.innerHTML=re.Utils.htmlEncode(t),s.appendChild(o),s},r.prototype._calculateState=function(t){for(var e=void 0,i=0,o=t.length;i<o;i++){var n=t[i];if(e&&n.state!=e)return H.ActiveState.INDETERMINATE;e=n.state}return e||H.ActiveState.UNACTIVE},r.prototype._calcluateStates=function(){for(var t=this._items.length;t--;){var e=this._items[t];e.childs&&(e.state=this._calculateState(e.childs))}},r.prototype._calcVisibleItems=function(){var t=0;this._visibleItems=[];for(var e=0,i=this._items.length;e<i;e++){var o=this._items[e];o.parent&&!function(t){for(var e=t.parent;e;){if(!e.expanded)return;e=e.parent}return 1}(o)||(t++,this._visibleItems.push(e))}return t},r.prototype._setCheckState=function(t,e){t.checked=e==H.ActiveState.ACTIVE,t.indeterminate=e==H.ActiveState.INDETERMINATE},r.prototype._calcAllChecked=function(){this._allCheck=this._calculateState(this._roots),this._setCheckState(this._selectAllCheck,this._allCheck)},r.prototype._redrawCheck=function(){for(var t=this._itemElements.length;t--;){var e=this._itemElements[t],i=parseInt(e.filter_id),i=this._visbleItemMap[i],e=e.childNodes[r.INDEX_CHECKBOX];this._setCheckState(e,i.state)}},r.prototype._doRedraw=function(t){void 0===t&&(t=0);for(var e=this._itemElements,i=this._pageCount,o=Math.min(i,this._visibleCount),n=Math.max(0,this._visibleItems.indexOf(t)),r=(n+i>this._visibleCount&&(n=Math.max(0,this._visibleCount-i)),0),s=0;s<o;s++){var a=this._visibleItems[s+n];!e[s]&&s<o&&e.push(this._buildItem(a,s)),this._changeItemModel(e[s],a),r++}for(s=e.length-1;r-1<s;s--)this._removeItem(s);t=this._visibleCount*this._itemHeight,this._listDiv.style.height=t+"px",i=this._viewportDiv;i.scrollTop+i.offsetHeight>t&&(i.scrollTop=t-i.offsetHeight)},r.prototype._changeItemModel=function(t,e){var i=re.getWin(t),o=this._items[e];t.filter_id=e+"",this._soptions.textToTitle&&o.text&&(t.title=o.text);for(var n=t.childNodes.length;n--;){var r,s,a,l=t.childNodes.item(n);l instanceof i.HTMLElement&&(r=l.className)&&(-1<r.indexOf("rg-filter-item-indent-")?l.className="rg-filter-item-indent-"+o.level:-1<r.indexOf("rg-filter-expander")?(a="rg-filter-expander",void 0!==o.expanded&&(a+=" "+(o.expanded?"rg-filter-expander-expanded":"rg-filter-expander-collapsed")),l.className=a):l instanceof i.HTMLInputElement&&"rg-filter-checkbox"==r?this._setCheckState(l,o.state):0<=r.indexOf("rg-filter-text")&&(a=re.Utils.htmlEncode(o.text),r=this._searchInput?this._searchInput.value:"",s="g"+(this._soptions.searchIgnoreCase?"i":""),a=r?a.replace(new RegExp(r,s),function(t,e,i){return'<span class="rg-filter-search-text">'+t+"</span>"}):a,l.innerHTML="<span>"+a+"</span>"))}},r.prototype._doScroll=function(){for(var t=this._itemElements,e=Math.max(0,Math.floor(Math.min(this._viewportDiv.scrollTop,this._listDiv.offsetHeight-this._viewportDiv.offsetHeight)/this._itemHeight)),i=0,o=t.length;i<o;i++){var n=this._visibleItems[e+i];this._changeItemModel(t[i],n),t[i].style.top=(e+i)*this._itemHeight+"px"}},r.prototype._doSearch=function(t,e){void 0===e&&(e=!0),t?this._createItemInfo(this._manager.search(t)):this._createItemInfo(this._filters),this._selectAllText.textContent=t?this._soptions.searchedCheckText:this._soptions.allCheckText,e&&this._calcAllChecked(),this._doRedraw(),this._searched=!!t},r.prototype._resetActive=function(){for(var t=this._items.length;t--;)this._items[t].state=H.ActiveState.UNACTIVE;this._filters.activateAll(!1),this._redrawCheck()},r.prototype._activateAll=function(t){for(var e,i=!this._applyBatch,o=this._items.length;o--;){var n=this._items[o];n.childs||(n.state=t?H.ActiveState.ACTIVE:H.ActiveState.UNACTIVE,i&&!this._searched)||this._dirties.push(n)}i&&(this._searched?this._doFilterApply():this._filters.activateAll(t)),this._calcluateStates(),this._itemElements.length&&(e=this._itemElements[0].filter_id,e=Math.max(0,this._visibleItems.indexOf(parseInt(e))),this._doRedraw(e))},r.prototype._doCheck=function(t,s){var e=s?H.ActiveState.ACTIVE:H.ActiveState.UNACTIVE,i=this._applyBatch||void 0!==t.childs,o=this._applyBatch?this._dirties:[];if(!function t(e,i,o,n){if(e.state!=i)if(e.state=i,e.childs)for(var r=e.childs.length;r--;)t(e.childs[r],i,o,n);else o?n.push(e):e.filter.active=s}(t,e,i,o),i&&!this._applyBatch){for(var n=[],r=0,a=o.length;r<a;r++)n.push(o[r].filter.name);0<n.length&&this._filters.activateItems(n,s)}for(var l=t.parent;l;)l.state=this._calculateState(l.childs),l=l.parent;(t.parent||t.childs)&&this._redrawCheck(),this._calcAllChecked()},r.prototype._doFilterApply=function(){this._filters._updating=!0;try{for(var t=this._dirties,e=t.length;e--;){var i=t[e];i.filter.active=i.state==H.ActiveState.ACTIVE}this._filters._updating=!1,t.length&&this._filters.changed(1==t.length?t[0].filter:null)}finally{this._filters._updating=!1}this._dirties=[]},r.prototype._doExpand=function(t,e){t.expanded=e,this._visibleCount=this._calcVisibleItems();t=parseInt(this._itemElements[0].filter_id);this._doRedraw(t)},r.prototype._globalMouseDownHandler=function(t){for(var e=t.target;e;){if(e===this._element)return;e=e.parentElement}this.hide()},r.prototype._globalKeyDownHandler=function(t){27==t.keyCode&&this.hide()},r.prototype._wheelHandler=function(t){var e=t.deltaY;0!==e&&(e=(0<e?2:-2)*this._itemHeight,this._viewportDiv.scrollTop+=e,this._doScroll()),t.preventDefault()},r.prototype._scrollHandler=function(t){this._doScroll()},r.prototype._searchInputHandler=function(t){t=t.target;t instanceof re.getWin(t).HTMLInputElement&&this._doSearch(t.value)},r.prototype._searchKeyDownHandler=function(t){13==t.keyCode&&(this._doSearch(this._searchInput.value),this._searched)&&this._soptions.activeWhenEnter&&this._items.length&&((t=this._selectAllCheck).checked=!(t.indeterminate=!1),this.$_allCheck(!0))},r.prototype.$_refreshItem=function(t){for(var e=this._itemElements.length;e--;)this._removeItem(e);this._itemElements=[],this._manager.buildItems(t,t.grid.dataSource,t.autoFilter,!1),this._createItemInfo(t.autoFilters),this._buildItems(),this._dirties=[]},r.prototype._resetClickHandler=function(){var t=this._grid.getFilteredColumns(),e=t.length,i=this._targetColumn,o=this._selectAllCheck;this._setCheckState(o,H.ActiveState.UNACTIVE),this._resetActive(),this._searched&&this._doSearch(this._searchInput.value="");for(var n=0;n<e;n++)t[n].activateAllFilters(!1);this._soptions.closeWhenClick?this.hide():i.autoFilter&&this._options.automating.filteredDataOnly&&this.$_refreshItem(i)},r.prototype.$_allCheck=function(t){this._activateAll(t),this._allCheck=t?H.ActiveState.ACTIVE:H.ActiveState.UNACTIVE,!this._applyBatch&&this._soptions.closeWhenClick&&this.hide()},r.prototype._checkAllClickHandler=function(t){var e,i=this._selectAllCheck,t=t.target;t===this._columnReset?(i.checked=i.indeterminate=!1,this._doSearch(this._searchInput.value="",!1),e=this._targetColumn,this._resetActive(),e.autoFilter&&this._options.automating.filteredDataOnly&&this.$_refreshItem(e)):t!==i?(i.checked=!i.checked,i.indeterminate=!1,this.$_allCheck(i.checked)):t===i&&this.$_allCheck(i.checked)},r.prototype._itemClickHandler=function(t){var t=t.target,e=-1<t.className.indexOf("rg-filter-expander"),i="rg-filter-checkbox"==t.className,o=t,n=("rg-filter-item"!==t.className&&(o=o.parentElement),parseInt(o.filter_id)),n=this._visbleItemMap[n];e?void 0!==n.expanded&&this._doExpand(n,!n.expanded):(e=void 0,i?e=t:(e=o.children.item(r.INDEX_CHECKBOX)).checked=!e.checked,this._doCheck(n,e.checked),!this._applyBatch&&this._soptions.closeWhenClick&&this.hide())},r.prototype._confirmClickHandler=function(){this._doFilterApply(),this.hide()},r.prototype._cancelClickHandler=function(){this.hide()},r.INDEX_CHECKBOX=2;var n,i=r;function r(t,e,i){var o=n.call(this)||this,i=(o._opened=!1,o._grid=i,o._gridContainer=i.container._containerDom,re.getDoc(o._gridContainer)),i=o._element=i.createElement("div");return i.style.position="absolute",i.style.display="none",i.className=e.selector.style,i.setAttribute("aria-hidden","true"),o._options=e,o._soptions=e.selector,o._manager=new oi.FilteringManager(o._options),o._globalMouseDownHandler=o._globalMouseDownHandler.bind(o),o._globalKeyDownHandler=o._globalKeyDownHandler.bind(o),o._scrollHandler=o._scrollHandler.bind(o),o._wheelHandler=o._wheelHandler.bind(o),o._resetClickHandler=o._resetClickHandler.bind(o),o._searchInputHandler=o._searchInputHandler.bind(o),o._searchKeyDownHandler=o._searchKeyDownHandler.bind(o),o._checkAllClickHandler=o._checkAllClickHandler.bind(o),o._confirmClickHandler=o._confirmClickHandler.bind(o),o._cancelClickHandler=o._cancelClickHandler.bind(o),o._itemClickHandler=o._itemClickHandler.bind(o),o}e.FilterSelector=i})),ri=(t(ni),ni.FilterSelector,e(function(t,e){Object.defineProperty(e,"__esModule",{value:!0});l.decode=function(t){for(var e=l.CHARACTERS,i=l.SUFFIX,o=t.split(""),n=[],r=o.length;o[--r]==i;);for(var s=0;s<r;){var a=e.indexOf(o[s++])<<18;s<=r&&(a|=e.indexOf(o[s++])<<12),s<=r&&(a|=e.indexOf(o[s++])<<6),s<=r&&(a|=e.indexOf(o[s++])),n.push(a>>>16&255),n.push(a>>>8&255),n.push(255&a)}for(;0==n[n.length-1];)n.pop();return n},l.SUFFIX="=",l.CHARACTERS="ABCDEFGHIJKLMNOPQRSTUVWXYZabcdefghijklmnopqrstuvwxyz0123456789+/";var c=l;function l(){}_.union=function(t,e){var i=e.s3[255&t],o=e.s2[255&(t>>=8)],n=e.s1[255&(t>>=8)],e=e.s0[255&(t>>=8)],t=(e>>16)+(n>>16)+((65535&e)+(65535&n)>>16)<<16|(65535&e)+(65535&n)&65535;return((t=(t>>16^o>>16)<<16|65535&(65535&t^65535&o))>>16)+(i>>16)+((65535&t)+(65535&i)>>16)<<16|(65535&t)+(65535&i)&65535},_.xor=function(t,e){return(t>>16^e>>16)<<16|65535&(65535&t^65535&e)},_._encryptBlock=function(t,e){var i=t.left,o=t.right,n=_.xor,r=_.union,i=n(i,e.p[0]),o=n(o,n(r(i,e),e.p[1]));i=n(i,n(r(o,e),e.p[2])),o=n(o,n(r(i,e),e.p[3])),i=n(i,n(r(o,e),e.p[4])),o=n(o,n(r(i,e),e.p[5])),i=n(i,n(r(o,e),e.p[6])),o=n(o,n(r(i,e),e.p[7])),i=n(i,n(r(o,e),e.p[8])),o=n(o,n(r(i,e),e.p[9])),i=n(i,n(r(o,e),e.p[10])),o=n(o,n(r(i,e),e.p[11])),i=n(i,n(r(o,e),e.p[12])),o=n(o,n(r(i,e),e.p[13])),i=n(i,n(r(o,e),e.p[14])),o=n(o,n(r(i,e),e.p[15])),i=n(i,n(r(o,e),e.p[16])),t.right=i,t.left=n(o,e.p[17])},_._decryptBlock=function(t,e){var i=t.left,o=t.right,n=_.xor,r=_.union,i=n(i,e.p[17]),o=n(o,n(r(i,e),e.p[16]));i=n(i,n(r(o,e),e.p[15])),o=n(o,n(r(i,e),e.p[14])),i=n(i,n(r(o,e),e.p[13])),o=n(o,n(r(i,e),e.p[12])),i=n(i,n(r(o,e),e.p[11])),o=n(o,n(r(i,e),e.p[10])),i=n(i,n(r(o,e),e.p[9])),o=n(o,n(r(i,e),e.p[8])),i=n(i,n(r(o,e),e.p[7])),o=n(o,n(r(i,e),e.p[6])),i=n(i,n(r(o,e),e.p[5])),o=n(o,n(r(i,e),e.p[4])),i=n(i,n(r(o,e),e.p[3])),o=n(o,n(r(i,e),e.p[2])),i=n(i,n(r(o,e),e.p[1])),t.right=i,t.left=n(o,e.p[0])},_._init=function(t){for(var e,o=t.split("").map(function(t){return 255&t.charCodeAt(0)}),t=_.kb,i=_._encryptBlock,n=0,r=0,s={left:0,right:0},a={p:t.p.slice(0).map(function(t){for(var e=o.length,i=0;i<4;i++)r=r*_.POW8|o[n++%e];return(t>>16^r>>16)<<16|65535&(65535&t^65535&r)}),s0:t.s0.slice(0),s1:t.s1.slice(0),s2:t.s2.slice(0),s3:t.s3.slice(0)},l=0,h=a.p.length;l<h;)i(s,a),a.p[l++]=s.left,a.p[l++]=s.right;for(l=0;l<4;l++)for(e=0,h=a["s"+l].length;e<h;)i(s,a),a["s"+l][e++]=s.left,a["s"+l][e++]=s.right;return a},_.decrypt=function(t,e){for(var i=_._decryptBlock,o=_._init(e),n=[],r=c.decode(t),s=r.length>>3,a=0,l={left:null,right:null},h=0;h<s;h++){l.left=r[a]*_.POW24|r[a+1]*_.POW16|r[a+2]*_.POW8|r[a+3],l.right=r[a+4]*_.POW24|r[a+5]*_.POW16|r[a+6]*_.POW8|r[a+7],i(l,o);var d=l.left,u=l.right;n.push(d>>24&255),n.push(d>>16&255),n.push(d>>8&255),n.push(255&d),n.push(u>>24&255),n.push(u>>16&255),n.push(u>>8&255),n.push(255&u),a+=8}return n[n.length-1]!=n[n.length-2]&&1!=n[n.length-1]||n.splice(n.length-(e=n[n.length-1]),e),n.map(function(t){return String.fromCharCode(t)}).join("")},_.POW2=Math.pow(2,2),_.POW3=Math.pow(2,3),_.POW4=Math.pow(2,4),_.POW8=Math.pow(2,8),_.POW16=Math.pow(2,16),_.POW24=Math.pow(2,24),_.kb={p:[608135816,2242054355,320440878,57701188,2752067618,698298832,137296536,3964562569,1160258022,953160567,3193202383,887688300,3232508343,3380367581,1065670069,3041331479,2450970073,2306472731],s0:[3509652390,2564797868,805139163,3491422135,3101798381,1780907670,3128725573,4046225305,614570311,3012652279,134345442,2240740374,1667834072,1901547113,2757295779,4103290238,227898511,1921955416,1904987480,2182433518,2069144605,3260701109,2620446009,720527379,3318853667,677414384,3393288472,3101374703,2390351024,1614419982,1822297739,2954791486,3608508353,3174124327,2024746970,1432378464,3864339955,2857741204,1464375394,1676153920,1439316330,715854006,3033291828,289532110,2706671279,2087905683,3018724369,1668267050,732546397,1947742710,3462151702,2609353502,2950085171,1814351708,2050118529,680887927,999245976,1800124847,3300911131,1713906067,1641548236,4213287313,1216130144,1575780402,4018429277,3917837745,3693486850,3949271944,596196993,3549867205,258830323,2213823033,772490370,2760122372,1774776394,2652871518,566650946,4142492826,1728879713,2882767088,1783734482,3629395816,2517608232,2874225571,1861159788,326777828,3124490320,2130389656,2716951837,967770486,1724537150,2185432712,2364442137,1164943284,2105845187,998989502,3765401048,2244026483,1075463327,1455516326,1322494562,910128902,469688178,1117454909,936433444,3490320968,3675253459,1240580251,122909385,2157517691,634681816,4142456567,3825094682,3061402683,2540495037,79693498,3249098678,1084186820,1583128258,426386531,1761308591,1047286709,322548459,995290223,1845252383,2603652396,3431023940,2942221577,3202600964,3727903485,1712269319,422464435,3234572375,1170764815,3523960633,3117677531,1434042557,442511882,3600875718,1076654713,1738483198,4213154764,2393238008,3677496056,1014306527,4251020053,793779912,2902807211,842905082,4246964064,1395751752,1040244610,2656851899,3396308128,445077038,3742853595,3577915638,679411651,2892444358,2354009459,1767581616,3150600392,3791627101,3102740896,284835224,4246832056,1258075500,768725851,2589189241,3069724005,3532540348,1274779536,3789419226,2764799539,1660621633,3471099624,4011903706,913787905,3497959166,737222580,2514213453,2928710040,3937242737,1804850592,3499020752,2949064160,2386320175,2390070455,2415321851,4061277028,2290661394,2416832540,1336762016,1754252060,3520065937,3014181293,791618072,3188594551,3933548030,2332172193,3852520463,3043980520,413987798,3465142937,3030929376,4245938359,2093235073,3534596313,375366246,2157278981,2479649556,555357303,3870105701,2008414854,3344188149,4221384143,3956125452,2067696032,3594591187,2921233993,2428461,544322398,577241275,1471733935,610547355,4027169054,1432588573,1507829418,2025931657,3646575487,545086370,48609733,2200306550,1653985193,298326376,1316178497,3007786442,2064951626,458293330,2589141269,3591329599,3164325604,727753846,2179363840,146436021,1461446943,4069977195,705550613,3059967265,3887724982,4281599278,3313849956,1404054877,2845806497,146425753,1854211946],s1:[1266315497,3048417604,3681880366,3289982499,290971e4,1235738493,2632868024,2414719590,3970600049,1771706367,1449415276,3266420449,422970021,1963543593,2690192192,3826793022,1062508698,1531092325,1804592342,2583117782,2714934279,4024971509,1294809318,4028980673,1289560198,2221992742,1669523910,35572830,157838143,1052438473,1016535060,1802137761,1753167236,1386275462,3080475397,2857371447,1040679964,2145300060,2390574316,1461121720,2956646967,4031777805,4028374788,33600511,2920084762,1018524850,629373528,3691585981,3515945977,2091462646,2486323059,586499841,988145025,935516892,3367335476,2599673255,2839830854,265290510,3972581182,2759138881,3795373465,1005194799,847297441,406762289,1314163512,1332590856,1866599683,4127851711,750260880,613907577,1450815602,3165620655,3734664991,3650291728,3012275730,3704569646,1427272223,778793252,1343938022,2676280711,2052605720,1946737175,3164576444,3914038668,3967478842,3682934266,1661551462,3294938066,4011595847,840292616,3712170807,616741398,312560963,711312465,1351876610,322626781,1910503582,271666773,2175563734,1594956187,70604529,3617834859,1007753275,1495573769,4069517037,2549218298,2663038764,504708206,2263041392,3941167025,2249088522,1514023603,1998579484,1312622330,694541497,2582060303,2151582166,1382467621,776784248,2618340202,3323268794,2497899128,2784771155,503983604,4076293799,907881277,423175695,432175456,1378068232,4145222326,3954048622,3938656102,3820766613,2793130115,2977904593,26017576,3274890735,3194772133,1700274565,1756076034,4006520079,3677328699,720338349,1533947780,354530856,688349552,3973924725,1637815568,332179504,3949051286,53804574,2852348879,3044236432,1282449977,3583942155,3416972820,4006381244,1617046695,2628476075,3002303598,1686838959,431878346,2686675385,1700445008,1080580658,1009431731,832498133,3223435511,2605976345,2271191193,2516031870,1648197032,4164389018,2548247927,300782431,375919233,238389289,3353747414,2531188641,2019080857,1475708069,455242339,2609103871,448939670,3451063019,1395535956,2413381860,1841049896,1491858159,885456874,4264095073,4001119347,1565136089,3898914787,1108368660,540939232,1173283510,2745871338,3681308437,4207628240,3343053890,4016749493,1699691293,1103962373,3625875870,2256883143,3830138730,1031889488,3479347698,1535977030,4236805024,3251091107,2132092099,1774941330,1199868427,1452454533,157007616,2904115357,342012276,595725824,1480756522,206960106,497939518,591360097,863170706,2375253569,3596610801,1814182875,2094937945,3421402208,1082520231,3463918190,2785509508,435703966,3908032597,1641649973,2842273706,3305899714,1510255612,2148256476,2655287854,3276092548,4258621189,236887753,3681803219,274041037,1734335097,3815195456,3317970021,1899903192,1026095262,4050517792,356393447,2410691914,3873677099,3682840055],s2:[3913112168,2491498743,4132185628,2489919796,1091903735,1979897079,3170134830,3567386728,3557303409,857797738,1136121015,1342202287,507115054,2535736646,337727348,3213592640,1301675037,2528481711,1895095763,1721773893,3216771564,62756741,2142006736,835421444,2531993523,1442658625,3659876326,2882144922,676362277,1392781812,170690266,3921047035,1759253602,3611846912,1745797284,664899054,1329594018,3901205900,3045908486,2062866102,2865634940,3543621612,3464012697,1080764994,553557557,3656615353,3996768171,991055499,499776247,1265440854,648242737,3940784050,980351604,3713745714,1749149687,3396870395,4211799374,3640570775,1161844396,3125318951,1431517754,545492359,4268468663,3499529547,1437099964,2702547544,3433638243,2581715763,2787789398,1060185593,1593081372,2418618748,4260947970,69676912,2159744348,86519011,2512459080,3838209314,1220612927,3339683548,133810670,1090789135,1078426020,1569222167,845107691,3583754449,4072456591,1091646820,628848692,1613405280,3757631651,526609435,236106946,48312990,2942717905,3402727701,1797494240,859738849,992217954,4005476642,2243076622,3870952857,3732016268,765654824,3490871365,2511836413,1685915746,3888969200,1414112111,2273134842,3281911079,4080962846,172450625,2569994100,980381355,4109958455,2819808352,2716589560,2568741196,3681446669,3329971472,1835478071,660984891,3704678404,4045999559,3422617507,3040415634,1762651403,1719377915,3470491036,2693910283,3642056355,3138596744,1364962596,2073328063,1983633131,926494387,3423689081,2150032023,4096667949,1749200295,3328846651,309677260,2016342300,1779581495,3079819751,111262694,1274766160,443224088,298511866,1025883608,3806446537,1145181785,168956806,3641502830,3584813610,1689216846,3666258015,3200248200,1692713982,2646376535,4042768518,1618508792,1610833997,3523052358,4130873264,2001055236,3610705100,2202168115,4028541809,2961195399,1006657119,2006996926,3186142756,1430667929,3210227297,1314452623,4074634658,4101304120,2273951170,1399257539,3367210612,3027628629,1190975929,2062231137,2333990788,2221543033,2438960610,1181637006,548689776,2362791313,3372408396,3104550113,3145860560,296247880,1970579870,3078560182,3769228297,1714227617,3291629107,3898220290,166772364,1251581989,493813264,448347421,195405023,2709975567,677966185,3703036547,1463355134,2715995803,1338867538,1343315457,2802222074,2684532164,233230375,2599980071,2000651841,3277868038,1638401717,4028070440,3237316320,6314154,819756386,300326615,590932579,1405279636,3267499572,3150704214,2428286686,3959192993,3461946742,1862657033,1266418056,963775037,2089974820,2263052895,1917689273,448879540,3550394620,3981727096,150775221,3627908307,1303187396,508620638,2975983352,2726630617,1817252668,1876281319,1457606340,908771278,3720792119,3617206836,2455994898,1729034894,1080033504],s3:[976866871,3556439503,2881648439,1522871579,1555064734,1336096578,3548522304,2579274686,3574697629,3205460757,3593280638,3338716283,3079412587,564236357,2993598910,1781952180,1464380207,3163844217,3332601554,1699332808,1393555694,1183702653,3581086237,1288719814,691649499,2847557200,2895455976,3193889540,2717570544,1781354906,1676643554,2592534050,3230253752,1126444790,2770207658,2633158820,2210423226,2615765581,2414155088,3127139286,673620729,2805611233,1269405062,4015350505,3341807571,4149409754,1057255273,2012875353,2162469141,2276492801,2601117357,993977747,3918593370,2654263191,753973209,36408145,2530585658,25011837,3520020182,2088578344,530523599,2918365339,1524020338,1518925132,3760827505,3759777254,1202760957,3985898139,3906192525,674977740,4174734889,2031300136,2019492241,3983892565,4153806404,3822280332,352677332,2297720250,60907813,90501309,3286998549,1016092578,2535922412,2839152426,457141659,509813237,4120667899,652014361,1966332200,2975202805,55981186,2327461051,676427537,3255491064,2882294119,3433927263,1307055953,942726286,933058658,2468411793,3933900994,4215176142,1361170020,2001714738,2830558078,3274259782,1222529897,1679025792,2729314320,3714953764,1770335741,151462246,3013232138,1682292957,1483529935,471910574,1539241949,458788160,3436315007,1807016891,3718408830,978976581,1043663428,3165965781,1927990952,4200891579,2372276910,3208408903,3533431907,1412390302,2931980059,4132332400,1947078029,3881505623,4168226417,2941484381,1077988104,1320477388,886195818,18198404,3786409e3,2509781533,112762804,3463356488,1866414978,891333506,18488651,661792760,1628790961,3885187036,3141171499,876946877,2693282273,1372485963,791857591,2686433993,3759982718,3167212022,3472953795,2716379847,445679433,3561995674,3504004811,3574258232,54117162,3331405415,2381918588,3769707343,4154350007,1140177722,4074052095,668550556,3214352940,367459370,261225585,2610173221,4209349473,3468074219,3265815641,314222801,3066103646,3808782860,282218597,3406013506,3773591054,379116347,1285071038,846784868,2669647154,3771962079,3550491691,2305946142,453669953,1268987020,3317592352,3279303384,3744833421,2610507566,3859509063,266596637,3847019092,517658769,3462560207,3443424879,370717030,4247526661,2224018117,4143653529,4112773975,2788324899,2477274417,1456262402,2901442914,1517677493,1846949527,2295493580,3734397586,2176403920,1280348187,1908823572,3871786941,846861322,1172426758,3287448474,3383383037,1655181056,3139813346,901632758,1897031941,2986607138,3066810236,3447102507,1393639104,373351379,950779232,625454576,3124240540,4148612726,2007998917,544563296,2244738638,2330496472,2058025392,1291430526,424198748,50039436,29584100,3605783033,2429876329,2791104160,1057563949,3255363231,3075367218,3463963227,1469046755,985887462],k:[202,218,204,100]};var a=_;function _(){}e.Cryptor=a;i.eqaulsUpperDomain=function(t,e){return t==e||0===t.indexOf("*")&&(t=t.substr(1,t.length-1),e.substr(e.indexOf(t),t.length)==t)},i._getLDKey=function(t){for(var e="",i=0,o=t.length;i<o;i++)e+=String.fromCharCode(t[i]>>1);return e},i.includedDomains=function(t,e,i){for(var o=t.split(","),n=0,r=o.length;n<r;n++){var s=o[n];if(this.eqaulsUpperDomain(s,e))return!0;if(i&&s&&"*"===s[0]&&"*."!==s.substr(0,1)){s=new RegExp("^/"+s.substr(1)+"/");if(i&&s.exec(i))return!0}}return!1},i.decrypt=function(t){for(var e={},i=a.decrypt(t,Ie._gk+this._getLDKey(a.kb.k)).split(";"),o=0,n=i.length;o<n;o++){var r=i[o].split("="),s=r[0],r=r[1];r&&0<r.length&&(e[s]=r)}return e};var n=i;function i(){}e.lk=function(){var t=location.hostname;try{e=realGrid2Lic}catch(t){return 1}if(!e)return 1;var e=n.decrypt(e);if("RealGrid2"!=e.name)return 2;var i=e.server.toLowerCase(),o=location.pathname.toLowerCase();if("developer"!=h.globalRealGridInfo.license&&!n.includedDomains(i,t.toLowerCase(),o))return 8;t=e.lic.toLowerCase();if(h.globalRealGridInfo.code=e.code,h.globalRealGridInfo.license=e.lic,"evaluation"==t||"limited"==t){o=e.expire.split(".").map(function(t){return parseInt(t)}),t=new Date(o[0],o[1],o[2],23,59,59,999);if(new Date>t)return n.includedDomains(i,"*",null)?32:16}return 0}})),si=(t(ri),ri.Cryptor,ri.lk,e(function(t,e){Object.defineProperty(e,"__esModule",{value:!0});i=st.GridCell,ne.__extends(n,i),n.prototype._doDispose=function(){this._rowGroup=null,i.prototype._doDispose.call(this)},_dp(n,"text",{get:function(){return this.item instanceof rt.GroupItemImpl?this._rowGroup.getHeaderText(this.item):""}}),_dp(n,"value",{get:function(){}});var i,o=n;function n(t){var e=i.call(this,"rowGroupHeaderCell")||this;return e._rowGroup=t,e}e.RowGroupHeaderCell=o;r=st.GridCell,ne.__extends(a,r),a.$_getValue=function(t,e){var i,o,n,r;if(e&&0<=e.dataIndex)return i=e.grid,t=(o=t.parent).getFooterIndex(t),(n=e.groupFooters.get(t))&&n.expression?((r=i.rowGroupSummaryRuntime).setColumn(e,e.grid.summarizer),r.setItem(o),n.evaluate(r)):n&&n.valueCallback?(0,n.valueCallback)(i.handler,e,t,o,null):!o||!i.isGroupedColumn(e)||null==(r=i.rowGroup.getFooterText(o))?void 0:r},a.getValue=function(t,e){try{return a.$_getValue(t,e)}catch(t){return st.GridCell.ERROR}},a.$_displayText=function(t,e,i,o){var n,r="";return void 0!==i&&e&&(i instanceof Date?r=(n=o.datetimeWriter)?n.getText(i):String(i):"number"==typeof i?r=(n=o.numberFormatter)?n.getText(i):isNaN(i)?"":String(i):"string"==typeof i?r=i+"":"boolean"==typeof i&&(r=String(i)),r)&&((n=o.prefix)&&(r=n+r),n=o.suffix)&&(r+=n),r||(i=re.Utils.cast(t.parent,rt.GroupItemImpl),e&&(o=e.groupFooters.get(i.getFooterIndex(t)))&&(r=o.text)),r||""},a.prototype._doDispose=function(){this._rowGroup=null,r.prototype._doDispose.call(this)},_dp(a,"footerIndex",{get:function(){return this._footerIndex}}),a.prototype.calculate=function(t){this._value=NaN,this._error=null;try{this._value=a.$_getValue(this.index.item||t,this.index.dataColumn)}catch(t){this._error=t,this._errorDetail=t,re.Utils.log("FOOTER ERROR: "+t)}},a.prototype.getDisplayText=function(t){return this._error?st.GridCell.ERROR:a.$_displayText(this.index.item,this.index.dataColumn,this._value,t)},a.prototype.getSummary=function(){return this._getSummary(this.valueColumn,this._footerIndex)},a.prototype.getTemplate=function(t){var e=this._getSummary(this.valueColumn,this._footerIndex);return e?e.realizeGroupSummary(this,t):void 0},_dp(a,"value",{get:function(){return this._value}}),_dp(a,"level",{get:function(){return this.index.item.level}}),a.prototype.setIndex=function(t){r.prototype.setIndex.call(this,t),this._footerIndex=t.item.$_footerIndex},a.prototype._getSummary=function(t,e){return t.groupFooters.get(e)};var r,s=a;function a(t){var e=r.call(this,"rowGroupFooterCell")||this;return e._footerIndex=0,e._value=NaN,e._rowGroup=t,e}e.RowGroupFooterCell=s;l=st.GridCell,ne.__extends(d,l),_dp(d,"level",{get:function(){return this.item.level}}),_dp(d,"getText",{get:function(){return""}}),_dp(d,"value",{get:function(){}});var l,h=d;function d(){var t=l.call(this,"rowGroupBarCell")||this;return t._level=0,t}e.RowGroupBarCell=h;u=se.Base,ne.__extends(_,u),_.prototype._doDispose=function(){u.prototype._doDispose.call(this)},_dp(_,"index",{get:function(){return this._index}}),_dp(_,"styleName",{get:function(){return this._styleName},set:function(t){t!=this._styleName&&(this._styleName=t,this._changed())}}),_dp(_,"exportStyleName",{get:function(){return this._exportStyleName},set:function(t){this._exportStyleName=t}}),_dp(_,"styleCallback",{get:function(){return this._styleCallback},set:function(t){t!==this._styleCallback&&(this._styleCallback=t,this._changed())}}),_dp(_,"cellStyleCallback",{get:function(){return this._cellStyleCallback},set:function(t){t!==this._cellStyleCallback&&(this._cellStyleCallback=t,this._changed())}}),_.prototype._changed=function(){this.$_owner&&this.$_owner.$_itemChanged(this)};var u,c=_;function _(t){var e=u.call(this)||this;return e._index=0,e.$_owner=t,e}e.RowGroupFooter=c;p=se.Base,ne.__extends(g,p),g.prototype._doDispose=function(){for(var t=0,e=this._items;t<e.length;t++)e[t].dispose();this._items=null,p.prototype._doDispose.call(this)},_dp(g,"owner",{get:function(){return this._owner}}),_dp(g,"count",{get:function(){return this._items.length},set:function(t){t=Math.max(t,1);var e=this._items;if(t!==e.length){for(var i=void 0;e.length<t;)(i=new c(this))._index=e.length,e.push(i);for(;e.length>t;)(i=e.pop()).dispose();this.$_itemChanged(null)}}}),_dp(g,"items",{get:function(){return this._items}}),g.prototype.get=function(t){return this._items[t]},g.prototype.assignFrom=function(t){p.prototype.assignFrom.call(this,t);var e=this._items,i=t&&t.items?re.Utils.makeArray(t.items,!0):t;if(re.Utils.isArray(i))for(var o=Math.max(i.length,1),n=0;n<o;n++)e[n]||(e[n]=new c(this)),e[n].assignFrom(i[n]),e[n]._index=n;else e[0].assignFrom(i),e[0]._index=0;this.$_itemChanged(null)},g.prototype.$_itemChanged=function(t){this._owner&&this._owner.rowGroupFooterChanged(t)};var p,f=g;function g(t){var e=p.call(this)||this;return e._items=[],e._owner=t,e._items.push(new c(e)),e}e.RowGroupFooterCollection=f;m=$t.VisualObject,ne.__extends(v,m),v.prototype._doDispose=function(){this._footers=this._footers.dispose(),m.prototype._doDispose.call(this)},v.prototype.rowGroupFooterChanged=function(t){this._counterAware&&this._counterAware.groupfFooterCounterChanged(this)},v.prototype.getGroupFooterCount=function(t){return this._footers.count},v.prototype.setCounterAware=function(t){this._counterAware=t},_dp(v,"mergeMode",{get:function(){return this._mergeMode},set:function(t){t!=this._mergeMode&&(this._mergeMode=t,this._changed())}}),_dp(v,"sorting",{get:function(){return this._sorting},set:function(t){t!=this._sorting&&(this._sorting=t,this._changed())}}),_dp(v,"expandedAdornments",{get:function(){return this._expandedAdornments},set:function(t){t!=this._expandedAdornments&&(this._expandedAdornments=t,this._grid)&&this._grid.$_rowGroupAdornmentsChanged(this)}}),_dp(v,"collapsedAdornments",{get:function(){return this._collapsedAdornments},set:function(t){t!==ht.RowGroupAdornments.NONE&&t!=this._collapsedAdornments&&(this._collapsedAdornments=t,this._grid)&&this._grid.$_rowGroupAdornmentsChanged(this)}}),_dp(v,"createFooterCallback",{get:function(){return this._createFooterCallback},set:function(t){t!==this._createFooterCallback&&(this._createFooterCallback=t,this._grid)&&this._grid.$_rowGroupAdornmentsChanged(this,!0)}}),_dp(v,"indentVisible",{get:function(){return this._indentVisible},set:function(t){t!=this._indentVisible&&(this._indentVisible=t,this._grid&&this._grid.$_rowGroupAdornmentsChanged(this),this._changed())}}),_dp(v,"levelIndent",{get:function(){return this._levelIndent},set:function(t){(t=Math.max(0,t))!=this._levelIndent&&(this._levelIndent=t,this._changed())}}),_dp(v,"mergeHeaderIndenting",{get:function(){return this._mergeHeaderIndenting},set:function(t){t!=this._mergeHeaderIndenting&&(this._mergeHeaderIndenting=t,this._changed())}}),_dp(v,"mergeFooterIndenting",{get:function(){return this._mergeFooterIndenting},set:function(t){t!=this._mergeFooterIndenting&&(this._mergeFooterIndenting=t,this._changed())}}),_dp(v,"footers",{get:function(){return this._footers},set:function(t){this.setFooters(t)}}),v.prototype.setFooters=function(t){this._footers.assignFrom(t)},_dp(v,"headerStatement",{get:function(){return this._headerStatement},set:function(t){t!==this._headerStatement&&(this._headerStatement=t,this._headerStatementExpr.source=t,this._changed())}}),_dp(v,"headerCallback",{get:function(){return this._headerCallback},set:function(t){this._headerCallback=t,this._changed()}}),_dp(v,"footerStatement",{get:function(){return this._footerStatement},set:function(t){t!=this._footerStatement&&(this._footerStatement=t,this._footerStatementExpr.source=t,this._changed())}}),_dp(v,"mergeExpanderVisibility",{get:function(){return this.expanderVisibility},set:function(t){this.expanderVisibility=t}}),_dp(v,"expanderVisibility",{get:function(){return this._expanderVisibility},set:function(t){t!==this.expanderVisibility&&(this._expanderVisibility=t,this._changed())}}),_dp(v,"expanderVisibleCallback",{get:function(){return this._expanderVisibleCallback},set:function(t){this._expanderVisibleCallback=t,this._changed()}}),_dp(v,"valueForGroupCallback",{get:function(){return this._valueForGroupCallback},set:function(t){this._valueForGroupCallback=t,this._grid&&this._grid.$_rowGroupAdornmentsChanged(this,!0),this._changed()}}),v.prototype.getHeaderCell=function(t){return this._headerCell.setIndex(_t.CellIndex.temp(this.owner,t.index)),this._headerCell},v.prototype.getFooterCell=function(t){var e=t.item;return this._footerCell.setIndex(t),this._footerCell.calculate(e),this._footerCell},v.prototype.getFooterStyleName=function(t){var e=this._footers.get(t.$_footerIndex),i="rg-rowgroup-footer rg-rowgroup-footer-level-"+String(t.parent.level),o=e.styleName,n=e.styleCallback;return o&&(i+=" "+o),n&&(o=n(this._grid.handler,t.index,e.index))&&(i+=" "+o),i},v.prototype.getFooterCellStyle=function(t,e,i){void 0===i&&(i=!0);var o=t.footerIndex,o=this._footers.get(o).cellStyleCallback,n=t.index.column.groupFooters.get(t.footerIndex);return o&&(o=o(this._grid.handler,t),e.assign(o)),n&&(o=n.styleCallback)&&(o=o(this._grid.handler,t),e.assign(o)),!e.styleName&&n&&(e.styleName=n.styleName),i&&(e.styleName?e.styleName=v.FOOTER_CELL_STYLE+" "+e.styleName:e.styleName=v.FOOTER_CELL_STYLE),e},v.prototype.getFooterCellFormatters=function(t,e){return e&&t?(e.numberFormatter=e.numberFormatter||t.numberFormatter,e.datetimeWriter=e.datetimeWriter||t.datetimeWriter,e.booleanFormatter=e.booleanFormatter||t.boolFormatter,e.textFormatter=e.textFormatter||t.textFormatter,e.prefix=e.prefix||t.prefix,e.suffix=e.suffix||t.suffix):t&&((e=this._footerFormatter).numberFormatter=t.numberFormatter,e.datetimeWriter=t.datetimeWriter,e.booleanFormatter=t.boolFormatter,e.textFormatter=t.textFormatter,e.prefix=t.prefix,e.suffix=t.suffix),e},v.prototype.getBarCell=function(t){return this._barCell.setIndex(t),this._barCell},v.prototype.getHeaderText=function(t){return!this._headerStatement&&this._headerCallback?this._headerCallback(this.owner.handler,t):(this._statementRuntime.setGrid(this.owner),this._statementRuntime.setGroup(t),this._headerStatementExpr.evaluate(this._statementRuntime))},v.prototype.getFooterText=function(t){if(this._footerStatement&&this._footerStatementExpr)return this._statementRuntime.setGrid(this.owner),this._statementRuntime.setGroup(t),this._footerStatementExpr.evaluate(this._statementRuntime)},v.prototype._doChanged=function(){this.owner.$_rowGroupChanged(this)},v.prototype.$_isMultiLine=function(t){var e=t.visible?1:0,i=t.footerCount;if(1<(e+=Math.max(t.descendantCount,t.count)-i))return!0;for(var o=0;o<i;o++)if(t.getFooter(o).visible&&1<++e)return!0;return!1},v.prototype.$_isExpanderVisible=function(t){if(!t.expanded)return!0;var e;if(this._expanderVisibleCallback)return null==(e=this._expanderVisibleCallback.call(this._grid,this._grid.handler,t))||e;switch(this._expanderVisibility){case ht.ExpanderVisibility.NONE:return!1;case ht.ExpanderVisibility.ALWAYS:return!0;default:return this.$_isMultiLine(t)}},v.FOOTER_CELL_STYLE="rg-rowgroup-footer-cell",v.FOOTER_CELL_RENDERER="rg-rowgroup-footer-renderer";var m,y=v;function v(t){t=m.call(this,t)||this;return t._mergeMode=!1,t._sorting=!0,t._expandedAdornments=ht.RowGroupAdornments.BOTH,t._collapsedAdornments=ht.RowGroupAdornments.HEADER,t._indentVisible=!0,t._levelIndent=20,t._mergeHeaderIndenting=!0,t._mergeFooterIndenting=!0,t._headerStatement="${groupField}: ${groupValue} - ${rowCount} rows",t._expanderVisibility=ht.ExpanderVisibility.DEFAULT,t._headerCell=new o(t),t._footerCell=new s(t),t._barCell=new h,t._headerStatementExpr=new Nt.ExpressionStatement(t._headerStatement),t._footerStatementExpr=new Nt.ExpressionStatement,t._statementRuntime=new At.RowGroupStatementRuntime,t._footerFormatter={numberFormatter:null,datetimeWriter:null,booleanFormatter:null,textFormatter:null,prefix:"",suffix:""},t._footers=new f(t),t}e.RowGroup=y})),ai=(t(si),si.RowGroupHeaderCell,si.RowGroupFooterCell,si.RowGroupBarCell,si.RowGroupFooter,si.RowGroupFooterCollection,si.RowGroup,e(function(t,e){Object.defineProperty(e,"__esModule",{value:!0});i=pt.LayerElement,ne.__extends(n,i),n.prototype._doDispose=function(){i.prototype._doDispose.call(this)},n.prototype.layout=function(){var t=this._owner.layoutManager,e=(this.$_setBounds(this._grid,t.gridBounds.clone().inflate(-1,-1)),t.dataBounds.clone());e.offset(t.contentBounds.x,t.contentBounds.y),this.$_setBounds(this._data,e)},n.prototype._getCssSelector=function(){return"rg-debug-layer"},n.prototype._initDom=function(t){var e=t.style,i=re.getDoc(t);e.position="absolute",t.appendChild(this._client=this.$_createElement(i,"Client")),t.appendChild(this._topContent=this.$_createElement(i,"Top Content")),t.appendChild(this._leftContent=this.$_createElement(i,"Left Content")),t.appendChild(this._fixedContent=this.$_createElement(i,"Fixed Content")),t.appendChild(this._content=this.$_createElement(i,"Content")),t.appendChild(this._rightContent=this.$_createElement(i,"Right Content")),t.appendChild(this._grid=this.$_createElement(i,"Grid Bounds","b")),t.appendChild(this._data=this.$_createElement(i,"Data Bounds","g")),t.appendChild(this._nonFixed=this.$_createElement(i,"Non Fixed","g"))},n.prototype.$_createElement=function(t,e,i){void 0===i&&(i="r");var t=t.createElement("span"),o=t.style;return o.display="inline-block",o.position="absolute",o.boxSizing="border-box",o.pointerEvents="none","b"==i?(o.border="2px dashed rgba(0, 0, 255, 0.5)",o.color="blue"):"g"==i?(o.paddingTop="20px",o.border="2px solid rgba(0, 128, 0, 0.5)",o.color="rgb(0, 128, 0)"):(o.border="1px solid rgba(255, 0, 0, 0.7)",o.color="red"),o.fontWeight="bold",o.textAlign="center",o.verticalAlign="middle",o.whiteSpace="normal",t[re.Utils.TextProp]=e,t},n.prototype.$_setBounds=function(t,e){t=t.style;e.isEmpty?t.display="none":(t.display="inline-block",t.left=e.x+"px",t.top=e.y+"px",t.width=e.width+"px",t.height=e.height+"px",t.lineHeight=e.height+"px")};var i,o=n;function n(t){var e=i.call(this,t.doc,"gridDebugLayer")||this;return e._owner=t,e}e.DebugLayer=o})),li=(t(ai),ai.DebugLayer,e(function(t,e){Object.defineProperty(e,"__esModule",{value:!0});var i;i=P.EventAware,ne.__extends(o,i),_dp(o,"min",{get:function(){return this._min},set:function(t){this._min=t}}),_dp(o,"max",{get:function(){return this._max},set:function(t){this._max=t}}),_dp(o,"step",{get:function(){return this._step},set:function(t){this._step=t}}),o.prototype.execute=function(t){var e;t&&(this._runner=t,this._next=this._min,e=re.getWin(t.container),t.container instanceof e.HTMLElement&&(this._view.setProperties(this._min,this._max,this._min),this._view.show(t.container)),this.$_runNext())},o.prototype.$_runNext=function(){if(this._next<this._max){var t=this._runner.run(this._next);if(this._next+=this._step,this._view.setPosition(this._next,t),this._next<this._max)return void setTimeout(function(){this.$_runNext()}.bind(this),0)}this._completed||this.$_complete()},o.prototype.$_complete=function(){try{this._runner.complete&&this._runner.complete()}finally{this._completed=!0,this._view.close()}};function o(){var t=i.call(this)||this;return t._min=0,t._max=100,t._step=1,t._next=0,t._completed=!1,t._timer=void 0,t}n=P.EventAware,ne.__extends(s,n),_dp(s,"message",{get:function(){return this._message},set:function(t){this._message=t}}),_dp(s,"position",{get:function(){return this._pos}}),s.prototype.setPosition=function(t,e){(t=Math.max(this._min,Math.min(this._max,t)))!=this._pos&&(this._pos=t,this._message=e,this.$_refreshView())},s.prototype.setProperties=function(t,e,i,o,n){void 0===o&&(o=null),void 0===n&&(n=!1),this._min=t,this._max=Math.max(t,e),this._max==this._min&&(this._max=this._min+1),this._pos=Math.max(this._min,Math.min(this._max,i)),this._message=o,n&&this.$_refreshView()},s.prototype.setZIndex=function(t){this._dom.style.zIndex=String(t+5)},s.prototype.show=function(t,e){void 0===e&&(e=null),this._container=t,e&&this.$_setMessage(e),t.appendChild(this._dom);e=t.getBoundingClientRect(),t=re.Utils.getSize(this._dom);re.Utils.move(this._dom,(e.width-t.width)/2,(e.height-t.height)/3)},s.prototype.close=function(){re.Utils.detach(this._dom)},s.prototype.$_createElement=function(t){var e=t.createElement("div"),i=(e.className="rg-progress",e.style);return i.position="absolute",i.zIndex="3001",i.minWidth="250px",i.padding="8px 10px",e.appendChild(e.$_bar=this.$_createBar(t)),e.appendChild(e.$_msg=this.$_createMsg(t)),e},s.prototype.$_createBar=function(t){var e=t.createElement("div"),i=(e.className="rg-progress-bar",e.style),t=(i.width="100%",i.height="13px",i.marginBottom="4px",t.createElement("div"));return t.className="rg-progress-progress",(i=t.style).height="100%",i.width="0px",e.appendChild(e.$_led=t),e},s.prototype.$_createMsg=function(t){var e=t.createElement("div"),t=t.createElement("span"),i=(t.className="rg-progress-message",e.style);return i.width="100%",i.textAlign="center",e.appendChild(e.$_span=t),e},s.prototype.$_refreshView=function(){var t=this._dom,e=t.$_bar,i=e.$_led,t=(t.$_msg.$_span.innerHTML=re.Utils.htmlEncode(this._message),re.Utils.getSize(e));i.style.width=Math.min(t.width-1,Math.floor(t.width*(this._pos-this._min)/(this._max-this._min)))+"px"},s.prototype.$_setMessage=function(t){this._dom.$_msg.$_span.innerHTML=re.Utils.htmlEncode(this._message)};var n,r=s;function s(t){var e=n.call(this)||this,t=(e._message="Load data...",e._min=0,e._max=0,e._pos=0,re.getDoc(t));return e._dom=e.$_createElement(t),e}a=P.EventAware,ne.__extends(h,a),h.prototype.show=function(t,e,i){this._view||(this._view=new r(t)),this._view.setZIndex(i),this._view.show(t||this._container,e||"Load data...")},h.prototype.close=function(){this._view&&this._view.close()},h.prototype.setProperties=function(t,e,i,o){this._view&&(o||(o=this._title||"Load data... ",t<e&&(o+=Math.floor(100*(i-t)/(e-t))+"% ("+i+" / "+e+")")),this._view.setProperties(t,e,i,o,!0))},h.prototype.showLoader=function(t,e){this._loaderView||(this._loaderView=new u(t)),this._loaderView.setZIndex(e),this._loaderView.show(t||this._container)},h.prototype.closeLoader=function(){this._loaderView&&this._loaderView.close()},h.prototype.loaderShowing=function(){return this._loaderView&&this._loaderView.isShowing()};var a,l=h;function h(t){var e=a.call(this)||this;return e._container=t,e}e.ProgressManager=l;d=P.EventAware,ne.__extends(c,d),c.prototype.show=function(t){t.appendChild(this._dom)},c.prototype.setZIndex=function(t){this._dom.style.zIndex=String(t+5)},c.prototype.close=function(){re.Utils.detach(this._dom)},c.prototype.isShowing=function(){return!!this._dom.parentElement},c.prototype.$_createElement=function(t){t=t.createElement("div");return t.className="rg-load-indicator",t.style.position="absolute",t};var d,u=c;function c(t){var e=d.call(this)||this,t=re.getDoc(t);return e._dom=e.$_createElement(t),e}})),hi=(t(li),li.ProgressManager,e(function(t,e){Object.defineProperty(e,"__esModule",{value:!0});i=_e.GridBaseOptions,ne.__extends(n,i),n.prototype._doDispose=function(){i.prototype._doDispose.call(this)},_dp(n,"title",{get:function(){return this._title},set:function(t){this._title!==t&&(this._title=t)}}),_dp(n,"description",{get:function(){return this._description},set:function(t){this._description!==t&&(this._description=t)}}),n.prototype.getDescription=function(){var t,e=this.title?"<strong>"+this.title+"</strong>":"",i="";return(t=this.grid)&&(t=(t=t.layoutManager.cellLayouts._dataCells)&&t[0])&&t.forEach(function(t){t.isProxy||(i+=t.displayText+", ")}),e+(i=this.description?"<span>"+this.description.replace("${columns}",i.substr(0,i.length-2))+"</span>":"")};var i,o=n;function n(t){t=i.call(this,t)||this;return t._title="리얼그리드 테이블 (테이블에서 엔터키로 버튼 링크등의 기능이 실행됩니다)",t._description="${columns} 열로 이루어진 데이터 테이블입니다.",t}e.WaiOptions=o})),di=(t(hi),hi.WaiOptions,e(function(t,e){Object.defineProperty(e,"__esModule",{value:!0});i=pt.LayerElement,ne.__extends(n,i),n.prototype._doDispose=function(){i.prototype._doDispose.call(this)},_dp(n,"message",{get:function(){return this._message},set:function(t){this._message=t}}),_dp(n,"active",{get:function(){return this._active},set:function(t){this._active=t}}),n.prototype.refresh=function(){var t,e=32===this._grid.container._lkCheck;e&&(this._active=!0,(t=this._dom)&&!t.parentElement&&this._grid._dom.appendChild(t),this.$_setDiv(t,e),this.$_setSpan(this._span,e,this.message||re.Base64.decode("6riw6rCE7J20IOunjOujjOuQmOyXiOyKteuLiOuLpA==")),this.resetSize(),this._grid.container.disabled=!0)},n.prototype._getCssSelector=function(){return"rg-watermark-layer"},n.prototype._initDom=function(t){var e=re.getDoc(t);t.appendChild(this._span=this.$_createElement(e,""))},n.prototype._setSizeStyle=function(t){var e=this._active;t.width=e?"100%":"0px",t.height=e?"100%":"0px"},n.prototype.$_setDiv=function(t,e){t=t.style;t.position="absolute",t.zIndex="1",e?(this.setImportantStyle("background-color","rgba(80, 80, 80, 0.5)"),this.setImportantStyle("display","block"),t.removeProperty("pointer-events")):t.pointerEvents="none"},n.prototype.$_setSpan=function(t,e,i){var o=t.style;e&&(o.display="inline-block",o.position="absolute",o.boxSizing="border-box",o.pointerEvents="none",o.fontWeight="bold",o.textAlign="center",o.verticalAlign="middle",o.whiteSpace="normal",o.top="50%",o.left="50%",o.transform="translate(-50%, -50%)",o.fontSize="50px",t[re.Utils.TextProp]=i)},n.prototype.$_createElement=function(t,e){return t.createElement("span")};var i,o=n;function n(t){var e=i.call(this,t.doc,"watermark")||this;return e._grid=t,e}e.WaterMarkLayer=o})),ui=(t(di),di.WaterMarkLayer,e(function(t,e){Object.defineProperty(e,"__esModule",{value:!0});i=st.GridCell,ne.__extends(n,i),n.prototype._doDispose=function(){i.prototype._doDispose.call(this)};var i,o=n;function n(){return i.call(this,"filterPanelCell")||this}e.FilterPanelCell=o;r=$t.VisualObject,ne.__extends(a,r),_dp(a,"height",{get:function(){return this._height},set:function(t){t!==this._height&&(this._height=t,this._changed())}}),_dp(a,"minRowHeight",{get:function(){return this._minRowHeight},set:function(t){t!==this._minRowHeight&&(this._minRowHeight=t,this._changed())}}),_dp(a,"showInput",{get:function(){return this._showInput},set:function(t){t!=this._showInput&&(this._showInput=t,this._changed())}}),_dp(a,"ignoreCase",{get:function(){return this._ignoreCase},set:function(t){t!==this._ignoreCase&&(this._ignoreCase=t,this._changed())}}),_dp(a,"filterDelay",{get:function(){return this._filterDelay},set:function(t){this._filterDelay=t}}),_dp(a,"beforeCommit",{get:function(){return this._beforeCommit},set:function(t){t!=this._beforeCommit&&(this._beforeCommit=t)}}),_dp(a,"textOperators",{get:function(){return this._textOperators||a.$_DefaultTextOperators},set:function(t){this._grid.closePopups(!1),this._textOperators=this.$_setOperators(t),this.$_getPopup(a.$_TEXT_POPUP,this.textOperators,!0)}}),_dp(a,"numberOperators",{get:function(){return this._numberOperators||a.$_DefaultNumberOperators},set:function(t){this._grid.closePopups(!1),this._numberOperators=this.$_setOperators(t),this.$_getPopup(a.$_NUMBER_POPUP,this.numberOperators,!0)}}),_dp(a,"dateOperators",{get:function(){return this._dateOperators||a.$_DefaultDateOperators},set:function(t){this._grid.closePopups(!1),this._dateOperators=this.$_setOperators(t),this.$_getPopup(a.$_DATE_POPUP,this.dateOperators,!0)}}),_dp(a,"trimData",{get:function(){return this._trimData},set:function(t){t!==this._trimData&&(this._trimData=t,this._changed())}}),a.prototype.getPopup=function(t){switch(t.valueType){case ht.ValueType.DATE:case ht.ValueType.DATETIME:return this.$_getPopup(a.$_DATE_POPUP,this.dateOperators,!1);case ht.ValueType.NUMBER:case ht.ValueType.UINT:case ht.ValueType.INT:case ht.ValueType.UNUM:return this.$_getPopup(a.$_NUMBER_POPUP,this.numberOperators,!1);case ht.ValueType.TEXT:case ht.ValueType.CHAR:return this.$_getPopup(a.$_TEXT_POPUP,this.textOperators,!1)}},a.prototype.clearInput=function(t){"string"==typeof t&&!(t=this._grid.columnByName(t))||this._grid.clearInlineFilter(t)},a.prototype.getCell=function(t){var e=this._cell,t=t.getDataColumn();return e.index.set(-1,t),e.showInput=!!t&&t.filterable&&(this.showInput?!1!==t.showInlineFilter:t.showInlineFilter),e.filterOperator=t._inlineFilterOp||this.$_getDefaultOperator(t),e.filterText=t._inlineFilterText||"",e},a.prototype.assignFrom=function(t){r.prototype.assignFrom.call(this,t)},a.prototype.$_getPopup=function(t,e,i){var o=this._grid,n=o.popupMenuManager,r=n.getMenu(t);if(!r||i){for(var s=[],i=Object.keys(e),a=o.filterOperatorCallback.bind(o),l=0,h=i;l<h.length;l++){var d=h[l],d=new Ze.PopupMenuItem(null,{label:e[d],tag:d,styleName:"rg-inline-filter-icon rg-inline-filter-"+re.Utils.camelToHyphen(d),callback:a});s.push(d)}r=n.addMenu(t,s,!0,null)}return r.name},a.prototype.$_getDefaultOperator=function(t){switch(t.valueType){case ht.ValueType.DATE:case ht.ValueType.DATETIME:return this._defaultDateOperator;case ht.ValueType.NUMBER:case ht.ValueType.UNUM:case ht.ValueType.UINT:case ht.ValueType.INT:return this._defaultNumberOperator;case ht.ValueType.CHAR:case ht.ValueType.TEXT:return this._defaultTextOperator}},a.prototype._createCell=function(){return new o},a.prototype.$_setOperators=function(t){var e=Object.keys(t);if(e.length<=0)for(var i=Object.keys(ht.InlineFilterOperator),o={},n=0;n<e.length;n++)for(var r=e[n],s=0;s<i.length;s++)ht.InlineFilterOperator[i[s]].toLowerCase()==r.toLowerCase()&&(o[ht.InlineFilterOperator[i[s]]]=t[r]);return o},a.$_TEXT_POPUP="$$_textOperators_$$",a.$_NUMBER_POPUP="$$_numberOperators_$$",a.$_DATE_POPUP="$$_dateOperators_$$",a.$_DefaultTextOperators={contains:"포함",notContains:"포함하지 않음",startsWith:"시작 문자",endsWith:"끝 문자",equal:"같음",notEqual:"같지 않음",empty:"값 없음",reset:"초기화"},a.$_DefaultNumberOperators={equal:"같음",notEqual:"같지 않음",greater:"보다 큼",greaterEqual:"크거나 같음",lower:"보다 작음",lowerEqual:"작거나 같음",between:"범위",empty:"값 없음",reset:"초기화"},a.$_DefaultDateOperators={contains:"포함",notContains:"포함하지 않음",startsWith:"시작 문자",endsWith:"끝 문자",equal:"같음",notEqual:"같지 않음",greater:"보다 큼",greaterEqual:"크거나 같음",lower:"보다 작음",lowerEqual:"작거나 같음",empty:"값 없음",reset:"초기화"};var r,s=a;function a(t){t=r.call(this,t)||this;return t._showInput=!0,t._height=23,t._minRowHeight=23,t._filterDelay=500,t._ignoreCase=!0,t._trimData=!1,t._beforeCommit=!0,t._defaultNumberOperator=ht.InlineFilterOperator.GREATER_EQUAL,t._defaultTextOperator=ht.InlineFilterOperator.CONTAINS,t._defaultDateOperator=ht.InlineFilterOperator.GREATER_EQUAL,t.visible=!1,t._cell=new o,t}e.FilterPanel=s})),ci=(t(ui),ui.FilterPanelCell,ui.FilterPanel,e(function(t,e){Object.defineProperty(e,"__esModule",{value:!0});i=gt.TableCell,ne.__extends(o,i),o.prototype.span=function(){this.spanned=!0,this.clear(!1)},o.prototype.clear=function(t){return i.prototype.clear.call(this,t),this.className&&(this.cell.className=this.className=""),this},o.prototype.setOperator=function(t){this.setClass(t),this.setPlaceHolder(t)},o.prototype.setClass=function(t){this.operatorButton&&(this.operatorButton.className="rg-filter-panel-operator "+(t?" rg-inline-filter-"+re.Utils.camelToHyphen(t):""))},o.prototype.setPlaceHolder=function(t){this.input&&(this.input.placeholder=t===ht.InlineFilterOperator.BETWEEN?"value1 ~ value2":"")},o.prototype.setFocus=function(){this.input.focus()};var i,y=o;function o(){var t=null!==i&&i.apply(this,arguments)||this;return t.input=null,t.operatorButton=null,t.popupMenu=null,t}e.FilterTableCell=y;n=ye.SimpleTableElement,ne.__extends(s,n),s.prototype._doDispose=function(){for(var t=0;t<this._cells.length;t++)for(var e=this._cells[t],i=0;i<e.length;i++)e[i].dispose(),e[i]=null;this._cells=null,n.prototype._doDispose.call(this)},s.prototype.tableCellByCell=function(t){for(var e=0;e<this._cells.length;e++)for(var i=this._cells[e],o=0;o<i.length;o++){var n=i[o];if(n&&n.cell===t)return n}},s.prototype.tableCellByLayout=function(t){for(var e=0;e<this._cells.length;e++)for(var i=this._cells[e],o=0;o<i.length;o++)if(i[o].layout===t)return i[o]},s.prototype.layoutByCell=function(t){t=this.tableCellByCell(t);return t&&t.layout},s.prototype.columnByCell=function(t){t=this.layoutByCell(t);return t&&t._columnObj},s.prototype.operatorChange=function(t,e,i,o){var e=e.tag,n=i.getDataColumn(),i=this.model.getCell(i);e===ht.InlineFilterOperator.RESET&&(t.input.value="",e=i.filterOperator),t.setOperator(e),this._filterRun(this.model,t.input.value,e,n)},s.prototype.clearInput=function(t,e){if(t)t.input.value="",this._filterRun(this.model,"",void 0,e);else for(var i=0,o=this._cells.length;i<o;i++)for(var n=0,r=this._cells[i].length;n<r;n++){(t=this._cells[i][n]).input.value="";var s=t.layout.getDataColumn();s._inlineFilterText="",s&&s.setInlineFilter(void 0,!1)}},s.prototype.setFocus=function(t){t.setFocus()},s.prototype._getCssSelector=function(){return"rg-filter-panel"},s.prototype._getRendererStyle=function(){return"rg-filter-panel-renderer"},s.prototype._getTableRowCount=function(t){return t.dataRows},s.prototype._getTableRowHeight=function(t,e){return this._rowPoints[e+1]-this._rowPoints[e]},s.prototype._getCellCount=function(t){return t.cellCount-t.fixedCellCount-t.rightCellCount},s.prototype._getCellWidth=function(t,e){return t.getCellWidth(e)},s.prototype._doPrepareTableRow=function(t,e,i,o){n.prototype._doPrepareTableRow.call(this,t,e,i,o)},s.prototype._prepareCellContent=function(t,e){t=re.getDoc(t).createElement("div");return t.className=this._getRendererStyle(),t},s.prototype._doMeasure=function(t,e,i){for(var o=t.layoutManager.dataRows,n=Math.max(t.filterPanel.height,t.filterPanel.minRowHeight*o),r=0,s=this._rowPoints=[r],a=0;a<o-1;a++)s.push(r+=Math.round(n/o));return s.push(r=n),ge.Size.create(e,r)},s.prototype._doPrepareTableExtents=function(t){},s.prototype._doLayoutContent=function(t){var e=t.grid,i=t.cellLayouts._dataCells,o=i.length,n=this._getFirstCell(t),r=this._getStartCell(t)-n,s=this._getEndCell(t)-n,a=this.model;this.$_refreshCells(t,i,this._tbody),this.$_refreshSpans(t,o),this.$_refreshHeadTitle(t,this._thead);for(var l=0;l<o;l++){var h=this._cells[l],d=this._getTableRow(t,l);re.Utils.setClassName(d,"rg-filter-panel-row");for(var u=r;u<=s;u++){var c,_=h[u];_.visible&&((c=_.layout).isProxy||c instanceof ct.CellLayoutGroupItem?_.clear(!1):(c=a.getCell(c),this._updateCell(e,a,c,_)))}}},s.prototype._updateCell=function(t,e,i,o){var n=t.doc,t=t.container,r=o.input,s=o.operatorButton,a=o.cell.firstElementChild,n=(s||(s=o.operatorButton=n.createElement("span"),a.appendChild(s)),r||((r=o.input=n.createElement("input")).type="text",t.$_addListener(r,"keyup",this._keyupHandler.bind(this),!1),t.$_addListener(r,"input",this._inputHandler.bind(this),!1),a.appendChild(r)),r.value=i.filterText,this._rowPoints[1]-this._rowPoints[0]),t=(a.style.display=i.showInput?"":"none",s.style);t.width="20px",t.height=n-6+"px";(t=r.style).width=o.width-30+"px",t.height=n-6+"px",o.setOperator(i.filterOperator),o.popupMenu=e.getPopup(o.layout.getDataColumn())},s.prototype._keyupHandler=function(t){var e=this.grid,i=t.keyCode||t.charCode;if(re.Utils.included(i,38,40)){var o=e.getTableCell(t.target),o=this.tableCellByCell(o),n=_t.CellIndex.temp(e,-1,o.layout),r=void 0;if(38!==i||n.isTop){if(40===i){if(n.isBottom)return n.itemIndex=e.topIndex,e.setFocusedIndex(n,!0,!0,!0),void e.setFocus();n.down(_t.VerticalMoveStep.CELL),r=n.layout}}else n.up(_t.VerticalMoveStep.CELL),r=n.layout;r&&(o=this.tableCellByLayout(n.layout)).setFocus()}else 13===i&&this.$_search(t,!0)},s.prototype._inputHandler=function(t){this.$_search(t,!1)},s.prototype.$_search=function(t,e){var t=t.target,i=this.grid,o=this.model,n=t.value,i=i.getTableCell(t),t=(this.tableCellByCell(i),this.columnByCell(i));t&&(i=o.getCell(t.layout),e?(clearTimeout(this._timer),this._filterRun(o,n,i.filterOperator,t)):this._startTimer(n,i.filterOperator,t))},s.prototype._startTimer=function(t,e,i){var o=this.model;clearTimeout(this._timer),this._timer=setTimeout(function(){this._filterRun(o,t,e,i)}.bind(this),o.filterDelay)},s.prototype._filterRun=function(t,e,i,o){var n=e;if(null!=e&&""!=e||i===ht.InlineFilterOperator.EMPTY)switch(o.valueType){case ht.ValueType.DATE:case ht.ValueType.DATETIME:case ht.ValueType.NUMBER:var r=e=e.replace(/[^0-9\-.~]/g,"");switch(re.Utils.included(o.valueType,ht.ValueType.DATE,ht.ValueType.DATETIME)?(l="datestr(value)",r='"'+(e=e.replace(/-/g,""))+'"'):l="value",i){case ht.InlineFilterOperator.EQUAL:a=l+" = "+r;break;case ht.InlineFilterOperator.NOT_EQUAL:a=l+" <> "+r;break;case ht.InlineFilterOperator.GREATER:a=l+" > "+r;break;case ht.InlineFilterOperator.GREATER_EQUAL:a=l+" >= "+r;break;case ht.InlineFilterOperator.LOWER:a=l+" < "+r;break;case ht.InlineFilterOperator.LOWER_EQUAL:a=l+" <= "+r;break;case ht.InlineFilterOperator.CONTAINS:a=l+" like '%"+e+"%'";break;case ht.InlineFilterOperator.NOT_CONTAINS:a=l+" not like '%"+e+"%'";break;case ht.InlineFilterOperator.STARTS_WITH:a=l+" like '"+e+"%'";break;case ht.InlineFilterOperator.ENDS_WITH:a=l+" like '%"+e+"'";break;case ht.InlineFilterOperator.EMPTY:a="value is empty";break;case ht.InlineFilterOperator.BETWEEN:var s=r.split("~").sort(function(t,e){return parseFloat(t)-parseFloat(e)}),a=2===s.length&&s[1]?"(value >= "+s[0]+") and (value <= "+s[1]+")":"value >= "+s[0]}break;default:ht.ValueType.TEXT;l=o.lookupDisplay?"text":"value";var l=t.trimData?"trim("+l+")":l,h=t.ignoreCase?"i":"";switch(e=t.trimData&&e?e.trim():e,e=t.ignoreCase&&e?e.toLowerCase():e,i){case ht.InlineFilterOperator.CONTAINS:a=l+" "+h+"likehan '%"+e+"%'";break;case ht.InlineFilterOperator.NOT_CONTAINS:a=l+" not "+h+"likehan '%"+e+"%'";break;case ht.InlineFilterOperator.STARTS_WITH:a=l+" "+h+"likehan '"+e+"%'";break;case ht.InlineFilterOperator.ENDS_WITH:a=l+" "+h+"likehan '%"+e+"'";break;case ht.InlineFilterOperator.EQUAL:a=l+" "+h+"like '"+e+"'";break;case ht.InlineFilterOperator.NOT_EQUAL:a=l+" not "+h+"like '"+e+"'";break;case ht.InlineFilterOperator.EMPTY:a="value is empty"}}else a=void 0;var d=this.tableCellByLayout(o.layout);a!=d.criteria&&(d.criteria=a,o.setInlineFilter(a,!0)),i&&(o._inlineFilterOp=i),o._inlineFilterText=n},s.prototype._getFirstCell=function(t){return t._firstCell},s.prototype._getLastCell=function(t){return t._lastCell},s.prototype._getStartCell=function(t){return t.getStartCell()},s.prototype._getEndCell=function(t){return t.getEndCell()},s.prototype.$_getCellHeight=function(t){var e=t.layout.hrow,i=this._rowPoints[e];return this._rowPoints[e+t.rowSpan]-i},s.prototype.$_refreshCells=function(t,e,i){for(var o=this._cells,n=i.children,r=n.length,s=this._getFirstCell(t),a=this._getLastCell(t)-s+1,l=o.length;l<r;l++)o.push([]);for(var h=0;h<r;h++){for(var d=o[h],u=n[h].children,c=e[h],_=0;_<a;_++){var p=u[_],f=c[_+s],g=d[_];g?g.cell===p&&g.layout!=f&&(g.layout=f,g.clear(!0)):(g=d[_]=new y(u[_])).layout=f,g.height=this.$_getCellHeight(g),g.width=this._getCellWidth(t,_),g.spanned=!1}for(_=a;_<d.length;_++)d[_].dispose();d.length=a}for(h=r;h<o.length;h++)for(var m=o[h],_=0;_<m.length;_++)m[_].dispose(),m[_]=null;o.length=r},s.prototype.$_refreshSpans=function(t,e){for(var i=this._getFirstCell(t),o=this._getFirstCell(t)-i,n=this._getLastCell(t)-i,r=t.cellLayouts._dataCells.length,s=0;s<e;s++)for(var a=this._cells[s],l=a.length,h=o;h<=n;h++){var d=a[h],u=d.layout,c=u.parent,_=c&&c.vertical;if(!d.spanned)if(u.isProxy)d.clear(!1);else{var p=0,f=0,g=u.getDataSpan()-1;if(0<g){var m,y=0,v=u.vindex+1;if(_)for(;y++<g&&y<r;){if(!(m=c.getVisible(v++)))break;f+=m._dspan,this._cells[s+y][h].span()}else for(;y++<g&&h-o+y<l&&v<c.visibleCount;){if(!(m=c.getVisible(v++)))break;p+=m._cspan,a[h+y].span()}}u.isNull&&d.clear(!0),d.set(u._cspan+p,u._dspan+f,!0)}}},s.prototype.$_refreshHeadTitle=function(t,e){for(var i=this._cells[0],o=e.children[0],n=0;o&&n<i.length;n++){var r=i[n].layout.source,s=o.children[n];s&&r&&(s[re.Utils.TextProp]=r.header.getDisplayText()||r.firstColumn.header.displayText)}},s.RENDERER_STYLE="rg-filter-renderer";var n,r=s;function s(t,e){t=n.call(this,t,e,"filterPanelView")||this;return t._rowPoints=[],t._cells=[],t}e.FilterPanelElement=r;a=r,ne.__extends(h,a),h.prototype._getCssSelector=function(){return"rg-fixed-filter-panel"},h.prototype._getExplicitWidth=function(t){return t.fixedWidth-t.fixedBarWidth},h.prototype._getFirstCell=function(t){return this._getStartCell(t)},h.prototype._getLastCell=function(t){return this._getEndCell(t)},h.prototype._getStartCell=function(t){return 0},h.prototype._getEndCell=function(t){return t.fixedCellCount-1},h.prototype._getCellCount=function(t){return t.fixedCellCount},h.prototype._getCellWidth=function(t,e){return t.getFixedCellWidth(e)};var a,l=h;function h(){return null!==a&&a.apply(this,arguments)||this}e.FixedFilterPanelElement=l;d=r,ne.__extends(u,d),u.prototype._getCssSelector=function(){return"rg-fixed-filter-panel"},u.prototype._getFirstCell=function(t){return this._getStartCell(t)},u.prototype._getLastCell=function(t){return this._getEndCell(t)},u.prototype._getStartCell=function(t){return t.cellCount-t.rightCellCount},u.prototype._getEndCell=function(t){return t.cellCount-1},u.prototype._getCellCount=function(t){return t.rightCellCount},u.prototype._getCellWidth=function(t,e){return t.getRightCellWidth(e)};var d,l=u;function u(){return null!==d&&d.apply(this,arguments)||this}e.RightFilterPanelElement=l})),_i=(t(ci),ci.FilterTableCell,ci.FilterPanelElement,ci.FixedFilterPanelElement,ci.RightFilterPanelElement,e(function(t,e){Object.defineProperty(e,"__esModule",{value:!0});i=ve.CellElement,ne.__extends(n,i),_dp(n,"model",{get:function(){return this._model},set:function(t){t!==this._model&&(this._model=t,this._changed())}}),_dp(n,"text",{get:function(){return this._text},set:function(t){t!=this._text&&(this._text=t||"",this._textChanged=!0,this._changed())}}),n.prototype.setStyleName=function(t,e){e!=this._styleName&&(this._styleName=e,this._setClassName(t))},n.prototype._getCssSelector=function(){return this._styleName},n.prototype._doUpdateContent=function(t,e,i){this._textChanged&&(this._textChanged=!1,i[re.Utils.TextProp]=this._text)},n.prototype._doRender=function(t){};var i,o=n;function n(t){t=i.call(this,t,"gridFilterCellView")||this;return t._text="",t._styleName="",t._textChanged=!1,t}e.GridFilterCellElement=o;r=ye.SimpleTableElement,ne.__extends(a,r),a.prototype._doDispose=function(){this._cells=null,r.prototype._doDispose.call(this)},a.prototype.getFilterModel=function(t){for(var e=0;e<this._cells.length;e++)if(t===this._getTableCell(0,e))return this._cells[e].model},a.prototype.getCellType=function(t){t=this.getFilterModel(t);return t instanceof ie.SectionObject?t.getCellType():void 0},a.prototype._getCssSelector=function(){return"rg-filter"},a.prototype._doPrepareTableExtents=function(t){for(var e,i=t.grid.rowBarContainer,t=t.sectionObjects,o=this._count=0,n=t;o<n.length;o++){var r=n[o];r.visible&&(((e=this._cells[this._count++]).model=r)instanceof oe.RowIndicator?e.width=i.rowIndicator.width:r instanceof ae.StateBar?e.width=i.stateBar.width:r instanceof le.CheckBar&&(e.width=i.checkBar.width))}},a.prototype._prepareCellContent=function(t,e){return this.grid.doc.createElement("div")},a.prototype._doLayoutContent=function(t){for(var e=t.grid,i=this._count,t=this._thead,o=t&&t.children[0];this.childCount<i;)this.addChild(this._cells[this.childCount]);for(;this.childCount>i;)this.removeLast();for(var n=0;n<i;n++){var r,s=this.getChild(n),a=s.model,l=a.getFilterCell(),h=this._getTableCell(0,n),d=h.firstElementChild,u=this.$_getCellSelector()+" "+a.getFilterStyleName();o&&(r=o.children[n])&&(r[re.Utils.TextProp]=a.getCellType()+" filter"),s.setStyleName(h,u),s.updateCell(e,l,d)}},a.prototype._doRender=function(t){},a.prototype._getTableRowCount=function(t){return 1},a.prototype._getTableRowHeight=function(t,e){return this.height},a.prototype._getCellCount=function(t){return this._count},a.prototype._getCellWidth=function(t,e){return this._cells[e].width},a.prototype.$_getCellSelector=function(){return a.CELL_CSS},a.CELL_CSS="rg-filter-cell";var r,s=a;function a(t){var e=r.call(this,t,null,"gridFilterView")||this;e._cells=[];for(var i=e._count=0;i<3;i++)e.addChild(e._cells[i]=new o(t));return e}e.GridFilterElement=s})),pi=(t(_i),_i.GridFilterCellElement,_i.GridFilterElement,e(function(t,e){Object.defineProperty(e,"__esModule",{value:!0});h=pt.ViewLayer,ne.__extends(o,h),o.createColumn=function(t){return t?new("series"==t.type?lt.SeriesColumn:lt.DataColumn)(t):null},o.prototype._doDispose=function(){return this.clearListener(),this._container=this._container.dispose(),this._gridObjects.length=0,this._header=this._header.dispose(),this._headerSummaries=this._headerSummaries.dispose(),this._footers=this._footers.dispose(),this._rowIndicator=this._rowIndicator.dispose(),this._stateBar=this._stateBar.dispose(),this._checkBar=this._checkBar.dispose(),this._body=this._body.dispose(),this._filterPanel=this._filterPanel.dispose(),this._rootElement=this._rootElement.dispose(),this._contentPane=this._contentPane.dispose(),this._rightContentPane=this._rightContentPane.dispose(),this._fixedContentPane=this._fixedContentPane.dispose(),this._leftContentPane=this._leftContentPane.dispose(),this._sideContentPane=this._sideContentPane&&this._sideContentPane.dispose(),this._topContentPane=this._topContentPane&&this._topContentPane.dispose(),this._bodyView=this._bodyView.dispose(),this._fixedBodyView=this._fixedBodyView.dispose(),this._rightBodyView=this._rightBodyView.dispose(),this._headerView=this._headerView.dispose(),this._fixedHeaderView=this._fixedHeaderView.dispose(),this._rightHeaderView=this._rightHeaderView.dispose(),this._headerSummaryView=this._headerSummaryView.dispose(),this._fixedHeaderSummaryView=this._fixedHeaderSummaryView.dispose(),this._rightHeaderSummaryView=this._rightHeaderSummaryView.dispose(),this._footerView=this._footerView.dispose(),this._fixedFooterView=this._fixedFooterView.dispose(),this._rightFooterView=this._rightFooterView.dispose(),this._rowBarContainer=this._rowBarContainer.dispose(),this._headView=this._headView.dispose(),this._sumView=this._sumView.dispose(),this._footView=this._footView.dispose(),this._filterPanelView=this._filterPanelView.dispose(),this._fixedFilterView=this._fixedFilterView.dispose(),this._rightFilterView=this._rightFilterView.dispose(),this._selectionLayer=this._selectionLayer.dispose(),this._feedbackLayer=this._feedbackLayer.dispose(),this._hscrollBar=this._hscrollBar.dispose(),this._vscrollBar=this._vscrollBar.dispose(),this._scrollEdge=this._scrollEdge.dispose(),this._selections=this._selections.dispose(),this._fixedOptions=this._fixedOptions.dispose(),this._displayOptions=this._displayOptions.dispose(),this._formatOptions=this._formatOptions.dispose(),this._editOptions=this._editOptions.dispose(),this._editorOptions=this._editorOptions.dispose(),this._copyOptions=this._copyOptions.dispose(),this._pasteOptions=this._pasteOptions.dispose(),this._sortingOptions=this._sortingOptions.dispose(),this._filteringOptions=this._filteringOptions.dispose(),this._mobileOptions=this._mobileOptions&&this._mobileOptions.dispose(),this._columns=this._columns.dispose(),this._activeCellLayout=null,this._defaultCellLayout=this._defaultCellLayout.dispose(),this._delegate=this._delegate.dispose(),this._layoutManager=this._layoutManager.dispose(),this._editController=this._editController&&this._editController.dispose(),this._filterSelector=this._filterSelector.dispose(),this._toastManager=this._toastManager.dispose(),this._tableViews=null,this._lookupProvider=this._lookupProvider&&this._lookupProvider.dispose(),this._columnSummaryRuntime=this._columnSummaryRuntime&&this._columnSummaryRuntime.dispose(),this._popupMenuManager=this._popupMenuManager&&this._popupMenuManager.dispose(),this._tooltipManager=this._tooltipManager&&this._tooltipManager.dispose(),this._focusedIndex=this._focusedIndex.dispose(),this._scrollTipView=this._scrollTipView&&this._scrollTipView.dispose(),this._waiOptions=this._waiOptions&&this._waiOptions.dispose(),this._watermarkLayer=this._watermarkLayer&&this._watermarkLayer.dispose(),_t.CellIndex.clearTemp(),h.prototype._doDispose.call(this)},_dp(o,"debugging",{get:function(){return this._debugging},set:function(t){t!=this._debugging&&((this._debugging=t)?(this.addChild(this._debugView),this.invalidateLayout()):this.removeChild(this._debugView))}}),_dp(o,"activeTool",{get:function(){return this.container.activeTool}}),_dp(o,"scrollBarWidth",{get:function(){return this._scrollBarWidth},set:function(t){(t=Math.max(0,t))!=this._scrollBarWidth&&(this._scrollBarWidth=t,this.invalidateLayout())}}),_dp(o,"scrollBarHeight",{get:function(){return this._scrollBarHeight},set:function(t){(t=Math.max(0,t))!=this._scrollBarHeight&&(this._scrollBarHeight=t,this.invalidateLayout())}}),_dp(o,"editorLender",{get:function(){return this._editorLender},set:function(t){this._editorLender=t}}),_dp(o,"body",{get:function(){return this._body}}),_dp(o,"header",{get:function(){return this._header}}),_dp(o,"footers",{get:function(){return this._footers}}),_dp(o,"footer",{get:function(){return this._footers.get(0)}}),o.prototype.setFooters=function(t){this._footers.assignFrom(t)},_dp(o,"headerSummaries",{get:function(){return this._headerSummaries}}),_dp(o,"headerSummary",{get:function(){return this._headerSummaries.get(0)}}),o.prototype.setHeaderSummaries=function(t){this._headerSummaries.assignFrom(t)},_dp(o,"rowIndicator",{get:function(){return this._rowIndicator}}),_dp(o,"checkBar",{get:function(){return this._checkBar}}),_dp(o,"stateBar",{get:function(){return this._stateBar}}),_dp(o,"filterPanel",{get:function(){return this._filterPanel}}),_dp(o,"activeCellLayout",{get:function(){return this._activeCellLayout}}),o.prototype._cellLayoutChanged=function(){this._cellLayoutDirty=!0},_dp(o,"layoutCount",{get:function(){return this._activeCellLayout.visibleCount}}),_dp(o,"visibleLayoutCount",{get:function(){return this._activeCellLayout.visibleCount}}),_dp(o,"columnCount",{get:function(){return this._columns.count}}),_dp(o,"dataSource",{get:function(){return this._items?this._items.dataSource:null},set:function(t){this.dataSource;this._items&&(this._items.dataSource=t),this.dataSource}}),_dp(o,"itemSource",{get:function(){return this._items},set:function(t){this._items&&this._items.removeListener(this),this._items=t,this._items&&this._items.addListener(this)}}),_dp(o,"maxItemCount",{get:function(){return this.itemSource.maxItemCount},set:function(t){this.itemSource.maxItemCount=Math.max(0,t)}}),_dp(o,"itemCount",{get:function(){return this._items?this._items.itemCount:0}}),_dp(o,"rowCount",{get:function(){return this._items?this._items.rowCount:0}}),_dp(o,"visibleRowCount",{get:function(){return this._items?this._items.rowCount:0}}),_dp(o,"dataCount",{get:function(){var t=this.dataSource;return t?t.rowCount:0}}),_dp(o,"columnSummaryRuntime",{get:function(){return this._columnSummaryRuntime}}),_dp(o,"columnValidationRuntime",{get:function(){return this._columnValidationRuntime}}),_dp(o,"rowValidationRuntime",{get:function(){return this._rowValidationRuntime}}),_dp(o,"focusedIndex",{get:function(){return this._focusedIndex}}),_dp(o,"focusedLayout",{get:function(){return this._focusedIndex&&this._focusedIndex.layout}}),_dp(o,"focusedColumn",{get:function(){return this._focusedIndex&&this._focusedIndex.layout&&this._focusedIndex.layout.firstColumn}}),_dp(o,"focusedRow",{get:function(){return this._focusedIndex?this._focusedIndex.itemIndex:-1}}),_dp(o,"focusedItem",{get:function(){return this._focusedIndex&&this._focusedIndex.item}}),_dp(o,"rowBarContainer",{get:function(){return this._rowBarContainer}}),_dp(o,"topContentPane",{get:function(){return this._topContentPane}}),_dp(o,"sideContentPane",{get:function(){return this._sideContentPane}}),_dp(o,"leftContentPane",{get:function(){return this._leftContentPane}}),_dp(o,"contentPane",{get:function(){return this._contentPane}}),_dp(o,"fixedContentPane",{get:function(){return this._fixedContentPane}}),_dp(o,"rightContentPane",{get:function(){return this._rightContentPane}}),_dp(o,"bodyView",{get:function(){return this._bodyView}}),_dp(o,"fixedBodyView",{get:function(){return this._fixedBodyView}}),_dp(o,"rightBodyView",{get:function(){return this._rightBodyView}}),_dp(o,"headerView",{get:function(){return this._headerView}}),_dp(o,"fixedHeaderView",{get:function(){return this._fixedHeaderView}}),_dp(o,"rightHeaderView",{get:function(){return this._rightHeaderView}}),_dp(o,"headerSummaryView",{get:function(){return this._headerSummaryView}}),_dp(o,"fixedHeaderSummaryView",{get:function(){return this._fixedHeaderSummaryView}}),_dp(o,"rightHeaderSummaryView",{get:function(){return this._rightHeaderSummaryView}}),_dp(o,"footerView",{get:function(){return this._footerView}}),_dp(o,"fixedFooterView",{get:function(){return this._fixedFooterView}}),_dp(o,"rightFooterView",{get:function(){return this._rightFooterView}}),_dp(o,"filterPanelView",{get:function(){return this._filterPanelView}}),_dp(o,"fixedFilterView",{get:function(){return this._fixedFilterView}}),_dp(o,"rightFilterView",{get:function(){return this._rightFilterView}}),_dp(o,"headView",{get:function(){return this._headView}}),_dp(o,"sumView",{get:function(){return this._sumView}}),_dp(o,"footView",{get:function(){return this._footView}}),_dp(o,"filterView",{get:function(){return this._filterView}}),_dp(o,"fixedOptions",{get:function(){return this._fixedOptions}}),_dp(o,"displayOptions",{get:function(){return this._displayOptions}}),_dp(o,"formatOptions",{get:function(){return this._formatOptions}}),_dp(o,"editOptions",{get:function(){return this._editOptions}}),_dp(o,"editorOptions",{get:function(){return this._editorOptions}}),_dp(o,"copyOptions",{get:function(){return this._copyOptions}}),_dp(o,"pasteOptions",{get:function(){return this._pasteOptions}}),_dp(o,"dataDropOptions",{get:function(){return this._dataDropOptions}}),_dp(o,"sortingOptions",{get:function(){return this._sortingOptions}}),_dp(o,"filteringOptions",{get:function(){return this._filteringOptions}}),_dp(o,"mobileOptions",{get:function(){return this._mobileOptions}}),_dp(o,"WaiOptions",{get:function(){return this._waiOptions}}),_dp(o,"accessibility",{get:function(){return this._accessibility}}),_dp(o,"delegate",{get:function(){return this._delegate}}),_dp(o,"heightMeasurer",{get:function(){return this.container.heightMeasurer}}),_dp(o,"layoutManager",{get:function(){return this._layoutManager}}),_dp(o,"selections",{get:function(){return this._selections}}),_dp(o,"selectionLayer",{get:function(){return this._selectionLayer}}),_dp(o,"editController",{get:function(){return this._editController}}),_dp(o,"validations",{get:function(){return this._validations},set:function(t){this._validations.assignFrom(t)}}),_dp(o,"validationManager",{get:function(){return this._validationManager}}),_dp(o,"popupMenuManager",{get:function(){return this._popupMenuManager}}),_dp(o,"tooltipManager",{get:function(){return this._tooltipManager}}),_dp(o,"toastManager",{get:function(){return this._toastManager}}),_dp(o,"topIndex",{get:function(){return this._topIndex},set:function(t){var e;(t=Math.max(0,Math.min(t,this.itemCount-this.layoutManager.fixedItemCount-1,this._vscrollBar?this._vscrollBar.maxPosition:0)))!=this._topIndex&&(null==(e=this.topIndexChanging(this._topIndex,t-this._topIndex,!1,!1))||isNaN(e)||(t=this._topIndex+e,t=Math.min(this.itemCount-1,Math.max(0,t))),this._topIndex=t,this.refreshView(),re.Utils.isMobile()&&this.isEditing()&&!this.isItemEditing()?this.closePopups(!1):this.closePopups())}}),_dp(o,"topItem",{get:function(){return this._topIndex+this.layoutManager.fixedItemCount}}),_dp(o,"leftPos",{get:function(){return this._leftPos},set:function(t){(t=Math.max(0,Math.min(t,this._hscrollBar?this._hscrollBar._maxPosition:0)))!=this._leftPos&&(this._leftPos=t,this._displayOptions.refreshMode==ht.RefreshMode.VISIBLE_ONLY?this.refreshView():(this._horzScrolled=!0,this.invalidate()),this.closePopups()),this._displayOptions.refreshMode!=ht.RefreshMode.VISIBLE_ONLY&&this._debugging&&this._debugView.layout()}}),_dp(o,"leftCell",{get:function(){return this._layoutManager.getCellIndex(this.leftPos)},set:function(t){this.leftPos=this._layoutManager.getCellPoint(t)}}),_dp(o,"leftLayout",{get:function(){return this._layoutManager.firstLayout},set:function(t){var e=this._layoutManager;t=Math.max(e.fixedLayoutCount,Math.min(t,e.layoutCount-1)),this.leftPos=e.getLayoutBounds(t).x}}),_dp(o,"lookupProvider",{get:function(){return this._lookupProvider}}),_dp(o,"canHovering",{get:function(){return!this.isEditing()}}),_dp(o,"hoveredCell",{get:function(){return this._hoveredCell}}),_dp(o,"empty",{get:function(){return 0==this.itemCount||0==this.visibleLayoutCount}}),_dp(o,"sorted",{get:function(){return this.itemSource.sorted}}),_dp(o,"spanned",{get:function(){return this._bodyView.visible&&this._bodyView.spanned||this._fixedBodyView.visible&&this._fixedBodyView.spanned||this._rightBodyView.visible&&this._rightBodyView.spanned}}),o.prototype.addFeedbackElement=function(t){if(t&&!this._feedbackLayer.contains(t))return this._feedbackLayer.addChild(t),!0},o.prototype.removeFeedbackElement=function(t){t=this._feedbackLayer.indexOf(t);return 0<=t&&(this._feedbackLayer.removeChildAt(t),!0)},o.prototype.setEventFrom=function(t){this._eventFrom=t},o.prototype.getVisibleLayout=function(t){return this._activeCellLayout.getVisible(t)},o.prototype.getColumn=function(t){return this._columns.getColumn(t)},o.prototype.setColumns=function(t){this._columns.setColumns(t),this._columnMap={};for(var e=this._columns.count-1;0<=e;e--){var i=this._columns.getColumn(e);this._columnMap[i.$_hash]=i}this._columnsReset(),this.dataSource&&this.applyFilters()},o.prototype.setCellLayout=function(t){this._beforeChangeLayout();var e=this.isValid(this._focusedIndex)&&this._focusedIndex.layout.firstColumn,t=(this._activeCellLayout&&this._activeCellLayout!==this._defaultCellLayout&&this._activeCellLayout.dispose(),t&&new ct.GridCellLayout(this).load(t)),i=(t&&t.addListener(this),this._focusedIndex&&this._focusedIndex.clone());this._activeCellLayout=t||this._defaultCellLayout,this.invalidateLayout(),this._activeCellLayout.isDefault()&&this.setColumns(this._columns.columns),this._activeCellLayout.resetColumns(this._columns),this._activeCellLayout.$_refresh(this._columns,this.displayOptions.minCellWidth),this._activeCellLayout.invalidate(),this.refreshView(),i&&e&&setTimeout(function(){i.layout=this._activeCellLayout.layoutByColumn(e),this.setFocusedIndex(i)}.bind(this),10),this._cellLayoutDirty=!0,this.clearRowHeights(),this._populateMerges()},o.prototype._checkEditing=function(){if(this.itemSource instanceof A.EditableItemProvider&&this.itemSource.isEditing())throw new Error("Item is editing")},o.prototype.addColumn=function(t,e){this._checkEditing();t=this._columns.add(t,e);return t&&(this._columnMap[t.$_hash]=t,this._columnsReset(),this.dataSource)&&this.applyFilters(),t},o.prototype.removeColumn=function(t){return!!(t="string"==typeof t?this.columnByName(t):t)&&(this._checkEditing(),!!this._columns.remove(t))&&(delete this._columnMap[t.$_hash],this._columnsReset(),this.dataSource&&this.applyFilters(),!0)},o.prototype.addLayout=function(t,e){return this.activeCellLayout.addLayout(t,e)},o.prototype.removeLayout=function(t){this.activeCellLayout.removeLayout(t)},o.prototype.restoreColumns=function(t){this._columns.restoreColumns(),this._columnsReset()},o.prototype.linearizeColumns=function(o){var t=this._activeCellLayout.collectColumns(!0,!0,!0);if(o=re.Utils.makeArray(o),t&&0<t.length){if(o&&0<o.length)for(var e=0;e<o.length;e++)!function(i){t.sort(function(t,e){t=t[o[i]],e=e[o[i]];return t<e?1:e<t?-1:0})}(e);var i=[];t.forEach(function(t){i.push(t.name)}),this.setCellLayout(i)}},o.prototype.registerColumnLayouts=function(t){this._columnLayouts.load(t)},o.prototype.findColumnLayout=function(t){return this._columnLayouts.find(t)},o.prototype.invalidateColumn=function(t){this._columnLock<=0&&this._resetColumnIndices(t),this._columnsDirty||(this._columnsDirty=!0,this.refreshView())},o.prototype.invalidateColumns=function(){this._columnsDirty||(this._columnsDirty=!0,this.refreshView())},o.prototype.beginUpdate=function(){this._updateLock=!0},o.prototype.endUpdate=function(t){(t||this._updateLock)&&(this._updateLock=!1,this.refreshView())},o.prototype.invalidate=function(){this._container&&this._container.invalidate(!1)},o.prototype.invalidateLayout=function(){this._updateLock||this._loading||(h.prototype.invalidateLayout.call(this),this._columnsDirty=!0)},o.prototype.invalidateCellLayouts=function(){this._updateLock||(this.clearRowHeights(),h.prototype.invalidateLayout.call(this),this._columnsDirty=!0)},o.prototype.refreshView=function(t){this._loading||(t?((t=this._container)._layoutNeeded=!0,t._render(Date.now())):this.invalidateLayout(),this.topIndex=this._topIndex,this.leftPos=this._leftPos)},o.prototype.resetGrid=function(){this._resetting=!0,this.topIndex=0,this.leftPos=0,this.refreshView()},o.prototype.getFirstCell=function(){if(0<this.itemCount){for(var t=0,e=0,i=this.itemCount;e<i;e++)if(this.getItem(e)instanceof rt.GridRow){t=e;break}return new _t.CellIndex(this,0<=t?t:0,this.getFirstColumn())}return null},o.prototype.$_setEditFocused=function(t,e){var i;t!=this.$_editFocused&&((this.$_editFocused=t)&&this.$_showFocusCell&&(i=this.focusedIndex)&&this.isValid(i),this.$_showFocusCell=!1),t&&e&&"focusin"==e.type&&re.Utils.isAncestorOf(this._container._container,e.target)&&ke.VisualContainer.setActiveGrid(this.container.$_hash)},o.prototype.getItem=function(t){return this._items.getItem(t)},o.prototype.getItemIndexOfRow=function(t){return this._items.getIndexOfRow(t,!1)},o.prototype.getItemOfRow=function(t,e){return this._items.getItemOfRow(t,e)},o.prototype.getItemIndicesOfRows=function(t){return this._items.getIndicesOfRows(t,!1)},o.prototype.getRowOfItem=function(t){t=this.getItem(t);return t?t.dataRow:-1},o.prototype.getItemOfModel=function(t){return null},o.prototype.getRowsOfItems=function(t,e){void 0===e&&(e=!1);for(var i=[],o=0,n=t;o<n.length;o++){var r=n[o],r=this.getItem(r),r=r?r.dataRow:-1;(e||0<=r)&&i.push(r)}return i},o.prototype.getIndicatorIndex=function(t){return t.index},o.prototype.getAllItems=function(){return this._items.getAllItems()},o.prototype.getImage=function(t){return null},o.prototype.getIndex=function(t,e){return new _t.CellIndex(this,t=void 0===t?-1:t,e=void 0===e?null:e)},o.prototype.getDataCellIndex=function(t,e){var i=t.parentElement,o=this._tableViews[i.$_view],i=i.$_row,o=o.layoutByCell(t);return null!=e?e.set(i,o):_t.CellIndex.temp(this,i,o)},_dp(o,"handler",{get:function(){return this.$_handler}}),o.prototype.getDataColumns=function(t){return this._activeCellLayout.getDataColumns(t=void 0===t?!0:t)},o.prototype.optionsChanged=function(t){this.refreshView()},o.prototype.scrollRow=function(t){var e=this.topIndex;this.topIndex=e+t},o.prototype.selectColumnFilters=function(t){if(this.isItemEditing(null)){if(!this.filteringOptions.commitBeforeFiltering)return;try{this.commit(!1)}catch(t){var e=this.focusedItem;if(e&&t instanceof G.ValidationError)return void((t=this._fireValidationFail(e.index,t.column,t))&&alert(this.editOptions.showOnlyValidationMessage&&t.userMessage?t.userMessage:t.toString()));throw t}}this._fireFiltering()&&(this.hideEditor(!1),this._filterSelector.show(t.layout.firstColumn,t.cell,this.dataSource))},o.prototype.closeFilterSelector=function(){this._filterSelector.hide()},o.prototype.closePopups=function(t){void 0===t&&(t=!0),this._filterRunning||this._filterSelector.hide(),this._popupMenuManager.close(),this._tooltipManager.close(),t&&this._editController.closeList(!1)},o.prototype.layoutByDataCell=function(t){var e=t.parentElement;return this._tableViews[e.$_view].layoutByCell(t)},o.prototype.columnByHash=function(t){return this._columnMap[t]},o.prototype.columnByDataCell=function(t){return this._bodyView.columnByCell(t)||this._fixedBodyView.columnByCell(t)||this._rightBodyView.columnByCell(t)},o.prototype.columnByName=function(t){return this._columns.columnByName(t)},o.prototype.columnByField=function(t){return"string"==typeof t&&(t=this.dataSource.getFieldIndex(t)),this._columns.columnByField(t)},o.prototype.columnsByField=function(t){return"string"==typeof t&&(t=this.dataSource.getFieldIndex(t)),this._columns.columnsByField(t)},o.prototype.columnByTag=function(t){return this._columns.columnByTag(t)},o.prototype.columnsByTag=function(t){return this._columns.columnsByTag(t)},o.prototype.getHorzColumns=function(t,e){return this._activeCellLayout.getHorzColumns(t,e)},o.prototype.getGroupLevel=function(t){return-1},o.prototype.isGroupedColumn=function(t){return!1},o.prototype.layoutByColumn=function(t){return(t=t instanceof lt.GridColumn?t:this.columnByName(t))?this._activeCellLayout.layoutByColumn(t):null},o.prototype.layoutByName=function(t){return this._activeCellLayout.layoutByName(t)},o.prototype.setFocus=function(t){function e(t){this.$_showFocusCell=!0;var e,i=this.focusedIndex.clone();i&&!this.isValid(i)&&(i.set(Math.max(0===this.topIndex?0:this.topItem,0),this.getFirstColumn(),this),this.setFocusedIndex(i,!0,!0)),this._accessibility&&!this.isEditing()&&this.isValid(i)?this.layoutManager.cellIsVisible(i)&&!this._resetTdFocus?(e=this.getBodyCellAt(i,!0))&&t!==e.cell&&this.getBodyViewAt(i).refreshTdFocused(i,!1):this._resetTdFocus=!0:re.Utils.isMobile()?this.container.setFocus():this._editController.setFocus(!0,t),ke.VisualContainer.getActiveGrid()!==this&&ke.VisualContainer.setActiveGrid(this.container.$_hash)}0<this.activeCellLayout.visibleCount?e.call(this,t):(this._setFocusTimer&&clearTimeout(this._setFocusTimer),this._setFocusTimer=setTimeout(function(){this._setFocusTimer=null,e.call(this,t)}.bind(this),10))},o.prototype.getFirstLayout=function(){return this._activeCellLayout.first},o.prototype.getFirstColumn=function(){return this._activeCellLayout.firstColumn},o.prototype.collectColumns=function(t,e,i){return this._activeCellLayout.collectColumns(t,e,i)},o.prototype.collectColumnNames=function(t,e){return this._activeCellLayout.collectColumnNames(t,e)},o.prototype.collectGroupNames=function(){return this._activeCellLayout.collectColumnNames(!1,!1,!0)},o.prototype.getChildColumnNames=function(t){return this._activeCellLayout.collectColumnNames(!1,!1,!1,t)},o.prototype.collectDataColumns=function(t,e){return this._activeCellLayout.collectDataColumns(t,e)},o.prototype.isValid=function(t){return t&&t.grid===this&&0<=t.itemIndex&&t.itemIndex<this.itemCount&&t.layout&&t.layout.parent&&t.layout.grid===this},o.prototype.getSelection=function(t){return 0<=(t=void 0===t?0:t)&&t<this._selections.count?this._selections.getItem(t):null},o.prototype.getSelections=function(){return this._selections.getItems()},o.prototype.clearAddSelection=function(t,e){void 0===e&&(e=!0);var i=this.focusedIndex;(t=void 0===t?!0:t)&&this._selections.clear(),e&&this.isValid(i)&&0<this.itemCount&&0<this.visibleLayoutCount&&this._selections.add(i,i,this._displayOptions.selectionStyle)},o.prototype.deleteSelection=function(t){this.$_deleteSelection(null,t=void 0===t?!1:t)},o.prototype.$_deleteSelection=function(t,r){function s(t,e){try{if(e&&0<e.length){for(var i=[],o=0,n=e.length;o<n;o++){var r=t.getItem(e[o]);r&&0<=r.dataRow&&i.push(r.dataRow)}if(0<i.length&&!t._fireRowsDeleting(i))return!1}}catch(t){return alert(t),!1}return!0}function o(t,e){return e&&((r||!t.editOptions.confirmWhenDelete||confirm(t.editOptions.deleteRowsMessage)&&(i=t,o=e.dataRow,(n=[]).push(o),s(i,n)))&&(t.cancel(),rt.ItemState_isInserting(e.itemState)||t.itemSource.remove(e)),1);var i,o,n}function e(t,e){for(var i=null,o=e.length;o--;){var n=t.getItem(e[o]),r=n.itemState;if(rt.ItemState_isEditing(r)){i=n,rt.ItemState_isInserting(r)&&e.splice(o,1);break}}var s=null;0<e.length&&(s=t.itemSource.getRemovableRows(e)),i&&t.cancel(),s&&t.itemSource.removeRows(s)}void 0===r&&(r=!1);var i=this.editOptions,n=this.selections,a=this.itemSource;if((r||i.deletable)&&a instanceof A.EditableItemProvider)if(this.isItemEditing(null)&&!i.deletableWhenEdit)alert(window.RG_CONST&&window.RG_CONST.COMMITEDITING?window.RG_CONST.COMMITEDITING:"먼저 편집을 완료 하십시오.");else{if(this.commitEditor(!0),o(this,t))return!0;if(!function(t,e){var i;if(0==e.count||1==e.count&&e.getItem(0).single)return i=-1,0<=(i=0==e.count?t.focusedIndex.itemIndex:e.getItem(0).getBounds().r1)&&t.canDelete(e=t.getItem(i))&&o(t,e),1}(this,n)){for(var l=n.count,h=[],d=0;d<l;d++){var u=n.getItem(d);if(W.isRowSelection(u)||u.style==W.SelectionStyle.BLOCK)for(var u=u.getBounds(),c=Math.min(u.r1,u.r2),_=Math.max(u.r1,u.r2),p=c;p<=_;p++){var f=this.getItem(p);(0<=f.dataRow||f.editable)&&h.push(p)}}h.sort(function(t,e){return t-e});for(var g=-1,d=h.length;d--;)h[d]==g?h.splice(d,1):g=h[d];0<h.length&&this.canDelete(this.getItem(h[0]))&&(r||!i.confirmWhenDelete?s(this,h)&&(e(this,h),this.clearAddSelection(!0)):confirm(i.deleteRowsMessage)&&s(this,h)&&(e(this,h),this.clearAddSelection(!0)))}}},o.prototype.revertSelection=function(t){void 0===t&&(t=!1);var e=this.editOptions,i=this.selections,o=this.itemSource;if((t||e.revertable)&&o instanceof A.EditableItemProvider&&(this.commitEditor(!0),!function(t,e){if(0==e.count||1==e.count&&e.getItem(0).single){var i=-1;if(0<=(i=0==e.count?t.focusedIndex.itemIndex:e.getItem(0).getBounds().r1))return t.itemSource.revert(i),1}}(this,i))){for(var n=i.count,r=[],s=0;s<n;s++){var a=i.getItem(s);if(W.isRowSelection(a)||a.style==W.SelectionStyle.BLOCK)for(var a=a.getBounds(),l=Math.min(a.r1,a.r2),h=Math.max(a.r1,a.r2),d=l;d<=h;d++){var u=this.getItem(d);(0<=u.dataRow||u.editable)&&r.push(d)}}r.sort(function(t,e){return t-e});for(var c=-1,s=r.length;s--;)r[s]==c?r.splice(s,1):c=r[s];0<r.length&&o.revertAll(r)}},o.prototype.eraseSelection=function(t){var e=this.editOptions,i=this.selections,o=this.itemSource;if(e.readOnly||!t&&!e.erasable||!e.updatable)return!1;if(!(o instanceof A.EditableItemProvider))return!1;if(this.isItemEditing())return!1;if(function(t,e){if(0==e.count||1==e.count&&e.getItem(0).single)return e=t.focusedIndex,t.setCellValue(e,void 0),1}(this,i))return!0;var n=i.count;if(n<1)return!1;for(var r=[],s=0;s<n;s++){var a=i.getItem(s);!W.isRowSelection(a)&&a.style!=W.SelectionStyle.BLOCK||(r=r.concat(a.getItems()))}if(0<r.length){for(s=0;s<n;s++)i.getItem(s).setValues(void 0);return!0}},o.prototype.getSelectedItems=function(t){void 0===t&&(t=!1);var e=this._selections.getItem(0);return e&&e.getItems(t)},o.prototype.getSelectedItemIndices=function(t){void 0===t&&(t=!1);for(var e=this._selections,i=[],o=0;o<e.count;o++)e.getItem(o).getItemIndices(t).forEach(function(t){i.indexOf(t)<0&&i.push(t)});return i},o.prototype.getSelectedRows=function(){for(var t=this._selections,e=[],i=0;i<t.count;i++)t.getItem(i).getRows().forEach(function(t){e.indexOf(t)<0&&e.push(t)});return e},o.prototype.getSelectedLayouts=function(){for(var t=this.activeCellLayout.collectLayouts(!0),e=this._selections,i=[],o=0;o<t.length;o++)e.containsLayout(t[o])&&i.indexOf(t[o])<0&&i.push(t[o]);return i},o.prototype.setFocusedIndex=function(t,e,i,o){if(void 0===e&&(e=!0),void 0===i&&(i=!1),void 0===o&&(o=!0),!this._focusing&&!this.disposing){this._focusing=!0;try{return this.$_doSetFocusedIndex(t,e,i,!0,o)}finally{this._focusing=!1}}},o.prototype.setFocusedItem=function(t){t instanceof rt.GridItem&&(t=t.index),this.setFocusedIndex(this.getIndex(t))},o.prototype.resetFocusedIndex=function(){this.setFocusedIndex(this._focusedIndex)},o.prototype.clearFocusedIndex=function(t){if(void 0===t&&(t=!1),!this._focusing&&!this.disposing){this._focusing=!0;try{var e=void 0;t&&this.focusedRow>=this.itemCount&&((e=this.focusedIndex.clone()).itemIndex=Math.max(-1,this.itemCount-1)),this.$_doSetFocusedIndex(e,!0,!1,!1,!1)}finally{this._focusing=!1}}},o.prototype.getTableCell=function(t){if(t){for(var e=t,i=re.getWin(e);e&&!(e instanceof i.HTMLTableCellElement);)e=e.parentElement;if(e instanceof i.HTMLTableCellElement&&e.parentElement){if(e.parentElement[ht.T_VIEW])return e;for(e=e.parentElement;e;){if(e instanceof i.HTMLTableCellElement&&e.parentElement[ht.T_VIEW])return e;e=e.parentElement}}}return null},o.prototype.getTableView=function(t){return this._tableViews[t.parentElement[ht.T_VIEW]]},o.prototype.getBodyViewAt=function(t){return this._layoutManager.getBodyView(t)},o.prototype.getBodyView=function(t){return this.getTableView(t)},o.prototype.getRowView=function(t,e){return t.getRowView(e)},o.prototype.getHeaderView=function(t){return this.getTableView(t)},o.prototype.getFooterView=function(t){return this.getTableView(t)},o.prototype.getSummaryView=function(t){return this.getTableView(t)},o.prototype.getFilterView=function(t){return this.getTableView(t)},o.prototype.getCellType=function(t){var e,i;if(t)return-99===(e=t.parentElement)[ht.T_ROW]?"fixedbar":(e=this._tableViews[e[ht.T_VIEW]])instanceof gt.GridBodyElement?(i=e.bodyCellByCell(t))?!(i.item instanceof rt.GroupFooter)||i.dataColumn&&i.dataColumn.mergeGrouped?"data":"groupFooter":void 0:e instanceof qe.RowBarContainer?e.getCellType(t):e instanceof Ce.HeaderElement?"header":e instanceof be.FooterElement?"footer":e instanceof ti.HeaderSummaryElement?"summary":e instanceof ci.FilterPanelElement?"inlineFilter":e instanceof Me.GridHeadElement?"head":e instanceof Fe.GridFootElement?"foot":e instanceof ei.GridSumElement?"sum":e instanceof _i.GridFilterElement?"filter":this._getCellTypeOf(e)},o.prototype._getCellTypeOf=function(t){},o.prototype.getBodyCellAt=function(t,e){var i=this._layoutManager,i=this._bodyView.visible&&this._bodyView.getCellAt(i,t)||this._fixedBodyView.visible&&this._fixedBodyView.getCellAt(i,t)||this._rightBodyView.visible&&this._rightBodyView.getCellAt(i,t);return i&&e&&i.merged&&i.head?i.head:i},o.prototype.getHeaderCellAt=function(t){return this._headerView.visible&&this._headerView.tableCellByLayout(t)||this._fixedHeaderView.visible&&this._fixedHeaderView.tableCellByLayout(t)||this._rightHeaderView.visible&&this._rightHeaderView.tableCellByLayout(t)},o.prototype.getBodyCellbyCell=function(t){return this.getBodyCellAt(this.cellToIndex(t),!1)},o.prototype.cellToIndex=function(t){var e=_t.CellIndex.temp(this,-1,null),i=(t=this.getCellViewOf(t),re.getWin(t));return t instanceof i.HTMLTableCellElement&&(i=this.getBodyView(t))&&(e.layout=i.layoutByCell(t),e.itemIndex=t.parentElement[ht.T_ROW]),e},o.prototype.cellToContainer=function(t,e){var i=(e=void 0===e?null:e)||new he.Point,o=this.getTableView(t),t=(o.getCellPoint(t,e),o.boundsByContainer(nt.Rectangle.Temp.set(e.x,e.y,0,0)));return i.set(t.x,t.y),i},o.prototype.pointToIndex=function(t,e,i,o){var n=_t.CellIndex.temp(this,-1,null);return o?this._layoutManager.mouseToIndex(this.getCellViewOf(t),e,i,n):this._layoutManager.mouseToIndexEx(this.getCellViewOf(t),e,i,n),n},o.prototype.getEditCellBounds=function(t,e){var i,o;return this._editorLender?this._editorLender.getEditBounds(t,e):(o=(i=(t=this.layoutManager).getBodyView(e)).getCellAt(t,e))?(o=this.canMergeEditing(o),o=i.getCellRectAt(t,e,o),o=i.boundsByContainer(o),!e.colFixed&&o.width>t.nonFixedBounds.width&&(o.width=t.nonFixedBounds.width),o):re.Utils.$_INVISIBLE_EDIT_BOUNDS.clone()},o.prototype.getEditBounds=function(t,e){var i,o,n;return this._editorLender?this._editorLender.getEditBounds(t,e):(i=e.item)?!(0<(o=(n=this.layoutManager).fixedItemCount)&&i.index>=o&&i.index-o<n.topIndex)&&(o=(i=n.getBodyView(e)).getCellAt(n,e))?(o=o.merged?o.head:o,n=i.getCellRectAt(n,e,!1),(n=i.boundsByContainer(n)).width-=(t.native?0:o.editWidth)+o.buttonWidth+o.errorWidth,n):re.Utils.$_INVISIBLE_EDIT_BOUNDS.clone():null},o.prototype.getCellViewOf=function(t){for(var e=re.getWin(t);t;){if(t instanceof e.HTMLTableCellElement)return t;t=t.parentElement}return null},o.prototype.getFocusedCellView=function(t){var e,i,o,n,r=t.item;return r&&!(0<(i=(e=this.layoutManager).fixedItemCount)&&r.index>=i&&r.index-i<e.topIndex)&&(i=r.merged,o=t.colFixed,n=t.rightFixed,r.isData||i)?(n?this._rightBodyView:o?this._fixedBodyView:this._bodyView).getCellView(e,t):null},o.prototype.isFocusedCell=function(t){return _t.CellIndex.areEquals(t,this._focusedIndex)},o.prototype.isFocusedRow=function(t){return this._focusedIndex.itemIndex==t},o.prototype.isFocusedColumn=function(t){return this._focusedIndex.column===t},o.prototype.fitSyncHeight=function(){return this._layoutManager.fitSyncHeight()},o.prototype.pasteFromClipboard=function(t,e){var i=this.focusedIndex.clone(),o=this.pasteOptions;if(i.normalize(this),this.isValid(i)&&i.dataColumn&&o.enabled&&this._firePaste(i,e))try{o.singleMode?this._clipboardManager.pasteCellFromClipboard(i,t):(this._clipboardManager.pasteFromClipboard(i,t),i.item&&rt.ItemState_isEditing(i.item.itemState)&&this.refreshView()),this._firePasted()}catch(t){throw t instanceof G.ValidationError&&(t=this._fireValidationFail(this._clipboardManager.appendingIndex.itemIndex,t.column,t))&&alert(this._editOptions.showOnlyValidationMessage&&t.userMessage?t.userMessage:t.toString()),t}},o.prototype.copyToClipboard=function(t,e,i){var o,n=!1,r=this.focusedIndex,s=this.selections;if((i=void 0===i?!1:i)||this.copyOptions.enabled){if(i||(o=(n=this.copyOptions.singleMode||0==s.count||s.single)?new W.BlockSelection(s,W.SelectionStyle.BLOCK,r,r):s.getItems(),i=this._fireCopy(o,t)),i){s=void 0,t=void 0;if(!e&&Array.isArray(o)){var a=1<o.length,l=1<o.length,h=!0;if(1<o.length&&o.forEach(function(t){h=h&&(t instanceof W.RowSelection||t instanceof W.ColumnSelection),a=a&&t instanceof W.RowSelection,l=l&&t instanceof W.ColumnSelection}),!h)return alert("multi selection copy not supported"),null;s=a?this.getSelectedItemIndices(!1):null,t=l?this.getSelectedLayouts():null}return e=e||(Array.isArray(o)?o[0]:o).getBounds(),n?this._clipboardManager.copyCellToClipboard(r):this._clipboardManager.copyToClipboard(e,s,t)}return null}return this._clipboardManager.copyEmtpyToClipboard()},o.prototype.toClipboard=function(t,e){void 0===e&&(e=!0);var i=function(t){var e;return"string"==typeof t?e=this.columnByName(t):t instanceof lt.GridColumn&&(e=t),e&&e.layout}.bind(this);if(!this.empty){if(!(t&&t instanceof _t.CellRange)){var o=void 0,n=void 0,n=t?(o=i(t.startColumn),i(t.endColumn)):(o=this._activeCellLayout.first,this._activeCellLayout.last);if(!o||!n)return;i=null==(t=t||{}).startItem?0:Math.max(0,t.startItem),t=null==t.endItem?this.itemCount-1:Math.min(t.endItem,this.itemCount-1),o=_t.CellRange.createRange(i,o,t,n)}var r,s,i=null==(i=this.copyToClipboard(null,o,!0))?"":i;if(!e)return i;re.Utils.isIE&&window.clipboardData?window.clipboardData.setData("text",i):(r=this.doc,(t=(s=r.createElement("textarea")).style).position="absolute",t.top="-10000px",r.body.appendChild(s),s.value=i,s.select(),r.execCommand("copy"),setTimeout(function(){r.body.removeChild(s)},100))}},o.prototype.showToast=function(t,e){this._toastManager.show(t,e,null)},o.prototype.hideToast=function(t){this._toastManager.close(),t&&setTimeout(t,0)},o.prototype.isEditing=function(t){return this._editorLender?this._editController.editing&&this._editorLender.isEditing():this._editController.editing&&(!t||_t.CellIndex.areEquals(t,this._editController.editIndex))},o.prototype.getEditItem=function(){return this._editorLender?this._editorLender.getEditItem(this):this.itemSource instanceof A.EditableItemProvider&&this.itemSource.editingItem},o.prototype.isItemEditing=function(t){return(t=this._editorLender?this._editorLender.getEditItem(this):t||this.focusedIndex.item)&&this.itemSource instanceof A.EditableItemProvider&&this.itemSource.isEditing(t)},o.prototype.isItemEdited=function(t){return(t=this._editorLender?this._editorLender.getEditItem(this):t||this.focusedIndex.item)&&this.itemSource instanceof A.EditableItemProvider&&this.itemSource.isEdited(t)},o.prototype.getEditValue=function(t,e,i){this._doGetEditValue(e,i)},o.prototype._doGetEditValue=function(t,e){this._fireGetEditValue(t,e)},o.prototype.isCellEditing=function(){return!!this._editOptions.commitByCell&&this._items.isUpdating},o.prototype.editorCommit=function(t,e,i){return this._doCellCommit(t,e,i)},o.prototype.scrollOnEditing=function(){if(this.isEditing())switch(this.editOptions.scrollOnEditing){case ht.ScrollOnEditing.CANCEL:this.cancelEditor(!0);break;case ht.ScrollOnEditing.COMMIT:this.commitEditor(!0);break;case ht.ScrollOnEditing.DEFAULT:}},o.prototype._doCellCommit=function(t,e,i){return this._editorLender?this._editorLender.editCellCommit(t,e,i):this._fireEditCommit(t,e,i)},o.prototype.editorActivated=function(t){this._doEditorActivated(t.editIndex,!0,t)},o.prototype._doEditorActivated=function(t,e,i){var t=this.getBodyCellAt(t,!1),o=t&&this.getBodyView(t.cell);o&&o.$_buttonZIndexChanged(this,t,e,i)},o.prototype.setCellUpdateEventLock=function(t){this._cellUpdateEventLock=t},o.prototype.$_validateCellValue=function(e,t){try{var i=rt.ItemState_isInserting(e.item.itemState);return this._validationManager.validateCell(e,i,!1),!0}catch(t){if(!(t instanceof G.ValidationError))throw t;this._validationManager.addInvalidateCell(e,t)}return!1},o.prototype.$_refreshInvalidList=function(t){this.itemCount<=0||t?this.validationManager.clearInvalidateList():this.validationManager.checkRowIds()},o.prototype.validateCellCommit=function(t,e){this.editOptions.validateOnEdited&&this.$_validateCellValue(t,e)},o.prototype.validateCells=function(t,e,i){return this._validationManager.validateCells(t,e,i)},o.prototype.getInvalidCells=function(){return this._validationManager.getInvalidCells()},o.prototype.clearInvalidCells=function(){this._validationManager.clearInvalidCells()},o.prototype.getEditableAt=function(t,e){if(!this._editorLender){var i=t.dataColumn;if(!i)return!1;if(e&&null!=e.editable)return e.editable;if(t.item.isDataRow){e=t.item;if(null!=e.editable)return e.editable}e=this.editOptions;if(e.columnEditableFirst){if(!(null!=i.editable?i:e).editable)return!1}else{if(!e.editable)return!1;if(!1===i.editable)return!1}e=this.fixedOptions;return!(t.colFixed&&!e.editable||t.rowFixed&&!e.rowEditable)}},o.prototype.getReadOnlyAt=function(t,e){var i;if(!this._editorLender)return!(i=t.dataColumn)||!(t=this._items.getItem(t.itemIndex))||(e&&null!=e.readOnly?e.readOnly:(t=t.merged&&t instanceof rt.GroupItem?t.firstDataItem:t,!this.editOptions.updatable&&!rt.ItemState_isInsertItem(t.itemState,t.rowState)||!this._items.canUpdate(t,i.dataIndex)||!!this._editOptions.readOnly||!!i.readOnly))},o.prototype.getWritableAt=function(t){var e,i,o;if(!this._editorLender)return!!this.isValid(t)&&((i=this.getBodyViewAt(t))?(i=i.getCellAt(this._layoutManager,t))?(e=i.merged&&i.head||i,(null==i.editable||i.editable||e.renderer2&&e.renderer2.canEdit())&&!i.readonly):(e=t.dataColumn,t=(i=this.body.getCell(t,!1))&&e.getCellStyle(i),i=e.readOnly,o=e.isWritable(),t&&"string"!=typeof t&&(i=(null!==t.readOnly?t:e).readOnly,o=null!==t.editable?t.editable:e.isWritable()),o&&!i):void 0)},o.prototype.getWritable=function(t,e){var i=e.layout,t=_t.CellIndex.temp(this,t,i),i=this.getWritableAt(t);return void 0===i?e.isWritable():i},o.prototype.canEditAt=function(t){var e=this.getBodyViewAt(t);if(e)return(e=e.getCellAt(this._layoutManager,t))&&void 0!==e.editable?e.editable:this.getEditableAt(t,null)},o.prototype.canWriteAt=function(t){var e=this.getBodyViewAt(t);if(e)return(e=e.getCellAt(this._layoutManager,t))&&void 0!==e.readonly?!e.readonly:!this.getReadOnlyAt(t,null)},o.prototype.canUpdate=function(t,e){return this.editOptions.canUpdate(t.rowState===b.RowState.CREATED)&&(this._editorLender||0<this.visibleLayoutCount)&&this.itemSource&&this.itemSource.canUpdate(t,e)},o.prototype.canAppend=function(){var t=this.itemSource,e=!this.isEditing()&&this.editOptions.canAppend()&&0<this.visibleLayoutCount&&t&&t.canAppend();if(e)try{if(!this._fireRowInserting(t.itemCount,-1))return!1}catch(t){return alert(t.message||t),!1}return e},o.prototype.canInsert=function(t,e,i){var o=this.itemSource,i=!this.isEditing()&&this._doCanInsert(t,e,i)&&this.editOptions.canInsert()&&0<this.visibleLayoutCount&&o&&o.canInsert(t);if(i)try{if(!this._fireRowInserting(t.index+(e?1:0),-1))return!1}catch(t){return alert(t.message||t),!1}return i},o.prototype._doCanInsert=function(t,e,i){return!0},o.prototype.canDelete=function(t){var e=this.itemSource;return this.editOptions.canDelete()&&0<this.visibleLayoutCount&&e&&(this.isItemEditing(t)||e.canDelete(t))},o.prototype.canCommit=function(t){return this.isItemEditing(t)&&(this.isItemEdited()||this.editOptions.commitWhenNoEdit)},o.prototype.canCancel=function(t){return this.isItemEditing(t)},o.prototype.canMergeEditing=function(t){return!this.isTree()&&t&&t.merged&&this.editOptions.commitByCell&&t.dataColumn&&t.dataColumn.mergeEdit},o.prototype.edit=function(t){return t=t||this.focusedIndex,!(!(this.isValid(t)&&this.itemSource instanceof A.EditableItemProvider)||t.dataColumn&&!this.canUpdate(t.item,t.dataField))&&(rt.ItemState_isEditing(t.item.itemState)||this.validationManager.cloneError(t.dataId,-1),this.itemSource.edit(t.item))},o.prototype.insertAt=function(t,e){return this.insert(this.getItem(t),e)},o.prototype.insert=function(t,e,i){var o,n;return void 0===e&&(e=!1),void 0===i&&(i=!1),!!(t=(t=void 0===t?null:t)||(this.focusedIndex?this.focusedIndex.item:null))&&!!((o=this.itemSource)instanceof A.EditableItemProvider&&this.canInsert(t,e,i))&&(n=this.$_getInsertDefaults(null),this._cancelDummy(),o.insert(t,n,e,i))},o.prototype.append=function(){var t,e=this.itemSource;return!!(e instanceof A.EditableItemProvider&&e.dataSource&&this.canAppend())&&(t=this.$_getInsertDefaults(null),this._cancelDummy(),e.append(t))},o.prototype._appendDummy=function(){var t=this._editOptions;t.displayEmptyEditRow&&t.appendable&&this._items.appendDummy()},o.prototype._cancelDummy=function(){this._items.cancelDummy()},o.prototype.setValueAt=function(t,e,i){var t=this.getItem(t);t&&0<=e&&(t instanceof A.EditItem||t instanceof qt.TreeEditItem?t.setValue(e,i):0<=(t=t.dataRow)&&this.dataSource.setValue(t,e,i))},o.prototype.setCellValue=function(t,e){this.isValid(t)&&this.setValueAt(t.itemIndex,t.dataField,e)},o.prototype.recallHeight=function(){this._container.recallHeight()},o.prototype.$_canShowEditor=function(t,e,i){return!!this.isValid(t)&&this._fireShowEditor(this._editorIndex.assign(t),e,i)},o.prototype.hideEditor=function(t){void 0===t&&(t=!1),this._editController.closeList(!1),this._editController.hideEditor(),t&&this.activeTool.resetFocused()},o.prototype.reprepareEditor=function(){this._editController.reprepareEditor(this.focusedIndex)},o.prototype.requestPrepareEditor=function(){this._editController.requestPrepareEditor()},o.prototype.fillEditSearchItems=function(t,e,i,o){this._editController.fillSearchItems(t,e,i,o)},o.prototype.showEditor=function(t,e,i){if(void 0===e&&(e=!1),t=t||this.focusedIndex,this._editController.showEditor(t,i=void 0===i?!1:i))return this.activeTool.resetFocused(),e&&this._editController.caretToLast(),!0},o.prototype.showEditList=function(t){if(this._editController.showList(t))return!0},o.prototype.editorButtonClicked=function(t,e){this._editController.buttonClicked(t,e),this._fireEditButtonClicked(t)},_dp(o,"canUndo",{get:function(){var t=this.dataSource;return t&&t.canUndo&&!this.isItemEditing()}}),o.prototype.undo=function(){return!!this.canUndo&&(this.dataSource.undo(),!0)},_dp(o,"canRedo",{get:function(){var t=this.dataSource;return t&&t.canRedo&&!this.isItemEditing()}}),o.prototype.redo=function(){return!!this.canRedo&&(this.dataSource.redo(),!0)},o.prototype.execute=function(t){},o.prototype.clearCommandStack=function(t){this.dataSource.clearCommandStack()},o.prototype.setLookups=function(t){t&&(this._lookupProvider||(this._lookupProvider=new Je.LocalLookupSourceProvider,this._lookupProvider.addListener(this)),this._lookupProvider.load(t))},o.prototype.addLookupSource=function(t){(this._lookupProvider||(this._lookupProvider=new Je.LocalLookupSourceProvider)).add(t)},o.prototype.removeLookupSource=function(t){this._lookupProvider&&this._lookupProvider.remove(t)},o.prototype.existsLookupData=function(t,e){if(t&&e){var i=this._lookupProvider&&this._lookupProvider.getSource(t);if(i)return i.exists(re.Utils.makeArray(e));throw new Error("Invalid lookup source id: "+t)}},o.prototype.fillLookupData=function(t,e){if(t&&e){var i=this._lookupProvider&&this._lookupProvider.getSource(t);if(!i)throw new Error("Invalid lookup source id: "+t);e.rows?i.fillRows(e.rows):i.fill(e.keys,e.values)}},o.prototype.clearLookupData=function(t){if(t){var e=this._lookupProvider&&this._lookupProvider.getSource(t);if(!e)throw new Error("Invalid lookup source id: "+t);e.clear()}},o.prototype.addLookupData=function(t,e,i){if(void 0===i&&(i=null),t&&e){e=re.Utils.makeArray(e);var o=this._lookupProvider&&this._lookupProvider.getSource(t);if(!o)throw new Error("Invalid lookup source id: "+t);i?o.add(e,i):o.addRow(e)}},o.prototype.setOptions=function(t){},o.prototype.doContextMenu=function(t){var e,i=t.mouseX,o=t.mouseY,n=this.activeTool,r=n._findTableCell(),s=n.findElementAt(i,o,!1);if(r){var a,l,h=this.getTableView(r),d=this.getCellType(r),u=void 0,c=void 0;switch(d){case"head":a=R.ClickData.getSub(d,this.headView.getCellType(r)),l=(_=this.headView.getHeadModel(r))&&_.popupMenuName;break;case"foot":a=R.ClickData.getSub(d,this.footView.getCellType(r)),l=(_=this.footView.getFootModel(r))&&_.popupMenuName;break;case"indicator":u=this.rowBarContainer.rowOf(r),c=this.getRowOfItem(u),a=R.ClickData.getItem(d,u,c),l=this.rowIndicator.popupMenuName;break;case"state":u=this.rowBarContainer.rowOf(r),c=this.getRowOfItem(u),a=R.ClickData.getItem(d,u,c),l=this.stateBar.popupMenuName;break;case"check":u=this.rowBarContainer.rowOf(r),c=this.getRowOfItem(u),a=R.ClickData.getItem(d,u,c),l=this.checkBar.popupMenuName;break;case"header":_=h.layoutByCell(r),a=R.ClickData.getLayout(d,_),l=_.firstColumn.header.popupMenuName;break;case"data":(p=h.bodyCellByCell(r)).grouped?a=R.ClickData.getItem("groupHeader",p.item.index,null):(_=_t.CellIndex.temp(this,s instanceof X.RowElement?s.itemIndex:p.item.index,p.layout),a=R.ClickData.getCell(d,p,_),l=p.dataColumn.popupMenuName);break;case"groupFooter":p=h.bodyCellByCell(r),f=s&&s._item&&s._item.$_footerIndex,a=R.ClickData.getGroupFooter(d,p.item.index,p.layout,f);var _=p.dataColumn.groupFooters.get(f);l=_&&_.popupMenuName;break;case"footer":case"summary":var p=h.tableCellByCell(r),f=p.summaryIndex,_=("footer"===d?p.layout.firstColumn.footers:p.layout.firstColumn.headerSummaries).get(f);a=R.ClickData.getSummary(d,p.summaryIndex,p.layout),l=_&&_.popupMenuName;break;case"groupHead":case"groupFoot":f=r[ht.T_LEV];a=R.ClickData.getGroupElt(d,f);break;case"groupBar":p=r[ht.T_ROW],c=this.getRowOfItem(p);a=R.ClickData.getItem(d,p,c)}}else s&&s===n._clickElement&&(a=n._getClickData(s));return!1!==(n=this._fireContextMenuPopup(i,o,a))&&(e=this._popupMenuManager,"string"==typeof n?l=n:null!=n&&"object"==typeof n||(l=l||this._contextMenu),l)&&(t.preventDefault(),n=e.getMenu(l))&&e.showContext(n,t,i,o,a),null},o.prototype.setContextMenu=function(t){return(t=re.Utils.makeArray(t))?(this._contextMenu="gridContextMenu",this.popupMenuManager.addMenu(this._contextMenu,t,!0,this)):this._contextMenu=null,this.popupMenuManager.getMenu(this._contextMenu)},o.prototype.addPopupMenu=function(t,e,i){void 0===i&&(i=!0),e=re.Utils.makeArray(e),t&&e&&this.popupMenuManager.addMenu(t,e,i)},o.prototype.removePopupMenu=function(t){this.popupMenuManager.removeMenu(t)},o.prototype.setCursor=function(t,e){if(t){var i=this.getTableCell(t),i=i?this.getTableView(i):this._tableViews[t[ht.T_VIEW]];if(i instanceof me.VisualObjectElement)return void i.setCursor(e)}this._container.setCursor(e)},o.prototype.canMoveLayout=function(t){var t=t.root.vindex,e=this.layoutManager;return!(e.mergedRowGrouped&&t<e.rowGroupLevels)&&(this.fixedOptions.movable||t>=e.fixedLayoutCount&&t<e.rightFirstLayout)},o.prototype.canMoveToLayout=function(t){return this.canMoveLayout(t)},o.prototype.getEditCellValue=function(){return this._editController.editValue},o.prototype.setEditCellValue=function(t,e,i){(this.isEditing()||e)&&this._editController.setEditValue(t,i)},o.prototype.searchItem=function(t){var e=(t=t instanceof w.SearchOptions?t:new w.SearchOptions(t)).fields,i=t.values,o=this.itemSource,n=t.startIndex,r=-1;if(e&&0<e.length&&i&&0<i.length&&o){for(var s,a=void 0,l=e.length,h=[],a=0;a<l;a++)s=parseFloat(e[a]),!isNaN(s)&&0<=s?h.push(s):0<=(s=this.dataSource.getFieldIndex(e[a]))&&h.push(s);0<=(r=0<h.length&&(l=o.itemCount,(r=(n=Math.max(0,n))<l?o.findItem(h,i,t,n,l-1):-1)<0)&&t.wrap&&0<n?o.findItem(h,i,t,0,n-1):r)&&t.select&&(o=this.getIndex(r,re.Utils.pick(this.focusedIndex.column,this.getFirstColumn())),this.setFocusedIndex(o,!0,!0))}return r},o.prototype.searchCell=function(t){var e,i,o,n,r,t=t instanceof w.SearchCellOptions?t:new w.SearchCellOptions(t),s=t.wrap,a=t.select,l=re.Utils.makeArray(t.fields),h=this.itemSource,d=null,u=h&&h.dataSource,c=re.Utils.makeArray(t.columns),_=[],p=t.value;if(u){if(!l&&c)for(e=0,o=c.length;e<o;e++){var f=this.columnByName(c[e]);if(f instanceof lt.DataColumn){if(f.dataIndex<0)throw new Error("invalid search Column "+c[e]);_.push(f.dataIndex)}}else if(l&&0<l.length)for(e=0,o=l.length;e<o;e++)i=parseFloat(l[e]),!isNaN(i)&&0<=i?_.push(i):_.push(u.getFieldIndex(l[e]));_&&0<_.length&&null!=p&&(0<_.length&&(o=h.itemCount,n=Math.max(0,t.startIndex),r=Math.max(0,t.startFieldIndex),d=!(d=n<o?h.findCell(_,p,t,n,o-1,r):null)&&s&&(0<n||0<r)?h.findCell(_,p,t,0,n,0):d)&&(d.fieldName=u.getOrgFieldName(d.fieldIndex)),d)&&a&&(s=void 0,s=c?this.getIndex(d.itemIndex,re.Utils.pick(this.columnByName(c[d.searchFieldIndex]),this.focusedIndex.column)):this.getIndex(d.itemIndex,re.Utils.pick(this.columnByField(d.fieldIndex),this.focusedIndex.column)))&&this.setFocusedIndex(s,!0,!0)}return d},o.prototype.isCheckable=function(t){t=this.getItem(t);return t&&t.checkable},o.prototype.isCheckableOfRow=function(t){t=this.getItemOfRow(t,!0);return t&&t.checkable},o.prototype.setCheckable=function(t,e){t=this.getItem(t);t&&t.setCheckable(e)},o.prototype.setCheckableOfRow=function(t,e){t=this.getItemOfRow(t,!0);t&&t.setCheckable(e)},o.prototype.isCheckedItem=function(t){t=this.getItem(t);return t&&t.checked},o.prototype.isCheckedRow=function(t){t=this._items.getItemOfRow(t,!0);return t&&t.checked},o.prototype.checkAll=function(t,e,i,o){var n=this._checkBar.showGroup&&!this._checkBar.merged;this._items.checkAll(t,e,i,o,n)},o.prototype.toggleCheck=function(t){t=this.getItem(t);t&&t.checkable&&this.checkItem(t.index,!t.checked,this.checkBar.exclusive,!0)},o.prototype.toggleChecks=function(t,e){var i=[];if(e&&e.isDataRow&&e.checkable){if(this.checkBar.merged){var o=t[0],n=t[t.length-1],o=o.index,r=n.index,n=this.checkBar.merges,s=n.getRoom(_t.CellIndex.temp(this,o,null)),o=Math.min(o,s?s.head:o),s=n.getRoom(_t.CellIndex.temp(this,r,null)),r=Math.max(r,s?s.tail:r);t=[];for(var a=o;a<=r;a++){var l=this.getItem(a);l.checkable&&l.isDataRow&&t.push(l)}}for(a=0;a<t.length;a++)t[a].checkable&&0<=t[a].dataRow&&i.push(t[a]);n=!e.checked;this.checkBar.exclusive&&this.itemSource._clearChecked(),0<i.length&&this._items.checkItems(i,n,!0)}},o.prototype.checkItem=function(t,e,i,o){t=this.getItem(t);t&&this._items.checkItem(t,e,i,o)},o.prototype.checkRow=function(t,e,i,o){var n,r=this.getItemIndexOfRow(t);(n=(n=-1<r?(n=this.getItem(r))&&(n instanceof A.EditItem?n:null):n)||this.getItemOfRow(t,!0))&&this._items.checkItem(n,e,i,o)},o.prototype.checkItems=function(t,e,i){t=this._items.getItemsByIndices(t);this._items.checkItems(t,e,i)},o.prototype.checkRows=function(t,e,i){t=this._items.getItemsByRows(t,!0);this._items.checkItems(t,e,i)},o.prototype.setAllCheck=function(t,e){var i=this.checkBar.exclusive;this._headView.allChecked=t,!e||i&&t||(e=this.checkBar,this.checkAll(t,e.visibleOnly,e.checkableOnly,!1))},_dp(o,"allChecked",{get:function(){return this._headView.allChecked}}),o.prototype.resetCheckables=function(){},o.prototype.applyCheckables=function(){},o.prototype.registerCustomRenderer=function(t,e){this._delegate.addCustomRenderer(t,e)},o.prototype.unregisterCustomRenderer=function(t){this._delegate.removeCustomRenderer(t)},o.prototype.existsCustomRenderer=function(t){return this._delegate.existsCustomRenderer(t)},o.prototype.unregisterAllCustomRenderer=function(){this._delegate.clearCustomRenderers()},o.prototype.getValueAt=function(t,e){e=this.getItem(e),t=t.firstColumn;if(t instanceof lt.DataColumn)return e&&e.getData(t.dataIndex)},o.prototype.getCellValue=function(t){if(this.isValid(t)){var e=this.getItem(t.itemIndex),t=t.dataColumn;if(e&&t)return e.getData(t.dataIndex)}},o.prototype.getDistinctItemValues=function(i,t,e){void 0===t&&(t=-1),void 0===e&&(e=ht.SortDirection.ASCENDING);var o,n,r,s=this.columnByField(i);return s&&0!=t?(o=s.getField().dataType,n=[],r=[],this._items._rs.getAllItems().forEach(function(t){if(t instanceof rt.GridRow||t instanceof E.TreeItem){var e=t.getData(i);switch(o){case ht.ValueType.NUMBER:null!=e&&isNaN(e)||n.indexOf(e)<0&&n.push(e);break;case ht.ValueType.DATE:case ht.ValueType.DATETIME:e?r.indexOf(e.getTime())<0&&(r.push(e.getTime()),n.push(e)):n.indexOf(e)<0&&n.push(e);break;default:n.indexOf(e)<0&&n.push(e)}}}),e!==ht.SortDirection.NONE&&(re.Utils.included(o,ht.ValueType.DATETIME,ht.ValueType.DATE,ht.ValueType.NUMBER)?n.sort(function(t,e){return t-e}):n.sort(),e===ht.SortDirection.DESCENDING)&&n.reverse(),t<0?n:n.slice(0,t)):null},o.prototype.getDisplayText=function(t){var e=t.dataColumn;if(e){var i=e.dataIndex;if(0<=i){var o,n,r=t.item;if(r instanceof rt.GridRow||r instanceof E.TreeItem)return o=r.getData(i),e instanceof lt.SeriesColumn?st.SeriesCell.getText(o):(i=new lt.ColumnStyle,n=this._body.getCellFormatters(e,null,t,i),st.DataCell._getDisplayText(this,r,e,o,n));if(r instanceof rt.GroupFooter)return t=e.groupFooters.get(r.$_footerIndex),o=si.RowGroupFooterCell.getValue(r,e),n=this._rowGroup.getFooterCellFormatters(t,null),si.RowGroupFooterCell.$_displayText(r,e,o,n)}}return""},o.prototype._fitLayoutWidth=function(t,e){if(!t.visible)return 0;var i,o=this.itemSource,n=this.getIndex(this.topIndex,t.firstColumn),r=t.firstColumn.header,s="",a="",l=0,e=e?r.displayText:"",h=re.Utils.getTextLength(s),r=this.getBodyCellAt(n,!1),r=r&&r.renderer2&&r.renderer2._dom,d=null==(d=null==(d=this.getHeaderCellAt(t))?void 0:d.cell)?void 0:d.firstElementChild;(r=r||d)&&(d=re.getWin(r).getComputedStyle(r))&&(a=d.paddingLeft,r=parseInt(a.substr(0,a.indexOf("px"))),a=d.paddingRight,l=(l+=0<r?r:0)+(0<(r=parseInt(a.substr(0,a.indexOf("px"))))?r:0),i={fontSize:d.fontSize,fontFamily:d.fontFamily,fontWeight:d.fontWeight,fontStyle:d.fontStyle});for(var r=l+this.container.measureText("rg-header-cell",e,null)+2,u=0,c=o.itemCount;u<c;u++)n.itemIndex=u,a=this.getDisplayText(n),re.Utils.getTextLength(a)>h&&(h=re.Utils.getTextLength(a),s=a);return 0<h&&(l+=this.container.measureText("rg-data-cell",s,i)+2,e=(d=t.getDataColumn()).editor,(o=this.delegate.getCellEditor(L.CellEditor.getEditorType(e))).hasButton(this.displayOptions.showNativeEditButton,e)&&(l+=this.body.editButtonWidth*o.buttonCount),d.button!==ht.CellButton.NONE)&&(l+=this.body.cellButtonWidth),Math.max(l,r)},o.prototype.fitLayoutWidth=function(t,e,i,a){var o=0;function l(t,e){var i,o,n,t=this.getHeaderCellAt(t);return a&&t?(o=(i=t.textSpan).style.whiteSpace,i.style.whiteSpace="nowrap",n=i.getBoundingClientRect().width,i.style.whiteSpace=o,n+=t.expander?t.expander.getBoundingClientRect().width:0,Math.max(n+6,e)):e}function h(t){for(var e=t.direction===ct.ColumnLayoutDirection.HORIZONTAL,i=0,o=0,n=t.visibles;o<n.length;o++){var r=n[o],s=0;r instanceof ct.CellLayoutColumnItem?(s=this._fitLayoutWidth(r,a),1===r._defColSpan&&(r.cellWidth=s)):r instanceof ct.CellLayoutGroupItem&&(s=h.call(this,r),s=l.call(this,r,s)),i=e?i+s:Math.max(i,s)}return i}return a=null==a||a,t instanceof ct.CellLayoutColumnItem?o=this._fitLayoutWidth(t,a):t instanceof ct.CellLayoutGroupItem&&(o=h.call(this,t),o=l.call(this,t,o)),i&&i>this.displayOptions.minCellWidth&&(o=Math.max(o,i)),e&&e>this.displayOptions.minCellWidth&&(o=Math.min(o,e)),t.cellWidth=o},o.prototype.canMoveRow=function(t,e){return void 0===e&&(e=!0),!this.isEditing()&&!this.isItemEditing()&&(e||this._editOptions.movable)&&(!t||this.itemSource.movable)},o.prototype.moveRows=function(t,e){if(this.canMoveRows(t,!0,e))return this._doMoveRows(t,e)},o.prototype.moveSelection=function(t,e){var i,o,n,r=this.getSelectedItems(!1);r&&0<r.length&&(o=(i=r[0]).index,n=this.itemSource,0<t&&o+t<=n.itemCount||t<0&&0<o)&&(n=this._getMoveTarget(e,r,o,t),this.moveRows(r,n))&&(t=this.isTree()?i.index-o:t,(e=this.getSelection()).moveRow(t),this._selections.clear(),this._selections.$_addItem(e),(r=this._focusedIndex.clone()).itemIndex=this.isTree()?i.index:o+t,this.setFocusedIndex(r,!1,!0,!1))},o.prototype.isSelectedItem=function(t){return this.selections.containsItem(t,null)},o.prototype.isSelectedLayout=function(t){return this.selections.containsLayout(t)},o.prototype.getFilteredColumns=function(){for(var t=this.columnCount,e=[],i=0;i<t;i++){var o=this.getColumn(i);o.isFiltered()&&e.push(o)}return e},o.prototype.showProgress=function(){this._progressManager.show(this._container._containerDom,null,this.displayOptions.baseZindex)},o.prototype.setProgress=function(t,e,i,o){this._progressManager.setProperties(t,e,i,o)},o.prototype.closeProgress=function(){this._progressManager.close()},o.prototype.showLoading=function(t){this._progressManager.loaderShowing()||(t?(this._progressManager._gridDisabled=this.container.disabled,this.container.disabled=!0):this._progressManager._gridDisabled=void 0,this._progressManager.showLoader(this._container._containerDom,this._displayOptions.baseZindex))},o.prototype.hideLoading=function(){this._progressManager.closeLoader(),void 0!==this._progressManager._gridDisabled&&(this.container.disabled=this._progressManager._gridDisabled)},o.prototype.beginExportProgress=function(t){this._progressManager.show(this._container._containerDom,t,this._displayOptions.baseZindex)},o.prototype.endExportProgress=function(){this._progressManager.close()},o.prototype.setExportProgress=function(t,e,i){this._progressManager.setProperties(0,t,e,i)},o.prototype.setEmptyMessage=function(t){this._emptyView.setMessage(t)},o.prototype.setWatchTimer=function(t){this._container.setWatchTimer(t)},o.prototype.layoutExpandAll=function(t,e){this._activeCellLayout.expandAll(t,e)},o.prototype._getCssSelector=function(){return""},_dp(o,"container",{get:function(){return this._container}}),o.prototype._createDelegate=function(){return new Ke.GridDelegate(this)},o.prototype._createLayoutManager=function(){return new we.GridLayoutManager(this)},o.prototype._createEditController=function(){return new Ge.DefaultEditController(this)},o.prototype._createSelectionLayer=function(){return re.Utils.isMobile()?new Xe.MobileSelectionLayer(this,"mobileSelectionLayer"):new W.SelectionLayer(this,"selectionLayer")},o.prototype._initDom=function(t){h.prototype._initDom.call(this,t),t.style.setProperty("overflow","hidden","important")},o.prototype._doActivateView=function(){this._container.activeTool=this._container.defaultTool,this._editController.prepareEditor(this._focusedIndex),this.visible=!0,this._fireViewActivated(!0)},o.prototype._dodDeactivateView=function(){this._fireViewActivated(!1)},o.prototype.setRect=function(t){var e=t.width!=this.width||t.height!=this.height;h.prototype.setRect.call(this,t),e&&(this._dirty=!0)},o.prototype._doDraw=function(t){},o.prototype.$_containerResized=function(){re.Utils.isMobile()&&this.isEditing()&&!this.isItemEditing()&&setTimeout(function(){var t=this.topItem,e=this.layoutManager.fullItemCount,i=this.focusedIndex.itemIndex;t+e<i&&(this.topIndex=i-Math.round(e/2))}.bind(this),10)},o.prototype._doCreateOtherElements=function(){},o.prototype._doContentPanesCreated=function(){},o.prototype._createSidePane=function(){return null},o.prototype.isSidePaneVisible=function(){return!1},o.prototype._createBodyView=function(t){return new gt.GridBodyElement(this.doc,t)},o.prototype._createFixedBodyView=function(t){return new gt.FixedBodyElement(this.doc,t)},o.prototype._createRightBodyView=function(t){return new gt.RightBodyElement(this.doc,t)},o.prototype._initStyles=function(){},o.prototype._columnsReset=function(){this._resetColumnIndices(),this._activeCellLayout._columnsChanged(this._columns),this._columnsDirty=!0},o.prototype._columnVisibleChanged=function(t){this._activeCellLayout._columnChanged(t)},o.prototype._resetColumnIndices=function(t){(t=void 0===t?null:t)?t._resetIndices(this):this._columns.resetIndices(),t||this._cellLayoutDirty||this.clearAddSelection(!0)},o.prototype._resetColumnSortStates=function(){this._columns.resetSortStates()},o.prototype._cleanGridObjects=function(){for(var t=0,e=this._gridObjects.length;t<e;t++)this._gridObjects[t].clean()},o.prototype._visualObjectChanged=function(t){this.invalidateLayout()},o.prototype._addGridObject=function(t){this._gridObjects.push(t)},o.prototype.addElement=function(t){this._rootElement.addChild(t)},o.prototype.$_prepareRender=function(t){this._doPrepareRender(t)},o.prototype._doPrepareRender=function(t){if(this._horzScrolled)try{var e=this._layoutManager;e.setLeftPos(t,this._leftPos),this._leftPos=e.leftPos,this.$_updateScrollBars(e),this._layoutSelectionViews(),this._editController.resetEditor(!1),this.container.defaultTool.layoutChanged()}finally{this._horzScrolled=!1}},o.prototype.$_layout=function(t){this._doLayout(t)},o.prototype.$_afterRender=function(){var t,e;this._layoutManager.needRelayout()?this.invalidateLayout():(this._topIndexChanged&&(this._topIndexChanged=!1,this._resetTdFocus=this.accessibility,this._fireTopIndexChanged(this.topIndex)),this._resetTdFocus&&this._container._focused&&(t=this.focusedIndex,e=this.doc,re.Utils.isAncestorOf(this.container._containerDom,e.activeElement)&&this.accessibility&&this.isValid(t)&&this.layoutManager.cellIsVisible(t)&&(this._setFocusTimer&&clearTimeout(this._setFocusTimer),this._setFocusTimer=setTimeout(function(){this._setFocusTimer=null,this.getBodyViewAt(t).refreshTdFocused(t,!0)}.bind(this),20)),delete this._resetTdFocus),this._fireDataLoadComplated(),this._watermarkLayer&&this._watermarkLayer.refresh())},o.prototype._fireDataLoadComplated=function(){this._dataLoad&&(this._dataLoad=!1,this.fireEvent("onGridBaseDataLoadComplated"))},o.prototype._doLayout=function(t){var e=this._layoutManager;this._resetting=!1;try{this.$_doLayout(e,t)}finally{this._loading=!1,this._eventFrom=null}this.$_checkFocusedLayout(),(this._emptyView.visible=this.empty&&this._displayOptions.showEmptyMessage)&&((t=e.contentBounds.clone()).topBy(e.headerBounds.bottom),this._emptyView.setBounds(0,t.y,this.width,t.height)),this._debugging&&this._debugView.layout(),this._horzScrolled=!1,this._cleanGridObjects(),this._columnsDirty&&(this._columnsDirty=!1,this._activeCellLayout.cleanColumns()),this.$_resetHovering(this.container._currentX,this.container._currentY,!0),this.$_resetFocusRender(this.container._currentX,this.container._currentY),this.$_resetRowHover(),0<e.itemCount&&(e=(t=e.topIndex)+e.itemCount,this._topIndexChanged=t!==this._prevTop,this._prevTop=t,e==this._prevLast||e!=this.itemCount||re.Utils.included(this.displayOptions.syncGridHeight,[ht.SyncGridHeight.ALWAYS,ht.SyncGridHeight.OVER])||setTimeout(function(){this._fireScrollToBottom()}.bind(this),1),this._prevLast=e),this.$_checkCurrentRow(),this._editController.prepareEditor(this.focusedIndex),this._cellLayoutDirty=!1,this.container.defaultTool.layoutChanged(),!this._editController.resetEditor(!1)&&this.isValid(this._focusedIndex)&&this._editController.resetEditable(this._focusedIndex)},o.prototype.$_doLayout=function(t,e){var i=this._displayOptions,o=this._fixedOptions,e=e.clone(),n=i.vscrollBar?this._scrollBarWidth:0,r=i.hscrollBar?this._scrollBarHeight:0,i=(this.setFocusedClass(this._focusedIndex,!1),this.setFocusedRowClass(this._focusedIndex,!1),this._activeCellLayout.$_refresh(this._columns,i.minCellWidth),this._activeCellLayout.$_prepareLayout(this,o.colCount,o.rightCount),this._needMerge&&(this.$_populateMerges(),this._needMerge=!1),this._body._prepareUpdate(),t.measure(e,this._leftPos,this._topIndex,n,r),t.layout(e),this._leftPos=t.leftPos,this._topIndex=t.topIndex,this.container._containerDom),e=new nt.Rectangle(0,0,i.clientWidth,i.clientHeight);this.$_updateScrollBars(t,e),this._layoutSelectionViews(),this._layouted=!0},o.prototype._columnCheckedChanged=function(t){this._fireColumnCheckedChanged(t)},o.prototype.$_updateScrollBars=function(t,e){var i,o;t.hscrollBar?(o=t.bodyBounds.width,i=Math.min(t.scrollWidth),this._hscrollBar.setProperties(0,o,i),this._hscrollBar.setPosition(t.leftPos),this._hscrollBar.visible=!0):this._hscrollBar&&(this._hscrollBar.setProperties(0,0,0),this._hscrollBar.setPosition(0),this._hscrollBar.visible=!1),t.vscrollBar?(i=(o=this.itemCount)-t.fixedItemCount,o=Math.min(t.fullItemCount,o-t.topIndex),this._vscrollBar.setProperties(0,i,o),this._vscrollBar.setPosition(t.topIndex),this._vscrollBar.visible=!0):this._vscrollBar&&(this._vscrollBar.setProperties(0,0,0),this._vscrollBar.setPosition(0),this._vscrollBar.visible=!1),e&&this.$_layoutScrollBars(t,e)},o.prototype.$_layoutScrollBars=function(t,e){var i=t.scrollBarWidth,o=t.scrollBarHeight,n=this._hscrollBar,r=this._vscrollBar;t.hscrollBar&&(n.setBounds(e.x,e.bottom-o,e.width-i,o),n.layoutContent()),t.vscrollBar&&(r.setBounds(e.right-i,e.y,i,e.height-o),r.layoutContent()),(this._scrollEdge.visible=t.vscrollBar&&t.hscrollBar)&&this._scrollEdge.setBounds(e.right-i,e.bottom-o,i,o)},o.prototype._columnMergeRuleChanged=function(t){this._populateMerges(),this.refreshView()},o.prototype._canMerge=function(){return!1},o.prototype._populateMerges=function(){this._needMerge=!0},o.prototype.$_populateMerges=function(){if(this._canMerge()){for(var t=this.getHorzColumns(),e=0,i=t.length;e<i;e++){var o,n=t[e],r=n&&n.layout;r&&r.canMerge()&&((o=(o=r.merges)||new Kt.ColumnMergeManager(r)).clear(),n instanceof lt.DataColumn&&n.mergeGrouped&&!(0<this.getGroupLevel(n.dataIndex))||o.initialize(Kt.GridMergeRule.INIT_COUNT))}this._checkBar.canMerge()&&((o=this._checkBar.merges||new le.CheckBarMergeManager(this._checkBar)).clear(),o.initialize(Kt.GridMergeRule.INIT_COUNT))}},o.prototype._doRowGroupMergeModeChanged=function(){},o.prototype._addSelectionView=function(t){this._selectionLayer.addView(t)},o.prototype._clearSelectionViews=function(){this._selectionLayer.clearViews()},o.prototype._removeSelectionView=function(t){this._selectionLayer.removeView(t)},o.prototype._layoutSelectionViews=function(){this._layouted&&!this._resetting&&this._selectionLayer.layout()},o.prototype.$_checkCurrentRow=function(t){if(void 0===t&&(t=!1),this._focusedIndex){var e,i,o,n=this._focusedIndex.dataId,r=this._focusedIndex.dataRow;if(t||n!=this._currentRowId)return clearTimeout(this._rowChangeTimer),e=this.container.defaultTool,i=this._currentRow,o=this._displayOptions.rowChangeDelay,t=t||o<=0,this._currentRowId=n,this._currentRow=r,t?(this._fireCurrentRowChanged(i,r),e.currentRowChanged(i,r)):0<o&&(this._rowChangeTimer=setTimeout(function(){this._fireCurrentRowChanged(i,r),e.currentRowChanged(i,r)}.bind(this),o)),!0}return!1},o.prototype.$_doSetFocusedIndex=function(t,e,i,o,n){if(void 0===o&&(o=!0),void 0===n&&(n=!0),!t){if(o)return!1;t=this.getIndex(-1,null)}var r,s;if(!this.isValid(t)&&o&&(t=t.clone()).normalize(this),!this.isValid(t)){o=this.dataSource;if(!o||0==o.rowCount||0==this.itemCount)return this._focusedIndex.itemIndex=-1,this._focusedIndex.layout=null,this.clearAddSelection(!0),!1}o=1===this.selections.count?this.getSelection(0):null;if(_t.CellIndex.areEquals(t,this._focusedIndex))o&&o.single&&this.selections.containsCell(t)||this.clearAddSelection(e,n);else{var a=this._editOptions,l=this._focusedIndex.clone(),h=this.itemSource,d=this.container.defaultTool,u=this.layoutManager;if(!this._editController.focusedIndexChanging()||!this._fireCurrentChanging(l,t))return(c=this.activeTool.dragTracker)instanceof Te.SelectTracker&&(c.dragging?c.cancel():this.activeTool.dragTracker=null),!1;var c=l.item;if(!this.isItemEditing(c)||this.isItemEdited(c)||t.itemIndex==l.itemIndex||c.itemState!==rt.ItemState.UPDATING||a.commitWhenNoEdit)if(h&&t.itemIndex!=l.itemIndex)try{if(c)switch(c.itemState){case rt.ItemState.INSERTING:if(this.commit(a.forceInsert,!0))break;return this.cancel(!0),!1;case rt.ItemState.APPENDING:if(this.commit(a.forceAppend,!0))break;return this.cancel(!0),!1;case rt.ItemState.UPDATING:if(this.commit(a.commitWhenNoEdit,!0))break;return this.cancel(!0),!1}}catch(t){if(t instanceof G.ValidationError)return(t=this._fireValidationFail(c.index,t.column,t))&&alert(a.showOnlyValidationMessage&&t.userMessage?t.userMessage:t.toString()),this.invalidateLayout(),!1;if(t instanceof G.AbortError)return!1;throw t}else c&&this.isItemEditing(c)&&a.validateOnExit&&this.invalidateLayout();else this.cancel(!0);d.focusedIndexChanging(t),this._focusedIndex.assign(t),this.$_checkFocusedLayout(),c=this.getBodyCellAt(l,!1),s=this.getBodyCellAt(t,!1),this.isValid(l)&&(r=u.getBodyView(l)).$_focusChanged(this,c,!1),this.isValid(t)&&(r=u.getBodyView(t)).$_focusChanged(this,s,!0),h instanceof A.EditableItemProvider&&h.setDiffs(this._editOptions.checkDiff,this._editOptions.checkCellDiff,this._editOptions.strictDiff),this._editController.focusedIndexChanged(l,t,!1),d.focusedIndexChanged(l,t);var _,p,h=this._focusedIndex,d=this.isValid(h),t=(o&&W.isSingleSelectionStyle(o.style)&&this.selections.containsCell(h)||this.clearAddSelection(e,n),this._layouted&&this._refreshSideViews(),!_t.CellIndex.areEquals(h,u._prevFocused));(i||t)&&(this.$_makeFocusedIndexVisible()?(this._resetTdFocus=!1,this.accessibility&&!this.isEditing()&&this.isValid(h)&&this.isValid(l)&&(r=this.getBodyViewAt(l),"mousedown"!==this._eventFrom&&l.itemIndex!==h.itemIndex&&r&&r.tdClone(l),this._resetTdFocus=!0)):(this._editController.resetEditor(!1),this.isValid(h)&&this.getItem(h.itemIndex).canEdit()&&this._editController.prepareEditor(h),this.isValid(l)&&(_=this.getBodyViewAt(l))&&(p=_.getRowView(l.item))instanceof X.RowElement&&p.resetButtons(this,c,s),!this.container.isLayoutNeeded()&&d&&(_=this.getBodyViewAt(h))&&(p=_.getRowView(h.item))instanceof X.RowElement&&p.resetButtons(this,c,s),this.accessibility&&!this.isEditing()&&this.isValid(h)&&this.layoutManager.cellIsVisible(h)&&(r=this.getBodyViewAt(h))&&r.refreshTdFocused(h,!0))),this._fireCurrentChanged(this._currentIndex.assign(h)),this.$_checkCurrentRow()}return!0},o.prototype._refreshSideViews=function(){this.container.isLayoutNeeded()||(this._rowBarContainer.visible&&this._rowBarContainer.refresh(this),this._headerView.visible&&this._headerView.refresh(this),this._fixedHeaderView.visible&&this._fixedHeaderView.refresh(this),this._rightHeaderView.visible&&this._rightHeaderView.refresh(this))},o.prototype.$_makeFocusedIndexVisible=function(){return this.makeCellVisible(this._focusedIndex)},o.prototype.makeCellVisible=function(t){if(this._editorLender)return this._editorLender.makeCellVisible(t);if(this.isValid(t)||t&&t.column){if(this.layoutManager.makeCellVisible(t),!this.layoutManager.focusIsVisible())return"mousedown"!==this._eventFrom&&this.invalidateLayout(),!0;this.layoutManager.clearFocusRequest()}return!1},o.prototype.makeColumnVisible=function(t){t&&(t=this.getIndex(this._focusedIndex?this._focusedIndex.itemIndex:-1,t),this.makeCellVisible(t))},o.prototype.makeItemVisible=function(t){0<=t&&(t=this.getIndex(t,this._focusedIndex&&this._focusedIndex.layout),this.makeCellVisible(t))},o.prototype.cancelEditor=function(t){this.isEditing()&&this._editController.cancelEditor(t=!(0<arguments.length)||t)},o.prototype.itemEditCancel=function(){return this._fireItemEditCancel(this.itemSource.editingItem)},o.prototype.$_cancelItem=function(t,e){void 0===e&&(e=!1);var i=re.Utils.cast(this.itemSource,A.EditableItemProvider);return!!(i&&t&&i.isEditing(t))&&(this._validationManager.clearInvalidCells(-1),i.cancel(),e&&this.resetFocusedIndex(),!0)},o.prototype.cancel=function(t){void 0===t&&(t=!1);var e=this.editController,i=(this.isEditing()&&(e.cancelEditor(!0),e.invalidateEditor()),this.focusedIndex);return!(!this.isValid(i)||!this.$_cancelItem(i.item)||(i=i.clone(),this._rowBarContainer.stateError=void 0,e._prepareEditor(e._editIndex),i.normalize(this),i.item instanceof A.DummyEditItem&&i.up(),this.setFocusedIndex(i),t&&this.$_makeFocusedIndexVisible(),0))},o.prototype.commitEditor=function(t){void 0===t&&(t=!0),this.isEditing()&&this.editController.commitEditor(t,!1)},o.prototype.$_commitItem=function(t,e,i){var o=re.Utils.cast(this.itemSource,A.EditableItemProvider),n=this.validationManager;if(o&&t&&o.isEditing(t)&&(e||o.isEdited(t))){e=rt.ItemState_isInserting(t.itemState);try{n.validateRow(t,e,!1,!1),this._rowBarContainer.stateError=void 0}catch(t){throw t instanceof G.ValidationError&&(t.level=t.level||ht.ValidationLevel.ERROR,t.column||(this._rowBarContainer.stateError=t)),t}if(o.commit())return-1<t.dataId&&n.cloneError(-1,t.dataId),n.clearInvalidCells(-1),this.editOptions.removeValidateOnCommit&&-1<t.dataId&&n.clearInvalidCells(t.dataId),!0;if(i)throw new G.AbortError("Commit failed.");return!1}},o.prototype.commit=function(t,e,i){void 0===i&&(i=!0);var o=this.focusedIndex;return!!this.isValid(o)&&(this.isEditing()&&(this.editController.commitEditor(!0,!1,i),this.editController.invalidateEditor()),this.$_commitItem(o.item,t,e))},o.prototype.editorCancel=function(t,e){this._doCellCancel(e)},o.prototype._doCellCancel=function(t){return this._fireEditCanceled(t)},o.prototype.editorCanceled=function(){this.activeTool.resetFocused()},o.prototype._editorStarted=function(t,e){if(this.closePopups(!1),this.edit(e))return!0},o.prototype._editorChange=function(t,e,i){this._fireEditChange(e,i)},o.prototype._editorSearch=function(t,e,i){this._fireEditSearch(e,i)},o.prototype._searchCellButtonClick=function(t,e,i){return this._fireSearchCellButtonClick(e,i)},o.prototype.$_getFieldDefaults=function(t){for(var e=this.dataSource.fieldCount,i=[],o=0;o<e;o++)i.push(void 0);for(o=0;o<e;o++){var n=function(t,e){for(var i=0;i<t.columnCount;i++){var o=t.getColumn(i);if(o instanceof lt.DataColumn&&o.dataIndex==e)return(o=o.getField())&&o.defaultValue}}(this,o);n&&(i[o]=n)}return i},o.prototype.$_getColumnDefaults=function(t){for(var e=0,i=this.columnCount;e<i;e++){var o=this.getColumn(e);o instanceof lt.DataColumn&&null!=o.defaultValue&&(t[o.dataIndex]=o.defaultValue)}},o.prototype.$_getItemDefaults=function(t,e){},o.prototype.$_readDefaultValues=function(t){},o.prototype.$_getInsertDefaults=function(t){var e=this.$_getFieldDefaults(this.itemSource.dataSource);return this.$_getColumnDefaults(e),this.$_getItemDefaults(null,e),this.$_readDefaultValues(e),e},o.prototype.sortColumn=function(t,e){t&&(this.sortingOptions.style==ht.SortStyle.EXCLUSIVE?e&&e.shiftKey?this.sortColumnWithStyle(ht.SortStyle.INCLUSIVE,t):this.sortColumnWithStyle(ht.SortStyle.EXCLUSIVE,t):this.sortColumnWithStyle(this.sortingOptions.style,t))},o.prototype.sortColumnWithStyle=function(t,e){if(!e)throw new Error("column is null");var i;this.isItemEditing(null)||e.dataIndex<0||(i=this._sortingOptions.textCase,t==ht.SortStyle.EXCLUSIVE?e.sortOrder<0?this.orderBy([e],[ht.SortDirection.ASCENDING],[i]):e.sortDirection==ht.SortDirection.ASCENDING?this.orderBy([e],[ht.SortDirection.DESCENDING],[i]):this.isGroupedColumn(e)&&this.itemSource._groupSorting?this.orderBy([e],[ht.SortDirection.ASCENDING],[i]):this.unsortColumnWithStyle(t,e):t!=ht.SortStyle.INCLUSIVE&&t!=ht.SortStyle.REVERSE||(e.sortOrder<0?this.$$_addSort(e,ht.SortDirection.ASCENDING,i,t==ht.SortStyle.REVERSE):e.sortDirection==ht.SortDirection.ASCENDING?this.$$_addSort(e,ht.SortDirection.DESCENDING,i,t==ht.SortStyle.REVERSE):this.isGroupedColumn(e)&&this.itemSource._groupSorting?this.$$_addSort(e,ht.SortDirection.ASCENDING,i,t==ht.SortStyle.REVERSE):this.unsortColumnWithStyle(t,e)))},o.prototype.orderBy=function(t,e,i){if(!this.isItemEditing(null))if(!t||t.length<1)this._sortItems([],[],[]);else{for(var o=[],n=t.length,r=0;r<n;r++){var s=t[r];o.push(s.dataIndex)}this._sortItems(o,e,i)}},o.prototype.unsortColumnWithStyle=function(t,e){var i,o,n;this.isItemEditing()||!e||(i=this.getSortFields(),o=this.getSortDirections(),n=this.getSortCases(),(e=i.indexOf(e.dataIndex))<0)||(t==ht.SortStyle.EXCLUSIVE?this.orderBy([],[],[]):t!=ht.SortStyle.INCLUSIVE&&t!=ht.SortStyle.REVERSE||(i.splice(e,1),o.splice(e,1),n.splice(e,1),this._sortItems(i,o,n)))},o.prototype.$$_addSort=function(t,e,i,o){var n=this.getSortFields(),r=this.getSortDirections(),s=this.getSortCases(),t=t.dataIndex,a=n.indexOf(t);0<=a?(r[a]=e,s[a]=i):o?(n.splice(0,0,t),r.splice(0,0,e),s.splice(0,0,i)):(n.push(t),r.push(e),s.push(i)),this._sortItems(n,r,s)},o.prototype._sortItems=function(e,t,i){var o=e.concat(),n=t?t.concat():[],r=i?i.concat():[];this._fireSorting(o,n)&&this._toastManager.show(this.sortingOptions.toast,!0,function(){var t=this.sortingOptions.keepFocusedRow&&this.focusedIndex?this.focusedIndex.dataRow:-1;this._doSortItems(e,n,r),0<=t&&(t=_t.CellIndex.temp(this,this.getItemIndexOfRow(t),this.focusedIndex.column),this.setFocusedIndex(t,!0,!0))}.bind(this))},o.prototype._doPrepareComparer=function(t){for(var e={},i=0;i<t.length;i++){var o=this.columnByField(t[i]);o.sortByLabel&&(e[t[i]]=function(o){var n=o.grid;return function(t,e,i){e=n.getItemOfRow(e,!0),i=n.getItemOfRow(i,!0),e=st.DataCell.getText(e,o),i=st.DataCell.getText(i,o);return e==i?0:null==e?null==i?0:-1:null==i||i<e?1:e<i?-1:0}}(o))}return e},o.prototype._doSortItems=function(t,e,i){},o.prototype.getSortFields=function(){return null},o.prototype.getSortDirections=function(){return null},o.prototype.getSortCases=function(){return null},o.prototype.canFiltering=function(){return this._fireFiltering()},_dp(o,"filterSelecting",{get:function(){return this._filterSelector.opened}}),_dp(o,"filterSelector",{get:function(){return this._filterSelector}}),o.prototype.applyFilters=function(t,e){return!this.isItemEditing(null)&&!!this._fireFiltering()&&(this._toastManager.show(this.filteringOptions.toast,!0,function(){this.$_doApplyFilters(t,e)}.bind(this)),!0)},o.prototype.$_findFilterView=function(t){if(t)for(var e,i=[this._fixedFilterView,this._filterPanelView,this._rightFilterView],o=0;o<i.length;o++)if(i[o].visible&&(e=i[o].tableCellByLayout(t)))return{view:i[o],cell:e};return{}},o.prototype.filterOperatorCallback=function(t,e,i){var o=this.layoutByName(i.column),n=this.$_findFilterView(o),r=n.view,n=n.cell;n&&r.operatorChange(n,e,o,i)},o.prototype.clearInlineFilter=function(t){var e,i=t&&t.layout;i?(e=(i=this.$_findFilterView(i)).view,i=i.cell,e.clearInput(i,t)):([this._fixedFilterView,this._filterPanelView,this._rightFilterView].forEach(function(t){return t.clearInput()}),this.$_doApplyFilters(null,null))},o.prototype.inlineFilterFocus=function(t){var t=this.$_findFilterView(t),e=t.view,t=t.cell;e.setFocus(t)},o.prototype.$_doApplyFilters=function(t,e){var i=this._items.itemCount;this._items.beginFiltering();try{this._filterRunning=!0,this._items.clearAllFilters(),this.$_addFilters()}finally{this._items.endFiltering(t,e),i!==this._items.itemCount&&(this.topIndex=0),this._filterRunning=!1}},o.prototype.$_addFilters=function(){for(var t=this.columnCount,e=0;e<t;e++){var i=this.getColumn(e),o=i.autoFilter?i.autoFilters:i.filters;if(o&&0<o.activeCount)for(var n,r=0,s=o.count;r<s;r++)(n=o.getItem(r)).active&&this._items.addFilter(i.dataIndex,n);(o=i._inlineFilters)&&0<o.activeCount&&(n=o.getItem(0)).active&&this._items.addFilter(i.dataIndex,n)}},o.prototype.columnFilterChanged=function(t,e){this._doColumnFiltersChanged(t,e)},o.prototype.canGrouping=function(){return!1},o.prototype.$_layoutRowHover=function(t,e,i){var o=this._layoutManager,n=o.footerBounds.y+o.contentBounds.y,r=this.getBodyView(t.cell);if(r){e=o.getTableRowIndex(e);if(!(e<0)){var e=r.getViewIndex(e),s=o.getTableItemBounds(e);switch(s.y+=o.contentBounds.y+o.bodyBounds.y,s.bottom>n&&(s.bottom=n),i){case ht.RowMaskType.DATA:s.x=this._fixedContentPane.x,s.right=(this._rightContentPane.width?this._rightContentPane:this._contentPane).right;break;case ht.RowMaskType.FILL:s.x=0,s.width=this.width;break;case ht.RowMaskType.CELL:var a=r.pointByContainer(0,0),l=r.getCellRect(o,t,!0);s.x=l.x+a.x,s.width=l.width;break;case ht.RowMaskType.ROW:s.x=0,s.right=(this._rightContentPane.width?this._rightContentPane:this._contentPane).right}this._rowHoverView.setRect(s)}}},o.prototype.$_resetHovering=function(t,e,i){void 0===i&&(i=!1);var o,n,r,s,a,l,h=this.activeTool;if(h instanceof R.GridSelectionTool&&this.canHovering)return o=this.container.getTableCell(h.mouseEventTarget),a=s=r=!1,"data"===(n=this.getCellType(o))?(l=this.getBodyView(o).bodyCellByCell(o),this.$_setHoveredCell(l,e,i),h.$_setHoveredCell(l,t,e),r=!0):"header"===n?(l=this.getHeaderView(o).tableCellByCell(o),h.$_setHoveredHeaderCell(l,t,e),s=!0):"state"===n&&this._rowBarContainer.stateError&&this._stateBar.errorVisible&&this.editOptions.hintOnError&&(i=this._rowBarContainer.rowOf(o),this.isItemEditing(this.getItem(i)))&&(a=!0,h.$_showStateError(o,this._rowBarContainer.stateError.message)),r||s||a||h._hideTooltip(),r||this.$_setHoveredCell(null,e,!1),!0},o.prototype.$_getCellAt=function(t,e){var i=this.getBodyView(t),o=this.layoutManager,t=this.getDataCellIndex(t,this._currentIndex),n=i.getCellAt(o,t);return!n||!n.merged||(e=o.getTableRowIndex(e))<0?n:(e=i.getRowIndex(e),t.itemIndex=Math.min(Math.max(n.item.index,e),n.item.index+n.rowSpan-1),i.getCellAt(o,t))},o.prototype.$_setHoveredCell=function(t,e,i){void 0===i&&(i=!1);t=t&&this.$_getCellAt(t.cell,e);!i&&t===this._hoveredCell||(this._hoveredCell&&this._hoveredCell.cell&&this.getBodyView(this._hoveredCell.cell).$_mouseEnteredChanged(this,this._hoveredCell,!1),t&&this.getBodyView(t.cell).$_mouseEnteredChanged(this,t,!0),this._doHoveredCellChanged(this._hoveredCell=t)),!i&&e==this._hoveredY||(this._hoveredY=e,this.$_resetRowHover())},o.prototype.$_resetRowHover=function(){var t=this._displayOptions.rowHoverType;this._hoveredCell&&t&&t!=ht.RowMaskType.NONE?(this._rowHoverView.visible=!0,this.$_layoutRowHover(this._hoveredCell,this._hoveredY,t)):this._rowHoverView.visible=!1},o.prototype.$_resetFocusRender=function(t,e){var i,o,n,r=this.getBodyCellAt(this.focusedIndex,!0),s=r&&r.merged&&(r.renderer2||r.head.renderer2),r=this.canMergeEditing(r);s&&s.refreshFocusChanged&&(n=this.layoutManager,i=(o=this.getBodyViewAt(this.focusedIndex)).getCellRectAt(n,this.focusedIndex,!1),o=o.getCellRectAt(n,this.focusedIndex,!0),n=i.top-o.top+i.height/2-o.height/2,s.moveClickElement(n,r))},o.prototype._doHoveredCellChanged=function(t){},o.prototype._doCellButtonClicked=function(t){this._fireCellButtonClicked(t)},o.prototype._syncHeadCheck=function(t,e){var i=this.checkBar;if(i.syncHeadCheck){this._needSyncHeadCheck=!1;var o=i.showGroup&&!i.merged;if(!1===e)this._headView.allChecked=e;else if(null==t)this._headView.allChecked=e;else{for(var n=0,r=void 0,s=i.visibleOnly,a=s?this._items.itemCount:(r=this.getAllItems()).length,l=0;l<a;l++){var h=s?this._items.getItem(l):r[l];if((h.isDataRow||o)&&h.checkable){if(!h.checked){n=-1;break}n++}}this._headView.allChecked=0<n}}},o.prototype.getRowHeight=function(t){t=this.getItem(t);return t?t.height:NaN},o.prototype.setRowHeight=function(t,e,i){void 0===i&&(i=!0);t=this.getItem(t);t&&(this._items.setRowHeight(t,e,!0),i)&&this.refreshView()},o.prototype.clearRowHeights=function(t){this._items.clearRowHeights(t=void 0===t?!1:t)&&this.refreshView()},o.prototype.setFocusedClass=function(t,e){this.displayOptions.useFocusClass&&(t=this.getBodyCellAt(t,!0))&&t.cell&&(e?re.Utils.addClassName(t.cell,"rg-focused-cell"):re.Utils.removeClassName(t.cell,"rg-focused-cell"))},o.prototype.setFocusedRowClass=function(t,r){function e(t,e){t=t.getRowView(e);if(t)for(var i=0,o=t._getTableRows(this.layoutManager);i<o.length;i++){var n=o[i];r?re.Utils.addClassName(n,"rg-focused-row"):re.Utils.removeClassName(n,"rg-focused-row")}}this.displayOptions.useFocusClass&&(t=t.item,e.call(this,this.bodyView,t),e.call(this,this.fixedBodyView,t),e.call(this,this.rightBodyView,t))},o.prototype.getSummaryCount=function(t){switch(t){case"summary":return this.headerSummaries.count;case"footer":return this.footers.count;default:return 0}},o.prototype.topIndexChanging=function(t,e,i,o){return this._fireTopIndexChanging(t,e,i,o)},o.prototype.$_rendererChanged=function(t){var e=this._layoutManager.getBodyView(t);e&&e.$_rendererChanged(t)},o.prototype.$_clearDropData=function(t){t=this.getRowsOfItems(t,!1);0<t.length&&this.dataSource.removeRows(t)},o.prototype.$_dropData=function(t,e,i){var o,n=this.dataDropOptions,r=n.callback,s=i.index;r?r(t.handler,e,this.handler,i.index):0<=s&&(r=t.getRowsOfItems(e),i=void 0,i=(i=(o=n.fieldMapCallback)?o(t.handler,e,this.handler,s):i)||n.fieldMap,s<this.itemCount?0<=(o=this.getRowOfItem(s))&&this.dataSource.insertRowsFrom(t.dataSource,i,r,o):this.dataSource.appendRowsFrom(t.dataSource,i,r)),n.dropMode==Se.DataDropMode.MOVE&&t.$_clearDropData(e)},o.prototype.$_checkFocusedLayout=function(){var t;this._focusedIndex&&(t=this.getBodyCellAt(this._focusedIndex))&&t.spanned&&(t=this.getBodyView(t.cell).getCheckedLayout(t),this._focusedIndex.layout=t&&t.layout)},o.prototype.$_isBottomCell=function(t){t=this.getBodyCellAt(t);if(t)return this.getBodyView(t.cell).isBottomCell(t)},o.prototype.$_getLowerOfCell=function(t){t=this.getBodyCellAt(t);if(t)return(t=this.getBodyView(t.cell).getLowerOf(t))&&t.layout.source},o.prototype.$_isTopCell=function(t){t=this.getBodyCellAt(t);if(t)return this.getBodyView(t.cell).isTopCell(t)},o.prototype.$_getUpperOfCell=function(t){t=this.getBodyCellAt(t);if(t)return(t=this.getBodyView(t.cell).getUpperOf(t))&&t.layout.source},o.prototype._checkFieldIndex=function(t){this._items.setCheckFieldIndex(t)},o.prototype._fireViewActivated=function(t){this.fireEvent("onGridBaseViewActivated",t)},o.prototype._fireCurrentChanging=function(t,e){return this.fireConfirmEvent("onGridBaseCurrentChanging",t,e)},o.prototype._fireCurrentChanged=function(t){this.fireEvent("onGridBaseCurrentChanged",t)},o.prototype._fireCurrentRowChanged=function(t,e){this.fireEvent("onGridBaseCurrentRowChanged",t,e)},o.prototype._fireValidateCell=function(t,e,i){this.fireEvent("onGridBaseValidateCell",t,e,i)},o.prototype._fireValidateRow=function(t,e,i){this.fireEvent("onGridBaseValidateRow",t,e,i)},o.prototype._fireValidationFail=function(t,e,i){return this.fireObjectEvent("onGridBaseValidationFail",t,e,i)},o.prototype._fireCellClicked=function(t){this.fireEvent("onGridBaseCellClicked",t)},o.prototype._fireCellDblClicked=function(t){this.fireEvent("onGridBaseCellDblClicked",t)},o.prototype._fireCellItemClicked=function(t,e){return this.fireConfirmEvent("onGridBaseCellItemClicked",t,e)},o.prototype._fireColumnCheckedChanged=function(t){this.fireEvent("onGridBaseColumnCheckedChanged",t,t.checked)},o.prototype._fireMenuItemClicked=function(t,e){this.fireEvent("onGridBaseMenuItemClicked",t,e)},o.prototype._fireContextMenuPopup=function(t,e,i){return this.fireObjectEvent("onGridBaseContextMenuPopup",t,e,i)},o.prototype._fireContextMenuItemClicked=function(t,e){this.fireEvent("onGridBaseContextMenuItemClicked",t,e)},o.prototype._fireCellButtonClicked=function(t){this.fireEvent("onGridBaseCellButtonClicked",t)},o.prototype._fireEditButtonClicked=function(t){this.fireEvent("onGridBaseEditButtonClicked",t)},o.prototype._fireScrollToBottom=function(){this.fireEvent("onGridBaseScrollToBottom")},o.prototype._fireTopIndexChanging=function(t,e,i,o){return this.fireObjectEvent("onGridBaseTopIndexChanging",t,e,i,o)},o.prototype._fireTopIndexChanged=function(t){this.fireEvent("onGridBaseTopIndexChanged",t)},o.prototype._fireDataCellClicked=function(t){this.fireEvent("onGridBaseDataCellClicked",t)},o.prototype._fireDataCellDblClicked=function(t){this.fireEvent("onGridBaseDataCellDblClicked",t)},o.prototype._fireRowsDeleting=function(t){return this.fireConfirmEvent("onGridBaseRowsDeleting",t)},o.prototype._fireRowInserting=function(t,e){return this.fireConfirmEvent("onGridBaseRowInserting",t,e)},o.prototype._fireItemCommit=function(t,e){this.fireEvent("onGridBaseItemCommit")},o.prototype._fireSelectionChanged=function(t){return this.fireEvent("onGridBaseSelectionChanged",t)},o.prototype._fireSelectionAdded=function(t){return this.fireEvent("onGridBaseSelectionAdded",t)},o.prototype._fireSelectionRemoved=function(){return this.fireEvent("onGridBaseSelectionRemoved")},o.prototype._fireSelectionCleared=function(){return this.fireEvent("onGridBaseSelectionCleared")},o.prototype._fireSelectionResized=function(t){return this.fireEvent("onGridBaseSelectionResized")},o.prototype._fireSelectionEnded=function(t){return this.fireEvent("onGridBaseSelectionEnded",t)},o.prototype._fireUpdateStarted=function(t,e){this.fireEvent("onGridBaseUpdateStarted",t)},o.prototype._fireInsertStarted=function(t,e){this.fireEvent("onGridBaseInsertStarted",t,e)},o.prototype._fireShowEditor=function(t,e,i){return this.fireConfirmEvent("onGridBaseShowEditor",t,e,i)},o.prototype._fireHideEditor=function(t){return this._doEditorActivated(t,!1,null),this.fireEvent("onGridBaseHideEditor",t)},o.prototype._fireEditChange=function(t,e){this.fireEvent("onGridBaseEditChange",t,e)},o.prototype._fireGetEditValue=function(t,e){this.fireEvent("onGridBaseGetEditValue",t,e)},o.prototype._fireEditCommit=function(t,e,i){return this.fireConfirmEvent("onGridBaseEditCommit",t,e,i)},o.prototype._fireEditCanceled=function(t){this.fireEvent("onGridBaseEditCanceled",t)},o.prototype._fireItemEditCancel=function(t){return this.fireConfirmEvent("onGridBaseItemEditCancel",t)},o.prototype._fireItemEditCanceled=function(t){this.fireEvent("onGridBaseItemEditCanceled",t)},o.prototype._fireEditSearch=function(t,e){this.fireEvent("onGridBaseEditSearch",t,e)},o.prototype._fireSearchCellButtonClick=function(t,e){return this.fireObjectEvent("onGridBaseSearchCellButtonClick",t,e)},o.prototype._fireCellEdited=function(t,e){this.fireEvent("onGridBaseCellEdited",t,e)},o.prototype._fireEditRowChanged=function(t,e,i,o){this.fireEvent("onGridBaseEditRowChanged",t,e,i,o)},o.prototype._fireEditItemPasted=function(t,e,i,o){this.fireEvent("onGridBaseEditRowPasted",t,e,i,o)},o.prototype._fireItemsPasted=function(t){this.fireEvent("onGridBaseRowsPasted",t)},o.prototype._fireCellPasting=function(t,e){return this.fireObjectEvent("onGridBaseCellPasting",t,e)},o.prototype._fireItemChecked=function(t){this.fireEvent("onGridBaseItemChecked",t,t.checked)},o.prototype._fireItemsChecked=function(t,e){this.fireEvent("onGridBaseItemsChecked",t,e)},o.prototype._fireItemAllChecked=function(t){this.fireEvent("onGridBaseItemAllChecked",t)},o.prototype._fireErrorClicked=function(t,e){this.fireEvent("onGridBaseErrorClicked",e)},o.prototype._fireSorting=function(t,e){return this.fireConfirmEvent("onGridBaseSorting",t,e)},o.prototype._fireFiltering=function(){return this.fireConfirmEvent("onGridBaseFiltering")},o.prototype._fireKeyDown=function(t){return this.fireConfirmEvent("onGridBaseKeyDown",t)},o.prototype._fireKeyPress=function(t){this.fireEvent("onGridBaseKeyPress",t)},o.prototype._fireKeyUp=function(t){this.fireEvent("onGridBaseKeyUp",t)},o.prototype._fireShowTooltip=function(t,e){return this.fireObjectEvent("onGridBaseShowTooltip",t,e)},o.prototype._fireShowHeaderTooltip=function(t,e){return this.fireObjectEvent("onGridBaseShowHeaderTooltip",t,e)},o.prototype._fireColumnPropertyChanged=function(t,e,i,o){this.fireEvent("onGridBaseColumnPropertyChanged",t,e,i,o)},o.prototype._fireLayoutPropertyChanged=function(t,e,i,o){this.fireEvent("onGridBaseLayoutPropertyChanged",t,e,i,o)},o.prototype._fireGridActivated=function(){return this.fireEvent("onGridBaseGridActivated",this)},o.prototype._fireCopy=function(t,e){return this.fireConfirmEvent("onGridBaseCopy",t,e)},o.prototype._firePaste=function(t,e){return this.fireConfirmEvent("onGridBasePaste",t,e)},o.prototype._firePasted=function(){this.fireEvent("onGridBasePasted")},o.prototype._fireCommandStackChanged=function(t,e){this.fireEvent("onGridBaseCommandStackChanged",t,e)},o.prototype.onPopupMenuManagerMenuItemClicked=function(t,e,i){this._fireMenuItemClicked(e,i)},o.prototype.onScrollBarScrolled=function(t,e,i,o){var n,r,s,a=this.displayOptions,l=this.fixedOptions,h=a.scrollMessageCallback,d=e===v.ScrollEventType.SCROLL_END;if(d||this.scrollOnEditing(),t.vertical){var u=-1;switch(e){case v.ScrollEventType.LINE:return void this.scrollRow(i);case v.ScrollEventType.PAGE:u=this.topIndex+i*t._page;break;case v.ScrollEventType.THUMB_TRACK:var c=a.scrollDuration;a.liveScroll||0<this._scrolledTime&&re.Utils.getTimer()-this._scrolledTime>c?(u=o,this._scrolledTime=0):(this._scrollTipView||(this._scrollTipView=new v.ScrollTipView(this.container)),this._vscrollBar.tipView=this._scrollTipView,this._vscrollBar.setPosition(o,!0),r=this._vscrollBar.pos+l.rowCount,n=h?h(this.handler,t.vertical,r):String(r+1),this._vscrollBar.setText(n),0<c&&0==this._scrolledTime&&(this._scrolledTime=re.Utils.getTimer()));break;case v.ScrollEventType.THUMB_END:this._scrollTipView&&this._scrollTipView.hide(),u=o,d=!(this._vscrollBar.tipView=null);break;default:u=o}0<=u&&(this.topIndex=u)}else{var _=-1;switch(e){case v.ScrollEventType.LINE:_=this.leftPos+8*i;break;case v.ScrollEventType.PAGE:_=0<i?this._layoutManager.scrollToNextCell():this._layoutManager.scrollToPrevCell();break;case v.ScrollEventType.THUMB_TRACK:c=a.hscrollDuration;a.liveScroll||0<this._scrolledTime&&re.Utils.getTimer()-this._scrolledTime>c?(_=o,this._scrolledTime=0):(this._scrollTipView||(this._scrollTipView=new v.ScrollTipView(this.container)),this._hscrollBar.tipView=this._scrollTipView,-1<(s=this._layoutManager.getPositionToVIndex(o))&&(n=h?h(this.handler,t.vertical,s):this.getVisibleLayout(s).getDataColumn().header.displayText,this._hscrollBar.setText(n)),this._hscrollBar.setPosition(o,!0),0<c&&0==this._scrolledTime&&(this._scrolledTime=re.Utils.getTimer()));break;case v.ScrollEventType.THUMB_END:this._scrollTipView&&this._scrollTipView.hide(),_=o,d=!(this._hscrollBar.tipView=null);break;default:_=o}0<=_&&(this.leftPos=_)}d&&!re.Utils.isMobile()&&this.setFocus()},o.prototype.$_checkFocusedRow=function(t){void 0===t&&(t=!1),this.focusedRow>=this.itemCount&&this.clearFocusedIndex(t)},o.prototype.onItemProviderReset=function(t){this.hideEditor(),this._dataChanged=!0,this.clearRowHeights(),this._columnsReset(),this._populateMerges(),this.$_checkFocusedRow(),this.resetGrid(),this._syncHeadCheck([]),this.$_refreshInvalidList(!0),this._editorLender&&this._editorLender.itemsChanged(this)},o.prototype.onItemProviderRefresh=function(t){this.hideEditor(),this._dataChanged=!0,this._resetColumnSortStates(),this.clearRowHeights(),this._populateMerges(),this.$_checkFocusedRow(!0),this.refreshView(),this._keepNullFocus||this.setFocusedIndex(this.focusedIndex,!0),this._needSyncHeadCheck&&this._syncHeadCheck([]),this.$_refreshInvalidList(!1),this._editorLender&&this._editorLender.itemsChanged(this)},o.prototype.onItemProviderRefreshClient=function(t){this.hideEditor(),this._dataChanged=!0,this._populateMerges(),this.$_checkFocusedRow(),this.refreshView(),this._needSyncHeadCheck&&this._syncHeadCheck([])},o.prototype.onItemProviderItemInserted=function(t,e){this.hideEditor(),this._dataChanged=!0,this._needSyncHeadCheck=!0,this.clearRowHeights(),this._populateMerges(),this.refreshView(),(t.dataSource.undoing||t.dataSource.redoing)&&((t=this._focusedIndex.clone()).itemIndex=e.index,this.setFocusedIndex(t,!0,!0)),this._editorLender&&(this._editorLender.itemInserted(this,e),this._editorLender.itemsChanged(this))},o.prototype.onItemProviderItemDeleted=function(t,e){this.hideEditor(),this._dataChanged=!0,this._needSyncHeadCheck=!0,this.clearRowHeights(),this._populateMerges(),this.$_checkFocusedRow(!0),this.refreshView(),(t.dataSource.undoing||t.dataSource.redoing)&&((t=this._focusedIndex.clone()).itemIndex=e.index,this.setFocusedIndex(t,!0,!0)),this._editorLender&&this._editorLender.itemsChanged(this)},o.prototype.onItemProviderItemUpdated=function(t,e){this.hideEditor(),this._dataChanged=!0,this._updateRows?this._updateRows.push(e.dataId):this._updateRows=[e.dataId],this.clearRowHeights(),this._populateMerges(),this.refreshView(),(t.dataSource.undoing||t.dataSource.redoing)&&((t=this._focusedIndex.clone()).itemIndex=e.index,this.setFocusedIndex(t,!0,!0)),this._editorLender&&this._editorLender.itemsChanged(this)},o.prototype.onItemProviderCheckableChanged=function(t,e){this.refreshView(),this._syncHeadCheck([])},o.prototype.onItemProviderItemChecked=function(t,e){this.refreshView(),this._fireItemChecked(e)},o.prototype.onItemProviderItemsChecked=function(t,e,i){this.refreshView(),this._fireItemsChecked(e,i)},o.prototype.onItemProviderItemAllChecked=function(t,e){this.refreshView(),this._fireItemAllChecked(e)},o.prototype.onItemProviderItemCheckChanged=function(t,e,i){this._syncHeadCheck(e,i),this.checkBar.canMerge()&&this._populateMerges(),this._editorLender&&this._editorLender.itemsChanged(this)},o.prototype.onItemProviderRowStateChanged=function(t,e){this.refreshView()},o.prototype.onItemProviderRowStatesChanged=function(t,e){this.refreshView()},o.prototype.onItemProviderRowStatesCleared=function(t){this.refreshView()},o.prototype.onItemProviderSort=function(t,e,i){this.refreshView()},o.prototype.onItemProviderSorted=function(t){this.refreshView(),this.fireEvent("onGridBaseSortingChanged")},o.prototype.onItemProviderFilterAdded=function(t){},o.prototype.onItemProviderFilterRemoved=function(t){},o.prototype.onItemProviderFilterCleared=function(t){},o.prototype.onItemProviderFilterAllCleared=function(t){},o.prototype.onItemProviderFiltered=function(t,e,i){this._populateMerges(),this.$_checkFocusedRow(),this.refreshView(),this._loading||this._syncHeadCheck([]),this.fireEvent("onGridBaseFilteringChanged",e,i)},o.prototype.onItemProviderCommandStackChanged=function(t,e,i){this._fireCommandStackChanged(e,i)},o.prototype.onItemProviderDataLoadComplated=function(t){this._dataLoad=!0},o.prototype.$_focusEditItem=function(t){null==this._editorLender&&(!(t=this.getIndex(t.index,this.focusedIndex?this.focusedIndex.column:null)).column&&0<this.visibleLayoutCount&&(t._layout=this.getVisibleLayout(0)),this.setFocusedIndex(t,!0),this.makeCellVisible(this.focusedIndex))},o.prototype.$_beforeEditing=function(t,e){},o.prototype.onItemEditUpdateStarted=function(t,e){this.$_beforeEditing(t,e),this.refreshView(),this._fireUpdateStarted(e,!1),this._editorLender&&this._editorLender.itemUpdateStarted(this,e)},o.prototype.onItemEditAppendStarted=function(t,e){this.$_beforeEditing(t,e),this.hideEditor(),this._populateMerges(),this.refreshView(),this.$_focusEditItem(e),this.requestPrepareEditor(),this._fireInsertStarted(e,!0),this._editorLender&&this._editorLender.itemAppendStarted(this,e)},o.prototype.onItemEditInsertStarted=function(t,e){this.$_beforeEditing(t,e),this.hideEditor(),this._populateMerges(),this.refreshView(),this.$_focusEditItem(e),this.requestPrepareEditor(),this._fireInsertStarted(e,!1),this._editorLender&&this._editorLender.itemInsertStarted(this,e)},o.prototype.onItemEditCellEdited=function(t,e,i){this.refreshView(),this._cellUpdateEventLock||this._fireCellEdited(e,i)},o.prototype.onItemEditCellUpdated=function(t,e,i,o,n){this.refreshView(),this._cellUpdateEventLock||this._fireEditRowChanged(e,i,o,n)},o.prototype.onItemEditCommitting=function(t,e){},o.prototype.onItemEditCommitted=function(t,e){this._appendDummy(),this.hideEditor(),this.refreshView(),this._editorLender&&this._editorLender.itemCommited(this,e)},o.prototype.onItemEditCanceled=function(t){this._appendDummy(),this.hideEditor(),this._populateMerges(),this.refreshView(),this._fireItemEditCanceled(t._editingItem),this._editorLender&&this._editorLender.itemCanceled(this)},o.prototype.onItemEditCommitRequest=function(t){this.commit(!1)},o.prototype.onItemEditCancelReuqest=function(t){this.cancel()},o.prototype.onLookupSourceProviderChanged=function(t){this._resetColumnIndices(),this.refreshView()},o.prototype.onSelectionChanged=function(t,e){this._refreshSideViews(),this._fireSelectionChanged(e)},o.prototype.onSelectionAdded=function(t,e){this._addSelectionView(e),this._layoutSelectionViews(),this._fireSelectionAdded(e)},o.prototype.onSelectionRemoved=function(t,e){this._removeSelectionView(e),this._fireSelectionRemoved()},o.prototype.onSelectionCleared=function(t){this._clearSelectionViews(),this._refreshSideViews(),this._fireSelectionCleared()},o.prototype.onSelectionResized=function(t,e){this._layoutSelectionViews(),this._fireSelectionResized(e)},o.prototype.onSelectionEnded=function(t,e){this._fireSelectionEnded(e)},o.prototype.onLayoutExpanding=function(t,e){return this.fireConfirmEvent("onGridBaseLayoutExpanding",e)},o.prototype.onLayoutExpanded=function(t,e){this.fireEvent("onGridBaseLayoutExpanded",e)},o.prototype.onLayoutCollapsing=function(t,e){return this.fireConfirmEvent("onGridBaseLayoutCollapsing",e)},o.prototype.onLayoutCollapsed=function(t,e){this.fireEvent("onGridBaseLayoutCollapsed",e)},o.prototype.onMenuItemClick=function(t,e){this._fireContextMenuItemClicked(t,e)};var h,i=o;function o(t,e,i){var o=h.call(this,t.doc,!0)||this,n=(o._debugging=!1,o._scrollBarWidth=16,o._scrollBarHeight=16,o._keepNullFocus=!0,o._loading=!0,o._dataLoad=!1,o._userMode=!1,o._userModeError=null,o._gridObjects=[],o._tableViews={},o._columnMap={},o._columnLayouts=new lt.ColumnLayoutCollection,o._columnLock=0,o._columnsDirty=!1,o._columnSummaryRuntime=new Zt.ColumnSummaryRuntime,o._columnValidationRuntime=new G.DataCellValidationRuntime,o._rowValidationRuntime=new G.DataRowValidationRuntime,o._layouted=!1,o._resetting=!1,o._needMerge=!1,o._leftPos=0,o._horzScrolled=!1,o._topIndex=0,o._prevTop=0,o._prevLast=-1,o._updateLock=!1,o._hoveredY=-1,o._focusing=!1,o._dataChanged=!1,o._validations=new G.EditValidationCollection(!1),o.$_editFocused=!1,o.$_showFocusCell=!1,o._needSyncHeadCheck=!1,o._cellUpdateEventLock=!1,o._currentRowId=-1,o._currentRow=-1,o._scrolledTime=0,o._cellLayoutDirty=!1,t.doc),r=t._lkCheck=ri.lk();switch(r){case 0:case 32:break;default:return}o._container=t,o._addGridObject(o._header=new te.GridHeader(o)),o._addGridObject(o._footers=new ee.GridFooterCollection(o)),o._addGridObject(o._headerSummaries=new Qe.HeaderSummaryCollection(o)),o._addGridObject(o._rowIndicator=new oe.RowIndicator(o)),o._addGridObject(o._stateBar=new ae.StateBar(o)),o._addGridObject(o._checkBar=new le.CheckBar(o)),o._addGridObject(o._body=new ce.GridBody(o)),o._addGridObject(o._filterPanel=new ui.FilterPanel(o)),o._rootElement=new pt.LayerElement(n,"grid root view"),o.addChild(o._rootElement),o._debugView=new ai.DebugLayer(o),32===r&&o.addChild(o._watermarkLayer=new di.WaterMarkLayer(o)),o._emptyView=new me.EmptyGridElement(n),o.addChild(o._emptyView),o._contentPane=new Ve.DataContentPane(n,"contentPane"),o.addElement(o._contentPane),o._rightContentPane=new Ve.RightContentPane(n,"rightContentPane"),o.addElement(o._rightContentPane),o._fixedContentPane=new Ve.FixedContentPane(n,"fixedContentPane"),o.addElement(o._fixedContentPane),o._doContentPanesCreated(),o._leftContentPane=new Ve.LeftContentPane(n,"leftContentPane"),o.addElement(o._leftContentPane),o._sideContentPane=o._createSidePane(),o._sideContentPane&&o.addElement(o._sideContentPane),o._topContentPane=new Ve.ContentPane(n,"topContentPane"),o.addElement(o._topContentPane),o._filterPanelView=new ci.FilterPanelElement(n,o._filterPanel),o._fixedFilterView=new ci.FixedFilterPanelElement(n,o._filterPanel),o._rightFilterView=new ci.RightFilterPanelElement(n,o._filterPanel),o._bodyView=o._createBodyView(o._body),o._fixedBodyView=o._createFixedBodyView(o._body),o._rightBodyView=o._createRightBodyView(o._body),o._headerView=new Ce.HeaderElement(n,o._header),o._fixedHeaderView=new Ce.FixedHeaderElement(n,o._header),o._rightHeaderView=new Ce.RightHeaderElement(n,o._header),o._headerSummaryView=new ti.HeaderSummaryElement(n,o._headerSummaries),o._fixedHeaderSummaryView=new ti.FixedHeaderSummaryElement(n,o._headerSummaries),o._rightHeaderSummaryView=new ti.RightHeaderSummaryElement(n,o._headerSummaries),o._footerView=new be.FooterElement(n,o.footers),o._fixedFooterView=new be.FixedFooterElement(n,o.footers),o._rightFooterView=new be.RightFooterElement(n,o.footers),o._rowBarContainer=new qe.RowBarContainer(o),o._headView=new Me.GridHeadElement(o),o._sumView=new ei.GridSumElement(n),o._footView=new Fe.GridFootElement(n),o._filterView=new _i.GridFilterElement(n);for(var s=[o._rowBarContainer,o._bodyView,o._fixedBodyView,o._rightBodyView,o._headerView,o._fixedHeaderView,o._rightHeaderView,o._headerSummaryView,o._fixedHeaderSummaryView,o._rightHeaderSummaryView,o._footerView,o._fixedFooterView,o._rightFooterView,o._headView,o._sumView,o._footView,o._filterView,o._filterPanelView,o._fixedFilterView,o._rightFilterView],a=s.length-1;0<=a;a--){var l=s[a];o._tableViews[l.$_hash]=l}return o._contentPane.addChild(o._headerView),o._contentPane.addChild(o._headerSummaryView),o._contentPane.addChild(o._filterPanelView),o._contentPane.addChild(o._bodyView),o._contentPane.addChild(o._footerView),o._fixedContentPane.addChild(o._fixedBodyView),o._fixedContentPane.addChild(o._fixedFooterView),o._fixedContentPane.addChild(o._fixedHeaderSummaryView),o._fixedContentPane.addChild(o._fixedHeaderView),o._fixedContentPane.addChild(o._fixedFilterView),o._rightContentPane.addChild(o._rightBodyView),o._rightContentPane.addChild(o._rightFooterView),o._rightContentPane.addChild(o._rightHeaderSummaryView),o._rightContentPane.addChild(o._rightHeaderView),o._rightContentPane.addChild(o._rightFilterView),o._leftContentPane.addChild(o._rowBarContainer),o._leftContentPane.addChild(o._footView),o._leftContentPane.addChild(o._sumView),o._leftContentPane.addChild(o._headView),o._leftContentPane.addChild(o._filterView),o._doCreateOtherElements(),o._selectionLayer=o._createSelectionLayer(),o.addElement(o._selectionLayer),o._feedbackLayer=new pt.LayerElement(n,"feedbackLayer"),o.addElement(o._feedbackLayer),o._rowHoverView=new R.RowHoverView(n),o.addFeedbackElement(o._rowHoverView),o._hscrollBar=new v.ScrollBar(t,!1),o._vscrollBar=new v.ScrollBar(t,!0),o._scrollEdge=new v.ScrollEdge(n),o.addElement(o._hscrollBar),o.addElement(o._vscrollBar),o.addElement(o._scrollEdge),o._hscrollBar.addListener(o),o._vscrollBar.addListener(o),o._selections=new W.SelectionManager(o),o._selections.addListener(o),o._fixedOptions=new pe.FixedOptions(o),o._displayOptions=new fe.DisplayOptions(o),o._formatOptions=new Le.FormatOptions(o),o._editOptions=new Ne.EditOptions(o),o._editorOptions=new Ne.EditorOptions(o),o._copyOptions=new Ne.CopyOptions(o),o._pasteOptions=new Ne.PasteOptions(o),o._dataDropOptions=new Se.DataDropOptions(o),o._sortingOptions=new Pe.SortingOptions(o),o._filteringOptions=new ii.FilteringOptions(o),o._waiOptions=new hi.WaiOptions(o),o._mobileOptions=new Ne.MobileOptions(o),o._initStyles(),o._columns=new Qt.ColumnCollection(o),o._activeCellLayout=o._defaultCellLayout=new ct.DefaultCellLayout(o),o._defaultCellLayout.addListener(o),o._delegate=o._createDelegate(),o._layoutManager=o._createLayoutManager(),o._editController=o._createEditController(),o._validationManager=new G.ValidationManager(o),o._lookupProvider=new Je.LocalLookupSourceProvider,o._lookupProvider.addListener(o),o._clipboardManager=new ue.ClipboardManager(o),o._progressManager=new li.ProgressManager(o._container._containerDom),o._popupMenuManager=new Ze.PopupMenuManager(o._container),o._popupMenuManager.addListener(o),o._tooltipManager=new $e.TooltipManager(o),o._filterSelector=new ni.FilterSelector(o._container,o._filteringOptions,o),o._toastManager=new Oe.ToastManager(o),o._currentIndex=new _t.CellIndex(o),o._editorIndex=new _t.CellIndex(o),o._focusedIndex=new _t.CellIndex(o),(o._accessibility=e)&&o._waiOptions.assignFrom(i),o}e.GridBase=i})),fi=(t(pi),pi.GridBase,e(function(t,e){Object.defineProperty(e,"__esModule",{value:!0});i=Lt.ExporterBase,ne.__extends(n,i),n.prototype.dispose=function(){return null},n.prototype.export=function(t,e){this.grid=t};var i,o=n;function n(){var t=i.call(this)||this;return t.prepareProgress=10,t.indicatorNo=1,t}e.GridExporterBase=o})),gi=(t(fi),fi.GridExporterBase,e(function(t,e){Object.defineProperty(e,"__esModule",{value:!0});var o,n=re,i=(o=fi.GridExporterBase,ne.__extends(r,o),r.prototype.dispose=function(){return o.prototype.dispose.call(this),null},r.prototype.export=function(t,e){o.prototype.export.call(this,t,e);var e=this._exportOptions=e,i=(this._cols=[],t.collectColumns(!0,!0,!0));this._cols=i.filter(function(t){return t instanceof lt.ValueColumn}),this.indicator=e.indicatorVisible(t)?t.rowIndicator:null,this.header=e.headerVisible(t)?t.header:null,this.headerSummary=e.headerSummaryVisible(t)?t.headerSummary:null,this.footer=e.footerVisible(t)?t.footer:null,this.indicatorHead=t.rowIndicator.headText||"No",this.indicatorFoot=t.rowIndicator.footText||"",this.indicatorSummary=t.rowIndicator.sumText,this.done=function(){this.save()},this.buildBook()},r.prototype.prepare=function(){},r.prototype.finallize=function(){},r.prototype.buildBook=function(){this.buildSheet(this.grid)},r.prototype.buildSheet=function(t){this._rows=[],this.header&&this.buildHeader(t),this.headerSummary&&this.buildSummaryItem(t,!1),this.buildItems(t),this.footer&&this.buildSummaryItem(t,!0),this.done()},r.prototype.addQuatation=function(t,e){return re.Utils.addQuatation(t,e===ht.ValueType.TEXT,this._exportOptions.replaceLfText,this._exportOptions.replaceCrText)},r.prototype.buildHeader=function(t){for(var e=[],i=this._cols,o=(this.indicator&&e.push(this.indicatorHead),i.length),n=0;n<o;n++){var r=i[n];e.push(this.addQuatation(r.header.displayText))}this._rows.push(e.join(","))},r.prototype.buildSummaryItem=function(t,e){var i=this._exportOptions,o=e?t.footers:t.headerSummaries;if(o.visible)for(var n=o.visibleCount,r=0;r<n;r++){for(var s=[],a=(this.indicator&&s.push(0==r?this.indicatorFoot:""),o.getVisible(r)),l=0,h=this._cols.length;l<h;l++){var d=this._cols[l],u=a.getCell(d.layout),c=u.getSummary(),_=u.value,d="number"==typeof _?isNaN(_)?u.text:String(_):_ instanceof Date?!i.datetimeCallback||(_=i.datetimeCallback(-1,d.name,_))instanceof Date?dt.DateTimeConverter.Default.getText(_):_:null==_?u.text||c.text:String(_);s.push(this.addQuatation(d))}this._rows.push(s.join(","))}},r.prototype.buildItems=function(t){for(var e=this.allItems?this.allItems.length:t.itemSource.itemCount,i=this.allItems,o=0;o<e;o++){var n=i?i[o]:t.getItem(o);this.buildRow(t,n)}},r.prototype.buildRow=function(t,e){var i=this._exportOptions,o=[];this.indicator&&(i=i.showIndicatorRow(t)?e.dataRow:this.indicatorNo++,o.push(i.toString()));for(var n=0,r=this._cols.length;n<r;n++){var s,a=this._cols[n],l=void 0;s=void 0,a instanceof lt.DataColumn&&(s=(l=a.getField())?(a=_t.DummyCellIndex.tempItem(t,e,a),t.getDisplayText(a)):""),o.push(this.addQuatation(s,l&&l.dataType))}this._rows.push(o.join(","))},r.prototype.buildGroupHeader=function(t,e){},r.prototype.buildGroupFooter=function(t,e){},r.prototype.buildMergedGroupHeader=function(t,e){},r.prototype.buildMergedGroupFooter=function(t,e){},r.prototype.buildTreeSheet=function(t){this._rows=[],this.header&&this.buildHeader(t),this.headerSummary&&this.buildSummaryItem(t,!1),this.buildTreeItems(t),this.footer&&this.buildSummaryItem(t,!0),this.done()},r.prototype.buildTreeItems=function(t){for(var e=this.allItems?this.allItems.length:t.itemCount,i=this.allItems,o=0;o<e;o++){var n=i?i[o]:t.getItem(o);if(!(n instanceof E.TreeItem))throw"Unkonw tree item type";this.buildTreeRow(t,n)}},r.prototype.buildTreeRow=function(t,e){this.buildRow(t,e)},r.prototype.save=function(){var t=this._exportOptions,e=t.fileName,i="\ufeff"+this._rows.join("\n"),o=this.grid.doc;t.done&&"function"==typeof t.done&&(t.target===Ft.ExportTarget.STREAM?t.done(i):t.done()),t.target==Ft.ExportTarget.LOCAL?this.saveLocal(e,i,o):t.target==Ft.ExportTarget.REMOTE&&this.saveServer(e,n.Base64.encode(i),t.url,o,t.params)},r);function r(){return o.call(this)||this}e.GridCsvExporter=i})),mi=(t(gi),gi.GridCsvExporter,e(function(t,i){Object.defineProperty(i,"__esModule",{value:!0});o=se.Base,ne.__extends(n,o),n.prototype._doDispose=function(){this._styles=null,o.prototype._doDispose.call(this)},_dp(n,"cssStyle",{get:function(){return this._styles}});var o,e=n;function n(t){var e=o.call(this)||this;return e._styles=null,e.message="",e.visible=!0,e.spaceTop=0,e.spaceBottom=0,e.height=-1,e.styleName="",t&&e.extend(t),e._styles=t&&t.styles?t.styles:null,e}i.DocumentTitle=e,i.VIS_DEFAULT="default",i.VIS_HIDDEN="hidden",i.VIS_VISIBLE="visible",i.INDICATOR_DEFAULT="default",i.INDICATOR_ITEM="item",i.INDICATOR_ROW="row",i.PIXELS_PER_CHAR=7,(h=i.ExportLayoutExpand||(i.ExportLayoutExpand={})).IGNORE="ignore",h.CURRENT="current",h.EXPAND="expand",h.COLLAPSE="collapse";r=Ft.ExportOptions,ne.__extends(s,r),s.prototype._doDispose=function(){this._documentTitle&&(this._documentTitle=this._documentTitle.dispose()),this._documentSubtitle&&(this._documentSubtitle=this._documentSubtitle.dispose()),this._documentTail&&(this._documentTail=this._documentTail.dispose()),r.prototype._doDispose.call(this)},_dp(s,"documentTitle",{get:function(){return this._documentTitle},set:function(t){this._documentTitle=new e(t)}}),_dp(s,"documentSubtitle",{get:function(){return this._documentSubtitle},set:function(t){this._documentSubtitle=new e(t)}}),_dp(s,"documentTail",{get:function(){return this._documentTail},set:function(t){this._documentTail=new e(t)}}),_dp(s,"protectProperties",{get:function(){return this.sheetProtect&&(this._protectProperties=this._protectProperties||{},re.Utils.extendObj({objects:"1",scenarios:"1"},this._protectProperties)),this._protectProperties},set:function(t){this._protectProperties=t?re.Utils.deepCopy(t):void 0}}),s.prototype.indicatorVisible=function(t){if(t)switch(this.indicator){case i.VIS_VISIBLE:return!0;case i.VIS_HIDDEN:return!1;default:i.VIS_DEFAULT;return t.rowIndicator.visible}return!1},s.prototype.checkBarVisible=function(t){if(t)switch(this.checkBar){case i.VIS_VISIBLE:return!0;case i.VIS_HIDDEN:return!1;default:i.VIS_DEFAULT;return t.checkBar.visible}return!1},s.prototype.headerVisible=function(t){if(t)switch(this.header){case i.VIS_VISIBLE:return!0;case i.VIS_HIDDEN:return!1;default:i.VIS_DEFAULT;return t.header.visible}return!1},s.prototype.headerSummaryVisible=function(t){if(t)switch(this.headerSummary){case i.VIS_VISIBLE:return!0;case i.VIS_HIDDEN:return!1;default:i.VIS_DEFAULT;return 0<t.headerSummaries.visibleCount}return!1},s.prototype.footerVisible=function(t){if(t)switch(this.footer){case i.VIS_VISIBLE:return!0;case i.VIS_HIDDEN:return!1;default:i.VIS_DEFAULT;return 0<t.footers.visibleCount}return!1},s.prototype.showIndicatorRow=function(t){if(t)switch(this.indicatorValue){case i.INDICATOR_ITEM:return!1;case i.INDICATOR_ROW:return!0;default:i.INDICATOR_DEFAULT;return t.rowIndicator.displayValue==oe.IndicatorValue.ROW}return!1},_dp(s,"yOffset",{get:function(){return null==this._yOffset?0:this._yOffset},set:function(t){this._yOffset=Math.floor(t)}}),_dp(s,"xOffset",{get:function(){return null==this._xOffset?0:this._xOffset},set:function(t){this._xOffset=Math.floor(t)}}),_dp(s,"xOffsetWidth",{get:function(){return null==this._xOffsetWidth?100:this._xOffsetWidth},set:function(t){this._xOffsetWidth=Math.floor(t)}});var r,a=s;function s(t){var e=r.call(this,t)||this;return e.nullDateText="",e.linear=!1,e.allColumns=!1,e.allItems=!0,e.onlyCheckedItems=!1,e.pagingAllItems=!1,e.indicator=i.VIS_DEFAULT,e.checkBar=i.VIS_HIDDEN,e.header=i.VIS_DEFAULT,e.footer=i.VIS_DEFAULT,e.headerSummary=i.VIS_DEFAULT,e.indicatorValue=i.INDICATOR_DEFAULT,e.checkMark="v",e.indenting=!0,e.separateRows=!1,e.lookupDisplay=!1,e.showLevelOutline=!1,e.applyFitStyle=!0,e.applyDynamicStyles=!1,e.applyDefaultColumnFormat=!1,e.applyFixed=!1,e.sheetName=null,e.exportSeriesColumn=!1,e.showColumns=[],e.hideColumns=[],e.hiddenColumns=[],e.exportLink=!1,e.exportTemplate=!1,e.sheetAttrs=null,e.stylePrefix="",e.layoutExpand=null,e.exportImage=void 0,e.exportLayout=void 0,e.userCells=void 0,e.userCellsCallback=void 0,e.sheetProtect=!1,e.protectPassword=void 0,e.extend(t),e}i.GridExportOptions=a;l=a,ne.__extends(d,l),_dp(d,"exportGrids",{get:function(){return this._grids}}),d.prototype._doDispose=function(){this._grids=null,l.prototype._doDispose.call(this)},d.prototype._parseGrids=function(t,e){var i=e.exportGrids;if(i&&Array.isArray(i))for(var o=0,n=i.length;o<n;o++){var r,s=(s=i[o].grid).$_handler?s:s._view,s=((r=new a(e)).assignFrom(i[o]),r.extend(i[o]),{grid:r.grid=s,sheetName:i[o].sheetName,options:r});this._grids.push(s)}else(r=new a(e)).extend(e),r.grid=t,this._grids.push({grid:t,sheetName:e.sheetName?String(e.sheetName):"sheet1",options:r})};var l,h=d;function d(t,e){var i=l.call(this,e)||this;return i._grids=[],i._parseGrids(t,e),i}i.GridMultiExportOptions=h})),yi=(t(mi),mi.DocumentTitle,mi.VIS_DEFAULT,mi.VIS_HIDDEN,mi.VIS_VISIBLE,mi.INDICATOR_DEFAULT,mi.INDICATOR_ITEM,mi.INDICATOR_ROW,mi.PIXELS_PER_CHAR,mi.ExportLayoutExpand,mi.GridExportOptions,mi.GridMultiExportOptions,e(function(t,e){Object.defineProperty(e,"__esModule",{value:!0});var i=re.Utils.hex,o=(n._parse=function(t,e,i,o){if(t){var n=t.length;if("#"==(t=t.trim().toLowerCase()).charAt(0))if(t=t.substr(1),6<=--n&&n<=8)e._b=re.Utils.toInt(t.substr(n-2,2),16),e._g=re.Utils.toInt(t.substr(n-4,2),16),e._r=re.Utils.toInt(t.substr(n-6,2),16),e._a=6==n?i?NaN:1:re.Utils.toInt(t.substr(0,n-6),16)/255;else{if(3!=n){if(o)throw"Invalid color value text: "+t;return!1}e._r=re.Utils.toInt(t.charAt(0)+t.charAt(0),16),e._g=re.Utils.toInt(t.charAt(1)+t.charAt(1),16),e._b=re.Utils.toInt(t.charAt(2)+t.charAt(2),16),e._a=i?NaN:1}else if(0==t.indexOf("rgba(")&&")"==t.charAt(n-1)){var r=(t=t.substring(5,n-1)).split(",");e._r=re.Utils.toInt(r[0]),e._g=re.Utils.toInt(r[1]),e._b=re.Utils.toInt(r[2]),e._a=re.Utils.toFloat(r[3])}else{if(0!=t.indexOf("rgb(")||")"!=t.charAt(n-1)){if(s.hasOwnProperty(t))return r=s[t],e._r=r._r,e._g=r._g,e._b=r._b,e._a=r._a,r;if(o)throw new Error("Invalid color text: "+t);return!1}var r=(t=t.substring(4,n-1)).split(",");e._r=re.Utils.toInt(r[0]),e._g=re.Utils.toInt(r[1]),e._b=re.Utils.toInt(r[2]),e._a=i?NaN:1}return!0}return!1},n.prototype.toHex=function(){return""+i(Math.floor(255*this._a))+i(this._r)+i(this._g)+i(this._b)},n.prototype.toColorHex=function(){return""+i(this._r)+i(this._g)+i(this._b)},n.prototype.toString=function(){return"#"+i(Math.floor(255*this._a))+i(this._r)+i(this._g)+i(this._b)},n);function n(t,e){void 0===t&&(t=null),void 0===e&&(e=!1),this._r=0,this._g=0,this._b=0,this._a=0,"string"==typeof t?n._parse(t,this,e,!1):t instanceof n?(this._r=t._r,this._g=t._g,this._b=t._b,this._a=t._a):isNaN(t)?(this._r=this._g=this._b=0,this._a=e?NaN:1):(this._a=(t>>>24)/255,this._r=(16711680&t)>>16,this._g=(65280&t)>>8,this._b=255&t)}var s={transparent:new(e.Color=o)("#00000000"),ltGray:new o("#d3d3d3"),ltgray:new o("#d3d3d3"),aliceblue:new o("#f0f8ff"),antiquewhite:new o("#faebd7"),aqua:new o("#00ffff"),aquamarine:new o("#7fffd4"),azure:new o("#f0ffff"),beige:new o("#f5f5dc"),bisque:new o("#ffe4c4"),black:new o("#000000"),blanchedalmond:new o("#ffebcd"),blue:new o("#0000ff"),blueviolet:new o("#8a2be2"),brown:new o("#a52a2a"),burlywood:new o("#deb887"),cadetblue:new o("#5f9ea0"),chartreuse:new o("#7fff00"),chocolate:new o("#d2691e"),coral:new o("#ff7f50"),cornflowerblue:new o("#6495ed"),cornsilk:new o("#fff8dc"),crimson:new o("#dc143c"),cyan:new o("#00ffff"),darkblue:new o("#00008b"),darkcyan:new o("#008b8b"),darkgoldenrod:new o("#b8860b"),darkgray:new o("#a9a9a9"),darkgreen:new o("#006400"),darkgrey:new o("#a9a9a9"),darkkhaki:new o("#bdb76b"),darkmagenta:new o("#8b008b"),darkolivegreen:new o("#556b2f"),darkorange:new o("#ff8c00"),darkorchid:new o("#9932cc"),darkred:new o("#8b0000"),darksalmon:new o("#e9967a"),darkseagreen:new o("#8fbc8f"),darkslateblue:new o("#483d8b"),darkslategray:new o("#2f4f4f"),darkslategrey:new o("#2f4f4f"),darkturquoise:new o("#00ced1"),darkviolet:new o("#9400d3"),deeppink:new o("#ff1493"),deepskyblue:new o("#00bfff"),dimgray:new o("#696969"),dimGray:new o("#696969"),dimgrey:new o("#696969"),dodgerblue:new o("#1e90ff"),firebrick:new o("#b22222"),floralwhite:new o("#fffaf0"),forestgreen:new o("#228b22"),fuchsia:new o("#ff00ff"),gainsboro:new o("#dcdcdc"),ghostwhite:new o("#f8f8ff"),goldenrod:new o("#daa520"),gold:new o("#ffd700"),gray:new o("#808080"),green:new o("#008000"),greenyellow:new o("#adff2f"),grey:new o("#808080"),honeydew:new o("#f0fff0"),hotpink:new o("#ff69b4"),indianred:new o("#cd5c5c"),indigo:new o("#4b0082"),ivory:new o("#fffff0"),khaki:new o("#f0e68c"),lavenderblush:new o("#fff0f5"),lavender:new o("#e6e6fa"),lawngreen:new o("#7cfc00"),lemonchiffon:new o("#fffacd"),lightblue:new o("#add8e6"),lightcoral:new o("#f08080"),lightcyan:new o("#e0ffff"),lightgoldenrodyellow:new o("#fafad2"),lightgray:new o("#d3d3d3"),lightgreen:new o("#90ee90"),lightgrey:new o("#d3d3d3"),lightpink:new o("#ffb6c1"),lightsalmon:new o("#ffa07a"),lightseagreen:new o("#20b2aa"),lightskyblue:new o("#87cefa"),lightslategray:new o("#778899"),lightslategrey:new o("#778899"),lightsteelblue:new o("#b0c4de"),lightyellow:new o("#ffffe0"),lime:new o("#00ff00"),limegreen:new o("#32cd32"),linen:new o("#faf0e6"),magenta:new o("#ff00ff"),maroon:new o("#800000"),mediumaquamarine:new o("#66cdaa"),mediumblue:new o("#0000cd"),mediumorchid:new o("#ba55d3"),mediumpurple:new o("#9370db"),mediumseagreen:new o("#3cb371"),mediumslateblue:new o("#7b68ee"),mediumspringgreen:new o("#00fa9a"),mediumturquoise:new o("#48d1cc"),mediumvioletred:new o("#c71585"),midnightblue:new o("#191970"),mintcream:new o("#f5fffa"),mistyrose:new o("#ffe4e1"),moccasin:new o("#ffe4b5"),navajowhite:new o("#ffdead"),navy:new o("#000080"),oldlace:new o("#fdf5e6"),olive:new o("#808000"),olivedrab:new o("#6b8e23"),orange:new o("#ffa500"),orangered:new o("#ff4500"),orchid:new o("#da70d6"),palegoldenrod:new o("#eee8aa"),palegreen:new o("#98fb98"),paleturquoise:new o("#afeeee"),palevioletred:new o("#db7093"),papayawhip:new o("#ffefd5"),peachpuff:new o("#ffdab9"),peru:new o("#cd853f"),pink:new o("#ffc0cb"),plum:new o("#dda0dd"),powderblue:new o("#b0e0e6"),purple:new o("#800080"),rebeccapurple:new o("#663399"),red:new o("#ff0000"),rosybrown:new o("#bc8f8f"),royalblue:new o("#4169e1"),saddlebrown:new o("#8b4513"),salmon:new o("#fa8072"),sandybrown:new o("#f4a460"),seagreen:new o("#2e8b57"),seashell:new o("#fff5ee"),sienna:new o("#a0522d"),silver:new o("#c0c0c0"),skyblue:new o("#87ceeb"),slateblue:new o("#6a5acd"),slategray:new o("#708090"),slategrey:new o("#708090"),snow:new o("#fffafa"),springgreen:new o("#00ff7f"),steelblue:new o("#4682b4"),tan:new o("#d2b48c"),teal:new o("#008080"),thistle:new o("#d8bfd8"),tomato:new o("#ff6347"),turquoise:new o("#40e0d0"),violet:new o("#ee82ee"),wheat:new o("#f5deb3"),white:new o("#ffffff"),whitesmoke:new o("#f5f5f5"),yellow:new o("#ffff00"),yellowgreen:new o("#9acd32")}})),mt=(t(yi),yi.Color,e(function(t,e){Object.defineProperty(e,"__esModule",{value:!0});s.parseDocumentStyles=function(t){for(var e,i,o={},n=t.styleSheets,r=0,s=n.length;r<s;r++){e=n[r];try{e.rules?i=e.rules:e.cssRules&&(i=e.cssRules)}catch(t){continue}if(i)for(var a=i.length;a--;){var l,h=(l=i[a]).selectorText;if(h)if(-1<h.indexOf(","))for(var d=h.split(","),u=d.length;u--;){var c=d[u].trim();c&&(o[c]=l.style)}else o[l.selectorText]=l.style}}return o},s.extendCssStyle=function(t,e){for(var i=0,o=t.length;i<o;i++){var n=t[i];"inherit"==t[n]||re.Utils.included(n,"background-color")&&re.Utils.included(t[n],"none","initial","unset")||(e[n]||(e[e.length]=n,e.length++),e[n]=t[n])}},s.$_getSelectorStyle=function(t,e){return t[e]},s.getSelectorStyle=function(t,e){if(s.prefix){var i=[],o={length:0};i.push(s.$_getSelectorStyle(t,e)),i.push(s.$_getSelectorStyle(t,s.prefix+e));for(var n=0,r=i.length;n<r;n++)i[n]&&s.extendCssStyle(i[n],o);return o}return s.$_getSelectorStyle(t,e)};var w=s;function s(){}function i(t,e){this._grid=t,this._exportOptions=e,this._exportLayout=e.exportLayout,this._dataColumns=[],this._sparkColumns={},this.parse()}function o(){}function n(){this._contentTypes={}}e.CssFactory=w,i.prototype.dispose=function(){this._headerCells=null,this._dataCells=null,this._dataColumns=null,this._sparkColumns=null,this._exportLayout=null,this._layout=this._layout&&this._layout.dispose()},_dp(i,"grid",{get:function(){return this._grid}}),_dp(i,"colCount",{get:function(){var t=this._layout&&this._layout._dataCells;return t&&t.length?t[0].length:0}}),_dp(i,"headerRowCount",{get:function(){return(this._layout&&this._layout._headerCells).length}}),_dp(i,"dataRowCount",{get:function(){return(this._layout&&this._layout._dataCells).length}}),_dp(i,"sparkColumns",{get:function(){return this._sparkColumns}}),_dp(i,"documentCssStyles",{get:function(){return this._documentCssStyles}}),_dp(i,"groupModel",{get:function(){return this._groupModel}}),i.prototype.getHeader=function(t,e){return this._headerCells[t][e]},i.prototype.getItem=function(t,e){return this._dataCells[t][e]},i.prototype.getFooterItem=function(t,e){return this._footerCells[t][e]},i.prototype.getSummaryItem=function(t,e){return this._summaryCells[t][e]},i.prototype.clearDataSpanned=function(){for(var t=this._dataCells,e=0;e<t.length;e++)for(var i=0;i<t[e].length;i++)t[e][i].spanned=!1},i.prototype.prepareLayout=function(){var t,e=this.grid,i=this._exportOptions,o=e.activeCellLayout;if(i.linear){for(var n=o.getDataColumns(!1),r=[],s=0;s<=n.length-1;s++){var a=n[s];((a.visible&&a.layout.visible||i.allColumns)&&i.hideColumns.indexOf(a.name)<0||0<=i.showColumns.indexOf(a.name))&&r.push({column:a.name,width:a.layout.domWidth})}t=new ct.GridCellLayout(e).load(r)}else t=i.exportLayout?new ct.GridCellLayout(e).load(i.exportLayout):new ct.GridCellLayout(e).load(e.activeCellLayout.getLayout(!0,i.applyFitStyle,i.allColumns,i.showColumns,i.hideColumns,i.layoutExpand));return t},i.prototype.parse=function(){var t=this._grid,e=this._layout=this.prepareLayout(),i=this._exportOptions.stylePrefix;w.prefix=i?i.trim()+" ":void 0,e.$_refresh2(t._columns,t.displayOptions.minCellWidth),e.$_prepareLayout(t,t.fixedOptions.colCount,t.fixedOptions.rightCount),e.$_prepareMerges(t),this._setCellInfo(e._headerCells,this._headerCells=[]),this._setCellInfo(e._dataCells,this._dataCells=[]),this._setFooterInfo(e._dataCells,t.footers.visibleCount,this._footerCells=[]),this._setFooterInfo(e._dataCells,t.headerSummaries.visibleCount,this._summaryCells=[]),this._documentCssStyles=w.parseDocumentStyles(t.doc),this._setDataColumns(e._dataCells),this._setSparkInfo(this._dataCells)},i.prototype._setCellInfo=function(t,e){for(var i=0;i<t.length;i++){for(var o=[],n=0;n<t[i].length;n++)o.push({layout:t[i][n],spanned:!1});e.push(o)}},i.prototype._setFooterInfo=function(t,e,i){for(var o=0;o<e;o++)for(var n=0;n<t.length;n++){for(var r=[],s=0;s<t[n].length;s++)r.push({footerIndex:o,layout:t[n][s],spanned:!1});i.push(r)}},i.prototype.setGroupFooterItms=function(t,e,i){this._groupModel=t;for(var o,n,r=this._groupFooterCells=[],s=this._dataCells,a=!1,l=(0<t.footerCount||(o=t.provider._expandedAdornments,n=t.provider._collapsedAdornments,a=i?e&&!t.expanded&&re.Utils.included(n,ht.RowGroupAdornments.SUMMARY,ht.RowGroupAdornments.FOOTER):(a=t.expanded&&o===ht.RowGroupAdornments.SUMMARY)||!e&&!t.expanded&&re.Utils.included(n,ht.RowGroupAdornments.SUMMARY,ht.RowGroupAdornments.FOOTER)),a?t.allFooterCount:t.footerCount),h=0;h<l;h++)for(var d=a?t._allFooters[h]:t.getFooter(h),u=0;u<s.length;u++){for(var c=[],_=0;_<s[u].length;_++)c.push({footerIndex:d.footerIndex,layout:s[u][_].layout,spanned:!1});r.push(c)}},i.prototype.getGroupFooterCells=function(){return this._groupFooterCells},i.prototype._setDataColumns=function(t){var e;this._dataColumns=[];for(var i=0,o=t.length;i<o;i++){for(var n=[],r=0,s=t[i].length;r<s;r++)(e=t[i][r]).isProxy&&(e=e.source),n.push(e.firstColumn);this._dataColumns.push(n)}},i.prototype._setSparkInfo=function(t){var e=this.documentCssStyles;this._sparkColumns=[];for(var i=0,o=t.length;i<o;i++)for(var u,c,n,r,s,a,l,h,d,_,p,f,g,m,y,v=0,C=t[i].length;v<C;v++)(y=(y=(m=t[i][v]).layout)instanceof ct.CellLayoutColumnItem?y.firstColumn:null)instanceof lt.SeriesColumn&&(g=y.renderer)&&ft.SparkChartRenderer.interfaced(g)&&(u=y.fields,c=y.grid,n=0<u.length&&function(t,e){var i={start:void 0,end:void 0,row:void 0},o=u[0],n=u[u.length-1],r=c.columnByField(o),s=c.columnByField(n);if(!r||!s)return null;for(var a=0,l=e.length;a<l;a++)for(var h=0,d=e[a].length;h<d;h++)r==e[a][h]&&(i.start=h,i.row=a-t),s==e[a][h]&&(i.end=h);return i}(i,this._dataColumns))&&(f=g.firstStyle,s=g.lastStyle,_=g.highStyle,p=g.lowStyle,l=a=r=void 0,l=ft.SparkLineRenderer.interfaced(g)?(r="line",s=s||ft.SparkLineRenderer.LAST_STYLE,_=_||ft.SparkLineRenderer.HIGH_STYLE,p=p||ft.SparkLineRenderer.LOW_STYLE,a=(h=g.pointStyle?w.getSelectorStyle(e,"."+g.pointStyle):void 0)?new yi.Color(h.fill).toHex():void 0,(h=w.getSelectorStyle(e,"."+ft.SparkLineRenderer.CHART_STYLE))?new yi.Color(h.stroke).toHex():void 0):(d=void 0,ft.SparkColumnRenderer.interfaced(g)?(r="column",d=ft.SparkColumnRenderer.CHART_STYLE,s=s||ft.SparkColumnRenderer.LAST_STYLE,_=_||ft.SparkColumnRenderer.HIGH_STYLE,p=p||ft.SparkColumnRenderer.LOW_STYLE):(r="stacked",d=ft.SparkWinLossRenderer.CHART_STYLE),h=w.getSelectorStyle(e,"."+d),new yi.Color(h.fill).toHex()),g=_?w.getSelectorStyle(e,"."+_):void 0,d=p?w.getSelectorStyle(e,"."+p):void 0,_=f?w.getSelectorStyle(e,"."+f):void 0,p=s?w.getSelectorStyle(e,"."+s):void 0,f={type:r,colors:{colorHigh:g&&g.fill?new yi.Color(g.fill).toHex():void 0,colorLow:d&&d.fill?new yi.Color(d.fill).toHex():void 0,colorFirst:_&&_.fill?new yi.Color(_.fill).toHex():void 0,colorLast:p&&p.fill?new yi.Color(p.fill).toHex():void 0,colorMarkers:a,colorSeries:l},sparkLines:{},range:n},m.sparkLineGroup=f,this._sparkColumns[y.$_hash]=m)},e.ExportPreparer=i,o.convertNumberFormat=function(t){return 0<(t=0<t.indexOf(";")?t.split(";")[0]:t).indexOf(".#")?t.replace(".#",".0"):t},o.convertDateFormat=function(t){for(var e="",i=t.length,o=0;o<i;o++){var n=t.charAt(o);switch(n){case"y":case"d":case"m":case"s":case":":e+=n;break;case"M":e+="m";break;case"a":e+="AM/PM";break;case"H":e+="h",(i-1<=o||"H"!=t.charAt(o+1))&&(e+="h");break;case"h":0!=o&&"h"==t.charAt(o-1)||(e+="h");break;case"S":break;case".":case"/":case"-":case" ":(i-1<=o||"S"!=t.charAt(o+1))&&(e=e+"\\"+n);break;default:e=e+'"'+n+'"'}}return e},e.ExcelFormatConverter=o,n.prototype.executeDownLoad=function(t,e,i){for(var o=[],n=Object.keys(e),r=0;r<n.length;r++){var s=n[r],s=e[s];o.push(this.download(s).then(function(l){return new Promise(function(t,e){for(var i=new Uint8Array(l.buffer),o=i.byteLength,n="",r=0;r<o;r++)n+=String.fromCharCode(i[r]);var s="data:"+l.type+";base64,"+re.Base64.btoa(n),a=document.createElement("img");a.style.position="fixed",a.style.top="-10000px",a.style.left="-10000px",a.src=s,a.onload=function(){l.width=a.width,l.height=a.height,a.src="",t(l)},a.onerror=function(){e()}})}).catch(function(){}))}Promise.all(o).catch(function(){}).finally(function(){i&&i.call(t,e)})},n.prototype.getContentTypes=function(){return this._contentTypes},n.prototype.getExtension=function(t){var e,i;if(t)return e="",i=t.toLowerCase().split(/\s*(?:;|$)\s*/),(e=(i=re.Utils.find(i,function(t){return 0===t.indexOf("image")}))?0<=i.indexOf("svg")?"svg":i.substring(6):e)&&!this._contentTypes.hasOwnProperty(e)&&(this._contentTypes[e]=t),e},n.prototype.download=function(o){var n=this;return new Promise(function(e,t){var i=new XMLHttpRequest;i.open("GET",o.url),i.onload=function(){var t;200===i.status?(t=o.type=i.getResponseHeader("content-type"),t=n.getExtension(t),o.fileName=o.id+"."+t,o.buffer=i.response,e(o)):e(null)},i.onerror=function(){t()},i.responseType="arraybuffer",i.send()})},e.ImageFileDownLoader=n,e.encryptExcelPassword=function(t){var e,i=0,o=function(t){for(var e=[],i=t.split(""),o=0;o<i.length;++o)e[o]=i[o].charCodeAt(0);return e}(t),n=o.length+1;t=n,(e="undefined"!=typeof Buffer?Buffer.alloc?Buffer.alloc(t):new Buffer(t):new("undefined"!=typeof Uint8Array?Uint8Array:Array)(t))[0]=o.length;for(var r=1;r<n;++r)e[r]=o[r-1];for(r=n-1;0<=r;--r)i=((0==(16384&i)?0:1)|i<<1&32767)^e[r];return(52811^i).toString(16).toUpperCase()}})),yt=(t(mt),mt.CssFactory,mt.ExportPreparer,mt.ExcelFormatConverter,mt.ImageFileDownLoader,mt.encryptExcelPassword,e(function(t,e){Object.defineProperty(e,"__esModule",{value:!0});var i=/\<|\>|\&|\"/;function n(t){return i.test(t)?t.replace(/\&/g,"&amp;").replace(/\</g,"&lt;").replace(/\>/g,"&gt;").replace(/\"/g,"&quot;"):t}function r(){}r.createDocument=function(t,e){var i,o={name:t,attrs:{}};for(i in e)o.attrs[i]=e[i];return o},r.removeItem=function(t){if(t.texts=null,t.attrs=null,t.childs)for(var e=t.childs.length;e--;)r.removeItem(t.childs[e]),delete t.childs[e];t.childs=null},r.addChild=function(t,e,i,o){e={name:e,attrs:i};return o&&r.addText(e,n(o)),r.addChildElement(t,e),e},r.addChildElement=function(t,e){t.childs||(t.childs=[]),t.childs.push(e)},r.addProperty=function(t,e,i){t.attrs||(t.attrs={}),t.attrs[e]=n(i)},r.addText=function(t,e){t.texts||(t.texts=[]),t.texts.push(e)},r.toString=function(t){var e,i="<"+t.name;for(e in t.attrs)i+=" "+e+'="'+t.attrs[e]+'"';if(t.childs||t.texts){if(i+=">",t.texts)for(var o=0,n=t.texts.length;o<n;o++)i+=t.texts[o];if(t.childs)for(o=0,n=t.childs.length;o<n;o++)i+=r.toString(t.childs[o]);i+="</"+t.name+">"}else i+="/>";return i},e.TextXmlManager=r})),vi=(t(yt),yt.TextXmlManager,e(function(V,t){Object.defineProperty(t,"__esModule",{value:!0});r.toColCaption=function(t){for(var e="";0<=t;)e=String.fromCharCode(t%26+65)+e,t=Math.floor(t/26)-1;return e},r.toRange=function(t,e,i,o,n){void 0===o&&(o=1),void 0===n&&(n=1);e+=1;return(i=void 0===i?!1:i)?r.toColCaption(t)+e+":"+r.toColCaption(t+o-1)+(e+n-1):r.toColCaption(t)+e},r.XML_HEAD_STRING='<?xml version="1.0" encoding="UTF-8" standalone="yes"?>';var C=r;function r(){}t.ExcelUtil=C;e.prototype.dispose=function(){for(var t in this._strings=null,this._stringMap)delete this._stringMap[t];this._stringMap=null},_dp(e,"count",{get:function(){return this._count}}),e.prototype.uniqueCount=function(){return this._nextId},e.prototype.add=function(t){this._count++;var e=this._stringMap[t];return void 0===e&&(e=this._nextId++,this._stringMap[t]=e,this._strings[e]=t),e},e.prototype.getIndex=function(t){return this._stringMap[t]},e.prototype.createPart=function(){for(var t=yt.TextXmlManager.createDocument("sst",{xmlns:"http://schemas.openxmlformats.org/spreadsheetml/2006/main"}),e=(yt.TextXmlManager.addProperty(t,"count",this._count.toString()),yt.TextXmlManager.addProperty(t,"uniqueCount",this._nextId.toString()),/^\s|\s$|\r|\n|\r\n/),i=0,o=this._strings.length;i<o;i++){var n=yt.TextXmlManager.addChild(t,"si"),r=this._strings[i].replace(/([\u0000-\u0008\u000b\u000c\u000e-\u001F])/g,function(t){return"_x"+("0000"+t.charCodeAt(0).toString(16)).substr(-4)+"_"}),n=yt.TextXmlManager.addChild(n,"t",null,r);e.test(this._strings[i])&&yt.TextXmlManager.addProperty(n,"xml:space","preserve")}var s=yt.TextXmlManager.toString(t);return C.XML_HEAD_STRING+s};var B=e;function e(){this._nextId=0,this._count=0,this._stringMap={},this._strings=[]}_dp($,"id",{get:function(){return this._id}}),_dp($,"url",{get:function(){return this._url}});var N=$;function $(t,e){this._id=t,this._url=e}i.prototype.add=function(t){var e;return this._images.indexOf(t)<0&&(e=this._images.push(t),this._imageMap[t]=new N(e,t)),t},i.prototype.getImageMap=function(){return this._imageMap},i.prototype.getImage=function(t){return this._imageMap&&this._imageMap[t]},i.prototype.getImageId=function(t){return this._imageMap&&this._imageMap[t]&&this._imageMap[t].id};var A=i;function i(){this._images=[],this._imageMap={}}_dp(o,"col",{get:function(){return this._col.toString()}}),_dp(o,"row",{get:function(){return this._row.toString()}}),_dp(o,"toCol",{get:function(){return(this._col+this._cols-1).toString()}}),_dp(o,"toRow",{get:function(){return this._toRow.toString()}}),_dp(o,"fromX",{get:function(){return Math.round((null!=this._fromX?this._fromX:2)*o.emu).toString()}}),_dp(o,"fromY",{get:function(){return Math.round((null!=this._fromY?this._fromY:2)*o.emu).toString()}}),_dp(o,"colOff",{get:function(){return Math.round(this._xOffset*o.emu).toString()}}),_dp(o,"rowOff",{get:function(){return Math.round(this._yOffset*o.emu).toString()}}),_dp(o,"imageUrl",{get:function(){return this._imageUrl}}),o.prototype.calcPosition=function(t,e){for(var i,o=this._rHeight,n=this._rWidth,o=(null!=o&&0<o&&null!=n&&0<n?(t=n,e=o):null!=o&&0<o?(i=o/e,e=o,t*=i):null!=n&&0<n&&(i=n/t,t=n,e*=i),this._cWidth=this._cWidth<0?t:this._cWidth,this._cHeight=this._cHeight<0?e:this._cHeight,i=1,(this._cWidth<t||this._cHeight<e)&&(e*=i=Math.min((this._cWidth-2)/t,(this._cHeight-2)/e),t*=i),1),r=(this._location===ht.IconLocation.CENTER?o=Math.max(1,this._cWidth/2-t/2):this._location===ht.IconLocation.RIGHT&&(o=this._cWidth-t-1),this._cHeight/2-e/2),s=this._row,a=s,l=r,h=r+e,d=1;d<this._cHeights.length;d++)r>=this._cHeights[d]&&(s++,l-=this._cHeights[d]-this._cHeights[d-1]),r+e>this._cHeights[d]&&(a++,h-=this._cHeights[d]-this._cHeights[d-1]);this._row=s,this._toRow=a,this._fromX=o,this._fromY=Math.max(1,l),this._xOffset=this._fromX+t,this._yOffset=Math.min(h,this._cHeight-1)},o.emu=9525;var H=o;function o(t,e,i,o,n,r){switch(this._cols=1,this._cHeights=[],this._col=t,this._row=e,this._cWidth=7*i,this._cHeight=0<o?o/.75:-1,this._imageUrl=r,n){case ht.IconLocation.CENTER:this._location=ht.IconLocation.CENTER;break;case ht.IconLocation.RIGHT:case ht.IconLocation.RIGHT_EDGE:this._location=ht.IconLocation.RIGHT;break;default:this._location=ht.IconLocation.LEFT}}n.prototype.dispose=function(){return null},_dp(n,"fileName",{get:function(){return"drawing"+this._index+".xml"}}),_dp(n,"relationId",{get:function(){return"rId"+this._rId}}),_dp(n,"rId",{set:function(t){this._rId=t}}),n.prototype.createPart=function(){for(var t=yt.TextXmlManager,e=t.createDocument("xdr:wsDr",{"xmlns:xdr":"http://schemas.openxmlformats.org/drawingml/2006/spreadsheetDrawing","xmlns:a":"http://schemas.openxmlformats.org/drawingml/2006/main"}),i=this._infos,o=0;o<i.length;o++){var n,r,s=i[o],a=this._book.getExcelImage(s.imageUrl);a&&a.fileName&&((n=this._sheet.getMergeInfo(s.row,s.col))&&(s._cols=n.cols,s._cHeight=n.height,s._cHeights=n.heights.slice()),s.calcPosition(a.width,a.height),n=t.addChild(e,"xdr:twoCellAnchor",{editAs:"oneCell"}),a=t.addChild(n,"xdr:from"),t.addChild(a,"xdr:col",null,s.col),t.addChild(a,"xdr:colOff",null,s.fromX),t.addChild(a,"xdr:row",null,s.row),t.addChild(a,"xdr:rowOff",null,s.fromY),a=t.addChild(n,"xdr:to"),t.addChild(a,"xdr:col",null,s.toCol),t.addChild(a,"xdr:colOff",null,s.colOff),t.addChild(a,"xdr:row",null,s.toRow),t.addChild(a,"xdr:rowOff",null,s.rowOff),a=t.addChild(n,"xdr:pic"),r=t.addChild(a,"xdr:nvPicPr"),t.addChild(r,"xdr:cNvPr",{id:o+2,name:"picture "+o}),r=t.addChild(r,"xdr:cNvPicPr"),t.addChild(r,"a:picLocks",{noChangeAspect:"1"}),r=t.addChild(a,"xdr:blipFill"),s=t.addChild(r,"a:blip",{"xmlns:r":"http://schemas.openxmlformats.org/officeDocument/2006/relationships","r:embed":"rId"+this._book.getImageIndex(s.imageUrl)}),s=t.addChild(s,"a:extLst"),s=t.addChild(s,"a:ext",{uri:"{28A0092B-C50C-407E-A947-70E740481C1C}"}),t.addChild(s,"a14:useLocalDpi",{"xmlns:a14":"http://schemas.microsoft.com/office/drawing/2010/main",val:"0"}),t.addChild(t.addChild(r,"a:stretch"),"a:fillRect"),s=t.addChild(a,"xdr:spPr"),r=t.addChild(s,"a:xfrm"),t.addChild(r,"a:off",{x:"1",y:"1"}),t.addChild(r,"a:ext",{cx:"1181100",cy:"1189663"}),t.addChild(t.addChild(s,"a:prstGeom",{prst:"rect"}),"a:avLst"),t.addChild(n,"xdr:clientData"))}var l=yt.TextXmlManager.toString(e);return C.XML_HEAD_STRING+l},n.prototype.add=function(t,e,i,o,n,r,s,a){t=new H(t,e,i,o,n,r);return t._rWidth=s,t._rHeight=a,this._infos.push(t),t},n.prototype.createSheetRel=function(){var t=yt.TextXmlManager.createDocument("Relationships",{xmlns:"http://schemas.openxmlformats.org/package/2006/relationships"}),e=yt.TextXmlManager.addChild(t,"Relationship",{Type:"http://schemas.openxmlformats.org/officeDocument/2006/relationships/drawing"}),e=(yt.TextXmlManager.addProperty(e,"Id",this.relationId),yt.TextXmlManager.addProperty(e,"Target","../drawings/"+this.fileName),yt.TextXmlManager.toString(t));return C.XML_HEAD_STRING+e},n.prototype.createRel=function(){for(var e=[],t=(this._infos.forEach(function(t){e.indexOf(t.imageUrl)<0&&e.push(t.imageUrl)}),yt.TextXmlManager.createDocument("Relationships",{xmlns:"http://schemas.openxmlformats.org/package/2006/relationships"})),i=0;i<e.length;i++){var o,n=e[i],r=this._book.getExcelImage(n);r&&r.fileName&&(o=yt.TextXmlManager.addChild(t,"Relationship",{Type:"http://schemas.openxmlformats.org/officeDocument/2006/relationships/image"}),yt.TextXmlManager.addProperty(o,"Id","rId"+this._book.getImageIndex(n).toString()),yt.TextXmlManager.addProperty(o,"Target","../media/"+r.fileName))}var s=yt.TextXmlManager.toString(t);return C.XML_HEAD_STRING+s};var U=n;function n(t,e,i){this._infos=[],this._book=t,this._sheet=e,this._index=i}a.EqualsById=function(t,e){return!t&&!e||!(!t&&e||t&&!e)&&t._id==e.id},_dp(a,"id",{get:function(){return this._id}}),a.prototype.dispose=function(){};var s=a;function a(t){this._id=t}h.prototype.dispose=function(){for(var t=this._items.length;t--;)this._items[t].dispose();this._items=null},h.prototype.getIndexer=function(){return this._indexer++},h.prototype.create=function(){for(var t,e=[],i=0;i<arguments.length;i++)e[i]=arguments[i];for(var o=this._items.length;o--;)if((t=this._items[o]).equals.apply(t,e))return t;return t=this.createInstance.apply(this,e),this._items.push(t),t},h.prototype.createUnique=function(){for(var t=[],e=0;e<arguments.length;e++)t[e]=arguments[e];var i=this.createInstance.apply(this,t);return this._items.push(i),i};var l=h;function h(){this._items=[],this._indexer=0}G=s,ne.__extends(d,G),d.prototype.assignFrom=function(t){this._name=this._name||t._name,this._size=this._size||t._size,this._color=this._color||t._color,this._bold=(null==this._bold?t:this)._bold,this._italic=(null==this._italic?t:this)._italic,this._underline=(null==this._underline?t:this)._underline},d.prototype.equalsObj=function(t){return this._name==t._name&&this._size==t._size&&this._color==t._color&&this._bold==t._bold&&this._italic==t._italic&&this._underline==t._underline},d.prototype.equals=function(t,e,i,o,n,r){return void 0===e&&(e=10),void 0===i&&(i="ff000000"),void 0===o&&(o=!1),void 0===n&&(n=!1),void 0===r&&(r=!1),this._name==(t=void 0===t?"Tahoma":t)&&this._size==e&&this._color==i&&this._bold==o&&this._italic==n&&this._underline==r},d.prototype.toXml=function(t,e){ut.XmlUtils.addChildWithAttr(t,e,"sz","val",this._size||10),ut.XmlUtils.addChildWithAttr(t,e,"name","val",this._name||"Calibri"),ut.XmlUtils.addChildWithAttr(t,e,"color","rgb",this._color||"ff000000"),ut.XmlUtils.addChildWithAttr(t,e,"b","val",this._bold?"true":"false"),ut.XmlUtils.addChildWithAttr(t,e,"i","val",this._italic?"true":"false"),this._underline&&ut.XmlUtils.addChild(t,e,"u")};var G,W=d;function d(t,e,i,o,n,r,s){void 0===e&&(e="Tahoma");t=G.call(this,t)||this;return t._bold=void 0,t._italic=void 0,t._underline=void 0,t._name=e,t._size=i,t._color=o,t._bold=n,t._italic=r,t._underline=s,t}j=l,ne.__extends(u,j),u.prototype.createInstance=function(t,e,i,o,n,r){return new W(this.getIndexer(),t,e,i,o,n,r)},u.prototype.createFromCss=function(t){var e=(e=t["font-family"])?(e=-1<e.indexOf(",")?e.split(",")[0]:e).replace(/\"/g,""):void 0,i=this.$_convertUnit(t["font-size"]),i=isNaN(i)?void 0:72*i/96,o=(o=t.color)&&("#"==o.charAt(0)?t.color:new yi.Color(o).toColorHex()),n="bold"==t["font-weight"],r="italic"==t["font-style"],t="underline"==t["font-decoration"];return this.create(e,i,o,n,r,t)},u.prototype.toXml=function(t,e){for(var i=this._items.length,o=0;o<i;o++){var n=ut.XmlUtils.addChild(t,e,"font");this._items[o].toXml(t,n)}ut.XmlUtils.setAttr(e,"count",i)},u.prototype.$_convertUnit=function(t){if(null!=t)return"string"==typeof t?0<t.indexOf("px")?parseFloat(t):0<t.indexOf("pt")?Math.round(1.3333*parseFloat(t)):0<t.indexOf("em")?parseFloat(t)*this._defFontSize:12:parseInt(t)};var j,z=u;function u(t){var e=j.call(this)||this,t=re.getWin(t).getComputedStyle(t);return e._defFontSize=e.$_convertUnit(t.fontSize||"16px"),e}Y=s,ne.__extends(c,Y),c.prototype.assignFrom=function(t){this._pattern=t._pattern||this._pattern,this._color=t._color||this._color,this._tint=t._tint||this._tint,this._linear=(null==t._linear?this:t)._linear,this._color2=t._color2||this._color2,this._degree=t._degree||this._degree},c.prototype.equalsObj=function(t){return this._pattern==t._pattern&&this._color==t._color&&this._color2==t._color2&&this._linear==t._linear&&this._degree==t._degree&&this._tint==t._tint},c.prototype.equals=function(t,e,i,o,n,r){return void 0===i&&(i=0),void 0===o&&(o=!1),void 0===r&&(r=90),this._pattern==(t=void 0===t?"solid":t)&&this._color==e&&this._color2==n&&this._linear==o&&this._degree==r&&this._tint==i},c.prototype.toXml=function(t,e){var i,o,n,r=this._tint||0;this._linear?(n=ut.XmlUtils.addChildWithAttr(t,e,"gradientFill","degree",this._degree||90),i=ut.XmlUtils.addChildWithAttr(t,n,"stop","position","0"),o=ut.XmlUtils.addChild(t,i,"color"),ut.XmlUtils.setAttr(o,"rgb",this._color),ut.XmlUtils.setAttr(o,"tint",this._tint||0),i=ut.XmlUtils.addChildWithAttr(t,n,"stop","position","1"),o=ut.XmlUtils.addChild(t,i,"color"),ut.XmlUtils.setAttr(o,"rgb",this._color2),ut.XmlUtils.setAttr(o,"tint",r)):(n=ut.XmlUtils.addChildWithAttr(t,e,"patternFill","patternType",this._pattern.toString()),"none"!=this._pattern&&null!=this._color&&(o=ut.XmlUtils.addChild(t,n,"fgColor"),ut.XmlUtils.setAttr(o,"rgb",this._color),ut.XmlUtils.setAttr(o,"tint",r)))};var Y,q=c;function c(t,e,i,o,n,r,s){void 0===e&&(e="solid"),void 0===o&&(o=0),void 0===n&&(n=!1),void 0===s&&(s=90);t=Y.call(this,t)||this;return t._pattern=e,t._color=i,t._linear=n,t._color2=r,t._degree=s,t._tint=o,t}_=l,ne.__extends(p,_),p.prototype.createInstance=function(t,e,i,o,n,r){return new q(this.getIndexer(),t,e,i,o,n,r)},p.prototype.createFromCss=function(t){var e,i,o,n,r=t["background-image"],s="linear-gradient(",a=r?r.indexOf(s):-1;return-1<a?(o=i=e=void 0,o=((o=2<(a=this._splitEscape(r.slice(a+s.length,r.length-1))).length?(e=new yi.Color(a[1]),i=new yi.Color(a[2]),parseInt(a[0])):(e=new yi.Color(a[0]),i=new yi.Color(a[1]),180))+270)%360,n=1-e._a,this.create("none",e.toHex(),n,!0,i.toHex(),o)):t["background-color"]?(n=1-(s=new yi.Color(t["background-color"]))._a,s?this.create("solid",s.toHex(),n):this._items[0]):void 0},p.prototype.toXml=function(t,e){for(var i=this._items.length,o=0;o<i;o++){var n=ut.XmlUtils.addChild(t,e,"fill");this._items[o].toXml(t,n)}ut.XmlUtils.setAttr(e,"count",i)},p.prototype._splitEscape=function(t,e){if(void 0===e&&(e=","),t){for(var i=[],o=!1,n="",r=0;r<t.length;r++){var s=t[r];s!=e||o?" "==s&&!o||(n+=s):(i.push(n),n=""),"("==s&&(o=!0),")"==s&&(o=!1)}return n&&i.push(n),i}return null};var _,X=p;function p(){return null!==_&&_.apply(this,arguments)||this}K=s,ne.__extends(g,K),g.equalsObj=function(t,e){return!t&&!e||!(!t&&e||t&&!e)&&t._color==e._color&&t._type==e._type&&t._width==e._width},g.prototype.equals=function(t,e,i){return void 0===e&&(e=1),void 0===i&&(i="none"),this._color==t&&this._width==e&&this._type==i},g.prototype.toXml=function(t,e){var i=this._width<=1?"thin":this._width<=2?"medium":"thick";ut.XmlUtils.setAttr(e,"style",i),ut.XmlUtils.addChildWithAttr(t,e,"color","rgb",this._color)};var K,f=g;function g(t,e,i,o){void 0===i&&(i=1),void 0===o&&(o="none");t=K.call(this,t)||this;return t._color=e,t._width=i,t._type=o,t}m=l,ne.__extends(y,m),y.prototype.createInstance=function(t,e,i){return new f(this.getIndexer(),t,e,i)},y.prototype.createFromCss=function(t,e){var i=t[e+"-style"];if(i&&"none"!=i){var o=new yi.Color(t[e+"-color"]),t=parseInt(t[e+"-width"]);if(!o&&isNaN(t))return this._items[0];if(isNaN(t))t=0;else if(0===t)return;return this.create(o.toColorHex(),t,i)}};var m,J=y;function y(){return null!==m&&m.apply(this,arguments)||this}v=s,ne.__extends(x,v),x.equalsObj=function(t,e){return f.equalsObj(t._left,e._left)&&f.equalsObj(t._top,e._top)&&f.equalsObj(t._right,e._right)&&f.equalsObj(t._bottom,e._bottom)},_dp(x,"left",{get:function(){return this._left}}),_dp(x,"right",{get:function(){return this._right}}),_dp(x,"top",{get:function(){return this._top}}),_dp(x,"bottom",{get:function(){return this._bottom}}),x.prototype.dispose=function(){this._left=null,this._top=null,this._right=null,this._bottom=null,v.prototype.dispose.call(this)},x.prototype.equals=function(t,e,i,o){return f.EqualsById(this._left,t)&&f.EqualsById(this._top,e)&&f.EqualsById(this._right,i)&&f.EqualsById(this._bottom,o)},x.prototype.toXml=function(t,e){this.borderToXml(t,e,"left"),this.borderToXml(t,e,"right"),this.borderToXml(t,e,"top"),this.borderToXml(t,e,"bottom")},x.prototype.extend=function(t){return new x(null,t.left||this.left,t.top||this.top,t.right||this.right,t.bottom||this.bottom)},x.prototype.borderToXml=function(t,e,i){e=ut.XmlUtils.addChild(t,e,i),i=this[i];i&&i.toXml(t,e)};var v,w=x;function x(t,e,i,o,n){t=v.call(this,t)||this;return t._left=e,t._top=i,t._right=o,t._bottom=n,t}b=l,ne.__extends(I,b),I.prototype.dispose=function(){this._lines=null,b.prototype.dispose.call(this)},I.prototype.createInstance=function(t,e,i,o){return new w(this.getIndexer(),t,e,i,o)},I.prototype.createFromCss=function(t){var e=this._lines,i=e.createFromCss(t,"border-left"),o=e.createFromCss(t,"border-right"),n=e.createFromCss(t,"border-top"),e=e.createFromCss(t,"border-bottom");if(i||o||n||e)return this.create(i,n,o,e)},I.prototype.extend=function(t,e){t=t||{};for(var i=new w(null,e.left||t.left,e.top||t.top,e.right||t.right,e.bottom||t.bottom),o=this._items.length;o--;){var n=this._items[o];if(w.equalsObj(this._items[o],i))return n}return i._id=this.getIndexer(),this._items.push(i),i},I.prototype.toXml=function(t,e){for(var i=this._items.length,o=0;o<i;o++){var n=ut.XmlUtils.addChild(t,e,"border");this._items[o].toXml(t,n)}ut.XmlUtils.setAttr(e,"count",i)};var b,Z=I;function I(t){var e=b.call(this)||this;return e._lines=t,e}E=s,ne.__extends(S,E),_dp(S,"horzAlign",{get:function(){return this._horzAlign},set:function(t){this._horzAlign=t}}),_dp(S,"vertAlign",{get:function(){return this._vertAlign},set:function(t){this._vertAlign=t}}),S.prototype.dispose=function(){this._font=null,this._fill=null,this._border=null,this._collection=null,E.prototype.dispose.call(this)},S.prototype.equals=function(t,e,i,o,n,r,s,a){return this._horzAlign==t&&this._vertAlign==e&&this._wrapText==i&&this._formatId==o&&W.EqualsById(this._font,n)&&q.EqualsById(this._fill,r)&&w.EqualsById(this._border,s)&&re.Utils.equalObjects(this._cellProptectProps,a)},S.prototype.toXml=function(t,e){var i,o=this,n=(ut.XmlUtils.setAttr(e,"borderId",(this._border?this._border.id:0)+""),ut.XmlUtils.setAttr(e,"fillId",(this._fill?this._fill.id:0)+""),ut.XmlUtils.setAttr(e,"fontId",(this._font?this._font.id:0)+""),ut.XmlUtils.setAttr(e,"numFmtId",this._formatId+""),ut.XmlUtils.setAttr(e,"xfId","0"),ut.XmlUtils.addChild(t,e,"alignment"));ut.XmlUtils.setAttr(n,"horizontal",this._horzAlign||"left"),ut.XmlUtils.setAttr(n,"vertical",this._vertAlign||"center"),this._wrapText&&ut.XmlUtils.setAttr(n,"wrapText","1"),this._cellProptectProps&&(i=ut.XmlUtils.addChild(t,e,"protection"),Object.keys(this._cellProptectProps).forEach(function(t){ut.XmlUtils.setAttr(i,t,o._cellProptectProps[t])}))},S.prototype.cloneAsNew=function(t,e,i,o,n,r,s,a,l){return new S(this._collection,t,e||this._horzAlign,i||this._vertAlign,null!=o?o:this._wrapText,null!=n?n:this._formatId,r||this._font,s||this._fill,a||this._border)};var E,Q=S;function S(t,e,i,o,n,r,s,a,l){void 0===n&&(n=!1),void 0===r&&(r=0);e=E.call(this,e)||this;return e._collection=t,e._horzAlign=i,e._vertAlign=o,e._wrapText=n,e._formatId=r,e._font=s,e._fill=a,e._border=l,e}t.ExcelStyle=Q;R=l,ne.__extends(T,R),T.prototype.dispose=function(){this._fonts=null,this._fills=null,this._borders=null,R.prototype.dispose.call(this)},T.prototype.addStyle=function(t){for(var e=this._items.length;e--;){var i=this._items[e];if(i.equals(t.horzAlign,t.vertAlign,t._wrapText,t._formatId,t._font,t._fill,t._border,t._cellProptectProps))return i}return t._id=this.getIndexer(),t._collection=this,t},T.prototype.changeFormatId=function(t,e){for(var i,o=this._items.length;o--;)if((i=this._items[o]).equals(t.horzAlign,t.vertAlign,t._wrapText,e,t._font,t._fill,t._border,t._cellProptectProps))return i;return i=t.cloneAsNew(this.getIndexer(),null,null,null,e,null,null,null),this._items.push(i),i},T.prototype.changeBorder=function(t,e){for(var i,o=this._borders.extend(t._border,e),n=this._items.length;n--;)if((i=this._items[n]).equals(t.horzAlign,t.vertAlign,t._wrapText,t._formatId,t._font,t._fill,o,t._cellProptectProps))return i;e=t.cloneAsNew(this.getIndexer(),null,null,null,null,null,null,o);return this._items.push(e),e},T.prototype.cloneAsNew=function(t,e,i,o,n,r,s,a,l){void 0===l&&(l=!1);t=t.cloneAsNew(this.getIndexer(),e,i,o,n,r,s,a,l);return this._items.push(t),t},T.prototype.createInstance=function(t,e,i,o,n,r,s){return void 0===i&&(i=!1),void 0===o&&(o=0),void 0===n&&(n=null),void 0===r&&(r=null),void 0===s&&(s=null),new Q(this,this.getIndexer(),t,e,i,o,n,r,s)},T.prototype.createFromCss=function(t,e,i,o,n,r){void 0===i&&(i=!0),void 0===o&&(o=!0),void 0===n&&(n=!1),void 0===r&&(r=0);var s,a,e=(e=void 0===e?!0:e)?this._borders.createFromCss(t):null,i=i?this._fonts.createFromCss(t):null,o=o?this._fills.createFromCss(t):null,l=t["text-align"],l=(l&&("center"==l?s="center":"right"==l?s="right":"left"==l&&(s="left")),t["vertical-align"]);return l&&("top"==l?a="top":"bottom"==l&&(a="bottom")),this.create(s,a,n,r,i,o,e)},T.prototype.toXml=function(t,e){for(var i=this._items.length,o=0;o<i;o++){var n=ut.XmlUtils.addChild(t,e,"xf");this._items[o].toXml(t,n)}ut.XmlUtils.setAttr(e,"count",i)};var R,tt=T;function T(t,e,i){var o=R.call(this)||this;return o._fonts=t,o._fills=e,o._borders=i,o}D.prototype.dispose=function(){this._styles.dispose(),this._borders.dispose(),this._lines.dispose(),this._fills.dispose(),this._fonts.dispose()},D.prototype.addFont=function(t){return t?this._fonts.createFromCss(t):null},D.prototype.addFill=function(t){return t?this._fills.createFromCss(t):null},D.prototype.addBorder=function(t){return t?this._borders.createFromCss(t):null},D.prototype.addNumberFormat=function(t){var e=this._numberFmts.indexOf(t);return e<0&&(this._numberFmts.push(t),e=this._numberFmts.length-1),D.EXCEL_NUMFMT_START+e},D.prototype.addStyle=function(t,e,i,o,n,r){return t?this._styles.createFromCss(t,e,i,o,n,r):null},D.prototype.extendStyle=function(t,e,i,o,n){e=this._styles.createFromCss(e,!0,!0,!0,i,o);return e._border=e._border||t._border,e._fill=e._fill||t._fill,e._font=e._font||t._font,e._horzAlign=e._horzAlign||t._horzAlign,e._vertAlign=e._vertAlign||t._vertAlign,e._wrapText=(null!=e._wrapText?e:t)._wrapText,e._formatId=(null!=o&&null!=e._formatId?e:t)._formatId,e._cellProptectProps=re.Utils.deepCopy(n),this._styles.addStyle(e)},D.prototype.changeFormatId=function(t,e){return this._styles.changeFormatId(t,e)},D.prototype.changeBorder=function(t,e){return this._styles.changeBorder(t,e)},D.prototype.createPart=function(){var t=ut.XmlUtils.parse('<styleSheet xmlns="http://schemas.openxmlformats.org/spreadsheetml/2006/main"></styleSheet>'),e=t.documentElement,i=(0<this._numberFmts.length&&(i=ut.XmlUtils.addChild(t,e,"numFmts"),this._createNumberFormats(t,i)),ut.XmlUtils.addChild(t,e,"fonts")),i=(this._createFonts(t,i),ut.XmlUtils.addChild(t,e,"fills")),i=(this._createFills(t,i),ut.XmlUtils.addChild(t,e,"borders")),i=(this._createBorders(t,i),ut.XmlUtils.addChild(t,e,"cellStyleXfs")),i=(this._createDefXfs(t,i),ut.XmlUtils.addChild(t,e,"cellXfs"));return this._createStyles(t,i),e=ut.XmlUtils.toString(t),C.XML_HEAD_STRING+e},D.prototype._createNumberFormats=function(t,e){for(var i=0,o=this._numberFmts.length;i<o;i++){var n=ut.XmlUtils.addChild(t,e,"numFmt");ut.XmlUtils.setAttr(n,"formatCode",this._numberFmts[i]),ut.XmlUtils.setAttr(n,"numFmtId",D.EXCEL_NUMFMT_START+i)}},D.prototype._createFonts=function(t,e){this._fonts.toXml(t,e)},D.prototype._createFills=function(t,e){this._fills.toXml(t,e)},D.prototype._createBorders=function(t,e){this._borders.toXml(t,e)},D.prototype._createDefXfs=function(t,e){t=ut.XmlUtils.addChildWithAttr(t,e,"xf","count",1);ut.XmlUtils.setAttr(t,"borderId",0),ut.XmlUtils.setAttr(t,"fillId",0),ut.XmlUtils.setAttr(t,"fontId",0),ut.XmlUtils.setAttr(t,"numFmtId",0)},D.prototype._createStyles=function(t,e){this._styles.toXml(t,e)},D.EXCEL_NUMFMT_START=200;var et=D;function D(t){this._numberFmts=[],this._fonts=new z(t),this._fills=new X,this._lines=new J,this._borders=new Z(this._lines),this._styles=new tt(this._fonts,this._fills,this._borders),this._fills.create("none"),this._fills.create("gray125"),this._borders.create(),this._fonts.create(),this._styles.create()}t.ExcelWorkbookStyles=et;it=s,ne.__extends(k,it),k.prototype.dispose=function(){this._style=null,it.prototype.dispose.call(this)},k.prototype.equals=function(t){return this.id==t},k.prototype.toXml=function(t,e){ut.XmlUtils.setAttr(e,"min",this.id),ut.XmlUtils.setAttr(e,"max",this.id),ut.XmlUtils.setAttr(e,"width",this._width),this._style&&ut.XmlUtils.setAttr(e,"style",this._style.id),this._hidden&&ut.XmlUtils.setAttr(e,"hidden","1")},k.prototype.toTextXml=function(t){var e=this.id+1,e={min:e,max:e,width:this._width};this._style&&(e.style=this._style.id),this._hidden&&(e.hidden="1"),yt.TextXmlManager.addChild(t,"col",e)};var it,ot=k;function k(t,e,i,o,n){t=it.call(this,t)||this;return t._hash=e,t._width=i,t._style=o,t._hidden=n,t}t.ExcelColumn=ot;nt=l,ne.__extends(M,nt),M.prototype.createInstance=function(t,e,i,o){return new ot(this.getIndexer(),t,e,i,o)},_dp(M,"count",{get:function(){return this._items.length}}),M.prototype.toTextXml=function(t){for(var e=yt.TextXmlManager.addChild(t,"cols"),i=0,o=this.count;i<o;i++)this._items[i].toTextXml(e)},M.prototype.getWidth=function(t){for(var e=0;e<this._items.length;e++){var i=this._items[e];if(i._hash===t)return i._width}return-1};var nt,rt=M;function M(){return null!==nt&&nt.apply(this,arguments)||this}F.prototype.dispose=function(){this._style=null},_dp(F,"style",{get:function(){return this._style},set:function(t){this._style=t}}),F.prototype.toXmlText=function(){var t=[];return t.push("<"+F.ELEMENT_NAME),t.push(' r="'+this._range+'"'),""!=this._type&&t.push(' t="'+this._type+'"'),this._style&&t.push(' s="'+this._style.id+'"'),t.push(">"),this._fomula&&t.push("<f>"+this._fomula+"</f>"),null!=this._value&&t.push("<v>"+this._value+"</v>"),t.push("</"+F.ELEMENT_NAME+">"),t.join("")},F.ELEMENT_NAME="c";var st=F;function F(t,e,i,o,n,r){void 0===n&&(n=""),this._range=C.toRange(e,t),this._style=i,this._type=n,this._fomula=r,this._value=o}_dp(L,"outLineLevel",{get:function(){return this._outlineLevel},set:function(t){this._outlineLevel=t}}),_dp(L,"index",{get:function(){return this._index}}),L.prototype.dispose=function(){for(var t=this._cells.length;t--;)this._cells[t].dispose(),this._cells[t]=null;this._cells=null},L.prototype.toXmlText=function(){var t=[];t.push("<"+L.ELEMENT_NAME),t.push(' r="'+(this._index+1)+'"'),this._height&&-1<this._height&&(t.push(' ht="'+this._height+'"'),t.push(' customHeight="1"')),null!=this._outlineLevel&&t.push(' outlineLevel="'+this._outlineLevel+'"'),t.push(">");for(var e=0,i=this._cells.length;e<i;e++){var o=this._cells[e];o&&t.push(o.toXmlText())}return t.push("</"+L.ELEMENT_NAME+">"),t.join("")},L.prototype.borrowCell=function(t,e,i,o,n){void 0===o&&(o="");var r=this._cells[t];r&&r.dispose(),r=new st(this._index,t,e,i,o,n),this._cells[t]=r},L.prototype.addBlank=function(t,e){this.borrowCell(t,e)},L.prototype.addCell=function(t,e,i,o,n){this.borrowCell(t,o,i,e,n)},L.prototype.addText=function(t,e,i){e=this._book.addSharedString(e||"");this.addCell(t,"s",e,i)},L.prototype.addNumber=function(t,e,i,o){e=isNaN(e)||null==e?"":String(e);this.addCell(t,"n",e,i,o)},L.prototype.addBool=function(t,e,i){this.addCell(t,"b",null==e?"":e?1:0,i)},L.prototype.addDate=function(t,e,i){e?(e=dt.DateTimeConverter.Default.toExcelDate(e),this.addNumber(t,e,i)):this.addCell(t,"s","",i)},L.prototype.addLink=function(t,e,i,o){var n;i&&""!=i?((n=document.createElement("div")).innerText=n.textContent=i,i=n.innerHTML.replace(/(<br>|<br\/>)/gi,"&#13;&#10;"),n.innerText=n.textContent=e,e=n.innerHTML.replace(/(<br>|<br\/>)/gi,"\r\n"),this.addCell(t,"str",e,o,i='HYPERLINK("'+i+(e?'","'+e+'")':'")'))):this.addText(t,e,o)},L.prototype.addImage=function(t,e,i,o,n,r,s,a){if(n)return e&&o!==ht.IconLocation.CENTER?this.addText(t,e,r):this.addBlank(t,r),this._sheet.addImage(t,this._index,i,this._height,o,n,s,a);e?this.addText(t,e,r):this.addBlank(t,r)},L.prototype.addSparkLine=function(t,e,i,o){var n=i.layout.firstColumn,r=this._sheet,s=this._index,n=r.borrowSparkGroup(n.index,i.sparkLineGroup),i=n.range.start,a=n.range.end-i+1,l=n.range.row,n=n.sparkLines,r=r.name+"!"+C.toRange(e+i,s+(null==l?0:l),!0,a);n[C.toRange(t,this._index)]=r,this.addBlank(t,o)},L.ELEMENT_NAME="row",L.LINE_REGEX=/\r|\n|\r\n/,L.BR_REGEX=/<br>|<br\/>/;var at=L;function L(t,e,i){this._row=0,this._sheet=t,this._book=t.workbook,this._index=e,this._height=i,this._cells=[]}t.ExcelRow=at;O.prototype.dispose=function(){this._txmerge=null,yt.TextXmlManager.removeItem(this._txdoc),this._txdoc=null,this._columns=null,this.clearRows(),this._dataRows=null,this._borderEdges=null},_dp(O,"id",{get:function(){return O.RELATION_ID+this._index}}),_dp(O,"name",{get:function(){return this._name}}),_dp(O,"colCount",{get:function(){return this._columns.count}}),_dp(O,"rowCount",{get:function(){return this._dataRows.length}}),_dp(O,"workbook",{get:function(){return this._book}}),_dp(O,"drawing",{get:function(){return this._drawing}}),O.prototype.setFirstRow=function(t){this._firstRow<0&&(this._firstRow=t)},O.prototype.setLastRow=function(t){this._lastRow=Math.max(this._lastRow,t)},O.prototype.setFirstCol=function(t){this._firstCol<0&&(this._firstCol=t)},O.prototype.clearRows=function(){for(var t=this._dataRows.length;t--;)this._dataRows[t].dispose(),this._dataRows[t]=null;this._dataRows=[]},O.prototype.addColumn=function(t,e,i,o){return this._columns.createUnique(t,e,i,o)},O.prototype.getColumnWidth=function(t){return this._columns.getWidth(t)},O.prototype.getMergeInfo=function(t,e){return this._mergeInfos[t+":"+e]},O.prototype.addMergeDrawInfo=function(t,e,i,o){for(var n=-1,r=[0],s=t;s<t+i;s++){var a=this.getRow(s);if(!(0<a._height)){n=-1,r=[];break}r.push(n+=a._height/.75)}this._mergeInfos[t+":"+e]={cols:o,rows:i,height:-1===n?-1:n,heights:r}},O.prototype.addRow=function(t,e){return this._dataRows[t]=new at(this,t,e)},O.prototype.getRow=function(t){return this._dataRows[t]},O.prototype.borrowRow=function(t,e){return this._dataRows[t]||this.addRow(t,e)},O.prototype.borrowSparkGroup=function(t,e){return this._sparkGroups[t]||(this._sparkGroups[t]=e),this._sparkGroups[t]},O.prototype.setRowLevel=function(t,e){0<=e&&(t=this._dataRows[t])&&(t.outLineLevel=e,this._outlineLevel=Math.max(e,this._outlineLevel))},O.prototype.addMerge=function(t,e,i,o){var n;(1<i||1<o)&&(n=C.toRange(e,t,!0,o,i),this.addMergeDrawInfo(t,e,i,o),yt.TextXmlManager.addChild(this._txmerge,"mergeCell",{ref:n}),this._mergeCount++)},O.prototype.createPart=function(){for(var e,i,t=this._txdoc,o="A1:"+C.toRange(this._columns.count-1,this._dataRows.length-1),o=(yt.TextXmlManager.addChild(t,"dimension",{ref:o}),0<this._outlineLevel&&yt.TextXmlManager.addChild(t,"sheetFormatPtr",{outlineLevelRow:this._outlineLevel}),yt.TextXmlManager.addChild(t,"sheetViews")),n={workbookViewId:0,showOutlineSymbols:"true"},o=(this._attrs&&re.Utils.extendObj(this._attrs,n),0==this._book.count&&(n.tabSelected=1),yt.TextXmlManager.addChild(o,"sheetView",n)),r=((0<this._fixedCol||0<this._fixedRow)&&yt.TextXmlManager.addChild(o,"pane",{xSplit:this._fixedCol,ySplit:this._fixedRow,topLeftCell:C.toRange(this._fixedCol,this._fixedRow),activePane:"bottomRight",state:"frozen"}),this._columns&&this._columns.toTextXml(t),yt.TextXmlManager.addChild(t,"sheetData")),s=this._dataRows,a=this._borderEdges,l=0,h=s.length;l<h;l++){if(l==this._firstRow){for(var d=0,u=Math.max(0,this._firstCol);u<s[l]._cells.length;u++)(c=s[l]._cells[u])&&a&&(c.style=this._book.changeBorderId(c.style,a[d++?"top":"leftTop"]));for(u=s[l]._cells.length;u--;)if((c=s[l]._cells[u])&&a){c.style=this._book.changeBorderId(c.style,a.rightTop);break}}else if(l===this._lastRow){for(d=0,u=Math.max(0,this._firstCol);u<s[l]._cells.length;u++)(c=s[l]._cells[u])&&a&&(c.style=this._book.changeBorderId(c.style,a[d++?"bottom":"leftBottom"]));for(u=s[l]._cells.length;u--;)if((c=s[l]._cells[u])&&a){c.style=this._book.changeBorderId(c.style,a.rightBottom);break}}else if(l>this._firstRow&&l<this._lastRow){for(u=Math.max(0,this._firstCol);u<s[l]._cells.length;u++)if((c=s[l]._cells[u])&&a){c.style=this._book.changeBorderId(c.style,a.left);break}for(var c,u=s[l]._cells.length;u--;)if((c=s[l]._cells[u])&&a){c.style=this._book.changeBorderId(c.style,a.right);break}}s[l]&&yt.TextXmlManager.addText(r,s[l].toXmlText())}if(this._sheetProtect&&(e=yt.TextXmlManager.addChild(t,"sheetProtection"),yt.TextXmlManager.addProperty(e,"sheet","1"),this._protectPassword&&(n=mt.encryptExcelPassword(this._protectPassword),yt.TextXmlManager.addProperty(e,"password",n)),this._protectProperties)&&(i=this._protectProperties,Object.keys(i).forEach(function(t){yt.TextXmlManager.addProperty(e,t,i[t])})),0<this._mergeCount&&(yt.TextXmlManager.addChildElement(this._txdoc,this._txmerge),yt.TextXmlManager.addProperty(this._txmerge,"count",this._mergeCount+"")),this._drawing&&yt.TextXmlManager.addChild(t,"drawing",{"r:id":this._drawing.relationId}),0<Object.keys(this._sparkGroups).length){var o=yt.TextXmlManager.addChild(t,"extLst"),n=yt.TextXmlManager.addChild(o,"ext",{uri:"{05C60535-1F16-4fd2-B633-F4F36F0B64E0}","xmlns:x14":"http://schemas.microsoft.com/office/spreadsheetml/2009/9/main"}),_=yt.TextXmlManager.addChild(n,"x14:sparklineGroups",{"xmlns:xm":"http://schemas.microsoft.com/office/excel/2006/main"});for(l in this._sparkGroups){var p,f=this._sparkGroups[l],g=f.colors,m=f.sparkLines,f=yt.TextXmlManager.addChild(_,"x14:sparklineGroup",{type:f.type||"line"}),y=(g.colorSeries&&yt.TextXmlManager.addChild(f,"x14:colorSeries",{rgb:g.colorSeries}),g.colorMarkers&&(yt.TextXmlManager.addProperty(f,"markers","1"),yt.TextXmlManager.addChild(f,"x14:colorMarkers",{rgb:g.colorMarkers})),g.colorFirst&&(yt.TextXmlManager.addProperty(f,"first","1"),yt.TextXmlManager.addChild(f,"x14:colorFirst",{rgb:g.colorFirst})),g.colorLast&&(yt.TextXmlManager.addProperty(f,"last","1"),yt.TextXmlManager.addChild(f,"x14:colorLast",{rgb:g.colorLast})),g.colorHigh&&(yt.TextXmlManager.addProperty(f,"high","1"),yt.TextXmlManager.addChild(f,"x14:colorHigh",{rgb:g.colorHigh})),g.colorLow&&(yt.TextXmlManager.addProperty(f,"low","1"),yt.TextXmlManager.addChild(f,"x14:colorLow",{rgb:g.colorLow})),yt.TextXmlManager.addChild(f,"x14:sparklines"));for(p in m){var v=yt.TextXmlManager.addChild(y,"x14:sparkline");yt.TextXmlManager.addChild(v,"xm:f",void 0,m[p]),yt.TextXmlManager.addChild(v,"xm:sqref",void 0,p)}}}return C.XML_HEAD_STRING+yt.TextXmlManager.toString(t)},O.prototype.createBorderEdges=function(i){function t(t){var e={};return t.forEach(function(t){e["border-"+t+"-style"]=i["border-"+t+"-style"],e["border-"+t+"-color"]=i["border-"+t+"-color"],e["border-"+t+"-width"]=i["border-"+t+"-width"]}),this._book._styles._borders.createFromCss(e)||{}}i&&(this._borderEdges={leftTop:t.call(this,["left","top"]),top:t.call(this,["top"]),rightTop:t.call(this,["right","top"]),left:t.call(this,["left"]),right:t.call(this,["right"]),leftBottom:t.call(this,["left","bottom"]),bottom:t.call(this,["bottom"]),rightBottom:t.call(this,["right","bottom"])})},O.prototype.setFixedInfo=function(t,e){this._fixedRow=null==t?this._fixedRow:Math.max(this._fixedRow,t),this._fixedCol=null==e?this._fixedCol:Math.max(this._fixedCol,e)},O.prototype.addImage=function(t,e,i,o,n,r,s,a){void 0===this._drawing&&(this._drawing=this._book.createDrawing(this),this._drawing.rId=this._relation_indexer++);r=this._book.addImage(r);return this._drawing.add(t,e,i,o,n,r,s,a)},O.prototype._prepare=function(){this._txdoc=yt.TextXmlManager.createDocument("worksheet",{xmlns:"http://schemas.openxmlformats.org/spreadsheetml/2006/main","xmlns:r":"http://schemas.openxmlformats.org/officeDocument/2006/relationships"}),this._txmerge=yt.TextXmlManager.createDocument("mergeCells")},O.RELATION_ID="rId";var lt=O;function O(t,e,i,o){this._mergeCount=0,this._outlineLevel=0,this._dataRows=[],this._sparkGroups={},this._firstRow=-1,this._firstCol=-1,this._lastRow=-1,this._fixedCol=0,this._fixedRow=0,this._relation_indexer=1,this._mergeInfos={},this._book=t,this._index=e,this._name=i,this._attrs=o.sheetAttrs,this._protectPassword=o.protectPassword,this._protectProperties=o.protectProperties,this._sheetProtect=o.sheetProtect,this._columns=new rt,this._prepare()}function P(t){this._sheet_indexer=3,this._drawing_indexer=1,this._parts={},this._parts={},this._strings=new B,this._images=new A,this._styles=new et(t),this._downloader=new mt.ImageFileDownLoader,this._sheets=[],this._drawings=[],this._preapreTemplateParts()}t.ExcelWorksheet=lt,P.prototype.dispose=function(){this._parts={},this._strings.dispose(),this._strings=null,this._styles.dispose(),this._styles=null,this._drawings.forEach(function(t){t.dispose()}),this._drawings=null,this._sheets.forEach(function(t){t.dispose()}),this._sheets=null},_dp(P,"currentSheet",{get:function(){return this._currentSheet}}),_dp(P,"count",{get:function(){return this._sheets?this._sheets.length:0}}),_dp(P,"styles",{get:function(){return this._styles}}),_dp(P,"downloader",{get:function(){return this._downloader}}),_dp(P,"hasDrawing",{get:function(){return 1<this._drawing_indexer}}),P.prototype.createSheet=function(t,e){t=new lt(this,this._sheet_indexer++,t||"Sheet"+(this._sheets.length+1),e);return this._sheets.push(t),this._currentSheet=t},P.prototype.createDrawing=function(t){t=new U(this,t,this._drawing_indexer++);return this._drawings.push(t),t},P.prototype.addSharedString=function(t){return this._strings.add(t)},P.prototype.addImage=function(t){return this._images.add(t)},P.prototype.getImageMap=function(){return this._images.getImageMap()},P.prototype.getExcelImage=function(t){return this._images.getImage(t)},P.prototype.getImageIndex=function(t){return this._images.getImageId(t)},P.prototype.addNumberFormat=function(t){return this._styles.addNumberFormat(t)},P.prototype.addStyle=function(t,e,i,o,n,r){var s;return null==n&&(n=null!=(s=t.whiteSpace||t["white-space"])&&"none"!==s&&"nowrap"!==s),this._styles.addStyle(t,e,i,o,n,r)},P.prototype.changeFormatId=function(t,e){return this._styles.changeFormatId(t,e)},P.prototype.changeBorderId=function(t,e){return this._styles.changeBorder(t,e)},P.prototype.extendStyle=function(t,e,i,o,n){return this._styles.extendStyle(t,e,i,o,n)},P.prototype.createParts=function(){var t=this._parts,e=yt.TextXmlManager.createDocument("Types",{xmlns:"http://schemas.openxmlformats.org/package/2006/content-types"});if(yt.TextXmlManager.addChild(e,"Default",{Extension:"rels",ContentType:"application/vnd.openxmlformats-package.relationships+xml"}),yt.TextXmlManager.addChild(e,"Default",{Extension:"xml",ContentType:"application/xml"}),yt.TextXmlManager.addChild(e,"Override",{PartName:"/docProps/app.xml",ContentType:"application/vnd.openxmlformats-officedocument.extended-properties+xml"}),yt.TextXmlManager.addChild(e,"Override",{PartName:"/docProps/core.xml",ContentType:"application/vnd.openxmlformats-package.core-properties+xml"}),yt.TextXmlManager.addChild(e,"Override",{PartName:"/xl/sharedStrings.xml",ContentType:"application/vnd.openxmlformats-officedocument.spreadsheetml.sharedStrings+xml"}),yt.TextXmlManager.addChild(e,"Override",{PartName:"/xl/styles.xml",ContentType:"application/vnd.openxmlformats-officedocument.spreadsheetml.styles+xml"}),yt.TextXmlManager.addChild(e,"Override",{PartName:"/xl/workbook.xml",ContentType:"application/vnd.openxmlformats-officedocument.spreadsheetml.sheet.main+xml"}),0<this._drawings.length){for(var i=0;i<this._drawings.length;i++){var o="/xl/drawings/"+(d=this._drawings[i]).fileName;yt.TextXmlManager.addChild(e,"Override",{PartName:o,ContentType:"application/vnd.openxmlformats-officedocument.drawing+xml"})}var n=this.downloader.getContentTypes();Object.keys(n).forEach(function(t){yt.TextXmlManager.addChild(e,"Default",{Extension:t,ContentType:n[t]})})}for(var r=yt.TextXmlManager.createDocument("Relationships",{xmlns:"http://schemas.openxmlformats.org/package/2006/relationships"}),s=(yt.TextXmlManager.addChild(r,"Relationship",{Id:"rId1",Type:"http://schemas.openxmlformats.org/officeDocument/2006/relationships/sharedStrings",Target:"sharedStrings.xml"}),yt.TextXmlManager.addChild(r,"Relationship",{Id:"rId2",Type:"http://schemas.openxmlformats.org/officeDocument/2006/relationships/styles",Target:"styles.xml"}),yt.TextXmlManager.createDocument("workbook",{xmlns:"http://schemas.openxmlformats.org/spreadsheetml/2006/main","xmlns:r":"http://schemas.openxmlformats.org/officeDocument/2006/relationships"})),a=(yt.TextXmlManager.addChild(s,"workbookPr",{date1904:"false"}),yt.TextXmlManager.addChild(s,"bookViews")),l=(yt.TextXmlManager.addChild(a,"workbookView",{activeTab:"0"}),yt.TextXmlManager.addChild(s,"sheets")),i=0,h=this._sheets.length;i<h;i++){var d,u=this._sheets[i],c="worksheets/sheet"+(i+1).toString()+".xml",_="xl/"+c;t[_]=u.createPart(),e&&yt.TextXmlManager.addChild(e,"Override",{PartName:"/"+_,ContentType:"application/vnd.openxmlformats-officedocument.spreadsheetml.worksheet+xml"}),l&&yt.TextXmlManager.addChild(l,"sheet",{name:u.name||"Sheet"+(i+1).toString(),sheetId:(i+1).toString(),"r:id":u.id}),r&&yt.TextXmlManager.addChild(r,"Relationship",{Id:u.id,Type:"http://schemas.openxmlformats.org/officeDocument/2006/relationships/worksheet",Target:c}),u.drawing&&(d=u.drawing,t["xl/worksheets/_rels/sheet"+(i+1).toString()+".xml.rels"]=d.createSheetRel(),t["xl/drawings/_rels/"+d.fileName+".rels"]=d.createRel(),t["xl/drawings/"+d.fileName]=d.createPart())}a=C.XML_HEAD_STRING;return t["[Content_Types].xml"]=a+yt.TextXmlManager.toString(e),t["xl/workbook.xml"]=a+yt.TextXmlManager.toString(s),t["xl/_rels/workbook.xml.rels"]=a+yt.TextXmlManager.toString(r),t["xl/sharedStrings.xml"]=this._strings.createPart(),t["xl/styles.xml"]=this._styles.createPart(),t},P.prototype._preapreTemplateParts=function(){var t=this._parts,e=C.XML_HEAD_STRING,i=(new Date).toISOString();t["_rels/.rels"]=e+'<Relationships xmlns="http://schemas.openxmlformats.org/package/2006/relationships"><Relationship Id="rId1" Type="http://schemas.openxmlformats.org/officeDocument/2006/relationships/officeDocument" Target="xl/workbook.xml"/><Relationship Id="rId2" Type="http://schemas.openxmlformats.org/officeDocument/2006/relationships/extended-properties" Target="docProps/app.xml"/><Relationship Id="rId3" Type="http://schemas.openxmlformats.org/package/2006/relationships/metadata/core-properties" Target="docProps/core.xml"/></Relationships>',t["docProps/app.xml"]=e+'<Properties xmlns="http://schemas.openxmlformats.org/officeDocument/2006/extended-properties"><Application>RealGrid</Application><AppVersion>2.0</AppVersion></Properties>',t["docProps/core.xml"]=e+'<coreProperties xmlns="http://schemas.openxmlformats.org/package/2006/metadata/core-properties" xmlns:cp="http://schemas.openxmlformats.org/package/2006/metadata/core-properties" xmlns:dc="http://purl.org/dc/elements/1.1/" xmlns:dcterms="http://purl.org/dc/terms/" xmlns:xsi="http://www.w3.org/2001/XMLSchema-instance"><dcterms:created xsi:type="dcterms:W3CDTF">'+i+"</dcterms:created><dc:creator>Wooritech</dc:creator></coreProperties>"},t.ExcelWorkbook=P})),Ci=(t(vi),vi.ExcelUtil,vi.ExcelStyle,vi.ExcelWorkbookStyles,vi.ExcelColumn,vi.ExcelRow,vi.ExcelWorksheet,vi.ExcelWorkbook,e(function(t,e){Object.defineProperty(e,"__esModule",{value:!0});n=A.EditableItemProviderImpl,ne.__extends(o,n),o.prototype._doDispose=function(){this.clearListener(),this._rs&&this._rs.dispose(),this._rs=null,this._groupedProvider&&this._groupedProvider.dispose(),this._groupedProvider=null,this._summarizer&&this._summarizer.dispose(),this._summarizer=null,n.prototype._doDispose.call(this)},_dp(o,"maxRowCount",{get:function(){return this._rs.maxItemCount},set:function(t){this._rs.maxItemCount=Math.max(0,t)}}),_dp(o,"hideDeleted",{get:function(){return this._rs.hideDeleted},set:function(t){this._rs.hideDeleted=t}}),_dp(o,"inclusiveFiltering",{get:function(){return this._rs.isFilterOr},set:function(t){this._rs.isFilterOr=t}}),_dp(o,"summaryMode",{get:function(){return this._rs.summaryMode},set:function(t){this._rs.summaryMode=t}}),_dp(o,"groupSummaryMode",{get:function(){return this._groupedProvider.summaryMode},set:function(t){this._groupedProvider.summaryMode=t}}),_dp(o,"sortMode",{get:function(){return this._rs.sortMode},set:function(t){this._rs.sortMode=t}}),_dp(o,"filterMode",{get:function(){return this._rs.filterMode},set:function(t){this._rs.filterMode=t}}),_dp(o,"grouped",{get:function(){return this._groupedProvider.grouped}}),_dp(o,"mergedGrouped",{get:function(){return this._groupedProvider.grouped&&this._groupedProvider.mergeMode}}),_dp(o,"groupLevels",{get:function(){return this._groupedProvider.groupCount}}),_dp(o,"groupByFieldCount",{get:function(){return this._groupedProvider.groupCount}}),_dp(o,"groupByFields",{get:function(){return this._groupedProvider.groupedFields}}),_dp(o,"expandWhenGrouping",{set:function(t){this._groupedProvider.expandWhenGrouping=t}}),_dp(o,"summarizer",{get:function(){return this._summarizer}}),o.prototype.canGrouping=function(t){return this._groupedProvider.canGrouping(t)},o.prototype.getFieldDomain=function(t){return this._rs.getFieldDomain(t)},o.prototype.isFiltered=function(t){return null!=t?this._rs.hasFilter(t):this._rs.hasFilters()},o.prototype.addFilter=function(t,e){this._rs.addFilter(t,e)},o.prototype.removeFilter=function(t,e){this._rs.removeFilter(t,e)},o.prototype.clearFilters=function(t){this._rs.clearFilters(t)},o.prototype.clearAllFilters=function(){this._rs.clearAllFilters()},o.prototype.beginFiltering=function(){this._rs.beginFilter()},o.prototype.endFiltering=function(t,e){this._rs.endFilter(!0,t,e)},o.prototype.setHideDeletedRows=function(t){this._rs.hideDeleted=t},o.prototype.orderBy=function(t,e,i){if(this._groupedProvider.grouped&&this._groupSorting){for(var o=e?e.length:0,n=i?i.length:0,r=this._groupedProvider.groupedFields,s=this._rs.getSortDirections(),a=this._rs.getSortCases(),l=[],h=0,d=r.length;h<d;h++)l.push(r[h]);for(h=0,d=t.length;h<d;h++){var u=t[h],c=l.indexOf(u),_=void 0,p=void 0,_=h<o?e[h]:0<o?e[o-1]:ht.SortDirection.ASCENDING,p=h<n?i[h]:0<n?i[n-1]:ht.SortCase.SENSITIVE;c<0?(l.push(u),s[l.length-1]=_,a[l.length-1]=p):(s[c]=_,a[c]=p)}this._rs.orderBy(r=l,s,a)}else this._rs.orderBy(t,e,i)},o.prototype.getSortFields=function(){return this._rs.getSortFields()},o.prototype.getSortDirections=function(){return this._rs.getSortDirections()},o.prototype.getSortCases=function(){return this._rs.getSortCases()},o.prototype.setLabelComparer=function(t){this._rs.labelComparer=t},o.prototype.groupBy=function(t,e,i,o){void 0===e&&(e=!0),void 0===i&&(i=ht.SortDirection.ASCENDING),void 0===o&&(o=ht.SortCase.SENSITIVE),(t&&!(t.length<1)||this._groupedProvider.grouped)&&this._groupedProvider.canGrouping(t)&&(this._groupSorting=e,this._groupSortDirection=i,e&&this._rs.orderBy(t,[i],[o],!1),this._groupedProvider.groupBy(t))},o.prototype.groupByMode=function(t,e){this._groupSorting&&this._rs.orderBy(t,[this._groupSortDirection],[this._groupSortCase],!1),this._groupedProvider.canGrouping(t)&&this._groupedProvider.groupByMode(t,e)},o.prototype.addGroupBy=function(t,e,i){var o;this._groupedProvider.groupCount<1?o=[e]:(o=this._groupedProvider.groupedFields).splice(t,0,e),this._groupSorting=0===t?i:this._groupSorting,this._groupedProvider.canGrouping(o)&&(this._groupSorting&&(e=[this._groupSortDirection],this._rs.orderBy(o,e,null,!1)),this._groupedProvider.groupBy(o))},o.prototype.removeGroupBy=function(t,e){if(this._groupedProvider.grouped){for(var i=this._groupedProvider.groupedFields,o=-1,n=0,r=i.length-1;0<=r;r--)if(n++,i[r]==t){o=r;break}0<=o?(i.splice(o,e?n:1),this._groupedProvider.canGrouping(i)&&(this._groupSorting&&this._rs.orderBy(i,[this._groupSortDirection],null,!1),this._groupedProvider.groupBy(i))):this._groupedProvider.canGrouping(null)&&this._groupSorting&&this._rs.orderBy(null,null,null,!1)}},o.prototype.isGroupedField=function(t){return this._groupedProvider.isGroupedField(t)},o.prototype.getGroupLevel=function(t){return this._groupedProvider.getGroupLevel(t)},o.prototype.expand=function(t,e,i,o){this._groupedProvider.expand(t,e,i,o)},o.prototype.collapse=function(t,e,i,o){this._groupedProvider.collapse(t,e,i,o)},o.prototype.collapseAll=function(t){this._groupedProvider.collapseAll(t)},o.prototype.expandAll=function(t,e){this._groupedProvider.expandAll(t,e)},o.prototype.setPaging=function(t,e,i,o){this._rs.setPaging(t,e,i,o)},_dp(o,"page",{get:function(){return this._rs.page}}),o.prototype.setPage=function(t,e){this._rs.setPage(t,e)},_dp(o,"pageCount",{get:function(){return this._rs.pageCount},set:function(t){this._rs.pageCount=t}}),o.prototype.getPageOfDataRow=function(t){return this._rs.getPageOfDataRow(t)},o.prototype.getDisplayItemIndex=function(t){return this._rs.isPaging?t.index+this._rs.pageStartIndex:t.index},o.prototype.getCheckedRows=function(t){return this._rs.getCheckedRows(t)},_dp(o,"checkableExpression",{set:function(t){this._rs.checkableExpression=t}}),_dp(o,"checkableCallback",{set:function(t){this._rs.checkableCallback=t}}),o.prototype.resetCheckables=function(){this._rs.resetCheckables()},o.prototype.applyCheckables=function(){this._rs.applyCheckables()},o.prototype.setCheckFieldIndex=function(t){this._rs.setCheckFieldIndex(t)},o.prototype.getFirstRow=function(){if(0<this.itemCount)return this._groupedProvider.grouped?this._groupedProvider.getFirstRow():this._rs.getItem(0)},o.prototype.getLastRow=function(){if(0<this.itemCount)return this._groupedProvider.grouped?this._groupedProvider.getLastRow():this._rs.getItem(this._rs.itemCount-1)},o.prototype.getPrevRow=function(t){if(0<this.itemCount)return this._groupedProvider.grouped?this._groupedProvider.getPrevRow(t):t&&0<t.index?this._rs.getItem(t.index-1):this._rs.getItem(0)},o.prototype.getNextRow=function(t){if(0<this.itemCount)return this._groupedProvider.grouped?this._groupedProvider.getNextRow(t):t&&t.index<this._rs.itemCount-1?this._rs.getItem(t.index+1):this._rs.getItem(0)},o.prototype.getGroupItem=function(t){if(this._groupedProvider.grouped)return this._groupedProvider.getGroupItem(t)},o.prototype.getJsonRows=function(){return this._rs.getJsonRows()},_dp(o,"rowCount",{get:function(){return this._rs.rowCount}}),_dp(o,"visibleRowCount",{get:function(){return this.grouped?this._groupedProvider.visibleRowCount:this._rs.rowCount}}),_dp(o,"sorted",{get:function(){return this._rs.sorted}}),_dp(o,"movable",{get:function(){return!this.grouped&&this._rs.movable}}),o.prototype.getAllItems=function(){return this._groupedProvider.getAllItems()},o.prototype.getPagingAllItems=function(){var t=this._rs;return(t.isSorted?t._sortedItems:t._items).slice()},o.prototype.findItem=function(t,e,i,o,n){return this._groupedProvider.findItem(t,e,i,o,n)},o.prototype.findCell=function(t,e,i,o,n,r){return this._groupedProvider.findCell(t,e,i,o,n,r)},o.prototype.checkItems=function(t,e,i){this._groupedProvider.checkItems(t,e,i)},o.prototype.checkItem=function(t,e,i,o){this._groupedProvider.checkItem(t,e,i,o)},o.prototype.checkAll=function(t,e,i,o,n){this._groupedProvider.checkAll(t,e,i,o,n)},o.prototype.setItemChecked=function(t,e){var i,o=this._rs._checkFieldIndex;return-1<o&&(i=((i=this.dataSource.getField(o))._boolParser||i._ownerBoolParser).toText(e),this.isEditing(t)?t.setValue(o,i):t.setData(o,i),!0)},o.prototype.getItemChecked=function(t,e){var i=this._rs._checkFieldIndex;return-1<i?this.dataSource.getField(i).readBooleanValue(t.getData(i)):e},o.prototype.setGroupCheckable=function(t){this.grouped&&this._groupedProvider.setGroupCheckable(t)},o.prototype.getItemOfRow=function(t,e){return this._rs.getItemOfRow(t,e)},o.prototype._doBeginUpdate=function(t){t=n.prototype._doBeginUpdate.call(this,t);return this._groupedProvider.$_setEditItem(t),t},o.prototype._doBeginAppendDummy=function(){var t=n.prototype._doBeginAppendDummy.call(this);return this._groupedProvider.$_setDummyEditItem(t),t},o.prototype._doBeginAppend=function(t){t=n.prototype._doBeginAppend.call(this,t);return this._groupedProvider.$_setEditItem(t),t},o.prototype._doBeginInsert=function(t,e,i,o){t=n.prototype._doBeginInsert.call(this,t,e,i,o);return this._groupedProvider.$_setEditItem(t),t},o.prototype._doCancelDummyEdit=function(){n.prototype._doCancelDummyEdit.call(this),this._groupedProvider.$_setDummyEditItem(null)},o.prototype._doCancelEdit=function(t,e){n.prototype._doCancelEdit.call(this,t,e),this._groupedProvider.$_setEditItem(null)},o.prototype._doCommitEdit=function(t,e){return!!n.prototype._doCommitEdit.call(this,t,e)&&(this._groupedProvider.$_setEditItem(null),!0)},o.prototype.onGroupedItemProviderGrouping=function(t,e){return this.fireConfirmEvent(q.GroupedItemProvider.GROUPING,e)},o.prototype.onGroupedItemProviderGrouped=function(t){this.fireEvent(q.GroupedItemProvider.GROUPED)},o.prototype.onGroupedItemProviderExpand=function(t,e){return this.fireConfirmEvent(q.GroupedItemProvider.EXPAND,e)},o.prototype.onGroupedItemProviderExpanded=function(t,e){this.fireEvent(q.GroupedItemProvider.EXPANDED,e)},o.prototype.onGroupedItemProviderCollapse=function(t,e){return this.fireConfirmEvent(q.GroupedItemProvider.COLLAPSE,e)},o.prototype.onGroupedItemProviderCollapsed=function(t,e,i){this.fireEvent(q.GroupedItemProvider.COLLAPSED,e,i)},o.prototype.onItemProviderFilterAdded=function(t,e,i){this._fireFilterAdded(e,i)},o.prototype.onItemProviderFilterRemoved=function(t,e,i){this._fireFilterRemoved(e,i)},o.prototype.onItemProviderFilterCleared=function(t,e){this._fireFilterCleared(e)},o.prototype.onItemProviderFilterAllCleared=function(t){this._fireFilterAllCleared()},o.prototype.onItemProviderFiltered=function(t,e,i){this._fireFiltered(e,i)},o.prototype.onItemProviderSort=function(t,e,i){this._fireSort(e,i,null)},o.prototype.onItemProviderSorted=function(t){this._fireSorted()},o.prototype.onItemProviderDataLoadComplated=function(t){this._fireDataLoadComplated()};var n,i=o;function o(t,e){void 0===e&&(e=null);t=n.call(this,null,t)||this;return t._groupSorting=!0,t._groupSortDirection=ht.SortDirection.ASCENDING,t._groupSortCase=ht.SortCase.SENSITIVE,t._rs=new zt.DefaultItemProvider(!1),t._rs.addListener(t),t._groupedProvider=new q.GroupedItemProvider(t._rs,!1),t._groupedProvider.footerCounter=e,t.source=t._groupedProvider,t._summarizer=new Yt.DefaultSummarizer(t._rs),t}e.GridItemProvider=i})),wi=(t(Ci),Ci.GridItemProvider,e(function(t,e){Object.defineProperty(e,"__esModule",{value:!0});o=pt.VisualElement,ne.__extends(n,o),n.prototype._doDispose=function(){o.prototype._doDispose.call(this)},_dp(n,"owner",{get:function(){return this._owner}}),_dp(n,"clickable",{get:function(){return this._clickable},set:function(t){t!=this._clickable&&(this._clickable=t,this._changed())}}),n.prototype._getCssSelector=function(){return""},n.prototype._doDraw=function(t){},n.prototype._hoverChanged=function(){this.invalidate()},n.prototype._changed=function(){this.invalidate()};var o,i=n;function n(t,e,i){t=o.call(this,t,i=void 0===i?null:i)||this;return t._clickable=!1,t._owner=e,t}e.HandleElement=i;r=i,ne.__extends(s,r),s.prototype._doDispose=function(){r.prototype._doDispose.call(this)},_dp(s,"cellView",{get:function(){return this.owner}});var r,i=s;function s(t,e,i){return r.call(this,t,e,i=void 0===i?null:i)||this}e.CellHandle=i})),xi=(t(wi),wi.HandleElement,wi.CellHandle,e(function(V,t){Object.defineProperty(t,"__esModule",{value:!0});i=ve.CellElement,ne.__extends(o,i),o.prototype._doUpdateContent=function(t,e,i){i[re.Utils.TextProp]=""},o.prototype._doRender=function(t){};var i,e=o;function o(t,e){return i.call(this,t,e)||this}n=ye.SimpleTableElement,ne.__extends(s,n),s.prototype._doDispose=function(){this._cells.forEach(function(t){t.dispose()}),this._cells=null,n.prototype._doDispose.call(this)},s.prototype.prepare=function(t){for(this._levels=t;this._cells.length<t;){var e=this.$_createCell();this._cells.push(e)}},s.prototype._doPrepareTableExtents=function(t){if(0<this._levels)for(var e=this.width/this._levels,i=0;i<this._levels;i++)this._cells[i].width=e},s.prototype._doPrepareTableRow=function(t,e,i,o){n.prototype._doPrepareTableRow.call(this,t,e,i,o),o.className=this.$_getRowClassName(e)},s.prototype._prepareCellContent=function(t,e){var i=re.getDoc(t);return t[ht.T_LEV]=e+1,i.createElement("div")},s.prototype._doLayoutContent=function(t){for(var e=this._levels;this.childCount<e;)this.addChild(this._cells[this.childCount]);for(;this.childCount>e;)this.removeLast()},s.prototype._doRender=function(t){},s.prototype._getCellCount=function(t){return this._levels},s.prototype._getCellWidth=function(t,e){return this._cells[e].width};var n,r=s;function s(t,e){t=n.call(this,t,null,e)||this;return t._cells=[],t._levels=0,t}a=r,ne.__extends(l,a),l.prototype._getCssSelector=function(){return"rg-rowgroup-head"},l.prototype._getTableRowHeight=function(t,e){var i=this.grid,o=[];return i.header.visible&&o.push(t.headBounds.height),i.filterPanel.visible&&o.push(t.filterPanelBounds.height),i.headerSummaries.visible&&o.push(t.sumBounds.height),o[e]||0},l.prototype.$_createCell=function(){return new e(this.doc,"rowGroupHeadCellView")},l.prototype._getTableRowCount=function(t){var e=this.grid,i=0;return e.header.visible&&i++,e.filterPanel.visible&&i++,e.headerSummaries.isVisible()&&i++,i},l.prototype.$_getRowClassName=function(t){var e=this.grid,i=[];return e.header.visible&&i.push(""),e.filterPanel.visible&&i.push("rg-rowgroup-filter-panel"),e.headerSummaries.isVisible()&&i.push("rg-rowgroup-summary"),i[t]||""};var a,B=l;function l(t){return a.call(this,t,"rowGroupHeadView")||this}t.RowGroupHeadElement=B;h=r,ne.__extends(d,h),d.prototype._getCssSelector=function(){return"rg-rowgroup-foot"},d.prototype._getTableRowHeight=function(t,e){return t.footBounds.height},d.prototype.$_createCell=function(){return new e(this.doc,"rowGroupFootCellView")},d.prototype._getTableRowCount=function(t){return 1},d.prototype.$_getRowClassName=function(t){return"rg-rowgroup-foot-row"};var h,N=d;function d(t){return h.call(this,t,"rowGroupFootView")||this}t.RowGroupFootElement=N;var u,$="rg-rowgroup-expander",A=(u=wi.CellHandle,ne.__extends(c,u),c.isExpander=function(t){t=t.className;return t&&0<=t.indexOf($)},_dp(c,"expanded",{get:function(){return this._expanded},set:function(t){t!=this._expanded&&(this._expanded=t,this._changed())}}),c.prototype._createDom=function(t){return t.createElement("span")},c.prototype._initDom=function(t){u.prototype._initDom.call(this,t),t.style.position="",t.style.display="inline-block"},c.prototype._getCssSelector=function(){return this._expanded?"rg-rowgroup-expander rg-rowgroup-expander-expanded":"rg-rowgroup-expander rg-rowgroup-expander-collapsed"},c.prototype._getCssDisplay=function(){return""},c.prototype._beforeDraw=function(t){this._setClassName(t)},c);function c(t,e){t=u.call(this,t,e,"rowGroupExpandHandle")||this;return t._expanded=!1,t.clickable=!0,t}t.RowGroupExpandHandle=A;_=ve.CellElement,ne.__extends(p,_),_dp(p,"level",{get:function(){return this._level},set:function(t){this._level=t}}),p.prototype.updateCell=function(t,e,i){_.prototype.updateCell.call(this,t,e,i);var o,e=e.item,n=e.getAncestor(this.bar.l);n&&(o=t.rowGroup,o=(n.expanded?o.expandedAdornments:o.collapsedAdornments)===ht.RowGroupAdornments.SUMMARY),n&&(e instanceof rt.GroupItemImpl&&e===n||n.getFirstVisibleItem(o)===e)&&n.level===this.bar.l?(o=this._expander._dom,i.appendChild(o),this._expander.setBounds(1,1,this.width-2,this.width-2),this._expander.expanded=n.expanded,t=t.rowGroup.$_isExpanderVisible(n),this._expander.visible=!n.expanded||null==t||t,o[ht.T_ROW]=e.index):this._expander.visible=!1,i.style.paddingTop="2px"},p.prototype.validate=function(){_.prototype.validate.call(this);var t=this._expander._dom;re.Utils.detach(t)};var _,H=p;function p(t){var e=_.call(this,t,"rowGroupBarCell")||this;return e._level=0,e._expander=new A(t,e),e.addChild(e._expander),e}f=ye.DataTableElement,ne.__extends(g,f),g.prototype._doDispose=function(){this._cells=null,f.prototype._doDispose.call(this)},g.prototype.prepare=function(t,e){this._levels=e},g.prototype.getLevelIndent=function(t){return t*this.width/this._levels},g.prototype.getViewOf=function(t){for(var e=this.getChildren(),i=0,o=e.length;i<o;i++){var n=e[i];if(n._expander._dom===t)return n}},g.prototype._getCssSelector=function(){return"rg-rowgroup-bar"},g.prototype._prepareCellContent=function(t,e){return re.getDoc(t).createElement("div")},g.prototype._doLayoutContent=function(t){for(var e=t.grid,i=e.rowGroup,o=this.width/this._levels,n=this._bars,r=n.length,s=t.topIndex,a=t.fixedItemCount,l=0<a;this.childCount<r;)u=0<this._cells.length?this._cells.pop():this._createCell(),this.addChild(u);for(;this.childCount>r;)(u=this.removeLast()).validate(),this._cells.push(u);for(var h=0;h<r;h++){var d=n[h],u=this.getChild(h),c=d.tr1,_=_t.CellIndex.temp(e,l?c<a?c:c-1+s:c+s),_=i.getBarCell(_),p=t.getTableItemBounds(d.r);u.bar=d,u.level=d.c+1,u.updateCell(e,_,this.getCellContent(c,d.c)),p.x=o*d.c,p.width=o,u.setRect(p)}},g.prototype._doRender=function(t){},g.prototype._doPrepareTableRows=function(t,e){f.prototype._doPrepareTableRows.call(this,t,e),this.$_layoutBarCells(t,e)},g.prototype._getTableRowHeight=function(t,e){var i=0<t.fixedItemCount&&e>t.fixedItemCount?1:0;return t.getTableItemHeight(e-i)},g.prototype._getCellCount=function(t){return this._levels},g.prototype._getCellWidth=function(t,e){return this.width/this._levels},g.prototype._createCell=function(){return new H(this.doc)},g.prototype.$_calcLevels=function(t,e,i,o){for(var n,r=[],s=1,a=0,l=0;l<o-i;l++){var h=t[l+i].getAncestor(e);r.push(-1),h&&n===h||(r[a]=s,n=h,a=r.length-1,s=0),s++}return r[a]=s,r},g.prototype.$_layoutBarCells=function(t,e){var i=t.$_getItems(),o=i.length,n=t.fixedItemCount,r=e.children,s=this._bars=[];if(!(o<1)){for(var a=0,l=this._getCellCount(t);a<l;a++){var h=a+1,d=0,u=0;if(0<n){for(var c=void 0,_=void 0;d<n;d++,u++)(_=(c=r[u]).children[a]).style.display="",_.removeAttribute("rowspan"),re.Utils.setClassName(_,""),0===a&&re.Utils.setClassName(c,""),_[ht.T_ROW]=d;c=r[u++],0===a&&re.Utils.setClassName(c,pe.FixedOptions.ROW_BAR_STYLE),(_=c.children[a]).style.display="",_.removeAttribute("rowspan"),re.Utils.setClassName(_,pe.FixedOptions.ROW_BAR_CELL_STYLE)}if(d<o)for(var p=this.$_calcLevels(i,h,d,o),f=0;d<o;d++,f++,u++){var g,m=p[f],_=(c=r[u]).children[a],y=i[d],v=y.getAncestor(h);0===a&&re.Utils.setClassName(c,""),_.removeAttribute("rowspan"),0<m?(g=this.grid.rowGroup,g=v&&(v.expanded?g.expandedAdornments:g.collapsedAdornments)===ht.RowGroupAdornments.SUMMARY,v=1===m&&v&&(y instanceof rt.GroupItemImpl||v.getFirstVisibleItem(g)===y),(1<m||v)&&(s.push({r:d,tr1:u,tr2:u+m-1,c:a,l:h}),_.rowSpan=m),_.style.display="",re.Utils.setClassName(_,"rg-rowgroup-bar-cell rg-rowgroup-bar-level-"+String(h)),_[ht.T_ROW]=y.index):(_.style.display="none",re.Utils.setClassName(_,""))}}s.sort(function(t,e){return t.r-e.r})}};var f,U=g;function g(t){t=f.call(this,t,null,"rowGroupBarContainer")||this;return t._cells=[],t._levels=0,t._bars=[],t}t.RowGroupBarContainer=U;m=Ve.DataContentPane,ne.__extends(y,m),y.prototype._doDispose=function(){m.prototype._doDispose.call(this)},_dp(y,"levelCount",{get:function(){return this.grid.layoutManager.rowGroupLevels}}),y.prototype.getLevelIndent=function(t){return this._barContainer.getLevelIndent(t)},y.prototype._doMeasure=function(t,e,i){var o=this.levelCount;return this._headView.prepare(o),this._footView.prepare(o),this._barContainer.prepare(t,o),new ge.Size(this.levelCount*t.rowGroup.levelIndent,i)},y.prototype._doLayoutContent=function(t){var e,i=this.grid,o=t.headBounds;(this._headView.visible=i.header.visible||i.headerSummaries.isVisible()||i.filterPanel.visible)&&(e=0,i.header.visible&&(e+=o.height),i.headerSummaries.isVisible()&&(e+=t.summaryBounds.height),i.filterPanel.visible&&(e+=t.filterPanelBounds.height),this._headView.setBounds(0,o.y,this.width,e),this._headView.layoutContent(t)),o=t.footBounds,(this._footView.visible=i.footers.isVisible())&&(this._footView.setBounds(0,o.y,this.width,o.height),this._footView.layoutContent(t)),o=t.rowBarBounds,this._barContainer.setBounds(0,o.y,this.width,o.height),this._barContainer.layoutContent(t)},y.prototype._getCssSelector=function(){return"rg-rowgroup-bar-container"};var m,r=y;function y(t){var e=m.call(this,t,"rowGroupBarPane")||this;return e._barContainer=new U(t),e.addChild(e._barContainer),e._footView=new N(t),e.addChild(e._footView),e._headView=new B(t),e.addChild(e._headView),e}t.RowGroupBarPane=r;v=Ve.DataContentPane,ne.__extends(C,v),C.prototype._doDispose=function(){v.prototype._doDispose.call(this)};var v,r=C;function C(t){return v.call(this,t,"rowGroupPane")||this}t.RowGroupPane=r;w=ve.CellElement,ne.__extends(x,w),x.prototype._doDispose=function(){w.prototype._doDispose.call(this)},_dp(x,"indent",{get:function(){return this._indent},set:function(t){this._indent=Math.max(0,t)}}),x.prototype._createDom=function(t){return t.createElement("div")},x.prototype._initDom=function(t){w.prototype._initDom.call(this,t);t=t.style;t.top="50%",t.msTransform=t.transform="translate(0px, -50%)",t.setProperty("overflow","hidden","important"),t.setProperty("pointer-events","none","important")},x.prototype._beforeDraw=function(t){},x.prototype._doUpdateContent=function(t,e,i){i[re.Utils.TextProp]=e.text,i.style.left=0<this._indent?this._indent+"px":""};var w,G=x;function x(t){t=w.call(this,t,"rowGroupHeaderCellView")||this;return t._indent=0,t}t.RowGroupHeaderCellElement=G;b=me.GridElement,ne.__extends(I,b),I.prototype._doDispose=function(){this._item=null,this._cellView=null,b.prototype._doDispose.call(this)},_dp(I,"item",{get:function(){return this._item},set:function(t){this._item=t}}),_dp(I,"itemIndex",{get:function(){return this._item.index}}),I.prototype._initDom=function(t){b.prototype._initDom.call(this,t),t.style.setProperty("overflow","hidden","important")},I.prototype._getCssSelector=function(){return"rg-rowgroup-header rg-rowgroup-header-level-"+String(this._item.level)},I.prototype._doLayoutContent=function(t){var t=t.grid,e=t.rowGroup;this._cellView.indent=e.indentVisible?0:t.groupBarPane.getLevelIndent(this._item.level-1),this._cellView.updateCell(t,e.getHeaderCell(this._item),this._cellView._dom)};var b,W=I;function I(t){var e=b.call(this,t,"rowGroupHeaderView")||this;return e._cellView=new G(t),e.addChild(e._cellView),e}t.RowGroupHeaderElement=W;E=me.GridElement,ne.__extends(S,E),S.prototype._doDispose=function(){this._item=null,E.prototype._doDispose.call(this)},_dp(S,"item",{get:function(){return this._item},set:function(t){this._item=t}}),S.prototype._getCssSelector=function(){return"rg-rowgroup-header rg-rowgroup-header-level-"+String(this._item.level)};var E,j=S;function S(t){return E.call(this,t,"rowGroupRightHeaderView")||this}t.RowGroupRightHeaderElement=j;R=X.ItemElement,ne.__extends(D,R),D.prototype._doLayoutContent=function(t){var e=t.grid,i=e.rowGroup,o=t.cellLayouts._dataCells.length,n=this._getFirstCell(t),r=this._getStartCell(t)-n,s=r,a=this._getEndCell(t)-n,l=this._item instanceof q.MergedGroupFooter;l&&(s=Math.max(r,this._item.parent.level-n)),this.$_refreshSpans(this._item.index,this._item.$_footerIndex,o,s,a);for(var s=0,h=0;h<o;h++){var d=this._getTableRow(t,this._domIndex+h),u=this._getBodyCells(this._domIndex+h),c=i.getFooterStyleName(this._item);d.className=c;for(var _=s;_<=a;_++){var p=u[_],f=p.layout;l&&p.merged&&p.head&&p===p.head||(p.clearExpander(),p.clearButtons(),p.renderer2&&p.renderer2.clearContent(),p.visible&&(f.isNull?f.isProxy||p.setClassName(si.RowGroup.FOOTER_CELL_STYLE):(f=_t.CellIndex.temp(e,this._item.index,f),f=i.getFooterCell(f),this._updateCell(e,i,f,p))))}}},D.prototype._getBodyCells=function(t){return this.parent.$_getBodyCells(t)},D.prototype._getTableRow=function(t,e){return this.parent.$_getTableRow(t,e)},D.prototype._getTableCell=function(t){return this.parent.$_getTableCell(this._domIndex,t)},D.prototype._getFirstCell=function(t){return t._firstCell},D.prototype._getLastCell=function(t){return t._lastCell},D.prototype._getStartCell=function(t){return t.getStartCell()},D.prototype._getEndCell=function(t){return t.getEndCell()},D.prototype._getBodyView=function(){return this.parent._bodyView},D.prototype._updateCell=function(t,e,i,o){var n=i.dataColumn.groupFooters.get(i.footerIndex),r=e.getFooterCellStyle(i,o.style.clear()),s=i.getSummary(),a=o.cell.firstElementChild;o.setClassName(r.styleName),re.Utils.setClassName(a,si.RowGroup.FOOTER_CELL_RENDERER),o.refreshFormatters(r),e.getFooterCellFormatters(n,o),s?void 0===(r=i.getTemplate(o))?a[re.Utils.TextProp]=i.getDisplayText(o):a.innerHTML=r:a[re.Utils.TextProp]=""},D.prototype.$_refreshSpans=function(t,e,i,o,n){for(var r=this.grid.layoutManager._tableRowPoints,s=0;s<i;s++)for(var a=this._getBodyCells(this._domIndex+s),l=o;l<=n;l++){var h=a[l],d=h.layout,u=d.parent,c=u&&u.vertical;if(!h.spanned)if(d.isProxy)h.clear(!1);else{var _=0,p=0,f=d.getGroupFooterUserSpan(this._item.parent,e),g=f?0:d.getGroupFooterSpan(t,e)-1;if(f){var m=this._item,m=(m.parent.footerCount-m.vindex)*i,y=f.footerCount||0,v=0<y?y*i:f.rowspan||1,C=f.colspan||1,v=Math.min(v,m);h.set(C,v,!0);for(var w=0;w<v;w++)for(var x=this._getBodyCells(this._domIndex+w+s),b=0;b<C;b++){var I=x&&x[b+l];I&&I!==h&&I.span(h)}}else if(0<g){var E,S=0,R=d.vindex+1;if(c)for(;S++<g&&S<i;)p+=(E=u.getVisible(R++))._dspan,this._getBodyCells(this._domIndex+s+1)[l].span(h);else for(;S++<g&&l-o+S<a.length&&R<u.visibleCount;){if(!(E=u.getVisible(R++)))break;_+=E._cspan,a[l+S].span(h)}}d.isNull&&h.clear(!0),f||h.set(d._cspan+_,d._dspan+p,!0),1<h.rowSpan&&(h.height=r[h.rowIndex+h.rowSpan]-r[h.rowIndex],h.cell.firstElementChild.style.maxHeight=h.height-2+"px")}}};var R,T=D;function D(t){return R.call(this,t,"rowGroupFooterView")||this}t.RowGroupFooterElement=T;k=T,ne.__extends(M,k),M.prototype._getBodyCells=function(t){return this.parent.$_getFixedBodyCells(t)},M.prototype._getTableRow=function(t,e){return this.parent.$_getFixedTableRow(e)},M.prototype._getTableCell=function(t){return this.parent.$_getFixedTableCell(this._domIndex,t)},M.prototype._getBodyView=function(){return this.parent._fixedView},M.prototype._getFirstCell=function(t){return this._getStartCell(t)},M.prototype._getLastCell=function(t){return this._getEndCell(t)},M.prototype._getStartCell=function(t){return 0},M.prototype._getEndCell=function(t){return t.fixedCellCount-1};var k,z=M;function M(){return null!==k&&k.apply(this,arguments)||this}t.RowGroupFixedFooterElement=z;F=T,ne.__extends(L,F),L.prototype._getBodyCells=function(t){return this.parent.$_getRightBodyCells(t)},L.prototype._getTableRow=function(t,e){return this.parent.$_getRightTableRow(e)},L.prototype._getTableCell=function(t){return this.parent.$_getRightTableCell(this._domIndex,t)},L.prototype._getBodyView=function(){return this.parent._rightView},L.prototype._getFirstCell=function(t){return this._getStartCell(t)},L.prototype._getLastCell=function(t){return this._getEndCell(t)},L.prototype._getStartCell=function(t){return t.cellCount-t.rightCellCount},L.prototype._getEndCell=function(t){return t.cellCount-1};var F,Y=L;function L(){return null!==F&&F.apply(this,arguments)||this}t.RowGroupRightFooterElement=Y;O=pt.LayerElement,ne.__extends(P,O),P.prototype._doDispose=function(){this._bodyView=this._fixedView=this._rightView=null,O.prototype._doDispose.call(this)},_dp(P,"grid",{get:function(){return this.getAncestor(Ei.GridView)}}),P.prototype.layout=function(t){this._doPrepareContent(t),this._doLayoutContent(t)},P.prototype.getHeaderView=function(t){for(var e=0,i=this._headerViews;e<i.length;e++){var o=i[e];if(o.item===t)return o}},P.prototype._initDom=function(t){O.prototype._initDom.call(this,t);t=t.style;t.setProperty("overflow","hidden","important"),t.setProperty("pointer-events","none","important")},P.prototype._getCssSelector=function(){return"rg-rowgroup-layer"},P.prototype._doDraw=function(t){},P.prototype._doPrepareContent=function(t){this.$_prepareHeaders(t)},P.prototype.$_prepareIndents=function(t){for(var e=this._indents=[],i=t.rowGroupLevels+1,o=0;o<i;o++)e[o]=t.getLevelIndent(o);return e},P.prototype._doLayoutContent=function(t){var e,i=this.$_prepareIndents(t),o=t.$_getItems(),n=o.length,r=t.fixedItemCount,s=this._rightView,a=t.contentBounds.right-t.sideContentBounds.x,l=0,h=0,d=t.trs,u=r,c=0<r?u*d+1:u*d;for(s&&(e=t.rightContentBounds.clone(),a=Math.min(a,this.width-e.width),e.x-=this.x,e.leftBy(t.rightBarWidth));u<n;u++){var _,p,f,g=o[u];g instanceof rt.GroupItemImpl?(f=this._headerViews[l],_=t.getTableItemBounds(u),p=i[g.level],f.item=g,f.setBounds(p,_.y,a-p,_.height),f.layoutContent(t),s&&((p=this._rightHeaderViews[l]).item=g,p.setBounds(e.x,_.y,e.width,_.height),p.layoutContent(t)),l++,c++):(g instanceof rt.GroupFooter&&(this._fixedView&&((f=this._fixedFooterViews[h]).updateItem(g,c,d,!0),f.layoutContent(t)),this._rightView&&((f=this._rightFooterViews[h]).updateItem(g,c,d,!0),f.layoutContent(t)),this._bodyView)&&(f=this._footerViews[h++],re.Utils.isDebugging(),f.updateItem(g,c,d,!0),f.layoutContent(t)),c+=d)}},P.prototype.$_prepareHeaders=function(t){for(var e=t.$_getItems(),i=0,o=t.fixedItemCount,n=e.length;o<n;o++)e[o]instanceof rt.GroupItemImpl&&i++;for(var r=this._headerPool,s=this._headerViews;s.length<i;)a=(a=r.pop())||new W(this.doc),this.addChild(a),s.push(a);for(;s.length>i;){var a=s.pop();this.removeChild(a),r.push(a)}var l=this._rightHeaderPool,h=this._rightHeaderViews;if(this._rightView){for(;h.length<i;)a=(a=l.pop())||new j(this.doc),this.addChild(a),h.push(a);for(;h.length>i;){a=h.pop();this.removeChild(a),l.push(a)}}else for(;0<h.length;){a=h.pop();this.removeChild(a),l.push(a)}},P.prototype.$_prepareGroupItems=function(t,e,i,o){this._bodyView=e,this._fixedView=i,this._rightView=o},P.prototype.$_prepareGroupFooters=function(t,e){for(var i=0,o=e.fixedItemCount,n=t.length;o<n;o++)t[o]instanceof rt.GroupFooter&&i++;for(;this._footerViews.length<i;)r=(r=this._footerPool.pop())||new T(this.doc),this.addChild(r),this._footerViews.push(r);for(;this._footerViews.length>i;){var r=this._footerViews.pop();this.removeChild(r),this._footerPool.push(r)}if(this._fixedView){for(;this._fixedFooterViews.length<i;)r=(r=this._fixedFooterPool.pop())||new z(this.doc),this.addChild(r),this._fixedFooterViews.push(r);for(;this._fixedFooterViews.length>i;){var r=this._fixedFooterViews.pop();this.removeChild(r),this._fixedFooterPool.push(r)}}else for(;0<this._fixedFooterViews.length;){r=this._fixedFooterViews.pop();this.removeChild(r),this._fixedFooterPool.push(r)}if(this._rightView){for(;this._rightFooterViews.length<i;)r=(r=this._rightFooterPool.pop())||new Y(this.doc),this.addChild(r),this._rightFooterViews.push(r);for(;this._rightFooterViews.length>i;){r=this._rightFooterViews.pop();this.removeChild(r),this._rightFooterPool.push(r)}}else for(;0<this._rightFooterViews.length;){r=this._rightFooterViews.pop();this.removeChild(r),this._rightFooterPool.push(r)}},P.prototype.$_getTableRow=function(t,e){return this._bodyView._tbody.children[e]},P.prototype.$_getTableCell=function(t,e){return this._bodyView._tbody.children[t].children[e]},P.prototype.$_getFixedTableRow=function(t){return this._fixedView._tbody.children[t]},P.prototype.$_getFixedTableCell=function(t,e){return this._fixedView._tbody.children[t].children[e]},P.prototype.$_getRightTableRow=function(t){return this._rightView._tbody.children[t]},P.prototype.$_getRightTableCell=function(t,e){return this._rightView._tbody.children[t].children[e]},P.prototype.$_getBodyCells=function(t){return this._bodyView._cells[t]},P.prototype.$_getFixedBodyCells=function(t){return this._fixedView._cells[t]},P.prototype.$_getRightBodyCells=function(t){return this._rightView._cells[t]};var O,r=P;function P(t,e){t=O.call(this,t,e||"rowGroupLayer")||this;return t._headerPool=[],t._headerViews=[],t._rightHeaderPool=[],t._rightHeaderViews=[],t._footerPool=[],t._footerViews=[],t._fixedFooterPool=[],t._fixedFooterViews=[],t._rightFooterPool=[],t._rightFooterViews=[],t._indents=[],t}t.RowGroupElement=r})),bi=(t(xi),xi.RowGroupHeadElement,xi.RowGroupFootElement,xi.RowGroupExpandHandle,xi.RowGroupBarContainer,xi.RowGroupBarPane,xi.RowGroupPane,xi.RowGroupHeaderCellElement,xi.RowGroupHeaderElement,xi.RowGroupRightHeaderElement,xi.RowGroupFooterElement,xi.RowGroupFixedFooterElement,xi.RowGroupRightFooterElement,xi.RowGroupElement,e(function(t,e){Object.defineProperty(e,"__esModule",{value:!0});i=_e.GridBaseOptions,ne.__extends(n,i),n.prototype._doDispose=function(){i.prototype._doDispose.call(this)},_dp(n,"enabled",{get:function(){return this._enabled},set:function(t){t!=this._enabled&&(this._enabled=t,this._changed())}}),_dp(n,"prompt",{get:function(){return this._prompt},set:function(t){t!=this._prompt&&(this._prompt=t,this._changed())}}),_dp(n,"expandWhenGrouping",{get:function(){return this._expandWhenGrouping},set:function(t){t!=this._expandWhenGrouping&&(this._expandWhenGrouping=t,this._changed())}}),_dp(n,"summarizing",{get:function(){return this._summarizing},set:function(t){t!=this._summarizing&&(this._summarizing=t,this._changed())}}),_dp(n,"commitBeforeGrouping",{get:function(){return this._commitBeforeGrouping},set:function(t){this._commitBeforeGrouping=t}}),_dp(n,"commitBeforeExpand",{get:function(){return this._commitBeforeExpand},set:function(t){this._commitBeforeExpand=t}}),_dp(n,"commitBeforeCollapse",{get:function(){return this._commitBeforeCollapse},set:function(t){this._commitBeforeCollapse=t}}),_dp(n,"fixMergedColumns",{get:function(){return this._fixMergedColumns},set:function(t){this._fixMergedColumns=t}}),_dp(n,"headerClickable",{get:function(){return this._headerClickable},set:function(t){this._headerClickable=t}}),_dp(n,"toast",{get:function(){return this._toast}}),n.prototype._changed=function(){this.grid._groupingOptionsChanged(this),this._layoutOwner()};var i,o=n;function n(t){t=i.call(this,t)||this;return t._enabled=!0,t._prompt="컬럼 헤더를 이 곳으로 끌어다 놓으면 그 컬럼으로 그룹핑합니다.",t._expandWhenGrouping=!0,t._summarizing=!0,t._commitBeforeGrouping=!0,t._commitBeforeExpand=!0,t._commitBeforeCollapse=!0,t._fixMergedColumns=!0,t._toast=new Oe.ToastOptions({visible:!1,message:"Grouping..."}),t._headerClickable=!1,t}e.GroupingOptions=o})),Ii=(t(bi),bi.GroupingOptions,e(function(t,e){Object.defineProperty(e,"__esModule",{value:!0});i=me.GridElement,ne.__extends(o,i),o.prototype._doDispose=function(){re.Utils.detach(this._textView),re.Utils.detach(this._closeView),this._textView=this._closeView=null,i.prototype._doDispose.call(this)},_dp(o,"field",{get:function(){return this._field}}),_dp(o,"text",{get:function(){return this._text}}),o.prototype.setColumn=function(t){this._field=t.dataIndex,this._textView[re.Utils.TextProp]=this._text=t.displayText},o.prototype.isCloseButton=function(t){return t===this._closeView},o.prototype._getCssSelector=function(){return"rg-header rg-header-cell rg-group-panel-item"},o.prototype._initDom=function(t){i.prototype._initDom.call(this,t);var e=re.getDoc(t);this._textView=e.createElement("span"),this._textView.className="rg-group-panel-item-text",this._textView.style.display="inline-block",t.appendChild(this._textView),this._closeView=e.createElement("span"),this._closeView.className="rg-group-panel-item-close",t.appendChild(this._closeView)},o.prototype._doMeasure=function(t,e,i){var o=(this._textWidth=this._textView.offsetWidth)+this._itemGap+this._closeView.offsetWidth+2*this._padHorz,n=this._textHeight=this._textView.offsetHeight,n=Math.max(n,this._closeHeight=this._closeView.offsetHeight);return n+=2*this._padVert,new ge.Size(o,n)},o.prototype._doLayoutContent=function(t){},o.prototype._doDraw=function(t){var e=this._dom.clientHeight;this._textView.style.left=this._padHorz+"px",this._textView.style.top=Math.floor((e-this._textHeight)/2)+"px",this._closeView.style.left=this._padHorz+this._textWidth+this._itemGap+"px",this._closeView.style.top=Math.floor((e-this._closeHeight)/2)+"px"};var i,s=o;function o(t){t=i.call(this,t)||this;return t._field=-1,t._text="",t._textWidth=0,t._textHeight=0,t._closeHeight=0,t._padHorz=5,t._padVert=4,t._itemGap=8,t}e.GroupPanelItemView=s;n=me.VisualObjectElement,ne.__extends(a,n),a.prototype._doDispose=function(){this._itemViews&&this._itemViews.forEach(function(t,e){t.dispose()}),this._itemViews=null,re.Utils.detach(this._messageView),this._messageView=null,n.prototype._doDispose.call(this)},_dp(a,"minHeight",{get:function(){return this._minHeight},set:function(t){this._minHeight!==t&&(this._minHeight=t,this._doSizeChanged())}}),a.prototype._getCssSelector=function(){return"rg-group-panel"},a.prototype._initDom=function(t){n.prototype._initDom.call(this,t);var e=re.getDoc(t),e=(t.style.overflow="hidden",this._messageView=e.createElement("span"));e.className="rg-group-panel-message",t.appendChild(e)},a.prototype._doMeasure=function(t,e,i){var o=t.groupingOptions,n=(this._count=t.rowGroupLevels,this.minHeight),r=0,s=this._messageView.style;if(0<this._count?s.display="none":(s.display="",this._messageView[re.Utils.TextProp]=o.prompt,r=this._messageView.offsetHeight,n=Math.max(n,r+2*this._padVert),s.left=this._padHorz+"px",s.top=(n-r)/2+"px"),this.$_prepareItemViews(t,this._count),0<this._count){for(var a=0;a<this._count;a++){var l=(h=this._itemViews[a]).measure(t,e,i);h.width=l.width,r=Math.max(r,l.height)}for(var h,n=Math.max(n,r+2*this._padVert),a=0;a<this._count;a++)(h=this._itemViews[a]).height=r,h.y=(n-r)/2}return new ge.Size(e,n)},a.prototype._doPrepareContent=function(t){},a.prototype._doLayoutContent=function(t){if(0<this._count)for(var e=this._padHorz,i=(this._padVert,0);i<this._count;i++){var o=this._itemViews[i];o.x=e,e+=this._itemGap+o.width}},a.prototype._doDraw=function(t){},a.prototype._visibleChanged=function(){this.grid&&this.grid.invalidateLayout()},a.prototype._doSizeChanged=function(){this.grid&&this.grid.invalidateLayout()},a.prototype.$_prepareItemViews=function(t,e){for(var i=this._itemViews,o=t.rowGroupFields,n=i.length;n<e;n++)i.push(new s(t.doc));for(n=0;n<e;n++){var r=i[n];r.setColumn(t.$_getVisibleRootByField(o[n],!0)),r.visible=!0,this.addChild(r)}for(n=e;n<i.length;n++)this.removeChild(i[n])};var n,r=a;function a(t,e){t=n.call(this,t,e)||this;return t._minHeight=0,t._itemViews=[],t._count=0,t._padHorz=16,t._padVert=10,t._itemGap=20,t.visible=!1,t}e.GroupPanelElement=r})),Ei=(t(Ii),Ii.GroupPanelItemView,Ii.GroupPanelElement,e(function(t,e){Object.defineProperty(e,"__esModule",{value:!0});a=pi.GridBase,ne.__extends(o,a),o.prototype._doDispose=function(){this._rs.dispose(),this._rs=null,this._groupPanelView=this.groupPanelView.dispose(),this._rowGroup=this._rowGroup&&this._rowGroup.dispose(),this._groupingOptions=this._groupingOptions.dispose(),a.prototype._doDispose.call(this)},o.prototype._doCreateOtherElements=function(){this._groupView=new xi.RowGroupElement(this.doc),this.addElement(this._groupView)},_dp(o,"maxRowCount",{get:function(){return this._rs.maxRowCount},set:function(t){this._rs.maxRowCount=t}}),_dp(o,"rowGroup",{get:function(){return this._rowGroup}}),_dp(o,"groupPanelView",{get:function(){return this._groupPanelView}}),_dp(o,"groupBarPane",{get:function(){return this._groupBarPane}}),_dp(o,"groupView",{get:function(){return this._groupView}}),_dp(o,"groupingOptions",{get:function(){return this._groupingOptions}}),_dp(o,"paged",{get:function(){return 0<=this._rs.page}}),_dp(o,"page",{get:function(){return this._rs.page},set:function(t){this.setPage(t)}}),_dp(o,"pageCount",{get:function(){return this._rs.pageCount},set:function(t){var e=this._rs.pageCount;this._rs.pageCount=t,this._rs.pageCount!=e&&this.$_firePageCountChanged(this._rs.pageCount)}}),_dp(o,"rowGroupLevels",{get:function(){return this._rs.groupLevels}}),_dp(o,"rowGroupFields",{get:function(){return this._rs.groupByFields}}),_dp(o,"rowGrouped",{get:function(){return this._rs.grouped}}),_dp(o,"mergedRowGrouped",{get:function(){return this._rs.mergedGrouped}}),_dp(o,"rowGroupSummaryRuntime",{get:function(){return this._rowGroupSummaryRuntime}}),o.prototype.isTree=function(){return!1},o.prototype._beforeChangeLayout=function(){this.ungroupBy()},o.prototype.isGrouped=function(t){return t&&0<t.groupLevel},o.prototype.isGroupedField=function(t){return this._rs.isGroupedField(t)},o.prototype.isSortByLabelColumn=function(t){return this.columnByField(t).sortByLabel},o.prototype.getGroupLevel=function(t){return this._rs.getGroupLevel(t)},o.prototype.groupByFieldNames=function(t,e,i){void 0===i&&(i=ht.SortDirection.ASCENDING);var o=this.dataSource;if(o&&t&&0<t.length){for(var n=[],r=0;r<t.length;r++){var s=t[r],a=o.getFieldIndex(s),s=this.columnByField(s),s=s&&this.layoutByColumn(s);!s||this.rowGroup.mergeMode&&s.parent!=this.activeCellLayout._root||0<=a&&n.push(a)}0<n.length&&(e=void 0===e?this.rowGroup.sorting:e,this.groupBy(n,e,i))}else this.ungroupBy()},o.prototype.groupBy=function(t,e,i){this.isItemEditing(null)||this.toastManager.show(this.groupingOptions.toast,!0,function(){this.$_doGroupBy(t,e,i)}.bind(this))},o.prototype.clearGroupBy=function(){this.isItemEditing(null)||(this._rs.setLabelComparer(null),this._rs.groupBy(null,!0,ht.SortDirection.ASCENDING),this.$_doRowGroupFooterMergeChanged(),this.$_clearColumnMergeGrouped())},o.prototype.ungroupBy=function(){this.clearGroupBy()},o.prototype.addGroupBy=function(t,e){!e||this.isItemEditing(null)||this.isGrouped(e)||e.layout&&e.layout.visible&&(!e.layout.isRoot&&this.rowGroup.mergeMode||0<=e.dataIndex&&this.toastManager.show(this.groupingOptions.toast,!0,function(){this.$_doAddGroupBy(t,e)}.bind(this)))},o.prototype.removeGroupByField=function(t){t<0||this.isItemEditing(null)||this.isGroupedField(t)&&(this._rs.removeGroupBy(t,!1),this.$_doRowGroupFooterMergeChanged())},o.prototype.removeGroupBy=function(t){this.removeGroupByField(t.dataIndex)},o.prototype.expand=function(t,e,i,o){this.isItemEditing(null)||this._rs.expand(t,e,i,o)},o.prototype.expandAll=function(t,e){this.isItemEditing(null)||this._rs.expandAll(t,e)},o.prototype.collapse=function(t,e,i,o){this.isItemEditing(null)||this._rs.collapse(t,e,i,o)},o.prototype.collapseAll=function(t){this.isItemEditing(null)||this._rs.collapseAll(t)},o.prototype.isGroupedColumn=function(t){return t&&0<=t.dataIndex&&this._rs.isGroupedField(t.dataIndex)},o.prototype.getSortFields=function(){return this.itemSource.getSortFields()},o.prototype.getSortDirections=function(){return this.itemSource.getSortDirections()},o.prototype.getSortCases=function(){return this.itemSource.getSortCases()},o.prototype.setPaging=function(t,e,i){this._rs.setPaging(t,e=void 0===e?10:e,i=void 0===i?-1:i,null)},o.prototype.setPage=function(t,e){var i;void 0===e&&(e=-1),(t=Math.max(0,Math.min(t,this._rs.pageCount-1)))!=this._rs.page&&(i=!1,this.$_firePageChanging(t)&&(this._rs.setPage(t,e),i=!0),i)&&this.$_firePageChanged(this._rs.page)},o.prototype.getPageOfDataRow=function(t){return this._rs.getPageOfDataRow(t)},_dp(o,"isLayer",{get:function(){return!1}}),_dp(o,"summarizer",{get:function(){return this._rs.summarizer}}),o.prototype._createSidePane=function(){return this._groupBarPane=new xi.RowGroupBarPane(this.doc)},o.prototype.isSidePaneVisible=function(){return this.rowGrouped&&!this.mergedRowGrouped&&this._rowGroup.indentVisible},o.prototype._createLayoutManager=function(){return new r(this)},o.prototype.canGrouping=function(){return this._groupPanelView.visible},o.prototype._canMerge=function(){return!0},_dp(o,"undoable",{get:function(){return this._rs.undoable},set:function(t){this._rs.undoable=t}}),_dp(o,"canUndo",{get:function(){return this._rs.canUndo}}),_dp(o,"canRedo",{get:function(){return this._rs.canRedo}}),_dp(o,"undoing",{get:function(){return this._rs.undoing}}),_dp(o,"redoing",{get:function(){return this._rs.redoing}}),o.prototype.undo=function(){return!!this._rs.canUndo&&(this._rs.cancelWhenLastUndo=this.editOptions.cancelWhenLastUndo,this.editController.cancelEditor(!0),this._rs.undo(),!0)},o.prototype.redo=function(){return!!this._rs.canRedo&&(this._rs.redo(),!0)},o.prototype.execute=function(t){this._rs.execute(t)},o.prototype.clearCommandStack=function(t){this._rs.clearCommandStack(t=void 0===t?!0:t)},o.prototype.getRowView=function(t,e){return e instanceof rt.GroupItemImpl?this._groupView.getHeaderView(e):a.prototype.getRowView.call(this,t,e)},o.prototype._doSortItems=function(t,e,i){var o=this.itemSource;o.setLabelComparer(this._doPrepareComparer(t)),o.orderBy(t,e,i)},o.prototype._doColumnFiltersChanged=function(t,e){this.applyFilters(t,e),this.invalidateLayout()},o.prototype.setOptions=function(t){var e;t&&(e=this._rs,void 0!==t.hideDeleted&&(e.hideDeleted=t.hideDeleted),void 0!==t.hideDeletedRows&&(e.hideDeleted=t.hideDeletedRows),void 0!==t.inclusiveFiltering&&(e.inclusiveFiltering=t.inclusiveFiltering),void 0!==t.filterOr&&(e.inclusiveFiltering=t.filterOr),void 0!==t.summaryMode&&(e.summaryMode=t.summaryMode),void 0!==t.groupSummaryMode&&(e.groupSummaryMode=t.groupSummaryMode),void 0!==t.sortMode&&(e.sortMode=t.sortMdoe),void 0!==t.filterMode&&(e.filterMode=t.filterMode),a.prototype.setOptions.call(this,t))},o.prototype._visualObjectChanged=function(t){a.prototype._visualObjectChanged.call(this,t),t instanceof le.CheckBar&&(this._rs.checkableExpression=t.checkableExpression)},o.prototype.resetCheckables=function(){this._rs.resetCheckables()},o.prototype.applyCheckables=function(){this._rs.applyCheckables()},o.prototype.getCheckedRows=function(t,e,i){var o;if(e)for(var n=[],r=0,s=this.itemCount;r<s;r++)(o=this.getItem(r)).checked&&0<=o.dataRow&&n.push(o.dataRow);else n=this._rs.getCheckedRows(i);return t&&n.sort(function(t,e){return t-e}),n},o.prototype.getCheckedItemIndices=function(t){for(var e=[],i=0,o=this.itemCount;i<o;i++){var n=this.getItem(i);n.checked&&(t||0<=n.dataRow)&&e.push(n.index)}return e},o.prototype.getCheckedItems=function(t){for(var e=[],i=0,o=this.itemCount;i<o;i++){var n=this.getItem(i);n.checked&&(t||0<=n.dataRow)&&e.push(n)}return e},o.prototype.getMergedItems=function(t,e,i,o){var n=function(){return a.index<d?h.mergeRows?s.$_checkFixedMerge(this.itemSource,r,t,d):null:s.$_checkMerge(this.itemSource,r,t,!0,d)}.bind(this),r=e instanceof lt.DataColumn?e:this.columnByName(e),e=r.layout,s=e.merges,a=this.getItem(t);if(a){if(!s)return!o||i&&!a.isDataRow?null:[a.index];var l,h=this.fixedOptions,d=h.rowCount,u=n();if(u||((0<(l=this.getGroupLevel(r.dataIndex))&&r.mergeGrouped&&!this.isTree()?Kt.RowGroupMergeRule.getDefault(l,this.rowGroup.mergeMode):e.$_mergeRuleObj()).parseBounds(this.itemSource,r.dataIndex,0,this.itemCount-1,s._flags),u=n()),!u&&o)return[t];if(u){for(var c=[],_=u.top;_<=u.bottom;_++)!this.getItem(_).isDataRow&&i||c.push(_);return 0<c.length?c:null}}return null},o.prototype.findGroupItem=function(t,e){var i=this.getGroupLevel(e);if(0<i)for(var o=t instanceof rt.GroupItem?t:t.parent;o;){if(o.level==i)return o;o=o.parent}return null},o.prototype.getItemOfModel=function(t){return 0<=t.itemIndex?this.getItem(t.itemIndex):0<=t.id?this._rs.getGroupItem(t.id):null},o.prototype.getJsonRows=function(){return this._rs.getJsonRows()},o.prototype.getIndicatorIndex=function(t){return this._rs.getDisplayItemIndex(t)},o.prototype.getFirstRow=function(){return this._rs.getFirstRow()},o.prototype.getLastRow=function(){return this._rs.getLastRow()},o.prototype.getPrevRow=function(t){return this._rs.getPrevRow(t)},o.prototype.getNextRow=function(t){return this._rs.getNextRow(t)},o.prototype.canMoveRows=function(t,e,i){if(i&&this.canMoveRow(e,!1)&&t){for(var o=!1,n=0;n<t.length;n++){var r=t[n];r&&r.isDataRow&&(o=!0)}return o}},o.prototype._getMoveTarget=function(t,e,i,o){return this.getItem(i+o)},o.prototype._doMoveRows=function(t,e){e=e&&e.dataRow;if(0<=e){for(var i=[],o=0,n=t;o<n.length;o++){var r=n[o],r=r&&r.dataRow;0<=r&&i.push(r)}if(0<i.length)return this.dataSource.moveRowList(i,e)}},o.prototype._getCellTypeOf=function(t){return t instanceof xi.RowGroupHeadElement?"groupHead":t instanceof xi.RowGroupFootElement?"groupFoot":t instanceof xi.RowGroupBarContainer?"groupBar":void 0},o.prototype.updatePastedRow=function(t,e,i){var o,t=t.dataRow;0<=t&&(o=this.dataSource)&&o.updateRow(t,e,i)},o.prototype.appendPastedRow=function(t){var e=this.dataSource;e&&e.appendRow(t)},o.prototype.getSummaryCount=function(t){return"groupFooter"===t?this.rowGroup.footers.count:a.prototype.getSummaryCount.call(this,t)},o.prototype._createItemSource=function(){return new Ci.GridItemProvider(!0,this._rowGroup)},o.prototype.$_rowGroupChanged=function(t){this._doRowGroupMergeModeChanged()},o.prototype._groupingOptionsChanged=function(t){this._rs.expandWhenGrouping=t.expandWhenGrouping},o.prototype.$_rowGroupAdornmentsChanged=function(t,e){this._rs._groupedProvider.resetAdornments(this.handler,t,e)},o.prototype.$_getVisibleRootByField=function(t,e){for(var i=this.visibleLayoutCount,o=0;o<i;o++){var n=this.getVisibleLayout(o),n=n instanceof ct.CellLayoutColumnItem&&re.Utils.cast(n.firstColumn,lt.DataColumn);if(n&&n.dataIndex==t)return n}return e?this.columnByField(t):null},o.prototype.$_clearColumnMergeGrouped=function(){this._activeCellLayout._clearMergeGrouped()},o.prototype._doRowGroupMergeModeChanged=function(){a.prototype._doRowGroupMergeModeChanged.call(this),this.$_clearColumnMergeGrouped();var t=this._rs.groupByFields;if(this.rowGroup.mergeMode){if(t&&0<t.length)for(var e=t.length-1;0<=e;e--){var i=this.$_getVisibleRootByField(t[e],!1);i?i.$_setMergeGrouped(!0):t.splice(e,1)}this._rs.groupByMode(t,!0)}else this._rs.groupByMode(t,!1)},o.prototype.$_doRowGroupFooterMergeChanged=function(){},o.prototype.$_doGroupBy=function(t,e,i){var o,n=this.dataSource;if(this.$_clearColumnMergeGrouped(),n&&t&&0<(o=t.length)){for(var r=n.fieldCount,s=[],a=0;a<o;a++)0<=t[a]&&t[a]<r&&s.push(t[a]);if(0<s.length){if(this.rowGroup.mergeMode)for(a=s.length-1;0<=a;a--){var l=this.$_getVisibleRootByField(s[a],!1);l?l.$_setMergeGrouped(!0):s.splice(a,1)}0<s.length&&(this._rs.setLabelComparer(this._doPrepareComparer(s)),this._rs.groupBy(s,e,i))}}else this._rs.setLabelComparer(null),this._rs.groupBy(null,!0,ht.SortDirection.ASCENDING);this.$_doRowGroupFooterMergeChanged()},o.prototype.$_doAddGroupBy=function(t,e){var i=e.dataIndex;e.$_setMergeGrouped(this.rowGroup.mergeMode);try{var o=this.rowGroupFields?this.rowGroupFields.slice():[];o.push(i),this._rs.setLabelComparer(this._doPrepareComparer(o)),this._rs.addGroupBy(t,i,this.rowGroup.sorting),this.$_doRowGroupFooterMergeChanged()}catch(t){throw e.$_setMergeGrouped(!1),t}},o.prototype.$_clearGroupedIndices=function(){for(var t=this.columnCount-1;0<=t;t--){var e=re.Utils.cast(this.getColumn(t),lt.DataColumn);e&&e.$_setGroupLevel(this._rs.getGroupLevel(-1))}},o.prototype.$_setGroupedIndices=function(){for(var t=this.columnCount-1;0<=t;t--){var e=re.Utils.cast(this.getColumn(t),lt.DataColumn);e&&e.$_setGroupLevel(this._rs.getGroupLevel(e.dataIndex))}},o.prototype.$_firePageChanging=function(t){return this.fireConfirmEvent(o.PAGE_CHANGING,t)},o.prototype.$_firePageChanged=function(t){this.fireEvent(o.PAGE_CHANGED,t)},o.prototype.$_firePageCountChanged=function(t){this.fireEvent(o.PAGE_COUNT_CHANGED,t)},o.prototype.$_fireGrouping=function(t){return this.fireConfirmEvent(o.GROUPING,t)},o.prototype.$_fireGrouped=function(){this.fireEvent(o.GROUPED)},o.prototype.$_fireExpanding=function(t){return this.fireConfirmEvent(o.EXPANDING,t)},o.prototype.$_fireExpanded=function(t){this.fireEvent(o.EXPANDED,t)},o.prototype.$_fireCollapsing=function(t){return this.fireConfirmEvent(o.COLLAPSING,t)},o.prototype.$_fireCollapsed=function(t){this.fireEvent(o.COLLAPSED,t)},o.prototype.onGroupedItemProviderGrouping=function(t,e){return this.$_fireGrouping(e)},o.prototype.onGroupedItemProviderGrouped=function(t){this.selections.clear(),this.$_clearGroupedIndices();var e=this._rs.groupByFields;if(e&&0<e.length&&this.$_setGroupedIndices(),this.rowGroup.mergeMode){for(var i=[],o=this.visibleLayoutCount,n=0;n<o;n++){var r=this.getVisibleLayout(n),s=re.Utils.cast(r.firstColumn,lt.DataColumn),a=r.merges;s&&(s.mergeGrouped&&s.groupLevel<=0?(a&&a.clear(),s.$_setMergeGrouped(!1)):s.mergeGrouped&&(a=a||new Kt.ColumnMergeManager(r),i.push(s)))}if(0<(o=i.length))for(i=i.sort(function(t,e){return t.groupLevel-e.groupLevel}),n=0;n<o;n++)(a=i[n].layout.merges).clear(),a.initialize(Kt.GridMergeRule.INIT_COUNT),i[n].layout.vindex=n;for(o=this.visibleLayoutCount,n=0;n<o;n++)(s=re.Utils.cast(this.getVisibleLayout(n).firstColumn,lt.DataColumn))&&!s.mergeGrouped&&(a=s.layout.merges)&&(a.clear(),a.initialize(Kt.GridMergeRule.INIT_COUNT))}this.requestPrepareEditor(),this._syncHeadCheck([]),this.$_fireGrouped(),this._cellLayoutChanged(),this.container.defaultTool.layoutChanged()},o.prototype.onGroupedItemProviderExpand=function(t,e){return this.$_fireExpanding(e)},o.prototype.onGroupedItemProviderExpanded=function(t,e){this.$_fireExpanded(e)},o.prototype.onGroupedItemProviderCollapse=function(t,e){return this.$_fireCollapsing(e)},o.prototype.onGroupedItemProviderCollapsed=function(t,e,i){var o;i&&this.topIndex>e.getFirstVisibleItem(!1).index&&e instanceof q.MergedGroupHeader&&(i=e.getFirstVisibleItem(!1),o=this.layoutByColumn(this.columnByField(e.groupField)),i=_t.DummyCellIndex.tempItem(this,i,o),_t.CellIndex.areEquals(this.focusedIndex,i)?this.topIndex=i.itemIndex:this.setFocusedIndex(i)),this.$_fireCollapsed(e)},o.PAGE_CHANGING="onGridViewPageChanging",o.PAGE_CHANGED="onGridViewPageChanged",o.PAGE_COUNT_CHANGED="onGridViewPageCountChanged",o.GROUPING="onGridViewGrouping",o.GROUPED="onGridViewGrouped",o.EXPANDING="onGridViewExpanding",o.EXPANDED="onGridViewExpanded",o.COLLAPSING="onGridViewCollapsing",o.COLLAPSED="onGridViewCollapsed";var a,i=o;function o(t,e,i){for(var o=a.call(this,t,e,i)||this,n=(o._rowGroupSummaryRuntime=new Zt.RowGroupSummaryRuntime,o._addGridObject(o._rowGroup=new si.RowGroup(o)),o._rs=o._createItemSource(),o.itemSource=o._rs,o._groupingOptions=new bi.GroupingOptions(o),o._groupingOptionsChanged(o._groupingOptions),o._groupPanelView=new Ii.GroupPanelElement(o.doc,o.rowGroup),o.topContentPane.addChild(o._groupPanelView),[o._groupBarPane._headView,o._groupBarPane._footView,o._groupBarPane._barContainer]),r=n.length-1;0<=r;r--){var s=n[r];o._tableViews[s.$_hash]=s}return o}e.GridView=i;n=we.GridLayoutManager,ne.__extends(s,n),_dp(s,"panelVisible",{get:function(){return this.grid.groupPanelView.visible}}),s.prototype.getLevelIndent=function(t){var e=this.grid;if(this.mergedRowGrouped){for(var i=this.fixedLayoutCount,o=0,n=0;n<t;n++)o+=n<i?this.getFixedLayoutWidth(n):this.getLayoutWidth(n-i);return i?i<t?o=Math.max(this.fixedWidth,o+this.fixedBarWidth-this.leftPos):t===i&&(o+=this.fixedBarWidth):o-=this.leftPos,o}return e.rowGroup.indentVisible?e.groupBarPane.getLevelIndent(t):0},_dp(s,"grid",{get:function(){return this._grid}}),_dp(s,"topPanelVisible",{get:function(){return this.panelVisible}}),_dp(s,"rowGrouped",{get:function(){return!this.grid.rowGroup.mergeMode&&this.grid.rowGrouped}}),_dp(s,"mergedRowGrouped",{get:function(){return this.grid.rowGroup.mergeMode&&this.grid.rowGrouped}}),_dp(s,"rowGroupLevels",{get:function(){return this.grid.rowGroupLevels}}),_dp(s,"rowGroupFields",{get:function(){return this.grid.rowGroupFields}}),s.prototype.$_groupView=function(t){return this.grid.groupView},s.prototype.setLeftPos=function(t,e){n.prototype.setLeftPos.call(this,t,e);t=this.grid,e=t.mergedRowGrouped,e=this.$_groupView(e);e.visible&&this.$_layoutRowGroupView(t,e)},s.prototype._prepareItems=function(t){n.prototype._prepareItems.call(this,t);var e,i,o,t=this.grid;t.rowGrouped&&(e=t.mergedRowGrouped,e=this.$_groupView(e),i=this.contentBounds.isEmpty?null:t.bodyView,o=this.fixedContentBounds.isEmpty?null:t.fixedBodyView,t=this.rightContentBounds.isEmpty?null:t.rightBodyView,e.$_prepareGroupItems(this,i,o,t),e.$_prepareGroupFooters(this._items,this))},s.prototype._doMeasureTopPane=function(t,e){var i=t.groupPanelView;this.panelVisible?(i=i.measure(t,e.width,e.height),e.height=i.height):(e.height=1,e.width=1)},s.prototype._doLayoutTopPane=function(t,e){t=t.groupPanelView;t.setBounds(0,0,e.width,e.height),this.panelVisible&&t.layoutContent(this)},s.prototype._doLayout=function(t,e){n.prototype._doLayout.call(this,t,e)},s.prototype._adjustLayout=function(t,e){n.prototype._adjustLayout.call(this,t,e);var e=t.rowGrouped,i=t.mergedRowGrouped,o=t._sideContentPane,o=(o&&this._layoutSidePane(t,o),this.$_groupView(i));this.$_groupView(!i).visible=!1,(o.visible=e)&&this.$_layoutRowGroupView(t,o)},s.prototype.isMergedCell=function(t){var e=this.grid;if(e.rowGroup.mergeMode&&e.isGroupedColumn(t.dataColumn))return!0;e=t.layout;if(e&&e.isColumn&&t.layout.merged){e=e.merges;if(e)return null!=e.getRoom(t)}return!1},s.prototype.$_layoutRowGroupView=function(t,e){var i=this.contentBounds,o=this.sideContentBounds.clone();o.top=i.y+this.bodyBounds.y,o.right=this.rightContentBounds.right,o.bottom=Math.min(this.footBounds.y+i.y,i.bottom),e.setRect(o),e.layout(this)};var n,r=s;function s(t){return n.call(this,t)||this}e.GridViewLayoutManager=r;l=R.GridSelectionTool,ne.__extends(h,l),h.prototype._doDispose=function(){this._panelCellReq=null,l.prototype._doDispose.call(this)},h.prototype._doMouseDown=function(t){var e=this.grid,i=this.mouseEventTarget;if(i instanceof re.getWin(t.target).HTMLElement&&(X.RowElement.isExpander(i)||xi.RowGroupExpandHandle.isExpander(i))){var o=this._findTableCell(i),n=e.getTableView(o);if(X.RowElement.isExpander(i)&&n instanceof gt.GridBodyElement){var o=e.getDataCellIndex(o,this._tempIndex),o=n.getCellAt(e.layoutManager,o),r=e.findGroupItem(o.item,o.layout.firstColumn.dataIndex);this.$_toggleExpanded(e,r,t)}else if(xi.RowGroupExpandHandle.isExpander(i)&&n instanceof xi.RowGroupBarContainer)return o=n.getViewOf(i),void((r=(r=e.getItem(i[ht.T_ROW])).getAncestor(o.level))instanceof rt.GroupItemImpl&&this.$_toggleExpanded(e,r,t))}l.prototype._doMouseDown.call(this,t)},h.prototype._doClick=function(t){var e=t.mouseX,i=t.mouseY,o=this.grid,e=this.findElementAt(e,i,!1);e instanceof Ii.GroupPanelItemView&&e.isCloseButton(t.target)&&o.removeGroupByField(e.field),l.prototype._doClick.call(this,t)},h.prototype._doDblClick=function(t){var e=t.mouseX,i=t.mouseY,o=this.grid,e=this.findElementAt(e,i,!1);e instanceof xi.RowGroupHeaderElement&&o.groupingOptions.headerClickable?this.$_toggleExpanded(o,e.item,t):l.prototype._doDblClick.call(this,t)},h.prototype._getEditRequest=function(t,e,i,o,n,r,s){e=l.prototype._getEditRequest.call(this,t,e,i,o,n,r,s);if(e)return e;n=this.grid,r=this.findElementAt(i,o,!1),s=this._findTableCell(t),e=s&&n.getTableView(s);if(e instanceof Ce.HeaderElement){t=e.layoutByCell(s),e=t.firstColumn;if(n.groupPanelView.visible&&e&&e.groupable&&n.groupingOptions.enabled)return s=n.layoutManager.getHeaderCellRect(t),this._groupingReq.init(t,s,i,o)}return r instanceof Ii.GroupPanelItemView?this._panelCellReq.init(r,i,o):void 0},h.prototype._getDragTracker=function(t,e,i){var o=this.grid;return t instanceof u?new m(o,t,this._panelCellFeedback):t instanceof C?new b(o,t,this._panelCellFeedback):l.prototype._getDragTracker.call(this,t,e,i)},h.prototype.getNextRequest=function(t,e,i,o){if(t instanceof j.ColumnMoveRequest&&t.layout instanceof ct.CellLayoutColumnItem){var n=this.grid,r=t.layout.firstColumn;if(n.groupingOptions.enabled&&n.layoutManager.topPanelVisible&&r instanceof lt.DataColumn&&r.groupable&&o+3<n.groupPanelView.bottom)return this._groupingReq.init(t.layout,e,i,o)}},h.prototype._getClickData=function(t,e){var i;return t instanceof xi.RowGroupHeaderElement?R.ClickData.getItem("groupHeader",t.itemIndex,null):t instanceof Ii.GroupPanelElement?R.ClickData.getData("groupPanel"):t instanceof Ii.GroupPanelItemView?t.isCloseButton(e.target)?void 0:(i=this.grid.dataSource.getOrgFieldName(t.field),R.ClickData.getField("groupColumn",t.field,i)):l.prototype._getClickData.call(this,t,e)},h.prototype.$_toggleExpanded=function(t,e,i){e.expanded?t.collapse(e,!1,!1,i):t.expand(e,!1,!1,0)};var l,i=h;function h(t){var e=l.call(this,t,"gridSelectionTool")||this;return e._panelCellReq=new u,e._panelCellFeedback=new p(t.doc),e._groupingReq=new C,e}e.GridViewSelectionTool=i;d=De.EditRequest,ne.__extends(c,d),_dp(c,"source",{get:function(){return this._source}}),_dp(c,"x",{get:function(){return this._x}}),_dp(c,"y",{get:function(){return this._y}}),_dp(c,"field",{get:function(){return this._field}}),c.prototype.init=function(t,e,i){return this._source=t,this._x=e,this._y=i,this._field=t.field,this},_dp(c,"cursor",{get:function(){return"pointer"}});var d,u=c;function c(){var t=d.call(this)||this;return t._field=-1,t}_=pt.VisualElement,ne.__extends(f,_),f.prototype.setField=function(t,e){void 0===e&&(e=!1),this._textView[re.Utils.TextProp]=t,this._noMark.style.display=(this._no=e)?"inline-block":"none"},f.prototype._getCssSelector=function(){return"rg-header rg-header-cell rg-group-panel-item rg-group-panel-cell-feedback"},f.prototype._initDom=function(t){_.prototype._initDom.call(this,t);var e=this.doc;this._textView=e.createElement("span"),this._textView.className="rg-group-panel-item-text",this._textView.style.display="inline-block",t.appendChild(this._textView),this._noMark=e.createElement("span"),this._noMark.className="rg-group-panel-no-mark",this._noMark.style.display="none",t.appendChild(this._noMark)},f.prototype._doDraw=function(t){var e=this._textView.offsetWidth,i=this._textView.offsetHeight,o=this._textView.style;o.left=Math.max(0,(this.width-e)/2)+"px",o.top=Math.max(0,(this.height-i)/2)+"px",this._no&&(e=this._noMark.offsetWidth,i=this._noMark.offsetHeight,(o=this._noMark.style).left=Math.max(0,(this.width-e)/2)+"px",o.top=Math.max(0,(this.height-i)/2)+"px")};var _,p=f;function f(t){t=_.call(this,t)||this;return t._no=!1,t}g=Re.GridDragTracker,ne.__extends(y,g),y.prototype._doDispose=function(){this._request=null,this._feedback=null,g.prototype._doDispose.call(this)},y.prototype.getRequest=function(){return this._request},y.prototype._doStart=function(t,e,i,o){var n=this.grid,r=this._request.source.boundsByContainer();return this._feedback.setRect(r),this._feedback.setField(this._request.source.text),this._feedback.visible=!0,n.addFeedbackElement(this._feedback),this._offsetX=e-r.x,this._offsetY=i-r.y,!0},y.prototype._doDrag=function(t,e,i){return e-=this._offsetX,i-=this._offsetY,this._feedback.move(e,i),!0},y.prototype._doCompleted=function(){var t=this.grid,e=t.layoutManager;this.currentY>e.contentBounds.y&&t.removeGroupByField(this._request.field)},y.prototype._doEnded=function(){this.grid.removeFeedbackElement(this._feedback)};var g,m=y;function y(t,e,i){t=g.call(this,t,"groupPanelCellTracker")||this;return t._request=e,t._feedback=i,t}v=De.EditRequest,ne.__extends(w,v),w.prototype._doDispose=function(){this._layout=null,this._source=null,v.prototype._doDispose.call(this)},_dp(w,"layout",{get:function(){return this._layout}}),_dp(w,"source",{get:function(){return this._source}}),_dp(w,"x",{get:function(){return this._x}}),_dp(w,"y",{get:function(){return this._y}}),w.prototype.init=function(t,e,i,o){return this._layout=t,this._source=e,this._x=i,this._y=o,this},_dp(w,"cursor",{get:function(){return"pointer"}});var v,C=w;function w(){return v.call(this)||this}x=Re.GridDragTracker,ne.__extends(I,x),I.prototype._doDispose=function(){this._request=null,this._feedback=null,x.prototype._doDispose.call(this)},I.prototype.getRequest=function(){return this._request},I.prototype._doStart=function(t,e,i,o){var n=this.grid,r=this._request.source,r=r instanceof pt.VisualElement?r.boundsByContainer():r,s=n.isGroupedField(this._request.layout.firstColumn.dataIndex);return this._feedback.setRect(r),this._feedback.setField(this._request.layout.firstColumn.displayText,s),this._feedback.visible=!0,n.addFeedbackElement(this._feedback),this._offsetX=e-r.x,this._offsetY=r.height/3,!0},I.prototype._doDrag=function(t,e,i){return e-=this._offsetX,i-=this._offsetY,this._feedback.move(e,i),!0},I.prototype._doCompleted=function(){var t,e=this.grid,i=e.layoutManager;this.currentY<i.contentBounds.y&&(t=e.$_getVisibleRootByField(this._request.layout.firstColumn.dataIndex,!0),e.addGroupBy(i.rowGroupLevels,t))},I.prototype._doEnded=function(){this.grid.removeFeedbackElement(this._feedback)};var x,b=I;function I(t,e,i){t=x.call(this,t,"groupingCellTracker")||this;return t._request=e,t._feedback=i,t}})),Si=(t(Ei),Ei.GridView,Ei.GridViewLayoutManager,Ei.GridViewSelectionTool,e(function(t,e){Object.defineProperty(e,"__esModule",{value:!0});i=P.EventAware,ne.__extends(n,i),n.prototype._doDispose=function(){this._header=this._header.dispose(),this._footer=this._footer.dispose(),this._body=this._body.dispose(),i.prototype._doDispose.call(this)},n.prototype.itemVisibleChanged=function(t){},n.prototype.itemChanged=function(t){},_dp(n,"header",{get:function(){return this._header}}),_dp(n,"footer",{get:function(){return this._footer}}),_dp(n,"body",{get:function(){return this._body}}),_dp(n,"itemCount",{get:function(){return this._items.length}}),_dp(n,"visibleItemCount",{get:function(){return this._visibleItems.length}}),n.prototype.load=function(t){t&&(t.title&&this._header.assignFrom(t.title),t.footer&&this._footer.assignFrom(t.footer),t.body&&this._body.assignFrom(t.body),re.Utils.isArray(t.items)&&this.$_loadItems(t.items,this._items=[]),this._itemChanged=!0,this._changed())},n.prototype.getItem=function(t){return this._items[t]},n.prototype.getVisibleItem=function(t){return this._visibleItems[t]},n.prototype._changed=function(){this.fireEvent(n.CHANGED)},n.prototype.$_loadItems=function(t,e,i){void 0===i&&(i=null);for(var o=0,n=t;o<n.length;o++){var r,s,a=n[o];a&&(r=void 0,!i&&re.Utils.isArray(a.items)?(s=r=new R,this.$_loadItems(a.items,s._items,s)):"string"==typeof a.template?r=new L:"string"!=typeof a.column&&"string"!=typeof a||(r=new k),r.assignFrom(a),r)&&(i?(i._items.push(r),r.$_attached(i)):(this._items.push(r),r.$_attached(this)))}},n.prototype.$_refreshItems=function(){var t=this._items;if(t)for(var e=t.length-1;0<=e;e--){var i=t[e];i._index=e,i._vindex=-1,i.$_refresh(this)}},n.prototype.$_resetvisibles=function(){for(var t=this._visibleItems=[],e=0,i=this._items;e<i.length;e++){var o=i[e];if(o.visible&&(t.push(o),o._vindex=t.length-1,o instanceof R)&&o.expanded)for(var n=0,r=o._items;n<r.length;n++){var s=r[n];s.visible&&(t.push(s),s._vindex=t.length-1)}}},n.prototype.$_prepareLayout=function(){this._itemChanged?(this.$_refreshItems(),this._itemChanged=!1,this.$_resetvisibles(),this._visibleChanged=!1):this._visibleItems&&(this.$_resetvisibles(),this._visibleChanged=!1)},n.CHANGED="onFormChanged";var i,o=n;function n(){var t=i.call(this)||this;return t._modal=!1,t._items=[],t._itemChanged=!1,t._visibleChanged=!1,t._visibleItems=[],t._header=new u(t),t._footer=new m(t),t._body=new p(t),t}e.Form=o;r=se.Base,ne.__extends(s,r),s.prototype._doDispose=function(){r.prototype._doDispose.call(this)},s.prototype._changed=function(){};var r,o=s;function s(){return r.call(this)||this}e.FormObject=o;a=o,ne.__extends(h,a),h.prototype._doDispose=function(){a.prototype._doDispose.call(this)},_dp(h,"owner",{get:function(){return this._owner}}),_dp(h,"visible",{get:function(){return this._visible},set:function(t){t!=this._visible&&(this._visible=t,this._changed())}}),_dp(h,"styleName",{get:function(){var t=this._getDefaultStyle();return this._styleName&&(t+=" "+this._styleName),t}}),h.prototype._changed=function(){a.prototype._changed.call(this)};var a,l=h;function h(t){var e=a.call(this)||this;return e._visible=!0,e._styleName="",e._owner=t,e}e.FormSection=l;d=l,ne.__extends(c,d),c.prototype._doDispose=function(){d.prototype._doDispose.call(this)},_dp(c,"height",{get:function(){return this._height},set:function(t){t!=this._height&&(this._height=t,this._changed())}}),_dp(c,"labelCell",{get:function(){return this._labelCell},set:function(t){this._labelCell=t="string"==typeof t?{displayText:t}:t}}),_dp(c,"valueCell",{get:function(){return this._valueCell},set:function(t){this._valueCell=t="string"==typeof t?{displayText:t}:t}}),c.prototype._getDefaultStyle=function(){return c.STYLE_NAME},c.STYLE_NAME="rg-form-header";var d,u=c;function c(t){t=d.call(this,t)||this;return t._height=24,t._labelCell={displayText:"Field"},t._valueCell={displayText:"Value"},t}e.FormHeader=u;_=l,ne.__extends(f,_),f.prototype._doDispose=function(){_.prototype._doDispose.call(this)},_dp(f,"minRowHeight",{get:function(){return this._minRowHeight},set:function(t){t!=this._minRowHeight&&(this._minRowHeight=t,this._changed())}}),f.prototype._getDefaultStyle=function(){return f.STYLE_NAME},f.STYLE_NAME="rg-form-body";var _,p=f;function f(t){t=_.call(this,t)||this;return t._minRowHeight=24,t}e.FormBody=p;g=l,ne.__extends(y,g),y.prototype._doDispose=function(){g.prototype._doDispose.call(this)},_dp(y,"height",{get:function(){return this._height},set:function(t){t!=this._height&&(this._height=t,this._changed())}}),_dp(y,"popupMenu",{get:function(){return this._popupMenu},set:function(t){t!=this._popupMenu&&(this._popupMenu=t,this._popupMenuName="string"==typeof t?t:null)}}),y.prototype.getPopupMenuName=function(t){return this._popupMenuName||(this._popupMenu?(this._popupMenuName="form_footer_menu",t.addPopupMenu(this._popupMenuName,this._popupMenu,!0),this._popupMenuName):null)},y.prototype._getDefaultStyle=function(){return y.STYLE_NAME},y.STYLE_NAME="rg-form-footer";var g,m=y;function y(t){t=g.call(this,t)||this;return t._height=26,t}e.FormFooter=m;v=se.Base,ne.__extends(C,v),C.prototype._doDispose=function(){v.prototype._doDispose.call(this)},_dp(C,"visible",{get:function(){return this._visible},set:function(t){t!=this._visible&&(this._visible=t)}}),_dp(C,"vindex",{get:function(){return this._vindex}}),C.prototype.canEdit=function(){return!1},C.prototype.$_attached=function(t){this._group=t},C.prototype._changed=function(){},C.prototype._headerChanged=function(){this._changed()},C.prototype.$_refresh=function(t){},C.prototype.$_prepareLayout=function(t,e,i){this._doPrepare(t,e,i)},C.prototype._doPrepare=function(t,e,i){};var v,l=C;function C(){var t=v.call(this)||this;return t._visible=!0,t._height=0,t._vindex=-1,t}e.FormItem=l;w=o,ne.__extends(b,w),b.prototype._doDispose=function(){this._owner=null,w.prototype._doDispose.call(this)},_dp(b,"text",{get:function(){return this._text},set:function(t){t!=this._text&&(this._text=t,this._changed())}}),_dp(b,"owner",{get:function(){return this._owner}}),_dp(b,"displayText",{get:function(){return this._text||this._owner.displayLabel}}),b.prototype.doAssignSimple=function(t){if("string"==typeof t)return this._text=t,!0},b.prototype._changed=function(){this._owner&&this._owner._headerChanged()};var w,x=b;function b(t){var e=w.call(this)||this;return e._text="",e._owner=t,e}e.FormItemHeader=x;I=l,ne.__extends(E,I),E.prototype._doDispose=function(){I.prototype._doDispose.call(this)},_dp(E,"header",{get:function(){return this._header}}),_dp(E,"renderer",{get:function(){return this._renderer},set:function(t){this._renderer=t,this._changed()}}),_dp(E,"valueChanged",{get:function(){return!1}}),E.prototype.assignFrom=function(t){I.prototype.assignFrom.call(this,t),t.header&&this._header.assignFrom(t.header)};var I,o=E;function E(){var t=I.call(this)||this;return t._header=new x(t),t}e.FormValueItem=o;S=l,ne.__extends(T,S),T.prototype._doDispose=function(){S.prototype._doDispose.call(this)},T.prototype.itemVisibleChanged=function(t){this._group&&this._group.itemVisibleChanged(this)},T.prototype.itemChanged=function(t){this._group&&this._group.itemChanged(this)},_dp(T,"expanded",{get:function(){return this._expanded}}),T.prototype.expand=function(){return!this._expanded&&(this._expanded=!0)},T.prototype.collapse=function(){return!!this._expanded&&!(this._expanded=!1)},T.prototype._doPrepare=function(t,e,i){};var S,R=T;function T(){var t=S.call(this)||this;return t._items=[],t._expanded=!0,t}e.FormItemGroup=R;D=o,ne.__extends(M,D),M.prototype._doDispose=function(){D.prototype._doDispose.call(this)},_dp(M,"column",{get:function(){return this._column},set:function(t){t!=this._column&&(this._column=t,this._changed())}}),_dp(M,"editor",{get:function(){return this._editor},set:function(t){this._editor=t,this._changed()}}),_dp(M,"button",{get:function(){return this._button},set:function(t){t!=this._button&&(this._button=t,this._changed())}}),_dp(M,"buttonVisibility",{get:function(){return this._buttonVisibility},set:function(t){t!=this._buttonVisibility&&(this._buttonVisibility=t,this._changed())}}),_dp(M,"editButtonVisibility",{get:function(){return this._editButtonVisibility},set:function(t){t!=this._editButtonVisibility&&(this._editButtonVisibility=t,this._changed())}}),M.prototype.doAssignSimple=function(t){if("string"==typeof t)return this.column=t,!0},_dp(M,"displayLabel",{get:function(){return this._columnObj&&this._columnObj.displayText}}),_dp(M,"value",{get:function(){return""}}),M.prototype._doPrepare=function(t,e,i){this._columnObj=e.getColumnObject(this._column)};var D,k=M;function M(){var t=D.call(this)||this;return t._editButtonVisibility=ht.ButtonVisibility.ALWAYS,t}e.FormColumnItem=k;F=o,ne.__extends(O,F),O.prototype._doDispose=function(){F.prototype._doDispose.call(this)},_dp(O,"template",{get:function(){return this._template},set:function(t){t!=this._template&&(this._template=t,this._dirty=!0,this._changed())}}),_dp(O,"valueField",{get:function(){return this._valueField},set:function(t){t!=this._valueField&&(this._valueField=t,this._valueIndex=-99,this._changed())}}),_dp(O,"displayLabel",{get:function(){return this._valueField}}),_dp(O,"value",{get:function(){return"Template"}}),O.prototype._doPrepare=function(t,e,i){this._valueIndex<-1&&(this._valueIndex=e.getDataFieldIndex(this._valueField))};var F,L=O;function O(){var t=F.call(this)||this;return t._dirty=!1,t._valueIndex=-1,t}e.FormTemplateItem=L})),Ri=(t(Si),Si.Form,Si.FormObject,Si.FormSection,Si.FormHeader,Si.FormBody,Si.FormFooter,Si.FormItem,Si.FormItemHeader,Si.FormValueItem,Si.FormItemGroup,Si.FormColumnItem,Si.FormTemplateItem,e(function(t,e){Object.defineProperty(e,"__esModule",{value:!0});o=De.VisualTool,ne.__extends(n,o),n.prototype._doDispose=function(){this._focusMask=this._focusMask.dispose(),this._colResizeReq=this._colResizeReq.dispose(),o.prototype._doDispose.call(this)},_dp(n,"form",{get:function(){return this._form}}),_dp(n,"grid",{get:function(){return this._form.container.gridView}}),n.prototype.focuseIndexChanging=function(t){},n.prototype.focusedChanged=function(t,e){this.$_resetFocusView()},n.prototype.resetFocused=function(){this.$_resetFocusView()},n.prototype._doSetFocus=function(t){re.Utils.isMobile()||this.grid.editController.setFocus(!0,t)},n.prototype._doFocusLeave=function(){},n.prototype._doKeyDown=function(t){var e=t.keyCode,i=t.ctrlKey,t=(t.shiftKey,this._form),o=t.options,n=this.grid;if(27==e)n.closePopups();else if(13==e)n.isEditing()&&(t.$_commitEditor(),o.enterToNextCell)&&t.focusedIndex++;else if(9!=e&&113!=e&&(90!=e||!i)&&(89!=e||!i)&&re.Utils.included(e,36,35,39,37,40,38,34,33)){var r=t.model.itemCount;if(0==r)return!0;if(!t.focusedItem)return!(t.focusedIndex=0);var s=t.focusedIndex;switch(e){case 36:s=0;break;case 35:s=r-1;break;case 37:case 38:case 33:s=Math.max(0,s-1);break;case 39:case 40:case 34:s=Math.min(r-1,s+1)}t.focusedIndex=s}},n.prototype._doMouseDown=function(t){var e,i=t.mouseX,o=t.mouseY,n=t.ctrlKey||t.metaKey,r=this.form,s=r.container.gridView;clearInterval(this._swipeTimer),this._stopTapTracker(!1),s.closePopups(),this.dragTracker&&(this.dragTracker.dispose(),this.dragTracker=null),(0==t.button||t instanceof TouchEvent)&&(e=this._clickTarget=this.mouseEventTarget,n=this._getEditRequest(e,i,o,n,t.shiftKey),n=this._getDragTracker(n,i,o),(i=this._findTableCell(e))?(r.container._containerDom.focus(),r.focusedIndex=i.parentElement.sectionRowIndex,(o=r.bodyView.bodyCellByCell(i))&&o.isEditButton(e)&&r.showEditor(r.focusedIndex)&&s.editController.buttonDown(null,t)):r.$_commitEditor(),this.dragTracker=n)},n.prototype._doMouseUp=function(t){this.grid.editController.buttonUp(null,t),o.prototype._doMouseUp.call(this,t)},n.prototype._doMouseMove=function(t){var e=t.mouseX,t=t.mouseY;this.form;this.dragTracker||(this.mouseEventTarget.style.cursor="default",(e=this._getEditRequest(this.mouseEventTarget,e,t,!1,!1))&&e.cursor&&(this.mouseEventTarget.style.cursor=e.cursor))},n.prototype._doClick=function(t){var e=t.target,i=this.form;if(e instanceof re.getWin(t.target).HTMLElement){if(i.$_elementClicked(e))return;i.footerView.isCheck(e)&&i.container.gridView.toggleCheck(i.currentRow),i.headerView.isClose(e)&&(i.visible=!1)}var o,e=this._findTableCell(t.target);e&&(o=this.form.bodyView.bodyCellByCell(e))&&o.isEditButton(t.target)&&(t=i.focusedIndex=e.parentElement.$_row,e=o.editorType,o=this.grid.delegate.getCellEditor(e),re.Utils.isMobile()&&o.hasList?i.showList(t):i.showEditor(t)&&i.editorButtonClicked(t))},n.prototype._doDblClick=function(t){var e,i=this.form,o=this._findTableCell(t.target);o&&0<=(e=o.parentElement.$_row)&&e==i.focusedIndex&&1==o.cellIndex&&(i.showEditor(e),t.preventDefault(),t.stopImmediatePropagation())},n.prototype._getEditRequest=function(t,e,i,o,n){var r=this.form,s=r._headerView;if(s.visible){r=r.labelWidth;if(i<s.height&&r-1<=e&&e<=r+1)return this._colResizeReq.init(e,i,e-r)}return null},n.prototype._getDragTracker=function(t,e,i){return t instanceof l?new _(t,this._cellResizer):null},n.prototype.$_resetFocusView=function(){var t=this._form,e=t.container.gridView,i=t.options,o=t.focusedItem,n=!1;o&&i.focusVisible&&!t.isEditing()&&((o=(i=t._bodyView).getValueCellRect(o)).y+=i.y,0<o.width)&&0<o.height&&(i=e.isEditing(),o.width-=1+t.$_getScrollBarWidth(),i&&(o.y--,o.height+=1),this._focusMask.updateElement(0,0,o.width,o.height,i),this._focusMask.setRect(o),n=!0),this._focusMask.visible=n},n.prototype._stopTapTracker=function(t){this._tapTracker},n.prototype.onTouch=function(t,e,i){clearInterval(this._swipeTimer),this._stopTapTracker(!1);var o=this.form;return this._clickTarget=t.target,(this._clickCell=this._findTableCell(this._clickTarget))&&o.container._containerDom.focus(),null},n.prototype.onTap=function(t,e,i){if(re.Utils.isiOS&&this.touchManager){var o=re.Utils.getTimer();if(this.touchManager.touchEndt+50>o)return}this._doMouseDown(t),this._doMouseUp(t),this._doClick(t)},n.prototype.onDoubleTapHandler=function(t,e,i){t.mouseX=e,t.mouseY=i,this._doDblClick(t)},n.prototype.onLongTapHandler=function(t,e,i){},n.prototype.onDragStartHandler=function(t,e,i,o){var n=null;return(n=this.form.$_isScrollBar(this._clickTarget)?new E(this._form):new x(this._form,this._focusMask))&&n.start(t,e,i,o)&&(this._tapTracker=n),this._tapTracker},n.prototype.onDragHandler=function(t,e,i,o){var n=this._tapTracker,r=!1;return n&&(this._tapTracker instanceof x,(r=n.drag(t,e,i,o))?this.$_resetFocusView():(n.cancel(),this._tapTracker=null)),r},n.prototype.onDragEndHandler=function(t,e,i){var o,n,r;this._tapTracker&&(o=this._form,i||o.canSwipeCommit()||(i=!0),this._tapTracker instanceof x&&(n=this._form._bodyView2).visible&&(r=o.width,this._swipePrev=this._swipeStarted=re.Utils.getTimer(),this._swipeAmount=0,this._swipeDelta=i?0:o.canSwipe(n.x),0<this._swipeDelta||this._swipeDelta<0?(this._swipeDistance=n.x,this._swipeDuration=200,this._swipeTimer=setInterval(this.$_scrollBody.bind(this),50)):0<n.x?(this._swipeDistance=-(r-n.x),this._swipeDuration=120,this._swipeTimer=setInterval(this.$_scrollBody.bind(this),50)):n.x<0&&(this._swipeDistance=r+n.x,this._swipeDuration=120,this._swipeTimer=setInterval(this.$_scrollBody.bind(this),50))),this._tapTracker.end(i),this._tapTracker=null)},n.prototype.onSwipeHandler=function(t,e,i,o){var n=this.form,r=(this._form.width,this._form._bodyView2),s=(this._swipePrev=this._swipeStarted=re.Utils.getTimer(),this._swipeAmount=0,this._touchManager._events),a=s[s.length-1],o=o.timeStamp-a.t;if(!n.canSwipeCommit()||!n.canSwipe(r.x)&&300<o)return!1;if("left"===i||"right"===i)for(var l=Math.sign(s[0].x-s[1].x),h=1,d=s.length;h<d-1;h++)if(l!==Math.sign(s[h].x-s[h+1].x))return!1;switch(this._startDragTracker&&(this._tapTracker.end(!0),this._tapTracker=null),this._swipeDelta=1,i){case"right":this._swipeDelta=-1;case"left":this._swipeDistance=r.x,this._swipeDuration=200,this._swipeTimer=setInterval(this.$_scrollBody.bind(this),50);break;case"bottom":this._swipeDelta=-1;case"top":this._swipeDistance=this._swipeDelta*e,this._swipeDuration=200,this._swipeTimer=setInterval(this.$_scrollRow.bind(this),50)}return!0},n.prototype.$_scrollBody=function(){var t,e=this.form,i=e.container.gridView,o=re.Utils.getTimer();o-this._swipeStarted<this._swipeDuration?(t=o-this._swipePrev,t=Math.floor((this._swipeDistance-this._swipeAmount)*t/this._swipeDuration),this._swipeAmount-=Math.abs(t),this._swipePrev=o,e._bodyView2.x-=t):(clearInterval(this._swipeTimer),e._bodyView2.visible&&(e._bodyView2.visible=!1,e._bodyView._dom.style.opacity="",this._focusMask._dom.style.opacity="",0!=this._swipeDelta)&&(o=i.getItem(e.currentRow),(t=0<this._swipeDelta?i.getNextRow(o):i.getPrevRow(o)).index!=e.currentRow)&&(e.container.gridView.commit(!0,!0),e.currentRow=t?t.index:-1))},n.prototype.$_scrollRow=function(){this.form;var t,e=re.Utils.getTimer();e-this._swipeStarted<this._swipeDuration?(t=e-this._swipePrev,t=Math.floor((this._swipeDistance-this._swipeAmount)*t/this._swipeDuration),this._swipeAmount-=t,this._swipePrev=e,this.form.topPos+=t):clearInterval(this._swipeTimer)},n.prototype.$_createTouchManager=function(t){t=new He.SingleTouchManager(t,this.grid.mobileOptions);return t.touchHandler=this.onTouch.bind(this),t.tapHandler=this.onTap.bind(this),t.doubleTapHandler=this.onDoubleTapHandler.bind(this),t.longTapHandler=this.onLongTapHandler.bind(this),t.dragStartHandler=this.onDragStartHandler.bind(this),t.dragHandler=this.onDragHandler.bind(this),t.dragEndHandler=this.onDragEndHandler.bind(this),t.swipeHandler=this.onSwipeHandler.bind(this),t};var o,i=n;function n(t){var e=o.call(this,t,"formSelectionTool")||this,i=(e._focusMask=null,e._cellResizer=null,e._tapTracker=null,e._swipeTimer=null,e._swipeDistance=0,e._swipeDelta=0,e._swipeDuration=0,e._swipeStarted=null,e._swipePrev=void 0,e._swipeAmount=0,e._tapX=NaN,e._tapY=NaN,e._form=t.formView);return e._focusMask=new R.FocusMask(t.doc),e._cellResizer=new R.HeaderCellResizer(t.doc),i.addBodyElement(e._focusMask),e._colResizeReq=new l(i),e._touchManager=e.$_createTouchManager(t),e}e.FormSelectionTool=i;r=De.EditRequest,ne.__extends(s,r),s.prototype._doDispose=function(){this._form=null,r.prototype._doDispose.call(this)},_dp(s,"form",{get:function(){return this._form}});var r,i=s;function s(t){var e=r.call(this)||this;return e._form=t,e}e.FormEditRequest=i;a=i,ne.__extends(h,a),h.prototype._doDispose=function(){a.prototype._doDispose.call(this)},_dp(h,"x",{get:function(){return this._x}}),_dp(h,"y",{get:function(){return this._y}}),_dp(h,"offset",{get:function(){return this._offset}}),h.prototype.init=function(t,e,i){return this._x=t,this._y=e,this._offset=i,this},_dp(h,"cursor",{get:function(){return"col-resize"}});var a,l=h;function h(t){return a.call(this,t)||this}e.FormColumnResizeRequest=l;d=Ee.DragTracker,ne.__extends(u,d),u.prototype._doDispose=function(){this._form=null,d.prototype._doDispose.call(this)},_dp(u,"form",{get:function(){return this._form}}),_dp(u,"startWhenCreated",{get:function(){return!1}});var d,i=u;function u(t,e){e=d.call(this,t.container,e)||this;return e._form=t,e}e.FormDragTracker=i;c=i,ne.__extends(p,c),p.prototype._doDispose=function(){try{this.form.removeFeedbackElement(this._feedback)}catch(t){}this._request=null,this._feedback=null,c.prototype._doDispose.call(this)},p.prototype._doStart=function(t,e,i,o){var n=this._form._footerView.y;return this._feedback.resize(2,+n),this._feedback.move(e-this._offset,0),this.form.addFeedbackElement(this._feedback),!0},p.prototype._doDrag=function(t,e,i){var o=this._form.options.minLabelWidth;this._form.labelWidth;return(e-=this._offset)>=this._start+o&&e<this._start+1e6&&(this._feedback.x=e,!0)},p.prototype._doEnded=function(){var t=this._feedback.x-this._start;this.form.removeFeedbackElement(this._feedback),this.form.labelWidth=t,this.form.container.setCursor("default")};var c,_=p;function p(t,e){var i=c.call(this,t.form,"formColumnResizeTracker")||this;return i._request=t,i._feedback=e,i._start=t.x+t.offset-i.form.labelWidth,i._offset=t.offset,i}f=pt.LayerElement,ne.__extends(m,f),m.prototype._getCssSelector=function(){return 0<this.delta?"rg-form-swipe-left":"rg-form-swipe-right"};var f,g=m;function m(){var t=null!==f&&f.apply(this,arguments)||this;return t.delta=0,t}y=pt.LayerElement,ne.__extends(C,y),C.prototype._getCssSelector=function(){return 0<this.delta?"rg-form-end-right":"rg-form-end-left"};var y,v=C;function C(){var t=null!==y&&y.apply(this,arguments)||this;return t.delta=0,t}w=Ae.MobileDragTracker,ne.__extends(b,w),b.prototype._doDispose=function(){try{this._form.removeFeedbackElement(this._swipeMarker),this._form.removeFeedbackElement(this._endMakrer)}catch(t){}this._form=null,this._focusMask=null,this._body=null,this._body2=null,this._swipeMarker=this._swipeMarker.dispose(),this._endMakrer=this._endMakrer.dispose(),w.prototype._doDispose.call(this)},b.prototype._doStart=function(t,e,i,o){var n,r,s,a=this._form,l=a.container.gridView,t=i-t,e=o-e;return a.$_commitEditor(),this._vertical=Math.abs(e)>=Math.abs(t),this._moving=!1,this._vertical||0!=t&&a.canSwipeCommit()&&(e=a.currentRow,a=l.rowCount,0<t&&(0==a||0==e)?this._ending=-1:t<0&&(0==a||l.getLastRow().index==e)?this._ending=1:(a=this._body.x,n=this._body.width,0<t?a-=n-t:a+=n+t,this._body._dom.style.opacity="0.5",this._focusMask._dom.style.opacity="0.1",r=this._form._layoutInfo,s=l.getItem(e),s=0<t?l.getPrevRow(s):l.getNextRow(s),r.gridRow=s.index,this._body2.setBounds(a,this._body.y,n,this._body.height),this._body2.layoutContent(r),this._body2.visible=!0,r.gridRow=e,this._moving=!0)),this._tapX=i,this._tapY=o,!0},b.prototype._doDrag=function(t,e,i,o){var n,r,s,a=this._form,i=i-t;return this._vertical?a.topPos-=o-e:this._moving?(n=this._swipeMarker,0!=(t=a.canSwipe(this._body2.x))?(s=a.width,r=a.height,n.delta=t,n.resetStyleName(),n.setBounds((s-80)/2,(r-80)/2,80,80),n.applyBounds(),a.addFeedbackElement(n)):a.removeFeedbackElement(n),this._body2.x+=i):0!=this._ending&&(n=this._endMakrer,s=.12*(r=a.height),o=this._ending<0?0:a.width-s,n.delta=this._ending,n.resetStyleName(),n.setBounds(o,0,s,r),n.applyBounds(),a.addFeedbackElement(n)),!0},b.prototype._doEnd=function(){this._moving?this._form.removeFeedbackElement(this._swipeMarker):this._form.removeFeedbackElement(this._endMakrer)};var w,x=b;function b(t,e){var i=w.call(this)||this;return i._tapX=NaN,i._tapY=NaN,i._vertical=!0,i._moving=!1,i._ending=-1,i._form=t,i._focusMask=e,i._body=t._bodyView,i._body2=t._bodyView2,i._swipeMarker=new g(e.doc,"swipeMarker"),i._endMakrer=new v(e.doc,"endMarker"),i}e.FormMobileScrollTracker=x;I=Ae.MobileDragTracker,ne.__extends(S,I),S.prototype._doDispose=function(){this._form=null,I.prototype._doDispose.call(this)},S.prototype._doStart=function(t,e,i,o){var n=this._form;n.container.gridView;return n.$_commitEditor(),!0},S.prototype._doDrag=function(t,e,i,o){return this._form.topPos+=o-e,!0},S.prototype._doEnd=function(){};var I,E=S;function S(t){var e=I.call(this)||this;return e._form=t,e}e.FormMobileScrollBarTracker=E})),Ti=(t(Ri),Ri.FormSelectionTool,Ri.FormEditRequest,Ri.FormColumnResizeRequest,Ri.FormDragTracker,Ri.FormMobileScrollTracker,Ri.FormMobileScrollBarTracker,e(function(t,e){Object.defineProperty(e,"__esModule",{value:!0});i=at.DataCellRenderer,ne.__extends(n,i),n.prototype._doDispose=function(){i.prototype._doDispose.call(this)},_dp(n,"template",{get:function(){return this._parser.template},set:function(t){t!=this._parser.template&&(this._parser.template=t,this._changed())}}),_dp(n,"output",{get:function(){return this._output},set:function(t){this._output=t}}),_dp(n,"valueCallback",{get:function(){return this._valueCallback},set:function(t){t!==this._valueCallback&&(this._valueCallback=t,this._changed())}}),n.prototype.renderFormCell=function(t,e){this.$_setHtml(this._parser.realizeForm(t,e,this._valueCallback))},_dp(n,"type",{get:function(){return n.TYPE}}),n.prototype.$_setHtml=function(t){t!=this._html&&(this._html=t,this._dom.innerHTML=t)},n.TYPE="formHtml";var i,o=n;function n(){var t=i.call(this)||this;return t._output=void 0,t._html="",t._parser=new Wt.HtmlTemplateParser,t.template="<span>${value}</span>",t}e.FormTemplateRenderer=o})),Di=(t(Ti),Ti.FormTemplateRenderer,e(function(V,t){Object.defineProperty(t,"__esModule",{value:!0});B=se.Base,ne.__extends(e,B),_dp(e,"modal",{get:function(){return this._modal},set:function(t){t!=this._modal&&(this._modal=t,this._changed())}}),_dp(e,"modalPadding",{get:function(){return this._modalPadding},set:function(t){var e,i;t!=this._modalPadding&&(this._modalPadding=t,this._padTop=this._padBottom=this._padLeft=this._padRight=0,this._padTopP=this._padBottomP=this._padLeftP=this._padRightP=NaN,t&&(0<(e=(t=t.split(/\s+/)).length)&&("%"==(i=t[0]).charAt(i.length-1)?this._padTopP=parseFloat(i):this._padTop=re.Utils.toFloat(i)),1<e&&("%"==(i=t[1]).charAt(i.length-1)?this._padRightP=parseFloat(i):this._padRight=re.Utils.toFloat(i)),2<e&&("%"==(i=t[2]).charAt(i.length-1)?this._padBottomP=parseFloat(i):this._padBottom=re.Utils.toFloat(i)),3<t.length&&("%"==(i=t[3]).charAt(i.length-1)?this._padLeftP=parseFloat(i):this._padLeft=re.Utils.toFloat(i)),3==t.length&&(this._padLeftP=this._padRightP,this._padLeft=this._padRight),2==t.length&&(this._padBottomP=this._padTopP,this._padBottom=this._padTop,this._padLeftP=this._padRightP,this._padLeft=this._padRight),1==t.length)&&(this._padRightP=this._padBottomP=this._padLeftP=this._padTopP,this._padRight=this._padBottom=this._padLeft=this._padTop),this._changed())}}),_dp(e,"modalOpacity",{get:function(){return this._modalOpacity},set:function(t){this._modalOpacity=Math.max(0,Math.min(1,t))}}),_dp(e,"autoClose",{get:function(){return this._autoClose},set:function(t){this._autoClose=t}}),_dp(e,"editable",{get:function(){return this._editable},set:function(t){this._editable=t}}),_dp(e,"itemResizable",{get:function(){return this._itemResizable},set:function(t){t!=this._itemResizable&&(this._itemResizable=t,this._changed())}}),_dp(e,"minLabelWidth",{get:function(){return this._minLabelWidth},set:function(t){(t=Math.max(0,t))!=this._minLabelWidth&&(this._minLabelWidth=t,this._changed())}}),_dp(e,"focusVisible",{get:function(){return this._focusVisible},set:function(t){t!=this._focusVisible&&(this._focusVisible=t,this._changed())}}),_dp(e,"scrollBarWidth",{get:function(){return this._scrollBarWidth},set:function(t){(t=Math.max(0,t))!=this._scrollBarWidth&&(this._scrollBarWidth=t,this._changed())}}),_dp(e,"commitWhenSwipe",{get:function(){return this._commitWhenSwipe},set:function(t){this._commitWhenSwipe=t}}),_dp(e,"enterToNextCell",{get:function(){return this._enterToNextCell},set:function(t){this._enterToNextCell=t}}),_dp(e,"editWhenFocused",{get:function(){return this._editWhenFocused},set:function(t){this._editWhenFocused=t}}),_dp(e,"checkBarSync",{get:function(){return this._checkBarSync},set:function(t){t!=this._checkBarSync&&(this._checkBarSync=t,this._changed())}}),_dp(e,"saveLabel",{get:function(){return this._saveLabel},set:function(t){t!=this._saveLabel&&(this._saveLabel=t,this._changed())}}),_dp(e,"cancelLabel",{get:function(){return this._cancelLabel},set:function(t){t!=this._cancelLabel&&(this._cancelLabel=t,this._changed())}}),_dp(e,"fieldLabel",{get:function(){return this._fieldLabel},set:function(t){t!==this._fieldLabel&&(this._fieldLabel=t,this._changed())}}),_dp(e,"valueLabel",{get:function(){return this._valueLabel},set:function(t){t!==this._valueLabel&&(this._valueLabel=t,this._changed())}}),_dp(e,"commitCallback",{get:function(){return this._commitCallback},set:function(t){this._commitCallback=t}}),_dp(e,"cancelCallback",{get:function(){return this._cancelCallback},set:function(t){this._cancelCallback=t}}),e.prototype.setModalPadding=function(t,e,i,o){this.modalPadding=t+" "+(e||"")+" "+(i||"")+" "+(o||"")},e.prototype.padRect=function(t){isNaN(this._padLeftP)?t.leftBy(this._padLeft):t.leftBy(Math.floor(this._padLeftP*t.width/100)),isNaN(this._padRightP)?t.rightBy(this._padRight):t.rightBy(-Math.floor(this._padRightP*t.width/100)),isNaN(this._padTopP)?t.topBy(this._padTop):t.topBy(Math.floor(this._padTopP*t.height/100)),isNaN(this._padBottomP)?t.bottomBy(this._padBottom):t.bottomBy(-Math.floor(this._padBottomP*t.height/100))},e.prototype._changed=function(){this._owner&&this._owner.invalidateLayout()};var B,N=e;function e(t){var e=B.call(this)||this;return e._modal=!1,e._modalPadding="10%",e._modalOpacity=.15,e._autoClose=!1,e._editable=!0,e._itemResizable=!0,e._minLabelWidth=60,e._focusVisible=!0,e._scrollBarWidth=9,e._commitWhenSwipe=!1,e._enterToNextCell=!0,e._editWhenFocused=!0,e._checkBarSync=!0,e._saveLabel="Save",e._cancelLabel="Cancel",e._fieldLabel="Field",e._valueLabel="Value",e._padTopP=10,e._padBottomP=10,e._padLeftP=10,e._padRightP=10,e._padTop=NaN,e._padBottom=NaN,e._padLeft=NaN,e._padRight=NaN,e._owner=t,e}t.FormOptions=N;var i,$=function(){},o=(i=pt.VisualElement,ne.__extends(n,i),n.prototype._getCssSelector=function(){return"rg-form-marquee"},n.prototype._doDraw=function(t){},n);function n(){return null!==i&&i.apply(this,arguments)||this}t.FormMarquee=o;r=pt.VisualElement,ne.__extends(s,r),s.prototype._doDispose=function(){r.prototype._doDispose.call(this)},s.prototype._doDraw=function(t){},s.prototype._changed=function(){};var r,o=s;function s(t,e){return r.call(this,t,e)||this}a=o,ne.__extends(l,a),l.prototype._doDispose=function(){a.prototype._doDispose.call(this)},l.prototype._getCssSelector=function(){return"rg-form-scrollbar"};var a,A=l;function l(t){return a.call(this,t,"formScrollBar")||this}h=pt.LayerElement,ne.__extends(u,h),u.prototype._doDispose=function(){h.prototype._doDispose.call(this)},_dp(u,"model",{get:function(){return this._model}}),_dp(u,"formView",{get:function(){var t=this.parent;do{if(t instanceof j)return t}while(t=t.parent)}}),u.prototype.measure=function(t,e,i){return this.resetStyleName(),this._doMeasure(t,e,i)},u.prototype.layoutContent=function(t){re.Utils.isMobile()?this._doLayoutMobile(t,this.width,this.height):this._doLayoutContent(t,this.width,this.height)},u.prototype._getCssSelector=function(){return this._model.styleName},u.prototype._doLayoutMobile=function(t,e,i){this._doLayoutContent(t,e,i)},u.prototype._changed=function(){};var h,d=u;function u(t,e,i){t=h.call(this,t,i)||this;return t._model=e,t}c=pt.VisualElement,ne.__extends(p,c),p.prototype._doDispose=function(){c.prototype._doDispose.call(this)},p.prototype.updateContent=function(t,e){this._doUpdateContent(t,e)},p.prototype._getCssSelector=function(){return"rg-form-cell"},p.prototype._changed=function(){},p.prototype._doUpdateContent=function(t,e){},p.prototype._doDraw=function(t){};var c,_=p;function p(t){return c.call(this,t)||this}var f;f=pt.VisualElement,ne.__extends(H,f),H.prototype._doDispose=function(){f.prototype._doDispose.call(this)},H.prototype._changed=function(){};function H(t){return f.call(this,t)||this}g=st.DataCell,ne.__extends(m,g),m.prototype.getValue=function(){var t,e=this._column.dataIndex;return!(0<=e)||null==(t=this.$_getItem())?void 0:t.getData(e)},m.prototype.getBlankState=function(){return ht.BlankState.NONE},m.prototype.isValueChanged=function(){var t,e=this._column.dataIndex;return 0<=e&&(null==(t=this.$_getItem())?void 0:t.isChanged(e))},m.prototype.getDisplayText=function(t,e){return st.DataCell._getDisplayText(t,this.$_getItem(),this._column,this.getValue(),e)},m.prototype.$_getItem=function(){return this._column.grid.getItem(this.index.itemIndex)};var g,U=m;function m(){return null!==g&&g.apply(this,arguments)||this}y=_t.CellIndex,ne.__extends(W,y);var y,G=W;function W(){return null!==y&&y.apply(this,arguments)||this}v=pt.ViewLayer,ne.__extends(C,v),C.prototype._doDispose=function(){this._dataCell=this._dataCell.dispose(),this._literalCell=this._literalCell.dispose(),this._seriesCell=this._seriesCell.dispose(),this._options=this._options.dispose(),v.prototype._doDispose.call(this)},C.prototype.getColumnObject=function(t){var e=this.container.gridView;return e&&e.columnByName(t)},C.prototype.getDataFieldIndex=function(t){var e=this.container.gridView;return e&&e.dataSource?e.dataSource.getFieldIndex(t):-1},C.prototype.getEditItem=function(t){return t.getItem(this._currentRow)},C.prototype.canWrite=function(t){return!0},C.prototype.getEditor=function(t){if(t instanceof G)return t.formItem.editor},C.prototype.getEditBounds=function(t,e){var i=this._bodyView,o=this._model.getItem(this._editIndex),n=i.boundsByContainer(i.getValueCellRect(o)),i=i.bodyCellAt(o),o=(t.native?0:i.editWidth)+i.buttonWidth+i.errorWidth;return n.width-=this.$_getScrollBarWidth(),0<o&&n.width>o+10&&(n.width-=o+10,n.width<0)&&(n.width+=o+10),n.width=Math.max(0,n.width),n},C.prototype.isEditing=function(){return 0<=this._editIndex},C.prototype.isItemEditing=function(){return this.container.gridView.isItemEditing()},C.prototype.validateCellCommit=function(t,e){},C.prototype.makeCellVisible=function(t){return!0},C.prototype.editCellCommit=function(t,e,i){return this.invalidateLayout(),!0},C.prototype.editorChange=function(t,e,i){},C.prototype.editorShow=function(t){this._selectionTool.resetFocused()},C.prototype.editorHide=function(t){this._editIndex=-1,this._selectionTool.resetFocused()},C.prototype.itemUpdateStarted=function(t,e){this._saveRow=this._currentRow,this.invalidateLayout()},C.prototype.itemAppendStarted=function(t,e){this._saveRow=this._currentRow,this._currentRow=e.index,this.invalidateLayout()},C.prototype.itemInsertStarted=function(t,e){this._saveRow=this._currentRow,this._currentRow=e.index,this.invalidateLayout()},C.prototype.itemCommited=function(t,e){this.invalidateLayout()},C.prototype.itemCanceled=function(t){this._currentRow=this._saveRow,this.invalidateLayout()},C.prototype.itemInserted=function(t,e){this._currentRow=e.index,this.invalidateLayout()},C.prototype.itemsChanged=function(t){this.invalidateLayout()},_dp(C,"container",{get:function(){return this._container}}),_dp(C,"delegate",{get:function(){return this._delegate}}),_dp(C,"model",{get:function(){return this._model}}),_dp(C,"options",{get:function(){return this._options}}),_dp(C,"dataSource",{get:function(){var t=this.container.gridView;return t&&t.dataSource}}),_dp(C,"headerView",{get:function(){return this._headerView}}),_dp(C,"footerView",{get:function(){return this._footerView}}),_dp(C,"topPos",{get:function(){return this._topPos},set:function(t){(t=Math.max(0,t))!=this._topPos&&(this._topPos=t,this.invalidateLayout())}}),_dp(C,"labelWidth",{get:function(){return this._labelWidth},set:function(t){(t=Math.max(0,t))!=this._labelWidth&&(this._labelWidth=t,this.invalidateLayout())}}),_dp(C,"valueWidth",{get:function(){return this._valueWidth}}),_dp(C,"currentRow",{get:function(){return this._currentRow},set:function(t){t!==this._currentRow&&(this.$_commitEditor(),this._currentRow=t,this.invalidateLayout())}}),_dp(C,"focusedItem",{get:function(){return this._focusedItem},set:function(t){var e,i,o;t!=this._focusedItem&&(i=this._focusedItem,this.$_commitEditor(),e=this._focusedItem=t,this._selectionTool.focusedChanged(i,t),this.$_focusedChanged(i,t),this.$_makeCellVisible(e),e instanceof Si.FormColumnItem)&&(i=this.container.gridView,t=this.$_getIndex(e),o=null==(o=e._columnObj.editable)?this.options.editable:o,i._editController._needPrepare=!0,i._editController.prepareEditor(t),this._options.editWhenFocused)&&o&&(this._editIndex=e.vindex,this._needEditor=!0,this.showEditor(this.focusedIndex))}}),_dp(C,"focusedIndex",{get:function(){return this._focusedItem?this._focusedItem.vindex:-1},set:function(t){var e=this.model;0<=t&&0<e.itemCount?(t=Math.min(t,e.itemCount-1),this.focusedItem=re.Utils.cast(e.getItem(t),Si.FormValueItem)):this.focusedItem=null}}),_dp(C,"bodyView",{get:function(){return this._bodyView}}),C.prototype.getHandler=function(){return this},C.prototype.invalidateLayout=function(){this.visible&&this._container.invalidateLayout()},C.prototype.addFeedbackElement=function(t){if(t&&!this._feedbackLayer.contains(t))return this._feedbackLayer.addChild(t),!0},C.prototype.removeFeedbackElement=function(t){t=this._feedbackLayer.indexOf(t);return 0<=t&&(this._feedbackLayer.removeChildAt(t),!0)},C.prototype.canSwipeCommit=function(){return!(this.isItemEditing()&&!this._options.commitWhenSwipe)},C.prototype.canSwipe=function(t){var e=this.width;return 0<t&&t<.6*e?1:t<0&&.4*e<t+e?-1:0},C.prototype.$_getIndex=function(t){var e=this.container.gridView,i=t._columnObj,o=new G;return o.assign(e.getIndex(this.currentRow,i)),o.layout=this._layout.setColumn(e,i),o.formItem=t,o},C.prototype.showEditor=function(t){var e=this.container.gridView,i=this._model.getItem(t);if(i instanceof Si.FormColumnItem){var o=this.$_getIndex(i),i=null==(i=i._columnObj)?void 0:i.editable;if(null==i?this.options.editable:i)return this._editIndex=t,e.showEditor(o)}},C.prototype.showList=function(t){var e=this.container.gridView,i=this._model.getItem(t);if(i instanceof Si.FormColumnItem){var o=this.$_getIndex(i),i=null==(i=i._columnObj)?void 0:i.editable;if(null==i?this.options.editable:i)return this._editIndex=t,e.showEditList(o)}},C.prototype.deleteRow=function(){var t=this;setTimeout(function(){t.$_deleteRow()},0)},C.prototype.appendRow=function(){this.$_appendRow()},C.prototype.addBodyElement=function(t){return this._bodyContainer.addChild(t)},C.prototype.removeBodyElement=function(t){return this._bodyContainer.removeChild(t)},C.prototype.close=function(){this.visible&&(this.visible=!1)},C.prototype.editorButtonClicked=function(t){var e,i=this.container.gridView,t=this._model.getItem(t);t instanceof Si.FormColumnItem&&(e=this.$_getIndex(t),this._editIndex=t.vindex,i._editController.buttonClicked(e))},C.prototype.setModel=function(t){this.model.load(t)},_dp(C,"isLayer",{get:function(){return!1}}),C.prototype._getCssSelector=function(){return this._options.modal?C.STYLE_MODAL:C.STYLE_NAME},C.prototype._doActivateView=function(){var t=this._container.gridView.focusedItem;t instanceof rt.GroupItem&&(t=t.firstDataItem),this.currentRow=t?t.index:-1,this._container.activeTool=this._selectionTool,this._container.gridView.editorLender=this},C.prototype._dodDeactivateView=function(){this._container.gridView.hideEditor(),this._container.gridView.editorLender=null},C.prototype._visibleChanged=function(){this.visible,this.container.invalidateLayout()},C.prototype.$_initialzie=function(){this._selectionTool=new Ri.FormSelectionTool(this._container)},C.prototype.$_prepareRender=function(t){},C.prototype.$_layout=function(t,e){var i,o=e.x,n=e.y,r=e.width,s=e.height,a=this._model,l=this._options,h=this._layoutInfo;this._delegate=t,this._model.$_prepareLayout(),h.form=a,h.formView=this,h.columnBinder=this,h.gridRow=this._currentRow,h.items=a._visibleItems,h.labelWidth=this.labelWidth,h.valueWidth=this._valueWidth=e.width-h.labelWidth,((t=this._headerView).visible=t.model.visible)&&(i=t.measure(h,r,s),t.setBounds(o,n,r,i.height),t.layoutContent(h),s-=i.height,n+=i.height),((t=this._footerView).visible=t.model.visible)&&(i=t.measure(h,r,s),t.setBounds(o,e.bottom-i.height,i.width,i.height),t.layoutContent(h),s-=i.height),this._bodyContainer.setBounds(o,n,r,s),this._bodyView2.visible=!1,((t=this._bodyView).visible=0<=h.gridRow)&&(t._dom.style.opacity="",t.measure(h,r,s),t.layoutContent(h),a=t._dom.offsetHeight,e=this._topPos=Math.max(0,Math.min(a-s,this._topPos)),t.setBounds(0,-e,r,a),((i=this._scrollBar).visible=s<a)&&(h=l.scrollBarWidth,t=a,e=s,l=Math.max(0,t-e),a=Math.min(s,Math.max(20,s*e/t)),e=Math.min(s-a,Math.max(0,(s-a)*(this._topPos/l))),i.setBoundsI(o+r-h-2,n+e,h,a)),this._selectionTool.$_resetFocusView(),this._needEditor&&(this._needEditor=!1),this.container.gridView._editController.resetEditor(!1))},C.prototype.$_getScrollBarWidth=function(){return this._scrollBar.visible?this._scrollBar.width:0},C.prototype._changed=function(){},C.prototype.$_getGridCell=function(t,e){var i,t=t._columnObj;return t instanceof lt.DataColumn?(i=this._dataCell)._column=t:i=t instanceof lt.SeriesColumn?this._seriesCell:t instanceof st.LiteralCell?this._literalCell:this._dataCell,i.setIndex2(this.container.gridView,e,t),i},C.prototype.$_elementClicked=function(t){return!!this._footerView.$_elementClicked(t)},C.prototype.$_focusedChanged=function(t,e){this._bodyView.$_focusedChanged(t?t.vindex:-1,e?e.vindex:-1)},C.prototype.$_commitEditor=function(){this.container.gridView.isEditing()&&this.container.gridView.commitEditor(!0)},C.prototype.$_deleteRow=function(){var t=this.container.gridView,e=t.getItem(this._currentRow);e&&t.$_deleteSelection(e)},C.prototype.$_appendRow=function(){this.container.gridView.append()},C.prototype.$_isScrollBar=function(t){return this._scrollBar._dom===t},C.prototype.$_makeCellVisible=function(t){var e=this.topPos,t=this._bodyView.getValueCellRect(t,this._cellRect);t.y<e?this.topPos=t.y:t.bottom>=e+this._bodyContainer.height&&(this.topPos+=t.bottom-(e+this._bodyContainer.height))},C.STYLE_NAME="rg-form-root rg-form",C.STYLE_MODAL="rg-form-root rg-form rg-form-modal";var v,j=C;function C(t,e){var i=v.call(this,t.doc)||this,o=(i._topPos=0,i._labelWidth=120,i._currentRow=-1,i._valueWidth=0,i._needEditor=!1,i._layout=new tt(null),i._editIndex=-1,i._saveRow=-1,i._cellRect=new nt.Rectangle,t.doc),t=(i._container=t,i._model=new Si.Form);return i._options=new N(i),e&&i._options.assignFrom(e),i.addChild(i._headerView=new q(o,t.header)),i.addChild(i._bodyContainer=new pt.LayerElement(o)),i._bodyContainer._dom.style.overflow="hidden",i._bodyContainer.addChild(i._bodyView=i._bodyView1=new it(o,t.body)),i._bodyContainer.addChild(i._bodyView2=new it(o,t.body)),i._bodyView2.visible=!1,i._bodyView2._dom.style.background="white",i._bodyView2._dom.style.borderLeft="1px solid gray",i._bodyView2._dom.style.borderRight="1px solid gray",i.addChild(i._footerView=new X(o,t.footer)),i.addChild(i._feedbackLayer=new pt.LayerElement(o,"feedbackLayer")),i.addChild(i._scrollBar=new A(o)),i._layoutInfo=new $,i._dataCell=new U,i._literalCell=new st.LiteralCell,i._seriesCell=new st.SeriesCell,i.visible=!1,i}t.FormView=j;w=_,ne.__extends(x,w),x.prototype._doDispose=function(){w.prototype._doDispose.call(this)},x.prototype._getCssSelector=function(){return this._right?w.prototype._getCssSelector.call(this)+" rg-form-cell-right":w.prototype._getCssSelector.call(this)},x.prototype._createDom=function(t){var e=w.prototype._createDom.call(this,t),i=this._div=t.createElement("div");return this._div.className=x.STYLE_NAME,e.appendChild(i),this._span=t.createElement("span"),i.appendChild(this._span),e},x.prototype._doAttached=function(t){},x.prototype._doUpdateContent=function(t,e){this._span.textContent=e||t.displayText},x.STYLE_NAME="rg-form-header-cell";var w,z=x;function x(t,e){void 0===e&&(e=!1);t=w.call(this,t)||this;return t._right=e,t}t.FormHeaderCellElement=z;b=pt.VisualElement,ne.__extends(I,b),I.prototype._getCssSelector=function(){return""},I.prototype._createDom=function(t){var e=b.prototype._createDom.call(this,t),t=t.createElement("span");return e.appendChild(t),t.className="rg-form-close",e},I.prototype.isDom=function(t){return t===this._dom.firstElementChild||b.prototype.isDom.call(this,t)},I.prototype._doDraw=function(t){};var b,Y=I;function I(){return null!==b&&b.apply(this,arguments)||this}t.FormCloseView=Y;E=d,ne.__extends(S,E),S.prototype._doDispose=function(){E.prototype._doDispose.call(this)},S.prototype.isClose=function(t){return this._closeView.isDom(t)},S.prototype._doMeasure=function(t,e,i){var o=this.model;return ge.Size.create(e,o.height)},S.prototype._doLayoutContent=function(t,e,i){var o=this.model,n=t.formView.options;this._labelCell.setBounds(0,0,t.labelWidth,i),this._labelCell.updateContent(o.labelCell,n.fieldLabel),this._valueCell.setBounds(t.labelWidth,0,t.valueWidth,i),this._valueCell.updateContent(o.valueCell,n.valueLabel),this._closeView.setBounds(0,0,i,i),this._closeView.visible=!this.formView.isItemEditing()},S.prototype._doDraw=function(t){};var E,q=S;function S(t,e){e=E.call(this,t,e,"headerView")||this;return e._labelCell=new z(t),e.addChild(e._labelCell),e._valueCell=new z(t,!0),e.addChild(e._valueCell),e._closeView=new Y(t),e.addChild(e._closeView),e}t.FormHeaderView=q;R=d,ne.__extends(T,R),T.prototype._doDispose=function(){R.prototype._doDispose.call(this)},_dp(T,"editMode",{get:function(){return this._editMode},set:function(t){t!=this._editMode&&(this._editMode=t,this.invalidateLayout())}}),T.prototype.isCheck=function(t){return t==this._checkView},T.prototype._initDom=function(t){R.prototype._initDom.call(this,t),this.$_createElements(t)},T.prototype._doMeasure=function(t,e,i){var o=this.model;return ge.Size.create(e,o.height)},T.prototype._doLayoutContent=function(t,e,i){var o=this.formView,n=o.container.gridView,r=o.options,s=o.currentRow,s=(this._currView.textContent=s+1+"",this._totalView.textContent=n.itemCount+"",this._headView.style.left="0px",this._headView.style.top="0px",this._headView.style.height=i+"px",(i-this._menuView.offsetHeight)/2),o=(this._menuView.style.top=s+"px",this._footView.style.right="0px",this._footView.style.top="0px",this._footView.style.height=i+"px",s=(i-this._checkView.offsetHeight)/2,this._checkView.style.right="0px",this._checkView.style.top=s+"px",o.options.checkBarSync?this._checkView.style.visibility=n.checkBar.visible?"":"hidden":this._checkView.style.visibility="",this._cancelLabel.textContent=r.cancelLabel||"Cancel",this._commitLabel.textContent=r.saveLabel||"Save",this._checkView.offsetWidth+30),s=(i-this._cancelLabel.offsetHeight)/2+1,r=(this._cancelLabel.style.right=o+"px",this._cancelLabel.style.top=s+"px",o+=this._cancelLabel.offsetWidth+5,s=(i-this._cancelView.offsetHeight)/2,this._cancelView.style.right=o+"px",this._cancelView.style.top=s+"px",o+=this._cancelView.offsetWidth+16,s=(i-this._commitLabel.offsetHeight)/2+1,this._commitLabel.style.right=o+"px",this._commitLabel.style.top=s+"px",o+=this._commitLabel.offsetWidth+5,s=(i-this._commitView.offsetHeight)/2,this._commitView.style.right=o+"px",this._commitView.style.top=s+"px",n=this._posView.offsetWidth,s=(i-this._posView.offsetHeight)/2+1,(e-n)/2),e=r+n;this._posView.style.left=r+"px",this._posView.style.top=s+"px",o=r-8,this._leftView.style.top="0px",this._leftView.style.height="100%",this._leftView.style.left=o+"px",o=8,s=(i-this._prevView.offsetHeight)/2,this._prevView.style.right="8px",this._prevView.style.top=s+"px",o+=this._prevView.offsetWidth+8,s=(i-this._firstView.offsetHeight)/2,this._firstView.style.right=o+"px",this._firstView.style.top=s+"px",this._rightView.style.top="0px",this._rightView.style.height="100%",this._rightView.style.left=(e+=8)+"px",o=8,s=(i-this._nextView.offsetHeight)/2,this._nextView.style.left="8px",this._nextView.style.top=s+"px",o+=this._nextView.offsetWidth+8,s=(i-this._lastView.offsetHeight)/2,this._lastView.style.left=o+"px",this._lastView.style.top=s+"px",this.invalidate()},T.prototype._doDraw=function(t){var e=this.formView,i=e.container.gridView,e=e.currentRow,e=i.getItem(e),o=i.isItemEditing(e),n=i.getFirstRow()!==e,i=(n!=this._firstEnabled&&(this._firstEnabled=n,this._firstView.style.opacity=n?"":"0.3"),n!=this._prevEnabled&&(this._prevEnabled=n,this._prevView.style.opacity=n?"":"0.3"),(n=i.getLastRow()!==e)!=this._lastEnabled&&(this._lastEnabled=n,this._lastView.style.opacity=n?"":"0.3"),n!=this._nextEnabled&&(this._nextEnabled=n,this._nextView.style.opacity=n?"":"0.3"),!o);i!=this._firstVisible&&(this._firstVisible=i,this._firstView.style.opacity=i?"":"0"),i!=this._prevVisible&&(this._prevVisible=i,this._prevView.style.opacity=i?"":"0"),i!=this._lastVisible&&(this._lastVisible=i,this._lastView.style.opacity=i?"":"0"),i!=this._nextVisible&&(this._nextVisible=i,this._nextView.style.opacity=i?"":"0"),i!=this._posVisible&&(this._posVisible=i,this._posView.style.opacity=i?"":"0"),(i=o)!=this._commitVisible&&(this._commitVisible=i,this._commitView.style.opacity=i?"":"0",this._commitLabel.style.opacity=i?"":"0",this._commitView.style.pointerEvents=i?"":"none",this._commitLabel.style.pointerEvents=i?"":"none"),i!=this._cancelVisible&&(this._cancelVisible=i,this._cancelView.style.opacity=i?"":"0",this._cancelLabel.style.opacity=i?"":"0",this._cancelView.style.pointerEvents=i?"":"none",this._cancelLabel.style.pointerEvents=i?"":"none"),e&&(n=e.checked)!=this._checkEnabled&&(this._checkEnabled=n,this._checkView.style.opacity=n?"":"0.3")},T.prototype.$_createElements=function(t){var e=re.getDoc(t);t.appendChild(this._posView=this.$_createPosition(e)),t.appendChild(this._leftView=this.$_createLeft(e)),t.appendChild(this._rightView=this.$_createRight(e)),t.appendChild(this._headView=this.$_createHead(e)),t.appendChild(this._footView=this.$_createFoot(e))},T.prototype.$_setIconStyle=function(t){var e=t.style;return e.position="absolute",e.display="inline-block",t},T.prototype.$_createHead=function(t){var e=t.createElement("div");return e.className="rg-footer-form-head",e.style.position="absolute",e.appendChild(this._menuView=this.$_setIconStyle(t.createElement("span"))),this._menuView.className="rg-form-menu",e},T.prototype.$_createFoot=function(t){var e=t.createElement("div");return e.className="rg-footer-form-foot",e.style.position="absolute",e.appendChild(this._checkView=this.$_setIconStyle(t.createElement("span"))),this._checkView.className="rg-form-check",e.appendChild(this._cancelView=this.$_setIconStyle(t.createElement("span"))),this._cancelView.className="rg-form-cancel",e.appendChild(this._cancelLabel=this.$_setIconStyle(t.createElement("span"))),this._cancelLabel.className="rg-form-label",this._cancelLabel.textContent="Cancel",e.appendChild(this._commitView=this.$_setIconStyle(t.createElement("span"))),this._commitView.className="rg-form-commit",e.appendChild(this._commitLabel=this.$_setIconStyle(t.createElement("span"))),this._commitLabel.className="rg-form-label",this._commitLabel.textContent="Save",e},T.prototype.$_createPosition=function(t){var e=t.createElement("div");return e.style.position="absolute",e.appendChild(this._currView=t.createElement("span")),this._currView.className="rg-form-position rg-form-position-current",this._currView.textContent="0",e.appendChild(this._slashView=t.createElement("span")),this._slashView.className="rg-form-position rg-form-position-slash",this._slashView.textContent="/",e.appendChild(this._totalView=t.createElement("span")),this._totalView.className="rg-form-position rg-form-position-total",this._totalView.textContent="0",e},T.prototype.$_createLeft=function(t){var e=t.createElement("div");return e.style.position="absolute",e.appendChild(this._firstView=this.$_setIconStyle(t.createElement("span"))),this._firstView.className="rg-form-first",e.appendChild(this._prevView=this.$_setIconStyle(t.createElement("span"))),this._prevView.className="rg-form-prev",e},T.prototype.$_createRight=function(t){var e=t.createElement("div");return e.style.position="absolute",e.appendChild(this._lastView=this.$_setIconStyle(t.createElement("span"))),this._lastView.className="rg-form-last",e.appendChild(this._nextView=this.$_setIconStyle(t.createElement("span"))),this._nextView.className="rg-form-next",e},T.prototype.$_elementClicked=function(t){var e=this.formView,i=e.model,o=e.container.gridView,n=e.currentRow;try{if(t===this._menuView&&this._menuEnabled){var r=i.footer.getPopupMenuName(o);r?o.popupMenuManager.show(r,t,null):e.visible=!1}else if(t===this._firstView&&this._firstEnabled)a=o.getFirstRow(),e.currentRow=a.index;else if(t===this._lastView&&this._lastEnabled)a=o.getLastRow(),e.currentRow=a.index;else if(t===this._prevView&&this._prevEnabled)a=o.getPrevRow(o.getItem(n)),e.currentRow=a.index;else if(t===this._nextView&&this._nextEnabled)a=o.getNextRow(o.getItem(n)),e.currentRow=a.index;else{if(t!=this._commitLabel&&t!=this._commitView||!this._commitVisible){if(t!=this._cancelLabel&&t!=this._cancelView||!this._cancelVisible)return!1;if(a=o.getItem(n),(s=this.formView.options.cancelCallback)&&!1===s.call(this,o.handler,n,a))return;o.$_cancelItem(a,!0)}else{var s,a=o.getItem(n);if((s=this.formView.options.commitCallback)&&!1===s.call(this,o.handler,n,a))return;o.$_commitItem(a,!0,!0)}e.options.autoClose&&e.close()}}catch(t){alert(t)}return!0};var R,X=T;function T(t,e){t=R.call(this,t,e,"footerView")||this;return t._editMode=!1,t._menuEnabled=!0,t._posVisible=!0,t._firstVisible=!0,t._prevVisible=!0,t._nextVisible=!0,t._lastVisible=!0,t._firstEnabled=!0,t._prevEnabled=!0,t._nextEnabled=!0,t._lastEnabled=!0,t._commitVisible=!0,t._cancelVisible=!0,t._checkEnabled=!0,t}t.FormFooterView=X;D=_,ne.__extends(k,D),k.prototype._doDispose=function(){D.prototype._doDispose.call(this)},k.prototype._getCssSelector=function(){return""},k.prototype._doDraw=function(t){};var D,_=k;function k(t){return D.call(this,t)||this}t.FormBodyCellElement=_;M=o,ne.__extends(F,M),F.prototype._doDispose=function(){M.prototype._doDispose.call(this)},F.prototype._getCssSelector=function(){return""},F.prototype._doDraw=function(t){};var M,_=F;function F(t){return M.call(this,t)||this}t.FormGroupHeaderElement=_;K=gt.BodyTableCell,ne.__extends(Z,K);var K,J=Z;function Z(t,e){t=K.call(this,t)||this;return t.tcol=e,t}Q=ct.CellLayoutColumnItem,ne.__extends(et,Q),et.prototype.setColumn=function(t,e){return this._grid=t,this._columnObj=e,this},_dp(et,"grid",{get:function(){return this._grid}});var Q,tt=et;function et(){return null!==Q&&Q.apply(this,arguments)||this}L=d,ne.__extends(O,L),O.prototype._doDispose=function(){this._tbody=this._thead=this._table=null;for(var t=0;t<2;t++)for(var e=this._cells[t],i=0,o=e.length;i<o;i++)e[i].dispose(),e[i]=null;this._cells=null,L.prototype._doDispose.call(this)},O.prototype.bodyCellByCell=function(t){for(var e=0;e<this._cells.length;e++)for(var i=this._cells[e],o=0;o<i.length;o++){var n=i[o];if(n&&n.cell===t)return n}},O.prototype.bodyCellAt=function(t){return this._cells[1][t.vindex]},O.prototype.getValueCellRect=function(t,e){var i=this.formView,o=this._rowPoints,t=t.vindex;return(e=e||new nt.Rectangle).set(i.labelWidth,o[t],i.valueWidth,o[t+1]-o[t]),e},O.prototype._createDom=function(t){var e=t.createElement("div"),i=this._table=t.createElement("table"),o=i.style;return o.setProperty("table-layout","fixed","important"),o.setProperty("width","0px","important"),i.className="rg-form-table",e.appendChild(i),this._thead=t.createElement("thead"),i.appendChild(this._thead),this._tbody=t.createElement("tbody"),i.appendChild(this._tbody),this.$_initTable(),e},O.prototype._initDom=function(t){L.prototype._initDom.call(this,t),t.style.overflow="hidden"},O.prototype._doMeasure=function(t,e,i){return ge.Size.create(e,i)},O.prototype._doLayoutContent=function(t,e,i){var o=this.model;this.$_prepareRows(t,this._tbody),this.$_refreshCells(t.items,this._tbody),this.$_setCellsDisplay(this._cells,t.items),this.$_updateHead(t),this.$_updateRows(t,o)},O.prototype._doDraw=function(t){},O.prototype.$_initTable=function(){var t=re.getDoc(this._thead),e=this._thead,i=t.createElement("tr"),o=(e.appendChild(i),i.setAttribute("aria-hidden","true"),i.style);o.setProperty("border","0px none","important");for(var n=0;n<2;n++){var r=t.createElement("th");r.scope="col",(o=r.style).setProperty("visibility","hidden","important"),o.setProperty("margin","0px","important"),o.setProperty("padding","0px","important"),o.setProperty("font-size","0px","important"),o.setProperty("line-height","0px","important"),o.height="0px",i.appendChild(r)}},O.prototype.$_prepareRows=function(t,e){for(var i=re.getDoc(e),o=t.items.length;e.childElementCount<o;){var n=i.createElement("tr");n.$_view=this.$_hash;for(var r=0;r<2;r++){var s=i.createElement("td"),a=(s.className=0==r?"rg-form-label-cell":"rg-form-value-cell",n.appendChild(s),i.createElement("div"));s.appendChild(a)}e.appendChild(n)}for(;e.childElementCount>o;)e.removeChild(e.lastChild)},O.prototype.$_refreshCells=function(t,e){for(var i=this.formView.focusedIndex,o=this._cells,n=t.length,r=e.children,s=0;s<n;s++)for(var a=t[s],l=r[s].children,h=0;h<2;h++){var d=o[h][s];d?(d.cell,l[h]):d=o[h][s]=new J(l[h],h),d.formItem=a,d.trow=s,d.focused=s==i}for(h=0;h<2;h++)for(var u=this._cells[h],s=n;s<o.length;s++)u[h]=null;o.length=n},O.prototype.$_setCellsDisplay=function(t,e){for(var i=e.length,o=0;o<i;o++)for(var n=e[o],r=0;r<2;r++){var s=t[r][o];s.spanned=!1,n instanceof Si.FormItemGroup?0==r?(s.setColSpan(2),s.setVisible(!0)):s.clear(!1):(s.setColSpan(1),s.setVisible(!0))}},O.prototype.$_updateHead=function(t){var e=this._thead.firstElementChild.children,i=e[0].style;i.width=t.labelWidth+"px",(i=e[1].style).width=t.valueWidth+"px"},O.prototype.$_updateRows=function(t,e){for(var i=t.form,o=this.formView.container.gridView,n=this._tbody.rows,r=e.minRowHeight+"px",s=this._rowPoints=[0],a=0,l=n.length;a<l;a++){var h=i.getVisibleItem(a),d=n[a];d.style.height=r,d.$_row=a,h.$_prepareLayout(i,t.columnBinder,a),this.$_updateRow(t,o,h,a,d),s[a+1]=s[a]+d.getBoundingClientRect().height}},O.prototype.$_setLabelStyle=function(t,e){t.className=e?"rg-form-label-cell rg-form-label-focused":"rg-form-label-cell"},O.prototype.$_updateRow=function(t,e,i,o,n){var r=this._cells,s=n.children[0];n.children[1];i instanceof Si.FormValueItem&&(s.firstElementChild.textContent=i.header.displayText,this.$_setLabelStyle(s,r[1][o].focused),this.$_updateValueCell(t,e,t.gridRow,i,this._cells[1][o]))},O.prototype.$_updateValueCell=function(t,e,i,o,n){var r,s=o instanceof Si.FormColumnItem&&t.formView.$_getGridCell(o,i);s?(e.body.getCellFormatters((r=o)._columnObj,n),this.$_renderColumnCell(t,e,i,r,s,n)):this.$_renderDataCell(t,o,n)},O.prototype.$_createRenderer=function(t,e,i){var o;return e===Ti.FormTemplateRenderer.TYPE?(o=new Ti.FormTemplateRenderer,i&&o.assignFrom(i),o):t.delegate.createRenderer(e,i,null)},O.prototype.$_getButtonVisible=function(t,e,i){var o=!1;switch(i){case ht.ButtonVisibility.ALWAYS:o=!0;break;case ht.ButtonVisibility.HIDDEN:o=!1;break;case ht.ButtonVisibility.VISIBLE:case ht.ButtonVisibility.ROWFOCUSED:o=e.focused;break;default:ht.ButtonVisibility.DEFAULT;o=e.focused||e.mouseEntered}return o},O.prototype.$_buttonWidth=function(t,e,i){var o,n=0;return n=(t.button||i.button)!=ht.CellButton.NONE&&(o=e.grid,t=t.buttonVisibility||e.buttonVisibility,this.$_getButtonVisible(o,i,t))?o.body.cellButtonWidth:n},O.prototype.$_editButtonWidth=function(t,e,i,o){var n,r,s,a,l=0;return l=!o.readonly&&e&&(n=i.grid,r=o.editorType,a=n.delegate.getCellEditor(r),s=o.editor||i.editor,a.hasButton(n.displayOptions.showNativeEditButton,s))&&(a=!1,(a=_t.CellIndex.equalsTo(n.focusedIndex,e.index,i.layout)?!!(s=n.delegate.getCellEditor(r))&&s.listing:a)||this.$_getButtonVisible(n,o,t.editButtonVisibility||i.editButtonVisibility))?n.body.editButtonWidth:l},O.prototype.$_editButtonCount=function(t,e,i,o){o=o.editorType;return i.grid.delegate.getCellEditor(o).buttonCount},O.prototype.$_editButtonVerti=function(t,e,i){if("number"===e.editorType)return null==(e=e.editor||i.editor||{}).direction||"horizontal"!==e.direction},O.prototype.$_errorWidth=function(t,e){return e.error?t.body.errorIconWidth:0},O.prototype.$_renderColumnCell=function(t,e,i,o,n,r){var s,a=r.cell,l=o._columnObj,h=o.renderer||l.renderer,h=(r.setEditor(null,o.editor||l.editor),"string"==typeof h?d=h:(d=h&&h.type||(l instanceof lt.SeriesColumn?ft.SeriesTextCellRenderer.SERIES_TYPE:at.TextCellRenderer.TYPE),c=h),!1),t=(r.renderer2&&!r.rendererChanged&&r.renderer2.type==d||(r.renderer2&&r.renderer2.clearAndDispose(),r.renderer2=this.$_createRenderer(t.formView,d,c),h=!(r.rendererChanged=!1)),a.firstElementChild),d=r.renderer2,u=re.getDoc(t),c=(!h&&d&&d._dom!=t&&(d.clearContent(),h=!0),e.getItem(i)),_=this.$_buttonWidth(o,l,r),p=this.$_editButtonWidth(o,c,l,r),f=p&&this.$_editButtonCount(o,c,l,r),g=p&&this.$_editButtonVerti(e,r,l),i=this.$_errorWidth(e,r),m=6+this.formView.$_getScrollBarWidth(),o=r.cellButton,y=r.editButtons,c=r.errorIcon;if(0<_?(o?s=o.style:(o=u.createElement("span"),r.cellButton=o,(s=o.style).position="absolute",s.display="inline-block",s.height="100%",s.top="0px"),r.buttonWidth<=0&&(a.appendChild(o),r.buttonWidth=_),s.right=m+"px",s.width=_+"px",r.resetButtonClass()):0<r.buttonWidth&&(a.removeChild(o),r.buttonWidth=0),0<p){if(!y||y.length!=f){y&&y.forEach(function(t){a.removeChild(t)});for(var y=r.editButtons=[],v=0;v<f;v++){var C=u.createElement("span");y.push(C),(s=C.style).position="absolute",s.display="inline-block",s.height="100%",s.top="0px",a.appendChild(C)}}var l=r.editorType,w=e.delegate.getCellEditor(l);y.forEach(function(t,e){w.setButtonStyle(t,e,g,_,p)||((s=t.style).right=m+_+e*p+"px",s.width=p+"px",r.resetEditClass(t,e))}),r.editWidth=p*(g?1:f)}else 0<r.editWidth&&(y.forEach(function(t){a.removeChild(t)}),r.editWidth=0);0<i?(c?s=c.style:(c=u.createElement("span"),r.errorIcon=c,(s=c.style).position="absolute",s.display="inline-block",s.top="0px",s.height="100%"),r.errorWidth<=0&&(a.appendChild(c),r.errorWidth=i),s.right=m+_+r.editWidth+"px",s.width=i+"px",r.resetErrorClass()):0<r.errorWidth&&(a.removeChild(c),r.errorWidth=0);o=d.styleName,h?d.initContent(n._index,t,o):d.checkClassName(o)&&(d.clearContent(),d.initContent(n._index,t,o)),d.renderCell(e,n,r),l=n.isValueChanged()&&e.body._showChangeMarker;l!=r.valueChanged&&(l?((i=r.changedMarker)||((i=r.changedMarker=u.createElement("div")).className="rg-changed-marker",i.style.position="absolute",i.style.display="block",i.style.top="0px",r.changedMarker=i),a.appendChild(i)):r.changedMarker&&r.valueChanged&&a.removeChild(r.changedMarker),r.valueChanged=l)},O.prototype.$_renderDataCell=function(t,e,i){var o=i.cell,n=e.renderer,n=(e instanceof Si.FormTemplateItem?r=Ti.FormTemplateRenderer.TYPE:"string"==typeof n?r=n:(r=n&&n.type||at.TextCellRenderer.TYPE,s=n),!1),r=(i.renderer2&&!i.rendererChanged&&i.renderer2.type==r||(i.renderer2&&i.renderer2.clearAndDispose(),i.renderer2=this.$_createRenderer(t.formView,r,s),n=!(i.rendererChanged=!1)),o.firstElementChild),s=i.renderer2,o=(!n&&s&&s._dom!=r&&(s.clearContent(),n=!0),s.styleName);n?s.initFormContent(r,o):s.checkClassName(o)&&(s.clearContent(),s.initFormContent(r,o)),s instanceof Ti.FormTemplateRenderer&&(s.template=e.template,s.renderFormCell(t.formView,e))},O.prototype.$_focusedChanged=function(t,e){var i=this._tbody.rows;0<=t&&this.$_setLabelStyle(i[t].cells[0],!1),0<=e&&this.$_setLabelStyle(i[e].cells[0],!0)};var L,it=O;function O(t,e){t=L.call(this,t,e,"bodyView")||this;return t._cells=[[],[]],t._rowPoints=[],t}t.FormBodyView=it;ot=d,ne.__extends(P,ot),P.prototype._doDispose=function(){for(var t=0,e=this._headerViews;t<e.length;t++)e[t].dispose();this._headerViews=null,ot.prototype._doDispose.call(this)},P.prototype._getCssSelector=function(){return""},P.prototype._doMeasure=function(t,e,i){return ge.Size.create(e,i)},P.prototype._doLayoutContent=function(t,e,i){},P.prototype._doDraw=function(t){};var ot,o=P;function P(t,e){t=ot.call(this,t,e,"groupContainer")||this;return t._headerViews=[],t}t.FormGroupContainer=o})),ki=(t(Di),Di.FormOptions,Di.FormMarquee,Di.FormView,Di.FormHeaderCellElement,Di.FormCloseView,Di.FormHeaderView,Di.FormFooterView,Di.FormBodyCellElement,Di.FormGroupHeaderElement,Di.FormBodyView,Di.FormGroupContainer,e(function(t,e){Object.defineProperty(e,"__esModule",{value:!0});n=ke.VisualContainer,ne.__extends(o,n),o.prototype._doDispose=function(){this._gridView=null,this._watchTimer&&clearInterval(this._watchTimer),n.prototype._doDispose.call(this)},_dp(o,"gridView",{get:function(){return this._gridView}}),_dp(o,"formView",{get:function(){return this._formView||(this._formMarquee=new Di.FormMarquee(this.doc),this.addElement(this._formMarquee),this._formView=new Di.FormView(this),this._formView.$_initialzie(),this.addElement(this._formView)),this._formView}}),_dp(o,"heightMeasurer",{get:function(){return this._heightMeasurer}}),o.prototype.setWatchTimer=function(t){this._watchTimer&&clearInterval(this._watchTimer),this._watchTimer=null,this._displayObserver=this._displayObserver||this.$_displayObserver.bind(this),t&&(this._watchTimer=setInterval(this._displayObserver,100))},o.prototype.recallHeight=function(){var t=this._containerDom.parentElement.style;this.gridView._loading||(this._orgCssHeight?t.height=this._orgCssHeight:t.removeProperty("height"))},o.prototype.getTableCell=function(t){return this._gridView.getTableCell(t)},o.prototype._doResized=function(t){n.prototype._doResized.call(this,t),this._gridView.$_containerResized()},o.prototype._isOutChildElement=function(t){var e=this.gridView,t="focusout"===t.type?t.relatedTarget:t.target;if(e.filterSelector.opened&&re.Utils.isAncestorOf(e.filterSelector._element,t))return!0;try{var i=t&&t.className||"";if(0<=i.indexOf("rg-editor")&&t.$_owner._grid.container!==this)return!1;if(0<=i.indexOf("rg-root")&&t!==this._containerDom)return!1}catch(t){}if(e.isEditing())for(var o=t,i=void 0;o;){if(0<=(i=o.className||"").indexOf("rg-"))return!0;o=o.parentElement}return!1},o.prototype._doPrepareContainer=function(t,e,i){t.className="rg-root rg-grid",re.Utils.isMobile()&&(t.style.touchAction="unset"),this._gridView=this._createGridView(e,i),this.addElement(this._gridView),this._activeView=this._gridView,this._heightMeasurer=new s(this.measurer),this._sizeInfo=new nt.Rectangle(0,0,t.clientWidth,t.clientHeight)},o.prototype._createDefaultTool=function(){return new Ei.GridViewSelectionTool(this)},o.prototype._doLayout=function(t){var e,i=this._gridView,o=this._formView,n=this._formMarquee;o&&o.visible?this._activeView!==o&&(i.$_deactivateView(),o.$_activateView(),0<=i.focusedRow&&(e=(e=!(e=i.focusedItem)||e instanceof rt.GridRow?e:i.getNextRow(e))||i.getFirstRow(),o.currentRow=e?e.index:-1),this._activeView=o):this._activeView===o&&(o&&o.$_deactivateView(),i.$_activateView(),o&&0<=o.currentRow&&i.setFocusedItem(o.currentRow),this._activeView=i),n&&(n.visible=o.visible),this._activeView!=i&&!o.options.modal||(e=t.clone(),i.setRect(e),e.x=e.y=0,i.$_layout(e)),i._dom.style.opacity=this._activeView!=i&&o.options.modal?o.options.modalOpacity+"":"",this._activeView===o&&(e=t.clone(),this._formView.options.padRect(e),this._formView.setRect(e),e.x=e.y=0,o.$_layout(i.delegate,e),n.setRect(t))},o.prototype._doBeforeRender=function(){var t,e=this.gridView,i=e._dom;i&&0<i.scrollLeft&&(t=i.scrollLeft,e.leftPos=t,i.scrollLeft=0),e._dataLoad&&this.recallHeight()},o.prototype._doAfterRender=function(){var t;this.gridView.fitSyncHeight()||(t=this._containerDom.parentElement,this._orgCssHeight=t.style.height),this._gridView.visible&&this._gridView.$_afterRender()},o.prototype._doPrepareRender=function(t){t=t.clone();this._gridView.visible&&(this._gridView.setRect(t),t.x=t.y=0,this._gridView.$_prepareRender(t)),this._formView&&this._formView.visible&&(this._formView.options.padRect(t),this._formView.setRect(t),t.x=t.y=0,this._formView.$_prepareRender(t))},o.prototype._createGridView=function(t,e){return new Ei.GridView(this,t,e)},o.prototype._resizeHandler=function(t){var e;null==this._watchTimer&&((e=this)._resizeTimer=setTimeout(function(){e._displayObserver()},100))},o.prototype.$_displayObserver=function(){var t=this._containerDom,e=t.clientWidth,i=t.clientHeight,o=this._sizeInfo;0<e&&0<i&&(1<=Math.abs(this._sizeInfo.width-e)||1<=Math.abs(this._sizeInfo.height-i))&&(this._gridView.fitSyncHeight()||(this._orgCssHeight=t.parentElement.style.height),o.width=e,o.height=i,this.invalidateLayout(),this._doResized(null))};var n,i=o;function o(t,e,i,o){t=n.call(this,t,i=void 0===i?!1:i,o=void 0===o?null:o)||this,i=t._containerDom.parentElement;return i.style.height&&(t._orgCssHeight=i.style.height),t._gridView&&(t._gridView.$_handler=e),t}e.GridContainer=i;r=se.Base,ne.__extends(a,r),a.prototype._doDispose=function(){this._container=null,r.prototype._doDispose.call(this)},_dp(a,"rowHeight",{get:function(){return this._rowHeight||(this._rowHeight=this.$_measure(this._bodyStyle,this._dataRowStyle,this._dataCellStyle))}}),_dp(a,"headerHeight",{get:function(){return this._headerHeight||(this._headerHeight=this.$_measure(this._headerStyle,this._headerRowStyle,this._headerCellStyle))}}),_dp(a,"summaryHeight",{get:function(){return this._summaryHeight||(this._summaryHeight=this.$_measure(this._summaryStyle,this._summaryRowStyle,this._summaryCellStyle))}}),_dp(a,"footerHeight",{get:function(){return this._footerHeight||(this._footerHeight=this.$_measure(this._footerStyle,this._footerRowStyle,this._footerCellStyle))}}),_dp(a,"groupFooterHeight",{get:function(){return this._gfooterHeight||this.$_measure(this._bodyStyle,this._groupFooterStyle,this._groupFooterCellStyle)}}),a.prototype.measure=function(t){this._dirty&&(this._dirty=!1)},a.prototype.invalidate=function(){this._dirty=!0},a.prototype.$_prepareElements=function(t){var e=re.getDoc(t),i=e.createElement("table"),o=(i.setAttribute("aria-hidden","true"),i.createCaption()),o=(o.textContent="grid measurer table",o.style.width=o.style.height="0px",o.style.padding="none",o.style.boxSizing="border-box",o.style.overflow="hidden",t.appendChild(i),i.style),t=(o.width="1000px",o.height="1px",o.left="-10000px",o.position="absolute",i.className="rg-table",e.createElement("tbody")),o=(i.appendChild(t),e.createElement("tr")),i=(t.appendChild(o),e.createElement("td")),t=(i.className="rg-data-cell",o.appendChild(i),e.createElement("div"));i.appendChild(t),t[re.Utils.TextProp]="AYwyhi우리테크"},a.prototype.$_measure=function(t,e,i){var o=this._container,n=this._container.firstElementChild.tBodies[0].rows[0],r=n.cells[0];return o.className=t,n.className=e,r.className=i,n.offsetHeight};var r,s=a;function a(t){var e=r.call(this)||this;return e._bodyStyle="rg-body",e._headerStyle="rg-header",e._summaryStyle="rg-header-summary",e._footerStyle="rg-footer",e._dataRowStyle="rg-data-row",e._headerRowStyle="",e._summaryRowStyle="",e._footerRowStyle="",e._groupFooterStyle="rg-rowgroup-footer",e._dataCellStyle="rg-data-cell",e._headerCellStyle="rg-header-cell",e._summaryCellStyle="rg-header-summary-cell",e._footerCellStyle="rg-footer-cell",e._groupFooterCellStyle="rg-rowgroup-footer-cell",e._rowHeight=0,e._headerHeight=0,e._summaryHeight=0,e._footerHeight=0,e._gfooterHeight=0,e._dirty=!0,e._container=t,e.$_prepareElements(t),e}e.GridMeasurer=s})),Mi=(t(ki),ki.GridContainer,ki.GridMeasurer,e(function(t,e){Object.defineProperty(e,"__esModule",{value:!0});i=_e.GridBaseOptions,ne.__extends(n,i),n.prototype._doDispose=function(){i.prototype._doDispose.call(this)},_dp(n,"levelIndent",{get:function(){return this._levelIndent}}),_dp(n,"lineVisible",{get:function(){return this._lineVisible},set:function(t){t!=this._lineVisible&&(this._lineVisible=t,this._changed())}}),_dp(n,"showCheckBox",{get:function(){return this._showCheckBox},set:function(t){t!=this._showCheckBox&&(this._showCheckBox=t,this._changed())}}),_dp(n,"iconImagesRoot",{get:function(){return this._iconImagesRoot},set:function(t){t!==this._iconImagesRoot&&(this._iconImagesRoot=t,this._changed())}}),_dp(n,"iconImages",{get:function(){return this._iconImages},set:function(t){t!==this._iconImages&&(this._iconImages=t?t.slice():[],this._changed())}}),_dp(n,"defaultIcon",{get:function(){return this._defaultIcon},set:function(t){t!=this._defaultIcon&&(this._defaultIcon=t,this._changed())}}),_dp(n,"expandedIcon",{get:function(){return this._expandedIcon},set:function(t){t!=this._expandedIcon&&(this._expandedIcon=t,this._changed())}}),_dp(n,"collapsedIcon",{get:function(){return this._collapsedIcon},set:function(t){t!=this._collapsedIcon&&(this._collapsedIcon=t,this._changed())}}),_dp(n,"iconCallback",{get:function(){return this._iconCallback},set:function(t){t!=this._iconCallback&&(this._iconCallback=t,this._changed())}}),_dp(n,"collapseWhenLeftKey",{get:function(){return this._collapseWhenLeftKey},set:function(t){t!=this._collapseWhenLeftKey&&(this._collapseWhenLeftKey=t,this._changed())}}),_dp(n,"collapseWhenCtrlKey",{get:function(){return this._collapseWhenCtrlKey},set:function(t){t!=this._collapseWhenCtrlKey&&(this._collapseWhenCtrlKey=t,this._changed())}}),_dp(n,"expandWhenRightKey",{get:function(){return this._expandWhenRightKey},set:function(t){t!=this._expandWhenRightKey&&(this._expandWhenRightKey=t,this._changed())}}),_dp(n,"expandWhenCtrlKey",{get:function(){return this._expandWhenCtrlKey},set:function(t){t!=this._expandWhenCtrlKey&&(this._expandWhenCtrlKey=t,this._changed())}}),_dp(n,"iconVisible",{get:function(){return this._iconVisible},set:function(t){t!=this._iconVisible&&(this._iconVisible=t,this._changed())}}),_dp(n,"expanderIconStyle",{get:function(){return this._expanderIconStyle},set:function(t){t!=this._expanderIconStyle&&(this._expanderIconStyle=t,this._changed())}});var i,o=n;function n(t){t=i.call(this,t)||this;return t._levelIndent=16,t._lineVisible=!0,t._showCheckBox=!1,t._iconImagesRoot="",t._defaultIcon=-1,t._collapseWhenLeftKey=!0,t._collapseWhenCtrlKey=!0,t._expandWhenRightKey=!0,t._expandWhenCtrlKey=!0,t._iconVisible=!0,t._expanderIconStyle=ht.TreeExpanderIconStyle.TRIANGLE,t._expandedIcon=-1,t._collapsedIcon=-1,t}e.TreeOptions=o})),Fi=(t(Mi),Mi.TreeOptions,e(function(t,m){Object.defineProperty(m,"__esModule",{value:!0});i=wi.CellHandle,ne.__extends(o,i),_dp(o,"expanded",{get:function(){return this._expanded},set:function(t){t!=this._expanded&&(this._expanded=t,this._changed())}}),o.prototype._createDom=function(){return null};var i,e=o;function o(t,e){t=i.call(this,t,e,"treeExpandHandle")||this;return t._expanded=!1,t.clickable=!0,t}m.TreeExpandHandle=e,m.TREE_INDENT=3;n=at.DataCellRenderer,ne.__extends(y,n),y.prototype._doDispose=function(){this._dom.style.removeProperty("padding-left"),this._expander=this._check=this._icon=this._span=this._label=null,n.prototype._doDispose.call(this)},_dp(y,"type",{get:function(){return y.TYPE}}),_dp(y,"styleName",{get:function(){return y.STYLE_NAME}}),y.prototype._doInitContent=function(t){var e=re.getDoc(t),i=this._expander=e.createElement("span"),i=(t.appendChild(i),this._check=e.createElement("input")),i=(i.type="checkbox",i.className="rg-tree-checkbox",i.style.display="inline-block",t.appendChild(i),this._icon=e.createElement("img")),i=(i.className="rg-tree-icon",i.alt="",t.appendChild(i),this._span=e.createElement("span")),i=(t.appendChild(i),this._label=e.createElement("label"));i.style.display="none",t.appendChild(i)},y.prototype._doRenderCell=function(t,e,i,o,n){var r=t.treeOptions,s=r.showCheckBox,a=r.levelIndent,l=this._expander,h=this._dom,d=this._check,u=this._icon,c=this._span,_=this._label,p=e.item,f=i.cell,g=r.expanderIconStyle===ht.TreeExpanderIconStyle.SQUARE?" square":"";l.className=p.isLeaf?"rg-tree-leaf":p.expanded?"rg-tree-expanded"+g:"rg-tree-collapsed"+g,t.accessibility&&(p.isLeaf?f.removeAttribute("aria-expanded"):f.setAttribute("aria-expanded",p.expanded?"true":"false")),this._exclusive!=t.checkBar.exclusive&&(this._exclusive=t.checkBar.exclusive,d.setAttribute("type",this._exclusive?"radio":"checkbox"),d.className=this._exclusive?"rg-tree-radio":"rg-tree-checkebox"),s?(d.parentElement||h.insertBefore(d,this._span),d.checked=p.checked,l=d.id=y.FOR_ID+e.item.index,_.setAttribute("for",l),_[re.Utils.TextProp]=this._makeText(t,e,i)+(d.checked?" checked":" unchecked")):d.parentElement&&h.removeChild(d),r.iconVisible?(u.parentElement||h.insertBefore(u,this._span),(g=t.getTreeIcon(p))?(u.src=g,u.removeAttribute("height"),u.style.removeProperty("visibility")):(u.removeAttribute("src"),u.height=1,u.style.visibility="hidden")):u.parentElement&&h.removeChild(u),c[re.Utils.TextProp]=this._makeText(t,e,i),h.style.setProperty("padding-left",m.TREE_INDENT+(p.level-1)*a+"px","important")},y.TYPE="tree",y.FOR_ID="$$-tree-check",y.STYLE_NAME="rg-renderer "+(y.STYLE="rg-tree-renderer");var n,a=y;function y(t){var e=n.call(this)||this;return e._exclusive=!1,e.assignFrom(t),e}m.TreeCellRenderer=a;l=X.RowElement,ne.__extends(s,l),s.prototype.isCheckBox=function(t){t=t.className;return"rg-tree-checkbox"==t||"rg-tree-radio"==t},s.prototype._doLayoutContent=function(t){l.prototype._doLayoutContent.call(this,t)},s.prototype._createRenderer=function(t,e,i,o,n){var r=t.layoutManager,s=e.dataColumn.layout;return 0===r.getHorzColumnIndex(s)?new a(o):l.prototype._createRenderer.call(this,t,e,i,o,n)},s.prototype.$_getDefaultRenderer=function(t,e){t=t.layoutManager,e=e.dataColumn.layout;return(0===t.getHorzColumnIndex(e)?a:at.TextCellRenderer).TYPE};var l,r=s;function s(t){return l.call(this,t,"treeItemView")||this}m.TreeItemElement=r;h=r,ne.__extends(u,h),u.prototype._getFirstCell=function(t){return this._getStartCell(t)},u.prototype._getLastCell=function(t){return this._getEndCell(t)},u.prototype._getStartCell=function(t){return 0},u.prototype._getEndCell=function(t){return t.fixedCellCount-1};var h,d=u;function u(){return null!==h&&h.apply(this,arguments)||this}m.FixedTreeItemElement=d;c=r,ne.__extends(p,c),p.prototype._getFirstCell=function(t){return this._getStartCell(t)},p.prototype._getLastCell=function(t){return this._getEndCell(t)},p.prototype._getStartCell=function(t){return t.cellCount-t.rightCellCount},p.prototype._getEndCell=function(t){return t.cellCount-1};var c,_=p;function p(){return null!==c&&c.apply(this,arguments)||this}m.RightTreeItemElement=_;f=gt.GridBodyElement,ne.__extends(g,f),g.prototype.isTreeCell=function(t){t=this.bodyCellAt(t);return t&&t.renderer2 instanceof a},g.prototype.createRowElement=function(){return new r(this.doc)};var f,e=g;function g(t,e){return f.call(this,t,e)||this}m.TreeBodyElement=e;v=gt.FixedBodyElement,ne.__extends(C,v),C.prototype.isTreeCell=function(t){t=this.bodyCellAt(t);return t&&t.renderer2 instanceof a},C.prototype.createRowElement=function(){return new d(this.doc)};var v,e=C;function C(){return null!==v&&v.apply(this,arguments)||this}m.FixedTreeBodyElement=e;w=gt.RightBodyElement,ne.__extends(x,w),x.prototype.isTreeCell=function(t){t=this.bodyCellAt(t);return t&&t.renderer2 instanceof a},x.prototype.createRowElement=function(){return new _(this.doc)};var w,e=x;function x(){return null!==w&&w.apply(this,arguments)||this}m.RightTreeBodyElement=e;b=pt.LayerElement,ne.__extends(I,b),I.prototype._doDispose=function(){this._linePool=null,this._lines=null,b.prototype._doDispose.call(this)},_dp(I,"levelWidth",{get:function(){return this._levelWidth},set:function(t){t!=this._levelWidth&&(this._levelWidth=t,this.invalidate())}}),_dp(I,"handleWidth",{get:function(){return this._handleWidth},set:function(t){t!=this._handleWidth&&(this._handleWidth=t,this.invalidate())}}),_dp(I,"handleHeight",{get:function(){return this._handleHeight},set:function(t){t!=this._handleHeight&&(this._handleHeight=t,this.invalidate())}}),_dp(I,"stroke",{get:function(){return this._stroke},set:function(t){t!=this._stroke&&(this._stroke=t,this.invalidate())}}),I.prototype.setRange=function(t,e,i){e==this._startIndex&&i==this._endIndex||(this._startIndex=e,this._endIndex=i,this.invalidate())},I.prototype.layout=function(t){var e=this._treeView;if(this.$_hideAll(),!(!e||this._startIndex<0||this._endIndex<0||this._startIndex>this._endIndex)){for(var i=null,o=this._startIndex;o<=this._endIndex&&!(i=e.getItem(o));o++);if(i){var n=i.level;if(1<n||0<i.childIndex){for(var r=0;r<n;r++){var s=i.getAncestor(r);(a=s.last)&&a.index>=o&&(a=this.$_findLevelItem(r+1,o),this.$_drawVertLine(t,this.$_borrowLine(),null,a,s.level))}0<i.childIndex&&this.$_drawVertLine(t,this.$_borrowLine(),null,i,i.parent.level)}for(;o<=this._endIndex;o++){var a,l=(i=e.getItem(o)).parent;(r=i.childIndex)<l.count-1&&((a=l.getItem(r+1)).index>this._endIndex&&(a=null),this.$_drawVertLine(t,this.$_borrowLine(),i,a,l.level)),(l=i)&&l.expanded&&0<l.count&&((a=l.getItem(0)).index>this._endIndex&&(a=null),this.$_drawChildLine(t,this.$_borrowLine(),i,a)),this.$_drawHorzLine(t,this.$_borrowLine(),i)}}}},I.prototype._getCssSelector=function(){return"rg-tree-lines"},I.prototype._initDom=function(t){b.prototype._initDom.call(this,t);t=t.style;t.setProperty("pointer-events","none","important"),t.setProperty("overflow","hidden")},I.prototype._doDraw=function(t){},I.prototype.$_borrowLine=function(){var t=this._linePool.pop();return t||((t=this._treeView.doc.createElement("div")).className="rg-tree-line",t.style.position="absolute",this._dom.appendChild(t)),t.style.display="inline-block",this._lines.push(t),t},I.prototype.$_hideAll=function(){for(var t=this._lines.length-1;0<=t;t--)"none"!=this._lines[t].style.display&&(this._lines[t].style.display="none");this._linePool=this._linePool.concat(this._lines.splice(0,this._lines.length))},I.prototype.$_findLevelItem=function(t,e){for(var i=e;i<=this._endIndex;i++){var o=this._treeView.getItem(i);if(o&&o.level==t)return o}return null},I.prototype.$_setBounds=function(t,e,i,o,n){t=t.style;t.left=m.TREE_INDENT+e+"px",t.top=i+"px",t.width=1==o?"1px":o+"px",t.height=1==n?"1px":n+"px"},I.prototype.$_drawVertLine=function(t,e,i,o,n){var r,s,a=t.topIndex,n=n*this._levelWidth+this._levelWidth/2,l=0,h=this.height,d=this._handleHeight;i&&(r=t.getItemBounds(i.index-a),s=i instanceof E.TreeItem&&i.hasChildren?d+2:0,l=r.y+r.height/2+s/2+1),o&&(r=t.getItemBounds(o.index-a),s=o instanceof E.TreeItem&&o.hasChildren?d:0,h=r.y+r.height/2-s/2),this.$_setBounds(e,n,l,1,h-l)},I.prototype.$_drawHorzLine=function(t,e,i){var o=t.topIndex,n=i.parent.level*this._levelWidth+this._levelWidth/2,r=i.level*this._levelWidth+1,t=(i.hasChildren&&(n+=this._handleWidth/2+1),t.getItemBounds(i.index-o)),i=t.y+t.height/2;this.$_setBounds(e,n,i,r-n,1)},I.prototype.$_drawChildLine=function(t,e,i,o){var n=t.topIndex,r=i.level*this._levelWidth+this._levelWidth/2,s=this.height,i=t.getItemBounds(i.index-n),a=i.y+i.height/2+5;o&&(i=t.getItemBounds(o.index-n),t=o.hasChildren?this._handleHeight:0,s=i.y+i.height/2-t/2),this.$_setBounds(e,r,a,1,s-a)};var b,e=I;function I(t){var e=b.call(this,t.doc)||this;return e._levelWidth=16,e._handleWidth=9,e._handleHeight=9,e._stroke="gray",e._linePool=[],e._lines=[],e._startIndex=-1,e._endIndex=-1,e._treeView=t,e}m.TreeLinesElement=e})),Li=(t(Fi),Fi.TreeExpandHandle,Fi.TREE_INDENT,Fi.TreeCellRenderer,Fi.TreeItemElement,Fi.FixedTreeItemElement,Fi.RightTreeItemElement,Fi.TreeBodyElement,Fi.FixedTreeBodyElement,Fi.RightTreeBodyElement,Fi.TreeLinesElement,e(function(t,e){Object.defineProperty(e,"__esModule",{value:!0});a=R.GridSelectionTool,ne.__extends(o,a),o.prototype._doDispose=function(){a.prototype._doDispose.call(this)},o.prototype._doKeyDown=function(t){var e,i=this.focused.clone(),o=this.grid.treeOptions,n=t.which,r=t.ctrlKey||t.metaKey;if(i&&(e=i.item))switch(n){case 39:if(!r&&1==this.grid.visibleLayoutCount&&i.isRight&&o.expandWhenRightKey||r&&o.expandWhenCtrlKey){if(!e.expanded)return e.setExpanded(!0,!1,!1),!0;if(0<e.count)return i.down(),this.setFocused(i,!0,!0),!0}break;case 37:if(!r&&i.isLeft&&o.collapseWhenLeftKey||r&&o.collapseWhenCtrlKey){if(e.expanded)return e.setExpanded(!1,!1,!1),!0;if(!(e.parent instanceof E.RootTreeItem))return i.itemIndex=e.parent.index,this.setFocused(i,!0,!0),!0}}return a.prototype._doKeyDown.call(this,t)},o.prototype._doMouseDown=function(t){var e=t.mouseX,i=t.mouseY,o=t.altKey,n=this.grid,e=this.findElementAt(e,i,!1),i=this.mouseEventTarget;e instanceof Fi.TreeItemElement&&X.RowElement.isExpander(i)&&!o&&(i=e._item)instanceof E.TreeItem&&(i.expanded?n.collapse(i,!1):n.expand(i,!1,!1)),a.prototype._doMouseDown.call(this,t)},o.prototype._doClick=function(t,e,i){e=e||t.mouseX,i=i||t.mouseY;var o=t.shiftKey,n=this.grid,r=(this.focused,this.findElementAt(e,i,!1)),s=this.mouseEventTarget;r instanceof Fi.TreeItemElement&&r.isCheckBox(s)&&(n.editOptions.checkable?(n=n.getItem(r.itemIndex),this._doCheck(s,n,o)):t.preventDefault()),a.prototype._doClick.call(this,t,e,i)},o.prototype._canMoveRowAt=function(t,e,i){var o=t.boundsByContainer(t.getCellRectAt(this.grid.layoutManager,e,!1)),n=Fi.TREE_INDENT+(e.item.level-1)*this.grid.treeOptions.levelIndent;if(i<o.x+(t.isTreeCell(e)?n:20)){var r=this.grid.getSelectedItems();if(1<r.length)for(var s=r[0].level,a=1;a<r.length;a++)if(r[a].level<s)return!1;return!0}};var a,i=o;function o(t){return a.call(this,t,"treeViewSelectionTool")||this}e.TreeViewSelectionTool=i;n=ki.GridContainer,ne.__extends(s,n),s.prototype._doDispose=function(){n.prototype._doDispose.call(this)},_dp(s,"treeView",{get:function(){return this.gridView}}),s.prototype._createGridView=function(t,e){return new f(this,t,e)},s.prototype._createDefaultTool=function(){return new i(this)};var n,r=s;function s(t,e,i,o){return n.call(this,t,e,i,o)||this}e.TreeContainer=r;l=st.GridCell,ne.__extends(d,l),_dp(d,"getText",{get:function(){return null}}),_dp(d,"value",{get:function(){return null}});var l,h=d;function d(){return l.call(this,"treeItemExpanderCell")||this}u=st.GridCell,ne.__extends(_,u),_dp(_,"getText",{get:function(){var t,e=String(this.value());return e||(t=this.index).dataColumn&&(e=t.column.footer.text),e}}),_dp(_,"value",{get:function(){return null}});var u,c=_;function _(){return u.call(this,"treeItemFooterCell")||this}p=pi.GridBase,ne.__extends(g,p),g.prototype._doDispose=function(){p.prototype._doDispose.call(this)},_dp(g,"treeOptions",{get:function(){return this._treeOptions}}),_dp(g,"linesView",{get:function(){return this._linesView}}),g.prototype.isTree=function(){return!0},g.prototype._beforeChangeLayout=function(){},g.prototype.getLevels=function(t){return this._rs.getLevels(t)},g.prototype.getExpanderCell=function(t){return this._expanderCell.setIndex(_t.CellIndex.temp(this,t)),this._expanderCell},g.prototype.getFooterCell=function(t){return this._footerCell.setIndex(t),this._footerCell},g.prototype.expand=function(t,e,i,o){this.isItemEditing(null)||this._rs.expand(t,e,i,o)},g.prototype.collapse=function(t,e){this.isItemEditing(null)||this._rs.collapse(t,e)},g.prototype.expandAll=function(t){void 0===t&&(t=0),this.isItemEditing(null)||this._rs.expandAll(t)},g.prototype.collapseAll=function(){this.isItemEditing(null)||this._rs.collapseAll()},g.prototype.getTreeIcon=function(t){var e=this.treeOptions,i=e.iconImages;if(i){var o=void 0,o=t.hasChildren&&t.expanded&&-1<e.expandedIcon?e.expandedIcon:t.hasChildren&&t.collapsed&&-1<e.collapsedIcon?e.collapsedIcon:t.iconIndex,n=e.iconCallback;if(n){n=n(this.handler,t.index,t.dataRow,o);if("string"==typeof n)return n;isNaN(n)||(o=n)}if(0<=(o=o<0||o>=i.length?e.defaultIcon:o)&&o<i.length)return e.iconImagesRoot+i[o]}},g.prototype.getCheckedItems=function(){for(var t=[],e=0,i=this.itemCount;e<i;e++){var o=this.getItem(e);o.checked&&t.push(o)}return t},g.prototype.getCheckedItemIndices=function(){for(var t=[],e=0,i=this.itemCount;e<i;e++){var o=this.getItem(e);o.checked&&t.push(o.index)}return t},g.prototype.getCheckedRows=function(t){var e=null;if(t)for(var e=[],i=0,o=this.itemCount;i<o;i++){var n=this.getItem(i);n.checked&&e.push(n.row)}else e=this._rs.getCheckedRows();return e},g.prototype.getCheckedRowIds=function(t){var e=null;if(t)for(var e=[],i=0,o=this.itemCount;i<o;i++){var n=this.getItem(i);n.checked&&e.push(n.dataRow)}else e=this._rs.getCheckedRowIds();return e},g.prototype.checkChildren=function(t,e,i,o,n,r){if(void 0===n&&(n=!0),void 0===r&&(r=!1),t)for(var s=0,a=t.count;s<a;s++){var l=t.getItem(s);(!n||l.checkable)&&l.setChecked(e,r),!i||!l.expanded&&o||this.checkChildren(l,e,!0,o,n,r)}},g.prototype.resetCheckables=function(){this._rs.resetCheckables()},g.prototype.applyCheckables=function(){this._rs.applyCheckables()},g.prototype.getItemOfModel=function(t){return 0<=t.itemIndex?this.getItem(t.itemIndex):0<=t.dataRow?this.getItemOfRow(t.dataRow,!1):null},g.prototype.getJsonRows=function(){return this._rs.getJsonRows()},_dp(g,"dataSource",{get:function(){return this._rs&&this._rs.dataSource},set:function(t){this._rs&&(this._rs.dataSource=t)}}),_dp(g,"maxItemCount",{get:function(){return this._rs?this._rs.maxItemCount:0},set:function(t){this._rs&&(this._rs.maxItemCount=t)}}),_dp(g,"summarizer",{get:function(){return this._rs.summarizer}}),g.prototype._initStyles=function(){p.prototype._initStyles.call(this),this._treeOptions=new Mi.TreeOptions(this)},g.prototype._createItemSource=function(){return new qt.TreeGridItemProvider(!0)},g.prototype._doContentPanesCreated=function(){this._linesView=new Fi.TreeLinesElement(this),this.addElement(this._linesView)},g.prototype._createSidePane=function(){return p.prototype._createSidePane.call(this)},g.prototype._createLayoutManager=function(){return new y(this)},g.prototype._createBodyView=function(t){return new Fi.TreeBodyElement(this.doc,t)},g.prototype._createFixedBodyView=function(t){return new Fi.FixedTreeBodyElement(this.doc,t)},g.prototype._createRightBodyView=function(t){return new Fi.RightTreeBodyElement(this.doc,t)},g.prototype._visualObjectChanged=function(t){p.prototype._visualObjectChanged.call(this,t),0 instanceof le.CheckBar},g.prototype.append=function(){return this.insert(this._rs.rootItem,!1,!0)},g.prototype._doCanInsert=function(t,e,i){return t&&(0<t.count||!i||0==t.level||this.editOptions.appendable)},g.prototype._doMaxRowCountChanged=function(){this._rs.maxItemCount=this.maxItemCount},g.prototype.getSortFields=function(){return this._rs.getSortFields()},g.prototype.getSortDirections=function(){return this._rs.getSortDirections()},g.prototype.getSortCases=function(){return this._rs.getSortCases()},g.prototype._doSortItems=function(t,e,i){this._rs.setLabelComparer(this._doPrepareComparer(t)),this._rs.orderBy(t,e,i)},g.prototype._doColumnFiltersChanged=function(t,e){this._rs.includeParentItem=this.filteringOptions.includeParentItem,this.applyFilters(t,e)},g.prototype.setOptions=function(t){var e;t&&(e=this._rs,void 0!==t.hideDeleted&&(e.hideDeleted=t.hideDeleted),void 0!==t.hideDeletedRows&&(e.hideDeleted=t.hideDeletedRows),void 0!==t.summaryMode&&(e.summaryMode=t.summaryMode),void 0!==t.sortMode&&(e.sortMode=t.sortMdoe),p.prototype.setOptions.call(this,t))},g.prototype._doPrepareRender=function(t){var e=this._horzScrolled;p.prototype._doPrepareRender.call(this,t),e&&this.layoutManager.$_layoutLines()},g.prototype.$_doLayout=function(t,e){this._treeOptions;p.prototype.$_doLayout.call(this,t,e)},g.prototype.assignImageList=function(t){},g.prototype.refreshView=function(){p.prototype.refreshView.call(this)},g.prototype.getEditBounds=function(t,e){return p.prototype.getEditBounds.call(this,t,e)},g.prototype.updatePastedRow=function(t,e,i){t instanceof E.TreeItem&&(t=t.row)&&t.update(e,i)},g.prototype.appendPastedRow=function(t){var e=this.dataSource;e&&(t=e.createRow(t,-1,!1),e.rootRow.addChild(t,!1))},_dp(g,"undoable",{get:function(){return this._rs.undoable},set:function(t){this._rs.undoable=t}}),_dp(g,"canUndo",{get:function(){return this._rs.canUndo}}),_dp(g,"canRedo",{get:function(){return this._rs.canRedo}}),_dp(g,"undoing",{get:function(){return this._rs.undoing}}),_dp(g,"redoing",{get:function(){return this._rs.redoing}}),g.prototype.undo=function(){return!!this._rs.canUndo&&(this._rs.cancelWhenLastUndo=this.editOptions.cancelWhenLastUndo,this.editController.cancelEditor(!0),this._rs.undo(),!0)},g.prototype.redo=function(){return!!this._rs.canRedo&&(this._rs.redo(),!0)},g.prototype.execute=function(t){this._rs.execute(t)},g.prototype.clearCommandStack=function(t){this._rs.clearCommandStack(t=void 0===t?!0:t)},g.prototype.getFirstRow=function(){return null},g.prototype.getLastRow=function(){return null},g.prototype.getPrevRow=function(t){return null},g.prototype.getNextRow=function(t){return null},g.prototype.canMoveRows=function(t,e,i){if(i&&this.canMoveRow(e,!1)&&t&&0<t.length){var o=t[0].parent;if(o!==i.parent)return!1;for(var n=1,r=t.length;n<r;n++)if(o!==t[n].parent)return!1;for(var s=!1,n=0;n<t.length;n++){var a=t[n];a&&a.isDataRow&&(s=!0)}return s}},g.prototype._getMoveTarget=function(t,e,i,o){var n;return"keydown"!==t?this.getItem(i+o):(n=(t=this.getItem(i)).parent,t.childIndex+e.length>=n.children.length&&0<o||0===t.childIndex&&o<0?void 0:(e=this.getItem(i+o),t.level===e.level?e:(i=t.childIndex+o,!n||i<0||i>=n.children.length?void 0:n.children[i])))},g.prototype._doMoveRows=function(t,e){e=e&&e.dataId;if(0<=e){for(var i=[],o=0,n=t;o<n.length;o++){var r=n[o],r=r&&r.dataId;0<=r&&i.push(r)}if(0<i.length){var t=this.dataSource,s=t.rowsByIds(i,!1);if(0<s.length)return t.moveRows(s,t.rowById(e))}}return!1},g.prototype._fitLayoutWidth=function(t){if(!t.visible)return 0;var e,i=this.itemSource,o=this.getIndex(this.topIndex,t.firstColumn),n="",r=0,s=n=t.firstColumn.header.displayText,a=this.getBodyCellAt(o,!1),l=a&&a.renderer2&&a.renderer2._dom,h=a&&a.renderer2 instanceof Fi.TreeCellRenderer,d={0:re.Utils.getTextLength(s)},u={0:s};l&&(a=re.getWin(l).getComputedStyle(l))&&(n=a.paddingLeft,s=parseInt(n.substr(0,n.indexOf("px"))),n=a.paddingRight,r=(r+=0<s?s:0)+(0<(s=parseInt(n.substr(0,n.indexOf("px"))))?s:0),e={fontSize:a.fontSize,fontFamily:a.fontFamily,fontWeight:a.fontWeight,fontStyle:a.fontStyle});for(var c=0,_=i.itemCount;c<_;c++)o.itemIndex=c,d[m=h?o.item.level:0]=d[m]||0,n=this.getDisplayText(o),re.Utils.getTextLength(n)>d[m]&&(d[m]=re.Utils.getTextLength(n),u[m]=n);for(var p=0,f=0,g=Object.keys(d);f<g.length;f++){var m=g[f],y=h?parseInt(m)*this.linesView.levelWidth+6+(this.treeOptions.iconVisible?24:0):6;y+=this.container.measureText("rg-data-cell",u[m],e),p=Math.max(p,y)}r+=p;l=t.firstColumn,s=l.editor,a=this.delegate.getCellEditor(L.CellEditor.getEditorType(s));return a.hasButton(this.displayOptions.showNativeEditButton,s)&&(r+=this.body.editButtonWidth*a.buttonCount),l.button!==ht.CellButton.NONE&&(r+=this.body.cellButtonWidth),r},g.prototype.$_getVisibleAncestor=function(t){var e=this._rs.getItemOfRow(t);if(e){for(;e&&!e.visible;)e=e.parent;return e}return null},g.prototype.onItemProviderReset=function(t){this._currentRowId=-1,p.prototype.onItemProviderReset.call(this,t)},g.prototype.onTreeItemProviderItemChanged=function(t,e){this.invalidateLayout(),this.fireEvent(g.CHANGED,e)},g.prototype.onTreeItemProviderExpanding=function(t,e){return this._focusedRow=this.focusedIndex?this.focusedIndex.dataRow:-1,this.editController.editing&&!t.isEditing()&&this.editController.cancelEditor(!0),!this.editController.editing&&!t.isEditing()&&this.fireConfirmEvent(g.EXPANDING,e)},g.prototype.onTreeItemProviderExpanded=function(t,e){this.fireEvent(g.EXPANDED,e)},g.prototype.onTreeItemProviderCollapsing=function(t,e){return this._focusedRow=this.focusedIndex?this.focusedIndex.dataRow:-1,this.editController.editing&&!t.isEditing()&&this.editController.cancelEditor(!0),!this.editController.editing&&!t.isEditing()&&this.fireConfirmEvent(g.COLLAPSING,e)},g.prototype.onTreeItemProviderCollapsed=function(t,e){this.fireEvent(g.COLLAPSED,e)},g.EXPANDING="onTreeViewExpanding",g.EXPANDED="onTreeViewExpanded",g.COLLAPSING="onTreeViewCollapsing",g.COLLAPSED="onTreeViewCollapsed",g.CHANGED="onTreeViewChanged";var p,f=g;function g(t,e,i){t=p.call(this,t,e,i)||this;return t._expanderCell=new h,t._footerCell=new c,t._focusedRow=-1,t.itemSource=t._rs=t._createItemSource(),t}e.TreeView=f;m=we.GridLayoutManager,ne.__extends(v,m),v.prototype.layout=function(t){m.prototype.layout.call(this,t),this.$_layoutLines()},v.prototype.$_layoutLines=function(){var t,e,i=this.grid,o=i.linesView;(o.visible=i.treeOptions.lineVisible)&&(e=((t=0<this.fixedLayoutCount)?this.fixedBodyBounds:this.bodyBounds).clone(),t?(e.y+=this.fixedContentBounds.y,e.x+=this.fixedContentBounds.x):(e.y+=this.contentBounds.y,e.x+=this.contentBounds.x),0<this.layoutCount?e.width=Math.max(0,this.getLayoutWidth(0)):e.width=0,o.setRect(e),o.levelWidth=16,o.setRange(i,this.topIndex,Math.min(i.itemCount,this.topIndex+this.itemCount)-1),o.layout(this))};var m,y=v;function v(t){return m.call(this,t)||this}e.TreeGridLayoutManager=y})),Oi=(t(Li),Li.TreeViewSelectionTool,Li.TreeContainer,Li.TreeView,Li.TreeGridLayoutManager,e(function(t,e){Object.defineProperty(e,"__esModule",{value:!0});i=$.ExpressionRuntime,ne.__extends(n,i),n.prototype._doDispose=function(){this._columns=null,i.prototype._doDispose.call(this)},n.prototype.setColumns=function(t){this._columns=[];for(var e=0;e<t.length;e++)t[e].layout instanceof ct.CellLayoutColumnItem&&this._columns.push(t[e].layout.firstColumn.name)},n.prototype.setItemIndex=function(t,e){this._itemIndex=t,this._startCol=e},n.prototype.isIdentifier=function(t){return t=t.toLowerCase(),n.IDENTS.hasOwnProperty(t)?n.IDENTS[t]:i.prototype.isIdentifier.call(this,t)},n.prototype.evaluateIdentifier=function(t){if(t===n.ID_ROW)return String(this._itemIndex+1);throw new $.ExpressionEvaluationError("Invalid identifier key: "+t)},n.prototype.evaluateIndexerI=function(t,e){if(t!=n.ID_EXCELCOLUMN)throw new $.ExpressionEvaluationError("Invalid identifier indexer: "+t);if(e<0||e>=this._columns.length)throw new $.ExpressionEvaluationError("Data field index out of bounds:"+e);return this._columns[e]},n.prototype.evaluateIndexerS=function(t,e,i){if(t!=n.ID_EXCELCOLUMN)throw new $.ExpressionEvaluationError("Invalid identifier indexer: "+t);if(this._columns){t=this._columns.indexOf(e);if(t<0||t>=this._columns.length)throw new $.ExpressionEvaluationError("Column is not exists:"+e);return vi.ExcelUtil.toColCaption(t+this._startCol)}},n.IDENTS={excelcolumn:n.ID_EXCELCOLUMN=0,row:n.ID_ROW=1};var i,o=n;function n(){var t=i.call(this)||this;return t._columns=null,t}e.ColumnExportStatementRuntime=o;l=fi.GridExporterBase,ne.__extends(Y,l),Y.prototype.dispose=function(){return l.prototype.dispose.call(this),this._seriesCell=this._seriesCell.dispose(),this._linkRenderer=this._linkRenderer&&this._linkRenderer.dispose(),this._templateRenderer=this._templateRenderer&&this._templateRenderer.dispose(),this._imageRenderer=this._imageRenderer&&this._imageRenderer.dispose(),this._excelFormulaRuntime=this._excelFormulaRuntime.dispose(),null},Y.prototype._progressCallback=function(t,e,i,o){var n=this._progressGrid,r=this._multiOptions;n&&n.setExportProgress(i,o+r.prepareProgress,r.progressMessage)},Y.prototype.export=function(t,e){function i(){var t=++this._gridIndex;t<o.exportGrids.length?this._exportGridAsync(r,o,t,i.bind(this)):(!e.progressCallback&&this._progressGrid&&this._progressGrid.endExportProgress(),this.save())}if(l.prototype.export.call(this,t,e),this._progressGrid=t,e){var o=this._multiOptions=e,n=this._multiOptions.exportGrids;if(n&&!(n.length<=0)){var t=re.getDoc(t.container._containerDiv).documentElement,r=new vi.ExcelWorkbook(t);if(this._mergeHeads={},o.showProgress)this._allCount=this._prepareCount(o,n),this._progressMax=this._allCount+o.prepareProgress,this._progressPos=0,this._progressStep=Math.max(this._allCount/10|0,1),o.progressCallback?this.setProgress=o.progressCallback:(this._progressGrid&&this._progressGrid.beginExportProgress(o.progressMessage),this.setProgress=this._progressCallback),this._exportGridAsync(r,o,this._gridIndex=0,i.bind(this));else{for(var s=0,a=n.length;s<a;s++)this._exportGrid(r,n[s].options);this.save()}}}},Y.prototype.buildBook=function(t){var e=this._exportOptions.grid;e.isTree()?this.buildTreeSheet(e,t):this.buildSheet(e,t)},Y.prototype.buildSheet=function(t,e){var i=this._exportOptions,o=this._workbook,n=o.createSheet(this._sheetName,i),r=t.displayOptions;if(this._defaultHeight=r.rowHeight||r.minRowHeight,this._rowGrouped=t.rowGrouped,this._mergedGrouped=t.mergedRowGrouped,this._rowGrouped&&(this._rowLevels=t.rowGroupLevels),this._startItem=0,i.allItems&&this._rowGrouped){this.allItems=t.itemSource.getAllItems();var s=t.layoutManager.fixedItemCount;if(0<s)for(var a=0;a<s;a++)this.allItems.splice(a,0,t.getItem(a))}else i.pagingAllItems&&t.paged?((r=t.itemSource)instanceof Ci.GridItemProvider&&(this.allItems=r.getPagingAllItems()),i.onlyCheckedItems&&!t.rowGrouped&&(this.allItems=this.allItems.filter(function(t){return t.checked}))):i.onlyCheckedItems&&!t.rowGrouped&&(this.allItems=t.getCheckedItems(!1));var l,r=this.allItems,r=r?r.length:t.itemCount;this._rowGrouped||(this._startItem=0<i.start?i.start:0,r=!(0<(l=0<i.count?i.count:r))||this._startItem+l>r?r-this._startItem:l),this._indexItem=this._startItem,this._lastItem=this._startItem+r,this._currentRow=i.yOffset,n.setFirstCol(this._startCol=i.xOffset),this._prepareCommonStyles(t),this._buildColumns(t),n.createBorderEdges(mt.CssFactory.getSelectorStyle(this._preparer.documentCssStyles,".rg-grid")),this._buildDocumentTitle(o),this.header&&this.buildHeader(t),this.headerSummary&&this.buildSummaryItem(t,!1),this.buildItems(t,function(){this.footer&&this.buildSummaryItem(t,!0),this._buildDocumentTail(o),this._buildUserCells(t,o),e&&e()}.bind(this))},Y.prototype.buildHeader=function(t){for(var e=this._workbook,i=e.currentSheet,o=this._preparer,n=o.colCount,r=o.headerRowCount,s=t.header.heights||[],a=s&&0<s.length?t.header.minRowHeight:Math.max(t.header.height,t.header.minRowHeight*r)/r,l=[],h=0;h<r;h++)l.push(Math.max(s[h]||a,a)*Y.LINE_HEIGHT);for(var d=this._indents,u=this._currentRow,c=(i.setFirstRow(this._currentRow),this._startCol),_=this._headerCellStyle,p=[],h=0;h<r;h++)p.push(i.borrowRow(u+h,l[h]));if(this.indicator){if((m=p[0]).addText(c,this.indicatorHead,_),1<r){for(h=1;h<r;h++)p[h].addBlank(c,_);i.addMerge(u,c,r,1)}c++}if(this.checkBar){if((m=p[0]).addText(c,this.checkBarHead,_),1<r){for(h=1;h<r;h++)p[h].addBlank(c,_);i.addMerge(u,c,r,1)}c++}if(0<d){for(var f=0;f<d;f++){for(h=0;h<r;h++)p[h].addBlank(f+c,this._indentHeadStyle);i.addMerge(u,f+c,r,1)}c+=d}for(h=0;h<r;h++)for(var g=u+h,m=p[h],f=0;f<n;f++){var y=o.getHeader(h,f),v=y&&y.layout,C=f+c;if(v.isProxy||y.spanned)m.addBlank(C,_);else{var y=v.displayText,w=this._preparer.documentCssStyles,x=(v instanceof ct.CellLayoutColumnItem?v.firstColumn:v).header,x=x.exportStyleName||x.styleName,_=this._headerCellStyle,b=(x&&(_=this._parseStyles(e,this._inheritStyles([this._headerCssStyle,mt.CssFactory.getSelectorStyle(w,"."+x)]),!0)),m.addText(C,y,_),0),I=v.getHeaderSpan()-1,E=v.parent,w=E&&E.vertical;if(0<I){var S=0,R=v.vindex+1;if(w)for(;S++<I&&S<r;)b+=E.getVisible(R++)._hspan,o.getHeader(h+S,f).spanned=!0;else for(;S++<I&&f+S<n&&R<E.visibleCount;)b+=E.getVisible(R++)._cspan,o.getHeader(h,f+S).spanned=!0}w?i.addMerge(g,C,v.hspan+b,v.cspan):i.addMerge(g,C,v.hspan,v.cspan+b)}}this._currentRow+=r,this._exportOptions.applyFixed&&i.setFixedInfo(this._currentRow,void 0),i.setLastRow(this._currentRow-1)},Y.prototype.buildSummaryItem=function(t,l){function V(t,e,i,o,n){var r=p.getCell(i.layout),s=this._exportOptions,a=r.value;a instanceof Date?!s.datetimeCallback||(a=s.datetimeCallback(-1,i.name,a))instanceof Date?t.addDate(e,a,n):t.addText(e,a,n):isNaN(a)?(s=(i=(s=l?i.getFooter(p._childIndex):i.getHeaderSummary(p._childIndex))&&p.getCellFormatters(s,null))?r.getDisplayText(i):a,t.addText(e,s||"",n)):t.addNumber(e,a,n)}var e=this._workbook.currentSheet,i=this._preparer,B=i.colCount,o=i.dataRowCount,n=this._indents,r=l?t.footers:t.headerSummaries;if(r.visible){for(var s=r.visibleCount,a=s*o,h=this._currentRow,d=(e.setFirstRow(this._currentRow),this._startCol),u=t.layoutManager.getDataRowHeights(o),N=u.reduce(function(t,e){return t+e},0),c=[],_=0;_<s;_++)for(var p,f=-1===(f=(p=r.getVisible(_)).height)?-1:0<f?f/o:Math.max(p.minHeight,t.heightMeasurer.summaryHeight,f),g=0;g<o;g++)0<N&&0<u[g]?c.push(u[g]*p.height/N*Y.LINE_HEIGHT):c.push(-1===f?-1:f*Y.LINE_HEIGHT);if(this.indicator){for(var _=0,m=0;_<s;_++)for(var y=0;y<o;y++)x=e.borrowRow(h+m,c[m]),l?0===m?x.addText(d,this.indicatorFoot,this._indicatorFootStyle):x.addBlank(d,this._indicatorFootStyle):0===m?x.addText(d,this.indicatorSummary,this._indicatorSumStyle):x.addBlank(d,this._indicatorSumStyle),m++;e.addMerge(h,d++,a,1)}if(this.checkBar){for(_=0,m=0;_<s;_++)for(y=0;y<o;y++)x=e.borrowRow(h+m,c[m]),l?0===m?x.addText(d,this.checkBarSummary,this._checkBarSumStyle):x.addBlank(d,this._checkBarSumStyle):0===m?x.addText(d,this.checkBarFoot,this._checkBarFootStyle):x.addBlank(d,this._checkBarFootStyle),m++;e.addMerge(h,d++,a,1)}if(0<n){for(var v=0;v<n;v++){for(_=0,m=0;_<s;_++)for(y=0;y<o;y++)(x=e.borrowRow(h+m,c[m])).addBlank(d+v,this._indentFootStyle),m++;e.addMerge(h,d+v,s*o,1)}d+=n}for(var C=h,w=(l?i.getFooterItem:i.getSummaryItem).bind(i),g=0,$=0;g<s;g++){p=r.getVisible(g);for(_=0;_<o;_++,$++){for(var x=e.borrowRow(C,c[$]),v=0;v<B;v++){var b=w(g*o+_,v),I=b.layout,A=I.firstColumn,E=v+d,S=I.firstColumn.$_hash,S=(l?this._columnFooterStyles:this._columnSummaryStyles)[S][g];if(I.isProxy||b.spanned)x.addBlank(E,S);else{var R=0,T=l?I.getFooterSpan(g)-1:I.getSummarySpan(g)-1,b=l?I.getFooterUserSpan(p._childIndex):I.getSummaryUserSpan(p._childIndex),D=I.parent,H=D&&D.vertical;if(b){for(var U=b.footerCount||0,G=0<U?U*o:b.rowspan||1,W=b.colspan||1,j=(V.call(this,x,E,A,g,S),0),k=0,M=0;M<G;M++){var F=(l?i._footerCells:i._summaryCells)[g*o+_+M];F&&j++;for(var L=0;F&&L<W;L++){var z=F[v+L];z&&(k=Math.max(k,L+1),z.spanned=!0)}}(1<G||1<W)&&e.addMerge(C,E,j,k)}else{if(0<T){var O=0,P=I.vindex+1;if(H)for(;O++<T&&O<o;)R+=D.getVisible(P++)._dspan,w(g*o+_+O,v).spanned=!0;else for(;O++<T&&v+O<B&&P<D.visibleCount;)R+=D.getVisible(P++)._cspan,w(g*o+_,v+O).spanned=!0}V.call(this,x,E,A,g,S),H?e.addMerge(C,E,I._dspan+R,I._cspan):e.addMerge(C,E,I._dspan,I._cspan+R)}}}C++}}this._rowGrouped&&this._exportOptions.showLevelOutline&&e.setRowLevel(C,1),this._currentRow+=a,e.setLastRow(this._currentRow-1)}},Y.prototype.buildItems=function(t,e){for(var i=this._exportOptions,o=i.showIndicatorRow(t),n=this.allItems,r=this._progressStep?this._indexItem+Math.min(this._progressStep,this._lastItem-this._indexItem):this._lastItem,s=this._indexItem;s<r;s++){var a=n?n[s]:t.getItem(s);if(this._indicatorNo=o?a.isDataRow?a.dataRow+1:void 0:s+1,a instanceof rt.GridRow)this.buildRow(t,a);else if(a instanceof q.MergedGroupHeader)this.buildMergedGroupHeader(t,a);else if(a instanceof q.MergedGroupFooter||a instanceof rt.GroupFooter)this._preparer.groupModel!=a.parent&&this._preparer.setGroupFooterItms(a.parent,i.allItems,t.rowGroup.mergeMode),a instanceof q.MergedGroupFooter?this.buildMergedGroupFooter(t,a):this.buildGroupFooter(t,a);else{if(!(a instanceof rt.GroupItemImpl))throw new Error("Unkown item type");this.buildGroupHeader(t,a)}this._progressPos+=1,this._preparer.clearDataSpanned()}this.setProgress&&this.setProgress(t.handler,"process",this._progressMax,this._progressPos),this._indexItem=r,this._indexItem>=this._lastItem?e&&e():setTimeout(function(){this.buildItems(t,e)}.bind(this),0)},Y.prototype.buildRow=function(t,e){var i,o=t.rowGroup,n=this._preparer,r=n.dataRowCount,V=n.colCount,s=t.layoutManager,B=this._columnMerged,a=this._mergeHeads,N=this._indents,l=this._workbook.currentSheet,h=this._currentRow,d=(l.setFirstRow(this._currentRow),this._startCol),u=t.displayOptions,$=u.rowHeightCallback;0<=e.index&&$&&(s.getRowHeightOfCallback(t,e.index),i=e.heights);for(var c=(i=i||s.getDataRowHeights(r)).reduce(function(t,e){return t+e},0)||e.height,A=(c=-1===(c=isNaN(c)?-1===u.rowHeight?-1:Math.max(u.rowHeight||0,u.minRowHeight*r):c)?-1:0<c?c/r:c,o.expandedAdornments===ht.RowGroupAdornments.SUMMARY&&o.mergeMode),_=[],p=0;p<r;p++)_.push(l.borrowRow(h+p,-1===c?-1:(i[p]||c)*Y.LINE_HEIGHT));this.indicator&&this._buildIndicatorCell(t,l,_,this._indicatorNo,h,d++,r),this.checkBar&&this._buildCheckBarCell(t,l,_,e.checked,h,d++,r);for(p=0;p<r;p++){for(var f=_[p],g=h+(f._row=p),m=d,y=0;y<N;y++)f.addBlank(m,this._indentBarStyle),m++;for(y=0;y<V;y++){var v=y+m,C=n.getItem(p,y),w=C.layout,x=w.firstColumn,b=x.$_hash,I=this._columnStyles[b];if(w.isProxy||C.spanned)f.addBlank(v,I);else{var E=w._dspan,S=!1;if(B){var C=_t.DummyCellIndex.tempItem(t,e,w),R=s.getMergeRoom(C);if(R){R.isHead(C)&&0==p||0<this._startItem&&e.index==this._startItem&&!A?(I=this._buildValueCell(t,l,f,e,w,v,m),a[b]={startRow:g,style:I}):(T=a[b],f.addBlank(v,T.style||I),(R.isTail(C)||0<this._lastItem&&e.index==this._lastItem-1)&&(E=g-T.startRow+r,l.addMerge(T.startRow,v,E,1),delete a[b]));var T,S=!0}else if(this.allItems&&!e.visible&&t.isGroupedColumn(x)&&this._mergedGrouped){f.addBlank(v,I),S=!0;for(var D=e.parent;x.groupLevel!=D.level&&D;)D=D.parent;var k=a[b].startRow;switch(t.rowGroup.expandedAdornments){case ht.RowGroupAdornments.NONE:e==D.firstItem&&e==D.lastDataItem?S=!1:e==D.firstItem?(I=this._buildValueCell(t,l,f,e,w,v,m),a[b]={startRow:g,style:I}):e==D.lastDataItem&&l.addMerge(k,v,E=g-k+r,1);break;case ht.RowGroupAdornments.BOTH:e==D.lastDataItem&&0==D.footerCount&&l.addMerge(k,v,E=g-k+r,1);break;case ht.RowGroupAdornments.HEADER:case ht.RowGroupAdornments.SUMMARY:e==D.firstItem&&e==D.lastDataItem?a[b]?(l.addMerge(k,v,E=g-k+r,1),delete a[b]):S=!1:e==D.lastDataItem?(l.addMerge(k,v,E=g-k+r,1),delete a[b]):D.firstDataItem;break;case ht.RowGroupAdornments.FOOTER:e==D.firstItem&&(I=this._buildValueCell(t,l,f,e,w,v,m),a[b]={startRow:g,style:I}),e!=D.lastDataItem||0<D.footerCount||(E=g-a[b].startRow+r,l.addMerge(a[b].startRow,v,E,1),delete a[b])}}}if(!S){var M=w.parent,R=M&&M.vertical,C=w.spanCallback,F=C?C(t.handler,w,e.index)-1:void 0,L=0;if(0<(F=void 0===F?w.getDataSpan()-1:F)){var O=0,P=w.vindex+1;if(R)for(;O++<F&&O<r;)L+=M.getVisible(P++)._dspan,n.getItem(p+O,y).spanned=!0;else for(;O++<F&&y+O<V&&P<M.visibleCount;)L+=M.getVisible(P++)._cspan,n.getItem(p,y+O).spanned=!0}this._buildValueCell(t,l,f,e,w,v,m),R?l.addMerge(g,v,w._dspan+L,w._cspan):l.addMerge(g,v,w._dspan,w._cspan+L)}}}this._rowGrouped&&this._exportOptions.showLevelOutline&&l.setRowLevel(g,e.level)}this._currentRow+=r,l.setLastRow(this._currentRow-1)},Y.prototype.buildGroupHeader=function(t,e){var i=this._workbook,o=i.currentSheet,n=this._preparer,r=e.level-1,s=this._indentBarStyle,a=n.colCount,l=this._currentRow,h=(o.setFirstRow(this._currentRow),this._startCol),n=t.layoutManager.getDataRowHeights(n.dataRowCount).reduce(function(t,e){return t+e},0)||Math.max(t.displayOptions.rowHeight,t.displayOptions.minRowHeight,t.displayOptions.minTableRowHeight*n.dataRowCount),d=this._exportOptions,u=o.borrowRow(l,n*Y.LINE_HEIGHT);if(this.indicator&&this._buildIndicatorCell(t,o,u,this._indicatorNo,l,h++,1),this.checkBar&&this._buildCheckBarCell(t,o,u,e.checked,l,h++,1),d.indenting)for(var c=0;c<r;c++)u.addBlank(h,s),h++;var n=t.rowGroup.getHeaderText(e),_=this._groupHeaderStyle,t=this._preparer.documentCssStyles,p=this._dynamicStyles,f="groupheader-style=.rg-rowgroup-header-level-"+e.level;p[f]?_=p[f]:((p=mt.CssFactory.getSelectorStyle(t,".rg-rowgroup-header-level-"+e.level))&&(_=this._extendStyles(i,_,p)),this._dynamicStyles[f]=_),u.addText(h,n,_),0<this._indents&&(a+=this._indents-(e.level-1));for(var g=1;g<a;g++)u.addBlank(g+h,_);o.addMerge(l,h,1,a),this._rowGrouped&&d.showLevelOutline&&o.setRowLevel(l,e.level),this._currentRow++,o.setLastRow(this._currentRow-1)},Y.prototype.buildGroupFooter=function(a,l){function t(t,e,i,o){var n,r=si.RowGroupFooterCell.getValue(l,i),s=this._exportOptions;r instanceof Date?!s.datetimeCallback||(r=s.datetimeCallback(l.index,i.name,r))instanceof Date?t.addDate(e,r,o):t.addText(e,r,o):isNaN(r)?r?t.addText(e,r,o):(s=void 0,s=l?(n=_t.DummyCellIndex.tempItem(a,l,i),a.getDisplayText(n)||""):i.groupFooter.text||"",t.addText(e,s,o)):t.addNumber(e,r,o)}for(var e=this._workbook.currentSheet,i=this._exportOptions,o=this._preparer,n=o.dataRowCount,r=o.colCount,s=this._groupFooterCellStyle,h=this._indentBarStyle,d=this._indents,V=l.level,u=this._currentRow,c=(e.setFirstRow(this._currentRow),this._startCol),B=a.rowGroup.expandedAdornments==ht.RowGroupAdornments.SUMMARY,N=Math.max(Math.max(this._defaultHeight,a.displayOptions.minRowHeight)/n,a.displayOptions.minTableRowHeight),$=a.layoutManager.getDataRowHeights(n),_=[],p=0;p<n;p++)_.push(e.borrowRow(u+p,($[p]||N)*Y.LINE_HEIGHT));this.indicator&&this._buildIndicatorCell(a,e,_,this._indicatorNo,u,c++,n),this.checkBar&&this._buildCheckBarCell(a,e,_,l.checked,u,c++,n);for(var f=o.getGroupFooterCells(),g=l.vindex*n,p=0;p<n;p++){var m=u+p,y=c,v=_[p];if(0<d)for(var C=0;C<d;C++)!B||C<V-2?v.addBlank(y,h):v.addBlank(y,s),0==p&&1<n&&e.addMerge(m,y,n,1),y++;for(C=0;C<r;C++){var w,x=C+y,b=f[g+p][C],I=b.layout,E=I.firstColumn;if(w=this._columnGroupFooterStyles[E.$_hash][l.footerIndex],i.applyDynamicStyles&&(P=_t.DummyCellIndex.tempItem(a,l,I),k=(R=a.rowGroup.getFooterCell(P)).getSummary(),w=this.$_summaryStyleSet(R,k,w)),I.isProxy||b.spanned)v.addBlank(x,w);else{var S=I.parent,R=S&&S.vertical,T=0,D=0,k=I.getGroupFooterUserSpan(l.parent,l.footerIndex),M=k?0:I.getGroupFooterSpan(l.index,l.footerIndex)-1;if(k){b=k.footerCount||0,T=0<b?b*n:k.rowspan||1,D=k.colspan||1;T=Math.min((l.parent.footerCount-l.vindex)*n,T),e.addMerge(m,x,T,D);for(var F=0;F<T;F++)for(var L=0;L<D;L++)f[g+F+p][C+L].spanned=!0}else if(0<M){var O=0,P=I.vindex+1;if(R)for(;O++<M&&O<n;)T+=S.getVisible(P++)._dspan,f[g+O][C].spanned=!0;else for(;O++<M&&P<Math.min(r,S.visibleCount);)D+=S.getVisible(P++)._cspan,f[g+p][C+O].spanned=!0}t.call(this,v,x,E,w),k||e.addMerge(m,x,I._dspan+T,I._cspan+D)}this._rowGrouped&&i.showLevelOutline&&e.setRowLevel(m,l.level)}}this._currentRow+=n,e.setLastRow(this._currentRow-1)},Y.prototype.buildMergedGroupHeader=function(t,e){for(var i=this._workbook.currentSheet,o=this._preparer,n=e.level,r=Math.max(t.displayOptions.rowHeight,t.displayOptions.minRowHeight,t.displayOptions.minTableRowHeight*o.dataRowCount),s=o.colCount,a=this._currentRow,l=(i.setFirstRow(this._currentRow),this._startCol),h=i.borrowRow(a,-1===r?-1:r*Y.LINE_HEIGHT),d=(this.indicator&&this._buildIndicatorCell(t,i,h,this._indicatorNo,a,l++,1),this.checkBar&&this._buildCheckBarCell(t,i,h,e.checked,a,l++,1),0);d<n-1;d++){var u=o.getItem(0,l+d);h.addBlank(l+d,this._columnStyles[u.layout.firstColumn.$_hash])}var r=n-1,c=o.getItem(0,r).layout,_=c.firstColumn,p=this._buildValueCell(t,i,h,e.firstItem,c,l+r),c=(this._mergeHeads[_.$_hash]={startRow:a,style:p},t.rowGroup.getHeaderText(e)),d=l+n,p=this._groupHeaderStyle;for(n<o.colCount&&h.addText(d++,c,p);d<s+l;d++)h.addBlank(d,p);1<s-n&&i.addMerge(a,n+l,1,s-n),this._currentRow++,i.setLastRow(this._currentRow-1)},Y.prototype.buildMergedGroupFooter=function(s,a){function V(t,e,i,o){var n=si.RowGroupFooterCell.getValue(a,i),r=this._exportOptions;n instanceof Date?!r.datetimeCallback||(n=r.datetimeCallback(a.index,i.name,n))instanceof Date?t.addDate(e,n,o):t.addText(e,n,o):isNaN(n)?(r=_t.DummyCellIndex.tempItem(s,a,i),i=s.getDisplayText(r)||"",t.addText(e,i,o)):t.addNumber(e,n,o)}for(var t=this._workbook.currentSheet,e=this._exportOptions,i=this._preparer,o=i.dataRowCount,n=i.colCount,r=a.level-1,l=this._currentRow,h=(t.setFirstRow(this._currentRow),this._startCol),d=s.rowGroup.expandedAdornments==ht.RowGroupAdornments.SUMMARY,B=Math.max(Math.max(this._defaultHeight,s.displayOptions.minRowHeight)/o,s.displayOptions.minTableRowHeight),N=s.layoutManager.getDataRowHeights(o),u=[],$=s.layoutManager,c=0;c<o;c++){var _=t.borrowRow(l+c,(N[c]||B)*Y.LINE_HEIGHT);_._row=c,u.push(_)}for(this.indicator&&this._buildIndicatorCell(s,t,u,this._indicatorNo,l,h++,o),this.checkBar&&this._buildCheckBarCell(s,t,u,a.checked,l,h++,o),x=0;x<r;x++){for(var p=(b=i.getItem(0,x).layout).firstColumn,f=this._mergeHeads[p.$_hash],g=f?f.style:this._columnStyles[p.$_hash],m=a.parent;m&&p.groupLevel!==m.level;)m=m.parent;if(this.allItems||a.parent.expanded){for(var y,A,c=0;c<o;c++)d&&0===c&&m&&m.getFooter(0)===a?(g=this._buildValueCell(s,t,u[c],a.parent.firstItem,b,h+x),this._mergeHeads[p.$_hash]={startRow:l,style:g}):u[c].addBlank(h+x,g);this._columnMerged&&(d?p.groupLevel:(f=this._mergeHeads[p.$_hash].startRow,a.visible?(y=_t.DummyCellIndex.tempItem(s,a,b),(A=$.getMergeRoom(y))&&A.isTail(y)&&t.addMerge(f,x+h,l+o-f,b._defColSpan)):m&&m.last===a&&t.addMerge(f,x+h,l+o-f,b._defColSpan)))}else for(c=0;c<o;c++)this._buildValueCell(s,t,u[c],a.parent.firstItem,b,h+x)}for(var v=i.getGroupFooterCells(),C=a.vindex*o,c=0;c<o;c++)for(var w=l+c,x=r;x<n;x++){var b,I=x+h,E=v[C+c][x];if(p=(b=E.layout).firstColumn,b.isProxy||E.spanned)g=this._columnStyles[p.$_hash],u[c].addBlank(I,g);else{var S=b.parent,E=S&&S.vertical,R=0,T=0,D=b.getGroupFooterUserSpan(a.parent,a.footerIndex),k=D?0:b.getGroupFooterSpan(a.index,a.footerIndex)-1;if(D){var M=D.footerCount||0,R=0<M?M*o:D.rowspan||1,T=D.colspan||1;R=Math.min((a.parent.footerCount-a.vindex)*o,R),t.addMerge(w,I,R,T);for(var F=0;F<R;F++)for(var L=0;L<T;L++)v[C+F+c][L+x].spanned=!0}else if(0<k){var O=0,P=b.vindex+1;if(E)for(;O++<k&&O<o;)R+=S.getVisible(P++)._dspan,v[C+O][x].spanned=!0;else for(;O++<k&&P<Math.min(n-1,S.visibleCount);)T+=S.getVisible(P++)._cspan,v[C+c][x+O].spanned=!0}g=this._columnGroupFooterStyles[p.$_hash][a.footerIndex],e.applyDynamicStyles&&(P=_t.DummyCellIndex.tempItem(s,a,b),E=(M=s.rowGroup.getFooterCell(P)).getSummary(),g=this.$_summaryStyleSet(M,E,g)),V.call(this,u[c],I,p,g),D||t.addMerge(w,I,b._dspan+R,b._cspan+T)}this._rowGrouped&&e.showLevelOutline&&t.setRowLevel(w,r)}this._currentRow+=o,t.setLastRow(this._currentRow-1)},Y.prototype.buildTreeSheet=function(t,e){var i=this._exportOptions,o=this._workbook,n=(i.allItems&&(this.allItems=t.getAllItems()),this.allItems),n=n?n.length:t.itemCount,r=o.createSheet(this._sheetName,i),s=t.displayOptions;this._defaultHeight=s.rowHeight||s.minRowHeight,this._rowLevels=t.getLevels(!1),this._startItem=this._indexItem=0,this._rowGrouped||(this._startItem=0<i.start?i.start:0,n=!(0<(s=0<i.count?i.count:n))||this._startItem+s>n?n-this._startItem:s),this._lastItem=this._startItem+n,this._prepareCommonStyles(t),this._currentRow=i.yOffset,this._startCol=i.xOffset,this._buildColumns(t),r.createBorderEdges(mt.CssFactory.getSelectorStyle(this._preparer.documentCssStyles,".rg-grid")),this._buildDocumentTitle(o),this.header&&this.buildHeader(t),this.headerSummary&&this.buildSummaryItem(t,!1),this.buildTreeItems(t,function(){this.footer&&this.buildSummaryItem(t,!0),this._buildDocumentTail(o),this._buildUserCells(t,o),e&&e()}.bind(this))},Y.prototype.buildTreeItems=function(t,e){for(var i=this._exportOptions.showIndicatorRow(t),o=this.allItems,n=this._progressStep?this._indexItem+Math.min(this._progressStep,this._lastItem-this._indexItem):this._lastItem,r=this._indexItem;r<n;r++){var s=o?o[r]:t.getItem(r);if(this._indicatorNo=s instanceof rt.GridRow&&i?s.dataRow:r+1,!(s instanceof E.TreeItem))throw new Error("Unkown tree item type");this.buildTreeRow(t,s),this._progressPos+=1,this._preparer.clearDataSpanned()}this.setProgress&&this.setProgress(t.handler,"process",this._progressMax,this._progressPos),this._indexItem=n,this._indexItem>=this._lastItem?e&&e():setTimeout(function(){this.buildTreeItems(t,e)}.bind(this),0)},Y.prototype.buildTreeRow=function(t,e){for(var i=this._workbook.currentSheet,o=this._preparer,n=o.dataRowCount,r=o.colCount,s=this._indents,a=e.level,l=this._currentRow,h=(i.setFirstRow(this._currentRow),this._startCol),d=t.displayOptions,u=t.layoutManager.getDataRowHeights(n),c=u.reduce(function(t,e){return t+e},0)||e.height,_=(c=-1===(c=isNaN(c)?(d.rowHeight||d.minRowHeight)*n:c)?-1:0<c?c/n:c,[]),p=0;p<n;p++)_.push(i.borrowRow(l+p,-1===c?-1:(u[p]||c)*Y.LINE_HEIGHT));this.indicator&&this._buildIndicatorCell(t,i,_,this._indicatorNo,l,h++,n),this.checkBar&&this._buildCheckBarCell(t,i,_,e.checked,l,h++,n);for(var f=this._bodyCellStyle,p=0;p<n;p++){for(var g=_[p],m=l+(g._row=p),y=0<s?h+a-1:h,v=(I=(b=o.getItem(p,0)).layout).firstColumn,C=this._columnStyles[v.$_hash],w=0<s?s-a+1:0,x=0;x<a-1;x++)g.addBlank(x+h,f);for(I.isProxy||b.spanned?g.addBlank(y,C):(this._buildValueCell(t,i,g,e,I,y,y),i.addMerge(m,y,I._dspan,I._defColSpan+w)),x=0;x<w;x++)g.addBlank(1+x+y,C);for(y=0<s?h+s:h,x=1;x<r;x++){var b,I,E=x+y,v=(I=(b=o.getItem(p,x)).layout).firstColumn,C=this._columnStyles[v.$_hash];if(I.isProxy||b.spanned)g.addBlank(E,C);else{var S=I.parent,R=S&&S.vertical,T=I.spanCallback,D=T?T(t.handler,I,e.index)-1:void 0,k=0;if(0<(D=void 0===D?I.getDataSpan()-1:D)){var M=0,F=I.vindex+1;if(R)for(;M++<D&&M<n;)k+=S.getVisible(F++)._dspan,o.getItem(p+M,x).spanned=!0;else for(;M++<D&&x+M<r&&F<S.visibleCount;)k+=S.getVisible(F++)._cspan,o.getItem(p,x+M).spanned=!0}this._buildValueCell(t,i,g,e,I,E,y),R?i.addMerge(m,E,I._dspan+k,I._cspan):i.addMerge(m,E,I._dspan,I._cspan+k)}}this._exportOptions.showLevelOutline&&i.setRowLevel(l,e.level)}this._currentRow+=n,i.setLastRow(this._currentRow-1)},Y.prototype.prepare=function(){},Y.prototype.finallize=function(){},Y.prototype.save=function(){var t,e=function(t){var e=new JSZip;if(t)for(var i=e.folder("xl/media"),o=Object.keys(t),n=0;n<o.length;n++){var r=t[o[n]];r.fileName&&r.buffer&&i.file(r.fileName,r.buffer)}var s,a,l=this._workbook.createParts();for(s in l){var h=l[s];0<=h.indexOf('xmlns=""')&&(h=h.replace(/ xmlns=""/g,"").replace(/xmlns=""/g,"")),e.file(s,h)}p?e.generateAsync?e.generateAsync({type:"blob",compression:"DEFLATE",streamFiles:!0},function(t){u.progressCallback&&u.progressCallback(null,"zip",100,t.percent)}).then(function(t){u.done&&"function"==typeof u.done&&u.done(),f.saveLocal(c,t,d)}):(u.done&&"function"==typeof u.done&&u.done(),f.saveLocal(c,e.generate({type:"blob",compression:"DEFLATE"}),d)):u.target===Ft.ExportTarget.STREAM?e.generateAsync?e.generateAsync({type:"base64",compression:"DEFLATE",streamFiles:!0},function(t){u.progressCallback&&u.progressCallback(null,"zip",100,t.percent)}).then(function(t){u.done&&"function"==typeof u.done&&u.done(t)}):(a=e.generate({type:"base64",compression:"DEFLATE"}),u.done&&"function"==typeof u.done&&u.done(a)):e.generateAsync?e.generateAsync({type:"base64",compression:"DEFLATE",streamFiles:!0},function(t){u.progressCallback&&u.progressCallback(null,"zip",100,t.percent)}).then(function(t){u.done&&"function"==typeof u.done&&u.done(),f.saveServer(c,t,u.url,d,_)}):(u.done&&"function"==typeof u.done&&u.done(),f.saveServer(c,e.generate({type:"base64",compression:"DEFLATE"}),u.url,d,_))}.bind(this),d=this.grid.doc,u=this._multiOptions,c=u.fileName,_=u.params,p="local"==u.target,f=this,i=this._workbook;JSZip.support.blob||!p?i.hasDrawing?(t=i.getImageMap(),i.downloader.executeDownLoad(this,t,e)):e():alert("not supported on this browser")},Y.prototype._prepareCount=function(t,e){for(var i=0,o=0,n=e.length;o<n;o++){var r=void 0,s=e[o].grid;if(s instanceof Ei.GridView)if(t.allItems&&this._rowGrouped){var r=s.itemSource.getAllItems(),a=s.layoutManager.fixedItemCount;if(0<a)for(var l=0;l<a;l++)r.splice(l,0,s.getItem(l))}else t.pagingAllItems&&s.paged?r=s.itemSource.getPagingAllItems():t.onlyCheckedItems&&!s.rowGrouped&&(r=s.getCheckedItems(!1));else s instanceof Li.TreeView&&t.allItems&&(r=s.getAllItems());i+=r?r.length:s.itemCount}return i},Y.prototype._inheritStyles=function(t){for(var e={length:0},i=0,o=t.length;i<o;i++)t[i]&&mt.CssFactory.extendCssStyle(t[i],e);return e},Y.prototype._prepareCommonStyles=function(t){var e=this._preparer.documentCssStyles,i=mt.CssFactory.getSelectorStyle(e,"table"),o=mt.CssFactory.getSelectorStyle(e,"tr"),n=mt.CssFactory.getSelectorStyle(e,"td"),r=this._inheritStyles([i,o,n]),s=this._inheritStyles([mt.CssFactory.getSelectorStyle(e,"html"),mt.CssFactory.getSelectorStyle(e,".rg-root")]),o=mt.CssFactory.getSelectorStyle(e,".rg-header"),a=mt.CssFactory.getSelectorStyle(e,".rg-footer"),l=mt.CssFactory.getSelectorStyle(e,".rg-header-summary"),n=mt.CssFactory.getSelectorStyle(e,".rg-body"),h=mt.CssFactory.getSelectorStyle(e,".rg-fixed-body"),d=this._inheritStyles([mt.CssFactory.getSelectorStyle(e,".rg-root table"),mt.CssFactory.getSelectorStyle(e,".rg-root .rg-table"),mt.CssFactory.getSelectorStyle(e,".rg-root table tr"),mt.CssFactory.getSelectorStyle(e,".rg-root .rg-table tr"),mt.CssFactory.getSelectorStyle(e,".rg-root table tr td"),mt.CssFactory.getSelectorStyle(e,".rg-root .rg-table tr td"),mt.CssFactory.getSelectorStyle(e,".rg-root .rg-table td")]),u=this._inheritStyles([d,mt.CssFactory.getSelectorStyle(e,".rg-header table"),mt.CssFactory.getSelectorStyle(e,".rg-header .rg-table"),mt.CssFactory.getSelectorStyle(e,".rg-header table tr"),mt.CssFactory.getSelectorStyle(e,".rg-header .rg-table tr"),mt.CssFactory.getSelectorStyle(e,".rg-header table tr td"),mt.CssFactory.getSelectorStyle(e,".rg-header .rg-table tr td")]),c=this._inheritStyles([d,mt.CssFactory.getSelectorStyle(e,".rg-footer table"),mt.CssFactory.getSelectorStyle(e,".rg-footer .rg-table"),mt.CssFactory.getSelectorStyle(e,".rg-footer table tr"),mt.CssFactory.getSelectorStyle(e,".rg-footer .rg-table tr"),mt.CssFactory.getSelectorStyle(e,".rg-footer table tr td"),mt.CssFactory.getSelectorStyle(e,".rg-footer .rg-table tr td")]),_=this._inheritStyles([d,mt.CssFactory.getSelectorStyle(e,".rg-header-summary table"),mt.CssFactory.getSelectorStyle(e,".rg-header-summary .rg-table"),mt.CssFactory.getSelectorStyle(e,".rg-header-summary table tr"),mt.CssFactory.getSelectorStyle(e,".rg-header-summary .rg-table tr"),mt.CssFactory.getSelectorStyle(e,".rg-header-summary table tr td"),mt.CssFactory.getSelectorStyle(e,".rg-header-summary .rg-table tr td")]),p=this._inheritStyles([d,mt.CssFactory.getSelectorStyle(e,".rg-body table"),mt.CssFactory.getSelectorStyle(e,".rg-body .rg-table"),mt.CssFactory.getSelectorStyle(e,".rg-body table tr"),mt.CssFactory.getSelectorStyle(e,".rg-body .rg-table tr"),mt.CssFactory.getSelectorStyle(e,".rg-body table tr td"),mt.CssFactory.getSelectorStyle(e,".rg-body .rg-table tr td")]),f=this._inheritStyles([d,mt.CssFactory.getSelectorStyle(e,".rg-fixed-body .rg-table"),mt.CssFactory.getSelectorStyle(e,".rg-fixed-body .rg-table tr"),mt.CssFactory.getSelectorStyle(e,".rg-fixed-body table tr"),mt.CssFactory.getSelectorStyle(e,".rg-fixed-body .rg-table tr td"),mt.CssFactory.getSelectorStyle(e,".rg-fixed-body table tr td"),mt.CssFactory.getSelectorStyle(e,".rg-fixed-body .rg-data-row")]),g=this._inheritStyles([d,mt.CssFactory.getSelectorStyle(e,".rg-rowgroup-bar .rg-table"),mt.CssFactory.getSelectorStyle(e,".rg-rowgroup-bar .rg-table tr"),mt.CssFactory.getSelectorStyle(e,".rg-rowgroup-bar table tr"),mt.CssFactory.getSelectorStyle(e,".rg-rowgroup-bar .rg-table tr td"),mt.CssFactory.getSelectorStyle(e,".rg-rowgroup-bar table tr td")]),m=this._inheritStyles([d,mt.CssFactory.getSelectorStyle(e,".rg-rowgroup-head .rg-table"),mt.CssFactory.getSelectorStyle(e,".rg-rowgroup-head .rg-table tr"),mt.CssFactory.getSelectorStyle(e,".rg-rowgroup-head table tr"),mt.CssFactory.getSelectorStyle(e,".rg-rowgroup-head .rg-table tr td"),mt.CssFactory.getSelectorStyle(e,".rg-rowgroup-head table tr td")]),y=this._inheritStyles([d,mt.CssFactory.getSelectorStyle(e,".rg-rowgroup-foot .rg-table"),mt.CssFactory.getSelectorStyle(e,".rg-rowgroup-foot .rg-table tr"),mt.CssFactory.getSelectorStyle(e,".rg-rowgroup-foot table tr"),mt.CssFactory.getSelectorStyle(e,".rg-rowgroup-foot .rg-table tr td"),mt.CssFactory.getSelectorStyle(e,".rg-rowgroup-foot table tr td")]),v=this._inheritStyles([d,p]),C=mt.CssFactory.getSelectorStyle(e,".rg-header-cell"),w=mt.CssFactory.getSelectorStyle(e,".rg-footer-cell"),x=mt.CssFactory.getSelectorStyle(e,".rg-header-summary-cell"),b=mt.CssFactory.getSelectorStyle(e,".rg-data-cell"),I=mt.CssFactory.getSelectorStyle(e,".rg-rowgroup-header"),E=mt.CssFactory.getSelectorStyle(e,".rg-rowgroup-footer"),S=mt.CssFactory.getSelectorStyle(e,".rg-rowgroup-footer-cell"),m=this._inheritStyles([s,mt.CssFactory.getSelectorStyle(e,".rg-rowgroup-head"),r,m]),y=this._inheritStyles([s,mt.CssFactory.getSelectorStyle(e,".rg-rowgroup-foot"),r,y]),g=this._inheritStyles([s,mt.CssFactory.getSelectorStyle(e,".rg-rowgroup-bar"),r,mt.CssFactory.getSelectorStyle(e,".rg-rowgroup-bar-cell"),g]),R=mt.CssFactory.getSelectorStyle(e,".rg-data-row"),T=mt.CssFactory.getSelectorStyle(e,".rg-fixed-row"),D=this._inheritStyles([s,mt.CssFactory.getSelectorStyle(e,".rg-rowbarcontainer"),r,d,mt.CssFactory.getSelectorStyle(e,".rg-rowbarcontainer .rg-table tr"),mt.CssFactory.getSelectorStyle(e,".rg-rowbarcontainer table tr"),mt.CssFactory.getSelectorStyle(e,".rg-rowbarcontainer .rg-table tr td"),mt.CssFactory.getSelectorStyle(e,".rg-rowbarcontainer table tr td"),mt.CssFactory.getSelectorStyle(e,".rg-rowbarcontainer .rg-table tr td.rg-rowindicator-cell")]),k=this._inheritStyles([s,mt.CssFactory.getSelectorStyle(e,".rg-foot"),r,d,mt.CssFactory.getSelectorStyle(e,".rg-foot .rg-table tr td"),mt.CssFactory.getSelectorStyle(e,".rg-rowindicator-foot")]),M=this._inheritStyles([s,mt.CssFactory.getSelectorStyle(e,".rg-sum"),r,d,mt.CssFactory.getSelectorStyle(e,".rg-sum .rg-table tr td"),mt.CssFactory.getSelectorStyle(e,".rg-rowindicator-sum")]),D=(this._indicatorCellStyle=this._parseStyles(this._workbook,D),this._indicatorFootStyle=this._parseStyles(this._workbook,k),this._indicatorSumStyle=this._parseStyles(this._workbook,M),this._inheritStyles([s,mt.CssFactory.getSelectorStyle(e,".rg-rowbarcontainer"),r,d,mt.CssFactory.getSelectorStyle(e,".rg-rowbarcontainer .rg-table tr"),mt.CssFactory.getSelectorStyle(e,".rg-rowbarcontainer table tr"),mt.CssFactory.getSelectorStyle(e,".rg-rowbarcontainer .rg-table tr td"),mt.CssFactory.getSelectorStyle(e,".rg-rowbarcontainer table tr td.rg-checkbar-cell")])),k=this._inheritStyles([s,mt.CssFactory.getSelectorStyle(e,".rg-foot"),r,d,mt.CssFactory.getSelectorStyle(e,".rg-foot .rg-table tr td"),mt.CssFactory.getSelectorStyle(e,".rg-checkbar-foot")]),M=this._inheritStyles([s,mt.CssFactory.getSelectorStyle(e,".rg-sum"),r,d,mt.CssFactory.getSelectorStyle(e,".rg-sum .rg-table tr td"),mt.CssFactory.getSelectorStyle(e,".rg-checkbar-sum")]);this._checkBarCellStyle=this._parseStyles(this._workbook,D),this._checkBarFootStyle=this._parseStyles(this._workbook,k),this._checkBarSumStyle=this._parseStyles(this._workbook,M),P=(L=t.header.exportStyleName||t.header.styleName)?mt.CssFactory.getSelectorStyle(e,"."+L):null,P=this._headerCssStyle=this._inheritStyles([s,o,P,r,C,u]),this._headerCellStyle=this._parseStyles(this._workbook,P,!0),this._footerCellStyles=[];for(var F=0;F<t.footers.visibleCount;F++)P=(L=t.footers.getVisible(F).styleName)?mt.CssFactory.getSelectorStyle(e,"."+L):null,P=this._inheritStyles([s,a,P,r,w,c]),this._footerCellStyles.push(this._parseStyles(this._workbook,P,!0));this._summaryCellStyles=[];for(F=0;F<t.headerSummaries.visibleCount;F++)P=(L=t.headerSummaries.getVisible(F).styleName)?mt.CssFactory.getSelectorStyle(e,"."+L):null,P=this._inheritStyles([s,l,P,r,x,_]),this._summaryCellStyles.push(this._parseStyles(this._workbook,P,!0));if(this._groupFooterCellStyles=[],t instanceof Ei.GridView)for(F=0;F<t.rowGroup.footers.count;F++){var L,O=t.rowGroup.footers.get(F),P=(L=O.exportStyleName||O.styleName)?mt.CssFactory.getSelectorStyle(e,"."+L):null;P=this._inheritStyles([s,E,P,r,S,v]),this._groupFooterCellStyles.push(this._parseStyles(this._workbook,P,!0))}P=this._cellCssStyle=this._inheritStyles([s,n,i,p,R,b]),this._bodyCellStyle=this._parseStyles(this._workbook,P,!1),P=this._inheritStyles([s,n,i,T,p,b]),this._bodyFixedCellStyle=this._parseStyles(this._workbook,P,!1),P=this._fixedCellCssStyle=this._inheritStyles([s,h,i,R,f,b]),this._fixedCellStyle=this._parseStyles(this._workbook,P,!1),this._groupHeaderStyle=this._parseStyles(this._workbook,this._inheritStyles([s,I])),this._groupFooterCellStyle=this._parseStyles(this._workbook,this._inheritStyles([s,i,E,S,p])),this._indentHeadStyle=this._parseStyles(this._workbook,m),this._indentFootStyle=this._parseStyles(this._workbook,y),this._indentBarStyle=this._parseStyles(this._workbook,g),this._dynamicStyles={}},Y.prototype._exportGridAsync=function(t,e,i,o){var n;void 0===o&&(o=null),i<e.exportGrids.length&&(n=e.exportGrids[i],setTimeout(function(){this._exportGrid(t,n.options,function(){o()}.bind(this))}.bind(this)))},Y.prototype._exportGrid=function(t,e,i){var o=e.grid;this._preparer=new mt.ExportPreparer(o,e),this._exportOptions=e,this.indicator=e.indicatorVisible(o)?o.rowIndicator:null,this.checkBar=e.checkBarVisible(o)?o.checkBar:null,this.header=e.headerVisible(o)?o.header:null,this.headerSummary=e.headerSummaryVisible(o)?o.headerSummary:null,this.footer=e.footerVisible(o)?o.footer:null,this.indicatorHead=this.indicator&&this.indicator.headText||"No",this.indicatorFoot=this.indicator&&this.indicator.footText||"",this.indicatorSummary=this.indicator&&this.indicator.sumText||"",this.checkBarHead=this.checkBar&&this.checkBar.headText||"",this.checkBarFoot=this.checkBar&&this.checkBar.footText||"",this.checkBarSummary=this.checkBar&&this.checkBar.sumText||"",this._sheetName=e.sheetName,this._workbook=t,this.allItems=null,this.buildBook(function(){this._preparer&&this._preparer.dispose(),i&&i()}.bind(this))},Y.prototype._changeFormatId=function(t,e,i){return t.changeFormatId(e,i)},Y.prototype._parseStyles=function(t,e,i){return t.addStyle(e,!0,!0,!0,i)},Y.prototype._extendStyles=function(t,e,i,o,n,r){return t.extendStyle(e,i,o=void 0===o?!0:o,n,r)},Y.prototype.$_summaryStyleSet=function(t,e,i){var o=this._exportOptions,n=this._workbook,r=void 0;if(e){var s=e.exportStyleName||e.styleName,a=void 0,o=(o.applyDynamicStyles&&(t instanceof ee.GridSummaryObject?(l=new lt.ColumnSummaryStyle,s=(a=t.getCellStyle(t.getCell(e.column.layout),l,!1)).exportStyleName||a.styleName||s):t instanceof si.RowGroupFooterCell&&(l=new lt.ColumnStyle,s=(a=this.grid.rowGroup.getFooterCellStyle(t,l,!1)).exportStyleName||a.styleName||s)),void 0);if((o=(o=a&&a.numberFormat||e.numberFormat)?mt.ExcelFormatConverter.convertNumberFormat(o):(o=a&&a.datetimeFormat||e.datetimeFormat)&&mt.ExcelFormatConverter.convertDateFormat(o))&&((t=e.prefix)&&(o='"'+t+'"'+o),(t=e.suffix)&&(o=o+'"'+t+'"'),r=n.addNumberFormat(o)),s||void 0!==r){for(var l,h=this._preparer.documentCssStyles,d=s?s.trim().split(" "):[],u=[],c=0,_=d.length;c<_;c++)u.push(mt.CssFactory.getSelectorStyle(h,"."+d[c]));return e.$_owner.type?(l=e.$_owner.type+"=styleName="+s+"formatId="+r,(a=this._dynamicStyles)[l]||(a[l]=this._extendStyles(n,i,this._inheritStyles(u),!0,r)),a[l]):this._extendStyles(n,i,this._inheritStyles(u),!0,r)}}return i},Y.prototype._buildColumns=function(t){for(var e,i,o=this._exportOptions,n=this._workbook,r=n.currentSheet,s=this._preparer,a=0;a<this._startCol;a++)r.addColumn(-1,o.xOffsetWidth/Y.PIXELS_PER_CHAR,null);if(this.indicator&&(i=Math.round(t.rowIndicator.minWidth/Y.PIXELS_PER_CHAR),r.addColumn(t.rowIndicator.$_hash,i,null)),this.checkBar&&(i=Math.round(t.checkBar.width/Y.PIXELS_PER_CHAR),r.addColumn(t.checkBar.$_hash,i,null)),o.indenting&&(t instanceof Ei.GridView&&this._rowGrouped&&!this._mergedGrouped?this._indents=this._rowLevels-(t.rowGroup.expandedAdornments===ht.RowGroupAdornments.SUMMARY?0:1):t instanceof Li.TreeView&&(this._indents=this._rowLevels-1),0<this._indents))for(a=0;a<this._indents;a++)i=Math.max(this._indentWidth,1),r.addColumn(-1,i,null);for(var l=t.formatOptions,h=(this._columnStyles={},this._columnFixedStyles={},this._columnFooterStyles={},this._columnSummaryStyles={},this._columnGroupFooterStyles={},s.colCount),d=s.dataRowCount,u=!1,a=0;a<d;a++)for(var c=0;c<h;c++){var _=s.getItem(a,c).layout,p=_.firstColumn;if(0===a&&(i=Math.round(_._cellWidth/Y.PIXELS_PER_CHAR),r.addColumn(p.$_hash,i,null,0<=o.hiddenColumns.indexOf(p.name))),e=p.$_hash,!this._columnStyles[e]){var f=t.dataSource;if(p instanceof lt.DataColumn){var g=o.exportLink&&p.renderer&&p.renderer.type==at.LinkCellRenderer.TYPE&&!p.excelFormat,f=f.getField(p.dataIndex),m=this._textFormatId,f=f?f.dataType:ht.ValueType.TEXT,y=(f===ht.ValueType.NUMBER?m=this._numberFormatId:f===ht.ValueType.DATETIME&&(m=this._dateFormatId),p.excelFormat);null!=y?m="number"==typeof y||0<parseInt(y)?parseInt(y):n.addNumberFormat(y):g?m=0:(f==ht.ValueType.NUMBER?"string"==typeof(y=null===p.numberFormat?void 0:p.numberFormat||o.numberFormat||l.numberFormat)&&(y=mt.ExcelFormatConverter.convertNumberFormat(y)):f==ht.ValueType.DATETIME&&"string"==typeof(y=p.datetimeFormat||o.datetimeFormat||l.datetimeFormat)&&(y=mt.ExcelFormatConverter.convertDateFormat(y)),y&&((g=p.prefix)&&(y='"'+g+'"'+y),(g=p.suffix)&&(y=y+'"'+g+'"'),m=n.addNumberFormat(y))),this._columnStyles[e]=this._changeFormatId(n,_.isFixed?this._fixedCellStyle:this._bodyCellStyle,m),this._columnFixedStyles[e]=this._changeFormatId(n,this._bodyFixedCellStyle,m),this._columnFooterStyles[e]=[],this._columnSummaryStyles[e]=[],this._columnGroupFooterStyles[e]=[];for(var v=0;v<t.footers.visibleCount;v++){var C=t.footers.getVisible(v),w=p.footers.get(C._childIndex);this._columnFooterStyles[e][v]=this.$_summaryStyleSet(C,w,this._footerCellStyles[v])}for(v=0;v<t.headerSummaries.visibleCount;v++){var x=t.headerSummaries.getVisible(v),b=p.headerSummaries.get(x._childIndex);this._columnSummaryStyles[e][v]=this.$_summaryStyleSet(x,b,this._summaryCellStyles[v])}if(t instanceof Ei.GridView)for(v=0;v<t.rowGroup.footers.count;v++){var I=t.rowGroup.footers.get(v),I=p.groupFooters.get(I.index);this._columnGroupFooterStyles[e][v]=this.$_summaryStyleSet(null,I,this._groupFooterCellStyles[v])}}t instanceof Ei.GridView&&(o.separateRows||o.onlyCheckedItems&&!t.rowGrouped||p instanceof lt.DataColumn&&(p.mergeRule||t.rowGroup.mergeMode&&t.isGroupedColumn(p))&&(u=!0))}}this._columnMerged=u},Y.prototype._buildTitleCommon=function(t,e,i){if(e&&e.visible){for(var o=this._currentRow,n=this._startCol,r=void 0,s=t.currentSheet,a=0;a<e.spaceTop;a++)for(var r=s.addRow(o+a,void 0),l=0;l<i;l++)r.addBlank(n+l,void 0);o+=e.spaceTop;var h,d,u=e.message,c=void 0,c=e.styleName?(h=this._preparer.documentCssStyles,d=[],e.styleName.split(" ").forEach(function(t){d.push(mt.CssFactory.getSelectorStyle(h,"."+t))}),this._parseStyles(t,this._inheritStyles(d),!0)):this._parseStyles(t,e.cssStyle,!0);r=s.addRow(o,e.height);for(a=0;a<i;a++)0==a?(r.addText(n,u,c),s.addMerge(o,n,1,i)):r.addBlank(n+a,c);o++;for(a=0;a<e.spaceBottom;a++){r=s.addRow(o+a,void 0);for(l=0;l<i;l++)r.addBlank(n+l,void 0)}o+=e.spaceBottom,this._currentRow=o}},Y.prototype._buildDocumentTitle=function(t){var e=this._exportOptions,i=this._preparer.colCount;this.indicator&&i++,this.checkBar&&i++,i+=Math.max(this._indents,0),this._buildTitleCommon(t,e.documentTitle,i),this._buildTitleCommon(t,e.documentSubtitle,i)},Y.prototype._buildDocumentTail=function(t){var e=this._exportOptions,i=this._preparer.colCount;this.indicator&&i++,this.checkBar&&i++,i+=Math.max(this._indents,0),this._buildTitleCommon(t,e.documentTail,i)},Y.prototype._buildIndicatorCell=function(t,e,i,o,n,r,s){var a=this._indicatorCellStyle;if((Array.isArray(i)?i[0]:i).addNumber(r,o,a),1<s){for(var l=1;l<s;l++)i[l].addBlank(r,a);e.addMerge(n,r,s,1)}},Y.prototype._buildCheckBarCell=function(t,e,i,o,n,r,s){var a=this._checkBarCellStyle,l=Array.isArray(i)?i[0]:i,h=this._exportOptions.checkMark;if(l.addText(r,o?h:"",a),1<s){for(var d=1;d<s;d++)i[d].addBlank(r,a);e.addMerge(n,r,s,1)}},Y.prototype._buildValueCell=function(t,e,i,o,n,r,s){void 0===s&&(s=0);var a=this._workbook,l=0<=o.index&&o.index<t.fixedOptions.rowCount,h=t.body,d=this._exportOptions,u=_t.DummyCellIndex.tempItem(t,o,n),c=n.firstColumn,_=h.getRowStyle(o,l,!0,d.applyDynamicStyles),_=_.exportStyleName||_.styleName,p=c.exportStyleName||c.styleName,f=(F=d.applyDynamicStyles?h.getIndexCellStyle(u,!1):F)&&F.renderer||c.renderer,g=(!n.isFixed&&l?this._columnFixedStyles:this._columnStyles)[c.$_hash]||this._bodyCellStyle;if(d.applyFixed&&(!t.isTree()&&l&&e.setFixedInfo(i.index+1,void 0),n.$_fixed)&&e.setFixedInfo(void 0,r+1),c.blankWhenExport)i.addBlank(r,g);else if(c instanceof lt.DataColumn){var h=c.dataIndex,l=F&&F.cellProtectProps||c.cellProtectProps,m=t.dataSource.getField(h),y=d.exportLink&&!c.excelFormat&&c.renderer&&c.renderer.type==at.LinkCellRenderer.TYPE,V=d.exportTemplate&&c.renderer&&c.renderer.type===Wt.TemplateCellRenderer.TYPE,B=(R=!1!==d.exportImage&&f&&(f.type===at.ImageCellRenderer.TYPE||f.type===at.IconCellRenderer.TYPE)&&(d.exportImage?!1!==f.exportImage:!!f.exportImage))&&f.type===at.IconCellRenderer.TYPE,N=R&&f.type===at.ImageCellRenderer.TYPE,v=void 0;if(m){var C,w,x,b,I=o.getData(h),v=c.displayCallback;if(_||p||F||l){var E,S,R=void 0,h=void 0,$=[n.isFixed?this._fixedCellCssStyle:this._cellCssStyle],A=(F&&"object"==typeof F?(E=void(R="string"==typeof(R=(T=F).exportStyleName||F.styleName||p)?R:void 0),(h=F.excelFormat)||(m.dataType==ht.ValueType.NUMBER?h=(E=T.numberFormat)?mt.ExcelFormatConverter.convertNumberFormat(E):void 0:m.dataType==ht.ValueType.DATETIME&&(h=(E=T.datetimeFormat)?mt.ExcelFormatConverter.convertDateFormat(E):void 0),h&&((D=T.prefix)&&(h='"'+D+'"'+h),D=T.suffix)&&(h=h+'"'+D+'"'))):R="string"==typeof F?F:void 0,this._preparer.documentCssStyles),T=this._dynamicStyles;if(T[S=c.$_hash+"="+_+"="+p+"="+JSON.stringify(F)+"="+JSON.stringify(l)+"="+!0])g=T[S];else{var D,k=[];_&&(D=_.trim().split(" "),Array.prototype.push.apply(k,D),n.isFixed)&&D.forEach(function(t){k.push("rg-fixed-body ."+t)}),p&&Array.prototype.push.apply(k,p.trim().split(" ")),R&&Array.prototype.push.apply(k,R.trim().split(" "));for(var M=0,H=k.length;M<H;M++)$.push(mt.CssFactory.getSelectorStyle(A,"."+k[M]));var F=void 0,_=(h&&(F=a.addNumberFormat(h)),T=this._inheritStyles($),y&&(T["font-decoration"]="underline",T.color="blue"),T.whiteSpace||T["white-space"]),g=this._extendStyles(a,g,T,null!=_&&"none"!=_&&"nowrap"!=_,F,l);this._dynamicStyles[S]=g}}switch(m.dataType){case"number":(d.numberCallback||v)&&(I=d.numberCallback?d.numberCallback(o.index,c.name,I):v(t.handler,u.proxy(),I));var L,O=c.excelFormulaExprStatement,P=void 0;O&&((L=this._excelFormulaRuntime).setItemIndex(i.index,s),L.setColumns(this._preparer._dataCells[i._row]),P=O.evaluate(L)),null!=I||P?"number"==typeof I?i.addNumber(r,I,g,P):i.addText(r,I,g):i.addBlank(r,g);break;case"datetime":case"date":I?!d.datetimeCallback&&!v||(I=d.datetimeCallback?d.datetimeCallback(o.index,c.name,I):v(t.handler,u.proxy(),I))instanceof Date?i.addDate(r,I,g):i.addText(r,I,g):d.nullDateText?i.addText(r,d.nullDateText,g):i.addBlank(r,g);break;case"boolean":d.booleanCallback||v?(I=d.booleanCallback?d.booleanCallback(o.index,c.name,I):v(t.handler,u.proxy(),I),i.addText(r,I,g)):d.booleanFormat?(I=K.BooleanFormatter.getFormatter(d.booleanFormat).formatValue(I),i.addText(r,I,g)):i.addBool(r,I,g);break;default:O=I||"",d.lookupDisplay&&(c.labelField||c.lookupDisplay)?O=st.DataCell.getText(o,c):m.dataType===ht.ValueType.OBJECT&&"object"==typeof I?(S=((L=c.objectKey||c.objectCallback)?c:m).objectKey,O=(P=(L?c:m).objectCallback)&&"function"==typeof P?P(m.orgFieldName,o.dataRow,I):S&&I.hasOwnProperty(S)?I[S]:JSON.stringify(I)):V?(this._templateRenderer?this._templateRenderer.clearAndAssignFrom(c.renderer):this._templateRenderer=t.delegate.createRenderer(Wt.TemplateCellRenderer.TYPE,c.renderer,null),L=this._templateRenderer._parser,P=c.renderer.callback,C=t.body.getCell(u,!1),O=(P=P?P.call(this,t.handler,C,-1,-1):L.realize(t,C,null,this._templateRenderer.valueCallback))?P.replace(/<br[\s/]*>/gi,"\n").replace(/(<([^>]+)>)/gi,""):""):null!=I&&(O=c.textFormatter?c.textFormatter.getText(I):O),"number"==typeof(O=d.textCallback?d.textCallback(o.index,c.name,O):v&&!c.textFormatter?v(t.handler,u.proxy(),I):O)?i.addNumber(r,O,g):O&&y?(C=t.body.getCell(u,!1),this._linkRenderer?(this._linkRenderer.initOptions(),this._linkRenderer.assignFrom(c.renderer)):this._linkRenderer=t.delegate.createRenderer(at.LinkCellRenderer.TYPE,c.renderer,null),(w=this._linkRenderer)?(L=w.$_getUrl(t,C),i.addLink(r,O,L,g)):i.addText(r,O,g)):N?(C=t.body.getCell(u,!1),this._imageRenderer?(this._imageRenderer.initOptions(),this._imageRenderer.assignFrom(f)):this._imageRenderer=t.delegate.createRenderer(at.ImageCellRenderer.TYPE,f,null),x=(w=this._imageRenderer).$_getImageUrl(t,C),b=e.getColumnWidth(C.dataColumn.$_hash),x?i.addImage(r,O,b,ht.IconLocation.CENTER,x,g,-1,w.imageHeight):i.addText(r,O,g)):B?(C=t.body.getCell(u,!1),this._iconRenderer?(this._iconRenderer.initOptions(),this._iconRenderer.assignFrom(f)):this._iconRenderer=t.delegate.createRenderer(at.IconCellRenderer.TYPE,f,null),x=(w=this._iconRenderer).$_getIconUrl(t,C),b=e.getColumnWidth(C.dataColumn.$_hash),x?i.addImage(r,O,b,w.iconLocation,x,g,w.iconWidth,w.iconHeight):i.addText(r,O,g)):O?i.addText(r,O,g):i.addBlank(r,g)}}else i.addBlank(r,g)}else c instanceof lt.SeriesColumn&&((n=c.renderer)&&n.type&&n.type!=ft.SeriesTextCellRenderer.TYPE?(D=this._preparer,d.exportSeriesColumn&&ft.SparkChartRenderer.interfaced(n)&&D.sparkColumns[c.$_hash]?i.addSparkLine(r,s,D.sparkColumns[c.$_hash],g):i.addBlank(r,g)):(this._seriesCell.setIndex(u),(p=this._seriesCell.value)?(E=st.SeriesCell.getText(p,","),i.addText(r,E,g)):i.addBlank(r,g)));return g},Y.prototype._buildUserCells=function(t,f){var g,m,y,v,C=this,e=this._exportOptions,w=f.currentSheet,i=e.userCellsCallback,e=e.userCells||i&&i(t.handler,w.rowCount,w.colCount,w.name);re.Utils.isArray(e)&&(g=this._dynamicStyles,m=this._preparer.documentCssStyles,y=w.workbook.styles._styles._items[0],v=t.doc.createElement("userCell").style,e.forEach(function(t){var e;if(t.format&&(e=f.addNumberFormat(t.format)),t.styleName){var i=t.styleName,o="userCells;styleName="+i+";formatId="+e,n=i?i.trim().split(" "):[];if(!(l=g[o])){for(var r=[],s=0,a=n.length;s<a;s++)r.push(mt.CssFactory.getSelectorStyle(m,"."+n[s]));var i=C._inheritStyles(r),l=g[o]=C._parseStyles(f,i,!!i.whiteSpace&&null);e&&(l._formatId=e)}}else t.styles?(i=re.Utils.objectToCssText(t.styles),(l=g[o="userCells;styleName="+i+";formatId="+e])||(v.cssText=i,l=g[o]=C._parseStyles(f,v,!!v.whiteSpace&&null),e&&(l._formatId=e))):e&&(l=(l=g[o="userCells;styleName=undefined;formatId="+e])||(g[o]=C._extendStyles(f,y,{},!1,e)));l=l||y;for(var h=t.mergeRow||1,d=t.mergeCol||1,u=re.Utils.makeArray(t.heights,!0),s=0;s<h;s++)for(var c=0;c<d;c++){var _=w.borrowRow(t.row+s,u[s]||t.height||-1);if(0===s&&0===c){var p=t.value;switch(typeof p){case"string":_.addText(t.col,p,l);break;case"number":_.addNumber(t.col,p,l,t.formula);break;case"boolean":_.addBool(t.col,null==p?null:+p,l);break;default:p instanceof Date&&_.addDate(t.col,p,l)}}else _.addBlank(t.col+c,l)}1<h*d&&w.addMerge(t.row,t.col,h,d)}))},Y.CSS_HEAD="rg-header",Y.CSS_FOOT="rg-footer",Y.CSS_BODY="rg-body",Y.CSS_FIXED="rg-fixed-body",Y.CSS_TABLE="rg-table",Y.CSS_ROWGROUP_BAR="rg-rowgroup-bar",Y.CSS_ROWGROUP_HEAD="rg-rowgroup-head",Y.CSS_ROWGROUP_FOOT="rg-rowgroup-foot",Y.CSS_HEAD_CELL="rg-header-cell",Y.CSS_INDICATOR="rg-rowindicator-cell",Y.CSS_CHECK="rg-checkbar-cell",Y.CSS_DATA_ROW="rg-data-row",Y.PIXELS_PER_CHAR=7,Y.LINE_HEIGHT=.75;var l,r=Y;function Y(){var t=l.call(this)||this;return t._gridIndex=0,t._numberFormatId=0,t._textFormatId=49,t._dateFormatId=14,t._rowLevels=0,t._indents=0,t._indentWidth=3,t._seriesCell=new st.SeriesCell,t._excelFormulaRuntime=new o,t}e.GridExcelExporter=r})),Pi=(t(Oi),Oi.ColumnExportStatementRuntime,Oi.GridExcelExporter,e(function(t,e){Object.defineProperty(e,"__esModule",{value:!0});o.getColumn=function(t,e){if(e){if("string"==typeof e)return t.columnByName(e);if(e instanceof lt.GridColumn)return e;if(e.$_hash)return t.columnByHash(e.$_hash);if(e.name)return t.columnByName(e.name)}return null},o.getItemProxy=function(t,e){var i=t.parent,i={type:void 0,id:t.id,parentId:null==i?-1:i.id,itemIndex:t.index,index:t.index,dataRow:-1,checked:t.checked};return e&&(i.childIndex=t.childIndex,i.level=t.level),t instanceof rt.GridRow?(i.type="row",i.dataRow=t.dataRow):t instanceof rt.GroupItem?(i.count=t.children.length,i.expanded=t.expanded,t instanceof rt.GroupItemImpl||t instanceof q.MergedGroupHeader?(i.type="group",i.footerId=t.footer?t.footer.id:-1,t instanceof Bt.RootItem||e&&(i.firstItem=o.getItemProxy(t.firstItem),i.firstDataItem=o.getItemProxy(t.firstDataItem),i.dataRows=t.getRows())):t instanceof E.TreeItem&&(i.type="tree",i.dataRow=t.dataRow||-1)):t instanceof rt.GroupFooter&&(i.type="footer"),i},o.getItemIndices=function(t){for(var e=[],i=0,o=t.length;i<o;i++)e.push(t[i].index);return e},o.getValues=function(t,e){var i={},o=e.dataSource;if(t.isItemEditing(e))return(i=e.getRowObject()).__rowId=e.dataRow,i;if(0<=e.dataRow){if(e instanceof E.TreeItem){var t=e.row,n=t.values;i.__rowId=t.rowId;for(var r=0,s=o.fieldCount;r<s;r++)i[o.getOrgFieldName(r)]=n[r]}else(i=o.getRowObject(e.dataRow)).__rowId=e.dataRow;return i}return null},o.getDisplayValues=function(t,e,i){var o=t.getDataColumns();if(e){for(var n=i?{}:e.getRowObject(),r=new lt.ColumnStyle,s=0,a=o.length;s<a;s++){var l=o[s],h=0<=e.index?_t.CellIndex.temp(t,e.index,l):_t.DummyCellIndex.tempItem(t,e,l),d=t.body.getCell(h,!1),h=(d._index=h,r.clear(),r.assign(l),t.body.getCellStyle(d,r),r.toFormatter(null));n[i?l.name:l.fieldName]=st.DataCell._getDisplayText(t,e,l,e.getData(l.dataIndex),h)}return n}},o.setValues=function(t,e,i,o){var n,r,s=e.dataSource,a=s.fieldCount;if(t.isItemEditing(e))if(e)e.values=i;else for(var l=0;l<a;l++){var h=s.getOrgFieldName(l);i.hasOwnProperty(h)&&e.setData(l,i[h])}else if(0<=(t=e.dataRow))if(s instanceof kt.LocalTreeDataProvider){var d=s.rowById(t);if(d){if(n=d.values||[],Array.isArray(i))for(var l=0,u=i.length;l<u&&!(r=!s.getField(l).equalValues(n[l],i[l]));l++);else for(l=0;l<a;l++){h=s.getOrgFieldName(l);if(i.hasOwnProperty(h)&&(r=!s.getField(l).equalValues(n[l],i[h])))break}r&&d.update(i,o)}}else if(s instanceof wt.LocalDataProvider){if(n=s.getRow(t),Array.isArray(i))for(l=0,u=i.length;l<u&&!(r=!s.getField(l).equalValues(n[l],i[l]));l++);else for(l=0;l<a;l++){h=s.getOrgFieldName(l);if(i.hasOwnProperty(h)&&(r=!s.getField(l).equalValues(n[l],i[h])))break}r&&s.updateRow(t,i,o)}};var s=o;function o(){}n.prototype.dispose=function(){this._view.dispose(),this._view=null,this._container&&this._container.dispose(),this._container=null},_dp(n,"summaryMode",{get:function(){return this._view.itemSource.summaryMode},set:function(t){this._view.itemSource.summaryMode=t}}),_dp(n,"hideDeletedRows",{get:function(){return this._view.itemSource.hideDeleted},set:function(t){this._view.itemSource.hideDeleted=t}}),_dp(n,"sortMode",{get:function(){return this._view.itemSource.sortMode},set:function(t){this._view.itemSource.sortMode=t}}),_dp(n,"undoable",{get:function(){return this._view.undoable},set:function(t){this._view.undoable=t}}),_dp(n,"undoing",{get:function(){return this._view.undoing}}),_dp(n,"redoing",{get:function(){return this._view.redoing}}),_dp(n,"disabled",{get:function(){return this._view.container.disabled},set:function(t){this._view.container.disabled=t}}),_dp(n,"scrollBarWidth",{get:function(){return this._view.scrollBarWidth},set:function(t){this._view.scrollBarWidth=t}}),_dp(n,"scrollBarHeight",{get:function(){return this._view.scrollBarHeight},set:function(t){this._view.scrollBarHeight=t}}),_dp(n,"fixedOptions",{get:function(){return this._view.fixedOptions}}),_dp(n,"displayOptions",{get:function(){return this._view.displayOptions}}),_dp(n,"formatOptions",{get:function(){return this._view.formatOptions}}),_dp(n,"editOptions",{get:function(){return this._view.editOptions}}),_dp(n,"editorOptions",{get:function(){return this._view.editorOptions}}),_dp(n,"copyOptions",{get:function(){return this._view.copyOptions}}),_dp(n,"pasteOptions",{get:function(){return this._view.pasteOptions}}),_dp(n,"sortingOptions",{get:function(){return this._view.sortingOptions}}),_dp(n,"filteringOptions",{get:function(){return this._view.filteringOptions}}),_dp(n,"mobileOptions",{get:function(){return this._view.mobileOptions}}),_dp(n,"dataDropOptions",{get:function(){return this._view.dataDropOptions}}),_dp(n,"formOptions",{get:function(){return this.formView.options}}),_dp(n,"rowIndicator",{get:function(){return this._view.rowIndicator}}),_dp(n,"stateBar",{get:function(){return this._view.stateBar}}),_dp(n,"checkBar",{get:function(){return this._view.checkBar}}),_dp(n,"header",{get:function(){return this._view.header}}),_dp(n,"footer",{get:function(){return this._view.footer}}),_dp(n,"footers",{get:function(){return this._view.footers}}),_dp(n,"headerSummary",{get:function(){return this._view.headerSummary}}),_dp(n,"headerSummaries",{get:function(){return this._view.headerSummaries}}),_dp(n,"filterPanel",{get:function(){return this._view.filterPanel}}),_dp(n,"formView",{get:function(){return this._view.container.formView}}),n.prototype.ping=function(t){this._view instanceof pi.GridBase&&alert(t)},n.prototype.refresh=function(t){this._view.refreshView(t)},n.prototype.beginUpdate=function(){this._view.beginUpdate()},n.prototype.endUpdate=function(t){this._view.endUpdate(t)},n.prototype.isVisible=function(){return this._view.visible},n.prototype.setVisible=function(t){this._view.visible=t},n.prototype.getItemCount=function(){return this._view.itemCount},n.prototype.getDataRow=function(t){t=this._view.getItem(t);return t?t.dataRow:-1},n.prototype.getRowsOfItems=function(t){var e=[];if(t)for(var i=0,o=t.length;i<o;i++){var n=this._view.getItem(t[i]);n&&e.push(n.dataRow)}return e},n.prototype.getItemIndex=function(t){return this._view.getItemIndexOfRow(t)},n.prototype.getItemsOfRows=function(t){return this._view.getItemIndicesOfRows(t)},n.prototype.restoreColumns=function(){this._view.restoreColumns()},n.prototype.getDataSource=function(){return this._dataDelegator},n.prototype.setDataSource=function(t){this._dataDelegator=t,this._dataProvider=t?t.getProvider():null,this._view.dataSource=this._dataProvider},n.prototype.getOptions=function(){return{summaryMode:this._view.itemSource.summaryMode.toString(),hideDeletedRows:this._view.itemSource.hideDeleted,sortMode:this._view.itemSource.sortMode.toString(),fixed:this.fixedOptions,display:this.displayOptions,format:this.formatOptions,edit:this.editOptions,editor:this.editorOptions,copy:this.copyOptions,paste:this.pasteOptions,sorting:this.sortingOptions,filtering:this.filteringOptions,dataDrop:this.dataDropOptions,rowIndicator:this.rowIndicator,checkBar:this.checkBar,stateBar:this.stateBar,header:this.header,footer:this.footer,footers:this.footers,headerSummary:this.headerSummary,headerSummaries:this.headerSummaries}},n.prototype.setOptions=function(t){t&&(this._view.setOptions(t),t.fixed&&this.setFixedOptions(t.fixed),t.display&&this.setDisplayOptions(t.display),t.format&&this.setFormatOptions(t.format),t.edit&&this.setEditOptions(t.edit),t.editor&&this.setEditorOptions(t.editor),t.copy&&this.setCopyOptions(t.copy),t.paste&&this.setPasteOptions(t.paste),t.sorting&&this.setSortingOptions(t.sorting),t.filtering&&this.setFilteringOptions(t.filtering),t.dataDrop&&this.setDataDropOptions(t.dataDrop),t.rowIndicator&&this.setRowIndicator(t.rowIndicator),t.checkBar&&this.setCheckBar(t.checkBar),t.stateBar&&this.setStateBar(t.stateBar),t.header&&this.setHeader(t.header),t.footer&&this.setFooter(t.footer),t.footers&&this.setFooters(t.footers),t.headerSummary&&this.setHeaderSummary(t.headerSummary),t.headerSummaries)&&this.setHeaderSummaries(t.headerSummaries)},n.prototype.getFixedOptions=function(){return this._view.fixedOptions.toProxy()},n.prototype.setFixedOptions=function(t){this._view.fixedOptions.assignFrom(t)},n.prototype.getDisplayOptions=function(){return this._view.displayOptions.toProxy()},n.prototype.setDisplayOptions=function(t){this._view.displayOptions.assignFrom(t)},n.prototype.getFormatOptions=function(){return this._view.formatOptions.toProxy()},n.prototype.setFormatOptions=function(t){this._view.formatOptions.assignFrom(t)},n.prototype.getEditOptions=function(){return this._view.editOptions.toProxy()},n.prototype.setEditOptions=function(t){this._view.editOptions.assignFrom(t)},n.prototype.getEditorOptions=function(){return this._view.editorOptions.toProxy()},n.prototype.setEditorOptions=function(t){this._view.editorOptions.assignFrom(t)},n.prototype.getCopyOptions=function(){return this._view.copyOptions.toProxy()},n.prototype.setCopyOptions=function(t){this._view.copyOptions.assignFrom(t)},n.prototype.getPasteOptions=function(){return this._view.pasteOptions.toProxy()},n.prototype.setPasteOptions=function(t){this._view.pasteOptions.assignFrom(t)},n.prototype.getSortingOptions=function(){return this._view.sortingOptions.toProxy()},n.prototype.setSortingOptions=function(t){this._view.sortingOptions.assignFrom(t)},n.prototype.getFilteringOptions=function(){return this._view.filteringOptions.toProxy()},n.prototype.setFilteringOptions=function(t){this._view.filteringOptions.assignFrom(t)},n.prototype.getMobileOptions=function(){return this._view.mobileOptions.toProxy()},n.prototype.setMobileOptions=function(t){this._view.mobileOptions.assignFrom(t)},n.prototype.getDataDropOptions=function(){return this._view.dataDropOptions.toProxy()},n.prototype.setDataDropOptions=function(t){this._view.dataDropOptions.assignFrom(t)},n.prototype.getFormOptions=function(){return this.formView.options.toProxy()},n.prototype.setFormOptions=function(t){this.formView.options.assignFrom(t)},n.prototype.getRowIndicator=function(){return this._view.rowIndicator.toProxy()},n.prototype.setRowIndicator=function(t){this._view.rowIndicator.assignFrom(t)},n.prototype.getStateBar=function(){return this._view.stateBar.toProxy()},n.prototype.setStateBar=function(t){this._view.stateBar.assignFrom(t)},n.prototype.getCheckBar=function(){return this._view.checkBar.toProxy()},n.prototype.setCheckBar=function(t){this._view.checkBar.assignFrom(t)},n.prototype.getHeader=function(){return this._view.header.toProxy()},n.prototype.setHeader=function(t){this._view.header.assignFrom(t)},n.prototype.getFooter=function(){return this._view.footer.toProxy()},n.prototype.setFooter=function(t){this._view.footer.assignFrom(t)},n.prototype.getFooters=function(){return this._view.footers.toProxy()},n.prototype.setFooters=function(t){this._view.footers.assignFrom(t)},n.prototype.getHeaderSummary=function(){return this._view.headerSummary.toProxy()},n.prototype.setHeaderSummary=function(t){this._view.headerSummary.assignFrom(t)},n.prototype.getHeaderSummaries=function(){return this._view.headerSummaries.toProxy()},n.prototype.setHeaderSummaries=function(t){this._view.headerSummaries.assignFrom(t)},n.prototype.setFilterPanel=function(t){this._view.filterPanel.assignFrom(t)},n.prototype.setCellStyleCallback=function(t){this._view.body.cellStyleCallback=t},n.prototype.setRowStyleCallback=function(t){this._view.body.rowStyleCallback=t},n.prototype.setAriaLabelCallback=function(t){this._view.body.ariaLabelCallback=t},n.prototype.orderBy=function(t,e,i){if(t){var o=[],n=[],r=[];t=re.Utils.makeArray(t,!1),e=re.Utils.makeArray(e,!0),i=re.Utils.makeArray(i,!0);for(var s=0,a=t.length;s<a;s++)o.push(this._view.columnByField(t[s])),n.push(e[s]||ht.SortDirection.ASCENDING),r.push(i[s]||ht.SortCase.SENSITIVE);this._view.orderBy(o,n,r)}},n.prototype.getSortedFields=function(){var t,e=this._view,i=e.getSortFields(),o=e.getSortDirections();if(i&&0<(t=i.length)){for(var n=this._dataProvider,r=[],s=0;s<t;s++)r.push({fieldName:n.getFieldName(i[s]),orgFieldName:n.getOrgFieldName(i[s]),direction:o[s]});return r}return null},n.prototype.setFocus=function(){this._view.setFocus()},n.prototype.getColumn=function(t){return this._view.getColumn(t)},n.prototype.getColumns=function(){for(var t=this._view.columnCount,e=[],i=0;i<t;i++)e.push(this._view.getColumn(i));return e},n.prototype.setColumns=function(t){this._view.setColumns(t)},n.prototype.addColumn=function(t,e){return this._view.addColumn(t,e)},n.prototype.removeColumn=function(t){return this._view.removeColumn(t)},n.prototype.addLayout=function(t,e){return this._view.addLayout(t,e)},n.prototype.removeLayout=function(t){this._view.removeLayout(t)},n.prototype.layoutByColumn=function(t){return this._view.layoutByColumn(t)},n.prototype.layoutByName=function(t){return this._view.layoutByName(t)},n.prototype.getColumnNames=function(t,e){return this._view.collectColumnNames(t,e)},n.prototype.columnByName=function(t){return this._view.columnByName(t)},n.prototype.columnByField=function(t){return this._view.columnByField(t)},n.prototype.columnByTag=function(t){return this._view.columnByTag(t)},n.prototype.columnsByTag=function(t){return this._view.columnsByTag(t)},n.prototype.getColumnProperty=function(t,e){t=s.getColumn(this._view,t);if(t&&e)return t[e]instanceof se.Base?t[e].toProxy():t[e]},n.prototype.setColumnProperty=function(t,e,i){t=s.getColumn(this._view,t);t&&e&&(t[e]instanceof se.Base?t[e].assignFrom(i):t[e]=i)},n.prototype.setColumn=function(t){var e=s.getColumn(this._view,t);e&&e.assignFrom(t)},n.prototype.getDisplayColumns=function(){return this._view.collectColumns(!0,!0,!0)},n.prototype.setColumnLayout=function(t){"string"==typeof t&&!(t=this._view.findColumnLayout(t))||this._view.setCellLayout(t)},n.prototype.getLayoutByColumn=function(t){t=this._view.layoutByColumn(t);return t?t.toProxy():null},n.prototype.saveColumnLayout=function(){return this._view.activeCellLayout.getLayout.apply(this._view.activeCellLayout,arguments)},n.prototype.linearizeColumns=function(t){this._view.linearizeColumns(t)},n.prototype.registerColumnLayouts=function(t){this._view.registerColumnLayouts(t)},n.prototype.fitLayoutWidth=function(t,e,i,o){var n;return t?t instanceof ct.CellLayoutItem?n=t:"string"==typeof t?n=this._view.layoutByName(t):t.name&&(n=this._view.layoutByColumn(t.name)):null==t&&(n=this._view.activeCellLayout._root),n&&this._view.fitLayoutWidth(n,e,i,o)},n.prototype.setRowHeight=function(t,e,i){this._view.setRowHeight(t,e=void 0===e?0:e,i=void 0===i?!0:i)},n.prototype.getRowHeight=function(t){var e=this._view.getRowHeight(t);return isNaN(e)&&(t=this._view.getItem(t),e=this._view.layoutManager.getItemHeight(t)),e},n.prototype.clearRowHeights=function(t){this._view.clearRowHeights(t)},n.prototype.getCurrent=function(){var t=this._view.focusedIndex;return t?t.proxy():null},n.prototype.setCurrent=function(t,e){void 0===e&&(e=!0);var i=this._view.focusedIndex.clone();i.assignFrom(t),this._view.setFocusedIndex(i,e,!0)},n.prototype.resetCurrent=function(){this._view.setFocusedIndex(this._view.focusedIndex.clone().reset())},n.prototype.clearCurrent=function(){this._view.clearFocusedIndex()},n.prototype.mouseToIndex=function(t,e){t=this._view.pointToIndex(null,t,e,!1);return t?t.proxy():null},n.prototype.getCellBounds=function(t,e,i){void 0===i&&(i=!0);e=s.getColumn(this._view,e),t=new _t.CellIndex(this._view,t,e);if(e&&t){var e=this._view.layoutManager,o=e.getBodyView(t),e=o.getCellRectAt(e,t,!0);if(e=e&&(i?o.boundsByScreen(e):o.boundsByContainer(e)))return{x:e.x,y:e.y,width:e.width,height:e.height}}return null},n.prototype.getIndexOfElement=function(t){t=this._view.getCellViewOf(t),t=this._view.getDataCellIndex(t);return t?t.proxy():null},n.prototype.setColumnFilters=function(t,e){t=s.getColumn(this._view,t);t instanceof lt.DataColumn&&t.setFilters(e)},n.prototype.clearColumnFilters=function(t){t=s.getColumn(this._view,t);t instanceof lt.DataColumn&&t.clearFilters()},n.prototype.addColumnFilters=function(t,e,i){t=s.getColumn(this._view,t);t instanceof lt.DataColumn&&t.addFilters(e,i)},n.prototype.removeColumnFilters=function(t,e){t=s.getColumn(this._view,t);t instanceof lt.DataColumn&&t.removeFilters(e)},n.prototype.activateColumnFilters=function(t,e,i){t=s.getColumn(this._view,t);t instanceof lt.DataColumn&&t.activateFilters(e,i)},n.prototype.activateAllColumnFilters=function(t,e){t=s.getColumn(this._view,t);t instanceof lt.DataColumn&&t.activateAllFilters(e)},n.prototype.hideColumnFilters=function(t,e,i){void 0===i&&(i=!0);t=s.getColumn(this._view,t);t instanceof lt.DataColumn&&(t.hideColumnFilters(e,i),this._view.closePopups())},n.prototype.hideAllColumnFilters=function(t,e){void 0===e&&(e=!0);t=s.getColumn(this._view,t);t instanceof lt.DataColumn&&(t.hideAllColumnFilters(e),this._view.closePopups())},n.prototype.toggleColumnFilters=function(t,e){t=s.getColumn(this._view,t);t instanceof lt.DataColumn&&t.toggleFilters(e)},n.prototype.toggleAllColumnFilters=function(t){t=s.getColumn(this._view,t);t instanceof lt.DataColumn&&t.toggleAllFilters()},n.prototype.getColumnFilter=function(t,e){t=s.getColumn(this._view,t);return t instanceof lt.DataColumn&&t.getFilter(e)?t.getFilter(e).toProxy():null},n.prototype.getColumnFilters=function(t){t=s.getColumn(this._view,t);if(t instanceof lt.DataColumn){for(var e=(t.autoFilter?t.autoFilters:t.filters).items,i=[],o=0,n=e.length;o<n;o++)i.push(e[o].toProxy());return i}return null},n.prototype.getActiveColumnFilters=function(t,e){void 0===e&&(e=!0);t=s.getColumn(this._view,t);if(t instanceof lt.DataColumn){for(var i=t.getActiveFilters(e),o=[],n=0,r=i.length;n<r;n++)o.push(i[n].toProxy());return o}return null},n.prototype.isFiltered=function(t){return t?(t=s.getColumn(this._view,t))instanceof lt.DataColumn&&t.isFiltered():(t=this._view.getFilteredColumns())&&0<t.length},n.prototype.autoFiltersRefresh=function(t,e){t=t?re.Utils.makeArray(t):this._view.getChildColumnNames(null);for(var i=0;i<t.length;i++){var o=s.getColumn(this._view,t[i]);o instanceof lt.DataColumn&&o.autoFilterRefresh(e)}},n.prototype.getValues=function(t){t=this._view.getItem(t);return t?s.getValues(this._view,t):null},n.prototype.getDisplayValues=function(t,e){t=this._view.getItem(t);if(t)return s.getDisplayValues(this._view,t,e)},n.prototype.getDisplayValuesOfRow=function(t,e){t=this._view.getItemOfRow(t,!0);if(t)return s.getDisplayValues(this._view,t,e)},n.prototype.getJsonRows=function(){return this._view.getJsonRows()},n.prototype.setValues=function(t,e,i){t=this._view.getItem(t);t&&s.setValues(this._view,t,e,i)},n.prototype.getValue=function(t,e){t=this._view._clipboardManager.isPasting?this._view._clipboardManager.appendingIndex.item:this._view.getItem(t);return t?(e="string"==typeof e?this._dataProvider.getFieldIndex(e):e,t.getData(e)):null},n.prototype.setValue=function(t,e,i){e=this._dataProvider.getFieldIndex(e),this._view.setValueAt(t,e,i)},n.prototype.getEditValue=function(){return this._view.getEditCellValue()},n.prototype.setEditValue=function(t,e,i){this._view.setEditCellValue(t,e,i=void 0===i?!0:i)},n.prototype.registerCustomRenderer=function(t,e){this._view.registerCustomRenderer(t,e)},n.prototype.unregisterCustomRenderer=function(t){this._view.unregisterCustomRenderer(t)},n.prototype.existsCustomRenderer=function(t){return this._view.existsCustomRenderer(t)},n.prototype.unregisterAllCustomRenderer=function(){this._view.unregisterAllCustomRenderer()},n.prototype.addPopupMenu=function(t,e){this._view.addPopupMenu(t,e)},n.prototype.removePopupMenu=function(t){this._view.removePopupMenu(t)},n.prototype.setContextMenu=function(t){this._view.setContextMenu(t)},n.prototype.getSelection=function(t){t=this._view.getSelection(t=void 0===t?0:t);return t?t.toProxy():null},n.prototype.getSelections=function(){var t=this._view.getSelections(),e=[];return t.forEach(function(t){e.push(t.toProxy())}),e},n.prototype.setSelection=function(t){t.style&&"string"==typeof t.style&&(this._view.clearAddSelection(!0,!1),this.addSelection(t))},n.prototype.addSelection=function(t){if(t.style&&"string"==typeof t.style){var e=re.Utils.valueIn(t.style,W.SelectionStyle)?t.style:W.SelectionStyle.BLOCK,i=0,o=0;if(t.hasOwnProperty("startItem"))o=i=t.startItem;else if(t.hasOwnProperty("startRow"))o=i=this._view.getItemIndexOfRow(t.startRow);else if("singleColumn"!=e&&"columns"!=e)return;if(t.hasOwnProperty("endItem"))o=t.endItem;else if(t.hasOwnProperty("endRow"))o=this._view.getItemIndexOfRow(t.endRow);else if("singleColumn"!=e&&"columns"!=e)return;var n=s.getColumn(this._view,t.startColumn),t=s.getColumn(this._view,t.endColumn),i=new _t.CellIndex(this._view,i,n),n=new _t.CellIndex(this._view,o,t);this._view.selections.add(i,n,e)}},n.prototype.clearSelection=function(){this._view.clearAddSelection()},n.prototype.removeSelection=function(t){t=this._view.selections.getItem(t);t&&this._view.selections.remove(t)},n.prototype.getSelectedItems=function(t){return this._view.getSelectedItemIndices(t)},n.prototype.getSelectedRows=function(){return this._view.getSelectedRows()},n.prototype.deleteSelection=function(t){this._view.deleteSelection(t)},n.prototype.eraseSelection=function(t){this._view.eraseSelection(t)},n.prototype.getSelectionData=function(t,e){return void 0===t&&(t=-1),0<=(e=void 0===e?0:e)&&e<this._view.selections.count?this._view.selections.getItem(e).getData(t):null},n.prototype.getSelectionsData=function(){var e=[],t=this._view.selections.getItems(),i={};return t.forEach(function(t){t.getData(-1).forEach(function(t){var e=t.__rowId;0<=e&&(i[e]=i[e]||{},re.Utils.extendObj(t,i[e]))})}),Object.keys(i).forEach(function(t){e.push(i[t])}),e},n.prototype.copyToClipboard=function(t,e){return this._view.toClipboard(t,e=void 0===e?!0:e)},n.prototype.commitEditor=function(t){this._view.commitEditor(t=void 0===t?!0:t)},n.prototype.commit=function(t){return this._view.commit(t)},n.prototype.cancel=function(){return this._view.cancel()},n.prototype.fillEditSearchItems=function(t,e,i,o){t=s.getColumn(this._view,t);this._view.fillEditSearchItems(t,e,i,o)},n.prototype.isItemEditing=function(){return this._view.isItemEditing()},n.prototype.isEditing=function(){return this._view.isEditing()},n.prototype.showEditor=function(t){this._view.showEditor(null,null,t=void 0===t?!1:t)},n.prototype.hideEditor=function(){this._view.hideEditor(!0)},n.prototype.cancelEditor=function(){this._view.cancelEditor(!0)},n.prototype.setValidations=function(t){this._view.validations=t},n.prototype.validateCells=function(t,e,i){return this._view.validateCells(t,e=void 0===e?!0:e,i=void 0===i?!1:i)},n.prototype.getInvalidCells=function(){return this._view.getInvalidCells()},n.prototype.clearInvalidCells=function(){return this._view.clearInvalidCells()},n.prototype.getEditingItem=function(){var t=this._view.getEditItem();return t?(t.getRowObject(),{itemIndex:t.index,dataRow:t.dataRow,values:t.getRowObject()}):null},n.prototype.getItemState=function(t){var e,t=this._view.getItem(t);return t?(e=t.itemState)==rt.ItemState.NORMAL&&this._view.focusedIndex.itemIndex==t.index?rt.ItemState.FOCUSED:e:null},n.prototype.showToast=function(t,e){this._view.showToast(t,e)},n.prototype.hideToast=function(t){this._view.hideToast(t)},n.prototype.setLookups=function(t){this._view.setLookups(t)},n.prototype.addLookupSource=function(t){this._view.addLookupSource(t)},n.prototype.removeLookupSource=function(t){this._view.removeLookupSource(t)},n.prototype.existsLookupData=function(t,e){return this._view.existsLookupData(t,e)},n.prototype.fillLookupData=function(t,e){this._view.fillLookupData(t,e)},n.prototype.clearLookupData=function(t){this._view.clearLookupData(t)},n.prototype.isCheckable=function(t){return this._view.isCheckable(t)},n.prototype.isCheckableOfRow=function(t){return this._view.isCheckableOfRow(t)},n.prototype.setCheckable=function(t,e){this._view.setCheckable(t,e)},n.prototype.setCheckableOfRow=function(t,e){this._view.setCheckableOfRow(t,e)},n.prototype.isCheckedItem=function(t){return this._view.isCheckedItem(t)},n.prototype.isCheckedRow=function(t){return this._view.isCheckedRow(t)},n.prototype.checkItem=function(t,e,i,o){this._view.checkItem(t,e=void 0===e?!0:e,i,o=void 0===o?!0:o)},n.prototype.checkRow=function(t,e,i,o){this._view.checkRow(t,e=void 0===e?!0:e,i,o=void 0===o?!0:o)},n.prototype.checkItems=function(t,e,i){this._view.checkItems(t,e=void 0===e?!0:e,i=void 0===i?!0:i)},n.prototype.checkRows=function(t,e,i){this._view.checkRows(t,e=void 0===e?!0:e,i=void 0===i?!0:i)},n.prototype.checkAll=function(t,e,i,o){this._view.checkAll(t=void 0===t?!0:t,e,i=void 0===i?!0:i,o=void 0===o?!0:o)},n.prototype.setAllCheck=function(t,e){this._view.setAllCheck(t=void 0===t?!0:t,e=void 0===e?!0:e)},n.prototype.isAllChecked=function(){return this._view.allChecked},n.prototype.resetCheckables=function(t){this._view.resetCheckables(),t&&(this._view.checkBar.checkableExpression=null,this._view.checkBar.checkableCallback=null)},n.prototype.applyCheckables=function(){this._view.applyCheckables()},n.prototype.setCheckableExpression=function(t,e){void 0===e&&(e=!0),this._view.checkBar.checkableExpression=t,e&&this._view.applyCheckables()},n.prototype.setCheckableCallback=function(t,e){void 0===e&&(e=!0),this._view.checkBar.checkableCallback=t,e&&this._view.applyCheckables()},n.prototype.getSummary=function(t,e){var i=this._view.summarizer,o="string"==typeof t?this._dataProvider.getFieldIndex(t):t;if(-1==o)return null;switch(e){case"count":return i.getCount(o);case"sum":return i.getSum(o);case"max":return i.getMax(o);case"min":return i.getMin(o);case"avg":return i.getAvg(o);case"var":return i.getVar(o);case"varp":return i.getVarp(o);case"stdev":return i.getStdev(o);case"stdevp":return i.getStdevp(o);case"datacount":return i.getDataCount(o);case"dataavg":return i.getDataAvg(o)}},n.prototype.getModel=function(t,e){t=this._view.getItem(t);return t&&s.getItemProxy(t,e)},n.prototype.getModelAs=function(t,e,i){var o=this._view.getItem(t);switch(e){case"row":o=re.Utils.cast(o,rt.GridRow);break;case"group":o=re.Utils.cast(o,rt.GroupItem);break;case"footer":o=re.Utils.cast(o,rt.GroupFooter);break;case"tree":o=re.Utils.cast(o,E.TreeItem)}return o?s.getItemProxy(o,i):null},n.prototype.getGroupModel=function(t,e){t=this._view.getItem(t);return(t=!t||t instanceof rt.GroupItem?t:t.parent instanceof Bt.RootItem?null:t.parent)?s.getItemProxy(t,e):null},n.prototype.getRootModel=function(t,e){if(t&&(this._view.isTree()||this._view.rowGrouped)&&t){t=this._view.getItem(t.index);if(t)return t.root?s.getItemProxy(t.root,e):null}return null},n.prototype.getModels=function(t,e){if(t=re.Utils.makeArray(t)){for(var i=[],o=0,n=t.length;o<n;o++){var r=this._view.getItem(t[o]);r&&i.push(s.getItemProxy(r,e))}return i}},n.prototype.getModelOfRow=function(t,e){t=this._view.getItemOfRow(t,!1);return t?s.getItemProxy(t,e):null},n.prototype.getModelsOfRows=function(t,e){if(t=re.Utils.makeArray(t)){for(var i=[],o=0,n=t.length;o<n;o++){var r=this._view.getItemOfRow(t[o],!1);r&&i.push(s.getItemProxy(r,e))}return i}},n.prototype.getParentModel=function(t,e){var i;return!(i=t?this._view.getItemOfModel(t):i)||i instanceof A.EditItem||!this._view.isTree()&&!this._view.rowGrouped?null:s.getItemProxy(i.parent,e)},n.prototype.getChildModel=function(t,e,i){var t=t&&this._view.getItemOfModel(t);return t instanceof rt.GroupItem&&(t=t.getItem(e))?s.getItemProxy(t,i):null},n.prototype.getChildModels=function(t,e){var i=t&&this._view.getItemOfModel(t);if(i instanceof rt.GroupItem){for(var o=[],n=0,r=i.count;n<r;n++)o.push(s.getItemProxy(i.children[n],e));return o}return null},n.prototype.getDescendantModels=function(t,e){t=t&&this._view.getItemOfModel(t);if(t instanceof rt.GroupItem){var i=t.getDescendants(!1),o=[];if(i)for(var n=0,r=i.length;n<r;n++)o.push(s.getItemProxy(i[n],e));return o}return null},n.prototype.getGroupSummary=function(t,e,i){if(t){var o,t=this._view.getItemOfModel(t),e="string"==typeof e?this._dataProvider.getFieldIndex(e):e;if(t instanceof rt.GroupItem&&0<=e)return o={count:t.getNumber(e),sum:t.getSum(e),max:t.getMax(e),min:t.getMin(e),avg:t.getAvg(e),datacount:t.getDataCount(e),dataavg:t.getSum(e)/t.getDataCount(e)},i&&(o.var=t.getVar(e,1),o.varp=t.getVar(e,0),o.stdev=t.getStdev(e,1),o.stdevp=t.getStdev(e,0)),o}return null},n.prototype.getDistinctItemValues=function(t,e,i){return void 0===e&&(e=-1),void 0===i&&(i=ht.SortDirection.ASCENDING),t=this._dataProvider.getFieldIndex(t),this._view.getDistinctItemValues(t,e,i)},n.prototype.showProgress=function(){this._view.showProgress()},n.prototype.setProgress=function(t,e,i,o){this._view.setProgress(t,e,i,o)},n.prototype.closeProgress=function(){this._view.closeProgress()},n.prototype.showLoading=function(t){this._view.showLoading(t)},n.prototype.closeLoading=function(){this._view.hideLoading()},n.prototype.searchItem=function(t){return t?this._view.searchItem(t):-1},n.prototype.searchCell=function(t){return t?this._view.searchCell(t):null},n.prototype.resetSize=function(t){this._view.container.resetSize(t)},n.prototype.closeList=function(){this._view.closePopups()},n.prototype.exportGrid=function(t){var e;"csv"===t.type?(e=new mi.GridExportOptions(t),(new gi.GridCsvExporter).export(this._view,e)):"excel"===t.type&&(e=new mi.GridMultiExportOptions(this._view,t),(new Oi.GridExcelExporter).export(this._view,e))},n.prototype.scrollPage=function(t){this._view._vscrollBar._doScroll(v.ScrollEventType.PAGE,t,0)},n.prototype.getTopItem=function(){return this._view.topIndex},n.prototype.setTopItem=function(t){this._view.topIndex=t=void 0===t?0:t},n.prototype.getLeftPos=function(){return this._view.leftPos},n.prototype.setLeftPos=function(t){this._view.leftPos=t},n.prototype.setLeftCol=function(t){var e,i;"string"==typeof t?(i=this._view.layoutByName(t))&&(e=i._col):e=t,this._view.leftCell=e},n.prototype.getContainer=function(){return this._view.container._containerDiv},n.prototype.destroy=function(){this.dispose()},n.prototype.fullItemCount=function(){return this._view.layoutManager.fullItemCount},n.prototype.undo=function(){return this._view.undo()},n.prototype.redo=function(){return this._view.redo()},n.prototype.clearCommandStack=function(t){this._view.clearCommandStack(t=void 0===t?!0:t)},n.prototype._getView=function(){return this._view};var i=n;function n(t,e,i){this.onViewActivated=null,this.onCurrentChanging=null,this.onCurrentChanged=null,this.onCurrentRowChanged=null,this.onValidateColumn=null,this.onValidateRow=null,this.onValidationFail=null,this.onColumnCheckedChanged=null,this.onMenuItemClicked=null,this.onContextMenuPopup=null,this.onContextMenuItemClicked=null,this.onCellButtonClicked=null,this.onScrollToBottom=null,this.onTopIndexChanged=null,this.onTopIndexChanging=null,this.onRowsDeleting=null,this.onRowInserting=null,this.onSelectionCleared=null,this.onSelectionChanged=null,this.onSelectionAdded=null,this.onSelectionEnded=null,this.onShowEditor=null,this.onHideEditor=null,this.onEditChange=null,this.onGetEditValue=null,this.onEditCommit=null,this.onEditCanceled=null,this.onItemEditCanceled=null,this.onItemEditCancel=null,this.onEditSearch=null,this.onSearchCellButtonClick=null,this.onCellEdited=null,this.onEditRowChanged=null,this.onEditRowPasted=null,this.onRowsPasted=null,this.onCellPasting=null,this.onItemChecked=null,this.onItemAllChecked=null,this.onErrorClicked=null,this.onSorting=null,this.onSortingChanged=null,this.onFiltering=null,this.onFilteringChanged=null,this.onKeyDown=null,this.onKeyPress=null,this.onKeyUp=null,this.onShowTooltip=null,this.onShowHeaderTooltip=null,this.onColumnPropertyChanged=null,this.onLayoutPropertyChanged=null,this.onGridActivated=null,this.onCopy=null,this.onPaste=null,this.onPasted=null,this.onItemsChecked=null,this.onCellClicked=null,this.onCellDblClicked=null,this.onCellItemClicked=null,this.onCommandStackChanged=null,this.onDataLoadComplated=null,this.onLayoutExpanding=null,this.onLayoutExpanded=null,this.onLayoutCollapsing=null,this.onLayoutCollapsed=null,this._view=this._createView(t,e,i),this._listener=this._createListener(this._view)}e.GridBase=i;r=i,ne.__extends(l,r),_dp(l,"rowGroup",{get:function(){return this._view.rowGroup}}),_dp(l,"groupPanel",{get:function(){return this._view.groupPanelView}}),_dp(l,"filterMode",{get:function(){return this._view._rs.filterMode},set:function(t){this._view._rs.filterMode=t}}),_dp(l,"filterOr",{get:function(){return this._view._rs.inclusiveFiltering},set:function(t){this._view._rs.inclusiveFiltering=t}}),_dp(l,"groupSummaryMode",{get:function(){return this._view._rs.groupSummaryMode},set:function(t){this._view._rs.groupSummaryMode=t}}),_dp(l,"groupingOptions",{get:function(){return this._view.groupingOptions}}),l.prototype.getRowGroup=function(){return this._view.rowGroup.toProxy()},l.prototype.setRowGroup=function(t){this._view.rowGroup.assignFrom(t)},l.prototype.getGroupPanel=function(){return{visible:this._view.groupPanelView.visible,height:this._view.groupPanelView.height,minHeight:this._view.groupPanelView.minHeight}},l.prototype.setGroupPanel=function(t){this._view.groupPanelView.assignFrom(t)},l.prototype.getOptions=function(){var t=r.prototype.getOptions.call(this),e=this._view._rs;return t.filterOr=e.inclusiveFiltering,t.groupSummaryMode=e.groupSummaryMode.toString(),t.filterMode=e.filterMode.toString(),t.grouping=this.groupingOptions,t.groupPanel=this.groupPanel,t},l.prototype.setOptions=function(t){r.prototype.setOptions.call(this,t),t.grouping&&this._view.groupingOptions.assignFrom(t.grouping),t.groupPanel&&this._view.groupPanelView.assignFrom(t.groupPanel)},l.prototype.getGroupingOptions=function(){return this._view.groupingOptions.toProxy()},l.prototype.setGroupingOptions=function(t){this._view.groupingOptions.assignFrom(t)},l.prototype.groupBy=function(t,e,i){this._view.groupByFieldNames(t,e,i)},l.prototype.isGrouped=function(){return this._view.rowGrouped},l.prototype.isMergedGrouped=function(){return this._view.mergedRowGrouped},l.prototype.getGroupFields=function(){return this._view.rowGroupFields},l.prototype.getGroupFieldNames=function(t){void 0===t&&(t=!0);var e=this._view.rowGroupFields;if(e){var i=this._dataProvider;if(i){for(var o=[],n=0,r=e.length;n<r;n++)o.push(t?i.getOrgFieldName(e[n]):i.getFieldName(e[n]));return o}return e}return null},l.prototype.getGroupLevels=function(){return this._view.rowGroupLevels},l.prototype.getGroupLevel=function(t){return-1<(t=this._dataProvider.getFieldIndex(t))?this._view.getGroupLevel(t):-1},l.prototype.getGroupIndex=function(t){var t=this._view.getItem(t);return(t=t&&t.parent)?t.index:-1},l.prototype.isGroupItem=function(t){return this._view.getItem(t)instanceof rt.GroupItem},l.prototype.isParentVisible=function(t){t=this._view.getItem(t);return t&&t.parent&&t.parent.visible},l.prototype.expandGroup=function(t,e,i,o){void 0===o&&(o=0);t=this._view.getItem(t);t&&t instanceof rt.GroupItem&&this._view.expand(t,e,i,o)},l.prototype.collapseGroup=function(t,e,i){t=this._view.getItem(t);t&&t instanceof rt.GroupItem&&this._view.collapse(t,e,i)},l.prototype.expandParent=function(t,e,i,o){void 0===o&&(o=0);var t=this._view.getItem(t);t&&(t=t.parent)&&t.expandable&&(t.collapsed||i)&&this._view.expand(t,e,i,o)},l.prototype.collapseParent=function(t,e,i){var t=this._view.getItem(t);t&&(t=t.parent)&&t.collapsable&&t instanceof rt.GroupItem&&this._view.collapse(t,e,i)},l.prototype.expandAll=function(t,e){void 0===t&&(t=!0),0<this._view.itemCount&&this._view.expandAll(t,e)},l.prototype.collapseAll=function(t){0<this._view.itemCount&&this._view.collapseAll(t)},l.prototype.layoutExpandAll=function(t){this._view.layoutExpandAll(!0,t)},l.prototype.layoutCollapseAll=function(t){this._view.layoutExpandAll(!1,t)},l.prototype.beginInsertRow=function(t,e){this._view.insertAt(t=void 0===t?-1:t,e)},l.prototype.beginAppendRow=function(){this._view.append()},l.prototype.beginUpdateRow=function(t){var e;this._view.focusedIndex&&(e=this._view.focusedIndex.clone(),void 0!==t&&(e.itemIndex=t),this._view.edit(e))},l.prototype.setPaging=function(t,e,i){this._view.setPaging(t,e=void 0===e?10:e,i=void 0===i?-1:i)},l.prototype.getPage=function(){return this._view.page},l.prototype.setPage=function(t,e){this._view.setPage(t,e=void 0===e?-1:e)},l.prototype.getPageCount=function(){return this._view.pageCount},l.prototype.setPageCount=function(t){this._view.pageCount=t},l.prototype.getPageOfDataRow=function(t){return this._view.getPageOfDataRow(t)},l.prototype.getCheckedItems=function(t){return this._view.getCheckedItemIndices(!(t=void 0===t?!0:t))},l.prototype.getCheckedRows=function(t,e,i){return this._view.getCheckedRows(t=void 0===t?!0:t,e,i)},l.prototype.getMergedItems=function(t,e,i,o){return this._view.getMergedItems(t,e,i=void 0===i?!0:i,o=void 0===o?!0:o)},l.prototype._createView=function(t,e,i){return(this._container=new ki.GridContainer(t,this,e,i)).gridView},l.prototype._createListener=function(t){return new p(this,t)};var r,a=l;function l(t,e,i){t=r.call(this,t,e,i)||this;return t.onPageChanging=null,t.onPageChanged=null,t.onPageCountChanged=null,t.onGrouping=null,t.onGrouped=null,t.onExpanding=null,t.onExpanded=null,t.onCollapsing=null,t.onCollapsed=null,e&&(t.shadowDom=t._view._shadowDom),t}e.GridView=a;h=i,ne.__extends(d,h),_dp(d,"treeOptions",{get:function(){return this._view.treeOptions}}),d.prototype.getTreeOptions=function(){return this._view.treeOptions.toProxy()},d.prototype.setTreeOptions=function(t){this._view.treeOptions.assignFrom(t)},d.prototype.getParent=function(t){t=this._view.getItem(t);return t?t.parentIndex:-1},d.prototype.getChildren=function(t){var e=this._view.getItem(t);if(e){for(var i=[],o=0,n=e.count;o<n;o++)i.push(e.getItem(o).index);return i}return null},d.prototype.getDescendants=function(t){t=this._view.getItem(t);if(t){for(var e=[],i=t.getDescendants(!1),o=0,n=i.length;o<n;o++)e.push(i[o].index);return e}return null},d.prototype.getAncestors=function(t,e){void 0===e&&(e=!0);t=this._view.getItem(t);if(t){for(var i=[],o=t.getAncestors(),n=0,r=o.length;n<r;n++)!e&&o[n]instanceof E.RootTreeItem||i.push(o[n].index);return i}return null},d.prototype.expand=function(t,e,i,o){void 0===o&&(o=0);t=this._view.getItem(t);t&&this._view.expand(t,e,i,o)},d.prototype.expandModel=function(t,e,i,o){void 0===o&&(o=0);t=this._view.getItemOfModel(t);t&&this._view.expand(t,e,i,o)},d.prototype.collapse=function(t,e){t=this._view.getItem(t);t&&this._view.collapse(t,e)},d.prototype.collapseModel=function(t,e){t=this._view.getItemOfModel(t);t&&this._view.collapse(t,e)},d.prototype.expandAll=function(t){this._view.expandAll(t=void 0===t?0:t)},d.prototype.collapseAll=function(){this._view.collapseAll()},d.prototype.getCheckedItems=function(){return this._view.getCheckedItemIndices()},d.prototype.getCheckedRows=function(t){return this._view.getCheckedRowIds(t)},d.prototype.checkChildren=function(t,e,i,o,n,r){void 0===r&&(r=!0);t=this._view.getItem(t);t&&this._view.checkChildren(t,e,i,o,n,r)},d.prototype._createView=function(t,e,i){return(this._container=new Li.TreeContainer(t,this,e,i)).gridView},d.prototype._createListener=function(t){return new m(this,t)};var h,a=d;function d(){var t=null!==h&&h.apply(this,arguments)||this;return t.onTreeItemExpanding=null,t.onTreeItemExpanded=null,t.onTreeItemCollapsing=null,t.onTreeItemCollapsed=null,t.onTreeItemChanged=null,t}e.TreeView=a;u=Pt.EventListenerBase,ne.__extends(c,u),c.prototype.dispose=function(){this._view.removeListener(this),this._view=null,this._del=null},c.prototype.onGridBaseViewActivated=function(t,e){this._del.onViewActivated?this._del.onViewActivated(this._del,e):re.Utils.log("onViewActivated",e)},c.prototype.onGridBaseCurrentChanging=function(t,e,i){return this._del.onCurrentChanging?this._del.onCurrentChanging(this._del,e.proxy(),i.proxy()):(re.Utils.log("onCurrentChanging",e,i),!0)},c.prototype.onGridBaseCurrentChanged=function(t,e){this._del.onCurrentChanged?this._del.onCurrentChanged(this._del,e.proxy()):re.Utils.log("onCurrentChanged",e)},c.prototype.onGridBaseCurrentRowChanged=function(t,e,i){this._del.onCurrentRowChanged?this._del.onCurrentRowChanged(this._del,e,i):re.Utils.log("onCurrentRowChanged",e,i)},c.prototype.onGridBaseValidateCell=function(t,e,i,o){if(this._del.onValidateColumn){var n=e.itemIndex,r=e.item&&e.item.dataRow,i=this._del.onValidateColumn(this._del,e.column,i,o,n,r);if(i&&i.level&&i.message)throw new G.ValidationError(i.level,i.message,e.column,i.message);if("string"==typeof i||"number"==typeof i)throw new G.ValidationError(ht.ValidationLevel.ERROR,i,e.column,i)}},c.prototype.onGridBaseValidateRow=function(t,e,i,o){if(this._del.onValidateRow){e=this._del.onValidateRow(this._del,e.index,e.dataRow,i,o);if(e&&e.level&&e.message)throw new G.ValidationError(e.level,e.message,null,e.message);if("string"==typeof e||"number"==typeof e)throw new G.ValidationError(ht.ValidationLevel.ERROR,e,null,e)}},c.prototype.onGridBaseValidationFail=function(t,e,i,o){return this._del.onValidationFail?(e=this._del.onValidationFail(this._del,e,i,{level:o.level,message:o.message}))&&e.level&&e.message?(o.level=e.level,o.message=e.message,o.userMessage=e.message,o):"string"==typeof e||"number"==typeof e?(o.message=e,o.userMessage=e,o):void 0:o},c.prototype.onGridBaseCellClicked=function(t,e){this._del.onCellClicked?this._del.onCellClicked(this._del,e):re.Utils.log("onCellClicked: ",e)},c.prototype.onGridBaseCellDblClicked=function(t,e){this._del.onCellDblClicked?this._del.onCellDblClicked(this._del,e):re.Utils.log("onCellDblClicked: ",e)},c.prototype.onGridBaseCellItemClicked=function(t,e,i){return this._del.onCellItemClicked?this._del.onCellItemClicked(this._del,e.toProxy(),i):re.Utils.log("onCellItemClicked: ",i)},c.prototype.onGridBaseColumnCheckedChanged=function(t,e,i){this._del.onColumnCheckedChanged?this._del.onColumnCheckedChanged(this._del,e,i):re.Utils.log("onColumnCheckedChanged: ("+e.name+", "+i+")")},c.prototype.onGridBaseMenuItemClicked=function(t,e,i){this._del.onMenuItemClicked?this._del.onMenuItemClicked(this._del,e.toProxy(),i):re.Utils.log("onMenuItemClicked: ",e.toProxy(),i)},c.prototype.onGridBaseContextMenuPopup=function(t,e,i,o){return this._del.onContextMenuPopup?this._del.onContextMenuPopup(this._del,e,i,o):re.Utils.log("onContextMenuPopup: x = ",e,", y = ",i,", clickData =",o)},c.prototype.onGridBaseContextMenuItemClicked=function(t,e,i){this._del.onContextMenuItemClicked?this._del.onContextMenuItemClicked(this._del,e.toProxy(),i):re.Utils.log("onContextMenuItemClicked: ",e.toProxy(),i)},c.prototype.onGridBaseCellButtonClicked=function(t,e){this._del.onCellButtonClicked?this._del.onCellButtonClicked(this._del,e.proxy(),e.column):re.Utils.log("onCellButtonClicked: ",e)},c.prototype.onGridBaseScrollToBottom=function(t){this._del.onScrollToBottom?this._del.onScrollToBottom(this._del):re.Utils.log("onScrollToBottom")},c.prototype.onGridBaseTopIndexChanged=function(t,e){this._del.onTopIndexChanged?this._del.onTopIndexChanged(this._del,e):re.Utils.log("onTopItemIndexChanged: "+e)},c.prototype.onGridBaseTopIndexChanging=function(t,e,i,o,n){return this._del.onTopIndexChanging?this._del.onTopIndexChanging(this._del,e,i,o,n):re.Utils.log("onTopItemIndexChanging: ",e,i,o,n)},c.prototype.onGridBaseRowsDeleting=function(t,e){return this._del.onRowsDeleting?this._del.onRowsDeleting(this._del,e):(re.Utils.log("onRowsDeleting:",e),!0)},c.prototype.onGridBaseRowInserting=function(t,e,i){if(this._del.onRowInserting)return this._del.onRowInserting(this._del,e,i);re.Utils.log("onRowInserting: "+e,i)},c.prototype.onGridBaseSelectionCleared=function(t){this._del.onSelectionCleared?this._del.onSelectionCleared(this._del):re.Utils.log("onSelectionCleared")},c.prototype.onGridBaseSelectionChanged=function(t,e){this._del.onSelectionChanged?this._del.onSelectionChanged(this._del,e):re.Utils.log("onSelectionChanged")},c.prototype.onGridBaseSelectionAdded=function(t,e){this._del.onSelectionAdded?this._del.onSelectionAdded(this._del,e):re.Utils.log("onSelectionAdded: ",e)},c.prototype.onGridBaseSelectionEnded=function(t,e){this._del.onSelectionEnded?this._del.onSelectionEnded(this._del,e):re.Utils.log("onSelectionEnded")},c.prototype.onGridBaseShowEditor=function(t,e,i,o){return this._del.onShowEditor?this._del.onShowEditor(this._del,e.proxy(),i,o):re.Utils.log("onShowEditor",e.proxy(),i,o)},c.prototype.onGridBaseHideEditor=function(t,e){this._del.onHideEditor?this._del.onHideEditor(this._del,e.proxy()):re.Utils.log("onHideEditor: ",e.proxy())},c.prototype.onGridBaseEditChange=function(t,e,i){this._del.onEditChange?this._del.onEditChange(this._del,e.proxy(),i):re.Utils.log("onEditChange: "+i,e.proxy())},c.prototype.onGridBaseGetEditValue=function(t,e,i){this._del.onGetEditValue?this._del.onGetEditValue(this._del,e.proxy(),i):re.Utils.log("onGetEditValue: ",e,i)},c.prototype.onGridBaseEditCommit=function(t,e,i,o){return this._del.onEditCommit?this._del.onEditCommit(this._del,e.proxy(),i,o):(re.Utils.log("onEditCommit",e.proxy(),i,o),!0)},c.prototype.onGridBaseEditCanceled=function(t,e){this._del.onEditCanceled?this._del.onEditCanceled(this._del,e.proxy()):re.Utils.log("onEditCanceled",e.proxy())},c.prototype.onGridBaseItemEditCanceled=function(t,e){this._del.onItemEditCanceled?this._del.onItemEditCanceled(this._del,e.index,e.itemState):re.Utils.log("onItemEditCanceled: "+e.index+", "+e.itemState)},c.prototype.onGridBaseItemEditCancel=function(t,e){return this._del.onItemEditCancel?this._del.onItemEditCancel(this._del,e.index,e.itemState):(re.Utils.log("onItemEditCancel: "+e.index+", "+e.itemState),!0)},c.prototype.onGridBaseEditSearch=function(t,e,i){this._del.onEditSearch?this._del.onEditSearch(this._del,e.proxy(),i):re.Utils.log("onEditSearch: "+i,e.proxy())},c.prototype.onGridBaseSearchCellButtonClick=function(t,e,i){return this._del.onSearchCellButtonClick?this._del.onSearchCellButtonClick(this._del,e.proxy(),i):(re.Utils.log("onSearchCellButtonClick: "+i,e.proxy()),null)},c.prototype.onGridBaseCellEdited=function(t,e,i){return this._del.onCellEdited?this._del.onCellEdited(this._del,e.index,e.dataRow,i):re.Utils.log("onCellEdited: "+e.index+", "+e.dataRow+", "+i)},c.prototype.onGridBaseEditRowChanged=function(t,e,i,o,n){return this._del.onEditRowChanged?this._del.onEditRowChanged(this._del,e.index,e.dataRow,i,o,n):re.Utils.log("onEditRowChanged: "+e.index+", "+e.dataRow+", "+i+", "+o+" => "+n)},c.prototype.onGridBaseEditRowPasted=function(t,e,i,o,n){return this._del.onEditRowPasted?this._del.onEditRowPasted(this._del,e.index,e.dataRow,i,o,n):re.Utils.log("onEditRowPasted: "+e.index+", "+e.dataRow,i,o,n)},c.prototype.onGridBaseRowsPasted=function(t,e){return this._del.onRowsPasted?this._del.onRowsPasted(this._del,e):re.Utils.log("onRowsPasted: ",e)},c.prototype.onGridBaseCellPasting=function(t,e,i){return this._del.onCellPasting?this._del.onCellPasting(this._del,e.proxy(),i):re.Utils.log("onCellPasting: ",e,i)},c.prototype.onGridBaseItemChecked=function(t,e,i){return this._del.onItemChecked?this._del.onItemChecked(this._del,e.index,i):re.Utils.log("onItemChecked",e.index,i)},c.prototype.onGridBaseItemsChecked=function(t,e,i){e=s.getItemIndices(e);return this._del.onItemsChecked?this._del.onItemsChecked(this._del,e,i):re.Utils.log("onItemsChecked: "+i,e)},c.prototype.onGridBaseItemAllChecked=function(t,e){return this._del.onItemAllChecked?this._del.onItemAllChecked(this._del,e):re.Utils.log("onItemAllChecked: "+e)},c.prototype.onGridBaseErrorClicked=function(t,e){this._del.onErrorClicked?this._del.onErrorClicked(this._del,e):re.Utils.log("onErrorClicked: "+e)},c.prototype.onGridBaseSorting=function(t,e,i){for(var o=[],n=0,r=i.length;n<r;n++)o.push(i[n]?i[n].toString():"ascending");return this._del.onSorting?this._del.onSorting(this._del,e,i):re.Utils.log("onSorting: ",e,o)},c.prototype.onGridBaseSortingChanged=function(t){this._del.onSortingChanged?this._del.onSortingChanged(this._del):re.Utils.log("onSortingChanged")},c.prototype.onGridBaseFiltering=function(t){return this._del.onFiltering?this._del.onFiltering(this._del):re.Utils.log("onFiltering")},c.prototype.onGridBaseFilteringChanged=function(t,e,i){var e=e?e.getOwner():null,o=i?i.toProxy():null,n=e?e.name:"",i=i?i.name:"";return this._del.onFilteringChanged?this._del.onFilteringChanged(this._del,e,o):re.Utils.log("onFilteringChanged: "+n+", "+i)},c.prototype.onGridBaseKeyDown=function(t,e){return this._del.onKeyDown?this._del.onKeyDown(this._del,e):re.Utils.keyLog("onKeyDown: "+e)},c.prototype.onGridBaseKeyPress=function(t,e){this._del.onKeyPress?this._del.onKeyPress(this._del,e):re.Utils.keyLog("onKeyPress: "+e)},c.prototype.onGridBaseKeyUp=function(t,e){this._del.onKeyUp?this._del.onKeyUp(this._del,e):re.Utils.keyLog("onKeyUp: "+e)},c.prototype.onGridBaseShowTooltip=function(t,e,i){return this._del.onShowTooltip?this._del.onShowTooltip(this._del,e.proxy(),i):(re.Utils.log("onShowTooltip: "+i,e.proxy()),i)},c.prototype.onGridBaseShowHeaderTooltip=function(t,e,i){return this._del.onShowHeaderTooltip?this._del.onShowHeaderTooltip(this._del,e,i):(re.Utils.log("onShowHeaderTooltip: "+e.name+", "+i),i)},c.prototype.onGridBaseColumnPropertyChanged=function(t,e,i,o,n){this._del.onColumnPropertyChanged?this._del.onColumnPropertyChanged(this._del,e,i,o,n):re.Utils.log("onColumnPropertyChanged: "+e.name+", "+i+", "+o+", "+n)},c.prototype.onGridBaseLayoutPropertyChanged=function(t,e,i,o,n){this._del.onLayoutPropertyChanged?this._del.onLayoutPropertyChanged(this._del,e,i,o,n):re.Utils.log("onLayoutPropertyChanged: "+e.name+", "+i+", "+o+", "+n)},c.prototype.onGridBaseGridActivated=function(t){this._del.onGridActivated?this._del.onGridActivated(this._del):re.Utils.log("onGridActivated")},c.prototype.onGridBasePaste=function(t,e,i){if(this._del.onPaste)return this._del.onPaste(this._del,e.proxy(),i);re.Utils.log("onPaste: ",e)},c.prototype.onGridBaseCopy=function(t,e,i){var o;if(Array.isArray(e)?(o=[],e.forEach(function(t){o.push(t.toProxy())})):o=e.toProxy(),this._del.onCopy)return this._del.onCopy(this._del,o,i);re.Utils.log("onCopy: ",o)},c.prototype.onGridBasePasted=function(t){return this._del.onPasted?this._del.onPasted(this._del):re.Utils.log("onPasted")},c.prototype.onGridBaseCommandStackChanged=function(t,e,i){this._del.onCommandStackChanged?this._del.onCommandStackChanged(t.handler,e,i):re.Utils.log("onCommandStackChanged: undoable "+e+", redoable "+i)},c.prototype.onGridBaseDataLoadComplated=function(t){this._del.onDataLoadComplated?this._del.onDataLoadComplated(t.handler):re.Utils.log("onDataLoadComplated: ")},c.prototype.onGridBaseLayoutExpanding=function(t,e){return this._del.onLayoutExpanding?this._del.onLayoutExpanding(t.handler,e):(re.Utils.log("onLayoutExpanding"),!0)},c.prototype.onGridBaseLayoutExpanded=function(t,e){this._del.onLayoutExpanded?this._del.onLayoutExpanded(t.handler,e):re.Utils.log("onLayoutExpanded")},c.prototype.onGridBaseLayoutCollapsing=function(t,e){return this._del.onLayoutCollapsing?this._del.onLayoutCollapsing(t.handler,e):(re.Utils.log("onLayoutCollapsing"),!0)},c.prototype.onGridBaseLayoutCollapsed=function(t,e){this._del.onLayoutCollapsed?this._del.onLayoutCollapsed(t.handler,e):re.Utils.log("onLayoutCollapsed")};var u,i=c;function c(t,e){var i=u.call(this)||this;return i._del=t,i._view=e,i._view.addListener(i),i}_=i,ne.__extends(f,_),f.prototype.dispose=function(){_.prototype.dispose.call(this)},f.prototype.onGridViewPageChanging=function(t,e){return this._del.onPageChanging?this._del.onPageChanging(this._del,e):(re.Utils.log("onPageChanging:"+e),!0)},f.prototype.onGridViewPageChanged=function(t,e){this._del.onPageChanged?this._del.onPageChanged(this._del,e):re.Utils.log("onPageChanged:"+e)},f.prototype.onGridViewPageCountChanged=function(t,e){this._del.onPageCountChanged?this._del.onPageCountChanged(this._del,e):re.Utils.log("onPageCountChanged:"+e)},f.prototype.onGridViewGrouping=function(t,e){return this._del.onGrouping?this._del.onGrouping(this._del,e):(re.Utils.log("onGrouping",e),!0)},f.prototype.onGridViewGrouped=function(t){this._del.onGrouped?this._del.onGrouped(this._del):re.Utils.log("onGrouped")},f.prototype.onGridViewExpanding=function(t,e){return this._del.onExpanding?this._del.onExpanding(this._del,e.index):(re.Utils.log("onExpanding: "+e.index),!0)},f.prototype.onGridViewExpanded=function(t,e){this._del.onExpanded?this._del.onExpanded(this._del,e.index):re.Utils.log("onExpanded: "+e.index)},f.prototype.onGridViewCollapsing=function(t,e){return this._del.onCollapsing?this._del.onCollapsing(this._del,e.index):(re.Utils.log("onCollapsing: "+e.index),!0)},f.prototype.onGridViewCollapsed=function(t,e){this._del.onCollapsed?this._del.onCollapsed(this._del,e.index):re.Utils.log("onCollapsed: "+e.index)};var _,p=f;function f(t,e){return _.call(this,t,e)||this}g=i,ne.__extends(y,g),y.prototype.dispose=function(){g.prototype.dispose.call(this)},y.prototype.onTreeViewExpanding=function(t,e){return this._del.onTreeItemExpanding?this._del.onTreeItemExpanding(this._del,e.index,e.rowId):(re.Utils.log("TreeItem expanding: "+e),!0)},y.prototype.onTreeViewExpanded=function(t,e){this._del.onTreeItemExpanded?this._del.onTreeItemExpanded(this._del,e.index,e.rowId):re.Utils.log("TreeItem expanded: "+e)},y.prototype.onTreeViewCollapsing=function(t,e){return this._del.onTreeItemCollapsing?this._del.onTreeItemCollapsing(this._del,e.index,e.rowId):(re.Utils.log("TreeItem collapsing: "+e),!0)},y.prototype.onTreeViewCollapsed=function(t,e){this._del.onTreeItemCollapsed?this._del.onTreeItemCollapsed(this._del,e.index,e.rowId):re.Utils.log("TreeItem collapsed: "+e)},y.prototype.onTreeViewChanged=function(t,e){this._del.onTreeItemChanged?this._del.onTreeItemChanged(this._del,e.index,e.rowId):re.Utils.log("TreeItem item changed: "+e)};var g,m=y;function y(t,e){return g.call(this,t,e)||this}})),Vi=(t(Pi),Pi.GridBase,Pi.GridView,Pi.TreeView,e(function(t,e){Object.defineProperty(e,"__esModule",{value:!0});o.getVersion=function(){return h.globalRealGridInfo.version},o.getLicenseType=function(){return h.globalRealGridInfo.license},o.getLicenseCode=function(){return h.globalRealGridInfo.code},o.getActiveGrid=function(){var t=ke.VisualContainer.getActiveGrid();return t&&t.handler},o.getGridInstance=function(t){t=ke.VisualContainer.getGridInstance(t);return t&&t.handler},o.exportGrid=function(t){var e=t&&t.exportGrids;if(e){for(var i=this.getActiveGrid(),o=void 0,n=0;n<e.length;n++){var r=e[n].grid;if(r===i){o=r;break}o=o||r}if(o)return void o.exportGrid(t)}throw new Error("multiExport must have exportGrids.")},o.setDebug=function(t,e,i){re.Utils.setDebugging(t,e,i)},o.setMobile=function(t){re.Utils.setMobile(t)},o.setTablet=function(t){re.Utils.setTablet(t)},Object.defineProperty(o,"GridView",{get:function(){return Pi.GridView}}),Object.defineProperty(o,"TreeView",{get:function(){return Pi.TreeView}}),Object.defineProperty(o,"LocalDataProvider",{get:function(){return Pt.LocalDataProvider}}),Object.defineProperty(o,"LocalTreeDataProvider",{get:function(){return Pt.LocalTreeDataProvider}}),Object.defineProperty(o,"ValueType",{get:function(){return ht.ValueType}});var i=o;function o(){}e.default=i})),Bi=(t(Vi),e(function(t,e){Object.defineProperty(e,"__esModule",{value:!0});var i=ne.__importDefault(Vi);a.defineProp;e.default=i.default}));return t(Bi)}();
