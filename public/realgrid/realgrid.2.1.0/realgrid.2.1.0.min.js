/** 
 * RealGridJS v2.1.0.1223
 * Copyright (C) 2013-2020 WooriTech Inc.
 * All Rights Reserved.
 */
var RealGrid=function(){"use strict";var i="undefined"!=typeof globalThis?globalThis:"undefined"!=typeof window?window:"undefined"!=typeof global?global:"undefined"!=typeof self?self:{};function t(t){return t&&t.__esModule&&Object.prototype.hasOwnProperty.call(t,"default")?t.default:t}function e(t,e){return t(e={exports:{}},e.exports),e.exports}var n=e(function(t,e){Object.defineProperty(e,"__esModule",{value:!0}),e.defineProp=function(t,e,i){i.enumerable=!0,i.configurable=!0,Object.defineProperty(t.prototype,e,i)},i._dp=e.defineProp});t(n);n.defineProp;var d=e(function(t,e){var i;Object.defineProperty(e,"__esModule",{value:!0}),(i=e.LicenseType||(e.LicenseType={})).Developer="developer",i.Evaluation="evaluation",i.Limited="limited",i.Enterprise="enterprise",e.globalRealGridInfo={name:"RealGrid",version:"2.1.0.1223",license:"enterprise",code:null},e.licenseNo=""});t(d);d.LicenseType,d.globalRealGridInfo,d.licenseNo;var o=function(t,e){return(o=Object.setPrototypeOf||{__proto__:[]}instanceof Array&&function(t,e){t.__proto__=e}||function(t,e){for(var i in e)e.hasOwnProperty(i)&&(t[i]=e[i])})(t,e)};var r=function(){return(r=Object.assign||function(t){for(var e,i=1,o=arguments.length;i<o;i++)for(var n in e=arguments[i])Object.prototype.hasOwnProperty.call(e,n)&&(t[n]=e[n]);return t}).apply(this,arguments)};function s(t){var e="function"==typeof Symbol&&Symbol.iterator,i=e&&t[e],o=0;if(i)return i.call(t);if(t&&"number"==typeof t.length)return{next:function(){return t&&o>=t.length&&(t=void 0),{value:t&&t[o++],done:!t}}};throw new TypeError(e?"Object is not iterable.":"Symbol.iterator is not defined.")}function a(t,e){var i="function"==typeof Symbol&&t[Symbol.iterator];if(!i)return t;var o,n,r=i.call(t),s=[];try{for(;(void 0===e||0<e--)&&!(o=r.next()).done;)s.push(o.value)}catch(t){n={error:t}}finally{try{o&&!o.done&&(i=r.return)&&i.call(r)}finally{if(n)throw n.error}}return s}function u(t){return this instanceof u?(this.v=t,this):new u(t)}var oe=Object.freeze({__proto__:null,__extends:function(t,e){function i(){this.constructor=t}o(t,e),t.prototype=null===e?Object.create(e):(i.prototype=e.prototype,new i)},get __assign(){return r},__rest:function(t,e){var i={};for(var o in t)Object.prototype.hasOwnProperty.call(t,o)&&e.indexOf(o)<0&&(i[o]=t[o]);if(null!=t&&"function"==typeof Object.getOwnPropertySymbols){var n=0;for(o=Object.getOwnPropertySymbols(t);n<o.length;n++)e.indexOf(o[n])<0&&Object.prototype.propertyIsEnumerable.call(t,o[n])&&(i[o[n]]=t[o[n]])}return i},__decorate:function(t,e,i,o){var n,r=arguments.length,s=r<3?e:null===o?o=Object.getOwnPropertyDescriptor(e,i):o;if("object"==typeof Reflect&&"function"==typeof Reflect.decorate)s=Reflect.decorate(t,e,i,o);else for(var a=t.length-1;0<=a;a--)(n=t[a])&&(s=(r<3?n(s):3<r?n(e,i,s):n(e,i))||s);return 3<r&&s&&Object.defineProperty(e,i,s),s},__param:function(i,o){return function(t,e){o(t,e,i)}},__metadata:function(t,e){if("object"==typeof Reflect&&"function"==typeof Reflect.metadata)return Reflect.metadata(t,e)},__awaiter:function(t,s,a,l){return new(a=a||Promise)(function(i,e){function o(t){try{r(l.next(t))}catch(t){e(t)}}function n(t){try{r(l.throw(t))}catch(t){e(t)}}function r(t){var e;t.done?i(t.value):((e=t.value)instanceof a?e:new a(function(t){t(e)})).then(o,n)}r((l=l.apply(t,s||[])).next())})},__generator:function(i,o){var n,r,s,t,a={label:0,sent:function(){if(1&s[0])throw s[1];return s[1]},trys:[],ops:[]};return t={next:e(0),throw:e(1),return:e(2)},"function"==typeof Symbol&&(t[Symbol.iterator]=function(){return this}),t;function e(e){return function(t){return function(e){if(n)throw new TypeError("Generator is already executing.");for(;a;)try{if(n=1,r&&(s=2&e[0]?r.return:e[0]?r.throw||((s=r.return)&&s.call(r),0):r.next)&&!(s=s.call(r,e[1])).done)return s;switch(r=0,s&&(e=[2&e[0],s.value]),e[0]){case 0:case 1:s=e;break;case 4:return a.label++,{value:e[1],done:!1};case 5:a.label++,r=e[1],e=[0];continue;case 7:e=a.ops.pop(),a.trys.pop();continue;default:if(!(s=0<(s=a.trys).length&&s[s.length-1])&&(6===e[0]||2===e[0])){a=0;continue}if(3===e[0]&&(!s||e[1]>s[0]&&e[1]<s[3])){a.label=e[1];break}if(6===e[0]&&a.label<s[1]){a.label=s[1],s=e;break}if(s&&a.label<s[2]){a.label=s[2],a.ops.push(e);break}s[2]&&a.ops.pop(),a.trys.pop();continue}e=o.call(i,a)}catch(t){e=[6,t],r=0}finally{n=s=0}if(5&e[0])throw e[1];return{value:e[0]?e[1]:void 0,done:!0}}([e,t])}}},__exportStar:function(t,e){for(var i in t)e.hasOwnProperty(i)||(e[i]=t[i])},__values:s,__read:a,__spread:function(){for(var t=[],e=0;e<arguments.length;e++)t=t.concat(a(arguments[e]));return t},__spreadArrays:function(){for(var t=0,e=0,i=arguments.length;e<i;e++)t+=arguments[e].length;var o=Array(t),n=0;for(e=0;e<i;e++)for(var r=arguments[e],s=0,a=r.length;s<a;s++,n++)o[n]=r[s];return o},__await:u,__asyncGenerator:function(t,e,i){if(!Symbol.asyncIterator)throw new TypeError("Symbol.asyncIterator is not defined.");var n,r=i.apply(t,e||[]),s=[];return n={},o("next"),o("throw"),o("return"),n[Symbol.asyncIterator]=function(){return this},n;function o(o){r[o]&&(n[o]=function(i){return new Promise(function(t,e){1<s.push([o,i,t,e])||a(o,i)})})}function a(t,e){try{(i=r[t](e)).value instanceof u?Promise.resolve(i.value.v).then(l,h):d(s[0][2],i)}catch(t){d(s[0][3],t)}var i}function l(t){a("next",t)}function h(t){a("throw",t)}function d(t,e){t(e),s.shift(),s.length&&a(s[0][0],s[0][1])}},__asyncDelegator:function(o){var t,n;return t={},e("next"),e("throw",function(t){throw t}),e("return"),t[Symbol.iterator]=function(){return this},t;function e(e,i){t[e]=o[e]?function(t){return(n=!n)?{value:u(o[e](t)),done:"return"===e}:i?i(t):t}:i}},__asyncValues:function(l){if(!Symbol.asyncIterator)throw new TypeError("Symbol.asyncIterator is not defined.");var t,e=l[Symbol.asyncIterator];return e?e.call(l):(l=s(l),t={},i("next"),i("throw"),i("return"),t[Symbol.asyncIterator]=function(){return this},t);function i(a){t[a]=l[a]&&function(s){return new Promise(function(t,e){var i,o,n,r;s=l[a](s),i=t,o=e,n=s.done,r=s.value,Promise.resolve(r).then(function(t){i({value:t,done:n})},o)})}}},__makeTemplateObject:function(t,e){return Object.defineProperty?Object.defineProperty(t,"raw",{value:e}):t.raw=e,t},__importStar:function(t){if(t&&t.__esModule)return t;var e={};if(null!=t)for(var i in t)Object.hasOwnProperty.call(t,i)&&(e[i]=t[i]);return e.default=t,e},__importDefault:function(t){return t&&t.__esModule?t:{default:t}},__classPrivateFieldGet:function(t,e){if(!e.has(t))throw new TypeError("attempted to get private field on non-instance");return e.get(t)},__classPrivateFieldSet:function(t,e,i){if(!e.has(t))throw new TypeError("attempted to set private field on non-instance");return e.set(t,i),i}}),lt=e(function(t,e){var i,o,n,r,s,a,l,h,d,u;Object.defineProperty(e,"__esModule",{value:!0}),e.T_HASH="$_hash",e.T_VIEW="$_view",e.T_ROW="$_row",e.T_FIX="$_fix",e.T_HEI="$_hei",e.T_IDX="$_idx",e.T_FOC="$_foc",e.T_LEV="$_lev",(i=e.ValueType||(e.ValueType={})).TEXT="text",i.NUMBER="number",i.BOOLEAN="boolean",i.DATETIME="datetime",i.OBJECT="object",i.CHAR="char",i.UNUM="unum",i.INT="int",i.UINT="uint",i.DATE="date",(o=e.SortDirection||(e.SortDirection={})).ASCENDING="ascending",o.DESCENDING="descending",o.NONE="none",(n=e.SortCase||(e.SortCase={})).SENSITIVE="sensitive",n.INSENSITIVE="insensitive",(r=e.PagingSource||(e.PagingSource={})).ROWS="rows",r.ITEMS="items",(s=e.SortMode||(e.SortMode={})).AUTO="auto",s.EXPLICIT="explicit",(a=e.FilterMode||(e.FilterMode={})).AUTO="auto",a.EXPLICIT="explicit",(h=l=e.RowGroupAdornments||(e.RowGroupAdornments={})).NONE="none",h.HEADER="header",h.FOOTER="footer",h.SUMMARY="summary",h.BOTH="both",e.isHeaderAdornment=function(t){return t==l.BOTH||t==l.HEADER},e.isFooterAdornment=function(t){return t==l.BOTH||t==l.FOOTER},e.isFooterOnlyAdornment=function(t){return t==l.FOOTER||t==l.SUMMARY},(d=e.ValidationMode||(e.ValidationMode={})).ALWAYS="always",d.UPDATE="update",d.INSERT="insert",(u=e.ValidationLevel||(e.ValidationLevel={})).ERROR="error",u.WARNING="warning",u.INFO="info",u.IGNORE="ignore";var _,c,p,f,g,m,y,v,w,C,x,b,I,E,S,R,D,T,k,M,L={error:1,warning:2,info:3,ignore:4};e.ValidationLevel_compare=function(t,e){return L[t]-L[e]},(_=e.SummaryMode||(e.SummaryMode={})).NONE="none",_.AGGREGATE="aggregate",_.STATISTICAL="statistical",(c=e.ColumnHeaderItemLocation||(e.ColumnHeaderItemLocation={})).NONE="none",c.LEFT_EDGE="leftEdge",c.RIGHT_EDGE="rightEdge",c.TOP_EDGE="topEdge",c.BOTTOM_EDGE="bottomEdge",c.LEFT="left",c.RIGHT="right",c.TOP="top",c.BOTTOM="bottom",c.CENTER="center",(p=e.BlankState||(e.BlankState={})).NONE="none",p.HEAD="head",p.BODY="body",p.TAIL="tail",(f=e.GridFitStyle||(e.GridFitStyle={})).NONE="none",f.EVEN="even",f.EVEN_FILL="evenFill",f.FILL="fill",(g=e.RowMaskType||(e.RowMaskType={})).NONE="none",g.ROW="row",g.DATA="data",g.FILL="fill",g.CELL="cell",(m=e.TextInputCase||(e.TextInputCase={})).NORMAL="normal",m.UPPER="upper",m.LOWER="lower",m.DEFAULT="default",(y=e.Alignment||(e.Alignment={})).NEAR="near",y.CENTER="center",y.FAR="far",(v=e.DefaultShowDate||(e.DefaultShowDate={})).NORMAL="normal",v.TODAY="today",v.TODAY_WHEN_NULL="todayWhenNull",(w=e.SortStyle||(e.SortStyle={})).NONE="none",w.EXCLUSIVE="exclusive",w.INCLUSIVE="inclusive",w.REVERSE="reverse",(C=e.MenuItemType||(e.MenuItemType={})).NORMAL="normal",C.CHECK="check",C.RADIO="radio",C.SEPARATOR="separator",(x=e.HandleVisibility||(e.HandleVisibility={})).VISIBLE="visible",x.HOVERED="hovered",x.ALWAYS="always",x.HIDDEN="hidden",(b=e.CellButton||(e.CellButton={})).NONE="none",b.ACTION="action",b.POPUP="popup",(I=e.ButtonVisibility||(e.ButtonVisibility={})).ALWAYS="always",I.DEFAULT="default",I.VISIBLE="visible",I.HIDDEN="hidden",I.ROWFOCUSED="rowfocused",(E=e.IconLocation||(e.IconLocation={})).LEFT="left",E.RIGHT="right",E.LEFT_EDGE="leftEdge",E.RIGHT_EDGE="rightEdge",E.TOP="top",E.BOTTOM="bottom",E.TOP_EDGE="topEdge",E.BOTTOM_EDGE="bottomEdge",E.CENTER="center",(S=e.RefreshMode||(e.RefreshMode={})).ALL="all",S.VISIBLE_ONLY="visibleOnly",(R=e.ScrollOnEditing||(e.ScrollOnEditing={})).CANCEL="cancel",R.COMMIT="commit",R.DEFAULT="default",(D=e.ItemType||(e.ItemType={})).ROW="row",D.GROUP="group",D.FOOTER="footer",D.TREE="tree",(T=e.SummaryType||(e.SummaryType={})).COUNT="count",T.SUM="sum",T.MAX="max",T.MIN="min",T.AVG="avg",T.VAR="var",T.VARP="varp",T.STDEV="stdev",T.STDEVP="stdevp",T.DATACOUNT="datacount",T.DATAAVG="dataavg",(k=e.ExpanderVisibility||(e.ExpanderVisibility={})).ALWAYS="always",k.DEFAULT="default",k.NONE="none",(M=e.ExitGridWhenTab||(e.ExitGridWhenTab={})).ROW="row",M.GRID="grid",M.NONE="none"});t(lt);lt.T_HASH,lt.T_VIEW,lt.T_ROW,lt.T_FIX,lt.T_HEI,lt.T_IDX,lt.T_FOC,lt.T_LEV,lt.ValueType,lt.SortDirection,lt.SortCase,lt.PagingSource,lt.SortMode,lt.FilterMode,lt.RowGroupAdornments,lt.isHeaderAdornment,lt.isFooterAdornment,lt.isFooterOnlyAdornment,lt.ValidationMode,lt.ValidationLevel,lt.ValidationLevel_compare,lt.SummaryMode,lt.ColumnHeaderItemLocation,lt.BlankState,lt.GridFitStyle,lt.RowMaskType,lt.TextInputCase,lt.Alignment,lt.DefaultShowDate,lt.SortStyle,lt.MenuItemType,lt.HandleVisibility,lt.CellButton,lt.ButtonVisibility,lt.IconLocation,lt.RefreshMode,lt.ScrollOnEditing,lt.ItemType,lt.SummaryType,lt.ExpanderVisibility,lt.ExitGridWhenTab;var ht=e(function(t,e){Object.defineProperty(e,"__esModule",{value:!0});var i=(_dp(o,"left",{get:function(){return this.x},set:function(t){var e=t-this.x;this.x+=e,this.width-=e}}),_dp(o,"right",{get:function(){return this.x+this.width},set:function(t){var e=t-(this.x+this.width);this.width+=e}}),_dp(o,"top",{get:function(){return this.y},set:function(t){var e=t-this.y;this.y+=e,this.height-=e}}),_dp(o,"bottom",{get:function(){return this.y+this.height},set:function(t){var e=t-(this.y+this.height);this.height+=e}}),_dp(o,"isEmpty",{get:function(){return 0===this.width||0===this.height}}),o.prototype.clone=function(){return new o(this.x,this.y,this.width,this.height)},o.prototype.getInner=function(){return new o(0,0,this.width,this.height)},o.prototype.equals=function(t){return t===this||t&&this.x===t.x&&this.y===t.y&&this.width===t.width&&this.height===t.height},o.prototype.leftBy=function(t){return this.x+=t,this.width-=t,this},o.prototype.rightBy=function(t){return this.width+=t,this},o.prototype.topBy=function(t){return this.y+=t,this.height-=t,this},o.prototype.bottomBy=function(t){return this.height+=t,this},o.prototype.shrink=function(t,e){return this.width-=t,this.height-=e,this},o.prototype.expand=function(t,e){return this.width+=t,this.height+=e,this},o.prototype.contains=function(t,e){return t>=this.x&&t<=this.x+this.width&&e>=this.y&&e<=this.y+this.height},o.prototype.setEmpty=function(){return this.width=this.height=0,this},o.prototype.move=function(t,e){return void 0===t&&(t=0),void 0===e&&(e=0),this.x=t,this.y=e,this},o.prototype.set=function(t,e,i,o){return this.x=t,this.y=e,this.width=i,this.height=o,this},o.prototype.setWidth=function(t){return this.width=t,this},o.prototype.copy=function(t){return this.x=t.x,this.y=t.y,this.width=t.width,this.height=t.height,this},o.prototype.copyHorz=function(t){return this.x=t.x,this.width=t.width,this},o.prototype.copyVert=function(t){return this.y=t.y,this.height=t.height,this},o.prototype.inflate=function(t,e,i,o){return void 0===t&&(t=0),void 0===e&&(e=void 0),void 0===i&&(i=void 0),void 0===o&&(o=void 0),e=void 0!==e?e:t,i=void 0!==i?i:t,o=void 0!==o?o:e,t&&(this.left=this.x-t),e&&(this.top=this.y-e),i&&(this.right=this.right+i),o&&(this.bottom=this.bottom+o),this},o.prototype.offset=function(t,e){return this.x+=t,this.y+=e,this},o.prototype.round=function(){var t=this.clone();return t.x>>>=0,t.y>>>=0,t.width>>>=0,t.height>>>=0,t},o.prototype.union=function(t){var e=this.clone();return e.left=Math.min(this.x,t.x),e.right=Math.max(this.right,t.right),e.top=Math.min(this.y,t.y),e.bottom=Math.max(this.bottom,t.bottom),e},o.prototype.normalize=function(){return this.width<0&&(this.x-=this.width,this.width*=-1),this.height<0&&(this.y-=this.height,this.height*=-1),this},o.prototype.toString=function(){return"{x: "+this.x+", y: "+this.y+", width: "+this.width+", height: "+this.height+"}"},o.Temp=new o,o);function o(t,e,i,o){void 0===t&&(t=0),void 0===e&&(e=0),void 0===i&&(i=0),void 0===o&&(o=0),this.x=t,this.y=e,this.width=i,this.height=o}e.Rectangle=i});t(ht);ht.Rectangle;var ne=e(function(t,e){Object.defineProperty(e,"__esModule",{value:!0});var i=navigator.userAgent,o=0<=navigator.platform.toUpperCase().indexOf("MAC"),n=!!window.opera||0<=i.indexOf(" OPR/"),r=!!window.whale,s=!!window.chrome&&!n,a=void 0!==window.InstallTrigger,l=0<Object.prototype.toString.call(HTMLElement).indexOf("Constructor")||!s&&!n&&0<=i.indexOf("Safari"),h=l&&("Win32"==navigator.platform||0<=i.indexOf("Windows")),d=0<=i.toLowerCase().indexOf("edge/"),u=/iPad|iPhone|iPod/.test(i)&&!window.MSStream,_=0<=i.toLowerCase().indexOf("edg/")&&0<=i.toLowerCase().indexOf("chrome/"),c=function(){for(var t=3,e=document.createElement("div"),i=e.getElementsByTagName("i");e.innerHTML="\x3c!--[if gt IE "+ ++t+"]><i></i><![endif]--\x3e",i[0];);return 4<t?t:void 0}(),p=void 0!==c&&c<=9,f=void 0!==c&&c<=8,g=!!i.match(/Trident.*rv\:11\./),m=-1!==navigator.appVersion.indexOf("MSIE 10"),y=-1!==navigator.appVersion.indexOf("MSIE 9"),v=g||m||y,w=(new Date).getTime(),C=void 0,x=void 0;function b(t){return t.defaultView||t.parentWindow}e.getWin=function(t){return t&&t.ownerDocument&&(t.ownerDocument.defaultView||t.ownerDocument.parentWindow)},e.getDoc=function(t){return t&&t.ownerDocument},e.getDocWin=b;var I=(E.stopEvent=function(t,e){void 0===e&&(e=!1),t.preventDefault?(t.preventDefault(),t.stopPropagation()):t.returnValue=!1,e&&t.stopImmediatePropagation()},E.setDebugging=function(t,e,i){E.$$_trace=t,E.$$_debugging=e,E.$$_keyLog=i},E.isDebugging=function(){return E.$$_debugging},E.isTrace=function(){return this.$$_trace},E.log=function(t){for(var e=[],i=1;i<arguments.length;i++)e[i-1]=arguments[i];E.isDebugging()&&console.log(t,e)},E.keyLog=function(t){for(var e=[],i=1;i<arguments.length;i++)e[i-1]=arguments[i];E.$$_keyLog&&console.log(t,e)},E.trace=function(t){for(var e=[],i=1;i<arguments.length;i++)e[i-1]=arguments[i];E.isTrace()&&console.log(t,e)},E.isArray=function(t){return Array.isArray(t)},E.makeArray=function(t,e){return void 0===e&&(e=!1),null!=t?E.isArray(t)?t:[t]:e?[]:void 0},E.isNumber=function(t){return"number"==typeof t},E.getTimer=function(){return(new Date).getTime()-w},E.isWhiteSpace=function(t){return!t||!t.trim()},E.pad=function(t,e,i){return e=Math.max(e||2,1),i=i||"0",new Array(e-String(t).length+1).join(i)+t},E.pick=function(){for(var t=[],e=0;e<arguments.length;e++)t[e]=arguments[e];for(var i,o=t.length,n=0;n<o;n++)if(null!=(i=t[n]))return i},E.included=function(t){for(var e=[],i=1;i<arguments.length;i++)e[i-1]=arguments[i];for(var o=e.length,n=0;n<o;n++)if(e[n]==t)return!0;return!1},E.compareTextValue=function(t,e,i,o){if(t===e)return!0;var n=String(t),r=null==e?void 0:String(e);return!n&&!r||!(!n||!r)&&(i||(n=n.toLowerCase(),r=r.toLowerCase()),o?0<=r.indexOf(n):n==r)},E.cast=function(t,e){return t instanceof e?t:null},E.irandom=function(t,e){if(void 0!==e){var i=Math.floor(t),o=Math.floor(e);return Math.floor(Math.random()*(o-i)+i)}var n=Math.floor(t);return Math.floor(Math.random()*n)},E.brandom=function(){return.5<Math.random()},E.erandom=function(t){return Object.keys(t)},E.alert=function(t){window.alert(t)},E.toInt=function(t,e){var i=parseInt(t,e||10);return isNaN(i)?0:i},E.toFloat=function(t){var e=parseFloat(t);return isNaN(e)?0:e},E.toArray=function(t){return t instanceof Array?t:null!=t?[t]:null},E.hex=function(t,e,i){void 0===e&&(e=2),void 0===i&&(i="0"),e=Math.max(e||2,1);var o=t.toString(16);return i=i||"0",new Array(e-o.length+1).join(i)+o},E.getBounds=function(t){var e=new ht.Rectangle;return e.x=t.offsetLeft,e.y=t.offsetTop,e.width=t.offsetWidth,e.height=t.offsetHeight,e},E.toStr=function(t){return"number"==typeof t?isNaN(t)?"":String(t):null!=t?String(t):""},E._included=function(t){for(var e=arguments,i=e.length,o=1;o<i;o++)if(e[o]==t)return!0;return!1},E.setBounds=function(t,e,i,o,n){var r=t.style;r.left=e+"px",r.top=i+"px",r.width=o+"px",r.height=n+"px"},E.getClientRect=function(t){var e=t.getBoundingClientRect();return e.cx=t.offsetLeft,e.cy=t.offsetTop,e},E.getChildIndex=function(t){if(t){var e=t.parentNode;if(e)for(var i=e.children,o=i.length;o--;)if(i[o]===t)return o}return-1},E.clearChildren=function(t){for(var e;e=t.lastChild;)t.removeChild(e)},E.clearElements=function(t){for(var e;e=t.lastChild;)E.clearElements(e),t.removeChild(e)},E.addChild=function(t,e){return!(!t||!e||e.parentNode===t||(t.appendChild(e),0))},E.removeChild=function(t,e){return!(!t||!e||e.parentNode!==t||(t.removeChild(e),0))},E.disableSelection=function(t){var e=t.style;e["-moz-user-select"]="-moz-none",e["-khtml-user-select"]="none",e["-webkit-user-select"]="none",e["-o-user-select"]="none",e["-ms-user-select"]="none",e["user-select"]="none"},E.setMobile=function(t){C=t},E.isMobile=function(){return void 0!==C?C:(void 0===x&&(x=this.$_checkMobile()),x)},E.$_checkMobile=function(){var t=!1,e=navigator.userAgent;return(e.match(/Android/i)||e.match(/webOS/i)||e.match(/iPhone/i)||e.match(/iPad/i)||e.match(/iPod/i)||e.match(/BlackBerry/i)||e.match(/Windows Phone/i))&&(t=!0),t=t||"ontouchstart"in window&&0<=e.indexOf("Macintosh")},E.getBrowserSize=function(t){var e=t?t.ownerDocument:document,i=e.defaultView;return{width:i.innerWidth||e.documentElement.clientWidth||e.body.clientWidth,height:i.innerHeight||e.documentElement.clientHeight||e.body.clientHeight}},E.move=function(t,e,i){t.style.left=e+"px",t.style.top=i+"px"},E.htmlEncode=function(t){return document.createElement("a").appendChild(document.createTextNode(t)).parentNode.innerHTML},E.detach=function(t){t&&t.parentNode&&t.parentNode.removeChild(t)},E.getSize=function(t){var e=t.getBoundingClientRect();return{width:e.width,height:e.height}},E.getScrolled=function(t){var e=t.body,i=b(t),o=t.documentElement;return{sx:i.pageXOffset||o.scrollLeft||e.scrollLeft,sy:i.pageYOffset||o.scrollTop||e.scrollTop}},E.getOffset=function(t){var e=t.ownerDocument,i=e.defaultView,o=t.getBoundingClientRect(),n=e.body,r=e.documentElement,s=i.pageYOffset||r.scrollTop||n.scrollTop,a=i.pageXOffset||r.scrollLeft||n.scrollLeft,l=r.clientTop||n.clientTop||0,h=r.clientLeft||n.clientLeft||0,d=o.left+a-h,u=o.top+s-l;return{x:Math.round(d),y:Math.round(u)}},E.isAncestorOf=function(t,e){for(var i=e.parentElement;i;){if(i==t)return!0;i=i.parentElement}return!1},E.equalNumbers=function(t,e){return isNaN(t)==isNaN(e)&&!isNaN(t)&&t==e},E.equalArrays=function(t,e){if(t===e)return!0;if(null==t||null==e)return!1;var i=t.length;if(i!=e.length)return!1;for(var o=0;o<i;++o)if(t[o]!==e[o])return!1;return!0},E.isLeapYear=function(t){return t%4==0&&t%100!=0||t%400==0},E.incMonth=function(t,e){var i=t.getDate();return t.setDate(1),t.setMonth(t.getMonth()+e),t.setDate(Math.min(i,E.month_days[E.isLeapYear(t.getFullYear())?1:0][t.getMonth()])),t},E.minDate=function(t,e){return null!==t||null===e&&t.getTime()<e.getTime()?t:e},E.maxDate=function(t,e){return null===t&&(null!==e||t.getTime()>e.getTime())?t:e},E.setClassName=function(t,e){e!=t.className&&(t.className=e)},E.addClassName=function(t,e){if(t.classList)t.classList.add(e);else{var i=t.className.split(" ");i.indexOf(e)<0&&i.push(e),t.className=i.join(" ")}},E.removeClassName=function(t,e){if(t.classList)t.classList.remove(e);else{var i,o=t.className.split(" ");0<=(i=o.indexOf(e))&&o.splice(i,1),t.className=o.join(" ")}},E.getBoundingClientRect2=function(t){var e=t.getBoundingClientRect();return{left:e.left,right:e.right,width:e.right-e.left,top:e.top,bottom:e.bottom,height:e.bottom-e.top}},E.getTextLength=function(t){for(var e=0,i=0,o=0;o=t.charCodeAt(i++);e+=o>>7?2:1);return e},E.getClassName=function(t){if(t&&t.constructor)return t.constructor.name||(e=t.constructor,i=(i=(i=e.toString()).substr("function ".length)).substr(0,i.indexOf("(")));var e,i},E.isInteger=function(t){return Number.isInteger?Number.isInteger(t):"number"==typeof t&&isFinite(t)&&Math.floor(t)===t},E.setTextProp=function(t){t.textProp=this.ieAll?"textContent":"innerText"},E.isEmpty=function(t){if(t)for(var e in t)return!1;return!0},E.isPassive=function(){if(null===E.$_supportPassive){E.$_supportPassive=!1;try{addEventListener("test",null,Object.defineProperty({},"passive",{get:function(){E.$_supportPassive=!0}}))}catch(t){}}return E.$_supportPassive},E.isIE=v,E.isEdge=d,E.ieAll=v||d,E.ieOld=p,E.isMac=o,E.isSafari=l,E.isWinSafari=h,E.isChrome=s,E.isFirefox=a,E.isOpera=n,E.ieLeg=f,E.ieTen=m,E.ieNine=y,E.isiOS=u,E.isChromium=s||_||r||n,E.TextProp=E.ieAll?"innerText":"textContent",E.week_days=window.RG_CONST&&window.RG_CONST.WEEKDAYS?window.RG_CONST.WEEKDAYS:["일","월","화","수","목","금","토"],E.month_days=[[31,28,31,30,31,30,31,31,30,31,30,31],[31,29,31,30,31,30,31,31,30,31,30,31]],E.colonreg=/;(?=(?:[^"]*"[^"]*")*(?![^"]*"))/,E.$_INVISIBLE_EDIT_BOUNDS=new ht.Rectangle(-1e4,-1e4,100,100),E.$$_debugging=!1,E.$$_keyLog=!1,E.$$_trace=null,E.$_supportPassive=null,E);function E(){}e.Utils=I});t(ne);ne.getWin,ne.getDoc,ne.getDocWin,ne.Utils;var I=e(function(t,e){var i,o;Object.defineProperty(e,"__esModule",{value:!0}),(o=i=e.RowState||(e.RowState={})).NONE="none",o.CREATED="created",o.UPDATED="updated",o.DELETED="deleted",o.CREATE_AND_DELETED="createAndDeleted",e.isDeletedState=function(t){return t==i.DELETED||t==i.CREATE_AND_DELETED}});t(I);I.RowState,I.isDeletedState;var O=e(function(t,e){Object.defineProperty(e,"__esModule",{value:!0});var i=(_dp(o,"format",{get:function(){return this._format},set:function(t){t!=this._format&&(this._format=t,this.parse(t))}}),o.prototype.toBool=function(t){if(this._values&&t){var e=this._sensitive?t:t.toLowerCase();if(e in this._values)return this._values[e]}return!1},o.prototype.toBoolEx=function(t){var e=this._sensitive?t:t.toLowerCase();return this._values&&e in this._values?this._values[e]:e?Boolean(e):void 0},o.prototype.toBoolStrict=function(t){if(this._values&&t){var e=this._sensitive?t:t.toLowerCase();if(e in this._values)return this._values[e]}},o.prototype.toText=function(t){return t?this._trueText:this._falseText},o.prototype.parse=function(t){if(t){var e,i,o,n,r=t.split(/[;\:]/),s=!0;for(o=(e=r[0])?e.split(","):null,1<r.length&&(n=(e=r[1])?e.split(","):null),2<r.length&&"0"==(e=r[2].trim())&&(s=!1),this._values={},this._sensitive=s,i=0;i<o.length;i++)e=o[i],this._values[s?e:e.toLowerCase()]=!1;for(i=0;i<n.length;i++)e=n[i],this._values[s?e:e.toLowerCase()]=!0;this._trueText=n&&0<n.length?n[0]:"true",this._falseText=o&&0<o.length?o[0]:"false"}else this._values={},this._values.true=!0,this._values.false=!1,this._trueText="true",this._falseText="false"},o.Default=new o("false,f,0:true,t,1:0"),o);function o(t){this._format="",this.format=t}e.BooleanConverter=i});t(O);O.BooleanConverter;var l=e(function(t,e){Object.defineProperty(e,"__esModule",{value:!0});var i=(_dp(m,"format",{get:function(){return this._format},set:function(t){if(t!=this._format){if(!t)throw new Error("Invalid empty date format");this._format=t,this.parseFormat(t)}}}),_dp(m,"baseYear",{get:function(){return this._baseYear},set:function(t){t!=this._baseYear&&(this._baseYear=t)}}),_dp(m,"amText",{get:function(){return this._amText},set:function(t){t!=this._amText&&(this._amText=t)}}),_dp(m,"pmText",{get:function(){return this._pmText},set:function(t){t!=this._pmText&&(this._pmText=t)}}),m.prototype.parse=function(t){try{for(var e=0,i=1,o=1,n=0,r=0,s=0,a=0,l=0,h=0,d=this._patterns.length,u=0,_=t.length,c=0;c<d&&u<_;c++){var p=this._patterns[c],f=p.c,g=p.len;switch(f){case"y":e=parseInt(t.substr(u,g));break;case"M":i=parseInt(t.substr(u,g));break;case"d":o=parseInt(t.substr(u,g));break;case"a":if(this._amText&&t.indexOf(this._amText,u)==u)l=12,g=this._amText.length;else{if(!this._pmText||t.indexOf(this._pmText,u)!=u)return null;h=12,g=this._pmText.length}break;case"H":case"h":n=parseInt(t.substr(u,g));break;case"m":r=parseInt(t.substr(u,g));break;case"s":s=parseInt(t.substr(u,g));break;case"S":a=parseInt(t.substr(u,g));break;case".":case"/":case"-":case":":case" ":if(m.DATE_SEPARATORS.indexOf(t.charAt(u))<0)return null;break;default:return null}u+=g}return e<100&&(e+=this._baseYear),0<l?12==n&&(n=0):0<h&&n<12&&(n+=12),new Date(e,i-1,o,n,r,s,a)}catch(t){return null}},m.prototype.parseFormat=function(t){var e,i,o,n=t,r=n.length,s=0;for(this._patterns=[];s<r;)if(e=s,i=n.charAt(s),ne.Utils.isWhiteSpace(i)){for(s++;s<r&&ne.Utils.isWhiteSpace(n.charAt(s));)s++;this._patterns.push({c:" ",p:e,len:s-e})}else{switch(o=0,i){case"y":4!=(o=this.getPattern(n,s,i))&&2!=o&&this.throwInvalidFormat(n);break;case"M":case"d":case"H":case"h":case"m":case"s":2!=(o=this.getPattern(n,s,i))&&this.throwInvalidFormat(n);break;case"S":3!=(o=this.getPattern(n,s,i))&&this.throwInvalidFormat(n);break;case"a":case".":case"/":case"-":case":":1!=(o=this.getPattern(n,s,i))&&this.throwInvalidFormat(n);break;default:this.throwInvalidFormat(n)}0<o&&(this._patterns.push({c:i,p:s,len:o}),s+=o)}},m.prototype.throwInvalidFormat=function(t){throw new Error("Invalid date format: "+t)},m.prototype.throwInvalidValue=function(t){throw new Error("Invalid date format: "+t)},m.prototype.getPattern=function(t,e,i){for(var o=1;++e<t.length&&t.charAt(e)==i;)o++;return o},m.DATE_SEPARATORS="./-: ",m);function m(t){this._format=null,this._baseYear=2e3,this._patterns=[],this._amText="AM",this._pmText="PM",t&&(this.format=t)}e.DateTimeParser=i});t(l);l.DateTimeParser;var h=e(function(t,e){Object.defineProperty(e,"__esModule",{value:!0});var i=(b.parse=function(e,i){var t=null;try{var o,n,r,s,a=e.indexOf("T"),l=e.substring(0,a),h=e.substring(a+1),d=l.split("-"),u=d.length,_=parseInt(d[0]),c=1<u?parseInt(d[1]):1,p=2<u?parseInt(d[2]):1;-1!=h.indexOf("Z")?(o=1,r=n=0,h=h.replace("Z","")):-1!=h.indexOf("+")?(o=1,s=h.substring(h.indexOf("+")+1,h.length),n=Number(s.substring(0,s.indexOf(":"))),r=Number(s.substring(s.indexOf(":")+1,s.length)),h=h.substring(0,h.indexOf("+"))):-1!=h.indexOf("-")?(o=-1,s=h.substring(h.indexOf("-")+1,h.length),n=Number(s.substring(0,s.indexOf(":"))),r=Number(s.substring(s.indexOf(":")+1,s.length)),h=h.substring(0,h.indexOf("-"))):o=0;var f=h.split(":"),g=0<(u=f?f.length:0)?parseInt(f[0]):0,m=1<u?parseInt(f[1]):0,y=2<u?String(f[2]).split("."):null,v=y&&0<y.length?parseInt(y[0]):0,w=y&&1<y.length?1e3*parseFloat("0."+y[1]):0,C=Date.UTC(_,c-1,p,g,m,v,w);if(t=new Date(C-(o?(36e5*n+6e4*r)*o:b._zoneOffset)),i&&isNaN(t.getTime()))throw"Invalidate date text: "+e}catch(t){if(i){var x="Invalid date Text: "+e;throw x+="\nError: "+t.toString()}}return t},b._zoneOffset=60*(new Date).getTimezoneOffset()*1e3,b);function b(){}e.ISODateTimeParser=i});t(h);h.ISODateTimeParser;var w=e(function(t,e){Object.defineProperty(e,"__esModule",{value:!0});var i=(o.initialize=function(){o.Default.amText="AM",o.Default.pmText="PM",o.Default.baseYear=2e3},_dp(o,"format",{get:function(){return this._format},set:function(t){t!=this._format&&(this._format=t,this.parse(t))}}),_dp(o,"amText",{get:function(){return this._parser.amText},set:function(t){this._parser.amText=t}}),_dp(o,"pmText",{get:function(){return this._parser.pmText},set:function(t){this._parser.pmText=t}}),_dp(o,"baseYear",{get:function(){return this._parser.baseYear},set:function(t){this._parser.baseYear=t}}),o.prototype.toDate=function(t){if(!t)return null;var e=null;switch(this._type){case 0:e=this._parser.parse(t);break;case 1:e=h.ISODateTimeParser.parse(t,!1);break;case 2:var i=parseInt(t);e=new Date(i);break;case 3:default:e=new Date(t)}return e&&!isNaN(e.getTime())?e:null},o.prototype.parse=function(t){if(t){var e=t.toLowerCase();this._type=Math.max(0,o.Formats.indexOf(e)),0==this._type&&(this._parser.format=t)}},o.Formats=["custom","iso","timestamp","platform"],o.Default=new o("yyyy/MM/dd HH:mm:ss"),o);function o(t){this._format="",this._type=0,this._parser=new l.DateTimeParser(null),this.format=t}(e.DateTimeReader=i).initialize()});t(w);w.DateTimeReader;var re=e(function(t,e){Object.defineProperty(e,"__esModule",{value:!0});var i=0,o=(c.prototype.dispose=function(){return this.$_disposed||this.$_disposing||(this.$_disposed=!0,this.$_disposing=!0,this._doDispose()),null},c.prototype._doDispose=function(){},_dp(c,"disposing",{get:function(){return this.$_disposing}}),c.prototype.isMe=function(t){return t==this.$_hash},c.prototype.$_getters=function(t){for(var e=[],i=Object.getOwnPropertyNames(t),o=0,n=i.length;o<n;o++){var r=i[o],s=Object.getOwnPropertyDescriptor(t,r);s&&s.get&&e.push(r)}return e},c.prototype.doAssignSimple=function(t){return!1},c.prototype.assignFrom=function(t){var e=Object.getPrototypeOf(this);if(t instanceof c)for(var i=Object.getPrototypeOf(t),o={};i&&i.constructor!=c;){for(var n=this.$_getters(i),r=0,s=n.length;r<s;r++)if(!((d=n[r])in o))if(o[d]=null,u=Object.getOwnPropertyDescriptor(e,d))u.set&&(l=Object.getOwnPropertyDescriptor(i,d).get)&&u.set.call(this,l.call(t));else for(var a=Object.getPrototypeOf(e);a;){var l,h=Object.getOwnPropertyDescriptor(a,d);if(h)h.set&&(l=Object.getOwnPropertyDescriptor(i,d).get)&&h.set.call(this,l.call(t)),a=null;else a=Object.getPrototypeOf(a)}i=Object.getPrototypeOf(i)}else if(!this.doAssignSimple(t))for(var d in t){var u;if(u=Object.getOwnPropertyDescriptor(e,d))u.set&&u.set.call(this,t[d]);else for(a=Object.getPrototypeOf(e);a;){var _=Object.getOwnPropertyDescriptor(a,d);a=_?(_.set&&_.set.call(this,t[d]),null):Object.getPrototypeOf(a)}}},c.prototype.extend=function(t){for(var e in t)this.hasOwnProperty(e)&&(this[e]=t[e])},c.prototype.toProxy=function(){for(var t={},e=Object.getPrototypeOf(this);e&&e.constructor!=c;){for(var i=this.$_getters(e),o=0,n=i.length;o<n;o++){var r=i[o],s=Object.getOwnPropertyDescriptor(e,r);if(s)s.get&&s.set&&(t[r]=s.get.call(this));else for(var a=Object.getPrototypeOf(e);a;){var l=Object.getOwnPropertyDescriptor(a,r);a=l?(l.get&&l.set&&(t[r]=l.get.call(this)),null):Object.getPrototypeOf(a)}}e=Object.getPrototypeOf(e)}return t},c);function c(){this.$_hash=i++,this.$_disposed=!1}e.Base=o});t(re);re.Base;var H=e(function(t,e){Object.defineProperty(e,"__esModule",{value:!0});var o,r=(o=Error,oe.__extends(i,o),i);function i(t,e){var i=o.call(this,t)||this;return i.message=t,i.tokenPos=e,i}e.ExpressionSyntaxError=r;var n,s=(n=Error,oe.__extends(a,n),a);function a(t){var e=n.call(this,t)||this;return e.message=t,e}e.ExpressionEvaluationError=s;function l(){for(var t=[],e=0;e<arguments.length;e++)t[e]=arguments[e];for(var i=[],o=0,n=t;o<n.length;o++){i[n[o]]=!0}return i}var h=l(26,27),d=l(40,45,46,47,48,49,50,51,52,53,41,42,43,44),u=l(4,5,18,19),_=l(11,3,2,14,15,16,17),c=(p.prototype.clear=function(){this._source=null},p.prototype.next=function(){var t=this._source.charCodeAt(this._run);this._tokenPos=this._run,t<256?this._procs[t].call(this):this.identProc()},p.prototype.unkownProc=function(){this._tokenId=0,this._run++},p.prototype.symbolProc=function(){this._tokenId=80,this._run++},p.prototype.commaProc=function(){this._tokenId=32,this._run++},p.prototype.crProc=function(){this._tokenId=33,10==this._source.charCodeAt(this._run+1)?this._run+=2:this._run++,this._lineNo++,this._linePos=this._run},p.prototype.lfProc=function(){this._tokenId=33,this._run++,this._lineNo++,this._linePos=this._run},p.prototype.equalProc=function(){this._tokenId=40,this._run++},p.prototype.greaterProc=function(){"="==this._source.charAt(this._run+1)?(this._tokenId=42,this._run+=2):(this._tokenId=41,this._run++)},p.prototype.lowerProc=function(){"="==this._source.charAt(this._run+1)?(this._tokenId=44,this._run+=2):">"==this._source.charAt(this._run+1)?(this._tokenId=45,this._run+=2):(this._tokenId=43,this._run++)},p.prototype.nextIdent=function(){for(var t=this._run;t<this._len&&!this.IS_IDENT[this._source.charCodeAt(t)];)t++;for(var e=t;t<this._len&&this.IS_IDENT[this._source.charCodeAt(t)];)t++;return e<t?(this._nextRun=t,this._source.substr(e,t-e).toLowerCase()):null},p.prototype.identProc=function(){for(var t=this._run;this._run<this._len&&(this.IS_IDENT[this._source.charCodeAt(this._run)]||255<this._source.charCodeAt(this._run));)this._run++;var e=this._source.substr(t,this._run-t).toLowerCase();if(this.Keywords.hasOwnProperty(e))switch(this._tokenId=this.Keywords[e],this._tokenId){case 13:if(e=this.nextIdent())switch(e){case"like":this._tokenId=47,this._run=this._nextRun;break;case"ilike":this._tokenId=49,this._run=this._nextRun;break;case"match":this._tokenId=51,this._run=this._nextRun;break;case"imatch":this._tokenId=53,this._run=this._nextRun}break;case 26:"not"==(e=this.nextIdent())&&(this._tokenId=27,this._run=this._nextRun)}else this._tokenId=10},p.prototype.integerProc=function(){for(this._tokenId=64,this._run++;this._run<this._len&&this.IS_INTEGER[this._source.charCodeAt(this._run)];)this._run++},p.prototype.numberProc=function(){for(this._tokenId=64,this._run++;this._run<this._len&&this.IS_NUMBER[this._source.charCodeAt(this._run)];){if("."==this._source.charAt(this._run)){if("."==this._source.charAt(this._run+1))break;this._tokenId=63}this._run++}},p.prototype.minusProc=function(){this._tokenId=4,this._run++},p.prototype.plusProc=function(){this._tokenId=5,this._run++},p.prototype.pointProc=function(){"."==this._source.charAt(this._run+1)?(this._tokenId=68,this._run+=2):(this._tokenId=65,this._run++)},p.prototype.roundOpenProc=function(){this._tokenId=66,this._run++},p.prototype.roundCloseProc=function(){this._tokenId=67,this._run++},p.prototype.slashProc=function(){this._tokenId=2,this._run++},p.prototype.spaceProc=function(){for(this._tokenId=71,this._run++;this._run<this._len&&this.IS_WHITE[this._source.charCodeAt(this._run)];)this._run++},p.prototype.bracketOpenProc=function(){this._tokenId=69,this._run++},p.prototype.bracketCloseProc=function(){this._tokenId=70,this._run++},p.prototype.starProc=function(){this._tokenId=3,this._run++},p.prototype.modProc=function(){this._tokenId=15,this._run++},p.prototype.stringProc=function(){this._tokenId=61;do{var t=this._source.charCodeAt(this._run);if(this.IS_END[t])throw new r("Untermintated string",t);t==this.BACKSLASH&&this._run++,this._run++}while(this._run<this._len&&this._source.charCodeAt(this._run)!=this.QUOTATION);this._run++},p.prototype.smallStringProc=function(){this._tokenId=61;do{var t=this._source.charCodeAt(this._run);if(this.IS_END[t])throw new r("Untermintated string",t);t==this.BACKSLASH&&this._run++,this._run++}while(this._run<this._len&&this._source.charCodeAt(this._run)!=this.SQUOTATION);this._run++},p.prototype.initProcs=function(){this._procs=[];for(var t=1;t<=255;t++)this._procs[t]=this.symbolProc;for(t=1;t<=32;t++)this._procs[t]=this.spaceProc;for(this._procs[10]=this.lfProc,this._procs[13]=this.crProc,this._procs["$".charCodeAt(0)]=this.integerProc,this._procs[this.QUOTATION]=this.stringProc,this._procs[this.SQUOTATION]=this.smallStringProc,t=0;t<=9;t++)this._procs["0".charCodeAt(0)+t]=this.numberProc;for(t="A".charCodeAt(0);t<="Z".charCodeAt(0);t++)this._procs[t]=this.identProc;for(t="a".charCodeAt(0);t<="z".charCodeAt(0);t++)this._procs[t]=this.identProc;this._procs["_".charCodeAt(0)]=this.identProc,this._procs["(".charCodeAt(0)]=this.roundOpenProc,this._procs[")".charCodeAt(0)]=this.roundCloseProc,this._procs["*".charCodeAt(0)]=this.starProc,this._procs["+".charCodeAt(0)]=this.plusProc,this._procs[",".charCodeAt(0)]=this.commaProc,this._procs["-".charCodeAt(0)]=this.minusProc,this._procs[".".charCodeAt(0)]=this.pointProc,this._procs["/".charCodeAt(0)]=this.slashProc,this._procs["%".charCodeAt(0)]=this.modProc,this._procs["<".charCodeAt(0)]=this.lowerProc,this._procs["=".charCodeAt(0)]=this.equalProc,this._procs[">".charCodeAt(0)]=this.greaterProc,this._procs["[".charCodeAt(0)]=this.bracketOpenProc,this._procs["]".charCodeAt(0)]=this.bracketCloseProc},_dp(p,"tokenId",{get:function(){return this._tokenId}}),_dp(p,"tokenLoc",{get:function(){return{x:this._tokenPos-this._linePos,y:this._lineNo}}}),_dp(p,"tokenLen",{get:function(){return this._run-this._tokenPos}}),_dp(p,"token",{get:function(){return this._source.substr(this._tokenPos,this.tokenLen)}}),_dp(p,"isSpace",{get:function(){return 71==this._tokenId}}),p.prototype.init=function(t){this._source=t,this._len=t.length,this._lineNo=0,this._linePos=0,this._tokenPos=0,this._runAhead=this._run=0,this._tokenId=0},p.prototype.charAhread=function(){for(this._runAhead=this._run;this._runAhead<this._len&&0<this._source.charCodeAt(this._runAhead)&&this._source.charCodeAt(this._runAhead)<=32;)this._runAhead++;return this._source.charCodeAt(this._runAhead)},p.prototype.nextId=function(t){for(;this.next(),this._run<this._len&&this._tokenId!=t;);},p.prototype.nextNoSpace=function(){if(this._run<this._len)for(;this.next(),this._run<this._len&&this.isSpace;);},p.prototype.isFirstInLine=function(){if(0==this._tokenPos)return!0;var t,e=this._tokenPos;for(e--;0<e&&this.IS_WHITE[this._source.charCodeAt(e)];)e--;return 0==e||10==(t=this._source.charCodeAt(e))||13==t},p);function p(){this.IS_IDENT=[],this.IS_INTEGER=[],this.IS_NUMBER=[],this.IS_WHITE=[],this.IS_END=[],this.QUOTATION='"'.charCodeAt(0),this.SQUOTATION="'".charCodeAt(0),this.BACKSLASH="\\".charCodeAt(0),this.Keywords={str:20,num:21,bool:23,not:13,len:24,and:11,in:12,mod:15,or:18,div:14,shl:16,shr:17,xor:19,is:26,like:46,ilike:48,match:50,imatch:52,defined:35,null:34,empty:36,nan:37,datestr:90,year:91,month:92,day:93,hour:94,rounddown:95},this._procs=null,this._source=null,this._len=0,this._tokenId=0,this._run=0,this._runAhead=0,this._nextRun=0,this._lineNo=0,this._linePos=0;for(var t=this._tokenPos=0;t<256;t++)this.IS_IDENT[t]=t=="_".charCodeAt(0)||t>="0".charCodeAt(0)&&t<="9".charCodeAt(0)||t>="a".charCodeAt(0)&&t<="z".charCodeAt(0)||t>="A".charCodeAt(0)&&t<="Z".charCodeAt(0),this.IS_INTEGER[t]=t>="0".charCodeAt(0)&&t<="9".charCodeAt(0)||t>="a".charCodeAt(0)&&t<="f".charCodeAt(0)||t>="A".charCodeAt(0)&&t<="F".charCodeAt(0),this.IS_NUMBER[t]=t>="0".charCodeAt(0)&&t<="9".charCodeAt(0)||t==".".charCodeAt(0)||t=="e".charCodeAt(0)||t=="E".charCodeAt(0),this.IS_WHITE[t]=1<=t&&t<=9||11==t||14<=t&&t<=32,this.IS_END[t]=0==t;this.initProcs()}var f,g=(f=re.Base,oe.__extends(m,f),m.prototype.isIdentifier=function(t){throw new Error("Token is not a valid Identifier: "+t)},m.prototype.evaluateIdentifier=function(t){throw new Error("Invalid identifier key: "+t)},m.prototype.evaluateIndexerI=function(t,e){throw new Error("Invalid identifier indexer: "+t)},m.prototype.evaluateIndexerS=function(t,e,i){throw new Error("Invalid identifier indexer: "+t)},m);function m(){return f.call(this)||this}e.ExpressionRuntime=g;var y=(_dp(v,"value",{get:function(){}}),_dp(v,"asLiteral",{get:function(){return null}}),v.prototype.prepareValue=function(){},v.prototype.getLiteral=function(){},v.prototype.isIdentifier=function(t){return!1},v.prototype.toString=function(){return String(this)},v);function v(){}e.ExpressionNode=y;var w,C=(w=y,oe.__extends(x,w),x);function x(){return null!==w&&w.apply(this,arguments)||this}var b;b=y,oe.__extends(I,b),I.prototype.evaluate=function(t){},I.prototype.toString=function(){return""},I.Default=new I;function I(){return b.call(this)||this}var E,S=(E=y,oe.__extends(R,E),R.prototype.evaluate=function(t){if(this._literal)return this._literal.value;if(!this._rightExpr)return this._leftExpr.evaluate(t);var e=this._leftExpr.evaluate(t),i=this._rightExpr.evaluate(t);switch(this._operator){case 40:return e==i;case 45:return e!=i;case 41:return i<e;case 42:return i<=e;case 43:return e<i;case 44:return e<=i;case 46:return this.calcLike(e,i,!1);case 47:return!this.calcLike(e,i,!1);case 48:return this.calcLike(e,i,!0);case 49:return!this.calcLike(e,i,!0);case 50:return this.calcMatch(e,i,!1);case 51:return!this.calcMatch(e,i,!1);case 52:return this.calcMatch(e,i,!0);case 53:return!this.calcMatch(e,i,!0);default:throw new s("Unknown operator: "+this._operator)}},R.prototype.toString=function(){var t="";if(this._literal)t=this._literal.toString();else if(this._rightExpr){var e,i=this._leftExpr.toString(),o=this._rightExpr.toString();switch(this._operator){case 40:e="=";break;case 45:e="<>";break;case 41:e=">";break;case 42:e=">=";break;case 43:e="<";break;case 44:e="<=";break;case 46:e="like";break;case 47:e="not like";break;case 48:e="ilike";break;case 49:e="not ilike";break;case 50:e="match";break;case 51:e="not match";break;case 52:e="imatch";break;case 53:e="not imatch";break;case 32:e=",";break;default:e="<<ERROR>>"}t="("+i+" "+e+" "+o+")"}else t=this._leftExpr.toString();return t},R.prototype.isIdentifier=function(t){return this._leftExpr&&!this._rightExpr&&this._leftExpr.isIdentifier(t)},R.prototype.prepareValue=function(){this._leftExpr.prepareValue(),null==this._rightExpr?this._literal=this._leftExpr.getLiteral():this._rightExpr.prepareValue()},R.prototype.getLiteral=function(){return this._literal},R.prototype.calcLike=function(t,e,i){var o=String(t),n=String(e);if(o&&n){i&&(o=o.toLowerCase(),n=n.toLowerCase());var r=n.length;if(1<r){var s="%"==n.charAt(0),a="%"==n.charAt(r-1);return s&&a?(n=n.substr(1,r-2),0<=o.indexOf(n,0)):s?(n=n.substr(1,r-1),o.lastIndexOf(n)==o.length-n.length):a?(n=n.substr(0,r-1),0==o.indexOf(n,0)):o==n}return"%"!=n&&o==n}return!1},R.prototype.calcMatch=function(t,e,i){return new RegExp(e,"m"+(i?"i":"")).test(t)},R);function R(){var t=E.call(this)||this;return t._operator=0,t}var D,T=(D=y,oe.__extends(k,D),_dp(k,"value",{get:function(){}}),_dp(k,"asLiteral",{get:function(){return this}}),k.prototype.evaluate=function(t){},k);function k(){return null!==D&&D.apply(this,arguments)||this}var M,L=(M=T,oe.__extends(F,M),F.prototype.toString=function(){return"defined"},F);function F(){return null!==M&&M.apply(this,arguments)||this}var V,O=(V=T,oe.__extends(N,V),N.prototype.toString=function(){return"empty"},N);function N(){return null!==V&&V.apply(this,arguments)||this}var P,B=(P=T,oe.__extends(A,P),_dp(A,"value",{get:function(){return NaN}}),A.prototype.toString=function(){return"null"},A);function A(){return null!==P&&P.apply(this,arguments)||this}var $,H=($=T,oe.__extends(G,$),G.prototype.toString=function(){return"NaN"},G);function G(){return null!==$&&$.apply(this,arguments)||this}var U,W=(U=S,oe.__extends(z,U),z.prototype.prepareValue=function(){this._leftExpr.prepareValue(),this._literal=this._leftExpr.getLiteral()},z.prototype.getLiteral=function(){return null},z.prototype.evaluate=function(t){var e,i=this._literal?this._literal.value:this._leftExpr.evaluate(t);switch(this._value){case z.DEFINED:e=void 0!==i;break;case z.NULL:e=null==i;break;case z.EMPTY:e=null==i||0==String(i).length;break;case z.NAN:e=null===i||isNaN(i);break;default:return}return this._isNot?!e:e},z.prototype.toString=function(){var t="<<ERROR>>";switch(this._value){case z.DEFINED:t="defined";break;case z.NULL:t="null";break;case z.EMPTY:t="empty";break;case z.NAN:t="NaN"}return"("+(this._isNot?"is not ":"is ")+t+")"},z.DEFINED=0,z.NULL=1,z.EMPTY=2,z.NAN=3,z);function z(t,e,i){var o=U.call(this)||this;return o._leftExpr=t,o._operator=e,o._isNot=27==e,o._value=-1,i instanceof L?o._value=z.DEFINED:i instanceof B?o._value=z.NULL:i instanceof O?o._value=z.EMPTY:i instanceof H&&(o._value=z.NAN),o}var j,q=(j=C,oe.__extends(Y,j),_dp(Y,"value",{get:function(){return this._value}}),_dp(Y,"asLiteral",{get:function(){return this}}),Y.prototype.evaluate=function(t){return this._value},Y.prototype.toString=function(){return String(this._value)},Y);function Y(t){var e=j.call(this)||this;return e._value=Number(t),e}var X,K=(X=C,oe.__extends(Z,X),_dp(Z,"value",{get:function(){return this._value}}),_dp(Z,"asLiteral",{get:function(){return this}}),Z.prototype.evaluate=function(t){return this._value},Z.prototype.toString=function(){return String(this._value)},Z);function Z(t){var e=X.call(this)||this;return e._value="string"==typeof t?parseInt(t):Math.floor(t),e}var Q,J=(Q=C,oe.__extends(tt,Q),_dp(tt,"value",{get:function(){return this._value}}),_dp(tt,"asLiteral",{get:function(){return this}}),tt.prototype.evaluate=function(t){return this._value},tt.prototype.toString=function(){return"'"+this._value+"'"},tt);function tt(t){var e=Q.call(this)||this;e._value=t.substr(1,t.length-2);for(var i="",o=0,n=!1;o<e._value.length;)"\\"!=e._value[o]||n?(n=!1,i+=e._value[o++]):(n=!0,o++);return e._value=i,e}var et,it=(et=y,oe.__extends(ot,et),_dp(ot,"identifier",{get:function(){return this._literal}}),ot.prototype.evaluate=function(t){return-651212==this._idKey&&(this._idKey=t.isIdentifier(this._literal)),t.evaluateIdentifier(this._idKey)},ot.prototype.toString=function(){return this._literal},ot);function ot(t){var e=et.call(this)||this;return e._idKey=-651212,e._literal=t,e}var nt,rt=(nt=S,oe.__extends(st,nt),st.prototype.prepareValue=function(){var t=this._indexer.asLiteral;if(t||this._indexer instanceof S&&(this._indexer.prepareValue(),t=this._indexer.getLiteral()),t){var e=t.value;"string"==typeof e?this._strIndex=e:this._intIndex=parseInt(e),this._capital&&this._strIndex&&(this._strIndex=this._strIndex.toUpperCase())}},st.prototype.getLiteral=function(){return null},st.prototype.evaluate=function(t){if(-1490313==this._idKey&&(this._idKey=t.isIdentifier(this._ident)),this._strIndex)return t.evaluateIndexerS(this._idKey,this._strIndex,this._capital);if(isNaN(this._intIndex)){var e=this._indexer.evaluate(t);return"string"==typeof e?t.evaluateIndexerS(this._idKey,e,this._capital):t.evaluateIndexerI(this._idKey,e)}return t.evaluateIndexerI(this._idKey,this._intIndex)},st.prototype.toString=function(){return this._ident+"["+this._indexer.toString()+"]"},st);function st(t,e,i){var o=nt.call(this)||this;return o._idKey=-1490313,o._intIndex=NaN,o._strIndex=null,o._ident=t,o._indexer=e,o._capital=i,o}var at,lt=(at=y,oe.__extends(ht,at),ht.prototype.prepareValue=function(){this._literal=this._factor.asLiteral,!this._literal&&this._factor instanceof y&&(this._factor.prepareValue(),this._literal=this._factor.getLiteral())},ht.prototype.getLiteral=function(){return null},ht);function ht(t){var e=at.call(this)||this;return e._factor=t,e}var dt,ut=(dt=lt,oe.__extends(_t,dt),_t.prototype.evaluate=function(t){var e=this._literal instanceof C?this._literal.value:this._factor.evaluate(t);return e?e.length:0},_t.prototype.toString=function(){return"(len "+this._factor+")"},_t);function _t(t){return dt.call(this,t)||this}var ct,pt=(ct=lt,oe.__extends(ft,ct),ft.prototype.evaluate=function(t){return-(this._literal instanceof C?this._literal.value:this._factor.evaluate(t))},ft.prototype.toString=function(){return"-"+this._factor},ft);function ft(t){return ct.call(this,t)||this}var gt,mt=(gt=lt,oe.__extends(yt,gt),yt.prototype.evaluate=function(t){return this._literal instanceof C?this._literal.value:this._factor.evaluate(t)},yt.prototype.toString=function(){return"+"+this._factor},yt);function yt(t){return gt.call(this,t)||this}var vt,wt=(vt=lt,oe.__extends(Ct,vt),Ct.prototype.evaluate=function(t){return!(this._literal instanceof C?this._literal.value:this._factor.evaluate(t))},Ct.prototype.toString=function(){return"(not "+this._factor+")"},Ct);function Ct(t){return vt.call(this,t)||this}var xt,bt=(xt=lt,oe.__extends(It,xt),It.prototype.evaluate=function(t){var e=this._literal instanceof C?this._literal.value:this._factor.evaluate(t);return Boolean(e)},It.prototype.toString=function(){return"(bool "+this._factor+")"},It);function It(t){return xt.call(this,t)||this}var Et,St=(Et=lt,oe.__extends(Rt,Et),Rt.prototype.evaluate=function(t){var e=this._literal instanceof C?this._literal.value:this._factor.evaluate(t);return Number(e)},Rt.prototype.toString=function(){return"(num "+this._factor+")"},Rt);function Rt(t){return Et.call(this,t)||this}var Dt,Tt=(Dt=lt,oe.__extends(kt,Dt),kt.prototype.evaluate=function(t){var e=this._literal instanceof C?this._literal.value:this._factor.evaluate(t);return String(e)},kt.prototype.toString=function(){return"(str "+this._factor+")"},kt);function kt(t){return Dt.call(this,t)||this}var Mt,Lt=(Mt=lt,oe.__extends(Ft,Mt),Ft.prototype.evaluate=function(t){var e=this._literal instanceof C?this._literal.value:this._factor.evaluate(t);if(e instanceof Date){var i=ne.Utils.pad;e=i(e.getFullYear(),4)+i(e.getMonth()+1,2)+i(e.getDate(),2)+i(e.getHours(),2)+i(e.getMinutes(),2)+i(e.getSeconds(),2)+i(e.getMilliseconds(),3)}return String(e)},Ft.prototype.toString=function(){return"(datestr "+this._factor+")"},Ft);function Ft(t){return Mt.call(this,t)||this}var Vt,Ot=(Vt=lt,oe.__extends(Nt,Vt),Nt.prototype.evaluate=function(t){var e=this._literal instanceof C?this._literal.value:this._factor.evaluate(t);return e instanceof Date?e.getFullYear():null},Nt.prototype.toString=function(){return"(year "+this._factor+")"},Nt);function Nt(t){return Vt.call(this,t)||this}var Pt,Bt=(Pt=lt,oe.__extends(At,Pt),At.prototype.evaluate=function(t){var e=this._literal instanceof C?this._literal.value:this._factor.evaluate(t);return e instanceof Date?e.getMonth()+1:null},At.prototype.toString=function(){return"(month "+this._factor+")"},At);function At(t){return Pt.call(this,t)||this}var $t,Ht=($t=lt,oe.__extends(Gt,$t),Gt.prototype.evaluate=function(t){var e=this._literal instanceof C?this._literal.value:this._factor.evaluate(t);return e instanceof Date?e.getDate():null},Gt.prototype.toString=function(){return"(day "+this._factor+")"},Gt);function Gt(t){return $t.call(this,t)||this}var Ut,Wt=(Ut=lt,oe.__extends(zt,Ut),zt.prototype.evaluate=function(t){var e=this._literal instanceof C?this._literal.value:this._factor.evaluate(t);return e instanceof Date?e.getHours():null},zt.prototype.toString=function(){return"(hour "+this._factor+")"},zt);function zt(t){return Ut.call(this,t)||this}var jt,qt=(jt=lt,oe.__extends(Yt,jt),Yt.prototype.evaluate=function(t){var e=this._factor,i=e.getLiteral();if(e.getLiteral())return i.value;if(!e._rightExpr)return e._leftExpr.evaluate(t);var o=e._leftExpr.evaluate(t),n=e._rightExpr.evaluate(t);switch(e._operator){case 32:var r=Math.pow(10,n);return Math.floor(o*r)/r;default:throw new s("Unknown operator: "+e._operator)}},Yt.prototype.toString=function(){return"(rounddown "+this._factor+")"},Yt);function Yt(t){return jt.call(this,t)||this}var Xt,Kt=(Xt=y,oe.__extends(Zt,Xt),Zt.prototype.addFactor=function(t){this._factors.push(t)},Zt.prototype.addOperator=function(t){this._operators.push(t)},Zt.prototype.isIdentifier=function(t){return 1==this._factors.length&&this._factors[0]instanceof it&&this._factors[0].identifier==t},Zt.prototype.prepareValue=function(){var t,e,i;for(t=0,e=this._factors.length;t<e;t++)this._factors[t].prepareValue();0==this._operators.length&&(i=this._factors[0],this._literal=i.asLiteral,this._literal||(this._literal=i.getLiteral()))},Zt.prototype.getLiteral=function(){return this._literal},Zt.prototype.evaluate=function(t){if(this._literal)return this._literal.value;for(var e=this._factors.length,i=this._factors[0].evaluate(t),o=1;o<e;o++){var n=this._factors[o].evaluate(t);switch(this._operators[o-1]){case 11:i=i&&n;break;case 3:i*=n;break;case 2:i/=n;break;case 14:i=Math.floor(Math.floor(i)/Math.floor(n));break;case 15:i%=n;break;case 16:i<<=n;break;case 17:i>>=n}}return i},Zt.prototype.toString=function(){var t="";if(this._literal)t=this._literal.toString();else if(1==this._factors.length)t=this._factors[0].toString();else{var e,i=this._factors.length;for(t="("+this._factors[0].toString(),e=1;e<i;e++){switch(this._operators[e-1]){case 11:t+=" and ";break;case 3:t+=" * ";break;case 2:case 14:t+=" / ";break;case 15:t+=" mod ";break;case 16:t+=" shl ";break;case 17:t+=" shr "}t+=this._factors[e].toString()}t+=")"}return t},Zt);function Zt(){var t=Xt.call(this)||this;return t._factors=[],t._operators=[],t._literal=null,t}var Qt,Jt=(Qt=y,oe.__extends(te,Qt),te.prototype.addTerm=function(t){this._terms.push(t)},te.prototype.addOperator=function(t){this._operators.push(t)},te.prototype.isIdentifier=function(t){return 1==this._terms.length&&this._terms[0].isIdentifier(t)},te.prototype.prepareValue=function(){for(var t=0,e=this._terms.length;t<e;t++)this._terms[t].prepareValue();0==this._operators.length&&(this._literal=this._terms[0].getLiteral())},te.prototype.getLiteral=function(){return this._literal},te.prototype.evaluate=function(t){if(this._literal)return this._literal.value;for(var e=this._terms.length,i=this._terms[0].evaluate(t),o=1;o<e;o++){var n=this._terms[o].evaluate(t);switch(this._operators[o-1]){case 4:i-=n;break;case 5:i+=n;break;case 18:i=i||n;break;case 19:i^=n}}return i},te.prototype.toString=function(){var t="";if(this._literal)t=this._literal.toString();else if(1==this._terms.length)t=this._terms[0].toString();else{var e,i=this._terms.length;for(t="("+this._terms[0].toString(),e=1;e<i;e++){switch(this._operators[e-1]){case 4:t+=" - ";break;case 5:t+=" + ";break;case 18:t+=" or ";break;case 19:t+=" xor ";break;default:t+=" <<ERROR>> "}t+=this._terms[e].toString()}t+=")"}return t},te);function te(){var t=Qt.call(this)||this;return t._terms=[],t._operators=[],t._literal=null,t}var ee=(ie.prototype.syntaxError=function(t,e){throw new r(t,e)},ie.prototype.expected=function(t){if(t!=this._lexer.tokenId)throw new r("Token is not a expected kind ["+t+"]: "+this._lexer.tokenId,this._lexer.tokenLoc);this.nextToken()},ie.prototype.nextToken=function(){this._lexer.nextNoSpace()},ie.prototype.doExpression=function(){var t,e=null,i=this.doSimpleExpression();if(h[t=this._lexer.tokenId]){this.nextToken();var o=this.doSimpleExpression();o.prepareValue();var n=o.getLiteral();if(!(n instanceof T))throw new r("is operator's operand must be defined, null or empty: "+this._lexer.tokenId,null);e=new W(i,t,n)}else(e=new S)._leftExpr=i,!d[this._lexer.tokenId]&&32!=this._lexer.tokenId||(e._operator=this._lexer.tokenId,this.nextToken(),e._rightExpr=this.doSimpleExpression());return e},ie.prototype.doSimpleExpression=function(){var t=new Jt;for(t.addTerm(this.doTerm());u[this._lexer.tokenId];)t.addOperator(this._lexer.tokenId),this.nextToken(),t.addTerm(this.doTerm());return t},ie.prototype.doTerm=function(){var t=new Kt;for(t.addFactor(this.doFactor());_[this._lexer.tokenId];)t.addOperator(this._lexer.tokenId),this.nextToken(),t.addFactor(this.doFactor());return t},ie.prototype.doFactor=function(){var t=this._lexer.tokenId;switch(t){case 61:return this.doCharString();case 66:return this.doRoundOpen();case 10:return this.doIdentifier();case 64:return this.doInteger();case 63:return this.doNumber();case 4:return this.doMinus();case 5:return this.doPlus();case 13:return this.doNot();case 35:return this.doDefined();case 34:return this.doNull();case 36:return this.doEmpty();case 37:return this.doNaN();case 23:return this.doToBool();case 21:return this.doToNumber();case 20:return this.doToString();case 24:return this.doLength();case 90:return this.doToDateString();case 91:return this.doToYear();case 92:return this.doToMonth();case 93:return this.doToDay();case 94:return this.doToHour();case 95:return this.doRoundDown()}throw new r("Unkown token: "+t,this._lexer.tokenLoc)},ie.prototype.doCharString=function(){var t=this._lexer.token;return this.nextToken(),new J(t)},ie.prototype.doRoundOpen=function(){this.nextToken();var t=this.doExpression();return this.expected(67),t},ie.prototype.doIdentifier=function(){var t=this._lexer.token;if(this.nextToken(),69!=this._lexer.tokenId)return new it(t);this.nextToken();var e=this.doExpression();return this.expected(70),new rt(t,e,0<=this._capitalIndexers.indexOf(t))},ie.prototype.doNumber=function(){var t=this._lexer.token;return this.nextToken(),new q(t)},ie.prototype.doInteger=function(){var t=this._lexer.token;return this.nextToken(),new K(t)},ie.prototype.doMinus=function(){return this.nextToken(),new pt(this.doFactor())},ie.prototype.doPlus=function(){return this.nextToken(),new mt(this.doFactor())},ie.prototype.doNot=function(){return this.nextToken(),new wt(this.doFactor())},ie.prototype.doDefined=function(){return this.nextToken(),new L},ie.prototype.doNull=function(){return this.nextToken(),new B},ie.prototype.doEmpty=function(){return this.nextToken(),new O},ie.prototype.doNaN=function(){return this.nextToken(),new H},ie.prototype.doToBool=function(){return this.nextToken(),new bt(this.doFactor())},ie.prototype.doToNumber=function(){return this.nextToken(),new St(this.doFactor())},ie.prototype.doToString=function(){return this.nextToken(),new Tt(this.doFactor())},ie.prototype.doLength=function(){return this.nextToken(),new ut(this.doFactor())},ie.prototype.doToDateString=function(){return this.nextToken(),new Lt(this.doFactor())},ie.prototype.doToYear=function(){return this.nextToken(),new Ot(this.doFactor())},ie.prototype.doToMonth=function(){return this.nextToken(),new Bt(this.doFactor())},ie.prototype.doToDay=function(){return this.nextToken(),new Ht(this.doFactor())},ie.prototype.doToHour=function(){return this.nextToken(),new Wt(this.doFactor())},ie.prototype.doRoundDown=function(){return this.nextToken(),new qt(this.doFactor())},ie.prototype.parse=function(t,e){if(t){this._capitalIndexers=e||[],this._lexer.init(t),this.nextToken();var i=this.doExpression();return i&&i.prepareValue(),this._lexer.clear(),this._capitalIndexers=null,i}return null},ie.prototype.evaluate=function(t,e,i){return this.parse(t,i).evaluate(e)},ie.Default=new ie,ie);function ie(){this._node=null,this._capitalIndexers=null,this._lexer=new c}e.ExpressionParser=ee});t(H);H.ExpressionSyntaxError,H.ExpressionEvaluationError,H.ExpressionRuntime,H.ExpressionNode,H.ExpressionParser;var c=e(function(t,e){Object.defineProperty(e,"__esModule",{value:!0});var n,a=["value","values"],i=(n=re.Base,oe.__extends(o,n),_dp(o,"hash",{get:function(){return this._fieldName}}),_dp(o,"index",{get:function(){return this._index}}),_dp(o,"fieldName",{get:function(){return this._fieldName},set:function(t){if(!(t=t&&t.trim()))throw new Error("Field name must be exists.");t!=this._orgFieldName&&(this._orgFieldName=t,this._orgAttrName="@"+t,this._fieldName=t.toUpperCase(),this.changed())}}),_dp(o,"orgFieldName",{get:function(){return this._orgFieldName}}),_dp(o,"orgAttrName",{get:function(){return this._orgAttrName}}),_dp(o,"dataType",{get:function(){return this._dataType},set:function(t){t!=this._dataType&&(this._dataType=t,this.resetTypes(),this.changed())}}),_dp(o,"runType",{get:function(){return this._runType}}),_dp(o,"subType",{get:function(){return this._subType},set:function(t){(t=t||null)!=this._subType&&(this._subType=t,this.resetTypes(),this.changed())}}),_dp(o,"subTypeEnabled",{get:function(){return this._subTypeEnabled},set:function(t){t!=this._subTypeEnabled&&(this._subTypeEnabled=t,this.resetTypes(),this.changed())}}),_dp(o,"baseField",{get:function(){return this._baseField},set:function(t){t!=this._orgBaseField&&(this._orgBaseField=t,this._baseField=t&&t.toUpperCase(),this.changed())}}),_dp(o,"length",{get:function(){return this._length},set:function(t){(t=t||0)!=this._length&&(this._length=t,this.resetTypes(),this.changed())}}),_dp(o,"set",{get:function(){return this._set},set:function(t){t!==this._set&&(this._set=t,this.resetTypes(),this.changed())}}),_dp(o,"minimum",{get:function(){return this._minimum},set:function(t){t!=this._minimum&&(this._minimum=t,this.resetTypes(),this.changed())}}),_dp(o,"maximum",{get:function(){return this._maximum},set:function(t){t!=this._maximum&&(this._maximum=t,this.resetTypes(),this.changed())}}),_dp(o,"required",{get:function(){return this._required},set:function(t){t!=this._required&&(this._required=t,this.changed())}}),_dp(o,"header",{get:function(){return this._header},set:function(t){t!=this._header&&(this._header=t,this.changed())}}),_dp(o,"defaultValue",{get:function(){return this._defaultValue},set:function(t){t!=this._defaultValue&&(this._defaultValue=t)}}),_dp(o,"nullValue",{get:function(){return this._nullValue}}),_dp(o,"booleanFormat",{get:function(){return this._booleanFormat},set:function(t){t!=this._booleanFormat&&(this._booleanFormat=t,this._boolParser=t?new O.BooleanConverter(t):null,this.changed())}}),_dp(o,"datetimeFormat",{get:function(){return this._datetimeFormat},set:function(t){t!=this._datetimeFormat&&((this._datetimeFormat=t)?(this._dateParser=new w.DateTimeReader(t),this._dateParser.amText=this._amText,this._dateParser.pmText=this._pmText,this._dateParser.baseYear=this._baseYear):this._dateParser=null,this.changed())}}),_dp(o,"amText",{get:function(){return this._amText},set:function(t){t!=this._amText&&(this._amText=t,this._dateParser&&(this._dateParser.amText=t),this.changed())}}),_dp(o,"pmText",{get:function(){return this._pmText},set:function(t){t!=this._pmText&&(this._pmText=t,this._dateParser&&(this._dateParser.pmText=t),this.changed())}}),_dp(o,"baseYear",{get:function(){return this._baseYear},set:function(t){t!=this._baseYear&&(this._baseYear=t,this._dateParser&&(this._dateParser.baseYear=t),this.changed())}}),_dp(o,"valueExpression",{get:function(){return this._valueExpression},set:function(t){t!=this._valueExpression&&(this._valueExpression=t)}}),_dp(o,"valueCallback",{get:function(){return this._valueCallback},set:function(t){t!=this._valueCallback&&(this._valueCallback=t)}}),_dp(o,"tag",{get:function(){return this._tag},set:function(t){this._tag=t}}),_dp(o,"calculated",{get:function(){return!!this._valueExpression||!!this._valueCallback}}),_dp(o,"updatable",{get:function(){return!this._valueExpression&&!this._valueCallback&&this._updatable},set:function(t){t!=this._updatable&&(this._updatable=t)}}),o.prototype.isEmpty=function(t){var e=null==t||""==t;return e||this._dataType!=lt.ValueType.NUMBER||(e=isNaN(t)),e},o.prototype.isNull=function(t){if(null==t)return!0;switch(this._runType){case lt.ValueType.TEXT:case lt.ValueType.CHAR:if(0==t.length)return!0;break;case lt.ValueType.NUMBER:case lt.ValueType.UNUM:case lt.ValueType.INT:case lt.ValueType.UINT:if(isNaN(t))return!0}return!1},o.prototype.equalValues=function(t,e){return this._equalValues(t,e)},o.prototype.sameValues=function(t,e){return this._sameValues(t,e)},o.prototype.readValue=function(t){return this._readValue(t)},o.prototype.getBool=function(t,e){if("boolean"==typeof e)return e;var i=e;return this._boolParser?this._boolParser.toBool(i):t.toBool(i)},o.prototype.getDate=function(t,e){return e instanceof Date?new Date(e.getTime()):"number"==typeof e?new Date(e):this._dateParser?this._dateParser.toDate(e):t.toDate(e)},o.prototype.clone=function(){var t=new o(this.fieldName,this.dataType,this.length);return t._orgFieldName=this._orgFieldName,t._orgAttrName=this._orgAttrName,t._boolParser=this._boolParser,t._dateParser=this._dateParser,t._orgBaseField=this._orgBaseField,t._baseField=this._baseField,t._defaultValue=this._defaultValue,t._valueCallback=this._valueCallback,t._valueExpression=this._valueExpression,t},o.prototype.$_resetTypes=function(t){this.resetTypes(t)},o.prototype.assignFrom=function(t){"fieldName"in t&&(this.fieldName=t.fieldName),"subType"in t&&(this._subType=t.subType),"set"in t&&(this._set=t.set instanceof Array?t.set.slice():null),"defaultValue"in t&&(this._defaultValue=t.defaultValue),"baseField"in t&&(this.baseField=t.baseField),"booleanFormat"in t&&(this.booleanFormat=t.booleanFormat),"amText"in t&&(this._amText=t.amText),"pmText"in t&&(this._pmText=t.pmText),"baseYear"in t&&(this._baseYear=t.baseYear),"header"in t&&(this._header=t.header),"datetimeFormat"in t&&(this.datetimeFormat=t.datetimeFormat),"objectKey"in t&&(this._objectKey=t.objectKey),"objectCallback"in t&&(this._objectCallback=t.objectCallback),"required"in t&&(this._required=t.required),"minimum"in t&&(this._minimum=t.minimum),"maximum"in t&&(this._maximum=t.maximum),"valueExpression"in t&&(this.valueExpression=t.valueExpression),"valueCallback"in t&&(this._valueCallback=t.valueCallback),"tag"in t&&(this._tag=t.tag)},o.prototype.$_setIndex=function(t){this._index=t},o.prototype.$_prepare=function(t){this._owner=t},o.prototype.changed=function(){this._owner},o.prototype.resetTypes=function(t){if(!this._typeLock){t&&(this._ownerBoolParser=t.boolParser,this._ownerDateParser=t.dateParser);var e=this._dataType,i=this._subType;if(this._runType=e,this._ranged=!1,(!this._owner||this._owner.subTypeEnabled)&&this._subTypeEnabled){if(i)switch(e){case lt.ValueType.TEXT:i==lt.ValueType.CHAR&&0<this._length&&(e=i);break;case lt.ValueType.NUMBER:i!=lt.ValueType.UNUM&&i!=lt.ValueType.INT&&i!=lt.ValueType.UINT||(e=i);break;case lt.ValueType.DATETIME:i==lt.ValueType.DATE&&(e=i)}if(this._runType=e,this._runSet=null,this._set&&this._set.length){if(this._runType==lt.ValueType.DATETIME){this._runSet=[];for(var o=0;o<this._set.length;o++)(n=this.getDate(this._ownerDateParser,this._set[o]))&&this._runSet.push(n.getTime());this._runSet.length<1&&(this._runSet=null)}else if(this._runType==lt.ValueType.DATE){for(this._runSet=[],o=0;o<this._set.length;o++){var n;if(n=this.getDate(this._ownerDateParser,this._set[o])){var r=new Date(n.getDate());this._runSet.push(r.setHours(0,0,0,0))}}this._runSet.length<1&&(this._runSet=null)}else this._runSet=this._set;this._ranged=!0}if(!this._ranged)switch(this._dataType){case lt.ValueType.NUMBER:this._runMin=Number(this._minimum),this._runMax=Number(this._maximum),isNaN(this._runMin)||isNaN(this._runMax)?this._ranged=!isNaN(this._runMin)||!isNaN(this._runMax):this._ranged=this._runMin<=this._runMax;break;case lt.ValueType.DATETIME:case lt.ValueType.DATE:this._runMin=this.getDate(this._ownerDateParser,this._minimum),this._runMax=this.getDate(this._ownerDateParser,this._maximum),this._runMin&&this._runMax?this._ranged=this._runMin.getTime()<=this._runMax.getTime():this._ranged=this._runMin||this._runMax}switch(this._runType){case lt.ValueType.TEXT:this._equalValues=this.equalTextValues,this._sameValues=this.sameTextValues,this._readValue=this.readTextValue,this._nullValue=null;break;case lt.ValueType.CHAR:this._equalValues=this.equalTextValues,this._sameValues=this.sameTextValues,this._readValue=this.readCharValue,this._nullValue=null;break;case lt.ValueType.NUMBER:this._equalValues=this.equalNumberValues,this._sameValues=this.sameNumberValues,this._readValue=this.readNumberValue,this._nullValue=NaN;break;case lt.ValueType.UNUM:this._equalValues=this.equalNumberValues,this._sameValues=this.sameNumberValues,this._readValue=this.readUnumValue,this._nullValue=NaN;break;case lt.ValueType.INT:this._equalValues=this.equalNumberValues,this._sameValues=this.sameNumberValues,this._readValue=this.readIntValue,this._nullValue=NaN;break;case lt.ValueType.UINT:this._equalValues=this.equalNumberValues,this._sameValues=this.sameNumberValues,this._readValue=this.readUintValue,this._nullValue=NaN;break;case lt.ValueType.DATETIME:this._equalValues=this.equalDateValues,this._sameValues=this.sameDateValues,this._readValue=this.readDatetimeValue,this._nullValue=null;break;case lt.ValueType.DATE:this._equalValues=this.equalDateValues,this._sameValues=this.sameDateValues,this._readValue=this.readDateValue,this._nullValue=null;break;case lt.ValueType.BOOLEAN:this._equalValues=this.equalBoolValues,this._sameValues=this.sameBoolValues,this._readValue=this.readBooleanValue,this._nullValue=!1;break;case lt.ValueType.OBJECT:this._equalValues=this.equalObjectValues,this._sameValues=this.sameObjectValues,this._readValue=this.readObjectValues,this._nullValue=!1;break;default:this._equalValues=this.equalDummyValues,this._sameValues=this.sameDummyValues,this._readValue=this.readDummyValue,this._nullValue=void 0}}}},o.prototype.$_refreshFormats=function(t){this._owner=t,this._dateParser&&(this._dateParser.baseYear||(this._dateParser.baseYear=t.baseYear),this._dateParser.amText||(this._dateParser.amText=t.amText),this._dateParser.pmText||(this._dateParser.pmText=t.pmText)),this._ownerBoolParser=t.boolParser,this._ownerDateParser=t.dateParser},o.prototype.equalDummyValues=function(t,e){return void 0===t?void 0===e:void 0!==e&&t==e},o.prototype.sameDummyValues=function(t,e){return null==t?null==e:null!=e&&t==e},o.prototype.equalTextValues=function(t,e){return void 0===t?void 0===e:void 0!==e&&t==e},o.prototype.sameTextValues=function(t,e){return null==t||""==t?null==e||""==e:null!=e&&""!=e&&t==e},o.prototype.equalNumberValues=function(t,e){return void 0===t?void 0===e:void 0!==e&&(isNaN(t)?isNaN(e):!isNaN(e)&&t==e)},o.prototype.sameNumberValues=function(t,e){return isNaN(t)?isNaN(e):!isNaN(e)&&t==e},o.prototype.equalDateValues=function(t,e){return void 0===t?void 0===e:void 0!==e&&(t instanceof Date?e instanceof Date&&t.getTime()==e.getTime():!(e instanceof Date))},o.prototype.sameDateValues=function(t,e){return t instanceof Date?e instanceof Date&&t.getTime()==e.getTime():!(e instanceof Date)},o.prototype.equalBoolValues=function(t,e){return void 0===t?void 0===e:void 0!==e&&Boolean(t)==Boolean(e)},o.prototype.sameBoolValues=function(t,e){return void 0===t?void 0===e:void 0!==e&&Boolean(t)==Boolean(e)},o.prototype.equalObjectValues=function(t,e){return void 0===t||void 0===e?void 0===t==(void 0===e):t===e},o.prototype.sameObjectValues=function(t,e){return null==t||null==e?null==t&&null==e:t==e},o.prototype.readDummyValue=function(t){return t},o.prototype.readTextValue=function(t){if(void 0===t)return t;var e=null===t?null:String(t);return this._ranged&&this._runSet&&this._runSet.indexOf(e)<0?void 0:e},o.prototype.readCharValue=function(t){if(void 0===t)return t;var e=null===t?null:String(t);return e=e&&e.substr(0,this._length),this._ranged&&this._runSet&&this._runSet.indexOf(e)<0?void 0:e},o.prototype.readNumberValue=function(t){if(null!=t&&""!==t){var e=Number(t);if(this._ranged)if(this._runSet){if(this._runSet.indexOf(e)<0)return}else isNaN(this._runMin)||(e=Math.max(this._runMin,e)),isNaN(this._runMax)||(e=Math.min(this._runMax,e));return e}},o.prototype.readUnumValue=function(t){if(null!=t&&""!==t){var e=Math.max(0,Number(t));if(this._ranged){if(this._runSet){if(this._runSet.indexOf(e)<0)return}else isNaN(this._runMin)||(e=Math.max(this._runMin,e)),isNaN(this._runMax)||(e=Math.min(this._runMax,e));e=Math.max(0,e)}return e}},o.prototype.readIntValue=function(t){if(null!=t&&""!==t){var e=0<=t?Math.floor(t):Math.ceil(t);if(this._ranged){if(this._runSet){if(this._runSet.indexOf(e)<0)return}else isNaN(this._runMin)||(e=Math.max(this._runMin,e)),isNaN(this._runMax)||(e=Math.min(this._runMax,e));e=0<=e?Math.floor(e):Math.ceil(e)}return e}},o.prototype.readUintValue=function(t){if(null!=t&&""!==t){var e=Math.max(0,Math.floor(Math.floor(t)));if(this._ranged){if(this._runSet){if(this._runSet.indexOf(e)<0)return}else isNaN(this._runMin)||(e=Math.max(this._runMin,e)),isNaN(this._runMax)||(e=Math.min(this._runMax,e));e=Math.max(0,Math.floor(Math.floor(e)))}return e}},o.prototype.readDatetimeValue=function(t){if(void 0!==t){if(null===t)return this._nullValue;var e=this.getDate(this._ownerDateParser,t);if(e&&this._ranged)if(this._runSet){for(var i=!1,o=this._runSet.length;o--;)if(e.getTime()==this._runSet[o]){i=!0;break}if(!i)return}else this._runMin&&e.getTime()<this._runMin.getTime()&&(e=new Date(this._runMin)),this._runMax&&e.getTime()>this._runMax.getTime()&&(e=new Date(this._runMax));return e}},o.prototype.readDateValue=function(t){if(void 0!==t){if(null===t)return this._nullValue;var e=this.getDate(this._ownerDateParser,t);if(e&&(e.setHours(0,0,0,0),this._ranged))if(this._runSet){for(var i=!1,o=this._runSet.length;o--;)if(e.getTime()==this._runSet[o]){i=!0;break}if(!i)return}else this._runMin&&e.getTime()<this._runMin.getTime()&&(e=new Date(this._runMin)),this._runMax&&e.getTime()>this._runMax.getTime()&&(e=new Date(this._runMax));return e}},o.prototype.readBooleanValue=function(t){return void 0===t?t:null!==t&&this.getBool(this._ownerBoolParser,t)},o.prototype.readObjectValues=function(e){if("string"==typeof e)try{e=JSON.parse(e)}catch(t){throw new Error("Invalid Object String "+t+"\r\n"+e)}else if("object"!=typeof e)try{e=JSON.parse(e)}catch(t){}return e},o.prototype.$_compareObject=function(t,e,i,o){var n=this._objectKey,r=this._objectCallback,s=r?r(this.orgFieldName,i,t):n&&t.hasOwnProperty(n)?t[n]:null;return(r?r(this.orgFieldName,o,e):n&&e.hasOwnProperty(n)?e[n]:null)<s?1:s<e?0:-1},o.prototype.$_calculateValue=function(t,e,i,o,n,r,s){return this._valueCallback?this._valueCallback(t.handler,i,o,r,s):this._valueExpression?(this._exprNode||(this._exprNode=H.ExpressionParser.Default.parse(this._valueExpression,a)),e.setValues(s,n),this._exprNode.evaluate(e)):void 0},o);function o(t,e,i){void 0===e&&(e=lt.ValueType.TEXT),void 0===i&&(i=0);var o=n.call(this)||this;return o._index=-1,o._dataType=lt.ValueType.TEXT,o._subType=null,o._runType=lt.ValueType.TEXT,o._length=0,o._subTypeEnabled=!0,o._required=!1,o._updatable=!0,o._ranged=!1,o._runSet=null,o._typeLock=!1,o._objectKey=null,o._objectCallback=null,t&&(o.fieldName=t),null!=e&&(e===lt.ValueType.DATE&&(e=lt.ValueType.DATETIME,o._subType=lt.ValueType.DATE,o._subTypeEnabled=!0),o._dataType=e),o._length=i,o}e.DataField=i});t(c);c.DataField;var f=e(function(t,e){var i;Object.defineProperty(e,"__esModule",{value:!0}),(i=e.RestoreMode||(e.RestoreMode={})).NONE="none",i.EXPLICIT="explicit",i.AUTO="auto"});t(f);f.RestoreMode;var p=e(function(t,e){Object.defineProperty(e,"__esModule",{value:!0});var i,o=(i=H.ExpressionRuntime,oe.__extends(n,i),n.prototype.setValues=function(t,e){this._values=t,this._fields=e,this._fieldCount=e?e.length:0},n.prototype.isIdentifier=function(t){return t=t.toLowerCase(),n.IDENTS.hasOwnProperty(t)?n.IDENTS[t]:i.prototype.isIdentifier.call(this,t)},n.prototype.evaluateIdentifier=function(t){throw new H.ExpressionEvaluationError("Invalid identifier key: "+t)},n.prototype.evaluateIndexerI=function(t,e){if(this._values){if(t!=n.ID_VALUE&&t!=n.ID_VALUES)throw new H.ExpressionEvaluationError("Invalid identifier indexer: "+t);if(e<0||e>=this._fieldCount)throw new H.ExpressionEvaluationError("Data field index out of bounds:"+e);return this._values[e]}},n.prototype.evaluateIndexerS=function(t,e,i){if(t!=n.ID_VALUE&&t!=n.ID_VALUES)throw new H.ExpressionEvaluationError("Invalid identifier indexer: "+t);if(this._values&&this._fields){var o=this._fields.indexOf(e);if(o<0||o>=this._fieldCount)throw new H.ExpressionEvaluationError("Data field is not exists:"+e);return this._values[o]}},n.IDENTS={value:n.ID_VALUE=0,values:n.ID_VALUES=1},n);function n(){var t=i.call(this)||this;return t._values=null,t._fields=null,t._fieldCount=0,t}e.CalculateExpressionRuntime=o});t(p);p.CalculateExpressionRuntime;var $=e(function(t,e){Object.defineProperty(e,"__esModule",{value:!0});var i,o=(i=re.Base,oe.__extends(n,i),n.prototype._doDispose=function(){return this._listeners=null,i.prototype._doDispose.call(this)},_dp(n,"listenerCount",{get:function(){return this._listeners.length}}),n.prototype.addListener=function(t){return null!=t&&this._listeners&&this._listeners.indexOf(t)<0&&this._listeners.push(t),this},n.prototype.removeListener=function(t){if(null!=t&&this._listeners){var e=this._listeners.indexOf(t);0<=e&&this._listeners.splice(e,1)}return this},n.prototype.clearListener=function(){this._listeners.length=0},n.prototype.fireEvent=function(t){for(var e=[],i=1;i<arguments.length;i++)e[i-1]=arguments[i];for(var o=Array.prototype.slice.call(arguments,0),n=0,r=(o[0]=this)._listeners.length;n<r;n++){var s=this._listeners[n],a=s[t];a&&a.apply(s,o)}},n.prototype.fireConfirmEvent=function(t){for(var e=[],i=1;i<arguments.length;i++)e[i-1]=arguments[i];for(var o=Array.prototype.slice.call(arguments,0),n=0,r=(o[0]=this)._listeners.length;n<r;n++){var s=this._listeners[n],a=s[t];if(a){var l=a.apply(s,o);if("boolean"==typeof l&&!l)return!1}}return!0},n.prototype.fireMessageEvent=function(t){for(var e=[],i=1;i<arguments.length;i++)e[i-1]=arguments[i];for(var o=Array.prototype.slice.call(arguments,0),n=0,r=(o[0]=this)._listeners.length;n<r;n++){var s=this._listeners[n],a=s[t];if(a){var l=a.apply(s,o);if("string"==typeof l&&l)return l}}return null},n.prototype.fireObjectEvent=function(t){for(var e=[],i=1;i<arguments.length;i++)e[i-1]=arguments[i];for(var o=Array.prototype.slice.call(arguments,0),n=0,r=(o[0]=this)._listeners.length;n<r;n++){var s=this._listeners[n],a=s[t];if(a){var l=a.apply(s,o);if(null!=l)return l}}return null},n);function n(){var t=i.call(this)||this;return t._listeners=[],t}e.EventAware=o});t($);$.EventAware;var G=e(function(t,e){Object.defineProperty(e,"__esModule",{value:!0});function u(t){return t<10?"0"+t:String(t)}var l=["yy","yyyy","M","MM","d","dd","a","H","HH","h","hh","m","mm","s","ss","S","SS","SSS"],h=[".","/","-",":"],d="Z".charCodeAt(0),_="z".charCodeAt(0),c="A".charCodeAt(0),p="a".charCodeAt(0),f="y".charCodeAt(0),g="M".charCodeAt(0),m="m".charCodeAt(0),y="d".charCodeAt(0),v="H".charCodeAt(0),w="h".charCodeAt(0),C="S".charCodeAt(0),x="s".charCodeAt(0),i=(o.getFormatter=function(t){var e=o.Formatters[t];return e||(o.Formatters[t]=e=new o(t)),e},Object.defineProperty(o,"Default",{get:function(){return o.getFormatter(o.DEFAULT_FORMAT)}}),_dp(o,"format",{get:function(){return this._format}}),_dp(o,"formatString",{get:function(){return this._formatString},set:function(t){(t=t||o.DEFAULT_FORMAT)!=this._formatString&&(this._tokens=[],this.parse(t),this._formatString=t)}}),o.prototype.getText=function(t){if(!this._tokens)return"";for(var e,i=t instanceof Date?t:new Date(t),o=this._tokens,n="",r=0,s=o.length;r<s;r++){var a=o[r],l=a.length;switch(a.charCodeAt(0)){case f:n+=2<l?i.getFullYear():u(i.getFullYear()%100);break;case g:n+=1<l?u(i.getMonth()+1):i.getMonth()+1;break;case y:n+=1<l?u(i.getDate()):i.getDate();break;case v:n+=1<l?u(i.getHours()):i.getHours();break;case w:if(this._hasAmPm){var h=i.getHours();0==h?h=12:12<h&&(h-=12),n+=1<l?u(h):h}else n+=1<l?u(i.getHours()):i.getHours();break;case m:n+=1<l?u(i.getMinutes()):i.getMinutes();break;case x:n+=1<l?u(i.getSeconds()):i.getSeconds();break;case p:case c:i.getHours()<12?n+=this._amText:n+=this._pmText;break;case C:var d=i.getMilliseconds();n+=3==l?(e=d)<10?"00"+e:e<100?"0":String(e):2==l?u(d):d.toString().substr(0,l);break;default:n+=a}}return n},o.prototype.parseDateFormatTokens=function(t){var e=[];if(t)for(var i=t.trim(),o=i.length,n=0;n<o;){var r=i.charAt(n);if(0<=h.indexOf(r))e.push(r),n++;else{for(var s=n++;n<o&&i.charAt(n)==r;)n++;if(r=i.substring(s,n),l.indexOf(r)<0){var a=r.charCodeAt(0);if(c<=a&&a<=d||p<=a&&a<=_)throw new Error("Invalid datetime write format: "+t)}e.push(r)}if(n<o&&ne.Utils.isWhiteSpace(r=i.charAt(n)))for(e.push(r);n<o&&ne.Utils.isWhiteSpace(i.charAt(n));)n++}return e},o.prototype.parse=function(t){if(this._amText="AM",this._pmText="PM",t){var e=t.split(";");if(this._format=e[0]||o.DEFAULT_FORMAT,this._tokens=this.parseDateFormatTokens(this._format),this._hasAmPm=0<=this._tokens.indexOf("a")||0<=this._tokens.indexOf("A"),1<e.length&&e[1]){var i=e[1].split(",");0<i.length&&i[0]&&(this._amText=i[0]),1<i.length&&i[1]&&(this._pmText=i[1])}}},o.DEFAULT_FORMAT="yyyy/MM/dd",o.Formatters={},o);function o(t){this._baseYear=2e3,this._preserveTime=!1,this._hasAmPm=!1,this._formatString="",this.formatString=t}e.DateTimeWriter=i});t(G);G.DateTimeWriter;var U=e(function(t,e){Object.defineProperty(e,"__esModule",{value:!0});var i=(o.getFormatter=function(t){var e=o.Formatters[t];return e||(o.Formatters[t]=e=new o(t)),e},_dp(o,"format",{get:function(){return this._format}}),o.prototype.formatValue=function(t){return void 0===t?this._nullText:t?this._trueText:this._falseText},o.prototype.$_parse=function(t){if(this._falseText=this._trueText=null,t){var e=t.split(/[;\:]/);this._falseText=e[0],0<e.length&&(this._trueText=e[1]),1<e.length&&(this._nullText=e[2])}},o.Formatters={},o);function o(t){this.$_parse(this._format=t)}e.BooleanFormatter=i});t(U);U.BooleanFormatter;var W=e(function(t,e){Object.defineProperty(e,"__esModule",{value:!0});function u(t){return ne.Utils.included(t,"c","f","C","F","a","A")}var i=(o.getFormatter=function(t){var e=o.Formatters[t];return e||(o.Formatters[t]=e=new o(t)),e},Object.defineProperty(o,"Default",{get:function(){return o.getFormatter(o.DEFAULT_FORMAT)}}),_dp(o,"format",{get:function(){return this._format}}),_dp(o,"separator",{get:function(){return this._seperator}}),_dp(o,"groupSep",{get:function(){return this._groupSep}}),_dp(o,"minDigits",{get:function(){return this._minDigits}}),_dp(o,"maxDigits",{get:function(){return this._maxDigits}}),o.prototype.parse=function(t){this._minDigits=0,this._maxDigits=0,this._minInts=0,this._maxInts=0,this._parse(t)},o.prototype.getText=function(t,e){void 0===e&&(e=!0);var i=Number(t);if(isNaN(i))return"";var o=this._minDigits,n=0;if(this._optDecimal){var r=(a=(""+i).match(/(?:\.(\d+))?(?:[eE]([+-]?\d+))?$/))?Math.max(0,(a[1]?a[1].length:0)-(a[2]?+a[2]:0)):0;o=Math.min(Math.max(r,this._minDigits),this._maxDigits)}if(0<o&&this._round)switch(n=Math.pow(10,o),this._round){case"c":i=Math.ceil(n*i)/n;break;case"f":var s=i.toString().split(".");i=parseFloat(1<s.length?s[0]+"."+s[1].substr(0,o):s[0])}i="a"===this._round?Math.abs(i):i;var a,l=(i=Number(i.toPrecision(15))).toFixed(o);try{e||(n=parseFloat(l))!==Math.abs(parseFloat(l))||0!==n||(l=Math.abs(i).toFixed(o))}catch(t){}return this._seperator&&(l=l.replace(".",this._seperator)),this._reg?o?l.replace(this._regDecimal,this._replacement):l.replace(this._reg,this._replacement):l},o.prototype._parse=function(t){if(t=t&&t.trim()){var e=".",i=",";if(-1<t.indexOf(";")){var o=t.split(";");t=o[0],1<o.length&&o[1]&&!u(o[1])&&(e=o[1]),2<o.length&&o[2]&&!u(o[2])&&(i=o[2]),this._round=o[3]||o[2]||o[1],this._round=u(this._round)?this._round.toLowerCase():this._round}this._seperator="."==e?null:e,this._groupSep=","==i?null:i;var n=t.length,r=t.indexOf(".");if(this._optDecimal=0<t.indexOf("#",r),0<=r){for(var s=r+1;s<n&&"0"==t.charAt(s);s++)this._minDigits++,this._maxDigits++;for(;s<n&&"#"==t.charAt(s);s++)this._maxDigits++;t=t.substr(0,r)}if(t){var a=t.length;","==t.charAt(a-1)&&(this._groupPos=3,t=t.substr(0,a-1))}if(t){var l=t.length,h=!0;for(s=l-1;0<=s;s--){var d=t.charAt(s);if("0"==d&&h)this._minInts++,this._maxInts++;else if(0==this._groupPos&&","==d)this._groupPos=l-s-1;else{if("#"!=d)break;h=!1}}}0<this._groupPos&&(this._replacement="$&"+i,this._reg=new RegExp("\\d(?=(\\d{"+this._groupPos+"})+($|\\"+e+"))","g"),this._regDecimal=new RegExp("\\d(?=(\\d{"+this._groupPos+"})+\\"+e+")","g"))}},o.DEFAULT_FORMAT="#,##0.0",o.Formatters={},o);function o(t){this._optDecimal=!1,this._groupPos=0,this._replacement="$&,",this._minDigits=0,this._maxDigits=0,this._minInts=0,this._maxInts=0,this.parse(this._format=t)}e.DecimalFormatter=i});t(W);W.DecimalFormatter;var b=e(function(t,e){Object.defineProperty(e,"__esModule",{value:!0});var i,o=(i=re.Base,oe.__extends(n,i),_dp(n,"datetimeFormat",{get:function(){return this._datetimeFormat},set:function(t){t!=this._datetimeFormat&&(this._datetimeFormat=t,this._datetimeWriter=t?G.DateTimeWriter.getFormatter(t):null)}}),_dp(n,"booleanFormat",{get:function(){return this._booleanFormat},set:function(t){t!=this._booleanFormat&&(this._booleanFormat=t,this._booleanFormatter=t?U.BooleanFormatter.getFormatter(t):null)}}),_dp(n,"numberFormat",{get:function(){return this._numberFormat},set:function(t){t!=this._numberFormat&&(this._numberFormat=t,this._numberFormatter=t?W.DecimalFormatter.getFormatter(t):null)}}),_dp(n,"datetimeCallback",{get:function(){return this._datetimeCallback},set:function(t){this._datetimeCallback=t}}),_dp(n,"booleanCallback",{get:function(){return this._booleanCallback},set:function(t){this._booleanCallback=t}}),_dp(n,"numberCallback",{get:function(){return this._numberCallback},set:function(t){this._numberCallback=t}}),_dp(n,"nullDateText",{get:function(){return this._nullDateText},set:function(t){this._nullDateText=t}}),_dp(n,"nullText",{get:function(){return this._nullText},set:function(t){this._nullText=t}}),_dp(n,"nanText",{get:function(){return this._nanText},set:function(t){this._nanText=t}}),_dp(n,"datetimeWriter",{get:function(){return this._datetimeWriter}}),_dp(n,"booleanFormatter",{get:function(){return this._booleanFormatter}}),_dp(n,"numberFormatter",{get:function(){return this._numberFormatter}}),n);function n(t){var e=i.call(this)||this;return e._datetimeWriter=null,e._booleanFormatter=null,e._numberFormatter=null,e.assignFrom(t),e}e.DataOutputOptions=o});t(b);b.DataOutputOptions;var g=e(function(t,e){Object.defineProperty(e,"__esModule",{value:!0});var i=(o.prototype.compare=function(t,e,i){return t.dataType==lt.ValueType.NUMBER?Number(e)-Number(i):i<e?1:e<i?-1:0},o);function o(){}var n,r=(n=Error,oe.__extends(s,n),s);function s(t){return n.call(this,t)||this}e.DataSourceError=r;var a,l=(a=Error,oe.__extends(h,a),h);function h(){return a.call(this,"Client is editing (call grid.commit() or grid.cancel() first)")||this}e.ClientEditingError=l;var d,u=(d=$.EventAware,oe.__extends(_,d),_.prototype._doDispose=function(){try{this.$_internalClearFields(),this._fieldMap=null}catch(t){}this._fields=null,this._calcFields=null,this._fieldNames=null,this._fieldMap=null,this._boolParser=this._dateParser=null,this._comparers=null,this._clients=null,this._defComparer=null,d.prototype._doDispose.call(this)},_dp(_,"subTypeEnabled",{get:function(){return this._subTypeEnabled},set:function(t){if(t!=this._subTypeEnabled){this._subTypeEnabled=t;for(var e=0,i=this._fields;e<i.length;e++)i[e].$_resetTypes()}}}),_dp(_,"undoable",{get:function(){return this._undoable},set:function(t){this._undoable=t}}),_dp(_,"insertable",{get:function(){return this._insertable},set:function(t){this._insertable=t}}),_dp(_,"updatable",{get:function(){return this._updatable},set:function(t){this._updatable=t}}),_dp(_,"deletable",{get:function(){return this._deletable},set:function(t){this._deletable=t}}),_dp(_,"softDeleting",{get:function(){return this._softDeleting},set:function(t){this._softDeleting=t}}),_dp(_,"deleteCreated",{get:function(){return this._deleteCreated},set:function(t){this._deleteCreated=t}}),_dp(_,"checkStates",{get:function(){return this._checkStates},set:function(t){t!=this._checkStates&&(this._checkStates=t,this._doCheckStatesChanged())}}),_dp(_,"restoreMode",{get:function(){return this._restoreMode},set:function(t){if(t!=this._restoreMode){var e=this._restoreMode;this._restoreMode=t,this._doRestoreModeChanged(e,t)}}}),_dp(_,"strictRestore",{get:function(){return this._strictRestore},set:function(t){this._strictRestore=t}}),_dp(_,"booleanFormat",{get:function(){return this._booleanFormat},set:function(t){t!=this._booleanFormat&&(this._booleanFormat=t,this._boolParser=t?new O.BooleanConverter(t):O.BooleanConverter.Default)}}),_dp(_,"datetimeFormat",{get:function(){return this._datetimeFormat},set:function(t){t!=this._datetimeFormat&&(this._datetimeFormat=t,this.$_createDateReader())}}),_dp(_,"baseYear",{get:function(){return this._baseYear},set:function(t){this._baseYear=t}}),_dp(_,"amText",{get:function(){return this._amText},set:function(t){t!=this._amText&&(this._amText=t,this.$_createDateReader())}}),_dp(_,"pmText",{get:function(){return this._pmText},set:function(t){t!=this._pmText&&(this._pmText=t,this.$_createDateReader())}}),_dp(_,"alertClientError",{get:function(){return this._alertClientError},set:function(t){this._alertClientError=t}}),_dp(_,"throwClientError",{get:function(){return this._throwClientError},set:function(t){this._throwClientError=t}}),_dp(_,"commitBeforeDataEdit",{get:function(){return this._commitBeforeDataEdit},set:function(t){this._commitBeforeDataEdit=t}}),_dp(_,"calculateRuntime",{get:function(){return this._calculateRuntime||(this._calculateRuntime=new p.CalculateExpressionRuntime),this._calculateRuntime}}),_dp(_,"local",{get:function(){return!0}}),_dp(_,"immediateUpdate",{get:function(){return!1}}),_dp(_,"summarized",{get:function(){return!1}}),_dp(_,"fieldCount",{get:function(){return this._fields.length}}),_dp(_,"boolParser",{get:function(){return this._boolParser}}),_dp(_,"dateParser",{get:function(){return this._dateParser}}),_dp(_,"eventLocked",{get:function(){return 0<this._eventLock}}),_dp(_,"canUndo",{get:function(){return!1}}),_dp(_,"canRedo",{get:function(){return!1}}),_dp(_,"undoing",{get:function(){return!1}}),_dp(_,"redoing",{get:function(){return!1}}),_.prototype.registerClient=function(t){t&&this._clients.indexOf(t)<0&&this._clients.push(t)},_.prototype.unregisterClient=function(t){if(t){var e=this._clients.indexOf(t);0<=e&&this._clients.splice(e,1)}},_.prototype.cancelClients=function(){for(var t=0,e=this._clients;t<e.length;t++)e[t].cancelDataEditing()},_.prototype.commitClients=function(){for(var t=0,e=this._clients;t<e.length;t++)e[t].commitDataEditing()},_.prototype.beginUpdate=function(){this._checkClientState(),this._eventLock++},_.prototype.endUpdate=function(t){void 0===t&&(t=!0),this._checkClientState(),this._eventLock=Math.max(0,this._eventLock-1),0==this._eventLock&&(t&&(0<this._resetLock?this._fireReset():this._fireRefresh(),0<this._countLock&&this._fireRowCountChanged()),this._resetLock=this._countLock=0)},_.prototype.addField=function(t,e,i){if(this._checkClientState()){var o=null;this.beginUpdate();try{(o=this.$_internalAddField(t))&&o.$_resetTypes(this)}finally{e&&this._doFieldsReset(),this.endUpdate()}return o}},_.prototype.clearFields=function(){this._checkClientState()&&0<this._fields.length&&(this.$_internalClearFields(),this._doFieldsReset())},_.prototype.setFields=function(t){if(this._checkClientState()){this.beginUpdate();try{if(this.$_internalClearFields(),t)for(var e=0,i=t.length;e<i;e++){var o=this.$_internalAddField(t[e]);o&&o.$_resetTypes(this)}}finally{this.endUpdate(),this._doFieldsReset()}}},_.prototype.getField=function(t){return this._fields[t]},_.prototype.getFields=function(){return this._fields.slice()},_.prototype.fieldByName=function(t){if(t)for(var e=t.toUpperCase(),i=0,o=this._fields;i<o.length;i++){var n=o[i];if(n.fieldName==e)return n}return null},_.prototype.getFieldNames=function(){var t,e=this._fields.length,i=[];for(t=0;t<e;t++)i.push(this._fields[t].fieldName);return i},_.prototype.getOrgFieldNames=function(){var t,e=this._fields.length,i=[];for(t=0;t<e;t++)i.push(this._fields[t].orgFieldName);return i},_.prototype.getFieldName=function(t){return this._checkFieldIndex(t),this._fields[t].fieldName},_.prototype.getOrgFieldName=function(t){return this._checkFieldIndex(t),this._fields[t].orgFieldName},_.prototype.getFieldIndex=function(t){if(t){var e=t.toUpperCase();if(e in this._fieldMap)return this._fieldMap[e]}return-1},_.prototype.getFieldIndexC=function(t){return t in this._fieldMap?this._fieldMap[t]:-1},_.prototype.getBaseField=function(t){return 0<=t&&t<this._fields.length?this.getFieldIndex(this._fields[t].baseField):-1},_.prototype.getValueType=function(t){return this._fields[t].dataType},_.prototype.getDefaultValue=function(t){return this._fields[t].defaultValue()},_.prototype.hasData=function(t){return!1},_.prototype.objectToRow=function(t){var e=[];if(t)for(var i=0,o=this.fieldCount;i<o;i++){var n=this.getOrgFieldName(i);t.hasOwnProperty(n)&&(e[i]=t[n])}return e},_.prototype.canUpdateField=function(t,e){if(0<=e&&e<this._fields.length){if(!this._fields[e].updatable&&0<=t)try{var i=this.getRowState(t);return!i||i==I.RowState.CREATED||i==I.RowState.CREATE_AND_DELETED}catch(t){return!1}return!0}return!1},_.prototype.getDataComparer=function(t){if(0<=t){var e=this._comparers[t];return e||null}},_.prototype.setDataComparer=function(t,e){this._comparers[t]=e||void 0},_.prototype.canSummarize=function(t){if(0<=t&&t<this.fieldCount){var e=this.getValueType(t);if(e==lt.ValueType.BOOLEAN||e==lt.ValueType.NUMBER||lt.ValueType.DATE)return!0}return!1},_.prototype.getDistinctValues=function(t,e,i){return void 0===i&&(i=lt.SortDirection.ASCENDING),null},_.prototype.exportToJson=function(){},_.prototype.exportToCsv=function(t){},_.prototype.exportToXml=function(){},_.prototype.canUpdateRow=function(t){return!1},_.prototype.canAppendRow=function(){return!1},_.prototype.canInsertRow=function(t){return!1},_.prototype.canDeleteRow=function(t){return!1},_.prototype.undo=function(){},_.prototype.redo=function(){},_.prototype.clearCommandStack=function(){},_.prototype._convertValues=function(t,e){var i="*"in e&&"*"==e["*"]?t:{};for(var o in e)i[e[o]]=t[o];return i},_.prototype.getClientsBusy=function(){var t={busy:!1,cnt:0,client:null};if(this.disposing)return t;for(var e=this._clients.length;e--;)this._clients[e].isDataEditing()&&(t.busy=!0,t.cnt++,t.client=this._clients[e]);return t},_.prototype._checkClientState=function(){if(this.getClientsBusy().busy){if(this._throwClientError)throw new l;return this._alertClientError&&ne.Utils.alert((new l).message),!1}return!0},_.prototype._checkFieldIndex=function(t){if(t<0||t>=this._fields.length)throw new r("Invalid field index: "+t)},_.prototype.$_internalClearFields=function(){this._checkClientState();for(var t=0,e=this._fields;t<e.length;t++)e[t].$_setIndex(-1);this._fields.splice(0,this._fields.length),this._calcFields.splice(0,this._calcFields.length),this._fieldNames.splice(0,this._fieldNames.length),this._fieldMap={}},_.prototype.$_internalInsertField=function(t,e){this._checkClientState();var i=this._fields.length;if(t<0||i<t)throw ne.Utils.isDebugging(),new r("index is out of bounds:"+t);if(e){e.$_prepare(this),this._fields.splice(t,0,e),this._fieldNames.splice(t,0,e.fieldName),e.calculated&&this._calcFields.push(e),e.$_setIndex(t);for(var o=(this._fieldMap[e.fieldName]=t)+1;o<=i;o++)(e=this._fields[o]).$_setIndex(o),this._fieldMap[e.fieldName]=o;return t}return-1},_.prototype.$_addField=function(t,e,i,o){if(!t)throw new r("fieldName must be exists.");if(0<=this.getFieldIndex(t))throw new r("fieldName is already exists: "+t);var n=new c.DataField(t,e,i);return o&&n.assignFrom(o),this.$_internalInsertField(this._fields.length,n),n},_.prototype.$_internalAddField=function(t){var e=null;return"string"==typeof t?e=this.$_addField(t,lt.ValueType.TEXT,0):t instanceof c.DataField?(e=t.clone(),this.$_internalInsertField(this._fields.length,e)):t&&(e=this.$_addField(t.fieldName,t.dataType||lt.ValueType.TEXT,t.length,t)),e},_.prototype._internalCalculateValues=function(t,e){var i=this._calcFields;if(0<i.length){for(var o=[],n=0;n<t.length;n++)o[n]=this.getField(n).readValue(t[n]);n=0;for(var r=i.length;n<r;n++){var s=i[n],a=this._fieldMap[s.fieldName];t[a]=o[a]=s.readValue(s.$_calculateValue(this,this.calculateRuntime,e,s.orgFieldName,this._fieldNames,this.getOrgFieldNames(),o))}}},_.prototype.refreshFieldFormats=function(){for(var t=0,e=this._fields;t<e.length;t++)e[t].$_refreshFormats(this)},_.prototype.refreshFieldFormat=function(t){t&&t.$_refreshFormats(this)},_.prototype._getRowValues=function(){return new Array(this.fieldCount)},_.prototype.$_createOutputRows=function(t,e,i){void 0===i&&(i=0);var o=this.fieldCount,n=t.length;e instanceof b.DataOutputOptions||(e=new b.DataOutputOptions(e));var r=e.nullDateText,s=e.nullText,a=e.nanText;try{for(var l=0;l<o;l++){var h=this.getField(l),d=h.dataType,u=h.orgFieldName,_=void 0,c=void 0,p=void 0,f=void 0,g=void 0,m=void 0;if(d==lt.ValueType.DATETIME&&((_=e.datetimeCallback)||(f=e.datetimeWriter)||r))if(_)for(var y=0;y<n;y++)(C=t[y])[u]=_(this.handler,y+i,u,C[u]);else for(y=0;y<n;y++){var v=(C=t[y])[u];C[u]=v?f?f.getText(C[u]):v:r}else if(d==lt.ValueType.BOOLEAN&&((c=e.booleanCallback)||(g=e.booleanFormatter)))if(c)for(y=0;y<n;y++)(C=t[y])[u]=c(this.handler,y+i,u,C[u]);else for(y=0;y<n;y++)(C=t[y])[u]=g.formatValue(C[u]);else if(d==lt.ValueType.NUMBER&&((p=e.numberCallback)||(m=e.numberFormatter)||a))if(p)for(y=0;y<n;y++)(C=t[y])[u]=p(this.handler,y+i,u,C[u]);else for(y=0;y<n;y++){var w=(C=t[y])[u];C[u]=null==w||isNaN(w)?a:m?m.getText(w):w}else if(null!=s&&null!=s)for(y=0;y<n;y++){var C,x=(C=t[y])[u];C[u]=null==x||null==x?s:x}}}finally{e&&e.dispose()}},_.prototype.$_sortRows=function(t,e,i,o,n){do{var r=o,s=n,a=t[Math.floor((o+n)/2)];do{for(;r<=s&&!(i(e,a,t[r])<=0);)r++;for(;r<=s&&!(0<=i(e,a,t[s]));)s--;if(r<=s){if(r!=s){var l=t[r];t[r]=t[s],t[s]=l}r++,s--}}while(r<=s);o<s&&this.$_sortRows(t,e,i,o,s),o=r}while(o<n)},_.prototype.$_createDateReader=function(){this._datetimeFormat?(this._dateParser=new w.DateTimeReader(this._datetimeFormat),this._dateParser.amText=this._amText,this._dateParser.pmText=this._pmText,this._dateParser.baseYear=this._baseYear):this._dateParser=w.DateTimeReader.Default},_.prototype._doCheckStatesChanged=function(){},_.prototype._doRestoreModeChanged=function(t,e){},_.prototype._doFieldsReset=function(){},_.prototype._refreshClients=function(){},_.prototype._fireReset=function(){},_.prototype._fireRowCountChanged=function(){},_.prototype._fireRefresh=function(){},_.prototype._fireCommandStackChanged=function(t,e){this._eventLock<=0&&this.fireEvent(_.COMMAND_STACK_CHANGED,t,e)},_.COMMAND_STACK_CHANGED="onDataSourceCommandStackChanged",_);function _(){var t=d.call(this)||this;return t._subTypeEnabled=!0,t._undoable=!1,t._insertable=!0,t._updatable=!0,t._deletable=!0,t._softDeleting=!1,t._deleteCreated=!1,t._checkStates=!0,t._restoreMode=f.RestoreMode.NONE,t._strictRestore=!1,t._booleanFormat=null,t._datetimeFormat=null,t._baseYear=2e3,t._amText="AM",t._pmText="PM",t._alertClientError=!0,t._throwClientError=!1,t._commitBeforeDataEdit=!1,t._fields=[],t._calcFields=[],t._fieldNames=[],t._fieldMap={},t._defComparer=new i,t._comparers=[],t._boolParser=O.BooleanConverter.Default,t._dateParser=w.DateTimeReader.Default,t._eventLock=0,t._resetLock=0,t._countLock=0,t._clients=[],t}e.DataSource=u});t(g);g.DataSourceError,g.ClientEditingError,g.DataSource;var _=e(function(t,e){Object.defineProperty(e,"__esModule",{value:!0});var i,o=(i=re.Base,oe.__extends(n,i),n.prototype.connect=function(t){},n.prototype.disconnect=function(){},n.prototype.clearRows=function(){},n.prototype.setRows=function(){},n.prototype.setRowCount=function(t){},n.prototype.insertRow=function(t){},n.prototype.insertRows=function(t,e){},n.prototype.removeRow=function(t){},n.prototype.removeRows=function(t){},n.prototype.updateRow=function(t){},n.prototype.updateRows=function(t,e){},n.prototype.updateRowList=function(t){},n.prototype.setValue=function(t,e){},n.prototype.moveRow=function(t,e){},n.prototype.moveRows=function(t,e,i){},n.prototype.moveRowList=function(t,e){},n.prototype.changeStates=function(t){},n);function n(){return i.call(this)||this}e.DataTag=o;var r,s=(r=re.Base,oe.__extends(a,r),a.prototype._doDispose=function(){this._owner=null,this._tags=null,r.prototype._doDispose.call(this)},a.prototype.add=function(t){null!=this._tags&&t&&this._tags.indexOf(t)<0&&(this._tags.push(t),t.connect(this._owner))},a.prototype.remove=function(t){if(null!=this._tags&&t){var e=this._tags.indexOf(t);0<=e&&(this._tags.splice(e,1),t.disconnect())}},a.prototype.clearRows=function(){if(null!=this._tags)for(var t=0,e=this._tags;t<e.length;t++)e[t].clearRows()},a.prototype.setRows=function(){if(null!=this._tags)for(var t=0,e=this._tags;t<e.length;t++)e[t].setRows()},a.prototype.setRowCount=function(t){if(null!=this._tags)for(var e=0,i=this._tags;e<i.length;e++)i[e].setRowCount(t)},a.prototype.insertRow=function(t){if(null!=this._tags)for(var e=0,i=this._tags;e<i.length;e++)i[e].insertRow(t)},a.prototype.insertRows=function(t,e){if(null!=this._tags)for(var i=0,o=this._tags;i<o.length;i++)o[i].insertRows(t,e)},a.prototype.removeRow=function(t){if(null!=this._tags)for(var e=0,i=this._tags;e<i.length;e++)i[e].removeRow(t)},a.prototype.removeRows=function(t){if(null!=this._tags)for(var e=0,i=this._tags;e<i.length;e++)i[e].removeRows(t)},a.prototype.updateRow=function(t){if(null!=this._tags)for(var e=0,i=this._tags;e<i.length;e++)i[e].updateRow(t)},a.prototype.updateRows=function(t,e){if(null!=this._tags)for(var i=0,o=this._tags;i<o.length;i++)o[i].updateRows(t,e)},a.prototype.updateRowList=function(t){if(null!=this._tags)for(var e=0,i=this._tags;e<i.length;e++)i[e].updateRowList(t)},a.prototype.setValue=function(t,e){if(null!=this._tags)for(var i=0,o=this._tags;i<o.length;i++)o[i].setValue(t,e)},a.prototype.moveRow=function(t,e){if(null!=this._tags)for(var i=0,o=this._tags;i<o.length;i++)o[i].moveRow(t,e)},a.prototype.moveRows=function(t,e,i){if(null!=this._tags)for(var o=0,n=this._tags;o<n.length;o++)n[o].moveRows(t,e,i)},a.prototype.moveRowList=function(t,e){if(null!=this._tags)for(var i=0,o=this._tags;i<o.length;i++)o[i].moveRowList(t,e)},a);function a(t){var e=r.call(this)||this;return e._tags=[],e._owner=t,e}e.DataTagCollection=s});t(_);_.DataTag,_.DataTagCollection;var m=e(function(t,e){Object.defineProperty(e,"__esModule",{value:!0});var r=(i.prototype.dispose=function(){this._exprNode=null},_dp(i,"criteria",{get:function(){return this._criteria},set:function(t){t!=this._criteria&&(this._criteria=t,this._exprNode=t?H.ExpressionParser.Default.parse(t,i.CAPITAL_INDEXERS):null)}}),i.prototype.select=function(t,e,i){return!this._exprNode||(t.setRow(e,i),this._exprNode.evaluate(t))},i.CAPITAL_INDEXERS=["value","values","len"],i);function i(t){this._active=!1,this._exprNode=null,this.criteria=t}e.DataFilter=r;var o=(n.prototype.dispose=function(){return this._filters&&this._filters.forEach(function(t,e){t.dispose()}),this._filters=null},_dp(n,"filterMode",{get:function(){return this._filterMode},set:function(t){var e=t?t.toLocaleLowerCase():t;e!=this._filterMode&&(this._filterMode=e,this._or=this._filterMode==n.FILTER_OR)}}),n.prototype.load=function(t){if(!t||t instanceof Array||(t=[t]),this._filters=[],t instanceof Array)for(var e=0,i=t.length;e<i;e++){var o=null,n=t[e];n&&("string"==typeof n?o=new r(n):n.criteria&&(o=new r(n.criteria))),o&&this._filters.push(o)}},n.prototype.prepare=function(t,e){t.prepare(e)},n.prototype.select=function(t,e,i){var o=this._filters,n=o.length;if(this._or){for(var r=0;r<n;r++)if(1==o[r].select(t,e,i))return!0;return!1}for(r=0;r<n;r++)if(0==o[r].select(t,e,i))return!1;return!0},n.FILTER_AND="and",n.FILTER_OR="or",n);function n(t,e){this._filterMode=n.FILTER_AND,this._or=!1,this.load(t),e&&(this.filterMode=e)}e.DataFilterCollection=o;var s,a=(s=H.ExpressionRuntime,oe.__extends(l,s),l.prototype._doDispose=function(){this._ds=null,s.prototype._doDispose.call(this)},l.prototype.prepare=function(t){this._ds=t,this._fieldCount=t?t.fieldCount:0},l.prototype.setRow=function(t,e){this._row=t,this._values=e},l.prototype.isIdentifier=function(t){return t=t.toLowerCase(),l.IDENTS.hasOwnProperty(t)?l.IDENTS[t]:s.prototype.isIdentifier.call(this,t)},l.prototype.evaluateIdentifier=function(t){switch(t){case l.ID_ROW:return this._row}throw new H.ExpressionEvaluationError("Invalid identifier key: "+t)},l.prototype.evaluateIndexerI=function(t,e){if(e<0||e>=this._fieldCount)throw new H.ExpressionEvaluationError("Data field index out of bounds:"+e);switch(t){case l.ID_VALUE:case l.ID_VALUES:return this._values[e]}throw new H.ExpressionEvaluationError("Invalid identifier indexer: "+t)},l.prototype.evaluateIndexerS=function(t,e,i){switch(t){case l.ID_VALUE:case l.ID_VALUES:var o=this.getField(e,i);return this._values[o]}throw new H.ExpressionEvaluationError("Invalid identifier indexer: "+t)},l.prototype.getField=function(t,e){var i=e?this._ds.getFieldIndexC(t):this._ds.getFieldIndex(t);if(i<0||i>=this._fieldCount)throw new H.ExpressionEvaluationError("Data field is not exits:"+t);return i},l.IDENTS={row:l.ID_ROW=0,value:l.ID_VALUE=1,values:l.ID_VALUES=2},l);function l(){var t=s.call(this)||this;return t._ds=null,t._fieldCount=0,t._row=-1,t._values=null,t}e.DataFilterRuntime=a});t(m);m.DataFilter,m.DataFilterCollection,m.DataFilterRuntime;var C=e(function(t,e){Object.defineProperty(e,"__esModule",{value:!0});var i,o=(i=g.DataSource,oe.__extends(n,i),n.prototype._doDispose=function(){this._tags=this._tags.dispose(),this._filters=this._filters&&this._filters.dispose(),this._filterRuntime=this._filterRuntime.dispose(),this._commandListeners=null,i.prototype._doDispose.call(this)},n.prototype.editCommandStackChanged=function(t,e,i){this._fireCommandStackChanged(e,i)},_dp(n,"filters",{get:function(){return this._filters}}),_dp(n,"filterRuntime",{get:function(){return this._filterRuntime}}),_dp(n,"deletedCount",{get:function(){return 0}}),_dp(n,"tags",{get:function(){return this._tags}}),n.prototype.addTag=function(t){this._tags.add(t)},n.prototype.removeTag=function(t){this._tags.remove(t)},n.prototype.setFilterMode=function(t){this._filters&&t==this._filters.filterMode||(this._filters?this._filters.filterMode=t:this._filters=new m.DataFilterCollection(null,t))},n.prototype.setFilters=function(t,e){!t||t instanceof m.DataFilterCollection?(this._filters=t,this._filters&&e&&(this._filters.filterMode=e)):this._filters=new m.DataFilterCollection(t,e)},n.prototype.getRowObject=function(t){if(t<0||t>=this.rowCount)throw new g.DataSourceError("row is out of range: "+t);for(var e={},i=0,o=this.fieldCount;i<o;i++){var n=this.getOrgFieldName(i),r=this.getValue(t,i);e[n]=r}return e},n.prototype.objectToRow=function(t){var e=[];if(t)for(var i=0,o=this.fieldCount;i<o;i++){var n=this.getOrgFieldName(i);t.hasOwnProperty(n)&&(e[i]=t[n])}return e},n.prototype.equalValues=function(t,e,i){if(e===i)return!0;var o=this.getField(t),n=this.getValue(e,t),r=this.getValue(i,t);return o.equalValues(n,r)},n.prototype.equalTexts=function(t,e,i){if(e===i)return!0;this.getField(t);var o=this.getValue(e,t),n=this.getValue(i,t);return null==o?null==n:null!=n&&o.toLowerCase()==n.toLowerCase()},n.prototype.sameValues=function(t,e,i){if(e===i)return!0;var o=this.getField(t),n=this.getValue(e,t),r=this.getValue(i,t);return o.sameValues(n,r)},n.prototype.compareValues=function(t,e,i){return 0},n.prototype.compareTexts=function(t,e,i){return 0},n.prototype.compareNumbers=function(t,e,i){return 0},n.prototype.compareBools=function(t,e,i){return 0},n.prototype.compareObjects=function(t,e,i){return 0},n.prototype.summarize=function(t,e){return!1},n.prototype.summarizeRange=function(t,e,i){return!1},n.prototype.copyRows=function(t,e,i,o){},_dp(n,"hiddenCount",{get:function(){return 0}}),n.prototype.isHiddenRow=function(t){return!1},n.prototype.registerCommandListener=function(t){t&&this._commandListeners&&this._commandListeners.indexOf(t)<0&&this._commandListeners.push(t)},n.prototype.unregisterCommandListener=function(t){var e=this._commandListeners?this._commandListeners.indexOf(t):-1;0<=e&&this._commandListeners.splice(e,1)},n.prototype.findRow=function(t,e,i){},n.prototype._doFieldsReset=function(){this._fireReset()},n.prototype._refreshClients=function(){this.fireRefreshClients()},n.prototype._keepCommandStates=function(t){if(0<this._commandListeners.length)return this._commandListeners[0].getCommandStates(t)},n.prototype._yieldCommandStates=function(t,e){if(0<this._commandListeners.length)return this._commandListeners[0].setCommandStates(t,e)},n.prototype.fireDisposed=function(){this._eventLock<=0&&this.fireEvent(n.DISPOSED)},n.prototype._fireReset=function(){this._eventLock<=0?this.fireEvent(n.RESET):this._resetLock++},n.prototype._fireRefresh=function(){this._eventLock<=0&&this.fireEvent(n.REFRESH)},n.prototype.fireRefreshClients=function(){this._eventLock<=0&&this.fireEvent(n.REFRESH)},n.prototype._fireRowCountChanged=function(){this._eventLock<=0?this.fireEvent(n.ROW_COUNT_CHANGED):this._countLock++},n.prototype.fireRowInserting=function(t,e){return!(this._eventLock<=0)||this.fireConfirmEvent(n.ROW_INSERTING,t,e)},n.prototype.fireRowInserted=function(t){this._eventLock<=0&&(this.fireEvent(n.ROW_INSERTED,t),this.fireEvent(n.DATA_CHANGED))},n.prototype.fireRowsInserted=function(t,e){this._eventLock<=0&&(this.fireEvent(n.ROWS_INSERTED,t,e),this.fireEvent(n.DATA_CHANGED))},n.prototype.fireRowRemoving=function(t){return!(this._eventLock<=0)||this.fireConfirmEvent(n.ROW_REMOVING,t)},n.prototype.fireRowRemoved=function(t){this._eventLock<=0&&(this.fireEvent(n.ROW_REMOVED,t),this.fireEvent(n.DATA_CHANGED))},n.prototype.fireRowsRemoving=function(t){return!(this._eventLock<=0)||this.fireConfirmEvent(n.ROWS_REMOVING,t)},n.prototype.fireRowsRemoved=function(t){this._eventLock<=0&&(this.fireEvent(n.ROWS_REMOVED,t),this.fireEvent(n.DATA_CHANGED))},n.prototype.fireRowUpdating=function(t,e){return!(this._eventLock<=0)||this.fireConfirmEvent(n.ROW_UPDATING,t,e)},n.prototype.fireRowUpdated=function(t){this._eventLock<=0&&(this.fireEvent(n.ROW_UPDATED,t),this.fireEvent(n.DATA_CHANGED))},n.prototype.fireRowsUpdated=function(t,e){this._eventLock<=0&&(this.fireEvent(n.ROWS_UPDATED,t,e),this.fireEvent(n.DATA_CHANGED))},n.prototype.fireRowListUpdated=function(t){this._eventLock<=0&&(this.fireEvent(n.ROW_LIST_UPDATED,t),this.fireEvent(n.DATA_CHANGED))},n.prototype.fireRowMoving=function(t,e){return!(this._eventLock<=0)||this.fireConfirmEvent(n.ROW_MOVING,t,e)},n.prototype.fireRowMoved=function(t,e){this._eventLock<=0&&this.fireEvent(n.ROW_MOVED,t,e)},n.prototype.fireRowsMoving=function(t,e,i){return!(this._eventLock<=0)||this.fireConfirmEvent(n.ROWS_MOVING,t,e,i)},n.prototype.fireRowsMoved=function(t,e,i){this._eventLock<=0&&this.fireEvent(n.ROWS_MOVED,t,e,i)},n.prototype.fireRowListMoving=function(t,e){return!(this._eventLock<=0)||this.fireConfirmEvent(n.ROW_LIST_MOVING,t,e)},n.prototype.fireRowListMoved=function(t,e){this._eventLock<=0&&this.fireEvent(n.ROW_LIST_MOVED,t,e)},n.prototype.fireValueChanging=function(t,e,i){return!(this._eventLock<=0)||this.fireConfirmEvent(n.VALUE_CHANGING,t,e,i)},n.prototype.fireValueChanged=function(t,e){this._eventLock<=0&&(this.fireEvent(n.VALUE_CHANGED,t,e),this.fireEvent(n.DATA_CHANGED))},n.prototype.fireRowStateChanged=function(t){this._eventLock<=0&&this.fireEvent(n.STATE_CHANGED,t)},n.prototype.fireRowStatesChanged=function(t){this._eventLock<=0&&this.fireEvent(n.STATES_CHANGED,t)},n.prototype.fireRowStatesCleared=function(){this._eventLock<=0&&this.fireEvent(n.STATES_CLEARED)},n.prototype.fireRestoreRows=function(t){this._eventLock<=0&&this.fireEvent(n.RESTOREROWS,t)},n.prototype.fireRowHided=function(t,e){this._eventLock<=0&&this.fireEvent(n.ROW_HIDED,t,e)},n.DISPOSED="onDataProvderDisposed",n.RESET="onDataProviderReset",n.REFRESH="onDataProviderRefresh",n.REFRESH_CLIENT="onDataProviderRefreshClient",n.ROW_COUNT_CHANGED="onDataProviderRowCountChanged",n.ROW_INSERTING="onDataProviderRowInserting",n.ROW_INSERTED="onDataProviderRowInserted",n.ROWS_INSERTED="onDataProviderRowsInserted",n.ROW_REMOVING="onDataProviderRowRemoving",n.ROW_REMOVED="onDataProviderRowRemoved",n.ROWS_REMOVING="onDataProviderRowsRemoving",n.ROWS_REMOVED="onDataProviderRowsRemoved",n.ROW_UPDATING="onDataProviderRowUpdating",n.ROW_UPDATED="onDataProviderRowUpdated",n.ROWS_UPDATED="onDataProviderRowsUpdated",n.ROW_LIST_UPDATED="onDataProviderRowListUpdated",n.ROW_MOVING="onDataProviderRowMoving",n.ROW_MOVED="onDataProviderRowMoved",n.ROWS_MOVING="onDataProviderRowsMoving",n.ROWS_MOVED="onDataProviderRowsMoved",n.ROW_LIST_MOVING="onDataProviderRowListMoving",n.ROW_LIST_MOVED="onDataProviderRowListMoved",n.VALUE_CHANGING="onDataProviderValueChanging",n.VALUE_CHANGED="onDataProviderValueChanged",n.DATA_CHANGED="onDataProviderDataChanged",n.STATE_CHANGED="onDataProviderStateChanged",n.STATES_CHANGED="onDataProviderStatesChanged",n.STATES_CLEARED="onDataProviderStatesCleared",n.RESTOREROWS="onDataProviderRestoreRows",n.ROW_HIDED="onDataProviderRowHided",n);function n(){var t=i.call(this)||this;return t._tags=new _.DataTagCollection(t),t._filterRuntime=new m.DataFilterRuntime,t._commandListeners=[],t}e.DataProvider=o});t(C);C.DataProvider;var _t=e(function(t,e){Object.defineProperty(e,"__esModule",{value:!0});var o,i,h=["yy","yyyy","M","MM","d","dd","a","A","H","HH","h","hh","m","mm","s","ss"],_=[".","/","-",":"],c="0".charCodeAt(0),p="9".charCodeAt(0),n=[31,28,31,30,31,30,31,31,30,31,30],f=["am","pm","AM","PM","Am","Pm","aM","pM"];(i=o=e.DateProperty||(e.DateProperty={}))[i.YEAR=0]="YEAR",i[i.HALF=1]="HALF",i[i.QUARTER=2]="QUARTER",i[i.MONTH=3]="MONTH",i[i.WEEK=4]="WEEK",i[i.DAY=5]="DAY",i[i.HOUR=6]="HOUR";var r=(s.getSimpleDateNull=function(t){if(t instanceof Date)return t;if("number"==typeof t)return new Date(t);var e=(t=8===t.length&&/^[0-9]*$/.test(t)?t.replace(/(\d{4})(\d{2})(\d{2})/,"$1/$2/$3"):t).split(/[.//-]/);if(3!=e.length)return null;var i=parseInt(e[0]),o=parseInt(e[1])-1,n=parseInt(e[2]);return i==(t=new Date(i,o,n)).getFullYear()&&o==t.getMonth()&&n==t.getDate()?t:null},s.getDateProperty=function(t,e){if(!t)return null;switch(e){case o.YEAR:return t.getFullYear();case o.HALF:return 5<t.getMonth()?2:1;case o.QUARTER:return Math.floor(t.getMonth()/3);case o.MONTH:return t.getMonth();case o.WEEK:var i=new Date(t.getFullYear(),t.getMonth(),1);return i.setDate(i.getDate()-i.getDay()),Math.floor((t.getTime()-i.getTime())/6048e5)+1;case o.DAY:return t.getDate();case o.HOUR:return t.getHours()}},_dp(s,"formatString",{get:function(){return this._formatString},set:function(t){t!=this._formatString&&(this._formatString=t,this.parse(t))}}),_dp(s,"format",{get:function(){return this._format}}),s.prototype.getDate=function(t){var e;if(t=t.trim()){for(var i=this.parseDateFormatTokens(this._format),o=this.parseDateValueTokens(t,this._amText,this._pmText),n=(0<=i.indexOf("a")||i.indexOf("A"),i.length),r=o.length,s=0,a=1,l=1,h=0,d=0,u=0,_=0,c=0,p=0,f=0;p<n&&f<r;){var g=i[p],m=o[f];switch(g.charAt(0)){case"L":var y=String(m);for(p++;p<n&&"E"!=(t=i[p]);){var v=y?parseInt(y.substr(0,t.length)):-1;switch(y=y.substr(t.length),t.charAt(0)){case"Y":case"y":s=Math.max(0,v);break;case"M":a=0<=v?v:1;break;case"D":case"d":l=0<=v?v:1;break;case"H":case"h":h=Math.max(0,v);break;case"m":d=Math.max(0,v);break;case"s":u=Math.max(0,v)}p++}break;case"Y":case"y":s=parseInt(m);break;case"M":a=parseInt(m);break;case"D":case"d":l=parseInt(m);break;case"H":case"h":h=parseInt(m);break;case"m":d=parseInt(m);break;case"s":u=parseInt(m);break;case"a":(t=String(m))&&(t=t.toLowerCase(),this._amText&&t==this._amText.toLowerCase()||"am"==t?_=12:(this._pmText&&t==this._pmText.toLowerCase()||"pm"==t)&&(c=12))}p++,f++}if(s<100&&0<=s&&(s+=this._baseYear),s<0||9999<s)return null;if(ne.Utils.included(a,1,3,5,7,8,10,12)){if(l<1||31<l)return null}else if(ne.Utils.included(a,4,6,9,11)){if(l<1||30<l)return null}else{if(2!=a)return null;if(29<l)return null;if(29==l&&(s%4!=0||s%100==0)&&s%400!=0)return null}if(h<0||24<h)return null;if((0<_||0<c)&&12<h)return null;if(d<0||59<d)return null;if(u<0||59<u)return null;0<_?h%=12:0<c&&(h=h%12+12),e=new Date(s,a-1,l,h,d,u)}return e},s.prototype.getDateNull=function(t){try{return this.getDate(t)}catch(t){}return null},s.prototype.getText=function(t){var e=t;e instanceof Date||(e=new Date(t));for(var i=this.parseDateFormatTokens(this._format),o=0<=i.indexOf("a")||0<=i.indexOf("A"),n="",r=0,s=i.length;r<s;r++){var a=i[r],l=a.length;switch(a.charAt(0)){case"L":break;case"Y":case"y":n+=2<l?e.getFullYear():ne.Utils.pad(e.getFullYear()%100);break;case"M":n+=1<l?ne.Utils.pad(e.getMonth()+1):e.getMonth()+1;break;case"D":case"d":n+=1<l?ne.Utils.pad(e.getDate()):e.getDate();break;case"H":n+=1<l?ne.Utils.pad(e.getHours()):e.getHours();break;case"h":if(o){var h=e.getHours();0==h?h=12:12<h&&(h-=12),n+=1<l?ne.Utils.pad(h):h}else n+=1<l?ne.Utils.pad(e.getHours()):e.getHours();break;case"m":n+=1<l?ne.Utils.pad(e.getMinutes()):e.getMinutes();break;case"s":n+=1<l?ne.Utils.pad(e.getSeconds()):e.getSeconds();break;case"A":case"a":e.getHours()<12?n+=this._amText:n+=this._pmText;break;default:n+=a}}return n},s.prototype.daysOfYear=function(t){for(var e=0,i=0;i<t.getMonth();i++)e+=n[i];if(2<=t.getMonth()){var o=t.getFullYear();(o%400==0||o%4==0&&o%100!=0)&&e++}return e+=t.getDate()},s.prototype.daysOfPriorYears=function(t){return t<=1900?0:365*(--t-1899)+(Math.floor(t/4)-Math.floor(t/100)+Math.floor(t/400)-460)},s.prototype.toExcelDate=function(t){var e=(1e3*(60*(60*t.getHours()+t.getMinutes())+t.getSeconds())+t.getMilliseconds())/864e5,i=this.daysOfPriorYears(t.getFullYear())+this.daysOfYear(t)+e;return 60<=i&&i++,i},s.prototype.splitWords=function(t){for(var e=t.length,i=[],o=0,n=0,r=t.charAt(n++);n<e;){var s=t.charAt(n);s!=r&&(i.push(t.substring(o,n)),r=s,o=n),n++}return o<e&&i.push(t.substr(o)),i},s.prototype.parseDateFormatTokens=function(t){var e=[],i=t&&t.trim();if(i){for(var o=i.length,n=0;n<o;){var r=i.charAt(n);if(0<=_.indexOf(r))e.push(r),n++;else{for(var s=n++;n<o&&i.charAt(n)==r;)n++;if(r=i.substring(s,n),h.indexOf(r)<0)throw new Error("Invalid datetime read format: "+t);e.push("A"==r?"a":r)}if(n<o&&ne.Utils.isWhiteSpace(r=i.charAt(n)))for(e.push(" ");n<o&&ne.Utils.isWhiteSpace(i.charAt(n));)n++}var a=[],l=0;for(o=e.length,n=0;n<o;n++)"a"==(r=e[n])||h.indexOf(r)<0?(1<l&&a.push("E"),a.push(r),l=0):(1==l&&a.splice(a.length-2,0,"L"),a.push(r),l++);e=a}return e},s.prototype.parseDateValueTokens=function(t,e,i){var o=[],n=t.trim();if(n){var r=f.slice();e&&r.push(e),i&&r.push(i);for(var s=n.length,a=0;a<s;){var l=n.charAt(a);if(0<=_.indexOf(l))o.push(l),a++;else if(l.charCodeAt(0)>=c&&l.charCodeAt(0)<=p){for(var h=a++;a<s&&n.charCodeAt(a)>=c&&n.charCodeAt(a)<=p;)a++;l=n.substring(h,a),o.push(l)}else{for(var d=-1,u=0;u<r.length;u++)if(n.indexOf(r[u],a)==a){d=u;break}if(d<0)throw"Invalid date value: "+n;o.push(r[u]),a+=r[u].length}if(a<s&&ne.Utils.isWhiteSpace(l=n.charAt(a)))for(o.push(" ");a<s&&ne.Utils.isWhiteSpace(n.charAt(a));)a++}}return o},s.prototype.validateDateFormat=function(t){if(t=t&&t.trim()){var e=this.parseDateFormatTokens(t),i=0<=e.indexOf("a");if(i&&0<=e.indexOf("H"))throw"Invalid datetime read format - 'H'와 'a'가 같이 존재할 수 없습니다: "+t;if(0<=e.indexOf("h")&&!i)throw"Invalid datetime read format - 'h'가 있으면 'a'가 반드시 있어야 합니다: "+t}},s.prototype.parse=function(t){if(this._amText="am",this._pmText="pm",this._baseYear=2e3,this._preserveTime=!1,t){var e=t.split(";");if(this._format=e[0]?e[0]:s.DEFAULT_FORMAT,this.validateDateFormat(this._format),1<e.length&&e[1]&&(this._baseYear=parseInt(e[1])),2<e.length&&e[2]){var i=e[2].split(",");this._amText=i[0]?i[0]:"am",1<i.length&&(this._pmText=i[1]?i[1]:"pm")}3<e.length&&(this._preserveTime=!!e[3]&&"1"==e[3])}},s.Default=new s(s.DEFAULT_FORMAT="yyyy/MM/dd"),s);function s(t){this._formatString="",this._baseYear=2e3,this._preserveTime=!1,this.formatString=t}e.DateTimeConverter=r});t(_t);_t.DateProperty,_t.DateTimeConverter;var y=e(function(t,e){Object.defineProperty(e,"__esModule",{value:!0});var i,o=(i=re.Base,oe.__extends(n,i),n);function n(t){var e=i.call(this)||this;return e.fields=[],e.values=[],e.startIndex=0,e.wrap=!0,e.select=!0,e.allFields=!0,e.caseSensitive=!1,e.partialMatch=!1,t&&e.extend(t),e}e.SearchOptions=o;var r,s=(r=re.Base,oe.__extends(a,r),a);function a(t){var e=r.call(this)||this;return e.fields=null,e.value=null,e.startIndex=0,e.startFieldIndex=0,e.wrap=!0,e.select=!0,e.caseSensitive=!1,e.partialMatch=!1,e.columns=null,e.compareCallback=null,t&&e.extend(t),e}e.SearchCellOptions=s});t(y);y.SearchOptions,y.SearchCellOptions;var v=e(function(t,e){Object.defineProperty(e,"__esModule",{value:!0});var i,o=(i=Error,oe.__extends(n,i),n);function n(t){return i.call(this,t)||this}e.EditCommandError=o;var r,s=(r=re.Base,oe.__extends(a,r),a.prototype._doDispose=function(){},a.prototype.undo=function(){},a.prototype.redo=function(t){},a.prototype.execute=function(){return this.redo(!1)},a);function a(){return r.call(this)||this}e.EditCommand=s;var l,h=(l=s,oe.__extends(d,l),d.prototype._doDispose=function(){l.prototype._doDispose.call(this)},d.prototype.undo=function(){},d.prototype.redo=function(t){},d.prototype.execute=function(){return this.redo(!1)},d);function d(){return l.call(this)||this}e.EditCommandGruop=h;var u,_=(u=$.EventAware,oe.__extends(c,u),c.prototype._doDispose=function(){this._owner=null,this._commands=null,u.prototype._doDispose.call(this)},_dp(c,"owner",{get:function(){return this._owner}}),_dp(c,"length",{get:function(){return this._commands.length}}),_dp(c,"canUndo",{get:function(){return 0<=this._current}}),_dp(c,"canRedo",{get:function(){return this._commands.length>this._current+1}}),_dp(c,"undoing",{get:function(){return this._undoing}}),_dp(c,"redoing",{get:function(){return this._redoing}}),c.prototype.undo=function(){if(this.canUndo){var t=this._commands[this._current];this._undoing=!0;try{t.undo()}finally{this._undoing=!1}this._current=this._current-1,this._changed()}},c.prototype.redo=function(t){var e;if(this.canRedo){var i=this._current+1,o=this._commands[i];this._redoing=!0;try{e=o.redo(!0)}finally{this._redoing=!1}this._current=i,this._changed()}return e},c.prototype.execute=function(t){if(t){var e=t.execute();return this._current++,this._commands[this._current]=t,this.$_shrink(this._current+1),this._changed(),e}},c.prototype.flush=function(){var t=this._commands.length;if(0<t){for(;t--;)this._commands[t].dispose();this._commands=[],this._current=-1,this._changed()}},c.prototype._changed=function(){null!=this._owner&&this._owner.editCommandStackChanged(this,this.canUndo,this.canRedo)},c.prototype.$_shrink=function(t){if(0<=t&&t<this._commands.length){for(var e=this._commands.length-1;t<=e;e--)this._commands[e].dispose();this._commands.splice(t,this._commands.length-t)}},c);function c(t){var e=u.call(this)||this;return e._commands=[],e._current=-1,e._undoing=!1,e._redoing=!1,e._owner=t,e}e.EditCommandStack=_});t(v);v.EditCommandError,v.EditCommand,v.EditCommandGruop,v.EditCommandStack;var x=e(function(t,e){Object.defineProperty(e,"__esModule",{value:!0});var i,o=(i=v.EditCommand,oe.__extends(n,i),n.prototype._doDispose=function(){this._ds=null,this._save=null,i.prototype._doDispose.call(this)},n.prototype.redo=function(t){return t?this._doRedo(this._ds,this._save):this._save=this._doRun(this._ds),this._save&&this._save.result},n.prototype.undo=function(){this._doUndo(this._ds,this._save)},n.prototype._setSoftDeleting=function(t,e){t._softDeleting=e},n.prototype._setDeleteCreated=function(t,e){t._deleteCreated=e},n.prototype._cloneRow=function(t){if(ne.Utils.isArray(t))return t.slice();if(t){var e={};for(var i in t)e[i]=t[i];return e}},n.prototype._cloneValues=function(t,e,i){if(void 0===e&&(e=0),void 0===i&&(i=-1),t){var o=t.length,n=[];i<0&&(i=o),e=Math.max(0,e);for(var r=Math.min(o,e+i),s=e;s<r;s++){var a=t[s];if(ne.Utils.isArray(a))n.push(a.slice());else if(a){var l={};for(var h in a)l[h]=a[h];n.push(l)}}return n}return null},n);function n(t){var e=i.call(this)||this;return e._ds=t,e}e.DataEditCommand=o;var r,s=(r=o,oe.__extends(a,r),a.prototype._doDispose=function(){r.prototype._doDispose.call(this)},a);function a(t){return r.call(this,t)||this}e.LocalDataEditCommand=s;var l,h=(l=v.EditCommandStack,oe.__extends(d,l),d);function d(){return null!==l&&l.apply(this,arguments)||this}e.LocalDataCommandStack=h});t(x);x.DataEditCommand,x.LocalDataEditCommand,x.LocalDataCommandStack;var E=e(function(t,e){Object.defineProperty(e,"__esModule",{value:!0});var r,i=(r=x.LocalDataEditCommand,oe.__extends(o,r),o.prototype._doRun=function(t){var e={};return e.row=t._keepRow(this._row),(e.result=t.$_setValue(this._row,this._field,this._value))&&(this._newState=t.getRowState(this._row)),e},o.prototype._doRedo=function(t,e){t.$_setValue(this._row,this._field,this._value)},o.prototype._doUndo=function(t,e){t._yieldRow(this._row,e.row),e.row.state!=this._newState&&t.fireRowStateChanged(this._row),t.fireValueChanged(this._row,this._field)},o);function o(t,e,i,o){var n=r.call(this,t)||this;return n._row=e,n._field=i,n._value=o,n}e.SetValueDataCommand=i});t(E);E.SetValueDataCommand;var S=e(function(t,e){Object.defineProperty(e,"__esModule",{value:!0});var r,i=(r=x.LocalDataEditCommand,oe.__extends(o,r),o.prototype._doDispose=function(){this._values=null,r.prototype._doDispose.call(this)},o.prototype._doRun=function(t){var e={};return e.row=t._keepRow(this._row),(e.result=t.$_updateRow(this._row,this._values,this._strict))&&(this._newState=t.getRowState(this._row)),e},o.prototype._doRedo=function(t,e){t.$_updateRow(this._row,this._values,this._strict)},o.prototype._doUndo=function(t,e){t._yieldRow(this._row,e.row),e.row.state!=this._newState&&t.fireRowStateChanged(this._row),t.fireRowUpdated(this._row)},o);function o(t,e,i,o){var n=r.call(this,t)||this;return n._row=e,n._values=n._cloneRow(i),n._strict=o,n}e.UpdateRowDataCommand=i});t(S);S.UpdateRowDataCommand;var R=e(function(t,e){Object.defineProperty(e,"__esModule",{value:!0});var n,i=(n=x.LocalDataEditCommand,oe.__extends(o,n),o.prototype._doRun=function(t){var e={};return e.result=t.$_insertRow(this._row,this._values),e},o.prototype._doRedo=function(t,e){t.$_insertRow(this._row,this._values)},o.prototype._doUndo=function(t,e){t.$_deleteRow(this._row)},o);function o(t,e,i){var o=n.call(this,t)||this;return o._row=e,ne.Utils.isArray(i)||(i=t.objectToRow(i)),o._values=i.slice(),o}e.InsertRowDataCommand=i});t(R);R.InsertRowDataCommand;var D=e(function(t,e){Object.defineProperty(e,"__esModule",{value:!0});var o,i=(o=x.LocalDataEditCommand,oe.__extends(n,o),n.prototype._doRun=function(t){var e={};return this._softDeleting=t.softDeleting,e.row=t._keepRow(this._row),e.result=t.$_deleteRow(this._row),e},n.prototype._doRedo=function(t,e){var i=t.softDeleting;try{this._setSoftDeleting(t,this._softDeleting),t.$_deleteRow(this._row)}finally{this._setSoftDeleting(t,i)}},n.prototype._doUndo=function(t,e){t.$_insertRow(this._row,e.row.values),t._yieldStates(this._row,e.row),t._yieldCommandStates(this._row,e.row.outer)},n);function n(t,e){var i=o.call(this,t)||this;return i._row=e,i}e.RemoveRowDataCommand=i});t(D);D.RemoveRowDataCommand;var T=e(function(t,e){Object.defineProperty(e,"__esModule",{value:!0});var r,i=(r=x.LocalDataEditCommand,oe.__extends(o,r),o.prototype._doRun=function(t){var e={};return e.row=t._keepStates(this._row),t.$_setRowState(this._row,this._state,this._force),e},o.prototype._doRedo=function(t,e){t.$_setRowState(this._row,this._state,this._force)},o.prototype._doUndo=function(t,e){t._yieldState(this._row,e.row),e.row.state!=this._state&&t.fireRowStateChanged(this._row)},o);function o(t,e,i,o){var n=r.call(this,t)||this;return n._row=e,n._state=i,n._force=o,n}e.SetRowStateDataCommand=i});t(T);T.SetRowStateDataCommand;var k=e(function(t,e){Object.defineProperty(e,"__esModule",{value:!0});var n,i=(n=x.LocalDataEditCommand,oe.__extends(o,n),o.prototype._doDispose=function(){n.prototype._doDispose.call(this)},o.prototype._doRun=function(t){var e={};return e.state=t._keepState(this._row),t.$_changeRowState(this._row,this._state,!0,!0,!0),e},o.prototype._doRedo=function(t,e){t.$_changeRowState(this._row,this._state,!0,!0,!0)},o.prototype._doUndo=function(t,e){t._yieldState(this._row,e.state),e.state!=this._state&&t.fireRowStateChanged(this._row)},o);function o(t,e,i){var o=n.call(this,t)||this;return o._row=e,o._state=i,o}e.ChangeRowStateDataCommand=i});t(k);k.ChangeRowStateDataCommand;var M=e(function(t,e){Object.defineProperty(e,"__esModule",{value:!0});var n,i=(n=x.LocalDataEditCommand,oe.__extends(o,n),o.prototype._doRun=function(t){var e={rows:[]};e.orgValues=t._keepOrgValues();var i=t.$_clearRowStates(this._deleteRows,this._rowEvents,!0);return e.rows=i.rows,e.states=i.states,e.values=i.values,e},o.prototype._doRedo=function(t,e){t.$_clearRowStates(this._deleteRows,this._rowEvents,!1)},o.prototype._doUndo=function(t,e){var i=e.rows,o=e.values,n=e.states;if(o)for(var r=0;r<i.length;r++)t.$_internalInsertRow(r,o[r],e.row,!0);if(n)for(r=0;r<n.length;r++)n[r]&&t._yieldState(r,n[r]);t._yieldOrgValues(e.rows),0<i.length&&t._fireRefresh()},o);function o(t,e,i){var o=n.call(this,t)||this;return o._deleteRows=e,o._rowEvents=i,o}e.ClearRowStatesDataCommand=i});t(M);M.ClearRowStatesDataCommand;var L=e(function(t,e){Object.defineProperty(e,"__esModule",{value:!0});var l,i=(l=x.LocalDataEditCommand,oe.__extends(o,l),o.prototype._doDispose=function(){this._values=null,l.prototype._doDispose.call(this)},o.prototype._doRun=function(t){var e={};return t.$_updateRows(this._row,this._values,this._start,this._count,this._strict,this._rowEvents,e),e},o.prototype._doRedo=function(t,e){t.$_updateRows(this._row,this._values,this._start,this._count,this._strict,this._rowEvents,null)},o.prototype._doUndo=function(t,e){var i=e.rows;if(!(i.length<1)){for(var o=e.values,n=e.states,r=e.orgValues,s=0;s<i.length;s++){var a=i[s];t.$_restoreRow(a,o[s],n[a],r[a])}t._fireRefresh()}},o);function o(t,e,i,o,n,r,s){var a=l.call(this,t)||this;return a._row=e,a._values=a._cloneValues(i,o,n),a._start=0,a._count=a._values.length,a._rowEvents=r,a._strict=s,a}e.UpdateRowsDataCommand=i});t(L);L.UpdateRowsDataCommand;var F=e(function(t,e){Object.defineProperty(e,"__esModule",{value:!0});var n,i=(n=x.LocalDataEditCommand,oe.__extends(o,n),o.prototype._doRun=function(t){var e={};return this._softDeleting=t.softDeleting,t.$_removeRows(this._rows,this._rowEvents,e),e},o.prototype._doRedo=function(t,e){var i=t.softDeleting;try{this._setSoftDeleting(t,this._softDeleting),t.$_removeRows(this._rows,this._rowEvents,null)}finally{this._setSoftDeleting(t,i)}},o.prototype._doUndo=function(t,e){var i=e.rows,o=e.statedRows;if(!(i.length<1&&o.length<1)){for(var n=e.rowSaves,r=e.states,s=0;s<i.length;s++){var a=i[s],l=n[s];t.$_internalInsertRow(a,l.values,!0),t._yieldRow(a,l)}for(s=0;s<o.length;s++)a=o[s],t._yieldState(a,r[s]);t._fireRefresh()}},o);function o(t,e,i){var o=n.call(this,t)||this;return o._rows=e.slice(),o._rowEvents=i,o}e.RemoveRowsDataCommand=i});t(F);F.RemoveRowsDataCommand;var V=e(function(t,e){Object.defineProperty(e,"__esModule",{value:!0});var a,i=(a=x.LocalDataEditCommand,oe.__extends(o,a),o.prototype._doRun=function(t){return t.$_insertRows(this._row,this._values,this._start,this._count,this._rowEvents),{}},o.prototype._doRedo=function(t,e){t.$_insertRows(this._row,this._values,this._start,this._count,this._rowEvents)},o.prototype._doUndo=function(t,e){if(!this._rows){this._rows=[];for(var i=0;i<this._values.length;i++)this._rows.push(this._row+i)}var o=t.softDeleting;try{this._setSoftDeleting(t,!1),t.$_removeRows(this._rows,!1,null)}finally{this._setSoftDeleting(t,o)}},o);function o(t,e,i,o,n,r){var s=a.call(this,t)||this;return s._row=e,s._values=s._cloneValues(i,o,n),s._start=0,s._count=s._values.length,s._rowEvents=r,s}e.InsertRowsDataCommand=i});t(V);V.InsertRowsDataCommand;var N=e(function(t,e){Object.defineProperty(e,"__esModule",{value:!0});var i,o=(i=re.Base,oe.__extends(u,i),u.csvToArray=function(t,e,i,o,n,r){void 0===i&&(i=0),void 0===o&&(o=-1),void 0===n&&(n=!1),void 0===r&&(r=",");for(var s=[],a=[],l=e.length,h=0,d=[],u=!1,_=!1;h<l;){var c=e.charAt(h);'"'==c?u?_&&'"'==e.charAt(h+1)?(d.push(c),h++):_?(_=!1,n||d.push(c)):d.push(c):(u=_=!0,n||d.push(c)):_||c!=r&&"\r"!=c&&"\n"!=c?(u=!0,d.push(c)):(c==r?a.push(d.join("")):"\r"!=c&&"\n"!=c||(a.push(d.join("")),s.push(a),a=[],"\n"==e.charAt(h+1)&&h++),u=!(d=[])),h++}_&&d.splice(0,0,'"'),0<d.length&&a.push(d.join("")),0<a.length&&s.push(a),0<i&&(o<=0?s.splice(0,i):s=s.splice(i,o));for(var p=t.getFields(),f=p.length,g=0<f,m=0,y=s.length;m<y;m++){a=s[m],g&&a.length>f&&(a.length=f);for(var v=0;v<f;v++)a[v]=p[v].readValue(a[v])}return s},u.xmlToRow=function(t,e,i){for(var o,n,r=t.childNodes,s=e.length,a=new Array(s),l=0,h=r.length;l<h;l++){var d,u=r[l];0<=(d=i.indexOf(u.tagName))&&(a[d]=e[d].readValue(u.nodeValue||u.hasChildNodes()&&3===u.childNodes[0].nodeType&&u.childNodes[0].nodeValue))}for(l=0;l<s;l++)void 0===a[l]&&(a[l]=e[l].readValue((o=t,n=i[l],o&&o.getAttribute(n))));return a},u.xmlToArray=function(t,e,i,o){void 0===i&&(i=0),void 0===o&&(o=-1);var n=null,r=u.xmlToRow,s=e?e.length:0;if(s&&(i=Math.max(0,i),o<0&&(o=s),o=Math.min(s-i,o))){var a=t.getFields(),l=t.getOrgFieldNames();a.length,n=new Array(o);for(var h=0;h<o;h++){var d=r(e[h+i],a,l);n[h]=d}}return n},u);function u(){return null!==i&&i.apply(this,arguments)||this}e.DataHelper=o});t(N);N.DataHelper;var P=e(function(t,e){Object.defineProperty(e,"__esModule",{value:!0});var n,i=(n=x.LocalDataEditCommand,oe.__extends(o,n),o.prototype._doRun=function(t){t.$_moveRow(this._row,this._newRow)},o.prototype._doRedo=function(t,e){t.$_moveRow(this._row,this._newRow)},o.prototype._doUndo=function(t,e){t.$_moveRow(this._newRow,this._row)},o);function o(t,e,i){var o=n.call(this,t)||this;return o._row=e,o._newRow=i,o}e.MoveRowDataCommand=i});t(P);P.MoveRowDataCommand;var B=e(function(t,e){Object.defineProperty(e,"__esModule",{value:!0});var r,i=(r=x.LocalDataEditCommand,oe.__extends(o,r),o.prototype._doRun=function(t){t.$_moveRows(this._row,this._count,this._newRow)},o.prototype._doRedo=function(t,e){t.$_moveRows(this._row,this._count,this._newRow)},o.prototype._doUndo=function(t,e){t.$_moveRows(this._newRow,this._count,this._row)},o);function o(t,e,i,o){var n=r.call(this,t)||this;return n._row=e,n._count=i,n._newRow=o,n}e.MoveRowsDataCommand=i});t(B);B.MoveRowsDataCommand;var A=e(function(t,e){Object.defineProperty(e,"__esModule",{value:!0});var s,i=(s=x.LocalDataEditCommand,oe.__extends(o,s),o.prototype._doRun=function(t){t.$_moveRowList(this._rows,this._newRows[0])},o.prototype._doRedo=function(t,e){t.$_moveRowList(this._rows,this._newRows[0])},o.prototype._doUndo=function(t,e){t.$_moveRowList(this._newRows,this._rows[0])},o);function o(t,e,i){var o=s.call(this,t)||this;o._rows=e,o._newRows=e.slice();for(var n=i-e[0],r=0;r<e.length;r++)o._newRows[r]+=n;return o}e.MoveRowListDataCommand=i});t(A);A.MoveRowListDataCommand;var z=e(function(t,e){Object.defineProperty(e,"__esModule",{value:!0});var r,i=(r=x.LocalDataEditCommand,oe.__extends(o,r),o.prototype._doDispose=function(){r.prototype._doDispose.call(this)},o.prototype._doRun=function(t){var e={};return t.$_fillValue(this._rows,this._fields,this._value,e),e},o.prototype._doRedo=function(t,e){t.$_fillValue(this._rows,this._fields,this._value,null)},o.prototype._doUndo=function(t,e){var i=e.rows;if(!(i.length<1)){for(var o=e.values,n=e.states,r=e.orgValues,s=0;s<i.length;s++){var a=i[s];t.$_restoreRow(a,o[s],n[a],r[a])}t._fireRefresh()}},o);function o(t,e,i,o){var n=r.call(this,t)||this;return n._rows=e.slice(),n._fields=i.slice(),n._value=o,n}e.FillValueDataCommand=i});t(z);z.FillValueDataCommand;var j=e(function(t,e){Object.defineProperty(e,"__esModule",{value:!0});var r,i=(r=C.DataProvider,oe.__extends(o,r),o.prototype._doDispose=function(){this._commands=this._commands&&this._commands.dispose(),this._values=null,this._rowIds=null,this._rowStates=null,this._points=null,this._orgValues=null,this._hiddenIds=null,r.prototype._doDispose.call(this)},_dp(o,"handler",{get:function(){return this.$_handler}}),_dp(o,"undoable",{get:function(){return this._undoable&&!!this._commands},set:function(t){t!=this.undoable&&(this._undoable=t,this._commands&&this._commands.flush())}}),o.prototype.getDataRow=function(t){return this._rowIds.indexOf(t)},_dp(o,"rowCount",{get:function(){return this._values.length}}),_dp(o,"isSummarized",{get:function(){return!0}}),_dp(o,"deletedCount",{get:function(){return this._deletedCount}}),_dp(o,"canUndo",{get:function(){return this._commands&&this._commands.canUndo}}),_dp(o,"canRedo",{get:function(){return this._commands&&this._commands.canRedo}}),_dp(o,"undoing",{get:function(){return this._commands&&this._commands.undoing}}),_dp(o,"redoing",{get:function(){return this._commands&&this._commands.redoing}}),o.prototype.getRowId=function(t){return this._rowIds[t]},o.prototype.$_internalInsertField=function(t,e){if(0<=(t=r.prototype.$_internalInsertField.call(this,t,e))){for(var i=this._values.length,o=0;o<i;o++)(n=this._values[o])&&n.splice(t,0,void 0);if(this._orgValues)for(i=Math.min(i,this._orgValues.length),o=0;o<i;o++){var n;(n=this._orgValues[o])&&n.splice(t,0,void 0)}}return t},o.prototype.$_internalClearFields=function(){r.prototype.$_internalClearFields.call(this),this.$_clearRows()},o.prototype.setRowCount=function(t,e,i,o){if(void 0===e&&(e=!1),void 0===i&&(i=null),void 0===o&&(o=I.RowState.NONE),this._checkClientState()){var n=this._values,r=n.length,s=Math.max(0,t);if(s!=r){var a=this._rowIds,l=this._rowStates;if(this.refreshFieldFormats(),n.length=a.length=l.length=s,this._orgValues&&this._orgValues.length>s&&(this._orgValues.length=s),r<s&&(e||i)){var h=this.fieldCount,d=i;if(!d||d instanceof Array||(d=this.objectToRow(d)),d&&d.length<1&&(d=null),e||d)for(var u=d?Math.min(d.length,h):0,_=r;_<s;_++){var c=[];if(e)for(var p=0;p<h;p++){var f=this.getField(p);c[p]=void 0!==f.defaultValue?f.defaultValue:f.nullValue}if(0<u)for(p=0;p<u;p++){var g=d[p];void 0!==g&&(c[p]=this.getField(p).readValue(g))}n[_]=c}}else if(s<r&&0<this._deletedCount)for(_=r-1;s<=_;_--)l[_]!=I.RowState.DELETED&&l[_]!=I.RowState.CREATE_AND_DELETED||this._deletedCount--,l[_]=I.RowState.NONE;for(o=this.checkStates&&o?o:I.RowState.NONE,_=r;_<s;_++)l[_]=o,a[_]=this._nextRowId++;for(_=this._hiddenIds.length-1;0<=_;_--)p=this._hiddenIds[_],a.indexOf(p)<0&&this._hiddenIds.splice(_,1);this.tags.setRowCount(s),this._fireRefresh(),this._fireRowCountChanged()}}},o.prototype.$_clearRows=function(){this._values.length=0,this._values=[],this._rowIds.length=0,this._rowIds=[],this._rowStates.length=0,this._rowStates=[],this._hiddenIds.length=0,this._hiddenIds=[],this._orgValues?(this._orgValues.length=0,this._orgValues=[]):this._orgValues=null,this._deletedCount=0,this.tags.clearRows()},o.prototype.clearRows=function(){this._checkClientState()&&(this.$_clearRows(),this._fireRefresh(),this._fireRowCountChanged())},o.prototype.setRows=function(t,e,i){if(void 0===e&&(e=0),void 0===i&&(i=-1),this._checkClientState()&&0!=i){this.refreshFieldFormats(),this.beginUpdate();try{this.$_clearRows();var o=this.checkStates,n=this.filters,r=this.filterRuntime,s=void 0;if(t&&0<(s=t.length)&&e<s)if(e=Math.max(0,e),i=i<0?s:Math.min(i,s-e),n){this._values.length=this._rowIds.length=this._rowStates.length=i,n.prepare(r,this);for(var a=s,l=0,h=0,d=e;d<a&&l<i;d++)(u=t[d])instanceof Array||(u=this.objectToRow(u)),n.select(r,h++,u)&&this.$_internalSetRow(l++,u,o);this._values.length=this._rowIds.length=this._rowStates.length=l}else if(e<(a=Math.min(s,e+i)))for(this._values.length=this._rowIds.length=this._rowStates.length=a-e,l=0,d=e;d<a;d++){var u;(u=t[d])instanceof Array||(u=this.objectToRow(u)),this.$_internalSetRow(l++,u,o)}}finally{this.endUpdate(!1)}this.tags.setRows(),this._fireRefresh(),this._fireRowCountChanged()}},o.prototype.setXmlRows=function(t,e,i){void 0===e&&(e=0),void 0===i&&(i=-1),this._checkClientState()&&0!=i&&(t=N.DataHelper.xmlToArray(this,t,e,i),this.setRows(t))},o.prototype.insertRows=function(t,e,i,o,n){void 0===i&&(i=0),void 0===o&&(o=-1),void 0===n&&(n=!1),this.undoable?this._commands.execute(new V.InsertRowsDataCommand(this,t,e,i,o,n)):this.$_insertRows(t,e,i,o,n)},o.prototype.$_insertRows=function(t,e,i,o,n){if(this._checkClientState()&&e){var r=e.length;if(!(r<1)&&0!=(o=o<0?r:Math.min(r,o))){if(t<0||t>this._values.length)throw new g.DataSourceError("row is out of bounds:"+t);this.refreshFieldFormats(),i=Math.max(0,i);var s=Math.min(r,i+o);if(n)for(var a=t,l=i;l<s;l++)(h=e[l])instanceof Array||(h=this.objectToRow(h)),this.fireRowInserting(a,h)&&(this.$_internalInsertRow(a,h,!0),this.fireRowInserted(a),this._fireRowCountChanged(),a++);else{for(a=t,l=i;l<s;l++,a++){var h;(h=e[l])instanceof Array||(h=this.objectToRow(h)),this.$_internalInsertRow(a,h,!1)}this.tags.insertRows(t,o=s-i),this.fireRowsInserted(t,o),this._fireRowCountChanged()}}}},o.prototype.appendRows=function(t,e,i,o){void 0===e&&(e=0),void 0===i&&(i=-1),void 0===o&&(o=!1),this.insertRows(this.rowCount,t,e,i,o)},o.prototype.insertRowsFrom=function(t,e,i,o){for(var n=[],r=0,s=i;r<s.length;r++){var a=s[r];n.push(t.getRowObject(a))}if(e)for(var l=i.length-1;0<=l;l--)n[l]=this._convertValues(n[l],e);this.insertRows(o,n)},o.prototype.appendRowsFrom=function(t,e,i){this.insertRowsFrom(t,e,i,this.rowCount)},o.prototype.insertXmlRows=function(t,e,i,o,n){void 0===i&&(i=0),void 0===o&&(o=-1),void 0===n&&(n=!1),this._checkClientState()&&(e=N.DataHelper.xmlToArray(this,e,i,o),this.insertRows(t,e,0,-1,n))},o.prototype.appendXmlRows=function(t,e,i,o){void 0===o&&(o=!1),this.insertXmlRows(this.rowCount,t,e,i,o)},o.prototype.fillValue=function(t,e,i){if(this.undoable)return this._commands.execute(new z.FillValueDataCommand(this,t,e,i));this.$_fillValue(t,e,i)},o.prototype.updateRows=function(t,e,i,o,n,r){if(void 0===r&&(r=!1),this.undoable)return this._commands.execute(new L.UpdateRowsDataCommand(this,t,e,i,o,r,n));this.$_updateRows(t,e,i,o,n,r)},o.prototype.updateXmlRows=function(t,e,i,o,n){void 0===n&&(n=!1),this._checkClientState()&&(e=N.DataHelper.xmlToArray(this,e,i,o),this.updateRows(t,e,0,-1,n))},o.prototype.getValue=function(t,e){this.$_checkRowIndex(t),this._checkFieldIndex(e);var i=this._values[t];return i?i[e]:void 0},o.prototype.setValue=function(t,e,i){return this.undoable?this._commands.execute(new E.SetValueDataCommand(this,t,e,i)):this.$_setValue(t,e,i)},o.prototype.$_setValue=function(t,e,i){if(!this._checkClientState())return!1;this.$_checkRowIndex(t),this._checkFieldIndex(e);var o=this.getField(e),n=this._rowStates[t];if(!o)throw new g.DataSourceError("Invalid field: "+e);if(!o.updatable&&(n==I.RowState.NONE||n==I.RowState.UPDATED))return!1;var r,s=this._values[t],a=o.readValue(i);if(s&&o.equalValues(a,s[e]))return!1;this.refreshFieldFormat(o);var l=this.checkStates&&(n==I.RowState.NONE||!n);return s||(this._values[t]=s=[]),l&&this._orgValues&&(r=s.concat()),s[e]=a,this._internalCalculateValues(s,t),l?(r&&(this._orgValues[t]=r),this.$_changeRowState(t,I.RowState.UPDATED,!0)):this._needRestore&&this.restoreState(t),this.tags.setValue(t,e),this.fireValueChanged(t,e),!0},o.prototype.updateRow=function(t,e,i){return this.undoable?this._commands.execute(new S.UpdateRowDataCommand(this,t,e,i)):this.$_updateRow(t,e,i)},o.prototype.getRow=function(t){this.$_checkRowIndex(t);var e=this._values[t];return e?e.slice():[]},o.prototype.getRows=function(t,e){void 0===t&&(t=0),void 0===e&&(e=-1);var i=this._values.length,o=Math.max(0,t),n=e<0?i-1:Math.min(i-1,e);if(i<=o||n<o)return[];for(var r=n-o+1,s=new Array(r),a=0;a<r;a++)s[a]=this._values[a+o]||[];return s},o.prototype.getRowObject=function(t){return this.$_checkRowIndex(t),this.$_getRowObject(t,this.fieldCount)},o.prototype.getRowObjects=function(t,e){void 0===t&&(t=0),void 0===e&&(e=-1);var i=this._values.length,o=Math.max(0,t),n=e<0?i-1:Math.min(i-1,e);if(i<=o||n<o)return[];for(var r=this.fieldCount,s=n-o+1,a=new Array(s),l=0;l<s;l++)a[l]=this.$_getRowObject(l+o,r);return a},o.prototype.getOutputObject=function(t,e){var i=this.getRowObject(e);return t&&this.$_createOutputRows([i],t,e),i},o.prototype.getOutputObjects=function(t,e,i){void 0===e&&(e=0),void 0===i&&(i=-1);var o=this.getRowObjects(e,i);return t&&this.$_createOutputRows(o,t,e),o},o.prototype.getFieldValues=function(t,e,i){void 0===e&&(e=0),void 0===i&&(i=-1),this._checkFieldIndex(t);var o=this._values.length;if(i=i<0?o-1:Math.min(o-1,i),o<=(e=Math.max(0,e))||i<e)return null;for(var n=new Array(i-e+1),r=e;r<=i;r++){var s=this._values[r];n[r-e]=s&&s[t]}return n},o.prototype.hasData=function(t){return 0<=t&&t<this._values.length&&void 0!==this._values[t]},o.prototype.insertRow=function(t,e){return this.undoable?this._commands.execute(new R.InsertRowDataCommand(this,t,e)):this.$_insertRow(t,e)},o.prototype.$_insertRow=function(t,e,i){if(void 0===i&&(i=void 0),!this._checkClientState())return!1;if(t<0||t>this._values.length)throw new g.DataSourceError("row is out of bounds:"+t);return this.refreshFieldFormats(),!(!e||!this.fireRowInserting(t,e)||(ne.Utils.isArray(e)||(e=this.objectToRow(e)),this.$_internalInsertRow(t,e,!0),i&&this._yieldStates(t,i),this.fireRowInserted(t),this._fireRowCountChanged(),0))},o.prototype.appendRow=function(t){var e=this.rowCount;return this.insertRow(e,t)?e:-1},o.prototype.removeRow=function(t){if(this.undoable){if(this.softDeleting&&this.checkStates)switch(this._rowStates[t]){case I.RowState.CREATED:if(!this.deleteCreated)return this._commands.execute(new k.ChangeRowStateDataCommand(this,t,I.RowState.CREATE_AND_DELETED));break;case I.RowState.DELETED:case I.RowState.CREATE_AND_DELETED:break;default:return this._commands.execute(new k.ChangeRowStateDataCommand(this,t,I.RowState.DELETED))}return this._commands.execute(new D.RemoveRowDataCommand(this,t))}return this.$_removeRow(t)},o.prototype.$_removeRow=function(t){if(!this._checkClientState())return!1;if(this.$_checkRowIndex(t),this.softDeleting&&this.checkStates){switch(this._rowStates[t]){case I.RowState.CREATED:this.deleteCreated?this.$_deleteRow(t):this.$_changeRowState(t,I.RowState.CREATE_AND_DELETED,!0,!0,!0);break;case I.RowState.DELETED:case I.RowState.CREATE_AND_DELETED:break;default:this.$_changeRowState(t,I.RowState.DELETED,!0,!0,!0)}return!0}return this.$_deleteRow(t)},o.prototype.removeRows=function(t,e){void 0===e&&(e=!1),this.undoable?this._commands.execute(new F.RemoveRowsDataCommand(this,t,e)):this.$_removeRows(t,e,null)},o.prototype.$_removeRows=function(t,e,i){if(this._checkClientState()){var o,n=this.deleteCreated;if(t&&!((o=t.length)<1)){if(t=t.slice(),i&&(i.rows=[],i.rowSaves=[],i.statedRows=[],i.states=[]),this.softDeleting&&this.checkStates){for(var r=e?null:[],s=o;s--;){var a=t[s],l=this._rowStates[a],h=!1;switch(this.$_checkRowIndex(a),l){case I.RowState.CREATED:n||(i&&(i.statedRows.push(a),i.states.push(l)),h=this.$_changeRowState(a,I.RowState.CREATE_AND_DELETED,e,!1,!0),t.splice(s,1));break;case I.RowState.DELETED:case I.RowState.CREATE_AND_DELETED:t.splice(s,1);break;default:i&&(i.statedRows.push(a),i.states.push(l)),h=this.$_changeRowState(a,I.RowState.DELETED,e,!1,!0),t.splice(s,1)}r&&h&&r.push(a)}e||r&&0<r.length&&this.fireRowStatesChanged(r)}if(0<(o=t.length)){if(1<o&&t.sort(function(t,e){return t-e}),i)for(s=0;s<o;s++)a=t[s],i.rows.push(a),i.rowSaves.push(this._keepRow(a));if(e)for(s=o;s--;)a=t[s],this.$_checkRowIndex(a),this.$_deleteRow(a);else if(this.fireRowsRemoving(t)){for(s=o;s--;)a=t[s],l=this._rowStates[a],this.$_checkRowIndex(a),this.$_internalRemoveRow(a),I.isDeletedState(l)&&this._deletedCount--;this.tags.removeRows(t),this.fireRowsRemoved(t),this._fireRowCountChanged()}}}}},o.prototype.moveRow=function(t,e){if(t!=e)return this.undoable?this._commands.execute(new P.MoveRowDataCommand(this,t,e)):void this.$_moveRow(t,e)},o.prototype.$_moveRow=function(t,e){this._checkClientState()&&(this.$_checkRowIndex(t),this.$_checkRowIndex(e),this.fireRowMoving(t,e)&&(this.$_internalMoveRow(t,e),this.tags.moveRow(t,e),this.fireRowMoved(t,e)))},o.prototype.moveRows=function(t,e,i){if(!(e<1||t==i))return this.undoable?this._commands.execute(new B.MoveRowsDataCommand(this,t,e,i)):void this.$_moveRows(t,e,i)},o.prototype.$_moveRows=function(t,e,i){this._checkClientState()&&(this.$_checkRowIndex(t),this.$_checkRowIndex(i),this.fireRowsMoving(t,e,i)&&(this.$_internalMoveRows(t,e,i),this.tags.moveRows(t,e,i),this.fireRowsMoved(t,e,i)))},o.prototype.moveRowList=function(t,e){if(t&&!(t.length<1)){if(t=t.sort(function(t,e){return t-e}),this.undoable)return this._commands.execute(new A.MoveRowListDataCommand(this,t,e));this.$_moveRowList(t,e)}},o.prototype.$_moveRowList=function(t,e){if(this._checkClientState()){var i=t[0];this.$_checkRowIndex(i),this.$_checkRowIndex(e),this.fireRowListMoving(t,e)&&(this.$_internalMoveRowList(t,e),this.tags.moveRowList(t,e),this.fireRowListMoved(t,e))}},o.prototype.getRowState=function(t){return this.$_checkRowIndex(t),this._rowStates[t]||I.RowState.NONE},o.prototype.$_checkDeleted=function(t,e){I.isDeletedState(e)?this._deletedCount++:I.isDeletedState(t)&&!I.isDeletedState(e)&&this._deletedCount--},o.prototype.setRowState=function(t,e,i){return this.undoable?this._commands.execute(new T.SetRowStateDataCommand(this,t,e,i)):this.$_setRowState(t,e,i)},o.prototype.$_setRowState=function(t,e,i){this._checkClientState()&&(this.$_checkRowIndex(t),this._orgValues?this.$_changeRowStateEx(t,e,!0,i,!1):this.$_changeRowState(t,e,!0,i))},o.prototype.setRowStates=function(t,e,i,o){var n;if(void 0===o&&(o=!1),this._checkClientState()&&t&&!((n=t.length)<1))if(o)for(var r=0;r<n;r++){var s=t[r];this.$_checkRowIndex(s),this.$_changeRowStateEx(s,e,!0,i,!1)}else{var a=[],l=this._rowStates;for(r=0;r<n;r++){var h=l[s=t[r]];this.$_checkRowIndex(s),e!=h&&(l[s]=e,a.push(s),this.$_checkDeleted(h,e),this._orgValues&&this.prepareOrgValues(s,h,e))}0<a.length&&this.fireRowStatesChanged(a)}},o.prototype.clearRowStates=function(t,e){void 0===e&&(e=!1),this.undoable?this._commands.execute(new M.ClearRowStatesDataCommand(this,t,e)):this.$_clearRowStates(t,e)},o.prototype.$_clearRowStates=function(t,e,i){if(void 0===e&&(e=!1),void 0===i&&(i=!1),this._checkClientState()){for(var o=[],n=i?[]:null,r=i?[]:null,s=this._rowStates.length;s--;){var a=this._rowStates[s];switch(n&&(n[s]=a),r&&(r[s]=null),a){case I.RowState.CREATE_AND_DELETED:case I.RowState.DELETED:t?(e?this.$_deleteRow(s):(this.$_internalRemoveRow(s),this.tags.removeRow(s),this._deletedCount--),o.push(s),r&&(r[s]=this._keepRow[s])):(this.$_changeRowState(s,I.RowState.NONE,e),this._deletedCount--);break;default:this.$_changeRowState(s,I.RowState.NONE,e)}}return this.$_resetOrgValues(),e||(0<o.length&&(this.fireRowsRemoved(o),this._fireRowCountChanged()),this.fireRowStatesCleared()),i?{rows:o,states:n,values:r}:void 0}},o.prototype.$_restoreStates=function(t,e){this.fireRowStatesChanged(t)},o.prototype.getStateRows=function(t){var e=[];if(t)for(var i=0,o=this._rowStates.length;i<o;i++)this._rowStates[i]==t&&e.push(i);return e},o.prototype.getAllStateRows=function(){for(var t={},e=t[I.RowState.CREATED]=[],i=t[I.RowState.UPDATED]=[],o=t[I.RowState.DELETED]=[],n=t[I.RowState.CREATE_AND_DELETED]=[],r=0,s=this._rowStates.length;r<s;r++){var a=this._rowStates[r];a===I.RowState.CREATED?e.push(r):a===I.RowState.UPDATED?i.push(r):a===I.RowState.DELETED?o.push(r):a===I.RowState.CREATE_AND_DELETED&&n.push(r)}return t},o.prototype.getRowStateCount=function(t){var e=t?t.length:0,i=this._rowStates.length,o=0;if(e&&i)if(1<e)for(var n=0;n<i;n++){var r=this._rowStates[n];0<=t.indexOf(r)&&o++}else for(r=t[0],n=0;n<i;n++)this._rowStates[n]===r&&o++;return o},o.prototype.$_restoreState=function(t){if(this._rowStates[t]===I.RowState.UPDATED){var e=this._orgValues[t];if(e){for(var i=this._values[t],o=this.strictRestore,n=0,r=this.fieldCount;n<r;n++){var s=i.length>n?i[n]:void 0,a=e.length>n?e[n]:void 0,l=this.getField(n);if(o){if(!l.equalValues(s,a))return!1}else if(!l.sameValues(s,a))return!1}return this._rowStates[t]=I.RowState.NONE,!0}}return!1},o.prototype.restoreUpdatedStates=function(t){if(this._orgValues&&this._checkClientState()){var e=[];if(null!=t)for(var i=0,o=t.length;i<o;i++){var n=t[i];0<=n&&n<this._values.length&&this.$_restoreState(n)&&e.push(n)}else for(i=0,o=this._values.length;i<o;i++)this.$_restoreState(i)&&e.push(i);0<e.length&&this.fireRowStatesChanged(e)}},o.prototype.$_restoreUpdatedRow=function(t){if(this._rowStates[t]===I.RowState.UPDATED){var e=this._orgValues[t];if(e){for(var i=this._values[t],o=0,n=Math.min(e.length,this.fieldCount);o<n;o++)i[o]=e[o];return this._rowStates[t]=I.RowState.NONE,!0}}return!1},o.prototype.$_restoreRow=function(t,e,i,o){this._values[t]=e.slice(),this._rowStates[t]=i,this._orgValues&&(this._orgValues[t]=o&&o.slice())},o.prototype.restoreUpdatedRows=function(t){if(this._orgValues&&this._checkClientState()){var e=[];if(null!=t)for(var i=0,o=t.length;i<o;i++){var n=t[i];0<=n&&n<this._values.length&&this.$_restoreUpdatedRow(n)&&e.push(n)}else for(i=0,o=this._values.length;i<o;i++)this.$_restoreUpdatedRow(i)&&e.push(i);0<e.length&&(this.fireRestoreRows(e),this.fireRowStatesChanged(e))}},o.prototype.getUpdatedCells=function(t){var e=this.restoreMode;if(!this._orgValues||e!=f.RestoreMode.AUTO&&e!=f.RestoreMode.EXPLICIT)return null;if(null==t&&(t=this.getStateRows(I.RowState.UPDATED)),null==t)return null;for(var i=[],o=0,n=t.length;o<n;o++){var r=t[o],s=0<=r&&this._orgValues&&r<this._orgValues.length?this._orgValues[r]:null;if(s){for(var a=this._values[r],l=this.strictRestore,h=[],d=0,u=this.fieldCount;d<u;d++){var _=a.length>d?a[d]:void 0,c=s.length>d?s[d]:void 0,p=this.getField(d);p.calculated||(l?p.equalValues(_,c)||h.push({fieldName:this.getOrgFieldName(d),oldValue:s[d],newValue:a[d]}):p.sameValues(_,c)||h.push({fieldName:this.getOrgFieldName(d),oldValue:s[d],newValue:a[d]}))}0<h.length&&i.push({__rowId:r,updatedCells:h})}}return i},o.prototype._doRestoreModeChanged=function(){this.$_resetOrgValues()},o.prototype.findRow=function(t,e,i){if(void 0===i&&(i=0),t.length<1||e.length<t.length)return-1;for(var o=[],n=[],r=this._values,s=0,a=t.length;s<a;s++){var l=void 0;0<=(l="string"==typeof t[s]?this.getFieldIndex(t[s]):Number(t[s]))&&l<this.fieldCount&&o.indexOf(l)<0&&(o.push(l),n.push(e[s]))}var h=o.length;for(s=0;s<h;s++)o[s]=this.getField(o[s]);for(s=i,a=r.length;s<a;s++){var d=r[s],u=!0;for(l=0;l<h;l++)if(!o[l].equalValues(n[l],d[l])){u=!1;break}if(u)return s}return-1},o.prototype.savePoint=function(t){if(void 0===t&&(t=!0),this._checkClientState()){var e=this._values,i=this.fieldCount,o=e?e.length:0;if(0<i&&0<o){for(var n=new Array(o),r=0;r<o;r++){var s=e[r]&&e[r].concat();n[r]=s}var a=t?this._rowStates.concat():null,l=this._nextPoint++;return this._points.push({id:l,data:n,states:a}),l}return-1}},o.prototype.rollback=function(t){if(this._checkClientState())for(var e=this._points.length-1;0<=e;e--){var i=this._points[e];if(i.id==t){this.$_removeSavePoints(e+1),this.setRows(i.data);var o=i.states;o&&(this._rowStates=o.concat());break}}},o.prototype.$_removeSavePoints=function(t){for(var e=this._points,i=e.length-1;t<=i;i--)e[i].data=null,e.pop()},o.prototype.clearSavePoints=function(){this.$_removeSavePoints(0)},o.prototype.getSavePoints=function(){for(var t=[],e=0,i=this._points.length;e<i;e++)t.push(this._points[e].id);return t},o.prototype.canUpdateRow=function(t){return!(this._rowStates[t]===I.RowState.NONE&&!this.updatable)},o.prototype.canAppendRow=function(){return!0},o.prototype.canInsertRow=function(t){return!0},o.prototype.canDeleteRow=function(t){return!0},o.prototype.getDistinctValues=function(t,e,i){if(void 0===e&&(e=-1),void 0===i&&(i=lt.SortDirection.ASCENDING),e=1<arguments.length?e:-1,this._checkFieldIndex(t),e<0&&(e=this._values.length),0<e){for(var o=this.getField(t).dataType,n=[],r=[],s=void 0,a=0,l=this.rowCount;a<l;a++)switch(s=this._values[a]?this._values[a][t]:void 0,o){case lt.ValueType.NUMBER:null!=s&&isNaN(s)||n.indexOf(s)<0&&n.push(s);break;case lt.ValueType.DATE:case lt.ValueType.DATETIME:s?r.indexOf(s.getTime())<0&&(r.push(s.getTime()),n.push(s)):(r.indexOf(void 0)<0&&r.push(void 0),n.push(void 0));break;case lt.ValueType.OBJECT:default:n.indexOf(s)<0&&n.push(s)}return i!==lt.SortDirection.NONE&&(n=ne.Utils.included(o,lt.ValueType.DATETIME,lt.ValueType.DATE,lt.ValueType.NUMBER)?n.sort(function(t,e){return t-e}):n.sort(),i===lt.SortDirection.DESCENDING&&(n=n.reverse())),n.slice(0,e)}return null},o.prototype.compareValues=function(t,e,i){var o=this._values[e],n=this._values[i];if(o===n)return 0;var r=o?o[t]:null,s=n?n[t]:null;return null==r?null==s?0:-1:null==s||s<r?1:r<s?-1:0},o.prototype.compareTexts=function(t,e,i){var o=this._values[e],n=this._values[i];if(o===n)return 0;var r=o?o[t]:null,s=n?n[t]:null;return null==r?null==s?0:-1:null==s?1:(r=String(r).toLocaleLowerCase(),(s=String(s).toLocaleLowerCase())<r?1:r<s?-1:0)},o.prototype.compareNumbers=function(t,e,i){var o=this._values[e],n=this._values[i];if(o===n)return 0;var r=o?o[t]:NaN,s=n?n[t]:NaN;return isNaN(r)?isNaN(s)?0:-1:isNaN(s)||s<r?1:r<s?-1:0},o.prototype.compareDates=function(t,e,i){var o=this._values[e],n=this._values[i];if(o===n)return 0;var r=o?o[t]:null,s=n?n[t]:null;return r instanceof Date?!(s instanceof Date)||s<r?1:r<s?-1:0:s instanceof Date?-1:0},o.prototype.compareBools=function(t,e,i){var o=this._values[e],n=this._values[i];if(o===n)return 0;var r=!!o&&Boolean(o[t]),s=!!n&&Boolean(n[t]);return r&&!s?1:!r&&s?-1:0},o.prototype.compareObjects=function(t,e,i){var o=this._values[e],n=this._values[i];if(o===n)return 0;var r=o?o[t]:null,s=n?n[t]:null;return r?s?this.getField(t).$_compareObject(r,s,e,i):1:s?-1:0},o.prototype.summarize=function(t,e){if(null==t)return!1;t.clear();var i=this.rowCount;if(i<1)return!1;for(var o=0,n=t.field,r=0,s=NaN,a=NaN,l=0;l<i;){var h=(c=this._values[l++])?null==c[n]?void 0:c[n]:NaN;if(!isNaN(h)){r=s=a=h,o++;break}}for(;l<i;)h=(c=this._values[l++])?null==c[n]?void 0:c[n]:NaN,isNaN(h)||(r+=h,h<s&&(s=h),a<h&&(a=h),o++);if(t.count=i,0<o)if(t.sum=r,t.min=s,t.max=a,t.avg=r/i,t.dataCount=o,t.dataAvg=r/o,e){for(var d=0,u=t.avg,_=0;_<i;_++){var c;h=(c=this._values[_])?null==c[n]?void 0:c[n]:NaN,isNaN(h)||(d+=Math.pow(h-u,2))}t.varsp=d/i,t.vars=d/(i-1)}else t.varsp=NaN,t.vars=NaN;return!0},o.prototype.summarizeRange=function(t,e,i){if(null==t||null==e)return!1;t.clear();var o=e.length;if(o<1)return!1;for(var n=0,r=t.field,s=0,a=NaN,l=NaN,h=0;h<o;){var d=e[h++],u=(f=this._values[d])?null==f[r]?void 0:f[r]:NaN;if(!isNaN(u)){s=a=l=u,n++;break}}for(;h<o;)d=e[h++],u=(f=this._values[d])?null==f[r]?void 0:f[r]:NaN,isNaN(u)||(s+=u,u<a&&(a=u),l<u&&(l=u),n++);if(t.count=o,0<n)if(t.sum=s,t.min=a,t.max=l,t.avg=s/o,t.dataCount=n,t.dataAvg=s/n,i){for(var _=0,c=t.avg,p=0;p<o;p++){var f;d=e[p],u=(f=this._values[d])?null==f[r]?void 0:f[r]:NaN,isNaN(u)||(_+=Math.pow(u-c,2))}t.varsp=_/o,t.vars=_/(o-1)}else t.varsp=NaN,t.vars=NaN;return!0},o.prototype._keepRow=function(t){var e={};return e.rowId=this._rowIds[t],e.values=this._values[t]&&this._values[t].slice(),e.state=this._rowStates[t],e.orgValues=this._orgValues&&this._orgValues[t]&&this._orgValues[t].slice(),e.outer=this._keepCommandStates(t),e},o.prototype._yieldRow=function(t,e){this._rowIds[t]=e.rowId,this._values[t]=e.values&&e.values.slice(),this._rowStates[t]=e.state,this._orgValues&&(this._orgValues[t]=e.orgValues&&e.orgValues.slice()),this._yieldCommandStates(t,e.outer)},o.prototype._keepStates=function(t){var e={};return e.rowId=this._rowIds[t],e.state=this._rowStates[t],e.orgValues=this._orgValues&&this._orgValues[t]&&this._orgValues[t].slice(),e},o.prototype._yieldStates=function(t,e){this._rowIds[t]=e.rowId,this._rowStates[t]=e.state,this._orgValues&&(this._orgValues[t]=e.orgValues&&e.orgValues.slice())},o.prototype._keepState=function(t){return this._rowStates[t]},o.prototype._yieldState=function(t,e){this._rowStates[t]=e},o.prototype._keepOrgValues=function(){var t=this._orgValues;if(t){for(var e=[],i=0;i<t.length;i++)e.push(t[i]&&t[i].slice());return e}return null},o.prototype._yieldOrgValues=function(t){if(t){this._orgValues=[];for(var e=0;e<t.length;e++)this._orgValues.push(t[e]&&t[e].slice())}else this._orgValues=t},o.prototype.$_checkRowIndex=function(t){if(t<0||t>=this._values.length)throw ne.Utils.isDebugging(),new g.DataSourceError("row is out of bounds: "+t)},o.prototype.$_resetOrgValues=function(){var t=this.restoreMode;this._orgValues=this.checkStates&&t!=f.RestoreMode.NONE?[]:null,this._needRestore=this._orgValues&&t==f.RestoreMode.AUTO},o.prototype.arrayToRow=function(t,e){for(var i=Math.min(t?t.length:0,this.fieldCount),o=new Array(i),n=0;n<i;n++)o[n]=this.getField(n).readValue(t[n]);return this._internalCalculateValues(o,e),o},o.prototype.$_internalSetRow=function(t,e,i){var o=this.arrayToRow(e,t);this._values[t]=o,this._rowIds[t]=this._nextRowId++,this.checkStates&&(this._rowStates[t]=I.RowState.NONE)},o.prototype.$_internalInsertRow=function(t,e,i){var o=this.arrayToRow(e,t),n=t==this._values.length;n?(this._values.push(o),this._rowIds.push(this._nextRowId++)):(this._values.splice(t,0,o),this._rowIds.splice(t,0,this._nextRowId++)),i&&this.tags.insertRow(t),n?this._rowStates.push(this.checkStates?I.RowState.CREATED:I.RowState.NONE):(this._rowStates.splice(t,0,this.checkStates?I.RowState.CREATED:I.RowState.NONE),this._orgValues&&this._orgValues.splice(t,0,void 0))},o.prototype.$_updateRow=function(t,e,i){if(this._checkClientState())return this.$_checkRowIndex(t),this.refreshFieldFormats(),!(!e||!this.fireRowUpdating(t,e)||(this.$_internalUpdateRow(t,e,i,!0,!0),this.fireRowUpdated(t),0))},o.prototype.$_updateRows=function(t,e,i,o,n,r,s){if(void 0===s&&(s=null),this._checkClientState()&&e){var a=e.length;if(!(a<1)&&0!=(o=o<0?a:Math.min(a,o))){i=Math.max(0,i),this.refreshFieldFormats();var l=this.rowCount,h=Math.min(a,i+o);if(!(h<=i))if(s&&(s.rows=[],s.values=[],s.states=[],s.orgValues=[]),r)for(var d=t,u=i;u<h&&d<l;u++,d++){var _=e[u];this._values[d]||(this._values[d]=new Array(this.fieldCount)),this.fireRowUpdating(d,_)&&(s&&(s.rows.push(d),s.values.push(this._values[d].slice()),s.states.push(this._rowStates[d]),s.orgValues.push(this._orgValues&&this._orgValues[d])),this.$_internalUpdateRow(d,_,n,!0,!0),this.fireRowUpdated(d))}else{var c=[];for(d=t,u=i;u<h&&d<l;u++,d++)this._rowStates[d]==I.RowState.NONE&&c.push(d),this._values[d]||(this._values[d]=new Array(this.fieldCount)),s&&(s.rows.push(d),s.values.push(this._values[d].slice()),s.states.push(this._rowStates[d]),s.orgValues.push(this._orgValues&&this._orgValues[d])),_=e[u],this.$_internalUpdateRow(d,_,n,!1,!1);0<c.length&&this.fireRowStatesChanged(c),this.tags.updateRows(t,o=h-i),this.fireRowsUpdated(t,o)}}}},o.prototype.$_fillValue=function(t,e,i,o){if(void 0===o&&(o=null),this._checkClientState()&&t&&t.length&&e&&e.length){this.refreshFieldFormats(),o&&(o.rows=[],o.values=[],o.states=[],o.orgValues=[]);for(var n=[],r=0,s=t;r<s.length;r++){var a=s[r];this._rowStates[a]==I.RowState.NONE&&n.push(a),this._values[a]||(this._values[a]=new Array(this.fieldCount)),o&&(o.rows.push(a),o.values.push(this._values[a].slice()),o.states.push(this._rowStates[a]),o.orgValues.push(this._orgValues&&this._orgValues[a]));for(var l=this._values[a].slice(),h=0,d=e;h<d.length;h++)l[d[h]]=i;this.$_internalUpdateRow(a,l,!1,!1,!1)}0<n.length&&this.fireRowStatesChanged(n),this.tags.updateRowList(t),this.fireRowListUpdated(t)}},o.prototype.$_internalUpdateRow=function(t,e,i,o,n){var r,s=this.getFields(),a=ne.Utils.isArray(e),l=Math.min(s.length,a?e.length:s.length),h=this._values[t],d=this._rowStates[t],u=this.checkStates&&(d==I.RowState.NONE||!d);h||(this._values[t]=h=[]),u&&this._orgValues&&(r=h.concat());for(var _=!1,c=0;c<l;c++){var p=s[c];if((p.updatable||d==I.RowState.CREATED||d==I.RowState.CREATE_AND_DELETED)&&(a||e.hasOwnProperty(p.orgFieldName))){var f=a?e[c]:e[p.orgFieldName];i&&void 0===f||(_=!this._needRestore||_||(i?!p.equalValues(h[c],p.readValue(f)):!p.sameValues(h[c],p.readValue(f))),h[c]=p.readValue(f))}}_&&this._internalCalculateValues(h,t),u&&_?(r&&(this._orgValues[t]=r),this.$_changeRowState(t,I.RowState.UPDATED,o)):this._needRestore&&this.restoreState(t),n&&this.tags.updateRow(t)},o.prototype.$_changeRowState=function(t,e,i,o,n){if(void 0===o&&(o=!1),void 0===n&&(n=!1),this.checkStates||o){var r=this._rowStates[t];if((e=e||I.RowState.NONE)!=r)return this._rowStates[t]=e,n&&(!I.isDeletedState(r)&&I.isDeletedState(e)?this._deletedCount++:I.isDeletedState(r)&&!I.isDeletedState(e)&&this._deletedCount--),i&&this.fireRowStateChanged(t),!0}return!1},o.prototype.restoreState=function(t){if(this._rowStates[t]===I.RowState.UPDATED){var e=this._orgValues[t];if(e){for(var i=this._values[t],o=this.strictRestore,n=0,r=this.fieldCount;n<r;n++){var s=i.length>n?i[n]:void 0,a=e.length>n?e[n]:void 0;if(o){if(!this.getField(n).equalValues(s,a))return!1}else if(!this.getField(n).sameValues(s,a))return!1}return this._rowStates[t]=I.RowState.NONE,!0}}return!1},o.prototype.prepareOrgValues=function(t,e,i){i==I.RowState.UPDATED?this._orgValues[t]=this._values[t]?this._values[t].concat():[]:e==I.RowState.UPDATED&&this._orgValues[t]&&(this._orgValues[t]=void 0)},o.prototype.$_changeRowStateEx=function(t,e,i,o,n){var r=this._rowStates[t];return!!this.$_changeRowState(t,e,!1,o,n)&&(this._orgValues&&this.prepareOrgValues(t,r,e),i&&this.fireRowStateChanged(t),!0)},o.prototype.$_getRowObject=function(t,e){var i={},o=this._values[t];if(o)for(var n=0;n<e;n++)i[this.getOrgFieldName(n)]=o[n];return i},o.prototype.$_deleteRow=function(t){if(this.fireRowRemoving(t)){var e=this._rowStates[t];return this.$_internalRemoveRow(t),I.isDeletedState(e)&&this._deletedCount--,this.tags.removeRow(t),this.fireRowRemoved(t),this._fireRowCountChanged(),!0}return!1},o.prototype.$_internalRemoveRow=function(t){var e=this._rowIds[t];0<=this._hiddenIds.indexOf(e)&&this._hiddenIds.splice(this._hiddenIds.indexOf(e),1),this._values.splice(t,1),this._rowIds.splice(t,1),this._orgValues&&this._orgValues.length>t&&this._orgValues.splice(t,1),this._rowStates.splice(t,1)},o.prototype.$_internalMoveRow=function(t,e){var i=this._values[t],o=this._rowIds[t],n=this._rowStates[t];this._values.splice(t,1),this._rowIds.splice(t,1),this._rowStates.splice(t,1),this._values.splice(e,0,i),this._rowIds.splice(e,0,o),this._rowStates.splice(e,0,n),this._orgValues&&this._orgValues.length>t&&(i=this._orgValues[t],this._orgValues.splice(t,1),this._orgValues.splice(e,0,i))},o.prototype.$_internalMoveRows=function(t,e,i){for(var o=this._values.splice(t,e),n=this._rowIds.splice(t,e),r=this._rowStates.splice(t,e),s=0,a=o.length;s<a;s++)this._values.splice(i+s,0,o[s]),this._rowIds.splice(i+s,0,n[s]),this._rowStates.splice(i+s,0,r[s]);if(this._orgValues&&this._orgValues.length>t)for(s=0,a=(o=this._orgValues.splice(t,e)).length;s<a;s++)this._orgValues.splice(i+s,0,o[s])},o.prototype.$_internalMoveRowList=function(t,e){for(var i=[],o=[],n=[],r=t.length-1;0<=r;r--){var s=t[r];i.push(this._values.splice(s,1)[0]),o.push(this._rowIds.splice(s,1)[0]),n.push(this._rowStates.splice(s,1)[0])}i=i.reverse(),o=o.reverse(),n=n.reverse();for(var a=0,l=t.length;a<l;a++)this._values.splice(e+a,0,i[a]),this._rowIds.splice(e+a,0,o[a]),this._rowStates.splice(e+a,0,n[a]);if(this._orgValues&&this._orgValues.length>t[0]){i=[];for(var h=t.length-1;0<=h;h--)i=this._orgValues.splice(t[h],1)[0];for(i=i.reverse(),a=0,l=t.length;a<l;a++)this._orgValues.splice(e+a,0,i[a])}},o.prototype.$_searchDataRow=function(t,e,i,o,n){var r=this.rowCount;if(r<1)return-1;var s=Math.min(t.length,e.length);if(s<1)return-1;for(var a=!i||i.allFields,l=i&&i.caseSensitive,h=i&&i.partialMatch,d=null,u=[],_=i.compareCallback||ne.Utils.compareTextValue,c=0;c<s;c++)u[c]=this.getField(t[c]).dataType;o=Math.max(0,o),n=Math.min(r-1,n);for(var p=o;p<=n;p++){var f=!0;for(c=0;c<s;c++){var g=this.getValue(p,t[c]);switch(u[c]){case lt.ValueType.DATETIME:case lt.ValueType.DATE:if(e[c]instanceof Date)f=_.call(this.$_handler,e[c],g,l,h);else{if(!d){var m=/[.]/.test(e[c])?"yyyy.MM.dd":/[/]/.test(e[c])?"yyyy/MM/dd":/[-]/.test(e[c])?"yyyy-MM-dd":"yyyyMMdd";d=new _t.DateTimeConverter(m)}f=_.call(this.$_handler,e[c],g?d.getText(g):g,l,h)}break;default:f=_.call(this.$_handler,e[c],g,l,h)}if(f&&!a)return p;if(!f&&a)break}if(f)return p}return-1},o.prototype.searchDataRow=function(t){var e=-1;t instanceof y.SearchOptions||(t=new y.SearchOptions(t));var i=t.fields,o=t.values,n=t.startIndex;if(i&&0<i.length&&o&&0<o.length){for(var r=i.length,s=[],a=0;a<r;a++){var l=parseFloat(i[a]);if(isNaN(l)){var h=this.getFieldIndex(i[a]);0<=h&&s.push(h)}else s.push(l)}0<s.length&&(r=this.rowCount,(e=(n=Math.max(0,n))<r?this.$_searchDataRow(s,o,t,n,r-1):-1)<0&&t.wrap&&0<n&&(e=this.$_searchDataRow(s,o,t,0,n-1)))}return e},o.prototype.$_searchData=function(t,e,i,o,n,r){var s=this.rowCount;if(s<1)return null;for(var a=i&&i.caseSensitive,l=i&&i.partialMatch,h=this.fieldCount,d=t.length,u=null,_=[],c=0;c<h;c++)_[c]=this.getField(c).dataType;o=Math.max(0,o),n=Math.min(s-1,n),(r=Math.max(0,r))>=t.length&&(o++,r=0);for(var p=i.compareCallback||ne.Utils.compareTextValue,f=o;f<=n;f++)for(c=o<f?0:r;c<d;c++){var g=t[c];if(0<=g&&g<h){var m=this.getValue(f,g),y=!1;switch(_[g]){case lt.ValueType.DATETIME:case lt.ValueType.DATE:if(e instanceof Date)y=p.call(this.$_handler,e,m,a,l);else{if(!u){var v=/[.]/.test(e)?"yyyy.MM.dd":/[/]/.test(e)?"yyyy/MM/dd":/[-]/.test(e)?"yyyy-MM-dd":"yyyyMMdd";u=new _t.DateTimeConverter(v)}y=p.call(this.$_handler,e,m?u.getText(m):m,a,l)}break;default:y=p.call(this.$_handler,e,m,a,l)}if(y)return{dataRow:f,fieldIndex:g,searchFieldIndex:c}}}return null},o.prototype.searchData=function(t){t instanceof y.SearchCellOptions||(t=new y.SearchCellOptions(t));var e=null,i=t.fields,o=t.value,n=Math.max(0,t.startIndex),r=Math.max(0,t.startFieldIndex);if(!i||i.length<1){i=[];for(var s=this.getFields(),a=0;a<s.length;a++)i.push(s[a].orgFieldName)}if(i&&0<i.length&&null!=o){var l,h,d=i.length,u=[];for(l=0;l<d;l++)h=parseFloat(i[l]),isNaN(h)?u.push(this.getFieldIndex(i[l])):u.push(h);0<u.length&&(!(e=n<(d=this.rowCount)?this.$_searchData(u,o,t,n,d-1,r):null)&&t.wrap&&0<n&&(e=this.$_searchData(u,o,t,0,n-1,0)),e&&(e.fieldName=this.getOrgFieldName(e.fieldIndex)))}return e},o.prototype.isDataChanged=function(t,e){if(this._rowStates[t]!==I.RowState.UPDATED||!this._orgValues)return!1;if(this.$_checkRowIndex(t),this._checkFieldIndex(e),this._orgValues[t]){var i=this._orgValues[t][e],o=this.getValue(t,e),n=this.getField(e);return n&&n.dataType!==lt.ValueType.OBJECT&&!n.sameValues(i,o)}return!1},o.prototype.$_hideRows=function(t,e){if(null!=t){for(var i=ne.Utils.isArray(t)?t:[t],o=[],n=this._hiddenIds.length,r=0,s=i.length;r<s;r++){var a=this.getRowId(i[r]);if(null!=a)if(o.push(a),e)this._hiddenIds.indexOf(a)<0&&this._hiddenIds.push(a);else{var l=this._hiddenIds.indexOf(a);0<=l&&this._hiddenIds.splice(l,1)}}this._hiddenIds.length!==n&&this.fireRowHided(o,e)}},o.prototype.hideRows=function(t){this.$_hideRows(t,!0)},o.prototype.showRows=function(t){this.$_hideRows(t,!1)},o.prototype.clearHiddenRows=function(){0<this._hiddenIds.length&&(this._hiddenIds=[],this.fireRowHided([],!1))},o.prototype.getHiddenRows=function(){for(var t=[],e=0,i=this._hiddenIds.length;e<i;e++){var o=this._rowIds.indexOf(this._hiddenIds[e]);0<=o&&t.push(o)}return t.sort(function(t,e){return t-e}),t},o.prototype.isHiddenRow=function(t){var e=this._rowIds[t];return 0<=this._hiddenIds.indexOf(e)},_dp(o,"hiddenCount",{get:function(){return this._hiddenIds.length}}),o.prototype.undo=function(){this.canUndo&&this._commands.undo()},o.prototype.redo=function(){this.canRedo&&this._commands.redo(!0)},o.prototype.clearCommandStack=function(){this._commands.flush()},o);function o(t,e){var i=r.call(this)||this;return i._points=[],i._nextPoint=0,i._values=[],i._rowIds=[],i._rowStates=[],i._orgValues=null,i._needRestore=!1,i._deletedCount=0,i._nextRowId=0,i._hiddenIds=[],i.$_handler=e,t&&(i.undoable=!0,i._commands=new x.LocalDataCommandStack(i)),i}e.LocalDataProvider=i});t(j);j.LocalDataProvider;var q=e(function(t,e){Object.defineProperty(e,"__esModule",{value:!0});var i,o=(i=re.Base,oe.__extends(n,i),n.prototype._doDispose=function(){i.prototype._doDispose.call(this)},n.prototype.add=function(t){if(t){var e=this._tags||(this._tags=[]);e.indexOf(t)<0&&e.push(t),t.connect(this._owner)}},n.prototype.remove=function(t){if(t&&this._tags){var e=this._tags.indexOf(t);0<=e&&(this._tags.splice(e,1),t.disconnect())}},n.prototype.clearRows=function(){if(this._tags)for(var t=this._tags.length;t--;)this._tags[t].clearRows()},n.prototype.setRows=function(){if(this._tags)for(var t=this._tags.length;t--;)this._tags[t].setRows()},n.prototype.addRow=function(t){if(this._tags)for(var e=this._tags.length;e--;)this._tags[e].addRow(t)},n.prototype.addRows=function(t){if(this._tags)for(var e=this._tags.length;e--;)this._tags[e].addRows(t)},n.prototype.removeRow=function(t){if(this._tags)for(var e=this._tags.length;e--;)this._tags[e].removeRow(t)},n.prototype.removeRows=function(t){if(this._tags)for(var e=this._tags.length;e--;)this._tags[e].removeRows(t)},n.prototype.updateRow=function(t){if(this._tags)for(var e=this._tags.length;e--;)this._tags[e].updateRow(t)},n.prototype.updateRows=function(t){if(this._tags)for(var e=this._tags.length;e--;)this._tags[e].updateRows(t)},n);function n(t){var e=i.call(this)||this;return e._tags=new Array,e._owner=t,e}e.TreeDataTagCollection=o});t(q);q.TreeDataTagCollection;var ct=e(function(t,e){Object.defineProperty(e,"__esModule",{value:!0});var i=(o.parse=function(t){return(new window.DOMParser).parseFromString(t,"text/xml")},o.toString=function(t){return(new window.XMLSerializer).serializeToString(t)},o.getNodeValue=function(t){return t.firstChild.nodeValue},o.getAttr=function(t,e){return t.getAttribute(e)},o.setAttr=function(t,e,i){t.setAttribute(e,i)},o.addChild=function(t,e,i){var o=t.createElement(i);return e.appendChild(o),o},o.addChildWithAttr=function(t,e,i,o,n){var r=t.createElement(i);return r.setAttribute(o,n),e.appendChild(r),r},o.addChildWithValue=function(t,e,i,o){var n=t.createElement(i);return n.nodeValue=o,e.appendChild(n),n},o.parseXml=function(e){var i=null;try{(i=new ActiveXObject("Microsoft.XMLDOM")).async=!1,i.loadXML(e)}catch(t){if(i)throw t;i=(new window.DOMParser).parseFromString(e,"text/xml")}return i},o);function o(){}e.XmlUtils=i});t(ct);ct.XmlUtils;var Y=e(function(t,e){function h(t,e){var i=[];if(t){var o=t.childNodes;if(o)for(var n=0,r=o.length;n<r;n++){var s=o[n];s.tagName===e&&i.push(s)}}return i}Object.defineProperty(e,"__esModule",{value:!0});var i,l,o,a=(i=re.Base,oe.__extends(n,i),n.extractJson=function(t,e){var i=t;if(e=e&&e.trim())for(var o=e.split("."),n=0;n<o.length;n++){var r=o[n]&&o[n].trim();if(r){var s=r.indexOf("["),a=r.lastIndexOf("]");if(0<s&&s<a){var l=r.substring(0,s),h="$"!=l?i[l]:i;if(Array.isArray(h)){l=r.substring(s+1,a);var d=parseInt(l);i=0<=d&&d<h.length?h[d]:null}else i=null}else"$"!=r&&(i=i[r]);if(!i)break}}return Array.isArray(i)?i:null},n.extractXml=function(t,e){var i=null;if(e=e&&e.trim())for(var o=e.split("."),n=0;n<o.length;n++){var r=o[n]&&o[n].trim();if(r){var s=r.indexOf("["),a=r.lastIndexOf("]");if(0<s&&s<a){var l=r.substring(0,s);(i=h(i?i[0]:t,l))&&(l=r.substring(s+1,a),i=i[parseInt(l)])}else i=h(i?i[0]:t,r);if(!i)break}}return i},n);function n(){return null!==i&&i.apply(this,arguments)||this}e.DataPath=a,(o=l=e.DataFillMode||(e.DataFillMode={})).SET="set",o.APPEND="append",o.INSERT="insert",o.UPDATE="update";var r,s=(r=re.Base,oe.__extends(d,r),d);function d(t){var e=r.call(this)||this;if(e.fillMode=l.SET,e.fillPos=0,e.count=-1,e.rootArray=!0,e.rows="row",e.start=0,e.delimiter=",",e.quoted=!1,e.parentId=0,e.childrenField=null,e.treeField=null,e.iconField=null,e.needSorting=!1,e.noStates=!1,t){for(var i in t.hasOwnProperty("append")&&(e.fillMode=l.APPEND),t.hasOwnProperty("fillMode")&&(e.fillMode=t.fillMode),t.hasOwnProperty("fillPos")&&(e.fillPos=t.fillPos),t.hasOwnProperty("count")&&(e.count=t.count),t.hasOwnProperty("rootArray")&&(e.rootArray=t.rootArray),t.hasOwnProperty("rows")&&(e.rows=t.rows),t.hasOwnProperty("start")&&(e.start=t.start),t.hasOwnProperty("delimiter")&&(e.delimiter=t.delimiter),t.hasOwnProperty("quoted")&&(e.quoted=t.quoted),t)void 0!==t[i]&&(e[i]=t[i]);e.parentId=t.parentId||t.parent,e.childrenField=t.childrenField||t.children,e.treeField=t.treeField||t.tree,e.iconField=t.iconField||t.icon,e.needSorting=t.needSorting||t.sorting}return e}e.DataFillOptions=s;var u,_=(u=re.Base,oe.__extends(c,u),c.prototype._doDispose=function(){this._provider=null},c.prototype.load=function(t,e,i){var o=new s(i);if(this._checkEmpty(e,o))return 0;var n=this._provider.checkStates;o.noStates&&(this._provider.checkStates=!1);try{switch(t){case"json":return this._loadJson(e,o);case"xml":return this._loadXml(e,o);case"csv":return this._loadCsv(e,o)}}finally{this._provider.checkStates=n}return 0},c.prototype._loadJson=function(t,e){"string"==typeof t&&(t=JSON.parse(t));var i=null;if(e.rootArray&&(i=ne.Utils.isArray(t)?t:null),i=i||a.extractJson(t,e.rows)){var o=e.fillPos,n=e.start,r=e.count;switch(e.fillMode){case l.APPEND:this._provider.appendRows(i,n,r);break;case l.INSERT:this._provider.insertRows(o,i,n,r);break;case l.UPDATE:this._provider.updateRows(o,i,n,r,!1);break;case l.SET:default:this._provider.setRows(i,n,r)}return i.length}return this._fillEmpty(e),0},c.prototype._loadXml=function(t,e){if("string"==typeof t&&(t=ct.XmlUtils.parse(t)),t&&t.documentElement){var i=e.fillPos,o=e.start,n=e.count,r=e.rows,s=a.extractXml(t.documentElement,r);switch(e.fillMode){case l.APPEND:this._provider.appendXmlRows(s,o,n);break;case l.INSERT:this._provider.insertXmlRows(i,s,o,n);break;case l.UPDATE:this._provider.updateXmlRows(i,s,o,n);break;case l.SET:default:this._provider.setXmlRows(s,o,n)}return s.length}return this._fillEmpty(e),0},c.prototype._loadCsv=function(t,e){var i=e.fillPos,o=e.start,n=e.count,r=e.quoted,s=e.delimiter,a=N.DataHelper.csvToArray(this._provider,t,o,n,r,s);if(a&&0<(n=a.length)){switch(e.fillMode){case l.APPEND:this._provider.appendRows(a,0,n);break;case l.INSERT:this._provider.insertRows(i,a,0,n);break;case l.UPDATE:this._provider.updateRows(i,a,0,n,!1);break;case l.SET:default:this._provider.setRows(a,0,n)}return a.length}return this._fillEmpty(e),0},c.prototype._fillEmpty=function(t){t.fillMode===l.SET&&this._provider.setRows(null)},c.prototype._checkEmpty=function(t,e){return!t&&(this._fillEmpty(e),!0)},c);function c(t){var e=u.call(this)||this;return e._provider=t,e}e.DataLoader=_});t(Y);Y.DataPath,Y.DataFillMode,Y.DataFillOptions,Y.DataLoader;var X=e(function(t,e){Object.defineProperty(e,"__esModule",{value:!0});var o,i=(o=re.Base,oe.__extends(n,o),n.prototype._doDispose=function(){o.prototype._doDispose.call(this)},_dp(n,"provider",{get:function(){return this._ds}}),_dp(n,"rootRow",{get:function(){return this._rootRow}}),_dp(n,"insertedRows",{get:function(){return this._rows}}),_dp(n,"insertedCount",{get:function(){return this._rowCount}}),n.prototype._prepareLoad=function(t){this._rowCount=0,this._rows=[]},n.prototype._objectToArray=function(t,e){for(var i=e.fieldCount,o=new Array(i),n=0;n<i;n++){var r=e.getOrgFieldName(n);t.hasOwnProperty(r)&&(o[n]=t[r])}return e._internalCalculateValues(o,-1),o},n.prototype._createRow=function(t,e,i){var o=new et.TreeDataRowImpl(this._ds,i);return this._ds._internalCalculateValues(o._values,o.rowId),0<=t&&this._ds.setHasChildren(o,i[t]),0<=e&&this._ds.setIconIndex(o,i[e]),o},n.prototype._createRow2=function(t,e,i){var o=new et.TreeDataRowImpl(this._ds,i);return this._ds._internalCalculateValues(o._values,o.rowId),void 0!==t&&this._ds.setHasChildren(o,t),void 0!==e&&this._ds.setIconIndex(o,e),o},n.prototype._rowAdded=function(t,e){this._rowCount++,this._rows&&e.parent===t&&this._rows.push(e)},n.prototype._addRow=function(t,e,i,o,n){var r=this._createRow(i,o,n);return e._insertChild(e.count,r,!0,!0),this._rowAdded(t,r),r},n.prototype._addRow2=function(t,e,i,o,n){var r=this._createRow2(i,o,n);return e._insertChild(e.count,r,!0,!0),this._rowAdded(t,r),r},n);function n(t,e){var i=o.call(this)||this;return i._rowCount=0,i._ds=t,i._rootRow=e,i}e.TreeDataSource=i;var r,s=(r=i,oe.__extends(a,r),a.prototype._loadData=function(t,e,i,o,n,r){if(this._prepareLoad(e),!t||t.length<1)return this._rowCount;for(var s=this.provider,a=t.length,l=[],h=0;h<a;h++)l[h]=h,Array.isArray(t[h])||(t[h]=this._objectToArray(t[h],s));o&&this.$_sortRows(l,t,i,0,a-1),s.beginUpdate();try{this.$_buildTree(e||this.rootRow,l,t,i,n,r)}finally{s.endUpdate(!1)}return this.insertedCount},a.prototype.$_sortRows=function(t,n,r,e,i){function o(t,e){var i=n[t][r],o=n[e][r];return i==o?0:i<o?-1:1}do{var s=e,a=i,l=t[Math.floor((e+i)/2)];do{for(;!(o(l,t[s])<=0);)s++;for(;!(0<=o(l,t[a]));)a--;if(s<=a){if(s!=a){var h=t[s];t[s]=t[a],t[a]=h}s++,a--}}while(s<=a);e<a&&this.$_sortRows(t,n,r,e,a),e=s}while(e<i)},a.prototype.$_buildTree=function(s,t,e,a,i,o){function n(t,e,i,o){for(var n=o[a];e!=s;){var r=e.getValue(a);if(t.parentCallback){if(t.parentCallback(r,n))return e}else if(0==n.indexOf(r))return e;e=e.parent}return s}var r=t[0],l=this._createRow(i,o,e[r]),h=n(this,s,0,e[r]);if(h._insertChild(h.count,l,!0,!0),this._rowAdded(s,l),1<t.length)for(var d=t.length,u=l,_=1;_<d;_++)r=t[_],l=this._createRow(i,o,e[r]),(h=n(this,u,0,e[r]))._insertChild(h.count,l,!0,!0),this._rowAdded(s,l),u=l},a);function a(t,e){return r.call(this,t,e)||this}var l,h=(l=s,oe.__extends(d,l),d.prototype.load=function(t,e,i,o,n,r){return this._loadData(e,t,i,o,n,r)},d);function d(t,e){return l.call(this,t,e)||this}e.ArrayTreeSource=h;var u,_=(u=s,oe.__extends(c,u),c.prototype.load=function(t,e,i,o,n,r){var s=N.DataHelper.csvToArray(this.provider,e);return this._loadData(s,t,i,o,n,r)},c);function c(t,e){return u.call(this,t,e)||this}e.CsvTreeSource=_;var p,f=(p=i,oe.__extends(g,p),g.prototype.load=function(t,e,i,o,n){if(this._prepareLoad(t),e){var r=Y.DataPath.extractJson(e,i);if(r&&0<r.length){this.provider.beginUpdate();try{this.$_buildJsonTree(this.provider,t||this.rootRow,r,i,o,n)}finally{this.provider.endUpdate(!1)}}}return this._rowCount},g.prototype.load2=function(t,e,i,o,n,r){if(this._prepareLoad(t),e){var s=Y.DataPath.extractJson(e,i);if(s&&0<s.length){this.provider.beginUpdate();try{this.$_buildJsonTree2(this.provider,t||this.rootRow,s,o,n,r)}finally{this.provider.endUpdate(!1)}}}return this._rowCount},g.prototype.$_buildJsonTree=function(t,p,e,f,g,m){var i=t.getOrgFieldNames();!function t(e,i,o,n){for(var r=n.length,s=0,a=o.length;s<a;s++){for(var l=o[s],h=new Array(r),d=0;d<r;d++){var u=n[d];l.hasOwnProperty(u)&&(h[d]=l[u])}var _=e._addRow(p,i,g,m,h);if(l.hasOwnProperty(f)){var c=l[f];Array.isArray(c)&&0<c.length&&t(e,_,c,n)}}}(this,p,e,i)},g.prototype.$_buildJsonTree2=function(t,p,e,f,g,m){var i=t.getOrgFieldNames();!function t(e,i,o,n){for(var r=n.length,s=0,a=o.length;s<a;s++){for(var l=o[s],h=new Array(r),d=0;d<r;d++){var u=n[d];l.hasOwnProperty(u)&&(h[d]=l[u])}var _=e._addRow2(p,i,l[g],l[m],h);if(l.hasOwnProperty(f)){var c=l[f];Array.isArray(c)&&0<c.length&&t(e,_,c,n)}}}(this,p,e,i)},g);function g(t,e){return p.call(this,t,e)||this}e.JsonTreeSource=f;var m,y=(m=s,oe.__extends(v,m),v.prototype.load=function(t,e,i,o,n){if(this._prepareLoad(t),e){var r="string"==typeof e?ct.XmlUtils.parseXml(e):e;if(r){var s=Y.DataPath.extractXml(r.documentElement,i);if(s&&0<s.length){this.provider.beginUpdate();try{this.$_buildXmlTree(this.provider,t||this.rootRow,s,i,o,n)}finally{this.provider.endUpdate(!1)}}}}return this._rowCount},v.prototype.$_buildXmlTree=function(t,_,e,c,p,f){!function t(e,i,o,n,r){for(var s=0,a=o.length;s<a;s++){var l=o[s],h=N.DataHelper.xmlToRow(l,n,r),d=e._addRow(_,i,p,f,h),u=Y.DataPath.extractXml(l,c);u&&0<u.length&&t(e,d,u,n,r)}}(this,_,e,t.getFields(),t.getOrgFieldNames())},v);function v(t,e){return m.call(this,t,e)||this}e.XmlTreeSource=y});t(X);X.TreeDataSource,X.ArrayTreeSource,X.CsvTreeSource,X.JsonTreeSource,X.XmlTreeSource;var K=e(function(t,e){Object.defineProperty(e,"__esModule",{value:!0});var i,o=(i=x.DataEditCommand,oe.__extends(n,i),n);function n(t){return i.call(this,t)||this}e.LocalTreeDataCommand=o;var r,s=(r=v.EditCommandStack,oe.__extends(a,r),a);function a(){return null!==r&&r.apply(this,arguments)||this}e.LocalTreeDataCommandStack=s});t(K);K.LocalTreeDataCommand,K.LocalTreeDataCommandStack;var Z=e(function(t,e){Object.defineProperty(e,"__esModule",{value:!0});var r,i=(r=K.LocalTreeDataCommand,oe.__extends(o,r),o.prototype._doRun=function(t){var e={};return e.row=this._row._keepRow(t),(e.result=this._row.$_update(t,this._values,this._strict,!1))&&(this._newState=this._row.rowState),e},o.prototype._doRedo=function(t,e){this._row.$_update(t,this._values,this._strict,!1)},o.prototype._doUndo=function(t,e){this._row._yieldRow(t,e.row),e.row.state!=this._newState&&t._fireRowStateChanged(this._row,!1),t._rowUpdated(this._row)},o);function o(t,e,i,o){var n=r.call(this,t)||this;return n._row=e,n._values=n._cloneRow(i),n._strict=o,n}e.UpdateTreeDataCommand=i});t(Z);Z.UpdateTreeDataCommand;var Q=e(function(t,e){Object.defineProperty(e,"__esModule",{value:!0});var i,o=(i=re.Base,oe.__extends(n,i),n.getRowIds=function(t){if(!t)return null;for(var e=[],i=0,o=t;i<o.length;i++){var n=o[i];e.push(n.rowId)}return e},n.prototype._doDispose=function(){i.prototype._doDispose.call(this)},_dp(n,"rowId",{get:function(){return this._rowId}}),_dp(n,"provider",{get:function(){return null}}),_dp(n,"parent",{get:function(){return null}}),_dp(n,"index",{get:function(){var t=this.parent;return null!=t?t._children.indexOf(this):-1}}),_dp(n,"level",{get:function(){return 0}}),_dp(n,"iconIndex",{get:function(){return-1},set:function(t){}}),_dp(n,"hasChildren",{get:function(){return!1}}),_dp(n,"count",{get:function(){return this._children?this._children.length:0}}),_dp(n,"descendantCount",{get:function(){return this._descendantCount}}),_dp(n,"children",{get:function(){return this._children?this._children.concat():null}}),_dp(n,"descendants",{get:function(){if(this._children){var t=[];return function t(e,i){for(var o=0,n=e.count;o<n;o++){var r=e.getChild(o);i.push(r),t(r,i)}}(this,t),t}return null}}),_dp(n,"ancestors",{get:function(){var t=null,e=this.parent;if(e)for(t=[];e&&0<=e.rowId;)t.push(e),e=e.parent;return t}}),_dp(n,"rowState",{get:function(){return I.RowState.NONE}}),_dp(n,"values",{get:function(){return null}}),n.prototype.getChild=function(t){if(0<=t){if(!this._children||t>=this._children.length)throw new RangeError("Index is invalid: "+t);return this._children[t]}throw new RangeError("Index is invalid: "+t)},n.prototype.getChildObjects=function(t,e,i,o){var n=this._children;if(n){var r=[];e=e||"rows",i=i||"iconIndex";for(var s=0,a=n.length;s<a;s++){var l=n[s],h=l.getObject();o&&(h._rowId=l._rowId),t&&(h[e]=l.getChildObjects(t,e,i,o)),h[i]=l.iconIndex,r.push(h)}return r}return null},n.prototype.$_createTreeOutputRows=function(t,e,i){},n.prototype.getOutput=function(t,e){return null},n.prototype.getChildOutputObjects=function(t,e,i,o){var n=this.getChildObjects(e,i,o,!0);return n&&t&&this.$_createTreeOutputRows(n,t,i),n},n.prototype.findById=function(t){if(this._children)for(var e=0,i=this._children.length;e<i;e++){var o=this._children[e];if(o.rowId==t)return o;if(o=o.findById(t))return o}return null},n.prototype.indexOf=function(t){return this._children?this._children.indexOf(t):-1},n.prototype.insertChild=function(t,e,i){return this._insertChild(t,e,!1,i)},n.prototype.addChild=function(t,e){return this._insertChild(this.count,t,!1,e)},n.prototype.insertChildren=function(t,e,i){return this._insertChildren(t,e,!1,i)},n.prototype.removeChild=function(t){return this._removeChild(t,!1)},n.prototype.clearChildren=function(){var t=this.provider;t&&!t._checkClientState()||this._removeChildren()},n.prototype.findChild=function(t,e){var i=this.provider;if(!i||!t||t.length<1||!e||e.length<t.length)return null;for(var o=[],n=[],r=0,s=t.length;r<s;r++){var a=void 0;0<=(a="string"==typeof t[r]?i.getFieldIndex(t[r]):Number(t[r]))&&a<i.fieldCount&&o.indexOf(a)<0&&(o.push(a),n.push(e[r]))}r=0;for(var l=o.length;r<l;r++)o[r]=i.getField(o[r]);return this.$_findChild(o,n)},n.prototype.isAncestorOf=function(t){if(t&&t!==this){for(var e=t.parent;e&&e!==this;)e=e.parent;return e===this}return!1},n.prototype.clearRowStates=function(t,e){var i=this.provider;if(i){var o=[],n=t?[]:null;this._collectStateRows(o,n);var r=o.length,s=n?n.length:0;if(0!=r||0!=s){if(e)for(var a=0,l=o.length;a<l;a++)o[a]._changeRowState(I.RowState.NONE,!0,!1);else r&&i.changeRowStates(o,I.RowState.NONE);s&&i.deleteRows(n)}}},n.prototype.toTreeString=function(){for(var t=this.rowId+"",e=new Array(this.level+1).join("  "),i=0;i<this.count;i++)t+="\n"+e+this.getChild(i).toTreeString();return t},n.prototype._checkFieldIndex=function(t){var e=this.provider.fieldCount;if(t<0||e<=t)throw new g.DataSourceError("Field index is out of bounds: "+t)},n.prototype._descendantCountChanged=function(t){this._descendantCount+=t;var e=this.parent;e&&e._descendantCountChanged(t)},n.prototype._moveChild=function(t,e){if(t!=e){if(t<0||t>=this._children.length)throw new RangeError("index is out of range: "+t);if(e<0||e>=this._children.length)throw new RangeError("newIndex is out of range: "+e);var i=this._children[t];if(e<t)for(var o=t;e<o;o--)this._children[o]=this._children[o-1];else for(o=t;o<e;o++)this._children[o]=this._children[o+1];this._children[e]=i}},n.prototype._moveChildren=function(t,e){var i=t[0];if(i!=e){if(i<0||i>=this._children.length)throw new RangeError("index is out of range: "+t[0]);if(e<0||e>=this._children.length)throw new RangeError("newIndex is out of range: "+e);for(var o=this._children,n=[],r=t.length-1;0<=r;r--)n.push(o.splice(t[r],1)[0]);for(r=0;r<n.length;r++)o.splice(e+r,0,n[r])}},n.prototype._changeParent=function(t,e){if(e<0||e>t._children.length)throw new RangeError("index is out of range: "+e);var i=this.parent,o=this.index;i._children.splice(o,1),i._descendantCountChanged(-1-this.descendantCount),i._detach(this),t._children.splice(e,0,this),t._descendantCountChanged(1+this.descendantCount),t._attach(this)},n.prototype._insertChild=function(t,e,i,o){var n=this.provider;if(n&&!i){if(!n._checkClientState())return!1;n.refreshFieldFormats()}if(!e)throw new Error("child is null");if(this._children=this._children||[],t<0||t>this._children.length)throw new RangeError("Insert index is invalid: "+t);return!(!i&&!this._doChildAdding(t,e)||(this._children.splice(t,0,e),this._descendantCountChanged(1+e.descendantCount),this._attach(e),o||e._changeRowState(I.RowState.CREATED,!0,!1),this._doChildAdded(t,e),0))},n.prototype._insertChildren=function(t,e,i,o){var n=this.provider;if(n&&!i){if(!n._checkClientState())return!1;n.refreshFieldFormats()}if(this._children=this._children||[],t<0||t>this._children.length)throw new RangeError("Insert index is invalid: "+t);if(i||this._doRowsAdding(t,e)){for(var r=0,s=0;s<e.length;s++){var a=e[s];this._children.splice(t+s,0,a),this._attach(a),r+=a.descendantCount,o||a._changeRowState(I.RowState.CREATED,!0,!1)}return this._descendantCountChanged(r),this._doRowsAdded(t,e),!0}return!1},n.prototype._addChild=function(t,e,i){return this._insertChild(this.count,t,e,i)},n.prototype.$_removeChild=function(t,e,i){return!(!i&&!this._doChildRemoving(t)||(this._children.splice(e,1),this._descendantCountChanged(-1-t.descendantCount),this._detach(t),this._doChildRemoved(t),0))},n.prototype._removeChild=function(t,e){var i=this.provider;if(!i||e||i._checkClientState()){if(t&&this._children)for(var o=this._children.length;o--;)if(this._children[o]===t){if(!i.softDeleting||!i.checkStates)return this.$_removeChild(t,o,e);switch(t.rowState){case I.RowState.CREATED:if(i.deleteCreated)return this.$_removeChild(t,o,e);t._changeRowState(I.RowState.CREATE_AND_DELETED,!0,!1);break;case I.RowState.DELETED:case I.RowState.CREATE_AND_DELETED:break;default:t._changeRowState(I.RowState.DELETED,!0,!1)}}return!1}},n.prototype._removeChildren=function(){this._children&&0<this._children.length&&(this._children.splice(0,this._children.length),this._descendantCountChanged(-this._descendantCount),this._doCleared())},n.prototype._setChildren=function(t){this._children&&0<this._children.length&&this._children.splice(0,this._children.length);var e,i=-this._descendantCount;if(t&&0<(e=t.length)){this._children||(this._children=[]);for(var o=0;o<e;o++){var n=t[o];this._children.push(n),i+=1+n.descendantCount,this._attach(n)}}this._descendantCountChanged(i)},n.prototype.$_findChild=function(t,e){for(var i=t.length,o=this.count,n=0;n<o;n++){for(var r=this._children[n],s=!0,a=0;a<i;a++)if(!t[a].equalValues(e[a],r.getValue(t[a].index))){s=!1;break}if(s)return r;if(r=r.$_findChild(t,e))return r}return null},n.prototype._collectStateRows=function(t,e){for(var i=this.count;i--;){var o=this.getChild(i),n=o.rowState;!e||n!=I.RowState.DELETED&&n!=I.RowState.CREATE_AND_DELETED?(n!=I.RowState.NONE&&t.push(o),o._collectStateRows(t,e)):e.push(o)}},n.prototype._clearOrgValues=function(){for(var t=this.count;t--;)this.getChild(t)._clearOrgValues()},n.prototype._restoreState=function(t,e){if(t)for(var i=this.count;i--;)this.getChild(i)._restoreState(!0,e);return!1},n.prototype._restoreRow=function(t,e){if(t)for(var i=this.count;i--;)this.getChild(i)._restoreRow(!0,e);return!1},n.prototype._doChildAdding=function(t,e){var i=this.provider;return!i||i._rowAdding(this,t,e)},n.prototype._doChildAdded=function(t,e){var i=this.provider;i&&i._rowAdded(e)},n.prototype._doRowsAdding=function(t,e){var i=this.provider;return!i||i._rowsAdding(this,t,e)},n.prototype._doRowsAdded=function(t,e){var i=this.provider;i&&i._rowsAdded(this,e)},n.prototype._doChildRemoving=function(t){var e=this.provider;return!e||e._rowRemoving(t)},n.prototype._doChildRemoved=function(t){var e=this.provider;e&&e._rowRemoved(t)},n.prototype._doCleared=function(){var t=this.provider;t&&t._rowCleared(this)},n);function n(t){var e=i.call(this)||this;return e._children=null,e._descendantCount=0,e._rowId=t&&t._nextRowId++,e}e.TreeDataRow=o;var r,s=(r=o,oe.__extends(a,r),a.prototype._doDispose=function(){this._provider=null,r.prototype._doDispose.call(this)},a.prototype.set=function(t){for(var e=[],i=0;i<t.count;i++)e.push(t.getChild(i).copy());this._setChildren(e)},_dp(a,"provider",{get:function(){return this._provider}}),_dp(a,"rowId",{get:function(){return-1}}),_dp(a,"index",{get:function(){return 0}}),_dp(a,"hasChildren",{get:function(){return!0}}),a.prototype.copy=function(){for(var t=new a(null),e=0,i=this.count;e<i;e++){var o=this.getChild(e).copy();t._addChild(o,!0,!0)}return t._provider=this._provider,t},a.prototype._changeRowState=function(t,e,i){return!1},a.prototype.getObject=function(){return null},a.prototype.getValue=function(t){},a.prototype.setValue=function(t,e,i){},a.prototype._attach=function(t){t._parent=this},a.prototype._detach=function(t){t._parent===this&&(t._parent=null)},a.prototype.update=function(t,e){return!1},a.prototype.$_setHasChildren=function(t){},a.prototype.$_setIconIndex=function(t){},a.prototype._keepRow=function(t){},a.prototype._yieldRow=function(t,e){},a.prototype._keepStates=function(t){},a.prototype._yieldStates=function(t,e){},a);function a(t){var e=r.call(this,t)||this;return e._provider=t,e}e.RootTreeRow=s;var l,h=(l=g.DataSource,oe.__extends(d,l),d.prototype._doDispose=function(){l.prototype._doDispose.call(this)},d.prototype.editCommandStackChanged=function(t,e,i){this._fireCommandStackChanged(e,i)},d.prototype.registerCommandListener=function(t){t&&this._commandListeners.indexOf(t)<0&&this._commandListeners.push(t)},d.prototype.unregisterCommandListener=function(t){var e=this._commandListeners.indexOf(t);0<=e&&this._commandListeners.splice(e,1)},d.prototype._keepCommandStates=function(t){if(0<this._commandListeners.length)return this._commandListeners[0].getCommandStates(t)},d.prototype._yieldCommandStates=function(t,e){if(0<this._commandListeners.length)return this._commandListeners[0].setCommandStates(t,e)},d);function d(){var t=l.call(this)||this;return t._nextRowId=0,t._commandListeners=[],t}e.TreeDataProvider=h});t(Q);Q.TreeDataRow,Q.RootTreeRow,Q.TreeDataProvider;var J=e(function(t,e){Object.defineProperty(e,"__esModule",{value:!0});var r,i=(r=K.LocalTreeDataCommand,oe.__extends(o,r),o.prototype._doRun=function(t){for(var e=t,i=[],o=0,n=this._rows;o<n.length;o++){var r=n[o]._keepRow(e);i.push(r)}return e.$_fillValue(this._rows,this._fields,this._value),i},o.prototype._doRedo=function(t,e){t.$_fillValue(this._rows,this._fields,this._value)},o.prototype._doUndo=function(t,e){for(var i=0;i<this._rows.length;i++)this._rows[i]._yieldRow(t,e[i]);t._fireRefresh()},o);function o(t,e,i,o){var n=r.call(this,t)||this;return n._rows=e.slice(),n._fields=i.slice(),n._value=o,n}e.FillValueTreeDataCommand=i});t(J);J.FillValueTreeDataCommand;var tt=e(function(t,e){Object.defineProperty(e,"__esModule",{value:!0});var r,i=(r=K.LocalTreeDataCommand,oe.__extends(o,r),o.prototype._doRun=function(t){for(var e=t,i=[],o=0,n=this._rows;o<n.length;o++){var r=n[o]._keepRow(e);i.push(r)}return e.$_updateRows(this._rows,this._values,this._strict),i},o.prototype._doRedo=function(t,e){t.$_updateRows(this._rows,this._values,this._strict)},o.prototype._doUndo=function(t,e){for(var i=0;i<this._rows.length;i++)this._rows[i]._yieldRow(t,e[i]);t._fireRefresh()},o);function o(t,e,i,o){var n=r.call(this,t)||this;return n._rows=e.slice(),n._values=n._cloneValues(i.slice()),n}e.UpdateRowsTreeDataCommand=i});t(tt);tt.UpdateRowsTreeDataCommand;var et=e(function(t,e){Object.defineProperty(e,"__esModule",{value:!0});var a,l=(a=Q.TreeDataRow,oe.__extends(n,a),n.prototype._doDispose=function(){this._values=null,this._orgValues=null,a.prototype._doDispose.call(this)},_dp(n,"provider",{get:function(){return this._parent&&this._parent.provider}}),_dp(n,"parent",{get:function(){return this._parent}}),_dp(n,"index",{get:function(){return this._parent?this._parent.indexOf(this):-1}}),_dp(n,"level",{get:function(){return this._parent?this._parent.level+1:0}}),_dp(n,"hasChildren",{get:function(){return this._hasChildren},set:function(t){if(t!=this._hasChildren){this._hasChildren=t;var e=this.provider;e&&e._hasChildrenChanged(this)}}}),_dp(n,"iconIndex",{get:function(){return this._iconIndex},set:function(t){if(isNaN(t)&&(t=-1),t!=this._iconIndex){this._iconIndex=t;var e=this.provider;e&&e._iconIndexChanged(this)}}}),_dp(n,"rowState",{get:function(){return this._state}}),_dp(n,"values",{get:function(){return this._values&&this._values.slice()}}),n.prototype._attach=function(t){t._parent=this},n.prototype._detach=function(t){t._parent===this&&(t._parent=null)},n.prototype._changeRowState=function(t,e,i){var o=this.provider;if(o&&t!=this._state){var n=this._state;return(this._state=t)==I.RowState.UPDATED&&o._needOrgValues?this._orgValues=this._values.concat():n==I.RowState.UPDATED&&this._orgValues&&(this._orgValues=null),e&&o._stateChanged(this,i),!0}return!1},n.prototype.getValue=function(t){if(this.provider){if(this._checkFieldIndex(t),this._values)return this._values[t];throw new Error("Row data is not loaded")}},n.prototype.setValue=function(t,e,i){var o=this.provider;if(o){if(!o._checkClientState())return;if(o.refreshFieldFormats(),this._checkFieldIndex(t),this._values){if(e!=this._values[t]){var n=null,r=o.getField(t),s=o.checkStates&&(this._state==I.RowState.NONE||!this._state);!i&&s&&o._needOrgValues&&(n=this._values.concat()),this._values[t]=r.readValue(e),o._internalCalculateValues(this._values,this.rowId),!i&&s?(o._needOrgValues&&(this._orgValues=n),this._state=I.RowState.UPDATED,o._stateChanged(this,!1)):o._needRestore&&this.$_restoreState(o),o._valueChanged(this,t)}return}throw new Error("Row data is not loaded")}},n.prototype.getObject=function(){var t=this.provider;if(t){for(var e=t.fieldCount,i={},o=0;o<e;o++)i[t.getOrgFieldName(o)]=this._values[o];return i}return null},n.prototype.copy=function(){var t=new n(null,null);t._rowId=this._rowId,t._iconIndex=this._iconIndex,t._hasChildren=this._hasChildren,t._state=this._state,t._values=this._values?this._values.concat():null;for(var e=0,i=this.count;e<i;e++){var o=this.getChild(e).copy();t._addChild(o,!0,!0)}return t},n.prototype.update=function(t,e){var i=this.provider;return!!i&&(i.undoable?i._commands.execute(new Z.UpdateTreeDataCommand(i,this,t,e)):this.$_update(i,t,e,!1))},n.prototype._keepRow=function(t){var e={};return e.values=this._values&&this._values.slice(),e.state=this._state,e.orgValues=this._orgValues&&this._orgValues.slice(),e.outer=t._keepCommandStates(this),e},n.prototype._yieldRow=function(t,e){this._values=e.values&&e.values.slice(),this._state=e.state,this._orgValues=e.orgValues&&e.orgValues.slice(),t._yieldCommandStates(this,e.outer)},n.prototype._keepStates=function(t){},n.prototype._yieldStates=function(t,e){},n.prototype._keepState=function(){return this._state},n.prototype._yieldState=function(t){this._state=t},n.prototype.$_update=function(t,e,i,o){if(!o){if(!t._checkClientState())return;t.refreshFieldFormats()}return!(!e||!o&&!t._rowUpdating(this)||(this.$_internalUpdate(e,i,!0),t._rowUpdated(this),0))},n.prototype._clearOrgValues=function(){this._orgValues&&(this._orgValues.length=0,this._orgValues=null),a.prototype._clearOrgValues.call(this)},n.prototype._restoreState=function(t,e){var i=this.$_restoreState(this.provider);return i&&e&&e.push(this),a.prototype._restoreState.call(this,t,e),i},n.prototype._restoreRow=function(t,e){var i=!1;if(this._state===I.RowState.UPDATED){var o=this._orgValues;if(o){for(var n=this._values,r=0,s=Math.min(o.length,this.provider.fieldCount);r<s;r++)n[r]=o[r];this._state=I.RowState.NONE,e&&e.push(this),i=!0}}return a.prototype._restoreRow.call(this,t,e),i},n.prototype.$_restoreState=function(t){if(this._state==I.RowState.UPDATED&&this._orgValues){for(var e=this._orgValues,i=this._values,o=this.provider,n=o.strictRestore,r=0,s=o.fieldCount;r<s;r++){var a=i.length>r?i[r]:void 0,l=e.length>r?e[r]:void 0;if(n){if(!o.getField(r).equalValues(a,l))return!1}else if(!o.getField(r).sameValues(a,l))return!1}return this._state=I.RowState.NONE,!0}return!1},n.prototype.$_getUpdatedCells=function(){var t=this._orgValues,e=this._values,i=this.provider,o=i.strictRestore,n=[];if(!t||t.length<=0)return null;for(var r=0,s=i.fieldCount;r<s;r++){var a=e.length>r?e[r]:void 0,l=t.length>r?t[r]:void 0,h=i.getField(r);h.calculated||(o?h.equalValues(a,l)||n.push({fieldName:i.getOrgFieldName(r),oldValue:t[r],newValue:e[r]}):h.sameValues(a,l)||n.push({fieldName:i.getOrgFieldName(r),oldValue:t[r],newValue:e[r]}))}return n},n.prototype.$_setHasChildren=function(t){this._hasChildren=t},n.prototype.$_setIconIndex=function(t){this._iconIndex=isNaN(t)?-1:t},n.prototype.$_internalUpdate=function(t,e,i){var o=!1,n=Array.isArray(t),r=this.provider;if(r){var s=Math.min(r.fieldCount,n?t.length:r.fieldCount),a=r.checkStates&&(this._state==I.RowState.NONE||!this._state),l=null;a&&r._needOrgValues&&(l=this._values.concat());for(var h=0;h<s;h++){var d=r.getField(h);if(n||t.hasOwnProperty(d.orgFieldName)){var u=n?t[h]:t[d.orgFieldName];e&&void 0===u||(o=!r._needRestore||o||(e?!d.equalValues(this._values[h],d.readValue(u)):!d.sameValues(this._values[h],d.readValue(u))),this._values[h]=r.getField(h).readValue(u))}}r._internalCalculateValues(this._values,this.rowId),a&&o?(l&&(this._orgValues=l),this._state=I.RowState.UPDATED,i&&r._stateChanged(this,!1)):r._needRestore&&this.$_restoreState(r)}},n);function n(t,e){var i=a.call(this,t)||this;if(i._iconIndex=-1,i._hasChildren=!1,i._parent=null,i._values=null,i._orgValues=null,i._state=I.RowState.NONE,t&&e){var o=t.fieldCount;Math.min(e.length,o);i._values=new Array(o);for(var n=0,r=Math.min(e.length,o);n<r;n++)i._values[n]=t.getField(n).readValue(e[n])}return i}e.TreeDataRowImpl=l;var o,i=(o=Q.TreeDataProvider,oe.__extends(r,o),r.prototype._doDispose=function(){this._commands=this._commands&&this._commands.dispose(),this._points=null,this._rootRow=null,this._rowMap=null,this._tags=null,this._hiddenRows=null,o.prototype._doDispose.call(this)},_dp(r,"rootRow",{get:function(){return this._rootRow}}),_dp(r,"parentCallback",{get:function(){return this._parentCallback},set:function(t){this._parentCallback=t}}),_dp(r,"needOrgValues",{get:function(){return this._needOrgValues}}),_dp(r,"needRestore",{get:function(){return this._needRestore}}),_dp(r,"undoable",{get:function(){return this._undoable&&!!this._commands},set:function(t){t!=this.undoable&&(this._undoable=t,this._commands&&this._commands.flush())}}),_dp(r,"handler",{get:function(){return this.$_handler}}),r.prototype.addTag=function(t){this._tags.add(t)},r.prototype.removeTag=function(t){this._tags.remove(t)},r.prototype.setRows=function(t,e,i,o,n){if(!this._checkClientState())return-1;var r=0,s=this.getFieldIndex(e);if(0<=s){this.beginUpdate();try{this._clearRows(),this.refreshFieldFormats();var a=new X.ArrayTreeSource(this,this._rootRow);a.parentCallback=this._parentCallback,r=a.load(null,t,s,i,this.getFieldIndex(o),this.getFieldIndex(n)),this._checkSum(r)}finally{this.endUpdate(!1)}}return this._tags.setRows(),this._fireReset(),this._fireRowCountChanged(),r},r.prototype.setCsvRows=function(t,e,i,o,n){if(!this._checkClientState())return-1;var r=0,s=this.getFieldIndex(e);if(0<=s){this.beginUpdate();try{this._clearRows(),this.refreshFieldFormats();var a=new X.CsvTreeSource(this,this._rootRow);a.parentCallback=this._parentCallback,r=a.load(null,t,s,i,this.getFieldIndex(o),this.getFieldIndex(n)),this._checkSum(r)}finally{this.endUpdate(!1)}}return this._tags.setRows(),this._fireReset(),this._fireRowCountChanged(),r},r.prototype.setXmlRows=function(t,e,i,o){if(!this._checkClientState())return-1;var n=0;if(t){this.beginUpdate();try{this._clearRows(),this.refreshFieldFormats(),n=new X.XmlTreeSource(this,this._rootRow).load(null,t,e,this.getFieldIndex(i),this.getFieldIndex(o)),this._checkSum(n)}finally{this.endUpdate(!1)}}return this._tags.setRows(),this._fireReset(),this._fireRowCountChanged(),n},r.prototype.setJsonRows=function(t,e,i,o){if(!this._checkClientState())return-1;if(t){this.beginUpdate();try{this._clearRows(),this.refreshFieldFormats();var n=new X.JsonTreeSource(this,this._rootRow);this._rowCount=n.load(null,t,e,this.getFieldIndex(i),this.getFieldIndex(o))}finally{this.endUpdate(!1)}}return this._tags.setRows(),this._fireReset(),this._fireRowCountChanged(),this.rowCount},r.prototype.setJsonRows2=function(t,e,i,o,n){if(!this._checkClientState())return-1;if(t){this.beginUpdate();try{this._clearRows(),this.refreshFieldFormats();var r=new X.JsonTreeSource(this,this._rootRow);this._rowCount=r.load2(null,t,e,i,o,n)}finally{this.endUpdate(!1)}}return this._tags.setRows(),this._fireReset(),this._fireRowCountChanged(),this.rowCount},r.prototype.appendDataRows=function(t,e,i,o,n,r){if(!this._checkClientState())return-1;var s=0,a=this.getFieldIndex(i);if(0<=a){var l=new X.ArrayTreeSource(this,this._rootRow);l.parentCallback=this._parentCallback,this.beginUpdate();try{this.refreshFieldFormats(),s=l.load(t,e,a,o,this.getFieldIndex(n),this.getFieldIndex(r))}finally{if(this.endUpdate(!1),0<s){var h=l.insertedRows;h&&0<(s=h.length)&&this._rowsAdded(t,h)}}}return s},r.prototype.appendCsvRows=function(t,e,i,o,n,r){if(!this._checkClientState())return-1;var s=0,a=this.getFieldIndex(i);if(0<=a){this.beginUpdate();try{this.refreshFieldFormats();var l=new X.CsvTreeSource(this,this._rootRow);l.parentCallback=this._parentCallback,s=l.load(t,e,a,o,this.getFieldIndex(n),this.getFieldIndex(r))}finally{this.endUpdate(!1)}}return this._tags.setRows(),this._fireReset(),this._fireRowCountChanged(),s},r.prototype.appendXmlRows=function(t,e,i,o,n){if(!this._checkClientState())return-1;var r=0;if(e){var s=new X.XmlTreeSource(this,this._rootRow);this.beginUpdate();try{this.refreshFieldFormats(),r=s.load(t,e,i,this.getFieldIndex(o),this.getFieldIndex(n))}finally{if(this.endUpdate(!1),0<r){var a=s.insertedRows;a&&0<(r=a.length)&&this._rowsAdded(t,a)}}}return this._fireRowCountChanged(),r},r.prototype.appendJsonRows=function(t,e,i,o,n){if(!this._checkClientState())return-1;var r=0;if(e){var s=new X.JsonTreeSource(this,this._rootRow);this.beginUpdate();try{this.refreshFieldFormats(),r=s.load(t,e,i,this.getFieldIndex(o),this.getFieldIndex(n))}finally{if(this.endUpdate(!1),0<r){var a=s.insertedRows;a&&0<(r=a.length)&&this._rowsAdded(t,a)}}}return this._fireRowCountChanged(),r},r.prototype.setIconIndex=function(t,e){return t.iconIndex!=e&&(t.$_setIconIndex(e),!0)},r.prototype.setHasChildren=function(t,e){return e!=t.hasChildren&&(t.$_setHasChildren(e),!0)},r.prototype.getChildCount=function(t){return(t||this._rootRow).count},r.prototype.getRows=function(t){return(t||this._rootRow).children},r.prototype.getDescendantCount=function(t){return(t||this._rootRow).descendantCount},r.prototype.getDescendants=function(t,e){e=1<arguments.length?e:0;var i=t||this._rootRow;if(e<=0)return i.descendants;if(e>i.level){var o=[];return function t(e,i,o){for(var n=0,r=e.count;n<r;n++){var s;i.push(s=e.getChild(n)),o>s.level&&t(s,i,o)}}(i,o,e),o}return null},r.prototype.getChild=function(t,e){return(t||this._rootRow).getChild(e)},r.prototype.hasData=function(t){return null!=this.rowById(t)},r.prototype.rowById=function(t){var e=this._rowMap[t];return e||(e=this._findRowById(t))&&(this._rowMap[t]=e),e},r.prototype.rowsByIds=function(t,e){if(t){for(var i=[],o=0,n=t;o<n.length;o++){var r=n[o],s=this.rowById(r);(s||e)&&i.push(s)}return i}return null},r.prototype.createRow=function(t,e,i){var o=null;if(this.refreshFieldFormats(),Array.isArray(t))o=new l(this,t);else if(t){var n=new Array(this.fieldCount);for(var r in t){var s=this.getFieldIndex(r);0<=s&&(n[s]=t[r])}o=new l(this,n)}return o&&(this._internalCalculateValues(o._values,o.rowId),o._iconIndex=e,o._hasChildren=i),o},r.prototype.clearRows=function(){this._checkClientState()&&(this._clearRows(),this._eventLock<=0&&(this._fireRefresh(),this._fireRowCountChanged()))},r.prototype.removeRows=function(o){function t(t,e){for(var i=e;0<=i;i--)if(o[i].isAncestorOf(t))return;return 1}if(this._checkClientState()&&o&&!(o.length<1)){o.sort(function(t,e){return t.level-e.level});for(var e=o,i=o.length;i--;)1<o[i].level&&!t(o[i],i-1)&&o.splice(i,1);if(o.length<1||!this._rowsRemoving(o))return!1;if(this.softDeleting&&this.checkStates){var n=[];for(i=o.length-1;0<=i;i--){var r=o[i],s=!1;switch(r.rowState){case I.RowState.CREATED:this.deleteCreated||(s=r._changeRowState(I.RowState.CREATE_AND_DELETED,!1,!1),o.splice(i,1));break;case I.RowState.DELETED:case I.RowState.CREATE_AND_DELETED:o.splice(i,1);break;default:s=r._changeRowState(I.RowState.DELETED,!0,!1),o.splice(i,1)}s&&n.push(r)}0<n.length&&this._fireRowStatesChanged(n)}return this.deleteRows(e),!0}},r.prototype.changeRowIndex=function(t,e){if(0==e)return!1;if(!this._checkClientState())return!1;var i=t.parent,o=i.children.length,n=t.index,r=Math.min(Math.max(n+e,0),o-1);return 0!=(e=r-n)&&!!this._fireRowSiblingMoving(t,e)&&(i._moveChild(n,r),this._fireRowSiblingMoved(t,e),!0)},r.prototype.changeRowsIndex=function(t,e){if(0==e)return!1;if(!this._checkClientState())return!1;var i=t[0].parent,o=i.children.length,n=t[0].index,r=Math.min(Math.max(n+e,0),o-1);if(0==(e=r-n))return!1;for(var s=[],a=0,l=t;a<l.length;a++){var h=l[a];s.push(h.index)}return!!this._fireRowsSiblingMoving(t,e)&&(i._moveChildren(s,r),this._fireRowsSiblingMoved(t,e),!0)},r.prototype.changeRowParent=function(t,e,i){if(t===e)throw new Error("Parent must not be self.");if(t.isAncestorOf(e))throw new Error("Can`t move to child of a descendant.");var o=t.parent;if(o===e&&i==t.index)return!1;if(!this._checkClientState())return!1;e._children||(e._children=[]);var n=e._children.length;return i=Math.min(Math.max(i,0),n),!!this._fireRowParentChanging(t,e,i)&&(t._changeParent(e,i),e instanceof Q.RootTreeRow||this.setHasChildren(e,!0),o instanceof Q.RootTreeRow||0!=o.count||this.setHasChildren(o,!1),this._fireRowParentChanged(t,e,i),!0)},r.prototype.moveRows=function(t,e){return this.changeRowsIndex(t,e.index-t[0].index),!1},r.prototype.toTreeString=function(){return this._rootRow.toTreeString()},r.prototype.beginUpdate=function(){this._checkClientState(),this._eventLock++},r.prototype.endUpdate=function(t){void 0===t&&(t=!0),this._checkClientState(),this._eventLock=Math.max(0,this._eventLock-1),0==this._eventLock&&(t&&(0<this._resetLock?this._fireReset():this._fireRefresh(),this._countDirty&&this._fireRowCountChanged()),this._resetLock=0,this._countDirty=!1)},r.prototype.$_extractTreeRowIds=function(t){if(t){for(var e=t.length,i=new Array(e),o=0;o<e;o++)i[o]=t[o].rowId;return i}return null},r.prototype.$_searchDataRow=function(t,e,i,o,n,r){var s=t.length;if(s<1)return-1;var a=Math.min(e.length,i.length);if(a<1)return-1;for(var l=!o||o.allFields,h=o&&o.caseSensitive,d=o&&o.partialMatch,u=null,_=[],c=0;c<a;c++)_[c]=this.getField(e[c]).dataType;n=Math.max(0,n),r=Math.min(s-1,r);for(var p=n;p<=r;p++){var f=!0;if(f)for(c=0;c<a;c++){var g=this.rowById(t[p]).getValue(e[c]);switch(_[c]){case lt.ValueType.DATETIME:case lt.ValueType.DATE:if(i[c]instanceof Date)f=ne.Utils.compareTextValue(i[c],g,h,d);else{if(!u){var m=/[.]/.test(i[c])?"yyyy.MM.dd":/[/]/.test(i[c])?"yyyy/MM/dd":/[-]/.test(i[c])?"yyyy-MM-dd":"yyyyMMdd";u=new _t.DateTimeConverter(m)}f=ne.Utils.compareTextValue(i[c],g?u.getText(g):g,h,d)}break;default:f=ne.Utils.compareTextValue(i[c],g,h,d)}if(f&&!l)return t[p];if(!f&&l)break}if(f)return t[p]}return-1},r.prototype.searchDataRow=function(t,e){var i;if(void 0===e&&(e=null),t instanceof y.SearchOptions||(t=new y.SearchOptions(t)),null!=e){var o=this.rowById(e);if(!o)return-1;i=this.$_extractTreeRowIds(o.descendants)}else i=this.$_extractTreeRowIds(this._rootRow.descendants);if(!Array.isArray(i)||i.length<=0)return-1;var n=i.length,r=Math.max(0,i.indexOf(t.startIndex)),s=t.fields,a=t.values,l=-1;if(s&&0<s.length&&a&&0<a.length){for(var h=s.length,d=[],u=0;u<h;u++){var _=s[u];if(ne.Utils.isNumber(_))d.push(_);else{var c=this.getFieldIndex(s[u]);0<=c&&d.push(c)}}0<d.length&&(l=r<n?this.$_searchDataRow(i,d,a,t,r,n-1):-1)<0&&t.wrap&&0<r&&(l=this.$_searchDataRow(i,d,a,t,0,r-1))}return l},r.prototype.$_searchData=function(t,e,i,o,n,r,s){var a=this.rowCount;if(a<1)return null;for(var l=o&&o.caseSensitive,h=o&&o.partialMatch,d=this.fieldCount,u=e.length,_=null,c=[],p=0;p<d;p++)c[p]=this.getField(p).dataType;n=Math.max(0,n),r=Math.min(a-1,r),(s=Math.max(0,s))>=e.length&&(n++,s=0);for(var f=n;f<=r;f++)for(p=n<f?0:s;p<u;p++){var g=!1,m=e[p];if(0<=m&&m<d){var y=this.rowById(t[f]).getValue(m);switch(c[m]){case lt.ValueType.DATETIME:case lt.ValueType.DATE:if(i instanceof Date)g=ne.Utils.compareTextValue(i,y,l,h);else{if(!_){var v=/[.]/.test(i)?"yyyy.MM.dd":/[/]/.test(i)?"yyyy/MM/dd":/[-]/.test(i)?"yyyy-MM-dd":"yyyyMMdd";_=new _t.DateTimeConverter(v)}g=ne.Utils.compareTextValue(i,y?_.getText(y):y,l,h)}break;default:g=ne.Utils.compareTextValue(i,y,l,h)}if(g)return{dataRow:t[f],fieldIndex:m,searchFieldIndex:p}}}return null},r.prototype.searchData=function(t,e){var i;if(void 0===e&&(e=-1),t instanceof y.SearchCellOptions||(t=new y.SearchCellOptions(t)),0<=e){var o=this.rowById(e);if(!o)return null;i=this.$_extractTreeRowIds(o.descendants)}else i=this.$_extractTreeRowIds(this._rootRow.descendants);if(!Array.isArray(i)||i.length<=0)return null;var n=i.length,r=null,s=t.fields,a=t.value,l=Math.max(0,t.startFieldIndex),h=Math.max(0,i.indexOf(t.startIndex));if(!s||s.length<1){s=[];for(var d=this.getFields(),u=0;u<d.length;u++)s.push(d[u].orgFieldName)}if(s&&0<s.length&&null!=a){for(var _=s.length,c=[],p=0;p<_;p++){var f=s[p];ne.Utils.isNumber(f)?c.push(f):c.push(this.getFieldIndex(s[p]))}0<c.length&&(!(r=h<n?this.$_searchData(i,c,a,t,h,n-1,l):null)&&t.wrap&&0<h&&(r=this.$_searchData(i,c,a,t,0,h-1,0)),r&&(r.fieldName=this.getOrgFieldName(r.fieldIndex)))}return r},r.prototype.$_hideDataRows=function(t,e){if(null!=t){for(var i=ne.Utils.isArray(t)?t:[t],o=this._hiddenRows.length,n=[],r=0,s=i.length;r<s;r++){var a=i[r];if(null!=this._findRowById(a))if(n.push(a),e)this._hiddenRows.indexOf(a)<0&&this._hiddenRows.push(a);else{var l=this._hiddenRows.indexOf(a);0<=l&&this._hiddenRows.splice(l,1)}}this._hiddenRows.length!==o&&this._fireRowsHiddenChanged(n,e)}},r.prototype.hideRows=function(t){this.$_hideDataRows(t,!0)},r.prototype.showRows=function(t){this.$_hideDataRows(t,!1)},r.prototype.clearHiddenRows=function(){if(0<this._hiddenRows.length){var t=this._hiddenRows.concat();this._hiddenRows=[],this._fireRowsHiddenChanged(t,!1)}},r.prototype.getHiddenRows=function(){var t=this._hiddenRows.concat();return t.sort(function(t,e){return t-e}),t},r.prototype.isHiddenRow=function(t){return!!this.rowById(t)&&0<=this._hiddenRows.indexOf(t)},_dp(r,"hiddenCount",{get:function(){return this._hiddenRows.length}}),r.prototype.summarize=function(t,e){if(null==t)return!1;t.clear();var i=this.rowCount;if(i<1)return!1;if(t.count=i,t.sum=0,t.min=Number.MAX_VALUE,t.max=Number.MIN_VALUE,t.dataCount=0,this.$_summarizeChildren(this._rootRow,t),t.avg=t.sum/t.count,t.dataAvg=0===t.dataCount?NaN:t.sum/t.dataCount,e){var o=this.$_summarizeVars(this._rootRow,t);t.varsp=o/t.count,t.vars=o/(t.count-1)}return!0},r.prototype.summarizeRange=function(t,e,i){if(null==t||null==e)return!1;t.clear();var o=e.length;if(o<1)return!1;for(var n=0,r=t.field,s=0,a=NaN,l=NaN,h=0;h<o;){var d=e[h++].getValue(r);if(!isNaN(d)){s=a=l=d,n++;break}}for(;h<o;)d=e[h++].getValue(r),isNaN(d)||(s+=d,d<a&&(a=d),l<d&&(l=d),n++);if(t.count=o,0<n&&(t.sum=s,t.min=a,t.max=l,t.avg=s/o,t.dataCount=n,t.dataAvg=0===t.dataCount?NaN:t.sum/t.dataCount,i))if(1<o){for(var u=0,_=t.avg,c=0;c<o;c++)d=e[c++].getValue(r),isNaN(d)||(u+=Math.pow(d-_,2));t.varsp=u/o,t.vars=u/(o-1)}else t.varsp=0,t.vars=0;return!0},_dp(r,"rowCount",{get:function(){return this._rootRow.descendantCount}}),_dp(r,"immediateUpdate",{get:function(){return!0}}),_dp(r,"isSummarized",{get:function(){return!0}}),_dp(r,"canUndo",{get:function(){return this._commands&&this._commands.canUndo}}),_dp(r,"canRedo",{get:function(){return this._commands&&this._commands.canRedo}}),_dp(r,"undoing",{get:function(){return this._commands&&this._commands.undoing}}),_dp(r,"redoing",{get:function(){return this._commands&&this._commands.redoing}}),r.prototype.getRow=function(t){return this.rowById(t).values},r.prototype.deleteRows=function(t){if(this._checkClientState()&&t&&0<t.length){var e=this._softDeleting;this.beginUpdate();try{this._softDeleting=!1,this._tagLock=!0;try{for(var i=t.length-1;0<=i;i--){var o=t[i],n=o&&o.parent;n&&n._removeChild(o,!0)}}finally{this._tagLock=!1}}finally{this._softDeleting=e,this.endUpdate(!1)}this._rowsRemoved(t)}},r.prototype.equalValues=function(t,e,i){if(e===i)return!0;var o=this._fields[t],n=e.getValue(t),r=i.getValue(t);return o.equalValues(n,r)},r.prototype.sameValues=function(t,e,i){if(e===i)return!0;var o=this._fields[t],n=e.getValue(t),r=i.getValue(t);return o.sameValues(n,r)},r.prototype.compareValues=function(t,e,i){if(e===i)return 0;var o=e.getValue(t),n=i.getValue(t);return null===o?null===n?0:-1:null===n||n<o?1:o<n?-1:0},r.prototype.compareNumbers=function(t,e,i){if(e===i)return 0;var o=e.getValue(t),n=i.getValue(t);return isNaN(o)?isNaN(n)?0:-1:isNaN(n)||n<o?1:o<n?-1:0},r.prototype.compareBools=function(t,e,i){if(e===i)return 0;var o=e.getValue(t),n=i.getValue(t);return o&&!n?1:!o&&n?-1:0},r.prototype.compareDates=function(t,e,i){if(e===i)return 0;var o=e.getValue(t),n=i.getValue(t);return o instanceof Date?!(n instanceof Date)||n<o?1:o<n?-1:0:n instanceof Date?-1:0},r.prototype.compareObjects=function(t,e,i){var o=this._values[e],n=this._values[i];if(o===n)return 0;var r=o?o[t]:null,s=n?n[t]:null;return r?s?this.getField(t).$_compareObject(r,s,e,i):1:s?-1:0},r.prototype.getDistinctValues=function(t,e,i){if(void 0===e&&(e=-1),void 0===i&&(i=lt.SortDirection.ASCENDING),this._checkFieldIndex(t),e<0&&(e=this.getDescendantCount(this._rootRow)),0<e){for(var o=this.getDescendants(this._rootRow,0),n=this.getField(t).dataType,r=[],s=[],a=void 0,l=0,h=o.length;l<h;l++)switch(a=o[l].values[t],n){case lt.ValueType.NUMBER:null!=a&&isNaN(a)||r.indexOf(a)<0&&r.push(a);break;case lt.ValueType.DATE:case lt.ValueType.DATETIME:a?s.indexOf(a.getTime())<0&&(s.push(a.getTime()),r.push(a)):(s.push(a),r.push(a));break;case lt.ValueType.OBJECT:default:r.indexOf(a)<0&&r.push(a)}return i!==lt.SortDirection.NONE&&(r=ne.Utils.included(n,lt.ValueType.DATETIME,lt.ValueType.DATE)?r.sort(function(t,e){return t-e}):r.sort(),i===lt.SortDirection.DESCENDING&&(r=r.reverse())),r.slice(0,e)}return null},r.prototype._doFieldsReset=function(){o.prototype._doFieldsReset.call(this),this._clearRows(),this._fireReset()},r.prototype.refreshClients=function(){this._fireRefreshClient()},r.prototype.savePoint=function(t){if(void 0===t&&(t=!0),this._checkClientState()){if(0<this.fieldCount&&0<this._rootRow.count){var e=this._rootRow.copy(),i=this._nextPoint++;return t||e.clearRowStates(!1,!1),this._points.push({id:i,data:e}),i}return-1}},r.prototype.rollback=function(t){if(void 0===t&&(t=0),this._checkClientState())for(var e=this._points.length-1;0<=e;e--){var i=this._points[e];if(i.id==t){this.$_removeSavePoints(e+1),this._rowMap=[],this._rootRow.set(i.data),this._fireReset();break}}},r.prototype.$_removeSavePoints=function(t){for(var e=this._points,i=e.length-1;t<=i;i--)e[i].data=null,e.pop()},r.prototype.clearSavePoints=function(){this.$_removeSavePoints(0)},r.prototype.getSavePoints=function(){for(var t=[],e=0,i=this._points.length;e<i;e++)t.push(this._points[e].id);return t},r.prototype._doCheckStatesChanged=function(){this.$_resetOrgValues()},r.prototype._doRestoreModeChanged=function(){this.$_resetOrgValues()},r.prototype._hasChildrenChanged=function(t){this._fireHasChildrenChanged(t)},r.prototype._iconIndexChanged=function(t){this._fireIconIndexChanged(t)},r.prototype._stateChanged=function(t,e){this._fireRowStateChanged(t,e)},r.prototype._statesChanged=function(t){this._fireRowStatesChanged(t)},r.prototype._valueChanged=function(t,e){this._fireValueChanged(t,e)},r.prototype._rowAdding=function(t,e,i){return this._fireRowAdding(t,e,i)},r.prototype._rowAdded=function(t){this._tagLock||this._tags.addRow(t),this._eventLock<=0&&(this._fireRowAdded(t),this._fireRowCountChanged())},r.prototype._rowsAdding=function(t,e,i){return this._fireRowsAdding(t,e,i)},r.prototype._rowsAdded=function(t,e){this._tagLock||this._tags.addRows(e),this._eventLock<=0&&(this._fireRowsAdded(t,e),this._fireRowCountChanged())},r.prototype._rowRemoving=function(t){return this._fireRowRemoving(t)},r.prototype._rowRemoved=function(t){this._tagLock||this._tags.removeRow(t),this._eventLock<=0&&(this._fireRowRemoved(t),this._fireRowCountChanged())},r.prototype._rowsRemoving=function(t){return this._fireRowsRemoving(t)},r.prototype._rowsRemoved=function(t){this._tagLock||this._tags.removeRows(t),this._eventLock<=0&&(this._fireRowsRemoved(t),this._fireRowCountChanged())},r.prototype._rowCleared=function(t){if(t){var e=t.children;this._tags.removeRows(e),this._eventLock<=0&&(this._fireRowsRemoved(e),this._fireRowCountChanged())}},r.prototype._rowUpdating=function(t){return this._fireRowUpdating(t)},r.prototype._rowUpdated=function(t){this._tags.updateRow(t),this._eventLock<=0&&this._fireRowUpdated(t)},r.prototype._rowsUpdating=function(t){return this._fireRowsUpdating(t)},r.prototype._rowsUpdated=function(t){this._tags.updateRows(t),this._eventLock<=0&&this._fireRowsUpdated(t)},r.prototype.getRowId=function(t){throw new Error("Method not implemented.")},r.prototype.getValue=function(t,e){throw new Error("Method not implemented.")},r.prototype.setValue=function(t,e,i){throw new Error("Method not implemented.")},r.prototype.getRowObject=function(t){var e=this.rowById(t),i=this.fieldCount,o={},n=e._values;if(n)for(var r=0;r<i;r++)o[this.getOrgFieldName(r)]=n[r];return o},r.prototype.getRowState=function(t){var e=this.rowById(t);return e?e.rowState:I.RowState.NONE},r.prototype.setRowState=function(t,e,i){var o=this.rowById(t);if(o&&(this.checkStates||i)){var n=o.rowState;e!=n&&o._changeRowState(e,!0,!!I.isDeletedState(n)||void 0)}},r.prototype.changeRowStates=function(t,e){for(var i=t.length,o=[],n=0;n<i;n++){var r=t[n];r._changeRowState(e,!1,!1)&&o.push(r)}0<o.length&&this._fireRowStatesChanged(o)},r.prototype.clearRowStates=function(t,e){this._checkClientState()&&this._rootRow.clearRowStates(t,e)},r.prototype.$_collectStateRows=function(t,e,i){for(var o=0,n=t.count;o<n;o++){var r=t.getChild(o);r.rowState==e&&i.push(r.rowId),this.$_collectStateRows(r,e,i)}},r.prototype.getStateRows=function(t){var e=[];return this.$_collectStateRows(this._rootRow,t,e),e},r.prototype.$_collectAllStateRows=function(t,e){for(var i=0,o=t.count;i<o;i++){var n=t.getChild(i);switch(n.rowState){case I.RowState.CREATED:case I.RowState.UPDATED:case I.RowState.DELETED:case I.RowState.CREATE_AND_DELETED:e[n.rowState].push(n.rowId)}this.$_collectAllStateRows(n,e)}},r.prototype.getAllStateRows=function(){var t={};return t[I.RowState.CREATED]=[],t[I.RowState.UPDATED]=[],t[I.RowState.DELETED]=[],t[I.RowState.CREATE_AND_DELETED]=[],this.$_collectAllStateRows(this._rootRow,t),t},r.prototype.setRowStates=function(t,e,i,o){if(this._checkClientState()){for(var n=o?null:[],r=0,s=t.length;r<s;r++){var a=this.rowById(t[r]);a&&(this.checkStates||i)&&a._changeRowState(e,o,!1)&&!o&&n.push(a)}!o&&0<n.length&&this._fireRowStatesChanged(n)}},r.prototype.$_getRowStateCount=function(t,e){for(var i=0,o=0,n=t.count;o<n;o++){var r=t.getChild(o);0<=e.indexOf(r.rowState)&&i++,i+=this.$_getRowStateCount(r,e)}return i},r.prototype.getRowStateCount=function(t){return this.$_getRowStateCount(this._rootRow,t)},r.prototype.restoreUpdatedStates=function(t){this.restoreUpdatedRows(t)},r.prototype.restoreUpdatedRows=function(t){if(this._checkClientState()){var e=[];if(null==t)this._rootRow.$_restoreRow(!0,e);else for(var i=t.length;i--;){var o=this.rowById(t[i]);o&&o.$_restoreRow(!1,e)}1==e.length?this._fireRowStateChanged(e[0],!1):1<e.length&&this._fireRowStatesChanged(e)}},r.prototype.getUpdatedCells=function(t){var e=this.restoreMode;if(e!=f.RestoreMode.AUTO&&e!=f.RestoreMode.EXPLICIT)return null;if(null==t)t=this.getStateRows(I.RowState.UPDATED);else if(!Array.isArray(t)){if("number"!=typeof t)return null;t=[t]}if(!Array.isArray(t))return null;for(var i=[],o=0,n=t.length;o<n;o++){var r=this.rowById(t[o]);if(r){var s=r.$_getUpdatedCells();s&&0<s.length&&i.push({__rowId:r.rowId,updatedCells:s})}}return i},r.prototype.canUpdateRow=function(t){return!0},r.prototype.canInsertRow=function(t){return!0},r.prototype.canDeleteRow=function(t){return!0},r.prototype.isDataChanged=function(t,e){if(t<0)return!1;var i=this.rowById(t);i||ne.Utils.isDebugging();var o=i._orgValues;if(i.rowState!==I.RowState.UPDATED||!o)return!1;if(o){var n=o[e],r=i._values[e],s=this._fields[e];return s&&s.dataType!==lt.ValueType.OBJECT&&!s.sameValues(n,r)}return!1},r.prototype.$_createFrom=function(t,e){var i=t.getObject();e&&(i=this._convertValues(i,e));for(var o=this.objectToRow(i),n=new l(this,o),r=0;r<t.count;r++){var s=this.$_createFrom(t.getChild(r),e);n.addChild(s,!1)}return n},r.prototype.$_insertRowsFrom=function(t,e,i,o){for(var n=[],r=0,s=t.rowsByIds(i,!1);r<s.length;r++){var a=s[r];n.push(this.$_createFrom(a,e))}var l=0<=o?this.rowById(o):null,h=l?l.parent:this.rootRow;if(0<=o){var d=h.indexOf(l);h.insertChildren(d,n,!1)}else h.insertChildren(h.count,n,!1)},r.prototype.insertRowsFrom=function(t,e,i,o){this.$_insertRowsFrom(t,e,i,o)},r.prototype.appendRowsFrom=function(t,e,i){this.$_insertRowsFrom(t,e,i,-1)},r.prototype.fillValue=function(t,e,i){if(t&&0!=t.length&&e&&0!=e.length){for(var o=[],n=0;n<t.length;n++){var r=this.rowById(t[n]);r&&o.push(r)}this.undoable?this._commands.execute(new J.FillValueTreeDataCommand(this,o,e,i)):this.$_fillValue(o,e,i)}},r.prototype.updateRows=function(t,e,i){if(t&&0!=t.length){for(var o=[],n=0;n<t.length;n++){var r=this.rowById(t[n]);r&&o.push(r)}this.undoable?this._commands.execute(new tt.UpdateRowsTreeDataCommand(this,o,e,i)):this.$_updateRows(o,e,i)}},r.prototype._findRowById=function(t){return this._rootRow.findById(t)},r.prototype._checkSum=function(t){if(t!=this.rowCount)throw new Error("Invalid row count: "+t+" <> "+this.rowCount)},r.prototype._clearRows=function(){this._rootRow._removeChildren(),this._rowMap=[],this._rootRow&&0<this._rootRow.descendantCount||(this._nextRowId=1),this._tags.clearRows(),this._checkSum(0)},r.prototype.$_fillValue=function(t,e,i){if(this._checkClientState()&&t&&t.length&&e&&e.length){this.refreshFieldFormats();for(var o=[],n=e.length,r=0,s=t;r<s.length;r++){var a=s[r];a.rowState==I.RowState.NONE&&o.push(a);for(var l=a.values,h=0;h<n;h++)l[e[h]]=i;a.$_internalUpdate(l,!1,!1)}0<o.length&&this._fireRowStatesChanged(o),this._tags.updateRows(t),this._fireRowsUpdated(t)}},r.prototype.$_updateRows=function(t,e,i){if(this._checkClientState()&&t&&e){var o=Math.min(t.length,e.length);if(!(o<1)){this.refreshFieldFormats();for(var n=[],r=0;r<o;r++){var s=t[r];s.rowState==I.RowState.NONE&&n.push(s),s.$_internalUpdate(e,i,!1)}0<n.length&&this._fireRowStatesChanged(n),this._tags.updateRows(t),this._fireRowsUpdated(t)}}},r.prototype.findRow=function(t,e){return t&&0<t.length&&e&&e.length>=t.length?this._rootRow.findChild(t,e):null},r.prototype.$_resetOrgValues=function(){this._needOrgValues=this.checkStates&&this.restoreMode!=f.RestoreMode.NONE,this._needRestore=this._needOrgValues&&this.restoreMode==f.RestoreMode.AUTO,this._rootRow._clearOrgValues()},r.prototype.$_summarizeChildren=function(t,e){for(var i=e.field,o=t.count,n=0;n<o;n++){var r=t.getChild(n),s=r.getValue(i);isNaN(s)||(e.sum+=s,e.dataCount++,s<e.min&&(e.min=s),s>e.max&&(e.max=s)),this.$_summarizeChildren(r,e)}},r.prototype.$_summarizeVars=function(t,e){for(var i=e.field,o=e.avg,n=t.count,r=0,s=0;s<n;s++){var a=t.getChild(s),l=a.getValue(i);isNaN(l)||(r+=Math.pow(l-o,2)),r+=this.$_summarizeVars(a,e)}return r},r.prototype._summarizeChildren=function(t,e){for(var i=e.field,o=t.count,n=0;n<o;n++){var r=t.getChild(n),s=r.getValue(i);isNaN(s)||(e.sum+=s,s<e.min&&(e.min=s),s>e.max&&(e.max=s)),this._summarizeChildren(r,e)}},r.prototype._summarizeVars=function(t,e){for(var i=e.field,o=e.avg,n=t.count,r=0,s=0;s<n;s++){var a=t.getChild(s),l=a.getValue(i);isNaN(l)||(r+=Math.pow(l-o,2)),r+=this._summarizeVars(a,e)}return r},r.prototype._summarize=function(t,e){if(null==t)return!1;if(t.clear(),this.rowCount<1)return!1;if(t.count=0,t.sum=0,t.min=Number.MIN_VALUE,t.max=Number.MAX_VALUE,this._summarizeChildren(this._rootRow,t),t.avg=t.sum/t.count,e){var i=this._summarizeVars(this._rootRow,t);t.vars=i/t.count}return!0},r.prototype._fireDisposed=function(){this._eventLock<=0&&this.fireEvent(r.DISPOSED)},r.prototype._fireReset=function(){this._eventLock<=0&&this.fireEvent(r.RESET)},r.prototype._fireRefresh=function(){this._eventLock<=0&&this.fireEvent(r.REFRESH)},r.prototype._fireRefreshClient=function(){this._eventLock<=0&&this.fireEvent(r.REFRESH_CLIENT)},r.prototype._fireCleared=function(){this._eventLock<=0&&this.fireEvent(r.CLEARED)},r.prototype._fireRowCountChanged=function(){this._eventLock<=0&&this.fireEvent(r.ROW_COUNT_CHANGED,this.rowCount)},r.prototype._fireRowAdding=function(t,e,i){return!(this._eventLock<=0)||this.fireConfirmEvent(r.ROW_ADDING,t,e,i)},r.prototype._fireRowAdded=function(t){this._eventLock<=0&&this.fireEvent(r.ROW_ADDED,t)},r.prototype._fireRowsAdding=function(t,e,i){return!(this._eventLock<=0)||this.fireConfirmEvent(r.ROWS_ADDING,t,e,i)},r.prototype._fireRowsAdded=function(t,e){this._eventLock<=0&&this.fireEvent(r.ROWS_ADDED,t,e)},r.prototype._fireRowRemoving=function(t){return!(this._eventLock<=0)||this.fireConfirmEvent(r.ROW_REMOVING,t)},r.prototype._fireRowRemoved=function(t){this._eventLock<=0&&this.fireEvent(r.ROW_REMOVED,t)},r.prototype._fireRowsRemoving=function(t){return!(this._eventLock<=0)||this.fireConfirmEvent(r.ROWS_REMOVING,t)},r.prototype._fireRowsRemoved=function(t){this._eventLock<=0&&this.fireEvent(r.ROWS_REMOVED,t)},r.prototype._fireRowUpdating=function(t){return!(this._eventLock<=0)||this.fireConfirmEvent(r.ROW_UPDATING,t)},r.prototype._fireRowUpdated=function(t){this._eventLock<=0&&this.fireEvent(r.ROW_UPDATED,t)},r.prototype._fireRowsUpdating=function(t){return!(this._eventLock<=0)||this.fireConfirmEvent(r.ROWS_UPDATING,t)},r.prototype._fireRowsUpdated=function(t){this._eventLock<=0&&this.fireEvent(r.ROWS_UPDATED,t)},r.prototype._fireValueChanging=function(t,e,i){return!(this._eventLock<=0)||this.fireConfirmEvent(r.VALUE_CHNAGED,t,e,i)},r.prototype._fireValueChanged=function(t,e){this._eventLock<=0&&this.fireEvent(r.VALUE_CHNAGED,t,e)},r.prototype._fireIconIndexChanged=function(t){this._eventLock<=0&&this.fireEvent(r.ICON_INDEX_CHANGED,t)},r.prototype._fireHasChildrenChanged=function(t){this._eventLock<=0&&this.fireEvent(r.HAS_CHILDREN_CHANGED,t)},r.prototype._fireRowStateChanged=function(t,e){this._eventLock<=0&&this.fireEvent(r.ROW_STATE_CHANGED,t,e)},r.prototype._fireRowStatesChanged=function(t){this._eventLock<=0&&this.fireEvent(r.ROW_STATES_CHANGED,t)},r.prototype._fireRowSiblingMoving=function(t,e){return!(this._eventLock<=0)||this.fireConfirmEvent(r.ROW_SIBLING_MOVING,t,e)},r.prototype._fireRowSiblingMoved=function(t,e){this._eventLock<=0&&this.fireEvent(r.ROW_SIBLING_MOVED,t,e)},r.prototype._fireRowsSiblingMoving=function(t,e){return!(this._eventLock<=0)||this.fireConfirmEvent(r.ROWS_SIBLING_MOVING,t,e)},r.prototype._fireRowsSiblingMoved=function(t,e){this._eventLock<=0&&this.fireEvent(r.ROWS_SIBLING_MOVED,t,e)},r.prototype._fireRowParentChanging=function(t,e,i){return!(this._eventLock<=0)||this.fireConfirmEvent(r.ROW_PARENT_CHANGING,t,e,i)},r.prototype._fireRowParentChanged=function(t,e,i){this._eventLock<=0&&this.fireEvent(r.ROW_PARENT_CHANGED,t,e,i)},r.prototype._fireRowsParentChanging=function(t,e,i){return!(this._eventLock<=0)||this.fireConfirmEvent(r.ROWS_PARENT_CHANGING,t,e,i)},r.prototype._fireRowsParentChanged=function(t,e,i){this._eventLock<=0&&this.fireEvent(r.ROWS_PARENT_CHANGED,t,e,i)},r.prototype._fireRowsHiddenChanged=function(t,e){this._eventLock<=0&&this.fireEvent(r.ROWS_HIDDEN_CHANGED,t,e)},r.prototype.undo=function(){this.canUndo&&this._commands.undo()},r.prototype.redo=function(){this.canRedo&&this._commands.redo(!0)},r.prototype.clearCommandStack=function(){this._commands.flush()},r.DISPOSED="onTreeDataProviderDisposed",r.RESET="onTreeDataProviderReset",r.REFRESH="onTreeDataProviderRefresh",r.REFRESH_CLIENT="onTreeDataProviderRefreshClient",r.CLEARED="onTreeDataProviderCleared",r.ROW_COUNT_CHANGED="onTreeDataProviderRowCountChanged",r.ROW_ADDING="onTreeDataProviderRowAdding",r.ROW_ADDED="onTreeDataProviderRowAdded",r.ROWS_ADDING="onTreeDataProviderRowsAdding",r.ROWS_ADDED="onTreeDataProviderRowsAdded",r.ROW_REMOVING="onTreeDataProviderRowRemoving",r.ROW_REMOVED="onTreeDataProviderRowRemoved",r.ROWS_REMOVING="onTreeDataProviderRowsRemoving",r.ROWS_REMOVED="onTreeDataProviderRowsRemoved",r.ROW_UPDATING="onTreeDataProviderRowUpdating",r.ROW_UPDATED="onTreeDataProviderRowUpdated",r.ROWS_UPDATING="onTreeDataProviderRowsUpdating",r.ROWS_UPDATED="onTreeDataProviderRowsUpdated",r.VALUE_CHANGING="onTreeDataProviderValueChanging",r.VALUE_CHNAGED="onTreeDataProviderValueChanged",r.ICON_INDEX_CHANGED="onTreeDataProviderIconIndexChanged",r.HAS_CHILDREN_CHANGED="onTreeDataProviderHasChildrenChanged",r.ROW_STATE_CHANGED="onTreeDataProviderRowStateChanged",r.ROW_STATES_CHANGED="onTreeDataProviderRowStatesChanged",r.ROW_SIBLING_MOVING="onTreeDataProviderRowSiblingMoving",r.ROW_SIBLING_MOVED="onTreeDataProviderRowSiblingMoved",r.ROWS_SIBLING_MOVING="onTreeDataProviderRowsSiblingMoving",r.ROWS_SIBLING_MOVED="onTreeDataProviderRowsSiblingMoved",r.ROW_PARENT_CHANGING="onTreeDataProviderRowParentChanging",r.ROW_PARENT_CHANGED="onTreeDataProviderRowParentChanged",r.ROWS_PARENT_CHANGING="onTreeDataProviderRowsParentChanging",r.ROWS_PARENT_CHANGED="onTreeDataProviderRowsParentChanged",r.ROWS_HIDDEN_CHANGED="onTreeDataProviderRowsHideChanged",r);function r(t,e){var i=o.call(this)||this;return i._countDirty=!1,i._tagLock=!1,i._points=[],i._nextPoint=0,i._rowMap=[],i._needOrgValues=!1,i._needRestore=!1,i._checkParentProc=null,i._hiddenRows=[],i.$_handler=e,t&&(i._commands=new K.LocalTreeDataCommandStack(i)),i._rootRow=new Q.RootTreeRow(i),i._tags=new q.TreeDataTagCollection(i),i}e.LocalTreeDataProvider=i});t(et);et.TreeDataRowImpl,et.LocalTreeDataProvider;var it=e(function(t,e){Object.defineProperty(e,"__esModule",{value:!0});var i,o=(i=re.Base,oe.__extends(n,i),n.prototype._doDispose=function(){i.prototype._doDispose.call(this)},n.prototype.load=function(t,e,i){var o=new Y.DataFillOptions(i);if(this.$_checkEmpty(e,o))return 0;switch(this.$_prepareLoad(o),t=t&&t.toLowerCase()){case"json":return this.$_loadJson(e,o);case"xml":return this.$_loadXml(e,o);case"csv":return this.$_loadCsv(e,o)}return 0},n.prototype.$_loadJson=function(t,e){if("string"==typeof t&&(t=JSON.parse(t)),t){var i=e.childrenField,o=e.iconField;if(e.fillMode!=Y.DataFillMode.APPEND)return this._ds.setJsonRows(t,e.rows,i,o);var n=this._ds.rowById(e.parentId);return this._ds.appendJsonRows(n,t,e.rows,i,o)}return 0},n.prototype.$_loadXml=function(t,e){if("string"==typeof t&&(t=ct.XmlUtils.parseXml(t)),t&&t.documentElement){var i=e.childrenField,o=e.iconField;if(e.fillMode!=Y.DataFillMode.APPEND)return this._ds.setXmlRows(t,e.rows,i,o);var n=this._ds.rowById(e.parentId);return this._ds.appendXmlRows(n,t,e.rows,i,o)}return 0},n.prototype.$_loadCsv=function(t,e){var i=e.start,o=e.count,n=e.quoted,r=e.delimiter,s=N.DataHelper.csvToArray(this._ds,t,i,o,n,r);if(s&&0<(o=s.length)){var a=e.treeField,l=e.childrenField,h=e.iconField,d=e.needSorting;if(e.fillMode==Y.DataFillMode.APPEND){var u=this._ds.rowById(e.parentId);this._ds.appendDataRows(u,s,a,d,l,h)}else this._ds.setRows(s,a,d,l,h);return s.length}return 0},n.prototype.$_fillEmpty=function(t){t.fillMode===Y.DataFillMode.SET&&this._ds.setRows(null,null,!1,null,null)},n.prototype.$_checkEmpty=function(t,e){return!t&&(this.$_fillEmpty(e),!0)},n.prototype.$_prepareLoad=function(t){},n);function n(t){var e=i.call(this)||this;return e._ds=t,e}e.TreeDataLoader=o});t(it);it.TreeDataLoader;var ot=e(function(t,e){Object.defineProperty(e,"__esModule",{value:!0});var r=(i.getFieldIndex=function(t,e){return"string"==typeof e?t.getFieldIndex(e):e},i.fillData=function(t,e,i,o){var n=new Y.DataLoader(t);try{n.load(e,i,o)}finally{n.dispose()}},i.fillTreeData=function(t,e,i,o){var n=new it.TreeDataLoader(t);try{n.load(e,i,o)}finally{n.dispose()}},i.extractTreeRows=function(t){if(t){for(var e=t.length,i=new Array(e),o=0;o<e;o++)i[o]=t[o].rowId;return i}return null},i);function i(){}e.DataDelegateUtils=r;function o(){}e.EventListenerBase=o;var n=(s.prototype.dispose=function(){this._dp.dispose(),this._dp=null},_dp(s,"subTypeEnabled",{get:function(){return this._dp.subTypeEnabled},set:function(t){this._dp.subTypeEnabled=t}}),_dp(s,"undoable",{get:function(){return this._dp.undoable},set:function(t){this._dp.undoable=t}}),_dp(s,"insertable",{get:function(){return this._dp.insertable},set:function(t){this._dp.insertable=t}}),_dp(s,"updatable",{get:function(){return this._dp.updatable},set:function(t){this._dp.updatable=t}}),_dp(s,"deletable",{get:function(){return this._dp.deletable},set:function(t){this._dp.deletable=t}}),_dp(s,"softDeleting",{get:function(){return this._dp.softDeleting},set:function(t){this._dp.softDeleting=t}}),_dp(s,"deleteCreated",{get:function(){return this._dp.deleteCreated},set:function(t){this._dp.deleteCreated=t}}),_dp(s,"checkStates",{get:function(){return this._dp.checkStates},set:function(t){this._dp.checkStates=t}}),_dp(s,"restoreMode",{get:function(){return this._dp.restoreMode},set:function(t){this._dp.restoreMode=t}}),_dp(s,"strictRestore",{get:function(){return this._dp.strictRestore},set:function(t){this._dp.strictRestore=t}}),_dp(s,"booleanFormat",{get:function(){return this._dp.booleanFormat},set:function(t){this._dp.booleanFormat=t}}),_dp(s,"datetimeFormat",{get:function(){return this._dp.datetimeFormat},set:function(t){this._dp.datetimeFormat=t}}),_dp(s,"baseYear",{get:function(){return this._dp.baseYear},set:function(t){this._dp.baseYear=t}}),_dp(s,"amText",{get:function(){return this._dp.amText},set:function(t){this._dp.amText=t}}),_dp(s,"pmText",{get:function(){return this._dp.pmText},set:function(t){this._dp.pmText}}),_dp(s,"commitBeforeDataEdit",{get:function(){return this._dp.commitBeforeDataEdit},set:function(t){this._dp.commitBeforeDataEdit=t}}),s.prototype.getOptions=function(){var t=this._dp;return{subTypeEnabled:t.subTypeEnabled,undoable:t.undoable,insertable:t.insertable,updatable:t.updatable,deletable:t.deletable,softDeleting:t.softDeleting,deleteCreated:t.deleteCreated,checkStates:t.checkStates,restoreMode:t.restoreMode.toString(),strictRestore:t.strictRestore,booleanFormat:t.booleanFormat,datetimeFormat:t.datetimeFormat,baseYear:t.baseYear,amText:t.amText,pmText:t.pmText,commitBeforeDataEdit:t.commitBeforeDataEdit}},s.prototype.setOptions=function(t){this._dp.assignFrom(t)},s.prototype.beginUpdate=function(){this._dp.beginUpdate()},s.prototype.endUpdate=function(t){void 0===t&&(t=!0),this._dp.endUpdate(t)},s.prototype.getFields=function(){return this._dp.getFields()},s.prototype.setFields=function(t){ne.Utils.isArray(t)&&this._dp.setFields(t)},s.prototype.addField=function(t,e,i){return this._dp.addField(t,e,i)},s.prototype.getFieldCount=function(){return this._dp.fieldCount},s.prototype.fieldByName=function(t){return this._dp.fieldByName(t)},s.prototype.getFieldNames=function(){return this._dp.getFieldNames()},s.prototype.getOrgFieldNames=function(){return this._dp.getOrgFieldNames()},s.prototype.getFieldName=function(t){return this._dp.getFieldName(t)},s.prototype.getOrgFieldName=function(t){return this._dp.getOrgFieldName(t)},s.prototype.getFieldIndex=function(t){return this._dp.getFieldIndex(t)},s.prototype.hasData=function(t){return this._dp.hasData(t)},s.prototype.getValues=function(t){return this._dp.getRow(t)},s.prototype.getJsonRow=function(t){return this._dp.getRowObject(t)},s.prototype.checkRowStates=function(t){this._dp.checkStates=t},s.prototype.getRowState=function(t){return this._dp.getRowState(t)},s.prototype.getStateRows=function(t){return void 0===t&&(t=I.RowState.NONE),this._dp.getStateRows(t)},s.prototype.getAllStateRows=function(){return this._dp.getAllStateRows()},s.prototype.clearRowStates=function(t,e){void 0===e&&(e=!1),this._dp.clearRowStates(t,e)},s.prototype.setRowState=function(t,e,i){void 0===e&&(e=I.RowState.NONE),void 0===i&&(i=!1),this._dp.setRowState(t,e,i)},s.prototype.setRowStates=function(t,e,i,o){void 0===e&&(e=I.RowState.NONE),void 0===i&&(i=!1),void 0===o&&(o=!1),this._dp.setRowStates(t,e,i,o)},s.prototype.getRowStateCount=function(t){if(!t)return 0;var e=[];if("*"==t||"all"==t)e.push(I.RowState.CREATED,I.RowState.UPDATED,I.RowState.DELETED,I.RowState.CREATE_AND_DELETED);else for(var i=Array.isArray(t)?t:[t],o=0,n=i.length;o<n;o++)e.push(i[o]);return 0<e.length?this._dp.getRowStateCount(e):void 0},s.prototype.restoreUpdatedStates=function(t){return this._dp.restoreUpdatedStates(t)},s.prototype.restoreUpdatedRows=function(t){return this._dp.restoreUpdatedRows(t)},s.prototype.getUpdatedCells=function(t){return this._dp.getUpdatedCells(t)},s.prototype.getDistinctValues=function(t,e,i){void 0===e&&(e=-1),void 0===i&&(i=lt.SortDirection.ASCENDING);var o=i||lt.SortDirection.ASCENDING,n="string"==typeof t?this._dp.getFieldIndex(t):t;return this._dp.getDistinctValues(n,e,o)},s.prototype.savePoint=function(t){return void 0===t&&(t=!0),this._dp.savePoint(t)},s.prototype.rollback=function(t){void 0===t&&(t=0),this._dp.rollback(t)},s.prototype.clearSavePoints=function(){this._dp.clearSavePoints()},s.prototype.getSavePoints=function(){return this._dp.getSavePoints()},s.prototype.setDataComparer=function(t,e){var i="string"==typeof t?this._dp.getFieldIndex(t):t;this._dp.setDataComparer(i,e)},s.prototype.exportToCsv=function(t){this._dp.exportToCsv(t)},s.prototype.destroy=function(){this.dispose()},s.prototype.undo=function(){this._dp.undo()},s.prototype.redo=function(){this._dp.redo()},s.prototype.clearCommandStack=function(){this._dp.clearCommandStack()},s.prototype.getProvider=function(){return this._dp},s);function s(t){this._dp=this._createProvider(t),this._listener=this._createListener(this._dp)}e.DataProviderBase=n;var a,l=(a=n,oe.__extends(h,a),h.prototype.getRowCount=function(){return this._dp.rowCount},h.prototype.setRowCount=function(t,e,i,o){void 0===e&&(e=!1),void 0===i&&(i=null),void 0===o&&(o=I.RowState.NONE);var n=o;return this._dp.setRowCount(t,e,i,n)},h.prototype.setFilterMode=function(t){void 0===t&&(t="and"),this._dp.setFilterMode(t)},h.prototype.setFilters=function(t,e){void 0===e&&(e="and"),this._dp.setFilters(t,e)},h.prototype.fillJsonData=function(t,e){var i=e instanceof Y.DataFillOptions?e:new Y.DataFillOptions(e);r.fillData(this._dp,"json",t,i)},h.prototype.fillXmlData=function(t,e){var i=e instanceof Y.DataFillOptions?e:new Y.DataFillOptions(e);r.fillData(this._dp,"xml",t,i)},h.prototype.fillCsvData=function(t,e){var i=e instanceof Y.DataFillOptions?e:new Y.DataFillOptions(e);r.fillData(this._dp,"csv",t,i)},h.prototype.setRows=function(t,e,i){void 0===e&&(e=0),void 0===i&&(i=-1),this._dp.setRows(t,e,i)},h.prototype.addRows=function(t,e,i,o){void 0===e&&(e=0),void 0===i&&(i=-1),void 0===o&&(o=!1),this._dp.appendRows(t,e,i,o)},h.prototype.insertRows=function(t,e,i,o,n){void 0===i&&(i=0),void 0===o&&(o=-1),void 0===n&&(n=!1),this._dp.insertRows(t,e,i,o,n)},h.prototype.updateRows=function(t,e,i,o,n,r){void 0===i&&(i=0),void 0===o&&(o=-1),void 0===n&&(n=!1),void 0===r&&(r=!1),this._dp.updateRows(t,e,i,o,n,r)},h.prototype.clearRows=function(){this._dp.clearRows()},h.prototype.updateRow=function(t,e,i){this._dp.updateRow(t,e,i)},h.prototype.hideRows=function(t){this._dp.hideRows(t)},h.prototype.showHiddenRows=function(t){this._dp.showRows(t)},h.prototype.getHiddenRows=function(){return this._dp.getHiddenRows()},h.prototype.isHiddenRow=function(t){return this._dp.isHiddenRow(t)},h.prototype.resetHiddenRows=function(){this._dp.clearHiddenRows()},h.prototype.addRow=function(t){return this._dp.appendRow(t)},h.prototype.insertRow=function(t,e){return this._dp.insertRow(t,e)},h.prototype.removeRow=function(t){this._dp.removeRow(t)},h.prototype.removeRows=function(t,e){void 0===e&&(e=!1),this._dp.removeRows(t,e)},h.prototype.moveRow=function(t,e){this._dp.moveRow(t,e)},h.prototype.moveRows=function(t,e,i){this._dp.moveRows(t,e,i)},h.prototype.getValue=function(t,e){var i=r.getFieldIndex(this._dp,e);return this._dp.getValue(t,i)},h.prototype.setValue=function(t,e,i){var o=r.getFieldIndex(this._dp,e);this._dp.setValue(t,o,i)},h.prototype.getRows=function(t,e){return void 0===t&&(t=0),void 0===e&&(e=-1),this._dp.getRows(t,e)},h.prototype.getJsonRows=function(t,e){return void 0===t&&(t=0),void 0===e&&(e=-1),this._dp.getRowObjects(t,e)},h.prototype.getOutputRow=function(t,e){return this._dp.getOutputObject(t,e)},h.prototype.getOutputRows=function(t,e,i){return void 0===e&&(e=0),void 0===i&&(i=-1),this._dp.getOutputObjects(t,e,i)},h.prototype.getFieldValues=function(t,e,i){void 0===e&&(e=0),void 0===i&&(i=-1);var o=r.getFieldIndex(this._dp,t);return this._dp.getFieldValues(o,e,i)},h.prototype.searchDataRow=function(t){return t?this._dp.searchDataRow(t):-1},h.prototype.searchData=function(t){return t?this._dp.searchData(t):null},h.prototype._createProvider=function(t){return new j.LocalDataProvider(t,this)},h.prototype._createListener=function(t){return new p(this,t)},h);function h(){var t=null!==a&&a.apply(this,arguments)||this;return t.onRowCountChanged=null,t.onRowUpdating=null,t.onRowUpdated=null,t.onRowsUpdated=null,t.onRowListUpdated=null,t.onRowInserting=null,t.onRowInserted=null,t.onRowsInserted=null,t.onRowDeleting=null,t.onRowDeleted=null,t.onRowsDeleted=null,t.onRowMoving=null,t.onRowMoved=null,t.onRowsMoving=null,t.onRowsMoved=null,t.onRowListMoving=null,t.onRowListMoved=null,t.onValueChanged=null,t.onDataChanged=null,t.onRowStateChanged=null,t.onRowStatesChanged=null,t.onRowStatesCleared=null,t.onRestoreRows=null,t}e.LocalDataProvider=l;var d,u=(d=n,oe.__extends(_,d),_.prototype.dispose=function(){d.prototype.dispose.call(this)},_.prototype.getRowCount=function(){return this._dp.rowCount},_.prototype.setRows=function(t,e,i,o,n){this._dp.setRows(t,e,i,o,n)},_.prototype.setCsvRows=function(t,e,i,o,n){this._dp.setCsvRows(t,e,i,o,n)},_.prototype.setXmlRows=function(t,e,i,o){this._dp.setXmlRows(t,e,i,o)},_.prototype.setObjectRows=function(t,e,i,o){this._dp.setJsonRows(t,e,i,o)},_.prototype.setNestedRows=function(t,e,i,o,n){this._dp.setJsonRows2(t,e,i,o,n)},_.prototype.fillJsonData=function(t,e){var i=new Y.DataFillOptions(e);try{r.fillTreeData(this._dp,"json",t,i)}finally{i.dispose(),i=null}},_.prototype.fillXmlData=function(t,e){var i=new Y.DataFillOptions(e);try{r.fillTreeData(this._dp,"xml",t,i)}finally{i.dispose(),i=null}},_.prototype.fillCsvData=function(t,e){var i=new Y.DataFillOptions(e);try{r.fillTreeData(this._dp,"csv",t,i)}finally{i.dispose(),i=null}},_.prototype.getIconIndex=function(t){return this._dp.rowById(t).iconIndex},_.prototype.setIconIndex=function(t,e){this._dp.rowById(t).iconIndex=e},_.prototype.getParent=function(t){var e=this._dp.rowById(t);return e&&e.parent?e.parent.rowId:-1},_.prototype.getLevel=function(t){return this._dp.rowById(t).level},_.prototype.getChildCount=function(t){if(null==t||-1==t)return this._dp.getChildCount(null);var e=this._dp.rowById(t);return e&&e.children?e.children.length:0},_.prototype.getChildren=function(t){var e;return e=null==t||-1==t?this._dp.getRows(null):this._dp.rowById(t).children,r.extractTreeRows(e)},_.prototype.getDescendantCount=function(t){return null==t||-1==t?this._dp.getDescendantCount(null):this._dp.rowById(t).descendantCount},_.prototype.getDescendants=function(t,e){void 0===e&&(e=-1);var i=null;null!=t&&-1!=t&&(i=this._dp.rowById(t));var o=this._dp.getDescendants(i,e);return r.extractTreeRows(o)},_.prototype.getAncestors=function(t){var e=this._dp.rowById(t);return e&&e.ancestors?r.extractTreeRows(e.ancestors):null},_.prototype.getJsonRow=function(t){var e=this._dp.rowById(t);return e?e.getObject():null},_.prototype.getJsonRows=function(t,e,i,o){void 0===e&&(e=!1),void 0===i&&(i="rows"),void 0===o&&(o="iconIndex");var n=null==t?this._dp.rootRow:this._dp.rowById(t);return n?n.getChildObjects(e,i,o,!0):null},_.prototype.getOutputRow=function(t,e,i){void 0===i&&(i="iconIndex");var o,n=new b.DataOutputOptions(t);try{var r=null==e?this._dp.rootRow:this._dp.rowById(e);o=r?r.getOutput(t,i):null}finally{n.dispose()}return o},_.prototype.getOutputRows=function(t,e,i,o,n){void 0===i&&(i=!1),void 0===o&&(o="rows"),void 0===n&&(n="iconIndex");var r,s=new b.DataOutputOptions(t);try{var a=null==e?this._dp.rootRow:this._dp.rowById(e);r=a?a.getChildOutputObjects(s,i,o,n):null}finally{s.dispose()}return r},_.prototype.addChildRow=function(t,e,i,o){void 0===i&&(i=-1),void 0===o&&(o=!1);var n=this._dp,r=n.rowById(t)||n.rootRow,s=n.createRow(e,i,o);return r.addChild(s,!1)?s.rowId:-1},_.prototype.insertChildRow=function(t,e,i,o,n){void 0===o&&(o=-1),void 0===n&&(n=!1);var r=this._dp,s=r.rowById(t)||r.rootRow,a=r.createRow(i,o,n);return s.insertChild(e,a,!1)?a.rowId:-1},_.prototype.updateRow=function(t,e,i){var o=this._dp.rowById(t);return!!o&&o.update(e,i)},_.prototype.updateRows=function(t,e,i){this._dp.updateRows(t,e,i)},_.prototype.removeRow=function(t){var e=this._dp.rowById(t);return!(!e||!e.parent)&&e.parent.removeChild(e)},_.prototype.removeRows=function(t){if(t&&0<t.length){for(var e=[],i=t.length;i--;){var o=this._dp.rowById(t[i]);o&&e.push(o)}return this._dp.removeRows(e)}return!1},_.prototype.clearRows=function(){this._dp.clearRows()},_.prototype.hideRows=function(t){this._dp.hideRows(t)},_.prototype.showHiddenRows=function(t){this._dp.showRows(t)},_.prototype.getHiddenRows=function(){return this._dp.getHiddenRows()},_.prototype.isHiddenRow=function(t){return this._dp.isHiddenRow(t)},_.prototype.resetHiddenRows=function(){this._dp.clearHiddenRows()},_.prototype.getValue=function(t,e){var i=this._dp.rowById(t),o=r.getFieldIndex(this._dp,e);return i?i.getValue(o):null},_.prototype.setValue=function(t,e,i){var o=this._dp.rowById(t),n=r.getFieldIndex(this._dp,e);o&&o.setValue(n,i,!1)},_.prototype.moveRowSibling=function(t,e){var i=this._dp.rowById(t);return!!i&&this._dp.changeRowIndex(i,e)},_.prototype.changeRowParent=function(t,e,i){var o=this._dp.rowById(t),n=this._dp.rowById(e);return!(!o||!n)&&this._dp.changeRowParent(o,n,i)},_.prototype.searchDataRow=function(t){return t?this._dp.searchDataRow(t,t.parentId):-1},_.prototype.searchData=function(t){return t?this._dp.searchData(t,t.parentId):null},_.prototype._createProvider=function(t){return new et.LocalTreeDataProvider(t,this)},_.prototype._createListener=function(t){return new m(this,t)},_);function _(t){void 0===t&&(t=!1);var e=d.call(this,t)||this;return e.onRowCountChanged=null,e.onRowAdding=null,e.onRowAdded=null,e.onRowsAdded=null,e.onRowDeleting=null,e.onRowDeleted=null,e.onRowsDeleted=null,e.onRowUpdating=null,e.onRowUpdated=null,e.onRowsUpdating=null,e.onRowsUpdated=null,e.onValueChanged=null,e.onDataChanged=null,e.onRowStateChanged=null,e.onRowStatesChanged=null,e.onRowSiblingMoving=null,e.onRowSiblingMoved=null,e.onRowsSiblingMoving=null,e.onRowsSiblingMoved=null,e.onRowParentChanging=null,e.onRowParentChanged=null,e}e.LocalTreeDataProvider=u;var c,p=(c=o,oe.__extends(f,c),f.prototype.dispose=function(){this._del=null,this._provider.removeListener(this),this._provider=null},f.prototype.onDataProviderRowCountChanged=function(t){this._del.onRowCountChanged?this._del.onRowCountChanged(this._del,t.rowCount):ne.Utils.log("onRowCountChanged: "+t.rowCount)},f.prototype.onDataProviderRowUpdating=function(t,e,i){return this._del.onRowUpdating?this._del.onRowUpdating(this._del,e):(ne.Utils.log("onRowUpdating: "+e),!0)},f.prototype.onDataProviderRowUpdated=function(t,e){this._del.onRowUpdated?this._del.onRowUpdated(this._del,e):ne.Utils.log("onRowUpdated: "+e)},f.prototype.onDataProviderRowsUpdated=function(t,e,i){this._del.onRowsUpdated?this._del.onRowsUpdated(this._del,e,i):ne.Utils.log("onRowsUpdated: "+e+", "+i)},f.prototype.onDataProviderRowListUpdated=function(t,e){this._del.onRowListUpdated?this._del.onRowListUpdated(this._del,e):ne.Utils.log("onRowListUpdated: "+e)},f.prototype.onDataProviderRowInserting=function(t,e,i){return this._del.onRowInserting?this._del.onRowInserting(this._del,e,i):(ne.Utils.log("onRowInserting: "+e),!0)},f.prototype.onDataProviderRowInserted=function(t,e){this._del.onRowInserted?this._del.onRowInserted(this._del,e):ne.Utils.log("onRowInserted: "+e)},f.prototype.onDataProviderRowsInserted=function(t,e,i){this._del.onRowsInserted?this._del.onRowsInserted(this._del,e,i):ne.Utils.log("onRowsInserted: "+e+", "+i)},f.prototype.onDataProviderRowRemoving=function(t,e){return this._del.onRowDeleting?this._del.onRowDeleting(this._del,e):(ne.Utils.log("onRowDeleting: "+e),!0)},f.prototype.onDataProviderRowRemoved=function(t,e){this._del.onRowDeleted?this._del.onRowDeleted(this._del,e):ne.Utils.log("onRowDeleted: "+e)},f.prototype.onDataProviderRowsRemoving=function(t,e){return!0},f.prototype.onDataProviderRowsRemoved=function(t,e){this._del.onRowsDeleted?this._del.onRowsDeleted(this._del,e):ne.Utils.log("onRowsDeleted: ",e)},f.prototype.onDataProviderRowMoving=function(t,e,i){return this._del.onRowMoving?this._del.onRowMoving(this._del,e,i):(ne.Utils.log("onRowMoving: "+e+", "+i),!0)},f.prototype.onDataProviderRowMoved=function(t,e,i){this._del.onRowMoved?this._del.onRowMoved(this._del,e,i):ne.Utils.log("onRowMoved: "+e+", "+i)},f.prototype.onDataProviderRowsMoving=function(t,e,i,o){return this._del.onRowsMoving?this._del.onRowsMoving(this._del,e,i,o):(ne.Utils.log("onRowsMoving: "+e+", "+i+", "+o),!0)},f.prototype.onDataProviderRowsMoved=function(t,e,i,o){this._del.onRowsMoved?this._del.onRowsMoved(this._del,e,i,o):ne.Utils.log("onRowsMoved: "+e+", "+i+", "+o)},f.prototype.onDataProviderRowListMoving=function(t,e,i){return this._del.onRowListMoving?this._del.onRowListMoving(this._del,e,i):(ne.Utils.log("onRowListMoving: ",e,", ",i),!0)},f.prototype.onDataProviderRowListMoved=function(t,e,i){this._del.onRowListMoved?this._del.onRowListMoved(this._del,e,i):ne.Utils.log("onRowListMoved: ",e,i)},f.prototype.onDataProviderValueChanged=function(t,e,i){this._del.onValueChanged?this._del.onValueChanged(this._del,e,i):ne.Utils.log("onValueChanged:"+e+", "+i)},f.prototype.onDataProviderDataChanged=function(t){this._del.onDataChanged?this._del.onDataChanged(this._del):ne.Utils.log("onDataChanged")},f.prototype.onDataProviderStateChanged=function(t,e){this._del.onRowStateChanged?this._del.onRowStateChanged(this._del,e):ne.Utils.log("onRowStateChanged: "+e)},f.prototype.onDataProviderStatesChanged=function(t,e){this._del.onRowStatesChanged?this._del.onRowStatesChanged(this._del,e):ne.Utils.log("onRowStatesChanged",e)},f.prototype.onDataProviderStatesCleared=function(t){this._del.onRowStatesCleared?this._del.onRowStatesCleared(this._del):ne.Utils.log("onRowStatesCleared")},f.prototype.onDataProviderRestoreRows=function(t,e){this._del.onRestoreRows?this._del.onRestoreRows(this._del,e):ne.Utils.log("onRestoreRows",e)},f);function f(t,e){var i=c.call(this)||this;return i._del=t,i._provider=e,i._provider.addListener(i),i}var g,m=(g=o,oe.__extends(y,g),y.prototype.dispose=function(){this._del=null,this._provider.removeListener(this),this._provider=null},y.prototype.onTreeDataProviderRowCountChanged=function(t){this._del.onRowCountChanged?this._del.onRowCountChanged(this._del,t.rowCount):ne.Utils.log("onRowCountChanged: "+t.rowCount)},y.prototype.onTreeDataProviderRowAdding=function(t,e,i,o){return this._del.onRowAdding?this._del.onRowAdding(this._del,e.rowId,i,o._values):(ne.Utils.log("onRowAdding: "+e.rowId+", "+i,o._values),!0)},y.prototype.onTreeDataProviderRowAdded=function(t,e){this._del.onRowAdded?this._del.onRowAdded(this._del,e.rowId):ne.Utils.log("onRowAdded: "+e.rowId)},y.prototype.onTreeDataProviderRowsAdded=function(t,e,i){var o=r.extractTreeRows(i);this._del.onRowsAdded?this._del.onRowsAdded(this._del,e.rowId,o):ne.Utils.log("onRowsAdded: "+e.rowId,o)},y.prototype.onTreeDataProviderRowRemoving=function(t,e){return this._del.onRowDeleting?this._del.onRowDeleting(this._del,e.rowId):(ne.Utils.log("onRowDeleting: "+e.rowId),!0)},y.prototype.onTreeDataProviderRowRemoved=function(t,e){this._del.onRowDeleted?this._del.onRowDeleted(this._del,e.rowId):ne.Utils.log("onRowDeleted: "+e.rowId)},y.prototype.onTreeDataProviderRowsRemoved=function(t,e){var i=r.extractTreeRows(e);this._del.onRowsDeleted?this._del.onRowsDeleted(this._del,i):ne.Utils.log("onRowsDeleted: ",i)},y.prototype.onTreeDataProviderRowUpdating=function(t,e){return this._del.onRowUpdating?this._del.onRowUpdating(this._del,e.rowId):(ne.Utils.log("onRowUpdating:"+e.rowId),!0)},y.prototype.onTreeDataProviderRowUpdated=function(t,e){this._del.onRowUpdated?this._del.onRowUpdated(this._del,e.rowId):ne.Utils.log("onRowUpdated: "+e.rowId)},y.prototype.onTreeDataProviderRowsUpdating=function(t,e){return this._del.onRowsUpdating?this._del.onRowsUpdating(this._del,Q.TreeDataRow.getRowIds(e)):(ne.Utils.log("onRowUpdating:"+e.length),!0)},y.prototype.onTreeDataProviderRowsUpdated=function(t,e){this._del.onRowsUpdated?this._del.onRowsUpdated(this._del,Q.TreeDataRow.getRowIds(e)):ne.Utils.log("onRowsUpdated: "+e.length)},y.prototype.onTreeDataProviderValueChanged=function(t,e,i){this._del.onValueChanged?this._del.onValueChanged(this._del,e.rowId,i):ne.Utils.log("onValueChanged: "+e.rowId+", "+i)},y.prototype.onTreeDataProviderRowStateChanged=function(t,e){this._del.onRowStateChanged?this._del.onRowStateChanged(this._del,e.rowId):ne.Utils.log("onRowStateChanged: "+e.rowId)},y.prototype.onTreeDataProviderRowStatesChanged=function(t,e){var i=r.extractTreeRows(e);this._del.onRowStatesChanged?this._del.onRowStatesChanged(this._del,i):ne.Utils.log("onRowStatesChanged: ",i)},y.prototype.onTreeDataProviderRowSiblingMoving=function(t,e,i){return this._del.onRowSiblingMoving?this._del.onRowSiblingMoving(this._del,e.rowId,i):(ne.Utils.log("onRowSiblingMoveing: "+e.rowId+", "+i),!0)},y.prototype.onTreeDataProviderRowSiblingMoved=function(t,e,i){this._del.onRowSiblingMoved?this._del.onRowSiblingMoved(this._del,e.rowId,i):ne.Utils.log("onSiblingMoved: "+e.rowId+", "+i)},y.prototype.onTreeDataProviderRowsSiblingMoving=function(t,e,i){return this._del.onRowsSiblingMoving?this._del.onRowsSiblingMoving(this._del,e,i):(ne.Utils.log("onRowSiblingMoveing: ",e,i),!0)},y.prototype.onTreeDataProviderRowsSiblingMoved=function(t,e,i){this._del.onRowsSiblingMoved?this._del.onRowsSiblingMoved(this._del,e,i):ne.Utils.log("onSiblingMoved: ",e,i)},y.prototype.onTreeDataProviderRowParentChanging=function(t,e,i,o){if(this._del.onRowParentChanging)return this._del.onRowParentChanging(this._del,e.rowId,i.rowId,o);ne.Utils.log("onRowParentChanging: "+e.rowId+", "+i.rowId+", "+o)},y.prototype.onTreeDataProviderRowParentChanged=function(t,e,i,o){this._del.onRowParentChanged?this._del.onRowParentChanged(this._del,e.rowId,i.rowId,o):ne.Utils.log("onRowParentChanged: "+e.rowId+", "+i.rowId+", "+o)},y);function y(t,e){var i=g.call(this)||this;return i._del=t,i._provider=e,i._provider.addListener(i),i}});t(ot);ot.DataDelegateUtils,ot.EventListenerBase,ot.DataProviderBase,ot.LocalDataProvider,ot.LocalTreeDataProvider;var nt=e(function(t,e){Object.defineProperty(e,"__esModule",{value:!0});var o,i=(o=re.Base,oe.__extends(n,o),n.prototype._doDispose=function(){o.prototype._doDispose.call(this)},_dp(n,"name",{get:function(){return this._name}}),_dp(n,"count",{get:function(){return this._urls.length}}),n.prototype.addUrl=function(t){t&&this._urls.indexOf(t)<0&&this._urls.push(t)},n.prototype.addUrls=function(){for(var t=[],e=0;e<arguments.length;e++)t[e]=arguments[e];if(t)for(var i=0;i<t.length;i++)this.addUrl(t[i])},n.prototype.getImage=function(t){return 0<=t&&t<this._urls.length?this._rootUrl+this._urls[t]:null},n);function n(t,e){var i=o.call(this)||this;return i._urls=[],i._name=t,i._rootUrl=e,i}e.ImageList=i});t(nt);nt.ImageList;var rt=e(function(t,e){Object.defineProperty(e,"__esModule",{value:!0});var i=(o.prototype.clear=function(){this.count=this.dataCount=0,this.sum=this.dataAvg=this.max=this.min=this.avg=this.vars=this.varsp=NaN},o);function o(t){this.field=t,this.count=0,this.sum=NaN,this.max=NaN,this.min=NaN,this.avg=NaN,this.vars=NaN,this.varsp=NaN,this.dataCount=0,this.dataAvg=NaN}e.FieldSummary=i});t(rt);rt.FieldSummary;var dt=e(function(t,e){Object.defineProperty(e,"__esModule",{value:!0}),e.ITEM_EXT_CHECKED=1;var i,o,n=196608,r=4294705152,s="_parent";(o=i=e.ItemState||(e.ItemState={})).NORMAL="normal",o.FOCUSED="focused",o.UPDATING="updating",o.INSERTING="inserting",o.APPENDING="appending",o.DUMMY="dummy",e.ItemState_isEditing=function(t){return t==i.UPDATING||t==i.INSERTING||t==i.APPENDING},e.ItemState_isInserting=function(t){return t==i.INSERTING||t==i.APPENDING};var a=(l.prototype.dispose=function(){this._parent=null},_dp(l,"id",{get:function(){return this._id}}),_dp(l,"index",{get:function(){return this._index}}),_dp(l,"parent",{get:function(){return this._parent}}),_dp(l,"parentIndex",{get:function(){return this._parent?this._parent._index:-1}}),_dp(l,"root",{get:function(){for(var t=this._parent;t&&1<t.level;)t=t._parent;return t}}),_dp(l,"childIndex",{get:function(){return this._parent?this._parent.indexOf(this):-1}}),_dp(l,"level",{get:function(){return this._parent?this._parent.level+1:0}}),_dp(l,"isData",{get:function(){return!1}}),_dp(l,"isDataRow",{get:function(){return!1}}),_dp(l,"visible",{get:function(){return this._parent&&0<=this._index}}),_dp(l,"displayLevel",{get:function(){return this.level}}),_dp(l,"provider",{get:function(){return this._parent&&this._parent.provider}}),_dp(l,"dataSource",{get:function(){return this._parent&&this._parent.dataSource}}),_dp(l,"dataRow",{get:function(){return-1}}),_dp(l,"dataId",{get:function(){return-1}}),_dp(l,"rowState",{get:function(){var t=this.dataRow;if(0<=t){var e=this.dataSource;return e?e.getRowState(t):I.RowState.NONE}return I.RowState.NONE}}),_dp(l,"itemState",{get:function(){return i.NORMAL}}),_dp(l,"checked",{get:function(){var t=0!=(this._getExtents()&e.ITEM_EXT_CHECKED);return this.provider.getItemChecked(this,t)}}),_dp(l,"checkable",{get:function(){return 0==(4&this._getExtents())}}),_dp(l,"editable",{get:function(){return!1}}),_dp(l,"readOnly",{get:function(){return 0!=(8&this._getExtents())},set:function(t){this._setExtents(t?8|this._getExtents():-9&this._getExtents())}}),_dp(l,"resizable",{get:function(){return!1}}),_dp(l,"merged",{get:function(){return!1}}),_dp(l,"height",{get:function(){var t=this._getExtents();return t&n?(t&r)>>>18:NaN}}),l.prototype.$_setHeight=function(t,e){var i=this._getExtents();if(t=Math.round(t),isNaN(t)){if(i&n)return this._setExtents(i&~n),!0}else{if(t!=(i&r)>>>18)return t=Math.max(0,Math.min(53247,t))<<18,i=e?i&~n|131072:i&~n|65536,this._setExtents(i&~r|t),!0;if(e){if(0==(131072&i))return i=i&~n|131072,this._setExtents(i),!0}else if(0==(65536&i))return i=i&~n|65536,this._setExtents(i),!0}},l.prototype.$_clearHeight=function(t){t?this._setExtents(this._getExtents()&~n):this._setExtents(-65537&this._getExtents()),0==this.index&&ne.Utils.log("HEIGHT",this.height)},_dp(l,"heights",{get:function(){return this._heights},set:function(t){this._heights=t}}),l.prototype.getShadowRow=function(){return this.dataRow},l.prototype.getHeight=function(t){return this._heights[t]},l.prototype.setChecked=function(t,e){var i=this.provider;i&&i.checkItem(this,t,void 0,e)},l.prototype.setCheckable=function(t){var e=this.provider;e&&e.setCheckable(this,t)},l.prototype.getAncestor=function(t){if(t<this.level){for(var e=this._parent;e.level>t;)e=e._parent;return e}return this instanceof c?this:null},l.prototype.getVisibleAncestor=function(){var t=this._parent;do{if(t.visible)return t;t=t._parent}while(t)},l.prototype.getAncestors=function(){var t=null,e=this._parent;if(e)for(t=[];t.push(e),e=e._parent;);return t},l.prototype.isDescendantOf=function(t){if(t){for(var e=this._parent;e&&e!=t;)e=e._parent;return e===t}return!1},l.prototype.getData=function(t){var e=this.dataSource,i=this.getShadowRow();return e&&0<=i?e.getValue(i,t):void 0},l.prototype.setData=function(t,e){var i=this.dataSource;i&&i.setValue(this.dataRow,t,e)},l.prototype.getRowData=function(){var t=this.dataRow;if(0<=t){var e=this.dataSource;if(e)return e.getRow(t)}return null},l.prototype.getRowObject=function(){var t=this.dataRow;if(0<=t){var e=this.dataSource;if(e)return e.getRowObject(t)}return null},l.prototype.isChanged=function(t){var e=this.dataSource;return e?e.isDataChanged(this.dataRow,t):void 0},l.prototype.canEdit=function(){return!1},l.prototype._setIndex=function(t){this._index=t},l.prototype._setChecked=function(t){this.provider.setItemChecked(this,t)||this._setExtents(t?this._getExtents()|e.ITEM_EXT_CHECKED:this._getExtents()&~e.ITEM_EXT_CHECKED)},l.prototype._setCheckable=function(t){this._setExtents(t?-5&this._getExtents():4|this._getExtents())},l.$$_grid_item_id=0,l);function l(){this._id=l.$$_grid_item_id++,this._index=-1}e.GridItem=a;var h,d=(h=a,oe.__extends(u,h),_dp(u,"dataRowId",{get:function(){return this._dataRowId}}),u.prototype._getExtents=function(){return this._extents},u.prototype._setExtents=function(t){this._extents=t},_dp(u,"isData",{get:function(){return!0}}),_dp(u,"isDataRow",{get:function(){return!0}}),_dp(u,"dataRow",{get:function(){return this._dataRow}}),_dp(u,"dataId",{get:function(){return this.dataSource.getRowId(this._dataRow)}}),_dp(u,"isLeaf",{get:function(){return!0}}),_dp(u,"resizable",{get:function(){return!0}}),_dp(u,"displayLevel",{get:function(){return 0<=this._displayLevel?this._displayLevel:this.level}}),u.prototype.canEdit=function(){return!0},u.prototype.getShadowRow=function(){return this._dataRow},u.prototype.$_setDisplayLevel=function(t){this._displayLevel=t},u);function u(t){var e=h.call(this)||this;return e._displayLevel=-1,e._extents=0,e._dataRow=t,e}e.GridRow=d;var _,c=(_=a,oe.__extends(p,_),p.prototype.dispose=function(){this._children=null,_.prototype.dispose.call(this)},_dp(p,"expanded",{get:function(){return this._expanded}}),_dp(p,"collapsed",{get:function(){return!this.expanded}}),_dp(p,"count",{get:function(){return this._children.length}}),_dp(p,"children",{get:function(){return this._children.slice()}}),_dp(p,"allFooterCount",{get:function(){return 0}}),_dp(p,"first",{get:function(){return 0<this._children.length?this._children[0]:null}}),_dp(p,"last",{get:function(){var t=this._children.length;return 0<t?this._children[t-1]:null}}),_dp(p,"firstItem",{get:function(){if(0<this._children.length){var t=this._children[0];return t instanceof p?t.firstItem:t}return null}}),_dp(p,"firstDataItem",{get:function(){if(0<this._children.length)for(var t=0,e=this._children.length;t<e;t++){if(this._children[t]instanceof p)return this._children[t].firstDataItem;if(this._children[t]instanceof d)return this._children[t]}return null}}),_dp(p,"lastItem",{get:function(){return this.getLastItem(!1)}}),p.prototype.getLastItem=function(t){return null},_dp(p,"lastDataItem",{get:function(){var t=this._children.length;if(0<t)for(;0<t;t--){var e=this._children[t-1];if(e instanceof p)return e.lastDataItem;if(e instanceof d)return e}return null}}),_dp(p,"descendantCount",{get:function(){return this._descendantCount}}),_dp(p,"expandable",{get:function(){return!0}}),_dp(p,"collapsable",{get:function(){return!0}}),p.prototype.getItem=function(t){if(t<0||t>=this._children.length)throw new RangeError("index is invalid: "+t);return this._children[t]},p.prototype.getRows=function(){var t=[];return this.$_collectRows(this,t),t},p.prototype.getFooterIndex=function(t){return 0},p.prototype.itemOfRow=function(t){for(var e=this._children.length;e--;)if(this._children[e].dataRow==t)return this._children[e];return null},p.prototype.indexOf=function(t){for(var e=this._children.length-1;0<=e;e--)if(this._children[e]==t)return e;return-1},p.prototype.isDescendant=function(t){if(t&&t!==this){for(var e=t._parent;e&&e!==this;)e=e._parent;return e===this}return!1},p.prototype.getDescendants=function(s){if((!s||this._expanded)&&this._children&&0<this._children.length){var t=[];return function t(e,i){for(var o=e.count,n=0;n<o;n++){var r=e.getItem(n);i.push(r),r instanceof p&&(!s||r.expanded)&&t(r,i)}}(this,t),t}return null},p.prototype.clear=function(){this._summaries=null,this._children.length=0,this._descendantCount=0},p.prototype.insert=function(t,e){this._addChild(e,t)},p.prototype.add=function(t){this._addChild(t,-1)},p.prototype.addAll=function(t){this._addChildren(t)},p.prototype.remove=function(t){var e=this.indexOf(t);0<=e&&(this._children.splice(e,1),t instanceof a&&(t[s]=null))},p.prototype.setItem=function(t,e){if(t&&e&&t!==e){var i=this._removeChild(t);this._insertChild(i,e),e._index=t.index}},p.prototype.setExpanded=function(t,e,i){t==this._expanded&&!i||(t?this.provider.expand(this,e,i,0):this.provider.collapse(this,e,i))},p.prototype.getNumber=function(t){var e=this.$_getSummary(t);return e instanceof rt.FieldSummary?e.count:e?e.length:this._descendantCount},p.prototype.getDataCount=function(t){var e=this.$_getSummary(t);if(e instanceof rt.FieldSummary)return e.dataCount;if(e){var i=this.dataSource,o=e.length,n=0;if(0<o){for(var r=0;r<o;r++)null!=i.getValue(e[r],t)&&n++;return n}}return 0},p.prototype.getDataAvg=function(t){var e=this.$_getSummary(t);if(e instanceof rt.FieldSummary)return e.dataAvg;if(e){for(var i=this.dataSource,o=e.length,n=0,r=0,s=0;s<o;s++){var a=i.getValue(e[s],t);isNaN(a)||(n+=a,r++)}return 0<r&&!isNaN(n)?n/r:NaN}return NaN},p.prototype.getSum=function(t){var e=this.$_getSummary(t);if(e instanceof rt.FieldSummary)return e.sum;if(e){for(var i=this.dataSource,o=e.length,n=0,r=0;r<o;r++){var s=i.getValue(e[r],t);isNaN(s)||(n+=s)}return n}return NaN},p.prototype.getMax=function(t){var e=this.$_getSummary(t);if(e instanceof rt.FieldSummary)return e.max;if(e){var i=this.dataSource,o=e.length,n=void 0;if(1<o){n=NaN;for(var r=0;n=i.getValue(e[r++],t),isNaN(n=null==n?void 0:n)&&r<o;);for(;r<o;){var s=i.getValue(e[r++],t);!isNaN(s=null==s?void 0:s)&&n<s&&(n=s)}return n}if(1==o)return null==(n=i.getValue(e[0],t))?void 0:n}return NaN},p.prototype.getMin=function(t){var e=this.$_getSummary(t);if(e instanceof rt.FieldSummary)return e.min;if(e){var i=this.dataSource,o=e.length,n=void 0;if(1<o){n=NaN;for(var r=0;n=i.getValue(e[r++],t),isNaN(n=null==n?void 0:n)&&r<o;);for(;r<o;){var s=i.getValue(e[r++],t);!isNaN(s=null==s?void 0:s)&&s<n&&(n=s)}return n}if(1==o)return null==(n=i.getValue(e[0],t))?void 0:n}return NaN},p.prototype.getAvg=function(t){var e=this.$_getSummary(t);if(e instanceof rt.FieldSummary)return e.avg;if(e){var i=this.dataSource,o=e.length,n=void 0;if(1<o){for(var r=n=0;r<o;r++)n+=i.getValue(e[r],t);return n/o}if(1==o)return n=i.getValue(e[0],t)}return NaN},p.prototype.getVar=function(t,e){var i=this.$_getSummary(t);if(i instanceof rt.FieldSummary)return i.vars;if(i&&this.provider.summaryMode==lt.SummaryMode.STATISTICAL){var o=this.dataSource,n=i.length;if(1<n){for(var r=0,s=0;s<n;s++)r+=o.getValue(i[s],t);var a=r/n;for(s=r=0;s<n;s++)r+=Math.pow(o.getValue(i[s],t)-a,2);return r/=n-e}if(1==n)return 0}return NaN},p.prototype.getStdev=function(t,e){var i=this.$_getSummary(t);if(i instanceof rt.FieldSummary)return 0==e?Math.sqrt(i.varsp):Math.sqrt(i.vars);if(i&&this.provider.summaryMode==lt.SummaryMode.STATISTICAL){var o=this.dataSource,n=i.length;if(1<n){for(var r=0,s=0;s<n;s++)r+=o.getValue(i[s],t);var a=r/n;for(s=r=0;s<n;s++)r+=Math.pow(o.getValue(i[s],t)-a,2);return r=Math.sqrt(r/(n-e))}if(1==n)return 0}return NaN},_dp(p,"isLeaf",{get:function(){return!1}}),p.prototype._setExpanded=function(t){this._expanded=t},p.prototype._incDescendants=function(t){void 0===t&&(t=1),this._descendantCount+=t},p.prototype._insertChild=function(t,e){this._children.splice(t,0,e),e instanceof a&&(e[s]=this)},p.prototype._addChild=function(t,e){t&&this.indexOf(t)<0&&(e<0?this._children.push(t):this._children.splice(e,0,t),t[s]=this)},p.prototype._addChildren=function(t){var e;if(t&&0<(e=t.length))for(var i=0;i<e;i++){var o=t[i];o&&this.indexOf(o)<0&&(o[s]=this)._children.push(o)}},p.prototype._removeChild=function(t){var e=this.indexOf(t);return 0<=e&&(this._children.splice(e,1),t instanceof a&&(t[s]=null)),e},p.prototype._exchangeItems=function(t,e){if(t<0||t>=this._children.length)throw new RangeError("index1 is out of range: "+t);if(e<0||e>=this._children.length)throw new RangeError("index2 is out of range: "+e);if(t!==e){var i=this._children[t];this._children[t]=this._children[e],this._children[e]=i}},p.prototype._moveChild=function(t,e){var i=this._children.length;if(t<0||i<=t)throw new RangeError("index is out of range: "+t);var o=Math.min(Math.max(t+e,0),i-1),n=this._children[t];if(e<0)for(var r=t;o<r;r--)this._children[r]=this._children[r-1];else for(r=t;r<o;r++)this._children[r]=this._children[r+1];this._children[o]=n},p.prototype.$_collectRows=function(t,e){for(var i=t.count,o=0;o<i;o++){var n=t.getItem(o);n instanceof p?this.$_collectRows(n,e):n.isDataRow&&e.push(n.dataRow)}},p.prototype.$_getSummary=function(t){var e=this.dataSource;if(!(e instanceof C.DataProvider))return null;null==this._summaries&&(this._summaries={});var i=this._summaries?this._summaries[t]:null;return i||e.canSummarize(t)&&(i=this.$_summarize(t,e))&&(this._summaries[t]=i),i},p.prototype.$_summarize=function(t,e){var i=this.provider.summaryMode;if(i==lt.SummaryMode.NONE)return null;if(null==this._rows&&(this._rows=[],this.$_collectRows(this,this._rows)),3<this._rows.length&&e.canSummarize(t)){var o=new rt.FieldSummary(t);return e.summarizeRange(o,this._rows,i==lt.SummaryMode.STATISTICAL),o}return this._rows},p.prototype._saveExpanded=function(){this._setExtents(this.expanded?16|this._getExtents():-17&this._getExtents())},p.prototype._restoreExpanded=function(t){if(void 0===t&&(t=!1),this._setExpanded(0!=(16&this._getExtents())),t)for(var e=this.count-1;0<=e;e--){var i=this.getItem(e);i instanceof p&&i._restoreExpanded(!0)}},p);function p(){var t=_.call(this)||this;return t._children=[],t._expanded=!1,t._descendantCount=0,t._summaries=null,t._rows=null,t}e.GroupItem=c;var f,g=(f=c,oe.__extends(m,f),m.prototype.dispose=function(){this._allFooters=null,f.prototype.dispose.call(this)},_dp(m,"groupField",{get:function(){return this._groupField}}),m.prototype._getExtents=function(){return this._extents},m.prototype._setExtents=function(t){this._extents=t},_dp(m,"footer",{get:function(){return this._footer}}),_dp(m,"footerCount",{get:function(){return this._footers}}),_dp(m,"allFooterCount",{get:function(){return this._allFooters.length}}),m.prototype.getHiddenFooterCount=function(){for(var t=0,e=0;e<this.children.length;e++)this.children[e].hiddenFooter&&t++;return t},m.prototype.getFooter=function(t){return t=this.indexOf(this._footer)+t,this._children[t]},m.prototype.getFooterIndex=function(t){return t.$_footerIndex},m.prototype.isFooter=function(t){if(t===this._footer)return!0;if(1<this._footers)for(var e=this._children,i=e.length-1;0<=i;i--){if(e[i]===t)return!0;if(e[i]===this._footer)break}return!1},m.prototype._addChild=function(t,e){t instanceof v?(this._allFooters.push(t),t[s]=this,t.hiddenFooter||(f.prototype._addChild.call(this,t,e),this._footer=this._footer||t,this._footers++)):f.prototype._addChild.call(this,t,e)},m);function m(t){var e=f.call(this)||this;return e._footers=0,e._extents=0,e._allFooters=[],e._groupField=t,e}e.GroupItemImpl=g;var y,v=(y=a,oe.__extends(w,y),_dp(w,"expandable",{get:function(){return this._expandable},set:function(t){this._expandable=t}}),_dp(w,"footerIndex",{get:function(){return this.$_footerIndex}}),_dp(w,"hiddenFooter",{get:function(){return this._hiddenFooter},set:function(t){this._hiddenFooter=t}}),w.prototype._getExtents=function(){return this._extents},w.prototype._setExtents=function(t){this._extents=t},_dp(w,"isLeaf",{get:function(){return!0}}),_dp(w,"isData",{get:function(){return!0}}),_dp(w,"displayLevel",{get:function(){return this._expandable?this.level-1:this.level}}),w);function w(){var t=y.call(this)||this;return t._expandable=!1,t.$_footerIndex=0,t._hiddenFooter=!1,t._extents=0,t}e.GroupFooter=v});t(dt);dt.ITEM_EXT_CHECKED,dt.ItemState,dt.ItemState_isEditing,dt.ItemState_isInserting,dt.GridItem,dt.GridRow,dt.GroupItem,dt.GroupItemImpl,dt.GroupFooter;var st=e(function(t,e){Object.defineProperty(e,"__esModule",{value:!0});var i,o=(i=dt.GroupItemImpl,oe.__extends(n,i),_dp(n,"provider",{get:function(){return this._provider}}),_dp(n,"level",{get:function(){return 0}}),_dp(n,"expanded",{get:function(){return!1}}),_dp(n,"isLeaf",{get:function(){return!1}}),_dp(n,"dataSource",{get:function(){return this._provider.dataSource}}),_dp(n,"expandable",{get:function(){return!1}}),_dp(n,"collapsable",{get:function(){return!1}}),n);function n(t){var e=i.call(this,-1)||this;return e._provider=t,e}e.RootItem=o;var r,s=(r=$.EventAware,oe.__extends(a,r),a.prototype._doDispose=function(){return this._rootItem.dispose(),null},_dp(a,"hideDeleted",{get:function(){return this._hideDeleted},set:function(t){t!=this._hideDeleted&&(this._hideDeleted=t,this._hideDeletedChanged())}}),_dp(a,"summaryMode",{get:function(){return lt.SummaryMode.AGGREGATE},set:function(t){}}),_dp(a,"sortMode",{get:function(){return lt.SortMode.AUTO},set:function(t){}}),_dp(a,"fixedCount",{get:function(){return 0}}),_dp(a,"maxItemCount",{get:function(){return 0},set:function(t){}}),_dp(a,"movable",{get:function(){return!1}}),a.prototype.setFixed=function(t,e,i){},a.prototype.attachItem=function(t){t._parent=this._rootItem},a.prototype.getItemsByIndices=function(t){var e=[];if(t)for(var i=0,o=t.length;i<o;i++){var n=this.getItem(t[i]);n&&e.push(n)}return e},a.prototype.getIndexOfRow=function(t){var e=this.getItemOfRow(t);return e?e.index:-1},a.prototype.getIndicesOfRows=function(t){var e=[],i=t?t.length:0;if(i)for(var o=0;o<i;o++){var n=this.getItemOfRow(t[o]);e.push(n?n.index:-1)}return e},a.prototype.getItemsByRows=function(t,e){void 0===e&&(e=!1);for(var i=[],o=t?t.length:0,n=0;n<o;n++){var r=this.getItemOfRow(t[n],e);r&&i.push(r)}return i},a.prototype.exchange=function(t,e){},a.prototype.setCheckable=function(t,e){t&&e!=t.checkable&&(t._setCheckable(e),this._fireCheckableChanged(t))},a.prototype.checkItem=function(t,e,i,o){if(t){var n=t.checked;i?(this._clearChecked(),e&&this._setChecked(t,!0),e!=n&&o&&this._fireItemChecked(t),this._fireRefreshClient()):e!=n&&(this._setChecked(t,e),o?this._fireItemChecked(t):this._fireRefreshClient()),this._fireItemCheckChanged([t],e)}},a.prototype.checkItems=function(t,e,i){if(t&&0<t.length){for(var o=0,n=t.length;o<n;o++){var r=t[o];r instanceof dt.GridItem&&this._setChecked(r,e)}i?this._fireItemsChecked(t,e):this._fireRefreshClient()}this._fireItemCheckChanged(t,e)},a.prototype.checkAll=function(t,e,i,o,n){var r=this.itemCount;if(i)for(var s=0;s<r;s++){var a=this.getItem(s);a.checkable&&this._setChecked(a,t)}else for(s=0;s<r;s++)this._setChecked(this.getItem(s),t);o?this._fireItemAllChecked(t):this._fireRefreshClient(),this._fireItemCheckChanged(null,t)},a.prototype._setCheckItem=function(t,e){t._setChecked(e)},a.prototype._clearDisplayLevels=function(){},a.prototype.canUpdate=function(t,e){if(t){var i=this.dataSource;if(!i)return!1;var o=t.dataRow;if(!i.canUpdateField(o,e))return!1;var n=t.itemState,r=dt.ItemState_isInserting(n);return(0<=o||r)&&(r||i.canUpdateRow(o))}return!1},a.prototype.canAppend=function(){var t=this.dataSource;return t&&t.canAppendRow()},a.prototype.canInsert=function(t){if(t){var e=t.dataRow,i=this.dataSource;return i&&i.canInsertRow(e)}return!1},a.prototype.canDelete=function(t){if(t){var e=t.dataRow,i=this.dataSource;return 0<=e&&i&&i.canDeleteRow(e)}return!1},a.prototype.appendDummy=function(){},a.prototype.cancelDummy=function(){},a.prototype.findItem=function(t,e,i,o,n){return-1},a.prototype.findCell=function(t,e,i,o,n,r){return null},a.prototype.getSum=function(t){return NaN},a.prototype.getMax=function(t){return NaN},a.prototype.getMin=function(t){return NaN},a.prototype.getAvg=function(t){return NaN},a.prototype.getVar=function(t){return NaN},a.prototype.getVarp=function(t){return NaN},a.prototype.getStdev=function(t){return NaN},a.prototype.getStdevp=function(t){return NaN},a.prototype.getDataCount=function(t){return NaN},a.prototype.getDataAvg=function(t){return NaN},_dp(a,"isIndexing",{get:function(){return this._indexing}}),a.prototype.setRowHeight=function(t,e,i){t.$_setHeight(e,i)&&(isNaN(e)||(i?this._explicitHeighted=!0:this._rowHeighted=!0))},a.prototype.clearRowHeights=function(t){if(t||this._rowHeighted){for(var e=!1,i=this.itemCount-1;0<=i;i--){var o=this.getItem(i),n=o.height;isNaN(n)||(o.$_clearHeight(t),e=!(o.heights=null))}return this._rowHeighted=!1,t&&(this._explicitHeighted=!1),e}},a.prototype.isRowHeighted=function(t){return void 0===t&&(t=!0),this._rowHeighted||t&&this._explicitHeighted},a.prototype.setCheckFieldIndex=function(t){},a.prototype.getItemChecked=function(t,e){return e},a.prototype.setItemChecked=function(t,e){return!1},_dp(a,"rootItem",{get:function(){return this._rootItem}}),a.prototype._createRootItem=function(){return new o(this)},a.prototype._hideDeletedChanged=function(){},a.prototype.$_canFire=function(){return this._eventLock<=0},a.prototype._setChecked=function(t,e){t._setChecked(e)},a.prototype._clearChecked=function(){for(var t=0,e=this.itemCount;t<e;t++)this._setChecked(this.getItem(t),!1)},a.prototype._resetItemIndicies=function(t){if(this._indexing)for(var e=t,i=this.itemCount;e<i;e++)this.getItem(e)._index=e},a.prototype._setExpanded=function(t,e){t._setExpanded(e)},a.prototype._resetItemIndex=function(t){var e=this.getItem(t);e&&(e._index=t)},a.prototype._incDescendents=function(t,e){t._descendantCount+=e,t.parent&&this._incDescendents(t.parent,e)},a.prototype._copyExtents=function(t,e){t instanceof dt.GridItem&&e instanceof dt.GridItem&&e._setExtents(t._getExtents())},a.prototype._fireReset=function(){this._eventLock<=0&&this.fireEvent(a.RESET)},a.prototype._fireRefresh=function(){this._eventLock<=0&&this.fireEvent(a.REFRESH)},a.prototype._fireRefreshClient=function(){this._eventLock<=0&&this.fireEvent(a.REFRESH_CLIENT)},a.prototype._fireItemInserted=function(t){this._eventLock<=0&&this.fireEvent(a.ITEM_INSERTED,t)},a.prototype._fireItemDeleted=function(t){this._eventLock<=0&&this.fireEvent(a.ITEM_DELETED,t)},a.prototype._fireItemUpdated=function(t){this._eventLock<=0&&this.fireEvent(a.ITEM_UPDATED,t)},a.prototype._fireCheckableChanged=function(t){this._eventLock<=0&&this.fireEvent(a.CHECKABLE_CHANGED,t)},a.prototype._fireItemChecked=function(t){this._eventLock<=0&&this.fireEvent(a.ITEM_CHECKED,t)},a.prototype._fireItemsChecked=function(t,e){this._eventLock<=0&&this.fireEvent(a.ITEMS_CHECKED,t,e)},a.prototype._fireItemAllChecked=function(t){this._eventLock<=0&&this.fireEvent(a.ITEM_ALL_CHECKED,t)},a.prototype._fireItemCheckChanged=function(t,e){this.fireEvent(a.ITEMCHECK_CHANGED,t,e)},a.prototype._fireRowStateChanged=function(t){this._eventLock<=0&&this.fireEvent(a.ROW_STATE_CHANGED,t)},a.prototype._fireRowStatesChanged=function(t){this._eventLock<=0&&this.fireEvent(a.ROW_STATES_CHANGED,t)},a.prototype._fireRowStatesCleared=function(){this._eventLock<=0&&this.fireEvent(a.ROW_STATES_CLEARED)},a.prototype._fireSort=function(t,e,i){this._eventLock<=0&&this.fireEvent(a.SORT,t,e,i)},a.prototype._fireSorted=function(){this._eventLock<=0&&this.fireEvent(a.SORTED)},a.prototype._fireFilterAdded=function(t,e){this._eventLock<=0&&this.fireEvent(a.FILTER_ADDED,t,e)},a.prototype._fireFilterRemoved=function(t,e){this._eventLock<=0&&this.fireEvent(a.FILTER_REMOVED,t,e)},a.prototype._fireFilterCleared=function(t){this._eventLock<=0&&this.fireEvent(a.FILTER_CLEARED,t)},a.prototype._fireFilterAllCleared=function(){this._eventLock<=0&&this.fireEvent(a.FILTER_ALL_CLEARED)},a.prototype._fireFiltered=function(t,e){this._eventLock<=0&&this.fireEvent(a.FILTERED,t,e)},a.prototype._fireCommandStackChanged=function(t,e){this._eventLock<=0&&this.fireEvent(a.COMMAND_STACK_CHANGED,t,e)},a.RESET="onItemProviderReset",a.REFRESH="onItemProviderRefresh",a.REFRESH_CLIENT="onItemProviderRefreshClient",a.ITEM_INSERTED="onItemProviderItemInserted",a.ITEM_DELETED="onItemProviderItemDeleted",a.ITEM_UPDATED="onItemProviderItemUpdated",a.CHECKABLE_CHANGED="onItemProviderCheckableChanged",a.ITEM_CHECKED="onItemProviderItemChecked",a.ITEMS_CHECKED="onItemProviderItemsChecked",a.ITEM_ALL_CHECKED="onItemProviderItemAllChecked",a.ROW_STATE_CHANGED="onItemProviderRowStateChanged",a.ROW_STATES_CHANGED="onItemProviderRowStatesChanged",a.ROW_STATES_CLEARED="onItemProviderRowStatesCleared",a.SORT="onItemProviderSort",a.SORTED="onItemProviderSorted",a.FILTER_ADDED="onItemProviderFilterAdded",a.FILTER_REMOVED="onItemProviderFilterRemoved",a.FILTER_CLEARED="onItemProviderFilterCleared",a.FILTER_ALL_CLEARED="onItemProviderFilterAllCleared",a.FILTERED="onItemProviderFiltered",a.ITEMCHECK_CHANGED="onItemProviderItemCheckChanged",a.COMMAND_STACK_CHANGED="onItemProviderCommandStackChanged",a);function a(t){var e=r.call(this)||this;return e._hideDeleted=!1,e._eventLock=0,e._rowHeighted=!1,e._explicitHeighted=!1,e._indexing=t,e._rootItem=e._createRootItem(),e}e.ItemProvider=s;var l,h=(l=s,oe.__extends(d,l),d.prototype._doDispose=function(){l.prototype._doDispose.call(this)},_dp(d,"source",{get:function(){return this._source},set:function(t){t!=this._source&&(this._source&&this._source.removeListener(this),this._clearItems(),this._source=t,this._source&&(this._populateItems(),this._source.addListener(this)))}}),_dp(d,"dataSource",{get:function(){return this._source&&this._source.dataSource},set:function(t){this._source&&(this._source.dataSource=t)}}),_dp(d,"rowCount",{get:function(){return this._source?this._source.rowCount:0}}),_dp(d,"fixedCount",{get:function(){return this._source?this._source.fixedCount:0}}),_dp(d,"maxItemCount",{get:function(){return this._source?this._source.maxItemCount:0},set:function(t){this._source&&(this._source.maxItemCount=t)}}),_dp(d,"sorted",{get:function(){return this._source&&this._source.sorted}}),d.prototype.setFixed=function(t,e,i){this._source&&this._source.setFixed(t,e,i)},d.prototype.getIndexOfRow=function(t){return this._source?this._source.getIndexOfRow(t):-1},d.prototype.getItemOfRow=function(t){return this._source?this._source.getItemOfRow(t):null},d.prototype._refreshItems=function(){this._source&&this._source._refreshItems()},d.prototype._clearDisplayLevels=function(){this._source&&this._source._clearDisplayLevels()},d.prototype._initialize=function(){},d.prototype._clearItems=function(){},d.prototype._populateItems=function(){this._resetItemIndicies(0)},d.prototype.onItemProviderReset=function(t){this._populateItems(),this._fireReset()},d.prototype.onItemProviderRefresh=function(t){this._populateItems(),this._fireRefresh()},d.prototype.onItemProviderRefreshClient=function(t){this._fireRefreshClient()},d.prototype.onItemProviderItemInserted=function(t,e){this._resetItemIndicies(0),this._fireItemInserted(e)},d.prototype.onItemProviderItemDeleted=function(t,e){this._resetItemIndicies(0),this._fireItemDeleted(e)},d.prototype.onItemProviderItemUpdated=function(t,e){this._resetItemIndicies(0),this._fireItemUpdated(e)},d.prototype.onItemProviderCheckableChanged=function(t,e){this._fireCheckableChanged(e)},d.prototype.onItemProviderItemChecked=function(t,e){this._fireItemChecked(e)},d.prototype.onItemProviderItemsChecked=function(t,e,i){this._fireItemsChecked(e,i)},d.prototype.onItemProviderItemAllChecked=function(t,e){this._fireItemAllChecked(e)},d.prototype.onItemProviderItemCheckChanged=function(t,e,i){this._fireItemCheckChanged(e,i)},d.prototype.onItemProviderRowStateChanged=function(t,e){this._fireRowStateChanged(e)},d.prototype.onItemProviderRowStatesChanged=function(t,e){this._fireRowStatesChanged(e)},d.prototype.onItemProviderRowStatesCleared=function(t){this._fireRowStatesCleared()},d.prototype.onItemProviderFilterAdded=function(t,e,i){},d.prototype.onItemProviderFilterRemoved=function(t,e,i){},d.prototype.onItemProviderFilterCleared=function(t,e){},d.prototype.onItemProviderFilterAllCleared=function(t){},d.prototype.onItemProviderFiltered=function(t,e,i){},d.prototype.onItemProviderSort=function(t,e,i){},d.prototype.onItemProviderSorted=function(t){},d.prototype.onItemProviderCommandStackChanged=function(t,e,i){this._fireCommandStackChanged(e,i)},d);function d(t,e){var i=l.call(this,e)||this;return i._initialize(),i.source=t,i}e.ProxyItemProvider=h});t(st);st.RootItem,st.ItemProvider,st.ProxyItemProvider;var at=e(function(t,e){Object.defineProperty(e,"__esModule",{value:!0});var s,i=(s=dt.GridRow,oe.__extends(o,s),_dp(o,"values",{get:function(){},set:function(t){}}),o.prototype.beginEdit=function(t,e){this.$_clearHeight(!0)},o.prototype.setValue=function(t,e){},_dp(o,"resizable",{get:function(){return!1}}),_dp(o,"itemState",{get:function(){return this._state}}),_dp(o,"editable",{get:function(){return!0}}),o.prototype.getData=function(t){return null},o.prototype.setData=function(t,e){},o.prototype.getRowData=function(){return null},o.prototype.getRowObject=function(){return null},o.prototype._clearDisplayLevels=function(){},o);function o(t,e,i,o,n){var r=s.call(this,o)||this;return r._started=!1,r._checkDiff=!1,r._strictDiff=!1,r._target=e,t.attachItem(r),r._setIndex(i),r._state=n,r.$_setDisplayLevel(e?e.displayLevel:0),r}e.DummyEditItem=i;var a,f=(a=dt.GridRow,oe.__extends(n,a),_dp(n,"values",{get:function(){return this._values.concat()},set:function(t){var e=this.provider,i=this.dataSource,o=i.fieldCount;if(t instanceof Array){o=Math.min(o,t.length);for(var n=0;n<o;n++){var r=i.getField(n),s=this._values[n],a=r.readValue(t[n]);this._values[n]=a,this._started&&!r.equalValues(s,a)&&e._editItemCellUpdated(this,n,s,a)}}else if(t)for(n=0;n<o;n++){var l=i.getOrgFieldName(n);t.hasOwnProperty(l)&&(r=i.getField(n),s=this._values[n],a=r.readValue(t[l]),this._values[n]=a,this._started&&!r.equalValues(s,a)&&e._editItemCellUpdated(this,n,s,a))}}}),_dp(n,"invalidFields",{get:function(){return this._invalidFields}}),n.prototype.beginEdit=function(t,e){dt.ItemState_isInserting(this._state)&&this.$_clearHeight(!0),this._started=!0,this._checkDiff=t,this._strictDiff=e},n.prototype.setValue=function(t,e){var i=this.dataSource;if(t<0&&t>=i.fieldCount)throw new g.DataSourceError("field index is out of bounds: "+t);var o=i.getField(t),n=this._values[t];e=o.readValue(e),this._values[t]=e,this._started&&!o.equalValues(n,e)&&this.provider._editItemCellUpdated(this,t,n,e),this.$_clearHeight(!1)},_dp(n,"resizable",{get:function(){return!1}}),_dp(n,"itemState",{get:function(){return this._state}}),_dp(n,"editable",{get:function(){return!0}}),_dp(n,"level",{get:function(){return this._target?this._target.level:1}}),n.prototype.getData=function(t){if(t<0&&t>=this.dataSource.fieldCount)throw new RangeError("field index is out of bounds: "+t);return this._values[t]},n.prototype.setData=function(t,e){var i=this.dataSource;if(t<0&&t>=i.fieldCount)throw new RangeError("field index is out of bounds: "+t);var o=i.getField(t),n=this._values[t],r=!this._checkDiff;e=o.readValue(e),(r=r||(this._strictDiff?!o.equalValues(n,e):!o.sameValues(n,e)))&&(this._values[t]=e,this.provider._editItemCellUpdated(this,t,n,e),this.provider._editItemCellEdited(this,t)),this.$_clearHeight(!1)},n.prototype.getRowData=function(){return this._values.concat()},n.prototype.getRowObject=function(){var t=this.dataSource;if(t){for(var e={},i=0,o=t.fieldCount;i<o;i++)e[t.getOrgFieldName(i)]=this._values[i];return e}return null},n.prototype._setChecked=function(t){this.provider.setItemChecked(this,t)||this._setExtents(t?this._getExtents()|dt.ITEM_EXT_CHECKED:this._getExtents()&~dt.ITEM_EXT_CHECKED)},n.prototype._clearDisplayLevels=function(){},n);function n(t,e,i,o,n){var r=a.call(this,o)||this;return r._values=[],r._started=!1,r._checkDiff=!1,r._strictDiff=!1,r._invalidFields=[],r._target=e,t.attachItem(r),r._setIndex(i),r._state=n,r.$_setDisplayLevel(e?e.displayLevel:0),r._invalidFields=[],r}e.EditItem=f;var r,l=(r=st.ProxyItemProvider,oe.__extends(h,r),h.prototype._doDispose=function(){this._saveDs=null,r.prototype._doDispose.call(this)},h.prototype.isDataEditing=function(){return this.isEditing()},h.prototype.cancelDataEditing=function(){this.isEditing()&&this.fireCancelRequest()},h.prototype.commitDataEditing=function(){this.isEditing()&&this.fireCommitRequest()},h.prototype.editCommandStackChanged=function(t,e,i){var o=this._saveDs;o?this._fireCommandStackChanged(e||o.canUndo,i||o.canRedo):this._fireCommandStackChanged(e,i)},_dp(h,"isCheckDiff",{get:function(){return this._checkDiff},set:function(t){this._checkDiff=t}}),_dp(h,"isCheckCellDiff",{get:function(){return this._checkCellDiff},set:function(t){this._checkCellDiff=t}}),_dp(h,"isStrictDiff",{get:function(){return this._strictDiff},set:function(t){this._strictDiff=t}}),_dp(h,"editingItem",{get:function(){return this._commiting||this.isEditing()?this._editingItem:null}}),_dp(h,"isUpdating",{get:function(){return this._editingState==dt.ItemState.UPDATING}}),_dp(h,"isInserting",{get:function(){return this._editingState==dt.ItemState.INSERTING}}),_dp(h,"isAppending",{get:function(){return this._editingState==dt.ItemState.APPENDING}}),_dp(h,"undoable",{get:function(){return this._undoable&&this._saveDs&&this._saveDs.undoable},set:function(t){t!=this._undoable&&(this._undoable=t,this._commands.flush(),this._saveDs.undoable=t)}}),_dp(h,"cancelWhenLastUndo",{get:function(){return this._cancelWhenLastUndo},set:function(t){this._cancelWhenLastUndo=t}}),_dp(h,"canUndo",{get:function(){return this._commands.canUndo||this._saveDs&&this._saveDs.canUndo}}),_dp(h,"canRedo",{get:function(){return this._commands.canRedo||this._saveDs&&this._saveDs.canRedo}}),_dp(h,"undoing",{get:function(){return this._commands.undoing}}),_dp(h,"redoing",{get:function(){return this._commands.redoing}}),h.prototype.isEditing=function(t){return dt.ItemState_isEditing(this._editingState)&&(!t||t===this._editingItem)},h.prototype.isEdited=function(t){return dt.ItemState_isEditing(this._editingState)&&(!t||t===this._editingItem)&&this._modified},h.prototype.setDiffs=function(t,e,i){this._checkDiff=t,this._checkCellDiff=e,this._strictDiff=i},h.prototype.edit=function(t){if(this.isEditing())return!0;if(t)try{return this._beginUpdate(t),!0}catch(t){throw this.cancel(),t}return!1},h.prototype.editData=function(t,e,i){var o;if(t&&(o=this.dataSource)&&0<=e&&e<o.fieldCount){if(!this.isEditing())try{return this._beginUpdate(t),!0}catch(t){throw this.cancel(),t}this._editingItem.setData(e,i)}return!1},h.prototype.appendDummy=function(){if(!this.isEditing())try{this._beginAppendDummy()}catch(t){this.cancelDummy()}},h.prototype.append=function(t){if(!this.isEditing())try{return this._beginAppend(t),!0}catch(t){throw this.cancel(),t}return!1},h.prototype.insert=function(t,e,i,o){if(!this.isEditing())try{return this._beginInsert(t,e,i,o),!0}catch(t){throw this.cancel(),t}return!1},h.prototype.cancelDummy=function(){this._dummyEditItem&&this._cancelDummyEdit()},h.prototype.cancel=function(){this.isEditing()&&this._cancelEdit()},h.prototype.commit=function(){if(this.isEditing()){this._commiting=!0;try{var t=this.dataSource;if(t){if(this._editingState==dt.ItemState.UPDATING&&this.isCheckDiff){for(var e=this._editingItem.values,i=e.length,o=this.isStrictDiff,n=!1,r=0;r<i;r++)if(o){if(!t.getField(r).equalValues(this._orgItem.getData(r),e[r])){n=!0;break}}else if(!t.getField(r).sameValues(this._orgItem.getData(r),e[r])){n=!0;break}if(!n)return this._cancelEdit(),!0}return this._commitEdit()}}finally{this._commiting=!1}}return!0},h.prototype.execute=function(t){t&&(this.undoable?this._commands.execute(t):t.execute())},h.prototype.undo=function(){this.isEditing()?(this._commands.undo(),!this._commands.canUndo&&this._cancelWhenLastUndo&&this.cancel()):this._saveDs&&this._saveDs.undo()},h.prototype.redo=function(){this.isEditing()?this._commands.redo():this._saveDs&&this._saveDs.redo()},h.prototype.clearCommandStack=function(t){void 0===t&&(t=!0),this._commands.flush(),t&&this._saveDs&&this._saveDs.clearCommandStack()},h.prototype.revert=function(t){},h.prototype.revertAll=function(t){},h.prototype._checkEditing=function(){if(!this.isEditing())throw new Error("itemProvider is not editing")},h.prototype._checkNotEditing=function(){if(this.isEditing())throw new Error("itemProvider is already editing")},h.prototype._beginUpdate=function(t){if(!t)throw new Error("item is null");this._checkNotEditing(),this._modified=!1,this._editingItem=this._doBeginUpdate(t),this._editingItem.beginEdit(this.isCheckCellDiff,this.isStrictDiff),this._editingItem&&(this._orgItem=t,this._editingState=dt.ItemState.UPDATING,this._commands.flush(),this.fireUpdateStarted(this._editingItem))},h.prototype._doBeginUpdate=function(t){return null},h.prototype._beginAppendDummy=function(){this._dummyEditItem=this._doBeginAppendDummy()},h.prototype._doBeginAppendDummy=function(){return null},h.prototype._beginAppend=function(t){this._checkNotEditing(),this._modified=!1,this._editingItem=this._doBeginAppend(t),this._editingItem.beginEdit(this.isCheckCellDiff,this.isStrictDiff),this._editingItem&&(this._editingState=dt.ItemState.APPENDING,this._commands.flush(),this.fireAppendStarted(this._editingItem))},h.prototype._doBeginAppend=function(t){return null},h.prototype._beginInsert=function(t,e,i,o){void 0===i&&(i=!1),void 0===o&&(o=!1),this._checkNotEditing(),this._modified=!1,this._editingItem=this._doBeginInsert(t,e,i,o),this._editingItem.beginEdit(this.isCheckCellDiff,this.isStrictDiff),this._editingItem&&(this._editingState=dt.ItemState.INSERTING,this._resetItemIndicies(0),this._commands.flush(),this.fireInsertStarted(this._editingItem))},h.prototype._doBeginInsert=function(t,e,i,o){return null},h.prototype._updateEditingRow=function(t){return!1},h.prototype._insertEditingRow=function(t){return!1},h.prototype._cancelDummyEdit=function(){this._dummyEditItem=null,this._doCancelDummyEdit()},h.prototype._cancelEdit=function(){this._checkEditing();var e=this._editingState;try{this._editingState=dt.ItemState.NORMAL,this._doCancelEdit(e,this._orgItem)}catch(t){throw this._editingState=e,t}this._modified=!1,this._commands.flush(),this.fireCanceled()},h.prototype._doCancelDummyEdit=function(){},h.prototype._doCancelEdit=function(t,e){t==dt.ItemState.INSERTING&&this._resetItemIndicies(0)},h.prototype._commitEdit=function(){if(this._checkEditing(),!this.dataSource)throw new Error("data provier is null");try{this.fireItemCommitting(this._editingItem)}catch(t){alert(t.message)}var e=this._editingState,t=!1;if(this.isUpdating)try{this._editingState=dt.ItemState.NORMAL,t=this._doCompleteUpdate(this._orgItem)}catch(t){throw this._editingState=e,t}else try{this._editingState=dt.ItemState.NORMAL,t=this._doCompleteInsert(e==dt.ItemState.APPENDING)}catch(t){throw this._editingState=e,t}return t?(this._modified=!1,this._doCommitEdit(e,this._orgItem),this._commands.flush(),this.fireCommitted(this._editingItem)):this._editingState=e,t},h.prototype._doCommitEdit=function(t,e){return!1},h.prototype._editItemCellEdited=function(t,e){t&&this.isEditing(t)&&(this._modified=!0,this.fireItemCellEdited(t,e))},h.prototype._editItemCellUpdated=function(t,e,i,o){this.isEditing(t)&&(this._modified=!0,this.fireItemCellUpdated(t,e,i,o))},h.prototype.$_editingItem=function(){return this._editingItem},h.prototype.$_dummyItem=function(){return this._dummyEditItem},h.prototype.fireUpdateStarted=function(t){this.$_canFire()&&this.fireEvent(h.UPDATE_STARTED,t)},h.prototype.fireAppendStarted=function(t){this.$_canFire()&&this.fireEvent(h.APPEND_STARTED,t)},h.prototype.fireInsertStarted=function(t){this.$_canFire()&&this.fireEvent(h.INSERT_STARTED,t)},h.prototype.fireItemCellEdited=function(t,e){this.$_canFire()&&this.fireEvent(h.CELL_EDITED,t,e)},h.prototype.fireItemCellUpdated=function(t,e,i,o){this.$_canFire()&&this.fireEvent(h.CELL_UPDATED,t,e,i,o)},h.prototype.fireItemCommitting=function(t){this.$_canFire()&&this.fireEvent(h.COMMITTING,t)},h.prototype.fireCommitted=function(t){this.$_canFire()&&this.fireEvent(h.COMMITTED,t)},h.prototype.fireCanceled=function(){this.$_canFire()&&this.fireEvent(h.CANCELED)},h.prototype.fireCommitRequest=function(){this.$_canFire()&&this.fireEvent(h.COMMIT_REQUEST)},h.prototype.fireCancelRequest=function(){this.$_canFire()&&this.fireEvent(h.CANCEL_REQUEST)},h.prototype.onItemProviderReset=function(t){r.prototype.onItemProviderReset.call(this,t);var e=this.dataSource;e!=this._saveDs&&(this._saveDs&&this._saveDs.unregisterClient(this),this._saveDs=e,this._saveDs&&this._saveDs.registerClient(this))},h.prototype.onItemProviderRefresh=function(t){r.prototype.onItemProviderRefresh.call(this,t)},h.prototype.onItemProviderRefreshClient=function(t){r.prototype.onItemProviderRefreshClient.call(this,t)},h.prototype.onItemProviderItemInserted=function(t,e){r.prototype.onItemProviderItemInserted.call(this,t,e)},h.prototype.onItemProviderItemDeleted=function(t,e){r.prototype.onItemProviderItemDeleted.call(this,t,e)},h.prototype.onItemProviderItemUpdated=function(t,e){r.prototype.onItemProviderItemUpdated.call(this,t,e)},h.prototype.onItemProviderCommandStackChanged=function(t,e,i){var o=this._commands;this._fireCommandStackChanged(e||o.canUndo,i||o.canRedo)},h.UPDATE_STARTED="onItemEditUpdateStarted",h.APPEND_STARTED="onItemEditAppendStarted",h.INSERT_STARTED="onItemEditInsertStarted",h.CELL_EDITED="onItemEditCellEdited",h.CELL_UPDATED="onItemEditCellUpdated",h.COMMITTING="onItemEditCommitting",h.COMMITTED="onItemEditCommitted",h.CANCELED="onItemEditCanceled",h.COMMIT_REQUEST="onItemEditCommitRequest",h.CANCEL_REQUEST="onItemEditCancelRequest",h);function h(t,e){var i=r.call(this,t,e)||this;return i._checkDiff=!1,i._checkCellDiff=!1,i._strictDiff=!1,i._undoable=!1,i._cancelWhenLastUndo=!1,i._orgItem=null,i._editingItem=null,i._dummyEditItem=null,i._editingState=dt.ItemState.NORMAL,i._insertMode=0,i._modified=!1,i._commiting=!1,i._saveDs=null,i._commands=new v.EditCommandStack(i),t&&(i._saveDs=t.dataSource)&&i._saveDs.registerClient(i),i}e.EditableItemProvider=l;var d,u=(d=l,oe.__extends(_,d),_.prototype._doDispose=function(){d.prototype._doDispose.call(this)},_dp(_,"itemCount",{get:function(){var t=this.source.itemCount;return t+=this.isInserting||this.isAppending?1:0,t+=this.$_dummyItem()?1:0}}),_.prototype.getItem=function(t){var e,i=this.source,o=this.$_editingItem(),n=this.$_dummyItem();return this.isEditing()&&o.index==t?o:(this.isInserting?e=t>o.index?i.getItem(t-1):i.getItem(t):t<i.itemCount&&(e=i.getItem(t)),e||(n&&t==this.itemCount-1?n:null))},_.prototype.getItems=function(t,e){return this.source.getItems(t,e)},_.prototype._doBeginUpdate=function(t){return this._createEditItem(t,dt.ItemState.UPDATING,null,!1,!1)},_.prototype._doBeginAppendDummy=function(){return this.$_dummyItem()||this._createDummyEditItem()},_.prototype._doBeginAppend=function(t){return this._createEditItem(null,dt.ItemState.APPENDING,t,!1,!1)},_.prototype._doBeginInsert=function(t,e,i,o){return this._createEditItem(t,dt.ItemState.INSERTING,e,i,o)},_.prototype._doCompleteUpdate=function(t){var e=this.dataSource;if(e instanceof C.DataProvider){var i=this.$_editingItem();return this._copyExtents(i,t),e.updateRow(i.dataRow,i.values,!1)}return!1},_.prototype._doCompleteInsert=function(t){var e=this.dataSource,i=!1;if(e){var o=this.$_editingItem(),n=t?e.rowCount:Math.max(0,this._insertRow),r=o.values;if(i=e.insertRow(n,r,o._index2)){var s=this.getItemOfRow(n);this._copyExtents(o,s)}}return i},_.prototype.remove=function(t){var e=this.dataSource;if(t&&!this.isEditing(t)&&e){var i=t.dataRow;0<=i&&e.removeRow(i)}},_.prototype.removeAll=function(t){if(t&&0!=t.length){var e=this.dataSource;if(e){var i=t.length;if(1<i){for(var o=[],n=0;n<i;n++)0<=(r=this.getItem(t[n]).dataRow)&&o.push(r);1<o.length?e.removeRows(o):1==o.length&&e.removeRow(o[0])}else if(1==i){var r;0<=(r=this.getItem(t[0]).dataRow)&&e.removeRow(r)}}}},_.prototype.revert=function(t){if(t instanceof dt.GridItem||(t=this.getItem(t)),t){var e=this.dataSource;if(e){var i=t.dataRow,o=e.getRowState(i);o==I.RowState.DELETED?e.setRowState(i,I.RowState.NONE,!1):o==I.RowState.CREATE_AND_DELETED&&e.setRowState(i,I.RowState.CREATED,!1)}}},_.prototype.revertAll=function(t){if(t&&0!=t.length){var e=this.dataSource;if(e)for(var i=t.length;i--;){var o=this.getItem(t[i]);if(o){var n=o.dataRow,r=e.getRowState(n);r==I.RowState.DELETED?e.setRowState(n,I.RowState.NONE,!1):r==I.RowState.CREATE_AND_DELETED&&e.setRowState(n,I.RowState.CREATED,!1)}}}},_.prototype.getRemovableRows=function(t){if(!t||0==t.length)return null;for(var e=[],i=0,o=t.length;i<o;i++){var n=this.getItem(t[i]).dataRow;0<=n&&e.push(n)}return e},_.prototype.removeRows=function(t){t&&(1<t.length?this.dataSource.removeRows(t):this.dataSource.removeRow(t[0]))},_.prototype._createDummyEditItem=function(){return new i(this,null,this.itemCount,-1,dt.ItemState.DUMMY)},_.prototype._createEditItem=function(t,e,i,o,n){var r=this.dataSource;if(!r)return null;var s=null,a=r.fieldCount;switch(e){case dt.ItemState.UPDATING:s=new f(this,t,t.index,t.dataRow,e);for(var l=0;l<a;l++)s.setValue(l,t.getData(l));this._copyExtents(t,s);break;case dt.ItemState.INSERTING:case dt.ItemState.APPENDING:var h=this._rs,d=e==dt.ItemState.INSERTING&&t?o?t.index+1:t.index:this.itemCount;if(s=new f(this,t,d,-1,e),e==dt.ItemState.INSERTING){var u=t.dataRow,_=t;if(u<=-1){for(var c=this.source._visibleItems;(_=c.getNext(_))&&!(_ instanceof dt.GridRow););this._insertRow=_?_.dataRow:r.rowCount}else this._insertRow=o?Math.min(r.rowCount,u+1):u;if(t instanceof dt.GridRow&&o&&h){var p=h._pubItems.indexOf(_);0<=p++&&p<=h._pubItems.length&&(s._index2=p)}}if(i)for(l=0;l<a;l++)i.length>l&&s.setValue(l,i[l])}return s},_);function _(t,e){var i=d.call(this,t,e)||this;return i._insertRow=-1,i}e.EditableItemProviderImpl=u});t(at);at.DummyEditItem,at.EditItem,at.EditableItemProvider,at.EditableItemProviderImpl;var ut=e(function(t,e){Object.defineProperty(e,"__esModule",{value:!0});var o,i=(o=Error,oe.__extends(n,o),n);function n(t,e){var i=o.call(this,t)||this;return i.message=t,i.tokenPos=e,i}e.ExpressionStatementError=i;var d=(r.prototype.evaluate=function(t){return this.literal},r);function r(t){this.literal=t}var u=(s.prototype.evaluate=function(t){return this.idKey<0&&(this.idKey=t.isIdentifier(this.ident)),t.evaluateIdentifier(this.idKey)},s);function s(t,e){void 0===e&&(e=-1),this.ident=t,this.idKey=e}var _=(a.prototype.evaluate=function(t){var e=this.ident,i=e.indexOf("["),o=e.indexOf("]");if(i<o){var n=e.substr(0,i).trim(),r=e.substring(i+1,o).replace(/'|"/g,"").trim();return this.idKey<0&&(this.idKey=t.isIdentifier(n)),t.evaluateIndexerS(this.idKey,r,this.capital)}},a);function a(t,e,i){void 0===e&&(e=-1),void 0===i&&(i=!1),this.ident=t,this.idKey=e,this.capital=i}var l=(_dp(h,"source",{get:function(){return this._source},set:function(t){t!=this._source&&(this._source=t,this._parse(t))}}),h.prototype.evaluate=function(t){try{for(var e=this._tokens,i="",o=0,n=e.length;o<n;o++)i+=e[o].evaluate(t)||"";return i}catch(t){if(!this._silentError)throw new t}return null},h.prototype._parse=function(t){if(this._tokens=[],t)for(var e,i=t.length,o=0;o<i;){var n=t.indexOf("${",o);if(0<=n){var r=t.indexOf("}",n+2);if(0<=r){if(o<n){var s=t.substring(o,n);e=new d(s),this._tokens.push(e)}if(h=t.substring(n+2,r).trim()){var a,l=void 0;e=new((a=h.indexOf("["))&&(l=h.indexOf("]"))&&a<l?_:u)(h),this._tokens.push(e)}o=r+1}else n=-1}if(n<0){var h=t.substr(o,i);e=new d(h),this._tokens.push(e);break}}},h);function h(t,e){void 0===e&&(e=!1),this._silentError=!1,this._tokens=[],this._source=t,this._silentError=e,t&&this._parse(t)}e.ExpressionStatement=l});t(ut);ut.ExpressionStatementError,ut.ExpressionStatement;var pt=e(function(t,e){var o,i;Object.defineProperty(e,"__esModule",{value:!0}),(i=o=e.ActiveState||(e.ActiveState={})).ACTIVE="active",i.UNACTIVE="unactive",i.INDETERMINATE="indeterminate";var n,a=(n=$.EventAware,oe.__extends(r,n),r.prototype._doDispose=function(){this._criteria=null,this._category=null,n.prototype._doDispose.call(this)},_dp(r,"name",{get:function(){return this._name},set:function(t){this._name=t}}),_dp(r,"criteria",{get:function(){return this._criteria},set:function(t){t!=this._criteria&&(this._criteria=t,this.criteriaChanged())}}),_dp(r,"callback",{get:function(){return this._callback},set:function(t){this._callback=t,this.callbackChanged()}}),_dp(r,"text",{get:function(){return this._text},set:function(t){this._text=t,this.changed()}}),_dp(r,"description",{get:function(){return this._description},set:function(t){this._description=t}}),_dp(r,"active",{get:function(){return this._active},set:function(t){t!=this._active&&(this._active=t,this.changed())}}),_dp(r,"visible",{get:function(){return this._visible},set:function(t){this._visible=t,this.changed()}}),_dp(r,"tag",{get:function(){return this._tag},set:function(t){this._tag=t}}),_dp(r,"category",{get:function(){return this._category},set:function(t){this._category=t}}),_dp(r,"level",{get:function(){return this._level},set:function(t){this._level=t}}),r.prototype.toString=function(){return this._text||this._name},r.prototype.changed=function(){this.fireEvent(r.CHANGED)},r.prototype.criteriaChanged=function(){},r.prototype.callbackChanged=function(){},r.CHANGED="onColumnFilterChanged",r);function r(t){var e=n.call(this)||this;return e._active=!1,e._visible=!0,e._level=0,e._category=null,e.criteria=t,e}e.ColumnFilter=a;var s,l=(s=a,oe.__extends(h,s),_dp(h,"active",{get:function(){for(var t=this._childs.length;t--;)if(!this._childs[t].active)return!1;return!0},set:function(t){for(var e=this._childs.length;e--;)this._childs[e].active=t}}),_dp(h,"count",{get:function(){return this._childs.length}}),_dp(h,"activeState",{get:function(){for(var t=void 0,e=0,i=this._childs.length;e<i;e++){if(null!=t&&this._childs[e].active!=t)return o.INDETERMINATE;t=this._childs[e].active}return t?o.ACTIVE:o.UNACTIVE}}),h.prototype._doDispose=function(){this.clear(),s.prototype._doDispose.call(this)},h.prototype.clear=function(){this._childs=[]},h.prototype.add=function(t,e,i,o,n){var r=new a(o);return r.name=e,r.text=i,r.active=n,this.addChild(r),t.add(r),r},h.prototype.addChild=function(t){t.level=this.level+1,(t.category=this)._childs.push(t)},h.prototype.getChild=function(t){return this._childs[t]},h);function h(){var t=s.call(this,null)||this;return t._childs=[],t}e.ColumnFilterCategory=l;var d=(u.prototype._doDispose=function(){this._exprNode=null,this._model=null},_dp(u,"model",{get:function(){return this._model}}),u.prototype.prepare=function(t,e){t.setDataSource(e)},u.prototype.select=function(t,e,i,o){var n=this._model.callback;return n?n.call(this,t._ds.handler,i.dataRow,e.level+1,o,this._model,i.getData(o)):!this._exprNode||(t.setData(i,o),this._exprNode.evaluate(t))},u.prototype.criteriaChanged=function(){this.parse()},u.prototype.parse=function(){this._model.callback||(this._model.criteria?this._exprNode=H.ExpressionParser.Default.parse(this._model.criteria,null):this._exprNode=null)},u);function u(t){this._model=t,this.parse()}e.ColumnFilterRun=d;var _,c=(_=$.EventAware,oe.__extends(p,_),p.prototype._doDispose=function(){_.prototype._doDispose.call(this)},_dp(p,"count",{get:function(){return this._items.length}}),_dp(p,"activeCount",{get:function(){for(var t=0,e=0,i=this._items;e<i.length;e++)i[e].active&&t++;return t}}),_dp(p,"items",{get:function(){return this._items.slice()}}),_dp(p,"isVisible",{get:function(){for(var t=0,e=this._items;t<e.length;t++)if(e[t].visible)return!0;return!1}}),p.prototype.getOwner=function(){return this._owner},p.prototype.getItem=function(t){return this._items[t]},p.prototype.itemByName=function(t){return this._names[t]},p.prototype.indexOf=function(t){for(var e=this._items.length-1;0<=e;e--)if(this._items[e].name==t)return e;return-1},p.prototype.getActiveItems=function(t){for(var e=[],i=this._items.length-1;0<=i;i--)this._items[i].active==t&&e.push(this._items[i]);return e},p.prototype.assignFrom=function(t){if(t!==this){var e=this.clear(!1);if(t)for(var i=t instanceof Array?t:[t],o=i.length,n=0;n<o;n++)if((t=i[n])&&t.name){this.$_checkName(t.name);var r=new a(null);r.assignFrom(t),this._items.push(r),(this._names[t.name]=r).addListener(this)}(e||0<this.count)&&this.changed(null)}},p.prototype.clear=function(t){void 0===t&&(t=!0);var e=this._items.length;if(0<e){for(var i=0;i<e;i++)this._items[i].removeListener(this);return this._items.length=0,this._names={},t&&this.changed(null),!0}return!1},p.prototype.add=function(t,e){void 0===e&&(e=!0);var i=ne.Utils.cast(t,a);i?this._items.indexOf(i)<0&&i.name&&this.$_checkName(i.name):t&&t.name&&(this.$_checkName(t.name),(i=new a(null)).assignFrom(t)),i&&(this._items.push(i),(this._names[i.name]=i).addListener(this),e&&this.changed(null))},p.prototype.addAll=function(t,e){if(t instanceof Array||!t||(t=[t]),t&&0<t.length){for(var i=0,o=t.length,n=0;n<o;n++){var r=ne.Utils.cast(t[n],a);if(r?this._items.indexOf(r)<0&&r.name&&(e||this.$_checkName(r.name)):t[n]&&t[n].name&&(e||this.$_checkName(t[n].name),(r=new a(null)).assignFrom(t[n])),r){var s=this.indexOf(r.name);0<=s?(this._items[s]&&this._items[s].removeListener(this),this._items[s]=r):this._items.push(r),r.addListener(this),this._names[r.name]=r,i++}}0<i&&this.changed(null)}},p.prototype.remove=function(t){if(t){for(var e=this._items.length-1;0<=e;e--){var i=this._items[e];if(i.name==t)return this._items.splice(e,1),delete this._names[i.name],i.removeListener(this),this.changed(null),!0}return!1}},p.prototype.removeItems=function(t){if(t){for(var e=0,i=t.length-1;0<=i;i--){var o=this.indexOf(t[i]);if(0<=o){var n=this._items[o];this._items.splice(o,1),delete this._names[n.name],n.removeListener(this),e++}}0<e&&this.changed(null)}},p.prototype.activateItems=function(t,e){if(t){var i=0;this._updating=!0;try{for(var o=t.length-1;0<=o;o--){var n=this._names[t[o]];n&&n.active!=e&&(n._active=e,i++)}}finally{this._updating=!1}0<i&&this.changed(null)}},p.prototype.activateAll=function(t){var e=!1;this._updating=!0;try{for(var i=0,o=this._items.length;i<o;i++){var n=this._items[i];n.active!=t&&(n._active=t,e=!0)}}finally{this._updating=!1}e&&this.changed(null)},p.prototype.hideFilters=function(t,e){if(t)for(var i=0,o=t.length;i<o;i++){var n=this._names[t[i]];n&&(n.visible=!e)}},p.prototype.hideAllFilters=function(t){for(var e=0,i=this._items.length;e<i;e++){var o=this._items[e];o&&(o.visible=!t)}},p.prototype.toggleItems=function(t){if(t){var e=0;this._updating=!0;try{for(var i=t.length-1;0<=i;i--){var o=this._names[t[i]];o&&(o._active=!o.active,e++)}}finally{this._updating=!1}0<e&&this.changed(null)}},p.prototype.toggleAll=function(){var t=!1;this._updating=!0;try{for(var e=0,i=this._items.length;e<i;e++){var o=this._items[e];o._active=!o.active,t=!0}}finally{this._updating=!1}t&&this.changed(null)},p.prototype.changed=function(t){this._updating||this.fireEvent(a.CHANGED,t)},p.prototype.$_checkName=function(t){if(this._names.hasOwnProperty(t))throw new Error("Column filter already existes: "+t)},p.prototype.$_userFilterAdd=function(t,e){var i=t instanceof a?t:null;return i||(this.$_checkName(t.name),(i=new a(null)).assignFrom(t)),this.add(i,e),i},p.prototype.onColumnFilterChanged=function(t){this.changed(t)},p.prototype.onColumnFilterSelectorChanged=function(){this.changed(null)},p.prototype.onColumnFilterUserAdd=function(t,e,i){},p);function p(t){var e=_.call(this)||this;return e._items=[],e._names={},e._updating=!1,e._nextId=1,e._owner=t,e}e.ColumnFilterCollection=c;var f,g=(f=H.ExpressionRuntime,oe.__extends(m,f),m.prototype._doDispose=function(){this._item=this._ds=null,f.prototype._doDispose.call(this)},m.prototype.setDataSource=function(t){this._ds=t,this._fieldCount=this._ds?this._ds.fieldCount:0},m.prototype.setData=function(t,e){this._item=t,this._field=e},m.prototype.isIdentifier=function(t){return t=t.toLowerCase(),m.IDENTS.hasOwnProperty(t)?m.IDENTS[t]:f.prototype.isIdentifier.call(this,t)},m.prototype.evaluateIdentifier=function(t){switch(t){case m.ID_VALUE:return this._item.getData(this._field);case m.ID_STATE:switch(this._item.rowState){case I.RowState.CREATED:return"c";case I.RowState.UPDATED:return"u";case I.RowState.DELETED:return"d";case I.RowState.CREATE_AND_DELETED:return"x"}return;case m.ID_CHANGED_CELL:var e=this._item.dataRow,i=this._field;return 0<=i&&this._item.rowState==I.RowState.UPDATED&&this._ds.isDataChanged(e,i);case m.ID_FIELD:return this._field;case m.ID_MAX:case m.ID_MIN:case m.ID_MEAN:return 0}throw new H.ExpressionEvaluationError("Invalid identifier key: "+t)},m.prototype.evaluateIndexerI=function(t,e){if(this._item){if(t!=m.ID_VALUE&&t!=m.ID_VALUES)throw new H.ExpressionEvaluationError("Invalid identifier indexer: "+t);if(e<0||e>=this._fieldCount)throw new H.ExpressionEvaluationError("Data field index out of bounds:"+e);return this._item.getData(e)}},m.prototype.evaluateIndexerS=function(t,e,i){if(t!=m.ID_VALUE&&t!=m.ID_VALUES)throw new H.ExpressionEvaluationError("Invalid identifier indexer: "+t);if(this._ds){var o=i?this._ds.getFieldIndexC(e):this._ds.getFieldIndex(e);if(o<0||o>=this._fieldCount)throw new H.ExpressionEvaluationError("Data field is not exists:"+e);return this._item.getData(o)}},m.IDENTS={value:m.ID_VALUE=0,field:m.ID_FIELD=1,values:m.ID_VALUES=2,state:m.ID_STATE=3,changedcell:m.ID_CHANGED_CELL=4,min:m.ID_MAX=10,max:m.ID_MIN=11,mean:m.ID_MEAN=12},m);function m(){var t=f.call(this)||this;return t._field=-1,t._fieldCount=0,t}e.ColumnFilterRuntime=g});t(pt);pt.ActiveState,pt.ColumnFilter,pt.ColumnFilterCategory,pt.ColumnFilterRun,pt.ColumnFilterCollection,pt.ColumnFilterRuntime;var ft=e(function(t,e){Object.defineProperty(e,"__esModule",{value:!0});var i,o=(i=$.EventAware,oe.__extends(n,i),n.prototype._doDispose=function(){this._grid=null,i.prototype._doDispose.call(this)},_dp(n,"owner",{get:function(){return this._grid}}),_dp(n,"dirty",{get:function(){return this._dirty}}),n.prototype.clean=function(){this._dirty&&(this._dirty=!1)},n.prototype.invalidate=function(){this._grid&&this._grid.invalidate()},n.prototype.refreshOwner=function(){this._grid&&this._grid.refreshView()},n.prototype._changed=function(){this._doChanged(),this._dirty||(this._dirty=!0,this.refreshOwner())},n.prototype._doChanged=function(){},n);function n(t){var e=i.call(this)||this;return e._dirty=!1,e._grid=t,e}e.GridObject=o;var r,s=(r=o,oe.__extends(a,r),a.prototype._doDispose=function(){r.prototype._doDispose.call(this)},_dp(a,"visible",{get:function(){return this._visible},set:function(t){t!=this._visible&&(this._visible=t,this._visibleChanged())}}),a.prototype._doChanged=function(){this._grid&&this._grid._visualObjectChanged(this)},a.prototype._visibleChanged=function(){this._changed()},a);function a(t){var e=r.call(this,t)||this;return e._visible=!0,e}e.VisualObject=s});t(ft);ft.GridObject,ft.VisualObject;var gt=e(function(t,e){Object.defineProperty(e,"__esModule",{value:!0});var i,o=(i=H.ExpressionRuntime,oe.__extends(n,i),n.prototype._doDispose=function(){this._item=null,this._group=null,this._dataSource=null,i.prototype._doDispose.call(this)},_dp(n,"index",{get:function(){return this._item.index}}),_dp(n,"item",{get:function(){return this._item}}),n.prototype.setDataSource=function(t){this._dataSource=t,this._fieldCount=t?t.fieldCount:0},n.prototype.setItem=function(t){this._item=t,this._group=ne.Utils.cast(t,dt.GroupItem)},n.prototype.isIdentifier=function(t){return t=t.toLowerCase(),n.IDENTS.hasOwnProperty(t)?n.IDENTS[t]:i.prototype.isIdentifier.call(this,t)},n.prototype.evaluateIdentifier=function(t){switch(t){case n.ID_ROW:return this._item.index;case n.ID_DATAROW:return this._item.dataRow;case n.ID_CHECKED:return this._item.checked;case n.ID_STATE:switch(this._item.rowState){case I.RowState.CREATED:return"c";case I.RowState.UPDATED:return"u";case I.RowState.DELETED:return"d";case I.RowState.CREATE_AND_DELETED:return"x"}return;case n.ID_COUNT:return this._group?this._group.count:0;case n.ID_DCOUNT:return this._group?this._group.descendantCount:0}throw new H.ExpressionEvaluationError("Invalid identifier key: "+t)},n.prototype.evaluateIndexerI=function(t,e){if(this._item){if(t!=n.ID_VALUE&&t!=n.ID_VALUES)throw new H.ExpressionEvaluationError("Invalid identifier indexer: "+t);if(e<0||e>=this._fieldCount)throw new H.ExpressionEvaluationError("Data field index out of bounds:"+e);return this._item.getData(e)}},n.prototype.evaluateIndexerS=function(t,e,i){if(t!=n.ID_VALUE&&t!=n.ID_VALUES)throw new H.ExpressionEvaluationError("Invalid identifier indexer: "+t);if(this._dataSource){var o=i?this._dataSource.getFieldIndexC(e):this._dataSource.getFieldIndex(e);if(o<0||o>=this._fieldCount)throw new H.ExpressionEvaluationError("Data field is not exists:"+e);return this._item.getData(o)}},n.IDENTS={row:n.ID_ROW=0,datarow:n.ID_DATAROW=1,checked:n.ID_CHECKED=2,value:n.ID_VALUE=3,values:n.ID_VALUES=4,state:n.ID_STATE=5,count:n.ID_COUNT=6,dcount:n.ID_DCOUNT=7},n);function n(){var t=i.call(this)||this;return t._item=null,t._group=null,t._dataSource=null,t._fieldCount=0,t}e.DataRowExpressionRuntime=o;var r,s=(r=H.ExpressionRuntime,oe.__extends(_,r),_.prototype._doDispose=function(){this._cell=null,this._item=null,this._grid=null,this._dataSource=null,r.prototype._doDispose.call(this)},_.prototype.setDataSource=function(t){this._dataSource=t,this._fieldCount=t?t.fieldCount:0},_.prototype.setCell=function(t,e){this._cell=t,this._grid=t.index.grid,this._item=t.index.item||e},_.prototype.isIdentifier=function(t){return t=t.toLowerCase(),_.IDENTS.hasOwnProperty(t)?_.IDENTS[t]:r.prototype.isIdentifier.call(this,t)},_.prototype.evaluateIdentifier=function(t){if(this._cell.index.itemIndex<0){var e=this._cell.index.dataField;switch(t){case _.ID_VALUE:return this._item.getData(e);case _.ID_DATA_ROW:return this._item.dataRow}}switch(t){case _.ID_VALUE:return this._cell.value();case _.ID_ROW:return this._cell.index.itemIndex;case _.ID_DATA_ROW:return this._cell.index.dataRow;case _.ID_INDEX:return this._cell.index.column.index;case _.ID_FIELD:return this._cell.index.dataField;case _.ID_CHECKED:return this._item.checked;case _.ID_STATE:switch(this._item.rowState){case I.RowState.CREATED:return"c";case I.RowState.UPDATED:return"u";case I.RowState.DELETED:return"d";case I.RowState.CREATE_AND_DELETED:return"x"}return;case _.ID_TAG:return this._cell.index.column.tag;case _.ID_BASE:var i=this._cell.index.dataColumn.baseIndex;return 0<=i?this._item.getData(i):void 0;case _.ID_COUNT:return this._item instanceof dt.GroupItem?this._item.count:0;case _.ID_DCOUNT:return this._item instanceof dt.GroupItem?this._item.descendantCount:0;case _.ID_CHANGED_CELL:var o=this._cell.index,n=o.dataRow,r=o.dataField;return 0<=r&&this._item.rowState==I.RowState.UPDATED&&this._dataSource.isDataChanged(n,r);case _.ID_LOOKUP_EXISTS:var s=this._cell.index.dataColumn,a=void 0;if(a=s.lookupSource){for(var l=s.lookupKeyFieldIds,h=l.length,d=[],u=0;u<h;u++)d.push(this._item.getData(l[u]));return a.exists(d)}return-1<s.getLookupIndex(this._cell.value())}throw new H.ExpressionEvaluationError("Invalid identifier key: "+t)},_.prototype.evaluateIndexerI=function(t,e){if(this._item){if(t!=_.ID_VALUE&&t!=_.ID_VALUES)throw new H.ExpressionEvaluationError("Invalid identifier indexer: "+t);if(e<0||e>=this._fieldCount)throw new H.ExpressionEvaluationError("Data field index out of bounds:"+e);return this._item.getData(e)}},_.prototype.evaluateIndexerS=function(t,e,i){if(t!=_.ID_VALUE&&t!=_.ID_VALUES)throw new H.ExpressionEvaluationError("Invalid identifier indexer: "+t);if(this._dataSource){var o=i?this._dataSource.getFieldIndexC(e):this._dataSource.getFieldIndex(e);if(o<0||o>=this._fieldCount)throw new H.ExpressionEvaluationError("Data field is not exists:"+e);return this._item.getData(o)}},_.IDENTS={value:_.ID_VALUE=0,row:_.ID_ROW=1,datarow:_.ID_DATA_ROW=2,index:_.ID_INDEX=3,field:_.ID_FIELD=4,checked:_.ID_CHECKED=5,state:_.ID_STATE=6,tag:_.ID_TAG=7,base:_.ID_BASE=8,values:_.ID_VALUES=9,count:_.ID_COUNT=10,dcount:_.ID_DCOUNT=11,changedcell:_.ID_CHANGED_CELL=12,lookupexists:_.ID_LOOKUP_EXISTS=13},_);function _(){var t=r.call(this)||this;return t._fieldCount=0,t}e.DataCellExpressionRuntime=s;var a,l=(a=H.ExpressionRuntime,oe.__extends(h,a),h.prototype._doDispose=function(){this._cell=null,this._item=null,this._ds=null,this._grid=null,a.prototype._doDispose.call(this)},h.prototype.setDataArguments=function(t,e,i){this._ds=t,this._fieldCount=t?t.fieldCount:0,this._cell=e,this._item=i,this._grid=e&&e.index.column.grid},h.prototype.setItem=function(t){this._item=t},h.prototype.isIdentifier=function(t){return t=t.toLowerCase(),h.IDENTS.hasOwnProperty(t)?h.IDENTS[t]:a.prototype.isIdentifier.call(this,t)},h.prototype.evaluateIdentifier=function(t){var e;switch(t){case h.ID_VALUE:return this._item.getData(this._cell.index.dataField);case h.ID_BASE:return 0<=(e=this._cell.index.dataColumn.baseIndex)?this._item.getData(e):void 0;case h.ID_PREV_VALUES:var i=this._cell.index.column,o=this._grid.getDataColumns();e=o.indexOf(i);var n=[];if(o.length<0||e<0)return;for(var r=0,s=Math.min(e,o.length);r<s;r++)n.push(this._item.getData(o[r].dataIndex));return n.join("`")}throw new H.ExpressionEvaluationError("Invalid identifier key: "+t)},h.prototype.evaluateIndexerI=function(t,e){if(this._item){if(t!=h.ID_VALUE&&t!=h.ID_VALUES)throw new H.ExpressionEvaluationError("Invalid identifier indexer: "+t);if(e<0||e>=this._fieldCount)throw new H.ExpressionEvaluationError("Data field index out of bounds:"+e);return this._item.getData(e)}},h.prototype.evaluateIndexerS=function(t,e,i){if(t!=h.ID_VALUE&&t!=h.ID_VALUES)throw new H.ExpressionEvaluationError("Invalid identifier indexer: "+t);if(this._ds){var o=i?this._ds.getFieldIndexC(e):this._ds.getFieldIndex(e);if(o<0||o>=this._fieldCount)throw new H.ExpressionEvaluationError("Data field is not exists:"+e);return this._item.getData(o)}},h.IDENTS={value:h.ID_VALUE=0,values:h.ID_VALUES=1,base:h.ID_BASE=2,prevvalues:h.ID_PREV_VALUES=3},h);function h(){var t=a.call(this)||this;return t._fieldCount=0,t}e.EqualBlankRuntime=l;var d,u=(d=H.ExpressionRuntime,oe.__extends(c,d),c.prototype.setGrid=function(t){this._grid=t},c.prototype.setGroup=function(t){this._group=t},c.prototype.isIdentifier=function(t){return t=t.toLowerCase(),c.IDENTS.hasOwnProperty(t)?c.IDENTS[t]:d.prototype.isIdentifier.call(this,t)},c.prototype.evaluateIdentifier=function(t){var e,i,o=this._group;switch(t){case c.ID_GROUP_FIELD:return(e=o.dataSource.getField(o.groupField))?e.fieldName:"";case c.ID_FIELD_HEADER:return(e=o.dataSource.getField(o.groupField))?e.header:"";case c.ID_GROUP_COLUMN:return(i=this._grid?this._grid.columnByField(o.groupField):null)?i.displayText:o.dataSource.getFieldName(o.groupField);case c.ID_COLUMN_HEADER:return(i=this._grid?this._grid.columnByField(o.groupField):null)?i.header.text||i.displayText:o.dataSource.getFieldName(o.groupField);case c.ID_COLUMN_FOOTER:return(i=this._grid?this._grid.columnByField(o.groupField):null)?i.footer.text||i.displayText:o.dataSource.getFieldName(o.groupField);case c.ID_GROUP_VALUE:var n=o.firstItem;return n?n.getData(o.groupField):void 0;case c.ID_ROW_COUNT:return o.descendantCount}throw new H.ExpressionEvaluationError("Invalid identifier key: "+t)},c.prototype.evaluateIndexerI=function(t,e){switch(t){case c.ID_SUM:case c.ID_MAX:case c.ID_MIN:case c.ID_AVG:case c.ID_DATA_COUNT:case c.ID_DATA_AVG:if(isNaN(e)||e<0)return;var i=void 0;switch(t){case c.ID_SUM:i=this._group.getSum(e);break;case c.ID_MAX:i=this._group.getMax(e);break;case c.ID_MIN:i=this._group.getMin(e);break;case c.ID_AVG:i=this._group.getAvg(e);break;case c.ID_DATA_COUNT:i=this._group.getDataCount(e);break;case c.ID_DATA_AVG:i=this._group.getDataAvg(e)}return isNaN(i)?"":String(i)}throw new H.ExpressionEvaluationError("Invalid identifier indexer: "+t)},c.prototype.evaluateIndexerS=function(t,e,i){var o=this._group.dataSource,n=e?o?o.getFieldIndex(e):-1:this._group.groupField;return this.evaluateIndexerI(t,n)},c.IDENTS={groupfield:c.ID_GROUP_FIELD=0,fieldheader:c.ID_FIELD_HEADER=1,groupcolumn:c.ID_GROUP_COLUMN=2,columnheader:c.ID_COLUMN_HEADER=3,columnfooter:c.ID_COLUMN_FOOTER=4,groupvalue:c.ID_GROUP_VALUE=5,rowcount:c.ID_ROW_COUNT=6,sum:c.ID_SUM=7,max:c.ID_MAX=8,min:c.ID_MIN=9,avg:c.ID_AVG=10,datacount:c.ID_DATA_COUNT=11,dataavg:c.ID_DATA_AVG=12},c);function c(){return d.call(this)||this}e.RowGroupStatementRuntime=u});t(gt);gt.DataRowExpressionRuntime,gt.DataCellExpressionRuntime,gt.EqualBlankRuntime,gt.RowGroupStatementRuntime;var mt=e(function(t,e){Object.defineProperty(e,"__esModule",{value:!0});var i,o=(i=re.Base,oe.__extends(n,i),n.prototype._doDispose=function(){this._index&&this._index.dispose(),this._index=null,i.prototype._doDispose.call(this)},_dp(n,"name",{get:function(){return this._name}}),_dp(n,"index",{get:function(){return this._index}}),_dp(n,"item",{get:function(){return this._index.item}}),_dp(n,"valueColumn",{get:function(){return this._index.valueColumn}}),_dp(n,"dataColumn",{get:function(){return this._index.dataColumn}}),_dp(n,"text",{get:function(){return null}}),_dp(n,"value",{get:function(){}}),_dp(n,"level",{get:function(){return 0}}),n.prototype.setIndex=function(t){this._index.assignFrom(t)},n.prototype.setIndex2=function(t,e,i){this._index._grid=t,this._index.set(e,i)},n.prototype.setLayout=function(t){this._index.layout=t},n.ERROR="<<ERROR>>",n);function n(t){var e=i.call(this)||this;return e._index=new kt.CellIndex,e._name=t,e}e.GridCell=o;var r,s=(r=o,oe.__extends(a,r),a.prototype._doDispose=function(){r.prototype._doDispose.call(this)},_dp(a,"model",{get:function(){return this._model},set:function(t){this._model=t}}),a);function a(t,e){void 0===e&&(e=null);var i=r.call(this,e)||this;return i._model=t,i}e.StyledCell=s;var l,h=(l=o,oe.__extends(d,l),d.prototype._doDispose=function(){l.prototype._doDispose.call(this)},d.prototype.getBlankState=function(){return lt.BlankState.NONE},d.prototype.isValueChanged=function(){return!1},d);function d(t){return l.call(this,t)||this}e.ValueCell=h;var u,_=(u=h,oe.__extends(g,u),g.getText=function(t,e){var i=0<=e.dataIndex?t.getData(e.dataIndex):void 0;return g._getText(t,e,i)},g._getText=function(t,e,i){var o,n=e;if(n.lookupDisplay){var r=n.lookupSource;if(r){for(var s=n.lookupKeyFieldIds,a=s.length,l=[],h=0;h<a;h++)l.push(t.getData(s[h]));o=void 0!==(o=r.lookup(l,n.valueSeparator))?o:null!=n.textOfInvalid?n.textOfInvalid:i}else{var d=n.labelFieldIndex;o=0<=d?t.getData(d):n.getLookupLabel(i)}}else{var u,_=void 0;o=i,n.valueType==lt.ValueType.NUMBER&&null!=(u=n.nanText)&&isNaN(o)?o=u:(_=n.displayCallback)?o=_(n.grid.handler,kt.CellIndex.temp(n.grid,t.index,e).proxy(),o):null!=o&&"object"==typeof o&&(o=JSON.stringify(o))}return null==o?"":String(o)},g._getDisplayText=function(t,e,i,o,n){var r,s=t.formatOptions;if(i){switch(i.valueType){case lt.ValueType.TEXT:var a=void 0;r=o&&(a=s.getTextFormatter(n.textFormatter))?a.getText(o):g._getText(e,i,o);break;case lt.ValueType.NUMBER:var l=Number(o),h=void 0;r=!isNaN(l)&&null!=l||null==i.nanText?0==l&&null!=i.zeroText?i.zeroText:(h=s.getNumberFormatter(n.numberFormatter))?h.getText(l,i.displayMinusZero):g._getText(e,i,o):i.nanText;break;case lt.ValueType.DATETIME:var d=void 0;r=o instanceof Date&&(d=s.getDateWriter(n.datetimeWriter))?d.getText(o):g._getText(e,i,o);break;case lt.ValueType.BOOLEAN:var u=void 0;r=(u=s.getBoolFormatter(n.booleanFormatter))?u.formatValue(o):g._getText(e,i,o);break;case lt.ValueType.OBJECT:default:r=g._getText(e,i,o)}r&&((h=n.prefix)&&(r=h+r),(h=n.suffix)&&(r+=h))}return r},g.equalBlankRuntime=function(){return this._equalBlankRuntime||(this._equalBlankRuntime=new gt.EqualBlankRuntime),this._equalBlankRuntime},g.prototype._doDispose=function(){u.prototype._doDispose.call(this)},g.prototype.getValue=function(){var t=this.dataColumn.dataIndex;if(0<=t)return this.item.getData(t)},g.prototype.getDisplayText=function(t,e){return g._getDisplayText(t,this.index.item,this.index.dataColumn,this.getValue(),e)},_dp(g,"value",{get:function(){return this.getValue()}}),g.prototype.getBlankState=function(){var t=lt.BlankState.NONE,e=this.index,i=e.layout,o=this.dataColumn,n=this.item,r=i.equalBlankNode,s=r&&g.equalBlankRuntime();if(i&&i.blanked&&i.dataRoot&&0<=n.dataRow){var a=i.grid,l=a.itemCount;if(r&&s&&s.setDataArguments(n.dataSource,this,n),1<l){var h=e.itemIndex,d=o.dataIndex,u=r?(s.setItem(n),r.evaluate(s)):n.getData(d),_=void 0,c=void 0,p=void 0;if(0<h){var f=a.getItem(h-1);h<l-1?(p=a.getItem(h+1),f instanceof dt.GridRow?(_=r?(s.setItem(f),r.evaluate(s)):f.getData(d),(u instanceof Date&&_ instanceof Date?+u==+_:u==_)?t=p instanceof dt.GridRow&&((c=r?(s.setItem(p),r.evaluate(s)):p.getData(d))instanceof Date&&u instanceof Date?+c==+u:c==u)?lt.BlankState.BODY:lt.BlankState.TAIL:p instanceof dt.GridRow&&((c=r?(s.setItem(p),r.evaluate(s)):p.getData(d))instanceof Date&&u instanceof Date?+c==+u:c==u)&&(t=lt.BlankState.HEAD)):p instanceof dt.GridRow&&((c=r?(s.setItem(p),r.evaluate(s)):p.getData(d))instanceof Date&&u instanceof Date?+c==+u:c==u)&&(t=lt.BlankState.HEAD)):f instanceof dt.GridRow&&((_=r?(s.setItem(f),r.evaluate(s)):f.getData(d))instanceof Date&&u instanceof Date?+_==+u:_==u)&&(t=lt.BlankState.TAIL)}else(p=a.getItem(h+1))instanceof dt.GridRow&&((c=r?(s.setItem(p),r.evaluate(s)):p.getData(d))instanceof Date&&u instanceof Date?+c==+u:c==u)&&(t=lt.BlankState.HEAD)}}return t},g.prototype.isValueChanged=function(){var t=this.dataColumn.dataIndex;return 0<=t&&this.item.isChanged(t)},g);function g(t){return void 0===t&&(t=null),u.call(this,t||"dataCell")||this}e.DataCell=_;var c,p=(c=_,oe.__extends(f,c),f.prototype.setItem=function(t){this.$_item=t},_dp(f,"item",{get:function(){return this.$_item}}),f);function f(){return null!==c&&c.apply(this,arguments)||this}e.HiddenDataCell=p;var m,y=(m=h,oe.__extends(v,m),v.prototype._doDispose=function(){m.prototype._doDispose.call(this)},_dp(v,"text",{get:function(){return""}}),_dp(v,"value",{get:function(){return null}}),v.prototype.getDisplayText=function(t){return this.text},v);function v(t){return void 0===t&&(t=null),m.call(this,t||"literalCell")||this}e.LiteralCell=y;var w,C=(w=h,oe.__extends(x,w),x.getText=function(t,e){return t?t.join(e||","):""},x.prototype._doDispose=function(){w.prototype._doDispose.call(this)},x.prototype.getDisplayText=function(t,e){var i=this.value;return i?i.join(e||","):""},_dp(x,"getText",{get:function(){return null}}),_dp(x,"value",{get:function(){var t=this.index.column;if(t instanceof Dt.SeriesColumn){var e=t.fields,i=e?e.length:0;if(0<i){for(var o=this.item,n=new Array(i),r=0;r<i;r++)0<=e[r]&&(n[r]=o.getData(e[r]));return n}}return[]}}),x);function x(t){return void 0===t&&(t=null),w.call(this,t||"seriesCell")||this}e.SeriesCell=C;var b,I=(b=_,oe.__extends(E,b),E.prototype._doDispose=function(){b.prototype._doDispose.call(this)},E.prototype.getValue=function(){var t=this.index,e=t.item;return e instanceof dt.GridRow?b.prototype.getValue.call(this):(e=(e instanceof dt.GroupItem?e:e.parent).firstItem).getData(t.dataField)},_dp(E,"text",{get:function(){return this.getValue()}}),E);function E(t){return void 0===t&&(t=null),b.call(this,t||"mergedDataCell")||this}e.MergedDataCell=I});t(mt);mt.GridCell,mt.StyledCell,mt.ValueCell,mt.DataCell,mt.HiddenDataCell,mt.LiteralCell,mt.SeriesCell,mt.MergedDataCell;var yt=e(function(t,e){Object.defineProperty(e,"__esModule",{value:!0});var i,o=(i=re.Base,oe.__extends(n,i),n.prototype._doDispose=function(){i.prototype._doDispose.call(this)},_dp(n,"value",{get:function(){return this._value},set:function(t){if(t!=this._value){this._value=t;try{this._error=null,this._parse(t)}catch(t){this._error=t}}}}),_dp(n,"error",{get:function(){return this._error}}),n.prototype.render=function(t,e){this._doRender(t,e,!1)},n.prototype.renders=function(t,e){this._doRender(t,e,!0)},n);function n(){return i.call(this)||this}var r,s=(r=o,oe.__extends(a,r),a.prototype._doDispose=function(){r.prototype._doDispose.call(this)},a.prototype._doRender=function(t,e,i){var o=this._getBarLength();if(!(o<1)){var n=this.barWidth;n<=0&&(n=this.integralBar?Math.floor(e.width/o):e.width/o,n=Math.max(this.minBarWidth,n),0<this.maxBarWidth&&(n=Math.min(this.maxBarWidth,n))),o*=n,e.x+=(e.width-o)/2,this.integralBar&&(e.x=Math.floor(e.x)),this._drawBars(t,this.barStyle,i,e.x,e.y,n,e.height)}},a);function a(){var t=r.call(this)||this;return t.integralBar=!0,t.minBarWidth=1,t.maxBarWidth=0,t.barWidth=0,t}var l,h=[2171426,2236706,2236961,1184291,1184546,1249826,1188371,1188626,1253906,2232851,2233106,2298386,1122866,1188146,1188401,1126946,1192226,1192481,2241041,2232626,2232881,2175506,2240786,3219761,3215906,3281186,3281441,3219986,3285266,3285521,2171171,2171681,2302241,1119011,1249571,1250081,1123091,1253651,1254161,2167571,2298131,2298641,1122611,1123121,1253681,1126691,1127201,1257761,3223841,2167601,2298161,2175251,2175761,2175281,3215651,3216161,3346721,3219731,3220241,3350801,3227921,2233361,4395281,1118756,1119266,1184036,1184801,1315106,1315361,1122836,1123346,1188116,1188881,1319186,1319441,2363921,2232596,4272401,2363666,1261841,1118786,1184066,1184321,1131026,1196306,1196561,4264466,4329746,4330001,2171201,2179361,4268321,1118531,1119041,1249601,1130771,1131281,4264211,4264721,1126721,1130801,3215681,4264241,2167826,2167316,2167346,36901138],d=[103,104,105],_=[251658240,15728640,983040,61440,3840,240,15],u=(l=s,oe.__extends(c,l),c.prototype._doDispose=function(){l.prototype._doDispose.call(this)},c.prototype._parse=function(t){this._weights=[];var e=t?t.length:0;if(!(e<1)){var i=this.$_detectType(t);2==i&&e%2==1&&(t="0"+t,e++);var o=d[i],n=h[o],r=o;if(this._weights.push(n),2==i)for(var s=0;s<e;s+=2){var a=t.substr(s,2);o=parseInt(a),o=this.$_convert(i,o),n=h[o],this._weights.push(n),r+=o*(s+1)}else for(s=0;s<e;s++)o=t.charCodeAt(s),o=this.$_convert(i,o),n=h[o],this._weights.push(n),r+=o*(s+1);r%=103,this._weights.push(h[r]),this._weights.push(h[106])}},c.prototype._getBarLength=function(){return this.quietZoneWidth+11*(this._weights.length-1)+13+this.quietZoneWidth},c.prototype._drawBars=function(t,e,i,o,n,r,s){o+=10*r;for(var a,l=this._weights.length-1,h=0;h<l;h++){a=this._weights[h];for(var d=0;d<6;d++){var u=(a&_[d+1])>>4*(5-d);u*=r,d%2==0&&(i?(this.integralBar,t.sbounds(e,o+"",n+"%",u+"",s+"%")):(this.integralBar,t.bounds(e,o,n,u,s))),o+=u}}for(a=this._weights[l],d=0;d<7;d++)u=(a&_[d])>>4*(6-d),u*=r,d%2==0&&(i?(this.integralBar,t.sbounds(e,o+"",n+"%",u+"",s+"%")):(this.integralBar,t.bounds(e,o,n,u,s))),o+=u},c.prototype.$_convert=function(t,e){switch(t){case 0:if(0<=e&&e<32)return e+64;if(32<=e&&e<96)return e-32;case 1:if(32<=e&&e<128)return e-32;case 2:if(0<=e&&e<=99)return e}throw new Error("Invalid code128 charactor: "+e)},c.prototype.$_detectType=function(t){var e=/^[0-9]+$/;return e.test(t)?2:(e=/[a-z]/).test(t)?1:0},c);function c(){var t=l.call(this)||this;return t.quietZoneWidth=10,t}e.Code128=u;var p,f={0:"nnnwwnwnn",1:"wnnwnnnnw",2:"nnwwnnnnw",3:"wnwwnnnnn",4:"nnnwwnnnw",5:"wnnwwnnnn",6:"nnwwwnnnn",7:"nnnwnnwnw",8:"wnnwnnwnn",9:"nnwwnnwnn",A:"wnnnnwnnw",B:"nnwnnwnnw",C:"wnwnnwnnn",D:"nnnnwwnnw",E:"wnnnwwnnn",F:"nnwnwwnnn",G:"nnnnnwwnw",H:"wnnnnwwnn",I:"nnwnnwwnn",J:"nnnnwwwnn",K:"wnnnnnnww",L:"nnwnnnnww",M:"wnwnnnnwn",N:"nnnnwnnww",O:"wnnnwnnwn",P:"nnwnwnnwn",Q:"nnnnnnwww",R:"wnnnnnwwn",S:"nnwnnnwwn",T:"nnnnwnwwn",U:"wwnnnnnnw",V:"nwwnnnnnw",W:"wwwnnnnnn",X:"nwnnwnnnw",Y:"wwnnwnnnn",Z:"nwwnwnnnn","-":"nwnnnnwnw",".":"wwnnnnwnn"," ":"nwwnnnwnn",$:"nwnwnwnnn","/":"nwnwnnnwn","+":"nwnnnwnwn","%":"nnnwnwnwn","*":"nwnnwnwnn"},g=(p=s,oe.__extends(m,p),m.prototype._doDispose=function(){p.prototype._doDispose.call(this)},m.prototype._parse=function(t){if(this._codes=[],t){var e=t.length;this._codes.push(f["*"]);for(var i=0;i<e;i++){var o=t.charAt(i),n=f[o];if(!n)throw new Error("Invalid Code39 character: "+o);this._codes.push(n)}this._codes.push(f["*"])}},m.prototype._getBarLength=function(){var t=this._codes.length;return t*(3*this._wideWidth+6)+(t-1)},m.prototype._drawBars=function(t,e,i,o,n,r,s){var a=this._codes.length;if(2<a)for(var l=0;l<a;l++){for(var h=this._codes[l],d=0;d<9;d++){var u="n"==h.charAt(d)?1:this._wideWidth;u*=r,d%2==0&&(i?(this.integralBar,t.sbounds(e,o+"",n+"%",u+"",s+"%")):(this.integralBar,t.bounds(e,o,n,u,s))),o+=u}l<a-1&&(o+=r)}},m);function m(){var t=p.call(this)||this;return t._wideWidth=3,t}e.Code39=g});t(yt);yt.Code128,yt.Code39;var vt=e(function(t,e){Object.defineProperty(e,"__esModule",{value:!0});var o,d="http://www.w3.org/2000/svg",l=0,s=(o=re.Base,oe.__extends(i,o),i.prototype._doDispose=function(){this.clear(),o.prototype._doDispose.call(this)},_dp(i,"doc",{get:function(){return ne.getDoc(this._element)||document}}),i.prototype.init=function(t,e){return this._defs=t,this._element=e,this},i.prototype.clear=function(){this._defs=null,this._element=null,this._transforms=null},i.prototype.save=function(){this._transforms.push(this._trans),this._trans=""},i.prototype.restore=function(){this._trans=this._transforms.pop()},i.prototype.translate=function(t,e){this._trans+="translate("+t+","+e+")"},i.prototype.rotate=function(t){this._trans+="rotate("+180*t/Math.PI+")"},i.prototype.rotateAt=function(t,e,i){this._trans+="rotate("+180*t/Math.PI+","+e+",)"},i.prototype.scale=function(t,e){this._trans+="scale("+t+","+e+")"},i.prototype.clipRect=function(t){this.clip(t.x,t.y,t.width,t.height)},i.prototype.clip=function(t,e,i,o){var n=this.doc,r=l++,s=n.createElementNS(d,"clipPath");s.setAttributeNS(null,"id","clip"+r);var a=n.createElementNS(d,"rect");a.x.baseVal.value=t,a.y.baseVal.value=e,a.width.baseVal.value=i,a.height.baseVal.value=o,s.appendChild(a),this._defs.appendChild(s)},i.prototype.line=function(t,e,i,o,n){var r=this.doc.createElementNS(d,"line");this._element.appendChild(r),r.x1.baseVal.value=e,r.y1.baseVal.value=i,r.x2.baseVal.value=o,r.y2.baseVal.value=n,t&&r.setAttribute("class",t)},i.prototype.sline=function(t,e,i,o,n){var r=this.doc.createElementNS(d,"line");this._element.appendChild(r),r.x1.baseVal.valueAsString=e,r.y1.baseVal.valueAsString=i,r.x2.baseVal.valueAsString=o,r.y2.baseVal.valueAsString=n,t&&r.setAttribute("class",t)},i.prototype.lines=function(t){for(var e=[],i=1;i<arguments.length;i++)e[i-1]=arguments[i];if(!(null==e||e.length<4)){var o=this.doc.createElementNS(d,"polyline");this._element.appendChild(o);var n=[];n.push(e[0]+","+e[1]);for(var r=2;r<e.length;r+=2)n.push(e[r]+","+e[r+1]);o.setAttributeNS(null,"points",n.join(" ")),t&&o.setAttribute("class",t)}},i.prototype.polygon=function(t,e){if(!(null==e||e.length<4)){var i=this.doc.createElementNS(d,"polygon");this._element.appendChild(i);var o=[];o.push(e[0]+","+e[1]);for(var n=2;n<e.length;n+=2)o.push(e[n]+","+e[n+1]);this._trans&&i.setAttributeNS(null,"transform",this._trans),i.setAttributeNS(null,"points",o.join(" ")),t&&i.setAttribute("class",t)}},i.prototype.quadratic=function(t,e,i,o,n,r,s){var a=this.doc.createElementNS(d,"path");this._element.appendChild(a),a.setAttributeNS(null,"d",["M",e,i,"Q",o,n,r,s].join(" ")),t&&a.setAttribute("class",t)},i.prototype.squadratic=function(t,e,i,o,n,r,s){var a=this.doc.createElementNS(d,"path");this._element.appendChild(a),a.setAttributeNS(null,"d",["M",e+"%",i+"%","Q",o+"%",n+"%",r+"%",s+"%"].join(" ")),t&&a.setAttribute("class",t)},i.prototype.curve=function(t){for(var e=[],i=1;i<arguments.length;i++)e[i-1]=arguments[i];var o=this.$_getCurvedLinePath(e,0,e.length-1);if(o){var n=this.doc.createElementNS(d,"path");this._element.appendChild(n),n.setAttributeNS(null,"d",o.join(" ")),t&&n.setAttribute("class",t)}},i.prototype.scurve=function(t){for(var e=[],i=1;i<arguments.length;i++)e[i-1]=arguments[i];var o=this.$_getCurvedLinePath(e,0,e.length-1);if(o){var n=this.doc.createElementNS(d,"path");this._element.appendChild(n);for(var r=0;r<o.length;r++)"number"==typeof o[r]&&(o[r]=o[r]+"%");n.setAttributeNS(null,"d",o.join(" ")),t&&n.setAttribute("class",t)}},i.prototype.curveRange=function(t,e,i,o,n){if(o&&1<o.length&&n&&1<n.length&&(t||e)){var r=this.$_getCurvedLinePath(o,0,o.length/2-1,!0);if(r){r.push("L",n[n.length-2],[n.length-1]);var s=this.$_getCurvedLinePath(n,n.length/2-1,0,!1);s&&(r=r.concat(s)),r.push("L",o[0],o[1]);var a=this.doc.createElementNS(d,"path");this._element.appendChild(a),a.setAttributeNS(null,"d",r.join(" ")),this.$_fillOrStroke(a,t,e,i)}}},i.prototype.rect=function(t,e){var i=this.doc.createElementNS(d,"rect");this._element.appendChild(i),i.x.baseVal.value=e.x,i.y.baseVal.value=e.y,i.width.baseVal.value=e.width,i.height.baseVal.value=e.height,t&&i.setAttribute("class",t)},i.prototype.srect=function(t,e){var i=this.doc.createElementNS(d,"rect");this._element.appendChild(i),i.x.baseVal.valueAsString=e.x+"%",i.y.baseVal.valueAsString=e.y+"%",i.width.baseVal.valueAsString=e.width+"%",i.height.baseVal.valueAsString=e.height+"%",t&&i.setAttribute("class",t)},i.prototype.bounds=function(t,e,i,o,n){var r=this.doc.createElementNS(d,"rect");this._element.appendChild(r),r.x.baseVal.value=e,r.y.baseVal.value=n<0?i+n:i,r.width.baseVal.value=o,r.height.baseVal.value=Math.abs(n),t&&r.setAttribute("class",t)},i.prototype.pbounds=function(t,e,i,o,n){var r=this.doc.createElementNS(d,"rect");this._element.appendChild(r),r.x.baseVal.valueAsString=e+"%",r.y.baseVal.valueAsString=(n<0?i+n:i)+"%",r.width.baseVal.valueAsString=o+"%",r.height.baseVal.valueAsString=Math.abs(n)+"%",t&&r.setAttribute("class",t)},i.prototype.sbounds=function(t,e,i,o,n){var r=this.doc.createElementNS(d,"rect");this._element.appendChild(r),r.x.baseVal.valueAsString=e,r.y.baseVal.valueAsString=i,r.width.baseVal.valueAsString=o,r.height.baseVal.valueAsString=n,t&&r.setAttribute("class",t)},i.prototype.circle=function(t,e,i,o){var n=this.doc.createElementNS(d,"circle");this._element.appendChild(n),n.cx.baseVal.value=e,n.cy.baseVal.value=i,n.r.baseVal.value=o,t&&n.setAttribute("class",t)},i.prototype.scircle=function(t,e,i,o){var n=this.doc.createElementNS(d,"circle");this._element.appendChild(n),n.cx.baseVal.valueAsString=e,n.cy.baseVal.valueAsString=i,n.r.baseVal.valueAsString=o,t&&n.setAttribute("class",t)},i.prototype.circleRect=function(t,e,i,o,n,r){var s=this.doc.createElementNS(d,"circle"),a=i+n/2,l=o+r/2,h=Math.min(n,r)/2;this._element.appendChild(s),s.cx.baseVal.value=a,s.cy.baseVal.value=l,s.r.baseVal.value=h,t&&s.setAttribute("class",t)},i.prototype.scircleRect=function(t,e,i,o,n){var r=this.doc.createElementNS(d,"circle"),s=e+o/2,a=i+n/2,l=Math.min(o,n)/2;this._element.appendChild(r),r.cx.baseVal.valueAsString=s+"%",r.cy.baseVal.valueAsString=a+"%",r.r.baseVal.valueAsString=l+"%",t&&r.setAttribute("class",t)},i.prototype.ellipse=function(t,e,i,o,n){var r=this.doc.createElementNS(d,"ellipse"),s=o/2,a=n/2;this._element.appendChild(r),r.cx.baseVal.value=e+s,r.cy.baseVal.value=i+a,r.rx.baseVal.value=s,r.ry.baseVal.value=a,t&&r.setAttribute("class",t)},i.prototype.sellipse=function(t,e,i,o,n){var r=this.doc.createElementNS(d,"ellipse"),s=o/2,a=n/2;this._element.appendChild(r),r.cx.baseVal.valueAsString=e+s+"%",r.cy.baseVal.valueAsString=i+a+"%",r.rx.baseVal.valueAsString=s+"%",r.ry.baseVal.valueAsString=a+"%",t&&r.setAttribute("class",t)},i.prototype.text=function(t,e,i,o,n,r,s,a){var l=this.doc.createElementNS(d,"text");this._element.appendChild(l),t=t||"Verdana",l.setAttributeNS(null,"y",s+""),l.setAttributeNS(null,"dy","top"),l.setAttributeNS(null,"x",r+""),l.setAttributeNS(null,"text-anchor",a),l.setAttributeNS(null,"font-family",t),l.setAttributeNS(null,"font-size",e+""),o&&l.setAttributeNS(null,"text-decoration",o),l[ne.Utils.TextProp]=n},i.prototype.stext=function(t,e,i,o,n){var r=this.doc.createElementNS(d,"text");this._element.appendChild(r),r.setAttributeNS(null,"y",o+"%"),r.setAttributeNS(null,"dy","top"),r.setAttributeNS(null,"x",i+"%"),r[ne.Utils.TextProp]=e,t&&r.setAttribute("class",t)},i.prototype.$_stroke=function(t,e,i){t.style.fill="none",t.style.stroke=e,isNaN(i)||(t.style.strokeWidth=i+"")},i.prototype.$_fill=function(t,e){t.style.fill=e},i.prototype.$_fillOrStroke=function(t,e,i,o){i&&(t.style.stroke=i,isNaN(o)||(t.style.strokeWidth=o+"")),t.style.fill=e||"none"},i.prototype.$_getCurvedLinePath=function(t,e,i,o){if(void 0===o&&(o=!0),t&&i!=e&&t.length/2>i){var n=[],r=i<e?-1:1,s=e;if(o&&n.push("M",t[2*s],t[2*s+1]),2==Math.abs(i-e))return n.push("L",t[2*(s+r)],t[2*(s+r)+1]),n;var a={x:0,y:0},l={x:0,y:0},h={x:0,y:0},d={x:t[2*(s+r)]-t[2*s],y:t[2*(s+r)+1]-t[2*s+1]},u={x:0,y:0},_={x:0,y:0},c={x:0,y:0},p={x:0,y:0},f=Math.sqrt(d.x*d.x+d.y*d.y);d.x/=f,d.y/=f;var g=t[2*(s+r)]-t[2*s],m=t[2*s],y=t[2*s+1];for(s+=r;s!=i;s+=r){h.x=-d.x,h.y=-d.y,d.x=t[2*(s+r)]-t[2*s],d.y=t[2*(s+r)]-t[2*s+1],f=Math.sqrt(d.x*d.x+d.y*d.y),d.x/=f,d.y/=f,d.x<h.x?(u.x=h.x-d.x,u.y=h.y-d.y):(u.x=d.x-h.x,u.y=d.y-h.y);var v=Math.sqrt(u.x*u.x+u.y*u.y);u.x/=v,u.y/=v,0<=h.y*d.y&&(u={x:1,y:0}),a.x=-u.x*g*.25,a.y=-u.y*g*.25,s==r+e?n.push("Q",t[2*s]+a.x,t[2*s+1]+a.y,t[2*s],t[2*s+1]):(_.x=m+l.x,_.y=y+l.y,c.x=t[2*s]+a.x,c.y=t[2*s+1]+a.y,p.x=(_.x+c.x)/2,p.y=(_.y+c.y)/2,n.push("Q",_.x,_.y,p.x,p.y),n.push("Q",c.x,c.y,t[2*s],t[2*s+1])),g=t[2*(s+r)]-t[2*s],l.x=u.x*g*.25,l.y=u.y*g*.25,m=t[2*s],y=t[2*s+1]}return n.push("Q",m+l.x,y+l.y,t[2*s],t[2*s+1]),n}return null},i);function i(t,e){var i=o.call(this)||this;return i._transforms=[],i._defs=t,i._element=e,i}e.SvgRenderer=s;var a,n=(a=re.Base,oe.__extends(r,a),r.createSVG=function(t){var e=ne.getDoc(t),i=e.createElementNS(d,"svg"),o=i.style,n=e.createElementNS(d,"defs");i.appendChild(n),o.background="",o.border="none",o.pointerEvents="none";var r=e.createElementNS(d,"g");return i.appendChild(r),t.appendChild(i),i},r.renderSVG=function(t,e,i){var o=e.lastElementChild,n=this._renderer.init(e.firstChild,o);o.textContent="",i.call(t,e,n,e.clientWidth,e.clientHeight),n.clear()},r.renderSVG2=function(t,e,i){var o=ne.getDoc(e);1<e.childElementCount&&e.removeChild(e.lastElementChild);var n=o.createElementNS(d,"g"),r=this._renderer.init(e.firstChild,n);e.appendChild(n),i.call(t,e,r),r.clear()},r.prototype._doDispose=function(){this._renderer=this._renderer.dispose(),this._element.parentElement.removeChild(this._element),this._element=this._defs=null,a.prototype._doDispose.call(this)},_dp(r,"element",{get:function(){return this._element}}),r.prototype.render=function(t){this._clear(),t?t.call(this,this._renderer,this._element.clientWidth,this._element.clientHeight):this._doRender(this._renderer,this._element.clientWidth,this._element.clientHeight)},r.prototype._clear=function(){1<this._element.childElementCount&&this._element.removeChild(this._element.lastElementChild);var t=ne.getDoc(this._element).createElementNS(d,"g");this._element.appendChild(t),this._renderer._element=t},r.prototype._doRender=function(t,e,i){},r._renderer=new s,r);function r(t){var e=a.call(this)||this,i=ne.getDoc(t),o=e._element=i.createElementNS(d,"svg"),n=o.style,r=e._defs=i.createElementNS(d,"defs");return o.appendChild(r),n.background="",n.border="none",n.pointerEvents="none",t.appendChild(o),e._renderer=new s(e._defs),e}e.SvgElement=n});t(vt);vt.SvgRenderer,vt.SvgElement;var wt=e(function(t,e){Object.defineProperty(e,"__esModule",{value:!0});var i,o=(i=re.Base,oe.__extends(n,i),n.prototype.draw=function(t,e,i){this._doDraw(t,e,i)},n);function n(){return null!==i&&i.apply(this,arguments)||this}e.ShapeDrawing=o;var r,d={rectangle:[0,0,1,0,1,1,0,1],triangle:[.5,0,0,1,1,1],itriangle:[0,0,.5,1,1,0],diamond:[.5,0,0,.5,.5,1,1,.5],uparrow:[.5,0,0,.5,.3,.5,.3,1,.7,1,.7,.5,1,.5],downarrow:[.3,0,.3,.5,0,.5,.5,1,1,.5,.7,.5,.7,0],leftarrow:[0,.5,.5,1,.5,.7,1,.7,1,.3,.5,.3,.5,0],rightarrow:[0,.3,0,.7,.5,.7,.5,1,1,.5,.5,0,.5,.3],plus:[.3,0,.3,.3,0,.3,0,.7,.3,.7,.3,1,.7,1,.7,.7,1,.7,1,.3,.7,.3,.7,0],minus:[0,.3,0,.7,1,.7,1,.3],star:[.5,0,.6122,.3454,.9755,.3454,.6816,.559,.7938,.9045,.5,.691,.2061,.9045,.3183,.559,.02447,.3454,.3877,.3454]},u={equal:[[0,.2,0,.4,1,.4,1,.2],[0,.6,0,.8,1,.8,1,.6]]},s=(r=o,oe.__extends(a,r),_dp(a,"shape",{get:function(){return this._shape},set:function(t){this._shape=t?"inverted_triangle"===t?a.INVERTED_TRIANLGE:t.toLowerCase():null}}),a.prototype._doDraw=function(t,e,i){var o=this._shape;if(d.hasOwnProperty(o)){if(h=d[o]){for(var n=0,r=0,s=0,a=(h=h.slice()).length/2;s<a;s++)h[2*s]=n+h[2*s]*e,h[2*s+1]=r+h[2*s+1]*i;h.push(h[0],h[1]),t.polygon(null,h)}}else if(u.hasOwnProperty(o)){var l=u[o];if(l){var h;for(a=(h=l[s=r=n=0].slice()).length/2;s<a;s++)h[2*s]=n+h[2*s]*e,h[2*s+1]=r+h[2*s+1]*i;for(h.push(h[0],h[1]),t.polygon(null,h),s=0,a=(h=(h=l[1]).slice()).length/2;s<a;s++)h[2*s]=n+h[2*s]*e,h[2*s+1]=r+h[2*s+1]*i;h.push(h[0],h[1]),t.polygon(null,h)}}},a.RECTANGLE="rectangle",a.TRIANLGE="triangle",a.INVERTED_TRIANLGE="itriangle",a.DIAMOND="diamond",a.UP_ARROW="uparrow",a.DOWN_ARROW="downarrow",a.LEFT_ARROW="leftarrow",a.RIGHT_ARROW="rightarrow",a.PLUS="plus",a.MINUS="minus",a.EQUAL="equal",a.STAR="star",a);function a(t){var e=r.call(this)||this;return e._shape=t,e}e.PolygonShape=s;var l,h=(l=o,oe.__extends(_,l),_.prototype._doDraw=function(t,e,i){t.ellipse(null,0,0,e,i)},_);function _(){return null!==l&&l.apply(this,arguments)||this}e.EllipseShape=h});t(wt);wt.ShapeDrawing,wt.PolygonShape,wt.EllipseShape;var Ct=e(function(t,e){Object.defineProperty(e,"__esModule",{value:!0});var i=(o.layoutFlexLeft=function(t,e,i,o){var n=t.style;n.flexDirection="row",n.justifyContent="center",n.alignItems="center",(n=e.style).paddingTop="",n.paddingBottom="",(n=i.style).display="",n.paddingLeft=o+"px",n.paddingRight="",n.paddingTop="",n.paddingBottom="",n.flexGrow=""},o.layoutFlexRight=function(t,e,i,o){var n=t.style;n.flexDirection="row-reverse",n.justifyContent="center",n.alignItems="center",(n=e.style).paddingTop="",n.paddingBottom="",(n=i.style).display="",n.paddingLeft="",n.paddingRight=o+"px",n.paddingTop="",n.paddingBottom="",n.flexGrow=""},o.layoutFlexTop=function(t,e,i,o){var n=t.style;n.flexDirection="column",n.justifyContent="center",n.alignItems="center",(n=e.style).paddingTop="",n.paddingBottom="",(n=i.style).display="",n.paddingTop=o+"px",n.paddingBottom="",n.paddingLeft="",n.paddingRight="",n.flexGrow=""},o.layoutFlexBottom=function(t,e,i,o){var n=t.style;n.flexDirection="column-reverse",n.justifyContent="center",n.alignItems="center",(n=e.style).paddingTop="",n.paddingBottom="",(n=i.style).display="",n.paddingBottom=o+"px",n.paddingTop="",n.paddingLeft="",n.paddingRight="",n.flexGrow=""},o.layoutFlexLeftEdge=function(t,e,i,o){var n=t.style;n.flexDirection="row",n.justifyContent="start",n.alignItems="center",(n=e.style).paddingTop="",n.paddingBottom="",(n=i.style).display="",n.paddingLeft=o+"px",n.paddingRight="",n.paddingTop="",n.paddingBottom="",n.flexGrow="1"},o.layoutFlexRightEdge=function(t,e,i,o){var n=t.style;n.flexDirection="row-reverse",n.justifyContent="start",n.alignItems="center",(n=e.style).paddingTop="",n.paddingBottom="",(n=i.style).display="",n.paddingRight=o+"px",n.paddingLeft="",n.paddingTop="",n.paddingBottom="",n.flexGrow="1"},o.layoutFlexTopEdge=function(t,e,i,o,n){var r=t.style;r.flexDirection="column",r.justifyContent="start",r.alignItems="center",(r=e.style).paddingTop=n+"px",r.paddingBottom="",(r=i.style).display="",r.paddingTop=o+"px",r.paddingBottom="",r.paddingLeft="",r.paddingRight="",r.flexGrow="1"},o.layoutFlexBottomEdge=function(t,e,i,o,n){var r=t.style;r.flexDirection="column-reverse",r.justifyContent="start",r.alignItems="center",(r=e.style).paddingBottom=n+"px",r.paddingTop="",(r=i.style).display="",r.paddingBottom=o+"px",r.paddingTop="",r.paddingLeft="",r.paddingRight="",r.flexGrow="1"},o.layoutFlexCenter=function(t,e,i){var o=t.style;o.flexDirection="row",o.justifyContent="center",o.alignItems="center",(o=e.style).paddingBottom="",o.paddingTop="",(o=i.style).display="none",o.paddingBottom="",o.paddingTop="",o.paddingLeft="",o.paddingRight="",o.flexGrow=""},o);function o(){}e.RenderHelper=i});t(Ct);Ct.RenderHelper;var xt=e(function(t,e){Object.defineProperty(e,"__esModule",{value:!0});var o=function(){this.commit=!0,this.value=void 0};e.RendererEditResult=o;var i,n=(i=re.Base,oe.__extends(r,i),r.getRendererStyle=function(t){var e=t.firstElementChild;if(e){if(e.classList){if(1<e.classList.length)return e.classList[1]}else{var i=e.className&&e.className.split(" ");if(i&&1<i.length)return i[1]}return e.className}},r.prototype._doDispose=function(){this._dom=null,this._index=null,i.prototype._doDispose.call(this)},r.prototype.clearAndDispose=function(){return this.clearContent(),this.dispose()},r.prototype.initContent=function(t,e,i){this._inited?this._index.assign(t):(this._dom=e,this._index=t.clone(),e.className=this._className=i,this._doInitContent(e),this._inited=!0)},r.prototype.initFormContent=function(t,e){this._inited||((this._dom=t).className=this._className=e,this._doInitContent(t),this._inited=!0)},r.prototype.clearContent=function(){this._inited&&(this._doClearContent(this._dom),this._dom.className=this._className="",this._inited=!1)},r.prototype.checkClassName=function(t){return t!=this._className},_dp(r,"grid",{get:function(){return this._index&&this._index.grid}}),_dp(r,"index",{get:function(){return this._index}}),_dp(r,"styleName",{get:function(){return"rg-renderer"}}),_dp(r,"showTooltip",{get:function(){return this._showTooltip},set:function(t){this._showTooltip=t}}),_dp(r,"refreshFocusChanged",{get:function(){return this._refreshFocusChanged},set:function(t){this._refreshFocusChanged=t}}),_dp(r,"itemClickable",{get:function(){return this._itemClickable}}),r.prototype.renderCell=function(t,e,i){this._doRenderCell(t,e,i,i.width-i.errorWidth-i.buttonWidth-i.editWidth-1,i.height-1)},r.prototype.getTooltip=function(t,e){if(this.showTooltip){var i=e.grid,o=i.body,n=e.column,r=o.getCellAt(t.item,n,!1),s=r&&this._makeText(i,r,t);return s||void 0}},r.prototype.canShowInnerFocus=function(){return!1},r.prototype.canEdit=function(){return!1},r.prototype.canEditClickAt=function(t){return!1},r.prototype.preventDefaultEditClick=function(t){t.preventDefault()},r.prototype.editClick=function(t,e){var i=new o;if(this._doEditClick(t,e,i))return i},r.prototype._doEditClick=function(t,e,i){return!1},r.prototype.preventDefaultClick=function(t){t.preventDefault()},r.prototype.canClick=function(t){return!1},r.prototype.canClickSpaceKey=function(t){return!1},r.prototype.click=function(t,e,i){return this._doClick(t,e,i)},r.prototype.itemClick=function(){this._doItemClick()},r.prototype._doItemClick=function(){},r.prototype._doClick=function(t,e,i){},r.prototype.canEditKey=function(t){return!1},r.prototype.editKey=function(t,e){var i=new o;if(this._doEditKey(t,e,i))return i},r.prototype._doEditKey=function(t,e,i){return!1},r.prototype._doInitContent=function(t){ne.Utils.setTextProp(t)},r.prototype._doClearContent=function(t){t[this._textProp]=""},r.prototype._doRenderCell=function(t,e,i,o,n){},r.prototype._changed=function(){this._dirty=!0},r.prototype._getValue=function(t,e,i){var o=e.item.dataRow;if(0<=o){var n=t.dataSource.getFieldIndex(i);if(0<=n)return t.dataSource.getValue(o,n)}},r.prototype._makeText=function(t,e,i){return e.getDisplayText(t,i)||""},r.prototype._clearHeight=function(){this._dom.style.height=""},r.prototype._setHeight=function(t){this._dom.style.height=0<=t?t+"px":""},r.prototype._isEmpty=function(t){return null==t||""==t||"number"==typeof t&&isNaN(t)},r);function r(){var t=i.call(this)||this;return t._showTooltip=!1,t._refreshFocusChanged=!1,t._textProp=ne.Utils.TextProp,t._inited=!1,t._dirty=!1,t._className="",t._itemClickable=!1,t}e.DataCellRenderer=n;var s,h,a,l=(s=n,oe.__extends(d,s),d.prototype._doDispose=function(){s.prototype._doDispose.call(this)},_dp(d,"type",{get:function(){return d.TYPE}}),d.prototype._doRenderCell=function(t,e,i,o,n){if(e instanceof mt.ValueCell)if(e.index.itemIndex!==t.topIndex)switch(e.getBlankState()){case lt.BlankState.BODY:case lt.BlankState.TAIL:this.$_setText("");break;default:this.$_setText(this._makeText(t,e,i))}else this.$_setText(this._makeText(t,e,i))},d.prototype.$_setText=function(t){this._dom[this._textProp]=t||""},d.TYPE="text",d.Default=new d,d);function d(){return s.call(this)||this}e.TextCellRenderer=l,(a=h=e.BarOrigin||(e.BarOrigin={})).DEFAULT="default",a.LEFT="left",a.RIGHT="right",a.TOP="top",a.BOTTOM="bottom";var u,_=(u=n,oe.__extends(c,u),c.prototype._doDispose=function(){u.prototype._doDispose.call(this)},_dp(c,"barStyle",{get:function(){return this._barStyle},set:function(t){t!=this._barStyle&&(this._barStyle=t,this._changed())}}),_dp(c,"rightBarStyle",{get:function(){return this._rightBarStyle},set:function(t){t!=this._rightBarStyle&&(this._rightBarStyle=t,this._changed())}}),_dp(c,"topBarStyle",{get:function(){return this._topBarStyle},set:function(t){t!=this._topBarStyle&&(this._topBarStyle=t,this._changed())}}),_dp(c,"bottomBarStyle",{get:function(){return this._bottomBarStyle},set:function(t){t!=this._bottomBarStyle&&(this._bottomBarStyle=t,this._changed())}}),_dp(c,"minimum",{get:function(){return this._minimum},set:function(t){t!=this._minimum&&(this._minimum=t,this._changed())}}),_dp(c,"maximum",{get:function(){return this._maximum},set:function(t){t!=this._maximum&&(this._maximum=t,this._changed())}}),_dp(c,"showLabel",{get:function(){return this._showLabel},set:function(t){t!=this._showLabel&&(this._showLabel=t,this._changed())}}),_dp(c,"barWidth",{get:function(){return this._barWidth},set:function(t){t!=this._barWidth&&("string"==typeof(this._barWidth=t)&&"%"==t.charAt(t.length-1)?this._percentShapeWidth=parseFloat(t.substring(0,t.length-1)):this._percentShapeWidth=NaN,this._changed())}}),_dp(c,"origin",{get:function(){return this._origin},set:function(t){t!=this._origin&&(this._origin=t,this._changed())}}),_dp(c,"absoluteValue",{get:function(){return this._absoluteValue},set:function(t){t!=this._absoluteValue&&(this._absoluteValue=t,this._changed())}}),_dp(c,"type",{get:function(){return c.TYPE}}),_dp(c,"styleName",{get:function(){return c.STYLE_NAME}}),c.prototype._doInitContent=function(t){var e,i,o=ne.getDoc(t);t.childElementCount,t[this._textProp]="",(e=this._div=o.createElement("div")).style.position="relative",t.appendChild(e);var n=(i=this._span=o.createElement("span")).style;n.display="inline-block",n.position="absolute",n.top="50%",n.right="50%",n.msTransform=i.style.transform="translate(50%, -50%)",t.appendChild(i)},c.prototype._doRenderCell=function(t,e,i,o,n){var r=this._div,s=r.style,a=this._absoluteValue?Math.abs(e.value):e.value,l=Math.min(1,(a-this._minimum)/(this._maximum-this._minimum));switch(isNaN(l)&&(l=0),this._origin){case h.LEFT:this.$_renderLeft(s,l),r.className=this.barStyle||c.BAR_STYLE;break;case h.RIGHT:this.$_renderRight(s,l),r.className=this.rightBarStyle||c.BAR_RIGHT_STYLE;break;case h.TOP:this.$_renderTop(s,l),r.className=this.topBarStyle||c.BAR_TOP_STYLE;break;case h.BOTTOM:this.$_renderBottom(s,l),r.className=this.bottomBarStyle||c.BAR_BOTTOM_STYLE;break;default:this.$_renderLeft(s,l),r.className=this.barStyle||c.BAR_STYLE}this.$_setText(this._makeText(t,e,i))},c.prototype.$_renderLeft=function(t,e){if(t.left="0px",t.width=100*e+"%",isNaN(this._percentShapeWidth)){var i=this._barWidth;t.top="50%",t.msTransform=t.transform="translate(0%,-50%)",t.height=i+"px"}else t.top=(100-this._percentShapeWidth)/2+"%",t.height=this._percentShapeWidth+"%"},c.prototype.$_renderRight=function(t,e){if(t.left=100*(1-e)+"%",t.width=100*e+"%",isNaN(this._percentShapeWidth)){var i=this._barWidth;t.top="50%",t.msTransform=t.transform="translate(0%,-50%)",t.height=i+"px"}else t.top=(100-this._percentShapeWidth)/2+"%",t.height=this._percentShapeWidth+"%"},c.prototype.$_renderTop=function(t,e){if(t.top="0px",t.height=100*e+"%",isNaN(this._percentShapeWidth)){var i=this._barWidth;t.left="50%",t.msTransform=t.transform="translate(-50%,0%)",t.width=i+"px"}else t.left=(100-this._percentShapeWidth)/2+"%",t.width=this._percentShapeWidth+"%"},c.prototype.$_renderBottom=function(t,e){if(t.top=100*(1-e)+"%",t.height=100*e+"%",isNaN(this._percentShapeWidth)){var i=this._barWidth;t.left="50%",t.msTransform=t.transform="translate(-50%,0%)",t.width=i+"px"}else t.left=(100-this._percentShapeWidth)/2+"%",t.width=this._percentShapeWidth+"%"},c.prototype.$_setText=function(t){this._span[this._textProp]=t||""},c.TYPE="bar",c.STYLE_NAME="rg-renderer "+(c.STYLE="rg-bar-renderer"),c.BAR_STYLE="rg-bar-renderer-bar",c.BAR_RIGHT_STYLE="rg-bar-renderer-bar-right",c.BAR_TOP_STYLE="rg-bar-renderer-bar-top",c.BAR_BOTTOM_STYLE="rg-bar-renderer-bar-bottom",c);function c(){var t=u.call(this)||this;return t._barStyle=c.BAR_STYLE,t._rightBarStyle=c.BAR_RIGHT_STYLE,t._topBarStyle=c.BAR_TOP_STYLE,t._bottomBarStyle=c.BAR_BOTTOM_STYLE,t._minimum=0,t._maximum=100,t._barWidth="80%",t._showLabel=!1,t._origin=h.LEFT,t._absoluteValue=!1,t._percentShapeWidth=80,t}e.BarCellRenderer=_;var p,f=(p=n,oe.__extends(g,p),g.prototype._doDispose=function(){p.prototype._doDispose.call(this)},_dp(g,"imageMap",{get:function(){return this._imageMap},set:function(t){t!==this._imageMap&&(this._imageMap=t,this._changed())}}),_dp(g,"imageCallback",{get:function(){return this._imageCallback},set:function(t){t!==this._imageCallback&&(this._imageCallback=t,this._changed())}}),_dp(g,"imageField",{get:function(){return this._imageField},set:function(t){t!=this._imageField&&(this._imageField=t,this._changed())}}),_dp(g,"titleField",{get:function(){return this._titleField},set:function(t){t!=this._titleField&&(this._titleField=t,this._changed())}}),_dp(g,"titleCallback",{get:function(){return this._titleCallback},set:function(t){t!==this._titleCallback&&(this._titleCallback=t,this._changed())}}),_dp(g,"imageHeight",{get:function(){return this._imageHeight},set:function(t){t!=this._imageHeight&&(this._imageHeight=t,this._changed())}}),_dp(g,"spaceKey",{get:function(){return this._spaceKey},set:function(t){this._spaceKey=t}}),_dp(g,"type",{get:function(){return g.TYPE}}),_dp(g,"styleName",{get:function(){return g.STYLE_NAME}}),g.prototype._doInitContent=function(t){var e=this._img=ne.getDoc(t).createElement("img");e.style.verticalAlign="middle",t.appendChild(e)},g.prototype._doRenderCell=function(t,e,i,o,n){var r=this._img,s=this.$_getImageUrl(t,e);if(s){r.src=s;var a=this.$_getTitle(t,e);a?r.title=a:delete r.title,isNaN(this._imageHeight)?r.style.height="":r.style.height=this._imageHeight+"px"}else r.removeAttribute("src"),r.removeAttribute("title")},g.prototype.canClick=function(t){return t.target===this._img},g.prototype._doClick=function(t,e,i){if(e.target===this._img||"keydown"===e.type)return{type:this.type,value:t.value}},g.prototype.canClickSpaceKey=function(t){return this.spaceKey&&32==t.keyCode&&!t.ctrlKey&&!t.shiftKey&&!t.altKey},g.prototype.$_getImageUrl=function(t,e){var i="",o=this._imageCallback;return o&&(i=o.call(this,t.handler,e)),!i&&this._imageMap&&(i=this._imageMap[e.value]),!i&&this._imageField&&(i=this._getValue(t,e,this._imageField)),i||""},g.prototype.$_getTitle=function(t,e){var i="",o=this._titleCallback;return o&&(i=o.call(this,t.handler,e)),!i&&this._titleField&&(i=this._getValue(t,e,this._titleField)),i||""},g.TYPE="image",g.STYLE_NAME="rg-renderer "+(g.STYLE="rg-image-renderer"),g);function g(){var t=p.call(this)||this;return t._spaceKey=!1,t._itemClickable=!0,t}e.ImageCellRenderer=f;var m,y=(m=n,oe.__extends(v,m),v.prototype._doDispose=function(){m.prototype._doDispose.call(this)},_dp(v,"itemGap",{get:function(){return this._itemGap},set:function(t){t!=this._itemGap&&(this._itemGap=t,this._changed())}}),_dp(v,"verticalEdgePad",{get:function(){return this._verticalEdgePad},set:function(t){t!=this._verticalEdgePad&&(this._verticalEdgePad=t,this._changed())}}),_dp(v,"textVisible",{get:function(){return this._textVisible},set:function(t){t!=this._textVisible&&(this._textVisible=t,this._changed())}}),v.prototype._doClearContent=function(t){m.prototype._doClearContent.call(this,t),this._reset()},v.prototype._reset=function(){this._oldLocation=void 0,this._imgHeight=this._imgWidth=this._imgLeft=this._imgRight=this._imgTop=this._imgBottom=this._spanPadRight=this._spanPadLeft=NaN,this._imgFixed=this._imgMiddle=this._imgCenter=this._spanVis=this._spanCenter=this._spanText=void 0},v.prototype.$_setImgFixed=function(t,e,i){e==this._imgFixed&&!i||(this._imgFixed=e,t.style.position=e?"absolute":"")},v.prototype.$_setImgMiddle=function(t,e,i){e==this._imgMiddle&&!i||(this._imgMiddle=e,t.style.verticalAlign=e?"middle":"")},v.prototype.$_setImgCenter=function(t,e,i){e==this._imgCenter&&!i||(this._imgCenter=e,t.style.textAlign=e?"center":"")},v.prototype.$_setImgWidth=function(t,e,i){(e=isNaN(e)?0:e)==this._imgWidth&&!i||(this._imgWidth=e,t.style.width=0<e?e+"px":"")},v.prototype.$_setImgHeight=function(t,e,i){(e=isNaN(e)?0:e)==this._imgHeight&&!i||(this._imgHeight=e,t.style.height=0<e?e+"px":"")},v.prototype.$_setImgBounds=function(t,e,i,o,n,r){e==this._imgTop&&!r||(this._imgTop=e,t.style.top=0<e?e+"px":""),i==this._imgLeft&&!r||(this._imgLeft=i,t.style.left=0<i?i+"px":""),o==this._imgBottom&&!r||(this._imgBottom=o,t.style.bottom=0<o?o+"px":""),n==this._imgRight&&!r||(this._imgRight=n,t.style.right=0<n?n+"px":"")},v.prototype.$_clearImgBounds=function(t,e){(0<this._imgTop||e)&&(this._imgTop=0,t.style.top=""),(0<this._imgLeft||e)&&(this._imgLeft=0,t.style.left=""),(0<this._imgBottom||e)&&(this._imgBottom=0,t.style.bottom=""),(0<this._imgRight||e)&&(this._imgRight=0,t.style.right="")},v.prototype.$_setSpanVis=function(t){t!=this._spanVis&&(this._spanVis=t,this._span.style.display=t?"":"none")},v.prototype.$_setSpanPadLeft=function(t){t!=this._spanPadLeft&&(this._spanPadLeft=t,this._span.style.paddingLeft=0<t?t+"px":"")},v.prototype.$_setSpanPadRight=function(t){t!=this._spanPadRight&&(this._spanPadRight=t,this._span.style.paddingRight=0<t?t+"px":"")},v.prototype.$_setSpanCenter=function(t,e){if(void 0===e&&(e=0),t!=this._spanCenter){var i=this._span.style;(this._spanCenter=t)?(i.left="50%",i.top=50+e+"%",i.transform="translate(-50%, -50%)",i.position="absolute"):(i.left="",i.top="",i.transform="",i.position="")}},v.prototype.$_setSpanText=function(t){if(t!=this._spanText){this._spanText=t;var e=this._textVisible?this._spanText:void 0;this._span[this._textProp]=e}},v.prototype.$_layoutLeft=function(t,e,i,o){this._reversed&&(t.insertBefore(e,i),this._reversed=!1),this._splitted&&(t.removeChild(this._br),this._splitted=!1),this.$_setImgFixed(e,!1,o),this.$_setImgMiddle(e,!0,o),this.$_setImgCenter(e,!1,o),this.$_clearImgBounds(e,o),this.$_setSpanVis(!0),this.$_setSpanCenter(!1),this.$_setSpanPadLeft(this._itemGap),this.$_setSpanPadRight(0)},v.prototype.$_layoutRight=function(t,e,i,o){this._reversed||(t.insertBefore(i,e),this._reversed=!0),this._splitted&&(t.removeChild(this._br),this._splitted=!1),this.$_setImgFixed(e,!1,o),this.$_setImgMiddle(e,!0,o),this.$_setImgCenter(e,!1,o),this.$_clearImgBounds(e,o),this.$_setSpanVis(!0),this.$_setSpanCenter(!1),this.$_setSpanPadLeft(0),this.$_setSpanPadRight(4)},v.prototype.$_layoutTop=function(t,e,i,o){this._reversed&&(t.insertBefore(e,i),this._reversed=!1),this._splitted||(t.insertBefore(this._br,i),this._splitted=!0),this.$_setImgFixed(e,!1,o),this.$_setImgMiddle(e,!1,o),this.$_setImgCenter(e,!1,o),this.$_clearImgBounds(e,o),this.$_setSpanVis(!0),this.$_setSpanCenter(!1),this.$_setSpanPadLeft(0),this.$_setSpanPadRight(0)},v.prototype.$_layoutBottom=function(t,e,i,o){this._reversed||(t.insertBefore(i,e),this._reversed=!0),this._splitted||(t.insertBefore(this._br,e),this._splitted=!0),this.$_setImgFixed(e,!1,o),this.$_setImgMiddle(e,!1,o),this.$_setImgCenter(e,!1,o),this.$_clearImgBounds(e,o),this.$_setSpanVis(!0),this.$_setSpanCenter(!1),this.$_setSpanPadLeft(0),this.$_setSpanPadRight(0)},v.prototype.$_layoutLeftEdge=function(t,e,i,o,n){this._reversed&&(t.insertBefore(e,i),this._reversed=!1),this._splitted&&(t.removeChild(this._br),this._splitted=!1),this.$_setImgFixed(e,!0,n),this.$_setImgMiddle(e,!0,n),this.$_setImgCenter(e,!1,n),this.$_setImgBounds(e,0,2,0,0,n),this.$_setSpanVis(!0),this.$_setSpanCenter(!1),this.$_setSpanPadLeft(0),this.$_setSpanPadRight(0),i.style.marginLeft=isNaN(o)?"":o+"px"},v.prototype.$_layoutRightEdge=function(t,e,i,o,n){this._reversed||(t.insertBefore(i,e),this._reversed=!0),this._splitted&&(t.removeChild(this._br),this._splitted=!1),this.$_setImgFixed(e,!0,n),this.$_setImgMiddle(e,!0,n),this.$_setImgCenter(e,!1,n),this.$_setImgBounds(e,0,0,0,2,n),this.$_setSpanVis(!0),this.$_setSpanCenter(!1),this.$_setSpanPadLeft(0),this.$_setSpanPadRight(o)},v.prototype.$_layoutTopEdge=function(t,e,i,o,n,r,s,a){this._reversed&&(t.insertBefore(e,i),this._reversed=!1),this._splitted||(t.insertBefore(this._br,i),this._splitted=!0),this.$_setImgFixed(e,!0,a),this.$_setImgMiddle(e,!1,a),this.$_setImgCenter(e,!1,a),this.$_setImgBounds(e,2,(o-r)/2,0,0,a),this.$_setSpanVis(!0),this.$_setSpanCenter(!0,s*((n-s)/n)),this.$_setSpanPadLeft(0),this.$_setSpanPadRight(0)},v.prototype.$_layoutBottomEdge=function(t,e,i,o,n,r,s,a){this._reversed||(t.insertBefore(i,e),this._reversed=!0),this._splitted||(t.insertBefore(this._br,e),this._splitted=!0),this.$_setImgFixed(e,!0,a),this.$_setImgMiddle(e,!1,a),this.$_setImgCenter(e,!0,a),this.$_setImgBounds(e,0,(o-r)/2,2,0,a),this.$_setSpanVis(!0),this.$_setSpanCenter(!0,(n-s)/n*-s),this.$_setSpanPadLeft(0),this.$_setSpanPadRight(0)},v.prototype.$_layoutCenter=function(t,e,i,o){this._reversed&&(t.insertBefore(e,i),this._reversed=!1),this._splitted&&(t.removeChild(this._br),this._splitted=!1),this.$_setImgFixed(e,!1,o),this.$_setImgMiddle(e,!0,o),this.$_setImgCenter(e,!0,o),this.$_clearImgBounds(e,o),this.$_setSpanVis(!1),this.$_setSpanCenter(!0),this.$_setSpanPadLeft(0),this.$_setSpanPadRight(0)},v);function v(t,e){void 0===t&&(t=0),void 0===e&&(e=0);var i=m.call(this)||this;return i._itemGap=4,i._verticalEdgePad=2,i._textVisible=!0,i._reversed=!1,i._splitted=!1,i._imgFixed=!1,i._imgMiddle=!1,i._imgCenter=!1,i._imgHeight=16,i._imgWidth=16,i._imgLeft=0,i._imgRight=0,i._imgTop=0,i._imgBottom=0,i._spanVis=void 0,i._spanPadRight=0,i._spanPadLeft=0,i._spanCenter=!1,i._spanText="",i._imgWidth=t,i._imgHeight=e,i}e.FlexibleCellRenderer=y;var w,C=(w=y,oe.__extends(x,w),x.prototype._doDispose=function(){w.prototype._doDispose.call(this)},_dp(x,"iconMap",{get:function(){return this._iconMap},set:function(t){t!==this._iconMap&&(this._iconMap=t,this._changed())}}),_dp(x,"iconCallback",{get:function(){return this._iconCallback},set:function(t){t!==this._iconCallback&&(this._iconCallback=t,this._changed())}}),_dp(x,"iconUrl",{get:function(){return this._iconUrl},set:function(t){this._iconUrl=t,this._changed()}}),_dp(x,"iconField",{get:function(){return this._iconField},set:function(t){t!=this._iconField&&(this._iconField=t,this._changed())}}),_dp(x,"iconLocation",{get:function(){return this._iconLocation},set:function(t){t!=this._iconLocation&&(this._oldLocation=this._iconLocation,this._iconLocation=t,this._changed())}}),_dp(x,"iconWidth",{get:function(){return this._iconWidth},set:function(t){t!=this._iconWidth&&(this._iconWidth=t,this._changed())}}),_dp(x,"iconHeight",{get:function(){return this._iconHeight},set:function(t){t!=this._iconHeight&&(this._iconHeight=t,this._changed())}}),_dp(x,"spaceKey",{get:function(){return this._spaceKey},set:function(t){this._spaceKey=t}}),_dp(x,"type",{get:function(){return x.TYPE}}),_dp(x,"styleName",{get:function(){return x.STYLE_NAME+" rg-icon-"+this.$_getStyleName().toLowerCase()}}),x.prototype._doInitContent=function(t){var e=ne.getDoc(t),i=this._img=e.createElement("img");t.appendChild(i);var o=this._span=e.createElement("span");t.appendChild(o),this._br=e.createElement("br")},x.prototype._reset=function(){w.prototype._reset.call(this),this._imgSrc=this._splitted=this._reversed=void 0},x.prototype._doRenderCell=function(t,e,i,o,n){var r=this._img,s=this._span;if(this.$_setImgWidth(r,this._iconWidth,!1),this.$_setImgHeight(r,this._iconHeight,!1),this.$_setImgSrc(this.$_getIconUrl(t,e)),this.$_setSpanText(this._makeText(t,e,i)),this._oldLocation!=this._iconLocation){switch(this._iconLocation){case lt.IconLocation.LEFT:this.$_layoutLeft(this._dom,r,s,!1);break;case lt.IconLocation.RIGHT:this.$_layoutRight(this._dom,r,s,!1);break;case lt.IconLocation.TOP:this.$_layoutTop(this._dom,r,s,!1);break;case lt.IconLocation.BOTTOM:this.$_layoutBottom(this._dom,r,s,!1);break;case lt.IconLocation.LEFT_EDGE:this.$_layoutLeftEdge(this._dom,r,s,this._iconWidth,!1);break;case lt.IconLocation.RIGHT_EDGE:this.$_layoutRightEdge(this._dom,r,s,this._iconWidth,!1);break;case lt.IconLocation.TOP_EDGE:this.$_layoutTopEdge(this._dom,r,s,o,n,this._iconWidth,this._iconHeight,!1);break;case lt.IconLocation.BOTTOM_EDGE:this.$_layoutBottomEdge(this._dom,r,s,o,n,this._iconWidth,this._iconHeight,!1);break;case lt.IconLocation.CENTER:this.$_layoutCenter(this._dom,r,s,!1);break;default:this.$_layoutLeft(this._dom,r,s,!1)}this._oldLocation=this._iconLocation}this._iconLocation==lt.IconLocation.TOP_EDGE||this._iconLocation==lt.IconLocation.BOTTOM_EDGE?this._setHeight(n):this._clearHeight()},x.prototype.canClick=function(t){return t.target===this._img},x.prototype.canClickSpaceKey=function(t){return this.spaceKey&&32==t.keyCode&&!t.ctrlKey&&!t.shiftKey&&!t.altKey},x.prototype._doClick=function(t,e,i){var o={};if(e.target===this._img||"keydown"===e.type)return o.type=this.type,o.value=t.value,o},x.prototype.$_getIconUrl=function(t,e){var i=void 0,o=this._iconCallback;return o&&(i=o.call(this,t.handler,e)),void 0===i&&this._iconMap&&(i=this._iconMap[e.value]),void 0===i&&this._iconField&&(i=this._getValue(t,e,this._iconField)),void 0===i&&(i=this._iconUrl),i||""},x.prototype.$_setImgSrc=function(t){t!=this._imgSrc&&((this._imgSrc=t)?this._img.src=t:this._img.removeAttribute("src"))},x.prototype.$_getStyleName=function(){return String(this._iconLocation)||String(lt.IconLocation.LEFT)},x.prototype.preventDefaultClick=function(t){event.target===this._img&&(event.preventDefault(),event.stopImmediatePropagation())},x.TYPE="icon",x.STYLE_NAME="rg-renderer "+(x.STYLE="rg-icon-renderer"),x);function x(){var t=w.call(this)||this;return t._iconWidth=NaN,t._iconHeight=NaN,t._iconLocation=lt.IconLocation.LEFT,t._spaceKey=!1,t._imgSrc="",t._itemClickable=!0,t}e.IconCellRenderer=C;var b,I=(b=C,oe.__extends(E,b),E.prototype._doInitContent=function(t){t.style.setProperty("display","flex","important"),b.prototype._doInitContent.call(this,t)},E.prototype.$_layoutLeft=function(t,e,i){Ct.RenderHelper.layoutFlexLeft(t,e,i,this._itemGap)},E.prototype.$_layoutRight=function(t,e,i){Ct.RenderHelper.layoutFlexRight(t,e,i,this._itemGap)},E.prototype.$_layoutTop=function(t,e,i){Ct.RenderHelper.layoutFlexTop(t,e,i,this._itemGap)},E.prototype.$_layoutBottom=function(t,e,i){Ct.RenderHelper.layoutFlexBottom(t,e,i,this._itemGap)},E.prototype.$_layoutLeftEdge=function(t,e,i){Ct.RenderHelper.layoutFlexLeftEdge(t,e,i,this._itemGap)},E.prototype.$_layoutRightEdge=function(t,e,i){Ct.RenderHelper.layoutFlexRightEdge(t,e,i,this._itemGap)},E.prototype.$_layoutTopEdge=function(t,e,i){Ct.RenderHelper.layoutFlexTopEdge(t,e,i,this._itemGap,this._verticalEdgePad)},E.prototype.$_layoutBottomEdge=function(t,e,i){Ct.RenderHelper.layoutFlexBottomEdge(t,e,i,this._itemGap,this._verticalEdgePad)},E.prototype.$_layoutCenter=function(t,e,i){Ct.RenderHelper.layoutFlexCenter(t,e,i)},E);function E(){return null!==b&&b.apply(this,arguments)||this}e.FlexIconCellRenderer=I;var S,R=(S=y,oe.__extends(D,S),D.prototype._doDispose=function(){S.prototype._doDispose.call(this)},_dp(D,"getCheckedCallback",{get:function(){return this._getCheckedCallback},set:function(t){t!==this._getCheckedCallback&&(this._getCheckedCallback=t,this._changed())}}),_dp(D,"setCheckedCallback",{get:function(){return this._setCheckedCallback},set:function(t){t!==this._setCheckedCallback&&(this._setCheckedCallback=t,this._changed())}}),_dp(D,"trueValues",{get:function(){return this._trueValues},set:function(t){t!==this._trueValues&&(this._trueValues=t,this.$_resetValues(),this._changed())}}),_dp(D,"falseValues",{get:function(){return this._falseValues},set:function(t){t!==this._falseValues&&(this._falseValues=t,this.$_resetValues(),this._changed())}}),_dp(D,"strictValue",{get:function(){return this._strictValue},set:function(t){t!=this._strictValue&&(this._strictValue=t,this._changed())}}),_dp(D,"threeStates",{get:function(){return this._threeStates},set:function(t){t!=this._threeStates&&(this._threeStates=t,this._changed())}}),_dp(D,"spaceKey",{get:function(){return this._spaceKey},set:function(t){this._spaceKey=t}}),_dp(D,"checkLocation",{get:function(){return this._checkLocation},set:function(t){t!=this._checkLocation&&(this._checkLocation=t,this._changed())}}),_dp(D,"useImages",{get:function(){return this._useImages},set:function(t){t!=this._useImages&&(this._useImages=t,this._changed())}}),_dp(D,"editable",{get:function(){return this._editable},set:function(t){this._editable=t}}),_dp(D,"showInnerFocus",{get:function(){return this._showInnerFocus},set:function(t){this._showInnerFocus=t}}),_dp(D,"type",{get:function(){return D.TYPE}}),_dp(D,"styleName",{get:function(){return D.STYLE_NAME}}),D.prototype.canEdit=function(){return this._editable},D.prototype.canShowInnerFocus=function(){return this._showInnerFocus&&this._editable},D.prototype._doInitContent=function(t){var e=ne.getDoc(t),i=this._check=e.createElement("input");i.type="checkbox",i.tabIndex=-1,i.style.display="inline-block";var o=this._span=e.createElement("span");t.appendChild(i),t.appendChild(o);var n=this._image=e.createElement("span");n.className=this._checkedStyle,n.style.display="inline-block",this._br=e.createElement("br")},D.prototype._reset=function(){S.prototype._reset.call(this),this._splitted=this._reversed=void 0,this._oldUsed=!1},D.prototype._doRenderCell=function(t,e,i,o,n){var r=this._check,s=this._image,a=this._span,l=r;this._imgWidth=t.container.measureCheckWidth(),this._imgHeight=t.container.measureCheckHeight();var h=this.$_getChecked(t,e.value,e.index,this._getCheckedCallback);if(r.checked=h,r.indeterminate=this._threeStates&&void 0===h,this._useChanged=this._useImages!==this._oldUsed,this._useChanged&&(this._oldUsed?(this._dom.removeChild(s),this._check.style.display="inline-block"):(this._dom.insertBefore(s,this._check),this._check.style.display="none")),this._oldUsed=this._useImages,this._useImages&&(s.className=h?this._checkedStyle:void 0===h&&this.threeStates?this._intermediateStyle:this._uncheckedStyle,l=s),a[this._textProp]=this._makeText(t,e,i),this._oldLocation!=this._checkLocation){switch(this._checkLocation){case lt.IconLocation.LEFT:this.$_layoutLeft(this._dom,l,a);break;case lt.IconLocation.RIGHT:this.$_layoutRight(this._dom,l,a);break;case lt.IconLocation.TOP:this.$_layoutTop(this._dom,l,a);break;case lt.IconLocation.BOTTOM:this.$_layoutBottom(this._dom,l,a);break;case lt.IconLocation.LEFT_EDGE:this.$_layoutLeftEdge(this._dom,l,a);break;case lt.IconLocation.RIGHT_EDGE:this.$_layoutRightEdge(this._dom,l,a);break;case lt.IconLocation.TOP_EDGE:this.$_layoutTopEdge(this._dom,l,a,o,n);break;case lt.IconLocation.BOTTOM_EDGE:this.$_layoutBottomEdge(this._dom,l,a,o,n);break;case lt.IconLocation.CENTER:this.$_layoutCenter(this._dom,l,a);break;default:this.$_layoutLeft(this._dom,l,a)}this._oldLocation=this._checkLocation}this._checkLocation==lt.IconLocation.TOP_EDGE||this._checkLocation==lt.IconLocation.BOTTOM_EDGE?this._setHeight(n):this._clearHeight()},D.prototype.canEditClickAt=function(t){return this.preventDefaultEditClick(t),t.target===this._check||t.target===this._image},D.prototype.preventDefaultEditClick=function(t){t.target===this._check&&t.preventDefault()},D.prototype._doEditClick=function(t,e,i){return e.target===this._check||e.target===this._image?(this.$_edit(i),!0):void 0},D.prototype.canEditKey=function(t){return this.spaceKey&&32==t.keyCode&&!t.ctrlKey&&!t.shiftKey&&!t.altKey},D.prototype._doEditKey=function(t,e,i){return this.$_edit(i),!0},D.prototype.$_resetValues=function(){var t;if(this._values={},this._falseValues)if(t=this._falseValues.split(",")){var e=void 0;this._falseValue=0<(e=t.length)?t[0]:void 0;for(var i=0;i<e;i++)this._values[t[i]]=!1}else this._falseValue=void 0;if(this._trueValues)if(t=this._trueValues.split(","))for(e=void 0,this._trueValue=0<(e=t.length)?t[0]:void 0,i=0;i<e;i++)this._values[t[i]]=!0;else this._trueValue=void 0},D.prototype.$_getChecked=function(t,e,i,o){if(o)return o(t.handler,i.itemIndex,i.dataColumn,e);if("boolean"==typeof e)return e;var n=String(e);return this._values.hasOwnProperty(n)?this._values[n]:this._threeStates&&(this._strictValue||""==e||null==e)?void 0:Boolean(e)},D.prototype.$_edit=function(t){var e,i=this.index,o=i.grid,n=(this._check,o.body.getCell(i,!1)),r=n.value,s=(n.dataColumn.dataIndex,r);e=!(s=this.$_getChecked(o,s,i,this._getCheckedCallback))&&(void 0===s||!this._threeStates||void 0);var a=this._setCheckedCallback;a?e=a(o.handler,i.itemIndex,i.dataColumn,r,e):void 0!==this._trueValue&&e?e=this._trueValue:void 0!==this._falseValue&&!1===e&&(e=this._falseValue),t.value=e},D.prototype.$_layoutLeft=function(t,e,i){var o=this._useImages,n=o?this._image:e;S.prototype.$_layoutLeft.call(this,t,n,i,o)},D.prototype.$_layoutRight=function(t,e,i){var o=this._useImages,n=o?this._image:e;S.prototype.$_layoutRight.call(this,t,n,i,o)},D.prototype.$_layoutTop=function(t,e,i){var o=this._useImages,n=o?this._image:e;S.prototype.$_layoutTop.call(this,t,n,i,o)},D.prototype.$_layoutBottom=function(t,e,i){var o=this._useImages,n=o?this._image:e;S.prototype.$_layoutBottom.call(this,t,n,i,o)},D.prototype.$_layoutLeftEdge=function(t,e,i){var o=this._useImages,n=o?this._image:e;S.prototype.$_layoutLeftEdge.call(this,t,n,i,this._imgWidth,o)},D.prototype.$_layoutRightEdge=function(t,e,i){var o=this._useImages,n=o?this._image:e;S.prototype.$_layoutRightEdge.call(this,t,n,i,this._imgWidth,o)},D.prototype.$_layoutTopEdge=function(t,e,i,o,n){var r=this._useImages,s=r?this._image:e;S.prototype.$_layoutTopEdge.call(this,t,s,i,o,n,this._imgWidth,this._imgHeight,r)},D.prototype.$_layoutBottomEdge=function(t,e,i,o,n){var r=this._useImages,s=r?this._image:e;S.prototype.$_layoutBottomEdge.call(this,t,s,i,o,n,this._imgWidth,this._imgHeight,r)},D.prototype.$_layoutCenter=function(t,e,i){var o=this._useImages,n=o?this._image:e;S.prototype.$_layoutCenter.call(this,t,n,i,o)},D.prototype.$_setImageMiddle=function(t,e,i){e==this._imgMiddle&&!i||(this._imgMiddle=e)},D.prototype.$_getStyleName=function(){return String(this._checkLocation)||String(lt.IconLocation.LEFT)},D.TYPE="check",D.STYLE_NAME="rg-renderer "+(D.STYLE="rg-check-renderer"),D.CHECKED_STYLE="rg-check-renderer-checked",D.UNCHECKED_STYLE="rg-check-renderer-unchecked",D.INTERMEDIATE_STYLE="rg-check-renderer-intermediate",D);function D(){var t=S.call(this,16,16)||this;return t._strictValue=!1,t._threeStates=!1,t._checkLocation=lt.IconLocation.CENTER,t._useImages=!1,t._checkedStyle=D.CHECKED_STYLE,t._uncheckedStyle=D.UNCHECKED_STYLE,t._intermediateStyle=D.INTERMEDIATE_STYLE,t._editable=!0,t._spaceKey=!0,t._showInnerFocus=!1,t._oldUsed=!1,t._useChanged=!1,t._values={},t}e.CheckCellRenderer=R;var T,k=(T=R,oe.__extends(M,T),M.prototype._doInitContent=function(t){t.style.setProperty("display","flex","important"),T.prototype._doInitContent.call(this,t)},M.prototype.$_layoutLeft=function(t,e,i){Ct.RenderHelper.layoutFlexLeft(t,e,i,this._itemGap)},M.prototype.$_layoutRight=function(t,e,i){Ct.RenderHelper.layoutFlexRight(t,e,i,this._itemGap)},M.prototype.$_layoutTop=function(t,e,i){Ct.RenderHelper.layoutFlexTop(t,e,i,this._itemGap)},M.prototype.$_layoutBottom=function(t,e,i){Ct.RenderHelper.layoutFlexBottom(t,e,i,this._itemGap)},M.prototype.$_layoutLeftEdge=function(t,e,i){Ct.RenderHelper.layoutFlexLeftEdge(t,e,i,this._itemGap)},M.prototype.$_layoutRightEdge=function(t,e,i){Ct.RenderHelper.layoutFlexRightEdge(t,e,i,this._itemGap)},M.prototype.$_layoutTopEdge=function(t,e,i,o,n){Ct.RenderHelper.layoutFlexTopEdge(t,e,i,this._itemGap,this._verticalEdgePad)},M.prototype.$_layoutBottomEdge=function(t,e,i,o,n){Ct.RenderHelper.layoutFlexBottomEdge(t,e,i,this._itemGap,this._verticalEdgePad)},M.prototype.$_layoutCenter=function(t,e,i){Ct.RenderHelper.layoutFlexCenter(t,e,i)},M);function M(){return null!==T&&T.apply(this,arguments)||this}e.FlexCheckCellRenderer=k;var L,F=(L=n,oe.__extends(V,L),V.prototype._doDispose=function(){L.prototype._doDispose.call(this)},_dp(V,"buttonStyle",{get:function(){return this._buttonStyle},set:function(t){t!=this._buttonStyle&&(this._buttonStyle=t,this._changed())}}),_dp(V,"hideWhenEmpty",{get:function(){return this._hideWhenEmpty},set:function(t){t!=this._hideWhenEmpty&&(this._hideWhenEmpty=t,this._changed())}}),_dp(V,"spaceKey",{get:function(){return this._spaceKey},set:function(t){this._spaceKey=t}}),_dp(V,"type",{get:function(){return V.TYPE}}),_dp(V,"styleName",{get:function(){return V.STYLE_NAME}}),V.prototype._doInitContent=function(t){var e=this._button=ne.getDoc(t).createElement("button");e.type="button",e.tabIndex=-1,e.style.display="inline-block",t.appendChild(e)},V.prototype._doRenderCell=function(t,e,i,o,n){var r=this._button;r[this._textProp]=this._makeText(t,e,i),r.setAttribute("class",this._buttonStyle),this._hideWhenEmpty&&this._isEmpty(e.value)?r.style.visibility="hidden":r.style.visibility="visible"},V.prototype.canClick=function(t){return t.target===this._button},V.prototype.canClickSpaceKey=function(t){return this.spaceKey&&32==t.keyCode&&!t.ctrlKey&&!t.shiftKey&&!t.altKey},V.prototype._doClick=function(t,e,i){if(e.target===this._button||"keydown"===e.type)return{type:this.type,value:t.value}},V.prototype._doItemClick=function(){this._button.click()},V.TYPE="button",V.STYLE_NAME="rg-renderer "+(V.STYLE="rg-button-renderer"),V.BUTTON_STYLE="rg-button-renderer-button",V);function V(){var t=L.call(this)||this;return t._buttonStyle=V.BUTTON_STYLE,t._hideWhenEmpty=!0,t._spaceKey=!0,t._itemClickable=!0,t}e.ButtonCellRenderer=F;var O,N=(O=n,oe.__extends(P,O),P.prototype._doDispose=function(){O.prototype._doDispose.call(this)},_dp(P,"baseUrl",{get:function(){return this._baseUrl},set:function(t){t!=this._baseUrl&&(this._baseUrl=t,this._changed())}}),_dp(P,"linkField",{get:function(){return this._linkField},set:function(t){t!=this._linkField&&(this._linkField=t,this._changed())}}),_dp(P,"urlCallback",{get:function(){return this._urlCallback},set:function(t){t!==this._urlCallback&&(this._urlCallback=t,this._changed())}}),_dp(P,"titleField",{get:function(){return this._titleField},set:function(t){t!=this._titleField&&(this._titleField=t,this._changed())}}),_dp(P,"titleCallback",{get:function(){return this._titleCallback},set:function(t){t!==this._titleCallback&&(this._titleCallback=t,this._changed())}}),_dp(P,"spaceKey",{get:function(){return this._spaceKey},set:function(t){this._spaceKey=t}}),_dp(P,"type",{get:function(){return P.TYPE}}),_dp(P,"styleName",{get:function(){return P.STYLE_NAME}}),P.prototype._doInitContent=function(t){var e=this._anchor=ne.getDoc(t).createElement("a");e.tabIndex=-1,t.appendChild(e)},P.prototype._doRenderCell=function(t,e,i,o,n){var r=this._anchor;r[this._textProp]=this._makeText(t,e,i),this._url="","#"===this._baseUrl?(r.removeAttribute("target"),r.href="#"):(this._url=this.$_getUrl(t,e),this._url&&(r.target="_blank",r.href=this._url));var s=this.$_getTitle(t,e);s?r.title=s:delete r.title},P.prototype.preventDefaultClick=function(t){t.target===this._anchor&&(t.preventDefault(),t.stopImmediatePropagation())},P.prototype.canClick=function(t){return t.target===this._anchor},P.prototype._doClick=function(t,e,i){if(e.target===this._anchor||"keydown"===e.type)return{type:this.type,url:this._url,value:t.value}},P.prototype.canClickSpaceKey=function(t){return this.spaceKey&&32==t.keyCode&&!t.ctrlKey&&!t.shiftKey&&!t.altKey},P.prototype._doItemClick=function(){this._anchor.click()},P.prototype.$_getUrl=function(t,e){var i="",o=this._urlCallback;return o&&(i=o.call(this,t.handler,e)),i||(i=this._linkField?this._getValue(t,e,this._linkField):e.value,this._baseUrl&&(i=this._baseUrl+i)),i||""},P.prototype.$_getTitle=function(t,e){var i="",o=this._titleCallback;return o&&(i=o.call(this,t.handler,e)),!i&&this._titleField&&(i=this._getValue(t,e,this._titleField)),i||""},P.TYPE="link",P.STYLE_NAME="rg-renderer "+(P.STYLE="rg-link-renderer"),P);function P(){var t=O.call(this)||this;return t._spaceKey=!0,t._itemClickable=!0,t}e.LinkCellRenderer=N;var B,A=(B=y,oe.__extends($,B),$.prototype._doDispose=function(){B.prototype._doDispose.call(this)},_dp($,"shapeStyle",{get:function(){return this._shapeStyle},set:function(t){t!=this._shapeStyle&&(this._shapeStyle=t,this._changed())}}),_dp($,"shape",{get:function(){return this._shape},set:function(t){t!=this._shape&&(this._shape=t,this._changed())}}),_dp($,"shapeMap",{get:function(){return this._shapeMap},set:function(t){t!==this._shapeMap&&(this._shapeMap=t,this._changed())}}),_dp($,"shapeCallback",{get:function(){return this._shapeCallback},set:function(t){t!=this._shapeCallback&&(this._shapeCallback=t,this._changed())}}),_dp($,"shapeWidth",{get:function(){return this._shapeWidth},set:function(t){this._shapeWidth!==t&&(this._shapeWidth=t,this._changed())}}),_dp($,"shapeHeight",{get:function(){return this._shapeHeight},set:function(t){this._shapeHeight!==t&&(this._shapeHeight=t,this._changed())}}),_dp($,"shapeLocation",{get:function(){return this._shapeLocation},set:function(t){t!=this._shapeLocation&&(this._oldLocation=this._shapeLocation,this._shapeLocation=t,this._changed())}}),_dp($,"type",{get:function(){return $.TYPE}}),_dp($,"styleName",{get:function(){return $.STYLE_NAME}}),$.prototype._doInitContent=function(t){var e=ne.getDoc(t),i=(this._svg=vt.SvgElement.createSVG(t)).style,o=isNaN(this._shapeWidth)||this._shapeWidth<=0?16:this._shapeWidth,n=isNaN(this._shapeHeight)||this._shapeHeight<=0?16:this._shapeHeight;i.display="inline-block",i.width=o+"px",i.height=n+"px";var r=this._span=e.createElement("span");t.appendChild(r),this._br=e.createElement("br")},$.prototype._reset=function(){B.prototype._reset.call(this),this._splitted=this._reversed=void 0},$.prototype._doRenderCell=function(t,e,i,o,n){var r=this._svg,s=this._span;if(this._runShape=this.$_getShape(t,e),r.setAttribute("class",this._shapeStyle),vt.SvgElement.renderSVG(t,r,this.$_render.bind(this)),this.$_setSpanText(this._makeText(t,e,i)),this._oldLocation!=this._shapeLocation){switch(this._shapeLocation){case lt.IconLocation.LEFT:this.$_layoutLeft(this._dom,r,s,!1);break;case lt.IconLocation.RIGHT:this.$_layoutRight(this._dom,r,s,!1);break;case lt.IconLocation.TOP:this.$_layoutTop(this._dom,r,s,!1);break;case lt.IconLocation.BOTTOM:this.$_layoutBottom(this._dom,r,s,!1);break;case lt.IconLocation.LEFT_EDGE:this.$_layoutLeftEdge(this._dom,r,s,this._shapeWidth,!1);break;case lt.IconLocation.RIGHT_EDGE:this.$_layoutRightEdge(this._dom,r,s,this._shapeWidth,!1);break;case lt.IconLocation.TOP_EDGE:this.$_layoutTopEdge(this._dom,r,s,o,n,this._shapeWidth,this._shapeHeight,!1);break;case lt.IconLocation.BOTTOM_EDGE:this.$_layoutBottomEdge(this._dom,r,s,o,n,this._shapeWidth,this._shapeHeight,!1);break;case lt.IconLocation.CENTER:this.$_layoutCenter(this._dom,r,s,!1);break;default:this.$_layoutLeft(this._dom,r,s,!1)}this._oldLocation=this._shapeLocation}this._shapeLocation==lt.IconLocation.TOP_EDGE||this._shapeLocation==lt.IconLocation.BOTTOM_EDGE?this._setHeight(n):this._clearHeight()},$.prototype.$_getShape=function(t,e){var i=void 0,o=this._shapeCallback;return o&&(i=o.call(this,t.handler,e)),null==i&&this._shapeMap&&(i=this._shapeMap[e.value]),null==i&&(i=this._shape),i},$.prototype.$_getDrawing=function(t){var e;return t&&("ellipse"==(t=t.toLowerCase())?e=this._ellipse?this._ellipse:this._ellipse=new wt.EllipseShape:(e=this._polygon?this._polygon:this._polygon=new wt.PolygonShape(t),this._polygon.shape=t)),e},$.prototype.$_render=function(t,e,i,o){if(this._runShape){var n=this.$_getDrawing(this._runShape);n&&n.draw(e,i,o)}},$.TYPE="shape",$.STYLE_NAME="rg-renderer "+($.STYLE="rg-shape-renderer"),$.SHAPE_STYLE="rg-shape-renderer-shape",$);function $(){var t=B.call(this)||this;return t._shapeStyle=$.SHAPE_STYLE,t._shape=wt.PolygonShape.STAR,t._shapeWidth=16,t._shapeHeight=16,t._shapeLocation=lt.IconLocation.LEFT,t}e.ShapeCellRenderer=A;var H,G=(H=A,oe.__extends(U,H),U.prototype._doInitContent=function(t){t.style.setProperty("display","flex","important"),H.prototype._doInitContent.call(this,t)},U.prototype.$_layoutLeft=function(t,e,i){Ct.RenderHelper.layoutFlexLeft(t,e,i,this._itemGap)},U.prototype.$_layoutRight=function(t,e,i){Ct.RenderHelper.layoutFlexRight(t,e,i,this._itemGap)},U.prototype.$_layoutTop=function(t,e,i){Ct.RenderHelper.layoutFlexTop(t,e,i,this._itemGap)},U.prototype.$_layoutBottom=function(t,e,i){Ct.RenderHelper.layoutFlexBottom(t,e,i,this._itemGap)},U.prototype.$_layoutLeftEdge=function(t,e,i){Ct.RenderHelper.layoutFlexLeftEdge(t,e,i,this._itemGap)},U.prototype.$_layoutRightEdge=function(t,e,i){Ct.RenderHelper.layoutFlexRightEdge(t,e,i,this._itemGap)},U.prototype.$_layoutTopEdge=function(t,e,i,o,n){Ct.RenderHelper.layoutFlexTopEdge(t,e,i,this._itemGap,this._verticalEdgePad)},U.prototype.$_layoutBottomEdge=function(t,e,i,o,n){Ct.RenderHelper.layoutFlexBottomEdge(t,e,i,this._itemGap,this._verticalEdgePad)},U.prototype.$_layoutCenter=function(t,e,i){Ct.RenderHelper.layoutFlexCenter(t,e,i)},U);function U(){return null!==H&&H.apply(this,arguments)||this}e.FlexShapeCellRenderer=G;var W,z=(W=n,oe.__extends(j,W),j.prototype._doDispose=function(){W.prototype._doDispose.call(this)},_dp(j,"barStyle",{get:function(){return this._barStyle},set:function(t){t!=this._barStyle&&(this._barStyle=t,this._changed())}}),_dp(j,"inactiveStyle",{get:function(){return this._inactiveStyle},set:function(t){t!=this._inactiveStyle&&(this._inactiveStyle=t,this._changed())}}),_dp(j,"barCount",{get:function(){return this._barCount},set:function(t){(t=Math.max(2,t))!=this._barCount&&(this._barCount=t,this._changed())}}),_dp(j,"minimum",{get:function(){return this._minimum},set:function(t){t!=this._minimum&&(this._minimum=t,this._changed())}}),_dp(j,"maximum",{get:function(){return this._maximum},set:function(t){t!=this._maximum&&(this._maximum=t,this._changed())}}),_dp(j,"startRate",{get:function(){return this._startRate},set:function(t){!isNaN(t)&&0<=t&&t<=100&&t!==this._startRate&&(this._startRate=t,this._changed())}}),_dp(j,"endRate",{get:function(){return this._endRate},set:function(t){!isNaN(t)&&0<=t&&t<=100&&t!==this._endRate&&(this._endRate=t,this._changed())}}),_dp(j,"absoluteValue",{get:function(){return this._absoluteValue},set:function(t){t!=this._absoluteValue&&(this._absoluteValue=t,this._changed())}}),_dp(j,"type",{get:function(){return j.TYPE}}),_dp(j,"styleName",{get:function(){return j.STYLE_NAME}}),j.prototype._doInitContent=function(t){var e=this._div=ne.getDoc(t).createElement("div");e.style.position="relative",e.style.height="100%",t.appendChild(e);var i=(this._svg=vt.SvgElement.createSVG(e)).style;i.position="absolute",i.left="0px",i.width="100%",i.top=(100-Math.max(this._startRate,this._endRate))/2+"%",i.height=Math.max(this._startRate,this._endRate)+"%"},j.prototype._doRenderCell=function(t,e,i,o,n){var r=this._svg;this._value=parseFloat(e.value),r.setAttribute("class",this._barStyle),vt.SvgElement.renderSVG2(t,r,this.$_render.bind(this))},j.prototype.$_render=function(t,e){var i=this.absoluteValue?Math.abs(this._value):this._value;isNaN(this._minimum)||isNaN(this._maximum)||(i=this._barCount*(i-this._minimum)/(this._maximum-this._minimum));for(var o=100/Math.max(this._startRate,this._endRate),n=(100-2*(this._barCount+1))/this._barCount,r=0,s=this._startRate*o,a=(this._endRate-this._startRate)/(this._barCount-1),l=0;l<this._barCount;l++){var h=l<i?null:this._inactiveStyle;e.sbounds(h,r+"%",100-s+"%",n+"%",s+"%"),r+=2+n,s+=a}},j.TYPE="signalbar",j.STYLE_NAME="rg-renderer "+(j.STYLE="rg-signalbar-renderer"),j.BAR_STYLE="rg-signalbar-renderer-bar",j.INACTIVE_STYLE="rg-signalbar-renderer-inactive",j);function j(){var t=W.call(this)||this;return t._barStyle=j.BAR_STYLE,t._inactiveStyle=j.INACTIVE_STYLE,t._barCount=10,t._minimum=NaN,t._maximum=NaN,t._startRate=50,t._endRate=100,t._absoluteValue=!1,t}e.SignalBarCellRenderer=z;var q,Y=(q=n,oe.__extends(X,q),X.prototype._doDispose=function(){q.prototype._doDispose.call(this)},_dp(X,"barStyle",{get:function(){return this._barStyle},set:function(t){t!=this._barStyle&&(this._barStyle=t,this._changed())}}),_dp(X,"type",{get:function(){return X.TYPE}}),_dp(X,"styleName",{get:function(){return X.STYLE_NAME}}),X.prototype._doInitContent=function(t){var e=this._div=ne.getDoc(t).createElement("div");e.style.position="relative",e.style.height="100%",t.appendChild(e);var i=(this._svg=vt.SvgElement.createSVG(e)).style;i.position="absolute",i.left="0px",i.top="0px",i.width="100%",i.height="100%"},X.prototype._doRenderCell=function(t,e,i,o,n){this._div;var r=this._svg;this._value=String(e.value),this._value&&(this._value=this._value.toUpperCase()),r.setAttribute("class",this._barStyle),vt.SvgElement.renderSVG(t,r,this.$_render)},X.TYPE="code39",X.STYLE_NAME="rg-renderer "+(X.STYLE="rg-code39-renderer"),X.BAR_STYLE="rg-code39-renderer-bar",X);function X(){var t=q.call(this)||this;return t._barStyle=X.BAR_STYLE,t._barcode=new yt.Code39,t.$_render=function(t,e,i,o){this._value&&(this._barcode.value=this._value,this._barcode.renders(e,new ht.Rectangle(0,0,i,100)))}.bind(t),t}e.Code39CellRenderer=Y;var K,Z=(K=n,oe.__extends(Q,K),Q.prototype._doDispose=function(){K.prototype._doDispose.call(this)},_dp(Q,"barStyle",{get:function(){return this._barStyle},set:function(t){t!=this._barStyle&&(this._barStyle=t,this._changed())}}),_dp(Q,"type",{get:function(){return Q.TYPE}}),_dp(Q,"styleName",{get:function(){return Q.STYLE_NAME}}),Q.prototype._doInitContent=function(t){var e=this._div=ne.getDoc(t).createElement("div");e.style.position="relative",e.style.height="100%",t.appendChild(e);var i=(this._svg=vt.SvgElement.createSVG(e)).style;i.position="absolute",i.left="0px",i.top="0px",i.width="100%",i.height="100%"},Q.prototype._doRenderCell=function(t,e,i,o,n){this._div;var r=this._svg;this._value=String(e.value),r.setAttribute("class",this._barStyle),vt.SvgElement.renderSVG(t,r,this.$_render)},Q.TYPE="code128",Q.STYLE_NAME="rg-renderer "+(Q.STYLE="rg-code128-renderer"),Q.BAR_STYLE="rg-code128-renderer-bar",Q);function Q(){var t=K.call(this)||this;return t._barStyle=Q.BAR_STYLE,t._barcode=new yt.Code128,t.$_render=function(t,e,i,o){this._value&&(this._barcode.value=this._value,this._barcode.renders(e,new ht.Rectangle(0,0,i,100)))}.bind(t),t}e.Code128CellRenderer=Z});t(xt);xt.RendererEditResult,xt.DataCellRenderer,xt.TextCellRenderer,xt.BarOrigin,xt.BarCellRenderer,xt.ImageCellRenderer,xt.FlexibleCellRenderer,xt.IconCellRenderer,xt.FlexIconCellRenderer,xt.CheckCellRenderer,xt.FlexCheckCellRenderer,xt.ButtonCellRenderer,xt.LinkCellRenderer,xt.ShapeCellRenderer,xt.FlexShapeCellRenderer,xt.SignalBarCellRenderer,xt.Code39CellRenderer,xt.Code128CellRenderer;var bt=e(function(t,e){Object.defineProperty(e,"__esModule",{value:!0});var d=/\$\{[^{}]*\}/g,i=(_dp(o,"template",{get:function(){return this._template},set:function(t){this._template=t,this.$_parse(t)}}),_dp(o,"pattern",{set:function(t){this._pattern=t}}),o.prototype.realize=function(t,e,i){for(var o="",n=0,r=this._tokens;n<r.length;n++){var s=r[n];"string"==typeof s?o+=s:1==s.type?o+=e.value:2==s.type?o+=e.item.getData(t.dataSource.getFieldIndex(s.field)):o+=i?i.call(this,t.handler,e,s.field)||"":s.field}return o},o.prototype.realizeHeader=function(t,e){for(var i="",o=0,n=this._tokens;o<n.length;o++){var r=n[o];if("string"==typeof r)i+=r;else if(1==r.type)i+=t.displayText;else if(e)i+=(s=e.call(this,t.column.grid.handler,t,r.field))||"";else{var s;i+=void 0!==(s=t.getValue(r.field))?s:r.field}}return i},o.prototype.realizeSummary=function(t,e,i,o){for(var n="",r=0,s=this._tokens;r<s.length;r++){var a=s[r];if("string"==typeof a)n+=a;else if(1==a.type)n+=e.getDisplayText(i);else if(o)n+=(l=o.call(this,t.column.grid.handler,t,a.field))||"";else{var l;n+=void 0!==(l=t.getValue(a.field))?l:a.field}}return n},o.prototype.realizeGroupSummary=function(t,e,i,o){for(var n="",r=0,s=this._tokens;r<s.length;r++){var a=s[r];if("string"==typeof a)n+=a;else if(1==a.type)n+=e.getDisplayText(i);else if(o)n+=(l=o.call(this,t.column.grid.handler,t,a.field))||"";else{var l;n+=void 0!==(l=t.getValue(a.field))?l:a.field}}return n},o.prototype.realizeForm=function(t,e,i){for(var o="",n=0,r=this._tokens;n<r.length;n++){var s=r[n];"string"==typeof s?o+=s:1!=s.type&&2!=s.type&&(i?i.call(this,t.getHandler(),e,s.field):o+=s.field)}return o},o.prototype.$_parse=function(t){for(var e,i=this._tokens=[],o=t.length,n=this._pattern||d,r=0;e=n.exec(t);){var s=e[0],a=e.index;r<a&&(i.push(t.substring(r,a)),r=a);var l=s.substring(2,s.length-1),h={type:"value"==l?1:0==l.indexOf("value:")?2:3,field:l};2==h.type&&(h.field=h.field.substring(6)),i.push(h),r+=s.length}r<o&&i.push(t.substring(r,o))},o);function o(){this._template="",this._tokens=[]}e.HtmlTemplateParser=i;var n,r=(n=xt.DataCellRenderer,oe.__extends(s,n),s.prototype._doDispose=function(){n.prototype._doDispose.call(this)},_dp(s,"template",{get:function(){return this._parser.template},set:function(t){t!=this._parser.template&&(this._parser.template=t,this._changed())}}),_dp(s,"pattern",{set:function(t){t!=this._pattern&&(t instanceof RegExp?this._pattern=t:this._pattern=new RegExp(t),this._parser.pattern=this._pattern,this._parser.template=this.template)}}),_dp(s,"output",{get:function(){return this._output},set:function(t){this._output=t}}),_dp(s,"callback",{get:function(){return this._callback},set:function(t){t!==this._callback&&(this._callback=t,this._changed())}}),_dp(s,"valueCallback",{get:function(){return this._valueCallback},set:function(t){t!==this._valueCallback&&(this._valueCallback=t,this._changed())}}),_dp(s,"inputFocusable",{get:function(){return this._inputFocusable},set:function(t){this._inputFocusable!==t&&(this._inputFocusable=t)}}),_dp(s,"type",{get:function(){return s.TYPE}}),s.prototype._doClearContent=function(t){n.prototype._doClearContent.call(this,t),this._html=null},s.prototype.canClick=function(t){var e=ne.getWin(this._dom),i=t.target;return!(i instanceof e.HTMLTableCellElement&&0<=i.className.indexOf("rg-")||this._dom===i)},s.prototype.click=function(t,e,i){return this._doClick(t,e,i||e.target)},s.prototype._doRenderCell=function(t,e,i,o,n){var r=this._callback;r?this.$_setHtml(r.call(this,t.handler,e,o,n)):this.$_setHtml(this._parser.realize(t,e,this._valueCallback))},s.prototype._doClick=function(t,e,i){return{type:this.type,target:e.target,value:t.value}},s.prototype.$_setHtml=function(t){t!=this._html&&(this._html=t,this._dom.innerHTML=t)},s.TYPE="html",s);function s(){var t=n.call(this)||this;return t._output=void 0,t._inputFocusable=!1,t._html="",t._parser=new i,t.template="<span>${value}</span>",t._itemClickable=!0,t}e.TemplateCellRenderer=r});t(bt);bt.HtmlTemplateParser,bt.TemplateCellRenderer;var It=e(function(t,e){Object.defineProperty(e,"__esModule",{value:!0});var i,o=(i=Error,oe.__extends(n,i),n);function n(t){var e=i.call(this,t)||this;return Object.setPrototypeOf(e,n.prototype),e}e.AbortError=o;var r,_=(r=o,oe.__extends(s,r),s.prototype.toString=function(){return"Validation failed["+this.level.toUpperCase()+"]: "+this.message},s);function s(t,e,i,o){var n=r.call(this,e)||this;return Object.setPrototypeOf(n,s.prototype),n.level=t,n.column=i,n.userMessage=o,n}e.ValidationError=_;var a,l=(a=re.Base,oe.__extends(h,a),_dp(h,"name",{get:function(){return this._name}}),_dp(h,"active",{get:function(){return this._active},set:function(t){this._active=t}}),_dp(h,"mode",{get:function(){return this._mode},set:function(t){this._mode=t}}),_dp(h,"level",{get:function(){return this._level},set:function(t){this._level=t}}),_dp(h,"criteria",{get:function(){return this._criteria},set:function(t){t!=this._criteria&&(this._criteria=t,this._exprNode=t?H.ExpressionParser.Default.parse(t,h.CAPITAL_INDEXERS):null)}}),_dp(h,"message",{get:function(){return this._message},set:function(t){this._message=t}}),_dp(h,"description",{get:function(){return this._description},set:function(t){this._description=t}}),h.prototype.validate=function(t){if(this._exprNode&&!this._exprNode.evaluate(t)){var e=this._message||this._description||this._name||this._criteria;throw new _(this._level,e,null,this._message)}},h.prototype.doAssignSimple=function(t){if("string"==typeof t)return this.criteria=t,!0},h.CAPITAL_INDEXERS=["value","values"],h);function h(t){var e=a.call(this)||this;return e._active=!0,e._mode=lt.ValidationMode.ALWAYS,e._level=lt.ValidationLevel.ERROR,e._name=t,e}e.EditValidation=l;var d,u=(d=re.Base,oe.__extends(c,d),c.prototype._doDispose=function(){this._items=null,d.prototype._doDispose.call(this)},_dp(c,"count",{get:function(){return this._items.length}}),_dp(c,"items",{get:function(){return this._items.slice()},set:function(t){this.assignFrom(t)}}),c.prototype.clear=function(){this._items=[]},c.prototype.addAll=function(t){if(t&&0<t.length)for(var e=0,i=t.length;e<i;e++)this._items.push(t[e])},c.prototype.validate=function(t,e,i,o){for(var n=0;n<this._items.length;n++){var r=this._items[n];if(r.active&&(r.mode==t||r.mode==lt.ValidationMode.ALWAYS))try{r.validate(e)}catch(t){if(!i||lt.ValidationLevel_compare(r.level,o)<0)throw t instanceof _?(t.level=r.level,t):new _(r.level,t)}}},c.prototype.assignFrom=function(t){if(t!==this&&(this.clear(),t)){ne.Utils.isArray(t)||(t=[t]);for(var e=0,i=t.length;e<i;e++){var o=new l;o.assignFrom(t[e]),this._items.push(o)}}},c);function c(){var t=d.call(this)||this;return t._items=[],t}e.EditValidationCollection=u;var p,f=(p=H.ExpressionRuntime,oe.__extends(g,p),g.prototype._doDispose=function(){this._item=null,this._dataSource=null,p.prototype._doDispose.call(this)},_dp(g,"item",{get:function(){return this._item},set:function(t){this._item=t,this._dataSource=this._item.dataSource,this._fieldCount=this._dataSource?this._dataSource.fieldCount:0}}),g.prototype.isIdentifier=function(t){return t=t.toLowerCase(),g.IDENTS.hasOwnProperty(t)?g.IDENTS[t]:p.prototype.isIdentifier.call(this,t)},g.prototype.evaluateIdentifier=function(t){switch(t){case g.ID_ROW:return this._item.index;case g.ID_DATAROW:return this._item.dataRow;case g.ID_CHECKED:return this._item.checked}throw new H.ExpressionEvaluationError("Invalid identifier key: "+t)},g.prototype.evaluateIndexerI=function(t,e){if(e<0||e>=this._fieldCount)throw new H.ExpressionEvaluationError("Data field index out of bounds:"+e);switch(t){case g.ID_VALUE:case g.ID_VALUES:return this._item.getData(e)}throw new H.ExpressionEvaluationError("Invalid identifier indexer: "+t)},g.prototype.evaluateIndexerS=function(t,e,i){var o=i?this._dataSource.getFieldIndexC(e):this._dataSource.getFieldIndex(e);if(o<0||o>=this._fieldCount)throw new H.ExpressionEvaluationError("Data field is not exists:"+e);switch(t){case g.ID_VALUE:case g.ID_VALUES:return this._item.getData(o)}throw new H.ExpressionEvaluationError("Invalid identifier indexer: "+t)},g.IDENTS={row:g.ID_ROW=0,datarow:g.ID_DATAROW=1,checked:g.ID_CHECKED=2,value:g.ID_VALUE=3,values:g.ID_VALUES=4},g);function g(){var t=p.call(this)||this;return t._item=null,t._dataSource=null,t._fieldCount=0,t}e.DataRowValidationRuntime=f;var m,y=(m=H.ExpressionRuntime,oe.__extends(v,m),v.prototype._doDispose=function(){this._index=null,this._dataSource=null,m.prototype._doDispose.call(this)},v.prototype.setIndex=function(t){this._index=t,this._value=this._index.item.getData(this._index.dataColumn.dataIndex),this._dataSource=this._index.item.dataSource},v.prototype.isIdentifier=function(t){return t=t.toLowerCase(),v.IDENTS.hasOwnProperty(t)?v.IDENTS[t]:m.prototype.isIdentifier.call(this,t)},v.prototype.evaluateIdentifier=function(t){switch(t){case v.ID_VALUE:return this._value;case v.ID_ROW:return this._index.itemIndex;case v.ID_DATAROW:return this._index.item.dataRow;case v.ID_INDEX:return this._index.column.index;case v.ID_FIELD:return this._index.dataColumn.dataIndex;case v.ID_CHECKED:var e=this._index.item;return!!e&&e.checked;case v.ID_TAG:return this._index.column.tag;case v.ID_BASE:var i=this._index.dataColumn.baseIndex;return 0<=i?this._index.item.getData(i):void 0}throw new H.ExpressionEvaluationError("Invalid identifier key: "+t)},v.prototype.evaluateIndexerI=function(t,e){var i=this._dataSource.fieldCount;if(e<0||i<=e)throw new H.ExpressionEvaluationError("Data field index out of bounds:"+e);switch(t){case v.ID_VALUE:case v.ID_VALUES:return this._index.item.getData(e)}throw new H.ExpressionEvaluationError("Invalid identifier indexer: "+t)},v.prototype.evaluateIndexerS=function(t,e,i){var o=i?this._dataSource.getFieldIndexC(e):this._dataSource.getFieldIndex(e),n=this._dataSource.fieldCount;if(o<0||n<=o)throw new H.ExpressionEvaluationError("Data field is not exists:"+e);switch(t){case v.ID_VALUE:case v.ID_VALUES:return this._index.item.getData(o)}throw new H.ExpressionEvaluationError("Invalid identifier indexer: "+t)},v.IDENTS={value:v.ID_VALUE=0,row:v.ID_ROW=1,datarow:v.ID_DATAROW=2,index:v.ID_INDEX=3,field:v.ID_FIELD=4,checked:v.ID_CHECKED=5,tag:v.ID_TAG=6,base:v.ID_BASE=7,values:v.ID_VALUES=8},v);function v(){return m.call(this)||this}e.DataCellValidationRuntime=y;var w,C=(w=re.Base,oe.__extends(x,w),_dp(x,"owner",{get:function(){return this._owner}}),_dp(x,"hasRowValidation",{get:function(){return 0<this._owner.validations.count}}),_dp(x,"cellList",{get:function(){return this._cellList}}),_dp(x,"userValidations",{get:function(){return this._userValidations}}),x.prototype.validateCell=function(t,e){this.$_validateCell(t,e,!0,this._owner.editOptions.commitLevel)},x.prototype.validateRow=function(t,e,i){var o=this._owner.editOptions.commitLevel;if(!i)for(var n=this._owner.getDataColumns(),r=0,s=n.length;r<s;r++){var a=n[r],l=kt.CellIndex.temp(this._owner,t.index,a);this.$_validateCell(l,e,!0,o)}var h=this._owner.validations;if(h&&0<h.count){var d=this._owner.rowValidationRuntime;d.item=t,h.validate(e?lt.ValidationMode.INSERT:lt.ValidationMode.UPDATE,d,!0,o)}},x.prototype.clearInvalidCells=function(){this.$_clearInvalidateList()},x.prototype.addInvalidateCell=function(t,e){this.$_addInvalidateCell(t,e)},x.prototype.getInvalidCells=function(){var t=[],e=this._cellList;for(var i in e){var o=e[i];for(var n in o){var r=o[n];t.push({column:r.column,dataRow:r.dataRow,message:r.message,level:r.level})}}return 0<t.length?t:null},x.prototype.validateCells=function(t,e){var i=this._owner,o=i.getDataColumns(),n=[];if(t=ne.Utils.makeArray(t))for(var r=0,s=t.length;r<s;r++)(l=i.getItem(t[r]))&&l.isDataRow&&(delete this._cellList[l.dataId],n.push(l));else{if(e)for(r=0,s=i.itemCount;r<s;r++)(l=i.getItem(r))&&l.isDataRow&&(delete this._cellList[l.dataId],n.push(l));else n=i.getAllItems();this._cellList={}}r=0;for(var a=n.length;r<a;r++){var l;if((l=n[r]).isDataRow){var h=0;for(s=o.length;h<s;h++){var d=o[h],u=d.dataIndex,_=kt.CellIndex.temp(i,l.index,d);try{this.$_validateCell(_,!1,!1,lt.ValidationLevel.IGNORE),i._fireValidateCell(_,!1,l.getData(u))}catch(t){this.$_addInvalidateCell(_,t),this._userValidations=!0}}}}return i.refreshView(),this.getInvalidCells()},x.prototype.clearInvalidateList=function(){this.$_clearInvalidateList()},x.prototype.$_validateCell=function(t,e,i,o){var n=t.dataColumn;if(n){var r=t.item.getData(n.dataIndex);if(n.required){var s=n.grid,a=s&&s.dataSource&&s.dataSource.getField(n.dataIndex);if(a&&a.isEmpty(r)){var l=n.requiredLevel||lt.ValidationLevel.ERROR,h=n.requiredMessage||"Value is required: "+n.fieldName;throw new _(l,h,n,n.requiredMessage)}}var d=n.validations;if(d&&0<d.count){var u=this._owner.columnValidationRuntime;u.setIndex(t);try{d.validate(e?lt.ValidationMode.INSERT:lt.ValidationMode.UPDATE,u,i,o),this.$_clearInvalidateCell(t)}catch(t){throw t instanceof _&&(t.column=n),t}}}},x.prototype.$_addInvalidateCell=function(t,e){var i=t.dataId&&t.dataId,o=t.dataColumn&&t.dataColumn.dataIndex;if(!(null==i||o<=-1)){var n=this._cellList;(n[i]?n[i]:n[i]={})[o]={dataRow:t.dataRow,message:e.message,userMessage:e.userMessage,level:e.level,column:t.dataColumn.name}}},x.prototype.$_clearInvalidateCell=function(t){var e=t.dataId,i=t.dataColumn.dataIndex,o=this._cellList[e];o&&o[i]&&delete o[i]},x.prototype.$_clearInvalidateList=function(){this._cellList={},this._userValidations=!1,this._owner.refreshView()},x);function x(t){var e=w.call(this)||this;return e._cellList={},e._userValidations=!1,e._owner=t,e}e.ValidationManager=C});t(It);It.AbortError,It.ValidationError,It.EditValidation,It.EditValidationCollection,It.DataRowValidationRuntime,It.DataCellValidationRuntime,It.ValidationManager;var Et=e(function(t,e){Object.defineProperty(e,"__esModule",{value:!0});var i=/(.*)/,o=(n.getFormatter=function(t){var e=n.Formatters[t];return e||(n.Formatters[t]=e=new n(t)),e},_dp(n,"format",{get:function(){return this._format}}),n.prototype.getText=function(t){return t&&t.replace(this._pattern,this._replace)},n.prototype.$_parse=function(t){if(t){var e=t.trim().split(ne.Utils.colonreg);if(1<e.length){var i=e[0].trim(),o=e[1].trim();i&&o&&('"'==i.charAt(0)&&(i=i.substr(1,i.length-2)),i&&('"'==o.charAt(0)&&(o=i.substr(1,o.length-2)),o&&(this._pattern=new RegExp(i,e[2]||""),this._replace=o)))}}},n.Formatters={},n);function n(t){this._pattern=i,this._replace="$1",this.$_parse(this._format=t)}e.TextFormatter=o});t(Et);Et.TextFormatter;var St=e(function(t,e){Object.defineProperty(e,"__esModule",{value:!0});var i,g=(i=dt.GroupFooter,oe.__extends(o,i),o.prototype.getShadowRow=function(){var t=this.parent.firstDataItem;return t?t.dataRow:-1},o);function o(){return i.call(this)||this}e.MergedGroupFooter=g;var n,m=(n=dt.GroupItemImpl,oe.__extends(r,n),_dp(r,"groupLevel",{get:function(){return this._level}}),r.prototype.getShadowRow=function(){var t=this.firstDataItem;return t?t.dataRow:-1},_dp(r,"merged",{get:function(){return!0}}),r);function r(t,e){var i=n.call(this,e)||this;return i._level=0,i._level=t,i}e.MergedGroupHeader=m;var s,a=(s=re.Base,oe.__extends(l,s),l.prototype._doDispose=function(){s.prototype._doDispose.call(this)},_dp(l,"provider",{get:function(){return this._rs}}),_dp(l,"count",{get:function(){return this._items.length}}),_dp(l,"fixedCount",{get:function(){return this._fixedCount}}),_dp(l,"items",{get:function(){return this._items.slice()}}),_dp(l,"rowCount",{get:function(){if(isNaN(this._rowCount)){for(var t=this._items,e=0,i=t.length-1;0<=i;i--)t[i]instanceof dt.GridRow&&e++;this._rowCount=e}return this._rowCount}}),l.prototype.getItem=function(t){return this._items[t]},l.prototype.clear=function(t){void 0===t&&(t=null);for(var e=this._rs,i=0,o=(t=t||this._items).length;i<o;i++){var n=t[i];n._parent=e._rootItem,n._index=-1,n instanceof dt.GroupItemImpl&&n._children&&this.clear(n._children)}t.length=0,this.$_changed()},l.prototype.expand=function(t,e,i,o){return this.$_expandItem(t,e,i,o),this.$_changed(),!0},l.prototype.collapse=function(t,e){var i,o,n=this._rs,r=this._items;if(t._expanded=!1,n.mergeMode){if(0<=(a=t.index)?(r.splice(a,1),t._index=-1):(a=this.$_firstIndex(t,n.expandedAdornments==lt.RowGroupAdornments.SUMMARY,!0))<0&&(a=this.$_firstIndex(t)),0<=a)for(;a<r.length&&(h=r[a]).isDescendantOf(t);)r.splice(a,1),h._index=-1,e&&(h instanceof dt.GroupItem||h instanceof g)&&(d=h instanceof dt.GroupItem?h:h instanceof g&&h.parent._expanded?h.parent:null)&&(d._expanded=!1);switch(i=t.footerCount,n.collapsedAdornments){case lt.RowGroupAdornments.BOTH:t._index=a,r.splice(a++,0,t);for(var s=0;s<i;s++)r.splice(a+s,0,o=t.getFooter(s)),o._index=a+s;break;case lt.RowGroupAdornments.FOOTER:case lt.RowGroupAdornments.SUMMARY:if(i=t.footerCount)for(s=0;s<i;s++)r.splice(a+s,0,o=t.getFooter(s)),o._index=a+s;else if(i=t.allFooterCount)for(s=0;s<i;s++)r.splice(a+s,0,o=t._allFooters[s]),o._index=a+s;break;case lt.RowGroupAdornments.HEADER:default:t._index=a,r.splice(a,0,t)}}else{var a=t.index;if(i=t.footerCount,0<=a)r.splice(a,1),t._index=-1;else if(a=this.$_firstIndex(t,n.expandedAdornments==lt.RowGroupAdornments.SUMMARY,!1),t.footer){var l=t.footer.index;for(s=0;s<i;s++)r[l]._index=-1,r.splice(l,1)}else for(l=t._allFooters[0].index,i=t.allFooterCount,s=0;s<i;s++)r[l]._index=-1,r.splice(l,1);for(;a<r.length;){var h,d;if(!(h=r[a]).isDescendantOf(t))break;r.splice(a,1),h._index=-1,e&&(h instanceof dt.GroupItem||h instanceof dt.GroupFooter)&&(d=h instanceof dt.GroupItem?h:h instanceof dt.GroupFooter&&h.parent._expanded?h.parent:null)&&(d._expanded=!1)}switch(n.collapsedAdornments){case lt.RowGroupAdornments.BOTH:for(t._index=a,r.splice(a++,0,t),s=0;s<i;s++)(o=t.getFooter(s))._index=a+s,o._expandable=!1,r.splice(a+s,0,o);break;case lt.RowGroupAdornments.FOOTER:case lt.RowGroupAdornments.SUMMARY:if(i=t.footerCount)for(s=0;s<i;s++)(o=t.getFooter(s))._index=a+s,o._expandable=0===s,r.splice(a+s,0,o);else for(s=0;s<t.allFooterCount;s++)(o=t._allFooters[s])._index=a+s,o._expandable=0===s,r.splice(a+s,0,o);break;case lt.RowGroupAdornments.HEADER:default:t._index=a,r.splice(a,0,t)}}return this.$_changed(),!0},l.prototype.getNext=function(t){return null!=t&&t.visible&&t.index<this.count-1?this._items[t.index+1]:null},l.prototype.getPrior=function(t){return null!=t&&t.visible&&0<t.index?this._items[t.index-1]:null},l.prototype.$_changed=function(){this._rowCount=NaN},l.prototype.$_collectChildren=function(t,e,i,o,n){var r,s=this._rs,a=s.expandedAdornments,l=s.collapsedAdornments;if(o&&t&&t._setExpanded(!0),s.mergeMode){if(!(t instanceof st.RootItem))if(a==lt.RowGroupAdornments.HEADER||a==lt.RowGroupAdornments.BOTH)e.push(t);else if(a==lt.RowGroupAdornments.SUMMARY)for(var h=0,d=t.footerCount;h<d;h++)r=t.getFooter(h),e.push(r);for(var u=0,_=t.count;u<_;u++)if((g=t.getItem(u))instanceof dt.GroupItem){var c=g;if(i&&(!n||c.level<=n)||c.expanded)this.$_collectChildren(c,e,i,o,n);else{var p=c.footerCount;switch(l){case lt.RowGroupAdornments.BOTH:for(e.push(c),h=0;h<p;h++)r=c.getFooter(h),e.push(r);break;case lt.RowGroupAdornments.SUMMARY:case lt.RowGroupAdornments.FOOTER:if(p)for(h=0;h<p;h++)r=c.getFooter(h),e.push(r);else for(p=c.allFooterCount,h=0;h<c.allFooterCount;h++)r=c._allFooters[h],e.push(r);break;case lt.RowGroupAdornments.HEADER:default:e.push(c)}}}else t.isFooter(g)||e.push(g);if(!(t instanceof st.RootItem)&&t.footer&&(a==lt.RowGroupAdornments.FOOTER||a==lt.RowGroupAdornments.BOTH))for(u=0,_=t.footerCount;u<_;u++)e.push(t.getFooter(u))}else{if(!(t instanceof st.RootItem))if(a==lt.RowGroupAdornments.SUMMARY){var f=t.footer;if(p=t.footerCount,f)for(h=t.indexOf(f),f._expandable=!0,e.push(f),u=1;u<p;u++)(f=t.getItem(h+u))._expandable=!1,e.push(f);else for(p=t.allFooterCount,u=0;u<p;u++)(f=t._allFooters[u])._expandable=0===u,e.push(f)}else e.push(t);for(u=0,_=t.count;u<_;u++){var g;if((g=t.getItem(u))instanceof dt.GroupItem){c=g;var m=void 0;if(p=void 0,i&&(!n||c.level<=n)||c.expanded)this.$_collectChildren(c,e,i,o,n);else switch(l){case lt.RowGroupAdornments.HEADER:e.push(c);break;case lt.RowGroupAdornments.FOOTER:case lt.RowGroupAdornments.SUMMARY:if(m=c.footer){if(p=c.footerCount,m._expandable=!0,e.push(m),1<p){h=c.indexOf(m);for(var y=1;y<p;y++)(m=c.getItem(h+y))._expandable=!1,e.push(m)}}else{p=c.allFooterCount;for(var v=0;v<p;v++)(m=c._allFooters[v])._expandable=0===v,e.push(m)}break;case lt.RowGroupAdornments.BOTH:default:if(e.push(c),(m=c.footer)&&(p=c.footerCount,m._expandable=!1,e.push(m),1<p)){h=c.indexOf(m);for(var w=1;w<p;w++)(m=c.getItem(h+w))._expandable=!1,e.push(m)}}}else g instanceof dt.GroupFooter||e.push(g)}if(!(t instanceof st.RootItem)&&a==lt.RowGroupAdornments.BOTH){var C=!t._expanded&&!t.visible,x=t.footer;if(x&&(p=t.footerCount,x._expandable=C,e.push(x),1<p))for(h=t.indexOf(x),u=1;u<p;u++)(x=t.getItem(h+u))._expandable=!1,e.push(x)}}},l.prototype.$_expandItem=function(t,e,i,o){var n;if(t instanceof st.RootItem)n=this._fixedCount;else if(this._rs.mergeMode){switch(this._rs.collapsedAdornments){case lt.RowGroupAdornments.BOTH:n=t.index,this._items.splice(n,1+t.footerCount);break;case lt.RowGroupAdornments.FOOTER:case lt.RowGroupAdornments.SUMMARY:var r=t.footer;r?(n=r.index,this._items.splice(n,t.footerCount)):0<t.allFooterCount&&(n=t._allFooters[0].index,this._items.splice(n,t.allFooterCount));break;case lt.RowGroupAdornments.HEADER:default:n=t.index,this._items.splice(n,1)}i&&(t._index=-1)}else{switch(this._rs.collapsedAdornments){case lt.RowGroupAdornments.BOTH:n=t.index,this._items.splice(n,1+t.footerCount);break;case lt.RowGroupAdornments.FOOTER:case lt.RowGroupAdornments.SUMMARY:0<t.footerCount?(n=t.footer.index,this._items.splice(n,t.footerCount)):0<t.allFooterCount&&(n=t._allFooters[0].index,this._items.splice(n,t.allFooterCount));break;case lt.RowGroupAdornments.HEADER:n=t.index,this._items.splice(n,1)}i&&(t._index=-1)}this._list.splice(0,this._list.length),this.$_collectChildren(t,this._list,e,i,o);for(var s=this._list.length,a=0;a<s;a++)this._items.splice(n+a,0,this._list[a])},l.prototype.$_firstIndex=function(t,e,i){void 0===e&&(e=!1),void 0===i&&(i=!0);var o=t.index;if(0<=o)return o;if(e){var n=t.footer;if(n){if(0<=(o=n.index))return o;for(var r=0,s=t.count;r<s;r++)if((a=ne.Utils.cast(t.getItem(r),dt.GroupItem))&&(o=this.$_firstIndex(a,e)),0<=o)return o}else if(!i&&-1<(n=t._allFooters[0]).index)return n.index;return-1}for(r=0,s=t.count;r<s;r++){var a,l=t.getItem(r);if(0<=l.index)return l.index;if((a=ne.Utils.cast(l,dt.GroupItem))&&0<=(o=this.$_firstIndex(a)))return o}return-1},l.prototype.$_clearAndInit=function(t,e){if(this.clear(),t){this._fixedCount=Math.min(e,t.itemCount);for(var i=0;i<this._fixedCount;i++)this._items.push(t.getItem(i))}else this._fixedCount=0},l.prototype.$_resetIndices=function(t){void 0===t&&(t=0);for(var e=t,i=this._items.length;e<i;e++)this._items[e]._index=e},l);function l(t){var e=s.call(this)||this;return e._fixedCount=0,e._items=[],e._list=[],e._rowCount=NaN,e._rs=t,e}var h,c=function(t,e){this.startIndex=t,this.endIndex=e,this.level=0,this.children=[]},d=(h=st.ProxyItemProvider,oe.__extends(u,h),u.prototype._doDispose=function(){this._callbackOnwer=null,this._visibleItems=this._visibleItems.dispose(),h.prototype._doDispose.call(this)},u.prototype.groupfFooterCounterChanged=function(t){this.$_footerCounterChanged()},u.prototype.$_footerCounterChanged=function(){this._populateItems(),this._fireRefresh()},_dp(u,"treeMode",{get:function(){return this._treeMode},set:function(t){this._treeMode=t}}),_dp(u,"footerCounter",{get:function(){return this._footerCounter},set:function(t){t!=this._footerCounter&&(t&&t.setCounterAware(null),(this._footerCounter=t)&&t.setCounterAware(this),this.$_footerCounterChanged())}}),_dp(u,"expandedAdornments",{get:function(){return this._expandedAdornments},set:function(t){t!=this._expandedAdornments&&(this._expandedAdornments=t,this.grouped&&(this._populateItems(),this._fireRefresh()))}}),_dp(u,"collapsedAdornments",{get:function(){return this._collapsedAdornments},set:function(t){t!=this._collapsedAdornments&&(this._collapsedAdornments=t,this.grouped&&(this._populateItems(),this._fireRefresh()))}}),u.prototype.resetAdornments=function(t,e,i,o){t==this._expandedAdornments&&e==this._collapsedAdornments&&o===this._footerCallback||(this._expandedAdornments=t,this._collapsedAdornments=e,this._callbackOnwer=i,this._footerCallback=o,this.grouped&&(this._populateItems(),this._fireRefresh()))},_dp(u,"expandWhenGrouping",{get:function(){return this._expandWhenGrouping},set:function(t){this._expandWhenGrouping=t}}),_dp(u,"mergeMode",{get:function(){return this._mergeMode}}),_dp(u,"summaryMode",{get:function(){return this._summaryMode},set:function(t){t!=this._summaryMode&&(this._summaryMode=t,this._populateItems(),this._fireRefresh())}}),_dp(u,"grouped",{get:function(){return this._grouped}}),_dp(u,"groupCount",{get:function(){return this._groupFields?this._groupFields.length:0}}),_dp(u,"groupSorting",{get:function(){return this._groupSorting},set:function(t){this._groupSorting!=t&&(this._groupSorting=t)}}),_dp(u,"visibleRowCount",{get:function(){return this._visibleItems.rowCount}}),u.prototype.canGrouping=function(t){return this.fireGrouping(t)},u.prototype.groupBy=function(t){this.groupByMode(t,this._mergeMode)},u.prototype.groupByMode=function(t,e){this._mergeMode=e,this._groupFields=t?t.concat():null,e||this._clearDisplayLevels(),this._populateItems();try{this._fireRefresh()}finally{this.fireGrouped(t)}},u.prototype.isGroupedField=function(t){if(this._groupFields)for(var e=this._groupFields.length;e--;)if(this._groupFields[e]==t)return!0;return!1},u.prototype.getGroupLevel=function(t){if(this._groupFields&&0<=t)for(var e=this._groupFields.length;e--;)if(this._groupFields[e]==t)return e+1;return 0},_dp(u,"groupedFields",{get:function(){return this._groupFields?this._groupFields.concat():null}}),u.prototype.expand=function(t,e,i,o){if(t&&(!t.expanded||i)&&(this.fireExpand(t),t.expanded&&this._visibleItems.collapse(t,!1),this._visibleItems.expand(t,e,!0,o))){this._resetItemIndicies(t.index);try{this._fireRefresh()}finally{this.fireExpanded(t)}}},u.prototype.$_collapseChild=function(t,e,i){for(var o=0,n=t.count;o<n;o++){var r=t.getItem(o);r instanceof dt.GroupItemImpl&&(r._expanded=!1,this.$_collapseChild(r,e,i))}},u.prototype.collapse=function(t,e,i){if(t&&t.expanded){if(this.fireCollapse(t),this._visibleItems.collapse(t,e)){0<=t.index&&this._resetItemIndicies(t.index);try{this._fireRefresh()}finally{this.fireCollapsed(t)}}}else t&&e&&i&&this.$_collapseChild(t,e,i)},u.prototype.collapseAll=function(t){for(var e=0;e<this._rootItem.count;e++){var i=this._rootItem.getItem(e);i instanceof dt.GroupItem&&this.collapse(i,t,!0)}},u.prototype.expandAll=function(t,e){for(var i=0;i<this._rootItem.count;i++){var o=this._rootItem.getItem(i);o instanceof dt.GroupItem&&this.expand(o,t,!0,e)}},u.prototype.findItem=function(t,e,i,o,n){var r=this.dataSource;if(!r)return-1;var s=this.itemCount;if(s<1)return-1;var a=Math.min(t.length,e.length);if(a<1)return-1;var l=!i||i.allFields,h=i&&i.caseSensitive,d=i&&i.partialMatch,u=null,_=[];o=Math.max(0,o),n=Math.min(s-1,n);for(var c=0;c<a;c++)_[c]=r.getField(t[c]).dataType;var p=i.compareCallback;p="function"==typeof p?p:ne.Utils.compareTextValue;for(var f=o;f<=n;f++){var g=this.$_getItem(f),m=0<=g.dataRow;if(m)for(c=0;c<a;c++){var y=g.getData(t[c]);switch(_[c]){case lt.ValueType.DATETIME:case lt.ValueType.DATE:if(e[c]instanceof Date)m=p.call(r.handler,e[c],y,h,d);else{if(!u){var v=/[.]/.test(e[c])?"yyyy.MM.dd":/[/]/.test(e[c])?"yyyy/MM/dd":/[-]/.test(e[c])?"yyyy-MM-dd":"yyyyMMdd";u=new _t.DateTimeConverter(v)}m=p.call(r.handler,e[c],y?u.getText(y):y,h,d)}break;default:m=p.call(r.handler,e[c],y,h,d)}if(m&&!l)return f;if(!m&&l)break}if(m)return f}return-1},u.prototype.findCell=function(t,e,i,o,n,r){var s=this.dataSource;if(!s)return null;var a=this.itemCount;if(a<1)return null;var l=i&&i.caseSensitive,h=i&&i.partialMatch,d=this.dataSource.fieldCount,u=t.length,_=null,c=[],p=i.compareCallback;p="function"==typeof p?p:ne.Utils.compareTextValue;for(var f=0;f<d;f++)c[f]=s.getField(f).dataType;o=Math.max(0,o),n=Math.min(a-1,n),(r=Math.max(0,r))>=t.length&&(o++,r=0);for(var g=o;g<=n;g++){var m=this.$_getItem(g);if(0<=m.dataRow)for(f=o<g?0:r;f<u;f++){var y=t[f];if(0<=y&&y<d){var v=m.getData(y),w=!1;switch(c[y]){case lt.ValueType.DATETIME:case lt.ValueType.DATE:if(e instanceof Date)w=p(e,v,l,h);else{if(!_){var C=/[.]/.test(e)?"yyyy.MM.dd":/[/]/.test(e)?"yyyy/MM/dd":/[-]/.test(e)?"yyyy-MM-dd":"yyyyMMdd";_=new _t.DateTimeConverter(C)}w=p(e,v?_.getText(v):v,l,h)}break;default:w=p(e,v,l,h)}if(w)return{itemIndex:g,fieldIndex:y,searchFieldIndex:f}}}}return null},u.prototype.getGroupItem=function(r){return function t(e){for(var i=0,o=e.children.length;i<o;i++){var n=e.children[i];if(n.id===r)return n;if(n instanceof dt.GroupItemImpl)return t(n)}}(this._rootItem)},_dp(u,"itemCount",{get:function(){return this._grouped?this._visibleItems.count:this.source.itemCount}}),u.prototype.getItem=function(t){return this.grouped?0<=t&&t<this._visibleItems.count?this._visibleItems.getItem(t):null:this.source.getItem(t)},u.prototype.getItems=function(t,e){if(this.grouped){for(var i=this._visibleItems,o=[],n=Math.min(i.count,t+e-1),r=t;r<n;r++){var s=i.getItem(r);o.push(s)}return o}return this.source.getItems(t,e)},u.prototype.getAllItems=function(){if(this.grouped){var t=new a(this);return t.expand(this.rootItem,!0,!1,0),t.items}return this.source?this.source.getAllItems():null},u.prototype.getIndexOfRow=function(t){if(this.grouped){for(var e=this._visibleItems,i=0,o=e.count;i<o;i++)if(e.getItem(i).dataRow==t)return i;return-1}return this.source.getIndexOfRow(t)},u.prototype.getItemOfRow=function(t){if(this.grouped){for(var e=this._visibleItems,i=0,o=e.count;i<o;i++){var n=e.getItem(i);if(n.dataRow==t)return n}return null}return this.source.getItemOfRow(t)},u.prototype._initialize=function(){h.prototype._initialize.call(this),this._visibleItems=new a(this)},u.prototype._clearItems=function(){this._visibleItems.clear(),this.rootItem.clear()},u.prototype._populateItems=function(){this.$_populateItems(!1)},u.prototype._resetItemIndicies=function(t){this.isIndexing&&this.grouped?this._visibleItems.$_resetIndices(t):h.prototype._resetItemIndicies.call(this,t)},u.prototype._clearChecked=function(){this.grouped?this.$_checkChildren(this.rootItem,!1,!1,!1):h.prototype._clearChecked.call(this),this._editItem&&this._editItem._setChecked(!1)},u.prototype.checkAll=function(t,e,i,o,n){if(!this._editItem||i&&!this._editItem.checkable||this._editItem._setChecked(t),e||!this.grouped)h.prototype.checkAll.call(this,t,e,i,o,n);else{var r=this._visibleItems.fixedCount;if(0<r)if(i)for(var s=r;s--;){var a=this.getItem(s);a.checkable&&a._setChecked(t)}else for(s=r;s--;)this.getItem(s)._setChecked(t);this.$_checkChildren(this.rootItem,t,i,n),this._fireItemCheckChanged(null,t),o?this._fireItemAllChecked(t):this._fireRefreshClient()}},u.prototype.getItemChecked=function(t,e){return this.source.getItemChecked(t,e)},u.prototype.setItemChecked=function(t,e){return this.source.setItemChecked(t,e)},u.prototype.getFirstRow=function(){for(var t=0,e=this._visibleItems.count;t<e;t++){var i=this._visibleItems.getItem(t);if(i instanceof dt.GridRow)return i}},u.prototype.getLastRow=function(){for(var t=this._visibleItems.count-1;0<=t;t--){var e=this._visibleItems.getItem(t);if(e instanceof dt.GridRow)return e}},u.prototype.getPrevRow=function(t){if(t){t.visible||(t=t.getVisibleAncestor());for(var e=t.index-1;0<=e;e--)if((t=this._visibleItems.getItem(e))instanceof dt.GridRow)return t}return this.getFirstRow()},u.prototype.getNextRow=function(t){if(t){t.visible||(t=t.getVisibleAncestor());for(var e=t.index+1,i=this._visibleItems.count;e<i;e++)if((t=this._visibleItems.getItem(e))instanceof dt.GridRow)return t}return this.getLastRow()},u.prototype.$_saveExpand=function(t,e){for(var i=0,o=t.count;i<o;i++){var n=t.getItem(i);if(n instanceof dt.GroupItemImpl||n instanceof m){var r=n.firstItem._dataRowId,s=this.dataSource.getDataRow(r),a=n._groupField;0<=s&&0<=a&&(e[r]={expanded:n._expanded,children:[]},this.$_saveExpand(n,e[r].children))}}},u.prototype.$_restoreExpand=function(t,e){for(var i=0,o=t.count;i<o;i++){var n=t.getItem(i);if(n instanceof dt.GroupItemImpl||n instanceof m){var r=n.firstItem._dataRowId,s=this.dataSource.getDataRow(r),a=n._groupField;0<=s&&0<=a&&e[r]&&(n._setExpanded(e[r].expanded),this.$_restoreExpand(n,e[r].children))}}},u.prototype.$_populateItems=function(t){var e={},i=this.source.itemCount,o=this._rootItem;if(t&&0<i&&o&&this.$_saveExpand(o,e),this._clearItems(),this.source){if(this._groupFields){for(var n=this.dataSource.fieldCount,r=this._groupFields.length-1;0<=r;r--)this._groupFields[r]>=n&&this._groupFields.splice(r,1);this._grouped=0<this._groupFields.length}else this._grouped=!1;this._grouped&&0<i&&(this.$_buildGroupItems(i),t&&this.$_restoreExpand(o,e),this.$_resetVisibleItems())}},u.prototype.$_checkChildren=function(t,e,i,o){for(var n=0,r=t.count;n<r;n++){var s=t.getItem(n);s&&(!i||(o||s.isDataRow)&&s.checkable)&&s._setChecked(e),s instanceof dt.GroupItem&&this.$_checkChildren(s,e,i,o)}},u.prototype.$_getItem=function(t){return this._grouped?this._visibleItems.getItem(t):this.source.getItem(t)},u.prototype.$_resetVisibleItems=function(){this._visibleItems.$_clearAndInit(this.source,this.fixedCount),this.source&&this.source.itemCount>this._visibleItems.fixedCount&&this._visibleItems.expand(this.rootItem,!1,!1,0),this._resetItemIndicies(0)},u.prototype.$_buildGroupItems=function(t){if(t>this.fixedCount){var e=new c(this.fixedCount,t-1);this.$_buildGroups(e,this.source,this._groupFields),this.$_buildItems(this.rootItem,e,this._groupFields),this.mergeMode&&(this._clearDisplayLevels(),this.$_resetDisplayLevels(this.rootItem))}},u.prototype.$_resetDisplayLevels=function(t){for(var e=0,i=t.count;e<i;e++){var o=ne.Utils.cast(t.getItem(e),dt.GroupItem);if(o){var n=ne.Utils.cast(o.firstItem,dt.GridRow);n&&n._displayLevel<0&&(n._displayLevel=o.level),this.$_resetDisplayLevels(o)}}},u.prototype.$_buildGroups=function(t,e,i){if(!(i.length<=t.level)){var o=t.startIndex,n=t.endIndex;if(!(n<o)){var r=t.level+1,s=i[t.level],a=this.dataSource.getField(s),l=new c(o,o);l.level=r,t.children.push(l);for(var h=e.getItem(o).getData(s),d=o+1;d<=n;d++){var u=e.getItem(d).getData(s);a.equalValues(u,h)||(l&&(l.endIndex=d-1),(l=new c(d,d)).level=r,t.children.push(l)),h=u}l&&(l.endIndex=n),d=0;for(var _=t.children.length;d<_;d++)this.$_buildGroups(t.children[d],e,i)}}},u.prototype.$_buildItems=function(t,e,i){var o=this.mergeMode,n=e.children.length;if(0<n)for(var r=e.level,s=i[e.level],a=0;a<n;a++){var l=o?new m(r,s):new dt.GroupItemImpl(s);l._setExpanded(this.expandWhenGrouping),t.add(l),this.$_buildItems(l,e.children[a],i)}else{var h=e.endIndex-e.startIndex+1,d=this.source.getItems(e.startIndex,h);t.addAll(d),this._incDescendents(t,h)}if(0<t.level){var u=this._callbackOnwer,_=this._footerCallback;if(this._footerCounter){a=0;for(var c=this._footerCounter.getGroupFooterCount(t);a<c;a++){var p=!(!_||_(u,t,a));(f=o?new g:new dt.GroupFooter).$_footerIndex=a,f.hiddenFooter=p,t.add(f)}}else if(_||_(u,t,0)){var f=o?new g:new dt.GroupFooter;t.add(f)}}},u.prototype.$_setEditItem=function(t){this._editItem=t},u.prototype.$_setDummyEditItem=function(t){this._dummyEditItem=t},u.prototype.fireGrouping=function(t){return this.fireConfirmEvent(u.GROUPING,t)},u.prototype.fireGrouped=function(t){this.fireEvent(u.GROUPED)},u.prototype.fireExpand=function(t){this.fireEvent(u.EXPAND,t)},u.prototype.fireExpanded=function(t){this.fireEvent(u.EXPANDED,t)},u.prototype.fireCollapse=function(t){this.fireEvent(u.COLLAPSE,t)},u.prototype.fireCollapsed=function(t){this.fireEvent(u.COLLAPSED,t)},u.prototype.onItemProviderRefresh=function(t){this.grouped?(this.$_populateItems(!0),this._fireRefresh()):(this._resetItemIndicies(0),h.prototype.onItemProviderRefresh.call(this,t))},u.prototype.onItemProviderItemInserted=function(t,e){this.grouped?(this.$_populateItems(!0),this._fireRefresh()):(this._resetItemIndicies(0),h.prototype.onItemProviderItemInserted.call(this,t,e))},u.prototype.onItemProviderItemDeleted=function(t,e){this.grouped?(this.$_populateItems(!0),this._fireRefresh()):(this._resetItemIndicies(0),h.prototype.onItemProviderItemDeleted.call(this,t,e))},u.prototype.onItemProviderItemUpdated=function(t,e){this.grouped?(this.$_populateItems(!0),this._fireRefresh()):(this._resetItemIndicies(0),h.prototype.onItemProviderItemUpdated.call(this,t,e))},u.GROUPING="onGroupedItemProviderGrouping",u.GROUPED="onGroupedItemProviderGrouped",u.EXPAND="onGroupedItemProviderExpand",u.EXPANDED="onGroupedItemProviderExpanded",u.COLLAPSE="onGroupedItemProviderCollapse",u.COLLAPSED="onGroupedItemProviderCollapsed",u);function u(t,e){var i=h.call(this,t,e)||this;return i._treeMode=!1,i._expandedAdornments=lt.RowGroupAdornments.BOTH,i._collapsedAdornments=lt.RowGroupAdornments.HEADER,i._expandWhenGrouping=!1,i._mergeMode=!1,i._summaryMode=lt.SummaryMode.AGGREGATE,i._groupSorting=!0,i._sortDirection=lt.SortDirection.ASCENDING,i._summarizing=!1,i._grouped=!1,i}e.GroupedItemProvider=d});t(St);St.MergedGroupFooter,St.MergedGroupHeader,St.GroupedItemProvider;var Rt=e(function(t,e){Object.defineProperty(e,"__esModule",{value:!0});var i,o=(i=re.Base,oe.__extends(n,i),n.prototype._changed=function(){},n);function n(){return i.call(this)||this}e.GridMergeRule=o;var r,g=(r=o,oe.__extends(s,r),s.getDefault=function(t,e){var i=s.$_default;return i._level=t,i._mergeMode=e,i},s.prototype.parseInit=function(t,e,i,o,n){var r=t.itemCount;(o=Math.min(r-i,o))<1||(this._mergeMode?this.$_parseMerged(t,e,i,o,n):this.$_parseNormal(t,e,i,o,n))},s.prototype.parseBounds=function(t,e,i,o,n){if(!(t.itemCount<1)){for(i=Math.max(0,i);0<=i&&n[i]<=0;){var r=t.getItem(i);if(r==this.$_getAncestor(r,this._level))break;i--}for(;i<=o&&0<n[i];)i++;i<=o&&(this._mergeMode?this.$_parseMergedBounds(t,e,i,o,n):this.$_parseNormalBounds(t,e,i,o,n))}},s.prototype.$_getAncestor=function(t,e){var i=ne.Utils.cast(t,dt.GroupItem);for(i=i||t.parent;i.level>e;)i=i.parent;return i},s.prototype.$_parseNormal=function(t,e,i,o,n){var r=t.itemCount;if(!(r<1)){var s=t.fixedCount,a=t.getItem(i),l=a,h=i,d=h+1;for(n[h]=h+1;d<r;)a=t.getItem(d),(d==s||a.level!=l.level||a.constructor!==l.constructor||a instanceof dt.GroupFooter||a instanceof dt.GroupItemImpl)&&(h=d),n[d]=h+1,d++,l=a}},s.prototype.$_parseMerged=function(t,e,i,o,n){var r=t.itemCount;if(!(r<1))for(var s=t.getItem(i),a=this.$_getAncestor(s,this._level),l=i,h=n[l]=l+1;h<r;){s=t.getItem(h);var d=this.$_getAncestor(s,this._level);if(d!=a){if(o<=h)break;a=d,l=h}n[h]=l+1,h++}},s.prototype.$_parseNormalBounds=function(t,e,i,o,n){var r=t.itemCount;if(!(r<1)){var s=t.fixedCount,a=t.getItem(i),l=a,h=i,d=h+1;for(n[h]=h+1;d<r;)a=t.getItem(d),d!=s&&a.level==l.level&&a.constructor===l.constructor||(h=d),n[d]=h+1,d++,l=a}},s.prototype.$_parseMergedBounds=function(t,e,i,o,n){var r=t.itemCount;if(!(r<1)){var s=t.getItem(i),a=this.$_getAncestor(s,this._level),l=i,h=l+1;for(n[l]=l+1;h<r;){s=t.getItem(h);var d=this.$_getAncestor(s,this._level);if(d!=a){if(o<h)break;a=d,l=h}n[h]=l+1,h++}}},s.INIT_COUNT=200,s.$_default=new s,s);function s(){var t=r.call(this)||this;return t._level=0,t._mergeMode=!1,t}e.RowGroupMergeRule=g;var a,l=(a=H.ExpressionRuntime,oe.__extends(h,a),h.prototype._doDispose=function(){this._item=null,this._ds=null,this._grid=null,this._layout=null,a.prototype._doDispose.call(this)},h.prototype.setDataSource=function(t){this._ds=t,this._fieldCount=t?t.fieldCount:0},h.prototype.setLayout=function(t){this._layout=t,this._column=t.firstColumn,this._grid=t.grid},h.prototype.setCell=function(t){this._item=t.item,this._field=t.dataField},h.prototype.setItem=function(t,e){this._item=t,this._field=e},h.prototype.clear=function(){this._item=null,this._field=null,this._layout=null,this._column=null,this._grid=null,this._ds=null},h.prototype.isIdentifier=function(t){return t=t.toLowerCase(),h.IDENTS.hasOwnProperty(t)?h.IDENTS[t]:a.prototype.isIdentifier.call(this,t)},h.prototype.evaluateIdentifier=function(t){if(this._item){switch(t){case h.ID_ROW:return this._item.index;case h.ID_DATAROW:return this._item.dataRow;case h.ID_CHECKED:return this._item.checked;case h.ID_GROUP:return this._item.parent;case h.ID_VALUE:return this._item.getData(this._field);case h.ID_PREV_VALUES:var e=this._grid.getDataColumns(),i=e.indexOf(this._column);if(e.length<0||i<1)return"";for(var o=[],n=0,r=Math.min(i,e.length);n<r;n++)o.push(this._item.getData(e[n].dataIndex));return o.join("`")}throw new H.ExpressionEvaluationError("Invalid identifier key: "+t)}},h.prototype.evaluateIndexerI=function(t,e){if(this._item){if(t!=h.ID_VALUE&&t!=h.ID_VALUES)throw new H.ExpressionEvaluationError("Invalid identifier indexer: "+t);if(e<0||e>=this._fieldCount)throw new H.ExpressionEvaluationError("Data field index out of bounds:"+e);return this._item.getData(e)}},h.prototype.evaluateIndexerS=function(t,e,i){if(t!=h.ID_VALUE&&t!=h.ID_VALUES)throw new H.ExpressionEvaluationError("Invalid identifier indexer: "+t);if(this._ds){var o=i?this._ds.getFieldIndexC(e):this._ds.getFieldIndex(e);if(o<0||o>=this._fieldCount)throw new H.ExpressionEvaluationError("Data field is not exists:"+e);return this._item.getData(o)}},h.IDENTS={row:h.ID_ROW=0,datarow:h.ID_DATAROW=1,checked:h.ID_CHECKED=2,value:h.ID_VALUE=3,values:h.ID_VALUES=4,group:h.ID_GROUP=5,prevvalues:h.ID_PREV_VALUES=6},h);function h(){var t=a.call(this)||this;return t._item=null,t._field=-1,t._ds=null,t._fieldCount=0,t._grid=null,t._layout=null,t}var d,m={},u=(d=o,oe.__extends(_,d),_.createRule=function(t){var e="string"==typeof t?t:t&&t.criteria;return e?new _(e):null},_.prototype._doDispose=function(){this._runtime.clear(),this._runtime=null,d.prototype._doDispose.call(this)},_dp(_,"criteria",{get:function(){return this._criteria},set:function(t){(t=t?t.trim():null)!=this._criteria&&(this._criteria=t,this._exprNode=t?H.ExpressionParser.Default.parse(t,null):null,this._changed())}}),_.prototype.parseInit=function(t,e,i,o,n){var r=this._layout.isBreakMergeOnEmpty(),s=t.fixedCount,a=t.itemCount,l=t.dataSource.rowCount;if(!((o=Math.min(a-i,o))<1||l<=0)){this._runtime.setDataSource(t.dataSource),this._runtime.setLayout(this._layout);for(var h=null,d=i;d<a&&(h=t.getItem(d),!this.$_isRow(h,!1));)n[d]=d+1,d++;if(!(a<=d)){var u=m,_=this._exprNode.isIdentifier("value"),c=i=d;if(n[c]=c+1,!(h.dataRow>=l)){u=_?h.getData(e):(this._runtime.setItem(h,e),this._exprNode.evaluate(this._runtime));for(var p=i+1;p<a;p++)if(h=t.getItem(p),this.$_isRow(h,!1)){if(h.dataRow>=l)break;var f=void 0;if(f=_?h.getData(e):(this._runtime.setItem(h,e),this._exprNode.evaluate(this._runtime)),p==s||void 0===f&&r||(f instanceof Date&&u instanceof Date?+f!=+u:f!=u)){if(o<=p)break;c=p,u=f}n[p]=c+1}else{if(o<=p)break;u=m,n[c=p]=c+1}}}}},_.prototype.parseBounds=function(t,e,i,o,n){var r=this._layout.isBreakMergeOnEmpty(),s=t.itemCount;if(!(s<1)){var a=t.fixedCount,l=this._exprNode.isIdentifier("value"),h=m,d=Math.max(0,i),u=d,_=-1;if(this._runtime.setDataSource(t.dataSource),this._runtime.setLayout(this._layout),0<d&&n[d]<=0){var c=t.getItem(d);if(this.$_isRow(c,!1)){var p=void 0;for(p=l?t.getItem(d).getData(e):(this._runtime.setItem(c,e),this._exprNode.evaluate(this._runtime)),d--;0<=d&&(c=t.getItem(d),this.$_isRow(c,!1))&&(h=l?c.getData(e):(this._runtime.setItem(c,e),this._exprNode.evaluate(this._runtime)),d==a||void 0===h&&r||h instanceof Date&&p instanceof Date?+h==+p:h==p);)d--;for(var f=u-1;d<f;f--)n[f]=d+2;d<u-1&&(_=d+1)}else{for(n[d]=d+1,f=u-1;d<f;f--)n[f]=d+2;for(d+1<u-1&&(_=d+2),d--;0<=d&&n[d]<=0&&!this.$_isRow(t.getItem(d),!1);)n[d]=d+1,d--}}for(d=Math.max(0,i);d<=o&&0<n[d];)d++;for(;d<=o&&!this.$_isRow(t.getItem(d),!1);)n[d]=d+1,d++;if(d<o){for(u=d,c=t.getItem(d),p=void 0,p=l?c.getData(e):(this._runtime.setItem(c,e),this._exprNode.evaluate(this._runtime)),d++;d<s;)if(c=t.getItem(d),this.$_isRow(c,!1)){if(h=l?c.getData(e):(this._runtime.setItem(c,e),this._exprNode.evaluate(this._runtime)),d==a||void 0===h&&r||h instanceof Date&&p instanceof Date?+h!=+p:h!=p){var g=u;for(0<=_&&(g=_,_=-1),f=u;f<d;f++)n[f]=g+1;if(o<=d)break;p=h,u=d}else n[d]=u+1;d++}else{for(g=u,0<=_&&(g=_,_=-1),f=u;f<d;f++)n[f]=g+1;for(n[d]=d+1,d++;d<s&&!this.$_isRow(t.getItem(d),!1);)n[d]=d+1,d++;if(o<=(u=d))break}if(d==s&&h instanceof Date&&p instanceof Date?+h==+p:h==p)for(g=0<=_?_:u,f=u;f<d;f++)n[f]=g+1}}},_.prototype.$_isRow=function(t,e){var i=t instanceof dt.GridRow&&!(t instanceof at.DummyEditItem);if(i&&!e){var o=t.parent;i=o.expanded||o.firstItem!==t}return i},_.INIT_COUNT=200,_.$_runtime=null,_);function _(t){var e=d.call(this)||this;return e._runtime=_.$_runtime=_.$_runtime||new l,e.criteria=t,e}e.ColumnMergeRule=u;var c,p=(c=re.Base,oe.__extends(f,c),_dp(f,"head",{get:function(){return-1}}),_dp(f,"tail",{get:function(){return-1}}),f);function f(){return c.call(this)||this}e.GridMergeRoom=p;var y,v=(y=p,oe.__extends(w,y),w.borrow=function(t){var e=w.$_rooms.pop();return e?(e._head=t.top,e._tail=t.bottom):e=new w(t),e},w.returnTo=function(t){if(t){var e=w.$_rooms;e.indexOf(t)<0&&e.push(t)}},_dp(w,"column",{get:function(){return this._column}}),_dp(w,"head",{get:function(){return this._head}}),_dp(w,"tail",{get:function(){return this._tail}}),_dp(w,"scope",{get:function(){return this._column}}),_dp(w,"group",{get:function(){return this._group},set:function(t){this._group=t}}),w.prototype.getHead=function(t){return t?t.set(this._head,this._column):t=this._column.grid.getIndex(this._head,this._column),t},w.prototype.getTail=function(t){return t?t.set(this._tail,this._column):t=this._column.grid.getIndex(this._tail,this._column),t},w.prototype.isHead=function(t){return t.column==this._column&&t.itemIndex==this._head},w.prototype.isTail=function(t){return t.column==this._column&&t.itemIndex==this._tail},w.prototype.contains=function(t){return t.column==this._column&&t.itemIndex>=this._head&&t.itemIndex<=this._tail},w.$_rooms=new Array,w.$_roomCount=0,w);function w(t){var e=y.call(this)||this;return e._group=null,e._column=t.c1._columnObj,e._head=t.top,e._tail=t.bottom,e}e.ColumnMergeRoom=v;var C,x=0,b=65535,I=(C=re.Base,oe.__extends(E,C),_dp(E,"count",{get:function(){return this._rooms.length}}),E.prototype.clear=function(){this._flags=null,this._rooms=[],this._inited=!1},E.prototype.initialize=function(t){if(!this._inited){var e=this._layout.grid,i=e.rowGroup,o=e.itemSource,n=this._layout.firstColumn,r=e.getGroupLevel(n.dataIndex),s=e.isGroupedColumn(n)?g.getDefault(r,i.mergeMode):this._layout.$_mergeRuleObj();if(s){for(var a=this._flags=new Array(o.itemCount),l=e.fixedOptions.mergeRows?0:o.fixedCount,h=o.itemCount;h--;)a[h]=0;s._layout=this._layout,s.parseInit(o,n.dataIndex,l,t,a)}this._inited=!0}},E.prototype.refreshRooms=function(t,e,i){if(this._inited&&this._flags&&!(e<t)){var o=this._layout.grid,n=this._layout.firstColumn;if(o&&n){var r=this._rooms,s=o.layoutManager.fixedItemCount,a=o.itemSource,l=o.getGroupLevel(n.dataIndex),h=0<l?g.getDefault(l,o.rowGroup.mergeMode):this._layout.$_mergeRuleObj(),d=o.displayOptions.editItemMerging,u=0;if(this._fixedRooms.length=0,this._rooms.length=0,h&&(h._layout=this._layout,h.parseBounds(a,n.dataIndex,t,e,this._flags)),i)for(;u<s;)if(c=this.$_checkFixedMerge(a,n,u,s)){if(l<1){var _=new v(c);this._fixedRooms.push(_)}u=c.r2+1}else u+=1;for(u=t;u<=e;){var c;if(c=this.$_checkMerge(a,n,u,0==r.length,s)){var p;if(l<1)(p=a.getItem(c.r2))instanceof St.MergedGroupHeader||p instanceof St.MergedGroupFooter||(_=new v(c),this._rooms.push(_));else if((p=d?a.source.getItem(c.top):a.getItem(c.top)).level>=l){for(var f=p instanceof dt.GroupItem?p:p.parent;f.level>l;)f=f.parent;(_=new v(c)).group=f,r.push(_)}u=c.r2+1}else u+=1}}}},E.prototype.getFixedRooms=function(){return this._fixedRooms.slice()},E.prototype.getRooms=function(){return this._rooms.slice()},E.prototype.scroll=function(t){},E.prototype.getRoom=function(t){for(var e=this._rooms,i=e.length-1;0<=i;i--)if(e[i].contains(t))return e[i];return null},E.prototype.findRoom=function(t){for(var e=this._rooms,i=e.length-1;0<=i;i--)if(t>=e[i].head&&t<=e[i].tail)return e[i];return null},E.prototype.prepareCells=function(t,e){if(0<t){for(var i=this._fixedCells,o=0;o<i.length;o++)i[o]=-1;for(;i.length<t;)i.push(-1)}var n=this._cells;for(o=0;o<n.length;o++)n[o]=-1;for(;n.length<e;)n.push(-1)},E.prototype.addFixedCells=function(t,e){for(var i=this._fixedCells,o=x++,n=t+1;n<t+e;n++)i[n]=o+b;return i[t]=o},E.prototype.addCells=function(t,e){for(var i=this._cells,o=x++,n=t+1;n<t+e;n++)i[n]=o+b;return i[t]=o},E.prototype.isMerged=function(t,e){return t<e?-1<this._fixedCells[t]:-1<this._cells[t-e]},E.prototype.isMergeRoot=function(t,e){return t<e?-1<this._fixedCells[t]&&this._fixedCells[t]<b:(t-=e,-1<this._cells[t]&&this._cells[t]<b)},E.prototype.isHidden=function(t,e){return t<e?this._fixedCells[t]>=b:this._cells[t-e]>=b},E.prototype.getMerged=function(t,e){var i,o=1;if(t<e)for(var n=(i=this._fixedCells)[t],r=t+1;r<i.length&&i[r]-b==n;r++,o++);else for(t-=e,n=(i=this._cells)[t],r=t+1;r<i.length&&i[r]-b==n;r++,o++);return o},E.prototype.getMerged2=function(t,e,i,o){for(var n=this._cells,r=n[i],s=t.itemSource,a=s.getItem(e++),l=a.isData?o:1,h=i+1;h<n.length&&n[h]-b==r;h++)l+=(a=s.getItem(e++)).isData?o:1;return l},E.prototype.$_checkFixedMerge=function(t,e,i,o){if(0<o){var n=e.grid.displayOptions.editItemMerging,r=i,s=this._flags[r],a=t.getItem(r);if(s<=0||dt.ItemState_isEditing(a.itemState)&&!n)return null;for(var l=i+1;l<=o;){var h=dt.ItemState_isEditing(t.getItem(l).itemState);if(l==o||this._flags[l]>s||h&&!n)return r+1<l||h?kt.CellRange.createRange(r,e.layout,l-1,e.layout):null;l++}}return null},E.prototype.$_checkMerge=function(t,e,i,o,n){if(0<=i){var r=e.grid.displayOptions.editItemMerging,s=i,a=this._flags[s],l=t.getItem(s);if(a<=0||dt.ItemState_isEditing(l.itemState)&&!r)return null;if(o)for(;n<s&&!(this._flags[s-1]<a||dt.ItemState_isEditing(t.getItem(s-1).itemState));)s--;for(var h=t.itemCount,d=i+1;d<h;){var u=dt.ItemState_isEditing(t.getItem(d).itemState);if(this._flags[d]>a||this._flags[d]<=0||u&&!r){if(s+1<d)return kt.CellRange.createRange(s,e.layout,d-1,e.layout);var _=e instanceof Dt.DataColumn?e.groupLevel:-1;return(l=t.getItem(s))instanceof St.MergedGroupHeader&&l.collapsed||l instanceof St.MergedGroupFooter&&l.parent.level==_&&(d==i+1||l.parent.collapsed)||(l instanceof St.MergedGroupHeader||l instanceof St.MergedGroupFooter)&&l.parent.level>_?kt.CellRange.createRange(s,e.layout,d-1,e.layout):null}d++}if(s<d)return s+1<d?kt.CellRange.createRange(s,e.layout,d-1,e.layout):(_=e instanceof Dt.DataColumn?e.groupLevel:-1,(l=t.getItem(s))instanceof St.MergedGroupHeader&&l.collapsed||l instanceof St.MergedGroupFooter&&l.parent.level==_&&(d==i+1||l.parent.collapsed)||(l instanceof St.MergedGroupHeader||l instanceof St.MergedGroupFooter)&&l.parent.level>_?kt.CellRange.createRange(s,e.layout,d-1,e.layout):null)}return null},E.MERGE_ROOMS="mergeRooms",E);function E(t){var e=C.call(this)||this;return e._flags=null,e._fixedRooms=[],e._rooms=[],e._inited=!1,e._fixedCells=[],e._cells=[],e._layout=t,e}e.ColumnMergeManager=I});t(Rt);Rt.GridMergeRule,Rt.RowGroupMergeRule,Rt.ColumnMergeRule,Rt.GridMergeRoom,Rt.ColumnMergeRoom,Rt.ColumnMergeManager;var Dt=e(function(t,e){Object.defineProperty(e,"__esModule",{value:!0});var i,o=(i=ft.GridObject,oe.__extends(n,i),n.prototype._doDispose=function(){this._column=null,i.prototype._doDispose.call(this)},_dp(n,"column",{get:function(){return this._column}}),_dp(n,"template",{get:function(){return this._template&&this._template.template},set:function(t){t!=this.template&&(t?(this.template||(this._template=new bt.HtmlTemplateParser),this._template.template=t):this._template&&(this._template.template=void 0),this._changed())}}),_dp(n,"values",{get:function(){return this._values},set:function(t){t!==this._values&&(t?(this._values=this._values||{},Object.assign(this._values,t)):this._values=null,this._changed())}}),_dp(n,"popupMenu",{get:function(){return this._popupMenu},set:function(t){t!=this._popupMenu&&(this._popupMenu=t,this._popupMenuName="string"==typeof t?t:null)}}),_dp(n,"popupMenuName",{get:function(){if(this._popupMenuName)return this._popupMenuName;if(this._popupMenu){this._popupMenuName="$$_column_popup_menu"+this.$_hash;var t=this.column.grid;return t&&t.addPopupMenu(this._popupMenuName,this._popupMenu,!0),t&&this._popupMenuName}return null},set:function(t){null!=t&&"string"!=typeof t||(this._popupMenuName=t,this._changed())}}),n.prototype.getValue=function(t){return this._values&&this._values[t]},n.prototype.setValue=function(t,e){this._values||(this._values={}),this._values[t]!=e&&(this._values[t]=e,this._changed())},n);function n(t){var e=i.call(this,null)||this;return e._column=t,e}e.ColumnObject=o;var r=(s.prototype.clear=function(){return this.styleName=this.textFormat=this.datetimeFormat=this.numberFormat=this.booleanFormat=this.prefix=this.suffix=void 0,this},s.prototype.assign=function(t){return"string"==typeof t?this.styleName=t:t&&("styleName"in t&&(this.styleName=t.styleName),"textFormat"in t&&(this.textFormat=t.textFormat),"datetimeFormat"in t&&(this.datetimeFormat=t.datetimeFormat),"numberFormat"in t&&(this.numberFormat=t.numberFormat),"booleanFormat"in t&&(this.booleanFormat=t.booleanFormat),"prefix"in t&&(this.prefix=t.prefix),"suffix"in t&&(this.suffix=t.suffix)),this},s);function s(){}e.ColumnSummaryStyle=r;var a,l=(a=o,oe.__extends(h,a),h.prototype._doDispose=function(){a.prototype._doDispose.call(this)},_dp(h,"index",{get:function(){return this._index}}),_dp(h,"valueCallback",{get:function(){return this._valueCallback},set:function(t){t!==this._valueCallback&&(this._valueCallback=t,this._changed())}}),_dp(h,"text",{get:function(){return this._text},set:function(t){t!=this._text&&(this._text=t,this._changed())}}),_dp(h,"expression",{get:function(){return this._expression},set:function(t){(t=t&&t.trim())!=this._expression&&(this._expression=t,this._exprNode=t?H.ExpressionParser.Default.parse(t):void 0,this._changed())}}),_dp(h,"styleName",{get:function(){return this._styleName},set:function(t){t!=this._styleName&&(this._styleName=t,this._changed())}}),_dp(h,"styleCallback",{get:function(){return this._styleCallback},set:function(t){t!=this._styleCallback&&(this._styleCallback=t,this._changed())}}),_dp(h,"numberFormat",{get:function(){return this._numberFormat},set:function(t){t!=this._numberFormat&&(this._numberFormat=t,this._numberFormatter=t?W.DecimalFormatter.getFormatter(t):null,this._changed())}}),_dp(h,"datetimeFormat",{get:function(){return this._datetimeFormat},set:function(t){t!=this._datetimeFormat&&(this._datetimeFormat=t,this._datetimeWriter=t?G.DateTimeWriter.getFormatter(t):null,this._changed())}}),_dp(h,"booleanFormat",{get:function(){return this._booleanFormat},set:function(t){t!=this._booleanFormat&&(this._booleanFormat=t,this._boolFormatter=t?U.BooleanFormatter.getFormatter(t):null,this._changed())}}),_dp(h,"textFormat",{get:function(){return this._textFormat},set:function(t){t!=this._textFormat&&(this._textFormat=t,this._textFormatter=t?Et.TextFormatter.getFormatter(t):null,this._changed())}}),_dp(h,"prefix",{get:function(){return this._prefix},set:function(t){t!=this._prefix&&(this._prefix=t,this._changed())}}),_dp(h,"suffix",{get:function(){return this._suffix},set:function(t){t!=this._suffix&&(this._suffix=t,this._changed())}}),_dp(h,"textFormatter",{get:function(){return this._textFormatter}}),_dp(h,"numberFormatter",{get:function(){return this._numberFormatter}}),_dp(h,"datetimeWriter",{get:function(){return this._datetimeWriter}}),_dp(h,"boolFormatter",{get:function(){return this._boolFormatter}}),h.prototype.evaluate=function(t,e){if(this._exprNode)return this._exprNode.evaluate(t)},h.prototype.realizeSummary=function(t,e){var i=this._template;return i?i.realizeSummary(this,t,e):void 0},h.prototype.realizeGroupSummary=function(t,e){var i=this._template;return i?i.realizeGroupSummary(this,t,e):void 0},h.prototype.doAssignSimple=function(t){return"string"==typeof t&&(this.expression=t,!0)},h.prototype._doChanged=function(){},h);function h(t){var e=a.call(this,t)||this;return e._index=0,e}e.ColumnSummary=l;var d,u=(d=l,oe.__extends(_,d),_.prototype._doChanged=function(){this.column._headerSummaryChanged()},_);function _(t){return d.call(this,t)||this}e.ColumnHeaderSummary=u;var c,p=(c=re.Base,oe.__extends(f,c),_dp(f,"column",{get:function(){return this._column}}),_dp(f,"count",{get:function(){return this._items.length}}),f.prototype.get=function(t){return this._items[t]},f.prototype.assignFrom=function(t){if(ne.Utils.isArray(t)){for(var e=t.length;this._items.length<e;)this._items.push(null);1<e&&this._items.length>e&&(this._items.length=e),0<e&&this._items[0].assignFrom(t[0]);for(var i=1;i<e;i++)t[i]?(this._items[i]||(this._items[i]=new u(this._column)),this._items[i].assignFrom(t[i])):this._items[i]=null}else this._items[0].assignFrom(t)},f);function f(t){var e=c.call(this)||this;return e._items=[],e._column=t,e._items.push(new u(t)),e}e.ColumnHeaderSummaryCollection=p;var g,m=(g=o,oe.__extends(y,g),y.prototype._doDispose=function(){g.prototype._doDispose.call(this)},_dp(y,"text",{get:function(){return this._text},set:function(t){t!=this._text&&(this._text=t,this._changed())}}),_dp(y,"itemOffset",{get:function(){return this._itemOffset},set:function(t){t!=this._itemOffset&&(this._itemOffset=t,this._changed())}}),_dp(y,"itemGap",{get:function(){return this._itemGap},set:function(t){t!=this._itemGap&&(this._itemGap=t,this._changed())}}),_dp(y,"checkLocation",{get:function(){return this._checkLocation},set:function(t){t!=this._checkLocation&&(this._checkLocation=t,this._changed())}}),_dp(y,"showTooltip",{get:function(){return this._showTooltip},set:function(t){t!=this._showTooltip&&(this._showTooltip=t,this._changed())}}),_dp(y,"tooltip",{get:function(){return this._tooltip},set:function(t){t!=this._tooltip&&(this._tooltip=t,this._changed())}}),_dp(y,"fixedHeight",{get:function(){return this._fixedHeight},set:function(t){t!=this._fixedHeight&&(this._fixedHeight=t,this._changed())}}),_dp(y,"displayText",{get:function(){var t=this.column,e=this._text;if(!e&&t instanceof V){var i=t.getField();e=i?i.header||i.orgFieldName:t.fieldName}return e=e||t.name}}),_dp(y,"styleName",{get:function(){return this._styleName},set:function(t){this._styleName!==t&&(this._styleName=t,this._changed())}}),y.prototype.realizeTemplate=function(){var t=this._template;return t?t.realizeHeader(this,null):void 0},y.prototype._doChanged=function(){this.column&&this.column._headerChanged()},y.prototype.doAssignSimple=function(t){return"string"==typeof t&&(this.text=t,!0)},y);function y(t){var e=g.call(this,t)||this;return e._checkLocation=lt.ColumnHeaderItemLocation.NONE,e._showTooltip=!0,e._fixedHeight=0,e._popupChanged=!1,e}e.ColumnHeader=m;var v,w=(v=l,oe.__extends(C,v),C.prototype._doChanged=function(){this.column._footerChanged()},C);function C(t){return v.call(this,t)||this}e.ColumnFooter=w;var x,b=(x=re.Base,oe.__extends(I,x),_dp(I,"column",{get:function(){return this._column}}),_dp(I,"count",{get:function(){return this._items.length}}),I.prototype.get=function(t){return this._items[t]},I.prototype.$_clean=function(){for(var t=this._items.length-1;0<=t;t--)this._items[t].clean()},I.prototype.assignFrom=function(t){for(var e=ne.Utils.makeArray(t,!0),i=this._items,o=Math.max(e.length,i.length),n=0;n<o;n++){var r=e[n];r||0==n?(i[n]||(i[n]=new w(this._column)),i[n].assignFrom(r),i[n]._index=n):i[n]&&(i[n]=i[n].dispose())}},I);function I(t){var e=x.call(this)||this;return e._items=[],e._column=t,e._items.push(new w(t)),e}e.ColumnFooterCollection=b;var E=(S.prototype.clear=function(){return this.styleName=this.renderer=this.editable=this.editor=this.readOnly=this.textFormat=this.datetimeFormat=this.numberFormat=this.booleanFormat=this.prefix=this.suffix=this.style=void 0,this},S.prototype.assign=function(t){return"string"==typeof t?this.styleName=t:t&&("styleName"in t&&(this.styleName=t.styleName),"renderer"in t&&(this.renderer=t.renderer),"editor"in t&&(this.editor=t.editor),"editable"in t&&(this.editable=t.editable),("readonly"in t||"readOnly"in t)&&(this.readOnly=t.readonly||t.readOnly),"textFormat"in t&&(this.textFormat=t.textFormat),"datetimeFormat"in t&&(this.datetimeFormat=t.datetimeFormat),"numberFormat"in t&&(this.numberFormat=t.numberFormat),"booleanFormat"in t&&(this.booleanFormat=t.booleanFormat),"prefix"in t&&(this.prefix=t.prefix),"suffix"in t&&(this.suffix=t.suffix),"style"in t&&(this.style=t.style)),this},S.prototype.toFormatter=function(t){var e;return t=t||{textFormatter:void 0,numberFormatter:void 0,datetimeWriter:void 0,booleanFormatter:void 0,prefix:void 0,suffix:void 0},(e=this.textFormat)&&(t.textFormatter&&t.textFormatter.format==e||(t.textFormatter=Et.TextFormatter.getFormatter(e))),(e=this.numberFormat)&&(t.numberFormatter&&t.numberFormatter.format==e||(t.numberFormatter=W.DecimalFormatter.getFormatter(e))),(e=this.datetimeFormat)&&(t.datetimeWriter&&t.datetimeWriter.format==e||(t.datetimeWriter=G.DateTimeWriter.getFormatter(e))),(e=this.booleanFormat)&&(t.booleanFormatter&&t.booleanFormatter.format==e||(t.booleanFormatter=U.BooleanFormatter.getFormatter(e))),(e=this.prefix)&&(t.prefix&&t.prefix==e||(t.prefix=e)),(e=this.suffix)&&(t.suffix&&t.suffix==e||(t.suffix=e)),t},S);function S(){}e.ColumnStyle=E;var R,D=(R=re.Base,oe.__extends(T,R),T.prototype._doDispose=function(){this._layout=null,this.$_owner=null,this._header=this._header&&this._header.dispose(),this._footers=this._footers&&this._footers.dispose(),this._headerSummaries=this._headerSummaries&&this._headerSummaries.dispose(),this._groupFooters=this._groupFooters&&this._groupFooters.dispose(),R.prototype._doDispose.call(this)},_dp(T,"name",{get:function(){return this._name},set:function(t){t!=this._name&&(this._name=t,this._changed())}}),T.prototype._layoutChanged=function(){this._changed(),this._layout&&this._layout._changed()},_dp(T,"visible",{get:function(){return this._visible},set:function(t){t!=this._visible&&(this._visible=t,this._layout&&this._layoutChanged(),this._propChanged("visible",this._visible,!this._visible))}}),_dp(T,"width",{get:function(){return this._width},set:function(t){if(t=Math.max(0,t),!isNaN(t)&&t!=this._width){var e=this._width;this._width=t,this._layoutChanged(),this._propChanged("width",this._width,e)}}}),_dp(T,"fillWidth",{get:function(){return this._fillWidth},set:function(t){t=Math.max(0,t),isNaN(t)||t==this._fillWidth||(this._fillWidth=t,this._layoutChanged())}}),_dp(T,"resizable",{get:function(){return this._resizable},set:function(t){t!=this._resizable&&(this._resizable=t,this._changed())}}),_dp(T,"movable",{get:function(){return this._movable},set:function(t){t!=this._movable&&(this._movable=t,this._changed())}}),_dp(T,"checked",{get:function(){return this._checked},set:function(t){t!=this._checked&&(this._checked=t,this._changed())}}),_dp(T,"header",{get:function(){return this._header}}),T.prototype.setHeader=function(t){this._header.assignFrom(t)},_dp(T,"footers",{get:function(){return this._footers}}),T.prototype.setFooters=function(t){this._footers.assignFrom(t),this._changed()},_dp(T,"footer",{get:function(){return this._footers.get(0)}}),T.prototype.setFooter=function(t){this.setFooters(t)},_dp(T,"headerSummaries",{get:function(){return this._headerSummaries}}),T.prototype.setHeaderSummaries=function(t){this._headerSummaries.assignFrom(t),this._changed()},_dp(T,"headerSummary",{get:function(){return this._headerSummaries.get(0)}}),T.prototype.setHeaderSummary=function(t){this.setHeaderSummaries(t)},_dp(T,"groupFooters",{get:function(){return this._groupFooters}}),T.prototype.setGroupFooters=function(t){this._groupFooters.assignFrom(t),this._changed()},_dp(T,"groupFooter",{get:function(){return this._groupFooters.get(0)}}),T.prototype.setGroupFooter=function(t){this.setGroupFooters(t)},_dp(T,"grid",{get:function(){return this._layout?this._layout.grid:this.$_owner?this.$_owner.owner:void 0}}),_dp(T,"tag",{get:function(){return this._tag},set:function(t){this._tag=t}}),_dp(T,"index",{get:function(){return this._index}}),_dp(T,"displayText",{get:function(){return this._header.text||this._name||"col_"+this._index}}),_dp(T,"displayWidth",{get:function(){return this._layout?this._layout.cellWidth:this._width}}),_dp(T,"displayIndex",{get:function(){return this._layout?this._layout.vindex:-1}}),_dp(T,"dataRoot",{get:function(){return this}}),_dp(T,"layout",{get:function(){return this._layout}}),T.prototype.clean=function(){this._dirty=!1},T.prototype.isWritable=function(){return!1},T.prototype.stateFor=function(t){return this._states[t]},T.prototype.setState=function(t,e){this._states[t]=e},T.prototype.getFooter=function(t){return this._footers.get(t)},T.prototype.getHeaderSummary=function(t){return this._headerSummaries.get(t)},T.prototype.assignFrom=function(t){R.prototype.assignFrom.call(this,t),this._header.assignFrom(t.header),this._footers.assignFrom(t.footers||t.footer),this._headerSummaries.assignFrom(t.summaries||t.summary),this._groupFooters.assignFrom(t.groupFooters||t.groupFooter)},T.prototype.toString=function(){return this.displayText},T.prototype._prepareLayout=function(t,e){},T.prototype._changed=function(){if(!this._dirty){this._dirty=!0;var t=this.grid;t&&t.invalidateColumn(this)}},T.prototype._propChanged=function(t,e,i){var o=this.grid;o&&o._fireColumnPropertyChanged(this,t,e,i)},T.prototype.$_setIndex=function(t){this._index=t},T.prototype._headerChanged=function(){this._changed()},T.prototype._headerSummaryChanged=function(){this._changed()},T.prototype._footerChanged=function(){this._changed()},T.prototype._resetIndices=function(t){},T.prototype.$_layoutIndexChanged=function(t,e){this._propChanged("displayIndex",e,t)},T.prototype.$_layoutWidthChanged=function(t,e){this._propChanged("displayWidth",e,t)},T);function T(t){var e=R.call(this)||this;return e._visible=!0,e._width=100,e._resizable=!0,e._movable=!0,e._checked=!1,e._fillWidth=NaN,e._dirty=!1,e._index=-1,e._states={},e._header=new m(e),e._footers=new b(e),e._headerSummaries=new p(e),e._groupFooters=new b(e),t&&e.assignFrom(t),e}e.GridColumn=D;var k,M=(k=D,oe.__extends(L,k),L.prototype._doDispose=function(){this._popupMenu=null,this._popupMenuName=null,k.prototype._doDispose.call(this)},_dp(L,"numberFormat",{get:function(){return this._numberFormat},set:function(t){t!=this._numberFormat&&(this._numberFormat=t,this._numberFormatter=t?W.DecimalFormatter.getFormatter(t):null,this._changed())}}),_dp(L,"displayMinusZero",{get:function(){return this._displayMinusZero},set:function(t){this._displayMinusZero!=t&&(this._displayMinusZero=t,this._changed())}}),_dp(L,"datetimeFormat",{get:function(){return this._datetimeFormat},set:function(t){t!=this._datetimeFormat&&(this._datetimeFormat=t,this._datetimeWriter=t?G.DateTimeWriter.getFormatter(t):null,this._changed())}}),_dp(L,"booleanFormat",{get:function(){return this._booleanFormat},set:function(t){t!=this._booleanFormat&&(this._booleanFormat=t,this._boolFormatter=t?U.BooleanFormatter.getFormatter(t):null,this._changed())}}),_dp(L,"textFormat",{get:function(){return this._textFormat},set:function(t){t!=this._textFormat&&(this._textFormat=t,this._textFormatter=t?Et.TextFormatter.getFormatter(t):null,this._changed())}}),_dp(L,"prefix",{get:function(){return this._prefix},set:function(t){t!=this._prefix&&(this._prefix=t,this._changed())}}),_dp(L,"suffix",{get:function(){return this._suffix},set:function(t){t!=this._suffix&&(this._suffix=t,this._changed())}}),_dp(L,"blankWhenCopy",{get:function(){return this._blankWhenCopy},set:function(t){t!=this._blankWhenCopy&&(this._blankWhenCopy=t,this._changed())}}),_dp(L,"blankWhenExport",{get:function(){return this._blankWhenExport},set:function(t){t!=this._blankWhenExport&&(this._blankWhenExport=t,this._changed())}}),_dp(L,"ignoreDefaultDynamicStyles",{get:function(){return this._ignoreDefaultDynamicStyles},set:function(t){t!=this._ignoreDefaultDynamicStyles&&(this._ignoreDefaultDynamicStyles=t,this._changed())}}),_dp(L,"textInputCase",{get:function(){return this._textInputCase},set:function(t){t!=this._textInputCase&&(this._textInputCase=t,this._changed())}}),_dp(L,"styleName",{get:function(){return this._styleName},set:function(t){t!=this._styleName&&(this._styleName=t,this._changed())}}),_dp(L,"styleCallback",{get:function(){return this._styleCallback},set:function(t){t!=this._styleCallback&&(this._styleCallback=t,this._changed())}}),_dp(L,"renderer",{get:function(){return this._renderer},set:function(t){this._renderer=t,this.grid&&this._layout&&this.grid.$_rendererChanged(this._layout),this._changed()}}),_dp(L,"editor",{get:function(){return this._editor},set:function(t){this._editor=t,this._changed()}}),_dp(L,"button",{get:function(){return this._button},set:function(t){t!=this._button&&(this._button=t,this._changed())}}),_dp(L,"buttonVisibility",{get:function(){return this._buttonVisibility},set:function(t){t!=this._buttonVisibility&&(this._buttonVisibility=t,this._changed())}}),_dp(L,"buttonVisibleCallback",{get:function(){return this._buttonVisibleCallback},set:function(t){this._buttonVisibleCallback=t,this._changed}}),_dp(L,"editButtonVisibility",{get:function(){return this._editButtonVisibility},set:function(t){t!=this._editButtonVisibility&&(this._editButtonVisibility=t,this._changed())}}),_dp(L,"textFormatter",{get:function(){return this._textFormatter}}),_dp(L,"numberFormatter",{get:function(){return this._numberFormatter}}),_dp(L,"datetimeWriter",{get:function(){return this._datetimeWriter}}),_dp(L,"boolFormatter",{get:function(){return this._boolFormatter}}),_dp(L,"popupMenu",{get:function(){return this._popupMenu},set:function(t){t!=this._popupMenu&&(this._popupMenu=t,this._popupMenuName="string"==typeof t?t:null)}}),_dp(L,"popupMenuName",{get:function(){return this._popupMenuName?this._popupMenuName:this._popupMenu?(this._popupMenuName="$$_column_popup_menu"+this.$_hash,this.grid.addPopupMenu(this._popupMenuName,this._popupMenu,!0),this.grid&&this._popupMenuName):null},set:function(t){null!=t&&"string"!=typeof t||(this._popupMenuName=t,this._changed())}}),L.prototype.getCellStyle=function(t){return this._styleCallback&&this._styleCallback(this.grid.handler,t)},L.prototype.affix=function(t){return this._prefix&&(t=this._prefix+t),this._suffix&&(t+=this._suffix),t},L.prototype._prepareLayout=function(t,e){k.prototype._prepareLayout.call(this,t,e)},L);function L(t){var e=k.call(this,t)||this;return e._blankWhenCopy=!1,e._blankWhenExport=!1,e._ignoreDefaultDynamicStyles=!1,e._textInputCase=lt.TextInputCase.NORMAL,e._button=lt.CellButton.NONE,e._buttonVisibility=lt.ButtonVisibility.DEFAULT,e._editButtonVisibility=lt.ButtonVisibility.DEFAULT,e._displayMinusZero=!0,e}e.ValueColumn=M;var F,V=(F=M,oe.__extends(O,F),O.prototype._doDispose=function(){this._mergeRuleObj=this._mergeRuleObj&&this._mergeRuleObj.dispose(),this._filters=this._filters&&this._filters.dispose(),this._autoFilters=this._autoFilters&&this._autoFilters.dispose(),this.validations=this._validations&&this._validations.dispose(),F.prototype._doDispose.call(this)},_dp(O,"fieldIndex",{get:function(){return this._fieldIndex},set:function(t){(t=Math.max(-1,t))!=this._fieldIndex&&(this._fieldIndex=t,this._changed())}}),_dp(O,"fieldName",{get:function(){return this._fieldName},set:function(t){t!=this._fieldName&&(this._fieldName=t,this._changed())}}),_dp(O,"editable",{get:function(){return this._editable},set:function(t){t!=this._editable&&(this._editable=t,this._changed())}}),_dp(O,"readOnly",{get:function(){return this._readOnly},set:function(t){t!=this._readOnly&&(this._readOnly=t,this._changed())}}),_dp(O,"nanText",{get:function(){return this._nanText},set:function(t){t!=this._nanText&&(this._nanText=t,this._changed())}}),_dp(O,"zeroText",{get:function(){return this._zeroText},set:function(t){t!=this._zeroText&&(this._zeroText=t,this._changed())}}),_dp(O,"defaultValue",{get:function(){return this._defaultValue},set:function(t){this._defaultValue=t}}),_dp(O,"valueSeparator",{get:function(){return this._valueSeparator},set:function(t){t!=this._valueSeparator&&(this._valueSeparator=t,this._changed())}}),_dp(O,"mergeRule",{get:function(){return this._mergeRule},set:function(t){if(t!=this._mergeRule){this._mergeRule=t,this._mergeRuleObj&&this._mergeRuleObj.dispose(),this._mergeRuleObj=t?Rt.ColumnMergeRule.createRule(t):null;var e=this.grid;e&&this.layout&&e._columnMergeRuleChanged(this.layout)}}}),_dp(O,"breakMergeOnEmpty",{get:function(){return this._breakMergeOnEmpty},set:function(t){t!=this._breakMergeOnEmpty&&(this._breakMergeOnEmpty=t,this._layoutChanged())}}),_dp(O,"equalBlank",{get:function(){return this._equalBlank},set:function(t){t!=this._equalBlank&&(this._equalBlank=t,this._layoutChanged())}}),_dp(O,"equalBlankExpression",{get:function(){return this._equalBlankExpression},set:function(t){t!=this._equalBlankExpression&&(this._equalBlankExpression=t,this._equalBlankNode=t?H.ExpressionParser.Default.parse(t,null):void 0,this._layoutChanged())}}),_dp(O,"excelFormat",{get:function(){return this._excelFormat},set:function(t){t!=this._excelFormat&&(this._excelFormat=t,this._changed())}}),_dp(O,"excelFormulaStatement",{get:function(){return this._excelFormulaStatement},set:function(t){t!=this._excelFormulaStatement&&((this._excelFormulaStatement=t)?this._excelFormulaExprStatement?this._excelFormulaExprStatement.source=t:this._excelFormulaExprStatement=new ut.ExpressionStatement(t):this._excelFormulaExprStatement=null,this._changed())}}),_dp(O,"dataIndex",{get:function(){return this._dataIndex}}),_dp(O,"baseIndex",{get:function(){return this._baseIndex}}),_dp(O,"valueType",{get:function(){return this._valueType}}),_dp(O,"groupLevel",{get:function(){return this._groupLevel}}),_dp(O,"values",{get:function(){return this._values},set:function(t){t!=this._values&&(this._values=t&&t.slice(),this._lookupMap=null,this._changed())}}),_dp(O,"labels",{get:function(){return this._labels},set:function(t){t!=this._labels&&(this._labels=t&&t.slice(),this._lookupMap=null,this._changed())}}),_dp(O,"lookupDisplay",{get:function(){return this._lookupDisplay},set:function(t){this._lookupDisplay!=t&&(this._lookupDisplay=t,this._changed())}}),_dp(O,"lookupSource",{get:function(){return this._lookupSource}}),_dp(O,"lookupSourceId",{get:function(){return this._lookupSourceId},set:function(t){this._lookupSourceId!=t&&(this._lookupSourceId=t,this._changed(),this.grid&&this.$_resetLookup(this.grid))}}),_dp(O,"lookupKeyFields",{get:function(){return this._lookupKeyFields},set:function(t){t!=this._lookupKeyFields&&(this._lookupKeyFields=ne.Utils.makeArray(t,!0).slice(),this._changed(),this.grid&&this.$_resetLookup(this.grid))}}),_dp(O,"lookupKeyFieldIds",{get:function(){return this._lookupKeyFieldIds}}),_dp(O,"labelField",{get:function(){return this._labelField},set:function(t){this._labelField!=t&&(this._labelField=t,this._changed())}}),_dp(O,"textOfInvalid",{get:function(){return this._textOfInvalid},set:function(t){this._textOfInvalid!=t&&(this._textOfInvalid=t,this._changed())}}),_dp(O,"labelFieldIndex",{get:function(){return this._labelFieldIndex}}),_dp(O,"displayCallback",{get:function(){return this._displayCallback},set:function(t){this._displayCallback!==t&&(this._displayCallback=t,this._changed())}}),_dp(O,"displayRegExp",{get:function(){return null}}),_dp(O,"displayReplace",{get:function(){return null}}),_dp(O,"mergeGrouped",{get:function(){return this._mergeGrouped}}),_dp(O,"sortable",{get:function(){return this._sortable},set:function(t){t!=this._sortable&&(this._sortable=t,this._changed())}}),_dp(O,"sortOrder",{get:function(){return this._sortOrder},set:function(t){this._sortOrder=t}}),_dp(O,"sortDirection",{get:function(){return this._sortDirection},set:function(t){this._sortDirection=t}}),_dp(O,"sortByLabel",{get:function(){return this._sortByLabel},set:function(t){this._sortByLabel!==t&&(this._sortByLabel=t,this._changed())}}),_dp(O,"filterable",{get:function(){return this._filterable},set:function(t){t!=this._filterable&&(this._filterable=t,this._changed())}}),_dp(O,"autoFilter",{get:function(){return this._autoFilter},set:function(t){t!==this._autoFilter&&(!(this._autoFilter=t)&&this._autoFilters&&0<this._autoFilters.count&&this._autoFilters.clear(),this._changed())}}),_dp(O,"filters",{get:function(){return this._filters},set:function(t){t instanceof pt.ColumnFilterCollection||this.setFilters(t)}}),_dp(O,"autoFilters",{get:function(){return this._autoFilters}}),_dp(O,"required",{get:function(){return this._required},set:function(t){t!=this._required&&(this._required=t,this._changed())}}),_dp(O,"requiredMessage",{get:function(){return this._requiredMessage},set:function(t){t!=this._requiredMessage&&(this._requiredMessage=t,this._changed())}}),_dp(O,"requiredLevel",{get:function(){return this._requiredLevel},set:function(t){t!=this._requiredLevel&&(this._requiredLevel=t,this._changed())}}),_dp(O,"validations",{get:function(){return this._validations},set:function(t){this._validations.assignFrom(t)}}),_dp(O,"error",{get:function(){return this._error},set:function(t){t!=this._error&&(this._error=t,this._changed())}}),_dp(O,"errorLevel",{get:function(){return this._errorLevel},set:function(t){t!=this._errorLevel&&(this._errorLevel=t,this._changed())}}),_dp(O,"groupable",{get:function(){return this._groupable},set:function(t){this._groupable!=t&&(this._groupable=t)}}),O.prototype.getField=function(){var t=this._dataIndex;if(0<=t){var e=this.grid.dataSource;if(e)return e.getField(t)}return null},_dp(O,"lookupData",{set:function(t){var e,i,o,n,r={};if(this._lookupData=t){ne.Utils.isArray(t)?r.list=t:r=t,this._labels=[],this._values=[],this._lookupMap=null,e=r.hasOwnProperty("value")?r.value:"value",i=r.hasOwnProperty("label")?r.label:"label";for(var s=0,a=r.list.length;s<a;s++)null!=(n=null!=(o=r.list[s])[e]?o[e]:o.code)&&this._values.push(null!=o[e]?o[e]:o.code),null!=n&&this._labels.push(null!=o[i]?o[i]:null!=o.text?o.text:n)}else this._labels=null,this._values=null,this._lookupMap=null;this._changed()}}),O.prototype.getLookupLabel=function(t){if(!this._lookupMap){var e=this._values,i=this._labels;if(e&&0<e.length){this._lookupMap={};for(var o=0;o<e.length;o++)i&&i.length>o?this._lookupMap[e[o]]=i[o]:this._lookupMap[e[o]]=e[o]}}var n;if(t&&this._valueSeparator){for(var r=t.split(this._valueSeparator),s=[],a=(o=0,r.length);o<a;o++)s.push(this._lookupMap&&this._lookupMap[r[o]]?this._lookupMap[r[o]]:r[o]);if(s.length<=0)return"";n=s.join(this._valueSeparator)}else n=this._lookupMap?this._lookupMap[t]:void 0;return n||(null!=this.textOfInvalid?this.textOfInvalid:t)},O.prototype.getLookupIndex=function(t){if(this._values&&0<this._values.length)for(var e=0,i=this._values.length;e<i;e++)if(this._values[e]==t)return e;return-1},O.prototype.getLookupIndices=function(t){var e=[];if(t&&this._values&&0<this._values.length)for(var i=ne.Utils.isArray(t)?t:String(t).split(this._valueSeparator),o=0,n=i.length;o<n;o++)0<=this._values.indexOf(i[o])&&e.push(this._values.indexOf(i[o]));return e},O.prototype.getLookupValue=function(t){if(this._values&&0<this._values.length)return this._values[t]},O.prototype.getLookupValues=function(t){var e=[];if(this._values&&0<this._values.length)for(var i=0,o=t.length;i<o;i++)0<=t[i]&&t[i]<this._values.length&&e.push(this._values[t[i]]);return e},O.prototype.getSourceValue=function(t){var e=this._values,i=this._labels;if(i&&e){var o=i.indexOf(t);if(0<=o&&e.length>o)return e[o];if(0<=(o=e.indexOf(t)))return e[o]}},O.prototype.getSourceValues=function(t){var e=this._values,i=this._labels;if(i&&e){for(var o=void 0,n=[],r=this._valueSeparator,s=0,a=(t=ne.Utils.isArray(t)?t:r&&t?String(t).split(r):ne.Utils.makeArray(t)).length;s<a;s++)0<=(o=i.indexOf(t[s]))&&e.length>o?n.push(e[o]):n.push(t[s]);if(0<n.length&&r)return n.join(r);if(0<n.length)return n.join()}},O.prototype.clearFilters=function(){this.setFilters(null)},O.prototype.addFilters=function(t,e){if(void 0===e&&(e=!1),t){var i=this.grid;i&&!i.canFiltering()||this._filters.addAll(ne.Utils.makeArray(t),e)}},O.prototype.removeFilters=function(t){if(t){var e=this.grid;e&&!e.canFiltering()||this._filters.removeItems(ne.Utils.makeArray(t))}},O.prototype.activateFilters=function(t,e){if(t){var i=this.grid;i&&!i.canFiltering()||this._filters.activateItems(ne.Utils.makeArray(t),e)}},O.prototype.activateAllFilters=function(t){var e=this.grid;e&&!e.canFiltering()||this._filters.activateAll(t)},O.prototype.hideColumnFilters=function(t,e){this._filters.hideFilters(ne.Utils.makeArray(t),e)},O.prototype.hideAllColumnFilters=function(t){this._filters.hideAllFilters(t)},O.prototype.toggleFilters=function(t){if(t){var e=this.grid;e&&!e.canFiltering()||this._filters.toggleItems(ne.Utils.makeArray(t))}},O.prototype.toggleAllFilters=function(){var t=this.grid;t&&!t.canFiltering()||this._filters.toggleAll()},O.prototype.getFilter=function(t){var e=this._filters.indexOf(t);return this._filters.getItem(e)},O.prototype.getActiveFilters=function(t){return this._filters.getActiveItems(t)},_dp(O,"hasFilters",{get:function(){return this._autoFilter||0<this._filters.count}}),O.prototype.isFiltered=function(){return this._autoFilter?0<this._autoFilters.activeCount:0<this._filters.activeCount},O.prototype.setFilters=function(t){var e=this.grid;e&&!e.canFiltering()||this._filters.assignFrom(t)},O.prototype.onColumnFilterChanged=function(t,e){var i=this.grid;i&&i.columnFilterChanged(t,e)},O.prototype._prepareLayout=function(t,e){F.prototype._prepareLayout.call(this,t,e)},O.prototype._resetIndices=function(t){this._dataIndex=-1,this._baseIndex=-1;var e=t.dataSource;e&&(this._fieldName?this._dataIndex=e.getFieldIndex(this._fieldName):this._dataIndex=this._fieldIndex,0<=this._dataIndex&&(e.getField(this._dataIndex),this._baseIndex=e.getBaseField(this._dataIndex),this._valueType=e.getValueType(this._dataIndex)),this._labelFieldIndex=e.getFieldIndex(this._labelField),this.$_resetLookup(t))},O.prototype.isWritable=function(){return this._editable&&!this._readOnly},O.prototype.assignFrom=function(t){F.prototype.assignFrom.call(this,t)},O.prototype.$_setMergeGrouped=function(t){this._mergeGrouped=t},O.prototype.$_setGroupLevel=function(t){this._groupLevel=t},O.prototype.$_resetLookup=function(t){if(this._lookupKeyFields&&0<this._lookupKeyFields.length&&this._lookupSourceId){for(var e=this._lookupKeyFields.length,i=this._lookupKeyFieldIds=new Array(e),o=0;o<e;o++)i[o]=t.dataSource.getFieldIndex(this._lookupKeyFields[o]);this._lookupSource=t.lookupProvider.getSource(this._lookupSourceId)}else this._lookupSource=null,this._lookupKeyFieldIds=[]},O.prototype._changed=function(){F.prototype._changed.call(this)},O.CAPITAL_INDEXERS=["value","values"],O);function O(t){var e=F.call(this)||this;return e._fieldIndex=-1,e._editable=!0,e._readOnly=!1,e._valueSeparator=",",e._breakMergeOnEmpty=!1,e._equalBlank=!1,e._values=null,e._labels=null,e._lookupDisplay=!1,e._lookupSource=null,e._lookupKeyFields=null,e._lookupKeyFieldIds=null,e._mergeGrouped=!1,e._sortable=!0,e._sortOrder=-1,e._sortByLabel=!1,e._filterable=!0,e._autoFilter=!1,e._lookupData=null,e._required=!1,e._requiredLevel=lt.ValidationLevel.ERROR,e._validations=new It.EditValidationCollection,e._errorLevel=lt.ValidationLevel.IGNORE,e._groupable=!0,e._dataIndex=-1,e._baseIndex=-1,e._valueType=lt.ValueType.TEXT,e._groupLevel=-1,e._labelFieldIndex=-1,e._filters=new pt.ColumnFilterCollection(e),e._filters.addListener(e),e._autoFilters=new pt.ColumnFilterCollection(e),e._autoFilters.addListener(e),t&&e.assignFrom(t),e}e.DataColumn=V;var N,P=(N=M,oe.__extends(B,N),B.prototype._doDispose=function(){N.prototype._doDispose.call(this)},_dp(B,"fieldNames",{get:function(){return this._fieldNames},set:function(t){t!=this._fieldNames&&(this._fieldNames=t,this._fieldArray=t?t.split(","):[],this._changed())}}),_dp(B,"fields",{get:function(){return this._fields}}),B.prototype._resetIndices=function(t){this._fields=[];var e=t.dataSource;if(e)for(var i=0,o=this._fieldArray.length;i<o;i++){var n=this._fieldArray[i],r=n.split("..");if(1<r.length){var s=e.getFieldIndex(r[0]),a=e.getFieldIndex(r[1]);if(0<=s&&0<=a)for(var l=Math.min(s,a),h=Math.max(s,a),d=l;d<=h;d++)this._fields.push(d)}else 0<=(d=e.getFieldIndex(n))&&this._fields.push(d)}},B);function B(t){var e=N.call(this,t)||this;return e._fieldArray=e._fieldArray||[],e._fields=e._fields||[],t&&e.assignFrom(t),e}e.SeriesColumn=P;var A=($.prototype._doDispose=function(){this._layouts=null},$.prototype.find=function(t){return this._layouts[t]},$.prototype.clear=function(){this._layouts={}},$.prototype.load=function(t){if(t=ne.Utils.makeArray(t),this._layouts={},t)for(var e=0,i=t.length;e<i;e++){var o=t[e];o.name&&!this._layouts[o.name]&&(this._layouts[o.name]=o.items)}},$);function $(){this._layouts={}}e.ColumnLayoutCollection=A});t(Dt);Dt.ColumnObject,Dt.ColumnSummaryStyle,Dt.ColumnSummary,Dt.ColumnHeaderSummary,Dt.ColumnHeaderSummaryCollection,Dt.ColumnHeader,Dt.ColumnFooter,Dt.ColumnFooterCollection,Dt.ColumnStyle,Dt.GridColumn,Dt.ValueColumn,Dt.DataColumn,Dt.SeriesColumn,Dt.ColumnLayoutCollection;var Tt=e(function(t,e){Object.defineProperty(e,"__esModule",{value:!0});var i,o=(i=re.Base,oe.__extends(n,i),n.compareLoc=function(t,e){if(null==t||null==e)return 0;if(null==t)return-1;if(null==e)return 1;var i=t.root.vindex,o=e.root.vindex;return i==o&&(o=t.group===e.group?(i=t.vindex,e.vindex):(i=t.dataRoot.vindex,e.dataRoot.vindex)),i-o},n.prototype._doDispose=function(){this._header=this._header&&this._header.dispose(),i.prototype._doDispose.call(this)},_dp(n,"grid",{get:function(){if(this.$_grid)return this.$_grid;var t=this.root;return t&&t._parent.grid}}),_dp(n,"source",{get:function(){return this}}),_dp(n,"isNull",{get:function(){return!1}}),_dp(n,"isProxy",{get:function(){return!1}}),_dp(n,"visible",{get:function(){return this._visible},set:function(t){t!=this._visible&&(this._visible=t,this._changed())}}),n.prototype.$_isVisible=function(){return this._visible},_dp(n,"header",{get:function(){return this._header}}),_dp(n,"owner",{get:function(){return this._parent&&this._parent.owner}}),_dp(n,"parent",{get:function(){return this._parent}}),_dp(n,"group",{get:function(){return this._parent instanceof L?null:this._parent}}),_dp(n,"root",{get:function(){if(!this._root)for(var t=this;t;){if(t._parent instanceof L)return this._root=t;t=t._parent}return this._root}}),_dp(n,"isRoot",{get:function(){return this.root===this}}),_dp(n,"dataRoot",{get:function(){if(!this._dataRoot){var t=this.group;if(t)for(;t=(this._dataRoot=t).group;);else this._dataRoot=this}return this._dataRoot}}),_dp(n,"index",{get:function(){return this._index}}),_dp(n,"vindex",{get:function(){return this._vindex},set:function(t){var e=this.firstColumn,i=this._vindex;this._parent&&this._parent.$_changeChildVIndex(this,t),e&&this._vindex!=i&&e.$_layoutIndexChanged(i,this._vindex)}}),_dp(n,"row",{get:function(){return this._row}}),_dp(n,"col",{get:function(){return this._col}}),_dp(n,"hrow",{get:function(){return this._hrow}}),_dp(n,"hcol",{get:function(){return this._hcol}}),_dp(n,"width",{get:function(){return this._getWidth(this._width)},set:function(t){t=Math.max(0,t),this.grid&&(t=Math.max(t,this.grid.displayOptions.minCellWidth)),t!=this._width&&(this._width=t,this._parent&&this._parent._childWidthChanged(this))}}),_dp(n,"fillWidth",{get:function(){return this._getFillWidth(this._fillWidth)},set:function(t){(t=Math.max(0,t))!=this._fillWidth&&(this._fillWidth=t,this._parent&&this._parent._childFillWidthChanged(this))}}),_dp(n,"cellWidth",{get:function(){return isNaN(this._fitWidth)?this._cellWidth:this._fitWidth},set:function(t){this.changeCellWidth(t,!1)}}),_dp(n,"distance",{get:function(){return this._col}}),_dp(n,"cspan",{get:function(){return this._cspan}}),_dp(n,"hspan",{get:function(){return this._hspan}}),_dp(n,"hlen",{get:function(){return this._hlen}}),_dp(n,"merged",{get:function(){return this._merged}}),_dp(n,"isFixed",{get:function(){return this.$_fixed||this.$_rfixed}}),_dp(n,"displayText",{get:function(){return this._header&&this._header.text||this.toString()}}),n.prototype.load=function(t){void 0!==t.width&&(this.width=t.width),void 0!==t.header&&this._header.assignFrom(t.header),this.parent instanceof L&&void 0!==t.visible&&(this.visible=t.visible)},n.prototype.isColumn=function(t){return!1},n.prototype.cleanColumns=function(){},n.prototype.findLayout=function(t){return null},n.prototype.getHeaderSpan=function(){return 1},n.prototype.getSummarySpan=function(t){return 1},n.prototype.getFooterSpan=function(t){return 1},n.prototype.getDataSpan=function(){return 1},n.prototype.getGroupFooterSpan=function(t,e){return 1},n.prototype.getDataColumn=function(){return null},n.prototype._createHeader=function(){return null},n.prototype._headerChanged=function(){},n.prototype._prepareLayout=function(t,e,i){this.$_grid=t,this.$_fixed=e,this.$_rfixed=i,this._merged=!1},n.prototype._detach=function(){this._parent=void 0,this._index=-1,this._vindex=-1,this._row=-1,this._col=-1,this._cspan=1,this._hspan=1,this._dspan=1,this._clen=1,this._hlen=1,this._dlen=1,this._root=void 0,this._dataRoot=void 0},n.prototype._getWidth=function(t){return t},n.prototype._getFillWidth=function(t){return t},n.prototype.changeCellWidth=function(t,e){var i=this.firstColumn,o=this.cellWidth,n=0;if(n=e?t-this._fitWidth:t-this._cellWidth,e&&(n*=this._cellWidth/this._fitWidth),this.owner){var r=this._hcol+this._clen-1;this.owner.$_changeCellWidths(this._hrow,r,n)}i&&setTimeout(function(){this.cellWidth!=o&&i.$_layoutWidthChanged(o,this.cellWidth)}.bind(this))},n.prototype._setFitWidth=function(t){this._fitWidth=t},n.prototype._clearFitWidth=function(){this._fitWidth=NaN},n.prototype._changed=function(){this._parent&&this._parent._changed()},n.prototype.$_setMerged=function(t){this._merged=t},n);function n(){var t=i.call(this)||this;return t._visible=!0,t._width=NaN,t._fillWidth=NaN,t._index=-1,t._vindex=-1,t._row=0,t._col=0,t._hrow=0,t._hcol=0,t._cspan=1,t._hspan=1,t._dspan=1,t._clen=1,t._hlen=1,t._dlen=1,t._cellWidth=0,t._fitWidth=NaN,t._merged=!1,t.$_fixed=!1,t.$_rfixed=!1,t._header=t._createHeader(),t._header&&(t._header._layout=t),t}e.CellLayoutItem=o;var r,m=(r=o,oe.__extends(s,r),_dp(s,"isNull",{get:function(){return!0}}),_dp(s,"isProxy",{get:function(){return!0}}),_dp(s,"source",{get:function(){return this._source}}),_dp(s,"visible",{get:function(){return this._source.visible}}),_dp(s,"cols",{get:function(){return this._source.cols}}),_dp(s,"headerRows",{get:function(){return this._source.headerRows}}),_dp(s,"rows",{get:function(){return this._source.rows}}),_dp(s,"root",{get:function(){return this._source.root}}),_dp(s,"first",{get:function(){return null}}),_dp(s,"last",{get:function(){return null}}),_dp(s,"firstColumn",{get:function(){return null}}),_dp(s,"lastColumn",{get:function(){return this._source.lastColumn}}),_dp(s,"boundColumn",{get:function(){return this._source.boundColumn}}),s.prototype.load=function(t){},s.prototype._isResizable=function(){return!1},s.prototype._isMovable=function(){return!1},s.prototype.clearMergeGrouped=function(){},s);function s(t,e){var i=r.call(this)||this;return i._source=t,i._index=e,i}e.ProxyCellLayoutItem=m;var a,y,l,v=(a=o,oe.__extends(h,a),h.prototype._doDispose=function(){this._column=this._columnObj=null,this._mergeRuleObj=this._mergeRuleObj&&this._mergeRuleObj.dispose(),this._equalBlankNode=null,a.prototype._doDispose.call(this)},_dp(h,"column",{get:function(){return this._column}}),_dp(h,"mergeRule",{get:function(){return this._mergeRule},set:function(t){if(t!==this._mergeRule){this._mergeRule=t,this._mergeRuleObj&&this._mergeRuleObj.dispose(),this._mergeRuleObj=t?Rt.ColumnMergeRule.createRule(t):void 0===t?void 0:null;var e=this.grid;e&&e._columnMergeRuleChanged(this)}}}),_dp(h,"breakMergeOnEmpty",{get:function(){return this._breakMergeOnEmpty},set:function(t){if(t!==this._breakMergeOnEmpty){this._breakMergeOnEmpty=t;var e=this.grid;e&&e._columnMergeRuleChanged(this)}}}),h.prototype.isBreakMergeOnEmpty=function(){return void 0===this._breakMergeOnEmpty?this._columnObj instanceof Dt.DataColumn&&this._columnObj.breakMergeOnEmpty:this._breakMergeOnEmpty},_dp(h,"equalBlank",{get:function(){return this._equalBlank},set:function(t){t!==this._equalBlank&&(this._equalBlank=t,this._changed())}}),_dp(h,"equalBlankNode",{get:function(){return this._blankNodeRun}}),_dp(h,"blanked",{get:function(){return this._blanked}}),_dp(h,"equalBlankExpression",{get:function(){return this._equalBlankExpression},set:function(t){t!==this._equalBlankExpression&&(this._equalBlankExpression=t,this._equalBlankNode=t?H.ExpressionParser.Default.parse(t,null):void 0===t?void 0:null,this._changed())}}),_dp(h,"cellSpan",{get:function(){return this._cellSpan},set:function(t){(t=Math.max(1,t))!=this._cellSpan&&(this._cellSpan=t,this._changed())}}),_dp(h,"headerSpan",{get:function(){return this._headerSpan},set:function(t){t!=this._headerSpan&&(void 0!==t&&(t=Math.max(1,t)),this._headerSpan=t,this._changed())}}),_dp(h,"summarySpan",{get:function(){return this._summarySpan},set:function(t){t!=this._summarySpan&&(void 0!==t&&(t=Math.max(1,t)),this._summarySpan=t,this._changed())}}),_dp(h,"summarySpans",{get:function(){return this._summarySpans&&this._summarySpans.slice()},set:function(t){t!==this._summarySpans&&(this._summarySpans=t&&t.slice(),this._changed())}}),_dp(h,"footerSpan",{get:function(){return this._footerSpan},set:function(t){t!=this._footerSpan&&(void 0!==t&&(t=Math.max(1,t)),this._footerSpan=t,this._changed())}}),_dp(h,"footerSpans",{get:function(){return this._footerSpans&&this._footerSpans.slice()},set:function(t){t!==this._footerSpans&&(this._footerSpans=t&&t.slice(),this._changed())}}),_dp(h,"dataSpan",{get:function(){return this._dataSpan},set:function(t){t!=this._dataSpan&&(void 0!==t&&(t=Math.max(1,t)),this._dataSpan=t,this._changed())}}),_dp(h,"groupFooterSpan",{get:function(){return this._groupFooterSpan},set:function(t){t!=this._groupFooterSpan&&(void 0!==t&&(t=Math.max(1,t)),this._groupFooterSpan=t,this._changed())}}),_dp(h,"groupFooterSpans",{get:function(){return this._groupFooterSpans&&this._groupFooterSpans.slice()},set:function(t){t!==this._groupFooterSpans&&(this._groupFooterSpans=t&&t.slice(),this._changed())}}),_dp(h,"spanCallback",{get:function(){return this._spanCallback},set:function(t){t!=this._spanCallback&&(this._spanCallback=t,this._changed())}}),_dp(h,"summarySpanCallback",{get:function(){return this._summarySpanCallback},set:function(t){t!=this._summarySpanCallback&&(this._summarySpanCallback=t,this._changed())}}),_dp(h,"footerSpanCallback",{get:function(){return this._footerSpanCallback},set:function(t){t!=this._footerSpanCallback&&(this._footerSpanCallback=t,this._changed())}}),_dp(h,"groupFooterSpanCallback",{get:function(){return this._groupFooterSpanCallback},set:function(t){t!=this._groupFooterSpanCallback&&(this._groupFooterSpanCallback=t,this._changed())}}),h.prototype.canMerge=function(){if(null!=this._mergeRuleObj)return!0;if(this._columnObj instanceof Dt.DataColumn){if(this._columnObj.mergeGrouped)return!0;if(void 0===this._mergeRuleObj)return null!=this._columnObj._mergeRuleObj}},_dp(h,"isNull",{get:function(){return!this._columnObj}}),_dp(h,"cols",{get:function(){return this._cols}}),_dp(h,"headerRows",{get:function(){return 1}}),_dp(h,"rows",{get:function(){return this._rows}}),_dp(h,"first",{get:function(){return this}}),_dp(h,"last",{get:function(){return this}}),_dp(h,"firstColumn",{get:function(){return this._columnObj}}),_dp(h,"lastColumn",{get:function(){if(this._columnObj)return this._columnObj;for(var t=this.parent.visibles,e=t.indexOf(this);0<e--;){var i=t[e];if(i instanceof h&&i.lastColumn)return i.lastColumn}return null}}),_dp(h,"boundColumn",{get:function(){return this._columnObj}}),_dp(h,"displayText",{get:function(){return this._header&&this._header.text||this._columnObj&&this._columnObj.displayText||this.toString()}}),h.prototype.getHeaderSpan=function(){return void 0===this._headerSpan?this._cellSpan:this._headerSpan},h.prototype.getSummarySpan=function(t){var e,i=this._summarySpanCallback,o=this._summarySpans;return i&&void 0!==(e=i(this.grid.handler,this,t))||(e=o&&o.length>t?o[t]:this._summarySpan),void 0===e?this._cellSpan:e},h.prototype.getFooterSpan=function(t){var e,i=this._footerSpanCallback,o=this._footerSpans;return i&&void 0!==(e=i(this.grid.handler,this,t))||(e=o&&o.length>t?o[t]:this._footerSpan),void 0===e?this._cellSpan:e},h.prototype.getGroupFooterSpan=function(t,e){var i,o=this._groupFooterSpanCallback,n=this._groupFooterSpans;return o&&void 0!==(i=o(this.grid.handler,this,t,e))||(i=n&&n.length>e?n[e]:this._groupFooterSpan),void 0===i?this._cellSpan:i},h.prototype.getDataSpan=function(){return void 0===this._dataSpan?this._cellSpan:this._dataSpan},h.prototype.getDataColumn=function(){return this._columnObj},h.prototype._createHeader=function(){return new u(this)},h.prototype._isResizable=function(){return!this._columnObj||this._columnObj.resizable},h.prototype._isMovable=function(){return!this._columnObj||this._columnObj.movable},h.prototype.isColumn=function(t){return this._columnObj===t},h.prototype.findLayout=function(t){return t&&this._columnObj===t?this:null},h.prototype.load=function(t){a.prototype.load.call(this,t),void 0!==t.cellSpan&&(this.cellSpan=t.cellSpan),void 0!==t.headerSpan&&(this.headerSpan=t.headerSpan),void 0!==t.summarySpan&&(this.summarySpan=t.summarySpan),void 0!==t.footerSpan&&(this.footerSpan=t.footerSpan),void 0!==t.dataSpan&&(this.dataSpan=t.dataSpan)},h.prototype.cleanColumns=function(){this._columnObj&&this._columnObj.clean()},h.prototype.$_isVisible=function(){return this._visible&&(!this._columnObj||this._columnObj.visible)},h.prototype._getWidth=function(t){return isNaN(t)?this._columnObj?this._columnObj.width:NaN:t},h.prototype._getFillWidth=function(t){return isNaN(t)?this._columnObj?this._columnObj.fillWidth:NaN:t},h.prototype._prepareLayout=function(t,e,i){a.prototype._prepareLayout.call(this,t,e,i),this._columnObj&&(this._columnObj._prepareLayout(t,this),this._blankNodeRun=this._equalBlankNode,this._blanked=this._equalBlank||null!=this._blankNodeRun,this._blanked||(void 0===this._equalBlankNode&&(this._blanked=null!=(this._blankNodeRun=this._columnObj._equalBlankNode)),this._blanked||void 0!==this._equalBlank||(this._blanked=this._columnObj._equalBlank)))},h.prototype.toString=function(){return"string"==typeof this._column?this._column:a.prototype.toString.call(this)},h.prototype.clearMergeGrouped=function(){this.firstColumn instanceof Dt.DataColumn&&this.firstColumn.$_setMergeGrouped(!1)},h.prototype.$_bindColumn=function(t,e){if(this._columnObj||(this._columnObj=e.columnByName(this._column)),this._columnObj){var i=this._columnObj.$_hash;if(t[i])throw"Column is already contained in layouts: "+(this._columnObj.name||this._columnObj.displayText);this._columnObj._layout=this,t[i]=this}},h.prototype.$_mergeRuleObj=function(){return this._mergeRuleObj?this._mergeRuleObj:void 0===this._mergeRuleObj&&this._columnObj instanceof Dt.DataColumn?this._columnObj._mergeRuleObj:null},h);function h(t){var e=a.call(this)||this;return e._mergeRule=void 0,e._breakMergeOnEmpty=!1,e._equalBlank=void 0,e._equalBlankExpression=void 0,e._cellSpan=1,e._mergeRuleObj=void 0,e._equalBlankNode=void 0,e._cellWidths=[],e._cols=1,e._rows=1,e._blanked=!1,e._column=t,e._columnObj=t instanceof Dt.ValueColumn?t:null,e}e.CellLayoutColumnItem=v,(l=y=e.ColumnLayoutDirection||(e.ColumnLayoutDirection={})).VERTICAL="vertical",l.HORIZONTAL="horizontal";var d,u=(d=re.Base,oe.__extends(_,d),_dp(_,"layout",{get:function(){return this._layout}}),_dp(_,"text",{get:function(){return this._text},set:function(t){t!=this._text&&(this._text=t,this._changed())}}),_dp(_,"styleName",{get:function(){return this._styleName},set:function(t){this._styleName!==t&&(this._styleName=t,this._changed())}}),_.prototype.isVisible=function(){return!0},_.prototype.getDisplayText=function(){return this._text},_.prototype.doAssignSimple=function(t){return"string"==typeof t&&(this.text=t,!0)},_.prototype._changed=function(){this._layout&&this._layout._headerChanged()},_);function _(t){var e=d.call(this)||this;return e._layout=t,e}e.CellLayoutHeader=u;var c,p=(c=u,oe.__extends(f,c),_dp(f,"visible",{get:function(){return this._visible},set:function(t){t!=this._visible&&(this._visible=t,this._changed())}}),f.prototype.doAssignSimple=function(t){return!c.prototype.doAssignSimple.call(this,t)&&"boolean"==typeof t&&(this.visible=t,!0)},f.prototype.isVisible=function(){return this._visible},f.prototype.getDisplayText=function(){return this.text||this.layout.name},f);function f(t){var e=c.call(this,t)||this;return e._visible=!0,e}e.CellLayoutGroupHeader=p;var g,w=(g=o,oe.__extends(C,g),C.getRight=function(t){var e=t&&t.parent;return e?t=(t=e.rightOf(t))||C.getRight(e):null},C.getLeft=function(t){var e=t&&t.parent;return e?t=(t=e.leftOf(t))||C.getLeft(e):null},C.getNext=function(t){var e=t&&t.parent;return e?t=(t=e.nextOf(t))||C.getNext(e):null},C.getPrev=function(t){var e=t&&t.parent;return e?t=(t=e.prevOf(t))||C.getPrev(e):null},C.getLower=function(t){var e=t&&t.parent;return e?t=(t=e.lowerOf(t))||C.getLower(e):null},C.getUpper=function(t){var e=t&&t.parent;return e?t=(t=e.upperOf(t))||C.getUpper(e):null},C.isTop=function(t){for(var e=t&&t.parent;e;){if(e.vertical&&1<e.visibleCount&&0<t.vindex)return!1;e=(t=e).parent}return!0},C.isBottom=function(t){for(var e=t&&t.parent;e;){if(e.vertical&&1<e.visibleCount&&t.vindex<e.visibleCount-1)return!1;e=(t=e).parent}return!0},C.isLeft=function(t){for(var e=t&&t.parent;e;){if(!e.vertical&&1<e.visibleCount&&0<t.vindex)return!1;e=(t=e).parent}return!0},C.isRight=function(t){for(var e=t&&t.parent;e;){if(e.vertical&&1<e.visibleCount&&t.vindex<e.visibleCount-1)return!1;e=(t=e).parent}return!0},C.prototype._doDispose=function(){this._items.forEach(function(t){t&&t.dispose()}),this._visibles=this._items=null,g.prototype._doDispose.call(this)},_dp(C,"name",{get:function(){return this._name}}),_dp(C,"direction",{get:function(){return this._direction},set:function(t){t!=y.VERTICAL&&(t=y.HORIZONTAL),t!=this._direction&&(this._direction=t,this._changed())}}),_dp(C,"vertical",{get:function(){return this._direction==y.VERTICAL}}),_dp(C,"horizontal",{get:function(){return this._direction!=y.VERTICAL}}),_dp(C,"resizable",{get:function(){return this._resizable},set:function(t){this._resizable=t}}),_dp(C,"movable",{get:function(){return this._movable},set:function(t){this._movable=t}}),_dp(C,"hideChildHeaders",{get:function(){return this._hideChildHeaders},set:function(t){t!=this._hideChildHeaders&&(this._hideChildHeaders=t,this._changed())}}),_dp(C,"count",{get:function(){return this._items.length}}),_dp(C,"items",{get:function(){return this._items.slice()},set:function(t){this._items=t?t.slice():[];for(var e=0,i=this._items;e<i.length;e++)i[e]._parent=this;this._changed()}}),_dp(C,"visibleCount",{get:function(){return this._visibles.length}}),_dp(C,"visibles",{get:function(){return this._visibles.slice()}}),C.prototype.contains=function(t){for(var e=0,i=this._items;e<i.length;e++)if(i[e]===t)return!0;return!1},C.prototype.indexOf=function(t){for(var e=0;e<this._items.length;e++)if(this._items[e]===t)return e;return-1},C.prototype.getItem=function(t){return this._items[t]},C.prototype.getVisible=function(t){return this._visibles[t]},C.prototype.addColumn=function(t,e){var i=new v(t);this.addItem(i,e)},C.prototype.addItem=function(t,e){void 0===e&&(e=this._items.length),null!=t&&0<=e&&e<=this._items.length&&(this._items.splice(e,0,t),(t._parent=this)._changed())},C.prototype.removeColumn=function(t){var e=t.layout;this.removeItem(e)},C.prototype.clear=function(t){void 0===t&&(t=!0);for(var e=0,i=this._items;e<i.length;e++){var o=i[e];t&&o instanceof C&&o.clear(),o._detach()}this._items=[],this._visibles=[],this._cols=0,this._rows=0,this._headerCols=0,this._headerRows=0},C.prototype.removeItem=function(t){var e=this.indexOf(t);0<=e&&(this._items.splice(e,1),t._detach(),this._changed())},C.prototype.removeItemAt=function(t){0<=t&&t<this._items.length&&this._items.splice(t,1)[0]._detach()},C.prototype.moveItem=function(t,e){var i=this._items.length;if(t!=e&&0<=t&&t<i&&0<=e&&e<i){var o=this._items[t];this._items.splice(t,1),this._items.splice(e,0,o)}},C.prototype.getColumn=function(t,e,i){var o=this.$_getLeaf(e,i).column;return"string"==typeof o?t.columnByName(o):o},C.prototype.findItem=function(t){if(t)for(var e=0,i=this._items;e<i.length;e++){var o=i[e];if(o instanceof v&&o.column===t)return o;if(o instanceof C){var n=o.findItem(t);if(n)return n}}return null},C.prototype.layoutByName=function(t){if(t)for(var e=0,i=this._items;e<i.length;e++){var o=i[e];if(o instanceof v&&o.firstColumn.name===t)return o;if(o instanceof C){if(o.name===t)return o;var n=o.layoutByName(t);if(n)return n}}return null},C.prototype.rightOf=function(t){if(this.horizontal)try{var e=this.$_checkVisible(t);if(e<this.visibleCount-1)return t=b(this,e+1)}catch(t){}return null},C.prototype.leftOf=function(t){if(this.horizontal)try{var e=this.$_checkVisible(t);if(0<e)return t=I(this,e-1)}catch(t){}return null},C.prototype.nextOf=function(t){try{var e=this.$_checkVisible(t);if(e<this.visibleCount-1)return t=E(this,e+1)}catch(t){}return null},C.prototype.prevOf=function(t){try{var e=this.$_checkVisible(t);if(0<e)return t=S(this,e-1)}catch(t){}return null},C.prototype.lowerOf=function(t){if(this.vertical)try{var e=this.$_checkVisible(t);if(e<this.count-1)return t=R(this,e+1)}catch(t){}return null},C.prototype.upperOf=function(t){if(this.vertical)try{var e=this.$_checkVisible(t);if(0<e)return t=D(this,e-1)}catch(t){}return null},_dp(C,"cols",{get:function(){return this._cols}}),_dp(C,"headerRows",{get:function(){return this._headerRows}}),_dp(C,"rows",{get:function(){return this._rows}}),_dp(C,"first",{get:function(){return 0<this._visibles.length?this._visibles[0].first:this}}),_dp(C,"last",{get:function(){var t=this._visibles?this._visibles.length:0;return 0<t?this._visibles[t-1].last:this}}),_dp(C,"firstColumn",{get:function(){return this._visibles&&0<this._visibles.length?this._visibles[0].firstColumn:null}}),_dp(C,"lastColumn",{get:function(){for(var t=this._visibles?this._visibles.length-1:-1;0<=t;t--){var e=this._visibles[t].lastColumn;if(e)return e}return null}}),_dp(C,"boundColumn",{get:function(){return this.firstColumn}}),C.prototype._createHeader=function(){return new p(this)},C.prototype.load=function(t){this.clear(),void 0!==t.hideChildHeaders&&(this.hideChildHeaders=t.hideChildHeaders),t.items&&this._loadItems(t.items),g.prototype.load.call(this,t)},C.prototype.findLayout=function(t){for(var e=0,i=this._items;e<i.length;e++){var o=i[e].findLayout(t);if(o)return o}return null},C.prototype.cleanColumns=function(){for(var t=0,e=this.items.length;t<e;t++)this.getItem(t).cleanColumns()},C.prototype._isResizable=function(){return this._resizable},C.prototype._isMovable=function(){return this._movable},C.prototype._clearFitWidths=function(){g.prototype._clearFitWidth.call(this);for(var t=0,e=this._visibles;t<e.length;t++)e[t]._clearFitWidth()},C.prototype._setFitWidth=function(t){if(g.prototype._setFitWidth.call(this,t),this.vertical)for(var e=0,i=this._visibles;e<i.length;e++)(l=i[e])._setFitWidth(t);else{for(var o=0,n=0,r=this._visibles;n<r.length;n++)o+=(l=r[n])._cellWidth;for(var s=0,a=this._visibles;s<a.length;s++){var l,h=(l=a[s])._cellWidth/o*t;l._setFitWidth(h)}}},C.prototype._prepareLayout=function(t,e,i){g.prototype._prepareLayout.call(this,t,e,i);for(var o=0,n=this._visibles;o<n.length;o++)n[o]._prepareLayout(t,e,i)},C.prototype.toString=function(){return this._name||g.prototype.toString.call(this)},C.prototype.clearMergeGrouped=function(){for(var t=0,e=this.items.length;t<e;t++)this.getItem(t).clearMergeGrouped()},C.prototype._setColumns=function(t){for(var e=this._items.length=0,i=t.count;e<i;e++){var o=new v(t.getColumn(e));this._items.push(o),o._parent=this}},C.prototype._loadItems=function(t){for(var e=0,i=t;e<i.length;e++){var o=i[e],n=void 0;"string"==typeof o?n=new v(o):"number"==typeof o?(n=new v(null)).width=o:o&&(n=o.items?new C(o.name,o.direction):new v(o.column)),n&&(n._parent=this,n.load(o),this._items.push(n))}},C.prototype.$_bindColumns=function(t,e){for(var i=0,o=this._items;i<o.length;i++){var n=o[i];n._root=null,n instanceof C?n.$_bindColumns(t,e):n.$_bindColumn(t,e)}},C.prototype.$_parseHeaderCells=function(t,e,i){var o=this._direction===y.HORIZONTAL,n=0,r=this._header.isVisible()?1:0;if(r&&this._hideChildHeaders)return this._cspan=this._clen=this._cols,void(this._hlen=this._headerRows);for(var s=0,a=this._visibles;s<a.length;s++){var l=a[s],h=l.header.isVisible()?1:0;if(l._hrow=e,l._hcol=i,l._hspan=h,l._hlen=h,l instanceof C)if(0<h&&(t[e][i]=l),l.$_parseHeaderCells(t,e+h,i),0<h)if(o){i++;for(var d=1;d<l.cols;d++)t[e][i++]=new m(l,d)}else{for(d=1;d<l.cols;d++)t[e][i+d]=new m(l,d);e+=l.headerRows}else o?i+=l.cols:e+=l.headerRows;else if(t[e][i]=l,o){for(d=1;d<this.headerRows-r;d++)t[e+d][i]=new m(l,d),l._hspan++;l._hlen=l._hspan,i+=l.cols}else{for(d=1;d<this.cols;d++)t[e][i+d]=new m(l,d);e+=l.rows}o?n=Math.max(l._hlen,n):n+=l._hlen}this._hlen=o?n+r:Math.max(1,n+r)},C.prototype.$_fillHorz=function(t,e,i,o,n,r){for(var s=i+n,a=o,l=a+this._clen-1,h=0,d=e-n;h<d;h++)for(var u=l;a<=u;u--){var _=t[s+h][u];if(null!=_){_ instanceof m&&(_=_.source);for(var c=u+1;c<=l;c++){var p=t[s+h][c]=new m(_,c-a);r?(p._hrow=s+h,p._hcol=c):(p._row=s+h,p._col=c,_._cspan++,_ instanceof v&&_._clen++)}break}}},C.prototype.$_fillVert=function(t,e,i,o,n,r,s){for(var a=o+r,l=o+e-1,h=n+i-1,d=n;d<=h;d++)for(var u=l;a<=u;u--){var _=t[u][d];if(null!=_){_ instanceof m&&(_=_.source);for(var c=u+1;c<=l;c++){var p=t[c][d]=new m(_,c-a);s?(p._hrow=c,p._hcol=d,_._hspan++,_ instanceof v&&_._hlen++):(p._row=c,p._col=d,_._dspan++,_ instanceof v&&_._dlen++)}break}}},C.prototype.$_adjustHeaderCells=function(t){var e=this._header.isVisible()?1:0;if(e&&this._hideChildHeaders){this._hspan=this._hlen;for(var i=0,o=0;o<this._hlen;o++)for(var n=0;n<this._clen;n++)if(o||n){var r=this._hrow+o,s=this._hcol+n,a=t[r][s]=new m(this,i++);a._hrow=r,a._hcol=s}}else{for(var l=!0,h=0,d=this._visibles;h<d.length;h++){var u=d[h];l=l&&u instanceof v}if(l)this.$_fillVert(t,this._hlen,this._cols,this._hrow,this._hcol,e,!0);else if(this._direction===y.VERTICAL){for(var _=this._clen,c=0,p=this._visibles;c<p.length;c++)(u=p[c])instanceof C&&(u._clen=this._clen,u.$_adjustHeaderCells(t));this.$_fillVert(t,this._hlen,_,this._hrow,this._hcol,e,!0)}else{for(var f=0,g=this._visibles;f<g.length;f++)(u=g[f])instanceof C&&(u._hlen=this._hlen-e,u.$_adjustHeaderCells(t));this.$_fillHorz(t,this._hlen,this._hrow,this._hcol,e,!0)}}},C.prototype.$_parseDataCells=function(t,e,i){for(var o,n=this._direction!=y.VERTICAL,r=0,s=0,a=0,l=this._visibles;a<l.length;a++){var h=l[a];if(h._row=e,h._col=i,h._dspan=1,h._dlen=1,h._cspan=1,h._clen=1,h instanceof C)h.$_parseDataCells(t,e,i),n?i+=h.cols:e+=h.rows;else if(t[e][i]=h,n){for(var d=1;d<this.rows;d++)t[e+d][i]=o=new m(h,d),h._dspan++,o._col=i,o._row=e+d;h._dlen=h._dspan,i+=h.cols}else{for(d=1;d<this.cols;d++)t[e][i+d]=o=new m(h,d),h._cspan++,o._col=i+d,o._row=e;h._clen=h._cspan,e+=h.rows}n?(s+=h._clen,r=Math.max(h._dlen,r)):(s=Math.max(h._clen,s),r+=h._dlen)}n?(s=Math.max(1,s),this._dlen=r):this._dlen=Math.max(1,r),this._cspan=this._clen=s},C.prototype.$_adjustDataCells=function(t){for(var e=!0,i=0,o=this._visibles;i<o.length;i++){var n=o[i];e=e&&n instanceof v}if(this._direction===y.VERTICAL||e){for(var r=0,s=this._visibles;r<s.length;r++)(n=s[r])instanceof C&&(n._clen=this._clen,n.$_adjustDataCells(t));this.$_fillVert(t,this._dlen,this._clen,this._row,this._col,0,!1)}else{for(var a=0,l=this._visibles;a<l.length;a++)(n=l[a])instanceof C&&(n._dlen=this._dlen,n.$_adjustDataCells(t));this.$_fillHorz(t,this._dlen,this._row,this._col,0,!1)}},C.prototype.$_calcSpans=function(){var t=this._header.isVisible();if(this._direction==y.HORIZONTAL){for(var e=0,i=1,o=1,n=0,r=this._visibles;n<r.length;n++)(l=r[n])instanceof C&&l.$_calcSpans(),e+=l.cols,i=Math.max(i,l.headerRows),o=Math.max(o,l.rows);this._rows=o,this._cols=e,t&&this._hideChildHeaders?this._headerRows=1:this._headerRows=i+(t?1:0)}else{this._cols=1,this._headerRows=t?1:0;for(var s=this._rows=0,a=this._visibles;s<a.length;s++){var l;(l=a[s])instanceof C&&l.$_calcSpans(),this._headerRows+=l.headerRows,this._rows+=l.rows,this._cols=Math.max(l.cols,this._cols)}t&&this._hideChildHeaders&&(this._headerRows=1)}},C.prototype.$_resetVisibles=function(){this.vertical;var t=0,e=0;this._visibles=[];for(var i=0,o=this._items;i<o.length;i++){var n=o[i],r=n.$_isVisible();n._index=t++,r&&(this._visibles.push(n),n._vindex=e++),n instanceof C&&n.$_resetVisibles()}this.$_calcSpans()},C.prototype.$_getLeaf=function(t,e){for(var i=0,o=this._visibles;i<o.length;i++){var n=o[i];if(n instanceof C){var r=n.row,s=r+n.rows;if(r<=t&&t<s){var a=n.col,l=a+n.cols;if(a<=e&&e<l)return this.$_getLeaf(t-r,e-a)}}else if(n.row===t&&n.col===e)return n}return null},C.prototype.$_collectCellWidths=function(t){for(var e=[],i=0,o=this._visibles;i<o.length;i++){var n=o[i],r=n.width;if(n instanceof v&&isNaN(r)&&(r=t),n instanceof C){var s=n.$_collectCellWidths(t);isNaN(r)&&(r=s)}e.push(n._cellWidth=r)}var a=this.width;if(isNaN(a))if(a=0,this.vertical)for(var l=0,h=e;l<h.length;l++){var d=h[l];a=Math.max(a,d)}else for(var u=0,_=e;u<_.length;u++)a+=d=_[u];return a},C.prototype.$_arrangeCellWidths=function(){var t=this._visibles.length;if(!(t<1)){var e=this._cellWidth||this.width,i=this._visibles;if(!isNaN(e))if(this.vertical)for(var o=0;o<t;o++)i[o]._cellWidth=e;else{for(var n=0,r=0,s=i;r<s.length;r++)n+=(l=s[r])._cellWidth;var a=0;for(o=0;o<t-1;o++){var l=i[o],h=Math.floor(e*l._cellWidth/n);a+=i[o]._cellWidth=h}i[t-1]._cellWidth=e-a}for(var d=0,u=i;d<u.length;d++)(l=u[d])instanceof C&&l.$_arrangeCellWidths()}},C.prototype.$_fillCellWidths=function(t,e){var i=t;if(this.vertical)for(var o=0,n=this._visibles;o<n.length;o++)(a=n[o])instanceof C?a.$_fillCellWidths(i,e):isNaN(e[i])?e[i]=a._cellWidth:e[i]=Math.min(e[i],a._cellWidth);else for(var r=0,s=this._visibles;r<s.length;r++){var a;(a=s[r])instanceof C?(a.$_fillCellWidths(i,e),i+=a.cols):(isNaN(e[i])?e[i]=a._cellWidth:e[i]=Math.max(e[i],a._cellWidth),i++)}},C.prototype.$_calcCellWidths=function(t,e){for(var i=0;i<t.length;i++)for(var o=t[i],n=0;n<o.length;n++)if(!(h=o[n]).isProxy)for(var r=h._cellWidth/h._clen,s=0;s<h._dlen;s++)for(var a=0;a<h._clen;a++)e[n+a]+=r;for(var l=0;l<e.length;l++)e[l]=Math.round(e[l]/t.length);for(i=0;i<t.length;i++)for(o=t[i],n=0;n<o.length;n++){var h;if(!(h=o[n]).isProxy)for(h._cellWidth=e[n],l=1;l<h._clen;l++)h._cellWidth+=e[n+l]}},C.prototype._childIndexChanged=function(t){this.parent&&this.parent._childIndexChanged(t)},C.prototype._childWidthChanged=function(t){this.parent&&this.parent._childWidthChanged(t)},C.prototype._childFillWidthChanged=function(t){this.parent&&this.parent._childFillWidthChanged(t)},C.prototype.$_checkVisible=function(t){var e;if(!t||(e=t.vindex)<0||t!==this.getVisible(e))throw new Error("Column is not a visible group member");return e},C.prototype.$_collectHorzColumns=function(t,e,i){if(this.horizontal)for(var o=e;o<=i;o++){var n=this._visibles[o];n instanceof C?n.$_collectHorzColumns(t,0,n.visibleCount-1):n instanceof v&&t.push(n._columnObj)}},C.prototype.$_changeChildVIndex=function(t,e){t&&e!=t.vindex&&0<=e&&e<this._visibles.length&&this.$_changeChildIndex(t,this._visibles[e].index)},C.prototype.$_changeChildIndex=function(t,e){if(t){var i=t.index;if(i!=e&&0<=e&&e<this._items.length){for(var o=this._items.splice(i,t.getHeaderSpan()),n=0;n<o.length;n++)this._items.splice(e+n,0,o[n]);this.$_resetVisibles(),this._childIndexChanged(t)}}},C);function C(t,e){var i=g.call(this)||this;return i._direction=y.HORIZONTAL,i._items=[],i._resizable=!0,i._movable=!0,i._hideChildHeaders=!1,i._visibles=[],i._cols=0,i._rows=0,i._headerCols=0,i._headerRows=0,i._name=t,i._direction=e==y.VERTICAL?y.VERTICAL:y.HORIZONTAL,i}e.CellLayoutGroupItem=w;var x,b=function(t,e){for(var i=e,o=t.visibleCount;i<o;i++){var n=t.getVisible(i);if(n instanceof v)return n;if(n instanceof w&&(n=n.first)instanceof v)return n}return null},I=function(t,e){for(var i=e;0<=i;i--){var o=t.getVisible(i);if(o instanceof v)return o;if(o instanceof w&&(o=o.last)instanceof v)return o}return null},E=function(t,e){for(var i=e,o=t.visibleCount;i<o;i++){var n=t.getVisible(i);if(n instanceof v)return n;if(n instanceof w&&(n=n.first)instanceof v)return n}return null},S=function(t,e){for(var i=e;0<=i;i--){var o=t.getVisible(i);if(o instanceof v)return o;if(o instanceof w&&(o=o.last)instanceof v)return o}return null},R=function(t,e){for(var i=e,o=t.visibleCount;i<o;i++){var n=t.getVisible(i);if(n instanceof v)return n;if(n instanceof w&&(n=n.first)instanceof v)return n}return null},D=function(t,e){for(var i=e;0<=i;i--){var o=t.getVisible(i);if(o instanceof v)return o;if(o instanceof w)for(var n=0;n<o.visibleCount;n++){var r=o.getVisible(n);if(r instanceof v&&r.col==t.col)return r}}return null},T=function(t,e,i){for(var o=i?t.visibleCount:t.count,n=0;n<o;n++){var r=i?t.getVisible(n):t.getItem(n);if(r instanceof v){var s=r._columnObj;s&&e.push(s)}else r instanceof w&&T(r,e,i)}},k=function(t,e,i,o,n){for(var r=o?t.visibleCount:t.count,s=0;s<r;s++){var a=o?t.getVisible(s):t.getItem(s);if(a instanceof v&&!n){var l=a._columnObj;l&&e.push(l.name)}else a instanceof w&&(i&&!n||e.push(a.name),k(a,e,i,o,n))}},M=function(t,e,i){for(var o=i?t.visibleCount:t.count,n=0;n<o;n++){var r=i?t.getVisible(n):t.getItem(n);if(r instanceof v){var s=r._columnObj;s instanceof Dt.DataColumn&&e.push(s)}else r instanceof w&&M(r,e,i)}},L=(x=w,oe.__extends(F,x),_dp(F,"grid",{get:function(){return this._owner.grid}}),_dp(F,"owner",{get:function(){return this._owner}}),_dp(F,"root",{get:function(){return this}}),F.prototype._changed=function(){this._owner&&this._owner._changed()},F.prototype._childIndexChanged=function(t){this._owner._itemIndexChanged(t)},F.prototype._childWidthChanged=function(t){this._owner._itemWidthChanged(t)},F.prototype._childFillWidthChanged=function(t){this._owner._itemFillWidthChanged(t)},F);function F(t){var e=x.call(this,"$_root_$",null)||this;return e._owner=t,e.header._visible=!1,e}var V,O=(V=$.EventAware,oe.__extends(N,V),N.prototype._doDispose=function(){this._grid=null,this._root=this._root.dispose(),V.prototype._doDispose.call(this)},_dp(N,"grid",{get:function(){return this._grid}}),_dp(N,"count",{get:function(){return this._root.count}}),_dp(N,"visibleCount",{get:function(){return this._root.visibleCount}}),_dp(N,"headerRows",{get:function(){return this._root._hlen}}),_dp(N,"dataRows",{get:function(){return this._root._dlen}}),_dp(N,"first",{get:function(){return this._root.first}}),_dp(N,"last",{get:function(){return this._root.last}}),_dp(N,"firstColumn",{get:function(){return this._root.firstColumn}}),N.prototype.load=function(t){return this.$_clear(),this._root._loadItems(t),this._changed(),this},N.prototype.cleanColumns=function(){this._root.cleanColumns()},N.prototype.invalidate=function(){this._changed()},N.prototype.invalidateIndices=function(){this.grid.displayOptions.remergeWhenColumnMoved&&this.grid._populateMerges(),this.grid.clearSelection(),this._changed()},N.prototype.invalidateSize=function(){this._resized||(this._resized=!0,this.grid.invalidateCellLayouts())},N.prototype.getVisible=function(t){return this._root.getVisible(t)},N.prototype.add=function(t,e,i){(t=t||this._root).addColumn(e,i)},N.prototype.remove=function(t,e){(t=t||this._root).removeColumn(e)},N.prototype.setColumns=function(t){this._root._setColumns(t),this._changed()},N.prototype.layoutByColumn=function(t){return t&&this._root.findLayout(t)},N.prototype.layoutByName=function(t){return t&&this._root.layoutByName(t)},N.prototype.getHeaderCellPos=function(t){for(var e=0;e<this._headerCells.length;e++)for(var i=this._headerCells[e],o=0;o<i.length;o++)if(i[o]instanceof v&&i[o]._columnObj===t)return{row:e,col:o}},N.prototype.getDataCellPos=function(t){for(var e=0;e<this._dataCells.length;e++)for(var i=this._dataCells[e],o=0;o<i.length;o++)if(i[o]instanceof v&&i[o]._columnObj===t)return{row:e,col:o}},N.prototype.getDataColumns=function(t){void 0===t&&(t=!0);var e=[];return M(this._root,e,t),e},N.prototype.collectColumns=function(t,e,i){var o=[];return T(this._root,o,e),o},N.prototype.collectColumnNames=function(t,e,i,r){var o=[],n=this._root;return r?"string"==typeof r?n=function t(e){for(var i=0,o=e.count;i<o;i++){var n=e.getItem(i);if(n instanceof w)return n.name===r?n:t(n)}}(n):r instanceof w&&(n=r):n=this._root,n?(k(n,o,t,e,i),o):null},N.prototype.collectDataColumns=function(t,e){var i=t.col>e.col?e.col:t.col,o=t.col>e.col?t.col:e.col,n=[];M(this._root,n,!0);for(var r=n.length-1;0<=r;r--){var s=n[r].layout.col;(s<i||o<s)&&n.splice(r,1)}return n},N.prototype.getHorzColumns=function(t,e){void 0===t&&(t=0);var i=null==e?t+this._root.visibleCount-1:t+e-1,o=[];return this._root.$_collectHorzColumns(o,t,i),o},N.prototype.getHomeOf=function(t){return t instanceof m&&(t=t.source),(t=this._dataCells[t?t.row:0][0])instanceof m&&(t=t.source),t},N.prototype.getEndOf=function(t){t instanceof m&&(t=t.source);var e=this._dataCells,i=t?t.row:e.length-1;return(t=e[i][e[i].length-1])instanceof m&&(t=t.source),t},N.prototype.getTopOf=function(t){return(t=this._dataCells[0][t.col])instanceof m&&(t=t.source),t},N.prototype.getBottomOf=function(t,e){void 0===e&&(e=!1);var i=this._dataCells;return t=i[i.length-1][t.col],!e&&t instanceof m&&(t=t.source),t},N.prototype.getLowerOf=function(t){t instanceof m&&(t=t.source);var e=this._dataCells,i=t.row,o=t.col,n=0;return(t=i+t.row<e.length?e[i+t.rows][o]:(n=1,e[0][o]))instanceof m&&(t=t.source),{dy:n,layout:t}},N.prototype.getUpperOf=function(t){t instanceof m&&(t=t.source);var e=this._dataCells,i=t.row,o=t.col,n=0;return(t=0<i?e[i-1][o]:(n=-1,e[e.length-1][o]))instanceof m&&(t=t.source),{dy:n,layout:t}},N.prototype.getRightOf=function(t){t instanceof m&&(t=t.source);var e=this._dataCells[t.row],i=t.col;return i+t.cols<e.length?((t=e[i+t.cspan])instanceof m&&(t=t.source),t):null},N.prototype.getLeftOf=function(t){t instanceof m&&(t=t.source);var e=this._dataCells[t.row],i=t.col;return 0<i?((t=e[i-1])instanceof m&&(t=t.source),t):null},N.prototype._changed=function(){if(!this._dirty){this._dirty=!0;var t=this.grid;t&&t.invalidateLayout()}},N.prototype.$_clear=function(){this._headerCells=[],this._dataCells=[]},N.prototype.$_refresh=function(t,e){this._dirty?(this._root.$_bindColumns({},t),this._root.$_resetVisibles(),this.$_parseCells(this._root,t),this.$_calculateCellWidths(this._root,e),this._dirty=!1):this._resized&&this.$_calculateCellWidths(this._root,e),this._resized=!1},N.prototype.$_prepareLayout=function(t,e,i){for(var o=0,n=this._root.visibleCount;o<n;o++)this._root.getVisible(o)._prepareLayout(t,o<e,n-i<=o)},N.prototype.$_parseCells=function(t,e){var i=t._visibles;this.$_parseHeaderCells(i),this.$_parseDataCells(i)},N.prototype.$_parseHeaderCells=function(t){for(var e=this._headerCells=[],i=0,o=0,n=t;o<n.length;o++){var r=n[o];i=Math.max(i,r.headerRows)}for(var s=0;s<i;s++)e.push([]);this._root.$_parseHeaderCells(e,0,0),this._root.$_adjustHeaderCells(e)},N.prototype.$_parseDataCells=function(t){for(var e=this._dataCells=[],i=0,o=0,n=t;o<n.length;o++){var r=n[o];i=Math.max(i,r.rows)}for(var s=0;s<i;s++)e.push([]);this._root.$_parseDataCells(e,0,0),this._root.$_adjustDataCells(e)},N.prototype.$_calculateCellWidths=function(t,e){t.$_collectCellWidths(e),t.$_arrangeCellWidths();for(var i=this._cellWidths=[],o=0,n=t.cols;o<n;o++)i.push(0);t.$_calcCellWidths(this._dataCells,i)},N.prototype.$_clearFitWidths=function(){this._root._clearFitWidths()},N.prototype._columnsChanged=function(t){},N.prototype._columnChanged=function(t){},N.prototype._itemIndexChanged=function(t){this.invalidateIndices()},N.prototype._itemWidthChanged=function(t){this.invalidateSize()},N.prototype._itemFillWidthChanged=function(t){this.grid.layoutManager.isColumnFitted&&this.invalidateSize()},N.prototype._clearMergeGrouped=function(){this._root.clearMergeGrouped()},N.prototype.$_changeCellWidths=function(t,e,i){for(var o=t;0<=o;o--){var n=this._headerCells[o][e];if(n instanceof m&&(n=n.source).row!=o&&(n=null),n){var r=n.width;for(isNaN(r)&&(r=n._cellWidth),n.width=r+r/n._cellWidth*i;!n.isRoot&&(n=n.parent)&&!n.header.isVisible();)r=n.width,isNaN(r)&&(r=n._cellWidth),n.width=r+r/n._cellWidth*i}}},N);function N(t){var e=V.call(this)||this;return e._dirty=!1,e._resized=!1,e._headerCells=[],e._dataCells=[],e._cellWidths=[],e._grid=t,e._root=new L(e),e}e.GridCellLayout=O;var P,B=(P=O,oe.__extends(A,P),A.prototype._columnsChanged=function(t){this.setColumns(t),P.prototype._columnsChanged.call(this,t)},A);function A(t){return P.call(this,t)||this}e.DefaultCellLayout=B});t(Tt);Tt.CellLayoutItem,Tt.ProxyCellLayoutItem,Tt.CellLayoutColumnItem,Tt.ColumnLayoutDirection,Tt.CellLayoutHeader,Tt.CellLayoutGroupHeader,Tt.CellLayoutGroupItem,Tt.GridCellLayout,Tt.DefaultCellLayout;var kt=e(function(t,e){var n,i;Object.defineProperty(e,"__esModule",{value:!0}),(i=n=e.VerticalMoveStep||(e.VerticalMoveStep={})).ROW="row",i.CELL="cell";var r,o=(r=re.Base,oe.__extends(s,r),s.temp=function(t,e,i){return void 0===t&&(t=null),void 0===e&&(e=0),void 0===i&&(i=null),s.$_temp||(s.$_temp=new s),s.$_temp._grid=t,s.$_temp._itemIndex=e,s.$_temp._layout=i instanceof Tt.CellLayoutItem?i:i&&i.layout,s.$_temp},s.areEquals=function(t,e){return t==e||t&&e&&t._grid===e._grid&&t._itemIndex===e._itemIndex&&t._layout===e._layout},s.equalsTo=function(t,e,i){return t&&t._itemIndex===e&&t.layout===i},s.clearTemp=function(){s.$_temp&&(s.$_temp=s.$_temp.dispose())},s.compareHorz=function(t,e){if(t&&e)return t.layout.distance-e.layout.distance},s.prototype._doDispose=function(){this._grid=null,this._layout=null,r.prototype._doDispose.call(this)},_dp(s,"grid",{get:function(){return this._grid}}),_dp(s,"itemIndex",{get:function(){return this._itemIndex},set:function(t){this._itemIndex=t}}),_dp(s,"layout",{get:function(){return this._layout},set:function(t){this._layout=t}}),_dp(s,"column",{get:function(){return this._layout&&this._layout.firstColumn},set:function(t){"string"==typeof t&&(t=this.grid&&this.grid.columnByName(t)),this._layout=t&&t.layout}}),_dp(s,"dataColumn",{get:function(){var t=this.column;return t instanceof Dt.DataColumn?t:null}}),_dp(s,"valueColumn",{get:function(){var t=this.column;return t instanceof Dt.ValueColumn?t:null}}),_dp(s,"dataField",{get:function(){var t=this.dataColumn;return t instanceof Dt.DataColumn?t.dataIndex:-1}}),_dp(s,"item",{get:function(){return this._grid&&this._grid.getItem(this._itemIndex)}}),_dp(s,"dataRow",{get:function(){var t=this.item;return t?t.dataRow:-1},set:function(t){if(this._grid){var e=this._grid.getItemOfRow(t,!1);e&&(this.itemIndex=e.index)}}}),_dp(s,"fieldName",{set:function(t){if(this._grid){var e=this._grid.columnByField(t);e&&(this.column=e)}}}),_dp(s,"dataId",{get:function(){var t=this.item;return t?t.dataId:-1}}),_dp(s,"value",{get:function(){var t=this.column;if(t instanceof Dt.DataColumn){var e=t.dataIndex;if(e<0)throw new Error("Not exists data field: "+t.fieldName);var i=this.item;if(!i)throw new Error("Invalid item index: "+this._itemIndex);return i.getData(e)}}}),_dp(s,"fixed",{get:function(){var t=this._layout;if(this._grid&&t&&t.visible){var e=this._grid.layoutManager,i=t.root.vindex;return i<e.fixedLayoutCount||i>=e.rightFirstLayout||0<=this._itemIndex&&this._itemIndex<e.fixedItemCount}return!1}}),_dp(s,"rowFixed",{get:function(){var t=this._layout;if(this._grid&&t&&t.visible){var e=this._grid.layoutManager;return 0<=this._itemIndex&&this._itemIndex<e.fixedItemCount}return!1}}),_dp(s,"colFixed",{get:function(){if(this._grid&&this._layout&&this._layout.visible){var t=this._grid.layoutManager;return this._layout.root.vindex<t.fixedLayoutCount}return!1}}),_dp(s,"rightFixed",{get:function(){if(this._grid&&this._layout&&this._layout.visible){var t=this._grid.layoutManager;return this._layout.root.vindex>=t.rightFirstLayout}return!1}}),_dp(s,"isTop",{get:function(){return!this._layout||!this._layout.group||(this.$_isSpanned()?this.grid.$_isTopCell(this):Tt.CellLayoutGroupItem.isTop(this._layout))}}),_dp(s,"isBottom",{get:function(){return!this._layout||!this._layout.group||(this.$_isSpanned()?this.grid.$_isBottomCell(this):Tt.CellLayoutGroupItem.isBottom(this._layout))}}),_dp(s,"isLeft",{get:function(){if(this._layout){var t=this._layout.group;return t?0==t.vindex&&Tt.CellLayoutGroupItem.isLeft(this._layout):0==this._layout.vindex}return!1}}),_dp(s,"isRight",{get:function(){if(this._layout){var t=this._layout.group;return t?0==t.vindex&&Tt.CellLayoutGroupItem.isRight(this._layout):this._layout.vindex==this._grid.visibleLayoutCount-1}return!1}}),_dp(s,"isFirst",{get:function(){if(this._layout&&this._grid&&0<this._grid.visibleLayoutCount){var t=this._grid.getVisibleLayout(0);return(t=t instanceof Tt.CellLayoutColumnItem?t:t.root.first)===this._layout}return!1}}),_dp(s,"isEditableFirst",{get:function(){var t=this._grid;if(t&&this._layout){var e=t.collectColumns(!0,!0,!0),i=e.indexOf(this._layout.firstColumn);if(0<=i){for(var o=i-1;o--;){var n=e[o];if(n instanceof Dt.SeriesColumn)return!1;var r=s.temp(t,this.itemIndex,n);if(t.canWriteAt(r))return!1}return!0}}return!1}}),_dp(s,"isEditableLast",{get:function(){var t=this._grid;if(t&&this._layout)for(var e=t.collectColumns(!0,!0,!0),i=e.indexOf(this._layout.firstColumn)+1,o=e.length;i<o;i++){var n=e[i];if(n instanceof Dt.SeriesColumn)return!1;var r=s.temp(t,this.itemIndex,n);if(t.canWriteAt(r))return!1}return!0}}),_dp(s,"isLast",{get:function(){if(this._layout&&this._grid&&0<this._grid.visibleLayoutCount){var t=this._grid.getVisibleLayout(this._grid.visibleLayoutCount-1);return(t=t instanceof Tt.CellLayoutColumnItem?t:t.root.last)===this._layout}return!1}}),s.prototype.set=function(t,e,i){return void 0!==i&&(this._grid=i),this._itemIndex=t,this._layout=e instanceof Dt.GridColumn?e.layout:e,this},s.prototype.assign=function(t){return t?(t.grid&&(this._grid=t._grid),this._itemIndex=t._itemIndex,this._layout=t._layout):(this._itemIndex=-1,this._layout=null),this},s.prototype.reset=function(){return this._itemIndex=-1,this._layout=null,this},s.prototype.clone=function(){return new s(this._grid,this._itemIndex,this._layout)},s.prototype.proxy=function(){return{itemIndex:isNaN(this._itemIndex)?-1:this._itemIndex,column:this.column?this.column.name:null,dataRow:this.dataRow,fieldIndex:this.dataColumn?this.column.dataIndex:-1,fieldName:this.dataColumn?this.column.fieldName:null}},s.prototype.normalize=function(t){return t&&(this._grid=t,this._layout||(this._layout=t.getFirstLayout()),this._itemIndex=Math.max(0,Math.min(this._itemIndex,t.itemCount-1))),this},s.prototype.incRow=function(t){this._grid&&(this._itemIndex=Math.max(0,Math.min(this._grid.itemCount-1,this._itemIndex+t)))},s.prototype.first=function(){this._grid&&(this._itemIndex=0)},s.prototype.last=function(){this._grid&&(this._itemIndex=this._grid.itemCount-1)},s.prototype.right=function(){var t=this._grid&&this.$_gridLayout().getRightOf(this._layout);t&&(this._layout=t)},s.prototype.left=function(){var t=this._grid&&this.$_gridLayout().getLeftOf(this._layout);t&&(this._layout=t)},s.prototype.next=function(){var t=u(this._grid,this._layout);if(t)return this._layout=t,!0},s.prototype.prev=function(){var t=_(this._grid,this._layout);if(t)return this._layout=t,!0},s.prototype.home=function(){this._layout=this._grid&&this.$_gridLayout().getHomeOf(this._layout)},s.prototype.end=function(){this._layout=this._grid&&this.$_gridLayout().getEndOf(this._layout)},s.prototype.down=function(t,e,i){void 0===t&&(t=n.ROW),void 0===e&&(e=!1),void 0===i&&(i=!1),this._grid&&(t==n.ROW&&!e||this.isBottom||i?this._itemIndex<this._grid.itemCount-1&&(t==n.CELL&&(this._layout=this.$_gridLayout().getTopOf(this._layout)),this.incRow(1)):this._grid.spanned?this._layout=this._grid.$_getLowerOfCell(this):this._layout=this.$_gridLayout().getLowerOf(this._layout).layout)},s.prototype.up=function(t,e,i){if(void 0===t&&(t=n.ROW),void 0===e&&(e=!1),void 0===i&&(i=!1),this._grid)if(t==n.ROW&&!e||this.isTop||i){if(0<this._itemIndex){if(t==n.CELL)if(this._grid.spanned){var o=this._grid.$_getUpperOfCell(this);this._layout=o||this.$_gridLayout().getBottomOf(this._layout)}else this._layout=this.$_gridLayout().getBottomOf(this._layout);this.incRow(-1)}}else this._grid.spanned?this._layout=this._grid.$_getUpperOfCell(this):this._layout=this.$_gridLayout().getUpperOf(this._layout).layout},s.prototype.getValue=function(){if(this._grid){var t=this.dataColumn,e=this._grid.getItem(this._itemIndex);return t&&e&&e.getData(t.dataIndex)}},s.prototype.assignFrom=function(t){t instanceof s?(this._grid=t._grid,this._layout=t._layout,this._itemIndex=t._itemIndex):r.prototype.assignFrom.call(this,t)},s.prototype.toString=function(){return"("+this._itemIndex+", "+this.column+")"},s.prototype.$_gridLayout=function(){return this._grid._activeCellLayout},s.prototype.$_isSpanned=function(){return this._grid&&this._grid.spanned},s);function s(t,e,i){void 0===t&&(t=null),void 0===e&&(e=-1),void 0===i&&(i=null);var o=r.call(this)||this;return o._itemIndex=-1,o._grid=t,o._itemIndex=e,o._layout=i instanceof Dt.GridColumn?i.layout:i,o}e.CellIndex=o;var a,l=(a=o,oe.__extends(h,a),h.tempItem=function(t,e,i){return h.$_itemTemp||(h.$_itemTemp=new h),h.$_itemTemp._grid=t,h.$_itemTemp._item=e,h.$_itemTemp._itemIndex=e.index,h.$_itemTemp._layout=i instanceof Tt.CellLayoutItem?i:i&&i.layout,h.$_itemTemp},_dp(h,"item",{get:function(){return this._item}}),h);function h(t,e,i){var o=a.call(this,t,e&&e.index,i)||this;return o._item=e,o}e.DummyCellIndex=l;var d,u=function(t,e){if(!t||!e)return null;var i=t.layoutManager,o=Tt.CellLayoutGroupItem.getNext(e);if(o)return o;for(var n=(e.group?e.root.vindex:e.vindex)+1,r=i.layoutCount;n<r;n++){if((o=i.getLayout(n))instanceof Tt.CellLayoutColumnItem)return o;if(o instanceof Tt.CellLayoutGroupItem&&(o=o.first))return o}},_=function(t,e){if(!t||!e)return null;var i=t.layoutManager,o=Tt.CellLayoutGroupItem.getPrev(e);if(o)return o;for(var n=(e.group?e.root.vindex:e.vindex)-1;0<=n;n++){if((o=i.getLayout(n))instanceof Tt.CellLayoutColumnItem)return o;if(o instanceof Tt.CellLayoutGroupItem&&(o=o.last))return o}},c=(d=re.Base,oe.__extends(p,d),p.$_setRange=function(t,e,i,o,n){return t._row1=e<=o?e:o,t._row2=e<=o?o:e,t._col1=i.col<=n.col?i:n,t._col2=i.col<=n.col?n:i,t},p.create=function(t,e){if(e&&t!==e)return p.$_setRange(new p,t.itemIndex,t.layout,e.itemIndex,e.layout);var i=new p;return i._row1=i._row2=t.itemIndex,i._col1=i._col2=t.layout,i},p.temp=function(t,e){var i=p.$_TEMP;return e&&t!==e?p.$_setRange(i,t.itemIndex,t.layout,e.itemIndex,e.layout):(i._row1=i._row2=t.itemIndex,i._col1=i._col2=t.layout,i)},p.createRange=function(t,e,i,o){return p.$_setRange(new p,t,e,i,o)},_dp(p,"empty",{get:function(){return this._row2<this._row1||!this._col2&&!this._col2}}),_dp(p,"r1",{get:function(){return this._row1}}),_dp(p,"c1",{get:function(){return this._col1}}),_dp(p,"r2",{get:function(){return this._row2}}),_dp(p,"c2",{get:function(){return this._col2}}),_dp(p,"top",{get:function(){return this._row1<=this._row2?this._row1:this._row2}}),_dp(p,"bottom",{get:function(){return this._row1<=this._row2?this._row2:this._row1}}),_dp(p,"firstCell",{get:function(){var t=new o;return t.itemIndex=this._row1<=this._row2?this._row1:this._row2,this._col1.col===this._col2.col?t.layout=this._col1.row<=this._col2.row?this._col1:this._col2:t.layout=this._col1.col<=this._col2.col?this._col1:this._col2,t}}),_dp(p,"lastCell",{get:function(){var t=new o;return t.itemIndex=this._row1>=this._row2?this._row1:this._row2,this._col1.col===this._col2.col?t.layout=this._col1.row>=this._col2.row?this._col1:this._col2:t.layout=this._col1.col>=this._col2.col?this._col1:this._col2,t}}),p.prototype.contains=function(t,e){if(e){var i=e.index;return t>=this._row1&&t<=this._row2&&i>=this._col1.col&&i<=this._col2.col}return!1},p.prototype.containsIndex=function(t){return t&&this.contains(t.itemIndex,t.layout)},p.prototype.normalize=function(){if(this._row1>this._row2){var t=this._row1;this._row1=this._row2,this._row2=t}if(this._col1.col<=this._col2.col){if(this._col1.row>this._col2.row){var e=this._col1;this._col1=this._col2,this._col2=e}}else e=this._col1,this._col1=this._col2,this._col2=e;return this},p.prototype.normalizeData=function(){return this.normalize(),this},p.prototype.intersectsWith=function(t){return!1},p.NULL=new p,p.$_TEMP=new p,p);function p(){var t=d.call(this)||this;return t._row1=0,t._row2=0,t}e.CellRange=c});t(kt);kt.VerticalMoveStep,kt.CellIndex,kt.DummyCellIndex,kt.CellRange;var Mt=e(function(t,e){Object.defineProperty(e,"__esModule",{value:!0});var i,n=(i=H.ExpressionRuntime,oe.__extends(o,i),o.prototype._doDispose=function(){i.prototype._doDispose.call(this)},o.prototype.isIdentifier=function(t){return t=t.toLowerCase(),o.IDENTS.hasOwnProperty(t)?o.IDENTS[t]:i.prototype.isIdentifier.call(this,t)},o.prototype.evaluateIdentifier=function(t){switch(t){case o.ID_COUNT:return this._getCount();case o.ID_SUM:return this._getSum();case o.ID_MAX:return this._getMax();case o.ID_MIN:return this._getMin();case o.ID_AVG:return this._getAvg();case o.ID_VAR:return this._getVar();case o.ID_VARP:return this._getVarp();case o.ID_STDEV:return this._getStdev();case o.ID_STDEVP:return this._getStdevp();case o.ID_DATA_COUNT:return this._getDataCount();case o.ID_DATA_AVG:return this._getDataAvg()}throw new H.ExpressionEvaluationError("Invalid identifier key: "+t)},o.prototype.evaluateIndexerI=function(t,e){throw new H.ExpressionEvaluationError("Invalid identifier indexer: "+t)},o.prototype.evaluateIndexerS=function(t,e,i){throw new H.ExpressionEvaluationError("Invalid identifier indexer: "+t)},o.IDENTS={count:o.ID_COUNT=0,sum:o.ID_SUM=1,max:o.ID_MAX=2,min:o.ID_MIN=3,avg:o.ID_AVG=4,var:o.ID_VAR=5,varp:o.ID_VARP=6,stdev:o.ID_STDEV=7,stdevp:o.ID_STDEVP=8,datacount:o.ID_DATA_COUNT=9,dataavg:o.ID_DATA_AVG=10},o);function o(){return i.call(this)||this}e.SummaryExpressionRuntime=n;var r,s=(r=n,oe.__extends(a,r),a.prototype._doDispose=function(){this._grid=null,this._ds=null,this._column=null,this._summarizer=null,r.prototype._doDispose.call(this)},a.prototype.setColumn=function(t,e){this._column=t,this._grid=t.grid,this._ds=this._grid.dataSource,this._fieldCount=this._ds.fieldCount,this._summarizer=e},a.prototype.isIdentifier=function(t){return t=t.toLowerCase(),n.IDENTS.hasOwnProperty(t)?n.IDENTS[t]:r.prototype.isIdentifier.call(this,t)},a.prototype.evaluateIndexerI=function(t,e){if(this._summarizer){if(e<0||e>=this._fieldCount)throw new H.ExpressionEvaluationError("Data field index out of bounds: "+e);switch(t){case n.ID_SUM:return this._summarizer.getSum(e);case n.ID_COUNT:return this._summarizer.getCount(e);case n.ID_MAX:return this._summarizer.getMax(e);case n.ID_MIN:return this._summarizer.getMin(e);case n.ID_AVG:return this._summarizer.getAvg(e);case n.ID_VAR:return this._summarizer.getVar(e);case n.ID_VARP:return this._summarizer.getVarp(e);case n.ID_STDEV:return this._summarizer.getStdev(e);case n.ID_STDEVP:return this._summarizer.getStdevp(e);case n.ID_DATA_COUNT:return this._summarizer.getDataCount(e);case n.ID_DATA_AVG:return this._summarizer.getDataAvg(e)}throw new H.ExpressionEvaluationError("Invalid identifier indexer: "+t)}switch(t){case n.ID_SUM:case n.ID_COUNT:return 0;case n.ID_MAX:case n.ID_MIN:case n.ID_AVG:case n.ID_VAR:case n.ID_VARP:case n.ID_STDEV:case n.ID_STDEVP:return NaN}},a.prototype.evaluateIndexerS=function(t,e,i){if(this._summarizer&&this._ds){var o=i?this._ds.getFieldIndexC(e):this._ds.getFieldIndex(e);if(o<0||o>=this._fieldCount)throw new H.ExpressionEvaluationError("Data field index out of bounds: "+o);switch(t){case n.ID_SUM:return this._summarizer.getSum(o);case n.ID_COUNT:return this._summarizer.getCount(o);case n.ID_MAX:return this._summarizer.getMax(o);case n.ID_MIN:return this._summarizer.getMin(o);case n.ID_AVG:return this._summarizer.getAvg(o);case n.ID_VAR:return this._summarizer.getVar(o);case n.ID_VARP:return this._summarizer.getVarp(o);case n.ID_STDEV:return this._summarizer.getStdev(o);case n.ID_STDEVP:return this._summarizer.getStdevp(o)}throw new H.ExpressionEvaluationError("Invalid identifier indexer: "+t)}switch(t){case n.ID_SUM:case n.ID_COUNT:return 0;case n.ID_MAX:case n.ID_MIN:case n.ID_AVG:case n.ID_VAR:case n.ID_VARP:case n.ID_STDEV:case n.ID_STDEVP:return NaN}},a.prototype._getCount=function(){return this._summarizer?this._summarizer.getCount(this._column.dataIndex):0},a.prototype._getSum=function(){return this._summarizer?this._summarizer.getSum(this._column.dataIndex):0},a.prototype._getMax=function(){return this._summarizer?this._summarizer.getMax(this._column.dataIndex):NaN},a.prototype._getMin=function(){return this._summarizer?this._summarizer.getMin(this._column.dataIndex):NaN},a.prototype._getAvg=function(){return this._summarizer?this._summarizer.getAvg(this._column.dataIndex):NaN},a.prototype._getVar=function(){return this._summarizer?this._summarizer.getVar(this._column.dataIndex):NaN},a.prototype._getVarp=function(){return this._summarizer?this._summarizer.getVarp(this._column.dataIndex):NaN},a.prototype._getStdev=function(){return this._summarizer?this._summarizer.getStdev(this._column.dataIndex):NaN},a.prototype._getStdevp=function(){return this._summarizer?this._summarizer.getStdevp(this._column.dataIndex):NaN},a.prototype._getDataCount=function(){return this._summarizer?this._summarizer.getDataCount(this._column.dataIndex):NaN},a.prototype._getDataAvg=function(){return this._summarizer?this._summarizer.getDataAvg(this._column.dataIndex):NaN},a);function a(){return r.call(this)||this}e.ColumnSummaryRuntime=s;var l,h=(l=s,oe.__extends(d,l),d.prototype._doDispose=function(){l.prototype._doDispose.call(this)},_dp(d,"item",{get:function(){return this._item}}),d.prototype.setItem=function(t){this._item=t},d.prototype._getCount=function(){return this._item.getNumber(this._column.dataIndex)},d.prototype._getSum=function(){return this._item.getSum(this._column.dataIndex)},d.prototype._getMax=function(){return this._item.getMax(this._column.dataIndex)},d.prototype._getMin=function(){return this._item.getMin(this._column.dataIndex)},d.prototype._getAvg=function(){return this._item.getAvg(this._column.dataIndex)},d.prototype._getVar=function(){return this._item.getVar(this._column.dataIndex,1)},d.prototype._getVarp=function(){return this._item.getVar(this._column.dataIndex,0)},d.prototype._getStdev=function(){return this._item.getStdev(this._column.dataIndex,1)},d.prototype._getStdevp=function(){return this._item.getStdev(this._column.dataIndex,0)},d.prototype._getDataCount=function(){return this._item.getDataCount(this._column.dataIndex)},d.prototype._getDataAvg=function(){return this._item.getDataAvg(this._column.dataIndex)},d);function d(){return l.call(this)||this}e.RowGroupSummaryRuntime=h});t(Mt);Mt.SummaryExpressionRuntime,Mt.ColumnSummaryRuntime,Mt.RowGroupSummaryRuntime;var Lt=e(function(t,e){Object.defineProperty(e,"__esModule",{value:!0});var i,o=(i=re.Base,oe.__extends(n,i),n.prototype._doDispose=function(){this._clearColumn(),this._columns=null,this._owner=null,this._nameMap=null,i.prototype._doDispose.call(this)},_dp(n,"owner",{get:function(){return this._owner}}),_dp(n,"count",{get:function(){return this._columns.length}}),_dp(n,"columns",{get:function(){return this._columns.slice()}}),n.prototype.getColumn=function(t){return this._columns[t]},n.prototype.setColumns=function(t){if(this._columns.length=0,this._nameMap={},t)for(var e=0,i=t;e<i.length;e++){var o=i[e],n=this._addColumn(o);if(!n)throw new Error("column is undefined");n.$_owner=this}this._orgColumns=this._columns.slice()},n.prototype.add=function(t,e){var i=this._addColumn(t,void 0===e?-1:e);return null!=i&&(i.$_owner=this),i},n.prototype.remove=function(t){return!!this._removeColumn(t)},n.prototype.resetIndices=function(){if(this._owner)for(var t=0,e=this._columns.length;t<e;t++){var i=this._columns[t];i.$_setIndex(t),i._resetIndices(this._owner)}},n.prototype.resetSortStates=function(){if(this._owner)for(var t=this._owner.getSortDirections(),e=this._owner.getSortFields(),i=0,o=this._columns.length;i<o;i++){var n=this._columns[i];n instanceof Dt.DataColumn&&(n.sortOrder=e.indexOf(n.dataIndex),n.sortDirection=t[n.sortOrder])}},n.prototype.columnByName=function(t){return this._nameMap[t]},n.prototype.columnByField=function(t){if(0<=t)for(var e=0,i=this.count;e<i;e++){var o=this.getColumn(e);if(o instanceof Dt.DataColumn&&o.dataIndex==t)return o}return null},n.prototype.restoreColumns=function(){this._restoreColumn()},n.prototype._addColumn=function(t,e){void 0===e&&(e=-1);var i=this._columns;if(!t||t instanceof Dt.GridColumn||(t=oi.GridBase.createColumn(t)),t instanceof Dt.GridColumn){if(0<=i.indexOf(t))throw new Error("column is already contained");e<0?i.push(t):i.splice(e,0,t);var o=t.name;return o&&(this._nameMap[o]=t),t}return null},n.prototype._removeColumn=function(t){var e=this._columns.indexOf(t);return 0<=e&&(this._columns.splice(e,1),!(t.$_owner=void 0))},n.prototype._restoreColumn=function(){this._columns=this._orgColumns.slice()},n.prototype._clearColumn=function(){for(var t=0,e=this._columns;t<e.length;t++)e[t].dispose()},n);function n(t){var e=i.call(this)||this;return e._columns=[],e._orgColumns=[],e._nameMap={},e._owner=t,e}e.ColumnCollection=o});t(Lt);Lt.ColumnCollection;var Ft=e(function(t,e){Object.defineProperty(e,"__esModule",{value:!0});var i,o=(i=mt.GridCell,oe.__extends(n,i),n.prototype._doDispose=function(){i.prototype._doDispose.call(this)},_dp(n,"text",{get:function(){return this._text},set:function(t){this._text=t}}),_dp(n,"template",{get:function(){return this._template},set:function(t){this._template=t}}),_dp(n,"itemOffset",{get:function(){return this._itemOffset},set:function(t){this._itemOffset=t}}),_dp(n,"itemGap",{get:function(){return this._itemGap},set:function(t){this._itemGap=t}}),_dp(n,"checkLocation",{get:function(){return this._checkLocation},set:function(t){this._checkLocation=t}}),_dp(n,"checked",{get:function(){return this._checked},set:function(t){this._checked=t}}),_dp(n,"showTooltip",{get:function(){return this._showTooltip},set:function(t){this._showTooltip=t}}),_dp(n,"tooltip",{get:function(){return this._tooltip},set:function(t){this._tooltip=t}}),n);function n(){var t=i.call(this,"headerCell")||this;return t._itemOffset=2,t._itemGap=2,t._checkLocation=lt.ColumnHeaderItemLocation.NONE,t._checked=!1,t._showTooltip=!0,t}e.HeaderCell=o;var r,s=(r=ft.VisualObject,oe.__extends(a,r),a.prototype._doDispose=function(){this._cell=null,r.prototype._doDispose.call(this)},_dp(a,"minRowHeight",{get:function(){return this._minRowHeight},set:function(t){t!=this._minRowHeight&&(this._minRowHeight=t,this._changed())}}),_dp(a,"minHeight",{get:function(){return this._minHeight},set:function(t){t!=this._minHeight&&(this._minHeight=t,this._changed())}}),_dp(a,"height",{get:function(){return this._height},set:function(t){t!=this._height&&(this._height=t,this._changed())}}),_dp(a,"displayHeight",{get:function(){return this._grid.headerView.height}}),_dp(a,"resizable",{get:function(){return this._resizable},set:function(t){t!=this._resizable&&(this._resizable=t,this._changed())}}),_dp(a,"sortable",{get:function(){return this._sortable},set:function(t){t!=this._sortable&&(this._sortable=t,this._changed())}}),_dp(a,"filterable",{get:function(){return this._filterable},set:function(t){t!=this._filterable&&(this._filterable=t,this._changed())}}),_dp(a,"itemOffset",{get:function(){return this._itemOffset},set:function(t){t!=this._itemOffset&&(this._itemOffset=t,this._changed())}}),_dp(a,"itemGap",{get:function(){return this._itemGap},set:function(t){t!=this._itemGap&&(this._itemGap=t,this._changed())}}),_dp(a,"showTooltip",{get:function(){return this._showTooltip},set:function(t){t!=this._showTooltip&&(this._showTooltip=t,this._changed())}}),_dp(a,"showSelection",{get:function(){return this._showSelection},set:function(t){t!=this._showSelection&&(this._showSelection=t,this._changed())}}),_dp(a,"sortWidth",{get:function(){return this._sortWidth},set:function(t){t!=this._sortWidth&&(this._sortWidth=t,this._changed())}}),_dp(a,"sortHeight",{get:function(){return this._sortHeight},set:function(t){t!=this._sortHeight&&(this._sortHeight=t,this._changed())}}),_dp(a,"filterWidth",{get:function(){return this._filterWidth},set:function(t){t!=this._filterWidth&&(this._filterWidth=t,this._changed())}}),_dp(a,"filterHeight",{get:function(){return this._filterHeight},set:function(t){t!=this._filterHeight&&(this._filterHeight=t,this._changed())}}),_dp(a,"popupWidth",{get:function(){return this._popupWidth},set:function(t){t!=this._popupWidth&&(this._popupWidth=t,this._changed())}}),_dp(a,"popupHeight",{get:function(){return this._popupHeight},set:function(t){t!=this._popupHeight&&(this._popupHeight=t,this._changed())}}),_dp(a,"showPopupMenu",{get:function(){return this._showPopupMenu},set:function(t){t!=this._showPopupMenu&&(this._showPopupMenu=t,this._changed())}}),_dp(a,"checkWidth",{get:function(){return this._checkWidth},set:function(t){t!=this._checkWidth&&(this._checkWidth=t,this._changed())}}),_dp(a,"checkHeight",{get:function(){return this._checkHeight},set:function(t){t!=this._checkHeight&&(this._checkHeight=t,this._changed())}}),a.prototype.getCell=function(t){var e=this._cell;if(e.setLayout(t),t instanceof Tt.CellLayoutGroupItem)e.text=t.header.getDisplayText();else{var i=t.firstColumn;if(e.index.set(-1,i),i){var o=i.header,n=void 0;e.text=o.displayText,e.template=o.realizeTemplate(),e.itemOffset=void 0===(n=o.itemOffset)?this._itemOffset:n,e.itemGap=void 0===(n=o.itemGap)?this._itemGap:n,e.checkLocation=o.checkLocation,e.checked=i.checked,e.showTooltip=o.showTooltip,e.tooltip=o.tooltip}}return e},a);function a(t){var e=r.call(this,t)||this;return e._minRowHeight=21,e._minHeight=23,e._height=0,e._resizable=!1,e._sortable=!0,e._filterable=!0,e._itemOffset=2,e._itemGap=2,e._showSelection=!1,e._showTooltip=!1,e._sortWidth=16,e._sortHeight=16,e._filterWidth=16,e._filterHeight=16,e._popupWidth=16,e._popupHeight=16,e._checkWidth=16,e._checkHeight=16,e._showPopupMenu=lt.HandleVisibility.VISIBLE,e._cell=new o,e.visible=!0,e}e.GridHeader=s});t(Ft);Ft.HeaderCell,Ft.GridHeader;var Vt=e(function(t,e){Object.defineProperty(e,"__esModule",{value:!0});var i,o=(i=H.ExpressionRuntime,oe.__extends(n,i),n.prototype._doDispose=function(){this._cell=null,i.prototype._doDispose.call(this)},n.prototype.setCell=function(t){this._cell=t},n.prototype.isIdentifier=function(t){return t=t.toLowerCase(),n.IDENTS.hasOwnProperty(t)?n.IDENTS[t]:i.prototype.isIdentifier.call(this,t)},n.prototype.evaluateIdentifier=function(t){switch(t){case n.ID_VALUE:return this._cell.value;case n.ID_FIELD:return this._cell.index.dataField;case n.ID_LEVEL:return this._cell.level}throw new H.ExpressionEvaluationError("Invalid identifier key: "+t)},n.prototype.evaluateIndexerI=function(t,e){},n.prototype.evaluateIndexerS=function(t,e,i){},n.IDENTS={value:n.ID_VALUE=0,field:n.ID_FIELD=1,level:n.ID_LEVEL=2},n);function n(){return i.call(this)||this}e.FooterExpressionRuntime=o;var r,s=(r=mt.GridCell,oe.__extends(a,r),a.prototype._doDispose=function(){r.prototype._doDispose.call(this)},_dp(a,"level",{get:function(){return 0}}),_dp(a,"error",{get:function(){return this._error}}),_dp(a,"errorDetail",{get:function(){return this._errorDetail}}),a.prototype.calculate=function(){var t=this.dataColumn,e=t&&t.grid;if(this._value=NaN,this._error=null,e&&e.itemSource.summaryMode!=lt.SummaryMode.NONE&&0<=t.dataIndex){var i=this._getSummary(t,this._childIndex),o=i&&i.expression,n=void 0;try{if(o&&0<e.dataCount){var r=e.columnSummaryRuntime;r.setColumn(t,e.summarizer),n=i.evaluate(r,this._childIndex)}var s=i&&i.valueCallback;s&&(n=s(e.handler,t.toProxy(),this._childIndex,i,n)),this._value=n}catch(t){this._error=t,this._errorDetail=t}}},_dp(a,"text",{get:function(){if(this._error)return mt.GridCell.ERROR}}),_dp(a,"value",{get:function(){return this._value}}),a.prototype.getDisplayText=function(t){var e,i=this._value,o=this.dataColumn,n="";if(void 0!==i&&o)if(o.valueType==lt.ValueType.DATETIME){var r=void 0;i instanceof Date&&(r=t.datetimeWriter)?n=r.getText(this._value):i&&(n=i)}else{var s=void 0,a=parseFloat(i);!isNaN(a)&&(s=t.numberFormatter)?n=s.getText(a):i&&(n=i)}if(n){var l=t.prefix;l&&(n=l+n),(l=t.suffix)&&(n+=l)}return!n&&o&&(n=null===(e=this._getSummary(o,this._childIndex))||void 0===e?void 0:e.text),n},a.prototype.getSummary=function(){return this._getSummary(this.valueColumn,this._childIndex)},a.prototype.getTemplate=function(t){var e=this._getSummary(this.valueColumn,this._childIndex);return e?e.realizeSummary(this,t):void 0},a);function a(t){var e=r.call(this,t)||this;return e._childIndex=0,e._error=null,e._errorDetail=null,e}e.SummaryCell=s;var l,h=(l=s,oe.__extends(d,l),d.prototype._doDispose=function(){l.prototype._doDispose.call(this)},_dp(d,"footerIndex",{get:function(){return this._childIndex},set:function(t){t!=this._childIndex&&(this._childIndex=t)}}),d.prototype._getSummary=function(t,e){return t&&t.footers.get(e)},d);function d(){return l.call(this,"footerCell")||this}e.FooterCell=h;var u,_=(u=ft.VisualObject,oe.__extends(c,u),c.prototype._doDispose=function(){u.prototype._doDispose.call(this)},_dp(c,"styleName",{get:function(){return this._styleName},set:function(t){t!=this._styleName&&(this._styleName=t,this._changed())}}),_dp(c,"displayIndex",{get:function(){return this._displayIndex}}),_dp(c,"minHeight",{get:function(){return this._minHeight},set:function(t){(t=Math.max(0,t))!=this._minHeight&&(this._minHeight=t,this._changed())}}),_dp(c,"height",{get:function(){return this._height},set:function(t){(t=Math.max(0,t))!=this._height&&(this._height=t,this._changed())}}),_dp(c,"cellStyleCallback",{get:function(){return this._cellStyleCallback},set:function(t){t!==this._cellStyleCallback&&(this._cellStyleCallback=t,this.refreshOwner())}}),c.prototype.getCell=function(t){var e=this._cell,i=t.firstColumn;return e.index.set(-1,i),e._childIndex=this._childIndex,e.calculate(),e},c.prototype.getCellStyle=function(t,e){var i,o=t.getSummary(),n=o?o.styleName:"",r=this._cellStyleCallback;return r&&(i=r(this._grid.handler,t),e.assign(i)),o&&(r=o.styleCallback)&&(i=r(this._grid.handler,t),e.assign(i)),!e.styleName&&n&&(e.styleName=n),e.styleName?e.styleName=this.getCellStyleName()+" "+e.styleName:e.styleName=this.getCellStyleName(),e},c.prototype.getCellFormatters=function(t,e){return e?(e.numberFormatter=e.numberFormatter||t.numberFormatter,e.datetimeWriter=e.datetimeWriter||t.datetimeWriter,e.booleanFormatter=e.booleanFormatter||t.boolFormatter,e.textFormatter=e.textFormatter||t.textFormatter,e.prefix=e.prefix||t.prefix,e.suffix=e.suffix||t.suffix):((e=this._formatter).numberFormatter=t.numberFormatter,e.datetimeWriter=t.datetimeWriter,e.booleanFormatter=t.boolFormatter,e.textFormatter=t.textFormatter,e.prefix=t.prefix,e.suffix=t.suffix),e},c.prototype._visibleChanged=function(){u.prototype._visibleChanged.call(this),this.$_owner&&this.$_owner.$_visibleChanged(this)},c);function c(t){var e=u.call(this,t)||this;return e._minHeight=23,e._height=0,e._formatter={numberFormatter:null,datetimeWriter:null,booleanFormatter:null,textFormatter:null,prefix:"",suffix:""},e._childIndex=0,e._displayIndex=0,e._runtime=new o,e._cell=e._createCell(),e.visible=!0,e}e.GridSummaryObject=_;var p,f=(p=_,oe.__extends(g,p),_dp(g,"footerIndex",{get:function(){return this._childIndex}}),g.prototype.getCellStyleName=function(){return g.CELL_CSS},g.prototype._createCell=function(){return new h},g.CELL_CSS="rg-footer-cell",g);function g(t){return p.call(this,t)||this}e.GridFooter=f;var m,y=(m=ft.VisualObject,oe.__extends(v,m),v.prototype._doDispose=function(){for(var t=0,e=this._items;t<e.length;t++)e[t].dispose();this._items=null,this._visibles=null,m.prototype._doDispose.call(this)},_dp(v,"canShow",{get:function(){return this.visible&&0<this._visibles.length}}),_dp(v,"count",{get:function(){return this._items.length}}),_dp(v,"visibleCount",{get:function(){return this._visibles.length}}),v.prototype.get=function(t){return this._items[t]},v.prototype.getVisible=function(t){return this._visibles[t]},v.prototype.assignFrom=function(t){var e;if(m.prototype.assignFrom.call(this,t),t&&t.items?e=ne.Utils.makeArray(t.items):ne.Utils.isArray(t)&&(e=t),e){for(var i=this._items,o=e.length;i.length>o;)i.pop().dispose();i.length=o;for(var n=0,r=e.length;n<r;n++){var s=e[n];s&&(i[n]||(i[n]=this._createSummary()),i[n].assignFrom(s),i[n].$_owner=this)}this.$_resetVisibles()}},v.prototype.clean=function(){for(var t=0,e=this._items;t<e.length;t++)e[t].clean()},v.prototype.toProxy=function(){for(var t=m.prototype.toProxy.call(this),e=[],i=0;i<this._items.length;i++)e.push(this._items[i].toProxy());return 0<e.length&&(t.items=e.slice()),t},v.prototype.$_visibleChanged=function(t){this.$_resetVisibles()},v.prototype.$_resetVisibles=function(){for(var t=this._visibles.length=0,e=0;t<this._items.length;t++){var i=this._items[t];i._childIndex=t,i.visible&&(this._visibles.push(i),i._displayIndex=e++)}this.owner&&this.owner.refreshView()},v);function v(t){var e=m.call(this,t)||this;return e._items=[],e._visibles=[],e._items.push(e._createSummary(t)),e._visibles.push(e._items[0]),e}e.SummaryCollection=y;var w,C=(w=y,oe.__extends(x,w),x.prototype._createSummary=function(t){return new f(t||this._grid)},x);function x(){return null!==w&&w.apply(this,arguments)||this}e.GridFooterCollection=C});t(Vt);Vt.FooterExpressionRuntime,Vt.SummaryCell,Vt.FooterCell,Vt.GridSummaryObject,Vt.GridFooter,Vt.SummaryCollection,Vt.GridFooterCollection;var Ot=e(function(t,e){Object.defineProperty(e,"__esModule",{value:!0});var i,o=(i=ft.VisualObject,oe.__extends(n,i),_dp(n,"displayOrder",{get:function(){return this._displayOrder},set:function(t){t!=this._displayOrder&&(this._displayOrder=t,this._changed())}}),_dp(n,"headText",{get:function(){return this._headText},set:function(t){t!=this._headText&&(this._headText=t,this._changed())}}),_dp(n,"footText",{get:function(){return this._footText},set:function(t){t!=this._footText&&(this._footText=t,this._changed())}}),_dp(n,"sumText",{get:function(){return this._sumText},set:function(t){t!=this._sumText&&(this._sumText=t,this._changed())}}),_dp(n,"popupMenu",{get:function(){return this._popupMenu},set:function(t){t!=this._popupMenu&&(this._popupMenu=t,this._popupMenuName="string"==typeof t?t:null)}}),_dp(n,"popupMenuName",{get:function(){return this._popupMenuName?this._popupMenuName:this._popupMenu&&this._grid?(this._popupMenuName=this.getHeadStyleName()+"_menu",this._grid.addPopupMenu(this._popupMenuName,this._popupMenu,!0),this._popupMenuName):null},set:function(t){null!=t&&"string"!=typeof t||(this._popupMenuName=t,this._changed())}}),_dp(n,"visChanged",{get:function(){return this._visChanged},set:function(t){this._visChanged=t}}),_dp(n,"cellStyleCallback",{get:function(){return this._cellStyleCallback},set:function(t){t!==this._cellStyleCallback&&(this._cellStyleCallback=t,this._changed())}}),n.prototype.getHeadCell=function(){return this._headCell},n.prototype.getFootCell=function(){return this._footCell},n.prototype.getSumCell=function(){return this._sumCell},n.prototype._createHeadCell=function(){return new mt.StyledCell(this)},n.prototype._createFootCell=function(){return new mt.StyledCell(this)},n.prototype._createSumCell=function(){return new mt.StyledCell(this)},n.prototype._visibleChanged=function(){i.prototype._visibleChanged.call(this),this._visChanged=!0},n);function n(t){var e=i.call(this,t)||this;return e._displayOrder=0,e._headText=null,e._footText=null,e._sumText=null,e._headCell=e._createHeadCell(),e._footCell=e._createFootCell(),e._sumCell=e._createSumCell(),e.visible=!0,e}e.SectionObject=o});t(Ot);Ot.SectionObject;var Nt=e(function(t,e){var r,i,o,n;Object.defineProperty(e,"__esModule",{value:!0}),(i=r=e.IndicatorValue||(e.IndicatorValue={})).NONE="none",i.INDEX="index",i.ROW="row",(n=o=e.StateMark||(e.StateMark={})).IMAGE="image",n.TEXT="text",n.NONE="none";var s,a=(s=mt.GridCell,oe.__extends(l,s),l.prototype._doDispose=function(){s.prototype._doDispose.call(this)},_dp(l,"indicator",{get:function(){return this._indicator}}),_dp(l,"itemState",{get:function(){return this._itemState},set:function(t){t!=this._itemState&&(this._itemState=t)}}),_dp(l,"text",{get:function(){var t,e=this._indicator,i=this.index,o=i.item,n="";if(o&&o.itemState==dt.ItemState.NORMAL)switch(e.displayValue){case r.INDEX:0<=(t=e.owner.getIndicatorIndex(o))&&(t+=e.indexOffset,e.zeroBase||t++,n=String(t));break;case r.ROW:o.isDataRow&&(t=i.dataRow,t+=e.rowOffset,e.zeroBase||t++,n=String(t))}return n}}),_dp(l,"value",{get:function(){return null}}),l);function l(t){var e=s.call(this,"indicatorCell")||this;return e._itemState=dt.ItemState.NORMAL,e._indicator=t,e}e.RowIndicatorCell=a;var h,d=(h=Ot.SectionObject,oe.__extends(u,h),u.prototype._doDispose=function(){h.prototype._doDispose.call(this)},_dp(u,"displayValue",{get:function(){return this._displayValue},set:function(t){t!=this._displayValue&&(this._displayValue=t,this._changed())}}),_dp(u,"zeroBase",{get:function(){return this._zeroBase},set:function(t){t!=this._zeroBase&&(this._zeroBase=t,this._changed())}}),_dp(u,"indexOffset",{get:function(){return this._indexOffset},set:function(t){t!=this._indexOffset&&(this._indexOffset=t,this._changed())}}),_dp(u,"rowOffset",{get:function(){return this._rowOffset},set:function(t){t!=this._rowOffset&&(this._rowOffset=t,this._changed())}}),_dp(u,"minWidth",{get:function(){return this._minWidth},set:function(t){t!=this._minWidth&&(this._minWidth=t,this._changed())}}),_dp(u,"maxWidth",{get:function(){return this._maxWidth},set:function(t){t!=this._maxWidth&&(this._maxWidth=t,this._changed())}}),_dp(u,"width",{get:function(){return this._width},set:function(t){t!=this._width&&(this._width=t,this._changed())}}),_dp(u,"displayWidth",{get:function(){return this._displayWidth}}),_dp(u,"selectable",{get:function(){return this._selectable},set:function(t){t!=this._selectable&&(this._selectable=t,this._changed())}}),_dp(u,"mark",{get:function(){return this._mark},set:function(t){t!=this._mark&&(this._mark=t,this._changed())}}),_dp(u,"showFocus",{get:function(){return this._showFocus},set:function(t){t!=this._showFocus&&(this._showFocus=t,this._changed())}}),_dp(u,"showSelection",{get:function(){return this._showSelection},set:function(t){t!=this._showSelection&&(this._showSelection=t,this._changed())}}),_dp(u,"staticOrder",{get:function(){return 0}}),u.prototype.getCell=function(t){var e=this._cell;if(e.setIndex(t),t.item){var i=t.item.itemState;i==dt.ItemState.NORMAL&&this._grid.focusedIndex.itemIndex==t.itemIndex&&(i=dt.ItemState.FOCUSED),e.itemState=i}return e},u.prototype.getHeadStyleName=function(){return"rg-rowindicator-head"},u.prototype.getFootStyleName=function(){return"rg-rowindicator-foot"},u.prototype.getSumStyleName=function(){return"rg-rowindicator-sum"},u);function u(t){var e=h.call(this,t)||this;return e._displayValue=r.INDEX,e._zeroBase=!1,e._indexOffset=0,e._rowOffset=0,e._minWidth=32,e._maxWidth=0,e._width=0,e._selectable=!0,e._mark=o.IMAGE,e._showFocus=!0,e._showSelection=!0,e._displayWidth=0,e._cell=new a(e),e.headText="No.",e.footText="Σ",e.sumText="Σ",e}e.RowIndicator=d});t(Nt);Nt.IndicatorValue,Nt.StateMark,Nt.RowIndicatorCell,Nt.RowIndicator;var Pt=e(function(t,e){Object.defineProperty(e,"__esModule",{value:!0});var i,o=(i=mt.GridCell,oe.__extends(n,i),n.prototype._doDispose=function(){this._bar=null,i.prototype._doDispose.call(this)},_dp(n,"text",{get:function(){return this._bar._stateTexts[this.item.rowState]}}),_dp(n,"value",{get:function(){return null}}),n);function n(t){var e=i.call(this,"stateBarCell")||this;return e._bar=t,e}e.StateBarCell=o;var r,s=(r=Ot.SectionObject,oe.__extends(a,r),a.prototype._doDispose=function(){r.prototype._doDispose.call(this)},_dp(a,"width",{get:function(){return this._width},set:function(t){t!=this._width&&(this._width=t,this._changed())}}),_dp(a,"mark",{get:function(){return this._mark},set:function(t){t!=this._mark&&(this._mark=t,this._changed())}}),_dp(a,"stateTexts",{get:function(){return oe.__assign({},this._stateTexts)},set:function(t){if(t!=this._stateTexts){for(var e in t)this._stateTexts.hasOwnProperty(e)&&(this._stateTexts[e]=t[e]);this._changed()}}}),_dp(a,"errorVisible",{get:function(){return this._errorVisible},set:function(t){t!=this._errorVisible&&(this._errorVisible=t,this._changed())}}),_dp(a,"staticOrder",{get:function(){return 1e3}}),a.prototype.getCell=function(t){var e=this._cell;return e.setIndex(t),e},a.prototype.getHeadStyleName=function(){return"rg-statebar-head"},a.prototype.getFootStyleName=function(){return"rg-statebar-foot"},a.prototype.getSumStyleName=function(){return"rg-statebar-sum"},a);function a(t){var e=r.call(this,t)||this;return e._width=20,e._mark=Nt.StateMark.IMAGE,e._stateTexts={},e._errorVisible=!1,e._stateTexts[I.RowState.CREATED]="C",e._stateTexts[I.RowState.UPDATED]="U",e._stateTexts[I.RowState.DELETED]="D",e._stateTexts[I.RowState.CREATE_AND_DELETED]="X",e._cell=new o(e),e}e.StateBar=s});t(Pt);Pt.StateBarCell,Pt.StateBar;var Bt=e(function(t,e){Object.defineProperty(e,"__esModule",{value:!0});var i,o=(i=mt.GridCell,oe.__extends(n,i),n.prototype._doDispose=function(){i.prototype._doDispose.call(this)},_dp(n,"getText",{get:function(){return String(this.index.dataRow)}}),_dp(n,"value",{get:function(){return this.item.checked}}),n);function n(){return i.call(this,"checkBarCell")||this}e.CheckBarCell=o;var r,s=(r=Ot.SectionObject,oe.__extends(a,r),a.prototype._doDispose=function(){r.prototype._doDispose.call(this)},_dp(a,"width",{get:function(){return this._width},set:function(t){t!=this._width&&(this._width=t,this._changed())}}),_dp(a,"exclusive",{get:function(){return this._exclusive},set:function(t){t!=this._exclusive&&(this._exclusive=t,this._changed())}}),_dp(a,"showAll",{get:function(){return this._showAll},set:function(t){t!=this._showAll&&(this._showAll=t,this._changed())}}),_dp(a,"showGroup",{get:function(){return this._showGroup},set:function(t){t!=this._showGroup&&(this._showGroup=t,this._changed())}}),_dp(a,"visibleOnly",{get:function(){return this._visibleOnly},set:function(t){t!=this._visibleOnly&&(this._visibleOnly=t,this._changed())}}),_dp(a,"checkableOnly",{get:function(){return this._checkableOnly},set:function(t){t!=this._checkableOnly&&(this._checkableOnly=t,this._changed())}}),_dp(a,"checkableExpression",{get:function(){return this._checkableExpression},set:function(t){t!=this._checkableExpression&&(this._checkableExpression=t,this._grid.itemSource.checkableExpression=t,this._changed())}}),_dp(a,"checkableCallback",{get:function(){return this._checkableCallback},set:function(t){this._checkableCallback=t,this._grid.itemSource.checkableCallback=t,this._changed()}}),_dp(a,"syncHeadCheck",{get:function(){return this._syncHeadCheck},set:function(t){t!=this._syncHeadCheck&&(this._syncHeadCheck=t,this._changed())}}),_dp(a,"fieldName",{get:function(){return this._fieldName},set:function(t){t!=this._fieldName&&(this._fieldName=t,this._fieldIndex=this._grid.dataSource.getFieldIndex(t),this._grid._checkFieldIndex(this._fieldIndex),this._changed())}}),_dp(a,"fieldIndex",{get:function(){return this._fieldIndex}}),_dp(a,"useImages",{get:function(){return this._useImages},set:function(t){this._useImages!==t&&(this._useImages=t,this._changed())}}),_dp(a,"staticOrder",{get:function(){return 2e3}}),a.prototype.getCell=function(t){var e=this._cell;return e.setIndex(t),e._exclusive=this._exclusive,e},a.prototype.getHeadStyleName=function(){return"rg-checkbar-head"},a.prototype.getFootStyleName=function(){return"rg-checkbar-foot"},a.prototype.getSumStyleName=function(){return"rg-checkbar-sum"},a);function a(t){var e=r.call(this,t)||this;return e._width=20,e._exclusive=!1,e._showAll=!0,e._showGroup=!0,e._visibleOnly=!1,e._checkableOnly=!0,e._syncHeadCheck=!1,e._useImages=!1,e._fieldIndex=-1,e._cell=new o,e}e.CheckBar=s});t(Bt);Bt.CheckBarCell,Bt.CheckBar;var At=e(function(t,e){Object.defineProperty(e,"__esModule",{value:!0});var i,o=(i=ft.VisualObject,oe.__extends(s,i),s.prototype._doDispose=function(){this._dataCell=this._dataCell.dispose(),this._hiddenCell=this._hiddenCell.dispose(),this._literalCell=this._literalCell.dispose(),this._seriesCell=this._seriesCell.dispose(),this._mergedCell=this._mergedCell.dispose(),this._rowRuntime=this._rowRuntime.dispose(),this._cellRuntime=this._cellRuntime.dispose(),this._cs=null,i.prototype._doDispose.call(this)},_dp(s,"rowRuntime",{get:function(){return this._rowRuntime}}),_dp(s,"cellRunTime",{get:function(){return this._cellRuntime}}),_dp(s,"cellStyleCallback",{get:function(){return this._cellStyleCallback},set:function(t){t!==this._cellStyleCallback&&(this._cellStyleCallback=t,this.refreshOwner())}}),_dp(s,"rowStyleCallback",{get:function(){return this._rowStyleCallback},set:function(t){t!==this._rowStyleCallback&&(this._rowStyleCallback=t,this.refreshOwner())}}),_dp(s,"cellButtonWidth",{get:function(){return this._cellButtonWidth},set:function(t){t!=this._cellButtonWidth&&(this._cellButtonWidth=t,this.refreshOwner())}}),_dp(s,"cellButtonHeight",{get:function(){return this._cellButtonHeight},set:function(t){t!=this._cellButtonHeight&&(this._cellButtonHeight=t,this.$_resetButtonHeight(),this.refreshOwner())}}),_dp(s,"editButtonWidth",{get:function(){return this._editButtonWidth},set:function(t){t!=this._editButtonWidth&&(this._editButtonWidth=t,this.refreshOwner())}}),_dp(s,"editButtonHeight",{get:function(){return this._editButtonHeight},set:function(t){t!=this._editButtonHeight&&(this._editButtonHeight=t,this.$_resetButtonHeight(),this.refreshOwner())}}),_dp(s,"errorIconWidth",{get:function(){return this._errorIconWidth},set:function(t){t!=this._errorIconWidth&&(this._errorIconWidth=t,this.refreshOwner())}}),_dp(s,"errorIconHeight",{get:function(){return this._errorIconHeight},set:function(t){t!=this._errorIconHeight&&(this._errorIconHeight=t,this.$_resetButtonHeight(),this.refreshOwner())}}),_dp(s,"buttonHeight",{get:function(){return this._buttonHeight}}),s.prototype.$_resetButtonHeight=function(){this._buttonHeight=Math.max(this._cellButtonHeight,this._editButtonHeight,this._errorIconHeight)},s.prototype.getCell=function(t,e){return this.getCellAt(t.item,t.column,e)},s.prototype.getCellAt=function(t,e,i){var o,n=this._grid;if((o=i?this._mergedCell:e instanceof Dt.DataColumn?this._dataCell:e instanceof Dt.SeriesColumn?this._seriesCell:e instanceof mt.LiteralCell?this._literalCell:this._dataCell).setIndex2(n,t.index,e),e instanceof Dt.DataColumn)if(n.isItemEditing(t))o.error=e.error,o.errorLevel=e.errorLevel;else{var r=n.validationManager.cellList,s=t.dataId,a=r[s]&&r[s][e.dataIndex];a?(o.error=a.message,o.errorLevel=a.level):(o.error=null,o.errorLevel=lt.ValidationLevel.IGNORE)}return o},s.prototype.getHidden=function(t,e){return this._hiddenCell.setIndex(t),this._hiddenCell.setItem(e),this._hiddenCell},s.prototype.getCellSimple=function(t,e){var i=t.column,o=e?this._mergedCell:i instanceof Dt.SeriesColumn?this._seriesCell:i instanceof mt.LiteralCell?this._literalCell:this._dataCell;return o.setIndex(t),o},s.prototype.getIndexCellStyle=function(t){var e=this.getCell(t,!1);return this.getCellStyle(e,this._cs.clear(),!1)},s.prototype.getCellStyle=function(t,e,i){void 0===i&&(i=!1);var o,n=t.valueColumn,r=n&&n.styleName,s=this._cellStyleCallback;return s&&(o=s(this._grid.handler,t),e.assign(o)),n&&(o=n.getCellStyle(t),e.assign(o)),!e.styleName&&r&&(e.styleName=r),e.styleName?e.styleName="rg-data-cell "+(i?"rg-merged-cell ":"")+e.styleName:e.styleName="rg-data-cell"+(i?" rg-merged-cell":""),e},s.prototype.getCellFormatters=function(t,e,i,o,n){if(e?(e.numberFormatter=e.numberFormatter||t.numberFormatter||i.numberFormatter,e.datetimeWriter=e.datetimeWriter||t.datetimeWriter||i.datetimeWriter,e.booleanFormatter=e.booleanFormatter||t.boolFormatter||i.boolFormatter,e.textFormatter=e.textFormatter||t.textFormatter||i.textFormatter,e.prefix=e.prefix||t.prefix,e.suffix=e.suffix||t.suffix):((e=this._formatter).numberFormatter=t.numberFormatter||i.numberFormatter,e.datetimeWriter=t.datetimeWriter||i.datetimeWriter,e.booleanFormatter=t.boolFormatter||i.boolFormatter,e.textFormatter=t.textFormatter||i.textFormatter,e.prefix=t.prefix,e.suffix=t.suffix),o){var r=o.grid,s=r.body.getCell(o,!1);e=(n=r.body.getCellStyle(s,n)).toFormatter(e)}return e},s.prototype.getRowStyle=function(t,e){var i=this._rowStyleCallback,o=this._grid;if(i){var n=i(o.handler,t,e);if(n)return n}var r=s.ROW_STYLE;return t.index%2&&o.displayOptions.useAlternateRowStyle&&(r+=s.ALTERNATE_ROW_STYLE),e&&(r+=s.FIXED_ROW_STYLE),r+=s.STATE_ROW_STYLES[t.rowState]||"",t.checked&&(r+=s.CHECKED_ROW_STYLE),r},s.prototype._prepareUpdate=function(){var t=this._grid=this.owner;this._ds=t.dataSource,this._rowRuntime.setDataSource(this._ds),this._cellRuntime.setDataSource(this._ds),this._showChangeMarker=t.displayOptions.showChangeMarker},s.ROW_STYLE=" rg-data-row",s.ALTERNATE_ROW_STYLE=" rg-alternate-row",s.FIXED_ROW_STYLE=" rg-fixed-row",s.CHECKED_ROW_STYLE=" rg-checked-row",s.STATE_ROW_STYLES={created:" rg-created-row",deleted:" rg-deleted-row",createAndDeleted:" rg-deleted-row",updated:" rg-updated-row"},s);function s(t){var e=i.call(this,t)||this;return e._cellButtonWidth=16,e._cellButtonHeight=16,e._editButtonWidth=16,e._editButtonHeight=16,e._errorIconWidth=16,e._errorIconHeight=16,e._showChangeMarker=!1,e._formatter={numberFormatter:null,datetimeWriter:null,booleanFormatter:null,textFormatter:null,prefix:"",suffix:""},e._buttonHeight=16,e._dataCell=new mt.DataCell,e._hiddenCell=new mt.HiddenDataCell,e._literalCell=new mt.LiteralCell,e._seriesCell=new mt.SeriesCell,e._mergedCell=new mt.MergedDataCell,e._rowRuntime=new gt.DataRowExpressionRuntime,e._cellRuntime=new gt.DataCellExpressionRuntime,e._cs=new Dt.ColumnStyle,e}e.GridBody=o});t(At);At.GridBody;var $t=e(function(t,e){Object.defineProperty(e,"__esModule",{value:!0});var i,o=(i=re.Base,oe.__extends(n,i),n.prototype._doDispose=function(){return this._grid=null,i.prototype._doDispose.call(this)},_dp(n,"grid",{get:function(){return this._grid}}),n.prototype._changed=function(){this._grid&&this._grid.optionsChanged(this)},n.prototype._invalidateOwner=function(){this._grid&&this._grid.invalidate()},n.prototype._layoutOwner=function(){this._grid&&this._grid.invalidateLayout()},n.prototype._refreshOwner=function(){this._grid&&this._grid.refreshView()},n.prototype._invalidateEditor=function(){},n);function n(t){var e=i.call(this)||this;return e._grid=t,e}e.GridBaseOptions=o});t($t);$t.GridBaseOptions;var Ht=e(function(t,e){Object.defineProperty(e,"__esModule",{value:!0});var i,o=(i=$t.GridBaseOptions,oe.__extends(n,i),n.prototype._doDispose=function(){i.prototype._doDispose.call(this)},_dp(n,"colCount",{get:function(){return this._colCount},set:function(t){(t=Math.max(0,t))!=this._colCount&&(this._colCount=t,this.grid&&this._refreshOwner())}}),_dp(n,"rightCount",{get:function(){return this._rightCount},set:function(t){(t=Math.max(0,t))!=this._rightCount&&(this._rightCount=t,this.grid&&this._refreshOwner())}}),_dp(n,"rowCount",{get:function(){return this._rowCount},set:function(t){(t=Math.max(0,t))!=this._rowCount&&(this._rowCount=t,this.$_resetItemSource())}}),_dp(n,"rightFixed",{get:function(){return this._rightFixed},set:function(t){t!=this._rightFixed&&(this._rightFixed=t,this._refreshOwner())}}),_dp(n,"exceptFromFiltering",{get:function(){return this._exceptFromFiltering},set:function(t){t!=this._exceptFromFiltering&&(this._exceptFromFiltering=t,this.$_resetItemSource())}}),_dp(n,"exceptFromSorting",{get:function(){return this._exceptFromSorting},set:function(t){t!=this._exceptFromSorting&&(this._exceptFromSorting=t,this.$_resetItemSource())}}),_dp(n,"editable",{get:function(){return this._editable},set:function(t){t!=this._editable&&(this._editable=t,this._refreshOwner())}}),_dp(n,"rowEditable",{get:function(){return this._rowEditable},set:function(t){t!=this._rowEditable&&(this._rowEditable=t,this._refreshOwner())}}),_dp(n,"resizable",{get:function(){return this._resizable},set:function(t){t!=this._resizable&&(this._resizable=t)}}),_dp(n,"rowResizable",{get:function(){return this._rowResizable},set:function(t){t!=this._rowResizable&&(this._rowResizable=t)}}),_dp(n,"movable",{get:function(){return this._movable},set:function(t){t!=this._movable&&(this._movable=t)}}),_dp(n,"colBarWidth",{get:function(){return this._colBarWidth},set:function(t){(t=Math.max(0,t))!=this._colBarWidth&&(this._colBarWidth=t,this._refreshOwner())}}),_dp(n,"rightBarWidth",{get:function(){return this._rightBarWidth},set:function(t){(t=Math.max(0,t))!=this._rightBarWidth&&(this._rightBarWidth=t,this._refreshOwner())}}),_dp(n,"rowBarHeight",{get:function(){return this._rowBarHeight},set:function(t){(t=Math.max(0,t))!=this._rowBarHeight&&(this._rowBarHeight=t,this._refreshOwner())}}),_dp(n,"mergeRows",{get:function(){return this._mergeRows},set:function(t){t!=this._mergeRows&&(this._mergeRows=t,this.grid._columnMergeRuleChanged(null))}}),n.prototype.$_resetItemSource=function(){var t,e=this.grid;e&&(t=e.itemSource)&&t.setFixed(this._rowCount,!this._exceptFromSorting,!this._exceptFromFiltering)},n.ROW_BAR_STYLE="rg-fixed-row-bar",n.ROW_BAR_CELL_STYLE="rg-fixed-row-bar-cell",n.COLUMN_BAR_STYLE="rg-fixed-column-bar",n);function n(t){var e=i.call(this,t)||this;return e._colCount=0,e._rightCount=0,e._rowCount=0,e._rightFixed=!0,e._exceptFromFiltering=!0,e._exceptFromSorting=!0,e._editable=!0,e._rowEditable=!0,e._resizable=!1,e._rowResizable=!1,e._movable=!1,e._colBarWidth=3,e._rightBarWidth=3,e._rowBarHeight=3,e._mergeRows=!1,e}e.FixedOptions=o});t(Ht);Ht.FixedOptions;var Gt=e(function(t,e){Object.defineProperty(e,"__esModule",{value:!0});var i=(o.empty=function(){return new o},o.create=function(t,e){return void 0===t&&(t=0),void 0===e&&(e=0),new o(t,e)},_dp(o,"isEmpty",{get:function(){return 0===this.x||0===this.y}}),o.prototype.clone=function(){return new o(this.x,this.y)},o.prototype.equals=function(t){return t===this||t&&this.x===t.x&&this.y===t.y},o.prototype.setEmpty=function(){return this.x=this.y=0,this},o.prototype.set=function(t,e){return this.x=t,this.y=e,this},o.prototype.round=function(){var t=this.clone();return t.x>>>=0,t.y>>>=0,t},o.prototype.toString=function(){return"{x: "+this.x+", y: "+this.y+"}"},o);function o(t,e){void 0===t&&(t=0),void 0===e&&(e=0),this.x=t,this.y=e}e.Point=i});t(Gt);Gt.Point;var Ut=e(function(t,e){Object.defineProperty(e,"__esModule",{value:!0});var n,i=(n=$.EventAware,oe.__extends(o,n),o.prototype._doDispose=function(){if(this._dom&&(this._removeEventListeners(this._dom),ne.Utils.detach(this._dom),this._dom=null),this._elements){for(var t=0,e=this._elements;t<e.length;t++)e[t].dispose();this._elements.length=0}this._parent=null,n.prototype._doDispose.call(this)},_dp(o,"name",{get:function(){return this._name}}),_dp(o,"container",{get:function(){return this._parent&&this._parent.container}}),_dp(o,"parent",{get:function(){return this._parent}}),_dp(o,"childCount",{get:function(){return this._elements?this._elements.length:0}}),_dp(o,"isSingleton",{get:function(){return this._parent&&1==this._parent.childCount&&this._parent._elements[0]===this}}),_dp(o,"x",{get:function(){return this._x},set:function(t){t!=this._x&&(this._x=t,this.invalidate())}}),_dp(o,"y",{get:function(){return this._y},set:function(t){t!=this._y&&(this._y=t,this.invalidate())}}),_dp(o,"width",{get:function(){return this._width},set:function(t){(t=Math.max(0,t))!=this._width&&(this._width=t,this.sizeChanged())}}),_dp(o,"height",{get:function(){return this._height},set:function(t){(t=Math.max(0,t))!=this._height&&(this._height=t,this.sizeChanged())}}),_dp(o,"right",{get:function(){return this._x+this._width}}),_dp(o,"bottom",{get:function(){return this._y+this._height}}),_dp(o,"position",{get:function(){return new Gt.Point(this._x,this._y)}}),_dp(o,"bounds",{get:function(){return new ht.Rectangle(this._x,this._y,this._width,this._height)}}),_dp(o,"clientRect",{get:function(){return new ht.Rectangle(0,0,this._width,this._height)}}),_dp(o,"visible",{get:function(){return this._visible},set:function(t){t!=this._visible&&(this._visible=t,this._dom&&(this._dom.style.display=this._visible?this._getCssDisplay():"none"),this.invalidate(!0),this._visibleChanged())}}),_dp(o,"mouseEnabled",{get:function(){return this._mouseEnabled},set:function(t){this._mouseEnabled=t}}),_dp(o,"hovered",{get:function(){return this._hovered},set:function(t){t!=this._hovered&&(this._hovered=t,this._hoverChanged())}}),_dp(o,"isLayer",{get:function(){return!1}}),_dp(o,"clickable",{get:function(){return!1}}),_dp(o,"mouseX",{get:function(){var t=this.container;if(t){for(var e=t._currentX,i=this;i&&void 0!==i;)e-=i._x,i=i._parent;return e}return NaN}}),_dp(o,"mouseY",{get:function(){var t=this.container;if(t){for(var e=t._currentY,i=this;i&&void 0!==i;)e-=i._y,i=i._parent;return e}return NaN}}),_dp(o,"doc",{get:function(){return ne.getDoc(this._dom)}}),_dp(o,"style",{get:function(){return this._dom&&this._dom.style}}),o.prototype.isDom=function(t){return t===this._dom},o.prototype.canHover=function(){return!0},o.prototype.getChildren=function(){return this._elements&&this._elements.concat()},o.prototype.getChild=function(t){return this._elements[t]},o.prototype.indexOf=function(t){return this._elements?this._elements.indexOf(t):-1},o.prototype.contains=function(t){return this._elements&&0<=this._elements.indexOf(t)},o.prototype.getAncestor=function(t){for(var e=this._parent;e;){if(e instanceof t)return e;e=e._parent}return null},o.prototype.addChild=function(t){return this.insertChild(-1,t)},o.prototype.insertChild=function(t,e){if(!e||this.contains(e))return!1;var i=this._elements||[],o=e._dom;if(t<0||t>=i.length)this._dom&&o&&this._dom.appendChild(o),i.push(e);else{if(o){var n=this._elements[t]._dom;this._dom&&n&&this._dom.insertBefore(o,n)}i.splice(t,0,e)}return this._elements=i,e._parent=this,e.$_attached(this),this.invalidate(),!0},o.prototype.removeChild=function(t){if(t&&this._elements){var e=this._elements.indexOf(t);if(0<=e)return this.removeChildAt(e)===t}return!1},o.prototype.removeChildAt=function(t){if(0<=t&&t<this.childCount){var e=this._elements[t];return this._elements.splice(t,1),this._dom&&e._dom&&this._dom.removeChild(e._dom),e._parent=null,e._dirty=!1,e.$_detached(this),this.invalidate(),e}return null},o.prototype.removeLast=function(){return this._elements&&0<this._elements.length?this.removeChildAt(this._elements.length-1):null},o.prototype.clear=function(){var t=this._elements;if(0<(t?t.length:0)){for(var e=0,i=t;e<i.length;e++){var o=i[e];o._parent=null,o.$_detached(this)}if(this._elements=[],this._dom)for(;this._dom.lastChild;)this._dom.removeChild(this._dom.lastChild);return this.invalidate(),!0}return!1},o.prototype.hideAll=function(){if(this._elements)for(var t=0,e=this._elements;t<e.length;t++)e[t].visible=!1},o.prototype.invalidate=function(t,e){if(void 0===t&&(t=!1),void 0===e&&(e=!1),t||!this._dirty){this._dirty=!0;var i=this.container;i&&i.invalidateElement(this)}if(e&&this._elements)for(var o=0,n=this._elements;o<n.length;o++)n[o].invalidate(t,!0)},o.prototype.validate=function(){this._dirty=!1},o.prototype.invalidateLayout=function(){var t=this.container;t&&t.invalidateLayout()},o.prototype.getBounds=function(t){return void 0===t&&(t=null),t?t.set(this._x,this._y,this._width,this._height):new ht.Rectangle(this._x,this._y,this._width,this._height)},o.prototype.getClientRect=function(t){return void 0===t&&(t=null),t?t.set(0,0,this._width,this._height):new ht.Rectangle(0,0,this._width,this._height)},o.prototype.containsInBounds=function(t,e){return t>=this._x&&t<this._x+this._width&&e>=this._y&&e<this._y+this._height},o.prototype.containsInClient=function(t,e){return 0<=t&&t<this._width&&0<=e&&e<this._height},o.prototype.parentToElement=function(t,e,i){for(var o=this;o&&o!=t;)e-=o._x,i-=o._y,o=o._parent;return new Gt.Point(e,i)},o.prototype.translateBy=function(t,e){void 0===e&&(e=null);var i=t;for(e=e||new ht.Rectangle(0,0,this._width,this._height);i&&i!==this;)e.x-=i._x,e.y-=i._y,i=i._parent;return e},o.prototype.topBy=function(t,e){for(var i=this._y+e,o=this._parent;o&&o!==t;)i+=o._y,o=o._parent;return i},o.prototype.boundsBy=function(t,e){void 0===e&&(e=null);var i=this._x,o=this._y,n=this._parent;for(e&&(i+=e.x,o+=e.y);n&&n!==t;)i+=n._x,o+=n._y,n=n._parent;return e?new ht.Rectangle(i,o,e.width,e.height):new ht.Rectangle(i,o,this._width,this._height)},o.prototype.boundsByContainer=function(t){void 0===t&&(t=null);var e=this._x,i=this._y;t&&(e+=t.x,i+=t.y);for(var o=this._parent;o&&void 0!==o._x;)e+=o._x,i+=o._y,o=o._parent;return t?new ht.Rectangle(e,i,t.width,t.height):new ht.Rectangle(e,i,this._width,this._height)},o.prototype.pointByContainer=function(t,e){for(var i=this._parent;i&&void 0!==i._x;)t+=i._x,e+=i._y,i=i._parent;return new Gt.Point(t+this._x,e+this._y)},o.prototype.containerToElement=function(t,e){for(var i=this;i;)t-=i._x,e-=i._y,i=i._parent;return new Gt.Point(t,e)},o.prototype.boundsByScreen=function(t){return void 0===t&&(t=null),t=this.boundsByContainer(t),t=this.container.toScreen(t)},o.prototype.hitTest=function(t,e){return 0<=t&&t<this._width&&0<=e&&e<this._height},o.prototype.findChildAt=function(t,e,i){var o=this._elements,n=o?o.length:0;if(0<n)for(var r=n-1;0<=r;r--){var s=o[r];if(s.visible){var a=t-s._x,l=e-s._y;if((i||s._mouseEnabled)&&(s.isLayer||s.hitTest(a,l))){var h=s.findChildAt(a,l,i);if(h)return h;if(!s.isLayer&&s._mouseEnabled)return s}}}return null},o.prototype.move=function(t,e){t==this._x&&e==this._y||(this._x=t,this._y=e,this.invalidate())},o.prototype.resize=function(t,e){t==this._width&&e==this._height||(this._width=t,this._height=e,this.invalidate())},o.prototype.setBounds=function(t,e,i,o){t==this._x&&e==this._y&&i==this._width&&o==this._height||(this._x=t,this._y=e,this._width=i,this._height=o,this.sizeChanged())},o.prototype.setBoundsI=function(t,e,i,o){e>>=0,i>>=0,o>>=0,(t>>=0)==this._x&&e==this._y&&i==this._width&&o==this._height||(this._x=t,this._y=e,this._width=i,this._height=o,this.sizeChanged())},o.prototype.setRect=function(t){t.x==this._x&&t.y==this._y&&t.width==this._width&&t.height==this._height||(this._x=t.x,this._y=t.y,this._width=t.width,this._height=t.height,this.sizeChanged())},o.prototype.setRectI=function(t){var e=t.x>>0,i=t.y>>0,o=t.width>>0,n=t.height>>0;e==this._x&&i==this._y&&o==this._width&&n==this._height||(this._x=e,this._y=i,this._width=o,this._height=n,this.sizeChanged())},o.prototype.draw=function(){this._dirty&&this._dom&&(this._beforeDraw(this._dom),this._doDraw(this._dom),this._dirty=!1)},o.prototype.resetSize=function(){this._dom&&this._setSizeStyle(this._dom.style)},o.prototype.getHtml=function(){return this._dom&&this._dom.outerHTML},o.prototype.setImportantStyle=function(t,e){this._dom.style.setProperty(t,e,"important")},o.prototype._createDom=function(t){return t.createElement("div")},o.prototype._initDom=function(t){var e=t.style;e.position="absolute",e.boxSizing="border-box",this._addEventListeners(t)},o.prototype._addEventListeners=function(t){},o.prototype._removeEventListeners=function(t){},o.prototype.$_attached=function(t){this._doAttached(t)},o.prototype._doAttached=function(t){},o.prototype.$_detached=function(t){this._doDetached(t)},o.prototype._doDetached=function(t){},o.prototype._setSizeStyle=function(t){t.width=this._width+"px",t.height=this._height+"px"},o.prototype._getCssDisplay=function(){return"block"},o.prototype.resetStyleName=function(){this._setClassName(this._dom)},o.prototype._setClassName=function(t){var e=this._getCssSelector();e!=this._className&&(this._className=e,(t||this._dom).className=e||"")},o.prototype.applyBounds=function(){var t=this._dom.style;t.left=this._x+"px",t.top=this._y+"px",this._setSizeStyle(t)},o.prototype._beforeDraw=function(t){this._setClassName(t);var e=t.style;e.left=this._x+"px",e.top=this._y+"px",this._setSizeStyle(e)},o.prototype._hoverChanged=function(){},o.prototype._visibleChanged=function(){},o.prototype.sizeChanged=function(){this.invalidate(),this._doSizeChanged()},o.prototype._doSizeChanged=function(){},o);function o(t,e){void 0===e&&(e=null);var i=n.call(this)||this;i._x=0,i._y=0,i._width=0,i._height=0,i._visible=!0,i._mouseEnabled=!0,i._elements=null,i._dirty=!0,i._hovered=!1,i._className="",i._name=e;var o=i._dom=i._createDom(t);return o&&i._initDom(o),i}e.VisualElement=i;var r,s=(r=i,oe.__extends(a,r),_dp(a,"isLayer",{get:function(){return!0}}),a.prototype._getCssSelector=function(){},a.prototype._doDraw=function(t){},a);function a(){return null!==r&&r.apply(this,arguments)||this}e.LayerElement=s;var l,h=(l=s,oe.__extends(d,l),_dp(d,"active",{get:function(){return this._active}}),d.prototype.$_activateView=function(){this._active||(this._doActivateView(),this._active=!0)},d.prototype.$_deactivateView=function(){void 0!==this.active&&!this._active||(this._dodDeactivateView(),this._active=!1)},d);function d(t,e){void 0===e&&(e=!1);var i=l.call(this,t)||this;return i._active=e,i}e.ViewLayer=h});t(Ut);Ut.VisualElement,Ut.LayerElement,Ut.ViewLayer;var Wt=e(function(t,e){var i,n,o,r;Object.defineProperty(e,"__esModule",{value:!0}),(i=e.SelectionMode||(e.SelectionMode={})).NONE="none",i.SINGLE="single",i.EXTENDED="extended",(o=n=e.SelectionStyle||(e.SelectionStyle={})).BLOCK="block",o.ROWS="rows",o.COLUMNS="columns",o.SINGLE_ROW="singleRow",o.SINGLE_COLUMN="singleColumn",o.SINGLE="single",o.NONE="none",(r=e.SelectionDisplay||(e.SelectionDisplay={})).CELL="cell",r.CELL_AND_BORDER="cellAndBorder",r.MASK="mask",e.isSingleSelectionStyle=function(t){return t==n.SINGLE_ROW||t==n.SINGLE_COLUMN||t==n.SINGLE},e.isRowSelectionStyle=function(t){return t==n.ROWS||t==n.SINGLE_ROW},e.isColumnSelectionStyle=function(t){return t==n.COLUMNS||t==n.SINGLE_COLUMN},e.isSingleSelection=function(t){var e=t&&t.style;return e==n.SINGLE_ROW||e==n.SINGLE_COLUMN||e==n.SINGLE},e.isRowSelection=function(t){var e=t&&t.style;return e==n.ROWS||e==n.SINGLE_ROW},e.isColumnSelection=function(t){var e=t&&t.style;return e==n.COLUMNS||e==n.SINGLE_COLUMN};var s,a=(s=re.Base,oe.__extends(l,s),l.prototype._doDispose=function(){s.prototype._doDispose.call(this)},_dp(l,"grid",{get:function(){return this._manager&&this._manager.grid}}),_dp(l,"runStyle",{get:function(){return this._runStyle}}),l.prototype.setValues=function(t){var e=this.grid.dataSource,i=this._getRows();i&&i.rows&&0<i.rows.length&&i.fields&&0<i.fields.length&&e.fillValue(i.rows,i.fields,t)},l.prototype.inflate=function(t,e){switch(t){case"left":this._inflateLeft(e);break;case"right":this._inflateRight(e);break;case"top":this._inflateTop(e);break;case"bottom":this._inflateBottom(e)}},l.prototype.getItems=function(t){void 0===t&&(t=!0);for(var e=this.grid,i=[],o=this.getBounds(),n=o.top,r=o.bottom,s=n;s<=r;s++){var a=e.getItem(s);a&&(!t||0<=a.dataRow)&&i.push(a)}return i},l.prototype.getItemIndices=function(t){void 0===t&&(t=!0);for(var e=this.grid,i=[],o=this.getBounds(),n=o.top,r=o.bottom,s=n;s<=r;s++){var a=e.getItem(s);a&&(!t||0<=a.dataRow)&&i.push(a.index)}return i},l.prototype.getRows=function(){for(var t=this.grid,e=[],i=this.getBounds(),o=i.top,n=i.bottom,r=o;r<=n;r++){var s=t.getItem(r);if(s&&0<=s.dataRow){var a=s.dataRow;0<=a&&e.push(a)}}return e},l.prototype._resized=function(){this._manager&&this._manager.$_itemResized(this)},l.prototype.toProxy=function(){var t=this.grid,e=this.getBounds(),i=t.getItem(e.r1),o=t.getItem(e.r2);return{style:this.style,startItem:e.r1,startRow:i?i.dataRow:-1,startColumn:e.c1.firstColumn.name,endItem:e.r2,endRow:o?o.dataRow:-1,endColumn:e.c2.lastColumn.name,startLayout:e.c1,endLayout:e.c2}},l);function l(t,e){var i=s.call(this)||this;return i._manager=t,i._runStyle=e,i}e.SelectionItem=a;var h,d=(h=$.EventAware,oe.__extends(u,h),u.prototype._doDispose=function(){this._grid=null,this._items=null,h.prototype._doDispose.call(this)},_dp(u,"grid",{get:function(){return this._grid}}),_dp(u,"exclusiveMode",{get:function(){return this._exclusiveMode},set:function(t){t!=this._exclusiveMode&&(this._exclusiveMode=t,this.clear())}}),_dp(u,"itemStyle",{get:function(){return this._itemStyle},set:function(t){t!=this._itemStyle&&(this._itemStyle=t,this.clear())}}),_dp(u,"count",{get:function(){return this._items.length}}),_dp(u,"single",{get:function(){return 1==this._items.length&&this._items[0].single}}),u.prototype.lock=function(){this._locked=!0},u.prototype.unlock=function(){this._locked=!1},u.prototype.getItem=function(t){return this._items[t]},u.prototype.add=function(t,e,i){if(this._locked)return null;if(i==n.NONE)return this.clear(),null;this._exclusiveMode&&i!=this._style&&this.clear();var o=null;switch(i){case n.COLUMNS:o=new v(this,i,t.layout,e.layout);break;case n.SINGLE_COLUMN:o=new v(this,i,t.layout,t.layout);break;case n.ROWS:o=new g(this,i,t.itemIndex,e.itemIndex);break;case n.SINGLE_ROW:o=new g(this,i,t.itemIndex,t.itemIndex);break;case n.BLOCK:o=new c(this,i,t,e);break;case n.SINGLE:o=new c(this,i,t,t)}return o&&this.$_addItem(o)},u.prototype.remove=function(t){if(!this._locked){var e=this._items.indexOf(t);0<=e&&(this._items.splice(e,1),this.fireEvent(u.REMOVED,t),this._changed())}},u.prototype.clear=function(){this._locked||0<this._items.length&&(this._items.length=0,this.fireEvent(u.CLEARED),this._changed())},u.prototype.clearAndAdd=function(t,e,i){return 0<this._items.length&&(this._items.length=0,this.fireEvent(u.CLEARED)),this.add(t,e,i)},u.prototype.selectRow=function(t){this.clear(),this.$_addItem(new g(this,n.ROWS,t,t))},u.prototype.containsItem=function(t){for(var e=0,i=this._items.length;e<i;e++)if(this._items[e].containsItem(t))return!0;return!1},u.prototype.containsLayout=function(t){for(var e=0,i=this._items.length;e<i;e++)if(this._items[e].containsLayout(t))return!0;return!1},u.prototype.containsCell=function(t){return this.contains(t.itemIndex,t.layout)},u.prototype.contains=function(t,e){for(var i=0,o=this._items.length;i<o;i++)if(this._items[i].contains(t,e))return!0;return!1},u.prototype.normalize=function(){},u.prototype.canResize=function(t){return t&&!e.isSingleSelectionStyle(t._runStyle)},u.prototype._changed=function(){this.fireEvent(u.CHANGED)},u.prototype.$_addItem=function(t){if(!t)throw new Error("item is null");return this._items.indexOf(t)<0&&(this._items.push(t),this.fireEvent(u.ADDED,t),this._changed()),t},u.prototype.$_itemResized=function(t){this.fireEvent(u.RESIZED,t),this._changed()},u.prototype.$_ended=function(t){this.fireEvent(u.ENDED,t)},u.CHANGED="onSelectionChanged",u.ADDED="onSelectionAdded",u.REMOVED="onSelectionRemoved",u.CLEARED="onSelectionCleared",u.RESIZED="onSelectionResized",u.ENDED="onSelectionEnded",u);function u(t){var e=h.call(this)||this;return e._exclusiveMode=!0,e._itemStyle=n.BLOCK,e._items=[],e._locked=!1,e._grid=t,e}e.SelectionManager=d;var _,c=(_=a,oe.__extends(p,_),_dp(p,"startIndex",{get:function(){return this._startIndex}}),_dp(p,"endIndex",{get:function(){return this._endIndex}}),_dp(p,"style",{get:function(){return n.BLOCK}}),_dp(p,"single",{get:function(){return kt.CellIndex.areEquals(this._startIndex,this._endIndex)}}),p.prototype.getBounds=function(){var t=this.grid;if(this._startIndex.normalize(t),this._endIndex.normalize(t),kt.CellIndex.areEquals(this._startIndex,this._endIndex))return kt.CellRange.create(this._startIndex);var e=t.activeCellLayout._dataCells,i=this._startIndex.layout,o=this._endIndex.layout,n=void 0,r=void 0;return r=i.col<=o.col?(n=e[0][i.col],e[e.length-1][o.col]):(n=e[0][o.col],e[e.length-1][i.col]),kt.CellRange.createRange(this._startIndex.itemIndex,n,this._endIndex.itemIndex,r)},p.prototype.containsItem=function(t){var e=Math.min(this._startIndex.itemIndex,this._endIndex.itemIndex),i=Math.max(this._startIndex.itemIndex,this._endIndex.itemIndex);return e<=t&&t<=i},p.prototype.containsLayout=function(t){if(!t)return!1;if(this.single)return this._startIndex.layout===t;var e=t.distance,i=this._startIndex.layout.distance,o=this._endIndex.layout.distance;return i<o?i<=e&&e<=o:o<=e&&e<=i},p.prototype.contains=function(t,e){return this.getBounds().contains(t,e)},p.prototype.resizeTo=function(t){this.grid.isValid(t)&&!kt.CellIndex.areEquals(t,this._endIndex)&&(this._endIndex.assign(t),this._resized())},p.prototype.moveRow=function(t){this._startIndex.itemIndex+=t,this._endIndex.itemIndex+=t},p.prototype.intersectsWith=function(t){return this.getBounds().intersectsWith(t.getBounds())},p.prototype.mergeWith=function(t){},p.prototype.getData=function(t){if(void 0===t&&(t=-1),0==t)return null;var e,i=this.grid,o=i.collectDataColumns(this._startIndex.layout,this._endIndex.layout);if(!o||(e=o.length)<1)return null;for(var n=Math.min(this._startIndex.itemIndex,this._endIndex.itemIndex),r=Math.max(this._startIndex.itemIndex,this._endIndex.itemIndex),s=[],a=n;a<=r;a++){var l=i.getItem(a);if(l&&l.isDataRow){for(var h={},d=0;d<e;d++){var u=o[d];h[u.fieldName]=l.getData(u.dataIndex)}if(s.push(h),0<t&&s.length==t)break}}return s},p.prototype._inflateLeft=function(t){this._startIndex.layout.distance<=this._endIndex.layout.distance?t.layout!==this._startIndex.layout&&(this._startIndex.layout=t.layout,this._resized()):t.layout!==this._endIndex.layout&&(this._endIndex.layout=t.layout,this._resized())},p.prototype._inflateRight=function(t){this._startIndex.layout.distance>this._endIndex.layout.distance?t.layout!==this._startIndex.layout&&(this._startIndex.layout=t.layout,this._resized()):t.layout!==this._endIndex.layout&&(this._endIndex.layout=t.layout,this._resized())},p.prototype._inflateTop=function(t){var e=this.grid,i=Math.max(0,Math.min(e.itemCount-1,t.itemIndex));this._startIndex.itemIndex<=this._endIndex.itemIndex?i!==this._startIndex.itemIndex&&(this._startIndex.itemIndex=i,this._resized()):i!==this._endIndex.itemIndex&&(this._endIndex.itemIndex=i,this._resized())},p.prototype._inflateBottom=function(t){var e=this.grid,i=Math.max(0,Math.min(e.itemCount-1,t.itemIndex));this._startIndex.itemIndex>this._endIndex.itemIndex?i!==this._startIndex.itemIndex&&(this._startIndex.itemIndex=i,this._resized()):i!==this._endIndex.itemIndex&&(this._endIndex.itemIndex=i,this._resized())},p.prototype._getRows=function(){var t=this.grid,e=t.collectDataColumns(this._startIndex.layout,this._endIndex.layout);if(e&&!(e.length<1)){for(var i=Math.min(this._startIndex.itemIndex,this._endIndex.itemIndex),o=Math.max(this._startIndex.itemIndex,this._endIndex.itemIndex),n=[],r=[],s=i;s<=o;s++)n.push(t.getItem(s).dataRow);for(var a=0,l=e;a<l.length;a++){var h=l[a];r.push(h.dataIndex)}return{rows:n,fields:r}}},p.prototype.toString=function(){return this._startIndex+" ~ "+this._endIndex},p);function p(t,e,i,o){var n=_.call(this,t,e)||this;return n._startIndex=i.clone(),n._endIndex=o.clone(),ne.Utils.isDebugging()&&n._startIndex.layout,ne.Utils.isDebugging()&&n._endIndex.layout,n}e.BlockSelection=c;var f,g=(f=a,oe.__extends(m,f),_dp(m,"startRow",{get:function(){return this._startRow}}),_dp(m,"endRow",{get:function(){return this._endRow}}),_dp(m,"topRow",{get:function(){return Math.min(this._startRow,this._endRow)}}),_dp(m,"bottomRow",{get:function(){return Math.max(this._startRow,this._endRow)}}),_dp(m,"style",{get:function(){return n.ROWS}}),_dp(m,"single",{get:function(){return!1}}),m.prototype.getBounds=function(){var t=this.grid,e=t.itemCount;return this._startRow=Math.max(0,Math.min(e-1,this._startRow)),this._endRow=Math.max(0,Math.min(e-1,this._endRow)),this._startRow<=this._endRow?kt.CellRange.createRange(this._startRow,t.activeCellLayout.first,this._endRow,t.activeCellLayout.last):kt.CellRange.createRange(this._endRow,t.activeCellLayout.first,this._startRow,t.activeCellLayout.last)},m.prototype.contains=function(t,e){return t>=this.topRow&&t<=this.bottomRow},m.prototype.containsItem=function(t){return t>=this.topRow&&t<=this.bottomRow},m.prototype.containsLayout=function(t){return!0},m.prototype.resizeTo=function(t){var e=Math.max(0,t.itemIndex);e!=this._endRow&&(this._endRow=Math.max(0,Math.min(this.grid.itemCount-1,e)),this._resized())},m.prototype.moveRow=function(t){this._startRow+=t,this._endRow+=t},m.prototype.intersectsWith=function(t){return this.getBounds().intersectsWith(t.getBounds())},m.prototype.mergeWith=function(t){},m.prototype.getData=function(t){if(void 0===t&&(t=-1),0==t)return null;var e=this.grid,i=e.collectDataColumns(e.getVisibleLayout(0),e.getVisibleLayout(e.visibleLayoutCount-1));if(!i)return null;var o=i.length;if(o<1)return null;for(var n=Math.max(0,Math.min(this._startRow,this._endRow)),r=Math.min(e.itemCount-1,Math.max(this._startRow,this._endRow)),s=[],a=n;a<=r;a++){var l=e.getItem(a);if(l&&l.isDataRow){for(var h={},d=0;d<o;d++){var u=i[d];h[u.fieldName]=l.getData(u.dataIndex)}if(s.push(h),0<t&&s.length==t)break}}return s},m.prototype._inflateLeft=function(t){},m.prototype._inflateRight=function(t){},m.prototype._inflateTop=function(t){var e=t.itemIndex;e!=this.topRow&&(this._startRow<=this._endRow?this._startRow=Math.max(0,Math.min(this.grid.itemCount-1,e)):this._endRow=Math.max(0,Math.min(this.grid.itemCount-1,e)),this._resized())},m.prototype._inflateBottom=function(t){var e=t.itemIndex;e!=this.bottomRow&&(this._startRow>this._endRow?this._startRow=Math.max(0,Math.min(this.grid.itemCount-1,e)):this._endRow=Math.max(0,Math.min(this.grid.itemCount-1,e)),this._resized())},m.prototype._getRows=function(){var t=this.grid,e=t.activeCellLayout,i=t.collectDataColumns(e.first,e.last);if(i&&!(i.length<1)){for(var o=Math.max(0,Math.min(this._startRow,this._endRow)),n=Math.min(t.itemCount-1,Math.max(this._startRow,this._endRow)),r=[],s=[],a=o;a<=n;a++)r.push(t.getItem(a).dataRow);for(var l=0,h=i;l<h.length;l++){var d=h[l];s.push(d.dataIndex)}return{rows:r,fields:s}}},m);function m(t,e,i,o){var n=f.call(this,t,e)||this;return n._startRow=i,n._endRow=o,n}e.RowSelection=g;var y,v=(y=a,oe.__extends(w,y),_dp(w,"startLayout",{get:function(){return this._startLayout}}),_dp(w,"endLayout",{get:function(){return this._endLayout}}),_dp(w,"leftLayout",{get:function(){return this._startLayout.col<=this._endLayout.col?this._startLayout:this._endLayout}}),_dp(w,"rightLayout",{get:function(){return this._startLayout.col>this._endLayout.col?this._startLayout:this._endLayout}}),_dp(w,"style",{get:function(){return n.COLUMNS}}),_dp(w,"single",{get:function(){return!1}}),w.prototype.getBounds=function(){var t=this.grid.activeCellLayout,e=this._startLayout,i=this._endLayout;if(i.col>e.col){var o=e;e=i,i=o}e=t.getTopOf(e),i=t.getBottomOf(i,!0);var n=this.grid.itemCount-1;return kt.CellRange.createRange(0,e,n,i)},w.prototype.contains=function(t,e){return this.containsLayout(e)},w.prototype.containsItem=function(t){return!0},w.prototype.containsLayout=function(t){return t.distance>=this._startLayout.distance&&t.distance<=this._endLayout.distance},w.prototype.resizeTo=function(t){t.layout!==this._endLayout&&(this._endLayout=t.layout,this._resized())},w.prototype.moveRow=function(t){},w.prototype.intersectsWith=function(t){return this.getBounds().intersectsWith(t.getBounds())},w.prototype.mergeWith=function(t){},w.prototype.getData=function(t){if(void 0===t&&(t=-1),0==t)return null;var e=this.grid,i=e.collectDataColumns(this._startLayout,this._endLayout);if(!i)return null;for(var o=e.itemCount,n=[],r=0;r<o;r++){var s=e.getItem(r);if(s&&s.isDataRow){for(var a={},l=0,h=i.length;l<h;l++)a[i[l].fieldName]=s.getData(i[l].dataIndex);if(n.push(a),0<t&&n.length==t)break}}return n},w.prototype._inflateLeft=function(t){var e=t.layout;e!==this.leftLayout&&(this._startLayout.distance<=this._endLayout.distance?this._startLayout=e:this._endLayout=e,this._resized())},w.prototype._inflateRight=function(t){var e=t.layout;e!==this.rightLayout&&(this._startLayout.distance>this._endLayout.distance?this._startLayout=e:this._endLayout=e,this._resized())},w.prototype._inflateTop=function(t){},w.prototype._inflateBottom=function(t){},w.prototype._getRows=function(){var t=this.grid,e=t.collectDataColumns(this._startLayout,this._endLayout);if(e){for(var i=t.itemCount,o=[],n=[],r=0;r<i;r++)o.push(t.getItem(r).dataRow);for(var s=0,a=e;s<a.length;s++){var l=a[s];n.push(l.dataIndex)}return{rows:o,fields:n}}},w);function w(t,e,i,o){var n=y.call(this,t,e)||this;return n._startLayout=i,n._endLayout=o,n}e.ColumnSelection=v;var C,x=(C=Ut.LayerElement,oe.__extends(b,C),b.prototype._getCssSelector=function(){return"rg-selection"},b.prototype._initDom=function(t){C.prototype._initDom.call(this,t),this.setImportantStyle("pointer-events","none")},b);function b(t){return C.call(this,t,"selectionView")||this}e.SelectionView=x;var I,E=(I=Ut.LayerElement,oe.__extends(S,I),_dp(S,"item",{get:function(){return this._item}}),S.prototype.prepare=function(){this._toped=this._bottomed=this._lefted=this._righted=!1},S.prototype.updateElement=function(){var t=0,e=0,i=this.width,o=this.height;this._lefted&&(t-=10,i+=10),this._righted&&(i+=10),this._toped&&(e-=10,o+=10),this._bottomed&&(o+=10),this._view.setBounds(t,e,i,o)},S.prototype._initDom=function(t){I.prototype._initDom.call(this,t),this.setImportantStyle("overflow","hidden"),this.setImportantStyle("pointer-events","none")},S);function S(t){var e=I.call(this,t,"selectionMask")||this;return e._toped=!1,e._bottomed=!1,e._lefted=!1,e._righted=!1,e._view=new x(t),e.addChild(e._view),e}e.SelectionMask=E;var R,D=(R=Ut.LayerElement,oe.__extends(T,R),T.prototype._doDispose=function(){R.prototype._doDispose.call(this)},T.prototype.addView=function(t){var e=t.$_hash,i=this._views[e];return i||(i=this._pool.pop()||new E(this.doc),this._views[e]=i),i._item=t,this.addChild(i),i},T.prototype.clearViews=function(){for(var t in this._views){var e=this._views[t];this.removeChild(e),this._pool.push(e)}this._views={}},T.prototype.layout=function(){var t=this._grid.layoutManager,e=new ht.Rectangle;for(var i in this._views){var o=this._views[i],n=o.item,r=!1;if(!n.single&&(o.prepare(),n instanceof g?(r=this.$_getSelectionRowsRect(t,n,o,e),o._lefted=!0,o._righted=!0):n instanceof v?(r=this.$_getSelectionColumnsRect(t,n,o,e),o._toped=!0,o._bottomed=!0):r=this.$_getSelectionRangeRect(t,n,o,e),r)){var s=t.contentBounds.y+t.footerBounds.y;e.bottom>s&&(o._bottomed=!0,e.bottom=s)}o.visible=r,o.visible&&(o.setRectI(e),o.updateElement(),o.invalidate())}},T.prototype.$_getSelectionRowsRect=function(t,e,i,o){var n,r,s=this._grid,a=e.getBounds(),l=a.r1,h=a.r2,d=t.itemCount,u=t.fixedItemCount,_=s.topIndex;if(0<u){if(_+u+d<=l||h<0||u<=l&&h<_+u)return!1;var c=t.fixedHeight+s.fixedOptions.rowBarHeight;l<u?n=t.getTableItemBounds(Math.max(0,l)):((n=t.getTableItemBounds(Math.max(0,l-_))).y<c&&(i._toped=!0),n.y=Math.max(n.y,c)),h<u?r=t.getTableItemBounds(h):l<=u&&h<u+_?r=t.getTableItemBounds(Math.min(u+_,u)-1):_<=h?(r=t.getTableItemBounds(Math.min(t.itemCount+u-1,h-_))).y=Math.max(r.y,c):r=n}else{if(!(0<d))return!1;if(_+d<=l||h<_)return!1;c=l-_,n=t.getTableItemBounds(Math.max(0,c)),r=t.getTableItemBounds(Math.min(d-1,h-_)),c<0&&(i._toped=!0)}return o.copy(n.union(r)),o.offset(t.fixedContentBounds.x,t.contentBounds.y+t.bodyBounds.y),o.right=0<t.rightLayoutCount?t.rightContentBounds.right:t.contentBounds.right,!0},T.prototype.$_getSelectionColumnsRect=function(t,e,i,o){var n=this._grid,r=e.getBounds(),s=t.fixedLayoutCount,a=t.rightLayoutCount,l=(t.rightFirstLayout,r.c1.col),h=r.c2.col,d=(n.fixedOptions.colBarWidth,t.getDataRect(r.c1)),u=t.getDataRect(r.c2);if(o.left=Math.min(d.x,u.x),o.right=Math.max(d.right,u.right),o.y=t.contentBounds.y+t.headerBounds.bottom,o.height=Math.min(t.dataBounds.height,t.footerBounds.y),s<=l){var _=t.fixedContentBounds.right;o.x<_&&(i._lefted=!0,o.left=Math.max(o.left,_))}if(0<a){var c=t.rightFirstLayout;c<=l?o.width=0:h<c&&(o.right=Math.min(o.right,t.rightContentBounds.x),i._righted=!0)}return!0},T.prototype.$_getSelectionRangeRect=function(t,e,i,o){var n=this._rangeRect;return!!this.$_getSelectionRowsRect(t,e,i,n)&&(o.y=n.y,o.bottom=n.bottom,this.$_getSelectionColumnsRect(t,e,i,n),o.x=n.x,o.right=n.right,!0)},T);function T(t,e){var i=R.call(this,t.doc,e)||this;return i._pool=[],i._views={},i._rangeRect=new ht.Rectangle,i._grid=t,i}e.SelectionLayer=D});t(Wt);Wt.SelectionMode,Wt.SelectionStyle,Wt.SelectionDisplay,Wt.isSingleSelectionStyle,Wt.isRowSelectionStyle,Wt.isColumnSelectionStyle,Wt.isSingleSelection,Wt.isRowSelection,Wt.isColumnSelection,Wt.SelectionItem,Wt.SelectionManager,Wt.BlockSelection,Wt.RowSelection,Wt.ColumnSelection,Wt.SelectionView,Wt.SelectionMask,Wt.SelectionLayer;var zt=e(function(t,e){Object.defineProperty(e,"__esModule",{value:!0});var i,o=(i=$t.GridBaseOptions,oe.__extends(n,i),n.prototype._doDispose=function(){i.prototype._doDispose.call(this)},_dp(n,"refreshMode",{get:function(){return this._refreshMode},set:function(t){t!=this._refreshMode&&(this._refreshMode=t,this._changed())}}),_dp(n,"columnResizable",{get:function(){return this._columnResizable},set:function(t){t!=this._columnResizable&&(this._columnResizable=t,this._changed())}}),_dp(n,"columnMovable",{get:function(){return this._columnMovable},set:function(t){t!=this._columnMovable&&(this._columnMovable=t,this._changed())}}),_dp(n,"defaultColumnWidth",{get:function(){return this._defaultColumnWidth},set:function(t){t!=this._defaultColumnWidth&&(this._defaultColumnWidth=t,this._changed())}}),_dp(n,"fitStyle",{get:function(){return this._fitStyle},set:function(t){t!=this._fitStyle&&(this._fitStyle=t,this._changed())}}),_dp(n,"rowResizable",{get:function(){return this._rowResizable},set:function(t){t!=this._rowResizable&&(this._rowResizable=t,this._changed())}}),_dp(n,"eachRowResizable",{get:function(){return this._eachRowResizable},set:function(t){t!=this._eachRowResizable&&(this._eachRowResizable=t,this._changed())}}),_dp(n,"rowMovable",{get:function(){return this._rowMovable},set:function(t){this._rowMovable=t}}),_dp(n,"autoClearHeights",{get:function(){return this._autoClearHeights},set:function(t){t!=this._autoClearHeights&&(this._autoClearHeights=t,this._changed())}}),_dp(n,"rowHeight",{get:function(){return this._rowHeight},set:function(t){t!=this._rowHeight&&(this._rowHeight=t,this._autoClearHeights&&this.grid&&this.grid.clearRowHeights(!1),this._changed())}}),_dp(n,"minTableRowHeight",{get:function(){return this._minTableRowHeight},set:function(t){(t=Math.max(n.MIN_TABLE_ROW_HEIGHT,t))!=this._minTableRowHeight&&(this._minTableRowHeight=t,this._changed())}}),_dp(n,"minRowHeight",{get:function(){return this._minRowHeight},set:function(t){(t=Math.max(n.MIN_TABLE_ROW_HEIGHT,t))!=this._minRowHeight&&(this._minRowHeight=t,this._changed())}}),_dp(n,"maxRowHeight",{get:function(){return this._maxRowHeight},set:function(t){(t=Math.max(0,t))!=this._maxRowHeight&&(this._maxRowHeight=t,this._changed())}}),_dp(n,"minCellWidth",{get:function(){return this._minCellWidth},set:function(t){(t=Math.max(0,t))!=this._minCellWidth&&(this._minCellWidth=t,this._changed())}}),_dp(n,"hscrollBar",{get:function(){return this._hscrollBar},set:function(t){t!=this._hscrollBar&&(this._hscrollBar=t,this._changed())}}),_dp(n,"vscrollBar",{get:function(){return this._vscrollBar},set:function(t){t!=this._vscrollBar&&(this._vscrollBar=t,this._changed())}}),_dp(n,"liveScroll",{get:function(){return this._liveScroll},set:function(t){t!=this._liveScroll&&(this._liveScroll=t,this._changed())}}),_dp(n,"scrollDuration",{get:function(){return this._scrollDuration},set:function(t){t!=this._scrollDuration&&(this._scrollDuration=t,this._changed())}}),_dp(n,"hscrollDuration",{get:function(){return this._hscrollDuration},set:function(t){t!=this._hscrollDuration&&(this._hscrollDuration=t,this._changed())}}),_dp(n,"hintDelay",{get:function(){return this._hintDelay},set:function(t){(t=Math.max(t,0))!=this._hintDelay&&(this._hintDelay=t,this._changed())}}),_dp(n,"rowChangeDelay",{get:function(){return this._rowChangeDelay},set:function(t){t!=this._rowChangeDelay&&(this._rowChangeDelay=t,this._changed())}}),_dp(n,"horzScrollStep",{get:function(){return this._horzScrollStep},set:function(t){t!=this._horzScrollStep&&(this._horzScrollStep=t,this._changed())}}),_dp(n,"emptyMessage",{get:function(){return this._emptyMessage},set:function(t){t!=this._emptyMessage&&(this._emptyMessage=t,this.grid.setEmptyMessage(t))}}),_dp(n,"showEmptyMessage",{get:function(){return this._showEmptyMessage},set:function(t){t!=this._showEmptyMessage&&(this._showEmptyMessage=t,this._changed())}}),_dp(n,"focusVisible",{get:function(){return this._focusVisible},set:function(t){t!=this._focusVisible&&(this._focusVisible=t,this._changed())}}),_dp(n,"focusType",{get:function(){return this._focusType},set:function(t){t!==this.focusType&&(this._focusType=t,this._changed())}}),_dp(n,"rowFocusType",{get:function(){return this._rowFocusType},set:function(t){t!=this._rowFocusType&&(this._rowFocusType=t,this._changed())}}),_dp(n,"wheelEnabled",{get:function(){return this._wheelEnabled},set:function(t){t!=this._wheelEnabled&&(this._wheelEnabled=t,this._changed())}}),_dp(n,"wheelScrollLines",{get:function(){return this._wheelScrollLines},set:function(t){t!=this._wheelScrollLines&&(this._wheelScrollLines=t)}}),_dp(n,"wheelScrollHorz",{get:function(){return this._wheelScrollHorz},set:function(t){t!=this._wheelScrollHorz&&(this._wheelScrollHorz=t)}}),_dp(n,"wheelAccelDelay",{get:function(){return this._wheelAccelDelay},set:function(t){t!=this._wheelAccelDelay&&(this._wheelAccelDelay=t)}}),_dp(n,"wheelAccelScroll",{get:function(){return this._wheelAccelScroll},set:function(t){t!=this._wheelAccelScroll&&(this._wheelAccelScroll=t)}}),_dp(n,"wheelEventPropagate",{get:function(){return this._wheelEventPropagate},set:function(t){t!=this._wheelEventPropagate&&(this._wheelEventPropagate=t)}}),_dp(n,"rightClickable",{get:function(){return this._rightClickable},set:function(t){t!=this._rightClickable&&(this._rightClickable=t)}}),_dp(n,"remergeWhenColumnMoved",{get:function(){return this._remergeWhenColumnMoved},set:function(t){this._remergeWhenColumnMoved=t}}),_dp(n,"editItemMerging",{get:function(){return this._editItemMerging},set:function(t){t!=this._editItemMerging&&(this._editItemMerging=t,this._changed())}}),_dp(n,"showInnerFocus",{get:function(){return this._showInnerFocus},set:function(t){t!=this._showInnerFocus&&(this._showInnerFocus=t,this._changed())}}),_dp(n,"toastZIndex",{get:function(){return this._toastZIndex},set:function(t){t!=this._toastZIndex&&(this._toastZIndex=t)}}),_dp(n,"popupDropdownCount",{get:function(){return this._popupDropdownCount},set:function(t){t!=this._popupDropdownCount&&(this._popupDropdownCount=t,this._changed())}}),_dp(n,"selectionMode",{get:function(){return this._selectionMode},set:function(t){t!=this._selectionMode&&(this._selectionMode=t,this.grid.clearSelection())}}),_dp(n,"selectionStyle",{get:function(){return this._selectionStyle},set:function(t){if(t!=this._selectionStyle){var e=this.grid.selections;0<e.count&&(e.getItem(0).getBounds(),e.clear()),this._selectionStyle=t,this._refreshOwner()}}}),_dp(n,"selectionDisplay",{get:function(){return this._selectionDisplay},set:function(t){t!=this._selectionDisplay&&(this._selectionDisplay=t,this._refreshOwner())}}),_dp(n,"spanSelecting",{get:function(){return this._spanSelecting},set:function(t){t!=this._spanSelecting&&(this._spanSelecting=t,this._refreshOwner())}}),_dp(n,"rowHoverType",{get:function(){return this._rowHoverType},set:function(t){t!=this._rowHoverType&&(this._rowHoverType=t,this._refreshOwner())}}),_dp(n,"rowBlockType",{get:function(){return this._rowBlockType},set:function(t){t!=this._rowBlockType&&(this._rowBlockType=t,this._refreshOwner())}}),_dp(n,"rowBlockCallback",{get:function(){return this._rowBlockCallback},set:function(t){t!==this._rowBlockCallback&&(this._rowBlockCallback=t,this._rowBlockType!=lt.RowMaskType.NONE&&this._refreshOwner())}}),_dp(n,"showEmptyTooltip",{get:function(){return this._showEmptyTooltip},set:function(t){this._showEmptyTooltip=t}}),_dp(n,"showChangeMarker",{get:function(){return this._showChangeMarker},set:function(t){t!=this._showChangeMarker&&(this._showChangeMarker=t,this._refreshOwner())}}),_dp(n,"scrollMessageCallback",{get:function(){return this._scrollMessageCallback},set:function(t){this._scrollMessageCallback=t}}),_dp(n,"showNativeEditButton",{get:function(){return this._showNativeEditButton},set:function(t){t!=this._showNativeEditButton&&(this._showNativeEditButton=t,this._changed())}}),_dp(n,"baseZindex",{get:function(){return this._baseZindex},set:function(t){this._baseZindex=Math.max(t,0)}}),_dp(n,"useAlternateRowStyle",{get:function(){return this._useAlternateRowStyle},set:function(t){t!=this._useAlternateRowStyle&&(this._useAlternateRowStyle=t,this._changed())}}),n.prototype.saveSelectionStyle=function(t){this._saveSelectionStyle=this._selectionStyle,this._selectionStyle=t},n.prototype.restoreSelectionStyle=function(){this._selectionStyle=this._saveSelectionStyle},n.MIN_TABLE_ROW_HEIGHT=20,n);function n(t){var e=i.call(this,t)||this;return e._refreshMode=lt.RefreshMode.ALL,e._columnResizable=!0,e._columnMovable=!0,e._minCellWidth=8,e._defaultColumnWidth=120,e._fitStyle=lt.GridFitStyle.NONE,e._rowResizable=!1,e._eachRowResizable=!1,e._rowMovable=!1,e._autoClearHeights=!0,e._rowHeight=0,e._minTableRowHeight=23,e._minRowHeight=23,e._maxRowHeight=0,e._hscrollBar=!0,e._vscrollBar=!0,e._liveScroll=!0,e._scrollDuration=0,e._hscrollDuration=0,e._hintDelay=0,e._rowChangeDelay=0,e._horzScrollStep=8,e._emptyMessage="이 곳에 표시할 메시지를 DisplayOptions.emptyMessage 속성으로 설정합니다.",e._showEmptyMessage=!1,e._focusVisible=!0,e._focusType="layer",e._rowFocusType=lt.RowMaskType.NONE,e._wheelEnabled=!0,e._wheelScrollLines=3,e._wheelScrollHorz=16,e._wheelAccelDelay=0,e._wheelAccelScroll=null,e._wheelEventPropagate=!0,e._rightClickable=!0,e._remergeWhenColumnMoved=!0,e._editItemMerging=!1,e._showInnerFocus=!0,e._toastZIndex=3e3,e._popupDropdownCount=0,e._selectionMode=Wt.SelectionMode.SINGLE,e._selectionStyle=Wt.SelectionStyle.BLOCK,e._selectionDisplay=Wt.SelectionDisplay.CELL,e._spanSelecting=!0,e._rowHoverType=lt.RowMaskType.NONE,e._rowBlockType=lt.RowMaskType.NONE,e._showEmptyTooltip=!1,e._showChangeMarker=!0,e._showNativeEditButton=!0,e._baseZindex=2e3,e._useAlternateRowStyle=!0,(ne.Utils.ieNine||ne.Utils.ieTen)&&(e._focusType="line"),e}e.DisplayOptions=o});t(zt);zt.DisplayOptions;var jt=e(function(t,e){Object.defineProperty(e,"__esModule",{value:!0});var i=(o.empty=function(){return new o},o.create=function(t,e){return void 0===t&&(t=0),void 0===e&&(e=0),new o(t,e)},_dp(o,"isEmpty",{get:function(){return 0===this.width||0===this.height}}),o.prototype.clone=function(){return new o(this.width,this.height)},o.prototype.equals=function(t){return t===this||t&&this.width===t.width&&this.height===t.height},o.prototype.setEmpty=function(){return this.width=this.height=0,this},o.prototype.set=function(t,e){return this.width=t,this.height=e,this},o.prototype.round=function(){var t=this.clone();return t.width>>>=0,t.height>>>=0,t},o.prototype.toString=function(){return"{width: "+this.width+", height: "+this.height+"}"},o.EMPTY=new o,o);function o(t,e){void 0===t&&(t=0),void 0===e&&(e=0),this.width=t,this.height=e}e.Size=i});t(jt);jt.Size;var qt=e(function(t,e){Object.defineProperty(e,"__esModule",{value:!0});var i,o=(i=Ut.VisualElement,oe.__extends(n,i),n.prototype._doDispose=function(){i.prototype._doDispose.call(this)},_dp(n,"grid",{get:function(){for(var t=this.parent;t;){if(t instanceof oi.GridBase)return t;t=t.parent}return null}}),n.prototype.measure=function(t,e,i){return this._setClassName(this._dom),this._doMeasure(t,e,i)},n.prototype.layoutContent=function(t){this._doPrepareContent(t),this._doLayoutContent(t)},n.prototype._getCssSelector=function(){return""},n.prototype._getCssDisplay=function(){return"table"},n.prototype._doDraw=function(t){this._doRender(t)},n.prototype._doMeasure=function(t,e,i){return new jt.Size(e,i)},n.prototype._doPrepareContent=function(t){},n.prototype._doLayoutContent=function(t){},n.prototype._doRender=function(t){},n);function n(t,e){return void 0===e&&(e=null),i.call(this,t,e)||this}e.GridElement=o,e.isItemElement=function(t){return t&&"itemIndex"in t};var r,s=(r=o,oe.__extends(a,r),a.prototype._doDispose=function(){this._model=null,r.prototype._doDispose.call(this)},_dp(a,"model",{get:function(){return this._model}}),a.prototype.setCursor=function(t){t!==this._cursor&&(this._cursor=t,this._dom.style.cursor=t)},a);function a(t,e,i){void 0===i&&(i=null);var o=r.call(this,t,i)||this;return o._ff=ne.Utils.isFirefox,o._chromium=ne.Utils.isChromium,o._textProp=ne.Utils.TextProp,o._cursor="default",o._model=e,o}e.VisualObjectElement=s;var l,h=(l=o,oe.__extends(d,l),d.prototype._doDispose=function(){l.prototype._doDispose.call(this)},d.prototype.setMessage=function(t){this._span[ne.Utils.TextProp]=t},d.prototype._createDom=function(t){var e=l.prototype._createDom.call(this,t),i=this._span=t.createElement("span");return e.appendChild(i),e},d.prototype._getCssSelector=function(){return"rg-empty-grid"},d.prototype._doDraw=function(t){this.setMessage(this.grid.displayOptions.emptyMessage)},d);function d(t){return l.call(this,t,"emptyGridView")||this}e.EmptyGridElement=h});t(qt);qt.GridElement,qt.isItemElement,qt.VisualObjectElement,qt.EmptyGridElement;var Yt=e(function(t,e){Object.defineProperty(e,"__esModule",{value:!0});var n,i=(n=qt.VisualObjectElement,oe.__extends(o,n),o.prototype._doDispose=function(){this._tbody=this._thead=this._table=null,n.prototype._doDispose.call(this)},_dp(o,"tableRowCount",{get:function(){return this._tbody.childElementCount}}),o.prototype.getCellPoint=function(t,e){return(e=e||new Gt.Point).x+=t.offsetLeft,e.y+=t.offsetTop,e},o.prototype._createDom=function(t){var e=t.createElement("div"),i=this._table=t.createElement("table"),o=i.style;return o.setProperty("table-layout","fixed","important"),o.setProperty("width","100%","important"),i.className="rg-table",e.appendChild(i),this._thead=t.createElement("thead"),i.appendChild(this._thead),this._tbody=t.createElement("tbody"),i.appendChild(this._tbody),e},o.prototype._clearSpans=function(){},o.prototype._addSpan=function(t,e,i,o){},o.prototype._addColSpan=function(t,e,i){},o.prototype._addRowSpan=function(t,e,i){},o.prototype._initDom=function(t){n.prototype._initDom.call(this,t),t.style.overflow="hidden"},o.prototype._doPrepareContent=function(t){var e=this._getExplicitWidth(t);ne.Utils.equalNumbers(e,this._explicitWidth)||(this._table.style.width=0<e?e+"px":"100%",this._explicitWidth=e),this._doPrepareTableExtents(t),this._doPrepareTable(t)},o.prototype._doDraw=function(t){this._doRender(t),this._doRenderTable(this._tbody)},o.prototype._getExplicitWidth=function(t){return NaN},o.prototype._doPrepareTableExtents=function(t){},o.prototype._doPrepareTable=function(t){this._doPrepareTableHead(t,this._thead),this._doPrepareTableRows(t,this._tbody)},o.prototype._doPrepareTableHead=function(t,e){var i,o=ne.getDoc(e);0==e.childElementCount?(i=o.createElement("tr"),e.appendChild(i),i.setAttribute("aria-hidden","true"),(l=i.style).setProperty("border","0px none","important")):i=e.lastElementChild;for(var n=this._getCellCount(t);i.childElementCount<n;)(a=o.createElement("th")).scope="col",(l=a.style).setProperty("visibility","hidden","important"),l.setProperty("margin","0px","important"),l.setProperty("padding","0px","important"),l.setProperty("font-size","0px","important"),l.setProperty("line-height","0px","important"),l.height="0px",i.appendChild(a);for(;i.childElementCount>n;)i.removeChild(i.lastChild);for(var r=i.children,s=0;s<r.length;s++){var a,l;(l=(a=r[s]).style).width=this._getCellWidth(t,s)+"px"}},o.prototype._prepareTableRowCells=function(t,e){for(var i=this._getCellCount(t),o=ne.getDoc(e),n=e.childElementCount;n<i;){var r=o.createElement("td");e.appendChild(r);var s=this._prepareCellContent(r,n++);r.appendChild(s)}for(;e.childElementCount>i;)e.removeChild(e.lastChild);return e.childElementCount},o.prototype._isFixedHeight=function(t){return!0},o.prototype._getMinRowHeight=function(t){return t.minRowHeight},o.prototype._doPrepareTableRow=function(t,e,i,o){this._prepareTableRowCells(t,o);var n=this._isFixedHeight(t),r=o.children,s=n?this._getTableRowHeight(t,i):this._getMinRowHeight(t),a=s-1+"px",l=o.style;o[lt.T_VIEW]=this[lt.T_HASH],o[lt.T_FIX]=n,o[lt.T_HEI]=n?s:0,l.height=s+"px",l.display="";for(var h=0,d=r.length;h<d;h++){var u=r[h];this._ff&&(u.style.height="100%");var _=u.firstElementChild;_||(_=this._prepareCellContent(u,h),u.appendChild(_));var c=_.style;c.maxHeight=n?a:"",c.overflow="hidden"}},o.prototype._doRenderTable=function(t){for(var e=t.children,i=0;i<e.length;i++){var o=e[i];this._renderRow(o,i)}},o.prototype._renderRow=function(t,e){this._doDrawRow(e,t);for(var i=t.children,o=0;o<i.length;o++){var n=i[o];this._renderCell(n.lastElementChild,e,o)}},o.prototype._renderCell=function(t,e,i){this._doDrawCell(e,i,t)},o.prototype._prepareCellContent=function(t,e){return ne.getDoc(t).createElement("div")},o.prototype._doDrawRow=function(t,e){},o.prototype._doDrawCell=function(t,e,i){},o.prototype._getTableRow=function(t,e){return this._tbody.children[e]},o.prototype._getTableCell=function(t,e){return this._tbody.children[t].children[e]},o.prototype.getCellContent=function(t,e){return this._tbody.children[t].children[e].firstElementChild},o.prototype.getContentAt=function(t){var e,i=t.grid.layoutManager,o=i.fixedItemCount,n=t.column?t.column.index:0;return e=0<o?t.itemIndex<o?t.itemIndex:t.itemIndex-i.topIndex+1:t.itemIndex-i.topIndex,this.getCellContent(e,n)},o);function o(t,e,i){void 0===i&&(i=null);var o=n.call(this,t,e,i)||this;return o._explicitWidth=NaN,o}e.TableBaseElement=i;var r,s=(r=i,oe.__extends(a,r),a.prototype._doPrepareTableRows=function(t,e){for(var i=this._getTableRowCount(t),o=ne.getDoc(e);e.childElementCount<i;){var n=o.createElement("tr");e.appendChild(n)}for(;e.childElementCount>i;)e.removeChild(e.lastChild);for(var r=e.children,s=0;s<i;s++)(n=r[s]).style.height=this._getTableRowHeight(t,s)+"px",this._doPrepareTableRow(t,s,s,n)},a.prototype._getTableRowCount=function(t){return 1},a);function a(){return null!==r&&r.apply(this,arguments)||this}e.SimpleTableElement=s;var l,h=(l=i,oe.__extends(d,l),d.prototype._getTrs=function(t){return 1},d.prototype._getTableRowCount=function(t){var e=t.fixedItemCount,i=e+t.itemCount;return i*=this._trs,i+=0<e?1:0},d.prototype.$_getTableIndex=function(t,e){var i=t.fixedItemCount,o=e*this._trs;return 0<i&&i<=e?1+o:o},d.prototype._getTableRow=function(t,e){var i=this.$_getTableIndex(t,e);return this._tbody.children[i]},d.prototype.$_getTableRowAt=function(t,e){var i=this.$_getTableIndex(t,e);return this._tbody.children[i]},d.prototype._getTableRowInternal=function(t,e,i){var o=this.$_getTableIndex(t,e);return this._tbody.children[o+i]},d.prototype._doPrepareTableRows=function(t,e){for(var i=t.$_getItems(),o=this._trs=this._getTrs(t),n=t.fixedItemCount,r=t.itemCount+n,s=this._trCount=this._getTableRowCount(t),a=ne.getDoc(e);e.childElementCount<s;){var l=a.createElement("tr");e.appendChild(l)}for(;e.childElementCount>s;)e.removeChild(e.lastChild);var h=e.children,d=0,u=0;if(0<n){for(d=0;d<n;d++)for(var _=0;_<o;_++,u++)this._doPrepareTableRow(t,d,u,h[u]);this.$_prepareFixedBar(t,h[u++])}for(;d<r&&u<s;d++){var c=i[d].isData?o:1;for(_=0;_<c&&u<s;_++,u++)this._doPrepareTableRow(t,d,u,h[u])}},d.prototype.$_prepareFixedBar=function(t,e){var i=ne.getWin(e),o=this._prepareTableRowCells(t,e),n=t.fixedBarHeight,r=e.style;0<n?r.height=t.fixedBarHeight+"px":r.display="none";for(var s=e.children,a=0;a<o;a++){var l=s[a];l instanceof i.HTMLTableCellElement&&(l.rowSpan=1,l.style.display=""),(l=s[a].firstElementChild)&&(l.style.maxHeight="0px",l.style.overflow="hidden")}return n},d.prototype._getTableRowHeight=function(t,e){return t.getTableRowHeight(e,1)},d.prototype._getCellContent=function(t){return t.firstElementChild},d.prototype._updateCellContent=function(t,e,i){this._doUpdateCellContent(t,e,this._getCellContent(i))},d.prototype._doUpdateCellContent=function(t,e,i){},d);function d(){var t=null!==l&&l.apply(this,arguments)||this;return t._trCount=0,t._trs=1,t}e.DataTableElement=h});t(Yt);Yt.TableBaseElement,Yt.SimpleTableElement,Yt.DataTableElement;var Xt=e(function(t,e){Object.defineProperty(e,"__esModule",{value:!0});var n="rowspan",r="colspan",y=(i.prototype.dispose=function(){this.textSpan=this.cell=this.check=this.sort=this.filter=null,this.layout=null},i.prototype.span=function(){this.spanned=!0,this.clear(!1)},i.prototype.clear=function(t){1<this.colSpan&&(this.colSpan=1,this.cell.removeAttribute(r)),1<this.rowSpan&&(this.rowSpan=1,this.cell.removeAttribute(n)),this.visible!==t&&(this.visible=t,this.cell.style.display=t?"":"none");var e=this.cell.firstElementChild,i=this.textSpan,o=e.style;return 0<this.checkWidth&&(e.removeChild(this.check),this.check=null,this.checkWidth=0),0<this.filterWidth&&(e.removeChild(this.filter),this.filter=null,this.filterWidth=0),0<this.sortWidth&&(e.removeChild(this.sort),this.sort=null,this.sortWidth=0),0<this.popupWidth&&(e.removeChild(this.popup),this.popup=null,this.popupWidth=0),this.className&&(this.cell.className=this.className=""),this.rendererClass&&(e.className=this.rendererClass=""),0!=this.marginLeft&&(o.marginLeft="",this.marginLeft=0),0!=this.marginRight&&(o.marginRight="",this.marginRight=0),0!=this.marginTop&&(o.marginTop="",this.marginTop=0),0!=this.marginBottom&&(o.marginBottom="",this.marginBottom=0),this.text&&(i[ne.Utils.TextProp]=this.text=""),this.html&&(i.innerHTML=this.html=""),this},i.prototype.setColSpan=function(t){return this.colSpan!=t&&(1<(this.colSpan=t)?this.cell.colSpan=t:this.cell.removeAttribute(r)),this},i.prototype.setRowSpan=function(t){return this.rowSpan!=t&&(1<(this.rowSpan=t)?this.cell.rowSpan=t:this.cell.removeAttribute(n)),this},i.prototype.setVisible=function(t){return t!==this.visible&&(this.visible=t,this.cell.style.display=t?"":"none"),this},i.prototype.set=function(t,e,i){return this.colSpan!=t&&(1<(this.colSpan=t)?this.cell.colSpan=t:this.cell.removeAttribute(r)),this.rowSpan!=e&&(1<(this.rowSpan=e)?this.cell.rowSpan=e:this.cell.removeAttribute(n)),this.visible!==i&&(this.visible=i,this.cell.style.display=i?"":"none"),this},i.prototype.setText=function(t,e){e!=this.text&&(t[ne.Utils.TextProp]=this.text=e)},i.prototype.setHtml=function(t,e){e!=this.html&&(t.innerHTML=this.html=e)},i.prototype.setClassName=function(t){return t!=this.className&&(this.cell.className=this.className=t,!0)},i.prototype.setRendererClassName=function(t,e){e!=this.rendererClass&&(t.className=this.rendererClass=e)},i.prototype.setDivMarigns=function(t,e,i,o,n){e!=this.marginLeft&&(t.marginLeft=e?e+"px":"",this.marginLeft=e),i!=this.marginRight&&(t.marginRight=i?i+"px":"",this.marginRight=i),o!=this.marginTop&&(t.marginTop=o?o+"px":"",this.marginTop=o),n!=this.marginBottom&&(t.marginBottom=n?n+"px":"",this.marginBottom=n)},i.prototype.getIndex=function(t){return t.set(-1,this.layout.firstColumn)},i);function i(t){this.cell=null,this.check=null,this.sort=null,this.filter=null,this.popup=null,this.textSpan=null,this.layout=null,this.visible=void 0,this.spanned=!1,this.width=0,this.height=0,this.rowSpan=1,this.colSpan=1,this.className="",this.rendererClass="",this.text=void 0,this.html=void 0,this.showTooltip=!0,this.tooltip="",this.sortWidth=0,this.filterWidth=0,this.checkWidth=0,this.popupWidth=0,this.marginLeft=0,this.marginRight=0,this.marginTop=0,this.marginBottom=0,this.cell=t,this.textSpan=t.firstElementChild.firstElementChild}e.HeaderTableCell=y;var o,s=(o=Yt.SimpleTableElement,oe.__extends(F,o),F.renderCell=function(t,e){e[ne.Utils.TextProp]=t.text||""},F.prototype._doDispose=function(){for(var t=0;t<this._cells.length;t++)for(var e=this._cells[t],i=0;i<e.length;i++)e[i].dispose(),e[i]=null;this._cells=null,o.prototype._doDispose.call(this)},F.prototype.tableCellByCell=function(t){for(var e=0;e<this._cells.length;e++)for(var i=this._cells[e],o=0;o<i.length;o++){var n=i[o];if(n&&n.cell===t)return n}},F.prototype.tableCellByLayout=function(t){for(var e=0;e<this._cells.length;e++)for(var i=this._cells[e],o=0;o<i.length;o++)if(i[o].layout===t)return i[o]},F.prototype.tableCellByLayout2=function(t,e){var i=this._cells,o=i.length;if(!(o<1)){for(var n=i[0].length,r=this._getFirstCell(t),s=this._getStartCell(t)-r,a=this._getEndCell(t)-r,l=s;l<=a;l++)for(var h=0;h<o;h++)if(i[h][l].layout===e)return i[h][l];for(l=s-1;0<=l;l--)for(h=0;h<o;h++)if(i[h][l].layout===e)return i[h][l];for(l=1+a;l<n;l++)for(h=0;h<o;h++)if(i[h][l].layout===e)return i[h][l]}},F.prototype.layoutByCell=function(t){var e=this.tableCellByCell(t);return e&&e.layout},F.prototype.columnByCell=function(t){var e=this.layoutByCell(t);return e&&e._columnObj},F.prototype.getSpanRoot=function(t){for(var e=0;e<this._cells.length;e++)for(var i=this._cells[e],o=0;o<i.length;o++){var n=i[o];if(n.layout===t){if(n.spanned)if(n.layout.parent.vertical){for(var r=e-1;0<=r;r--)if(!this._cells[r][o].spanned)return this._cells[r][o].layout}else for(r=o-1;0<=r;r--)if(!i[r].spanned)return i[r].layout;return t}}},F.prototype.refresh=function(t){for(var e=t.focusedColumn,i=t.layoutManager,o=this._getFirstCell(i),n=this._getLastCell(i)-o+1,r=0;r<this._cells.length;r++)for(var s=this._cells[r],a=0;a<n;a++){var l=s[a],h=l.layout;if(l.visible&&h instanceof Tt.CellLayoutColumnItem){var d=l.cell;d[lt.T_FOC]=h.isColumn(e),ne.Utils.setClassName(d,this.$_getCellSelector(h,d))}}},F.prototype.getRowAt=function(t){for(var e=1;e<this._rowPoints.length-1;e++)if(t<this._rowPoints[e])return e-1;return this._rowPoints.length-2},F.prototype.getLayoutHeight=function(t,e){var i=t.hrow,o=e?t.hlen:t.hspan;return this._rowPoints[i+o]-this._rowPoints[i]},F.prototype.getLayoutPos=function(t){return this._rowPoints[t.hrow]},F.prototype._getCssSelector=function(){return"rg-header"},F.prototype._isFixedHeight=function(){return this._fixedHeight},F.prototype._getMinRowHeight=function(t){return this._minRowHeight},F.prototype._prepareCellContent=function(t,e){var i=ne.getDoc(t),o=i.createElement("div"),n=i.createElement("span");return o.appendChild(n),o},F.prototype._doMeasure=function(t,e,i){var o=this.model,n=t.layoutManager.headerRows,r=o.height;return this._minRowHeight=o.minRowHeight,r=r<=0?Math.max(this._minRowHeight,t.heightMeasurer.headerHeight)*n:Math.max(this._minRowHeight*n,r),this._fixedHeight=0<=r,r=Math.max(this._minRowHeight,o.minHeight,r),jt.Size.create(e,r)},F.prototype._doPrepareTableExtents=function(t){var e=this._rowPoints,i=this.height,o=Math.floor(i/t.headerRows);if(e.length=this._getTableRowCount(t)+1,(e[0]=0)<e.length){for(var n=1;n<e.length-1;n++)e[n]=e[n-1]+o;e[n]=i}},F.prototype._doLayoutContent=function(t){var e=t.grid,i=e.focusedColumn,o=this.model,n=t.cellLayouts._headerCells,r=n.length,s=this._getFirstCell(t),a=this._getStartCell(t)-s,l=this._getEndCell(t)-s;this.$_refreshCells(t,n,this._tbody),this.$_refreshSpans(t,r);for(var h=0;h<r;h++)for(var d=this._cells[h],u=a;u<=l;u++){var _=d[u];if(_.visible){var c=_.layout,p=_.cell;if(p[lt.T_FOC]=c.isColumn(i),_.setClassName(this.$_getCellSelector(c,p)),c.isNull)_.setText(_.textSpan,c.header.getDisplayText());else if(c instanceof Tt.CellLayoutGroupItem)_.setText(_.textSpan,c.header.getDisplayText());else{var f=o.getCell(c);this._updateCell(e,o,f,_)}}}},F.prototype._doRender=function(t){},F.prototype._getTableRowCount=function(t){return t.headerRows},F.prototype._getTableRowHeight=function(t,e){return this._rowPoints[e+1]-this._rowPoints[e]},F.prototype.$_getCellHeight=function(t){var e=t.layout.hrow,i=this._rowPoints[e];return this._rowPoints[e+t.rowSpan]-i},F.prototype._getCellCount=function(t){return t.cellCount-t.fixedCellCount-t.rightCellCount},F.prototype._getCellWidth=function(t,e){return t.getCellWidth(e)},F.prototype._getCellWidth2=function(t,e,i){return t.getCellWidth2(e,i)},F.prototype._doDrawCell=function(t,e,i){},F.prototype.$_getCellSelector=function(t,e){var i="";if(t instanceof Tt.CellLayoutGroupItem)i="rg-header-group-cell",(o=t.header.styleName)&&(i+=" "+o);else{i="rg-header-cell",e[lt.T_FOC]?i+=" rg-header-focus":this.grid.isSelectedLayout(t)&&(i+=" rg-header-select");var o,n=t.firstColumn;(o=n&&n.header.styleName)&&(i+=" "+o)}return i},F.prototype._getFirstCell=function(t){return t._firstCell},F.prototype._getLastCell=function(t){return t._lastCell},F.prototype._getStartCell=function(t){return t.getStartCell()},F.prototype._getEndCell=function(t){return t.getEndCell()},F.prototype.$_refreshCells=function(t,e,i){for(var o=this._cells,n=i.children,r=n.length,s=this._getFirstCell(t),a=this._getLastCell(t)-s+1,l=o.length;l<r;l++)o.push([]);for(var h=0;h<r;h++){for(var d=o[h],u=n[h].children,_=e[h],c=0;c<a;c++){var p=u[c],f=_[c+s],g=d[c];g?g.cell!==p||g.layout!=f&&(g.layout=f,g.clear(!0)):(g=d[c]=new y(u[c])).layout=f,g.height=this.$_getCellHeight(g),g.width=this._getCellWidth(t,c),g.spanned=!1}for(c=a;c<d.length;c++)d[c].dispose();d.length=a}for(h=r;h<o.length;h++){var m=o[h];for(c=0;c<m.length;c++)m[c].dispose(),m[c]=null}o.length=r},F.prototype.$_refreshSpans=function(t,e){for(var i=this._getFirstCell(t),o=this._getFirstCell(t)-i,n=this._getLastCell(t)-i,r=0;r<e;r++)for(var s=this._cells[r],a=s.length,l=o;l<=n;l++){var h=s[l],d=h.layout,u=d.parent,_=u&&u.vertical;if(!h.spanned)if(d.isProxy)h.clear(!1);else{var c=0,p=d.getHeaderSpan()-1;if(0<p){var f=0,g=d.vindex+1;if(_)for(;f++<p&&f<e;)c+=u.getVisible(g++)._hspan,this._cells[r+f][l].span();else for(;f++<p&&l-o+f<a&&g<u.visibleCount;)c+=u.getVisible(g++)._cspan,s[l+f].span()}(d instanceof Tt.CellLayoutGroupItem||d.isNull)&&h.clear(!0),_?h.set(d._cspan,d._hspan+c,!0):h.set(d._cspan+c,d._hspan,!0),h.width=this._getCellWidth2(t,l,h.colSpan)}}},F.prototype._updateCell=function(t,e,i,o){var n=t.doc,r=t.sortingOptions,s=t.filteringOptions,a=o.layout.firstColumn,l=i.checkLocation,h=l&&l!=lt.ColumnHeaderItemLocation.NONE?e.checkWidth:0,d=0<h?e.checkWidth:0,u=a&&this.$_canSortHandleVisible(r,a),_=a&&a.sortDirection||lt.SortDirection.NONE,c=u?e.sortWidth:0,p=a&&this.$_canFilterHandleVisible(s,a)?e.filterWidth:0,f=a&&this.$_canPopupHandleVisible(e,a)?e.popupWidth:0,g=o.cell.firstElementChild,m=o.textSpan,y=o.width,v=this.$_getCellHeight(o),w=0,C=0,x=0,b=0,I=g.style;o.setRendererClassName(g,F.RENDERER_STYLE),I.maxHeight=Math.max(v-1,0)+"px";var E=o.check;if(0<h){var S=m.style;E?I=E.style:(E=n.createElement("input"),(o.check=E).type="checkbox",E.className="rg-header-check",(I=E.style).position="absolute",I.display="inline-block",I.verticalAlign="middle"),o.checkWidth<=0&&(g.appendChild(E),o.checkWidth=h),E.checked=a.checked;var R=-1,D=-1;switch(S.removeProperty("display"),l){case lt.ColumnHeaderItemLocation.LEFT:case lt.ColumnHeaderItemLocation.LEFT_EDGE:g.insertBefore(E,o.textSpan),l===lt.ColumnHeaderItemLocation.LEFT?(I.position="relative",I.removeProperty("left"),I.removeProperty("top")):(I.position="absolute",w+=h,R=0,D=Math.floor((v-e.checkHeight)/2));break;case lt.ColumnHeaderItemLocation.RIGHT:case lt.ColumnHeaderItemLocation.RIGHT_EDGE:g.insertBefore(o.textSpan,E),l===lt.ColumnHeaderItemLocation.RIGHT?(I.position="relative",I.removeProperty("left"),I.removeProperty("top")):(I.position="absolute",C+=h,R=y-h,D=Math.floor((v-e.checkHeight)/2));break;case"top":case"topEdge":g.insertBefore(E,o.textSpan),l===lt.ColumnHeaderItemLocation.TOP?(S.display="block",I.position="relative",I.removeProperty("left"),I.removeProperty("top")):(I.position="absolute",x+=d,R=Math.floor((y-c-p-e.checkWidth)/2),D=0);break;case"bottom":case"bottomEdge":g.insertBefore(o.textSpan,E),l===lt.ColumnHeaderItemLocation.BOTTOM?(S.display="block",I.position="relative",I.removeProperty("left"),I.removeProperty("top")):(I.position="absolute",b+=d,R=Math.floor((y-c-p-e.checkWidth)/2),D=v-e.checkHeight)}-1<R&&(I.left=R+"px"),-1<D&&(I.top=D+"px")}else 0<o.checkWidth&&(g.removeChild(E),o.checkWidth=0);var T=o.filter;0<p?(T?I=T.style:(T=n.createElement("span"),(I=(o.filter=T).style).position="absolute",I.display="inline-block"),o.filterWidth<=0&&(g.appendChild(T),o.filterWidth=p),T.className="rg-header-filtering"+(a.isFiltered()?" filter-activated":""),C+=p,I.left=y-C+"px",I.top=Math.floor((v-e.filterHeight)/2)+"px",I.width=p+"px",I.height=e.filterWidth+"px"):0<o.filterWidth&&(g.removeChild(T),o.filterWidth=0);var k=o.sort;if(u){switch(k?I=k.style:(k=n.createElement("span"),(I=(o.sort=k).style).position="absolute",I.display="inline-block"),o.sortWidth<=0&&(g.appendChild(k),o.sortWidth=c),_){case lt.SortDirection.DESCENDING:k.className="rg-header-sort-descending";break;case lt.SortDirection.ASCENDING:k.className="rg-header-sort-ascending";break;default:k.className="rg-header-sort-none"}C+=c,I.left=y-C+"px",I.width=c+"px",r.showSortOrder&&0<=a.sortOrder?(k[ne.Utils.TextProp]=(a.sortOrder+1).toString(),I.top=Math.max(0,Math.floor((v-e.sortHeight-10)/2))+"px",I.height=Math.min(o.height,e.sortHeight+10)+"px",I.backgroundPositionY=ne.Utils.isIE?"5px":"70%",I.lineHeight=ne.Utils.isIE?"1.5em":"1em"):(k[ne.Utils.TextProp]="",I.backgroundPositionY="center",I.top=Math.floor((v-e.sortHeight)/2)+"px",I.height=e.sortHeight+"px")}else 0<o.sortWidth&&(g.removeChild(k),o.sortWidth=0);var M=o.popup;0<f?(M?I=M.style:(M=n.createElement("span"),(I=(o.popup=M).style).position="absolute",I.display="inline-block"),o.popupWidth<=0&&(g.appendChild(M),o.popupWidth=f),M.className="rg-header-popup",C+=f,I.left=y-C+"px",I.top=Math.floor((v-e.popupHeight)/2)+"px",I.width=f+"px",I.height=e.popupWidth+"px"):0<o.popupWidth&&(g.removeChild(M),o.popupWidth=0),I=g.style,o.showTooltip=i.showTooltip,o.tooltip=i.tooltip,o.setDivMarigns(I,w,C,x,b);var L=i.template;L?o.setHtml(m,L):o.setText(m,i.text||"")},F.prototype.$_canPopupHandleVisible=function(t,e){if(null==e.header.popupMenuName)return!1;switch(t.showPopupMenu){case lt.HandleVisibility.VISIBLE:return!0;case lt.HandleVisibility.HOVERED:return this.hovered;case lt.HandleVisibility.ALWAYS:return!0;case lt.HandleVisibility.HIDDEN:return!1}},F.prototype.$_canFilterHandleVisible=function(t,e){var i=e.hasFilters;if(i)switch(t.handleVisibility){case lt.HandleVisibility.HIDDEN:i=!1}return i},F.prototype.$_canSortHandleVisible=function(t,e){switch(t.handleVisibility){case lt.HandleVisibility.VISIBLE:return 0<=e.sortOrder;case lt.HandleVisibility.HOVERED:return this.hovered&&0<=e.sortOrder;case lt.HandleVisibility.ALWAYS:return!0;case lt.HandleVisibility.HIDDEN:return!1}return 0<=e.sortOrder},F.prototype.$_canCheckHandleVisible=function(t,e){return!1},F.prototype.$_checkHeight=function(){return this._table.offsetHeight!=this._rowPoints[this._rowPoints.length-1]},F.prototype.$_getHeights=function(t){var e=this._tbody.rows;if(0==t.length)for(var i=0,o=this._rowPoints.length-1;i<o;i++)t[i]=0;for(i=0;i<t.length;i++)t[i]=Math.max(t[i],e[i]?e[i].offsetHeight:0)},F.prototype.$_adjustHeights=function(t){for(var e=this._tbody.rows,i=this._rowPoints,o=i[0]=0,n=i.length-1;o<n;o++)e[o].style.height=t[o]+"px",i[o+1]=i[o]+t[o];return i[i.length-1]},F.prototype.$_distributeHeights=function(t,e){for(var i=e.length,o=0,n=0;n<i;n++)o+=e[n];if(o<t){var r=this._tbody.rows,s=t-o,a=s;for(n=0;n<i-1;n++){var l=Math.floor(s*e[n]/o);e[n]+=l,r[n].style.height=e[n]+"px",a-=l}e[n]+=a,r[n]&&(r[n].style.height=e[n]+"px")}},F.RENDERER_STYLE="rg-header-renderer",F);function F(t,e){var i=o.call(this,t,e,"headerView")||this;return i._rowPoints=[],i._cells=[],i}e.HeaderElement=s;var a,l=(a=s,oe.__extends(h,a),h.prototype._getExplicitWidth=function(t){return t.fixedWidth-t.fixedBarWidth},h.prototype._getFirstCell=function(t){return this._getStartCell(t)},h.prototype._getLastCell=function(t){return this._getEndCell(t)},h.prototype._getStartCell=function(t){return 0},h.prototype._getEndCell=function(t){return t.fixedCellCount-1},h.prototype._getCellCount=function(t){return t.fixedCellCount},h.prototype._getCellWidth=function(t,e){return t.getFixedCellWidth(e)},h.prototype._getCellWidth2=function(t,e,i){return t.getFixedCellWidth2(e,i)},h.prototype.tableCellByLayout2=function(t,e){return this.tableCellByLayout(e)},h);function h(){return null!==a&&a.apply(this,arguments)||this}e.FixedHeaderElement=l;var d,u=(d=s,oe.__extends(_,d),_.prototype._getFirstCell=function(t){return this._getStartCell(t)},_.prototype._getLastCell=function(t){return this._getEndCell(t)},_.prototype._getStartCell=function(t){return t.cellCount-t.rightCellCount},_.prototype._getEndCell=function(t){return t.cellCount-1},_.prototype._getCellCount=function(t){return t.cellCount-1},_.prototype._getCellWidth=function(t,e){return t.getRightCellWidth(e)},_.prototype._getCellWidth2=function(t,e,i){return t.getRightCellWidth2(e,i)},_.prototype.tableCellByLayout2=function(t,e){return this.tableCellByLayout(e)},_);function _(){return null!==d&&d.apply(this,arguments)||this}e.RightHeaderElement=u});t(Xt);Xt.HeaderTableCell,Xt.HeaderElement,Xt.FixedHeaderElement,Xt.RightHeaderElement;var Kt=e(function(t,e){Object.defineProperty(e,"__esModule",{value:!0});var o,i=(o=qt.GridElement,oe.__extends(n,o),n.prototype._doDispose=function(){this._index&&this._index.dispose(),this._index=null,this._cellDom&&this._cellDom.parentElement.removeChild(this._cellDom),this._cellDom=null,o.prototype._doDispose.call(this)},_dp(n,"fixed",{get:function(){return this._fixed}}),_dp(n,"index",{get:function(){return this._index},set:function(t){kt.CellIndex.areEquals(this._index,t)||(this._index.assignFrom(t),this._changed())}}),_dp(n,"item",{get:function(){return this._index.item}}),n.prototype.updateCell=function(t,e,i){i!=this._cellDom&&(i&&this._clearCellDom(i),this._clearCellCache(),this._cellDom=i),this.index=e.index,this._doPrepareValue(t,e),this._doUpdateContent(t,e,this._cellDom)},n.prototype.removeCellDom=function(t){void 0===t&&(t=!1),t&&this._cellDom&&this._clearCellDom(this._cellDom),this._cellDom=null,this._clearCellCache()},n.prototype._createDom=function(t){return null},n.prototype._clearCellDom=function(t){t.innerHTML=""},n.prototype._clearCellCache=function(){},_dp(n,"valueColumn",{get:function(){return this._index.valueColumn}}),_dp(n,"dataColumn",{get:function(){return this._index.dataColumn}}),n.prototype._changed=function(){this.invalidate()},n.prototype._doPrepareValue=function(t,e){},n.prototype._doUpdateContent=function(t,e,i){},n.prototype._doLayoutContent=function(t){},n);function n(t,e){void 0===e&&(e=null);var i=o.call(this,t,e)||this;return i._fixed=!1,i._index=new kt.CellIndex,i}e.CellElement=i;var r,s=(r=i,oe.__extends(a,r),a.prototype._doPrepareValue=function(t,e){},a);function a(t,e){return void 0===e&&(e=null),r.call(this,t,e)||this}e.ValueCellElement=s});t(Kt);Kt.CellElement,Kt.ValueCellElement;var Zt=e(function(t,e){Object.defineProperty(e,"__esModule",{value:!0});var i,o=(i=xt.TextCellRenderer,oe.__extends(n,i),_dp(n,"valueSeparator",{get:function(){return this._valueSeparator},set:function(t){t!=this._valueSeparator&&(this._valueSeparator=t,this._changed())}}),_dp(n,"type",{get:function(){return n.SERIES_TYPE}}),n.prototype._makeText=function(t,e){return e.getDisplayText(t,this._valueSeparator)||""},n.SERIES_TYPE="series",n);function n(){var t=i.call(this)||this;return t._valueSeparator=",",t}e.SeriesTextCellRenderer=o;var r,s=(r=xt.DataCellRenderer,oe.__extends(a,r),a.prototype._getValues=function(t){return t.value||[]},a);function a(){return r.call(this)||this}var l,h=(l=s,oe.__extends(d,l),_dp(d,"baseValue",{get:function(){return this._baseValue},set:function(t){t!=this._baseValue&&(this._baseValue=t,this._changed())}}),_dp(d,"firstStyle",{get:function(){return this._firstStyle},set:function(t){t!=this._firstStyle&&(this._firstStyle=t,this._changed())}}),_dp(d,"lastStyle",{get:function(){return this._lastStyle},set:function(t){t!=this._lastStyle&&(this._lastStyle=t,this._changed())}}),_dp(d,"highStyle",{get:function(){return this._highStyle},set:function(t){t!=this._highStyle&&(this._highStyle=t,this._changed())}}),_dp(d,"lowStyle",{get:function(){return this._lowStyle},set:function(t){t!=this._lowStyle&&(this._lowStyle=t,this._changed())}}),_dp(d,"belowStyle",{get:function(){return this._belowStyle},set:function(t){t!=this._belowStyle&&(this._belowStyle=t,this._changed())}}),_dp(d,"pointStyle",{get:function(){return this._pointStyle},set:function(t){t!=this._pointStyle&&(this._pointStyle=t,this._changed())}}),d.prototype._doInitContent=function(t){var e=ne.getDoc(t),i=this._div=e.createElement("div");i.style.position="relative",i.style.height="100%",t.appendChild(i);var o=(this._svg=vt.SvgElement.createSVG(i)).style;o.position="absolute",o.left="0px",o.top="0px",o.width="100%",o.height="100%"},d.prototype._doRenderCell=function(t,e,i,o,n){this._div;var r=this._svg;r.setAttribute("class",this._getChartStyle()),this._values=this._getValues(e),vt.SvgElement.renderSVG2(t,r,this.$_render)},d.prototype._getPoints=function(t,e,i){for(var o=t.length,n=[],r=i-e,s=0;s<o;s++){var a=t[s],l=5+s/(o-1)*90,h=10+(isNaN(a)||0==r?80:80*(1-(a-e)/r));n.push(l,h)}return n},d.prototype._getBasePoint=function(t,e,i){var o=e-t;return 0+(isNaN(i)||0==o?100:100*(1-(i-t)/o))},d);function d(){var t=l.call(this)||this;return t._baseValue=NaN,t.$_render=function(t,e,i,o){var n=this._values;if(n&&n.length){for(var r=n.length,s=n[0],a=n[0],l=1;isNaN(s)&&l<r;)a=s=n[l++];for(;l<r;l++){var h=n[l];isNaN(h)||(h<s&&(s=h),a<h&&(a=h))}var d=isNaN(this._baseValue)?s:this._baseValue;isNaN(s)||this._renderChart(e,n,s,a,d)}}.bind(t),t}var u,_=(u=h,oe.__extends(c,u),_dp(c,"chartStyle",{get:function(){return this._chartStyle},set:function(t){t!=this._chartStyle&&(this._chartStyle=t,this._changed())}}),_dp(c,"curved",{get:function(){return this._curved},set:function(t){t!=this._curved&&(this._curved=t,this._changed())}}),_dp(c,"type",{get:function(){return c.TYPE}}),_dp(c,"styleName",{get:function(){return c.STYLE_NAME}}),c.prototype._getChartStyle=function(){return this._chartStyle},c.prototype._renderChart=function(t,e,i,o,n){for(var r,s=isNaN(n)?o:Math.max(o,n),a=isNaN(n)?i:Math.min(i,n),l=this._getPoints(e,a,s),h=e.length,d=0;d<h-1;d++)if(t.sline(null,l[2*d]+"%",l[2*d+1]+"%",l[2*(d+1)]+"%",l[2*(d+1)+1]+"%"),r=this.pointStyle){var u=l[2*d],_=l[2*d+1];t.scircle(r,u+"%",_+"%","2")}if((r=this.firstStyle)&&(u=l[0],_=l[1],t.scircle(r,u+"%",_+"%","2")),(r=this.lastStyle)&&(u=l[2*(h-1)],_=l[2*(h-1)+1],t.scircle(r,u+"%",_+"%","2")),r=this.highStyle)for(d=0;d<h;d++)e[d]>=o&&(u=l[2*d],_=l[2*d+1],t.scircle(r,u+"%",_+"%","2"));if(r=this.lowStyle)for(d=0;d<h;d++)e[d]<=i&&(u=l[2*d],_=l[2*d+1],t.scircle(r,u+"%",_+"%","2"))},c.TYPE="sparkline",c.STYLE_NAME="rg-renderer "+(c.STYLE="rg-sparkline-renderer"),c.CHART_STYLE="rg-sparkline-renderer-chart",c);function c(){var t=u.call(this)||this;return t._chartStyle=c.CHART_STYLE,t._curved=!1,t.lastStyle="rg-sparkline-renderer-last",t.highStyle="rg-sparkline-renderer-high",t.lowStyle="rg-sparkline-renderer-low",t}e.SparkLineRenderer=_;var p,f=(p=h,oe.__extends(g,p),_dp(g,"chartStyle",{get:function(){return this._chartStyle},set:function(t){t!=this._chartStyle&&(this._chartStyle=t,this._changed())}}),_dp(g,"barWidth",{get:function(){return this._barWidth},set:function(t){(t=Math.max(0,t))!=this._barWidth&&(this._barWidth=t,this._changed())}}),_dp(g,"type",{get:function(){return g.TYPE}}),_dp(g,"styleName",{get:function(){return g.STYLE_NAME}}),g.prototype._getChartStyle=function(){return this._chartStyle},g.prototype._renderChart=function(t,e,i,o,n){for(var r,s=isNaN(n)?o:Math.max(o,n),a=isNaN(n)?i:n,l=e.length,h=this._getBasePoint(a,s,n),d=100/l,u=0+d/2,_=s-a,c=d*this._barWidth,p=0;p<l;p++){var f=e[p];if(!isNaN(f)){r=f<=i&&this.lowStyle?this.lowStyle:o<=f&&this.highStyle?this.highStyle:f<n&&this.belowStyle?this.belowStyle:0==p&&this.firstStyle?this.firstStyle:p==l-1&&this.lastStyle?this.lastStyle:null;var g=0==_?1:Math.max(1,Math.floor(100*(f-a)/_));t.pbounds(r,u-c/2,h,c,-g)}u+=d}},g.TYPE="sparkcolumn",g.STYLE_NAME="rg-renderer "+(g.STYLE="rg-sparkcolumn-renderer"),g.CHART_STYLE="rg-sparkcolumn-renderer-chart",g);function g(){var t=p.call(this)||this;return t._chartStyle=g.CHART_STYLE,t._barWidth=.8,t.lastStyle="rg-sparkcolumn-renderer-last",t.highStyle="rg-sparkcolumn-renderer-high",t.lowStyle="rg-sparkcolumn-renderer-low",t}e.SparkColumnRenderer=f;var m,y=(m=h,oe.__extends(v,m),_dp(v,"chartStyle",{get:function(){return this._chartStyle},set:function(t){t!=this._chartStyle&&(this._chartStyle=t,this._changed())}}),_dp(v,"barWidth",{get:function(){return this._barWidth},set:function(t){(t=Math.max(0,t))!=this._barWidth&&(this._barWidth=t,this._changed())}}),_dp(v,"belowHeight",{get:function(){return this._belowHeight},set:function(t){(t=Math.max(0,t))!=this._belowHeight&&(this._belowHeight=t,this._changed())}}),_dp(v,"type",{get:function(){return v.TYPE}}),_dp(v,"styleName",{get:function(){return v.STYLE_NAME}}),v.prototype._getChartStyle=function(){return this._chartStyle},v.prototype._renderChart=function(t,e,i,o,n){for(var r=e.length,s=100/r,a=0+s/2,l=s*this._barWidth,h=0+100*(1-this._belowHeight),d=0;d<r;d++){var u=e[d];if(!isNaN(u)&&u!=n){var _=null;u<n&&this.belowStyle&&(_=this.belowStyle);var c=u<n?100:0;t.pbounds(_,Math.floor(a-l/2),Math.floor(c),Math.floor(l),Math.floor(h-c))}a+=s}},v.TYPE="sparkwinloss",v.STYLE_NAME="rg-renderer "+(v.STYLE="rg-sparkwinloss-renderer"),v.CHART_STYLE="rg-sparkwinloss-renderer-chart",v);function v(){var t=m.call(this)||this;return t._chartStyle=v.CHART_STYLE,t._barWidth=.8,t._belowHeight=.4,t.belowStyle="rg-sparkwinloss-renderer-below",t}e.SparkWinLossRenderer=y});t(Zt);Zt.SeriesTextCellRenderer,Zt.SparkLineRenderer,Zt.SparkColumnRenderer,Zt.SparkWinLossRenderer;var Qt=e(function(t,e){Object.defineProperty(e,"__esModule",{value:!0});var i,C=Dt,o=(i=Kt.ValueCellElement,oe.__extends(n,i),_dp(n,"text",{get:function(){return this._text}}),n.prototype._doUpdateContent=function(t,e,i){i[ne.Utils.TextProp]=this._text},n);function n(t,e){return i.call(this,t,e||"dataCellView")||this}e.DataCellElement=o;var r,s=(r=qt.GridElement,oe.__extends(a,r),a.prototype._doDispose=function(){this._item=null,r.prototype._doDispose.call(this)},_dp(a,"itemIndex",{get:function(){return this._item.index}}),a.prototype.updateItem=function(t,e,i,o){this._item=t,this._domIndex=e,this._trs=i,this._fixedHeight=o},a.prototype.clearContent=function(t,e){},a.prototype._createDom=function(){return null},a.prototype._changed=function(){this.invalidate()},a.prototype._getTableRow=function(t,e){return this.parent._getTableRow(t,this._domIndex)},a.prototype._getCellContent=function(t){return this.parent.getCellContent(this._domIndex,t)},a);function a(t,e){void 0===e&&(e=null);var i=r.call(this,t,e)||this;return i._domIndex=-1,i._trs=1,i._fixedHeight=!1,i}e.ItemElement=s;var l,y="rg-expander-expanded",v="rg-expander-collapsed",h=(l=s,oe.__extends(d,l),d.isExpander=function(t){var e=t.className;return e==y||e==v},d.prototype.resetButtons=function(t){for(var e=t.layoutManager,i=this._trs,o=this.parent._cells,n=this._getFirstCell(e),r=this._getStartCell(e)-n,s=this._getEndCell(e)-n,a=0;a<i;a++)for(var l=o[this._domIndex+a],h=r;h<=s;h++){var d=l[h];d.layout.firstColumn instanceof C.ValueColumn&&this.$_setButtons(t,d,d.cell.firstElementChild)}},d.prototype.moveCellButtons=function(t,e,i){var o=Math.min(i-e.item.index,e.rowSpan-1);if(o!=e.buttonsOffset){var n=e.rowIndex,r=n+o,s=t.getTableItemBounds(n),a=t.grid.body.buttonHeight,l=t.getTableItemBounds(r).y-s.y;l=Math.floor(l+(s.height-a)/2),e.buttons.style.top=l+"px",e.buttonsOffset=o}},d.prototype.cellRefresh=function(t,e,i,o,n){var r=t.layoutManager;this._updateDataCell(t,r,e,i,o,n)},d.prototype.clearContent=function(t,e){for(var i=this.parent,o=this._getFirstCell(t),n=this._getStartCell(t)-o,r=this._getEndCell(t)-o,s=0;s<e;s++)for(var a=i._cells[this._domIndex+s],l=n;l<=r;l++){var h=a[l],d=h.renderer2;d&&d.clearContent(),h.setBorderBottom(1)}},d.prototype._doLayoutContent=function(t){var e,i=t.grid,o=this._trs,n=i.body,r=this.parent._cells,s=this._getFirstCell(t),a=this._getStartCell(t)-s,l=this._getEndCell(t)-s,h=i.focusedIndex,d=h&&h.itemIndex==this._item.index,u=h.column,_=this._item.index;this._item instanceof St.MergedGroupFooter&&(l=Math.min(l,this._item.parent.level-1),0<=(_=(e=this._item.parent.firstDataItem).index)&&(e=null));for(var c=kt.CellIndex.temp(i,_),p=0;p<o;p++)for(var f=r[this._domIndex+p],g=a;g<=l;g++){var m=f[g],y=m.layout,v=y.firstColumn;m.focused=d&&u===v,m.mouseEntered=!1,c.layout=y;var w=e?n.getHidden(c,e):n.getCellAt(this._item,v,!1);m.visible?(m.width=t.getCellWidth(g),m.height=t.getTableRowHeightFixed(m.trow,m.rowSpan),v instanceof C.ValueColumn?this._updateDataCell(i,t,n,w,v,m):this._clearDataCell(m)):v instanceof C.ValueColumn&&this._updateDataCell(i,t,n,w,v,m,!1)}},d.prototype._getFirstCell=function(t){return t._firstCell},d.prototype._getLastCell=function(t){return t._lastCell},d.prototype._getStartCell=function(t){return t.getStartCell()},d.prototype._getEndCell=function(t){return this._item instanceof St.MergedGroupHeader?t.getStartCell()+this._item.groupLevel:t.getEndCell()},d.prototype._createRenderer=function(t,e,i,o,n){return t.delegate.createRenderer(i,o,n)},d.prototype.$_getRenderer=function(t,e,i,o,n){var r,s,a,l,h=e.valueColumn.renderer,d=i.renderer;"string"==typeof d?a=d:d&&(a=d.type,l=d),"string"==typeof h?r=h:h&&(r=h.type,s=h);var u=a||r||(o instanceof Dt.SeriesColumn?Zt.SeriesTextCellRenderer.SERIES_TYPE:xt.TextCellRenderer.TYPE);if(!n.renderer2||n.rendererChanged||n.renderer2.type!=u)return this._createRenderer(t,e,u,s,l);n.renderer2&&d&&n.renderer2.assignFrom(d)},d.prototype._renderDataCell=function(t,e,i,o,n,r){var s=n.cell,a=t.doc,l=!1,h=this.$_getRenderer(t,i,o,r,n);h&&(n.renderer2&&n.renderer2.clearAndDispose(),n.renderer2=h,l=!(n.rendererChanged=!1));var d=s.firstElementChild,u=n.renderer2;(n.heighted=this._fixedHeight)&&(d.style.maxHeight=n.height-1+"px",ne.Utils.ieTen&&(d.style.height=n.height-1+"px")),!l&&u&&u._dom!=d&&(u.clearContent(),l=!0),this.$_setButtons(t,n,d);var _=!1,c=n.merged&&t.findGroupItem(n.item,r.dataIndex);if(c&&t.rowGroup.$_isMergeExpanderVisible(c)){var p=n.expander;p||((p=n.expander=a.createElement("span")).style.position="absolute",p.style.display="inline-block",p.style.top="2px",p.style.left="2px",s.appendChild(p)),_=c.expanded,p.className=_?y:v}else n.clearExpander();var f=u.styleName;n.expander&&(f+=" "+(_?"rg-expanded-cell":"rg-collapsed-cell")),l?u.initContent(i._index,d,f):u.checkClassName(f)?(u.clearContent(),u.initContent(i._index,d,f)):u.index.assign(i._index),u.renderCell(t,i,n);var g=e._showChangeMarker&&i.isValueChanged();if(g!=n.valueChanged){if(g){var m=n.changedMarker;m||((m=n.changedMarker=a.createElement("div")).className="rg-changed-marker",m.style.position="absolute",m.style.display="block",m.style.top="0px",n.changedMarker=m),s.appendChild(m)}else n.changedMarker&&n.valueChanged&&s.removeChild(n.changedMarker);n.valueChanged=g}},d.prototype._clearDataCell=function(t){t.setClassName(""),t.setEditor(null,null),t.button=lt.CellButton.NONE,t.error=void 0,t.editable=!1,t.readonly=!0,t.setBorderBottom(1);var e=t.cell.firstElementChild;this._fixedHeight&&(e.style.maxHeight=t.height-1+"px",ne.Utils.ieTen&&(e.style.height=t.height-1+"px")),t.renderer2&&t.renderer2.clearContent(),t.valueChanged=!1},d.prototype._updateDataCell=function(t,e,i,o,n,r,s){void 0===s&&(s=!0);var a=i.getCellStyle(o,r.style.clear(),r.merged);r.setClassName(a.styleName),a.style&&r.setStyle(a.style),r.refreshFormatters(a),i.getCellFormatters(n,r,t.formatOptions),r.setEditor(a.editor,n.editor),r.button=n.button,r.error=o.error,r.errorLevel=o.errorLevel;var l=kt.CellIndex.temp(t,r.item.index,r.dataColumn);if(r.editable=t.getEditableAt(l,r.style),r.readonly=t.getReadOnlyAt(l,r.style),!r.merged&&n instanceof Dt.DataColumn&&n.layout.blanked)switch(o.getBlankState()){case lt.BlankState.HEAD:case lt.BlankState.BODY:r.setBorderBottom(0);break;case lt.BlankState.TAIL:case lt.BlankState.NONE:r.setBorderBottom(1)}else r.setBorderBottom(1);s&&this._renderDataCell(t,i,o,a,r,n)},d.prototype.$_getButtonVisible=function(t,e,i,o){if(o){var n=t.getIndex(e.item.index,e.dataColumn);return o(t.handler,n.proxy(),e.focused,e.mouseEntered)}switch(i){case lt.ButtonVisibility.ALWAYS:return!0;case lt.ButtonVisibility.HIDDEN:return!1;case lt.ButtonVisibility.VISIBLE:return e.focused;case lt.ButtonVisibility.ROWFOCUSED:return t.focusedRow==e.item.index||e.mouseEntered;case lt.ButtonVisibility.DEFAULT:default:return e.focused||e.mouseEntered}},d.prototype.$_buttonWidth=function(t,e){var i=0;if(e.button!=lt.CellButton.NONE){var o=e.layout.getDataColumn();this.$_getButtonVisible(t,e,o.buttonVisibility,o.buttonVisibleCallback)&&(i=t.body.cellButtonWidth)}return i},d.prototype.$_editButtonWidth=function(t,e){var i=0;if(!e.readonly){var o=e.layout,n=o.getDataColumn(),r=e.editorType;if(t.delegate.hasEditorButton(r,t.displayOptions.showNativeEditButton)){var s=!1;if(kt.CellIndex.equalsTo(t.focusedIndex,e.item.index,o)){var a=t.delegate.getCellEditor(r);s=!!a&&a.listing}(s||this.$_getButtonVisible(t,e,n.editButtonVisibility,null))&&(i=t.body.cellButtonWidth)}}return i},d.prototype.$_errorWidth=function(t,e){return e.error?t.body.errorIconWidth:0},d.prototype.$_setButtons=function(t,e,i){var o,n=e.cell,r=t.doc,s=t.layoutManager,a=this.$_buttonWidth(t,e),l=this.$_editButtonWidth(t,e),h=this.$_errorWidth(t,e),d=0,u=0,_=void 0;if(0<a&&u++,0<l&&u++,0<h&&u++,e.merged&&(n=(e=e.head).cell,i=e.cell.firstElementChild),0<u){(_=e.buttons)||((_=e.buttons=r.createElement("div")).className="rg-cell-buttons",_.style.position="absolute",_.style.overflow="hidden",n.appendChild(_));var c=t.body.buttonHeight,p=e.height,f=void 0;if((o=_.style).height=c+"px",o.right="0px",e.merged){var g=e.rowIndex,m=s.getTableItemBounds(g),y=void 0;y=e.contains(t.focusedIndex)?g+(t.focusedRow-e.item.index):g+Math.floor((e.rows-1)/2),f=s.getTableItemBounds(y).y-m.y,f=Math.floor(f+(m.height-c)/2),e.buttonsOffset=y-g}else f=Math.floor((p-c)/2),e.buttonsOffset=0;o.top=Math.floor(f)+"px",d=_.childElementCount}else e.buttons&&(n.removeChild(e.buttons),e.buttons=null,i.style.maxWidth="");for(var v=d;v<u;v++){var w=r.createElement("span"),C=w.style;C.position="absolute",C.display="inline-block",C.height="100%",C.top="0px",_.appendChild(w)}for(v=d;u<v;v--)_.removeChild(_.lastElementChild);var x,b=0<u?_.children:null;if((u=0)<a?(e.cellButton=b[u++],(x=e.cellButton.style).right="0px",x.width=a+"px",e.resetButtonClass(),e.buttonWidth=a):(e.cellButton=null,e.buttonWidth=0),0<l?(e.editButton=b[u++],(x=e.editButton.style).right=a+"px",x.width=l+"px",e.resetEditClass(),e.editWidth=l):(e.editButton=null,e.editWidth=0),0<h?(e.errorIcon=b[u++],(x=e.errorIcon.style).right=a+l+"px",x.width=h+"px",e.resetErrorClass(),e.errorWidth=h):(e.errorIcon=null,e.errorWidth=0),_){var I=h+a+l,E=s.getCellWidth2(e.tcol,e.colSpan);o.width=I+"px",i.style.maxWidth=E-I+"px"}else i.style.maxWidth=""},d.prototype.$_setButtonZIndex=function(t,e,i){var o=t.displayOptions.baseZindex;function n(t){i?t.zIndex=String(o+1):t.removeProperty("z-index")}e.editButton&&n(e.editButton.style),e.cellButton&&n(e.cellButton.style),e.errorIcon&&n(e.errorIcon.style)},d);function d(t,e){return void 0===e&&(e=null),l.call(this,t,e)||this}e.RowElement=h;var u,_=(u=h,oe.__extends(c,u),c.prototype._getFirstCell=function(t){return this._getStartCell(t)},c.prototype._getLastCell=function(t){return this._getEndCell(t)},c.prototype._getStartCell=function(t){return 0},c.prototype._getEndCell=function(t){return t.fixedCellCount-1},c);function c(){return null!==u&&u.apply(this,arguments)||this}e.FixedRowElement=_;var p,f=(p=h,oe.__extends(g,p),g.prototype._getFirstCell=function(t){return this._getStartCell(t)},g.prototype._getLastCell=function(t){return this._getEndCell(t)},g.prototype._getStartCell=function(t){return t.cellCount-t.rightCellCount},g.prototype._getEndCell=function(t){return t.cellCount-1},g);function g(){return null!==p&&p.apply(this,arguments)||this}e.RightRowElement=f});t(Qt);Qt.DataCellElement,Qt.ItemElement,Qt.RowElement,Qt.FixedRowElement,Qt.RightRowElement;var Jt=e(function(t,e){Object.defineProperty(e,"__esModule",{value:!0});var n,s=ne.Utils.isSafari?1:0,d="***1-da*&23%^1//+)(lu%v\\3d!#~`{``~er",a=(n=$.EventAware,oe.__extends(r,n),r.getEditorType=function(t){return"string"==typeof t?t:t?t.type:"line"},r.getEditorType2=function(t,e){return"string"==typeof e?e:e&&e.type?e.type:"string"==typeof t?t:t?t.type:"line"},r.prototype._doDispose=function(){this.unprepare(),this._editor&&this._editor.parentElement.removeChild(this._editor),this._editor=null,this._container&&this._container.parentElement.removeChild(this._container),this._container=null,this._grid=null,this._controller=null,n.prototype._doDispose.call(this)},_dp(r,"native",{get:function(){return!1}}),_dp(r,"emptyValue",{get:function(){return this._emptyValue},set:function(t){t!=this._emptyValue&&(this._emptyValue=t,this._changed())}}),_dp(r,"textCase",{get:function(){return this._textCase},set:function(t){t!=this._textCase&&(this._textCase=t,this._changed())}}),_dp(r,"datetimeFormat",{get:function(){return this._datetimeFormat},set:function(t){t!=this._datetimeFormat&&((this._datetimeFormat=t)?(this._saveDateConverter||(this._saveDateConverter=new _t.DateTimeConverter(t)),this._saveDateConverter.formatString=t,this._dateConverter=this._saveDateConverter):this._dateConverter=_t.DateTimeConverter.Default)}}),_dp(r,"todayChar",{get:function(){return this._todayChar},set:function(t){t!=this._todayChar&&(this._todayChar=t,this._changed())}}),_dp(r,"nowChar",{get:function(){return this._nowChar},set:function(t){t!=this._nowChar&&(this._nowChar=t,this._changed())}}),_dp(r,"booleanFormat",{get:function(){return this._booleanFormat},set:function(t){t!=this._booleanFormat&&((this._booleanFormat=t)?(this._saveBoolConverter||(this._saveBoolConverter=new O.BooleanConverter(t)),this._saveBoolConverter.format=t,this._boolConverter=this._saveBoolConverter):this._boolConverter=O.BooleanConverter.Default)}}),_dp(r,"editor",{get:function(){return this._editor}}),_dp(r,"visible",{get:function(){return parseInt(this._container.style.width)>s&&parseInt(this._container.style.height)>s}}),r.prototype.setVisible=function(t,e){void 0===e&&(e=!1);var i=ne.getWin(this._container),o=e?!t:this.visible;if(this._editor instanceof i.HTMLInputElement&&(t&&this._editor.value==d?this._editor.value="":t||null!=this._editor.value&&null!=this._editor.value&&""!=this._editor.value||(this._editor.value=d,this._grid.$_editFocused&&this.selectAll())),!t&&(this._container.style.width=s+"px",this._container.style.height=s+"px",ne.Utils.isMobile())){var n=this._grid;if(n){var r=n.container._containerDom;r&&r.focus()}else this._editor.blur()}t!=o&&this._doVisibleChanged(t)},r.prototype._doVisibleChanged=function(t){this.setEditorZIndex(t)},_dp(r,"readOnly",{get:function(){return this._readOnly},set:function(t){var e=ne.getWin(this._container);this._editor instanceof e.HTMLInputElement&&(this._editor.readOnly=this._readOnly=t)}}),_dp(r,"textReadOnly",{get:function(){return this._textReadOnly}}),r.prototype._setTextReadOnly=function(t){t!=this._textReadOnly&&(this._textReadOnly=t,this._changed())},_dp(r,"editing",{get:function(){return this._started}}),_dp(r,"editIndex",{get:function(){return this._editIndex}}),_dp(r,"hasButton",{get:function(){return!1}}),_dp(r,"value",{get:function(){return this._editor.value}}),_dp(r,"listing",{get:function(){return!1}}),r.prototype.applyOptions=function(t){t&&this.assignFrom(t)},r.prototype.setEditIndex=function(t){this._editIndex.assign(t)},r.prototype.setController=function(t){this._controller=t},r.prototype.prepare=function(){},r.prototype.unprepare=function(){},r.prototype.beginEdit=function(t,e){this._started||(this._started=this._doBeginEdit())&&(t&&this.clear(),e&&this.selectAll())},r.prototype.endEdit=function(){this._started&&(this._doEndEdit(),this._started=!1)},r.prototype.isEdited=function(){return!1},r.prototype.isDisabled=function(){return!this._grid||this._grid.container.disabled},r.prototype.caretToLast=function(){},r.prototype.commit=function(){this._doCommit()},r.prototype.setReadOnly=function(t){this._editor.readOnly=this._readOnly=t},r.prototype.getEditValue=function(t,e){},r.prototype.setEditValue=function(t){this._oldValue=t},r.prototype.setCellEditValue=function(t,e){!this.readOnly&&this._requestStart(e)&&(this.setEditValue(t),this._doChanged())},r.prototype.getEditText=function(){return""},r.prototype.selectAll=function(t){void 0===t&&(t=!1),this._grid.$_editFocused&&(!t&&ne.Utils.isMobile()||this._selectAll())},r.prototype.clear=function(){var t=ne.getWin(this._container);this._editor instanceof t.HTMLInputElement&&(this._editor.value="")},r.prototype.setFocus=function(){this._editor.focus({preventScroll:!0})},r.prototype.setEditorTitle=function(t){},r.prototype.setBounds=function(t,e,i,o,n){},r.prototype.setCellBounds=function(t,e,i,o){this._cellBounds.set(t,e,i,o)},r.prototype.closeList=function(t){},r.prototype.dropDownList=function(t){},r.prototype.buttonClicked=function(t){},r.prototype.isEmptyTextValue=function(){return this._editor&&this._editor.value===d},r.prototype.initOptions=function(){this._emptyValue=void 0,this.booleanFormat=null,this._todayChar=null,this._nowChar=null,this.datetimeFormat=null,this._textCase=lt.TextInputCase.DEFAULT,this._checkHangeul=!1},r.prototype.$_setEditorId=function(t){},r.prototype._changed=function(){},r.prototype.$_setController=function(t){this._controller=t},r.prototype._editField=function(){return this._grid.dataSource?this._grid.dataSource.getField(this._editIndex.dataField):null},r.prototype._isDateEditor=function(){return!1},r.prototype._requestStart=function(t){return this._started?this._started:(this.selectAll(),this._controller.onEditorStart(this))},r.prototype._valToStr=function(e){var t=this.editIndex,i="";try{if(void 0!==e||this._mask){var o=t.grid.dataSource.getField(t.dataField);if(o)switch(o.dataType){case lt.ValueType.DATETIME:e&&(i=this._dateConverter.getText(e)),this._mask&&(i=this._mask.writeBuffer(i));break;case lt.ValueType.BOOLEAN:i=this._boolConverter.toText(e);break;case lt.ValueType.NUMBER:isNaN(e)||(i=ne.Utils.toStr(e));break;case lt.ValueType.OBJECT:var n=t.column,r=t.dataRow,s=n._objectKey,a=n._objectCallback;e&&(i=a&&"function"==typeof a?a(o.orgFieldName,r,e):s&&e.hasOwnProperty(s)?e[s]:null!=e&&"object"==typeof e?JSON.stringify(e):"");break;default:i=this._mask?this._mask.writeBuffer(e):e}else i=e}}catch(t){i=e}return null===i?"":i},r.prototype._strToVal=function(t){t=ne.Utils.toStr(t);var e=this._editIndex,i=e.dataColumn&&this._textCase==lt.TextInputCase.DEFAULT?e.dataColumn.textInputCase:this._textCase;try{var o=e.grid.dataSource.getField(e.dataField);if(o){var n=o.dataType;if(n==lt.ValueType.DATETIME||t&&this._isDateEditor()&&n==lt.ValueType.TEXT){var r=n==lt.ValueType.DATETIME,s=null;return t&&t==this._nowChar&&(s=new Date),!s&&t&&t==this._todayChar&&(s=new Date).setHours(0,0,0,0),s||(this._mask&&(t=this._mask.getStripValue()),s=this._dateConverter.getDate(t)),r?!s||isNaN(s.getFullYear())?void 0:s:s?this._dateConverter.getText(s):void 0}if(n==lt.ValueType.BOOLEAN)return this._boolConverter.toBoolEx(t);if(n==lt.ValueType.NUMBER)return parseFloat(t);n==lt.ValueType.TEXT&&this._mask&&(t=this._mask.getStripValue())}return i===lt.TextInputCase.UPPER?t?t.toLocaleUpperCase():t:i===lt.TextInputCase.LOWER&&t?t.toLocaleLowerCase():t}catch(t){return}},r.prototype._dispatchKeyDown=function(t){return this._controller,this._controller.onEditorKeyDown(this,t)},r.prototype._dispatchKeyPress=function(t){return this._controller,this._controller.onEditorKeyPress(this,t)},r.prototype._dispatchKeyUp=function(t){return this._controller,this._controller.onEditorKeyUp(this,t)},r.prototype._dispatchChange=function(){this._controller.onEditorChange(this)},r.prototype._dispatchSearch=function(t){this._controller.onEditorSearch(this,t)},r.prototype._dispatchSearchCellButtonClick=function(t){return this._controller.onSearchCellButtonClick(this,t)},r.prototype._dispatchCommit=function(){this._controller.onEditorCommit(this)},r.prototype._sendToParent=function(t,e,i){void 0===e&&(e=void 0);try{var o=ne.Utils.isMac&&t.metaKey||!ne.Utils.isMac&&t.ctrlKey;if(2==e){if(this._dispatchKeyPress(t))return t.preventDefault&&(t.preventDefault(),t.stopImmediatePropagation()),!0}else if(3==e){if(this._dispatchKeyUp(t))return t.preventDefault&&(t.preventDefault(),t.stopImmediatePropagation()),!0;try{var n=this._controller._grid,r=n.editOptions;if(r.maxLengthToNextCell){var s=r.skipReadOnly,a=n.activeTool,l=this.maxLength,h=this.editIndex.clone(),d=ne.Utils.included(t.keyCode,38,33,40,34,113,9,13);if(!this._checkHangeul&&!d&&!o&&!t.altKey&&n&&n.isEditing(h)&&0<l&&!this._composing&&47<t.keyCode){var u=this._mask?this._mask.getStripValue():this._editor.value;if(u&&u.length>=l)return h.right(),s&&a.checkReadOnly(h)&&(a.skipReadOnly(h,1)||(h=this.editIndex.clone())),kt.CellIndex.areEquals(h,this.editIndex)||a.setFocused(h,!0),!0}}}catch(t){if(t instanceof It.ValidationError)throw t;return!0}}else if(this._dispatchKeyDown(t))return t.preventDefault&&(t.preventDefault(),t.stopImmediatePropagation()),!0;return!1}finally{}},r.prototype._commitListValue=function(t){this._editIndex&&this._grid._editorStarted(this,this._editIndex)&&this._grid.setCellValue(this._editIndex,t);var e=this._grid;if(e){var i=e.container._containerDom;i&&i.focus()}else this._editor.blur()},r.Unselected={},r.InvalidFormat={},r.EDITOR_CSS="rg-editor ",r.CONTAINER_CSS="rg-editor-container",r);function r(t,e){var i=n.call(this)||this;if(i._textCase=lt.TextInputCase.DEFAULT,i._readOnly=!1,i._textReadOnly=!1,i._isMobile=ne.Utils.isMobile(),i._started=!1,i._dateConverter=_t.DateTimeConverter.Default,i._boolConverter=O.BooleanConverter.Default,i._cellBounds=new ht.Rectangle,i._checkHangeul=!1,i._composing=!1,i._grid=t,i._options=t.editorOptions,i._parentElement=e,i._editor=i._createEditor(e),i._editor.className=r.EDITOR_CSS+i._getInputSelector(),i._container&&(i._container.className=r.CONTAINER_CSS),(i._editor.$_owner=i)._editIndex=t.getIndex(),i._editor){var o=t.container;o.$_addListener(i._editor,"focus",function(t){this._grid.$_setEditFocused(!0,t)}.bind(i),!1),o.$_addListener(i._editor,"focusin",function(t){this._grid.$_setEditFocused(!0,t)}.bind(i),!1),o.$_addListener(i._editor,"blur",function(t){this._grid.$_setEditFocused(!1,t)}.bind(i),!1),o.$_addListener(i._editor,"focusout",function(t){this._grid.$_setEditFocused(!1,t)}.bind(i),!1)}return i.setVisible(!1,!0),i.$_setEditorId(i._editor),i}e.CellEditor=a;var o,i=(o=re.Base,oe.__extends(l,o),l.prototype._doDispose=function(){this._definitions=null,this._tests=null,this._editor._editor&&(this._editor._editor.onclick=null),this._editor=null,o.prototype._doDispose.call(this)},_dp(l,"includedFormat",{get:function(){return this._includedFormat},set:function(t){t!=this._includedFormat&&(this._includedFormat=t,this._changed())}}),_dp(l,"placeHolder",{get:function(){return this._placeHolder},set:function(t){t!=this._placeHolder&&(this._placeHolder=t,this._changed())}}),_dp(l,"editMask",{get:function(){return this._editMask},set:function(t){t!=this._editMask&&(this._editMask=t,this._changed())}}),_dp(l,"definitions",{get:function(){return this._definitions},set:function(t){t!=this._definitions&&(this._definitions=t,this._changed())}}),_dp(l,"invalidFormatMessage",{get:function(){return this._invalidFormatMessage},set:function(t){t!=this._invalidFormatMessage&&(this._invalidFormatMessage=t,this._changed())}}),_dp(l,"showInvalidFormatMessage",{get:function(){return this._showInvalidFormatMessage},set:function(t){t!=this._showInvalidFormatMessage&&(this._showInvalidFormatMessage=t,this._changed())}}),_dp(l,"overWrite",{get:function(){return this._overwrite},set:function(t){t!=this._overwrite&&(this._overwrite=t,this._changed())}}),_dp(l,"allowEmpty",{get:function(){return this._allowEmpty},set:function(t){t!=this._allowEmpty&&(this._allowEmpty=t,this._changed())}}),_dp(l,"restrictNull",{get:function(){return this._restrictNull},set:function(t){t!=this._restrictNull&&(this._restrictNull=t,this._changed())}}),l.prototype.clickHandler=function(t){this.restrictNull&&this._moveCaret()},l.prototype.clearBuffer=function(t,e){t=0<arguments.length?t:0,e=1<arguments.length?e:this._tests.length;for(var i=t;i<e;i++)this._buffer[i]=this.$_getPlaceHolder(i),this._defBuffer[i]=""},l.prototype.writeBuffer=function(t,e){if(void 0===e&&(e=!1),t){e&&this.clearBuffer();for(var i=0,o=0,n=this._tests.length;i<n;i++)if(this._tests[i]&&this._tests[i]instanceof RegExp)for(var r=void 0;r=t[o++];)if(this._tests[i].test(r)){this._buffer[i]=r,this._defBuffer[i]=r;break}}return this._buffer&&this._buffer.join("")},l.prototype.getStripValue=function(){var t=[],e=[];if(this.allowEmpty,""==this._defBuffer.join(""))return null;if(this.includedFormat)for(var i=0,o=this._buffer.length;i<o;i++){var n=this._buffer[i];!this._tests[i]||this._tests[i].test(n)?t.push(n):n==this.$_getPlaceHolder(i)&&this._tests[i].test(" ")&&t.push(" ")}else for(i=0,o=this._buffer.length;i<o;i++)(this._tests[i]&&this._tests[i]instanceof RegExp&&this._tests[i].test(this._buffer[i])||this._tests[i]&&"function"==typeof this._tests[i])&&(0<e.length&&(t=t.concat(e),e=[]),t.push(this._buffer[i]));return t.join("")},l.prototype.setOptions=function(t){if("string"==typeof t)this.$_parseMask(t);else if(t.definitions&&this.$_parseDefinitions(t.definitions),t.placeHolder&&(this._placeHolder=t.placeHolder),t.editMask&&this.$_parseMask(t.editMask),t.includedFormat&&(this._includedFormat=t.includedFormat),t.invalidFormatMessage&&(this._invalidFormatMessage=t.invalidFormatMessage),t.showInvlidFormatMessage&&(this._showInvalidFormatMessage=t.showInvalidFormatMessage),null!=t.overWrite&&(this._overwrite=!!t.overWrite),null!=t.allowEmpty&&(this._allowEmpty=!!t.allowEmpty),void 0!==t.restrictNull&&(this._restrictNull=!!t.restrictNull),this._restrictNull){var e=this._editor._editor;e.onclick||(e.onclick=this.clickHandler.bind(this))}},l.prototype.checkValid=function(){var t=[];if(this.allowEmpty){for(var e=0,i=this._tests.length;e<i;e++)t[e]=this.$_getPlaceHolder(e);if(t.join("")===this._buffer.join(""))return!0}for(e=0,i=this._tests.length;e<i;e++){var o=this._buffer[e];if(this._tests[e]&&!this._tests[e].test(o)&&o==this.$_getPlaceHolder(e)&&!this._tests[e].test(" "))return!1}return!0},l.prototype._changed=function(){},l.prototype._moveCaret=function(t,e){for(var i=this._editor._editor,o=t=0<arguments.length?t:i.selectionStart,n=e=1<arguments.length?e:i.selectionEnd,r=t-1;0<=r;r--){if(this._tests[r]&&this._tests[r].test(this._buffer[r])){o=r+1;break}o=r}for(r=e-1;0<=r;r--){if(this._tests[r]&&this._tests[r].test(this._buffer[r])){n=r+1;break}n=r}if(o==t&&n==e)return o!=t||n!=e;for(r=o;r<=t&&!this._tests[r];r++)o++;for(r=n;r<=e&&!this._tests[r];r++)n++;return i.setSelectionRange(o,n),!0},l.prototype.$_setCaret=function(t,e){this._editor._editor.setSelectionRange(t,e)},l.prototype.$_parseDefinitions=function(t){for(var e in t)"string"==typeof t[e]&&(this._definitions[e]=new RegExp(t[e]))},l.prototype.$_parseMask=function(t){var e=this._tests=[],i=this._definitions,o=t.split("");this._editMask=t,this._buffer=[];for(var n=0,r=o.length;n<r;n++)e.push(i[o[n]]),this._buffer.push(i[o[n]]?this.$_getPlaceHolder(n):o[n])},l.prototype.$_getPlaceHolder=function(t){return this._placeHolder&&this._placeHolder.length>t?this._placeHolder[t]:!this._tests[t]&&this._editMask&&this._editMask.length>t?this._editMask[t]:"_"},l.prototype.$_seekPrev=function(t){for(;0<=--t&&!this._tests[t];);return t},l.prototype.$_seekNext=function(t){for(;++t<this._editMask.length&&!this._tests[t];);return t},l.prototype.$_shiftL=function(t,e){var i=this._editMask.length,o=this._buffer;if(0<=t)for(var n=t,r=this.$_seekNext(e);n<i;n++)if(this._tests[n]){if(!(r<i&&this._tests[n].test(o[r])))break;o[n]=o[r],this._defBuffer[n]=this._defBuffer[r],o[r]=this.$_getPlaceHolder(r),this._defBuffer[r]="",r=this.$_seekNext(r)}},l.prototype.$_shiftR=function(t){for(var e,i,o=this._editMask.length,n=this._buffer,r=t,s=this.$_getPlaceHolder(t);r<o;r++)if(this._tests[r]){if(e=this.$_seekNext(r),i=n[r],this._defBuffer[r]=s,n[r]=s,!(e<o&&this._tests[e].test(i)))break;s=i}},l.prototype.keydown=function(t){var e=this._editor.editor;if(!e.readOnly){var i=t.which||t.keyCode,o=e.selectionStart,n=e.selectionEnd;if(46===i||8===i)o==n&&(o=46!==i?this.$_seekPrev(o):n=this.$_seekNext(o-1),n=46===i?this.$_seekNext(n):n),this.clearBuffer(o,n),this._overwrite||this.$_shiftL(o,n-1),e.value=this.writeBuffer(),this.$_setCaret(Math.max(0,o),Math.max(0,o));else if(39===i||35===i)return this._moveCaret();this._pStart=e.selectionStart}},l.prototype.keyPress=function(t){var e=this._editor.editor;if(!e.readOnly){this.restrictNull&&this._moveCaret();var i,o=e.selectionStart,n=e.selectionEnd,r=t.which||t.keyCode;this.clearBuffer(o,n),o!==n&&this.$_shiftL(o,n-1);var s=this.$_seekNext(o-1);this._editMask&&this._editMask.length>s&&this._tests[s]&&this._tests[s].test(i=String.fromCharCode(r))&&(this._overwrite||this.$_shiftR(o),this._buffer[s]=i,this._defBuffer[s]=i,e.value=this.writeBuffer(),s=this.$_seekNext(s),this.$_setCaret(Math.max(0,s),Math.max(0,s))),this._pStart=e.selectionStart}},l.prototype.input=function(t){var e=this._editor.editor;if(!e.readOnly){var i=e.value;return/[ㄱ-ㅎㅏ-ㅣ가-힝]/.test(i)?(e.value=e.value.replace(/[ㄱ-ㅎㅏ-ㅣ가-힝]/g,""),void(null!=this._pStart&&e.setSelectionRange(this._pStart,this._pStart))):void 0}},l);function l(t,e){var i=o.call(this)||this;return i._includedFormat=!1,i._showInvalidFormatMessage=!0,i._overwrite=!1,i._allowEmpty=!1,i._restrictNull=!1,i._definitions={9:new RegExp("[0-9 ]"),0:new RegExp("[0-9]"),a:new RegExp("[A-Za-z]"),"*":new RegExp("[A-Za-z0-9]")},i._tests=null,i._defBuffer=[],i._editor=t,e&&i.setOptions(e),i}e.EditMask=i;var h,u=(h=a,oe.__extends(_,h),_dp(_,"maxLength",{get:function(){return this._maxLength},set:function(t){t!=this._maxLength&&(this._maxLength=t,this._changed())}}),_dp(_,"fontSize",{get:function(){return this._fontSize},set:function(t){this._fontSize=isNaN(t)?0:Math.max(0,t)}}),_.prototype.initOptions=function(){h.prototype.initOptions.call(this),this._maxLength=0},_dp(_,"readonly",{set:function(t){this._editor.readOnly=this._readOnly=t}}),_.prototype.isEdited=function(){return this._modified},_.prototype.setVisible=function(t,e){h.prototype.setVisible.call(this,t,e);var i=this._container.style;if(t?(i.border="",i.boxShadow=""):t||(i.border="none",i.boxShadow="none"),ne.Utils.isWinSafari){try{this._editor.style.width=this._container.getBoundingClientRect().width+"px",this._container.style.cssText=this._container.style.cssText.replace(/border-width: initial; border-color: initial; /g,"")}catch(t){}setTimeout(function(){this._editor.style.width="100%"}.bind(this),0)}},_.prototype.setEditIndex=function(t){h.prototype.setEditIndex.call(this,t);var e=this._editor.style;ne.Utils.isMobile()?e.fontSize=Math.max(this.fontSize,16)+"px":0<this.fontSize&&(e.fontSize=this.fontSize+"px");var i=t.valueColumn;if(i)switch(this._textCase==lt.TextInputCase.DEFAULT?i.textInputCase:this._textCase){case lt.TextInputCase.LOWER:this._editor.style.textTransform="lowercase";break;case lt.TextInputCase.UPPER:this._editor.style.textTransform="uppercase";break;default:this._editor.style.textTransform="none"}},_.prototype.getEditText=function(){return this._editor.value},_.prototype.setEditValue=function(t){h.prototype.setEditValue.call(this,t),this._editor.value=this._valToStr(t)},_.prototype.getEditValue=function(e,t){void 0===e&&(e=!0);var i=this._editField(),o=this._emptyValue;try{var n=i.dataType,r=this._editor.value;if(n==lt.ValueType.TEXT)r||void 0===this._emptyValue||(r=this._emptyValue),void 0===(o=this._strToVal(r))&&(o="");else if(ne.Utils.isWhiteSpace(r))if(void 0!==this._emptyValue)o=this._strToVal(this._emptyValue);else switch(n){case lt.ValueType.NUMBER:isNaN(this._oldValue)&&(o=NaN);break;case lt.ValueType.DATETIME:null===this._oldValue&&(o=null);break;case lt.ValueType.BOOLEAN:}else o=this._strToVal(r);if(o===a.InvalidFormat)return o;o=i.readValue(o)}catch(t){if(e)throw t;o=this._emptyValue}return o},_.prototype._selectAll=function(){this._editor.select()},_.prototype._setSelectionRange=function(t,e){try{this._editor.setSelectionRange(0,0)}catch(t){}},_.prototype._doBeginEdit=function(){if(this._modified=!1,this.visible)return this._editor.value||this._setSelectionRange(0,0),!0},_.prototype._doEndEdit=function(){this._modified=!1},_.prototype._doCommit=function(){},_);function _(){var t=null!==h&&h.apply(this,arguments)||this;return t._maxLength=0,t._fontSize=0,t._modified=!1,t}e.TextCellEditorBase=u;var c,p=(c=u,oe.__extends(f,c),f.prototype._doDispose=function(){this._editor.$_owner=null,this._editor.onkeydown=null,this._editor.onkeyup=null,this._editor.onkeypress=null,this._editor.oninput=null,this._editor.onpaste=null,this._editor.oncopy=null,c.prototype._doDispose.call(this)},_dp(f,"mask",{get:function(){return this._mask}}),_dp(f,"text",{get:function(){return this._editor.value},set:function(t){!this._editor||t==this._editor.value&&t==this._controller.getData(this._editIndex)||(this._editor.value=t,this._doChanged())}}),f.prototype.setMask=function(t){this._mask=null,t&&(this._mask=new i(this,t))},f.prototype.setAlignment=function(t){this._container.style.textAlign="left"},f.prototype._createContainer=function(t){var e=t.createElement("div"),i=e.style;return e.spellcheck=!1,e.setAttribute("aria-hidden","true"),i.position="absolute",i.width="0px",i.height="0px",i.padding="0px",i.margin="0px",e},f.prototype._createEditor=function(t){var e=ne.getDoc(t);this._container=this._createContainer(e),t.appendChild(this._container);var i=e.createElement("input"),o=i.style;i.setAttribute("aria-hidden","true"),i.autocomplete="off",o.position="absolute",o.boxSizing="border-box",o.margin="0px",o.padding="0px 2px",o.wordWrap="normal",o.overflow="hidden",o.resize="none",o.border="none",o.outline="none",o.left="0px",o.top="0px",o.width="100%",o.height="100%",o["-webkit-user-modify"]="read-write-plaintext-only",o["white-space"]="pre",o["-webkit-transform"]="translateZ(0)",i.tabIndex=-1,i.onkeydown=this._keyDownHandler.bind(this),i.onkeyup=this._keyUpHandler.bind(this),i.onkeypress=this._keyPressHandler.bind(this),i.oninput=this._inputHandler.bind(this),i.onpaste=this._pasteHandler.bind(this),i.oncopy=this._copyHandler.bind(this);var n=this._grid.container;return n.$_addListener(i,"compositionstart",this._compositionstartHandler.bind(this),!1),n.$_addListener(i,"compositionupdate",this._compositionupdateHandler.bind(this),!1),n.$_addListener(i,"compositionend",this._compositionendHandler.bind(this),!1),n.$_addListener(i,"text",this._textHandler.bind(this),!1),this._container.appendChild(i),this._defMaxLength=0<i.maxLength?i.maxLength:1e6,i},f.prototype.initOptions=function(){c.prototype.initOptions.call(this),this._editor.readOnly=this._readOnly=!1,this._mask&&(this._mask.dispose(),this._mask=null)},f.prototype.applyOptions=function(t){c.prototype.applyOptions.call(this,t),t.mask&&this.setMask(t.mask)},f.prototype.caretToLast=function(){var t=ne.Utils.toStr(this._editor.value).length;this._setSelectionRange(t,t)},f.prototype.setEditIndex=function(t){c.prototype.setEditIndex.call(this,t),this._editor.maxLength=0<this.maxLength?this.maxLength:this._defMaxLength},f.prototype.setEditorZIndex=function(t){var e=this._editor.style,i=this._grid.displayOptions.baseZindex;t?e.zIndex=String(i+0):e.removeProperty("z-index")},f.prototype._doChanged=function(){this._requestStart(),this._started&&!this._editor.readOnly&&(this._modified=!0,this._dispatchChange())},f.prototype.setBounds=function(t,e,i,o,n){ne.Utils.setBounds(this._container,t,e,i,o),0==i||0==o?this._editor.style.width="100%":0<n&&(this._editor.style.height=Math.round(o-4)+"px",this._editor.style.width=n+"px")},f.prototype._keyDownHandler=function(t){if(!this.isDisabled()){var e=this._editor,i=t.keyCode;if((ne.Utils.isIE||ne.Utils.isEdge)&&!this.visible&&t.ctrlKey&&90==i)return!1;if(ne.Utils.isIE&&t.ctrlKey&&86==t.keyCode&&e.readOnly)return t.preventDefault(),this._pasteHandler(t),!1;switch(this._inputValue=e.value,i){case 8:case 46:this._sendToParent(t)||(!this.visible&&this._requestStart()?!e.readOnly&&this._controller._getData(this._editIndex)&&(this._mask?(t.preventDefault(),t.stopImmediatePropagation(),this._mask.keydown(t),this._doChanged()):this.text=""):this._mask&&(t.preventDefault(),t.stopImmediatePropagation(),this._mask.keydown(t),this._doChanged()),8===i&&e.readOnly&&(t.preventDefault(),t.stopImmediatePropagation()));break;case 9:return!this._sendToParent(t);case 37:if(!this.visible||0==e.selectionEnd&&e.selectionEnd==e.selectionStart)return!this._sendToParent(t);if(e.readOnly&&ne.Utils.isChrome)return!this._sendToParent(t);t.stopImmediatePropagation();break;case 39:if(!this.visible||e.selectionEnd==e.value.length&&e.selectionEnd==e.selectionStart)return!this._sendToParent(t);if(e.readOnly&&ne.Utils.isChrome)return!this._sendToParent(t);if(!(t.altKey||t.ctrlKey||t.shiftKey)&&this._mask&&this._mask.restrictNull){var o=e.selectionStart;this._mask._moveCaret(o+1,o+1)&&(t.preventDefault(),t.stopImmediatePropagation())}t.stopImmediatePropagation();break;case 36:if(!this.visible)return!this._sendToParent(t);t.stopImmediatePropagation();break;case 35:if(!this.visible)return!this._sendToParent(t);if(this._mask&&this._mask.restrictNull){var n=e.value?e.value.length-1:0;this._mask._moveCaret(n,n)&&(t.preventDefault(),t.stopImmediatePropagation())}t.stopImmediatePropagation();break;case 32:if(!this.visible)return!this._sendToParent(t);break;case 38:case 33:case 40:case 34:case 13:case 27:case 113:case 45:return t.preventDefault(),t.stopImmediatePropagation(),!this._sendToParent(t);case 229:this._sendToParent(t);break;default:return!this._sendToParent(t,null,!0)}return ne.Utils.isFirefox?!t.ctrlKey&&!t.altKey&&(0==i||32<=i)&&(i<112||130<i)&&this._requestStart():ne.Utils.isIE,!0}},f.prototype._keyUpHandler=function(t){if(!this.isDisabled()){var e=t.keyCode;switch(8!=e&&46!=e||ne.Utils.ieOld&&this.visible&&!this._editor.readOnly&&this._editor.value!=this._inputValue&&this._doChanged(),t.keyCode){case 37:case 39:case 36:case 35:case 32:this.visible||this._sendToParent(t,3);break;default:this._sendToParent(t,3)}}},f.prototype._keyPressHandler=function(t){if(!this.isDisabled()){var e=t.which||t.keyCode;this._sendToParent(t,2),ne.Utils.isFirefox?t.ctrlKey||t.altKey||!(0==e||32<=e)||(this._requestStart()?this._mask&&(this._mask._pStart=t.target.selectionStart,this._mask.keyPress(t),this._doChanged(),t.preventDefault()):t.preventDefault()):ne.Utils.isMac&&t.metaKey&&(122===e||121===e)?t.preventDefault():32<=e&&(this._requestStart()?this._mask&&(this._mask._pStart=t.target.selectionStart,this._mask.keyPress(t),this._doChanged(),t.preventDefault()):t.preventDefault())}},f.prototype._textHandler=function(){this.isDisabled()||this._requestStart()},f.prototype._compositionstartHandler=function(t){this.isDisabled()||(this._composing=!0,this._requestStart(),this._started&&!this._editor.readOnly&&(this._modified=!0,this._dispatchChange(),this._checkHangeul=!0))},f.prototype._compositionendHandler=function(){this._composing=!1},f.prototype._compositionupdateHandler=function(){this._composing=!0},f.prototype._changeHandler=function(t){},f.prototype._inputHandler=function(t){if(!this.isDisabled()){if(ne.Utils.ieTen){if(this._editor.value==d)return;if((null==this._inputValue||null==this._inputValue?"":this._inputValue)===this._editor.value)return}"historyUndo"!==t.inputType&&"historyRedo"!==t.inputType&&(this._mask&&this._mask.input(t),this._doChanged())}},f.prototype._pasteHandler=function(t){if(!this.isDisabled())if(this.visible)this._doChanged();else{t.preventDefault();var e=this._grid.pasteOptions;try{var i=void 0,o=(t.originalEvent||t).clipboardData;null!=(i=o?o.getData("text/plain"):window.clipboardData.getData("text"))&&this._grid.pasteFromClipboard(i,t)}catch(t){if(t instanceof It.ValidationError){if(e.throwValidationError)throw t}else if(t instanceof It.AbortError)alert(t.message);else if(t)throw t}}},f.prototype._copyHandler=function(t){if(!this.isDisabled()&&!this.editing){var e=this._grid.copyToClipboard(t,null);return null!=e&&(window.clipboardData?window.clipboardData.setData("Text",e):t.clipboardData.setData("text/plain",e)),t.preventDefault()}},f.prototype._getInputSelector=function(){return null},f);function f(){return null!==c&&c.apply(this,arguments)||this}e.TextCellEditor=p;var g,m=(g=p,oe.__extends(y,g),y.prototype._createEditor=function(t){var e=g.prototype._createEditor.call(this,t);return e.tabIndex=ne.Utils.isMobile()?-1:0,e},y.prototype._getInputSelector=function(){return y.INPUT_CSS},y.INPUT_CSS="rg-text-editor",y);function y(t,e){return g.call(this,t,e)||this}e.LineCellEditor=m;var v,w=(v=p,oe.__extends(C,v),C.prototype._createEditor=function(t){var e=v.prototype._createEditor.call(this,t);return e.setAttribute("type","password"),e.tabIndex=ne.Utils.isMobile()?-1:0,e},C.prototype._getInputSelector=function(){return C.INPUT_CSS},C.INPUT_CSS="rg-password-editor",C);function C(t,e){return v.call(this,t,e)||this}e.PasswordCellEditor=w;var x,b=(x=u,oe.__extends(I,x),I.prototype._doDispose=function(){this._editor.onkeydown=null,this._editor.onkeyup=null,this._editor.onkeypress=null,this._editor.oninput=null,this._editor.onpaste=null,this._editor.oncopy=null,x.prototype._doDispose.call(this)},_dp(I,"minHeight",{get:function(){return this._minHeight},set:function(t){t!=this._minHeight&&(this._minHeight=t,this._changed())}}),_dp(I,"altEnterNewLine",{get:function(){return this._altEnterNewLine},set:function(t){t!=this._altEnterNewLine&&(this._altEnterNewLine=t,this._changed())}}),_dp(I,"text",{get:function(){return this._editor.value}}),I.prototype.setAlignment=function(t){this._container.style.textAlign="left"},I.prototype.initOptions=function(){x.prototype.initOptions.call(this),this._minHeight=0,this.setReadOnly(!1)},I.prototype.setEditIndex=function(t){x.prototype.setEditIndex.call(this,t),this._editor.maxLength=0<this.maxLength?this.maxLength:2e9},I.prototype.setCellEditValue=function(t){x.prototype.setCellEditValue.call(this,t,!1)},I.prototype.setEditorZIndex=function(t){var e=this._editor.style,i=this._grid.displayOptions.baseZindex;t?e.zIndex=String(i+0):e.removeProperty("z-index")},I.prototype._doChanged=function(){this._requestStart(),this._started&&!this._editor.readOnly&&(this._modified=!0,this._dispatchChange(),this.$_resetBounds())},I.prototype.$_resetBounds=function(){var t=ne.Utils.getClientRect(this._container),e=t.cx,i=t.cy,o=t.width,n=Math.round(t.height),r=this._editor.value==d;!r&&this._editor.scrollWidth>o&&(o=this._editor.scrollWidth+6),!r&&this._editor.scrollHeight>n&&(n=this._editor.scrollHeight+6);var s=isNaN(this._minHeight)?0:this._minHeight;0<s&&(n=Math.max(n,s)),t=ne.Utils.getClientRect(this._parentElement),o=Math.min(t.width,o),n=Math.min(t.height,n),e+o>t.width&&(e=t.width-o),i+n>t.height&&(i=t.height-n),ne.Utils.setBounds(this._container,Math.max(e,0),Math.max(i,0),o,n)},I.prototype.$_createContainer=function(t){var e=t.createElement("div"),i=e.style;return e.spellcheck=!1,e.setAttribute("aria-hidden","true"),i.position="absolute",i.width="0px",i.height="0px",i.padding="0px",i.margin="0px",e},I.prototype._createEditor=function(t){var e=ne.getDoc(t);this._container=this.$_createContainer(e),t.appendChild(this._container);var i=e.createElement("textarea"),o=i.style;i.autocomplete="off",i.setAttribute("aria-hidden","true"),o.position="absolute",o.margin="0px",o.padding="0px",o.wordWrap="normal",o.overflow="hidden",o.resize="none",o.border="none",o.outline="none",o.left="0px",o.top="0px",o.width="100%",o.height="100%",o["-webkit-user-modify"]="read-write-plaintext-only",o["white-space"]="pre",o["-webkit-transform"]="translateZ(0)",i.tabIndex=-1,i.onkeydown=this._keyDownHandler.bind(this),i.onkeyup=this._keyUpHandler.bind(this),i.onkeypress=this._keyPressHandler.bind(this),i.oninput=this._inputHandler.bind(this),i.onpaste=this._pasteHandler.bind(this),i.oncopy=this._copyHandler.bind(this);var n=this._grid.container;return n.$_addListener(i,"compositionstart",this._compositionstartHandler.bind(this),!1),n.$_addListener(i,"compositionupdate",this._compositionupdateHandler.bind(this),!1),n.$_addListener(i,"compositionend",this._compositionendHandler.bind(this),!1),n.$_addListener(i,"text",this._textHandler.bind(this),!1),this._container.appendChild(i),i},I.prototype.setBounds=function(t,e,i,o){ne.Utils.setBounds(this._container,t,e,i,o),t>ne.Utils.$_INVISIBLE_EDIT_BOUNDS.x&&this.$_resetBounds()},I.prototype._getInputSelector=function(){return I.INPUT_CSS},I.prototype._textHandler=function(){this.isDisabled()||this._requestStart()},I.prototype._compositionstartHandler=function(t){this.isDisabled()||(this._composing=!0,this._requestStart())},I.prototype._compositionendHandler=function(){this._composing=!1},I.prototype._compositionupdateHandler=function(){this._composing=!0},I.prototype._keyDownHandler=function(t){if(!this.isDisabled()){var e=this._editor,i=t.keyCode;if((ne.Utils.isIE||ne.Utils.isEdge)&&!this.visible&&t.ctrlKey&&90==i)return!1;switch(i){case 8:case 46:this._sendToParent(t)||!this.visible&&this._requestStart()&&(t.preventDefault(),t.stopImmediatePropagation(),!this._editor.readOnly&&this._controller.getData(this._editIndex)&&(this._editor.value="",this._modified=!0,this._dispatchChange()));break;case 9:return!this._sendToParent(t);case 37:if(!this.visible||0==e.selectionEnd&&e.selectionEnd==e.selectionStart)return!this._sendToParent(t);break;case 39:if(!this.visible||e.selectionEnd==e.value.length&&e.selectionEnd==e.selectionStart)return!this._sendToParent(t);break;case 36:case 35:if(!this.visible)return!this._sendToParent(t);t.stopImmediatePropagation();break;case 38:case 33:if(!this.visible)return!this._sendToParent(t);t.stopImmediatePropagation();break;case 40:case 34:if(!this.visible)return!this._sendToParent(t);t.stopImmediatePropagation();break;case 32:if(!this.visible)return!this._sendToParent(t);break;case 13:if(this.altEnterNewLine){if(!(t.altKey&&this.editing||t.shiftKey))return!this._sendToParent(t)}else if(!(t.ctrlKey&&this.editing||t.shiftKey))return!this._sendToParent(t);if((this.altEnterNewLine&&t.altKey||!this.altEnterNewLine&&t.ctrlKey)&&!t.shiftKey){t.preventDefault(),t.stopImmediatePropagation();var o=e.value===d?"":e.value;if(o){var n=e.selectionEnd;o=o.substring(0,n)+"\r\n"+o.substring(n),e.value=o,e.setSelectionRange(n+1,n+1),this._doChanged()}}break;case 27:case 113:case 45:return t.preventDefault(),t.stopImmediatePropagation(),!this._sendToParent(t);case 229:break;default:return this._sendToParent(t,null,!0),!0}return t.keyCode,!0}},I.prototype._keyUpHandler=function(t){if(!this.isDisabled()){var e=t.keyCode;switch(8!=e&&46!=e||ne.Utils.ieOld&&this.visible&&!this._editor.readOnly&&this._editor.value!=this._inputValue&&this._doChanged(),t.keyCode){case 37:case 39:case 36:case 35:case 32:this.visible||this._sendToParent(t,3);break;default:this._sendToParent(t,3)}}},I.prototype._keyPressHandler=function(t){this.isDisabled()||32<=t.keyCode&&(this._requestStart()||t.preventDefault())},I.prototype._inputHandler=function(t){this.isDisabled()||"historyUndo"!==t.inputType&&"historyRedo"!==t.inputType&&this._doChanged()},I.prototype._pasteHandler=function(t){if(!this.isDisabled())if(this.visible)this._doChanged();else{t.preventDefault();var e=this._grid.pasteOptions;try{var i=void 0,o=(t.originalEvent||t).clipboardData;null!=(i=o?o.getData("text/plain"):window.clipboardData.getData("text"))&&this._grid.pasteFromClipboard(i,t)}catch(t){if(t instanceof It.ValidationError){if(e.throwValidationError)throw t}else if(t instanceof It.AbortError)alert(t.message);else if(t)throw t}}},I.prototype._copyHandler=function(t){if(!this.isDisabled()&&!this.editing){var e=this._grid.copyToClipboard(t,null);return null!=e&&(window.clipboardData?window.clipboardData.setData("Text",e):t.clipboardData.setData("text/plain",e)),t.preventDefault()}},I.INPUT_CSS="rg-multiline-editor",I);function I(t,e){var i=x.call(this,t,e)||this;return i._minHeight=0,i._altEnterNewLine=!1,i}e.MultiLineCellEditor=b;var E,S=/[ㄱ-ㅎㅏ-ㅣ가-힝]/g,R=(E=p,oe.__extends(D,E),_dp(D,"positiveOnly",{get:function(){return this._positiveOnly},set:function(t){t!=this._positiveOnly&&(this._positiveOnly=t,this.$_resetRistrict())}}),_dp(D,"integerOnly",{get:function(){return this._integerOnly},set:function(t){t!=this._integerOnly&&(this._integerOnly=t,this.$_resetRistrict())}}),_dp(D,"editFormat",{get:function(){return this._editFormat},set:function(t){if(t!=this._editFormat)if(this._editFormat=t){var e=this._decimalFormatter=new W.DecimalFormatter(t);e&&(this._decSep=e.separator?e.separator:".",this._groupSep=e.groupSep?e.groupSep:",",this._decLen=Math.max(e.minDigits,e.maxDigits))}else this._decimalFormatter=void 0,this._decSep=".",this._groupSep=",",this._decLen=void 0}}),_dp(D,"multipleChar",{get:function(){return this._multipleChar},set:function(t){t!=this._multipleChar&&(this._multipleChar=t,this._changed())}}),_dp(D,"addString",{get:function(){return this._addString},set:function(t){t!=this._addString&&(this._addString=t,this._changed())}}),_dp(D,"maxLengthExceptComma",{get:function(){return this._maxLengthExceptComma},set:function(t){t!=this._maxLengthExceptComma&&(this._maxLengthExceptComma=t,this._changed())}}),_dp(D,"maxIntegerLength",{get:function(){return this._maxIntegerLength},set:function(t){t!=this._maxIntegerLength&&(this._maxIntegerLength=t,this._changed())}}),_dp(D,"blankWhenSpace",{get:function(){return this._blankWhenSpace},set:function(t){t!=this._blankWhenSpace&&(this._blankWhenSpace=t,this._changed())}}),D.prototype.setMask=function(t){this._mask=null},D.prototype.initOptions=function(){E.prototype.initOptions.call(this),this._decSep=".",this._groupSep=",",this.editFormat=void 0,this.positiveOnly=!1,this.integerOnly=!1,this.blankWhenSpace=!1},D.prototype.setEditIndex=function(t){E.prototype.setEditIndex.call(this,t),this._editor.maxLength=this.maxLengthExceptComma||this.maxLength<=0?this._defMaxLength:this.maxLength},D.prototype._inputHandler=function(t){this._editFormat&&(t.target,this.$_editFormatting(t)),E.prototype._inputHandler.call(this,t)},D.prototype._keyPressHandler=function(t){if(!ne.Utils.isFirefox||!t.ctrlKey&&0!==t.charCode){var e=!0,i=String.fromCharCode(t.keyCode||t.charCode);(!this._regx.test(i)||t.target.value&&0<=t.target.value.indexOf(this._decSep)&&i==this._decSep)&&(this._multipleChar&&i===this._multipleChar||(e=!1,this.blankWhenSpace&&" "===i||t.preventDefault()));var o=t.target.selectionStart,n=t.target.selectionEnd,r=t.target.value,s=new RegExp("\\"+this._groupSep,"g"),a=r?r.split(""):[];if(a.splice(o,n-o,i===this._multipleChar?this._addString:i),a=a.join("").replace(s,""),0<this.maxLength&&e&&this.maxLengthExceptComma&&r&&r!==d&&a.length>this.maxLength&&t.preventDefault(),0<this._maxIntegerLength&&i!==this._decSep){var l=Math.floor(this.$_strToNum(a));if(!isNaN(l)){var h=Math.abs(l).toString().length;this._maxIntegerLength<h&&t.preventDefault()}}this._isMultiple=i==this._multipleChar,E.prototype._keyPressHandler.call(this,t)}else E.prototype._keyPressHandler.call(this,t)},D.prototype._keyDownHandler=function(t){if(!this.isDisabled()){var e=t.keyCode||t.charCode;if(this._isMultiple=!1,(8===e||46===e)&&this.editing&&this._editFormat){var i=t.target,o=i.value,n=o.length,r=o&&o.split(""),s=i.selectionStart,a=i.selectionEnd;if(s!==a)return E.prototype._keyDownHandler.call(this,t);var l=o[8===e?s-1:s];if(!(l!==this._groupSep&&l!==this._decSep||l===this._decSep&&s===(8===e?o.length:o.length-1))){r.splice(8===e?s-2:s+1,1),i.value=r.join(""),this.$_editFormatting(t);var h=i.value,d=n-(8===e?h.length:n);i.setSelectionRange(s-d,a-d),this._doChanged(),t.preventDefault()}}return E.prototype._keyDownHandler.call(this,t)}},D.prototype._dispatchChange=function(){this.visible&&(this.$_resetValue(),E.prototype._dispatchChange.call(this))},D.prototype.setEditValue=function(t){var e=parseFloat(t);isNaN(e)?this._editor.value="":this._editFormat&&"number"==typeof e?this._editor.value=this.$_formatNum(e,this._decimalFormatter.minDigits,this._decimalFormatter._maxDigits):this._editor.value=e},D.prototype.getEditValue=function(e,t){void 0===e&&(e=!0),this.$_resetValue();var i=this._editField().nullValue;try{var o=this._editor.value;if(o=o&&o.trim()){var n=new RegExp("\\"+this._groupSep,"g"),r=new RegExp("[\\"+this._decSep+"]+","g");o=(o=(o=(o=(o=(o=o.replace(n,"")).replace(r,".")).replace(/\++/g,"+")).replace(/\-+/g,"-")).replace(/\+\-/g,"+")).replace(/\-\+/g,"-")}i=o?parseFloat(o):void 0}catch(t){if(e)throw t}return i},D.prototype.setCellEditValue=function(t){!this.readOnly&&this._requestStart()&&("string"!=typeof t&&"number"!=typeof t||(t=this.$_strToNum(t),this.setEditValue(t),this._doChanged()))},D.prototype._getInputSelector=function(){return D.INPUT_CSS},D.prototype.$_strToNum=function(t){t=""+t;var e=new RegExp("\\"+this._decSep,"g"),i=new RegExp("\\"+this._groupSep,"g"),o="-"===t[0];t=t.replace(i,"").replace(e,".").replace(/\+/g,"");var n=parseFloat(t);return isNaN(n)?NaN:o?-Math.abs(n):n},D.prototype.$_formatNum=function(t,e,i){var o=t,n=o<0||0==o&&1/o==-1/0?"-":"",r=Math.max(e,i);r=isNaN(r)?2:r;var s=parseInt(o=Math.abs(+o||0).toFixed(r))+"",a=3<s.length?s.length%3:0;if(0<=o.indexOf(".")){for(var l=o.split(".")[1].split("");0<l.length&&"0"===l[l.length-1]&&l.length>e;)l.splice(l.length-1,1);o=l.join(""),r=l.length}return n+(a?s.substr(0,a)+this._groupSep:"")+s.substr(a).replace(/(\d{3})(?=\d)/g,"$1"+this._groupSep)+(r?this._decSep+o:"")},D.prototype.$_editFormatting=function(t){this._editor;var e=t.target.value,i=e&&e[e.length-1]==this._decSep,o=t.target.selectionStart,n=t.target.selectionEnd;e=this._isMultiple&&this._addString?e.replace(new RegExp("\\"+this._multipleChar,"gi"),this._addString):e,this._isMultiple&&this._addString&&(o+=this._addString.length,n+=this._addString.length);var r=e.split(this._decSep),s=0;1<r.length&&(r.length=2,r[1]=r[1].substr(0,this._decimalFormatter._maxDigits),s=r[1].length,e=r.join(this._decSep)),s=2==r.length?Math.min(r[1].length,null!=this._decLen?this._decLen:99):0;var a=this.$_strToNum(e);if(!isNaN(a)){if(0<this.maxLength||0<this.maxIntegerLength){var l=String(a).split(".");0<this.maxIntegerLength&&(l[0]=l[0].substr(0,this.maxIntegerLength));var h=l.join(".");0<this.maxLength&&(h=h.substr(0,this.maxLength)),a=parseFloat(h)}e=this.$_formatNum(a,s,this._decimalFormatter.maxDigits);var d=(e=i&&this._decLen&&e.indexOf(this._decSep)<0?e+this._decSep:e).length,u=t.target.value.length;1==Math.abs(d-u)&&(u<d?(o++,n++):e.indexOf(this._decSep)>=o&&(o--,n--)),t.target.value=e,t.target.setSelectionRange(o,n)}},D.prototype.$_resetValue=function(){if(this.visible){var t=this._editor,e=t.selectionStart,i=t.selectionEnd,o=t.value?t.value.length:0;t.value=t.value.replace(S,"").trim(),(t.value?t.value.length:0)==o?t.setSelectionRange(e,i):t.setSelectionRange(i,i)}},D.prototype.$_resetRistrict=function(){this._positiveOnly&&this._integerOnly?this._regx=this._regxPosInt:this._positiveOnly?this._regx=this._regxPos:this._integerOnly?this._regx=this._regxInt:this._regx=this._regxAll},D.INPUT_CSS="rg-number-editor",D);function D(t,e){var i=E.call(this,t,e)||this;return i._positiveOnly=!1,i._integerOnly=!1,i._addString="000",i._maxLengthExceptComma=!1,i._maxIntegerLength=0,i._blankWhenSpace=!1,i._regxAll=/[0-9]|,|\.|\-|\+|e|E/,i._regxPos=/[0-9]|,|\.|\+|e|E/,i._regxInt=/[0-9]|,|\+|\-/,i._regxPosInt=/[0-9]|,|\+/,i._regx=i._regxAll,i._decLen=void 0,i._decimalFormatter=void 0,i._isMultiple=!1,i._decSep=".",i._groupSep=",",i._editor.style["ime-mode"]="disabled",i._editor.style["-webkit-ime-mode"]="disabled",i._editor.style["-moz-ime-mode"]="disabled",i._editor.style["-ms-ime-mode"]="disabled",i}e.NumberCellEditor=R;var T,k=(T=Ut.VisualElement,oe.__extends(M,T),M.prototype._getCssSelector=function(){return"rg-editor-marquee"},M.prototype._initDom=function(t){T.prototype._initDom.call(this,t)},M.prototype._doDraw=function(t){},M.prototype.spread=function(){var t=this._dom,e=t.style,i=t.parentElement.getBoundingClientRect();e.left="0",e.top="0",e.width=i.width+"px",e.height=i.height+"px",this._setClassName(t)},M);function M(){return null!==T&&T.apply(this,arguments)||this}e.EditorMarquee=k;var L,F=(L=p,oe.__extends(V,L),V.prototype._showMarquee=function(t){this._marquee&&(t.appendChild(this._marquee._dom),this._marquee.spread())},V.prototype._centerPopup=function(t,e){var i=e.getBoundingClientRect(),o=t.getBoundingClientRect();t.appendChild(e),e.style.left=(o.width-i.width)/2+"px",e.style.top=(o.height-i.height)/2+"px"},V.prototype._closeMarquee=function(){this._marquee&&ne.Utils.detach(this._marquee._dom)},V.prototype._isMarquee=function(t){return this._marquee&&t===this._marquee._dom},V);function V(t,e){var i=L.call(this,t,e)||this;if(i._isMobile){var o=ne.getDoc(e);i._marquee=new k(o)}return i}e.PopupCellEditor=F});t(Jt);Jt.CellEditor,Jt.EditMask,Jt.TextCellEditorBase,Jt.TextCellEditor,Jt.LineCellEditor,Jt.PasswordCellEditor,Jt.MultiLineCellEditor,Jt.NumberCellEditor,Jt.EditorMarquee,Jt.PopupCellEditor;var te=e(function(t,e){Object.defineProperty(e,"__esModule",{value:!0});var o="rowspan",n="colspan",C=(i.prototype.dispose=function(){this.renderer2=this.renderer2&&this.renderer2.clearAndDispose(),this.item=null,this.cell=null,this.buttons=this.cellButton=this.editButton=this.errorIcon=null,this.changedMarker=this.expander=null,this.layout=null},_dp(i,"dataColumn",{get:function(){return this.layout.getDataColumn()}}),i.prototype.reset=function(t){return this.cell=t,this.className="",this.text=void 0,this.visible=void 0,this.readonly=void 0,this.editable=void 0,this},i.prototype.span=function(t){this.spanned=!0,this.spanHead=t,this.clear(!1)},i.prototype.clear=function(t){return 1<this.colSpan&&(this.colSpan=1,this.cell.removeAttribute(n)),1<this.rowSpan&&(this.rowSpan=1,this.cell.removeAttribute(o)),this.visible!==t&&(this.visible=t,this.cell.style.display=t?"":"none"),this},i.prototype.setColSpan=function(t){return this.colSpan!=t&&(1<(this.colSpan=t)?this.cell.colSpan=t:this.cell.removeAttribute(n)),this},i.prototype.setRowSpan=function(t){return this.rowSpan!=t&&(1<(this.rowSpan=t)?this.cell.rowSpan=t:this.cell.removeAttribute(o)),this},i.prototype.setVisible=function(t){return t!==this.visible&&(this.visible=t,this.cell.style.display=t?"":"none"),this},i.prototype.set=function(t,e,i){return this.colSpan!=t&&(1<(this.colSpan=t)?this.cell.colSpan=t:this.cell.removeAttribute(n)),this.rowSpan!=e&&(1<(this.rowSpan=e)?this.cell.rowSpan=e:this.cell.removeAttribute(o)),this.visible!==i&&(this.visible=i,this.cell.style.display=i?"":"none"),this},i.prototype.refreshFormatters=function(t){var e;this.textFormatter=null,this.numberFormatter=null,this.datetimeWriter=null,this.booleanFormatter=null,(e=t.textFormat)&&(this.textFormatter&&this.textFormatter.format==e||(this.textFormatter=Et.TextFormatter.getFormatter(e))),(e=t.numberFormat)&&(this.numberFormatter&&this.numberFormatter.format==e||(this.numberFormatter=W.DecimalFormatter.getFormatter(e))),(e=t.datetimeFormat)&&(this.datetimeWriter&&this.datetimeWriter.format==e||(this.datetimeWriter=G.DateTimeWriter.getFormatter(e))),(e=t.booleanFormat)&&(this.booleanFormatter&&this.booleanFormatter.format==e||(this.booleanFormatter=U.BooleanFormatter.getFormatter(e))),this.prefix=t.prefix,this.suffix=t.suffix},i.prototype.setClassName=function(t){return t!=this.className&&(this.cell.className=this.className=t,!0)},i.prototype.setStyle=function(t){var e=this.cell.style;for(var i in t)null!=t[i]?e[i]=t[i]:e.removeProperty?e.removeProperty(i):e.removeAttribute&&e.removeAttribute(i)},i.prototype.setEditor=function(t,e){this.editor=t,this.editorType=Jt.CellEditor.getEditorType2(t,e)},i.prototype.setBorderBottom=function(t){t!=this.borderBottom&&(this.borderBottom=t,this.cell.style.borderBottom=0==t?"0":"")},i.prototype.setMarginRight=function(t,e){e!=this.marginRight&&(this.marginRight=e,t.style.marginRight=e<=0?"":e+"px")},i.prototype.isCellButton=function(t){return t===this.cellButton},i.prototype.isEditButton=function(t){return t===this.editButton},i.prototype.isButton=function(t){return t===this.cellButton||t===this.editButton},i.prototype.resetButtonClass=function(){var t=this.button==lt.CellButton.POPUP?"rg-button-popup":"rg-button-action";this.cellButton.className=t},i.prototype.resetEditClass=function(){var t="date"==this.editorType||"btdate"==this.editorType||"ndate"==this.editorType?"rg-button-calendar":"rg-button-list";this.editButton.className=t},i.prototype.resetErrorClass=function(){var t;switch(this.errorLevel){case lt.ValidationLevel.ERROR:t="rg-validation-error";break;case lt.ValidationLevel.WARNING:t="rg-validation-warning";break;case lt.ValidationLevel.INFO:t="rg-validation-info";break;default:t=""}this.errorIcon.className=t},i.prototype.clearExpander=function(){this.expander&&(this.cell.removeChild(this.expander),this.expander=null)},i.prototype.getEditIndex=function(t){var e=this.item.index;return this.merged&&(e+=this.buttonsOffset),t.set(e,this.layout.firstColumn)},i.prototype.contains=function(t){if(t.layout!==this.layout)return!1;var e=t.itemIndex,i=this.item.index,o=i+this.rowSpan/this.layout.getDataSpan();return i<=e&&e<o},i.prototype.toString=function(){return"Body Cell("+this.layout.col+", "+this.item.index+", "+this.layout.row+")"},i);function i(t){this.cell=null,this.cellButton=null,this.editButton=null,this.errorIcon=null,this.buttons=null,this.changedMarker=null,this.expander=null,this.item=null,this.grouped=!1,this.rowIndex=-1,this.rows=0,this.trow=-1,this.tcol=-1,this.head=null,this.layout=null,this.visible=void 0,this.merged=!1,this.spanned=!1,this.spanHead=null,this.width=0,this.height=0,this.heighted=!1,this.rowSpan=1,this.colSpan=1,this.buttonsOffset=0,this.text=void 0,this.template=void 0,this.className="",this.marginRight=-1,this.style=new Dt.ColumnStyle,this.rendererChanged=!1,this.valueChanged=!1,this.mouseEntered=!1,this.focused=!1,this.borderBottom=1,this.readonly=void 0,this.editable=void 0,this.error=void 0,this.errorLevel=lt.ValidationLevel.IGNORE,this.errorWidth=0,this.button=lt.CellButton.NONE,this.buttonWidth=0,this.editWidth=0,this.cell=t,this.text=t[ne.Utils.TextProp]}e.BodyTableCell=C;var s,r=(s=Yt.DataTableElement,oe.__extends(a,s),a.prototype._doDispose=function(){for(var t=0;t<this._cells.length;t++)for(var e=this._cells[t],i=0;i<e.length;i++)e[i].dispose(),e[i]=null;this._cells=null,s.prototype._doDispose.call(this)},_dp(a,"fixed",{get:function(){return!1}}),_dp(a,"rightFixed",{get:function(){return!1}}),_dp(a,"firstCell",{get:function(){return this._cells[0][0]}}),_dp(a,"lastCell",{get:function(){return this._cells[this.tableRowCount-1][0]}}),_dp(a,"spanned",{get:function(){return this._spanned}}),a.prototype.bodyCellByCell=function(t){for(var e=t.parentElement[lt.T_ROW],i=0;i<this._cells.length;i++){var o=this._cells[i],n=o[0].item;if(n&&n.index==e)for(var r=0;r<o.length;r++){var s=o[r];if(s&&s.cell===t)return s}}},a.prototype.bodyCellAt=function(t){for(var e=0;e<this._cells.length;e++){var i=this._cells[e];if(i[0].item.index==t.itemIndex)for(var o=0;o<i.length;o++){var n=i[o];if(n&&n.layout===t.layout)return n}}},a.prototype.layoutByCell=function(t){var e=this.bodyCellByCell(t);return e&&e.layout},a.prototype.columnByCell=function(t){var e=this.bodyCellByCell(t);return e&&e.layout&&e.layout._columnObj},a.prototype.cellByLayout=function(t,e,i){void 0===e&&(e=0),void 0===i&&(i=0);for(var o=e;o<this._cells.length;o++)for(var n=this._cells[o],r=i;r<n.length;r++){var s=n[r];if(s&&s.layout===t)return s}},a.prototype.getCellRectAt=function(t,e,i){var o=this.getCellAt(t,e);return o&&this.getCellRect(t,o,i)},a.prototype.getCellRect=function(t,e,i){i&&e.merged&&(e=e.head);var o=e.layout,n=e.trow,r=e.rowSpan,s=i||1<r&&r==o.getDataSpan()?r:e.item.isData?o._dspan:1,a=t.getTableRowBounds(n,s),l=e.tcol,h=e.colSpan;return this.fixed?(a.x=t.getFixedCellPoint(l),a.width=t.getFixedCellWidth2(l,h)):this.rightFixed?(a.x=t.getRightCellPoint(l),a.width=t.getRightCellWidth2(l,h)):(a.x=t.getCellPoint(l),a.width=t.getCellWidth2(l,h)),a},a.prototype.getRowView=function(t){for(var e=0,i=this.childCount;e<i;e++){var o=this.getChild(e);if(o._item===t)return o}},a.prototype.getRowIndex=function(t){return this._cells[t][0].item.index},a.prototype.getViewIndex=function(t){return this._cells[t][0].rowIndex},a.prototype.cleanRows=function(t,e){this.$_cleanRowViews(t),this.$_cutTailBodyCells(e),this.$_cleanTableRows(e)},a.prototype.getCheckedLayout=function(t){return t.spanned&&(t=this.getUpperOf(t)),t},a.prototype.getLowerOf=function(t){for(var e=this._cells,i=t.trow,o=t.tcol,n=i+1;n<e.length;n++){var r=e[n][o];if(!r.spanned)return r;if(r.spanHead.trow===r.trow)return r.spanHead}},a.prototype.isBottomCell=function(t){for(var e=this._cells,i=t.rowIndex,o=t.trow,n=t.tcol,r=o+1;r<e.length;r++){var s=e[r][n];if(s.rowIndex!=i)break;if(!s.spanned)return!1;if(s.spanHead.trow===s.trow)return!1}return!0},a.prototype.getUpperOf=function(t){for(var e=this._cells,i=t.trow,o=t.tcol,n=i-1;0<=n;n--){var r=e[n][o];if(!r.spanned)return r;if(r.spanHead.trow===r.trow)return r.spanHead}},a.prototype.isTopCell=function(t){for(var e=this._cells,i=t.rowIndex,o=t.trow,n=t.tcol,r=o-1;0<=r;r--){var s=e[r][n];if(s.rowIndex!=i)break;if(!s.spanned)return!1;if(s.rowIndex===t.rowIndex&&s.trow!==t.trow&&s.layout.source)return!1}return!0},a.prototype.getNextVisibleCell=function(t){for(var e=this.bodyCellAt(t);e&&e.spanned;){if(!t.next())return!1;e=this.bodyCellAt(t)}return null!=e},a.prototype.getPrevVisibleCell=function(t){for(var e=this.bodyCellAt(t);e&&e.spanned;){if(!t.prev())return!1;e=this.bodyCellAt(t)}return null!=e},a.prototype._getCssSelector=function(){return"rg-body"},a.prototype._isFixedHeight=function(t){return!t.isAutoRowHeights()},a.prototype._getTrs=function(t){return t.trs},a.prototype._getTableRowCount=function(t){if(t.isAutoRowHeights())return Math.ceil(t._itemsBounds/t.grid.displayOptions.minTableRowHeight)+this._trs-1;if(t.isRowGrouped()){for(var e=t.fixedItemCount,i=e+t.itemCount,o=this._trs,n=0,r=0;r<i;r++)n+=t.getItem(r).isData?o:1;return n+=e?1:0}return s.prototype._getTableRowCount.call(this,t)},a.prototype.$_getTableIndex=function(t,e){var i=t.fixedItemCount;if(i<=e&&t.isRowGrouped()){var o=this._trs,n=i*o;0<i&&n++;for(var r=i;r<e;r++)t.getItem(r).isData?n+=o:n++;return n}return n=e*this._trs,0<i&&i<=e?n+1:n},a.prototype._prepareCellContent=function(t,e){return this.grid.doc.createElement("div")},a.prototype._doMeasure=function(t,e,i){return this._spanned=!1,new jt.Size},a.prototype.$_refreshRowCells=function(t,e,i,o,n,r,s){for(var a=this._cells,l=s.children,h=this._getFirstCell(t),d=this._getLastCell(t)-h+1,u=a.length,_=o+r;u<_;u++)a.push([]);for(var c=0;c<r;c++){for(var p=a[o],f=l[o].children,g=n[c],m=0;m<d;m++){var y=f[m],v=g[m+h],w=p[m];w?w.cell!==y?w.reset(y):w.layout!==v&&(w.rendererChanged=!0,w.layout=v,w.clear(!0)):(w=p[m]=new C(y)).layout=v,w.spanned=!1,w.item=e,w.rowIndex=i,w.trow=o,w.tcol=m}for(o++,m=d;m<p.length;m++)ne.Utils.isDebugging()&&p[m],p[m].dispose();p.length=d}},a.prototype.layoutRow=function(t,e,i,o,n){var r,s=t.lm,a=t.fixedItemCount,l=this.model,h=s.cellLayouts._dataCells,d=this._tbody.rows,u=n.isData?this._trs:1;this.$_refreshRowCells(s,n,i,o,h,u,this._tbody),this.childCount<=i?(r=this.$_borrowView(n),this.addChild(r)):r=this.getChild(i),this.$_setRowCellsDisplay(s,t,e,this._cells,n,i,o,u);var _=n.index,c=d[o];if(c.style.display="",c[lt.T_ROW]=_,c[lt.T_IDX]=o,r.updateItem(n,o,u,this._isFixedHeight(s)),n.isDataRow||n instanceof St.MergedGroupHeader){var p=s.getItemBounds(i);p.width=this.width,r.setRect(p);var f=l.getRowStyle(n,_<a);if(n.isDataRow)for(var g=1;g<this._trs;g++)(m=d[o+g])[lt.T_IDX]=o+g,m[lt.T_ROW]=_,ne.Utils.setClassName(m,f);r.layoutContent(s),ne.Utils.setClassName(c,f)}else if(n.isData){for(g=1;g<this._trs;g++){var m;(m=d[o+g])[lt.T_IDX]=o+g,m[lt.T_ROW]=_}r.clearContent(s,1),n instanceof St.MergedGroupFooter&&r.layoutContent(s)}else r.clearContent(s,1)},a.prototype.layoutFixedBar=function(t,e){var i=t.cellLayouts._dataCells,o=this._tbody,n=o.rows[e],r=this.$_prepareFixedBar(t,n),s=t.grid.hoveredCell;s&&s.trow==e&&s.rowIndex==t.fixedItemCount&&t.grid.$_setHoveredCell(null,-1),n[lt.T_IDX]=e,n[lt.T_ROW]=-99,n.style.display="",ne.Utils.setClassName(n,Ht.FixedOptions.ROW_BAR_STYLE),this.$_refreshRowCells(t,null,-1,e,i,1,o),this.$_setFixedBarCellsDisplay(t,this._cells,e);for(var a=0,l=this._cells[e];a<l.length;a++){var h=l[a];h.className="",h.buttons&&(h.cell.removeChild(h.buttons),h.buttons=null,h.buttonWidth=0)}return r},a.prototype._doRender=function(t){},a.prototype._getCellCount=function(t){return t.cellCount-t.fixedCellCount-t.rightCellCount},a.prototype._getCellWidth=function(t,e){return t.getCellWidth(e)},a.prototype._getTableRowHeight=function(t,e){return t.getTableRowHeight(e,1)},a.prototype._doDrawCell=function(t,e,i){},a.prototype.getCellAt=function(t,e){var i=e.layout,o=t.fixedItemCount,n=t.topIndex,r=e.itemIndex;if((0<o&&r<o||n<=r&&o<=r-n&&r-n<o+t.itemCount)&&(o<=r&&(r-=n),(r=this.$_getTableIndex(t,r))<this._cells.length))for(var s=0;s<this._trs;s++){var a=this._cells[r+s];if(a)for(var l=0;l<a.length;l++){var h=a[l];if(h&&h.layout===i)return h}}return null},a.prototype.getCellView=function(t,e){var i=this.getCellAt(t,e);return i&&i.cell},a.prototype.spanRight=function(t,e){if(e){var i=this.getCellAt(t,e);i&&(i.spanned&&(i=i.spanHead),i&&(e.layout=this._cells[i.trow][i.tcol+i.colSpan-1].layout))}},a.prototype.spanHead=function(t,e){if(e){var i=this.getCellAt(t,e);i&&(i.spanned&&(i=i.spanHead),i&&(e.layout=i.layout))}},a.prototype._getFirstCell=function(t){return t._firstCell},a.prototype._getLastCell=function(t){return t._lastCell},a.prototype._getStartCell=function(t){return t.getStartCell()},a.prototype._getEndCell=function(t){return t.getEndCell()},a.prototype.$_removeView=function(t){var e=this.removeChildAt(t);e.validate(),this._itemViews.push(e)},a.prototype.$_borrowView=function(t){var e=this._itemViews.pop();return e=e||this.createRowElement()},a.prototype.createRowElement=function(){return new Qt.RowElement(this.doc)},a.prototype.$_setFixedBarCellsDisplay=function(t,e,i){for(var o=this._getFirstCell(t),n=this._getFirstCell(t)-o,r=this._getLastCell(t)-o,s=e[i],a=Ht.FixedOptions.ROW_BAR_CELL_STYLE,l=n;l<=r;l++){var h=s[l];h.clear(!0),ne.Utils.setClassName(h.cell,a)}},a.prototype.$_setRowCellsDisplay=function(t,e,i,o,n,r,s,a){var l=this._getFirstCell(t),h=this._getFirstCell(t)-l,d=this._getLastCell(t)-l,u=e.grid,_=e.fixedItemCount,c=i,p=n.isData,f=n.level,g=e.mergedRowGrouped&&e.rowGroupFields||[];if(p||e.mergedRowGrouped)for(var m=0;m<a;m++)for(var y=(L=o[s+m]).length,v=h;v<=d;v++){var w=(F=L[v]).layout,C=w.parent,x=C&&C.vertical;if(F.merged=!1,F.grouped=!1,!F.spanned)if(w.isProxy)F.clear(!1);else if(!p&&f<=v+l)F.grouped=!0,F.clear(!0);else{var b=void 0,I=1;F.dataColumn&&g&&0<=g.indexOf(F.dataColumn.dataIndex)?I=1:n.isDataRow?void 0===(I=(b=w.spanCallback)?b(u.handler,w,F.item.index):void 0)&&(I=w.getDataSpan()):n instanceof dt.GroupFooter&&(I=w.getGroupFooterSpan(F.item.index,n.footerIndex));var E=0;if(1<I){var S=0,R=w.vindex+1;if(I--,x)for(;S++<I&&S<a;)E+=C.getVisible(R++)._dspan,this._cells[s+m+S][v].span(F),this._spanned=!0;else for(;S++<I&&v-h+S<y&&R<C.visibleCount;)E+=C.getVisible(R++)._cspan,L[v+S].span(F),this._spanned=!0}var D=w._cspan,T=w._dspan,k=w.merged&&w._merges;if(k&&n instanceof St.MergedGroupFooter&&v>=n.parent.level&&(k=null),k)if(F.merged=k.isMerged(r,_),k.isHidden(r,_))F.set(D+E,T,!1),F.head=c[v-h];else{var M=void 0;M=n.isData?(F.rows=k.getMerged(r,_))*T:k.getMerged2(u,n.index,r-_,T),F.set(D+E,M,!0),c[v-h]=F.head=F}else x?F.set(D,T+E,!0):F.set(D+E,T,!0)}}else{var L=o[s];for(v=h;v<=d;v++){var F;(F=L[v]).clear(!1),F.merged=!1,F.grouped=!0}}},a.prototype.$_refreshSpans=function(t,e,i){},a.prototype.$_cleanRowViews=function(t){for(;this.childCount>t;)this.$_removeView(this.childCount-1)},a.prototype.$_cutTailBodyCells=function(t){for(var e=this._cells,i=t;i<e.length;i++)for(var o=e[i],n=0;n<o.length;n++)o[n].dispose(),o[n]=null;e.length=t},a.prototype.$_cleanTableRows=function(t){for(var e=this._tbody.rows,i=e.length-1;i>=this._cells.length;i--)for(var o=e[i].cells,n=o.length;n--;)for(var r=o[n];1<r.childElementCount;)r.removeChild(r.lastElementChild);for(i=e.length-1;t<=i;i--){var s=e[i];s[lt.T_IDX]=-1,s.style.display="none"}},a.prototype.$_resetHeights=function(t,e){var i=this._tbody.children,o=0;if(0<t.length){for(var n=1;n<t.length;n++)i[o++].style.height=t[n]-t[n-1]+"px";o++}for(n=1;n<e.length;n++)i[o++].style.height=e[n]-e[n-1]+"px"},a.prototype.$_resetCellStyleHeights=function(t,e){var i=this._tbody.children,o=0;if(0<t.length){for(var n=1;n<t.length;n++)for(var r=t[n]-t[n-1],s=i[o++].cells,a=0;a<s.length;a++)s[a].style.height=r+"px";o++}for(n=1;n<e.length;n++)for(r=e[n]-e[n-1],s=i[o++].cells,a=0;a<s.length;a++)s[a].style.height=r+"px"},a.prototype.$_resetCellHeights2=function(t,e){for(var i=t.grid.body.buttonHeight,o=0,n=this._cells.length;o<n;o++)for(var r=this._cells[o],s=(r.length,0),a=r.length;s<a;s++){var l=r[s],h=l.height,d=t.getTableRowHeightFixed(l.trow,l.rowSpan);h!=d&&(l.height=d,0<l.buttonWidth&&l.buttons&&(l.buttons.style.top=Math.floor((d-i)/2)+"px")),e&&!l.heighted&&(l.cell.firstElementChild.style.maxHeight=l.height-1+"px",ne.Utils.ieTen&&(l.cell.firstElementChild.style.maxHeight=l.height-1+"px"))}},a.prototype.$_focusChanged=function(t,e,i){this.$_cellStateChanged(t,e,"focused",i)},a.prototype.$_mouseEnteredChanged=function(t,e,i){if(e.merged&&e.contains(t.focusedIndex)){var o=e.trow+(t.focusedRow-e.item.index)*t.layoutManager.trs;this._cells[o]&&(e=this._cells[o][e.tcol])}this.$_cellStateChanged(t,e,"mouseEntered",i)},a.prototype.$_cellStateChanged=function(t,e,i,o){var n=e&&e.item;if(e&&o!=e[i]&&n.isDataRow){var r=this.getRowView(e.item);if(r instanceof Qt.ItemElement){var s=this.model,a=e.dataColumn;if(e[i]=o,a&&e.item.isDataRow){var l=s.getCellAt(e.item,a,!1);r.$_setButtons(t,e,e.cell.firstElementChild),r instanceof Qt.RowElement&&e.renderer2&&"focused"===i&&e.renderer2.refreshFocusChanged&&r.cellRefresh(t,s,l,a,e)}}}},a.prototype.$_buttonZIndexChanged=function(t,e,i){var o=e&&e.item;if(o&&o.isDataRow){var n=this.getRowView(o);n instanceof Qt.ItemElement&&e.dataColumn&&n.$_setButtonZIndex(t,e,i)}},a.prototype.$_rendererChanged=function(t){for(var e=this._cells,i=0;i<e.length;i++)for(var o=e[i],n=0;n<o.length;n++)o[n].layout===t&&(o[n].rendererChanged=!0)},a);function a(t,e){var i=s.call(this,t,e,"bodyView")||this;return i._itemViews=[],i._cells=[],i._spanned=!1,i}e.GridBodyElement=r;var l,h=(l=r,oe.__extends(d,l),_dp(d,"fixed",{get:function(){return!0}}),d.prototype._getCssSelector=function(){return"rg-fixed-body"},d.prototype._getExplicitWidth=function(t){return t.fixedWidth-t.fixedBarWidth},d.prototype._getFirstCell=function(t){return this._getStartCell(t)},d.prototype._getLastCell=function(t){return this._getEndCell(t)},d.prototype._getStartCell=function(t){return 0},d.prototype._getEndCell=function(t){return t.fixedCellCount-1},d.prototype._getCellCount=function(t){return t.fixedCellCount},d.prototype._getCellWidth=function(t,e){return t.getFixedCellWidth(e)},d.prototype.createRowElement=function(){return new Qt.FixedRowElement(this.doc)},d);function d(){return null!==l&&l.apply(this,arguments)||this}e.FixedBodyElement=h;var u,_=(u=r,oe.__extends(c,u),_dp(c,"rightFixed",{get:function(){return!0}}),c.prototype._getCssSelector=function(){return"rg-fixed-body"},c.prototype._getFirstCell=function(t){return this._getStartCell(t)},c.prototype._getLastCell=function(t){return this._getEndCell(t)},c.prototype._getStartCell=function(t){return t.cellCount-t.rightCellCount},c.prototype._getEndCell=function(t){return t.cellCount-1},c.prototype.createRowElement=function(){return new Qt.RightRowElement(this.doc)},c.prototype._getCellCount=function(t){return t.rightCellCount},c.prototype._getCellWidth=function(t,e){return t.getRightCellWidth(e)},c);function c(){return null!==u&&u.apply(this,arguments)||this}e.RightBodyElement=_});t(te);te.BodyTableCell,te.GridBodyElement,te.FixedBodyElement,te.RightBodyElement;var ee=e(function(t,e){Object.defineProperty(e,"__esModule",{value:!0});var i,o=(i=re.Base,oe.__extends(n,i),n.prototype._doDispose=function(){this._grid=null,this._rs=null,i.prototype._doDispose.call(this)},_dp(n,"zoomed",{get:function(){return!isNaN(this._zoom)&&1!=this._zoom}}),_dp(n,"grid",{get:function(){return this._grid}}),_dp(n,"footerCount",{get:function(){return this._footerCount}}),_dp(n,"headerSummaryCount",{get:function(){return this._headerSummaryCount}}),_dp(n,"vscrollBar",{get:function(){return this._vscrollBar}}),_dp(n,"hscrollBar",{get:function(){return this._hscrollBar}}),_dp(n,"scrollBarWidth",{get:function(){return this._scrollBarWidth}}),_dp(n,"scrollBarHeight",{get:function(){return this._scrollBarHeight}}),_dp(n,"dataBounds",{get:function(){return this._dataBounds}}),_dp(n,"bodyBounds",{get:function(){return this._bodyBounds}}),_dp(n,"fixedBodyBounds",{get:function(){return this._fixedBodyBounds}}),_dp(n,"gridBounds",{get:function(){return this._gridBounds}}),_dp(n,"headerBounds",{get:function(){return this._headerBounds}}),_dp(n,"summaryBounds",{get:function(){return this._summaryBounds}}),_dp(n,"footerBounds",{get:function(){return this._footerBounds}}),_dp(n,"topContentBounds",{get:function(){return this._topContentBounds}}),_dp(n,"leftContentBounds",{get:function(){return this._leftContentBounds}}),_dp(n,"rowBarBounds",{get:function(){return this._rowBarBounds}}),_dp(n,"sideContentBounds",{get:function(){return this._sideContentBounds}}),_dp(n,"contentBounds",{get:function(){return this._contentBounds}}),_dp(n,"fixedContentBounds",{get:function(){return this._fixedContentBounds}}),_dp(n,"nonFixedBounds",{get:function(){return this._nonFixedBounds}}),_dp(n,"rightContentBounds",{get:function(){return this._rightContentBounds}}),_dp(n,"headBounds",{get:function(){return this._headBounds}}),_dp(n,"sumBounds",{get:function(){return this._sumBounds}}),_dp(n,"footBounds",{get:function(){return this._footBounds}}),_dp(n,"fixedWidth",{get:function(){return this._fixedWidth}}),_dp(n,"rightWidth",{get:function(){return this._rightWidth}}),_dp(n,"defaultItemHeight",{get:function(){return this._itemHeight}}),_dp(n,"topIndex",{get:function(){return this._topIndex}}),_dp(n,"itemCount",{get:function(){return this._itemCount}}),_dp(n,"fixedItemCount",{get:function(){return this._fixedItemCount}}),_dp(n,"fullItemCount",{get:function(){return this._fullItemCount}}),_dp(n,"fixedTableRowCount",{get:function(){return this._fixedTableRowCount}}),_dp(n,"tableRowCount",{get:function(){return this._tableRowCount}}),_dp(n,"trs",{get:function(){return this._cellLayouts.dataRows}}),_dp(n,"leftPos",{get:function(){return this._leftPos}}),_dp(n,"cellLayouts",{get:function(){return this._cellLayouts}}),_dp(n,"layoutCount",{get:function(){return this._layoutCount}}),_dp(n,"fixedLayoutCount",{get:function(){return this._fixedLayoutCount}}),_dp(n,"rightLayoutCount",{get:function(){return this._rightLayoutCount}}),_dp(n,"firstLayout",{get:function(){return this._firstLayout}}),_dp(n,"lastLayout",{get:function(){return this._lastLayout}}),_dp(n,"rightFirstLayout",{get:function(){return this._layoutCount-this._rightLayoutCount}}),_dp(n,"layoutsLength",{get:function(){return this._layoutsLength}}),_dp(n,"cellCount",{get:function(){return this._cellCount}}),_dp(n,"fixedCellCount",{get:function(){return this._fixedCellCount}}),_dp(n,"rightCellCount",{get:function(){return this._rightCellCount}}),_dp(n,"firstCell",{get:function(){return this._firstCell}}),_dp(n,"lastCell",{get:function(){return this._lastCell}}),_dp(n,"startCell",{get:function(){return this._startCell}}),_dp(n,"endCell",{get:function(){return this._endCell}}),_dp(n,"isColumnFitted",{get:function(){return!!this._fitStyle}}),_dp(n,"scrollWidth",{get:function(){return this._scrollWidth}}),_dp(n,"fixedBarWidth",{get:function(){return this._fixedBarWidth}}),_dp(n,"rightBarWidth",{get:function(){return this._rightBarWidth}}),_dp(n,"fixedHeight",{get:function(){return this._fixedHeight}}),_dp(n,"fixedBarHeight",{get:function(){return this._fixedBarHeight}}),_dp(n,"rowGrouped",{get:function(){return!1}}),_dp(n,"mergedRowGrouped",{get:function(){return!1}}),_dp(n,"rowGroupFields",{get:function(){return null}}),_dp(n,"rowGroupLevels",{get:function(){return 0}}),_dp(n,"columnMerged",{get:function(){return this._columnMerged}}),_dp(n,"fixedColumnMerged",{get:function(){return this._fixedColumnMerged}}),_dp(n,"rightColumnMerged",{get:function(){return this._rightColumnMerged}}),_dp(n,"clientRect",{get:function(){return this._clientRect}}),_dp(n,"headerRows",{get:function(){return this._cellLayouts.headerRows}}),_dp(n,"headerSummaryRows",{get:function(){return this._cellLayouts.dataRows}}),_dp(n,"footerRows",{get:function(){return this._cellLayouts.dataRows}}),_dp(n,"topPanelVisible",{get:function(){return!1}}),_dp(n,"minRowHeight",{get:function(){return this._minRowHeight}}),_dp(n,"minItemHeight",{get:function(){return this._minItemHeight}}),_dp(n,"fitStyle",{get:function(){return this._fitStyle}}),_dp(n,"fitStyleChanged",{get:function(){return this._fitStyleChanged}}),n.prototype.requestZoom=function(){this._zoom=NaN},n.prototype.getStartCell=function(){return this._refreshMode==lt.RefreshMode.VISIBLE_ONLY?this._startCell:this._firstCell},n.prototype.getEndCell=function(){return this._refreshMode==lt.RefreshMode.VISIBLE_ONLY?this._endCell:this._lastCell},n.prototype.getLayout=function(t){return this._layouts[t]},n.prototype.getLayoutBounds=function(t){return new ht.Rectangle(this._layoutPoints[t],0,this._layoutPoints[t+1]-this._layoutPoints[t],0)},n.prototype.getLayoutWidth=function(t){return this._layoutPoints[t+1]-this._layoutPoints[t]},n.prototype.getPositionToVIndex=function(t){for(var e=this._layoutPoints,i=0;i<e.length-1;i++)if(t>=e[i]&&t<e[i+1])return i;return-1},n.prototype.getFixedLayoutWidth=function(t){return this._fixedLayoutPoints[t+1]-this._fixedLayoutPoints[t]},n.prototype.getRightLayoutWidth=function(t){return this._rightLayoutPoints[t+1]-this._rightLayoutPoints[t]},n.prototype.getCellIndex=function(t){for(var e=this._cellPoints,i=0;i<e.length-1;i++)if(t>=e[i]&&t<e[i+1])return i;return-1},n.prototype.getHorzColumnIndex=function(t){for(var e=t,i=0;e;)i+=!e.group||e.group.horizontal?e.vindex:0,e=e.group;return i},n.prototype.getLeftCell=function(){return this.getCellIndex(this._leftPos)},n.prototype.getCellPoint=function(t){return this._cellPoints[t]},n.prototype.getCellWidth=function(t){return this._cellPoints[t+1]-this._cellPoints[t]},n.prototype.getCellWidth2=function(t,e){var i=this._cellPoints;return i[Math.min(i.length-1,t+e)]-i[t]},n.prototype.getFixedCellPoint=function(t){return this._fixedCellPoints[t]},n.prototype.getFixedCellWidth=function(t){return this._fixedCellPoints[t+1]-this._fixedCellPoints[t]},n.prototype.getFixedCellWidth2=function(t,e){var i=this._fixedCellPoints;return i[Math.min(i.length-1,t+e)]-i[t]},n.prototype.getRightCellPoint=function(t){return this._rightCellPoints[t]},n.prototype.getRightCellWidth=function(t){return this._rightCellPoints[t+1]-this._rightCellPoints[t]},n.prototype.getRightCellWidth2=function(t,e){var i=this._rightCellPoints;return i[Math.min(i.length-1,t+e)]-i[t]},n.prototype.$_getItems=function(){return this._items},n.prototype.getItem=function(t){return this._items[t]},n.prototype._calcDefaultRowHeight=function(t){var e=this.grid.displayOptions,i=e.rowHeight;return i<=0&&(i=t.heightMeasurer.rowHeight*this._trs),0<e.maxRowHeight&&(i=Math.min(e.maxRowHeight,i)),i=Math.max(this._minItemHeight,i)},n.prototype.measure=function(t,e,i,o,n){var r=this._grid;this._rs=r.itemSource,this._offsetBody=null,this._cellLayouts=r._activeCellLayout,this._footerCount=r.footers.visibleCount,this._headerSummaryCount=r.headerSummaries.visibleCount,this._leftPos=e,this._topIndex=i,this._columnMerged=!1,this._fixedColumnMerged=!1,this._rightColumnMerged=!1,this._focusIndex&&!r.isValid(this._focusIndex)&&this._focusIndex.normalize(r),this._doMeasure(t,o,n)},n.prototype.layout=function(t){var e=this._grid;this._doLayout(e,t),this._adjustLayout(e,this._gridBounds.clone()),this._prevFocused=this._focusIndex,this._focusIndex=null},n.prototype.getItemHeight=function(t){var e=t.index;return e<this._fixedItemCount?this._fixedItemPoints[e+1]-this._fixedItemPoints[e]:(e-=this._fixedItemCount-this._topIndex,this._itemPoints[e+1]-this._itemPoints[e])},n.prototype.getTableItemHeight=function(t){return t<this._fixedItemCount?this._fixedTableItemPoints[t+1]-this._fixedTableItemPoints[t]:(t-=this._fixedItemCount,this._tableItemPoints[t+1]-this._tableItemPoints[t])},n.prototype.getTableItemIndex=function(t){for(var e=0;e<this._fixedItemCount;e++)if(t<=this._fixedTableItemPoints[e+1])return e;for(e=0;e<this._itemCount;e++)if(t<=this._tableItemPoints[e+1])return e+this._fixedItemCount;return-1},n.prototype.getTableItemTop=function(t){return t<this._fixedItemCount?this._fixedTableItemPoints[t]:(t-=this._fixedItemCount,this._tableItemPoints[t])},n.prototype.getTableItemBottom=function(t){return t<this._fixedItemCount?this._fixedTableItemPoints[t+1]:(t-=this._fixedItemCount,this._tableItemPoints[t+1])},n.prototype.getItemBounds=function(t){var e,i;return i=0<this._fixedItemCount&&t<this._fixedItemCount?(e=this._fixedItemPoints[t],this._fixedItemPoints[t+1]-e):(t-=this._fixedItemCount,e=this._itemPoints[t],this._itemPoints[t+1]-e),new ht.Rectangle(0,e,1e3,i)},n.prototype.getItemRect=function(t,e){void 0===e&&(e=!1);var i,o,n=(e?this._fixedContentBounds:this._bodyBounds).y;return o=0<this._fixedItemCount&&t<this._fixedItemCount?(i=this._fixedItemPoints[t]+n,this._fixedItemPoints[t+1]+n-i):(t-=this._fixedItemCount,i=this._itemPoints[t]+n,this._itemPoints[t+1]+n-i),new ht.Rectangle(0,i,1e3,o)},n.prototype.getTableItemBounds=function(t){var e,i;return i=0<this._fixedItemCount&&t<this._fixedItemCount?(e=this._fixedTableItemPoints[t],this._fixedTableItemPoints[t+1]-e):(t-=this._fixedItemCount,e=this._tableItemPoints[t],this._tableItemPoints[t+1]-e),new ht.Rectangle(0,e,1e3,i)},n.prototype.getTableRowHeightFixed=function(t,e){var i=this._fixedTableRowPoints.length;return t<i-1?this._fixedTableRowPoints[t+e]-this._fixedTableRowPoints[t]:(1<i&&(t-=i),this._tableRowPoints[t+e]-this._tableRowPoints[t])},n.prototype.getTableRowHeight=function(t,e){return t<this._fixedTableRowCount?this._fixedTableRowPoints[t+e]-this._fixedTableRowPoints[t]:(0<this._fixedItemCount&&(t-=this._fixedItemCount*this._trs+1),this._tableRowPoints[t+e]-this._tableRowPoints[t])},n.prototype.getTableRowBounds=function(t,e){var i,o;return o=0<this._fixedTableRowCount&&t<this._fixedTableRowCount?(i=this._fixedTableRowPoints[t],this._fixedTableRowPoints[Math.min(t+e,this._fixedTableRowCount)]-i):(0<this._fixedTableRowCount&&(t-=this._fixedTableRowCount+1),i=this._tableRowPoints[t],this._tableRowPoints[Math.min(t+e,this._tableRowCount)]-i),new ht.Rectangle(0,i,1e3,o)},n.prototype.getTableRowIndex=function(t){t-=this.contentBounds.y+this.bodyBounds.y;for(var e=0;e<this._fixedTableRowCount;e++)if(t<=this._fixedTableRowPoints[e+1])return e;for(e=0;e<this._tableRowCount;e++)if(t<=this._tableRowPoints[e+1])return e+(0<this._fixedTableRowCount?this._fixedTableRowCount+1:0);return-1},n.prototype.setLeftPos=function(t,e){var i=this._grid;this._leftPos=e,this.$_calcLeftPos(),i.contentPane.x=this._contentBounds.x=this.fixedContentBounds.right-this._leftPos},n.prototype.isMergedCell=function(t){return!1},n.prototype.getMergeRoom=function(t){var e=t.layout;if(e instanceof Tt.CellLayoutColumnItem&&e.canMerge()){var i=e._merges;if(i)return i.getRoom(t)}return null},n.prototype.getHeaderCellAt=function(t,e,i){void 0===i&&(i=!1);var o,n=this._grid,r=this._cellLayouts._headerCells,s=-1;if(t<this._fixedContentBounds.right){o=n.fixedHeaderView,t-=this._fixedContentBounds.x;for(var a=0;a<this._fixedCellCount;a++)if(t>=this._fixedCellPoints[a]&&t<this._fixedCellPoints[a+1]){s=a;break}}else if(t>this._rightContentBounds.x){for(o=n.rightHeaderView,t-=this._rightContentBounds.x,a=0;a<this._rightCellCount;a++)if(t>=this._rightCellPoints[a]&&t<this._rightCellPoints[a+1]){s=a+this._cellCount-this._rightCellCount;break}}else for(o=n.headerView,t-=this._contentBounds.x,a=0;a<this._cellPoints.length;a++)if(t>=this._cellPoints[a]&&t<this._cellPoints[a+1]){s=a+this._fixedCellCount;break}if(0<=s){var l=r[o.getRowAt(e-this._headerBounds.y-this._contentBounds.y)][s];return(l=o.getSpanRoot(l))&&!i?l.source:l}},n.prototype.getHeaderCellRect=function(t,e){void 0===e&&(e=!1);var i,o=this.grid,n=t.hcol,r=this.cellCount-this.rightCellCount;if(n<this._fixedCellCount){var s=this._fixedContentBounds.x,a=n,l=(h=o.fixedHeaderView.tableCellByLayout(t))?h.colSpan:t.hlen;i=new ht.Rectangle(this._fixedCellPoints[a]+s,0,this._fixedCellPoints[a+l]-this._fixedCellPoints[a],0)}else if(r<=n)s=this._rightContentBounds.x+this._grid.fixedOptions.colBarWidth,a=n-r,l=(h=o.rightHeaderView.tableCellByLayout(t))?h.colSpan:t.hlen,i=new ht.Rectangle(this._rightCellPoints[a]+s,0,this._rightCellPoints[a+l]-this._rightCellPoints[a],0);else{var h;s=this._contentBounds.x,a=n-this._fixedCellCount,l=(h=o.headerView.tableCellByLayout(t))?h.colSpan:t.hlen,i=new ht.Rectangle(this._cellPoints[a]+s,0,this._cellPoints[a+l]-this._cellPoints[a],0)}return i.y=this._contentBounds.y+o.headerView.getLayoutPos(t),i.height=o.headerView.getLayoutHeight(t,e),i},n.prototype.getLayoutRect=function(t){var e,i=this.rightFirstLayout;if(t<this._fixedLayoutCount){var o=this._fixedContentBounds.x,n=t;e=new ht.Rectangle(this._fixedLayoutPoints[n]+o,0,this._fixedLayoutPoints[n+1]-this._fixedLayoutPoints[n],0)}else e=i<=t?(o=this._rightContentBounds.x+this._grid.fixedOptions.colBarWidth,n=t-i,new ht.Rectangle(this._rightLayoutPoints[n]+o,0,this._rightLayoutPoints[n+1]-this._rightLayoutPoints[n],0)):(o=this._contentBounds.x,n=t-this._fixedLayoutCount,new ht.Rectangle(this._layoutPoints[n]+o,0,this._layoutPoints[n+1]-this._layoutPoints[n],0));return e},n.prototype.getDataRect=function(t){var e,i=t.col,o=t._clen,n=this.cellCount-this.rightCellCount;if(i<this._fixedCellCount){var r=this._fixedContentBounds.x,s=i;e=new ht.Rectangle(this._fixedCellPoints[s]+r,0,this._fixedCellPoints[s+o]-this._fixedCellPoints[s],0)}else e=n<=i?(r=this._rightContentBounds.x+this._grid.fixedOptions.colBarWidth,s=i-n,new ht.Rectangle(this._rightCellPoints[s]+r,0,this._rightCellPoints[s+o]-this._rightCellPoints[s],0)):(r=this._contentBounds.x,s=i-this._fixedCellCount,new ht.Rectangle(this._cellPoints[s]+r,0,this._cellPoints[s+o]-this._cellPoints[s],0));return e},n.prototype.getBodyView=function(t){var e=this.rightFirstLayout,i=(t instanceof Tt.CellLayoutItem?t:t.layout).root.vindex;return i<this._fixedLayoutCount?this._grid.fixedBodyView:e<=i?this._grid.rightBodyView:this._grid.bodyView},n.prototype.mouseToIndex=function(t,e,i,o){if(o.set(-1,null),this._layoutCount<1)return o;var n=this.grid,r=this._summaryBounds.bottom,s=-1;if(r<=(i-=this._contentBounds.y)&&i<this._footerBounds.y){for(var a=0;a<this._fixedItemCount;a++)if(i>=r+this._fixedItemPoints[a]&&i<r+this._fixedItemPoints[a+1]){s=a,i-=r+this._fixedItemPoints[a];break}if(s<0&&0<this._itemCount){for(a=0;a<this._itemCount;a++)if(i>=r+this._itemPoints[a]&&i<r+this._itemPoints[a+1]){s=a,i-=r+this._itemPoints[a];break}0<=s&&(s+=n.topItem)}}else i>=this._footerBounds.y?s=-2:i<this._headerBounds.y&&(s=-3);if(o.itemIndex=s,t){var l=n.getCellViewOf(t),h=l&&n.getBodyView(l),d=h instanceof te.GridBodyElement&&h.layoutByCell(l);if(d)return o.layout=d,o}return o},n.prototype.mouseToIndexEx=function(t,e,i,o){if(this._layoutCount<1)return o;var n=this.grid,r=this._topIndex+this._fixedItemCount,s=this._summaryBounds.bottom,a=0;if((i-=this._contentBounds.y)<s)a=-1;else if(i>=this._bodyBounds.bottom&&i<this._footerBounds.y)a=r+this._fullItemCount;else if(i>=this._footerBounds.y)a=r+this._fullItemCount;else{a=-1,i-=s;for(var l=0;l<this._fixedItemCount;l++)if(i>=this._fixedItemPoints[l]&&i<this._fixedItemPoints[l+1]){a=l;break}if(a<0&&0<this._itemCount){for(l=0;l<this._itemCount;l++)if(i>=this._itemPoints[l]&&i<this._itemPoints[l+1]){a=l;break}0<=a&&(a+=r)}}o.itemIndex=a;var h=-1,d=this._gridBounds.x;if(e<d)h=Math.max(0,this._firstLayout-1);else if(e>=this._bodyBounds.right&&e<this._clientRect.right)h=n.visibleLayoutCount-1;else{for(e-=d,l=0;l<this._fixedLayoutCount;l++)if(e>=this._fixedLayoutPoints[l]&&e<this._fixedLayoutPoints[l+1]){h=l;break}if(h<0&&0<this._rightLayoutCount){var u=e-this._rightContentBounds.x+this._grid.fixedOptions.colBarWidth+d;for(l=0;l<this._rightLayoutCount;l++)if(u>=this._rightLayoutPoints[l]&&u<this._rightLayoutPoints[l+1]){h=l+this.rightFirstLayout;break}}if(h<0)for(e=e-this._fixedWidth+this._leftPos,l=this._firstLayout;l<=this._lastLayout;l++)if(e>=this._layoutPoints[l-this._fixedLayoutCount]&&e<this._layoutPoints[l-this._fixedLayoutCount+1]){h=l;break}}return 0<=h&&h<n.visibleLayoutCount?o.layout=n.getVisibleLayout(h):o.layout=null,o},n.prototype.cellIsVisible=function(t){var e=t.itemIndex,i=this._fixedItemCount;if(i<=e){if(e<this._topIndex+i)return!1;if(0==this._fullItemCount&&e==this._topIndex+i)return!0;if(e>=this._topIndex+i+this._fullItemCount)return!1}var o=t.layout,n=o.vindex;if((i=this._fixedLayoutCount)<=n){if(n=o.col-this._fixedCellCount,this._cellPoints[n]<this._leftPos)return!1;if(this._cellPoints[n+o.cols]-this._leftPos>this._nonFixedBounds.width)return!1}return!0},n.prototype.clearFocusRequest=function(){this._focusIndex=null},n.prototype.focusIsVisible=function(){return this._focusIndex&&this.cellIsVisible(this._focusIndex)},n.prototype.makeCellVisible=function(t){this._focusIndex=t.clone()},n.prototype.isAutoRowHeights=function(){return this._autoRowHeights},n.prototype.isRowGrouped=function(){return this._rowGrouped},n.prototype.scrollToNextCell=function(){for(var t=0;t<this._cellCount;t++)if(this._cellPoints[t]>this._leftPos)return this._cellPoints[t];return this._leftPos},n.prototype.scrollToPrevCell=function(){for(var t=this._cellCount-1;0<=t;t--)if(this._cellPoints[t]<this._leftPos)return this._cellPoints[t];return this._leftPos},n.prototype.needRelayout=function(){return this._autoRowHeights&&this._fitStyleChanged&&this._fitStyle==lt.GridFitStyle.EVEN_FILL},n.prototype.$_calcFixedCellPoints=function(t,e){var i=this._layoutCount=e.visibleCount,o=e._cellWidths,n=this._fixedLayoutCount=Math.min(t.colCount,i);if(this._rightLayoutCount=Math.max(0,Math.min(t.rightCount,i-n-1)),this._rightFixed=t.rightFixed,this._cellCount=0,this._fixedCellCount=0,this._rightCellCount=0,this._layouts=[],this._fixedLayoutPoints=[],this._fixedWidth=0,this._rightWidth=0,this._fixedCellPoints=[],this._fixedCellCounts=[],0<n){var r=this._layouts,s=this._fixedLayoutPoints,a=this._fixedCellPoints,l=this._fixedCellCounts,h=0,d=0;s.push(h),a.push(h),l.push(d);for(var u=0;u<n;u++){for(var _=e.getVisible(u),c=_.cols,p=0;p<c;p++)h+=o[d++],a.push(h);r.push(_),s.push(h),l.push(d)}this._fixedCellCount=this._cellCount=d,this._fixedWidth=s[n]+(this._fixedBarWidth=t.colBarWidth)}},n.prototype.$_calcCellPoints=function(t){var e=t.visibleCount-this._fixedLayoutCount-this._rightLayoutCount,i=t._cellWidths,o=this._layoutPoints=[],n=this._cellPoints=[],r=this._cellCounts=[],s=this._fixedLayoutCount,a=this._layouts;if(this._firstCell=this._lastCell=this._cellCount,(this._layoutsLength=0)<e){var l=0,h=this._cellCount;o.push(l),n.push(l),r.push(h);for(var d=0;d<e;d++){for(var u=t.getVisible(d+s),_=u.cols,c=0;c<_;c++)l+=i[h++],n.push(l);a.push(u),o.push(l),r.push(h)}this._layoutsLength=l,this._cellCount=h,this._lastCell=h-1}},n.prototype.$_calcRightCellPoints=function(t,e){var i=e._cellWidths,o=this._layoutCount,n=this._rightLayoutPoints=[],r=this._rightCellPoints=[],s=this._rightCellCounts=[],a=this._layouts;if(0<this._rightLayoutCount){var l=0,h=this._cellCount;n.push(l),r.push(l),s.push(h);for(var d=o-this._rightLayoutCount;d<o;d++){for(var u=e.getVisible(d),_=u.cols,c=0;c<_;c++)l+=i[h++],r.push(l);a.push(u),n.push(l),s.push(h)}this._rightCellCount=h-this._cellCount,this._cellCount=h,this._rightWidth=n[this._rightLayoutCount]+(this._rightBarWidth=t.rightBarWidth)}},n.prototype.$_calcScrollWidth=function(t){this._scrollWidth=t.width-this._leftContentBounds.width-this._sideContentBounds.width-this._fixedContentBounds.width-this._rightContentBounds.width},n.prototype.$_calcLeftPos=function(){var t=this._focusIndex&&this._focusIndex.layout;if(t){var e=t.root.vindex;if(e>=this._fixedLayoutCount&&e<this.rightFirstLayout){var i=t.col-this._fixedCellCount,o=this._cellPoints[i];if(o<this._leftPos)this._leftPos=o;else{var n=this._cellPoints[i+t.cols]-this._leftPos-this._scrollWidth;0<n&&(this._leftPos=Math.min(o,this._leftPos+n))}}}this._leftPos=Math.max(0,Math.min(this._leftPos,this._layoutsLength-this._scrollWidth)),this._firstLayout=this._fixedLayoutCount,this._lastLayout=0<this._layoutCount?this._layoutCount-this._rightLayoutCount-1:-1},n.prototype.$_checkFitting=function(t,e){var i=t.fitStyle;if(i!=lt.GridFitStyle.NONE){var o=this._cellPoints,n=o.length;if(0<n)return i==lt.GridFitStyle.EVEN_FILL||0<e-o[n-1]?i:void 0}},n.prototype.$_fitColumns=function(t,e,i){for(var o=this._layoutsLength,n=this._layoutPoints,r=n.length,s=this._fixedLayoutCount,a=[],l=1;l<n.length;l++)a.push(n[l]-n[l-1]);if(0<r){var h=t.fitStyle,d=this._layouts;if(h==lt.GridFitStyle.EVEN||h==lt.GridFitStyle.EVEN_FILL)for(l=1;l<r;l++)n[l]=n[l]*i/o;else if(h==lt.GridFitStyle.FILL){var u=0,_=0;for(l=0;l<r-1;l++){var c=d[l+s].fillWidth;0<c?_+=c:u+=a[l]}if(0<_)for(u=i-u,l=1;l<r;l++){var p=(w=d[l-1+s]).fillWidth;n[l]=0<p?n[l-1]+p*u/_:n[l-1]+a[l-1]}else for(l=1;l<r;l++)n[l]=n[l]*i/o}var f=0;for(l=0;l<r-1;l++)n[l]=Math.round(n[l]);for(l=1;l<r-1;l++){var g=n[l]-n[l-1];g<2?(f=2-g,n[l]+=2-g):0<f&&2+f<g&&(n[l]-=f,f=0)}var m=this._cellPoints=[],y=e._cellWidths,v=0;for(m.push(v),l=0;l<r-1;l++){var w,C=(w=this._cellLayouts.getVisible(l+s))._cellWidth,x=n[l+1]-n[l],b=x/C,I=w.hcol,E=w.cols,S=v;w._setFitWidth(x);for(var R=0;R<E-1;R++)S+=y[I+R]*b,m.push(Math.round(S));v+=x,m.push(Math.round(v))}m[m.length-1]=n[r-1]}this._layoutsLength=n[r-1]=i},n.prototype.$_measureTopPane=function(t){this._doMeasureTopPane(t,this._topContentBounds)},n.prototype._doMeasureTopPane=function(t,e){e.height=0},n.prototype.$_measureViewHeights=function(t,e){var i;i=0,t.header.visible?(this._headerBounds=e.clone(),i=t.headerView.measure(t,e.width,e.height).height,this._headerBounds.height=i):this._headerBounds?this._headerBounds.setEmpty():this._headerBounds=new ht.Rectangle,this._fixedHeaderBounds=this._headerBounds.clone(),this._rightHeaderBounds=this._headerBounds.clone(),this._headBounds.y=e.y,this._headBounds.height=i,e.topBy(i),i=0,t.headerSummaries.canShow?(this._summaryBounds=e.clone(),i=t.headerSummaryView.measure(t,e.width,e.height).height,t.fixedHeaderSummaryView,this._summaryBounds.height=i):this._summaryBounds?this._summaryBounds.setEmpty():this._summaryBounds=new ht.Rectangle,this._fixedSummaryBounds=this._summaryBounds.clone(),this._rightSummaryBounds=this._summaryBounds.clone(),this._sumBounds.y=e.y,this._sumBounds.height=i,e.topBy(i),i=0,t.footers.canShow?(this._footerBounds=e.clone(),i=t.footerView.measure(t,e.width,e.height).height,this._footerBounds.height=i):this._footerBounds?this._footerBounds.setEmpty():this._footerBounds=new ht.Rectangle,this._fixedFooterBounds=this._footerBounds.clone(),this._rightFooterBounds=this._footerBounds.clone(),this._footBounds.y=e.bottom-this._footerBounds.height,this._footBounds.height=i;var o=this._sumBounds.bottom;i=this._footBounds.y-o,this._rowBarBounds.y=o,this._rowBarBounds.height=i},n.prototype.$_sortSections=function(t){var e=[t.rowIndicator,t.stateBar,t.checkBar];return e.sort(function(t,e){var i=t.displayOrder,o=e.displayOrder;return i==o?t.staticOrder-e.staticOrder:i-o}),e},_dp(n,"sectionObjects",{get:function(){return this._sectionObjects}}),n.prototype.$_measureLeftPane=function(t){this._sectionObjects=this.$_sortSections(t);var e,i=this._leftContentBounds.clone().move();this._headBounds=i.clone(),this._sumBounds=i.clone(),this._footBounds=i.clone(),e=t.rowBarContainer.measure(t,i.width,i.height),this._rowBarBounds=i.clone(),this._rowBarBounds.width=e.width,this._leftContentBounds.width=e.width,i.leftBy(e.width),this._headBounds.width=this._leftContentBounds.width,this._sumBounds.width=this._leftContentBounds.width,this._footBounds.width=this._leftContentBounds.width},n.prototype._measureSidePane=function(t){if(t.isSidePaneVisible()){var e=this._sideContentBounds.clone(),i=t.sideContentPane.measure(t,e.width,e.height);this._sideContentBounds.width=i.width}else this._sideContentBounds.width=0},n.prototype.$_measureFixedPane=function(t){var e=this._fixedContentBounds.width=this._fixedWidth,i=this._fixedContentBounds.clone().move();this._fixedHeaderBounds.x=i.x,this._fixedHeaderBounds.y=i.y,this._fixedHeaderBounds.width=i.width,i.topBy(this._fixedHeaderBounds.height),this._fixedSummaryBounds.x=i.x,this._fixedSummaryBounds.y=this._fixedHeaderBounds.bottom,this._fixedSummaryBounds.width=i.width,i.topBy(this._fixedSummaryBounds.height),0<e&&(t.fixedHeaderSummaryView._rowPoints=t.headerSummaryView._rowPoints.slice()),this._fixedFooterBounds.x=i.x,this._fixedFooterBounds.y=i.bottom-this._fixedFooterBounds.height,this._fixedFooterBounds.width=i.width,i.bottomBy(-this._fixedFooterBounds.height),0<e&&(t.fixedFooterView._rowPoints=t.footerView._rowPoints.slice()),this._fixedBodyBounds=i},n.prototype.$_measureRightPane=function(t){var e=this._rightWidth;this._rightContentBounds.width=e;var i=this._rightContentBounds.clone();i.x=this._rightBarWidth,i.y=0,i.width-=i.x,this._rightHeaderBounds.x=i.x,this._rightHeaderBounds.y=i.y,this._rightHeaderBounds.width=i.width,i.topBy(this._rightHeaderBounds.height),this._rightSummaryBounds.x=i.x,this._rightSummaryBounds.y=this._rightHeaderBounds.bottom,this._rightSummaryBounds.width=i.width,i.topBy(this._rightSummaryBounds.height),0<e&&(t.rightHeaderSummaryView._rowPoints=t.headerSummaryView._rowPoints.slice()),this._rightFooterBounds.x=i.x,this._rightFooterBounds.y=i.bottom-this._rightFooterBounds.height,this._rightFooterBounds.width=i.width,i.bottomBy(-this._rightFooterBounds.height),0<e&&(t.rightFooterView._rowPoints=t.footerView._rowPoints.slice()),this._rightBodyBounds=i},n.prototype.$_measureContentPane=function(t){var e=this._layoutsLength;this._contentBounds.width=e;var i=this._contentBounds.clone();i.x=i.y=0,this._headerBounds&&(this._headerBounds.x=i.x,this._headerBounds.y=i.y,this._headerBounds.width=i.width,i.topBy(this._headerBounds.height)),this._summaryBounds&&(this._summaryBounds.x=i.x,this._summaryBounds.y=this._headerBounds.bottom,this._summaryBounds.width=i.width,i.topBy(this._summaryBounds.height)),this._dataBounds=i.clone(),this._footerBounds&&(this._footerBounds.x=i.x,this._footerBounds.y=i.bottom-this._footerBounds.height,this._footerBounds.width=i.width,i.bottomBy(-this._footerBounds.height)),this._bodyBounds=i},n.prototype.$_getItemHeight=function(t,e){var i=t.getItem(e).height;return isNaN(i)?this._autoRowHeights?this._minItemHeight:this._itemHeight:i},n.prototype.$_calcItemPoints=function(t){void 0===t&&(t=!0);var e=this.grid,i=e.itemSource,o=this._itemsBounds,n=0,r=i?Math.min(i.fixedCount,i.itemCount):0;if(this._fixedItemCount=0,this._fixedBarHeight=0,this._fixedHeight=0,this._fixedItemPoints=[],0<r){this._fixedItemPoints.push(n);for(var s=0;s<r&&n<o;s++)n+=this.$_getItemHeight(e,s),this._fixedItemPoints.push(n),this._fixedItemCount++;this._fixedHeight=n,n+=this._fixedBarHeight=e.fixedOptions.rowBarHeight}var a=e.itemCount-this._fixedItemCount;if(this._itemPoints=[n],this._itemCount=0,(this._fullItemCount=0)<a&&n<o){var l=this._topIndex,h=-1;for(this._focusIndex&&(h=this._focusIndex.itemIndex)>=this._fixedItemCount&&h<l+this._fixedItemCount&&(l=this._topIndex=h-this._fixedItemCount),s=l;s<a&&n<o;s++)n+=this.$_getItemHeight(e,s+this._fixedItemCount),this._itemCount++,this._itemPoints.push(n);if(this._fullItemCount=this._itemCount-(o<n?1:0),t&&h>=this._topIndex+this._fixedItemCount+this._fullItemCount){n=0<this.fixedItemCount?this._fixedHeight+e.fixedOptions.rowBarHeight:0,this._topIndex=h-this._fixedItemCount-Math.max(0,this._fullItemCount-1),this._itemPoints=[n],this._itemCount=0,this._fullItemCount=0;var d=e.itemCount-this._fixedItemCount;for(s=this._topIndex;s<d&&n<o;s++)n+=this.$_getItemHeight(e,s+this._fixedItemCount),this._itemCount++,this._itemPoints.push(n);this._fullItemCount=this._itemCount-(o<=n?1:0)}}else this._topIndex=0},n.prototype.$_updateScrollInfo=function(t,e,i){void 0===i&&(i=!1);var o=this._reqScrollBarWidth,n=this._reqScrollBarHeight,r=i?this._tableItemPoints:this._itemPoints,s=r[r.length-1],a=this._layoutsLength,l=e.fitStyle==lt.GridFitStyle.EVEN_FILL;this._hscrolled=a>this._scrollWidth,this._vscrolled=0<this._topIndex||t.itemCount>this._itemCount+this._fixedItemCount||s>this._bodyBounds.height;var h=0<n&&this._hscrolled&&!l,d=0<o&&this._vscrolled;h!=d&&(h?0<o&&(d=s>this._bodyBounds.height-n):0<n&&!l&&(h=a>this._scrollWidth-o)),this._hscrollBar=h,this._vscrollBar=d,this._hscrolled=this._hscrolled||h,this._vscrolled=this._vscrolled||d,this._scrollBarWidth=d?o:0,this._scrollBarHeight=h?n:0,this._scrollWidth-=this._scrollBarWidth},n.prototype.$_recalcScrollInfo=function(t){this._scrollWidth+=this._scrollBarWidth,this._bodyBounds.height+=this._scrollBarHeight,this._gridBounds.height+=this._scrollBarHeight,this._clientRect.height+=this._scrollBarHeight,this.$_updateScrollInfo(t,t.displayOptions,!0),this._bodyBounds.height-=this._scrollBarHeight,this._gridBounds.height-=this._scrollBarHeight,this._clientRect.height-=this._scrollBarHeight},n.prototype.$_adjustVerticals=function(){var t=this._scrollBarHeight,e=this._itemPoints;if(0<t){this._leftContentBounds.height-=t,this._footBounds.y-=t,this._rowBarBounds.height-=t,this._sideContentBounds.height-=t,this._fixedContentBounds.height-=t,this._fixedFooterBounds.y-=t,this._fixedBodyBounds.height-=t,this._nonFixedBounds.height-=t,this._contentBounds.height-=t,this._footerBounds.y-=t,this._bodyBounds.height-=t,this._rightContentBounds.height-=t,this._rightFooterBounds.y-=t,this._rightBodyBounds.height-=t;for(var i=this._bodyBounds.height;e[e.length-2]>i;)this._itemCount--,e.pop();this._fullItemCount=this._itemCount-(e[this._itemCount]>=i?1:0);var o=this._focusIndex?this._focusIndex.itemIndex:-1;if(0<=o&&this._itemCount>this._fullItemCount&&o>=this._topIndex+this._fixedItemCount+this._fullItemCount){for(var n=e[this._itemCount]-e[this._itemCount-1],r=0,s=0;r<n;)r+=e[s+1]-e[s],s++;this._topIndex+=s,this._itemCount-=s-1,this._fullItemCount-=s-1,this._topIndex+this._fixedItemCount+this._itemCount>this.grid.itemCount&&this._itemCount--,e.splice(0,s-1);for(var a=0;a<e.length;a++)e[a]-=r}}if(this._dataBounds.height=e[e.length-1],this._fullItemCount==this._itemCount){var l=e[e.length-1];this._rowBarBounds.height=l}},n.prototype.$_adjustHorizontals=function(t){this._rightContentBounds.x-=this._scrollBarWidth,this.$_calcLeftPos();var e=this._cellPoints,i=e.length,o=this._leftPos,n=o+this._nonFixedBounds.width;this._startCell=this._endCell=this._firstCell;for(var r=0;r<i;r++)if(e[r]>o){this._startCell+=r-1;break}for(r=i-2;0<=r;r--)if(e[r]<n){this._endCell+=r;break}},n.prototype.$_calcTableRowPoints=function(){var t=this._trs,e=this._items,i=this._fixedItemCount,o=this._itemCount+i,n=this._fixedTableRowPoints=[],r=this._tableRowPoints=[],s=0;if(this._fixedTableRowCount=this._tableRowCount=0,this._fixedDataHeight=this._dataHeight=0,0<i){for(var a=this._fixedItemPoints;s<i;s++){var l=this._fixedItemPoints[s];if(n.push(l),this._fixedTableRowCount++,e[s].isData)for(var h=Math.floor((this._fixedItemPoints[s+1]-l)/t),d=Math.round(this._fixedItemPoints[s+1]-l)/t,u=1;u<t;u++)n.push(l+=u%2?h:d),this._fixedTableRowCount++}n.push(this._fixedDataHeight=this._fixedItemPoints[i])}if(0<this.itemCount){for(a=this._itemPoints;s<o;s++)if(l=a[s-i],h=a[s-i+1]-l,r.push(l),this._tableRowCount++,e[s].isData){var _=Math.floor(h/t);for(d=Math.round(h/t),u=1;u<t;u++)r.push(l+=u%2?_:d),this._tableRowCount++}r.push(this._dataHeight=a[this._itemCount]),this._dataHeight+=this._fixedDataHeight}},n.prototype._doMeasure=function(t,e,i){var o=this._grid,n=o.displayOptions,r=o.fixedOptions,s=t.clone();this._refreshMode=n.refreshMode,this._autoRowHeights=n.rowHeight<0,this._items=[],this._trs=this._cellLayouts.dataRows,this._rowGrouped=this.rowGrouped||this.mergedRowGrouped,this._hscrolled=this._vscrolled=!1,this._hscrollBar=this._vscrollBar=!1,this._reqScrollBarWidth=e,this._reqScrollBarHeight=i,this._minRowHeight=n.minTableRowHeight,this._minItemHeight=Math.max(this._minRowHeight*this._trs,n.minRowHeight),1==this._trs&&(this._minRowHeight=this.minItemHeight),o.heightMeasurer.measure(o),this.$_calcFixedCellPoints(r,this._cellLayouts),this.$_calcCellPoints(this._cellLayouts),this.$_calcRightCellPoints(r,this._cellLayouts),this._topContentBounds=s.clone(),this.$_measureTopPane(o),s.topBy(this.topPanelVisible?this._topContentBounds.height:0),this._leftContentBounds=s.clone(),this.$_measureLeftPane(o),s.leftBy(this._leftContentBounds.width),this._sideContentBounds=s.clone(),this._measureSidePane(o),s.leftBy(this._sideContentBounds.width),this.$_measureViewHeights(o,s.clone().move()),this._fixedContentBounds=s.clone(),this.$_measureFixedPane(o),s.leftBy(this._fixedContentBounds.width),this._rightContentBounds=s.clone(),this.$_measureRightPane(o),this._rightContentBounds.x=s.right-this._rightContentBounds.width,s.width-=this._rightContentBounds.width,this._contentBounds=s.clone(),this.$_measureContentPane(o),this._clientRect=t.clone(),this._nonFixedBounds=new ht.Rectangle(this._fixedContentBounds.right,this._fixedContentBounds.y,t.width-this._fixedContentBounds.right-this.rightContentBounds.width,this._fixedContentBounds.height),this._itemHeight=this._calcDefaultRowHeight(o),this._itemsBounds=t.height-this._topContentBounds.height-this._headerBounds.height-this._summaryBounds.height-this._footBounds.height+1,this.$_calcItemPoints(),this.$_calcScrollWidth(t),this.$_updateScrollInfo(o,n),this.$_adjustVerticals(),this.$_adjustHorizontals(t);var a=this._fitStyle;(this._fitStyle=this.$_checkFitting(n,this._scrollWidth))?(this.$_fitColumns(n,this.cellLayouts,this.scrollWidth),this._contentBounds.width=this._layoutsLength):o._activeCellLayout.$_clearFitWidths(),(this._fitStyleChanged=this._fitStyle!=a)&&o.clearRowHeights(!1),this._gridBounds=new ht.Rectangle(this._fixedContentBounds.x,this._fixedContentBounds.y,t.right-this._fixedContentBounds.x-this._scrollBarWidth,+this._footerBounds.y),this._clientRect.width-=this._scrollBarWidth,this._clientRect.height-=this._scrollBarHeight,this._nonFixedBounds.width-=this._scrollBarWidth,this._topContentBounds.width-=this._scrollBarWidth},n.prototype.$_layoutTopPane=function(t,e){var i=this._topContentBounds;this.topPanelVisible?e.setRect(i):e.setBounds(-10,-10,1,1),this._doLayoutTopPane(t,e)},n.prototype._doLayoutTopPane=function(t,e){},n.prototype.$_layoutLeftPane=function(t,e){var i,o=this._leftContentBounds;(e.visible=!o.isEmpty)&&(e.setRect(o),(i=t.headView).visible=t.header.visible,((i=t.sumView).visible=t.headerSummaries.visible)&&(i.setRect(this._sumBounds),i.layoutContent(this)),((i=t.footView).visible=t.footers.visible)&&(i.setRect(this._footBounds),i.layoutContent(this)),t.rowBarContainer.visible=t.rowIndicator.visible||t.stateBar.visible||t.checkBar.visible)},n.prototype._layoutSidePane=function(t,e){var i=this._sideContentBounds;e.setRect(i),(e.visible=!i.isEmpty)&&e.layoutContent(this,i.width,i.height)},n.prototype._prepareItems=function(){for(var t=this._topIndex+this._fixedItemCount,e=0;e<this._fixedItemCount;e++){var i=this._rs.getItem(e);this._items.push(i)}for(e=0;e<this._itemCount;e++)i=this._rs.getItem(e+t),this._items.push(i)},n.prototype.$_layoutFixedPane=function(t,e){var i,o=this._fixedContentBounds;(e.visible=!o.isEmpty)?(e.setRect(o),((i=t.fixedHeaderView).visible=t.header.visible)&&(i.setRect(this._fixedHeaderBounds),i.layoutContent(this)),((i=t.fixedHeaderSummaryView).visible=t.headerSummaries.canShow)&&(i.setRect(this._fixedSummaryBounds),i.layoutContent(this)),((i=t.fixedFooterView).visible=t.footers.canShow)&&(i.setRect(this._fixedFooterBounds),i.layoutContent(this)),(i=t.fixedBodyView).visible=!0,this._offsetBody||(this._offsetBody=i),e.layoutContent(this,o.width,o.height)):(t.fixedHeaderView.visible=!1,t.fixedHeaderSummaryView.visible=!1,t.fixedFooterView.visible=!1,t.fixedBodyView.visible=!1,t.fixedMergeView.visible=!1)},n.prototype.$_layoutRightPane=function(t,e){var i,o=this._rightContentBounds;(e.visible=!o.isEmpty)?(this._rightFixed||this._hscrolled||(o.x=this._contentBounds.right),e.setRect(o),((i=t.rightHeaderView).visible=t.header.visible)&&(i.setRect(this._rightHeaderBounds),i.layoutContent(this)),((i=t.rightHeaderSummaryView).visible=t.headerSummaries.canShow)&&(i.setRect(this._rightSummaryBounds),i.layoutContent(this)),((i=t.rightFooterView).visible=t.footers.canShow)&&(i.setRect(this._rightFooterBounds),i.layoutContent(this)),(i=t.rightBodyView).visible=!0,this._offsetBody||(this._offsetBody=i),e.layoutContent(this,o.width,o.height)):(t.rightHeaderView.visible=!1,t.rightHeaderSummaryView.visible=!1,t.rightFooterView.visible=!1,t.rightBodyView.visible=!1,t.rightMergeView.visible=!1)},n.prototype.$_layoutContentPane=function(t,e){var i,o=this._contentBounds;(e.visible=!o.isEmpty)&&(o.x-=this._leftPos,e.setRect(o),((i=t.headerView).visible=t.header.visible)&&(this._headerBounds.width=o.width,i.setRect(this._headerBounds),i.layoutContent(this)),((i=t.headerSummaryView).visible=t.headerSummaries.canShow)&&(this._summaryBounds.width=o.width,i.setRect(this._summaryBounds),i.layoutContent(this)),((i=t.footerView).visible=t.footers.canShow)&&(this._footerBounds.width=o.width,i.setRect(this._footerBounds),i.layoutContent(this)),i=t.bodyView,this._bodyBounds.width=o.width,this._offsetBody||(this._offsetBody=i),e.layoutContent(this,o.width,o.height))},n.prototype.$_layoutWatingPane=function(t,e){var i=t.bounds.clone();e.setRect(i),e.layoutContent(this,i.width,i.height)},n.prototype._doLayout=function(t,e){var i;this._prepareItems(),this.$_calcTableRowPoints(),i=t._topContentPane,this.$_layoutTopPane(t,i),i=t._leftContentPane,this.$_layoutLeftPane(t,i);var o=Date.now();i=t._fixedContentPane,this.$_layoutFixedPane(t,i),i=t._rightContentPane,this.$_layoutRightPane(t,i),i=t._contentPane,this.$_layoutContentPane(t,i),ne.Utils.trace("LAYOUT CONTENTS: "+(Date.now()-o))},n.prototype.$_adjustHeader=function(t,e,i,o){var n=t.fixedHeaderView,r=t.rightHeaderView,s=t.headerView,a=t.header.height,l=s.height,h=0,d=!1;if(i&&(d=n.$_checkHeight()),!d&&o&&(d=r.$_checkHeight()),!d&&e&&(d=s.$_checkHeight()),d){var u=[],_=0;i&&(n.$_getHeights(u),0<a?n.$_distributeHeights(a,u):_=Math.max(_,n.$_adjustHeights(u))),o&&(r.$_getHeights(u),0<a?r.$_distributeHeights(a,u):_=Math.max(_,r.$_adjustHeights(u))),e&&(s.$_getHeights(u),0<a?s.$_distributeHeights(a,u):_=Math.max(_,s.$_adjustHeights(u))),a<0&&(h+=_-l,this._headBounds.height=_,i&&this._fixedHeaderBounds.height!=_&&(this._fixedHeaderBounds.height=_,n.setRect(this._fixedHeaderBounds),n.$_adjustHeights(u)),o&&this._rightHeaderBounds.height!=_&&(this._rightHeaderBounds.height=_,r.setRect(this._rightHeaderBounds),r.$_adjustHeights(u)),e&&this._headerBounds.height!=_&&(this._headerBounds.height=_,s.setRect(this._headerBounds),s.$_adjustHeights(u)))}return h},n.prototype._adjustLayout=function(t,e){var i,o=this._autoRowHeights,n=t._fixedContentPane,r=t._rightContentPane,s=t._contentPane,a=t.fixedHeaderView,l=t.rightHeaderView,h=t.headerView,d=t.headView.visible,u=n.visible,_=r.visible,c=s.visible,p=0,f=0,g=this.$_adjustHeader(t,c,u&&h.visible&&a.visible,_&&l.visible);if(0!=g&&(this._fixedSummaryBounds.y=this._rightSummaryBounds.y=this.summaryBounds.y=this._sumBounds.y+=g),t.headerSummaries.canShow&&0!=g&&(u&&(t.fixedHeaderSummaryView.y=this._fixedSummaryBounds.y),_&&(t.rightHeaderSummaryView.y=this._rightSummaryBounds.y),c&&(t.headerSummaryView.y=this._summaryBounds.y),d&&(t.sumView.y=this._sumBounds.y)),e.topBy(this._headBounds.height+this._sumBounds.height),0!=g&&(f=this._sumBounds.bottom,p=Math.min(e.height,this._rowBarBounds.height),this._fixedBodyBounds.y=this.bodyBounds.y=this._rightBodyBounds.y=f,this._fixedBodyBounds.height=this._bodyBounds.height=this._rightBodyBounds.height=p),(i=t.fixedBodyView).visible&&i.setRect(this._fixedBodyBounds),(i=t.bodyView).visible&&i.setRect(this._bodyBounds),(i=t.rightBodyView).visible&&i.setRect(this._rightBodyBounds),this.$_layoutBodyRows(t,u,c,_,this._bodyBounds.height),this.$_adjustTableRowHeights(),o&&this.$_recalcScrollInfo(t),0<this._topIndex){var m=o?this._minItemHeight:this._itemHeight;if(this._contentBounds.y+this._dataBounds.bottom+m<=this._gridBounds.bottom&&(o?this.$_fillBottomAuto(t,u,c,_,this._bodyBounds.height):this.$_fillBottomFixed(t,u,c,_,this._bodyBounds.height)),0==this._topIndex){var y=this._vscrollBar;this.$_recalcScrollInfo(t),this._vscrollBar!=y&&this._fitStyle&&(this.$_layoutBodyRows(t,u,c,_,this._bodyBounds.height,!1),this.$_adjustTableRowHeights())}}t.fixedBodyView.visible&&t.fixedBodyView.$_resetCellHeights2(this,o),t.bodyView.visible&&t.bodyView.$_resetCellHeights2(this,o),t.rightBodyView.visible&&t.rightBodyView.$_resetCellHeights2(this,o);var v=this._tableItemPoints;this._dataBounds.height=v[v.length-1],f=this._sumBounds.bottom,p=Math.min(e.height,this._dataBounds.height),this._rowBarBounds.y=f,this._rowBarBounds.height=p,u&&t._fixedContentPane.layoutBars(this,this._fixedContentBounds.width,this._fixedContentBounds.height),_&&(this._fixedContentBounds,t._rightContentPane.layoutBars(this,this._rightContentBounds.width,this._rightContentBounds.height)),(i=t.headView).visible&&(i.setRect(this._headBounds),i.layoutContent(this)),t.rowBarContainer.setRect(this._rowBarBounds),t.rowBarContainer.layoutContent(this)},n.prototype.$_layoutBodyRows=function(t,e,i,o,n,r){void 0===r&&(r=!0);var s,a=e&&0<this._fixedCellCount?t.fixedBodyView:null,l=i&&0<this.cellCount?t.bodyView:null,h=0<(o&&this._rightCellCount)?t.rightBodyView:null;if(r&&this.$_checkColumnMerging(t),a&&(s=a)._doPrepareContent(this),h&&(s=h)._doPrepareContent(this),l&&(s=l)._doPrepareContent(this),s){var d,u,_,c,p,f=t.itemSource,g=f?Math.min(f.fixedCount,f.itemCount):0,m=this._autoRowHeights,y={lm:this,grid:t,topIndex:this._topIndex,fixedItemCount:g,mergeFixed:t.fixedOptions.mergeRows,mergedRowGrouped:this.mergedRowGrouped,rowGroupFields:this.rowGroupFields},v=l&&[],w=a&&[],C=h&&[],x=this._minRowHeight,b=s._trs,I=0,E=0,S=0;this._fixedItemCount=0,this._itemCount=0,this._fixedHeight=0;var R=[],D=[],T=[];if(this._fixedTableRowCount=0,this._tableRowCount=0,this._fixedDataHeight=this._dataHeight=0,this._items=[],0<g){R.push(E),D.push(S);for(var k=0;k<g&&E<n;k++){p=f.getItem(k),this._items.push(p);var M=b;if(a&&a.layoutRow(y,w,k,I,p),l&&l.layoutRow(y,v,k,I,p),h&&h.layoutRow(y,C,k,I,p),m){if(u=p.height,isNaN(u)){_=[];for(var L=0;L<M;L++)_[L]=0;if(p.heights=_,a){var F=a._tbody.children;for(L=0;L<M;L++)_[L]=Math.round(Math.max(_[L],x,F[I+L].offsetHeight))}if(l)for(F=l._tbody.children,L=0;L<M;L++)_[L]=Math.round(Math.max(_[L],x,F[I+L].offsetHeight));if(h)for(F=h._tbody.children,L=0;L<M;L++)_[L]=Math.round(Math.max(_[L],x,F[I+L].offsetHeight))}else _=p.heights=p.heights||[u];for(L=u=0;L<M;L++)u+=_[L],D.push(S+=_[L]);f.setRowHeight(p,u,!1)}else{d=S,u=this._fixedItemPoints[k+1]-this._fixedItemPoints[k],c=Math.floor(u/M);var V=Math.round(u/M);for(L=0;L<M-1;L++)D.push(S+=L%2?V:c);D.push(S=d+u)}this._fixedTableRowCount+=M,E+=u,R.push(E),this._fixedItemCount++,this._fixedDataHeight=E,I+=M}(this._fixedHeight=E)<n&&(u=0,a&&(u=a.layoutFixedBar(this,I)),l&&(u=l.layoutFixedBar(this,I)),h&&(u=h.layoutFixedBar(this,I)),I++,E+=u,S+=u)}var O=t.itemCount-this._fixedItemCount,N=[E];if(T.push(E),this._itemCount=0,(this._fullItemCount=0)<O&&E<n){var P=this._topIndex,B=-1;for(this._focusIndex&&(B=this._focusIndex.itemIndex)>=this._fixedItemCount&&B<P+this._fixedItemCount&&(P=this._topIndex=B-this._fixedItemCount),k=P;k<O&&E<n;k++){p=f.getItem(k+g),this._items.push(p),M=p.isData?b:1;var A=this._fixedItemCount+k-P;if(a&&a.layoutRow(y,w,A,I,p),l&&l.layoutRow(y,v,A,I,p),h&&h.layoutRow(y,C,A,I,p),p.isData)if(m){if(u=p.height,isNaN(u)){for(p.heights=_=[],L=0;L<M;L++)_[L]=0;if(a)for(F=a._tbody.children,L=0;L<M;L++)_[L]=Math.round(Math.max(_[L],x,F[I+L].offsetHeight));if(l)for(F=l._tbody.children,L=0;L<M;L++)_[L]=Math.round(Math.max(_[L],x,F[I+L].offsetHeight)),ne.Utils.trace(k,_[L]);if(h)for(F=h._tbody.children,L=0;L<M;L++)_[L]=Math.round(Math.max(_[L],x,F[I+L].offsetHeight))}else _=p.heights=p.heights||[u];for(L=u=0;L<M;L++)u+=_[L],T.push(S+=_[L]);f.setRowHeight(p,u,!1)}else{for(d=S,u=this._itemPoints[k-P+1]-this._itemPoints[k-P],c=Math.floor(u/M),V=Math.round(u/M),L=0;L<M-1;L++)T.push(S+=L%2?V:c);T.push(S=d+u)}else u=this._itemPoints[k-P+1]-this._itemPoints[k-P],T.push(S+=u);this._tableRowCount+=M,E+=u,N.push(E),this._itemCount++,this._dataHeight=E,I+=M}this._fullItemCount=this._itemCount-(n<E?1:0),m&&(a&&a.$_resetHeights(D,T),l&&l.$_resetHeights(D,T),h&&h.$_resetHeights(D,T)),ne.Utils.ieOld&&(a&&a.$_resetCellStyleHeights(D,T),l&&l.$_resetCellStyleHeights(D,T),h&&h.$_resetCellStyleHeights(D,T))}this._fixedItemPoints=R,this._itemPoints=N,this._fixedTableRowPoints=D,this._tableRowPoints=T,this._dataBounds.height=N[N.length-1];var $=this._items.length=this.fixedItemCount+this._itemCount;e&&a.cleanRows($,I),i&&l.cleanRows($,I),o&&h.cleanRows($,I)}},n.prototype.$_adjustTableRowHeights=function(){if(this.fixedItemCount+this._itemCount!=0){var t=this._items,e=this._trs;if(this._offsetBody&&(ne.Utils.isChromium||ne.Utils.isSafari)){var i=this._offsetBody._tbody.rows,o=i[i.length-1];if(isNaN(this._zoom)){var n=Math.round(1e3*o.offsetHeight)/1e3,r=Math.round(1e3*o.getBoundingClientRect().height)/1e3;n!=r||n!=this._tableRowPoints[1]-this._tableRowPoints[0]?this._zoom=n!=r?r/n:r/this._tableRowPoints[1]:this._zoom=1}if(!isNaN(this._zoom)&&1!=this._zoom){var s=this._fixedTableRowPoints,a=this._tableRowPoints,l=0,h=0,d=0,u=0;if((s[0]=0)<this._fixedItemCount){u=a[0]-s[s.length-1];for(var _=0,c=this._fixedItemCount*e;_<c;_++,h++)s[_+1]=d+=i[h].getBoundingClientRect().height;h++,l=this._fixedItemCount}var p=0;for(a[0]=d+=u,_=0,c=this._itemCount;_<c;_++,l++)if(t[l].isData)for(var f=0;f<e;f++)a[p+1]=d+=i[h++].getBoundingClientRect().height,p++;else a[p+1]=d+=i[h++].getBoundingClientRect().height,p++}}var g=this._fixedTableRowPoints,m=this._fixedTableItemPoints=[0],y=0;for(_=1,c=this._fixedItemCount;_<=c;_++,y++)m.push(g[_*e]);for(g=this._tableRowPoints,m=this._tableItemPoints=[g[0]],h=_=0,c=this._itemCount;_<c;_++,y++)t[y].isData?m.push(g[h+=e]):m.push(g[++h])}else this._tableItemPoints=this._tableRowPoints.slice()},n.prototype.$_fillBottomFixed=function(t,e,i,o,n){var r=Math.floor((this._gridBounds.bottom-this._contentBounds.y-this._dataBounds.bottom)/this._itemHeight);this._topIndex=Math.max(0,this._topIndex-r),this.$_calcItemPoints(),this._prepareItems(),this.$_calcTableRowPoints(),this.$_layoutBodyRows(t,e,i,o,n),this.$_adjustTableRowHeights()},n.prototype.$_fillBottomAuto=function(t,e,i,o,n){for(;0<this._topIndex&&this._gridBounds.bottom-this._contentBounds.y-this._dataBounds.bottom>this._minItemHeight;){var r=this._tableItemPoints,s=r[1]-r[0];if(this._topIndex--,this.$_calcItemPoints(!1),this._prepareItems(),this.$_calcTableRowPoints(),this.$_layoutBodyRows(t,e,i,o,n),s+r[r.length-1]+this._contentBounds.y+this._dataBounds.y>this._gridBounds.bottom){this._topIndex++,this.$_calcItemPoints(),this._prepareItems(),this.$_calcTableRowPoints(),this.$_layoutBodyRows(t,e,i,o,n);break}}this.$_adjustTableRowHeights()},n.prototype.$_prepareColumnMerges=function(t,e,i,o,n){for(var r=this._fixedItemCount,s=this._itemCount,a=!1,l=0,h=e.length;l<h;l++){var d=e[l],u=d&&d.layout;if(u&&u.canMerge()){var _=u._merges;_||(_=new Rt.ColumnMergeManager(u),u._merges=_),_.refreshRooms(i,o,n),_.prepareCells(r,s),t.addColumnRooms(this,d,_),d.layout.$_setMerged(!0),a=!0}}return a},n.prototype.$_checkColumnMerging=function(t){var e=t.fixedOptions,i=e.rowCount,o=this._contentBounds.height/this._minItemHeight-i,n=this._topIndex,r=this._layoutCount,s=t.mergeView,a=t.fixedMergeView,l=t.rightMergeView,h=0<i&&e.mergeRows,d=i+n,u=Math.min(t.itemCount-1,i+n+o-1),_=0<this._fixedLayoutCount,c=0<this._rightLayoutCount;if(s.clearRooms(),_&&a.clearRooms(),c&&l.clearRooms(),_){var p=t.getHorzColumns(0,this._fixedLayoutCount);this._fixedColumnMerged=this.$_prepareColumnMerges(a,p,d,u,h)}if(c){var f=t.getHorzColumns(r-this._rightLayoutCount,this._rightLayoutCount);this._rightColumnMerged=this.$_prepareColumnMerges(l,f,d,u,h)}var g=t.getHorzColumns(this._fixedLayoutCount,r-this._fixedLayoutCount-this._rightLayoutCount);this._columnMerged=this.$_prepareColumnMerges(s,g,d,u,h)},n);function n(t){var e=i.call(this)||this;return e._zoom=NaN,e._refreshMode=lt.RefreshMode.ALL,e._leftPos=0,e._rightFixed=!0,e._footerCount=0,e._headerSummaryCount=0,e._layoutCount=0,e._fixedLayoutCount=0,e._rightLayoutCount=0,e._firstLayout=0,e._lastLayout=0,e._layoutsLength=0,e._layouts=[],e._layoutPoints=[],e._fixedLayoutPoints=[],e._rightLayoutPoints=[],e._cellCount=0,e._fixedCellCount=0,e._rightCellCount=0,e._firstCell=0,e._lastCell=0,e._startCell=0,e._endCell=0,e._cellCounts=[],e._fixedCellCounts=[],e._rightCellCounts=[],e._cellPoints=[],e._fixedCellPoints=[],e._rightCellPoints=[],e._trs=1,e._rowGrouped=!1,e._items=[],e._topIndex=0,e._itemCount=0,e._fixedItemCount=0,e._fullItemCount=0,e._fixedItemPoints=[],e._itemPoints=[],e._fixedTableRowCount=0,e._tableRowCount=0,e._fixedTableRowPoints=[],e._tableRowPoints=[],e._fixedTableItemPoints=[],e._tableItemPoints=[],e._fixedDataHeight=0,e._dataHeight=0,e._fixedBarWidth=0,e._rightBarWidth=0,e._fixedBarHeight=0,e._columnMerged=!1,e._fixedColumnMerged=!1,e._rightColumnMerged=!1,e._itemsBounds=0,e._fixedWidth=0,e._rightWidth=0,e._fixedHeight=0,e._autoRowHeights=!1,e._minRowHeight=zt.DisplayOptions.MIN_TABLE_ROW_HEIGHT,e._minItemHeight=zt.DisplayOptions.MIN_TABLE_ROW_HEIGHT,e._itemHeight=0,e._hscrolled=!1,e._vscrolled=!1,e._hscrollBar=!1,e._vscrollBar=!1,e._scrollBarWidth=0,e._scrollBarHeight=0,e._scrollWidth=0,e._fitStyle=void 0,e._fitStyleChanged=!1,e._grid=t,e}e.GridLayoutManager=o});t(ee);ee.GridLayoutManager;var ie=e(function(t,e){Object.defineProperty(e,"__esModule",{value:!0});var o="rowspan",n="colspan",w=(i.prototype.dispose=function(){this.cell=null,this.layout=null},i.prototype.span=function(){this.spanned=!0,this.clear(!1)},i.prototype.clear=function(t){1<this.colSpan&&(this.colSpan=1,this.cell.removeAttribute(n)),1<this.rowSpan&&(this.rowSpan=1,this.cell.removeAttribute(o)),this.visible!==t&&(this.visible=t,this.cell.style.display=t?"":"none");var e=this.cell.firstElementChild;return this.className&&(this.cell.className=this.className=""),this.rendererClass&&(e.className=this.rendererClass=""),this.text&&(e[ne.Utils.TextProp]=this.text=""),this.html&&(e.innerHTML=this.html=""),this},i.prototype.setColSpan=function(t){return this.colSpan!=t&&(1<(this.colSpan=t)?this.cell.colSpan=t:this.cell.removeAttribute(n)),this},i.prototype.setRowSpan=function(t){return this.rowSpan!=t&&(1<(this.rowSpan=t)?this.cell.rowSpan=t:this.cell.removeAttribute(o)),this},i.prototype.setVisible=function(t){return t!==this.visible&&(this.visible=t,this.cell.style.display=t?"":"none"),this},i.prototype.set=function(t,e,i){return this.colSpan!=t&&(1<(this.colSpan=t)?this.cell.colSpan=t:this.cell.removeAttribute(n)),this.rowSpan!=e&&(1<(this.rowSpan=e)?this.cell.rowSpan=e:this.cell.removeAttribute(o)),this.visible!==i&&(this.visible=i,this.cell.style.display=i?"":"none"),this},i.prototype.refreshFormatters=function(t){var e;this.textFormatter=null,this.numberFormatter=null,this.datetimeWriter=null,this.booleanFormatter=null,(e=t.textFormat)&&(this.textFormatter&&this.textFormatter.format==e||(this.textFormatter=Et.TextFormatter.getFormatter(e))),(e=t.numberFormat)&&(this.numberFormatter&&this.numberFormatter.format==e||(this.numberFormatter=W.DecimalFormatter.getFormatter(e))),(e=t.datetimeFormat)&&(this.datetimeWriter&&this.datetimeWriter.format==e||(this.datetimeWriter=G.DateTimeWriter.getFormatter(e))),(e=t.booleanFormat)&&(this.booleanFormatter&&this.booleanFormatter.format==e||(this.booleanFormatter=U.BooleanFormatter.getFormatter(e))),this.prefix=t.prefix,this.suffix=t.suffix},i.prototype.setText=function(t){t!==this.text&&(this.cell.firstElementChild[ne.Utils.TextProp]=(this.text=t)||"")},i.prototype.setHtml=function(t){t!==this.html&&(this.cell.firstElementChild.innerHTML=(this.html=t)||"")},i.prototype.setClassName=function(t){return t!=this.className&&(this.cell.className=this.className=t,!0)},i.prototype.setRendererClassName=function(t){t!=this.rendererClass&&(this.cell.firstElementChild.className=this.rendererClass=t)},i);function i(t){this.cell=null,this.layout=null,this.visible=void 0,this.summaryIndex=0,this.spanned=!1,this.rowSpan=1,this.colSpan=1,this.className="",this.rendererClass="",this.style=new Dt.ColumnSummaryStyle,this.text=void 0,this.html=void 0,this.cell=t,this.text=t[ne.Utils.TextProp]}e.SummaryTableCell=w;var r,s=(r=Yt.SimpleTableElement,oe.__extends(a,r),a.prototype._doDispose=function(){r.prototype._doDispose.call(this)},a.prototype.tableCellByCell=function(t){for(var e=0;e<this._cells.length;e++)for(var i=this._cells[e],o=0;o<i.length;o++){var n=i[o];if(n&&n.cell===t)return n}return null},a.prototype.layoutByCell=function(t){var e=this.tableCellByCell(t);return e&&e.layout},a.prototype.columnByCell=function(t){var e=this.layoutByCell(t);return e&&e._columnObj},a.prototype._getCellCount=function(t){return t.cellCount-t.fixedCellCount-t.rightCellCount},a.prototype._getCellWidth=function(t,e){return t.getCellWidth(e)},a.prototype._doDrawCell=function(t,e,i){},a.prototype._doRender=function(t){},a.prototype._getFirstCell=function(t){return t._firstCell},a.prototype._getLastCell=function(t){return t._lastCell},a.prototype._getStartCell=function(t){return t.getStartCell()},a.prototype._getEndCell=function(t){return t.getEndCell()},a.prototype._prepareCellContent=function(t,e){return ne.getDoc(t).createElement("div")},a.prototype._doMeasure=function(t,e,i){for(var o=t.layoutManager,n=this._getSummaryRows(o),r=this._getCollection(),s=this._getSummaryHeight(t.heightMeasurer),a=0,l=this._rowPoints=[a],h=0,d=0,u=r.visibleCount;d<u;d++){var _=r.getVisible(d),c=_.height;c<=0&&(c=s*n),c=Math.max(_.minHeight,c);for(var p=Math.floor(c/n),f=0,g=0;g<n-1;g++)a+=p,l.push(a),f+=p;a+=c-f,l.push(a),h+=c}return jt.Size.create(e,h)},a.prototype._doPrepareTableExtents=function(t){},a.prototype._doLayoutContent=function(t){var e=t.grid,i=this._getCollection(),o=this._getSummaryCount(t),n=t.cellLayouts._dataCells,r=n.length,s=this._getFirstCell(t),a=this._getStartCell(t)-s,l=this._getEndCell(t)-s;this._refreshCells(t,o,n,this._tbody),this.$_refreshSpans(t,r*o);for(var h=0;h<o;h++)for(var d=i.getVisible(h),u=0;u<r;u++){var _=this._cells[h*r+u],c=this._getTableRow(t,h*r+u);ne.Utils.setClassName(c,d.styleName||"");for(var p=a;p<=l;p++){var f=_[p];if(f.visible){var g=f.layout;if(g.isProxy)f.setText(""),f.setClassName(d.getCellStyleName());else if(g instanceof Tt.CellLayoutGroupItem)f.setText(""),f.setClassName(d.getCellStyleName());else{var m=d.getCell(g);this._updateCell(e,d,m,f)}}}}},a.prototype._updateCell=function(t,e,i,o){var n=i,r=n.getSummary(),s=e.getCellStyle(i,o.style.clear());if(o.setClassName(s.styleName),o.setRendererClassName(this._getRendererStyle()),o.refreshFormatters(s),r){e.getCellFormatters(r,o);var a=n.getTemplate(o);void 0===a?o.setText(n.getDisplayText(o)):o.setHtml(a)}else o.setText("")},a.prototype._getTableRowHeight=function(t,e){return this._rowPoints[e+1]-this._rowPoints[e]},a.prototype._refreshCells=function(t,e,i,o){for(var n=this._cells,r=o.children,s=r.length,a=i.length,l=this._getFirstCell(t),h=this._getLastCell(t)-l+1,d=n.length;d<s;d++)n.push([]);for(var u=d=0;d<e&&u<s;d++)for(var _=0;_<a;_++){for(var c=n[u],p=r[u].children,f=i[_],g=0;g<h;g++){var m=f[g+l],y=c[g];y?y.cell!==p[g]||y.layout!=m&&(y.layout=m,y.clear(!0)):(y=c[g]=new w(p[g])).layout=m,y.spanned=!1,y.summaryIndex=d}for(u++,g=h;g<c.length;g++)c[g].dispose();c.length=h}for(u=s;u<n.length;u++){var v=n[u];for(g=0;g<v.length;g++)v[g].dispose(),v[g]=null}n.length=s},a.prototype.$_refreshSpans=function(t,e){for(var i=this._getFirstCell(t),o=this._getFirstCell(t)-i,n=this._getLastCell(t)-i,r=0;r<e;r++)for(var s=this._cells[r],a=s.length,l=o;l<=n;l++){var h=s[l],d=h.layout,u=d.parent,_=u&&u.vertical;if(!h.spanned)if(d.isProxy)h.clear(!1);else{var c=0,p=this._getSpanOf(d,h.summaryIndex)-1;if(0<p){var f=0,g=d.vindex+1;if(_)for(;f++<p&&f<e;)c+=u.getVisible(g++)._dspan,this._cells[r+f][l].span();else for(;f++<p&&l-o+f<a&&g<u.visibleCount;)c+=u.getVisible(g++)._cspan,s[l+f].span()}d.isNull&&h.clear(!0),_?h.set(d._cspan,d._dspan+c,!0):h.set(d._cspan+c,d._dspan,!0)}}},a.prototype._doPrepareTableRow=function(t,e,i,o){r.prototype._doPrepareTableRow.call(this,t,e,i,o)},a);function a(t,e,i){var o=r.call(this,t,e,i)||this;return o._rowPoints=[],o._cells=[],o}e.SummaryElement=s});t(ie);ie.SummaryTableCell,ie.SummaryElement;var se=e(function(t,e){Object.defineProperty(e,"__esModule",{value:!0});var i,o=(i=ie.SummaryElement,oe.__extends(n,i),n.prototype._doDispose=function(){i.prototype._doDispose.call(this)},n.prototype._getCssSelector=function(){return"rg-footer"},n.prototype._getRendererStyle=function(){return"rg-footer-renderer"},n.prototype._getSummaryRows=function(t){return t.footerRows},n.prototype._getCollection=function(){return this.model},n.prototype._getSummaryHeight=function(t){return t.footerHeight},n.prototype._getSummaryCount=function(t){return t.footerCount},n.prototype._getSpanOf=function(t,e){return t.getFooterSpan(e)},n.prototype._getTableRowCount=function(t){return t.footerRows*t.footerCount},n.prototype._getSummaryItem=function(t,e){return t.firstColumn.footers.get(e)},n);function n(t,e){return i.call(this,t,e,"footerView")||this}e.FooterElement=o;var r,s=(r=o,oe.__extends(a,r),a.prototype._getCssSelector=function(){return"rg-fixed-footer"},a.prototype._getExplicitWidth=function(t){return t.fixedWidth-t.fixedBarWidth},a.prototype._getFirstCell=function(t){return this._getStartCell(t)},a.prototype._getLastCell=function(t){return this._getEndCell(t)},a.prototype._getStartCell=function(t){return 0},a.prototype._getEndCell=function(t){return t.fixedCellCount-1},a.prototype._getCellCount=function(t){return t.fixedCellCount},a.prototype._getCellWidth=function(t,e){return t.getFixedCellWidth(e)},a);function a(){return null!==r&&r.apply(this,arguments)||this}e.FixedFooterElement=s;var l,h=(l=o,oe.__extends(d,l),d.prototype._getCssSelector=function(){return"rg-fixed-footer"},d.prototype._getFirstCell=function(t){return this._getStartCell(t)},d.prototype._getLastCell=function(t){return this._getEndCell(t)},d.prototype._getStartCell=function(t){return t.cellCount-t.rightCellCount},d.prototype._getEndCell=function(t){return t.cellCount-1},d.prototype._getCellCount=function(t){return t.rightCellCount},d.prototype._getCellWidth=function(t,e){return t.getRightCellWidth(e)},d);function d(){return null!==l&&l.apply(this,arguments)||this}e.RightFooterElement=h});t(se);se.FooterElement,se.FixedFooterElement,se.RightFooterElement;var ae=e(function(t,e){Object.defineProperty(e,"__esModule",{value:!0}),e.$_instanceOf=function(t,e){return"object"==typeof t&&0<=Object.prototype.toString.call(t).indexOf(e)},e._gk="dkdl"});t(ae);ae.$_instanceOf,ae._gk;var le=e(function(t,e){Object.defineProperty(e,"__esModule",{value:!0});var o,i=(o=re.Base,oe.__extends(n,o),_dp(n,"container",{get:function(){return this._container}}),_dp(n,"name",{get:function(){return this._name}}),_dp(n,"active",{get:function(){return this._active}}),_dp(n,"dragging",{get:function(){return this._dragging}}),_dp(n,"startWhenCreated",{get:function(){return!1}}),_dp(n,"completed",{get:function(){return this._completed}}),_dp(n,"linkable",{get:function(){return!1}}),n.prototype.activate=function(){this._active||(this._doActivate(),this._active=!0)},n.prototype.deactivate=function(){this._active&&(this.cancel(),this._doDeactivate(),this._active=!1)},n.prototype.start=function(t,e,i,o){return void 0===o&&(o=!1),this.cancel(),!(!this._active||!this._doStart(t,e,i,o)||(this._currentX=this._startX=e,this._currentY=this._startY=i,this._dragging=!0,this._completed=!1,this._showFeedback(e,i),0))},n.prototype.drag=function(t,e,i){return!(!this._dragging||(this._currentX=e,this._currentY=i,!this._doDrag(t,e,i))||(this._moveFeedback(e,i),0))},n.prototype.cancel=function(){try{if(this._dragging)try{this._dragging=!1,this._doCanceled(this._currentX,this._currentY)}finally{this._doEnded()}}finally{this._hideFeedback()}},n.prototype.drop=function(t,e,i){try{if(this._dragging)try{this._currentX=e,this._currentY=i,this._dragging=!1,this._canAccept(t,e,i)?(this._doCompleted(t,e,i),this._completed=!0):this._doCanceled(e,i)}finally{this._doEnded()}}finally{this._hideFeedback()}},n.prototype.getRequest=function(){return null},n.prototype.getNextRequest=function(t,e){return null},_dp(n,"currentX",{get:function(){return this._currentX}}),_dp(n,"currentY",{get:function(){return this._currentY}}),n.prototype._showFeedback=function(t,e){},n.prototype._moveFeedback=function(t,e){},n.prototype._hideFeedback=function(){},n.prototype._doActivate=function(){},n.prototype._doDeactivate=function(){},n.prototype._doStart=function(t,e,i,o){return!0},n.prototype._doDrag=function(t,e,i){return!0},n.prototype._doCanceled=function(t,e){},n.prototype._canAccept=function(t,e,i){return!0},n.prototype._doCompleted=function(t,e,i){},n.prototype._doEnded=function(){},n);function n(t,e){var i=o.call(this)||this;return i._active=!1,i._completed=!1,i._dragging=!1,i._currentX=0,i._currentY=0,i._container=t,i._name=e,i}e.DragTracker=i});t(le);le.DragTracker;var he=e(function(t,e){Object.defineProperty(e,"__esModule",{value:!0});var o,i=(o=re.Base,oe.__extends(n,o),n.prototype._doDispose=function(){this._dragTracker=null,this._previous=null,this._owner=null,this._mouseEventTarget=null,o.prototype._doDispose.call(this)},_dp(n,"owner",{get:function(){return this._owner}}),_dp(n,"name",{get:function(){return this._name}}),_dp(n,"previous",{get:function(){return this._previous}}),_dp(n,"dragTracker",{get:function(){return this._dragTracker},set:function(t){t!==this._dragTracker&&(this._dragTracker&&this._dragTracker.deactivate(),this._dragTracker=t,this._dragTracker&&this._dragTracker.activate())}}),_dp(n,"dragging",{get:function(){return this._dragTracker&&this._dragTracker.dragging}}),_dp(n,"touchManager",{get:function(){return this._touchManager}}),_dp(n,"mouseX",{get:function(){return this._mouseX}}),_dp(n,"mouseY",{get:function(){return this._mouseY}}),n.prototype.findElementAt=function(t,e,i){return this._owner.findElementAt(t,e,i)},n.prototype.activate=function(t){this._doActivated(t)},n.prototype.deactivate=function(){this._doDeactivated()},n.prototype.keyDown=function(t){return this._doKeyDown(t)},n.prototype.keyUp=function(t){return this._doKeyUp(t)},n.prototype.keyPress=function(t){return this._doKeyPress(t)},n.prototype.mouseDown=function(t){var e=this._mouseX=this._clickX=t.mouseX,i=this._mouseY=this._clickY=t.mouseY;this.dragging&&this._stopDragTracker(e,i,!1),this._doMouseDown(t)},n.prototype.dragFrom=function(t,e){},n.prototype.dropFrom=function(t,e){},n.prototype.cancelFrom=function(t){},n.prototype.mouseMove=function(t){var e=this._mouseX=t.mouseX,i=this._mouseY=t.mouseY,o=this.dragTracker,n="mousemove"===t.type?t.buttons:"touchmove"===t.type?1:void 0;if(o)if(o.dragging)if(null==n||0<n||ne.Utils.isIE&&0<=n){if(!o.drag(this._mouseEventTarget,e,i)){var r=o.getNextRequest(e,i);r&&(this._stopDragTracker(e,i,!0),this.dragTracker=this._getDragTracker(r,e,i),this._startDragTracker(e,i,!1))}}else this._stopDragTracker(e,i,!0);else 3<=Math.abs(e-this._clickX)||3<=Math.abs(i-this._clickY)?this._startDragTracker(e,i,!1):this._doMouseMove(t);else this._doMouseMove(t)},n.prototype.mouseUp=function(t){var e=this._mouseX=t.mouseX,i=this._mouseY=t.mouseY;this.dragging?this._stopDragTracker(e,i,!1):(this._dragTracker=null,this._doMouseUp(t))},n.prototype.mouseEnter=function(t){this._doMouseEnter(t)},n.prototype.mouseLeave=function(t){this._doMouseLeave(t)},n.prototype.mouseOver=function(t){this._doMouseOver(t)},n.prototype.mouseOutside=function(){this._doMouseOutside()},n.prototype.mouseWheel=function(t){return this._doMouseWheel(t)},n.prototype.contextMenu=function(t){return this._doContextMenu(t)},n.prototype.click=function(t){this._doClick(t)},n.prototype.dblclick=function(t){this._doDblClick(t)},n.prototype.setFocus=function(t){ne.Utils.isMobile()||this._doSetFocus(t)},n.prototype.focusLeave=function(t){this._doFocusLeave(t)},n.prototype.touchStart=function(t){this._lastTouch=Date.now(),this.touchManager?this.touchManager.touchStart(t):this._doTouchStart(t)},n.prototype.touchMove=function(t){this._lastTouch=Date.now(),this.touchManager?this.touchManager.touchMove(t):this._doTouchMove(t)},n.prototype.touchEnd=function(t){try{this._lastTouch=NaN,this.touchManager?this.touchManager.touchEnd(t):this._doTouchEnd(t)}catch(t){this.touchManager&&this.touchManager.clearTouches()}},n.prototype.touchCancel=function(t){this._lastTouch=NaN,this.touchManager?this.touchManager.touchCancel(t):this._doTouchCancel(t)},n.prototype.lastTouch=function(){return Date.now()-this._lastTouch},_dp(n,"mouseEventTarget",{get:function(){return this._mouseEventTarget}}),n.prototype.isMouseEventTarget=function(t){return t._dom===this._mouseEventTarget},n.prototype._doActivated=function(t){},n.prototype._doDeactivated=function(){},n.prototype._doKeyDown=function(t){return!1},n.prototype._doKeyUp=function(t){return!1},n.prototype._doKeyPress=function(t){return!1},n.prototype._doMouseDown=function(t){},n.prototype._doMouseMove=function(t){},n.prototype._doMouseUp=function(t){},n.prototype._doMouseEnter=function(t){},n.prototype._doMouseLeave=function(t){},n.prototype._doMouseOver=function(t){},n.prototype._doMouseOutside=function(){},n.prototype._doMouseWheel=function(t){return!1},n.prototype._doContextMenu=function(t){},n.prototype._doClick=function(t){},n.prototype._doDblClick=function(t){},n.prototype._doSetFocus=function(t){},n.prototype._doFocusLeave=function(t){},n.prototype._getDragTracker=function(t,e,i){return null},n.prototype._startDragTracker=function(t,e,i){this._dragTracker&&(this._dragTracker.start(this._mouseEventTarget,t,e,i)?this._doDragTrackerStarted(this._dragTracker):this._dragTracker=null)},n.prototype._stopDragTracker=function(t,e,i){if(this.dragging){var o=this._dragTracker;i?o.cancel():o.drop(this._mouseEventTarget,t,e),this._doDragTrackerFinished(o,i)}},n.prototype._doDragTrackerStarted=function(t){},n.prototype._doDragTrackerFinished=function(t,e){},n.prototype._findTableCell=function(t){return this.owner.getTableCell(t||this.mouseEventTarget)},n.prototype._doTouchStart=function(t){},n.prototype._doTouchMove=function(t){},n.prototype._doTouchEnd=function(t){},n.prototype._doTouchCancel=function(t){},n);function n(t,e){var i=o.call(this)||this;return i._clickX=0,i._clickY=0,i._mouseX=0,i._mouseY=0,i._owner=t,i._name=e,i._previous=null,i}e.VisualTool=i;var r,s=(r=re.Base,oe.__extends(a,r),_dp(a,"cursor",{get:function(){return"default"}}),_dp(a,"source",{get:function(){}}),_dp(a,"selectable",{get:function(){return!1}}),_dp(a,"dblClickable",{get:function(){return!1}}),a);function a(){return r.call(this)||this}e.EditRequest=s});t(he);he.VisualTool,he.EditRequest;var de=e(function(t,e){var r,i;Object.defineProperty(e,"__esModule",{value:!0}),(i=r=e.ScrollEventType||(e.ScrollEventType={})).LINE="line",i.PAGE="page",i.THUMB_TRACK="thumbTrack",i.THUMB_END="thumbEnd",i.SCROLL_END="scrollEnd";var n,s=(n=Ut.VisualElement,oe.__extends(o,n),o.prototype._doDispose=function(){this._scrollBar=null,n.prototype._doDispose.call(this)},_dp(o,"scrollBar",{get:function(){return this._scrollBar}}),_dp(o,"vertical",{get:function(){return this._scrollBar.vertical}}),o.prototype._doDraw=function(t){this._doRender(t)},o.prototype._doRender=function(t){},o.prototype._changed=function(){this.invalidate()},o);function o(t,e,i){var o=n.call(this,t,i)||this;return o._scrollBar=e,o}var a,l=(a=s,oe.__extends(h,a),h.prototype._getCssSelector=function(){return"rg-scrolledge"},h);function h(t){return a.call(this,t,null,"scrollEdgeView")||this}e.ScrollEdge=l;var d,u=(d=s,oe.__extends(_,d),_.prototype._doDispose=function(){d.prototype._doDispose.call(this)},_.prototype._getCssSelector=function(){return"rg-scrolltrack"},_);function _(t){return d.call(this,t.doc,t,"scrollTrackView")||this}e.ScrollTrack=u;var c,p=(c=s,oe.__extends(f,c),_dp(f,"enabled",{get:function(){return this._enabled},set:function(t){t!=this._enabled&&(this._enabled=t,this._changed())}}),_dp(f,"far",{get:function(){return this._far}}),f.prototype._getCssSelector=function(){return this.scrollBar.vertical?this._far?"rg-scroll-down":"rg-scroll-up":this._far?"rg-scroll-right":"rg-scroll-left"},f);function f(t,e){var i=c.call(this,t.doc,t,"scrollButtonView")||this;return i._enabled=!0,i._far=e,i}e.ScrollButton=p;var g,m=(g=s,oe.__extends(y,g),y.prototype._getCssSelector=function(){return"rg-scrollthumb"},y);function y(t){return g.call(this,t.doc,t,"scrollThumbView")||this}e.ScrollThumb=m;var v,w=(v=Ut.VisualElement,oe.__extends(C,v),C.prototype._doDispose=function(){this._track=this._track.dispose(),this._thumb=this._thumb.dispose(),this._nearButton=this._nearButton.dispose(),this._farButton=this._farButton.dispose(),v.prototype._doDispose.call(this)},_dp(C,"container",{get:function(){return this._container}}),_dp(C,"lineScrollSize",{get:function(){return this._lineScrollSize},set:function(t){(t=Math.max(1,t))!=this._lineScrollSize&&(this._lineScrollSize=t)}}),_dp(C,"pageScrollSize",{get:function(){return this._pageScrollSize},set:function(t){(t=Math.max(1,t))!=this._pageScrollSize&&(this._pageScrollSize=t)}}),_dp(C,"minThumbSize",{get:function(){return this._minThumbSize},set:function(t){(t=Math.max(8,t))!=this._minThumbSize&&(this._minThumbSize=t,this.invalidateLayout())}}),_dp(C,"vertical",{get:function(){return this._vertical}}),_dp(C,"pos",{get:function(){return this._pos}}),_dp(C,"maxPosition",{get:function(){return this._maxPosition}}),_dp(C,"buttonSize",{get:function(){return this._buttonSize}}),_dp(C,"tipView",{set:function(t){this._tipView=t}}),C.prototype.layoutContent=function(){this._needLayout&&(this._needLayout=!1,this._doLayoutContent())},C.prototype.setProperties=function(t,e,i){t=Math.max(0,t),e=Math.max(t,e),t==this._min&&e==this._max&&i==this._page||(this._min=t,this._max=e,this._page=i,this._pos=Math.min(this._max,Math.max(this._min,this._pos)),this._maxPosition=Math.max(0,this._max-this._page),this.invalidate(),this._needLayout=!0)},C.prototype.setPosition=function(t,e){void 0===e&&(e=!0),(t=Math.min(this._maxPosition,Math.max(this._min,t)))!=this._pos&&(this._pos=t,this.invalidate(),this._needLayout=!0,e&&this.layoutContent())},C.prototype.ptInTrack=function(t,e,i){var o=this.containerToElement(t,e);if(this._vertical){if(o.y>=this._nearButton.height&&o.x<this._farButton.y)return!i&&o.y<this._thumb.y||i&&o.y>=this._thumb.bottom}else if(t>=this._nearButton.width&&t<this._farButton.x)return!i&&o.x<this._thumb.x||i&&o.x>=this._thumb.right;return!1},C.prototype.setText=function(t){if(this._tipView&&t){this._tipView.show(),this._tipView.setText(t);var e=void 0,i=void 0;if(this._vertical){var o=this._tipView.width();e=this.x-o-5,i=this._thumb.y}else{var n=this._tipView.height();e=this._thumb.x,i=this.y-n-5}this._tipView.move(e,i)}},C.prototype._getCssSelector=function(){return this._vertical?"rg-vscrollbar":"rg-hscrollbar"},C.prototype.draw=function(){v.prototype.draw.call(this)},C.prototype._doDraw=function(t){},C.prototype._doSizeChanged=function(){this.invalidateLayout()},C.prototype.invalidateLayout=function(){this._needLayout=!0,v.prototype.invalidateLayout.call(this)},C.prototype._doLayoutContent=function(){var t=this._vertical,e=this._buttonSize,i=this.height,o=this.width,n=(t?i:o)-2*e,r=Math.min(n,Math.max(this._minThumbSize,Math.floor(n*this._page/(this._max-this._min+1)))),s=e+Math.min(n-r,Math.max(0,Math.floor((n-r)*this._pos/(this._maxPosition-this._min))));this._track.setBounds(0,0,o,i),t?(this._nearButton.setBounds(0,0,o,e),this._farButton.setBounds(0,i-e,o,e),r<=n&&this._thumb.setBounds(2,s,o-4,r)):(this._nearButton.setBounds(0,0,e,i),this._farButton.setBounds(o-e,0,e,i),r<=n&&this._thumb.setBounds(s,2,r,i-4))},C.prototype._doScroll=function(t,e,i){this.fireEvent(C.SCROLLED,t,e,i)},C.SCROLLED="onScrollBarScrolled",C);function C(t,e){void 0===e&&(e=!1);var i=v.call(this,t.doc,"scrollBarView")||this;return i._lineScrollSize=1,i._pageScrollSize=1,i._minThumbSize=20,i._min=0,i._max=0,i._pos=0,i._page=0,i._maxPosition=0,i._buttonSize=20,i._needLayout=!0,i._tipView=null,i._container=t,i._vertical=e,i._track=new u(i),i.addChild(i._track),i._thumb=new m(i),i.addChild(i._thumb),i._nearButton=new p(i,!1),i.addChild(i._nearButton),i._farButton=new p(i,!0),i.addChild(i._farButton),i}e.ScrollBar=w;var x,b=(x=le.DragTracker,oe.__extends(I,x),I.prototype._doDispose=function(){this._thumb=this._thumb&&this._thumb.dispose(),x.prototype._doDispose.call(this)},_dp(I,"thumb",{get:function(){return this._thumb},set:function(t){this._thumb=t}}),_dp(I,"startWhenCreated",{get:function(){return!0}}),I.prototype._doStart=function(t,e,i){var o=this._thumb.scrollBar,n=o.containerToElement(e,i);return o.vertical?this._offset=n.y-this._thumb.y:this._offset=n.x-this._thumb.x,!0},I.prototype._doDrag=function(t,e,i){return this.$_doScroll(e,i,r.THUMB_TRACK)},I.prototype._doCompleted=function(t,e,i){return this.$_doScroll(e,i,r.THUMB_END)},I.prototype._doCanceled=function(t,e){},I.prototype._doEnded=function(){},I.prototype.$_doScroll=function(t,e,i){var o=this._thumb.scrollBar,n=o._maxPosition-o._min+1,r=o._buttonSize,s=o.containerToElement(t,e);if(o.vertical){if((a=o.height-2*r-this._thumb.height)<=0)return!1;s.y-=this._offset,s.y=(s.y-r)*n/a,o._doScroll(i,0,Math.max(Math.floor(s.y),0))}else{var a;if((a=o.width-2*r-this._thumb.width)<=0)return!1;s.x-=this._offset,s.x=(s.x-r)*n/a,o._doScroll(i,0,Math.max(Math.floor(s.x),0))}return!0},I);function I(t){return x.call(this,t,"scrollThumbTracker")||this}e.ScrollThumbTracker=b;var E,S=(E=$.EventAware,oe.__extends(R,E),_dp(R,"active",{get:function(){return void 0!==this._timer}}),R.prototype.start=function(t){this._button=t,this._scrollBar=t.scrollBar,this._active=!0,setTimeout(function(){this._ready&&(this._ready=!1,this._timer=setInterval(function(){this._active&&this.$_fireEvent()}.bind(this),20))}.bind(this),200),this._ready=!0,this.$_fireEvent()},R.prototype.move=function(t,e){var i=this._button.containerToElement(t,e);this._active=this._button.containsInClient(i.x,i.y)},R.prototype.stop=function(){this._ready=!1,this._timer&&(clearInterval(this._timer),this._timer),this._button},R.prototype.$_fireEvent=function(){var t=this._button.far?1:-1,e=r.LINE;this._scrollBar._doScroll(e,this._scrollBar.lineScrollSize*t,0)},R);function R(){var t=E.call(this)||this;return t._active=!1,t._timer=void 0,t._ready=!1,t}e.ScrollButtonTimer=S;var D,T=(D=re.Base,oe.__extends(k,D),_dp(k,"active",{get:function(){return this._active}}),k.prototype.start=function(t,e,i,o){this._scrollBar=t,this._far=e,this._active=!0,setTimeout(function(){this._ready&&(this._ready=!1,this._timer=setInterval(function(){this._active&&this.$_fireEvent()}.bind(this),50))}.bind(this),200),this._ready=!0;var n=this._scrollBar.containerToElement(i,o);this._mouseX=n.x,this._mouseY=n.y,this.$_fireEvent()},k.prototype.move=function(t,e){var i=this._scrollBar.containerToElement(t,e);this._mouseX=i.x,this._mouseY=i.y,this._active=this._scrollBar.ptInTrack(i.x,i.y,this._far)},k.prototype.stop=function(){this._ready=!1,this._timer&&clearInterval(this._timer)},k.prototype.$_fireEvent=function(){var t=null,e=0,i=this._scrollBar._thumb;if(this._scrollBar.vertical){var o=this._mouseY;this._far&&o>i.bottom?(t=r.PAGE,e=1):!this._far&&o<i.y&&(t=r.PAGE,e=-1)}else{var n=this._mouseX;this._far&&n>i.right?(e=1,t=r.PAGE):n<i.x&&(t=r.PAGE,e=-1)}0!=e&&this._scrollBar._doScroll(t,this._scrollBar.pageScrollSize*e,0)},k);function k(){var t=D.call(this)||this;return t._active=!1,t._timer=void 0,t._ready=!1,t._mouseX=0,t._mouseY=0,t}e.ScrollTrackTimer=T;var M,L=(M=he.VisualTool,oe.__extends(F,M),F.prototype._doDispose=function(){this._thumbTracker.cancel(),this._thumbTracker=this._thumbTracker.dispose(),this._buttonTimer.stop(),this._buttonTimer=this._buttonTimer.dispose(),this._trackTimer.stop(),this._trackTimer=this._trackTimer.dispose(),M.prototype._doDispose.call(this)},F.prototype._doMouseDown=function(t){var e=t.mouseX,i=t.mouseY;this._clickElement=null,this._buttonTimer.stop(),this._trackTimer.stop();var o=this.findElementAt(e,i,!1);if(o instanceof s)if((this._clickElement=o)instanceof p)this._buttonTimer.start(o);else if(o instanceof m)this._thumbTracker.thumb=o,this.dragTracker=this._thumbTracker;else if(o instanceof u){var n=o.scrollBar.ptInTrack(e,i,!0);this._trackTimer.start(o.scrollBar,n,e,i)}},F.prototype._doMouseMove=function(t){var e=t.mouseX,i=t.mouseY,o=this._clickElement;o instanceof p&&this._buttonTimer.active?this._buttonTimer.move(e,i):o instanceof u&&this._trackTimer.active&&this._trackTimer.move(e,i)},F.prototype._doMouseUp=function(t){this._clickElement&&this._clickElement.scrollBar._doScroll(r.SCROLL_END,0,-1),this._clickElement=null,this._buttonTimer.stop(),this._trackTimer.stop()},F.prototype._doTouchStart=function(t){this.mouseDown(t),t.preventDefault()},F.prototype._doTouchEnd=function(t){this.mouseUp(t)},F.prototype._doTouchMove=function(t){this.mouseMove(t)},F);function F(t){var e=M.call(this,t,"scrollTool")||this;return e._buttonTimer=new S,e._trackTimer=new T,e._thumbTracker=new b(t),e}e.ScrollTool=L;var V,O=(V=re.Base,oe.__extends(N,V),N.prototype._doDispose=function(){this._element=ne.Utils.detach(this._element),this._container=null,V.prototype._doDispose.call(this)},N.prototype.show=function(){this._container._container.appendChild(this._element)},N.prototype.hide=function(){ne.Utils.detach(this._element)},N.prototype.move=function(t,e){ne.Utils.move(this._element,t,e)},N.prototype.setText=function(t){this._element.innerHTML=t},N.prototype.width=function(){return this._element.offsetWidth},N.prototype.height=function(){return this._element.offsetHeight},N.prototype.getRect=function(){return this._element.getBoundingClientRect()},N.prototype.$_createElement=function(t){var e=t.createElement("div"),i=e.style;return i.position="absolute",i.padding="4px 4px",i.boxSizing="border-box",i.display="lnline-block",i.pointerEvents="none",i.userSelect="none",e.className="rg-scroll-tip-view",e},N);function N(t){var e=V.call(this)||this;return e._container=t,e._element=e.$_createElement(t.doc),e}e.ScrollTipView=O});t(de);de.ScrollEventType,de.ScrollEdge,de.ScrollTrack,de.ScrollButton,de.ScrollThumb,de.ScrollBar,de.ScrollThumbTracker,de.ScrollButtonTimer,de.ScrollTrackTimer,de.ScrollTool,de.ScrollTipView;var ue=e(function(t,e){Object.defineProperty(e,"__esModule",{value:!0});var n,i=(n=Ut.VisualElement,oe.__extends(o,n),_dp(o,"container",{get:function(){return this._contaner}}),o.prototype._getCssSelector=function(){},o.prototype._doDraw=function(t){},o);function o(t,e,i){var o=n.call(this,t,e)||this;return o._contaner=i,o}var r,s=(r=$.EventAware,oe.__extends(a,r),a.prototype.getMouseContainer=function(){return a.$_Containers[a.$_mouseContainer]},a.prototype.findContainer=function(t){for(var e in a.$_Containers){var i=a.$_Containers[e];if(i.contains(t.target))return i}return null},a.getActiveGrid=function(){var t=a.$_Containers[a.$_ActiveGrid];return t&&t._gridView},a.setActiveGrid=function(t){if(t!==a.$_ActiveGrid){var e=a.$_Containers[t],i=void 0;if(e=e&&e._gridView,window.RealGrid&&(i=window.RealGrid.onActiveGridChanged)){var o=a.$_Containers[a.$_ActiveGrid];i((o=o&&o._gridView)&&o.handler,e&&e.handler)}e._fireGridActivated()}a.$_ActiveGrid=t},a.clearContainer=function(t){a[t]&&delete a[t],a.$_ActiveGrid===t&&(a.$_ActiveGrid=null)},a.disposeStatic=function(){this.$_Containers=null,this.$_ActiveGrid=null},a.prototype._doDispose=function(){this._activeTool=null,this._defaultTool=this._defaultTool.dispose(),this._scrollTool=this._scrollTool.dispose(),this.$_removeListenerAll(null),ne.Utils.detach(this._containerDom),this._containerDom=null,this._container=null,this._doc=null,ne.Utils.clearElements(this._containerDiv),r.prototype._doDispose.call(this),delete a.$_Containers[this.$_hash]},_dp(a,"doc",{get:function(){return this._doc}}),_dp(a,"disabled",{get:function(){return this._disabled},set:function(t){t!=this._disabled&&(this._disabled=t,this._doDisabledChanged())}}),_dp(a,"activeTool",{get:function(){return this._activeTool},set:function(t){if((t=t||this._defaultTool)!=this._activeTool){var e=this._activeTool;e&&e.deactivate(),(this._activeTool=t)&&t.activate(e)}}}),_dp(a,"defaultTool",{get:function(){return this._defaultTool}}),_dp(a,"measurer",{get:function(){return this._measurer}}),a.prototype.findElementAt=function(t,e,i){return this._rootElement.findChildAt(t-this._rootElement._x,e-this._rootElement._y,i)},a.prototype.getTableCell=function(t){return null},a.prototype.setCursor=function(t){t!=this._cursor&&(this._containerDom.style.cursor=this._cursor=t)},a.prototype.setFocus=function(){this._setFocusAndScroll(this._containerDom)},a.prototype.updateNow=function(){this._layoutNeeded=!0,this.invalidate(!0),this._render(ne.Utils.getTimer())},a.prototype.toScreen=function(t){var e=this._containerDom.getBoundingClientRect();return t.x+=e.left,t.y+=e.top,t},a.prototype.pointToScreen=function(t,e){var i=this._containerDom.getBoundingClientRect();return{x:t+i.left,y:e+i.top}},a.prototype.getBound=function(){var t=this._containerDom.getBoundingClientRect();return new ht.Rectangle(t.left,t.top,t.width,t.height)},a.prototype.getHtml=function(){return this._containerDom.outerHTML},a.prototype.addElement=function(t){return this._rootElement.addChild(t)},a.prototype.removeElement=function(t){return this._rootElement.removeChild(t)},a.prototype.resetSize=function(t){void 0===t&&(t=null),this.updateNow(),t&&setTimeout(t,0)},a.prototype.measureText=function(t,e,i){this._textMeasurer.className=t;var o=this._textMeasurer.style;return i?(o.fontSize=i.fontSize,o.fontFamily=i.fontFamily,o.fontWeight=i.fontWeight,o.fontStyle=i.fontStyle):(o.removeProperty("fontSize"),o.removeProperty("fontFamily"),o.removeProperty("fontWeight"),o.removeProperty("fontStyle")),this._textMeasurer.innerHTML=e,this._textMeasurer.offsetWidth},a.prototype.$_refreshCheckMeasurer=function(){if(!this._checkRect){var t=this._checkMeasurer.getBoundingClientRect(),e=getComputedStyle(this._checkMeasurer);this._checkRect={width:t.width+parseInt(e.marginLeft)+parseInt(e.marginRight),height:t.height+parseInt(e.marginTop)+parseInt(e.marginBottom)}}return this._checkRect},a.prototype.measureCheckWidth=function(){return this.$_refreshCheckMeasurer().width},a.prototype.measureCheckHeight=function(){return this.$_refreshCheckMeasurer().height},a.prototype.contains=function(t){var e=t;if(e instanceof ne.getDocWin(this.doc).HTMLElement)for(var i=e.parentElement;i;){if(i===this._containerDom)return!0;i=i.parentElement}return!1},a.prototype.getDomPosition=function(t){return this.offsetDomPosition(t,{x:0,y:0})},a.prototype.offsetDomPosition=function(t,e){var i=ne.getDocWin(this._doc),o=this._containerDom.getBoundingClientRect(),n=t.getBoundingClientRect(),r=i.getComputedStyle(this._containerDom);return e.x=n.left-o.left-Math.round(parseFloat(r.borderLeftWidth)),e.y=n.top-o.top-Math.round(parseFloat(r.borderTopWidth)),e},a.prototype.cancelOtherContainer=function(t){for(var e in a.$_Containers){var i=a.$_Containers[e];if(i!==this){var o=i._activeTool;o&&o.cancelFrom(t)}}},a.prototype._doDisabledChanged=function(){},a.prototype.prepareContainer=function(t,e){if(!t)throw new Error("container is null!");if(ae.$_instanceOf(t,"HTMLDivElement")?this._containerDiv=t:this._containerDiv=document.getElementById(t),!ae.$_instanceOf(this._containerDiv,"HTMLDivElement"))throw new Error("Invalid grid container element: "+t);var i=this._doc=this._containerDiv.ownerDocument,o=ne.getDocWin(i);o.requestAnimationFrame=o.requestAnimationFrame||o.mozRequestAnimationFrame||o.webkitRequestAnimationFrame||o.msRequestAnimationFrame||function(t){return o.setTimeout(t,10)};var n=this._containerDom=i.createElement("div");this._container=this._containerDom;var r=n.style;this._cursor=r.cursor,this._containerDiv.appendChild(n),n.setAttribute("tabindex","0"),r.position="relative",r.width="100%",r.height="100%",r.boxSizing="border-box",r.overflow="hidden",r["-webkit-touch-callout"]="none",r["-webkit-user-select"]="none",r["user-select"]="none",r["-webkit-tap-highlight-color"]="rgba(0, 0, 0, 0)",this._rootElement=this._createRootElement(i),this._measurer=i.createElement("div"),this._container.appendChild(this._measurer);var s=this._textMeasurer=i.createElement("span");s.style.position="absolute",s.style.left="-10000px",s.style.top="-10000px",s.style.display="block",this._container.appendChild(s);var a=this._checkMeasurer=i.createElement("input");a.type="checkbox",a.tabIndex=-1,a.style.position="absolute",a.style.left="-1000px",a.style.top="-11000px",a.style.display="block",this._container.appendChild(a),this._doPrepareContainer(n,e)},a.prototype._doPrepareContainer=function(t,e){},a.prototype._createRootElement=function(t){var e=new i(t,"root",this);return this._containerDom.appendChild(e._dom),e},a.prototype.isLayoutNeeded=function(){return this._layoutNeeded},a.prototype.invalidateLayout=function(){this._layoutNeeded||(this._layoutNeeded=!0,this.invalidate(!0))},a.prototype.invalidate=function(t){var e=ne.getDocWin(this._doc);this._updateRequested&&this._invalidated||!t&&this._drawing||(this._requestTimer||(this._requestTimer=e.requestAnimationFrame(this._containerRender)),this._updateRequested=!0,this._invalidated=!0)},a.prototype.invalidateElement=function(t){var e=ne.getDocWin(this._doc);this._drawing||this._updateRequested||(this._requestTimer||(this._requestTimer=e.requestAnimationFrame(this._containerRender)),this._updateRequested=!0)},a.prototype._render=function(t){if(!this.disposing){this._updateRequested=!1,this._drawing=!0;try{this.$$_render(t)}finally{this._drawing=!1,this._invalidated=!1,this._requestTimer=null,this._doAfterRender()}}},a.prototype.$$_render=function(t){var e=this._containerDom,i=isNaN(this._testWidth)?e.clientWidth:this._testWidth,o=isNaN(this._testHeight)?e.clientHeight:this._testHeight;if(this._layoutChildren(new ht.Rectangle(0,0,i,o)),this._layoutNeeded)try{this._doLayout(new ht.Rectangle(0,0,i,o))}finally{this._layoutNeeded=!1}else this._doPrepareRender(new ht.Rectangle(0,0,i,o));this._doRenderHtml(new ht.Rectangle(0,0,i,o))},a.prototype._layoutChildren=function(t){},a.prototype._doLayout=function(t){},a.prototype._doAfterRender=function(){},a.prototype._doPrepareRender=function(t){},a.prototype._doRenderHtml=function(t){this._doDrawContainer(t),this._drawElement(this._rootElement),this._validateChildren(this._rootElement)},a.prototype._doDrawContainer=function(t){},a.prototype._drawElement=function(t){t.draw();for(var e=0,i=t.childCount;e<i;e++){var o=t.getChild(e);o.visible&&this._drawElement(o)}},a.prototype._validateChildren=function(t){for(var e=0,i=t.childCount;e<i;e++)t.getChild(e).validate()},a.prototype._setFocusAndScroll=function(t){t.setFocus?t.setFocus():t.focus&&t.focus({preventScroll:!0})},a.prototype._registerEventHandlers=function(t,e){var i=ne.getWin(t);t.style.cursor=this._defaultCursor,this.$_addListener(i,"resize",this._resizeHandler.bind(this),!1),this.$_addListener(i,"mousemove",this._mouseMoveHandler.bind(this),!1),this.$_addListener(i,"mouseup",this._mouseUpHandler.bind(this),!1),this.$_addListener(i,"focus",this._focusHandlerFireFox.bind(this),!0),this.$_addListener(i,"focusin",this._focusinHandler.bind(this),!0),this.$_addListener(i,"focusout",this._focusoutHandler.bind(this),!0),this.$_addListener(i,"mousedown",this._globalMouseDownHandler.bind(this),!1),e&&(this.$_addListener(e,"keydown",this._keyDownHandler.bind(this),!1),this.$_addListener(e,"keyup",this._keyUpHandler.bind(this),!1),this.$_addListener(e,"keypress",this._keyPressHandler.bind(this),!1)),this.$_addListener(t,"click",this._clickHandler.bind(this),!1),this.$_addListener(t,"dblclick",this._dblclickHandler.bind(this),!1),this.$_addListener(t,"mousedown",this._mouseDownHandler.bind(this),!1),this.$_addListener(t,"mouseenter",this._mouseEnterHandler.bind(this),!1),this.$_addListener(t,"mouseleave",this._mouseLeaveHandler.bind(this),!1),this.$_addListener(t,"mouseover",this._mouseOverHandler.bind(this),!1),this.$_addListener(t,"focus",this._focusHandler.bind(this),!1),this.$_addListener(t,"contextmenu",this._contextMenuHander.bind(this),!1),this.$_addListener(t,"blur",this._blurHandler.bind(this),!1),this.$_addListener(t,"selectstart",this._selectstartHandler.bind(this),!1),this.$_addListener(t,"wheel",this._wheelHandler.bind(this),!!ne.Utils.isPassive()&&{capture:!1,passive:!1}),this.$_addListener(t,"touchstart",this._touchStartHandler.bind(this),!!ne.Utils.isPassive()&&{capture:!1,passive:!1}),this.$_addListener(t,"touchmove",this._touchMoveHandler.bind(this),!!ne.Utils.isPassive()&&{capture:!1,passive:!1}),this.$_addListener(t,"touchend",this._touchEndHandler.bind(this),!1),this.$_addListener(t,"touchcancel",this._touchCancelHandler.bind(this),!1),this.$_addListener(t,"touchleave",this._touchLeaveHandler.bind(this),!1)},a.prototype.$_addListener=function(t,e,i,o){t in this._eventHandlers||(this._eventHandlers[t]={}),e in this._eventHandlers[t]||(this._eventHandlers[t][e]=[]),this._eventHandlers[t][e].push([i,o]),t.addEventListener(e,i,o),this._eventNodes.indexOf(t)<0&&this._eventNodes.push(t)},a.prototype.$_removeListener=function(t,e){if(t in this._eventHandlers){var i=this._eventHandlers[t];if(e in i)for(var o=i[e],n=o.length;n--;){var r=o[n];t.removeEventListener(e,r[0],r[1])}}},a.prototype.$_removeListenerAll=function(t){void 0===t&&(t=null);for(var e=t?[t]:this._eventNodes,i=0,o=e.length;i<o;i++){var n=e[i];if(n in this._eventHandlers){var r=this._eventHandlers[n];for(var s in r)for(var a=r[s],l=a.length;l--;){var h=a[l];n.removeEventListener(s,h[0],h[1])}}}},a.prototype._unloadHandler=function(){this.$_removeListenerAll(),this._containerDiv=null,this._containerDom=null},a.prototype._resizeHandler=function(t){this._doResized(t),this.invalidateLayout()},a.prototype._doResized=function(t){},a.prototype._isEnabled=function(){return this._activeTool&&!this._disabled},a.prototype._keyDownHandler=function(t){this._isEnabled()&&t.target===t.currentTarget&&t.target===this._containerDom&&this._activeTool.keyDown(t)},a.prototype._keyUpHandler=function(t){this._isEnabled()&&t.target===t.currentTarget&&t.target===this._containerDom&&this._activeTool.keyUp(t)},a.prototype._keyPressHandler=function(t){this._isEnabled()&&t.target===t.currentTarget&&t.target===this._containerDom&&this._activeTool.keyPress(t)},a.prototype.eventToContainer=function(t){var e=this._containerDom.getBoundingClientRect();return new Gt.Point(t.clientX-e.left,t.clientY-e.top)},a.prototype.toOffset=function(t){var e=this._containerDom.getBoundingClientRect();return t.mouseX=t.clientX-e.left,t.mouseY=t.clientY-e.top,t},a.prototype.toOffsetTouch=function(t){var e=this._containerDom.getBoundingClientRect(),i=t.touches[0]||t.changedTouches[0];return t.mouseX=i.clientX-e.left,t.mouseY=i.clientY-e.top,t},a.prototype._clickHandler=function(t){this._isEnabled()?this._activeTool.click(this.toOffset(t)):t.preventDefault()},a.prototype._dblclickHandler=function(t){this._isEnabled()?this._activeTool.dblclick(this.toOffset(t)):t.preventDefault()},a.prototype.$_setMouseTarget=function(t){var e=ne.getWin(this._containerDom);this.activeTool._mouseEventTarget=t.target instanceof e.HTMLElement?t.target:null},a.prototype._mouseDownHandler=function(t){if(this._isEnabled()){a.$_mouseContainer=this.$_hash,this.toOffset(t),this._currentX=t.mouseX,this._currentY=t.mouseY;var e=this.findElementAt(this._currentX,this._currentY,!1);e&&e.getAncestor(de.ScrollBar)?(this.activeTool.setFocus(),this.activeTool!==this._scrollTool&&(this._scrollTool._previous=this.activeTool),this.activeTool=this._scrollTool):this.activeTool||(this.activeTool!==this._defaultTool&&(this._defaultTool._previous=this.activeTool),this.activeTool=this._defaultTool),this.$_setMouseTarget(t),this.activeTool.mouseDown(t)}else t.preventDefault()},a.prototype._mouseMoveHandler=function(t){if(this.toOffset(t),this._currentX=t.mouseX,this._currentY=t.mouseY,this._isEnabled()){var e=this._activeTool;this.$_setMouseTarget(t),e.mouseMove(t);var i=e.dragTracker;if(i&&i.linkable&&a.$_mouseContainer==this.$_hash)for(var o in this.findContainer(t),a.$_Containers){var n=a.$_Containers[o];if(n!==this){var r=n._activeTool;r&&r.dragFrom(t,i)}}}},a.prototype._mouseUpHandler=function(t){var e=a.$_mouseContainer==this.$_hash,i=this._activeTool;try{if(this.toOffset(t),this._currentX=t.mouseX,this._currentY=t.mouseY,this._isEnabled()){var o=i.dragTracker;if(this.$_setMouseTarget(t),i.mouseUp(t),i instanceof de.ScrollTool&&(this.activeTool=i.previous),o&&o.linkable&&e){var n=this.findContainer(t);if(n&&n!==this){var r=n._activeTool;r&&r.dropFrom(t,o)}}}else t.preventDefault()}finally{i&&(this.setCursor("default"),i.dragTracker=null),e&&(a.$_mouseContainer=-1)}},a.prototype._mouseEnterHandler=function(t){this._isEnabled()&&this._activeTool.mouseEnter(this.toOffset(t))},a.prototype._mouseLeaveHandler=function(t){this._isEnabled()&&this._activeTool.mouseLeave(this.toOffset(t))},a.prototype._mouseOverHandler=function(t){this._isEnabled()&&this._activeTool.mouseOver(this.toOffset(t))},a.prototype._contextMenuHander=function(t){this.toOffset(t),this._currentX=t.mouseX,this._currentY=t.mouseY,this._isEnabled()&&(this.$_setMouseTarget(t),this._activeTool.contextMenu(this.toOffset(t)))},a.prototype._wheelHandler=function(t){this._isEnabled()&&(this.$_setMouseTarget(t),this._activeTool.mouseWheel(this.toOffset(t))&&ne.Utils.stopEvent(t))},a.prototype._focusHandler=function(t){},a.prototype._blurHandler=function(t){},a.prototype._selectstartHandler=function(t){return!1},a.prototype._focusinHandler=function(t){},a.prototype._globalMouseDownHandler=function(t){ne.Utils.isAncestorOf(this._containerDiv,t.target)||this._isEnabled()&&this._activeTool.focusLeave(t)},a.prototype._focusoutHandler=function(t){ne.Utils.isAncestorOf(this._containerDiv,t.target)&&t.relatedTarget&&!ne.Utils.isAncestorOf(this._containerDiv,t.relatedTarget)&&this._isEnabled()&&this._activeTool.focusLeave(t)},a.prototype._focusHandlerFireFox=function(t){ne.Utils.isAncestorOf(this._containerDiv,t.target)&&this._isEnabled()&&(this._containerDom.setAttribute("tabindex","0"),this._activeTool.setFocus(t.target))},a.prototype._touchStartHandler=function(t){if(this._isEnabled()){this._activeTool.setFocus(),this.toOffsetTouch(t),this._currentX=t.mouseX,this._currentY=t.mouseY;var e=this.findElementAt(this._currentX,this._currentY,!1);e&&e.getAncestor(de.ScrollBar)?this.activeTool=this._scrollTool:this.activeTool||(this.activeTool=this._defaultTool),this._isEnabled()&&(this.$_setMouseTarget(t),this._activeTool.touchStart(t))}else t.preventDefault()},a.prototype._touchMoveHandler=function(t){this.toOffsetTouch(t),this._currentX=t.mouseX,this._currentY=t.mouseY,this._isEnabled()&&(this.$_setMouseTarget(t),this._activeTool.touchMove(t))},a.prototype._touchEndHandler=function(t){this.toOffsetTouch(t),this._currentX=t.mouseX,this._currentY=t.mouseY,this._isEnabled()&&(this.$_setMouseTarget(t),this._activeTool.touchEnd(t),this._activeTool instanceof de.ScrollTool&&(this.activeTool=this._activeTool.previous))},a.prototype._touchCancelHandler=function(t){this._isEnabled()&&(this.$_setMouseTarget(t),this._activeTool.touchCancel(t))},a.prototype._touchLeaveHandler=function(t){this._isEnabled()&&this._activeTool.touchEnd(t)},a.$_Containers={},a.$_mouseContainer=-1,a.$_ActiveGrid=null,a);function a(t,e){var i=r.call(this)||this;return i._disabled=!1,i._updateRequested=!1,i._layoutNeeded=!1,i._invalidated=!1,i._captured=!1,i._focusing=!1,i._focusingTarget=null,i._hovered=null,i._currentX=0,i._currentY=0,i._rendered=0,i._defaultCursor="default",i._drawing=!1,i._clicked=0,i._clicket=0,i._children=[],i._eventHandlers={},i._eventNodes=[],i._contextMenu=null,i._containerRender=i._render.bind(i),i._scrollTool=new de.ScrollTool(i),i._cursor="default",i._testWidth=NaN,i._testHeight=NaN,i.prepareContainer(t,e),i.invalidateLayout(),i._registerEventHandlers(i._rootElement._dom,i._containerDom),i.activeTool=i._defaultTool=i._createDefaultTool(),a.$_Containers[i.$_hash]=i}e.VisualContainer=s});t(ue);ue.VisualContainer;var _e=e(function(t,e){Object.defineProperty(e,"__esModule",{value:!0});var n,o=(n=Kt.CellElement,oe.__extends(i,n),_dp(i,"model",{get:function(){return this._model}}),i.prototype.setStyleName=function(t,e,i){i==this._styleName&&e==this._cellDom||(this._styleName=i,this._className="",this._setClassName(t))},i.prototype._getCssSelector=function(){return this._styleName},i.prototype._clearCellCache=function(){n.prototype._clearCellCache.call(this),this._textChanged=!0},i.prototype._doPrepareValue=function(t,e){this._model.headText!=this._text&&(this._text=this._model.headText||"",this._textChanged=!0)},i.prototype._doUpdateContent=function(t,e,i){this._textChanged&&(this._textChanged=!1,i[ne.Utils.TextProp]=this._text)},i);function i(t,e,i){void 0===i&&(i="gridHeadCellView");var o=n.call(this,t,i)||this;return o._text="",o._styleName="",o._textChanged=!1,o._model=e,o}e.GridHeadCellElement=o;var r,s=(r=o,oe.__extends(a,r),_dp(a,"checked",{get:function(){return this._checked},set:function(t){this._checked=t}}),a.prototype._clearCellCache=function(){this._check=null},a.prototype._doUpdateContent=function(t,e,i){var o=t.doc,n=this.model,r=n.showAll&&!n.exclusive;if(r&&!this._check){var s=this._check=o.createElement("input"),a=s.style;s.type="checkbox",s.className="rg-checkbox",s.tabIndex=-1,a.display="inline-block",i.appendChild(s),this._checkVisible=!1}r!==this._checkVisible&&(this._check.style.display=r?"inline-block":"none",this._check.checked=this._checked,this._checkVisible=r)},a.prototype.$_updateContent=function(){this._check.checked=this._checked},a);function a(t,e){var i=r.call(this,t,e,"chekHeadCellView")||this;return i._checked=!1,i._checkVisible=!1,i}e.CheckHeadCellElement=s;var l,h=(l=Yt.SimpleTableElement,oe.__extends(d,l),d.prototype._doDispose=function(){this._cells=null,l.prototype._doDispose.call(this)},_dp(d,"allChecked",{get:function(){return this._checkCell.checked},set:function(t){var e=this._checkCell;e.checked=t,e.$_updateContent()}}),d.prototype.getHeadModel=function(t){for(var e=0;e<this._cells.length;e++)if(t===this._getTableCell(0,e))return this._cells[e].model},d.prototype.getCellType=function(t){var e=this.getHeadModel(t);return e===this.grid.rowIndicator?"indicator":e===this.grid.stateBar?"state":e===this.grid.checkBar?"check":void 0},d.prototype._getCssSelector=function(){return"rg-head"},d.prototype._doPrepareTableExtents=function(t){var e,i=t.grid.rowBarContainer,o=t.sectionObjects;this._cells=[];for(var n=0,r=o;n<r.length;n++){var s=r[n];s instanceof Nt.RowIndicator&&(((e=this._indicatorCell).visible=e.model.visible)?(this._cells.push(e),e.width=i.rowIndicator.width):e.removeCellDom()),s instanceof Pt.StateBar&&(((e=this._stateCell).visible=e.model.visible)?(this._cells.push(e),e.width=i.stateBar.width):e.removeCellDom()),s instanceof Bt.CheckBar&&(((e=this._checkCell).visible=e.model.visible)?(this._cells.push(e),e.width=i.checkBar.width):e.removeCellDom(!0))}},d.prototype._prepareCellContent=function(t,e){return this.grid.doc.createElement("div")},d.prototype._doLayoutContent=function(t){for(var e=t.grid,i=this._cells.length,o=this._getTableRowCount(t),n=0;n<i;n++){var r=this._cells[n],s=r.model,a=s.getHeadCell(),l=this._getTableCell(0,n),h=l.firstElementChild,d=this.$_getCellSelector()+" "+s.getHeadStyleName();if(this._chromium){l.rowSpan=o;for(var u=1;u<o;u++)this._getTableCell(u,n).style.display="none"}r.setStyleName(l,h,d),r.updateCell(e,a,h)}},d.prototype._doRender=function(t){},d.prototype._getTableRowCount=function(t){return this._chromium?t.headerRows:1},d.prototype._getTableRowHeight=function(t,e){if(this._chromium){var i=t.grid.headerView._rowPoints;return i.length<2?this.height:i[e+1]-i[e]}return this.height},d.prototype._getCellCount=function(t){return this._cells.length},d.prototype._getCellWidth=function(t,e){return this._cells[e].width},d.prototype.$_getCellSelector=function(){return d.CELL_CSS},d.CELL_CSS="rg-head-cell",d);function d(t){var e=l.call(this,t.doc,null,"gridHeadView")||this;e._cells=[];var i=t.doc;return e.addChild(e._indicatorCell=new o(i,t.rowIndicator)),e.addChild(e._stateCell=new o(i,t.stateBar)),e.addChild(e._checkCell=new s(i,t.checkBar)),e}e.GridHeadElement=h});t(_e);_e.GridHeadCellElement,_e.CheckHeadCellElement,_e.GridHeadElement;var ce=e(function(t,e){Object.defineProperty(e,"__esModule",{value:!0});var i,o=(i=Kt.CellElement,oe.__extends(n,i),_dp(n,"model",{get:function(){return this._model},set:function(t){t!==this._model&&(this._model=t,this._changed())}}),_dp(n,"text",{get:function(){return this._text},set:function(t){t!=this._text&&(this._text=t||"",this._textChanged=!0,this._changed())}}),n.prototype.setStyleName=function(t,e){e!=this._styleName&&(this._styleName=e,this._setClassName(t))},n.prototype._getCssSelector=function(){return this._styleName},n.prototype._doUpdateContent=function(t,e,i){this._textChanged&&(this._textChanged=!1,i[ne.Utils.TextProp]=this._text)},n.prototype._doRender=function(t){},n);function n(t){var e=i.call(this,t,"gridFootCellView")||this;return e._text="",e._styleName="",e._textChanged=!1,e}e.GridFootCellElement=o;var r,s=(r=Yt.SimpleTableElement,oe.__extends(a,r),a.prototype._doDispose=function(){this._cells=null,r.prototype._doDispose.call(this)},a.prototype.getFootModel=function(t){for(var e=0;e<this._cells.length;e++)if(t===this._getTableCell(0,e))return this._cells[e].model},a.prototype.getCellType=function(t){var e=this.getFootModel(t);return e===this.grid.rowIndicator?"indicator":e===this.grid.stateBar?"state":e===this.grid.checkBar?"check":void 0},a.prototype._getCssSelector=function(){return"rg-foot"},a.prototype._doPrepareTableExtents=function(t){for(var e,i=t.grid.rowBarContainer,o=t.sectionObjects,n=this._count=0,r=o;n<r.length;n++){var s=r[n];s.visible&&(((e=this._cells[this._count++]).model=s)instanceof Nt.RowIndicator?e.width=i.rowIndicator.width:s instanceof Pt.StateBar?e.width=i.stateBar.width:s instanceof Bt.CheckBar&&(e.width=i.checkBar.width))}},a.prototype._prepareCellContent=function(t,e){return this.grid.doc.createElement("div")},a.prototype._doLayoutContent=function(t){for(var e=t.grid,i=this._count;this.childCount<i;)this.addChild(this._cells[this.childCount]);for(;this.childCount>i;)this.removeLast();for(var o=0;o<i;o++){var n=this.getChild(o),r=n.model,s=r.getFootCell(),a=this._getTableCell(0,o),l=a.firstElementChild,h=this.$_getCellSelector()+" "+r.getFootStyleName();n.setStyleName(a,h),n.text=r.footText,n.updateCell(e,s,l)}},a.prototype._doRender=function(t){},a.prototype._getTableRowCount=function(t){return 1},a.prototype._getTableRowHeight=function(t,e){return this.height},a.prototype._getCellCount=function(t){return this._count},a.prototype._getCellWidth=function(t,e){return this._cells[e].width},a.prototype.$_getCellSelector=function(){return a.CELL_CSS},a.CELL_CSS="rg-foot-cell",a);function a(t){var e=r.call(this,t,null,"gridFootView")||this;e._cells=[];for(var i=e._count=0;i<3;i++)e.addChild(e._cells[i]=new o(t));return e}e.GridFootElement=s});t(ce);ce.GridFootCellElement,ce.GridFootElement;var pe=e(function(t,e){Object.defineProperty(e,"__esModule",{value:!0});var i,o=(i=$t.GridBaseOptions,oe.__extends(n,i),n.prototype._doDispose=function(){i.prototype._doDispose.call(this)},_dp(n,"textFormat",{get:function(){return this._textFormat},set:function(t){t!=this._textFormat&&(this._textFormat=t,this._textFormatter=t?Et.TextFormatter.getFormatter(t):null,this._changed())}}),_dp(n,"datetimeFormat",{get:function(){return this._datetimeFormat},set:function(t){t!=this._datetimeFormat&&(this._datetimeFormat=t,this._datetimeWriter=t?G.DateTimeWriter.getFormatter(t):null,this._changed())}}),_dp(n,"numberFormat",{get:function(){return this._numberFormat},set:function(t){t!=this._numberFormat&&(this._numberFormat=t,this._numberFormatter=t?W.DecimalFormatter.getFormatter(t):null,this._changed())}}),_dp(n,"booleanFormat",{get:function(){return this._booleanFormat},set:function(t){t!=this._booleanFormat&&(this._booleanFormat=t,this._boolFormatter=t?U.BooleanFormatter.getFormatter(t):null,this._changed())}}),_dp(n,"textFormatter",{get:function(){return this._textFormatter}}),_dp(n,"numberFormatter",{get:function(){return this._numberFormatter}}),_dp(n,"datetimeWriter",{get:function(){return this._datetimeWriter}}),_dp(n,"boolFormatter",{get:function(){return this._boolFormatter}}),n.prototype.getTextFormatter=function(t){return t||this._textFormatter},n.prototype.getNumberFormatter=function(t){return t||this._numberFormatter},n.prototype.getDateWriter=function(t){return t||this._datetimeWriter},n.prototype.getBoolFormatter=function(t){return t||this._boolFormatter},n);function n(t){var e=i.call(this,t)||this;return e._numberFormat=W.DecimalFormatter.DEFAULT_FORMAT,e._datetimeFormat=G.DateTimeWriter.DEFAULT_FORMAT,e._datetimeWriter=G.DateTimeWriter.Default,e._numberFormatter=W.DecimalFormatter.Default,e}e.FormatOptions=o});t(pe);pe.FormatOptions;var fe=e(function(t,e){Object.defineProperty(e,"__esModule",{value:!0});var i,o=(i=re.Base,oe.__extends(n,i),n.prototype._doDispose=function(){i.prototype._doDispose.call(this)},_dp(n,"message",{get:function(){return this._message},set:function(t){this._message=t}}),_dp(n,"visible",{get:function(){return this._visible},set:function(t){t!=this._visible&&(this._visible=t)}}),_dp(n,"zIndex",{get:function(){return this._zIndex},set:function(t){t!=this._zIndex&&(this._zIndex=t)}}),_dp(n,"styleName",{get:function(){return this._styleName},set:function(t){this._styleName=t}}),n.prototype.assignFrom=function(t){"string"==typeof t?(this._message=t,this._message&&(this._visible=!0)):"boolean"==typeof t?this._visible=t:i.prototype.assignFrom.call(this,t)},n);function n(t){var e=i.call(this)||this;return e._message="",e._visible=!0,e._zIndex=void 0,e._styleName="rg-toast",t&&e.assignFrom(t),e}e.ToastOptions=o;var r,s=(r=re.Base,oe.__extends(a,r),a.prototype._doDispose=function(){r.prototype._doDispose.call(this)},_dp(a,"minWidth",{get:function(){return this._minWidth},set:function(t){this._minWidth=t}}),_dp(a,"maxWidth",{get:function(){return this._maxWidth},set:function(t){this._maxWidth=t}}),_dp(a,"dropDownCount",{get:function(){return this._dropdownCount},set:function(t){this._dropdownCount=t}}),a.prototype.show=function(t){this._showing=!0;try{this.$_show(t)}finally{this._showing=!1}},a.prototype.hide=function(){var t=this._element;t&&t.parentNode&&this._container._container.removeChild(t)},a.prototype.$_createElement=function(t){var e=t.createElement("div");e.onkeydown=function(t){27==t.keyCode&&this.hide()}.bind(this),this.$_disableSelection(e);var i=this._span=t.createElement("span");return this.$_disableSelection(i),e.appendChild(i),e},a.prototype.$_show=function(t){var e=t.message;if(e){var i=this._element;if(i){var o=this._span,n=this._container._gridView.displayOptions;o.innerHTML=e,i.className=t.styleName,i.style.position="absolute",i.style.overflow="hidden",i.style.zIndex=null!=t.zIndex?t.zIndex:n.toastZIndex,this._container._container.appendChild(i);var r=ne.Utils.getBoundingClientRect2(i),s=ne.Utils.getBoundingClientRect2(this._container._container),a=r.width+10,l=r.height+10,h=s.width,d=s.height;i.style.left=(h-a)/2+"px",i.style.top=(d-l)/2+"px"}}},a.prototype.$_disableSelection=function(t){void 0!==t.onselectstart?t.onselectstart=function(){return!1}:void 0!==t.style.MozUserSelect?t.style.MozUserSelect="none":t.onmousedown=function(){return!1}},a);function a(t){var e=r.call(this)||this;return e._minWidth=0,e._maxWidth=0,e._dropdownCount=8,e._showing=!1,e._container=t,e._element=e.$_createElement(t.doc),e}e.ToastView=s;var l,h=(l=re.Base,oe.__extends(d,l),d.prototype._doDispose=function(){l.prototype._doDispose.call(this)},_dp(d,"visible",{get:function(){return this._active}}),d.prototype.show=function(t,e,i){if((!this._active||e)&&(this.close(),(t=t instanceof o?t:t?new o(t):null)&&t.visible))return this._toast||(this._toast=new s(this._container)),this._toast.show(t),this._active=!0,void(i&&setTimeout(function(){try{i()}finally{this.close()}}.bind(this),0));i&&i()},d.prototype.close=function(){this._active&&(this._toast&&this._toast.hide(),this._active=!1)},d);function d(t){var e=l.call(this)||this;return e._active=!1,e._container=t.container,e}e.ToastManager=h});t(fe);fe.ToastOptions,fe.ToastView,fe.ToastManager;var ge=e(function(t,e){Object.defineProperty(e,"__esModule",{value:!0});var i,o=(i=$t.GridBaseOptions,oe.__extends(n,i),n.prototype._doDispose=function(){this._toast=this._toast.dispose(),i.prototype._doDispose.call(this)},_dp(n,"enabled",{get:function(){return this._enabled},set:function(t){t!=this._enabled&&(this._enabled=t,this._changed())}}),_dp(n,"style",{get:function(){return this._style},set:function(t){t!=this._style&&(this._style=t,this._changed())}}),_dp(n,"handleVisibility",{get:function(){return this._handleVisibility},set:function(t){t!=this._handleVisibility&&(this._handleVisibility=t,this._refreshOwner())}}),_dp(n,"commitBeforeSorting",{get:function(){return this._commitBeforeSorting},set:function(t){t!=this._commitBeforeSorting&&(this._commitBeforeSorting=t,this._changed())}}),_dp(n,"keepFocusedRow",{get:function(){return this._keepFocusedRow},set:function(t){t!=this._keepFocusedRow&&(this._keepFocusedRow=t,this._changed())}}),_dp(n,"textCase",{get:function(){return this._textCase},set:function(t){t!=this._textCase&&(this._textCase=t,this._changed())}}),_dp(n,"showSortOrder",{get:function(){return this._showSortOrder},set:function(t){t!=this._showSortOrder&&(this._showSortOrder=t,this._changed())}}),_dp(n,"pageSorting",{get:function(){return this._pageSorting},set:function(t){t!=this._pageSorting&&(this._pageSorting=t,this._changed())}}),_dp(n,"toast",{get:function(){return this._toast}}),n);function n(t){var e=i.call(this,t)||this;return e._enabled=!0,e._style=lt.SortStyle.EXCLUSIVE,e._handleVisibility=lt.HandleVisibility.VISIBLE,e._commitBeforeSorting=!0,e._toast=new fe.ToastOptions({visible:!1,message:"Sorting..."}),e._keepFocusedRow=!1,e._textCase=lt.SortCase.SENSITIVE,e._showSortOrder=!1,e._pageSorting=!1,e}e.SortingOptions=o});t(ge);ge.SortingOptions;var me=e(function(t,e){Object.defineProperty(e,"__esModule",{value:!0});var i,o=(i=Ut.LayerElement,oe.__extends(n,i),n.prototype._doDispose=function(){i.prototype._doDispose.call(this)},_dp(n,"grid",{get:function(){for(var t=this.parent;t;){if(t instanceof oi.GridBase)return t;t=t.parent}return null}}),n.prototype.measure=function(t,e,i){return this._doMeasure(t,e,i)},n.prototype.layoutContent=function(t,e,i){this._doLayoutContent(t,e,i)},n.prototype._doMeasure=function(t,e,i){return new jt.Size(e,i)},n.prototype._doLayoutContent=function(t,e,i){},n);function n(t,e){return void 0===e&&(e=null),i.call(this,t,e)||this}e.ContentPane=o;var r,s=(r=o,oe.__extends(a,r),a.prototype._initDom=function(t){r.prototype._initDom.call(this,t)},a);function a(){return null!==r&&r.apply(this,arguments)||this}e.LeftContentPane=s;var l,h=(l=o,oe.__extends(d,l),d);function d(){return null!==l&&l.apply(this,arguments)||this}e.DataContentPane=h;var u,_=(u=Ut.LayerElement,oe.__extends(c,u),c.prototype._getCssSelector=function(){return Ht.FixedOptions.COLUMN_BAR_STYLE},c);function c(t){var e=u.call(this,t.doc,"fixedColumnBar")||this;return e._grid=t,e}var p,f=(p=h,oe.__extends(g,p),g.prototype._doDispose=function(){p.prototype._doDispose.call(this)},g.prototype.layoutBars=function(t,e,i){this._layoutBars(t,e,i)},g.prototype._doLayoutContent=function(t,e,i){this._barView||(this._barView=this._createBar(t.grid),this.addChild(this._barView),this._barView2=this._createBar(t.grid),this.addChild(this._barView2)),p.prototype._doLayoutContent.call(this,t,e,i)},g.prototype._createBar=function(t){return new _(t)},g.prototype._layoutBars=function(t,e,i){var o=t.fixedBarWidth,n=t.footBounds.height;if(this._barView.visible=0<o,this._barView2.visible=!1,this._barView.visible){var r=Math.min(i-n,t.dataBounds.bottom);this._barView.setBounds(e-o,0,o,r),0<n&&(this._barView2.visible=!0,this._barView2.setBounds(e-o,i-n,o,n))}},g);function g(t,e){return void 0===e&&(e=null),p.call(this,t,e)||this}e.FixedContentPane=f;var m,y=(m=Ut.LayerElement,oe.__extends(v,m),v.prototype._getCssSelector=function(){return"rg-right-column-bar"},v);function v(){return null!==m&&m.apply(this,arguments)||this}var w,C=(w=f,oe.__extends(x,w),x.prototype._createBar=function(){return new y(this.doc,"rightColumnBar")},x.prototype._layoutBars=function(t,e,i){var o=t.rightBarWidth,n=t.footBounds.height;if(this._barView.visible=0<o,this._barView2.visible=!1,this._barView.visible){var r=Math.min(i-n,t.dataBounds.bottom);this._barView.setBounds(0,0,o,r),0<n&&(this._barView2.visible=!0,this._barView2.setBounds(0,i-n,o,n))}},x);function x(){return null!==w&&w.apply(this,arguments)||this}e.RightContentPane=C;var b,I=(b=o,oe.__extends(E,b),_dp(E,"message",{get:function(){return this._message},set:function(t){t!=this._message&&(this._message=t,this._dom.innerHTML=t,this.invalidate())}}),E.prototype._getCssSelector=function(){return"rg-message-pane"},E.prototype._doLayoutContent=function(t,e,i){b.prototype._doLayoutContent.call(this,t,e,i)},E);function E(t,e){void 0===e&&(e=null);var i=b.call(this,t,e)||this;return i.visible=!1,i}e.MessagePane=I});t(me);me.ContentPane,me.LeftContentPane,me.DataContentPane,me.FixedContentPane,me.RightContentPane,me.MessagePane;var ye=e(function(t,e){Object.defineProperty(e,"__esModule",{value:!0});var p,i,r,o,C,n,s="***1-da*&23%^1//+)(lu%v\\3d!#~`{``~er";(i=p=e.DropDownPosition||(e.DropDownPosition={})).BUTTON="button",i.EDITOR="editor",(o=r=e.DropDownSortStyle||(e.DropDownSortStyle={})).NONE="none",o.ASCENDING="ascending",o.DESCENDING="descending",(n=C=e.DropDownValueLabel||(e.DropDownValueLabel={})).VALUE="value",n.LABEL="label",n.VALUE_LABEL="valueLabel",n.LABEL_VALUE="labelValue";var a,l=(a=$.EventAware,oe.__extends(h,a),h.prototype._doDispose=function(){this._container=null,this._containerElement=null,this._items=null,ne.Utils.clearElements(this._element),this._element.parentNode&&this._element.parentNode.removeChild(this._element),this._element=null,a.prototype._doDispose.call(this)},_dp(h,"minWidth",{get:function(){return this._minWidth},set:function(t){t!=this._minWidth&&(this._minWidth=t,this._changed())}}),_dp(h,"maxWidth",{get:function(){return this._maxWidth},set:function(t){t!=this._maxWidth&&(this._maxWidth=t,this._changed())}}),_dp(h,"dropDownCount",{get:function(){return this._dropDownCount},set:function(t){t!=this._dropDownCount&&(this._dropDownCount=t,this._changed())}}),_dp(h,"caseSensitive",{get:function(){return this._caseSensitive},set:function(t){t!=this._caseSensitive&&(this._caseSensitive=t,this._changed())}}),_dp(h,"partialMatch",{get:function(){return this._partialMatch},set:function(t){t!=this._partialMatch&&(this._partialMatch=t,this._changed())}}),_dp(h,"sortStyle",{get:function(){return this._sortStyle},set:function(t){t!=this._sortStyle&&(this._sortStyle=t,this._changed())}}),_dp(h,"items",{get:function(){return this._items},set:function(t){if(this._items=[],t)for(var e=0,i=t.length;e<i;e++)this._items.push({label:t[e].label,value:t[e].value,index:e})}}),_dp(h,"itemIndex",{get:function(){return this._itemIndex}}),_dp(h,"dropDownPosition",{get:function(){return this._dropDownPosition},set:function(t){t!=this._dropDownPosition&&(this._dropDownPosition=t,this._changed())}}),_dp(h,"dropDownWidth",{get:function(){return this._dropDownWidth},set:function(t){t!=this._dropDownWidth&&(this._dropDownWidth=t,this._changed())}}),_dp(h,"displayLabels",{get:function(){return this._displayLabels},set:function(t){t!==this._displayLabels&&(this._displayLabels=t,this._changed())}}),_dp(h,"separator",{get:function(){return this._separator},set:function(t){t!=this._separator&&(this._separator=t,this._changed())}}),_dp(h,"itemColumned",{get:function(){return this._itemColumned},set:function(t){t!=this._itemColumned&&(this._itemColumned=t,this._changed())}}),_dp(h,"viewGridInside",{get:function(){return this._viewGridInside},set:function(t){t!=this._viewGridInside&&(this._viewGridInside=t,this._changed())}}),_dp(h,"trimLabelText",{get:function(){return this._trimLabelText},set:function(t){t!=this._trimLabelText&&(this._trimLabelText=t,this._changed())}}),_dp(h,"initCount",{get:function(){return this._initCount},set:function(t){t!=this._initCount&&(this._initCount=t,this._changed())}}),_dp(h,"moreItemCount",{get:function(){return this._moreItemCount},set:function(t){t!=this._moreItemCount&&(this._moreItemCount=t,this._changed())}}),_dp(h,"moreText",{get:function(){return this._moreText},set:function(t){t!=this._moreText&&(this._moreText=t,this._changed())}}),_dp(h,"listing",{get:function(){return this._containerElement&&this._containerElement.contains(this._element)}}),_dp(h,"itemCount",{get:function(){return 0==this.initCount?this._items&&this._items.length:this._element.children.length}}),_dp(h,"valueIndex",{get:function(){var t=this._items,e=this._itemIndex;return t&&0<=e&&e<t.length?t[e].index:-1},set:function(t){if(t=Math.max(-1,t),this._itemIndex=-1,0<=t)for(var e=0,i=this._items.length;e<i;e++)if(this._items[e].index==t){this._itemIndex=t;break}this.listing&&this._refreshItems()}}),_dp(h,"selected",{get:function(){return this._selected}}),h.prototype.setItemIndex=function(t,e,i){void 0===e&&(e=!1),void 0===i&&(i=!1);var o=this._element.childNodes;if((t=Math.max(-1,t))<this._items.length&&(e||t!=this._itemIndex||t>=o.length-1)){if(i&&t>=o.length-1){var n=o[o.length-1];if(n.isMoreButton){var r=t-(o.length-1);r=(Math.floor(r/this.moreItemCount)+1)*this.moreItemCount,this.$_addMoreItems(n,r)}}this._itemIndex=t,this.listing&&this._refreshItems(),this._selected=0<=t}},h.prototype.setZIndex=function(t){this._element.style.zIndex=String(t)},h.prototype.show=function(t,e,i,o,n){this._containerElement=this._viewGridInside?this._container._container:t,this._sortStyle!=r.NONE&&this.$_sortItems(),this._show(e,i,o,n)},h.prototype.hide=function(){ne.Utils.detach(this._element),this._containerElement=null},h.prototype.currentIsMore=function(t){var e=this._element.childNodes[null!=t?t:this._itemIndex];return e&&e.isMoreButton},h.prototype.addMoreItems=function(){if(this.currentIsMore(null)){var t=this._element.childNodes[this._itemIndex];this.$_addMoreItems(t,0)}},h.prototype._changed=function(){},h.prototype._createList=function(t){var e=t.createElement("div");return e.className="rg-dropdownlist",e.onkeydown=function(t){27==t.keyCode&&this.fireEvent(h.CLOSE_UP,!1)}.bind(this),e},h.prototype.$_sortItems=function(){this._sortStyle==r.ASCENDING?this._items.sort(function(t,e){return t.label<e.label?-1:t.label>e.label?1:0}):this._items.sort(function(t,e){return t.label>e.label?-1:t.label<e.label?1:0})},h.prototype._show=function(t,e,i,o){var n=this._element;if(n){var r=n.style;r.position="absolute",r.cssFloat="none",r.clear="both",r.boxSizing="border-box",r.minWidth="20px",r.minHeight="10px",r.overflow="auto",this._firstChild=null,ne.Utils.clearChildren(n),ne.Utils.disableSelection(n),this._containerElement.appendChild(n),this._cellWidth=i,this._editBounds=o,r.width="10px",this._buildItems(),this.$_resetHeight(),this._resetWidth(i),this.$_resetPosition(t,e,i,o),this._selected=!1}},h.prototype._getListElement=function(){return this._element},h.prototype.$_resetHeight=function(){var t=this._getListElement();if(this._firstChild){var e=ne.getWin(this._firstChild),i=ne.Utils.getClientRect(this._firstChild),o=this._firstChild.currentStyle||e.getComputedStyle(this._firstChild),n=parseInt(o.marginTop.replace("px",""));n=isNaN(n)?0:n;var r=parseInt(o.marginBottom.replace("px",""));r=isNaN(r)?0:r;var s=0<this._dropDownCount?Math.min(this._dropDownCount,this._items.length):this._items.length;t.style.height=(i.height+n)*s+4+r+"px"}else t.style.height="10px"},h.prototype._resetWidth=function(t){var e=this._element,i=ne.Utils.getClientRect(e),o=this._dropDownWidth,n=o,r=e.offsetWidth?e.offsetWidth+(ne.Utils.ieOld&&"border-box"===e.style.boxSizing?17:0):0;n<0?n=t:0==n&&(n=10),e.style.width=n+"px";var s=0;if(this._firstChild){var a=ne.getWin(this._firstChild),l=this._firstChild.currentStyle||a.getComputedStyle(this._firstChild),h=parseInt(l.marginLeft.replace("px",""));h=isNaN(h)?0:h;var d=parseInt(l.marginRight.replace("px",""));d=isNaN(d)?0:d;for(var u=e.childNodes,_=0;_<u.length;_++)s=Math.max(s,u[_].scrollWidth);s+=e.offsetWidth-e.clientWidth+h+d+2}o<0&&(s=Math.max(s,n));var c=ne.Utils.getBrowserSize();n=s=Math.min(s,c.width),ne.Utils.ieOld&&(0<=o||n<s)&&(n+=20),n<i.width?e.style.overflowX="hidden":e.style.overflowX="auto",e.style.width=Math.max(n,r)+"px"},h.prototype.$_resetPosition=function(t,e,i,o){var n=ne.getDoc(this._element),r=ne.getWin(this._element),s=ne.Utils.getBrowserSize(),a=ne.Utils.getClientRect(this._containerElement),l=ne.Utils.getClientRect(this._container._container),h=s.width,d=s.height,u=ne.Utils.getClientRect(this._element),_=r.pageXOffset||n.documentElement.scrollLeft,c=r.pageYOffset||n.documentElement.scrollTop;n.documentElement.scrollWidth>n.documentElement.clientWidth&&(d-=18),n.documentElement.scrollHeight>n.documentElement.clientHeight&&(h-=18),t+=l.left-a.left,e+=l.top-a.top,(ne.Utils.ieTen||ne.Utils.ieOld||ne.Utils.ieLeg)&&(t+=n.documentElement.scrollLeft,e+=n.documentElement.scrollTop),e+u.height>d+c&&o&&(e=e-o.height-u.height)<0&&(e=d-u.height-2),this._dropDownPosition!=p.EDITOR?t=Math.max(0,t+i-u.width):t+u.width>h+_&&(t=h-u.width),!ne.Utils.isMobile()&&this._viewGridInside&&o&&(e=o.bottom-a.top+2,(a.bottom<o.bottom+u.height||d+c<o.bottom+u.height)&&(e=o.top-u.height-a.top-2)),ne.Utils.move(this._element,Math.max(0,t),Math.max(0,e))},h.prototype._resetItems=function(t,e,i,o){ne.Utils.clearChildren(this._element),this._firstChild=null,this._buildItems(),this.$_resetHeight(),this._resetWidth(i),this.$_resetPosition(t,e,i,o)},h.prototype._buildItems=function(t,e){function i(t,e){var i=e&&e.value?e.value.toString():"",o=r.createElement("span");return o.style.whiteSpace="pre",o.innerHTML=i?ne.Utils.htmlEncode(i):"&nbsp;",o.tabIndex=-1,o.className="rg-dropdown-value",ne.Utils.disableSelection(o),t.appendChild(o),o}function o(t,e){var i=r.createElement("span");i.style.whiteSpace="pre",i.innerHTML=e?ne.Utils.htmlEncode(e):"&nbsp;",i.tabIndex=-1,i.className="rg-dropdown-seperator",ne.Utils.disableSelection(i),t.appendChild(i)}void 0===t&&(t=0),void 0===e&&(e=0);var n,r=ne.getDoc(this._element),s=0,a=function(t,e){var i=e&&e.label?e.label.toString():"";i=this._trimLabelText?i.trim():i;var o=r.createElement("span");return this._trimLabelText||(o.style.whiteSpace="pre"),o.innerHTML=i?ne.Utils.htmlEncode(i):"&nbsp;",o.tabIndex=-1,o.className="rg-dropdown-label",ne.Utils.disableSelection(o),t.appendChild(o),o}.bind(this),l=this._items,h=e||(0<this._element.children.length?this.moreItemCount:this.initCount);if(l&&!(l.length<1)){for(var d=t,u=l.length;d<u;d++){if(this._initCount&&h<=d-t&&d<u){var _=r.createElement("div"),c=_.style;c.position="relative",c.cssFloat="none",c.paddingTop="1px",c.paddingBottom="1px",c.paddingLeft="2px",c.paddingRight="2px",c.whiteSpace="nowrap",c.cursor="pointer",c.textAlign="center",ne.Utils.disableSelection(_),_.nextIndex=d,_.onclick=this._nextClickHandler,_.isMoreButton=!0,_.className="rg-dropdown-more",a(_,{label:this.moreText}),this._element.appendChild(_);break}var p=l[d],f=r.createElement("div"),g=f.style;g.position="relative",g.cssFloat="none",g.paddingTop="1px",g.paddingBottom="1px",g.paddingLeft="2px",g.paddingRight="2px",g.whiteSpace="nowrap",g.cursor="default",f.className=d==this._itemIndex?"rg-dropdown-select rg-dropdown-item":"rg-dropdown-item",ne.Utils.disableSelection(f),this._element.appendChild(f),0==d&&(this._firstChild=f),f.onclick=this._clickHandler;var m=null;switch(this.displayLabels){case C.LABEL:a(f,p);break;case C.VALUE:i(f,p);break;case C.LABEL_VALUE:m=a(f,p),o(f,this._separator),i(f,p);break;case C.VALUE_LABEL:m=i(f,p),o(f,this._separator),a(f,p)}m&&this._itemColumned&&(y=m,v=ne.Utils.getTextLength(y.textContent),s<v&&(n=y,s=v))}var y,v;if(this._itemColumned&&n){var w=Math.ceil(n.getBoundingClientRect().width);for(d=0,u=this._element.childNodes.length;d<u;d++)(m=this._element.childNodes[d].firstChild).style.display="inline-block",m.style.width=w+"px"}}},h.prototype.$_addMoreItems=function(t,e){var i=t.nextIndex;t.parentNode&&t.parentNode.removeChild(t),this._buildItems(i,e),this._resetWidth(this._cellWidth),this.fireEvent(h.EDITOR_FOCUS)},h.prototype._refreshItems=function(){for(var t=this._element.childNodes,e=0;e<t.length;e++)(i=t[e]).className=e==this._itemIndex?"rg-dropdown-select":"rg-dropdown-item";var i,o=this._itemIndex;if(0<=o&&o<t.length)if((i=t[o]).offsetTop<this._element.scrollTop)this._element.scrollTop=i.offsetTop;else{var n=i.offsetTop+ne.Utils.getSize(i).height;n>=this._element.scrollTop+this._element.clientHeight&&(this._element.scrollTop=n-this._element.clientHeight)}},h.prototype.$_hangulToChosungAll=function(t){for(var e=["ㄱ","ㄲ","ㄴ","ㄷ","ㄸ","ㄹ","ㅁ","ㅂ","ㅃ","ㅅ","ㅆ","ㅇ","ㅈ","ㅉ","ㅊ","ㅋ","ㅌ","ㅍ","ㅎ"],i="",o=0;o<t.length;o++){var n=t.charCodeAt(o)-44032;i+=-1<n&&n<11172?e[Math.floor(n/588)]:t[o]}return i},h.prototype.$_hangulToChosung=function(t){var e={cho:t,org:t};if(/[ㄱ-힝]/.test(t)){var i=["ㄱ","ㄲ","ㄴ","ㄷ","ㄸ","ㄹ","ㅁ","ㅂ","ㅃ","ㅅ","ㅆ","ㅇ","ㅈ","ㅉ","ㅊ","ㅋ","ㅌ","ㅍ","ㅎ"],o=t.charCodeAt(0)-44032,n=o%28,r=(o-n)/28%21,s=((o-n)/28-r)/21;e.cho=i[s]?i[s]:t,["ㅏ","ㅐ","ㅑ","ㅒ","ㅓ","ㅔ","ㅕ","ㅖ","ㅗ","ㅘ","ㅙ","ㅚ","ㅛ","ㅜ","ㅝ","ㅞ","ㅟ","ㅠ","ㅡ","ㅢ","ㅣ"][r]&&(e.org=t)}return e},h.prototype.$_search=function(t,e){void 0===e&&(e=!1);try{if(this._items&&0<this._items.length&&t){for(var i=this._items,o=i.length,n=this._caseSensitive?t:t.toLowerCase(),r=[],s=0;s<o;s++){if(d=i[s].label.toString())if(d=this._caseSensitive?d:d.toLowerCase(),this._partialMatch){for(var a="",l=0;l<d.length;l++){var h=this.$_hangulToChosung(d[l]);a+=this.$_hangulToChosung(n[l]).org?h.org:h.cho}if(a==n)return void this.setItemIndex(s,e,!0)}else if(d==n)return void this.setItemIndex(s,e,!0);r.push(d)}for(s=0;s<o;s++){var d=r[s];if(this._partialMatch){var u=!1;for(l=0;l<n.length;l++){var _=this.$_hangulToChosung(d[l]);if(!(_.org&&_.org==n[l]||_.cho&&_.cho==n[l])){u=!1;break}u=!0}if(u)return void this.setItemIndex(s,e,!0)}else if(d&&0==d.indexOf(n))return void this.setItemIndex(s,e,!0)}for(s=0;s<o;s++)if(d=r[s],this._partialMatch){var c=this.$_hangulToChosungAll(d),p=this.$_hangulToChosungAll(n),f=c.indexOf(p);if(a=d.substr(0,f),~f){l=0;for(var g=f,m=n.length;l<m;l++,g++)h=this.$_hangulToChosung(d[g]),a+=this.$_hangulToChosung(n[l]).org?h.org:h.cho}if(a&&0<a.indexOf(n))return void this.setItemIndex(s,e,!0)}else if(d&&0<d.indexOf(n))return void this.setItemIndex(s,e,!0)}this.setItemIndex(-1)}finally{e&&(this._selected=!0)}},h.CLOSE_UP="onDropDownListCloseUp",h.EDITOR_FOCUS="onDropDownListEditorFocus",h);function h(t){var e=a.call(this)||this;return e._minWidth=0,e._maxWidth=0,e._dropDownCount=8,e._caseSensitive=!1,e._partialMatch=!1,e._sortStyle=r.NONE,e._items=null,e._itemIndex=-1,e._dropDownPosition=p.BUTTON,e._dropDownWidth=-1,e._displayLabels=null,e._separator=null,e._itemColumned=!1,e._viewGridInside=!1,e._trimLabelText=!0,e._initCount=0,e._moreItemCount=25,e._moreText=null,e._selected=!1,e._clickHandler=function(t){var e=t.currentTarget,i=ne.Utils.getChildIndex(e);0<=i&&(this._itemIndex=i,this._selected=!0,this.fireEvent(h.CLOSE_UP,!0))}.bind(e),e._nextClickHandler=function(t){var e=t.currentTarget;this.$_addMoreItems(e)}.bind(e),e._container=t,e._element=e._createList(t.doc),e}e.DropDownList=l;var d,u=(d=Jt.PopupCellEditor,oe.__extends(_,d),_.prototype._doDispose=function(){this._globalMouseHandler=null,this._list.removeListener(this),this._list.dispose(),this._list=this._items=this._values=this._labels=null,d.prototype._doDispose.call(this)},_dp(_,"values",{get:function(){return this._values},set:function(t){this._values=t?t.slice():[]}}),_dp(_,"labels",{get:function(){return this._labels},set:function(t){this._labels=t?t.slice():[]}}),_dp(_,"displayLabels",{get:function(){return this._displayLabels},set:function(t){t!=this._displayLabels&&(this._displayLabels=t,this._changed())}}),_dp(_,"domainOnly",{get:function(){return this._domainOnly},set:function(t){t!=this._domainOnly&&(this._domainOnly=t,this._changed())}}),_dp(_,"textReadOnly",{get:function(){return this._textReadOnly},set:function(t){this._setTextReadOnly(t)}}),_dp(_,"dropDownWidth",{get:function(){return this._dropDownWidth},set:function(t){t!=this._dropDownWidth&&(this._dropDownWidth=t,this._changed())}}),_dp(_,"dropDownPosition",{get:function(){return this._dropDownPosition},set:function(t){t!=this._dropDownPosition&&(this._dropDownPosition=t,this._changed())}}),_dp(_,"dropDownCount",{get:function(){return this._dropDownCount},set:function(t){t!=this._dropDownCount&&(this._dropDownCount=t,this._changed())}}),_dp(_,"itemSortStyle",{get:function(){return this._itemSortStyle},set:function(t){t!=this.itemSortStyle&&(this._itemSortStyle=t,this._changed())}}),_dp(_,"caseSensitive",{get:function(){return this._caseSensitive},set:function(t){t!=this._caseSensitive&&(this._caseSensitive=t,this._changed())}}),_dp(_,"partialMatch",{get:function(){return this._partialMatch},set:function(t){t!=this._partialMatch&&(this._partialMatch=t,this._changed())}}),_dp(_,"commitOnSelect",{get:function(){return this._commitOnSelect},set:function(t){t!=this._commitOnSelect&&(this._commitOnSelect=t,this._changed())}}),_dp(_,"dropDownWhenClick",{get:function(){return this._dropDownWhenClick},set:function(t){t!=this._dropDownWhenClick&&(this._dropDownWhenClick=t,this._changed())}}),_dp(_,"trimLabelText",{get:function(){return this._trimLabelText},set:function(t){t!=this._trimLabelText&&(this._trimLabelText=t,this._changed())}}),_dp(_,"separator",{get:function(){return this._separator},set:function(t){t!=this._separator&&(this._separator=t,this._changed())}}),_dp(_,"itemColumned",{get:function(){return this._itemColumned},set:function(t){t!=this._itemColumned&&(this._itemColumned=t,this._changed())}}),_dp(_,"listing",{get:function(){return this._list.listing}}),_.prototype.dropDown=function(t){if(void 0===t&&(t=!1),!this.readOnly&&!this.listing&&!this._closing){this._refreshItems();var e=ne.getDoc(this._container),i=ne.getWin(this._container);if(t||this._items&&0<this._items.length){var o=this._list,n=this._options,r=e.documentElement,s=ne.Utils.getClientRect(this._container);if(o.viewGridInside=n.viewGridInside,o.displayLabels=this.displayLabels,o.separator=this.separator,o.itemColumned=this.itemColumned,o.items=this._items,this._saveIndex=this._selectedIndex,this._saveText=this._editor.value,o.caseSensitive=this._caseSensitive,o.partialMatch=this._partialMatch,o.dropDownCount=this._dropDownCount,o.dropDownWidth=this._dropDownWidth,o.dropDownPosition=this._dropDownPosition,o.sortStyle=this._itemSortStyle,o.valueIndex=this._selectedIndex,o.trimLabelText=this._trimLabelText,this._isMobile)this._showMarquee(r),o.viewGridInside=!1,o.show(r,0,0,0,null),this._centerPopup(r,o._element);else{var a=this._grid.displayOptions;o.setZIndex(a.baseZindex+3),o.show(e.documentElement,s.cx-1,s.cy+s.height,this._cellBounds.width,ne.Utils.getClientRect(this._editor))}return o.$_search(this._editor.value,!0),i.addEventListener("mousedown",this._globalMouseHandler),!0}}return!1},_.prototype.closeUp=function(t){if(this.listing){this._closing=!0;try{ne.getWin(this._container).removeEventListener("mousedown",this._globalMouseHandler),this._closeMarquee(),this._list.hide();var e=void 0;if(t&&this._list.selected&&0<=(e=this._list.valueIndex)&&this._items&&this._items.length>e){this._selectedIndex=this._list.valueIndex;var i=!this._isMobile&&this._labeling?this._items[e].label:this._items[e].value;this._isMobile?this._commitListValue(i):(this._editor.value=i,e==this._saveIndex&&i==this._saveText||this._dispatchChange(),this._commitOnSelect&&this._dispatchCommit())}else this._selectedIndex=-1}finally{this._closing=!1}return!0}},_dp(_,"hasButton",{get:function(){return!0}}),_.prototype.initOptions=function(){d.prototype.initOptions.call(this),this._values=[],this._labels=[],this._displayLabels=C.LABEL,this._separator=" - ",this._itemColumned=!1,this._domainOnly=!1,this._textReadOnly=!1,this._dropDownWidth=-1,this._dropDownPosition=p.BUTTON,this._dropDownCount=8,this._itemSortStyle=r.NONE,this._caseSensitive=!1,this._partialMatch=!1,this._commitOnSelect=!0,this._dropDownWhenClick=!1,this._viewGridInside=!1,this._initCount=0,this._moreItemCount=25,this._moreText=window.RG_CONST&&window.RG_CONST.MORETEXT||"더보기"},_.prototype.setEditIndex=function(t){d.prototype.setEditIndex.call(this,t),this._lookup=!1,this._labeling=!1,this._domain=null,this._items=null,this._refreshItems()},_.prototype.setEditValue=function(t){var e,i=-1;if(this._value=t,this._lookup){var o=this._domain;o?e=0<=(n=i=o.keys?o.keys.indexOf(t):-1)&&o.values&&o.values.length>n?o.values[n]:t:i=this._editIndex.dataColumn.getLookupIndex(t),this._labeling?(e=o?0<=i&&o.values&&o.values.length>i?o.values[i]:t:0<=i?this._editIndex.dataColumn.getLookupLabel(t):t,d.prototype.setEditValue.call(this,e)):d.prototype.setEditValue.call(this,t)}else if(this._values){for(var n=0,r=this._values.length;n<r;n++)if(t==this._values[n]){i=n;break}this._labeling&&this._labels&&(i<0||this._labels.length>i)?(e=0<=i?this._labels[n]:t,d.prototype.setEditValue.call(this,e)):d.prototype.setEditValue.call(this,t)}else d.prototype.setEditValue.call(this,t);this._selectedIndex=i},_.prototype.isEdited=function(){var t=d.prototype.isEdited.call(this);return t&&this.domainOnly&&(t=void 0!==this.$_getEditValue(!1)),t},_.prototype._getInputSelector=function(){return _.INPUT_CSS},_.prototype._createDropDown=function(t){return new l(t)},_.prototype.setCellEditValue=function(t,e){d.prototype.setCellEditValue.call(this,t,e)},_.prototype.getEditValue=function(t,e){return void 0===t&&(t=!0),!this.isEdited()&&this._selectedIndex<0?this._value:this.$_getEditValue(t,e)},_.prototype.setBounds=function(t,e,i,o,n){d.prototype.setBounds.call(this,t,e,i,o,n)},_.prototype._createEditor=function(t){return d.prototype._createEditor.call(this,t)},_.prototype._textHandler=function(){this._requestStart()},_.prototype._compositionstartHandler=function(t){d.prototype._compositionstartHandler.call(this,t)},_.prototype._keyDownHandler=function(t){if(!this.isDisabled()){var e=this._list,i=e.itemIndex;switch(t.keyCode){case 8:case 46:if(!t.ctrlKey&&this.textReadOnly)return this._requestStart(),t.preventDefault(),!0;break;case 32:if(this.listing&&e.currentIsMore(i))return e.addMoreItems(),t.preventDefault(),!0;break;case 13:if(this.listing&&e.currentIsMore(i))return e.addMoreItems(),t.preventDefault(),!0;if(this.closeUp(!0))return!this._sendToParent(t);break;case 27:if(this.closeUp(!1))return t.preventDefault(),!0;break;case 40:if(t.altKey&&!this.listing)return this._requestStart(),t.preventDefault(),!0;if(this.listing)return this._list.setItemIndex(Math.min(e.itemCount-1,i+1)),t.preventDefault(),!0;break;case 34:if(this.listing)return this._list.setItemIndex(Math.min(e.itemCount-1,i+e.dropDownCount)),t.preventDefault(),!0;break;case 38:if(t.altKey&&this.listing)return this.closeUp(!1),t.preventDefault(),!0;if(this.listing)return this._list.setItemIndex(Math.max(0,i-1)),t.preventDefault(),!0;break;case 33:if(this.listing)return this._list.setItemIndex(Math.max(0,i-e.dropDownCount)),t.preventDefault(),!0}return d.prototype._keyDownHandler.call(this,t)}},_.prototype._keyPressHandler=function(t){this.isDisabled()||(d.prototype._keyPressHandler.call(this,t),t.keyCode&&this.textReadOnly&&t.preventDefault())},_.prototype._inputHandler=function(t){this.isDisabled()||(this.textReadOnly&&(t.target.value=this._oldValue||""),d.prototype._inputHandler.call(this,t))},_.prototype._pasteHandler=function(t){this.isDisabled()||d.prototype._pasteHandler.call(this,t)},_.prototype._copyHandler=function(t){this.isDisabled()||d.prototype._copyHandler.call(this,t)},_.prototype._requestStart=function(t){return!!d.prototype._requestStart.call(this,t)&&(this._isMobile?t&&this.dropDown():!1!==t&&this.dropDown(),!0)},_.prototype._doChanged=function(){d.prototype._doChanged.call(this),this.listing&&(this._list.$_search(this._editor.value),this._selectedIndex=-1)},_.prototype.dropDownList=function(t){this.dropDown(t)},_.prototype.closeList=function(t){this.closeUp(t)},_.prototype.buttonClicked=function(t){this.listing?this.closeUp(!1):this.dropDown()},_.prototype.$_setItems=function(t,e){this._items=[];for(var i=0,o=t.length;i<o;i++)this._items.push({value:t[i],label:e&&e.length>i?e[i]:t[i]})},_.prototype._refreshItems=function(t,e){void 0===t&&(t=!1),void 0===e&&(e=!1);var i=this.editIndex,o=i.item;if(this._values&&(0<this._values.length||e))this.$_setItems(this._values,this._labels),this._labeling=this.displayLabels!==C.VALUE&&this._labels&&this._labels.length>=this._values.length;else if(i.dataColumn&&i.item&&(0<=i.dataRow||dt.ItemState_isEditing(o.itemState))){var n=i.dataColumn;if(n.lookupSource){for(var r=n.lookupKeyFieldIds,s=[],a=0;a<r.length-1;a++)s.push(o.getData(r[a]));var l=n.lookupSource.getTextDomain(s);l&&l.values&&0<l.values.length&&(this.$_setItems(l.keys,l.values),this._labeling=!0,this._lookup=!0,this._domain=l)}else n.values&&0<n.values.length&&(this.$_setItems(n.values,n.labels),this._labeling=this.displayLabels!==C.VALUE&&n.labels&&n.labels.length>=n.values.length,this._lookup=!0)}if(t&&this.listing){this._list.items=this._items;var h=ne.Utils.getClientRect(this._container);this._list._resetItems(h.cx-1,h.cy+h.height,this._cellBounds.width,ne.Utils.getClientRect(this._editor))}},_.prototype.$_getEditValue=function(t,e){void 0===t&&(t=!0),void 0===e&&(e=!1);var i,o=this.text,n=Jt.TextCellEditor.prototype.getEditValue.call(this,t,e),r=n,s=this._editIndex.dataColumn,a=this._selectedIndex,l=0<=a;if(this._lookup){if(this._domain){if(this._labeling&&(r=0<=(i=l?a:this._domain.values?this._domain.values.indexOf(o):-1)&&this._domain.keys&&this._domain.keys.length>i?this._domain.keys[i]:r),this.domainOnly&&(!this._domain.keys||this._domain.keys.indexOf(r)<0))return Jt.CellEditor.Unselected}else if(this._labeling&&void 0===(r=l?s.getLookupValue(a):s.getSourceValue(o))&&(r=n),this.domainOnly&&(!s.values||s.values.indexOf(r)<0))return Jt.CellEditor.Unselected}else if(this._labeling&&0<=(i=l?a:this._labels?this._labels.indexOf(o):-1)&&i<this._values.length&&(r=this._values[i]),this.domainOnly&&(!this._values||this._values.indexOf(r)<0))return Jt.CellEditor.Unselected;return r},_.prototype.onDropDownListCloseUp=function(t,e){this.closeUp(e),ne.Utils.isMobile()||this.setFocus()},_.prototype.onDropDownListEditorFocus=function(){this.setFocus()},_.INPUT_CSS="rg-list-editor",_);function _(t,e){var i=d.call(this,t,e)||this;return i._values=null,i._items=null,i._labels=null,i._displayLabels=C.LABEL,i._domainOnly=!1,i._dropDownWidth=-1,i._dropDownPosition=p.BUTTON,i._dropDownCount=8,i._itemSortStyle=r.NONE,i._caseSensitive=!1,i._partialMatch=!1,i._commitOnSelect=!0,i._dropDownWhenClick=!1,i._trimLabelText=!0,i._separator=null,i._itemColumned=!1,i._lookup=!1,i._labeling=!1,i._domain=null,i._closing=!1,i._selectedIndex=-1,i._globalMouseHandler=function(t){var e=t.target;if(this._isMarquee(e))this.closeUp(!1);else{for(;e;){if(e==this._list._element)return;e=e.parentElement}this.closeUp(!0)}}.bind(i),i._list=i._createDropDown(t.container),i._list.addListener(i),i}e.DropDownCellEditor=u;var c,f=(c=l,oe.__extends(v,c),_dp(v,"valueIndices",{get:function(){return this._selectItemIndices.slice()},set:function(t){this._selectItemIndices=[],null!=t&&(this._selectItemIndices=t.slice(),this.listing&&this._refreshItems(),this._selected=!1)}}),v.prototype.changeCheckIndex=function(t,e,i){var o=this._listElement.childNodes;if(0<=t&&t<o.length){for(var n=o[t],r=n.getElementsByTagName("input"),s=void 0,a=0,l=r.length;a<l;a++)if("checkbox"==r[a].type){s=r[a];break}s&&(s.checked=null!=e?e:!s.checked,this.$_changeCheckIndex(n,t,s.checked,i))}},v.prototype.$_changeCheckIndex=function(t,e,i,o){var n=this._selectItemIndices;if(!(e<0||e>=this._items.length)){var r=this._items[e].index;i?n.indexOf(r)<0&&n.push(r):0<=n.indexOf(r)&&n.splice(n.indexOf(r),1),t.className="rg-multicheck-item"+(i?" rg-multicheck-select":""),this._selected=!0,o&&this.fireEvent(v.CHECK_CLICK,!1)}},v.prototype._createList=function(){var t=this._container.doc,e=t.createElement("div");e.className="rg-multicheck";var i=t.createElement("div");i.className="rg-multicheck-allcheck",(this._allCheckElement=i).style.paddingLeft="2px",ne.Utils.disableSelection(i),e.appendChild(i);var o=t.createElement("div");o.className="rg-multicheck-list",this._listElement=o,e.appendChild(o);var n=t.createElement("div");return n.style.textAlign="center",n.className="rg-multicheck-button",(this._buttonElement=n).style.margin="2px",n.style.paddingLeft="2px",ne.Utils.disableSelection(n),e.appendChild(n),e.onkeydown=function(t){27==t.keyCode&&this.fireEvent(v.CLOSE_UP_2,!1)}.bind(this),e},v.prototype._getListElement=function(){return this._listElement},v.prototype.setZIndex=function(t){var e=this._element.style;e.zIndex=String(t),(e=this._listElement.style).zIndex=String(t)},v.prototype.$_toggleAllCheck=function(){for(var t=this._listElement.childElementCount,e=this._allCheck.checked,i=0;i<t;i++)this.changeCheckIndex(i,e,!1);this.fireEvent(v.CHECK_CLICK,!1)},v.prototype._show=function(t,e,i,o){var n=this._element;if(n){var r=n.style;r.position="absolute",r.cssFloat="none",r.clear="both",r.boxSizing="border-box",r.minWidth="20px",r.minHeight="10px",r.overflow="visible",(r=this._listElement.style).position="relative",r.cssFloat="none",r.clear="both",r.boxSizing="border-box",r.minWidth="20px",r.minHeight="10px",r.overflow="auto",(r=this._buttonElement.style).position="relative",r.cssFloat="none",r.clear="both",r.boxSizing="border-box",r.marginLeft="0px",r.marginRight="0px",this._firstChild=null,ne.Utils.clearChildren(this._listElement),ne.Utils.disableSelection(this._listElement),this._containerElement.appendChild(n),this._buildItems(),this.$_buildButtons(),this.$_resetHeight(),this._resetWidth(i),this.$_resetPosition(t,e,i,o),0<this._selectItemIndices.length&&this._itemIndex<0&&this.setItemIndex(this._selectItemIndices[0]),this._selected=!1}},v.prototype._resetWidth=function(t){var e=this._listElement,i=ne.Utils.getClientRect(e),o=this.dropDownWidth,n=o;n<0?n=t:0==n&&(n=10),e.style.width=n+"px";var r=0;if(this._firstChild){var s=ne.getWin(this._firstChild),a=this._firstChild.currentStyle||s.getComputedStyle(this._firstChild),l=parseInt(a.marginLeft.replace("px",""));l=isNaN(l)?0:l;var h=parseInt(a.marginRight.replace("px",""));h=isNaN(h)?0:h;for(var d=e.childNodes,u=0;u<d.length;u++)r=Math.max(r,d[u].scrollWidth);r+=e.offsetWidth-e.clientWidth+l+h}o<0&&(r=Math.max(r,n));var _=ne.Utils.getBrowserSize();n=r=Math.min(r,_.width),ne.Utils.ieOld&&(0<=o||n<r)&&(n+=20),n<i.width?e.style.overflowX="hidden":e.style.overflowX="auto",r=Math.floor(this._buttonElement.getBoundingClientRect().width),isNaN(r)||(n=Math.max(n,r)),e.style.width=n+"px"},v.prototype.$_resetPosition=function(t,e,i,o){var n=this._container.doc,r=ne.getDocWin(n),s=ne.Utils.getBrowserSize(),a=ne.Utils.getClientRect(this._containerElement),l=ne.Utils.getClientRect(this._container._container),h=s.width,d=s.height,u=ne.Utils.getClientRect(this._element),_=r.pageXOffset||n.documentElement.scrollLeft,c=r.pageYOffset||n.documentElement.scrollTop;n.documentElement.scrollWidth>n.documentElement.clientWidth&&(d-=18),n.documentElement.scrollHeight>n.documentElement.clientHeight&&(h-=18),t+=l.left-a.left,e+=l.top-a.top,(ne.Utils.ieTen||ne.Utils.ieOld||ne.Utils.ieLeg)&&(t+=n.documentElement.scrollLeft,e+=n.documentElement.scrollTop),e+u.height>d+c&&(e=e-o.height-u.height)<0&&(e=d-u.height-2),this.dropDownPosition!=p.EDITOR?t=Math.max(0,t+i-u.width):t+u.width>h+_&&(t=h-u.width),!ne.Utils.isMobile()&&this.viewGridInside&&o&&(e=o.bottom-a.top+2,(a.bottom<o.bottom+u.height||d+c<o.bottom+u.height)&&(e=o.top-u.height-a.top-2)),ne.Utils.move(this._element,Math.max(0,t),Math.max(0,e))},v.prototype._resetItems=function(t,e,i,o){ne.Utils.clearChildren(this._listElement),this._firstChild=null,this._buildItems(),this.$_buildButtons(),this.$_resetHeight(),this._resetWidth(i),this.$_resetPosition(t,e,i,o)},v.prototype._buildItems=function(){var i,r=this._container.doc,o=0,t=function(t,e,i){var o=e?e.value.toString():"",n=r.createElement("label");return n.style.whiteSpace="pre",n.innerHTML=o?ne.Utils.htmlEncode(o):"&nbsp;",n.htmlFor=i&&i.id,n.tabIndex=-1,n.className="rg-dropdown-value",ne.Utils.disableSelection(n),t.appendChild(n),n}.bind(this),e=function(t,e,i){var o=e?e.label.toString():"";o=this._trimLabelText?o.trim():o;var n=r.createElement("label");return this._trimLabelText||(n.style.whiteSpace="pre"),n.innerHTML=o?ne.Utils.htmlEncode(o):"&nbsp;",n.htmlFor=i&&i.id,n.tabIndex=-1,n.className="rg-dropdown-label",ne.Utils.disableSelection(n),t.appendChild(n),n}.bind(this),n=function(t,e){var i=r.createElement("span");i.style.whiteSpace="pre",i.innerHTML=e?ne.Utils.htmlEncode(e):"&nbsp;",i.tabIndex=-1,i.className="rg-dropdown-separator",ne.Utils.disableSelection(i),t.appendChild(i)}.bind(this),s=function(t){var e=ne.Utils.getTextLength(t.textContent);o<e&&(i=t,o=e)}.bind(this),a=this._items;if(a&&!(a.length<1)){for(var l=0,h=a.length;l<h;l++){var d=a[l],u=r.createElement("div"),_=u.style;_.position="relative",_.cssFloat="none",_.paddingTop="1px",_.paddingBottom="1px",_.paddingLeft="2px",_.paddingRight="2px",_.whiteSpace="nowrap",_.cursor="default";var c=0<=this._selectItemIndices.indexOf(a[l].index);u.className="rg-multicheck-item"+(c?" rg-multicheck-select":""),ne.Utils.disableSelection(u),this._listElement.appendChild(u),0==l&&(this._firstChild=u),u.onclick=this._clickHandler;var p=r.createElement("input");p.id="$multiCheck_item_"+v.$_checkId++,p.type="checkBox",p.onclick=this._checkClickHandler,p.checked=c,u.appendChild(p);var f=null;switch(this.displayLabels){case C.LABEL:e(u,d,p);break;case C.VALUE:t(u,d,p);break;case C.LABEL_VALUE:f=e(u,d,p),n(u,this.separator),t(u,d,p);break;case C.VALUE_LABEL:f=t(u,d,p),n(u,this.separator),e(u,d,p)}f&&this.itemColumned&&(s(f),u._span=f)}if(this.itemColumned&&i){var g=Math.ceil(i.getBoundingClientRect().width);if(0<g)for(var m=0,y=this._listElement.childNodes.length;m<y;m++)(f=this._listElement.childNodes[m]._span)&&(f.style.display="inline-block",f.style.width=g+"px")}}},v.prototype.setButtonOptions=function(t,e,i,o,n){this._acceptText=t,this._cancelText=e,this._showButtons=i,this._showAllCheck=o,this._allCheckText=n,this.$_buildButtons()},v.prototype.$_buildButtons=function(){var t=this._container.doc;if(this._buttonElement){this._buttonElement.style.display=this._showButtons?"":"none",ne.Utils.clearChildren(this._buttonElement);var e=t.createElement("label"),i=e.style;e.innerHTML=this._acceptText,e.onclick=this._acceptClickHandler,e.className="rg-multicheck-accept",i.padding="0px 3px",i.marginRight="0px",i.marginLeft="2px",i.cursor="pointer",ne.Utils.disableSelection(e),this._buttonElement.appendChild(e),i=(e=t.createElement("label")).style,e.innerHTML=this._cancelText,e.onclick=this._cancelClickHandler,e.className="rg-multicheck-cancel",i.padding="0px 1px",i.marginRight="0px",i.marginLeft="2px",i.cursor="pointer",ne.Utils.disableSelection(e),this._buttonElement.appendChild(e);var o=this._allCheckElement;if(o.onclick=this._allCheckClickHandler,ne.Utils.clearChildren(o),this._showAllCheck){o.style.display="";var n=t.createElement("input");n.type="checkbox",n.id="$multiCheck_item_"+v.$_checkId++,n.onclick=this._allCheckClickHandler,this._allCheck=n,o.appendChild(n);var r=t.createElement("label");r.innerHTML=this._allCheckText,r.htmlFor=n.id,r.tabIndex=-1,ne.Utils.disableSelection(r),o.appendChild(r)}else o.style.display="none"}},v.prototype._refreshItems=function(){for(var t=this._listElement.childNodes,e=-1,i=0;i<t.length;i++){e=i<this._items.length?this._items[i].index:-1;var o=t[i];i===this._itemIndex?ne.Utils.addClassName(o,"rg-multicheck-selectitem"):ne.Utils.removeClassName(o,"rg-multicheck-selectitem")}if(0<=(e=this._itemIndex)&&e<t.length)if((o=t[e]).offsetTop<this._listElement.scrollTop)this._listElement.scrollTop=o.offsetTop;else{var n=o.offsetTop+ne.Utils.getSize(o).height;n>=this._listElement.scrollTop+this._listElement.clientHeight&&(this._listElement.scrollTop=n-this._listElement.clientHeight)}},v.CLOSE_UP_2="onMultiCheckListCloseUp",v.CANCEL="onMultiCheckListCancel",v.CHECK_CLICK="onMultiCheckListCheckClick",v.$_checkId=0,v);function v(t){var e=c.call(this,t)||this;return e._selectItemIndices=[],e._acceptText=null,e._cancelText=null,e._showButtons=!1,e._showAllCheck=!1,e._acceptClickHandler=function(t){this.fireEvent(v.CLOSE_UP_2,!0)}.bind(e),e._cancelClickHandler=function(t){this.fireEvent(v.CANCEL,!1)}.bind(e),e._checkClickHandler=function(t){t.stopImmediatePropagation();var e=t.currentTarget,i=e.parentElement;if(i){var o=ne.Utils.getChildIndex(i),n=e.checked;this.$_changeCheckIndex(i,o,n,!0)}}.bind(e),e._allCheckClickHandler=function(t){if(t.stopImmediatePropagation(),2==t.eventPhase&&t.currentTarget==this._allCheckElement)this._allCheck.checked=!this._allCheck.checked,this.$_toggleAllCheck();else if(2==t.eventPhase&&t.currentTarget==this._allCheck)return void this.$_toggleAllCheck()}.bind(e),e._clickHandler=function(t){var e=t.currentTarget;if(2==t.eventPhase){for(var i=ne.Utils.getChildIndex(e),o=void 0,n=e.getElementsByTagName("input"),r=0,s=n.length;r<s;r++)if("checkbox"==n[r].type){o=n[r];break}o&&(o.checked=!o.checked),this.$_changeCheckIndex(e,i,o.checked,!0)}}.bind(e),e}var g,m=(g=u,oe.__extends(y,g),_dp(y,"showButtons",{get:function(){return this._showButtons},set:function(t){this._showButtons=t}}),_dp(y,"acceptText",{get:function(){return this._acceptText},set:function(t){this._acceptText=t}}),_dp(y,"cancelText",{get:function(){return this._cancelText},set:function(t){this._cancelText=t}}),_dp(y,"allCheckText",{get:function(){return this._allCheckText},set:function(t){this._allCheckText=t}}),_dp(y,"showAllCheck",{get:function(){return this._showAllCheck},set:function(t){this._showAllCheck=t}}),y.prototype._createDropDown=function(t){return new f(t)},y.prototype.setMask=function(t){this._mask=null},y.prototype.dropDown=function(t){if(void 0===t&&(t=!1),!this.readOnly&&!this.listing&&!this._closing){this._refreshItems();var e=ne.getDoc(this._container),i=ne.getWin(this._container);if(t||this._items&&0<this._items.length){var o=this._list,n=this._options;this._selectedIndices=this._selectedIndices||[],o.viewGridInside=n.viewGridInside,o.displayLabels=this.displayLabels,o.separator=this.separator,o.itemColumned=this.itemColumned,o.items=this._items;var r=ne.Utils.getClientRect(this._container);if(this._saveIndices=this._selectedIndices.slice(),this._saveText=this._editor.value,o.caseSensitive=this.caseSensitive,o.dropDownCount=this.dropDownCount,o.dropDownWidth=this.dropDownWidth,o.dropDownPosition=this.dropDownPosition,o.setButtonOptions(this.acceptText,this.cancelText,this.showButtons,this.showAllCheck,this.allCheckText),o.sortStyle=this.itemSortStyle,o.valueIndices=this._selectedIndices.slice(),o.trimLabelText=this.trimLabelText,this._isMobile){var s=e.documentElement;o.viewGridInside=!1,this._showMarquee(s),o.show(s,0,0,0,null),this._centerPopup(s,o._element)}else{var a=this._grid.displayOptions;o.setZIndex(a.baseZindex+3),o.show(e.documentElement,r.cx-1,r.cy+r.height,this._cellBounds.width,ne.Utils.getClientRect(this._editor))}return i.addEventListener("mousedown",this._globalMouseHandler),!0}}return!1},y.prototype.getCheckValues=function(t,e,i){for(var o=[],n=0,r=t.length;n<r;n++)0<=t[n]&&t[n]<e.length&&o.push(this._labeling&&!i?e[t[n]].label:e[t[n]].value);return o},y.prototype.closeUp=function(t){if(this.listing){this._closing=!0;try{var e=this._list,i=this.editIndex&&this.editIndex.dataColumn;if(ne.getWin(this._container).removeEventListener("mousedown",this._globalMouseHandler),this._closeMarquee(),e.hide(),t&&e.selected){if(this._selectedIndices=e.valueIndices.slice(),this._editor.value=this.getCheckValues(this._selectedIndices,this._items).join(i.valueSeparator),!ne.Utils.equalArrays(this._saveIndices,this._selectedIndices)||this._editor.value!=this._saveText)if(this._isMobile){var o=this.getCheckValues(this._selectedIndices,this._items,!0).join(i.valueSeparator);this._commitListValue(o)}else this._dispatchChange(),this.commitOnSelect&&this._dispatchCommit()}else this._selectedIndices=this._saveIndices.slice()}finally{this._closing=!1}return!0}return!1},y.prototype.initOptions=function(){g.prototype.initOptions.call(this),this._showButtons=!0,this._showAllCheck=!1,this._acceptText=window.RG_CONST&&window.RG_CONST.MULTICHECKACCEPT?window.RG_CONST.MULTICHECKACCEPT:"Accept",this._cancelText=window.RG_CONST&&window.RG_CONST.MULTICHECKCANCEL?window.RG_CONST.MULTICHECKCANCEL:"Cancel",this._allCheckText=window.RG_CONST&&window.RG_CONST.MULTICHECKALLCHECK?window.RG_CONST.MULTICHECKALLCHECK:"Check All"},y.prototype.applyOptions=function(t){g.prototype.applyOptions.call(this,t)},y.prototype.setEditValue=function(t){var e,i=[],o=[],n=-1,r=ne.Utils.isArray(t)?t:t?t.split(this._editIndex.dataColumn.valueSeparator):[];if(this._value=t,this._lookup){var s=this._domain;if(s)for(var a=0,l=r.length;a<l;a++)0<=(n=s.keys.indexOf(r[a]))&&(i.push(n),o.push(n<s.values.length?s.values[n]:r[a]));else i=this._editIndex.dataColumn.getLookupIndices(t);this._labeling?(e=s?o.join(this._editIndex.dataColumn.valueSeparator):0<i.length?this._editIndex.dataColumn.getLookupLabel(t):t,g.prototype.setEditValue.call(this,e)):g.prototype.setEditValue.call(this,t)}else if(this._values){for(var h=0,d=r.length;h<d;h++)0<=(n=this._values.indexOf(r[h]))&&(i.push(n),o.push(this._labels&&0<=n&&this._labels.length>n?this._labels[n]:r[h]));this._labeling&&this._labels?(e=o.join(this._editIndex.dataColumn.valueSeparator),g.prototype.setEditValue.call(this,e)):g.prototype.setEditValue.call(this,t)}else g.prototype.setEditValue.call(this,t);this._selectedIndices=i},y.prototype.setCellEditValue=function(t,e){g.prototype.setCellEditValue.call(this,t,e)},y.prototype.getEditValue=function(t,e){return void 0===t&&(t=!0),void 0===e&&(e=!1),this.isEdited()||this._list.selected?this.$_getEditValue(t,e):this._value},y.prototype._keyDownHandler=function(t){if(!this.isDisabled()){var e=this._list;if(t.ctrlKey&&65==t.keyCode&&this.listing)return t.preventDefault(),e._allCheck.checked=!e._allCheck.checked,e.$_toggleAllCheck(),!0;switch(t.keyCode){case 32:if(this.listing)return e.changeCheckIndex(e.itemIndex,null,!0),t.preventDefault(),!0}return g.prototype._keyDownHandler.call(this,t)}},y.prototype.$_getEditValue=function(t,e){function i(t,e,i,o,n){var r=[],s=e&&e.split(n.valueSeparator());if(s&&0<s.length)for(var a=0,l=s.length;a<l;a++)0<=o.indexOf(s[a])&&o.indexOf(s[a])<i.length||0<=i.indexOf(s[a])?r.push(i[a]):t.isDomainOnly()||r.push(s[a]);return r}void 0===t&&(t=!1),void 0===e&&(e=!1),this._list;var o=this.text,n=Jt.TextCellEditor.prototype.getEditValue.call(this,t,e),r=n,s=this._editIndex.dataColumn,a=this._selectedIndices.slice(),l=[],h=this._list.selected;if(this._lookup){if(this._domain){if(this._labeling){if(h)for(var d=0,u=a.length;d<u;d++)a[d]<this._domain.keys.length&&l.push(this._domain.keys[a[d]]);else o&&(l=i(this,o,this._domain.keys,this._domain.values,s));r=l.join(s.valueSeparator)}}else if(this._labeling&&void 0===(r=h?s.getLookupValues(a):s.getSourceValues(o))&&(r=n),this.domainOnly){if(!s.values)return Jt.CellEditor.Unselected;for(var _=(r=ne.Utils.isArray(r)?r:r&&r.split?r.split(s.valueSeparator):[r]).length-1;0<=_;_--)s.values.indexOf(r[_])<0&&r.splice(_,1)}}else{if(this._labeling){if(h){var c=0;for(u=a.length;c<u;c++)a[c]<this._values.length&&l.push(this._values[a[c]])}else o&&(l=i(this,o,this._values,this._labels,s));r=l.join(s.valueSeparator)}if(this.domainOnly){if(!s.values)return Jt.CellEditor.Unselected;for(_=(r=ne.Utils.isArray(r)?r:r&&r.split?r.split(s.valueSeparator):[r]).length-1;0<=_;_--)s.values.indexOf(r[_])<0&&r.splice(_,1)}}return ne.Utils.isArray(r)?r.join(s.valueSeparator):r},y.prototype._getInputSelector=function(){return y.INPUT_CSS},y.prototype.onMultiCheckListCloseUp=function(t,e){this.closeUp(e),this._isMobile||this.setFocus()},y.prototype.onMultiCheckListCheckClick=function(t){this._editor.value=this.getCheckValues(t._selectItemIndices,this._items).join(this.editIndex.dataColumn.valueSeparator),this._selectedIndices=t._selectItemIndices.slice(),this._modified=!0,this._dispatchChange(),this._isMobile||this._editor.focus()},y.prototype.onMultiCheckListCancel=function(){this._isMobile?this._controller.closeList(!1):this._controller.cancelEditor(!0)},y.INPUT_CSS="rg-multicheck-editor",y);function y(t,e){var i=g.call(this,t,e)||this;return i._showButtons=!0,i._showAllCheck=!1,i}e.MultiCheckCellEditor=m;var w,x=(w=u,oe.__extends(b,w),_dp(b,"searchLength",{get:function(){return this._searchLength},set:function(t){t!=this._searchLength&&(this._searchLength=t,this._changed())}}),_dp(b,"searchDelay",{get:function(){return this._searchDelay},set:function(t){t!=this._searchDelay&&(this._searchDelay=t,this._changed())}}),_dp(b,"useCtrlEnterKey",{get:function(){return this._useCtrlEnterKey},set:function(t){t!=this._useCtrlEnterKey&&(this._useCtrlEnterKey=t,this._changed())}}),_dp(b,"useEnterKey",{get:function(){return this._useEnterKey},set:function(t){t!=this._useEnterKey&&(this._useEnterKey=t,this._changed())}}),_dp(b,"initCount",{get:function(){return this._initCount},set:function(t){t!=this._initCount&&(this._initCount=t,this._changed())}}),_dp(b,"moreItemCount",{get:function(){return this._moreItemCount},set:function(t){t!=this._moreItemCount&&(this._moreItemCount=t,this._changed())}}),_dp(b,"moreText",{get:function(){return this._moreText},set:function(t){t!=this._moreText&&(this._moreText=t,this._changed())}}),_dp(b,"reInquery",{get:function(){return this._reInquery},set:function(t){t!=this._reInquery&&(this._reInquery=t,this._changed())}}),b.prototype.fillItems=function(t,e,i){return!(!this.listing||t!=this.getEditText()||(this.values=e,this.labels=i,this._refreshItems(!0,!0),this._list.$_search(this._editor.value,!0),0))},b.prototype._keyDownHandler=function(t){if(!this.isDisabled()){var e=13==t.keyCode;if((e=e&&(t.ctrlKey?this.useCtrlEnterKey:this.useEnterKey&&(!this._items||this._items.length<1)))&&this.editing){t.preventDefault(),t.stopImmediatePropagation(),this.$_stopTimer();var i=this.getEditText();return i&&i!=this._searchKey&&(this._searchKey=i,this._dispatchSearch(i)),!0}return w.prototype._keyDownHandler.call(this,t)}},b.prototype._keyUpHandler=function(t){this.isDisabled()||(w.prototype._keyUpHandler.call(this,t),ne.Utils.isChrome&&this.$_search())},b.prototype._inputHandler=function(t){this.isDisabled()||(w.prototype._inputHandler.call(this,t),ne.Utils.isChrome||this.$_search())},b.prototype._doEndEdit=function(){w.prototype._doEndEdit.call(this),this.$_stopTimer(),this._searchKey=null},b.prototype.dropDown=function(t){var e=this._list;return e&&(e.initCount=this.initCount,e.moreItemCount=this.moreItemCount,e.moreText=this.moreText),w.prototype.dropDown.call(this,!0)},b.prototype.buttonClicked=function(t){if(this.listing)this.closeUp(!1);else{this.dropDown();var e=this.getEditText(),i=this._dispatchSearchCellButtonClick(e);i&&"object"==typeof i&&i.values&&this.fillItems(e,i.values,i.labels)}},b.prototype._getInputSelector=function(){return b.INPUT_CSS},b.prototype.$_search=function(){var t=this.getEditText();t&&t!==s&&t.length>=this._searchLength?this.$_startTimer():this.$_stopTimer()},b.prototype.$_startTimer=function(){this.$_stopTimer(),!this.reInquery&&this.listing&&0<this._list._items.length||(this._timer=setInterval(function(){var t=this.getEditText();t&&t!==s&&t!=this._searchKey&&(this._searchKey=t,this.$_stopTimer(),this._dispatchSearch(t,!0))}.bind(this),this._searchDelay))},b.prototype.$_stopTimer=function(){this._timer&&clearInterval(this._timer)},b.INPUT_CSS="rg-search-editor",b.SEARCH="onSearchCellEditorSearch",b);function b(t,e){var i=w.call(this,t,e)||this;return i._searchLength=1,i._searchDelay=1e3,i._useCtrlEnterKey=!1,i._useEnterKey=!1,i._initCount=0,i._moreItemCount=25,i._reInquery=!0,i._timer=void 0,i}e.SearchCellEditor=x;var I,E=(I=Jt.TextCellEditor,oe.__extends(S,I),S.prototype._dodispose=function(){this._editor&&this._editor.removeEventListener("change",this.$_selectChanged.bind(this)),this._values=null,this._labels=null,this._items=null,I.prototype.dispose.call(this)},_dp(S,"hasButton",{get:function(){return ne.Utils.isMobile()&&ne.Utils.isiOS}}),_dp(S,"native",{get:function(){return!0}}),S.prototype._createEditor=function(t){var e=ne.getDoc(t);this._container=this._createContainer(e),t.appendChild(this._container);var i=e.createElement("select"),o=i.style;return i.setAttribute("aria-hidden","true"),o.position="absolute",o.boxSizing="border-box",o.margin="0px",o.padding="0px",o.wordWrap="normal",o.overflow="hidden",o.resize="none",o.border="none",o.outline="none",o.left="0px",o.top="0px",o.width="100%",o.height="100%",i.addEventListener("change",this.$_selectChanged.bind(this)),this._container.appendChild(i),i},S.prototype._getInputSelector=function(){return S.INPUT_CSS},S.prototype.initOptions=function(){I.prototype.initOptions.call(this),this._values=[],this._labels=[],this._items=[],this._itemIndex=-1},S.prototype.setEditIndex=function(t){I.prototype.setEditIndex.call(this,t),this._refreshItems(),this._resetPosition()},S.prototype.setEditValue=function(t){I.prototype.setEditValue.call(this,t),this._itemIndex=-1;for(var e=this._editor.options,i=0,o=e.length;i<o;i++)e[i].value===t?e[this._itemIndex=i].selected=!0:e[i].selected=!1},S.prototype._selectAll=function(){},S.prototype.prepare=function(){var t=ne.getWin(this._container);this._handled||(t.addEventListener("keydown",this._globalKeyDownHandler),this._handled=!0)},S.prototype.unprepare=function(){ne.getWin(this._container).removeEventListener("keydown",this._globalKeyDownHandler),this._handled=!1},S.prototype._keyDownHandler=function(t){if(!this.isDisabled()){var e=t.keyCode,i=ne.Utils.isIE&&this.visible;switch(e){case 40:if(t.altKey)return this._requestStart(),!0;if(i)return!1;break;case 13:case 38:case 33:case 34:case 36:case 35:if(i)return!1}return I.prototype._keyDownHandler.call(this,t)}},S.prototype._resetPosition=function(){var t=this._grid.getEditCellBounds(this,this._editIndex);t.x--,t.y--,this.setBounds(t.x,t.y,0,0,0)},S.prototype.$_selectChanged=function(t){var e=t.target;this._itemIndex!==e.selectedIndex&&(this._dispatchChange(),this._dispatchCommit())},S.prototype._refreshItems=function(t,e){void 0===e&&(e=!1);var i=this.editIndex,o=i.item;if(this._values&&(0<this._values.length||e))this.$_setItems(this._values,this._labels);else if(i.dataColumn&&i.item&&(0<=i.dataRow||dt.ItemState_isEditing(o.itemState))){var n=i.dataColumn;if(n.lookupSource){for(var r=n.lookupKeyFieldIds,s=[],a=0;a<r.length-1;a++)s.push(o.getData(r[a]));var l=n.lookupSource.getTextDomain(s);l&&l.values&&0<l.values.length&&this.$_setItems(l.keys,l.values)}else n.values&&0<n.values.length&&this.$_setItems(n.values,n.labels)}},S.prototype.$_setItems=function(t,e){this._items=[];for(var i=this._editor,o=i.options,n=ne.getDoc(i),r=o.length-1;0<=r;r--)o.remove(r);for(var s=0,a=t.length;s<a;s++){var l=n.createElement("option");l.value=t[s],l.text=e&&e.length>s?e[s]:t[s],this._items.push({value:l.value,label:l.text}),i.options.add(l,null)}},S.prototype.getEditValue=function(){return this.$_getEditValue()},S.prototype.$_getEditValue=function(){return this._editor.value},S.INPUT_CSS="rg-nlist-editor",S);function S(t,e){var i=I.call(this,t,e)||this;return i._values=null,i._items=null,i._labels=null,i._sortStyle=r.NONE,i._itemIndex=-1,i._displayLabels=null,i._separator=null,i._itemColumned=!1,i._trimLabelText=!0,i._handled=!1,i._globalKeyDownHandler=function(t){return this._keyDownHandler(t)}.bind(i),i}e.NativeListCellEditor=E});t(ye);ye.DropDownPosition,ye.DropDownSortStyle,ye.DropDownValueLabel,ye.DropDownList,ye.DropDownCellEditor,ye.MultiCheckCellEditor,ye.SearchCellEditor,ye.NativeListCellEditor;var ve=e(function(t,e){Object.defineProperty(e,"__esModule",{value:!0});function o(t){if(!t)return null;(t=String(t))&&(t=t.replace(/[^0-9]/g,""));var e=parseInt(t.substr(0,4)),i=parseInt(t.substr(4,2));if(isNaN(e)||e<=0||isNaN(i)||i<0)return null;var o=new Date(e,0,1),n=4-o.getDay()+1;return o.setDate(n),o.getFullYear()==e&&i--,n=7*i,o.setDate(o.getDate()+n),o}function M(t,n,e){function i(t){var e=new Date(t),i=e.getDay();i=i<n?-3-i:4-i;var o=e.getDate();return e.setDate(o+i),e}void 0===e&&(e=!1);var o,r=t.getFullYear(),s=i(new Date(r,0,1)),a=i(new Date(r,t.getMonth(),t.getDate())),l=s.getFullYear(),h=a.getFullYear();return o=h<r?(s=i(new Date(l,0,1)),Math.ceil((a.valueOf()-s.valueOf())/6048e5)+(s.getFullYear()===h?1:0)):r<h?1:Math.ceil((a.valueOf()-s.valueOf())/6048e5)+(l===h?1:0),String(h)+(e?"-":"")+(o<10?"0"+o:String(o))}var i,s=/[ㄱ-ㅎㅏ-ㅣ가-힝]/g,n=(i=re.Base,oe.__extends(r,i),r.prototype._doDispose=function(){this._owner=null,this._tooltips=null,this._items=null,i.prototype._doDispose.call(this)},_dp(r,"tooltips",{get:function(){return this._tooltips},set:function(t){this._tooltips=t}}),_dp(r,"items",{get:function(){return this._items},set:function(t){this._items=t.slice()}}),_dp(r,"enabled",{get:function(){return this._enabled},set:function(t){this._enabled=t}}),_dp(r,"count",{get:function(){return this._items&&this._items.length}}),_dp(r,"styleName",{get:function(){return this._styleName||""},set:function(t){this._styleName=t}}),r.prototype.load=function(t){this.clear()},r.prototype.clear=function(){this._items=[],this._tooltips=[]},r.prototype.contains=function(t){return!1},r.prototype.getTooltip=function(t){return null},r);function r(t){var e=i.call(this)||this;return e._tooltips=[],e._items=[],e._enabled=!0,e._owner=t,e}e.Holiday=n;var a,l=(a=n,oe.__extends(h,a),h.prototype._doDispose=function(){a.prototype._doDispose.call(this)},h.prototype.load=function(t){if(a.prototype.load.call(this,t),t){var e=ne.Utils.makeArray(t.dates,!0);t.tooltips=ne.Utils.makeArray(t.tooltips,!0);for(var i=0,o=e.length;i<o;i++){var n=e[i],r=void 0;if(n instanceof Date)(r=new Date(n)).setHours(0,0,0,0);else if("number"==typeof n)(r=new Date(n)).setHours(0,0,0,0);else if("string"==typeof n){4!==n.length&&8!==n.length||!/^[0-9]*$/.test(n)||(n=4===n.length?n.replace(/(\d{2})(\d{2})/,"$1/$2"):n.replace(/(\d{4})(\d{2})(\d{2})/,"$1/$2/$3"));var s=n.split(/[.//-]/);if(2==s.length)try{r=parseInt(s[0]).toString()+"/"+parseInt(s[1]).toString()}catch(t){}else 3==s.length&&(r=_t.DateTimeConverter.getSimpleDateNull(n))}r&&(this._items.push(r),t.tooltips[i]&&this._tooltips.push(t.tooltips[i]))}this.enabled=!!t.enabled,this.styleName=t.styleName}},h.prototype.getItemIndex=function(t){for(var e=0,i=this._items.length;e<i;e++){var o=this._items[e];if(o instanceof Date&&o.getFullYear()===t.getFullYear()&&o.getMonth()===t.getMonth()&&o.getDate()===t.getDate())return e;if(o===t.getMonth()+1+"/"+t.getDate())return e}return-1},h.prototype.contains=function(t){return 0<=this.getItemIndex(t)},h.prototype.getTooltip=function(t){var e=this.getItemIndex(t);return 0<=e?this._tooltips[e]:null},h);function h(t,e){var i=a.call(this,t)||this;return e&&i.load(e),i}var d,u=(d=n,oe.__extends(_,d),_.prototype._doDispose=function(){d.prototype._doDispose.call(this)},_.prototype.load=function(t){d.prototype.load.call(this,t),t&&(this._items=ne.Utils.makeArray(t.days,!0),this._tooltips=ne.Utils.makeArray(t.tooltips,!0),this.enabled=!!t.enabled,this.styleName=t.styleName)},_.prototype.contains=function(t){return t instanceof Date&&0<=this._items.indexOf(t.getDay())},_.prototype.getTooltip=function(t){var e=t instanceof Date?this._items.indexOf(t.getDay()):this._items.indexOf(t);return 0<=e?this._tooltips[e]:null},_);function _(t,e){var i=d.call(this,t)||this;return e&&i.load(e),i}var c,p=(c=re.Base,oe.__extends(f,c),f.prototype._doDispose=function(){this._editor=null,this._items=null,c.prototype._doDispose.call(this)},_dp(f,"items",{get:function(){return this._items},set:function(t){this._items=t}}),_dp(f,"editor",{get:function(){return this._editor},set:function(t){this._editor=t}}),_dp(f,"isNull",{get:function(){return-1==this._count}}),_dp(f,"count",{get:function(){return this._count}}),f.prototype.setNull=function(){this.clear()},f.prototype.getDateConvert=function(){return this._editor&&this._editor._dateConverter},f.prototype.clear=function(){for(var t=0,e=this._items.length;t<e;t++)this._items[t].clear();this._items=[],this._count=-1},f.prototype.load=function(t){if(this.clear(),t){for(var e=0,i=(t=ne.Utils.isArray(t)?t:[t]).length;e<i;e++){var o=t[e],n=void 0;switch(o.type){case"day":n=new u(this,o);break;case"date":n=new l(this,o)}0<n.count&&this._items.push(n)}this._count=this._items.length}else this._count=-1},f.prototype.contains=function(t){for(var e=0,i=this._items.length;e<i;e++)if(this._items[e].contains(t))return this._items[e];return null},f);function f(){var t=c.call(this)||this;return t._items=[],t._count=-1,t}e.HolidayCollection=p;var g,m=(g=$.EventAware,oe.__extends(y,g),y.prototype._doDispose=function(){this._listElement=null,ne.Utils.detach(this._element),g.prototype._doDispose.call(this)},_dp(y,"month",{get:function(){return this._month},set:function(t){this._month=t}}),_dp(y,"listElement",{get:function(){return this._listElement}}),_dp(y,"listing",{get:function(){return this._container&&this._container.contains(this._element)}}),y.prototype.show=function(t,e,i,o){if(this._container=t){t.appendChild(this._element);var n=ne.getDoc(t),r=ne.Utils.getClientRect(this._element),s=ne.Utils.getScrolled(n);if(o&&this._listElement){var a=this._listElement.getBoundingClientRect().width;e=parseInt(this._listElement.style.left.replace("px",""))+a/2,i=parseInt(this._listElement.style.top.replace("px",""))}e=Math.max(s.sx,e-r.width-2),i=Math.max(s.sy,i-r.height/2+13),ne.Utils.move(this._element,e,i)}},y.prototype.hide=function(){ne.Utils.detach(this._element),this._container=null},y.prototype.$_createPicker=function(t){var e=t.createElement("div"),i=e.style;i.position="absolute",i.cssFloat="none",i.clear="both",i.boxSizing="border-box",e.className="rg-cal-month-picker",e.onkeydown=function(t){27==t.keyCode&&this.hide()}.bind(this);for(var o=1;o<=12;o++){var n=t.createElement("div"),r=n.style;r.position="relative",r.cssFloat="none",n.className="rg-cal-month-picker-item",ne.Utils.disableSelection(n),e.appendChild(n),n.onclick=this._clickHandler,n.onmouseup=this._clickHandler;var s=t.createElement("span");s.innerHTML=ne.Utils.htmlEncode((this._months?this._months[o-1]:o)+" "),s.tabIndex=-1,ne.Utils.disableSelection(s),n.appendChild(s)}return e},y.CLOSE_UP="onMonthPickerCloseUp",y);function y(t,e){var i=g.call(this)||this;i._month=-1,i._clickHandler=function(t){ne.Utils.stopEvent(t,!0);var e=t.currentTarget,i=ne.Utils.getChildIndex(e);0<=i&&(this._month=i,this.fireEvent(y.CLOSE_UP,this._month)),this.hide()}.bind(i);var o=ne.getDoc(e);return i._listElement=e,i._months=t.months,i._element=i.$_createPicker(o),i._element.style.zIndex=String(t._baseZindex+2),i}var v,w=(v=$.EventAware,oe.__extends(C,v),C.prototype._doDispose=function(){this._monthPicker=this._monthPicker&&this._monthPicker.dispose(),ne.Utils.detach(this._element),v.prototype._doDispose.call(this)},_dp(C,"minWidth",{get:function(){return this._minWidth},set:function(t){t!=this._minWidth&&(this._minWidth=t,this._changed())}}),_dp(C,"maxWidth",{get:function(){return this._maxWidth},set:function(t){t!=this._maxWidth&&(this._maxWidth=t,this._changed())}}),_dp(C,"minDate",{get:function(){return this._minDate},set:function(t){t!=this._minDate&&(this._minDate=t,this._changed())}}),_dp(C,"maxDate",{get:function(){return this._maxDate},set:function(t){t!=this._maxDate&&(this._maxDate=t,this._changed())}}),_dp(C,"yearNavigation",{get:function(){return this._yearNavigation},set:function(t){t!=this._yearNavigation&&(this._yearNavigation=t,this._changed())}}),_dp(C,"dropDownPosition",{get:function(){return this._dropDownPosition},set:function(t){t!=this._dropDownPosition&&(this._dropDownPosition=t,this._changed())}}),_dp(C,"showToday",{get:function(){return this._showToday},set:function(t){t!=this._showToday&&(this._showToday=t,this._changed())}}),_dp(C,"yearDisplayFormat",{get:function(){return this._yearDisplayFormat},set:function(t){t!=this._yearDisplayFormat&&(this._yearDisplayFormat=t,this._changed())}}),_dp(C,"monthDisplayFormat",{get:function(){return this._monthDisplayFormat},set:function(t){t!=this._monthDisplayFormat&&(this._monthDisplayFormat=t,this._changed())}}),_dp(C,"months",{get:function(){return this._months},set:function(t){t!=this._months&&(this._months=t,this._changed())}}),_dp(C,"viewGridInside",{get:function(){return this._viewGridInside},set:function(t){t!=this._viewGridInside&&(this._viewGridInside=t,this._changed())}}),_dp(C,"showWeeks",{get:function(){return this._showWeeks},set:function(t){t!=this._showWeeks&&(this._showWeeks=t,this._changed())}}),_dp(C,"startWeek",{get:function(){return this._startWeek},set:function(t){t!=this._startWeek&&(this._startWeek=t,this._changed())}}),_dp(C,"weekSelectable",{get:function(){return this._weekSelectable},set:function(t){t!=this._weekSelectable&&(this._weekSelectable=t,this._changed())}}),_dp(C,"weekSeparator",{get:function(){return this._weekSeparator},set:function(t){t!=this._weekSeparator&&(this._weekSeparator=t,this._changed())}}),_dp(C,"holidays",{get:function(){return this._holidays},set:function(t){t!=this._holidays&&(this._holidays=t,this._changed())}}),_dp(C,"date",{get:function(){return this._date},set:function(t){t?this._date&&this._date.getTime()===t.getTime()||(this._currDate=new Date(t),this._date=new Date(t),this.listing&&this.$_buildCalendar()):null===t&&(this._date=null)}}),_dp(C,"listing",{get:function(){return this._containerElement&&this._containerElement.contains(this._element)}}),_dp(C,"monthListing",{get:function(){return this._monthPicker.listing}}),_dp(C,"selected",{get:function(){return this._selected}}),_dp(C,"canceled",{get:function(){return this._canceled}}),_dp(C,"focused",{get:function(){return this._focused},set:function(t){t!=this._focused&&(this._focused=t,this._element.style.border=t?"1px solid rgba(50, 50, 50, 1)":"1px solid rgba(50, 50, 50, 0.3)",this._element.style.boxShadow=t?"rgba(0, 0, 0, 0.8) 1px 2px 5px":"rgba(0, 0, 0, 0.5) 1px 2px 5px",this._headerElement.style.backgroundColor=t?"rgba(0, 200, 200, 0.1)":"#e8e8e8",this._headElement.style.opacity=t?"1.0":"0.5")}}),_dp(C,"today",{get:function(){return this.date=new Date}}),_dp(C,"showButtons",{get:function(){return this._showButtons},set:function(t){t!=this._showButtons&&(this._footer&&(this._footer.style.display=t?"":"none"),this._showButtons=t),this._showButtons=t}}),_dp(C,"saveLabel",{get:function(){return this._saveLabel},set:function(t){t!=this._saveLabel&&(this._saveElement&&(this._saveElement.textContent=t),this._saveLabel=t)}}),_dp(C,"cancelLabel",{get:function(){return this._cancelLabel},set:function(t){t!=this._cancelLabel&&(this._cancelElement&&(this._cancelElement.textContent=t),this._cancelLabel=t)}}),_dp(C,"deleteLabel",{get:function(){return this._deleteLabel},set:function(t){t!=this._deleteLabel&&(this._deleteElement&&(this._deleteElement.textContent=t),this._deleteLabel=t)}}),C.prototype.setWeekDays=function(t){t!=this._weekDays&&(ne.Utils.isArray(t)&&7<=t.length?this._weekDays=t:this._weekDays=ne.Utils.week_days)},C.prototype.closeMonth=function(){this._monthPicker.hide()},C.prototype.show=function(t,e,i,o,n){this._containerElement=!ne.Utils.isMobile()&&this._viewGridInside?this._container._container:t,this.$_show(e,i,o,n)},C.prototype.hide=function(){this.focused=!1,this._monthPicker.hide(),ne.Utils.detach(this._element),this._containerElement=null},C.prototype.incDay=function(t){var e;return this._date.getMonth()==this._currDate.getMonth()?(e=new Date(this._date),this._date&&e.setDate(this._date.getDate()+t)):(e=this._currDate,e=new Date(e.getFullYear(),e.getMonth(),1)),this.date=e},C.prototype.incMonth=function(t){var e;return this._date.getMonth()==this._currDate.getMonth()?(e=new Date(this._date),this._date&&ne.Utils.incMonth(e,t)):(e=this._currDate,e=new Date(e.getFullYear(),e.getMonth(),1)),this.date=e},C.prototype.firstDay=function(){var t=new Date(this._currDate);return this._date&&t.setDate(1),this.date=t},C.prototype.lastDay=function(){var t=new Date(this._currDate);if(this._date){var e=t.getFullYear(),i=t.getMonth(),o=ne.Utils.month_days[ne.Utils.isLeapYear(e)?1:0][i];t.setDate(o)}return this.date=t},C.prototype._changed=function(){},C.prototype.$_getCellDate=function(t,e){var i=new Date(t);return i.setDate(e),i},C.prototype.$_createPicker=function(t){var e=this._container.doc,i=e.createElement("div"),o=i.style;return o.position="absolute",o.cssFloat="none",o.clear="both",o.boxSizing="border-box",o.margin="0px",o.overflow="auto",o.zIndex=String(t._baseZindex+2),i.className="rg-calendar",this._header=this.$_createHeader(e),i.appendChild(this._header),this._calendar=this.$_createCalendar(e),i.appendChild(this._calendar),this._footer=this.$_createFooter(e),i.appendChild(this._footer),i.addEventListener("keydown",function(t){27==t.keyCode&&(this.isMonthLisiting()?this.closeMonth():this.fireEvent(ye.DropDownList.CLOSE_UP,!1))}.bind(this)),i.addEventListener("mouseup",function(t){ne.Utils.isMobile()||this._editor.setFocus()}.bind(this)),i},C.prototype.$_createHeader=function(t){var i=this,e=this._headerElement=t.createElement("div"),o=e.style;o.position="relative",e.className="rg-cal-header";var n=t.createElement("div");(o=n.style).position="relative",o.textAlign="center",o.height="100%",e.appendChild(e.$_title=n),n.className="rg-cal-yearmonth";var r=t.createElement("span");(o=r.style).position="relative",o.verticalAlign="top",o.height="16px",r.className="rg-cal-year",n.appendChild(n.$_year=r),r.innerHTML="2020년",r.onclick=function(t){};var s=this.$_createYearSpin(t);n.appendChild(n.$_yearSpin=s);var a=t.createElement("span");(o=a.style).position="relative",o.verticalAlign="top",a.className="rg-cal-month",n.appendChild(n.$_month=a),a.innerHTML="1월",a.onmousedown=function(t){ne.Utils.stopEvent(t,!0);var e=ne.Utils.getOffset(this._headerElement.$_title.$_month);this._monthPicker.show(this._containerElement,e.x,e.y,!ne.Utils.isMobile()&&this._viewGridInside)}.bind(this);var l=t.createElement("span");(o=l.style).position="absolute",o.left="4px",o.minWidth="17px",o.minHeight="17px",l.className="rg-cal-prev-month",e.appendChild(e.$_prev=l),l.onclick=function(t){ne.Utils.incMonth(this._currDate,-1),this.$_buildCalendar()}.bind(this);var h=t.createElement("span");(o=h.style).position="absolute",o.right="4px",o.minWidth="17px",o.minHeight="17px",h.className="rg-cal-next-month",e.appendChild(e.$_next=h),h.onclick=function(t){ne.Utils.incMonth(this._currDate,1),this.$_buildCalendar()}.bind(this);var d=this._todayElement=t.createElement("span");return(o=d.style).position="absolute",o.right="35px",o.top="2px",d.className="rg-cal-today-button",e.appendChild(d),d.innerHTML="Today",d.onclick=function(t){var e=new Date;i.focused=!0,i.date=e,i._selected=!0,i._editor.$_selectDate(i._currDate)},e},C.prototype.$_createYearSpin=function(t){var e=t.createElement("div"),i=e.style;i.display="inline-block",i.visibility="hidden",i.position="relative",i.width="15px",i.height="100%",i.marginRight="2px";var o=t.createElement("span");(i=o.style).position="absolute",i.top="10%",i.left="0px",i.width="15px",i.height="40%",i.display="block",o.className="rg-cal-next-year",e.appendChild(o),o.onclick=function(t){this._currDate.setFullYear(this._currDate.getFullYear()+1),this.$_buildCalendar()}.bind(this);var n=t.createElement("span");return(i=n.style).position="absolute",i.top="50%",i.left="0px",i.width="15px",i.height="40%",i.display="block",n.className="rg-cal-prev-year",e.appendChild(n),n.onclick=function(t){this._currDate.setFullYear(this._currDate.getFullYear()-1),this.$_buildCalendar()}.bind(this),e},C.prototype.$_createFooter=function(t){var e,i=t.createElement("div"),o=i.style;return o.display="none",i.className="rg-cal-buttons",e=this._deleteElement=t.createElement("span"),this._deleteLabel&&(e.textContent=this._deleteLabel),e.className="rg-cal-delete-button",(o=e.style).float="left",e.onclick=function(t){this._selected=!0,this.date=null,this._editor.$_selectDate(null)}.bind(this),i.appendChild(e),e=this._saveElement=t.createElement("span"),this._saveLabel&&(e.textContent=this._saveLabel),e.className="rg-cal-save-button",(o=e.style).float="right",e.onclick=function(t){this.fireEvent(C.CLOSE_UP,!0)}.bind(this),i.appendChild(e),e=this._cancelElement=t.createElement("span"),this._cancelLabel&&(e.textContent=this._cancelLabel),e.className="rg-cal-cancel-button",(o=e.style).float="right",e.onclick=function(t){this._selected=!1,this._canceled=!0,this.fireEvent(C.CLOSE_UP,!1)}.bind(this),i.appendChild(e),i},C.prototype.$_createCalendar=function(t){var e=["sun","mon","tue","wed","thu","fri","sat"],i=t.createElement("table"),o=i.style;o.margin="2px",i.className="rg-cal-days-table";var n=this._headElement=t.createElement("thead");n.className="rg-cal-weeks",i.appendChild(i.$_head=n);var r=t.createElement("tr");n.appendChild(r);var s=[],a=t.createElement("th");(o=a.style).minWidth="20px",o.textAlign="center",a.className="rg-cal-week-year-week",r.appendChild(a);var l=t.createElement("span");a.appendChild(l),n.$_weeks=a;for(var h=0;h<7;h++){var d=t.createElement("th");(o=d.style).minWidth="20px",o.textAlign="center",d.className="rg-cal-week-"+e[h],r.appendChild(d);var u=t.createElement("span");u.innerHTML=ne.Utils.htmlEncode(this._weekDays[h]),d.appendChild(u),s.push(u)}n.$_cells=s;var _=t.createElement("tbody");_.className="rg-cal-days",i.appendChild(i.$_body=_);for(var c=_.$_rows=[],p=_.$_yearweeks=[],f=0;f<6;f++){var g=t.createElement("tr");_.appendChild(g),c.push(g),g.$_cells=s=[];var m=t.createElement("td");(o=m.style).padding="1px",g.appendChild(m);var y=t.createElement("span");for(m.appendChild(m.$_span=y),p.push(m),h=0;h<7;h++){var v=t.createElement("td");(o=v.style).padding="1px",v.className="rg-cal-day rg-cal-week-"+e[(h+this._startWeek)%7],g.appendChild(v),v.onclick=this._clickHandler,v.ondblclick=this._dblClickHandler;var w=t.createElement("span");v.appendChild(v.$_span=w),s.push(v)}}return i},C.prototype.$_show=function(t,e,i,o){var n=ne.getDoc(this._element),r=ne.getDocWin(n);this.focused=!1,this._selected=!1,this._canceled=!1,this._header.$_title.$_yearSpin.style.visibility=this._yearNavigation?"visible":"hidden",this._footer.style.display=this.showButtons?"":"none",this._todayElement.style.display=this._showToday?"initial":"none",this._header.$_title.style.marginRight=this._showToday?"70px":"40px";var s=this._date;this._currDate=s?new Date(s):new Date,this._today=new Date,this.$_buildCalendar(),ne.Utils.disableSelection(this._element),this._containerElement.appendChild(this._element);var a=ne.Utils.getBrowserSize(),l=ne.Utils.getClientRect(this._containerElement),h=ne.Utils.getClientRect(this._container._container),d=a.width,u=a.height,_=ne.Utils.getClientRect(this._element),c=r.pageXOffset||n.documentElement.scrollLeft,p=r.pageYOffset||n.documentElement.scrollTop;n.documentElement.scrollWidth>n.documentElement.clientWidth&&(u-=18),n.documentElement.scrollHeight>n.documentElement.clientHeight&&(d-=18),t+=h.left-l.left,e+=h.top-l.top,(ne.Utils.ieTen||ne.Utils.ieOld||ne.Utils.ieLeg)&&(t+=n.documentElement.scrollLeft,e+=n.documentElement.scrollTop),e+_.height>u+p&&(e=e-o.height-_.height)<0&&(e=u-_.height-2),this._dropDownPosition!=ye.DropDownPosition.EDITOR?t=Math.max(0,t+i-_.width):t+_.width>d+c&&(t=d-_.width),!ne.Utils.isMobile()&&this._viewGridInside&&(e=o.bottom-l.top+2,(l.bottom<o.bottom+_.height||u+p<o.bottom+_.height)&&(e=o.top-_.height-l.top-2)),ne.Utils.move(this._element,Math.max(0,t),Math.max(0,e))},C.prototype.$_checkFocusedWeek=function(t,e,i){var o=this.$_isFocusedWeek(t,e.$_yearWeek);e.className="rg-cal-week-year-week "+(o?"rg-cal-week-year-focusweek":"")},C.prototype.$_isFocusedWeek=function(t,e){return t&&e&&M(t,this._startWeek)==e},C.prototype.$_isFocusedDay=function(t,e){var i=this._date;return i&&t.getFullYear()==i.getFullYear()&&t.getMonth()==i.getMonth()&&e==i.getDate()},C.prototype.$_isToday=function(t,e){var i=this._today;return i&&t.getFullYear()==i.getFullYear()&&t.getMonth()==i.getMonth()&&e==i.getDate()},C.prototype.$_buildCalendar=function(){var t,e,i=["sun","mon","tue","wed","thu","fri","sat"],o=this._header,n=this._currDate,r=o.$_prev,s=o.$_next,a=o.$_title,l=n.getFullYear(),h=n.getMonth();a.$_year.innerHTML=(this._yearDisplayFormat?this._yearDisplayFormat.replace("{Y}",l+""):l+"년")+"&nbsp;",this._months&&0<this._months.length?a.$_month.innerHTML=this._months[h]:a.$_month.innerHTML=this._monthDisplayFormat?this._monthDisplayFormat.replace("{M}",(h+1).toString()):h+1+"월",r.title=0==h?l-1+"/12":l+"/"+ne.Utils.pad(h),s.title=11==h?l+1+"/01":l+"/"+ne.Utils.pad(h+2);for(var d=this._calendar.$_head.$_cells,u=0;u<7;u++){var _=d[(u+7-this._startWeek)%7];_.innerHTML=ne.Utils.htmlEncode(this._weekDays[u]),_.parentElement.className="rg-cal-week-"+i[u]}this._calendar.$_head.$_weeks.style.display=this.showWeeks?"":"none";for(var c=this._calendar.$_body,p=c.$_yearweeks,f=(u=0,p.length);u<f;u++)p[u].style.display=this.showWeeks?"":"none",p[u].onclick=this.weekSelectable?this._yearWeekClickHandler:null;var g=c.$_rows,m=ne.Utils.month_days[ne.Utils.isLeapYear(l)?1:0][h],y=new Date(n);y.setDate(1);var v=(y.getDay()+7-this._startWeek)%7;30==m&&6==v||31==m&&5<=v?ne.Utils.addChild(c,g[5]):ne.Utils.removeChild(c,g[5]),28==m&&0==v?ne.Utils.removeChild(c,g[4]):ne.Utils.addChild(c,g[4]);var w=0,C=p[0];if(d=g[0].$_cells,0<v){var x=l,b=h-1;b<0&&(x--,b=11);var I=ne.Utils.month_days[ne.Utils.isLeapYear(x)?1:0][b];for(u=0;u<v;u++){(k=d[u]).removeAttribute("title");var E=new Date(this._currDate);k.$_day=u-v,E.setDate(k.$_day+1);var S=this._editor.containsRange(E);0===u&&(C.$_yearWeek=M(E,this._startWeek),C.$_span.innerText=C.$_yearWeek.substr(4,2),this.$_checkFocusedWeek(this._currDate,C,S)),k.$_span.innerHTML=I-v+u+1,k.className="rg-cal-day rg-cal-prev-day "+(S?"":"rg-cal-disable-day ")+"rg-cal-week-"+i[(u+this._startWeek)%7]}}for(u=v;u<7;u++)(k=d[u]).removeAttribute("title"),k.$_day=w++,k.$_span.innerHTML=w,(y=new Date(this._currDate)).setDate(w),S=this._editor.containsRange(y),0===u&&(C.$_yearWeek=M(y,this._startWeek),C.$_span.innerText=C.$_yearWeek.substr(4,2),this.$_checkFocusedWeek(this._currDate,C,S)),t="rg-cal-day "+(this.$_isFocusedDay(n,w)?"rg-cal-focusday ":""),t+=this.$_isToday(n,w)?"rg-cal-today ":"",t+=(e=this._holidays&&this._holidays.contains(y))?e.styleName+" rg-cal-holiday ":"",t+=S?"":"rg-cal-disable-day ",t+="rg-cal-week-"+i[(u+this._startWeek)%7],k.className=t,e&&(t=e.getTooltip(this.$_getCellDate(n,w)))&&(k.title=t);for(var R=1;R<6&&w<m;R++){d=g[R].$_cells;var D=p[R];for(u=0;u<7;u++)if(w<m)(k=d[u]).removeAttribute("title"),k.$_day=w++,(y=new Date(this._currDate)).setDate(w),S=this._editor.containsRange(y),0===u&&(D.$_yearWeek=M(y,this._startWeek),D.$_span.innerText=D.$_yearWeek.substr(4,2),this.$_checkFocusedWeek(this._currDate,D,S)),k.$_span.innerHTML=w,t="rg-cal-day "+(this.$_isFocusedDay(n,w)?"rg-cal-focusday ":""),t+=this.$_isToday(n,w)?"rg-cal-today ":"",t+=(e=this._holidays&&this._holidays.contains(y))?e.styleName+" rg-cal-holiday ":"",t+=S?"":"rg-cal-disable-day ",t+="rg-cal-week-"+i[(u+this._startWeek)%7],k.className=t,e&&(t=e.getTooltip(this.$_getCellDate(n,w)))&&(k.title=t);else for(var T=1;u<7;u++){var k;(k=d[u]).removeAttribute("title"),k.$_day=w++,(y=new Date(this._currDate)).setDate(w),S=this._editor.containsRange(y),k.$_span.innerHTML=T++,k.className="rg-cal-day rg-cal-next-day "+(S?"":"rg-cal-disable-day ")+"rg-cal-week-"+i[(u+this._startWeek)%7]}}},C.prototype.onMonthPickerCloseUp=function(t,e){var i=e-this._currDate.getMonth();i&&(ne.Utils.incMonth(this._currDate,i),this.$_buildCalendar()),ne.Utils.isMobile()||this._editor.setFocus()},C.CLOSE_UP="onDatePickerCloseUp",C);function C(t,e){var i=v.call(this)||this;i._minWidth=0,i._maxWidth=0,i._yearNavigation=!1,i._dropDownPosition=ye.DropDownPosition.BUTTON,i._showToday=!0,i._viewGridInside=!1,i._showWeeks=!1,i._startWeek=0,i._weekSelectable=!1,i._weekSeparator="",i._date=new Date,i._selected=!1,i._focused=!0,i._canceled=!1,i._clickHandler=function(t){var e=this.$_getCellDate(this._currDate,t.currentTarget.$_day+1);if(this._editor.containsRange(e)){var i=this._holidays&&this._holidays.contains(e);i&&!i.enabled||(this.date=new Date(e),this._selected=!0,this.focused=!0,this._editor.$_selectDate(this._date),this.showButtons||this.fireEvent(C.CLOSE_UP,!0))}}.bind(i),i._dblClickHandler=function(t){this.fireEvent(C.CLOSE_UP,!0)}.bind(i),i._yearWeekClickHandler=function(t){var e,i=t.currentTarget.$_yearWeek;i&&(e=o(i)),e&&this._editor.containsRange(e)&&(this._date=new Date(e),this._selected=!0)}.bind(i);t.doc;return i._editor=e,i._container=t,i._yearDisplayFormat=e.yearDisplayFormat,i._monthDisplayFormat=e.monthDisplayFormat,i._months=e.months,i._weekDays=ne.Utils.week_days,i._element=i.$_createPicker(e),i._monthPicker=new m(e,i._element),i._monthPicker.addListener(i),i}var x,b=(x=Jt.PopupCellEditor,oe.__extends(I,x),I.prototype._doDispose=function(){this._globalMouseHandler=null,this._holidayCollection=this._holidayCollection.dispose(),this._list=this._list&&this._list.dispose(),x.prototype._doDispose.call(this)},_dp(I,"textReadOnly",{get:function(){return this._textReadOnly},set:function(t){this._setTextReadOnly(t)}}),_dp(I,"editFormat",{get:function(){return this._editFormat},set:function(t){t!=this._editFormat&&(this._editFormat=t,this.datetimeFormat=t,this._changed())}}),_dp(I,"minDate",{get:function(){return this._minDate},set:function(t){t!=this._minDate&&(this._minDate=t?t instanceof Date?t:"string"==typeof t?this._dateConverter.getDateNull(t):null:null,this._minDate&&this._minDate.setHours(0,0,0,0),this._changed())}}),_dp(I,"maxDate",{get:function(){return this._maxDate},set:function(t){t!=this._maxDate&&(this._maxDate=t?t instanceof Date?t:"string"==typeof t?this._dateConverter.getDateNull(t):null:null,this._maxDate&&this._maxDate.setHours(23,59,59),this._changed())}}),_dp(I,"yearNavigation",{get:function(){return this._yearNavigation},set:function(t){t!=this._yearNavigation&&(this._yearNavigation=t,this._changed())}}),_dp(I,"dropDownPosition",{get:function(){return this._dropDownPosition},set:function(t){t!=this._dropDownPosition&&(this._dropDownPosition=t,this._changed())}}),_dp(I,"dropDownWhenClick",{get:function(){return this._dropDownWhenClick},set:function(t){t!=this._dropDownWhenClick&&(this._dropDownWhenClick=t,this._changed())}}),_dp(I,"showToday",{get:function(){return this._showToday},set:function(t){t!=this._showToday&&(this._showToday=t,this._changed())}}),_dp(I,"yearDisplayFormat",{get:function(){return this._yearDisplayFormat},set:function(t){t!=this._yearDisplayFormat&&(this._yearDisplayFormat=t,this._changed())}}),_dp(I,"monthDisplayFormat",{get:function(){return this._monthDisplayFormat},set:function(t){t!=this._monthDisplayFormat&&(this._monthDisplayFormat=t,this._changed())}}),_dp(I,"months",{get:function(){return this._months},set:function(t){t!=this._months&&(this._months=t,this._changed())}}),_dp(I,"weekDays",{get:function(){return this._weekDays},set:function(t){t!=this._weekDays&&(this._weekDays=t,this._changed())}}),_dp(I,"showWeeks",{get:function(){return this._showWeeks},set:function(t){t!=this._showWeeks&&(this._showWeeks=t,this._changed())}}),_dp(I,"startWeek",{get:function(){return this._startWeek},set:function(t){(t=null==t||isNaN(t=Math.floor(t))?0:t)!==this._startWeek&&(this._startWeek=t,this._changed())}}),_dp(I,"weekSelectable",{get:function(){return this._weekSelectable},set:function(t){t!=this._weekSelectable&&(this._weekSelectable=t,this._changed())}}),_dp(I,"weekSeparator",{get:function(){return this._weekSeparator},set:function(t){t!=this._weekSeparator&&(this._weekSeparator=t,this._changed())}}),_dp(I,"commitOnSelect",{get:function(){return this._commitOnSelect},set:function(t){t!=this._commitOnSelect&&(this._commitOnSelect=t,this._changed())}}),_dp(I,"defaultShowDate",{get:function(){return this._defaultShowDate},set:function(t){if(t!=this._defaultShowDate){switch(t){case lt.DefaultShowDate.TODAY:case lt.DefaultShowDate.NORMAL:case lt.DefaultShowDate.TODAY_WHEN_NULL:}this._defaultShowDate=t,this._changed()}}}),_dp(I,"holidays",{get:function(){return this._holidays},set:function(t){(this._holidays=t)?(this._holidayCollection=this._holidayCollection||new p,(this._holidayCollection.editor=this)._holidayCollection.load(t)):this._holidayCollection.setNull(),this._changed()}}),_dp(I,"listing",{get:function(){return this._list.listing}}),_dp(I,"monthListing",{get:function(){return this._list.monthListing}}),_dp(I,"showButtons",{get:function(){return this._showButtons},set:function(t){this._showButtons=t}}),_dp(I,"saveLabel",{get:function(){return this._saveLabel},set:function(t){this._saveLabel}}),_dp(I,"cancelLabel",{get:function(){return this._cancelLabel},set:function(t){this._cancelLabel=t}}),_dp(I,"deleteLabel",{get:function(){return this._deleteLabel},set:function(t){this._deleteLabel=t}}),I.prototype.dropDown=function(){if(!(this.readOnly||this._controller._readOnly||this.listing||this._closing)){var t=ne.getDoc(this._container),e=ne.getDocWin(t),i=this._grid.editorOptions,o=this._list,n=t.documentElement,r=ne.Utils.getClientRect(this._container);return o.viewGridInside=i.viewGridInside,o.yearNavigation=this._yearNavigation,o.dropDownPosition=this._dropDownPosition,o.showToday=this._showToday,o.yearDisplayFormat=this._yearDisplayFormat,o.monthDisplayFormat=this._monthDisplayFormat,o.months=this._months,o.minDate=this._minDate,o.maxDate=this._maxDate,o.showWeeks=this._showWeeks,o.startWeek=this._startWeek||0,o.weekSelectable=this.weekSelectable,o.weekSeparator=this.weekSeparator,o.showButtons=this.showButtons,o.saveLabel=this.saveLabel,o.cancelLabel=this.cancelLabel,o.deleteLabel=this.deleteLabel,o.holidays=this._holidayCollection.isNull?i._holidayCollection:this._holidayCollection,this._weekDays&&0<this._weekDays.length&&o.setWeekDays(this._weekDays),this.$_setListDate(),this._isMobile?(this._showMarquee(n),o.show(n,0,0,0,null),this._centerPopup(n,o._element)):o.show(n,r.cx-1,r.cy+r.height,this._cellBounds.width,ne.Utils.getClientRect(this._editor)),e.addEventListener("mousedown",this._globalMouseHandler),!0}},I.prototype.closeUp=function(t){if(this.listing){var e=ne.getDoc(this._container),i=ne.getDocWin(e);this._closing=!0;try{i.removeEventListener("mousedown",this._globalMouseHandler),this._closeMarquee(),this._list.hide(),t&&this._list.selected?this._isMobile?(this._started=!0,this.$_selectDate(this._list.date),this._dispatchCommit()):(this.$_selectDate(this._list.date),this._commitOnSelect&&this._dispatchCommit()):this._list.canceled&&this._controller.cancelEditor(!1)}finally{this._closing=!1}return!0}},I.prototype.containsRange=function(t){return(!this._minDate||t>=this._minDate)&&(!this._maxDate||t<=this._maxDate)},_dp(I,"hasButton",{get:function(){return!0}}),I.prototype.initOptions=function(){x.prototype.initOptions.call(this),this._dropDownWhenClick=!1,this._yearNavigation=!1,this._textReadOnly=!1,this._showToday=!0,this._minDate=new Date(1970,0,1),this._maxDate=new Date(2100,11,31),this._showWeeks=!1,this._startWeek=0,this._weekSelectable=!1,this._weekSeparator="",this._commitOnSelect=!1,this._defaultShowDate=lt.DefaultShowDate.NORMAL,this._holidayCollection&&this._holidayCollection.setNull(),this._showButtons=!0,this._cancelLabel="Cancel",this._saveLabel="Save",this._deleteLabel="Delete"},I.prototype.setEditIndex=function(t){x.prototype.setEditIndex.call(this,t);var e=this._editField().dataType;this._weekSelectable=this._weekSelectable&&e!==lt.ValueType.DATE&&e!==lt.ValueType.DATETIME},I.prototype.setEditValue=function(t){x.prototype.setEditValue.call(this,t),this.weekSelectable?this._date=o(t):this._date="string"==typeof t?this._dateConverter.getDateNull(t):t},I.prototype.getEditValue=function(t,e){void 0===t&&(t=!0),void 0===e&&(e=!1);var i=x.prototype.getEditValue.call(this,t),o=this._editField().dataType;return i&&e&&(o==lt.ValueType.DATE||o==lt.ValueType.DATETIME)&&(i=this._minDate?Math.max(this._minDate.getTime(),i):i,i=(i=this._maxDate?Math.min(this._maxDate.getTime(),i):i)&&new Date(i)),i},I.prototype._createEditor=function(t){return x.prototype._createEditor.call(this,t)},I.prototype._textHandler=function(){this._requestStart(!1)},I.prototype._compositionstartHandler=function(t){this.isDisabled()||this._requestStart(!1)},I.prototype._keyDownHandler=function(t){if(!this.isDisabled()){var e=this._list;if(e.monthListing)return 27==t.keyCode&&(this.closeMonthList(),ne.Utils.stopEvent(t,!0),!0);var i=this.listing,o=i&&e.focused;switch(t.keyCode){case 13:if(this.closeUp(!0))return ne.Utils.stopEvent(t,!0),!this._sendToParent(t);break;case 27:if(this.closeUp(!1))return ne.Utils.stopEvent(t,!0),!0;break;case 36:if(o)return t.preventDefault(),ne.Utils.stopEvent(t,!0),!0;break;case 35:if(o)return ne.Utils.stopEvent(t,!0),this.$_selectDate(e.lastDay()),!0;break;case 37:if(o)return ne.Utils.stopEvent(t,!0),this.$_selectDate(e.incDay(-1)),!0;break;case 39:if(o)return ne.Utils.stopEvent(t,!0),this.$_selectDate(e.incDay(1)),!0;break;case 33:if(o)return ne.Utils.stopEvent(t,!0),this.$_selectDate(e.incMonth(-1)),!0;break;case 34:if(o)return ne.Utils.stopEvent(t,!0),this.$_selectDate(e.incMonth(1)),!0;break;case 40:if(t.altKey&&!i)return this._requestStart(),ne.Utils.stopEvent(t,!0),!0;if(i)return ne.Utils.stopEvent(t,!0),o?this.$_selectDate(e.incDay(7)):(this._list.focused=!0,this.$_setListDate()),!0;break;case 38:if(t.altKey&&i)return this.closeUp(!1),ne.Utils.stopEvent(t,!0),!0;if(i)return ne.Utils.stopEvent(t,!0),!o||e.date.getDate()<=7?this._list.focused=!1:this.$_selectDate(e.incDay(-7)),!0;break;case 84:(t.altKey||t.altKey&&t.ctrlKey)&&i&&(ne.Utils.stopEvent(t,!0),this._list.date=new Date,this.$_selectDate(this._list.date))}return x.prototype._keyDownHandler.call(this,t)}},I.prototype._keyPressHandler=function(t){if(!this.isDisabled()){var e=this._list,i=String.fromCharCode(t.keyCode||t.charCode);if(i.toLocaleLowerCase()==this.todayChar){if(ne.Utils.stopEvent(t,!0),this.listing)return e.focused=!0,this.$_selectDate(e.today),!0}else{if(ne.Utils.isFirefox&&(t.ctrlKey||0===t.charCode))return void x.prototype._keyPressHandler.call(this,t);if(!this._regx.test(i))return void t.preventDefault()}x.prototype._keyPressHandler.call(this,t),t.keyCode&&this.textReadOnly&&t.preventDefault()}},I.prototype.$_resetValue=function(t){if(void 0===t&&(t=!1),this.visible||t){var e=this._editor,i=e.selectionStart,o=e.selectionEnd,n=e.value?e.value.length:0;e.value=e.value.replace(s,"");var r=e.value?e.value.length:0;this._isMobile||(r==n?e.setSelectionRange(i,o):e.setSelectionRange(o,o))}},I.prototype._dispatchChange=function(){this._isMobile?(this.$_resetValue(!0),x.prototype._dispatchChange.call(this)):this.visible&&(this.$_resetValue(),x.prototype._dispatchChange.call(this))},I.prototype._changeHandler=function(t){x.prototype._changeHandler.call(this,t)},I.prototype._pasteHandler=function(t){x.prototype._pasteHandler.call(this,t)},I.prototype._copyHandler=function(t){x.prototype._copyHandler.call(this,t)},I.prototype._requestStart=function(t){return!!x.prototype._requestStart.call(this)&&(this._isMobile?t&&this.dropDown():!1!==t&&this.dropDown(),!0)},I.prototype.setBounds=function(t,e,i,o,n){x.prototype.setBounds.call(this,t,e,i,o,n)},I.prototype._doChanged=function(){this._isMobile?!this._controller.readOnly&&this._controller.editable&&(this._modified=!0,this._dispatchChange()):(this._started||this._requestStart(),this._started&&!this._controller.readOnly&&this._controller.editable&&(this._modified=!0,this._dispatchChange()))},I.prototype.dropDownList=function(t){this.dropDown()},I.prototype.closeList=function(t){this.closeUp(t)},I.prototype.closeMonthList=function(){this._list.closeMonth()},I.prototype.buttonClicked=function(t){this.listing?this.closeUp(!1):this.dropDown()},I.prototype._getInputSelector=function(){return I.INPUT_CSS},I.prototype._isDateEditor=function(){var t=this._editField().dataType;return t==lt.ValueType.DATE||t==lt.ValueType.DATETIME||!this.weekSelectable},I.prototype.$_selectDate=function(t){if(t){if(this._date=t,this.containsRange(t)){var e=void 0;e=this.weekSelectable?M(t,this._startWeek,!!this.weekSeparator):this._dateConverter.getText(this._date),this._mask&&(e=this._mask.writeBuffer(e)),this._editor.value=e,this._doChanged()}}else this._date=null,this._mask&&this._mask.clearBuffer(),this._editor.value="",this._doChanged()},I.prototype.$_setListDate=function(){var t,e=this.isEmptyTextValue()?"":this._editor.value;switch(this._mask&&(e=this._mask.getStripValue()),t=this.weekSelectable?o(e):this._dateConverter.getDateNull(e),this._defaultShowDate){case lt.DefaultShowDate.TODAY:t=new Date;break;case lt.DefaultShowDate.NORMAL:break;case lt.DefaultShowDate.TODAY_WHEN_NULL:t=t||new Date}t&&(this._list.date=t)},I.prototype.onDatePickerCloseUp=function(t,e){this.closeUp(e),ne.Utils.isMobile()||this.setFocus()},I.INPUT_CSS="rg-date-editor",I);function I(t,e){var i=x.call(this,t,e)||this;i._minDate=new Date(1970,0,1),i._maxDate=new Date(2100,11,31),i._yearNavigation=!1,i._dropDownPosition=ye.DropDownPosition.BUTTON,i._dropDownWhenClick=!1,i._showToday=!0,i._yearDisplayFormat="{Y}년",i._monthDisplayFormat="{M}월",i._months=null,i._weekDays=null,i._showWeeks=!1,i._startWeek=0,i._weekSelectable=!1,i._weekSeparator="",i._commitOnSelect=!1,i._holidays=null,i._showButtons=!0,i._saveLabel="Save",i._cancelLabel="Cancel",i._deleteLabel="Delete",i._holidayCollection=new p,i._closing=!1,i._regx=/[0-9]|\.|\-|\/|a|A|p|P|m/,i._globalMouseHandler=function(t){var e=t.target;if(this._isMarquee(e))this.closeUp(!1);else{for(;e;){if(e===this._list._element)return void this._list._monthPicker.hide();if(e===this._list._monthPicker._element)return;e=e.parentElement}this.closeUp(!0)}}.bind(i);var o=t.editorOptions;return i._yearDisplayFormat=o.yearDisplayFormat,i._monthDisplayFormat=o.monthDisplayFormat,i._months=o.months,i._weekDays=o.weekDays,i._baseZindex=t.displayOptions.baseZindex,i._list=new w(t.container,i),i._list.addListener(i),i}e.DateCellEditor=b;var E,S=(E=$.EventAware,oe.__extends(R,E),R.prototype._doDispose=function(){this._jquery=null,this._editor=null,this._container=null,this._containerElement=null,E.prototype._doDispose.call(this)},_dp(R,"dropDownPosition",{get:function(){return this._dropDownPosition},set:function(t){this._dropDownPosition=t}}),_dp(R,"date",{get:function(){return this._date},set:function(t){if((this._date=t).getTime()!==this._date.getTime()&&(this._currDate=new Date(t),this._date=new Date(t),this.listing)){var e=new Date(t.getFullYear(),t.getMonth(),t.getDate());this._jquery&&this._jquery(this._element).datepicker("update",e)}}}),_dp(R,"minDate",{get:function(){return this._minDate},set:function(t){this._minDate=t}}),_dp(R,"maxDate",{get:function(){return this._maxDate},set:function(t){this._maxDate=t}}),_dp(R,"viewGridInside",{get:function(){return this._viewGridInside},set:function(t){this._viewGridInside=t}}),_dp(R,"listing",{get:function(){return window.jQuery&&window.jQuery(this._element).data("datepicker")}}),_dp(R,"selected",{get:function(){return this._selected}}),_dp(R,"focused",{get:function(){return this._focused},set:function(t){t!=this._focused&&(this._focused=t,this._element.style.border=t?"1px solid rgba(50, 50, 50, 1)":"1px solid rgba(50, 50, 50, 0.3)",this._element.style.boxShadow=t?"rgba(0, 0, 0, 0.8) 1px 2px 5px":"rgba(0, 0, 0, 0.5) 1px 2px 5px")}}),R.prototype.$_destroy=function(){this._jquery&&this._jquery(this._element).datepicker("destroy")},R.prototype.keydown=function(t){if(this._jquery){this._jquery(this._element).datepicker("keydown",t);var e=this._jquery(this._element).data("datepicker").viewDate;e instanceof Date&&(this.date=e,this._editor&&this._editor.selectDate(this._date))}},R.prototype.$_createList=function(t){var e=t.createElement("div"),i=e.style;return i.position="absolute",i.cssFloat="none",i.clear="both",i.boxSizing="border-box",i.zIndex=String(this._editor._baseZindex+2),i.margin="0px",i.overflow="auto",e.className="rg-calendar",e},R.prototype.show=function(t,e,i,o,n){if(this._containerElement=ne.Utils.isMobile()&&this._viewGridInside?this._container._container:t,!this.$_createCalendar())return alert("BootStrap DatePicker Not Include"),!1;this.$_show(e,i,o,n)},R.prototype.$_createCalendar=function(){var t,e=this._element,i=this._btOptions;return this._date&&(t=new Date(this._date.getFullYear(),this._date.getMonth(),this._date.getDate())),!!this._jquery&&(this._jquery(e).datepicker&&this._jquery(e).datepicker(i).datepicker("setDate",t).on("changeDate",function(t){var e=t.date;e&&!this._editor.containsRange(e)||(this._date=e?new Date(e):void 0,this._selected=!0,this.fireEvent(w.CLOSE_UP,!0))}.bind(this)),!0)},R.prototype.$_show=function(t,e,i,o){var n=this._container.doc,r=ne.getDocWin(n);this.focused=!1,this._selected=!1,this._containerElement.appendChild(this._element);var s=this._date;this._currDate=s?new Date(s):new Date;var a=ne.Utils.getBrowserSize(),l=ne.Utils.getClientRect(this._containerElement),h=ne.Utils.getClientRect(this._container._container),d=a.width,u=a.height,_=ne.Utils.getClientRect(this._element),c=r.pageXOffset||n.documentElement.scrollLeft,p=r.pageYOffset||n.documentElement.scrollTop;n.documentElement.scrollWidth>n.documentElement.clientWidth&&(u-=18),n.documentElement.scrollHeight>n.documentElement.clientHeight&&(d-=18),t+=h.left-l.left,e+=h.top-l.top,(ne.Utils.ieTen||ne.Utils.ieOld||ne.Utils.ieLeg)&&(t+=n.documentElement.scrollLeft,e+=n.documentElement.scrollTop),e+_.height>u+p&&o&&(e=e-o.height-_.height)<0&&(e=u-_.height-2),this._dropDownPosition!=ye.DropDownPosition.EDITOR?t=Math.max(0,t+i-_.width):t+_.width>d+c&&(t=d-_.width),!ne.Utils.isMobile()&&this._viewGridInside&&o&&(e=o.bottom-l.top+2,(l.bottom<o.bottom+_.height||u+p<o.bottom+_.height)&&(e=o.top-_.height-l.top-2)),ne.Utils.move(this._element,Math.max(0,t),Math.max(0,e))},R.prototype.today=function(){return this.date=new Date},R.prototype.incDay=function(t){var e;return this._date.getMonth()==this._currDate.getMonth()?(e=new Date(this._date),this._date&&e.setDate(this._date.getDate()+t)):(e=this._currDate,e=new Date(e.getFullYear(),e.getMonth(),1)),this.date=e},R.prototype.incMonth=function(t){var e;return this._date.getMonth()==this._currDate.getMonth()?(e=new Date(this._date),this._date&&ne.Utils.incMonth(e,t)):(e=this._currDate,e=new Date(e.getFullYear(),e.getMonth(),1)),this.date=e},R.prototype.firstDay=function(){var t=new Date(this._currDate);return this._date&&t.setDate(1),this.date=t},R.prototype.lastDay=function(){var t=new Date(this._currDate);if(this._date){var e=t.getFullYear(),i=t.getMonth(),o=ne.Utils.month_days[ne.Utils.isLeapYear(e)?1:0][i];t.setDate(o)}return this.date=t},R);function R(t,e,i){var o=E.call(this)||this;o._dropDownPosition=ye.DropDownPosition.BUTTON,o._viewGridInside=!1,o._selected=!1,o._focused=!1;var n=ne.getDocWin(t.doc);return o._jquery=n&&n.jQuery||window.jQuery,o._jquery,o._editor=e,o._container=t,o._btOptions=i,o._element=o.$_createList(t.doc),o}var D,T=(D=Jt.PopupCellEditor,oe.__extends(k,D),k.prototype._doDispose=function(){this._globalMouseHandler=null,D.prototype._doDispose.call(this)},_dp(k,"textReadOnly",{get:function(){return this._textReadOnly},set:function(t){this._setTextReadOnly(t)}}),_dp(k,"list",{get:function(){return this._list},set:function(t){this._list=t}}),_dp(k,"btOptions",{get:function(){return this._btOptions},set:function(t){this._btOptions=t}}),_dp(k,"editFormat",{get:function(){return this.datetimeFormat},set:function(t){this.datetimeFormat=t}}),_dp(k,"minDate",{get:function(){return this._minDate},set:function(t){this._minDate=t?t instanceof Date?t:"string"==typeof t?this._dateConverter.getDateNull(t):null:null,this._minDate&&this._minDate.setHours(0,0,0,0)}}),_dp(k,"maxDate",{get:function(){return this._maxDate},set:function(t){this._maxDate=t?t instanceof Date?t:"string"==typeof t?this._dateConverter.getDateNull(t):null:null,this._maxDate&&this._maxDate.setHours(23,59,59)}}),_dp(k,"dropDownPosition",{get:function(){return this._dropDownPosition},set:function(t){this._dropDownPosition=t}}),_dp(k,"dropDownWhenClick",{get:function(){return this._dropDownWhenClick},set:function(t){this._dropDownWhenClick=t}}),_dp(k,"commitOnSelect",{get:function(){return this._commitOnSelect},set:function(t){this._commitOnSelect=t}}),k.prototype.dropDown=function(){if(this.readOnly||this._controller._readOnly||this.listing||this._closing)return!1;var t=ne.getDoc(this._container),e=ne.getDocWin(t),i=this._grid,o=this._list=new S(i.container,this,this._btOptions),n=t.documentElement,r=ne.Utils.getBounds(this._container);return o.addListener(this),o.viewGridInside=this._options&&this._options.viewGridInside,o.dropDownPosition=this._dropDownPosition,o.minDate=this._minDate,o.maxDate=this._maxDate,this.$_setListDate(),this._isMobile?(this._showMarquee(n),o.show(n,0,0,0,null),this._centerPopup(n,o._element)):o.show(t.documentElement,r.x-1,r.y+r.height,this._cellBounds.width,ne.Utils.getClientRect(this._editor)),e.addEventListener("mousedown",this._globalMouseHandler),!0},k.prototype.closeUp=function(t){if(this.listing){var e=ne.getDoc(this._container),i=ne.getDocWin(e);this._closing=!0;try{i.removeEventListener("mousedown",this._globalMouseHandler),this._closeMarquee(),t&&this._list.selected&&(this._isMobile?(this._started=!0,this.$_selectDate(this._list.date),this._dispatchCommit()):(this.$_selectDate(this._list.date),this._commitOnSelect&&this._dispatchCommit()))}finally{this.$_listDestroy(),this._closing=!1}return!0}return!1},k.prototype.buttonClicked=function(t){this.listing?this.closeUp(!1):this.dropDown()},k.prototype.dropDownList=function(){this.dropDown()},k.prototype.closeList=function(t){this.closeUp(t)},k.prototype.$_setListDate=function(){var t=this._editor.value;t&&this._mask&&(t=this._mask.getStripValue());var e=this._dateConverter.getDateNull(t);e&&(this._list.date=e)},k.prototype.selectDate=function(t){this.$_selectDate(t)},k.prototype.$_selectDate=function(t){if(t&&t!=this._date){if(this._date=t,this.containsRange(t)){var e=this._dateConverter.getText(this._date);this._mask&&(e=this._mask.writeBuffer(e)),this._editor.value=e,this._doChanged()}}else void 0===t&&(this._editor.value=this._mask?(this._mask.clearBuffer(),this._mask.writeBuffer(null)):"",this._doChanged())},k.prototype.containsRange=function(t){return(!this._minDate||t>=this._minDate)&&(!this._maxDate||t<=this._maxDate)},_dp(k,"listing",{get:function(){return!!this._list&&this._list.listing}}),_dp(k,"hasButton",{get:function(){return!0}}),k.prototype.initOptions=function(){D.prototype.initOptions.call(this),this._dropDownWhenClick=!1,this._textReadOnly=!1,this._viewGridInside=!1,this._minDate=new Date(1970,0,1),this._maxDate=new Date(2100,11,31),this._commitOnSelect=!1},k.prototype._isDateEditor=function(){return!0},k.prototype.setEditValue=function(t){D.prototype.setEditValue.call(this,t),this._date="string"==typeof t?this._dateConverter.getDateNull(t):t},k.prototype.getEditValue=function(t,e){var i=D.prototype.getEditValue.call(this,t),o=this._editField().dataType;return i&&e&&(o==lt.ValueType.DATE||o==lt.ValueType.DATETIME)&&(i=i.getTime(),i=this._minDate?Math.max(this._minDate.getTime(),i):i,i=(i=this._maxDate?Math.min(this._maxDate.getTime(),i):i)&&new Date(i)),i},k.prototype._requestStart=function(t){return!!D.prototype._requestStart.call(this,t)&&(this._isMobile?t&&this.dropDown():!1!==t&&this.dropDown(),!0)},k.prototype._textHandler=function(){this._requestStart()},k.prototype._compositionstartHandler=function(){this._requestStart()},k.prototype._keyDownHandler=function(t){if(!this.isDisabled()){var e=this._list,i=this.listing,o=i&&e.focused;switch(t.keyCode){case 13:if(this.closeUp(!0))return ne.Utils.stopEvent(t,!0),!this._sendToParent(t);break;case 27:if(this.closeUp(!1))return ne.Utils.stopEvent(t,!0),!0;break;case 36:if(o)return ne.Utils.stopEvent(t,!0),this.$_selectDate(e.firstDay()),!0;break;case 35:if(o)return ne.Utils.stopEvent(t,!0),this.$_selectDate(e.lastDay()),!0;break;case 37:case 39:if(o)return ne.Utils.stopEvent(t,!0),e&&e.keydown(t),!0;break;case 33:if(o)return ne.Utils.stopEvent(t,!0),this.$_selectDate(e.incMonth(-1)),!0;break;case 34:if(o)return ne.Utils.stopEvent(t,!0),this.$_selectDate(e.incMonth(1)),!0;break;case 40:if(t.altKey&&!i)return this._requestStart(),ne.Utils.stopEvent(t,!0),!0;if(i)return ne.Utils.stopEvent(t,!0),o?e.keydown(t):(e.focused=!0,this.$_setListDate()),!0;break;case 38:if(t.altKey&&i)return this.closeUp(!1),ne.Utils.stopEvent(t,!0),!0;if(i)return ne.Utils.stopEvent(t,!0),!o||e.date.getDate()<=7?e.focused=!1:e.keydown(t),!0;break;case 84:(t.altKey||t.altKey&&t.ctrlKey)&&i&&(ne.Utils.stopEvent(t,!0),e.date=new Date,this.$_selectDate(e.date))}return D.prototype._keyDownHandler.call(this,t)}},k.prototype._keyPressHandler=function(t){if(!this.isDisabled()){var e=this._list,i=String.fromCharCode(t.keyCode||t.charCode);if(i.toLocaleLowerCase()==this.todayChar){if(ne.Utils.stopEvent(t,!0),this.listing)return e.focused=!0,this.$_selectDate(e.today()),!0}else{if(ne.Utils.isFirefox&&(t.ctrlKey||0===t.charCode))return D.prototype._keyPressHandler.call(this,t);if(!this._regx.test(i))return void t.preventDefault()}D.prototype._keyPressHandler.call(this,t),t.keyCode&&this.textReadOnly&&t.preventDefault()}},k.prototype.$_resetValue=function(t){if(void 0===t&&(t=!1),this.visible||t){var e=this._editor,i=e.selectionStart,o=e.selectionEnd,n=e.value?e.value.length:0;e.value=e.value.replace(s,"");var r=e.value?e.value.length:0;this._isMobile||(r==n?e.setSelectionRange(i,o):e.setSelectionRange(o,o))}},k.prototype.setBounds=function(t,e,i,o,n){D.prototype.setBounds.call(this,t,e,i,o,n)},k.prototype._doChanged=function(){this._isMobile?!this._controller.readOnly&&this._controller.editable&&(this._modified=!0,this._dispatchChange()):(this._started&&this._requestStart(),this._started&&!this._controller.readOnly&&this._controller.editable&&(this._modified=!0,this._dispatchChange()))},k.prototype._dispatchChange=function(){this._isMobile?(this.$_resetValue(!0),D.prototype._dispatchChange.call(this)):this.visible&&(this.$_resetValue(),D.prototype._dispatchChange.call(this))},k.prototype.onDatePickerCloseUp=function(t,e){this.closeUp(e),this._isMobile||this.setFocus()},k.prototype._getInputSelector=function(){return k.INPUT_CSS},k.prototype.$_listDestroy=function(){var t=this._list&&this._list._element.parentElement;this._list&&(this._list.$_destroy(),t.removeChild(this._list._element),this._list.dispose(),delete this._list)},k.INPUT_CSS="rg-btdate-editor",k);function k(t,e){var i=D.call(this,t,e)||this;return i._minDate=new Date(1970,0,1),i._maxDate=new Date(2100,11,31),i._dropDownPosition=ye.DropDownPosition.BUTTON,i._dropDownWhenClick=!1,i._commitOnSelect=!1,i._regx=/[0-9]|\.|\-|\/|a|A|p|P|m/,i._closing=!1,i._globalMouseHandler=function(t){var e=t.target;if(this._isMarquee(e))this.closeUp(!1);else{for(;e;){if(e==this._list._element)return;e=e.parentNode}this.closeUp(!0)}}.bind(i),i}e.BTDateCellEditor=T;var L,F=(L=Jt.TextCellEditor,oe.__extends(V,L),_dp(V,"minDate",{get:function(){return this._minDate},set:function(t){t!=this._minDate&&(this._minDate=t?t instanceof Date?t:"string"==typeof t?this._dateConverter.getDateNull(t):null:null,this._minDate&&this._minDate.setHours(0,0,0,0),this._changed())}}),_dp(V,"maxDate",{get:function(){return this._maxDate},set:function(t){t!=this._maxDate&&(this._maxDate=t?t instanceof Date?t:"string"==typeof t?this._dateConverter.getDateNull(t):null:null,this._maxDate&&this._maxDate.setHours(23,59,59),this._changed())}}),_dp(V,"hasButton",{get:function(){return!0}}),_dp(V,"native",{get:function(){return!0}}),V.prototype._createEditor=function(t){var e=L.prototype._createEditor.call(this,t);return e.setAttribute("type","date"),e.tabIndex=ne.Utils.isMobile()?-1:0,e},V.prototype._getInputSelector=function(){return V.INPUT_CSS},V.prototype.initOptions=function(){L.prototype.initOptions.call(this)},V.prototype.setVisible=function(t,e){void 0===e&&(e=!1),L.prototype.setVisible.call(this,t,e),this.visible&&this._editor.click()},V.prototype.setEditIndex=function(t){L.prototype.setEditIndex.call(this,t);var e=this._editor;e.min=this._minDate?this.$_toInputDate(this._minDate):"",e.max=this._maxDate?this.$_toInputDate(this._maxDate):""},V.prototype.setEditValue=function(t){this._date="string"==typeof t?this._dateConverter.getDateNull(t):t,this._editor.value=this.$_toInputDate(this._date)},V.prototype._keyDownHandler=function(t){if(!this.isDisabled()){switch(t.keyCode){case 40:if(t.altKey)return this._requestStart(),!0}return L.prototype._keyDownHandler.call(this,t)}},V.prototype.setBounds=function(t,e,i,o,n){L.prototype.setBounds.call(this,t,e,i,o,0),this._editor&&ne.Utils.isiOS&&(this._editor.style.minWidth=i+"px",this._editor.style.width=i+"px")},V.prototype.$_toInputDate=function(t){return t?V.Formatter.getText(t):""},V.INPUT_CSS="rg-ndate-editor",V.Formatter=new _t.DateTimeConverter("yyyy-MM-dd"),V);function V(t,e){var i=L.call(this,t,e)||this;return i._minDate=new Date(1970,0,1),i._maxDate=new Date(2100,11,31),i}e.NativeDateCellEditor=F});t(ve);ve.Holiday,ve.HolidayCollection,ve.DateCellEditor,ve.BTDateCellEditor,ve.NativeDateCellEditor;var we=e(function(t,e){Object.defineProperty(e,"__esModule",{value:!0});var i,o=(i=$t.GridBaseOptions,oe.__extends(n,i),n.prototype._doDispose=function(){i.prototype._doDispose.call(this)},_dp(n,"readOnly",{get:function(){return this._readOnly},set:function(t){t!=this._readOnly&&(this._readOnly=t,this._refreshOwner(),this._invalidateEditor())}}),_dp(n,"editable",{get:function(){return this._editable},set:function(t){t!=this._editable&&(this._editable=t,this._refreshOwner(),this._invalidateEditor())}}),_dp(n,"checkable",{get:function(){return this._checkable},set:function(t){t!=this._checkable&&(this._checkable=t,this._changed())}}),_dp(n,"updatable",{get:function(){return this._updatable},set:function(t){t!=this._updatable&&(this._updatable=t,this._changed())}}),_dp(n,"appendable",{get:function(){return this._appendable},set:function(t){t!=this._appendable&&(this._appendable=t,this.displayEmptyEditRow=this._displayEmptyEditRow,this._changed())}}),_dp(n,"insertable",{get:function(){return this._insertable},set:function(t){t!=this._insertable&&(this._insertable=t,this._changed())}}),_dp(n,"deletable",{get:function(){return this._deletable},set:function(t){t!=this._deletable&&(this._deletable=t,this._changed())}}),_dp(n,"revertable",{get:function(){return this._revertable},set:function(t){t!=this._revertable&&(this._revertable=t,this._changed())}}),_dp(n,"erasable",{get:function(){return this._erasable},set:function(t){t!=this._erasable&&(this._erasable=t,this._changed())}}),_dp(n,"movable",{get:function(){return this._movable},set:function(t){t!=this._movable&&(this._movable=t,this._changed())}}),_dp(n,"commitByCell",{get:function(){return this._commitByCell},set:function(t){t!=this._commitByCell&&(this._commitByCell=t,this._changed())}}),_dp(n,"editWhenFocused",{get:function(){return this._editWhenFocused},set:function(t){this._editWhenFocused=t}}),_dp(n,"commitWhenNoEdit",{get:function(){return this._commitWhenNoEdit},set:function(t){this._commitWhenNoEdit=t}}),_dp(n,"commitWhenExitLast",{get:function(){return this._commitWhenExitLast},set:function(t){this._commitWhenExitLast=t}}),_dp(n,"commitWhenLeave",{get:function(){return this._commitWhenLeave},set:function(t){this._commitWhenLeave=t}}),_dp(n,"crossWhenExitLast",{get:function(){return this._crossWhenExitLast},set:function(t){this._crossWhenExitLast=t}}),_dp(n,"validateOnEdited",{get:function(){return this._validateOnEdited},set:function(t){this._validateOnEdited=t}}),_dp(n,"validateOnExit",{get:function(){return this._validateOnExit},set:function(t){this._validateOnExit=t}}),_dp(n,"hintOnError",{get:function(){return this._hintOnError},set:function(t){this._hintOnError=t}}),_dp(n,"deleteRowsMessage",{get:function(){return this._deleteRowsMessage},set:function(t){this._deleteRowsMessage=t}}),_dp(n,"invalidFormatMessage",{get:function(){return this._invalidFormatMessage},set:function(t){this._invalidFormatMessage=t}}),_dp(n,"showInvalidFormatMessage",{get:function(){return this._showInvalidFormatMessage},set:function(t){this._showInvalidFormatMessage=t}}),_dp(n,"confirmWhenDelete",{get:function(){return this._confirmWhenDelete},set:function(t){this._confirmWhenDelete=t}}),_dp(n,"editWhenClickFocused",{get:function(){return this._editWhenClickFocused},set:function(t){this._editWhenClickFocused=t}}),_dp(n,"commitLevel",{get:function(){return this._commitLevel},set:function(t){this._commitLevel=t}}),_dp(n,"useTabKey",{get:function(){return this._useTabKey},set:function(t){this._useTabKey=t}}),_dp(n,"useArrowKeys",{get:function(){return this._useArrowKeys},set:function(t){this._useArrowKeys=t}}),_dp(n,"skipReadOnly",{get:function(){return this._skipReadOnly},set:function(t){this._skipReadOnly=t}}),_dp(n,"skipReadOnlyCell",{get:function(){return this._skipReadOnlyCell},set:function(t){this._skipReadOnlyCell=t}}),_dp(n,"verticalMoveStep",{get:function(){return this._verticalMoveStep},set:function(t){this._verticalMoveStep=t}}),_dp(n,"enterToTab",{get:function(){return this._enterToTab},set:function(t){this._enterToTab=t}}),_dp(n,"enterToNextRow",{get:function(){return this._enterToNextRow},set:function(t){this._enterToNextRow=t}}),_dp(n,"enterToEdit",{get:function(){return this._enterToEdit},set:function(t){this._enterToEdit=t}}),_dp(n,"maxLengthToNextCell",{get:function(){return this._maxLengthToNextCell},set:function(t){this._maxLengthToNextCell=t}}),_dp(n,"forceInsert",{get:function(){return this._forceInsert},set:function(t){this._forceInsert=t}}),_dp(n,"forceAppend",{get:function(){return this._forceAppend},set:function(t){this._forceAppend=t}}),_dp(n,"checkDiff",{get:function(){return this._checkDiff},set:function(t){this._checkDiff=t}}),_dp(n,"checkCellDiff",{get:function(){return this._checkCellDiff},set:function(t){this._checkCellDiff=t}}),_dp(n,"strictDiff",{get:function(){return this._strictDiff},set:function(t){this._strictDiff=t}}),_dp(n,"deletableWhenEdit",{get:function(){return this._deletableWhenEdit},set:function(t){this._deletableWhenEdit=t}}),_dp(n,"showCommitError",{get:function(){return this._showCommitError},set:function(t){this._showCommitError=t}}),_dp(n,"firstCellWhenInsert",{get:function(){return this._firstCellWhenInsert},set:function(t){this._firstCellWhenInsert=t}}),_dp(n,"appendWhenInsertKey",{get:function(){return this._appendWhenInsertKey},set:function(t){this._appendWhenInsertKey=t}}),_dp(n,"appendWhenExitLast",{get:function(){return this._appendWhenExitLast},set:function(t){this._appendWhenExitLast=t}}),_dp(n,"showOnlyValidationMessage",{get:function(){return this._showOnlyValidationMessage},set:function(t){this._showOnlyValidationMessage=t}}),_dp(n,"displayEmptyEditRow",{get:function(){return this._displayEmptyEditRow},set:function(t){var e=this.grid;this._displayEmptyEditRow=t,this._displayEmptyEditRow&&this._appendable?e.itemSource.appendDummy():e.itemSource.cancelDummy(),this._refreshOwner()}}),_dp(n,"buttonClickWhenSpace",{get:function(){return this._buttonClickWhenSpace},set:function(t){this._buttonClickWhenSpace=t}}),_dp(n,"exitGridWhenTab",{get:function(){return this._exitGridWhenTab},set:function(t){this._exitGridWhenTab=t}}),_dp(n,"cancelWhenLastUndo",{get:function(){return this._cancelWhenLastUndo},set:function(t){this._cancelWhenLastUndo=t}}),_dp(n,"exceptDataClickWhenButton",{get:function(){return this._exceptDataClickWhenButton},set:function(t){this._exceptDataClickWhenButton=t}}),n.prototype.isWritable=function(){return this._editable&&!this._readOnly},n.prototype.canUpdate=function(){return!this._readOnly&&this._updatable},n.prototype.canInsert=function(){return!this._readOnly&&this._insertable},n.prototype.canAppend=function(){return!this._readOnly&&this._appendable},n.prototype.canDelete=function(){return!this._readOnly&&this._deletable},n);function n(t){var e=i.call(this,t)||this;return e._readOnly=!1,e._editable=!ne.Utils.isMobile(),e._checkable=!0,e._updatable=!0,e._appendable=!1,e._insertable=!1,e._deletable=!1,e._revertable=!1,e._erasable=!1,e._movable=!1,e._commitByCell=!1,e._editWhenFocused=!1,e._commitWhenNoEdit=!1,e._commitWhenExitLast=!1,e._commitWhenLeave=!1,e._crossWhenExitLast=!1,e._validateOnEdited=!0,e._validateOnExit=!1,e._hintOnError=!0,e._deleteRowsMessage=window.RG_CONST&&window.RG_CONST.DELETEROWSMESSAGE?window.RG_CONST.DELETEROWSMESSAGE:"선택된 행(들)을 삭제하시겠습니까??",e._invalidFormatMessage=window.RG_CONST&&window.RG_CONST.INVALIDFORMATMESSAGE?window.RG_CONST.INVALIDFORMATMESSAGE:"잘못된 입력 유형입니다.",e._showInvalidFormatMessage=!0,e._confirmWhenDelete=!0,e._editWhenClickFocused=!1,e._commitLevel=lt.ValidationLevel.IGNORE,e._useTabKey=!0,e._useArrowKeys=!0,e._skipReadOnly=!1,e._skipReadOnlyCell=!1,e._verticalMoveStep=kt.VerticalMoveStep.CELL,e._enterToTab=!1,e._enterToNextRow=!1,e._enterToEdit=!1,e._maxLengthToNextCell=!1,e._forceInsert=!1,e._forceAppend=!1,e._checkDiff=!1,e._checkCellDiff=!1,e._strictDiff=!1,e._deletableWhenEdit=!0,e._showCommitError=!1,e._firstCellWhenInsert=!1,e._appendWhenInsertKey=!1,e._appendWhenExitLast=!1,e._showOnlyValidationMessage=!0,e._displayEmptyEditRow=!1,e._buttonClickWhenSpace=!1,e._exitGridWhenTab=lt.ExitGridWhenTab.NONE,e._cancelWhenLastUndo=!1,e._exceptDataClickWhenButton=!1,e}e.EditOptions=o;var r,s=(r=H.ExpressionRuntime,oe.__extends(a,r),a.prototype._doDispose=function(){this._cell=null,r.prototype._doDispose.call(this)},_dp(a,"value",{set:function(t){this._value=t}}),_dp(a,"cell",{set:function(t){this._cell=t}}),a.prototype.isIdentifier=function(t){return t=t.toLowerCase(),a.IDENTS.hasOwnProperty(t)?a.IDENTS[t]:r.prototype.isIdentifier.call(this,t)},a.prototype.evaluateIdentifier=function(t){switch(t){case a.ID_VALUE:return this._value;case a.ID_ROW:return this._cell.itemIndex+1;case a.ID_COLUMN_HEADER:var e=this._cell&&this._cell.column;return e&&e.header&&e.header.text?e.header.text:e.displayText}throw new H.ExpressionEvaluationError("Invalid identifier key: "+t)},a.IDENTS={value:a.ID_VALUE=0,row:a.ID_ROW=1,dcount:a.ID_COLUMN_HEADER=2},a);function a(){return r.call(this)||this}e.EditorTitleExpressionRuntime=s;var l,h=(l=$t.GridBaseOptions,oe.__extends(d,l),d.prototype._doDispose=function(){l.prototype._doDispose.call(this)},_dp(d,"yearDisplayFormat",{get:function(){return this._yearDisplayFormat},set:function(t){t!=this._yearDisplayFormat&&(this._yearDisplayFormat=t,this._changed())}}),_dp(d,"monthDisplayFormat",{get:function(){return this._monthDisplayFormat},set:function(t){t!=this._monthDisplayFormat&&(this._monthDisplayFormat=t,this._changed())}}),_dp(d,"months",{get:function(){return this._months},set:function(t){t!=this._months&&(this._months=t,this._changed())}}),_dp(d,"weekDays",{get:function(){return this._weekDays},set:function(t){t!=this._weekDays&&(this._weekDays=t,this._changed())}}),_dp(d,"viewGridInside",{get:function(){return this._viewGridInside},set:function(t){t!=this._viewGridInside&&(this._viewGridInside=t,this._changed())}}),_dp(d,"titleStatement",{get:function(){return this._titleStatement},set:function(t){t!=this._titleStatement&&((this._titleStatement=t)?this._titleExprStatement?this._titleExprStatement.source=t:this._titleExprStatement=new ut.ExpressionStatement(t):this._titleExprStatement=null,this._changed())}}),_dp(d,"holidays",{get:function(){return this._holidays},set:function(t){t!=this._holidays&&((this._holidays=t)?(this._holidayCollection=this._holidayCollection||new ve.HolidayCollection,this._holidayCollection.load(t)):this._holidayCollection&&this._holidayCollection.clear(),this._changed())}}),d);function d(t){var e=l.call(this,t)||this;return e._yearDisplayFormat=window.RG_CONST&&window.RG_CONST.YEARDISPLAYFORMAT?window.RG_CONST.YEARDISPLAYFORMAT:"{Y}년",e._monthDisplayFormat=window.RG_CONST&&window.RG_CONST.MONTHDISPLAYFORMAT?window.RG_CONST.MONTHDISPLAYFORMAT:"{M}월",e._months=null,e._weekDays=null,e._viewGridInside=!1,e._holidays=null,e._titleExprRuntime=new s,e}e.EditorOptions=h;var u,_=(u=$t.GridBaseOptions,oe.__extends(c,u),c.prototype._doDispose=function(){u.prototype._doDispose.call(this)},_dp(c,"enabled",{get:function(){return this._enabled},set:function(t){t!=this._enabled&&(this._enabled=t,this._changed())}}),_dp(c,"singleMode",{get:function(){return this._singleMode},set:function(t){t!=this._singleMode&&(this._singleMode=t,this._changed())}}),_dp(c,"copyDisplayText",{get:function(){return this._copyDisplayText},set:function(t){this._copyDisplayText=t}}),_dp(c,"includeHeaderText",{get:function(){return this._includeHeaderText},set:function(t){this._includeHeaderText=t}}),c);function c(t){var e=u.call(this,t)||this;return e._enabled=!0,e._singleMode=!1,e._copyDisplayText=!1,e._includeHeaderText=!1,e}e.CopyOptions=_;var p,f=(p=$t.GridBaseOptions,oe.__extends(g,p),g.prototype._doDispose=function(){p.prototype._doDispose.call(this)},_dp(g,"enabled",{get:function(){return this._enabled},set:function(t){t!=this._enabled&&(this._enabled=t,this._changed())}}),_dp(g,"singleMode",{get:function(){return this._singleMode},set:function(t){t!=this._singleMode&&(this._singleMode=t,this._changed())}}),_dp(g,"startEdit",{get:function(){return this._startEdit},set:function(t){t!=this._startEdit&&(this._startEdit=t,this._changed())}}),_dp(g,"commitEdit",{get:function(){return this._commitEdit},set:function(t){t!=this._commitEdit&&(this._commitEdit=t,this._changed())}}),_dp(g,"enableAppend",{get:function(){return this._enableAppend},set:function(t){t!=this._enableAppend&&(this._enableAppend=t,this._changed())}}),_dp(g,"fillFieldDefaults",{get:function(){return this._fillFieldDefaults},set:function(t){t!=this._fillFieldDefaults&&(this._fillFieldDefaults=t,this._changed())}}),_dp(g,"fillColumnDefaults",{get:function(){return this._fillColumnDefaults},set:function(t){t!=this._fillColumnDefaults&&(this._fillColumnDefaults=t,this._changed())}}),_dp(g,"forceRowValidation",{get:function(){return this._forceRowValidation},set:function(t){t!=this._forceRowValidation&&(this._forceRowValidation=t,this._changed())}}),_dp(g,"forceColumnValidation",{get:function(){return this._forceColumnValidation},set:function(t){t!=this._forceColumnValidation&&(this._forceColumnValidation=t,this._changed())}}),_dp(g,"datetimeFormats",{get:function(){return this._datetimeFormats},set:function(t){if(t!==this._datetimeFormats)if(this._datetimeFormats=t&&t.concat(),t){this._dateReaders=[];for(var e=0;e<this._datetimeFormats.length;e++)this._dateReaders.push(new w.DateTimeReader(this._datetimeFormats[e]))}else this._dateReaders=null}}),_dp(g,"dateReaders",{get:function(){return this._dateReaders}}),_dp(g,"booleanFormat",{get:function(){return this._booleanFormat},set:function(t){t!=this._booleanFormat&&(this._booleanFormat=t,this._boolReader=t&&new O.BooleanConverter(t))}}),_dp(g,"boolReader",{get:function(){return this._boolReader}}),_dp(g,"numberChars",{get:function(){return this._numberChars},set:function(t){if(t!==this._numberChars)if((this._numberChars=t)&&0<t.length){for(var e="[",i=0;i<t.length;i++){var o=t[i];e+="\\"==o?"\\"+o:o}e+="]",this._numberCharExp=new RegExp(e,"g")}else this._numberCharExp=null}}),_dp(g,"numberSeparator",{get:function(){return this._numberSeparator},set:function(t){t!=this._numberSeparator&&(this._numberSeparator=t,this._changed())}}),_dp(g,"numberCharsOfCols",{get:function(){return this._numberCharsOfCols},set:function(t){if(t!==this._numberCharsOfCols&&(this._numberCharsOfCols=t,this._numberCharExpOfCols={},t))for(var e in t){var i=t[e];if(i instanceof Array&&0<i.length){for(var o="[",n=0,r=i.length;n<r;n++){var s=i[n];o+="\\"==s?"\\"+s:s}o+="]",this._numberCharExpOfCols[e]=new RegExp(o,"g")}else this._numberCharExpOfCols[e]=null}}}),_dp(g,"numberCharExp",{get:function(){return this._numberCharExp}}),_dp(g,"numberSeparatorOfCols",{get:function(){return this._numberSeparatorOfCols},set:function(t){t!==this._numberSeparatorOfCols&&(this._numberSeparatorOfCols=t,this._changed())}}),_dp(g,"selectionBase",{get:function(){return this._selectionBase},set:function(t){t!=this._selectionBase&&(this._singleMode=t,this._changed())}}),_dp(g,"selectBlockPaste",{get:function(){return this._selectBlockPaste},set:function(t){t!=this._selectBlockPaste&&(this._selectBlockPaste=t,this._changed())}}),_dp(g,"stopOnError",{get:function(){return this._stopOnError},set:function(t){t!=this._stopOnError&&(this._stopOnError=t,this._changed())}}),_dp(g,"noEditEvent",{get:function(){return this._noEditEvent},set:function(t){t!=this._noEditEvent&&(this._noEditEvent=t,this._changed())}}),_dp(g,"noDataEvent",{get:function(){return this._noDataEvent},set:function(t){t!=this._noDataEvent&&(this._noDataEvent=t,this._changed())}}),_dp(g,"eventEachRow",{get:function(){return this._eventEachRow},set:function(t){t!=this._eventEachRow&&(this._eventEachRow=t,this._changed())}}),_dp(g,"checkReadOnly",{get:function(){return this._checkReadOnly},set:function(t){t!=this._checkReadOnly&&(this._checkReadOnly=t,this._changed())}}),_dp(g,"checkDomainOnly",{get:function(){return this._checkDomainOnly},set:function(t){t!=this._checkDomainOnly&&(this._checkDomainOnly=t,this._changed())}}),_dp(g,"convertLookupLabel",{get:function(){return this._convertLookupLabel},set:function(t){t!=this._convertLookupLabel&&(this._convertLookupLabel=t,this._changed())}}),_dp(g,"applyNumberFormat",{get:function(){return this._applyNumberFormat},set:function(t){t!=this._applyNumberFormat&&(this._applyNumberFormat=t,this._changed())}}),_dp(g,"applyEditMask",{get:function(){return this._applyEditMask},set:function(t){t!=this._applyEditMask&&(this._applyEditMask=t,this._changed())}}),_dp(g,"applyMaxLength",{get:function(){return this._applyMaxLength},set:function(t){t!=this._applyMaxLength&&(this._applyMaxLength=t,this._changed())}}),_dp(g,"throwValidationError",{get:function(){return this._throwValidationError},set:function(t){t!=this._throwValidationError&&(this._throwValidationError=t,this._changed())}}),g.prototype.numberCharExpOfCol=function(t){return t&&this._numberCharExpOfCols&&this._numberCharExpOfCols[t]?this._numberCharExpOfCols[t]:this._numberCharExp},g.prototype.numberSeparatorOfCol=function(t){return t&&this._numberSeparatorOfCols&&this._numberSeparatorOfCols[t]?this._numberSeparatorOfCols[t]:this._numberSeparator},g);function g(t){var e=p.call(this,t)||this;return e._enabled=!0,e._singleMode=!1,e._startEdit=!0,e._commitEdit=!0,e._enableAppend=!0,e._fillFieldDefaults=!1,e._fillColumnDefaults=!1,e._forceRowValidation=!1,e._forceColumnValidation=!1,e._datetimeFormats=null,e._booleanFormat=null,e._numberChars=null,e._numberSeparator=null,e._numberCharsOfCols={},e._numberSeparatorOfCols={},e._selectionBase=!1,e._selectBlockPaste=!1,e._stopOnError=!0,e._noEditEvent=!1,e._noDataEvent=!1,e._eventEachRow=!1,e._checkReadOnly=!1,e._checkDomainOnly=!1,e._convertLookupLabel=!1,e._applyNumberFormat=!1,e._applyEditMask=!1,e._applyMaxLength=!1,e._throwValidationError=!0,e}e.PasteOptions=f;var m,y=(m=$t.GridBaseOptions,oe.__extends(v,m),v.prototype._doDispose=function(){m.prototype._doDispose.call(this)},_dp(v,"longTapDuration",{get:function(){return this._longTapDuration},set:function(t){t!=this._longTapDuration&&(this._longTapDuration=t,this._changed())}}),_dp(v,"doubleTapInterval",{get:function(){return this._doubleTapInterval},set:function(t){t!=this._doubleTapInterval&&(this._doubleTapInterval=t,this._changed())}}),_dp(v,"tapThreshold",{get:function(){return this._tapThreshold},set:function(t){t!=this._tapThreshold&&(this._tapThreshold=t,this._changed())}}),_dp(v,"showEditCommander",{get:function(){return this._showEditCommander},set:function(t){t!=this._showEditCommander&&(this._showEditCommander=t,this._changed())}}),_dp(v,"showTooltip",{get:function(){return this._showTooltip},set:function(t){t!=this._showTooltip&&(this._showTooltip=t,this._changed())}}),_dp(v,"scrollOnEditing",{get:function(){return this._scrollOnEditing},set:function(t){this._scrollOnEditing=t}}),v);function v(t){var e=m.call(this,t)||this;return e._longTapDuration=500,e._doubleTapInterval=300,e._tapThreshold=4,e._showEditCommander=!0,e._showTooltip=!1,e}e.MobileOptions=y});t(we);we.EditOptions,we.EditorTitleExpressionRuntime,we.EditorOptions,we.CopyOptions,we.PasteOptions,we.MobileOptions;var Ce=e(function(t,e){Object.defineProperty(e,"__esModule",{value:!0});var i,o=(i=Qt.DataCellElement,oe.__extends(n,i),_dp(n,"mergeRoom",{get:function(){return this._mergeRoom}}),n.prototype.$_setMergeRoom=function(t){this._mergeRoom=t},n);function n(t){var e=i.call(this,t,"mergedDataCellView")||this;return e._topIndex=-1,e._bottomIndex=-1,e}e.MergedDataCellElement=o;var r,s=(r=qt.VisualObjectElement,oe.__extends(a,r),a.prototype._doDispose=function(){this._roomMap=null,this._scopeViews=null,this._tailIndex&&this._tailIndex.dispose(),this._tailIndex=null,this._headIndex&&this._headIndex.dispose(),this._headIndex=null,r.prototype._doDispose.call(this)},_dp(a,"bodyView",{get:function(){return this._bodyView}}),a.prototype.clearRooms=function(){this._roomMap={};for(var t=this._cellLayer.childCount-1;0<=t;t--){var e=this._cellLayer.getChild(t),i=e.mergeRoom,o=this.$_getViews(i.scope);e.visible=!1,o.indexOf(e)<0&&o.push(e)}},a.prototype.$_getMergeView=function(t,e){var i;return 0<t.length?i=t.pop():(i=this._createCellElement(e),this._cellLayer.addChild(i)),i},a.prototype.addColumnRooms=function(t,e,i){for(var o=t.fixedItemCount,n=t.topIndex,r=this.$_getViews(e),s=i.getFixedRooms(),a=s.length-1;0<=a;a--){var l=s[a];(h=this.$_getMergeView(r,l)).visible=!0,h.$_setMergeRoom(l),this._roomMap[l.$_hash]=h,i.addFixedCells(l.head,l.tail-l.head+1)}for(a=(s=i.getRooms()).length-1;0<=a;a--){var h;l=s[a],(h=this.$_getMergeView(r,l)).visible=!0,h.$_setMergeRoom(l),this._roomMap[l.$_hash]=h;var d=Math.max(0,l.head-n-o),u=l.tail-n-o;i.addCells(d,u-d+1)}},a.prototype._doAttached=function(t){r.prototype._doAttached.call(this,t);var e=this.grid;this._headIndex=new kt.CellIndex(e),this._tailIndex=new kt.CellIndex(e)},a.prototype._doLayoutContent=function(t){this._headerViews,this._footerViews,this._fixedFooterViews,this._rightFooterViews,t.$_getItems().length,t.fixedItemCount,this.width},a.prototype.$_getViews=function(t){var e=this._scopeViews[t.$_hash];return e||(e=[],this._scopeViews[t.$_hash]=e),e},a.prototype._createCellElement=function(t){var e=null;if(null!=t){var i=t.column;i instanceof Dt.SeriesColumn||i instanceof Dt.DataColumn&&(e=new o(this.doc))}return e},a);function a(t){var e=r.call(this,t.doc,null,"mergedGoupLayer")||this;return e._roomMap={},e._scopeViews={},e._bodyView=t,e._cellLayer=new Ut.LayerElement(t.doc,"mergedCellLayer"),e.addChild(e._cellLayer),e}e.ColumnMergeElement=s});t(Ce);Ce.MergedDataCellElement,Ce.ColumnMergeElement;var xe=e(function(t,e){Object.defineProperty(e,"__esModule",{value:!0});var i,o=(i=he.EditRequest,oe.__extends(n,i),n.prototype._doDispose=function(){this._grid=null,i.prototype._doDispose.call(this)},_dp(n,"grid",{get:function(){return this._grid}}),n.prototype.canFocus=function(){return!0},n);function n(t){var e=i.call(this)||this;return e._grid=t,e}e.GridEditRequest=o;var r,s=(r=o,oe.__extends(a,r),a.prototype._doDispose=function(){this._index.dispose(),this._index=null,r.prototype._doDispose.call(this)},_dp(a,"index",{get:function(){return this._index}}),a);function a(t){var e=r.call(this,t.grid)||this;return e._index=t,e}e.CellRequest=s;var l,h=(l=s,oe.__extends(d,l),d.prototype._doDispose=function(){l.prototype._doDispose.call(this)},_dp(d,"style",{get:function(){return this._style}}),_dp(d,"manager",{get:function(){return this.grid.selections}}),_dp(d,"selectable",{get:function(){return!0}}),d);function d(t,e){var i=l.call(this,t)||this;return i._style=e,i}e.SelectRequest=h;var u,_=(u=o,oe.__extends(c,u),c.prototype._doDispose=function(){this._layout=null,u.prototype._doDispose.call(this)},_dp(c,"layout",{get:function(){return this._layout}}),_dp(c,"x",{get:function(){return this._x}}),_dp(c,"y",{get:function(){return this._y}}),_dp(c,"offset",{get:function(){return this._offset}}),c.prototype.init=function(t,e,i,o){return this._layout=t,this._x=e,this._y=i,this._offset=o,this},_dp(c,"cursor",{get:function(){return"col-resize"}}),c);function c(t){return u.call(this,t)||this}e.ColumnResizeRequest=_;var p,f=(p=o,oe.__extends(g,p),g.prototype._doDispose=function(){this._layout=null,p.prototype._doDispose.call(this)},_dp(g,"layout",{get:function(){return this._layout}}),_dp(g,"x",{get:function(){return this._x}}),_dp(g,"y",{get:function(){return this._y}}),_dp(g,"offset",{get:function(){return this._offset}}),g.prototype.init=function(t,e,i,o){return this._layout=t instanceof Tt.ProxyCellLayoutItem?t.source:t,this._x=e,this._y=i,this._offset=o,this},_dp(g,"cursor",{get:function(){return"default"}}),g);function g(t){return p.call(this,t)||this}e.ColumnMoveRequest=f;var m,y=(m=o,oe.__extends(v,m),v.prototype._doDispose=function(){m.prototype._doDispose.call(this)},_dp(v,"itemIndex",{get:function(){return this._itemIndex}}),_dp(v,"variable",{get:function(){return this._variable}}),_dp(v,"rowTop",{get:function(){return this._rowTop}}),_dp(v,"offset",{get:function(){return this._offset}}),v.prototype.init=function(t,e,i,o){return this._itemIndex=t,this._variable=e,this._rowTop=i,this._offset=o,this},_dp(v,"cursor",{get:function(){return"row-resize"}}),v);function v(t){var e=m.call(this,t)||this;return e._itemIndex=-1,e._variable=!1,e._rowTop=0,e._offset=0,e}e.RowResizeRequest=y;var w,C=(w=o,oe.__extends(x,w),x.prototype._doDispose=function(){w.prototype._doDispose.call(this)},_dp(x,"top",{get:function(){return this._top}}),_dp(x,"offset",{get:function(){return this._offset}}),x.prototype.init=function(t,e){return this._top=t,this._offset=e,this},_dp(x,"cursor",{get:function(){return"row-resize"}}),x);function x(t){var e=w.call(this,t)||this;return e._offset=0,e._top=0,e}e.HeaderResizeRequest=C;var b,I=(b=o,oe.__extends(E,b),E.prototype._doDispose=function(){b.prototype._doDispose.call(this)},_dp(E,"itemIndex",{get:function(){return this._itemIndex}}),_dp(E,"offset",{get:function(){return this._offset}}),E.prototype.init=function(t,e){return this._selStyle=t&&t.style,this._selStyle==Wt.SelectionStyle.COLUMNS||this._selStyle==Wt.SelectionStyle.SINGLE_COLUMN?(this._itemIndex=e,this._offset=0):(this._itemIndex=this._selStyle?t.getBounds().top:e,this._offset=e-this._itemIndex),this},_dp(E,"cursor",{get:function(){return"move"}}),E.prototype.canFocus=function(){return this._selStyle==Wt.SelectionStyle.COLUMNS||this._selStyle==Wt.SelectionStyle.SINGLE_COLUMN},E);function E(t){var e=b.call(this,t)||this;return e._itemIndex=-1,e._offset=0,e}e.RowMoveRequest=I});t(xe);xe.GridEditRequest,xe.CellRequest,xe.SelectRequest,xe.ColumnResizeRequest,xe.ColumnMoveRequest,xe.RowResizeRequest,xe.HeaderResizeRequest,xe.RowMoveRequest;var be=e(function(t,e){Object.defineProperty(e,"__esModule",{value:!0});var o,i=(o=le.DragTracker,oe.__extends(n,o),n.prototype._doDispose=function(){this._grid=null,o.prototype._doDispose.call(this)},_dp(n,"grid",{get:function(){return this._grid}}),_dp(n,"startWhenCreated",{get:function(){return!1}}),n);function n(t,e){var i=o.call(this,t.container,e)||this;return i._grid=t,i}e.GridDragTracker=i;var r,s=(r=i,oe.__extends(a,r),a.prototype._doDispose=function(){this._request=null,this._feedback=null,r.prototype._doDispose.call(this)},a.prototype.getRequest=function(){return this._request},a.prototype._doStart=function(t,e,i,o){var n=this.grid.layoutManager,r=n.contentBounds.y,s=n.contentBounds.bottom;return this._feedback.resize(2,s-r),this._feedback.move(e-this._offset,r),this.grid.addFeedbackElement(this._feedback),!0},a.prototype._doDrag=function(t,e,i){var o=this._request.layout,n=this.grid.displayOptions.minCellWidth;return o.cellWidth,(e-=this._offset)>=this._layoutX+n&&e<this._layoutX+1e6&&(this._feedback.x=e,!0)},a.prototype._doEnded=function(){var t=this._feedback.x-this._layoutX;this.grid.removeFeedbackElement(this._feedback),this._request.layout.changeCellWidth(t,this.grid.layoutManager.isColumnFitted),this.grid.container.setCursor("default")},a);function a(t,e){var i=r.call(this,t.layout.grid,"columnResizeTracker")||this;i._request=t,i._feedback=e;var o=t.layout;return i._layoutX=t.x+t.offset-o.cellWidth,i._offset=t.offset,i}e.ColumnResizeTracker=s;var l,h=(l=i,oe.__extends(d,l),d.prototype._doDispose=function(){this._request=this._layout=this._cellFeedback=this._feedback=this._target=null,l.prototype._doDispose.call(this)},d.prototype.getRequest=function(){return this._request},d.prototype._doStart=function(t,e,i,o){var n=this.grid,r=n.layoutManager,s=this._layout.parent,a=r.getHeaderCellRect(this._layout);s.horizontal?(this._offset=e-a.x,this._feedback.setBounds(a.x,a.y,d.WING_SIZE,a.height)):(this._offset=i-a.y,this._feedback.setBounds(a.x,a.y,a.width,d.WING_SIZE)),this._feedback.visible=!1,this._cellFeedback.setBounds(a.x,a.y,a.width,a.height),this._cellFeedback.model=n.header.getCell(this._layout),this._cellFeedback.dragging=!1,n.addFeedbackElement(this._cellFeedback),n.addFeedbackElement(this._feedback);var l=this._feedback._dom.style;return l.borderLeft=l.borderRight=l.borderTop=l.borderBottom="",!0},d.prototype._doDrag=function(t,e,i){var o=this.grid,n=this._layout.parent,r=this.grid.layoutManager;if(i<r.contentBounds.y&&o.canGrouping())return!1;if(e<r.gridBounds.x||e>r.clientRect.right)this.$_startTimer();else{this.$_stopTimer();var s=r.getHeaderCellAt(e,i),a=this.$_findTarget(s);ne.Utils.trace("MOVE: ",this._layout.displayText+" => "+(null==a?void 0:a.displayText)),a&&!o.canMoveToLayout(a)&&(a=null),this.$_setTarget(a),this._cellFeedback.dragging=!0,n.horizontal?this._cellFeedback.x=e-this._offset:this._cellFeedback.y=i-this._offset}return!0},d.prototype._doCanceled=function(){this.$_stopTimer()},d.prototype._doCompleted=function(){this.$_stopTimer(),this._target&&(this._layout.vindex=this._target.vindex)},d.prototype._doEnded=function(){this.$_stopTimer(),this.grid.removeFeedbackElement(this._feedback),this.grid.removeFeedbackElement(this._cellFeedback)},d.prototype.getNextRequest=function(t,e){return this.grid.activeTool.getNextRequest(this._request,this._cellFeedback,t,e)},d.prototype.$_startTimer=function(){this._timer||(this._colLoop=this._colPrevLoop=0,this._timer=setInterval(this.$_timerHandler.bind(this),60))},d.prototype.$_stopTimer=function(){this._timer&&(clearInterval(this._timer),this._timer=null)},d.prototype.$_timerHandler=function(){var t=this._grid,e=this.currentX,i=t.layoutManager,o=0;e>i.clientRect.right?(o=Math.max(0,Math.min(3,(e-i.clientRect.right)/40)),this._interval=4-o,this._colLoop++):e<i.gridBounds.x&&(o=Math.max(0,Math.min(3,(i.gridBounds.x-e)/40)),this._interval=4-o,this._colLoop++),0<o&&(this._interval=4-o),this._colLoop-this._colPrevLoop>=2*this._interval&&(this._colPrevLoop=this._colLoop,e>i.clientRect.right?t.leftCell+=1:e<i.gridBounds.left&&0<t.leftPos&&--t.leftCell),this.$_setTarget(null)},d.prototype.$_findTarget=function(t){if(t)for(var e=this._layout.parent;t;){if(t.parent===e)return t;t=t.parent}},d.prototype.$_setTarget=function(t){var e=this._request.layout,i=e.parent,o=this._feedback,n=o._dom.style,r=this.grid.layoutManager;if(this.currentX,this.currentY,this._target=t,o.visible=null!=t&&t.parent===i&&t!==e){var s=r.getHeaderCellRect(t,!0);if(i.horizontal){var a=e.hcol;n.height=s.height+"px",t.hcol<a?(n.borderRight="none",n.borderLeft="",o.x=s.x):t.hcol>a&&(n.borderLeft="none",n.borderRight="",o.x=s.right-o.width),this.grid.makeLayoutVisible(t)}else{var l=e.row;n.width=s.width+"px",t.row<l?(n.borderBottom="none",n.borderTop="",o.y=s.y):t.row>l&&(n.borderTop="none",n.borderBottom="",o.y=s.bottom-o.height)}}},d.WING_SIZE=7,d);function d(t,e,i){var o=l.call(this,t.layout.grid,"columnMoveTracker")||this;return o._timer=null,o._colLoop=0,o._colPrevLoop=0,o._interval=0,o._request=t,o._layout=t.layout,o._cellFeedback=e,o._feedback=i,o}e.ColumnMoveTracker=h;var u,_=(u=i,oe.__extends(c,u),c.prototype._doDispose=function(){this._request=null,this._feedback=null,u.prototype._doDispose.call(this)},c.prototype.getRequest=function(){return this._request},c.prototype._doStart=function(t,e,i,o){var n=this.grid.layoutManager,r=n.leftContentBounds.x,s=n.rightContentBounds.right;return this._feedback.resize(s-r,2),this._feedback.move(r,i-this._request.offset),this.grid.addFeedbackElement(this._feedback),!0},c.prototype._doDrag=function(t,e,i){return i-this._request.offset-this._request.rowTop>=this.grid.displayOptions.minRowHeight&&(this._feedback.y=i-this._request.offset,!0)},c.prototype._doCompleted=function(t,e,i){var o=this.grid,n=o.displayOptions,r=Math.max(n.minRowHeight,i-this._request.offset-this._request.rowTop);(r=0===n.maxRowHeight?r:Math.min(n.maxRowHeight,r))>=o.layoutManager.bodyBounds.height&&(r=o.layoutManager.bodyBounds.height-1),this._request.variable?o.setRowHeight(this._request.itemIndex,r):n.rowHeight=r},c.prototype._doEnded=function(){this.grid.removeFeedbackElement(this._feedback)},c);function c(t,e){var i=u.call(this,t.grid,"rowResizeTracker")||this;return i._request=t,i._feedback=e,i}e.RowResizeTracker=_;var p,f=(p=i,oe.__extends(g,p),g.prototype._doDispose=function(){this._request=null,this._feedback=null,p.prototype._doDispose.call(this)},g.prototype.getRequest=function(){return this._request},g.prototype._doStart=function(t,e,i,o){var n=this.grid.layoutManager,r=n.leftContentBounds.x,s=n.rightContentBounds.right;return this._feedback.resize(s-r,2),this._feedback.move(r,i-this._request.offset),this.grid.addFeedbackElement(this._feedback),!0},g.prototype._doDrag=function(t,e,i){return i-this._request.offset-this._request.top>=this.grid.header.minHeight&&(this._feedback.y=i-this._request.offset,!0)},g.prototype._doCompleted=function(t,e,i){var o=this.grid.header,n=Math.max(o.minHeight,i-this._request.offset-this._request.top);o.height=n},g.prototype._doEnded=function(){this.grid.removeFeedbackElement(this._feedback)},g);function g(t,e){var i=p.call(this,t.grid,"rowResizeTracker")||this;return i._request=t,i._feedback=e,i}e.HeaderResizeTracker=f;var m,y=(m=i,oe.__extends(v,m),v.updateLineFeedback=function(t,e,i,o,n,r,s){if(n<0||r<0||n>=t.width||r>=t.height)return o.visible=!1,-1;var a=t.layoutManager;r-=a.contentBounds.y;var l=a.contentBounds.right,h=-1,d=-1;if(r<a.summaryBounds.bottom)d=Math.max(0,a.topIndex-1),h=a.getTableItemTop(0);else if(r>=a.footerBounds.y)d=a.topIndex+a.fullItemCount,h=a.getTableItemBottom(a.fullItemCount);else{var u=r-a.summaryBounds.bottom,_=a.getTableItemIndex(u),c=a.getTableItemHeight(_);(d=_)>=a.fixedItemCount&&(d+=a.topIndex),d!=e&&(u<a.getTableItemTop(_)+c/2?(h=a.getTableItemTop(_),e<d&&(d=Math.max(a.topIndex,d-1))):0<=(h=-1<_?a.getTableItemBottom(_):s?0:-1)&&d<e&&d++)}return h+=a.contentBounds.y+a.summaryBounds.bottom,o.visible=e<d?e+i-1<d:0<=d&&d!=e,o.visible?(o.resize(+l,2),0==t.itemCount&&(h+=a.defaultItemHeight),o.move(0,h)):d=-1,r<a.summaryBounds.bottom?t.topIndex--:r>=a.footerBounds.y&&t.topIndex++,d},v.prototype._doDispose=function(){this._request=null,this._proxy=null,this._line=null,m.prototype._doDispose.call(this)},_dp(v,"request",{get:function(){return this._request}}),_dp(v,"sourceItems",{get:function(){return this._sourceItems}}),v.prototype.setEnabled=function(t){this._proxy.setEnabled(t)&&this._proxy.draw()},v.prototype.setLabel=function(t){this._proxy.setLabel(t)&&this._proxy.draw()},_dp(v,"startWhenCreated",{get:function(){return!0}}),_dp(v,"linkable",{get:function(){return!0}}),v.prototype.getRequest=function(){return this._request},v.prototype._doStart=function(t,e,i,o){var n=this.grid,r=ne.getDoc(t),s=0==n.selections.count;if(!s){var a=n.selections.getItem(0);s=Wt.isColumnSelection(a)||!a.containsItem(this._request.itemIndex)}s&&(n.setFocusedItem(this._request.itemIndex),n.selections.selectRow(this._request.itemIndex));for(var l=this._sourceItems=n.getSelectedItemIndices(),h=n.getItem(l[0]).level,d=1;d<l.length;d++)if(n.getItem(l[d]).level<h){l.splice(d,l.length-d);break}for(d=l.length-1;0<d;d--)if(n.getItem(l[d]).level>h){l.splice(d,1);break}r.body.appendChild(this._proxy._dom),n.addFeedbackElement(this._line);var u=this.$_updateLine(e,i);return this._proxy.setZIndex(n.displayOptions.baseZindex+6),this.$_updateProxy(e,i,u),!0},v.prototype._doDrag=function(t,e,i){var o=this.grid.layoutManager,n=this.$_updateLine(e,i);return this.$_updateProxy(e,i,n),(i-=o.contentBounds.y)>o.footerBounds.y||i<o.summaryBounds.bottom?this.$_startTimer():this.$_stopTimer(),!0},v.prototype._doCompleted=function(t,e,i){if(0<=this._targetRow){var o=this.grid;if(o.canMoveRow(!0)&&o.dataDropOptions.getEnabled(o,this._sourceItems,this._targetRow)){var n=this._request.itemIndex;this._targetRow>n?o.moveSelection(this._targetRow-(n+this._sourceItems.length-1)):this._targetRow<n&&o.moveSelection(this._targetRow-n)}}},v.prototype._doCanceled=function(t,e){},v.prototype._doEnded=function(){var t=this.grid;this.$_stopTimer(),t.removeFeedbackElement(this._line),t.doc.body.removeChild(this._proxy._dom)},v.prototype.$_updateLine=function(t,e){return this._targetRow=v.updateLineFeedback(this.grid,this._request.itemIndex,this._sourceItems.length,this._line,t,e,!1)},v.prototype.$_updateProxy=function(t,e,i){var o=this.grid,n=ne.Utils.getOffset(o.container._containerDom);n.y+=e,n.x+=t+20;var r=o.canMoveRow(!0)&&o.dataDropOptions.getEnabled(o,this._sourceItems,i),s=o.dataDropOptions.getLabel(o,this._sourceItems,i);this._proxy.move(n.x,n.y),this._proxy.setEnabled(void 0!==r?r:0<=i),this._proxy.setLabel(s),this._proxy.draw()},v.prototype.$_startTimer=function(){this._timer||(this._timer=setInterval(this.$_timerHandler.bind(this),100))},v.prototype.$_stopTimer=function(){this._timer&&(clearInterval(this._timer),this._timer=null)},v.prototype.$_timerHandler=function(){this._grid.layoutManager;var t=this.currentX,e=this.currentY;this.$_updateLine(t,e)},v);function v(t,e,i){var o=m.call(this,t.grid,"rowMoveTracker")||this;return o._targetRow=-1,o._timer=null,o._request=t,o._proxy=e,o._line=i,o}e.RowMoveTracker=y});t(be);be.GridDragTracker,be.ColumnResizeTracker,be.ColumnMoveTracker,be.RowResizeTracker,be.HeaderResizeTracker,be.RowMoveTracker;var Ie=e(function(t,e){Object.defineProperty(e,"__esModule",{value:!0});var r,i=(r=be.GridDragTracker,oe.__extends(o,r),o.prototype._doDispose=function(){this._request.dispose(),this._request=null,r.prototype._doDispose.call(this)},_dp(o,"startWhenCreated",{get:function(){return!1}}),o.prototype.getRequest=function(){return this._request},o.prototype._doCanceled=function(){},o.prototype._doEnded=function(){var t=this._getItem();this.grid.selections.$_ended(t)},o.prototype.spanHome=function(t){var e=this.grid;e.displayOptions.spanSelecting&&e.getBodyViewAt(t).spanHead(e.layoutManager,t)},o.prototype.spanRight=function(t){var e=this.grid;e.displayOptions.spanSelecting&&e.getBodyViewAt(t).spanRight(e.layoutManager,t)},o);function o(t,e,i,o){var n=r.call(this,t.index.grid,e)||this;return n._request=t,n._currX=i,n._currY=o,n}e.SelectTracker=i;var n,s=(n=i,oe.__extends(a,n),a.prototype._doDispose=function(){n.prototype._doDispose.call(this)},a.prototype._getItem=function(){return this._item},a.prototype._doStart=function(t,e,i,o){var n=this.grid,r=n.selections,s=n.layoutManager,a=this._request.index;return!(s.isMergedCell(a)&&!(a=n.pointToIndex(t,e,i,!0)).layout)&&(r.itemStyle=Wt.SelectionStyle.BLOCK,o?this._item=0<r.count&&r.getItem(0):(r.clear(),this._item=r.add(a,a,Wt.SelectionStyle.BLOCK)),null!=this._item)},a.prototype._doDrag=function(t,e,i){if(this._item){var o=this.grid,n=o.layoutManager;if(this._currX=e,(this._currY=i)>n.footerBounds.y||i<n.gridBounds.y||e<n.gridBounds.x||e>n.clientRect.right)this.$_startTimer();else{this.$_stopTimer();var r=o.pointToIndex(t,e,i,!0);r.column&&0<=r.itemIndex&&(0<=kt.CellIndex.compareHorz(r,this._item.startIndex)?(this.spanRight(r),this.spanHome(this._item.startIndex)):this.spanRight(this._item.startIndex),this._item.resizeTo(r))}return!0}},a.prototype._doEnded=function(){this.$_stopTimer(),n.prototype._doEnded.call(this)},a.prototype.$_startTimer=function(){this._timer||(this._rowLoop=this._rowPrevLoop=this._colLoop=this._colPrevLoop=0,this._timer=setInterval(this.$_timerHandler.bind(this),30),this._grid.selections.lock())},a.prototype.$_stopTimer=function(){this._timer&&(clearInterval(this._timer),this._timer=null,this._grid.selections.unlock())},a.prototype.$_timerHandler=function(){var t=this._grid,e=this._currX,i=this._currY,o=t.layoutManager,n=0,r=0;i>o.footerBounds.y?(r=Math.max(0,Math.min(3,(i-o.footerBounds.y)/40)),this._interval=4-r,this._rowLoop++):i<o.gridBounds.y&&(r=Math.max(0,Math.min(3,(o.gridBounds.y-i)/40)),this._interval=4-r,this._rowLoop++),e>o.clientRect.right?(n=Math.max(0,Math.min(3,(e-o.clientRect.right)/40)),this._interval=4-n,this._colLoop++):e<o.gridBounds.x&&(n=Math.max(0,Math.min(3,(o.gridBounds.x-e)/40)),this._interval=4-n,this._colLoop++);var s=!1;if(0<Math.max(n,r)&&(this._interval=4-Math.max(n,r)),this._rowLoop-this._rowPrevLoop>=this._interval&&(this._rowPrevLoop=this._rowLoop,i>o.footerBounds.y?t.topItem+o.fullItemCount<t.itemCount&&(t.topIndex=t.topIndex+1,s=!0):i<o.gridBounds.y&&t.topItem>o.fixedItemCount&&(t.topIndex=t.topIndex-1,s=!0)),s||this._colLoop-this._colPrevLoop>=2*this._interval&&(this._colPrevLoop=this._colLoop,e>o.clientRect.right?(t.leftPos+=e-o.clientRect.right,s=!0):e<o.gridBounds.left&&0<t.leftPos&&(t.leftPos-=o.gridBounds.left-e,s=!0)),s){var a=t.pointToIndex(null,e,i,!1);a.column&&(a.itemIndex=Math.min(Math.max(0,a.itemIndex,t.topIndex),t.itemCount-1),this._item.resizeTo(a))}},a);function a(t,e,i){var o=n.call(this,t,"blockSelectTracker",e,i)||this;return o._timer=null,o._rowPrevLoop=0,o._rowLoop=0,o._colPrevLoop=0,o._colLoop=0,o._interval=0,o}e.BlockSelectTracker=s;var l,h=(l=i,oe.__extends(d,l),d.prototype._doDispose=function(){l.prototype._doDispose.call(this)},d.prototype._getItem=function(){return this._item},d.prototype._doStart=function(t,e,i,o){var n=this.grid,r=n.selections,s=n.layoutManager,a=this._request.index;return s.isMergedCell(a)&&(a=n.pointToIndex(t,e,i,!0)),r.itemStyle=Wt.SelectionStyle.ROWS,o?this._item=0<r.count&&r.getItem(0):(r.clear(),this._item=r.add(a,a,Wt.SelectionStyle.ROWS)),Boolean(this._item)},d.prototype._doDrag=function(t,e,i){if(this._item){var o=this.grid.layoutManager;if(this._currX=e,(this._currY=i)>o.footerBounds.y||i<o.gridBounds.y||e<0||e>o.clientRect.right)this.$_startTimer();else{this.$_stopTimer();var n=this.grid.pointToIndex(t,e,i,!1);0<=n.itemIndex&&this._item.resizeTo(n)}return!0}return!1},d.prototype._doEnded=function(){this.$_stopTimer(),l.prototype._doEnded.call(this)},d.prototype.$_startTimer=function(){this._timer||(this._loop=this._prevLoop=this._colLoop=this._colPrevLoop=0,this._interval=1,this._timer=setInterval(this.$_timerHandler.bind(this),30),this._grid.selections.lock())},d.prototype.$_stopTimer=function(){this._timer&&(clearInterval(this._timer),this._timer=null,this._grid.selections.unlock())},d.prototype.$_timerHandler=function(){var t,e,i=this._grid,o=this._currX,n=this._currY,r=i.layoutManager;n>r.footerBounds.y?(t=Math.max(0,Math.min(3,(n-r.footerBounds.y)/40)),this._interval=4-t,this._loop++):n<r.gridBounds.y&&(t=Math.max(0,Math.min(3,(r.gridBounds.y-n)/40)),this._interval=4-t,this._loop++),this._loop-this._prevLoop>=this._interval?(this._prevLoop=this._loop,n>r.footerBounds.y?i.topIndex=i.topIndex+1:n<r.gridBounds.y&&(i.topIndex=i.topIndex-1),(e=i.pointToIndex(null,this._currX,this._currY,!1)).itemIndex=Math.min(Math.max(0,e.itemIndex,i.topIndex),i.itemCount-1),this._item.resizeTo(e)):(o>r.clientRect.right?(t=Math.max(0,Math.min(3,(o-r.clientRect.right)/40)),this._interval=4-t,this._colLoop++):o<0&&(t=Math.max(0,Math.min(3,(r.gridBounds.x-o)/40)),this._interval=4-t,this._colLoop++),this._colLoop-this._colPrevLoop>=2*this._interval&&(this._colPrevLoop=this._colLoop,o>r.clientRect.right?i.leftLayout=i.leftLayout+1:o<r.gridBounds.x&&0<i.leftPos&&(i.leftLayout=i.leftLayout-1),0<=(e=i.pointToIndex(null,this._currX,this._currY,!1)).itemIndex&&(e.itemIndex=Math.min(Math.max(0,e.itemIndex,i.topIndex),i.itemCount-1),this._item.resizeTo(e))))},d);function d(t,e,i){var o=l.call(this,t,"rowsSelectTracker",e,i)||this;return o._timer=null,o._prevLoop=0,o._loop=0,o._colPrevLoop=0,o._colLoop=0,o._interval=0,o}e.RowsSelectTracker=h;var u,_=(u=i,oe.__extends(c,u),c.prototype._doDispose=function(){u.prototype._doDispose.call(this)},_dp(c,"startWhenCreated",{get:function(){return!0}}),c.prototype._getItem=function(){return this._item},c.prototype._doStart=function(t,e,i,o){var n=this.grid,r=n.selections,s=n.layoutManager,a=this._request.index;return s.isMergedCell(a)&&(a=n.pointToIndex(t,e,i,!0)),r.itemStyle=Wt.SelectionStyle.ROWS,o?this._item=0<r.count&&r.getItem(0):(r.clear(),this._item=r.add(a,a,Wt.SelectionStyle.COLUMNS)),Boolean(this._item)},c.prototype._doDrag=function(t,e,i){if(this._item){var o=this.grid.layoutManager;if(this._currX=e,this._currY=i,e<o.gridBounds.x||e>o.clientRect.right||i>o.footerBounds.y||i<0)this.$_startTimer();else{this.$_stopTimer();var n=this.grid.pointToIndex(t,e,i,!0);null!=n.column&&this._item.resizeTo(n)}return!0}return!1},c.prototype._doEnded=function(){this.$_stopTimer(),u.prototype._doEnded.call(this)},c.prototype.$_startTimer=function(){this._timer||(this._loop=this._prevLoop=this._rowLoop=this._rowPrevLoop=0,this._interval=1,this._timer=setInterval(this.$_timerHandler.bind(this),30),this._grid.selections.lock())},c.prototype.$_stopTimer=function(){this._timer&&(clearInterval(this._timer),this._timer=null,this._grid.selections.unlock())},c.prototype.$_timerHandler=function(){var t,e,i=this._grid,o=this._currX,n=this._currY,r=i.layoutManager;o>r.clientRect.right?(t=Math.max(0,Math.min(3,(o-r.clientRect.right)/40)),this._interval=4-t,this._loop++):o<r.gridBounds.x&&(t=Math.max(0,Math.min(3,(r.gridBounds.x-o)/40)),this._interval=4-t,this._loop++),this._loop-this._prevLoop>=2*this._interval?(this._prevLoop=this._loop,o>r.clientRect.right?i.leftLayout=i.leftLayout+1:o<r.gridBounds.x&&0<i.leftPos&&(i.leftLayout=i.leftLayout-1),(e=i.pointToIndex(null,this._currX,this._currY,!1)).column&&this._item.resizeTo(e)):(n>r.footerBounds.y?(t=Math.max(0,Math.min(3,(n-r.footerBounds.y)/40)),this._interval=4-t,this._rowLoop++):n<0&&(t=Math.max(0,Math.min(3,(r.gridBounds.y-n)/40)),this._interval=4-t,this._rowLoop++),this._rowLoop-this._rowPrevLoop>=this._interval&&(this._rowPrevLoop=this._rowLoop,n>r.footerBounds.y?i.topIndex=i.topIndex+1:n<r.gridBounds.y&&(i.topIndex=i.topIndex-1),(e=i.pointToIndex(null,this._currX,this._currY,!1)).column&&this._item.resizeTo(e)))},c);function c(t,e,i){var o=u.call(this,t,"columnsSelectTracker",e,i)||this;return o._timer=null,o._prevLoop=0,o._loop=0,o._rowPrevLoop=0,o._rowLoop=0,o._interval=0,o}e.ColumnsSelectTracker=_});t(Ie);Ie.SelectTracker,Ie.BlockSelectTracker,Ie.RowsSelectTracker,Ie.ColumnsSelectTracker;var Ee=e(function(t,e){Object.defineProperty(e,"__esModule",{value:!0});var i,s=(i=re.Base,oe.__extends(o,i),o.prototype._doDispose=function(){i.prototype._doDispose.call(this)},_dp(o,"visible",{get:function(){return this._visible},set:function(t){this._visible=t}}),_dp(o,"message",{get:function(){return this._message},set:function(t){this._message=t}}),o.prototype.assignFrom=function(t){"string"==typeof t?(this._message=t,this._message&&(this._visible=!0)):"boolean"==typeof t?this._visible=t:t&&i.prototype.assignFrom.call(this,t)},o);function o(t){var e=i.call(this)||this;return e._visible=!0,t&&e.assignFrom(t),e}e.TooltipOptions=s;var n,a=(n=re.Base,oe.__extends(r,n),r.prototype._doDispose=function(){n.prototype._doDispose.call(this)},_dp(r,"minWidth",{get:function(){return this._minWidth},set:function(t){this._minWidth=t}}),_dp(r,"maxWidth",{get:function(){return this._maxWidth},set:function(t){this._maxWidth=t}}),_dp(r,"dropDownCount",{get:function(){return this._dropDownCount},set:function(t){this._dropDownCount=t}}),r.prototype.show=function(t,e,i,o,n){this._showing=!0;try{this.$_show(t,e,i,o,n)}finally{this._showing=!1}},r.prototype.hide=function(){var t=this._element;t&&t.parentNode&&this._container._container.removeChild(t)},r.prototype.$_createElement=function(t){var e=t.createElement("div");return e.style.pointerEvents="none",e.onkeydown=function(t){27==t.keyCode&&this.hide()}.bind(this),ne.Utils.isMobile()&&e.addEventListener("touchend",this.$_touchendHandler.bind(this),!1),this.$_disableSelection(e),this._span=t.createElement("span"),e.appendChild(this._span),this.$_disableSelection(this._span),e},r.prototype.$_touchendHandler=function(t){t.preventDefault(),this.hide()},r.prototype.$_disableSelection=function(t){void 0!==t.onselectstart?t.onselectstart=function(){return!1}:void 0!==t.style.MozUserSelect?t.style.MozUserSelect="none":t.onmousedown=function(){return!1}},r.prototype.$_show=function(t,e,i,o,n){var r=this._container.gridView.displayOptions.baseZindex+4,s=this._element,a=t.message;if(s&&a){this._span.innerHTML=a.replace(/\n/g,"<br>"),ne.Utils.setClassName(s,"rg-tooltip");var l=s.style;l.position="absolute",l.left=e+"px",l.top=i+"px",l.overflow="hidden",l.zIndex=String(r),this._container._container.appendChild(s);var h=s.getBoundingClientRect(),d=this._container._container.getBoundingClientRect();l.left=h.right>d.right?Math.max(d.right-h.width-d.left-2,0)+"px":s.style.left,h.bottom>d.bottom&&(s.style.top=n?Math.max(0,i-(h.bottom-d.bottom))+"px":Math.max(i-h.height-o,0)+"px"),l.visibility="visible"}},r);function r(t){var e=n.call(this)||this;return e._minWidth=0,e._maxWidth=0,e._dropDownCount=8,e._showing=!1,e._container=t,e._element=e.$_createElement(t.doc),e}e.ToolTipView=a;var l,h=(l=re.Base,oe.__extends(d,l),d.prototype._doDispose=function(){this._container=null,l.prototype._doDispose.call(this)},_dp(d,"visible",{get:function(){return this._active}}),d.prototype.show=function(t,e,i,o,n){if(!this._active&&(this.close(),(t=t instanceof s?t:t?new s(t):null)&&t.visible)){this._tipView||(this._tipView=new a(this._container)),this._tipView.show(t,e,i,o,n);var r=this._container.gridView;return r&&this._pos.set(r.mouseX,r.mouseY),this._active=!0}return!1},d.prototype.close=function(t,e){if(this._active&&void 0!==t){var i=this._pos;if(Math.abs(i.x-t)<4&&Math.abs(i.y-e)<4)return!1}return this._timer&&clearTimeout(this._timer),!(!this._active||(this._tipView&&this._tipView.hide(),this._active=!1))},d);function d(t){var e=l.call(this)||this;return e._active=!1,e._pos=new Gt.Point,e._container=t.container,e}e.TooltipManager=h});t(Ee);Ee.TooltipOptions,Ee.ToolTipView,Ee.TooltipManager;var Se=e(function(t,e){Object.defineProperty(e,"__esModule",{value:!0});var i,o=(i=re.Base,oe.__extends(n,i),n.prototype._doDispose=function(){this._container=null,i.prototype._doDispose.call(this)},n.prototype._touchToOffset=function(t,e){var i=t._containerDom.getBoundingClientRect();return e.x=e.clientX-i.left,e.y=e.clientY-i.top,e},n.prototype._toOffset=function(t){return this._touchToOffset(this._container,t)},n);function n(t){var e=i.call(this)||this;return e._container=t,e}e.TouchManager=o;var r,s=(r=o,oe.__extends(a,r),a.prototype._doDispose=function(){r.prototype._doDispose.call(this)},_dp(a,"touchHandler",{get:function(){return this._touchHandler},set:function(t){this._touchHandler=t}}),_dp(a,"dragHandler",{get:function(){return this._dragHandler},set:function(t){this._dragHandler=t}}),_dp(a,"dragStartHandler",{get:function(){return this._dragStartHandler},set:function(t){this._dragStartHandler=t}}),_dp(a,"dragEndHandler",{get:function(){return this._dragEndHandler},set:function(t){this._dragEndHandler=t}}),_dp(a,"swipeHandler",{get:function(){return this._swipeHandler},set:function(t){this._swipeHandler=t}}),_dp(a,"tapHandler",{get:function(){return this._tapHandler},set:function(t){this._tapHandler=t}}),_dp(a,"doubleTapHandler",{get:function(){return this._doubleTapHandler},set:function(t){this._doubleTapHandler=t}}),_dp(a,"longTapHandler",{get:function(){return this._longTapHandler},set:function(t){this._longTapHandler=t}}),_dp(a,"touchEndt",{get:function(){return this._touchEndt}}),a.prototype.isSingleTouch=function(){return 1==this._touches.length},a.prototype.clearTouches=function(){this._touches=[]},a.prototype.removeTouches=function(t){for(var e,i,o=0,n=t.length;o<n;o++)e=t[o],-1<(i=this._touches.indexOf(e.identifier))&&this._touches.splice(i,1)},a.prototype.touchStart=function(t){clearTimeout(this._longTapTimer);var e,i=t.changedTouches;if(1<t.touches.length||0<this._touches.length)for(var o=0,n=i.length;o<n;o++)e=i[o],this._touches.push(e.identifier);else 0<i.length?(e=this._toOffset(i[0]),this._tracker&&(this._tracker.stop&&this._tracker.stop(e.x,e.y),this._tracker=null),this._touchId=e.identifier,this._touches.push(e.identifier),this._dragging=!1,this._touchHandler&&(this._tracker=this._touchHandler(t,e.x,e.y)),0==this._tapped?(this._started=ne.Utils.getTimer(),this._prevX=this._startX=e.x,this._prevY=this._startY=e.y):(this._seconded=ne.Utils.getTimer(),this._prevX=e.x,this._prevY=e.y),this._events=[],this._events.push({x:e.x,y:e.y,t:t.timeStamp}),this._longTapTimer=setTimeout(function(){this._longTapHandler&&this._longTapHandler(this._startX,this._startY)&&(this._touchId=void 0,this._tapped=0)}.bind(this),this._longTapDuration)):alert("no touch ?")},a.prototype.touchMove=function(t){var e=this.$_findTouch(t);if(e&&this.isSingleTouch()){var i=!1;this._dragging&&this._tracker?i=this._dragHandler&&this._dragHandler(this._prevX,this._prevY,e.x,e.y):(Math.abs(this._prevX-e.x)>this._tapThreshold||Math.abs(this._prevY-e.y)>this._tapThreshold)&&(clearTimeout(this._longTapTimer),this._tapped=0,this._dragging=!0,i=this._tracker=this._dragStartHandler&&this._dragStartHandler(this._startX,this._startY,e.x,e.y)),i&&t.cancelable&&t.preventDefault(),this._prevX=e.x,this._prevY=e.y,this._events.push({x:e.x,y:e.y,t:t.timeStamp}),30<this._events.length&&this._events.splice(0,15)}},a.prototype.touchEnd=function(t){if(clearTimeout(this._longTapTimer),void 0!==this._touchId){var e=this.$_findTouch(t);if(e&&this.isSingleTouch()){var i=this._container,o=i._currentX=e.x,n=i._currentY=e.y;this._dragging&&this._tracker?(this._touchId=void 0,this._tapped=0,this._swipeHandler&&this.$_checkSwipe(t)||this._dragEndHandler&&this._dragEndHandler(o,n,!1)):0==this._tapped?(this._tapped=1,this._tapHandler&&this._tapHandler(t,this._startX,this._startY)):1==this._tapped?(this._touchId=void 0,ne.Utils.getTimer()-this._started<this._doubleTapInterval?(this._tapped=0,this._doubleTapHandler&&this._doubleTapHandler(t,this._prevX,this._prevY)):(this._tapped=1,this._started=this._seconded,this._startX=this._prevX,this._startY=this._prevY,this._tapHandler&&this._tapHandler(t,this._prevX,this._prevY))):alert("touch end")}else this._dragEndHandler&&this._dragEndHandler(null,null,!1);this._tracker=null,this.removeTouches(t.changedTouches),ne.Utils.isiOS&&(this._touchEndt=ne.Utils.getTimer())}else this.removeTouches(t.changedTouches)},a.prototype.touchCancel=function(t){this.clearTouches(),clearTimeout(this._longTapTimer),this._dragEndHandler&&this._dragEndHandler(null,null,!0),this._tracker=null},a.prototype.$_findTouch=function(t){for(var e=t.changedTouches,i=0;i<e.length;i++){var o=e[i];if(o.identifier==this._touchId)return this._toOffset(o)}return null},a.prototype.$_checkSwipe=function(t){var e=this._events,i=e.length;if(!(i<2)){for(var o=e[i-1],n=e[i-2],r=i-3;0<=r&&!(100<o.t-n.t);r--)n=e[r];var s=n.x,a=n.y,l=o.x,h=o.y,d=Math.sqrt(Math.pow(s-l,2)+Math.pow(a-h,2))/Math.max(16,o.t-n.t);if(.1<d){var u=Math.log(.1/d)/Math.log(.998),_=d*(1-Math.pow(.998,1+u))/(1-.998),c="right",p=Math.round(180*Math.atan2(h-a,l-s)/Math.PI);return p<0&&(p=360+p),45<p&&p<=135?c="bottom":135<p&&p<=225?c="left":225<p&&p<=315&&(c="top"),this._swipeHandler(u,_,c,t)}}},a);function a(t){var e=r.call(this,t)||this;return e._touchId=void 0,e._started=null,e._seconded=null,e._startX=NaN,e._startY=NaN,e._tapped=0,e._dragging=!1,e._prevX=NaN,e._prevY=NaN,e._longTapTimer=void 0,e._tracker=null,e._events=[],e._touches=[],e._longTapDuration=500,e._doubleTapInterval=300,e._tapThreshold=4,e}e.SingleTouchManager=s});t(Se);Se.TouchManager,Se.SingleTouchManager;var Re=e(function(t,e){Object.defineProperty(e,"__esModule",{value:!0});var i,o=(i=xt.DataCellRenderer,oe.__extends(n,i),n.prototype._doDispose=function(){i.prototype._doDispose.call(this)},_dp(n,"type",{get:function(){return this._type}}),n);function n(t){var e=i.call(this)||this;return e._type=t,e}e.CustomCellRenderer=o;var r,s=(r=xt.DataCellRenderer,oe.__extends(a,r),a.prototype._doDispose=function(){r.prototype._doDispose.call(this)},_dp(a,"inputFocusable",{get:function(){return this._inputFocusable},set:function(t){this._inputFocusable!==t&&(this._inputFocusable=t)}}),_dp(a,"type",{get:function(){return this._impl&&this._impl.type}}),a.prototype._doInitContent=function(t){this._impl&&this._impl.initContent&&this._impl.initContent.call(this,t)},a.prototype._doClearContent=function(t){this._impl&&this._impl.clearContent&&this._impl.clearContent.call(this,t)},a.prototype._doRenderCell=function(t,e,i,o,n){var r={};r.focused=i.focused,this._impl&&this._impl.render&&this._impl.render.call(this,t.handler,e,o,n,r)},a.prototype.preventDefaultEditClick=function(t){return this._impl&&this._impl.preventEditClick?this._impl.preventEditClick.call(this,t):r.prototype.preventDefaultEditClick.call(this,t)},a.prototype._doEditClick=function(t,e,i){return this._impl&&this._impl.editClick?this._impl.editClick.call(this,t,e,i):r.prototype._doEditClick.call(this,t,e,i)},a.prototype.preventDefaultClick=function(t){return this._impl&&this._impl.preventClick?this._impl.preventClick.call(this,t):r.prototype.preventDefaultClick.call(this,t)},a.prototype._doClick=function(t,e){return this._impl&&this._impl.click?this._impl.click.call(this,e):r.prototype._doClick.call(this,t,e)},a.prototype._doEditKey=function(t,e,i){return this._impl&&this._impl.editKey?this._impl.editKey.call(this,e,i):r.prototype._doEditKey.call(this,t,e,i)},a.prototype.canClick=function(t){return this._impl&&this._impl.canClick?this._impl.canClick.call(this,t):r.prototype.canClick.call(this,t)},a.prototype.canEdit=function(){return this._impl&&this._impl.canEdit?this._impl.canEdit.call(this):r.prototype.canEdit.call(this)},a.prototype.canEditKey=function(t){return this._impl&&this._impl.canEditKey?this._impl.canEditKey.call(this,t):r.prototype.canEditKey.call(this,t)},a);function a(t,e){var i=r.call(this)||this;return i._inputFocusable=!1,t&&"function"==typeof t.render?(i._impl=t,i._impl.type=e,i.assignFrom(i._impl)):i._impl=null,i._itemClickable=!0,i}e.CustomCellRendererImpl=s});t(Re);Re.CustomCellRenderer,Re.CustomCellRendererImpl;var De=e(function(t,e){Object.defineProperty(e,"__esModule",{value:!0});var r,n=(r=v.EditCommand,oe.__extends(i,r),i.prototype.undo=function(){this._row.setData(this._field,this._oldValue),this.$_focusCell()},i.prototype.redo=function(){this._row.setData(this._field,this._value),this.$_focusCell()},i.prototype.$_focusCell=function(){var t=this._column.grid,e=t.focusedIndex.clone();e.layout=this._column.layout,t.setFocusedIndex(e),t.makeCellVisible(e)},i);function i(t,e,i,o){var n=r.call(this)||this;return n._row=t,n._field=e,n._value=i,n._column=o,n._oldValue=t.getData(e),n}e.EditValueCommand=n;var o,s=(o=re.Base,oe.__extends(a,o),a.prototype._doDispose=function(){this._grid=null,this._editIndex&&this._editIndex.dispose(),this._editIndex=null,this._editor&&this._editor.dispose(),this._editor=null,this._defaultEditor&&this._defaultEditor.dispose(),this._defaultEditor=null,this._editors=null,o.prototype._doDispose.call(this)},_dp(a,"readOnly",{get:function(){return this._readOnly}}),_dp(a,"editable",{get:function(){return this._editable}}),a.prototype.onEditorStart=function(t){if(!t.visible&&!this._commiting&&!this._canceling)return this._activateEditor(!1,!1)},a.prototype.onEditorKeyDown=function(t,e){var i=e.ctrlKey;return this._editor&&(this._editor.textReadOnly||i||e.altKey||!this._isEditKey(e.keyCode)?this._editor.textReadOnly?this._editor._editor.readOnly=this._editor.textReadOnly:229==e.keyCode&&this._editor.setReadOnly(this._readOnly):this._editor.setReadOnly(this._readOnly)),this._grid.activeTool.keyDown(e)},a.prototype.onEditorKeyPress=function(t,e){return this._grid.activeTool.keyPress(e)},a.prototype.onEditorKeyUp=function(t,e){return this._grid.activeTool.keyUp(e)},a.prototype.onEditorChange=function(t){this._modified||(this._modified=!0,this._grid._editorStarted(this._editor,this._editIndex)),this.editing&&(this._grid.makeCellVisible(this._editIndex),this._grid._editorChange(this._editor,this._editIndex,this._editor.getEditValue(!1,!1)))},a.prototype.onEditorSearch=function(t,e){this._grid._editorSearch(this._editor,this._editIndex,e)},a.prototype.onSearchCellButtonClick=function(t,e){return this._grid._searchCellButtonClick(this._editor,this._editIndex,e)},a.prototype.onEditorCommit=function(t){return this.commitEditor(!0)},_dp(a,"editIndex",{get:function(){return this._editIndex.clone()}}),_dp(a,"editing",{get:function(){return this._editor&&this._editor.editing}}),_dp(a,"editValue",{get:function(){return this._editor&&this._editor.value}}),a.prototype.setFocus=function(t,e){if(e&&(!this._editor||e!==this._editor.editor)){var i=ne.getWin(e);if(e instanceof i.HTMLInputElement||e instanceof i.HTMLSelectElement){var o=this._grid.focusedIndex.clone(),n=this._grid.getBodyCellAt(o),r=n&&n.renderer2;if((r instanceof bt.TemplateCellRenderer||r instanceof Re.CustomCellRendererImpl)&&r.inputFocusable)return}}this.$_focusToEditor(t,e)},a.prototype.resetEditor=function(t){if(this.editing){if(this._grid.isValid(this._editIndex)){if(this._resetBounds(),t&&this.editing){var e=this.getData(this._editIndex);this._resetting=!0;try{this._editor.setEditValue(e),this._editor.beginEdit(!1,!0)}finally{this._resetting=!1}}}else this.hideEditor();return!0}},a.prototype.reprepareEditor=function(t){kt.CellIndex.areEquals(t,this._editIndex)&&(this.editing?this._editor.selectAll():(this._needPrepare=!0,this._prepareEditor(t)))},a.prototype.invalidateEditor=function(){this._dirty=!0},a.prototype.closeList=function(t){this._editor&&this._editor.closeList(t)},a.prototype.focusedIndexChanging=function(){return!this.editing||(this.closeList(!0),this.commitEditor(!0))},a.prototype.focusedIndexChanged=function(t,e,i){this._hideEditor(),this._grid.isValid(e)&&(i?this._prepareEditor(e):this._needPrepare=!0)},a.prototype.prepareEditor=function(t){this._needPrepare&&(this._needPrepare=!1,this._grid.isValid(t)&&this._prepareEditor(t))},a.prototype.requestPrepareEditor=function(){this._needPrepare=!0},a.prototype.dataColumnChanged=function(t){if(t&&this._editor&&this._editIndex&&this._editIndex.dataColumn===t){var e=!t.editable||t.readOnly;e!=(!this._editable||this._readOnly)&&(this.editing?this._editor.setReadOnly(e):this._prepareEditor(this._editIndex))}},a.prototype.showEditor=function(t,e){var i=this._grid;if(i&&i.isValid(t)&&t.item.canEdit()){if(this._editor&&this._editor.editing)return i.makeCellVisible(t),!0;if(this._editor&&!this._editor.editing&&(this._showEditorTimer||this._prepareEditor(t),i.makeCellVisible(t),this._activateEditor(!1,!0,e)))return i.editorLender&&i.editorLender.editorShow(t),!0}},a.prototype.showList=function(t){var e=this._grid,i=this._editor;if(i&&i.editing&&(e.makeCellVisible(t),this.cancelEditor(!0)),e&&e.isValid(t)&&(this._prepareEditor(t),e.makeCellVisible(t),i&&this._editable&&!i.editing))return i.dropDownList(!0),!0},a.prototype.caretToLast=function(){this._editor&&this._editor.caretToLast()},a.prototype.hideEditor=function(){if(this.editing){this._modified=!1,this._resetting=!0;try{this._internalHideEditor(this._editor),this._prepareEditor(this._editIndex)}finally{this._resetting=!1}}},a.prototype.commitEditor=function(t,e){if(void 0===e&&(e=!1),!this.editing||this._commiting)return!0;var i=this._editor;if(!i)return!1;var o,n,r=this._grid,s=r.editOptions,a=this._editIndex,l=a.dataColumn,h=!0,d=i._mask;this._commiting=!0;try{if(i.commit(),(this._modified||i.isEdited())&&l&&0<=l.dataIndex)try{try{if((o=d&&!d.checkValid()?Jt.CellEditor.InvalidFormat:i.getEditValue(!0,!0))===Jt.CellEditor.InvalidFormat)h=!1,s.showInvalidFormatMessage&&d&&d.showInvalidFormatMessage&&alert(d&&d.invalidFormatMessage||s.invalidFormatMessage);else if(o===Jt.CellEditor.Unselected)h=!1;else{var u={text:i.getEditText(),value:o};this._grid.getEditValue(i,a,u),o=u.value,h=this._grid.editorCommit(a,this._getData(a),o)}}catch(t){h=!1}this._grid.isItemEditing()?h&&(this._setData(a,o),this._grid.isItemEditing(a.item)&&(o=this._getData(a),this._grid.validateCellCommit(a,o)),this._modified=!1):this._modified=!1}catch(t){n=t,h=!1}if(this._resetting=!0,t)try{this._internalHideEditor(i),this._prepareEditor(a)}finally{this._resetting=!1}if(n){if(e)throw n;s.showCommitError&&alert(n.message||n)}}finally{this._commiting=!1}if(h&&r.isCellEditing()){var _=r.itemSource,c=_.editingItem.invalidFields;if(l.error)return c.push(l.dataIndex),s.showCommitError&&alert(l.error),!1;if(0<=c.indexOf(l.dataIndex)&&c.splice(c.indexOf(l.dataIndex),1),0<c.length)return!0;if(!_.commit())return _.cancel(),!0}return h},a.prototype.cancelEditor=function(t){if(this.editing){this._canceling=!0;try{try{this._modified=!1,this._grid.editorCancel(this._editor,this._editIndex)}catch(t){throw t}this._resetting=!0;try{this._internalHideEditor(this._editor),this._prepareEditor(this._editIndex)}finally{this._resetting=!1}}finally{this._canceling=!1,this._grid.editorCanceled()}if(this._grid.editOptions.commitByCell){var e=this._grid.itemSource;e.isUpdating&&e.cancel()}}},a.prototype.fillSearchItems=function(t,e,i,o){this.editing&&this._editIndex.column===t&&this._editor instanceof ye.SearchCellEditor&&this._editor.fillItems(e,i,o)},a.prototype.buttonClicked=function(t){this._editor&&kt.CellIndex.areEquals(this._editIndex,t)&&this._editor.hasButton&&(ne.Utils.isMobile()||this._editor.buttonClicked(this._editIndex))},a.prototype.getData=function(t){},a.prototype.setEditValue=function(t,e){this._editor&&this._editor.setCellEditValue(t,e)},a.prototype._internalHideEditor=function(t){this.closeList(!1),t.setVisible(!1,!1),t.endEdit(),this._grid._loading||this._grid._fireHideEditor(t.editIndex),this._grid.editorLender&&this._grid.editorLender.editorHide(this._editIndex)},a.prototype.$_hideEdit=function(t,e){e&&(e.setEditIndex(t),e.setVisible(!1),this.$_focusToEditor())},a.prototype.$_getCellEditor=function(t){var e,i=this._grid;if(i.editorLender)e=i.editorLender.getEditor(t);else{var o=i.getBodyCellAt(t);e=o&&o.editor}if(!e){var n=t.valueColumn;n&&(e=n.editor)}var r=i.delegate.getCellEditor(Jt.CellEditor.getEditorType(e));return r&&(r.initOptions(),e&&r.applyOptions(e),r.setController(this)),r},a.prototype.resetEditable=function(t){var e=this._editor;if(!e)return!1;var i=this._grid;if(e.setReadOnly(!1),i.editorLender)return this._editor.setEditIndex(t),this._editable=!0;i.editOptions;var o=i.editorOptions,n=(t.valueColumn,t.item),r=n.itemState,s=(dt.ItemState_isInserting(r)||t.dataRow,i.canEditAt(t));if(o._titleExprStatement&&this._editor.setEditorTitle(t),!s)return this.$_hideEdit(t,this._editor),!1;var a=!i.canWriteAt(t);if(!a){var l=n.dataSource,h=l?l.getField(t.dataField):null;a=!h||h.dataType==lt.ValueType.OBJECT}return this._readOnly=a,this._editor.setReadOnly(this._readOnly),this._editor.setEditIndex(t),this._editable=!0},a.prototype._prepareEditor=function(t){var e=this._grid,i=e.editOptions;if((e.active||e.editorLender)&&(this._dirty=!1,this._grid.isValid(t)&&t.item.canEdit()&&(this._hideEditor(),this._editor=this.$_getCellEditor(t),this._editor&&(this._editIndex.assign(t),this.resetEditable(t))))){this._editor.prepare();var o=this._getData(t);this._editor.setEditValue(o),this._editor.selectAll(),i.editWhenFocused&&!this._editor.editing?(this._showEditorTimer&&clearTimeout(this._showEditorTimer),this._canceling||this._resetting||(this._showEditorTimer=setTimeout(function(){e.showEditor(),this._showEditorTimer=null}.bind(this),100))):this._editor.setVisible(!1),this.$_focusToEditor()}},a.prototype._hideEditor=function(){if(this._editor)try{this._editor.setVisible(!1)}finally{this._editor.unprepare(),this._editor.endEdit(),this._editor=null,this._editable=!1,this.$_focusToEditor()}},a.prototype._initEditor=function(t,e,i){this._dirty&&(this._dirty=!1,this._starting||this._prepareEditor(this._editIndex));var o=this._editor;o&&(o.endEdit(),this._resetBounds(),o.setVisible(!0,!0),o.beginEdit(t,e),t&&o.clear(),e&&o.selectAll(),i&&o.dropDownList(!1),this.$_focusToEditor(!0))},a.prototype.$_setEditorAttrs=function(t){var e=this._editor;if(e){for(var i in t)"callback"!=i&&e._editor.setAttribute(i,t[i]);"function"==typeof t.callback&&t.callback()}},a.prototype._editorActivated=function(t){this._grid.editorActivated(t)},a.prototype._activateEditor=function(t,e,i){void 0===i&&(i=!1);var o=this._grid,n=this._editor,r=this._editIndex,s={},a={};return!(!this._editable||!n||n.editing||!o.$_canShowEditor(r,s,a)||(s.type&&(n=this._editor=o.delegate.getCellEditor(Jt.CellEditor.getEditorType(s.type))||n),ne.Utils.isEmpty(s)||(n.applyOptions(s),n.setEditIndex(r)),n.textReadOnly?n.textReadOnly&&n._editor&&(n._editor.readOnly=n.textReadOnly):n.setReadOnly(this._readOnly),this._initEditor(t,e,i),this._modified=!1,this._editorActivated(this._editor),this.$_setEditorAttrs(a),0))},a.prototype._resetBounds=function(){if(this._editor){var t=this._grid.getEditCellBounds(this._editor,this._editIndex),e=this._grid.getEditBounds(this._editor,this._editIndex).width;t.x--,t.y--,t.width++,t.height++,ne.Utils.isMobile()&&(--t.y,t.height+=2),ne.Utils.isIE&&t.right>this._grid.width+3?this._editor.setBounds(t.x+1e4,t.y,0,0,0):this._editor.setBounds(t.x,t.y,t.width,t.height,e),t=this._grid.getEditCellBounds(this._editor,this._editIndex),this._editor.setCellBounds(t.x,t.y,t.width,t.height),t.x<0&&(this._resetFocused=!0)}},a.prototype.$_focusToEditor=function(t,e){void 0===t&&(t=!1);var i=this._grid;if(t||i.$_editFocused){var o=this._editor||this._defaultEditor;i.$_showFocusCell=i.$_showFocusCell||e&&o&&e!==o._editor,i.container._setFocusAndScroll(o),this.editing||this._editor&&this._editor.selectAll()}},a.prototype.$_focusToContainer=function(){},a.prototype._getData=function(t){var e=t.dataColumn,i=t.item;if(e&&i&&i.isDataRow){var o=e.dataIndex;if(0<=o)return i.getData(o)}},a.prototype._setData=function(t,e){var i=t.item;if(i){var o=t.dataColumn.dataIndex;0<=o&&(this._grid.undoable?this._grid.execute(new n(t.item,o,e,t.column)):i.setData(o,e))}},a.prototype._isEditKey=function(t){return 8==t||46<=t&&t<=90||96<=t&&t<=111||186<=t&&t<=222||13==t&&this._grid.editOptions.enterToEdit},a);function a(t){var e=o.call(this)||this;return e._editIndex=new kt.CellIndex,e._editors=[],e._starting=!1,e._editRow=-1,e._needPrepare=!1,e._modified=!1,e._commiting=!1,e._canceling=!1,e._resetting=!1,e._dirty=!1,e._editable=!1,e._readOnly=!1,e.$_editFocused=!1,e._resetFocused=!1,e._grid=t,e._defaultEditor=t.delegate.getDefaultCellEditor(),e._defaultEditor&&e._defaultEditor.setController(e),e._defaultEditor&&e._internalHideEditor(e._defaultEditor),e}e.DefaultEditController=s});t(De);De.EditValueCommand,De.DefaultEditController;var Te=e(function(t,e){Object.defineProperty(e,"__esModule",{value:!0});var n,i=(n=qt.VisualObjectElement,oe.__extends(o,n),o.prototype._doDispose=function(){n.prototype._doDispose.call(this)},o.prototype.getCellIndex=function(t){return t.parentElement[lt.T_ROW]},o.prototype._prepareContent=function(t,e){var i=ne.getDoc(t).createElement("div");return this._prepareCellContent(i),i},o.prototype._clearCellContent=function(t){var e=t.firstElementChild;e&&ne.Utils.detach(e)},o.prototype._prepareCellContent=function(t){},o.prototype._updateCellContent=function(t,e,i){i[this._textProp]=e.text},o.prototype._doRender=function(t){},o.prototype.$_setCol=function(t){(this._colChanged=t!=this._col)&&(this._col=t)},o.prototype._layoutCell=function(t,e,i){if(this._colChanged){var o=i.firstElementChild;this._clearCellContent(o),this._prepareCellContent(o)}},o.prototype._getTableCell=function(t){return this.parent._tbody.children[t].children[this._col]},o.prototype.$_getCellSelector=function(t,e){var i=this.model.cellStyleCallback,o=this.grid,n=t.parentElement[lt.T_ROW],r=o.getItem(n),s=o.getCellType(t);if(i){var a=i(this.grid.handler,s,null==r?void 0:r.index);return a?" "+a:""}return""},o);function o(t,e,i){var o=n.call(this,t,e,i)||this;return o._col=-1,o._colChanged=!1,o}e.RowBarElement=i});t(Te);Te.RowBarElement;var ke=e(function(t,e){Object.defineProperty(e,"__esModule",{value:!0});var h,i=(h=Te.RowBarElement,oe.__extends(o,h),o.prototype._doDispose=function(){h.prototype._doDispose.call(this)},o.prototype.refresh=function(t,e){for(var i=0;i<e;i++){var o=this._getTableCell(i);o[lt.T_FOC]=t.isFocusedRow(o.parentElement[lt.T_ROW]),ne.Utils.setClassName(o,this.$_getCellSelector(o))}},o.prototype._getCssSelector=function(){return"rg-rowindicator"},o.prototype.measureWidth=function(t){var e=this.model,i=e.width;if(0==i&&t.dataSource){var o=t.dataSource.rowCount+"";i=t.container.measureText("rg-rowindicator-cell",o)+1}return i=Math.max(0<e.minWidth?e.minWidth:i,Math.min(0<e.maxWidth?e.maxWidth:i)),e._displayWidth=i},o.prototype._layoutCell=function(t,e,i){h.prototype._layoutCell.call(this,t,e,i);var o=this.model.getCell(e);ne.Utils.setClassName(i,this.$_getCellSelector(i)),this._updateCellContent(t,o,i.firstElementChild)},o.prototype.$_getCellSelector=function(t,e){var i=this.grid,o=t.parentElement[lt.T_ROW],n=t[lt.T_FOC],r=this.model,s="rg-rowindicator-cell";if(-99===o)return Ht.FixedOptions.ROW_BAR_CELL_STYLE;if(n){s+=r.showFocus?" rg-rowindicator-focus":"";var a=i.getItem(o);ne.Utils.isDebugging();var l=a.itemState;dt.ItemState_isInserting(l)?s+=" rg-rowindicator-inserting":l==dt.ItemState.UPDATING&&(s+=" rg-rowindicator-editing")}else i.isSelectedItem(o)&&r.showSelection&&(s+=" rg-rowindicator-select");return s+=h.prototype.$_getCellSelector.call(this,t,e)},o);function o(t,e){return h.call(this,t,e,"rowIndicatorView")||this}e.RowIndicatorElement=i});t(ke);ke.RowIndicatorElement;var Me=e(function(t,e){Object.defineProperty(e,"__esModule",{value:!0});var a,i=(a=Te.RowBarElement,oe.__extends(o,a),o.prototype.rowOf=function(t){return t.parentElement[lt.T_ROW]},o.prototype._getCssSelector=function(){return"rg-statebar"},o.prototype.measureWidth=function(t){return t.stateBar.width},o.prototype._layoutCell=function(t,e,i){a.prototype._layoutCell.call(this,t,e,i);var o=this.model,n=o.mark,r=n==Nt.StateMark.IMAGE;this._textMark=n==Nt.StateMark.TEXT;var s=o.getCell(e);ne.Utils.setClassName(i,this.$_getCellSelector(i,r)),this._updateCellContent(t,s,i.firstElementChild)},o.prototype._updateCellContent=function(t,e,i){i[ne.Utils.TextProp]=this._textMark&&e.text||""},o.prototype.$_getCellSelector=function(t,e){var i=this.grid,o=i.getItem(t.parentElement[lt.T_ROW]),n=o.dataRow,r="rg-statebar-cell ";if(i.isItemEditing(o)&&this._error&&this.model.errorVisible)switch(this._error.level){case lt.ValidationLevel.INFO:r+=" rg-statebar-info";case lt.ValidationLevel.WARNING:r+=" rg-statebar-warning";default:r+=" rg-statebar-error"}else if(0<=n&&e)switch(o.rowState){case I.RowState.UPDATED:r+=" rg-statebar-updated";break;case I.RowState.CREATED:r+=" rg-statebar-created";break;case I.RowState.DELETED:r+=" rg-statebar-deleted";break;case I.RowState.CREATE_AND_DELETED:r+=" rg-statebar-create-and-deleted"}return r+=a.prototype.$_getCellSelector.call(this,t,e)},o);function o(t,e){var i=a.call(this,t,e,"stateBarView")||this;return i._textMark=!1,i}e.StateBarElement=i});t(Me);Me.StateBarElement;var Le=e(function(t,e){Object.defineProperty(e,"__esModule",{value:!0});var i,o=(i=re.Base,oe.__extends(n,i),n.prototype.run=function(t,e,i,o,n,r,s){this._rs=t.provider;var a=this._ds=this._rs.dataSource;this._parent=t,this._field=e;var l=this._ds.getField(e);if(this._labelComparer=this._ds._comparers[e]||this._rs._labelComparer[e],this._labelComparer)this._comparer=this.$_userComparer;else switch(l.dataType){case lt.ValueType.NUMBER:case lt.ValueType.DATETIME:this._comparer=a.compareNumbers;break;case lt.ValueType.BOOLEAN:this._comparer=a.compareBools;break;case lt.ValueType.OBJECT:this._comparer=a.compareObjects;break;default:this._comparer=o?a.compareTexts:a.compareValues}this.$_sort(n,r,i,s)},n.prototype.$_sort=function(t,e,i,o){do{var n=this._parent,r=this._field,s=t,a=e,l=Math.floor((t+e)/2),h=n.getItem(l).dataRow,d=n.getItem(l).row;do{if(i==lt.SortDirection.ASCENDING){for(;s<=a&&(0==(u=this._comparer(this._field,d,n.getItem(s).row))&&o&&(u=h-n.getItem(s).dataRow),!(u<=0));)s++;for(;s<=a&&(0==(u=this._comparer(r,d,n.getItem(a).row))&&o&&(u=h-n.getItem(a).dataRow),!(0<=u));)a--}else{for(;s<=a&&(0==(u=this._comparer(r,d,n.getItem(s).row))&&o&&(u=h-n.getItem(s).dataRow),!(0<=u));)s++;for(;s<=a;){var u;if(0==(u=this._comparer(r,d,n.getItem(a).row))&&o&&(u=h-n.getItem(a).dataRow),u<=0)break;a--}}s<=a&&(s!=a&&n._exchangeItems(s,a),s++,a--)}while(s<=a);t<a&&this.$_sort(t,a,i,o),t=s}while(t<e)},n);function n(){var t=i.call(this)||this;return t.$_userComparer=function(t,e,i){if(this._labelComparer)return this._labelComparer(t,e._rowId,i.rowId)},t}e.TreeItemsSorter=o});t(Le);Le.TreeItemsSorter;var Fe=e(function(t,e){Object.defineProperty(e,"__esModule",{value:!0});var i,n=(i=gt.DataRowExpressionRuntime,oe.__extends(o,i),o);function o(){return i.call(this)||this}e.CheckableExpressionRuntime=n;var r,s=(r=_.DataTag,oe.__extends(a,r),a.clearCheckables=function(t){for(var e=t.itemCount;e--;)t.getItem(e)._setCheckable(!0)},a.prototype.connect=function(t){this._runtime.setDataSource(t)},a.prototype.disconnect=function(){},a.prototype.clearRows=function(){a.clearCheckables(this._owner)},a.prototype.setRows=function(){for(var t=this._owner._rows,e=t.length;e--;){var i=t[e];this.$_setCheckable(i)}},a.prototype.insertRow=function(t){var e=this._owner.getItemOfRow(t,!0);this.$_setCheckable(e)},a.prototype.insertRows=function(t,e){for(var i=0;i<e;i++){var o=this._owner.getItemOfRow(t+i,!0);o instanceof dt.GridItem&&this.$_setCheckable(o)}},a.prototype.updateRow=function(t){var e=this._owner.getItemOfRow(t,!0);this.$_setCheckable(e)},a.prototype.updateRows=function(t,e){for(var i=0;i<e;i++){var o=this._owner.getItemOfRow(t+i,!0);o instanceof dt.GridItem&&this.$_setCheckable(o)}},a.prototype.updateRowList=function(t){for(var e=0,i=t;e<i.length;e++){var o=i[e],n=this._owner.getItemOfRow(o,!0);n instanceof dt.GridItem&&this.$_setCheckable(n)}},a.prototype.changeStates=function(t){if(t)for(var e=t.length;e--;){var i=this._owner.getItemOfRow(t[e],!0);i instanceof dt.GridItem&&this.$_setCheckable(i)}},a.prototype.$_setCheckable=function(t){var e,i=this._callback;e=i?i.call(this,t.dataSource.handler,t):(this._runtime.setItem(t),this._exprNode.evaluate(this._runtime)),t._setCheckable(e)},a);function a(t,e,i){var o=r.call(this)||this;return o._runtime=new n,o._owner=t,o._exprNode=H.ExpressionParser.Default.parse(e,["value","values"]),o._runtime=new n,o._callback=i,o}var l,h=(l=st.ItemProvider,oe.__extends(d,l),d.prototype._doDispose=function(){function t(t){for(var e=0,i=t.length;e<i;e++)t[e]&&t[e].dispose();t.length=0}this.dataSource=null,t(this._rows),t(this._filteredItems),t(this._pageItems),t(this._sortedItems),t(this._pubItems),t(this._items),t(this._distinctRows),this._filterRuntime&&this._filterRuntime.dispose(),this._filterRuntime=null,this._sortFields.length=0,this._labelComparer=null,this._summaryMap=null,this._checkableTag=null,l.prototype._doDispose.call(this)},d.prototype.getCommandStates=function(t){return this._rows[t]._getExtents()},d.prototype.setCommandStates=function(t,e){this._rows[t]._setExtents(e)},_dp(d,"isFilterOr",{get:function(){return this._filterOr},set:function(t){t!=this._filterOr&&(this._filterOr=t,this.$_buildItems(),this._fireRefresh())}}),_dp(d,"isFiltered",{get:function(){return this._filtered}}),_dp(d,"isSorted",{get:function(){return this._sorted}}),_dp(d,"isPaging",{get:function(){return this._paging}}),_dp(d,"pageStartIndex",{get:function(){return this._pageStart}}),_dp(d,"sorter",{get:function(){return this._sorter||this._defSorter},set:function(t){this._sorter=t}}),_dp(d,"summaryMode",{get:function(){return this._summaryMode},set:function(t){t!=this._summaryMode&&(this._summaryMode=t,this.$_resetSummary(),this.$_buildItems(),this._fireRefresh())}}),_dp(d,"sortMode",{get:function(){return this._sortMode},set:function(t){this._sortMode=t}}),_dp(d,"filterMode",{get:function(){return this._filterMode},set:function(t){this._filterMode=t}}),_dp(d,"checkableExpression",{get:function(){return this._checkableExpression},set:function(t){t!=this._checkableExpression&&(this._checkableExpression=t,this._checkableTag&&(this._checkableTag.disconnect(),this._checkableTag=null),t&&(this._checkableTag=new s(this,t),this._dataSource&&this._checkableTag.connect(this._dataSource)))}}),_dp(d,"checkableCallback",{set:function(t){this._checkableTag&&(this._checkableTag.disconnect(),this._checkableTag=null),t&&(this._checkableTag=new s(this,null,t),this._dataSource&&this._checkableTag.connect(this._dataSource))}}),_dp(d,"labelComparer",{get:function(){return this._labelComparer},set:function(t){this._labelComparer=t||{}}}),d.prototype.getFieldDomain=function(t){for(var e=this._rows.length,i=[],o=void 0,n=0;n<e;n++){var r=this._dataSource.getValue(n,t);r!=o&&i.indexOf(r)<0&&i.push(r),o=r}return i},d.prototype.beginFilter=function(){this._filterLock++},d.prototype.endFilter=function(t,e,i){void 0===t&&(t=!0),void 0===e&&(e=null),void 0===i&&(i=null),0<this._filterLock&&(this._filterLock=Math.max(0,this._filterLock-1),0==this._filterLock&&t&&this.applyFilters(!0,e,i))},d.prototype.hasFilter=function(t){var e=this._filters[t];return e&&0<e.length},d.prototype.addFilter=function(t,e){var i=e&&e.criteria;if(0<=t){this._fireFilterAdded(t,i);var o=this._filters[t];if(o||(o=[],this._filters[t]=o),e.criteria){var n=new pt.ColumnFilterRun(e);return o.push(n),this.applyFilters(),n}}},d.prototype.removeFilter=function(t,e){if(this._filtered&&this._filters[t]){this._fireFilterRemoved(t,e.model);var i=this._filters[t],o=i.indexOf(e);0<=o&&(i.splice(o,1),this.applyFilters())}},d.prototype.clearFilters=function(t){if(this._filtered&&this._filters[t]){this._fireFilterCleared(t);var e=this._filters[t];0<e.length&&(e.length=0,delete this._filters[t],this.applyFilters())}},d.prototype.clearAllFilters=function(){this._filtered&&(this._fireFilterAllCleared(),this._filters=[],this.applyFilters())},d.prototype.hasFilters=function(){for(var t=this._filters.length,e=0;e<t;e++){var i=this._filters[e];if(i&&0<i.length)return!0}return!1},d.prototype.applyFilters=function(t,e,i){if(void 0===t&&(t=!0),void 0===e&&(e=null),void 0===i&&(i=null),!(0<this._filterLock)){this.$_buildItems();try{t&&this._fireRefresh()}finally{this._fireFiltered(e,i)}}},d.prototype.orderBy=function(t,e,i,o){void 0===t&&(t=null),void 0===e&&(e=null),void 0===i&&(i=null),void 0===o&&(o=!0),this._fireSort(t,e,i),this._sortFields=[],this._sortDirections=[],this._sortCases=[];for(var n=t?t.length:0,r=e?e.length:0,s=i?i.length:0,a=0;a<r;a++)e[a]=e[a]==lt.SortDirection.ASCENDING||e[a]==lt.SortDirection.DESCENDING?e[a]:lt.SortDirection.ASCENDING;for(a=0;a<n;a++)this._sortFields.push(t[a]),a<r?this._sortDirections.push(e[a]):0<r?this._sortDirections.push(e[r-1]):this._sortDirections.push(lt.SortDirection.ASCENDING),a<s?this._sortCases.push(i[a]):0<s?this._sortCases.push(i[s-1]):this._sortCases.push(lt.SortCase.SENSITIVE);this._sorted=this.$_checkSorted(),this.$_buildItems();try{o&&this._fireRefresh()}finally{this._fireSorted()}},d.prototype.getSortFields=function(){return this._sortFields.slice()},d.prototype.getSortDirections=function(){return this._sortDirections.slice()},d.prototype.getSortCases=function(){return this._sortCases.concat()},d.prototype.setPaging=function(t,e,i,o){void 0===e&&(e=10),void 0===i&&(i=-1),void 0===o&&(o=null),e=Math.max(e,1),i=Math.max(i,-1),t==this._paging&&e==this._pageSize&&i==this._pageCount&&o==this._pagingSource||(this._currPage=0,this._paging=t,this._pagingSource=o,this._pageSize=e,this._pageCount=i,this.$_buildItems(),this._fireRefresh())},_dp(d,"page",{get:function(){return this._paging?this._currPage:-1}}),d.prototype.setPage=function(t,e){void 0===t&&(t=0),void 0===e&&(e=-1),this._paging&&(t=Math.max(0,Math.min(this.pageCount-1,t)),e=Math.max(-1,e),t==this._currPage&&e==this._pageStartIndex||(this._currPage=t,this._pageStartIndex=e,this.$_buildPage(),this._fireRefresh()))},_dp(d,"pageCount",{get:function(){return this._paging?0<=this._pageCount?this._pageCount:Math.floor((this._dataSource.rowCount+this._pageSize-1)/this._pageSize):0},set:function(t){this._paging&&(t=Math.max(-1,t))!=this._pageCount&&(this._pageCount=t,this.$_buildPage(),this._fireRefresh())}}),d.prototype.getCheckedRows=function(t){for(var e=t?this._dataSource.rowCount:this.itemCount,i=[],o=0;o<e;o++){var n=t?this._rows[o]:this._pubItems[o];n.checked&&i.push(n.dataRow)}return i},d.prototype.resetCheckables=function(){for(var t=this._rows.length;t--;)this._rows[t]._setCheckable(!0);this._fireRefresh()},d.prototype.applyCheckables=function(){this._checkableTag?this._checkableTag.setRows():s.clearCheckables(this),this._fireRefresh()},d.prototype.setCheckFieldIndex=function(t){this._checkFieldIndex=t},d.prototype.getItemChecked=function(t,e){return-1<this._checkFieldIndex?t.getData(this._checkFieldIndex):e},d.prototype.setItemChecked=function(t,e){var i=this._checkFieldIndex;return-1<i&&(!!t.getData(i)!=e&&t.setData(i,e),!0)},_dp(d,"dataSource",{get:function(){return this._dataSource},set:function(t){t!==this._dataSource&&(this.$_clearRows(!0),this._dataSource&&(this._checkableTag&&this._checkableTag.disconnect(),this._dataSource.removeListener(this),this._dataSource.unregisterCommandListener(this)),this._dataSource=t,this._dataSource&&(this._checkableTag&&this._checkableTag.connect(this._dataSource),this.$_buildRows(),this._dataSource.addListener(this),this._dataSource.registerCommandListener(this)),this.disposing||(this.$_resetSummary(),this._fireReset()))}}),_dp(d,"itemCount",{get:function(){return this._pubCount}}),_dp(d,"rowCount",{get:function(){return this._pubCount}}),_dp(d,"fixedCount",{get:function(){return this._fixedCount}}),_dp(d,"maxItemCount",{get:function(){return this._maxItemCount},set:function(t){(t=Math.max(0,t))!=this._maxItemCount&&(this._maxItemCount=t,this._refreshItems())}}),_dp(d,"sorted",{get:function(){return this._sorted}}),_dp(d,"movable",{get:function(){return!this.sorted}}),d.prototype._hideDeletedChanged=function(){this.$_buildItems(),this._fireRefresh()},d.prototype.getItem=function(t){return t<0||t>=this._pubCount?null:this._pubItems[t]},d.prototype.getItems=function(t,e){return this._pubItems.slice(t,t+e)},d.prototype.getIndexOfRow=function(t){if(0<=t&&t<this._rows.length){var e=this._rows[t];return e&&0<=this._pubItems.indexOf(e)?e.index:-1}return-1},d.prototype.getItemOfRow=function(t,e){if(void 0===e&&(e=!1),0<=t&&t<this._rows.length){var i=this._rows[t];return 0<=i.index||e?i:null}return null},d.prototype._refreshItems=function(){var t={};this.$_saveExtents(t),this.$_clearRows(!1),this.$_buildRows(t),this._fireRefresh()},d.prototype.setFixed=function(t,e,i){(t=Math.max(0,t))==this._fixedCount&&e==this._fixedSorting&&i==this._filtering||(this._fixedCount=t,this._fixedSorting=e,this._fixedFiltering=i,this.$_buildItems(),this._fireRefresh())},d.prototype.exchange=function(t,e){if(t!=e&&!this._sorted&&!this._filtered){if(t<0||t>=this._rows.length)throw new Error("index1 is out of bounds: "+t);if(e<0||e>=this._rows.length)throw new Error("index2 is out of bounds: "+t);var i=this._rows[t];this._rows[t]=this._rows[e],this._rows[e]=i}},d.prototype.clearDisplayLevels=function(){for(var t=this._rows,e=t.length,i=0;i<e;i++)t[i]._displayLevel=-1},d.prototype.getAllItems=function(){return this._pubItems.slice()},d.prototype.getNumber=function(t){var e=this.$_getSummary(t);return e?e.count:this.itemCount},d.prototype.getSum=function(t){var e=this.$_getSummary(t);return e?e.sum:NaN},d.prototype.getMax=function(t){var e=this.$_getSummary(t);return e?e.max:NaN},d.prototype.getMin=function(t){var e=this.$_getSummary(t);return e?e.min:NaN},d.prototype.getAvg=function(t){var e=this.$_getSummary(t);return e?e.avg:NaN},d.prototype.getVar=function(t){var e=this.$_getSummary(t);return e?e.vars:NaN},d.prototype.getVarp=function(t){var e=this.$_getSummary(t);return e?e.varsp:NaN},d.prototype.getStdev=function(t){var e=this.$_getSummary(t);return e?Math.sqrt(e.vars):NaN},d.prototype.getStdevp=function(t){var e=this.$_getSummary(t);return e?Math.sqrt(e.varsp):NaN},d.prototype.getDataCount=function(t){var e=this.$_getSummary(t);return e?e.dataCount:0},d.prototype.getDataAvg=function(t){var e=this.$_getSummary(t);return e?e.dataAvg:NaN},d.prototype.$_saveExtents=function(t){for(var e=0,i=this._rows.length;e<i;e++){var o=this._rows[e];0<=o.dataRowId&&(t[o.dataRowId]=o._extents)}},d.prototype.$_clearRows=function(t){t&&this.clearRowHeights(!0),this._rows.length=0,this._filteredItems.length=0,this._filtered=!1,this._sorted=!1,this._sortedItems.length=0,this._pubItems=this._rows,this.$_clearDistincts()},d.prototype.$_clearIndicies=function(){for(var t=this._rows.length;t--;)this._rows[t]._index=-1},d.prototype.$_clearDistincts=function(){for(var t=this._distinctRows.length;t--;)this._distinctRows[t]=null;this._distinctRows.length=0},d.prototype.$_buildRows=function(t){void 0===t&&(t=null);var e=this._dataSource;if(e){this._filtered=this.$_checkFiltered(),this._sorted=this.$_checkSorted(),this._rowCount=e.rowCount,!this._filtered&&!this._paging&&0<this.maxItemCount&&(this._rowCount=Math.min(this._rowCount,this.maxItemCount)),this._rows=new Array(this._rowCount);for(var i=0,o=this._rowCount;i<o;i++){var n=this._rows[i]=this.$_createRow(i);t&&t.hasOwnProperty(n.dataId)&&(n._extents=t[n.dataId])}this.$_buildItems(),this._checkableTag&&this._checkableTag.setRows(),0==this._rowCount&&this.clearRowHeights(!0)}},d.prototype.$_resetCounts=function(){this._filtered?this._pubCount=this._itemCount=this._items.length:this._pubCount=this._itemCount=this._rowCount=this._rows.length},d.prototype.$_buildItems=function(t,e){void 0===t&&(t=!1),void 0===e&&(e=!1);var i=0<this.maxItemCount?this.maxItemCount:this._rows.length,o=this._dataSource.hiddenCount;if(this._rowCount=this._rows.length,this._pubItems=this._items=this._rows,this._pubCount=this._itemCount=this._rows.length,this._filtered=this.$_checkFiltered(),this._sorted=this.$_checkSorted(),(this._filtered||this._paging)&&this.$_clearIndicies(),this._filtered){if(this._filteredItems.length=0,this.hideDeleted||0<o)for(var n=0;n<this._rowCount;n++){var r=this._rows[n],s=this._dataSource.getRowState(this._rows[n].dataRow),a=this._dataSource.isHiddenRow(this._rows[n].dataRow);this.hideDeleted&&I.isDeletedState(s)||a?r._index=-1:r._index=0}else for(n=0;n<this._rowCount;n++)this._rows[n]._index=0;var l=this.fixedCount,h=0<l&&!this._fixedFiltering,d=this._rows.length;if(!t){n=0;for(var u=this._filters.length;n<u;n++)if(m=this._filters[n])for(var _=0;_<m.length;_++)m[_].prepare(this._filterRuntime,this._dataSource)}this._paging||(d=Math.min(d,i));var c=0;for(n=0;n<this._rowCount&&c<d;n++)if(0<=(r=this._rows[n]).index)if(t||h&&c<l)this._filteredItems.push(r),c++;else{var p=!this._filterOr,f=0,g=0;for(u=this._filters.length;g<u;g++){var m;if((m=this._filters[g])&&f++,this._filterOr){if(m&&this.$_select(m,r,g)){p=!0;break}}else if(m&&!this.$_select(m,r,g)){p=!1;break}}p||0===f?(this._filteredItems.push(r),c++):r._index=-1}this._pubItems=this._items=this._filteredItems,this._pubCount=this._itemCount=this._items.length}else this._filteredItems.length=0;if(this._sorted){if(e){var y=this._sortedItems;for(n=y.length;n--;)y[n].index<0&&y.splice(n,1)}else this.$_sortRows();this._pubItems=this._sortedItems}else this._sortedItems.length=0;this._paging&&this.$_buildPageItems(),this.$_clearSummary(),this._resetItemIndicies(0)},d.prototype.$_buildPageItems=function(){var t=this._sorted?this._sortedItems:this._filtered?this._filteredItems:this._items;this._pageItems.length=0;for(var e=this._pageStart=0<=this._pageStartIndex?this._pageStartIndex:this._currPage*this._pageSize,i=t.length,o=0<this.maxItemCount?this.maxItemCount:i,n=Math.min(this._pageSize,o);e<i&&0<n;e++,n--)this._pageItems.push(t[e]);this._pubItems=this._pageItems,this._pubCount=this._pubItems.length},d.prototype.$_buildPage=function(){this.$_clearIndicies(),this.$_buildPageItems(),this._resetItemIndicies(0)},d.prototype.$_compareFuncs=function(t,e){for(var i={},o=this._dataSource,n=0,r=t.length;n<r;n++){var s=o.getField(t[n]);if(s){var a=o.getDataComparer(s.index)?o.getDataComparer(s.index):this._labelComparer[s.index],l=e[n]==lt.SortCase.INSENSITIVE;if(!a)switch(s.dataType){case lt.ValueType.DATETIME:case lt.ValueType.NUMBER:a=o.compareNumbers.bind(o);break;case lt.ValueType.BOOLEAN:a=o.compareBools.bind(o);break;case lt.ValueType.OBJECT:a=o.compareObjects.bind(o);break;default:a=l?o.compareTexts.bind(o):o.compareValues.bind(o)}a&&(i[t[n]]=a)}}return i},d.prototype.$_sortRows=function(t){void 0===t&&(t=null);var e=t||this._items.slice(),i=[];0<this._fixedCount&&!this._fixedSorting&&(i=e.splice(0,this._fixedCount));var l=this.$_compareFuncs(this._sortFields,this._sortCases);e.sort(function(t,e){for(var i,o,n,r=0,s=0,a=this._sortFields.length;s<a&&(o=this._sortDirections[s],n=this._sortFields.length==s+1,!(i=l[this._sortFields[s]])||0===(r=i(this._sortFields[s],t.dataRow,e.dataRow)));s++);return r=0==(r*=o===lt.SortDirection.DESCENDING?-1:1)&&n?o===lt.SortDirection.DESCENDING?e.dataRow-t.dataRow:t.dataRow-e.dataRow:r}.bind(this)),this._sortedItems=i.concat(e)},d.prototype.$_createRow=function(t){var e=new dt.GridRow(t);return this.attachItem(e),e._dataRowId=e.dataId,e},d.prototype.$_createAllRow=function(){for(var t=0;t<this._rowCount;t++)this._rows[t]||(this._rows[t]=this.$_createRow(t))},d.prototype.$_resetSummary=function(){this._summaryMap=[]},d.prototype.$_clearSummary=function(){if(this._summaryMap)for(var t=this._summaryMap.length-1;0<=t;t--)this._summaryMap[t]&&this._summaryMap[t].clear()},d.prototype.$_getSummary=function(t){var e=this._summaryMap[t];if(!e){var i=this._dataSource;i&&i.canSummarize(t)&&(e=new rt.FieldSummary(t),this._summaryMap[t]=e)}return e&&0==e.count&&0<this.itemCount&&this.$_summarize(e),e},d.prototype.$_summarize=function(t){var e=this._dataSource;if(e)if(this._filtered){for(var i=this._items.length,o=new Array(i),n=0;n<i;n++)o[n]=this._pubItems[n].dataRow;e.summarizeRange(t,o,this._summaryMode==lt.SummaryMode.STATISTICAL)}else e.summarize(t,this._summaryMode==lt.SummaryMode.STATISTICAL)},d.prototype.$_needSort=function(){return this._sorted&&this._sortMode==lt.SortMode.AUTO},d.prototype.$_needFilter=function(){return this._filtered&&this._filterMode==lt.FilterMode.AUTO},d.prototype.$_checkFiltered=function(){if(this._dataSource)return this._filters.length=this._dataSource.fieldCount,this.hasFilters()||this.hideDeleted&&0<this._dataSource.deletedCount||0<this._dataSource.hiddenCount},d.prototype.$_select=function(t,e,i){for(var o=0,n=t.length;o<n;o++)if(t[o].select(this._filterRuntime,e.parent,e,i))return!0},d.prototype.$_checkSorted=function(){for(var t=this._sortFields.length-1;0<=t;t--)this._sortFields[t]>this._dataSource.fieldCount&&(this._sortFields.splice(t,1),this._sortDirections.splice(t,1),this._sortCases.splice(t,1));return this._sortFields&&0<this._sortFields.length},d.prototype.onDataSourceCommandStackChanged=function(t,e,i){this._fireCommandStackChanged(e,i)},d.prototype.onDataProviderDisposed=function(t){this._checkableTag&&this._checkableTag.disconnect(),this.$_clearRows(!0),this.$_resetSummary(),this._fireReset(),this.dataSource=null},d.prototype.onDataProviderReset=function(t){this.$_clearRows(!0),this.$_buildRows(),this.$_resetSummary(),this._fireReset()},d.prototype.onDataProviderRefresh=function(t){this._refreshItems()},d.prototype.onDataProviderRefreshClient=function(t){this._fireRefreshClient()},d.prototype.onDataProviderRowCountChanged=function(t,e){this._fireRefreshClient()},d.prototype.onDataProviderRowInserting=function(t,e,i){return!0},d.prototype.onDataProviderRowInserted=function(t,e,i){var o=this._rows,n=e<o.length?o[e]:null,r=this.$_createRow(e);o.splice(e,0,r);for(var s=e,a=o.length;s<a;s++)o[s]._dataRow=s;if(this.$_needFilter()||this.$_needSort()||this._paging)this.$_buildItems();else{if(this._filtered){var l=this._filteredItems;e=null!=i?i:Math.max(0,n?l.indexOf(n):l.length),l.splice(e,0,r)}this._sorted&&(l=this._sortedItems,e=null!=i?i:Math.max(0,n?l.indexOf(n):l.length),l.splice(e,0,r)),this.$_clearSummary(),this.$_resetCounts(),this._resetItemIndicies(this._sorted?0:e)}this._checkableTag&&this._checkableTag.insertRow(e),this._fireItemInserted(r)},d.prototype.onDataProviderRowsInserted=function(t,e,i,o){if(!(i<0)){for(var n,r=this._rows,s=e<r.length?r[e]:null,a=[],l=0;l<i;l++)a.push(n=this.$_createRow(e+l)),r.splice(e+l,0,n);var h=r.length;for(l=e;l<h;l++)r[l]._dataRow=l;if(this.$_needFilter()||this.$_needSort()||this._paging)this.$_buildItems();else{if(this._filtered){var d=this._filteredItems;for(e=null!=o?o:Math.max(0,s?d.indexOf(s):d.length),l=0;l<a.length;l++)d.splice(e+l,0,a[l])}if(this._sorted)for(d=this._sortedItems,e=null!=o?o:Math.max(0,s?d.indexOf(s):d.length),l=0;l<a.length;l++)d.splice(e+l,0,a[l]);this.$_clearSummary(),this.$_resetCounts(),this._resetItemIndicies(e)}this._checkableTag&&this._checkableTag.insertRows(e,i),this._fireRefresh()}},d.prototype.onDataProviderRowRemoving=function(t,e){return!0},d.prototype.$_silentRemoveRow=function(t){var e,i;this._filtered&&0<=(i=(e=this._filteredItems).indexOf(t))&&e.splice(i,1),this._sorted&&0<=(i=(e=this._sortedItems).indexOf(t))&&e.splice(i,1),this.$_clearSummary(),this.$_resetCounts(),this._resetItemIndicies(0)},d.prototype.onDataProviderRowRemoved=function(t,e){var i=this._rows,o=i[e];i.splice(e,1);for(var n=i.length-1;e<=n;n--)i[n]._dataRow=n;this.$_needFilter()||this.$_needSort()||this._paging?this.$_buildItems():this.$_silentRemoveRow(o),0==i.length&&this.clearRowHeights(!0),this._fireItemDeleted(o)},d.prototype.onDataProviderRowsRemoving=function(t,e){return!0},d.prototype.$_silentRemoveRows=function(t){if(this._filtered)for(var e=this._filteredItems,i=0;i<t.length;i++){var o=t[i];0<=(n=e.indexOf(o))&&e.splice(n,1)}if(this._sorted)for(e=this._sortedItems,i=0;i<t.length;i++){var n;o=t[i],0<=(n=e.indexOf(o))&&e.splice(n,1)}this.$_clearSummary(),this.$_resetCounts(),this._resetItemIndicies(0)},d.prototype.onDataProviderRowsRemoved=function(t,e){if(e&&!(e.length<1)){1<e.length&&e.sort(function(t,e){return t-e});for(var i=this._rows,o=e[0],n=[],r=e.length-1;0<=r;r--)n.push(i[e[r]]),i.splice(e[r],1);for(r=this._rows.length-1;o<=r;r--)i[r]._dataRow=r;this.$_needFilter()||this.$_needSort()||this._paging?this.$_buildItems():this.$_silentRemoveRows(n),0==e.length&&this.clearRowHeights(!0),this._fireRefresh()}},d.prototype.onDataProviderRowUpdating=function(t,e,i){return!0},d.prototype.onDataProviderRowUpdated=function(t,e){this.$_needFilter()||this.$_needSort()||this._paging?this.$_buildItems():this.$_clearSummary(),this._checkableTag&&this._checkableTag.updateRow(e),this._rows[e]&&this._fireItemUpdated(this._rows[e])},d.prototype.onDataProviderRowsUpdated=function(t,e,i){this.$_needFilter()||this.$_needSort()||this._paging?this.$_buildItems():this.$_clearSummary(),this._checkableTag&&this._checkableTag.updateRows(e,i),this._fireRefresh()},d.prototype.onDataProviderRowListUpdated=function(t,e){this.$_needFilter()||this.$_needSort()||this._paging?this.$_buildItems():this.$_clearSummary(),this._checkableTag&&this._checkableTag.updateRowList(e),this._fireRefresh()},d.prototype.onDataProviderValueChanging=function(t,e,i,o){return!0},d.prototype.onDataProviderValueChanged=function(t,e,i){this.$_needFilter()||this.$_needSort()||this._paging?this.$_buildItems():this.$_clearSummary(),this._checkableTag&&this._checkableTag.updateRow(e),this._rows[e]&&this._fireItemUpdated(this._rows[e])},d.prototype.onDataProviderRowMoving=function(t,e,i){return!0},d.prototype.onDataProviderRowMoved=function(t,e,i){for(var o=this._rows,n=o.length,r=e=Math.min(e,i);r<n;r++)o[r]._dataRow=r;(this._sorted||this._paging||this.hideDeleted)&&(this.$_buildItems(),this._resetItemIndicies(0)),this._fireRefresh()},d.prototype.onDataProviderRowsMoving=function(t,e,i,o){return!0},d.prototype.onDataProviderRowsMoved=function(t,e,i,o){this._refreshItems()},d.prototype.onDataProviderRowListMoving=function(t,e,i){return!0},d.prototype.onDataProviderRowListMoved=function(t,e,i){this._refreshItems()},d.prototype.onDataProviderStateChanged=function(t,e){if(this.hideDeleted){var i=this._rows[e];I.isDeletedState(i.rowState)&&(this.$_needFilter()||this.$_needSort()||this._paging?this.$_buildItems():this.$_checkFiltered()&&(!this._filteredItems||this._filteredItems.length<=0)||this.isSorted&&(!this._sortedItems||this._sortedItems.length<=0)?this.$_buildItems(!0,!0):this.$_silentRemoveRow(i),this._fireRefresh())}this._checkableTag&&this._checkableTag.updateRow(e),this._fireRowStateChanged(this._rows[e])},d.prototype.onDataProviderRowHided=function(t,e,i){if(this._filtered=this.$_checkFiltered(),i){if(this.$_needFilter()||this.$_needSort()||this._paging)this.$_buildItems();else if(this.$_checkFiltered()&&(!this._filteredItems||this._filteredItems.length<=0)||this.isSorted&&(!this._sortedItems||this._sortedItems.length<=0))this.$_buildItems(!0,!0);else{var o=this.getItemsByRows(e);this.$_silentRemoveRows(o)}this._fireRefresh()}else this._refreshItems()},d.prototype.onDataProviderStatesChanged=function(t,e){if(this.hideDeleted){for(var i=!1,o=0,n=e.length;o<n;o++){var r=e[o],s=this._rows[r];if(I.isDeletedState(s.rowState)){i=!0;break}}if(i){if(this.$_needFilter()||this.$_needSort()||this._paging)this.$_buildItems();else if(this.$_checkFiltered()&&(!this._filteredItems||this._filteredItems.length<=0)||this.isSorted&&(!this._sortedItems||this._sortedItems.length<=0))this.$_buildItems(!0,!0);else{var a=this.getItemsByRows(e);this.$_silentRemoveRows(a)}this._fireRefresh()}}this._checkableTag&&this._checkableTag.changeStates(e),this._fireRowStatesChanged(this.getItemsByRows(e))},d.prototype.onDataProviderRestoreRows=function(t,e){this.$_needFilter()||this.$_needSort()||this._paging?this.$_buildItems():this.$_clearSummary(),this._checkableTag&&this._checkableTag.changeStates(e),this._fireRowStatesChanged(this.getItemsByRows(e)),this._fireRefresh()},d.prototype.onDataProviderStatesCleared=function(t){this._pubCount!=t.rowCount&&this._refreshItems(),this._fireRowStatesCleared()},d);function d(t){var e=l.call(this,t)||this;return e._sortMode=lt.SortMode.AUTO,e._filterMode=lt.FilterMode.AUTO,e._filterOr=!1,e._checkableExpression=null,e._rows=[],e._filteredItems=[],e._pageItems=[],e._sortedItems=[],e._pubItems=e._rows,e._items=e._rows,e._distinctRows=[],e._rowCount=0,e._fixedCount=0,e._fixedSorting=!1,e._maxItemCount=0,e._itemCount=0,e._pubCount=0,e._filtered=!1,e._filtering=!1,e._filters=[],e._filterRuntime=new pt.ColumnFilterRuntime,e._filterLock=0,e._fixedFiltering=!1,e._sorted=!1,e._sortFields=[],e._sortDirections=[],e._sortCases=[],e._labelComparer={},e._sorter=null,e._defSorter=null,e._paging=!1,e._pagingSource=lt.PagingSource.ROWS,e._pageSize=10,e._pageCount=-1,e._pageStartIndex=-1,e._currPage=0,e._pageStart=0,e._summaryMode=lt.SummaryMode.AGGREGATE,e._summaryMap=null,e._checkableTag=null,e._checkFieldIndex=-1,e}e.DefaultItemProvider=h});t(Fe);Fe.CheckableExpressionRuntime,Fe.DefaultItemProvider;var Ve=e(function(t,e){Object.defineProperty(e,"__esModule",{value:!0});var n,i=(n=re.Base,oe.__extends(o,n),o.clearCheckables=function(t){for(var o=function(t){if(t){t.setCheckable(!0);for(var e=t.count;e--;){var i=t.getItem(e);i instanceof _&&o(i)}}},e=t.itemCount;e--;){var i=t.getItem(e);i instanceof _&&o(i)}},o.prototype.connect=function(t){this._runtime.setDataSource(t)},o.prototype.disconnect=function(){},o.prototype.clearRows=function(){o.clearCheckables(this._owner)},o.prototype.setRows=function(){for(var t=this._owner.itemCount;t--;){var e=this._owner.getItem(t);e instanceof _&&this.$_setCheckable(e,!0)}},o.prototype.addRow=function(t,e){void 0===e&&(e=!0);var i=this._owner.getItemOfRow(t.rowId);i instanceof _&&this.$_setCheckable(i,e)},o.prototype.addRows=function(t){for(var e=t.length;e--;){var i=this._owner.getItemOfRow(t[e].rowId);i instanceof _&&this.$_setCheckable(i,!0)}},o.prototype.updateRow=function(t){var e=this._owner.getItemOfRow(t.rowId);e instanceof _&&this.$_setCheckable(e,!1)},o.prototype.updateRows=function(t){for(var e=0,i=t;e<i.length;e++){var o=i[e],n=this._owner.getItemOfRow(o.rowId);n instanceof _&&this.$_setCheckable(n,!1)}},o.prototype.changeStates=function(t){for(var e=t.length;e--;){var i=this._owner.getItemOfRow(t[e].rowId);i instanceof _&&this.$_setCheckable(i,!1)}},o.prototype.$_setCheckable=function(t,e){if(t){var i=this._callback,o=void 0;if(o=i?i.call(this,t.dataSource.handler,t):(this._runtime.setItem(t),this._exprNode.evaluate(this._runtime)),t.setCheckable(o),e)for(var n=t.count;n--;){var r=t.getItem(n);r instanceof _&&this.$_setCheckable(r,!0)}}},o);function o(t,e,i){var o=n.call(this)||this;return o._owner=t,o._exprNode=H.ExpressionParser.Default.parse(e,["value","values"]),o._runtime=new Fe.CheckableExpressionRuntime,o._callback=i,o}var r,s=(r=re.Base,oe.__extends(a,r),a.prototype.connect=function(t){this._extents={}},a.prototype.disconnect=function(){this._extents={}},a.prototype.clearRows=function(){this._extents={}},a.prototype.setRows=function(){},a.prototype.addRow=function(t){this._extents[t.rowId]=0;for(var e=t.count-1;0<=e;e--)this.addRow(t.getChild(e))},a.prototype.addRows=function(t){for(var e=0,i=t;e<i.length;e++){var o=i[e];this.addRow(o)}},a.prototype.removeRow=function(t){delete this._extents[t.rowId];for(var e=t.count-1;0<=e;e--)this.removeRow(t.getChild(e))},a.prototype.removeRows=function(t){for(var e=0,i=t;e<i.length;e++){var o=i[e];this.removeRow(o)}},a.prototype.updateRow=function(t){},a.prototype.updateRows=function(t){},a.prototype.getExtents=function(t){var e=this._extents[t.rowId];return void 0===e?this._extents[t.rowId]=0:e},a.prototype.setExtents=function(t,e){this._extents[t.rowId]=e},a);function a(){var t=null!==r&&r.apply(this,arguments)||this;return t._extents={},t}var l,h=(l=dt.GridItem,oe.__extends(d,l),d.prototype._getExtents=function(){return this._extents},d.prototype._setExtents=function(t){this._extents=t},_dp(d,"isLeaf",{get:function(){return!0}}),d);function d(){var t=l.call(this)||this;return t._extents=0,t}e.TreeItemFooter=h;var u,_=(u=dt.GroupItem,oe.__extends(c,u),c.getTemp=function(t){return c.$_tempItem._dataRow=t,c.$_tempItem},c.prototype.dispose=function(){this._dataRow=null,u.prototype.dispose.call(this)},_dp(c,"iconHeight",{get:function(){return this._iconHeight},set:function(t){this._iconHeight=t}}),_dp(c,"row",{get:function(){return this._dataRow}}),_dp(c,"rowId",{get:function(){return this._dataRow?this._dataRow.rowId:-1}}),_dp(c,"iconIndex",{get:function(){return this._dataRow?this._dataRow.iconIndex:-1}}),_dp(c,"hasChildren",{get:function(){return 0<this.count||this._dataRow&&this._dataRow.hasChildren}}),_dp(c,"rootItem",{get:function(){for(var t=this;1<t.level;)t=t.parent;return t}}),_dp(c,"summaryMode",{get:function(){return lt.SummaryMode.AGGREGATE}}),c.prototype._getExtents=function(){var t=this.provider;return t?t._extents.getExtents(this):0},c.prototype._setExtents=function(t){var e;null!==(e=this.provider)&&void 0!==e&&e._extents.setExtents(this,t)},_dp(c,"isData",{get:function(){return!0}}),_dp(c,"isDataRow",{get:function(){return!0}}),_dp(c,"footer",{get:function(){return this._footer}}),_dp(c,"footerCount",{get:function(){return this._footer?1:0}}),_dp(c,"dataRow",{get:function(){return this._dataRow?this._dataRow.rowId:-1}}),c.prototype.getShadowRow=function(){return this._dataRow?this._dataRow.rowId:-1},_dp(c,"dataId",{get:function(){return this._dataRow?this._dataRow.rowId:-1}}),_dp(c,"descendantCount",{get:function(){return this._dataRow.descendantCount}}),_dp(c,"rowState",{get:function(){return this._dataRow.rowState}}),_dp(c,"isLeaf",{get:function(){return 0==this.count}}),_dp(c,"resizable",{get:function(){return!0}}),c.prototype.getFooter=function(t){return this._footer},c.prototype.isFooter=function(t){return t===this._footer},c.prototype.canEdit=function(){return!0},c.prototype.createFooter=function(){this._footer||(this._footer=new h)},c.prototype.setExpanded=function(t,e,i){t==this.expanded&&!i||(t?this.provider.expand(this,e,i,0):this.provider.collapse(this,e,i))},c.prototype.getData=function(t){return this._dataRow.getValue(t)},c.prototype.setData=function(t,e){this._dataRow.setValue(t,e,!1)},c.prototype.setItem=function(t,e){u.prototype.setItem.call(this,t,e),e._addChildren(t.children),t.clear()},c.prototype.exchange=function(t,e){this._exchangeItems(t,e)},c.prototype.moveChild=function(t,e){var i=t+e,o=this._children,n=o[t];if(e<0)for(var r=t;i<r;r--)o[r]=o[r-1];else for(r=t;r<i;r++)o[r]=o[r+1];o[i]=n},c.prototype.moveChildren=function(t,e,i){for(var o=this._children,n=o.splice(t,e),r=t+i,s=0;s<e;s++)o.splice(r+s,0,n[s])},c.prototype.changeParent=function(t,e){this.parent.remove(this),t&&t.insert(e,this)},c.prototype.getRowData=function(){return this._dataRow&&this._dataRow._values.concat()},c.$_tempItem=new c(null),c);function c(t){var e=u.call(this)||this;return e._iconHeight=0,e._dataRow=t,e}e.TreeItem=_;var p,f=(p=_,oe.__extends(g,p),_dp(g,"id",{get:function(){return-1}}),_dp(g,"provider",{get:function(){return this._rs}}),_dp(g,"level",{get:function(){return 0}}),_dp(g,"expanded",{get:function(){return!0}}),g.prototype.setExpanded=function(t,e,i){},_dp(g,"isLeaf",{get:function(){return!1}}),_dp(g,"visible",{get:function(){return!0}}),_dp(g,"dataSource",{get:function(){return this._rs.dataSource}}),g);function g(t){var e=p.call(this,null)||this;return e._rs=t,e}e.RootTreeItem=f;var m,y=(m=re.Base,oe.__extends(v,m),_dp(v,"provider",{get:function(){return this._rs}}),_dp(v,"count",{get:function(){return this._items.length}}),_dp(v,"fixedCount",{get:function(){return this._fixedCount}}),v.prototype.getItem=function(t){return this._items[t]},v.prototype.setItem=function(t,e){this._items[t]=e},v.prototype.indexOf=function(t){return this._items.indexOf(t)},v.prototype.clear=function(){this._items.length=0},v.prototype.expand=function(t,e,i){void 0===i&&(i=0),t&&this.$_expandItem(t,e,i)},v.prototype.collapse=function(t){if(t)for(var e=this._rs,i=this._items,o=t.index+1;o<i.length&&i[o].level>t.level;){if(i[o]==t.footer){e.footerWhenCollapsed||(i[o]._index=-1,i.splice(o,1));break}i[o]._index=-1,i.splice(o,1)}},v.prototype.getNext=function(t){return t&&t.visible&&t.index<this.count-1?this._items[t.index+1]:null},v.prototype.getPrior=function(t){return t&&t.visible&&0<t.index?this._items[t.index-1]:null},v.prototype.insert=function(t,e){this._items.splice(e,0,t)},v.prototype.remove=function(t){var e=this._items,i=e.indexOf(t);if(0<=i&&(e.splice(i,1),t.expanded))for(;i<e.length&&t.isDescendant(e[i]);)e.splice(i,1)},v.prototype.$_collectChildren=function(t,e,i,o){for(var n=0,r=t.count;n<r;n++){var s=t.getItem(n);s&&(e.push(s),(i&&s.level<o||s.expanded)&&this.$_collectChildren(s,e,i,o))}t.footer&&e.push(t.footer)},v.prototype.$_expandItem=function(t,e,i){var o,n=this._items,r=this._list;if(o=t instanceof f?this._fixedCount:t.index+1,i=Math.max(0,i),r.length=0,this.$_collectChildren(t,r,e,0<i?t.level+i:1e6),e){for(var s=o,a=n.length;s<a&&!(n[s].level<=t.level);s++);n.splice(o,s-o)}for(s=0,a=r.length;s<a;s++)n.splice(o+s,0,r[s])},v.prototype._clearAndInit=function(t){this.clear(),this._fixedCount=Math.min(t,this._rs.itemCount);for(var e=0;e<this._fixedCount;e++)this._items.push(this._rs.getItem(e))},v);function v(t){var e=m.call(this)||this;return e._fixedCount=0,e._items=new Array,e._list=new Array,e._rs=t,e}var w,C=(w=st.ItemProvider,oe.__extends(x,w),x.prototype._doDispose=function(){this._filters=null,this._filterRuntime=null,this._sorter=null,this._sortFields=null,this._sortDirections=null,this._sortCases=null,this._visibleItems=null,this._itemMap=null,this._summaryMap=null,this._checkableExpression=null,this._checkableCallback=null,this._checkableTag=null,this._labelComparer=null,w.prototype._doDispose.call(this)},x.prototype.getCommandStates=function(t){return this._itemMap[t.rowId]._getExtents()},x.prototype.setCommandStates=function(t,e){this._itemMap[t.rowId]._setExtents(e)},_dp(x,"expandWhenGrouping",{get:function(){return this._expandWhenGrouping},set:function(t){t!=this._expandWhenGrouping&&(this._expandWhenGrouping=t)}}),_dp(x,"footerWhenExpanded",{get:function(){return this._footerWhenExpanded},set:function(t){t!=this._footerWhenExpanded&&(this._footerWhenExpanded=t)}}),_dp(x,"footerWhenCollapsed",{get:function(){return this._footerWhenCollapsed},set:function(t){t!=this._footerWhenCollapsed&&(this._footerWhenCollapsed=t)}}),_dp(x,"labelComparer",{get:function(){return this._labelComparer},set:function(t){this._labelComparer=t||{}}}),_dp(x,"summaryMode",{get:function(){return this._summaryMode},set:function(t){t!=this._summaryMode&&(this._summaryMode=t,this.$_resetSummary(),this._fireRefresh())}}),_dp(x,"groupSummaryMode",{get:function(){return this._groupSummaryMode},set:function(t){t!=this._groupSummaryMode&&(this._groupSummaryMode=t,this.$_resetGroupSummary(),this._fireRefresh())}}),_dp(x,"hideDeleted",{get:function(){return this._hideDeleted},set:function(t){t!=this._hideDeleted&&(this._hideDeleted=t,this._saveAndRefresh())}}),_dp(x,"checkableExpression",{get:function(){return this._checkableExpression},set:function(t){t!=this._checkableExpression&&(this._checkableExpression=t,this._checkableTag&&(this._checkableTag.disconnect(),this._checkableTag=null),t&&(this._checkableTag=new i(this,t),this.dataSource&&this._checkableTag.connect(this.dataSource)))}}),_dp(x,"checkableCallback",{get:function(){return this._checkableCallback},set:function(t){t!=this._checkableCallback&&(this._checkableCallback=t,this._checkableTag&&(this._checkableTag.disconnect(),this._checkableTag=null),t&&(this._checkableTag=new i(this,null,t),this.dataSource&&this._checkableTag.connect(this.dataSource)))}}),_dp(x,"sortMode",{get:function(){return this._sortMode},set:function(t){t!=this._sortMode&&(this._sortMode=t)}}),_dp(x,"includeParentItem",{get:function(){return this._includeParentItem},set:function(t){this._includeParentItem=t}}),x.prototype.$_needSort=function(){return this._sortFields&&0<this._sortFields.length&&this._sortMode==lt.SortMode.AUTO},x.prototype.insertItem=function(t,e,i,o){var n=this._visibleItems;t.collapsed&&n.expand(t,!1);var r=n.indexOf(t.getItem(i));if(o){t.insert(i+1,e);for(var s=n.count,a=t.level+1;++r<s&&!(n.getItem(r).level<=a););n.insert(e,r)}else t.insert(i,e),n.insert(e,r)},x.prototype.appendItem=function(t,e){var i,o=this._visibleItems;t.collapsed&&o.expand(t,!1),i=0<t.count?o.indexOf(t.getItem(t.count-1)):o.indexOf(t);for(var n=o.count,r=t.level;++i<n&&!(o.getItem(i).level<=r););t.add(e),o.insert(e,i)},x.prototype.removeItem=function(t){this._visibleItems.remove(t),t.parent.remove(t)},x.prototype.$_calcLevel=function(t,e,i){var o,n,r=t.count,s=e;for(o=0;o<r;o++)(n=t.getItem(o))&&(s=Math.max(s,e+1),i&&!n.expanded||(s=Math.max(s,this.$_calcLevel(n,e+1,i))));return s},x.prototype.getLevels=function(t){return this.$_calcLevel(this._rootItem,0,t)},x.prototype.$_setExpanded=function(t,e,i){if(this._setExpanded(t,!0),this.dataSource.setHasChildren(t.row,!1),e)for(var o=0,n=t.count;o<n;o++){var r=t.getItem(o);r instanceof _&&(r.expanded||r.level<i)&&this.$_setExpanded(r,!0,i)}},x.prototype._expandItem=function(t,e,i,o,n){if(t&&(e||!t.expanded)){if(n&&!this._fireExpanding(t))return;this._visibleItems.collapse(t),this._visibleItems.expand(t,i,o),this._resetItemIndicies(t===this._rootItem?0:t.index),this.$_setExpanded(t,i,0<o?t.level+o:1e6);try{this._fireRefresh()}finally{n&&this._fireExpanded(t)}}},x.prototype.expand=function(t,e,i,o){void 0===o&&(o=0),this._expandItem(t,i,e,o,!0)},x.prototype.expandAll=function(t){this._expandItem(this._rootItem,!0,!0,0<t?t+1:0,!0)},x.prototype.$_setCollapsed=function(t,e){if(this._setExpanded(t,!1),e)for(var i=0,o=t.count;i<o;i++){var n=t.getItem(i);n instanceof _&&this.$_setCollapsed(n,!0)}},x.prototype._collapseItem=function(t,e,i,o){if(t&&(e||t.expanded)){if(o&&!this._fireCollapsing(t))return;this._visibleItems.collapse(t),this.$_setCollapsed(t,i),t==this._rootItem&&this._visibleItems.expand(this._rootItem,!1),this._resetItemIndicies(t===this._rootItem?0:t.index);try{this._fireRefresh()}finally{o&&this._fireCollapsed(t)}}},x.prototype.collapse=function(t,e,i){this._collapseItem(t,i,e,!0)},x.prototype.collapseAll=function(){this._collapseItem(this._rootItem,!0,!0,!0)},x.prototype.$_saveExpanded=function(t){t._saveExpanded();for(var e=0,i=t.count;e<i;e++)this.$_saveExpanded(t.getItem(e))},x.prototype.orderBy=function(t,e,i,o){void 0===o&&(o=!0),this._fireSort(t,e,i),this._sortFields=[],this._sortDirections=[],this._sortCases=[];for(var n=t?t.length:0,r=e?e.length:0,s=i?i.length:0,a=0;a<n;a++)this._sortFields.push(t[a]),a<r?this._sortDirections.push(e[a]):0<r?this._sortDirections.push(e[r-1]):this._sortDirections.push(lt.SortDirection.ASCENDING),a<s?this._sortCases.push(i[a]):0<s?this._sortCases.push(i[s-1]):this._sortCases.push(lt.SortCase.SENSITIVE);this.$_saveExpanded(this._rootItem),this.$_clearItems(),this.$_buildTree(!0);try{o&&this._fireRefresh()}finally{this._fireSorted()}},x.prototype.getSortFields=function(){return this._sortFields.concat()},x.prototype.getSortDirections=function(){return this._sortDirections.concat()},x.prototype.getSortCases=function(){return this._sortCases.concat()},x.prototype.beginFiltering=function(){this._filterLock++},x.prototype.$_prepareFiltering=function(t,e){for(var i=e._dataRow.count,o=e.rowId,n=o<=-1||this.$_selectItem(e.parent,e),r=0;r<i;r++){var s=new _(e._dataRow._children[r]);s&&!this.dataSource.isHiddenRow(s.rowId)&&(n=this.$_prepareFiltering(t,s)||n)}return t[o]=n},x.prototype.endFiltering=function(t,e,i){var o={};t&&this._includeParentItem&&(o={},this.$_prepareFilters(),this.$_prepareFiltering(o,this._rootItem)),0<this._filterLock&&(this._filterLock=Math.max(0,this._filterLock-1),t&&0==this._filterLock&&this.applyFilters(e,i,o))},x.prototype.hasFilter=function(t){var e=this._filters[t];return!!e&&0<e.length},x.prototype.addFilter=function(t,e){this._fireFilterAdded(t,e.text);var i=this._filters[t];i||(i=[],this._filters[t]=i);var o=new pt.ColumnFilterRun(e);return i.push(o),o},x.prototype.removeFilter=function(t,e){if(this._filtered&&this._filters[t]){this._fireFilterRemoved(t,e);for(var i=this._filters[t],o=i.length;o--;)if(i[o].model===e){i.splice(o,1),this.applyFilters(null,null);break}}},x.prototype.clearFilters=function(t){if(this._filtered&&this._filters[t]){this._fireFilterCleared(t);var e=this._filters[t];e&&0<e.length&&(e.splice(0,e.length),this._filters[t]=null,this.applyFilters(null,null))}},x.prototype.clearAllFilters=function(){this._filtered&&(this._fireFilterAllCleared(),this._filters={},this.applyFilters(null,null))},x.prototype.hasFilters=function(){for(var t in this._filters){var e=this._filters[t];if(e&&0<e.length)return!0}return!1},x.prototype.$_prepareFilters=function(){var t=this.dataSource,e=t.fieldCount;for(var i in this._filters)Number(i)>=e&&(this._filters[i]=null);if(this._filtered=this.hasFilters(),this._filtered)for(var o in this._filters){var n=this._filters[o];if(n)for(var r=n.length;r--;)n[r].prepare(this._filterRuntime,t)}},x.prototype.applyFilters=function(t,e,i){if(i||this.$_prepareFilters(),0==this._filterLock){this.$_saveExpanded(this._rootItem),this.$_clearItems(),this.$_buildTree(!0,i);try{this._fireRefresh()}finally{this._fireFiltered(t,e)}}},x.prototype.getItemByRow=function(t){return t?this._itemMap[t.rowId]:null},x.prototype.getCheckedRows=function(){var t=[];return function t(e,i){if(e instanceof _)for(var o=0,n=e.count;o<n;o++){var r=e.getItem(o),s=void 0;r.checked&&(s=r.row)&&i.push(s),t(r,i)}}(this._rootItem,t),t},x.prototype.getCheckedRowIds=function(){var t=[];return function t(e,i){if(e instanceof _)for(var o=0,n=e.count;o<n;o++){var r=e.getItem(o),s=void 0;r.checked&&0<=(s=r.dataRow)&&i.push(s),t(r,i)}}(this._rootItem,t),t},x.prototype.resetCheckables=function(){this._checkableTag&&(this._checkableTag.clearRows(),this._fireRefresh())},x.prototype.applyCheckables=function(){this._checkableTag?this._checkableTag.setRows():i.clearCheckables(this),this._fireRefresh()},x.prototype.$_checkChildren=function(t,e,i){for(var o=0,n=t.count;o<n;o++){var r=t.getItem(o);!r||i&&!r.checkable||this._setCheckItem(r,e),r instanceof _&&this.$_checkChildren(r,e,i)}},x.prototype._clearChecked=function(){this.$_checkChildren(this._rootItem,!1,!1)},x.prototype.checkAll=function(t,e,i,o){e?w.prototype.checkAll.call(this,t,e,i,o,!1):(this.$_checkChildren(this._rootItem,t,i),o?this._fireItemAllChecked(t):this._fireRefreshClient())},x.prototype.setCheckFieldIndex=function(t){this._checkFieldIndex=t},x.prototype.setItemChecked=function(t,e){return-1<this._checkFieldIndex&&(t.setData(this._checkFieldIndex,e),!0)},x.prototype.getItemChecked=function(t,e){return 0<=this._checkFieldIndex?t.getData(this._checkFieldIndex):e},_dp(x,"dataSource",{get:function(){return this._ds},set:function(t){t!==this._ds&&(this.$_clearItems(),this.$_resetSummary(),this._ds&&(this._ds.removeTag(this._extents),this._ds.removeListener(this),this._ds.unregisterCommandListener(this)),this._ds=t,this._ds&&(this.$_buildTree(),this._ds.addTag(this._extents),this._ds.addListener(this),this._ds.registerCommandListener(this)),this._fireReset())}}),_dp(x,"itemCount",{get:function(){return this._visibleItems.count}}),_dp(x,"rowCount",{get:function(){return this._itemCount}}),_dp(x,"sorted",{get:function(){return this._sortFields&&0<this._sortFields.length}}),_dp(x,"movable",{get:function(){return!this.sorted}}),x.prototype._createRootItem=function(){var t=new f(this);return this._setExpanded(t,!0),t},x.prototype.getItem=function(t){return 0<=t&&t<this._visibleItems.count?this._visibleItems.getItem(t):null},x.prototype.getItems=function(t,e){throw new Error("Method not implemented.")},x.prototype.getItemOfRow=function(t,e){return this._itemMap[t]},x.prototype.$_collectItems=function(t,e){for(var i=0,o=t.count;i<o;i++){var n=t.getItem(i);n instanceof _&&(e.push(n),this.$_collectItems(n,e))}},x.prototype.getAllItems=function(){var t=[];return this.$_collectItems(this._rootItem,t),t},x.prototype.getSum=function(t){var e=this.$_getSummary(t);return e?e.sum:NaN},x.prototype.getMax=function(t){var e=this.$_getSummary(t);return e?e.max:NaN},x.prototype.getMin=function(t){var e=this.$_getSummary(t);return e?e.min:NaN},x.prototype.getAvg=function(t){var e=this.$_getSummary(t);return e?e.avg:NaN},x.prototype.getVar=function(t){var e=this.$_getSummary(t);return e?e.vars:NaN},x.prototype.getVarp=function(t){var e=this.$_getSummary(t);return e?e.varsp:NaN},x.prototype.getStdev=function(t){var e=this.$_getSummary(t);return e?Math.sqrt(e.vars):NaN},x.prototype.getStdevp=function(t){var e=this.$_getSummary(t);return e?Math.sqrt(e.varsp):NaN},x.prototype.getDataCount=function(t){var e=this.$_getSummary(t);return e?e.dataCount:0},x.prototype.getDataAvg=function(t){var e=this.$_getSummary(t);return e?e.dataAvg:NaN},x.prototype.findItem=function(t,e,i,o,n){var r=this.dataSource;if(!r)return-1;if(this.itemCount<1)return-1;var s=Math.min(t.length,e.length);if(s<1)return-1;var a=!i||i.allFields,l=i&&i.caseSensitive,h=i&&i.partialMatch,d=null,u=[],_=i.compareCallback;_="function"==typeof _?_:ne.Utils.compareTextValue;for(var c=0;c<s;c++)u[c]=r.getField(t[c]).dataType;o=Math.max(0,o),n=Math.min(this._visibleItems.count-1,n);for(var p=o;p<=n;p++){var f=this._visibleItems.getItem(p),g=0<=f.dataRow;if(g)for(c=0;c<s;c++){var m=f.getData(t[c]);switch(u[c]){case lt.ValueType.DATETIME:case lt.ValueType.DATE:if(e[c]instanceof Date)g=_(e[c],m,l,h);else{if(!d){var y=/[.]/.test(e[c])?"yyyy.MM.dd":/[/]/.test(e[c])?"yyyy/MM/dd":/[-]/.test(e[c])?"yyyy-MM-dd":"yyyyMMdd";d=new _t.DateTimeConverter(y)}g=_(e[c],m?d.getText(m):m,l,h)}break;default:g=_(e[c],m,l,h)}if(g&&!a)return p;if(!g&&a)break}if(g)return p}return-1},x.prototype.findCell=function(t,e,i,o,n,r){var s=this.dataSource;if(!s)return null;if(this.itemCount<1)return null;for(var a=i&&i.caseSensitive,l=i&&i.partialMatch,h=s.fieldCount,d=t.length,u=null,_=[],c=0;c<h;c++)_[c]=s.getField(c).dataType;o=Math.max(0,o),n=Math.min(this._visibleItems.count-1,n),(r=Math.max(0,r))>=t.length&&(o++,r=0);var p=i.compareCallback;p="function"==typeof p?p:ne.Utils.compareTextValue;for(var f=o;f<=n;f++){var g=this._visibleItems.getItem(f),m=!1;if(0<=g.dataRow)for(c=o<f?0:r;c<d;c++){var y=t[c];if(0<=y&&y<h){var v=g.getData(y);switch(_[y]){case lt.ValueType.DATETIME:case lt.ValueType.DATE:if(e instanceof Date)m=p(e,v,a,l);else{if(!u){var w=/[.]/.test(e)?"yyyy.MM.dd":/[/]/.test(e)?"yyyy/MM/dd":/[-]/.test(e)?"yyyy-MM-dd":"yyyyMMdd";u=new _t.DateTimeConverter(w)}m=p(e,v?u.getText(v):v,a,l)}break;default:m=p(e,v,a,l)}if(m)return{itemIndex:f,fieldIndex:y,searchFieldIndex:c}}}}return null},x.prototype.$_internalAddItem=function(t,e,i){var o=_.getTemp(e),n=this.dataSource;if(!(this.hideDeleted&&I.isDeletedState(o.rowState)||n.isHiddenRow(e.rowId)))return o&&(null!=i?i:this.$_selectItem(t,o))?(o=new _(e),t.insert(e.index,o),this._itemCount++,this._itemMap[e.rowId]=o):void 0},x.prototype.$_internalRemoveItem=function(t){t&&(t.parent.remove(t),this._itemCount--,this._itemMap[t.row.rowId]=void 0)},x.prototype.$_internalRowStateChanged=function(t,e){if(void 0===e&&(e=!0),t)if(this.hideDeleted&&I.isDeletedState(t.rowState)){var i=t.parent;this.$_internalRemoveItem(t),this.$_clearSummary(),i.expanded&&i.visible&&(this._visibleItems.remove(t),e=!0),e&&this._fireRefresh()}else this._fireItemChanged(t)},x.prototype.$_selectField=function(t,e,i,o){for(var n=0,r=t.length;n<r;n++)if(t[n].select(this._filterRuntime,e,i,o))return!0;return!1},x.prototype.$_selectItem=function(t,e){if(!e)return!1;for(var i in this._filters){var o=this._filters[i];if(o&&!this.$_selectField(o,t,e,Number(i)))return!1}return!!e&&!0},x.prototype._setItem=function(t,e){this._visibleItems.setItem(t.index,e),this._resetItemIndex(t.index)},x.prototype.$_resetVisibleItems=function(){this._visibleItems._clearAndInit(this.fixedCount),this._visibleItems.expand(this._rootItem,!1),this._setExpanded(this._rootItem,!0),this._resetItemIndicies(0)},x.prototype.$_clearItems=function(){this._visibleItems.clear(),this._rootItem.clear(),this._itemMap=[],this._itemCount=0},x.prototype.$_buildItems=function(t,e,i){void 0===e&&(e=!1);for(var o=t.row,n=o.count,r=0;r<n;r++){var s=o.getChild(r),a=this.$_internalAddItem(t,s,i?i[s.rowId]:null);a&&(e&&a._restoreExpanded(),0<s.count&&this.$_buildItems(a,e,i))}},x.prototype.$_sortItem=function(t){var e=t.count;1<e&&this.$_sort(t,0,0,e-1);for(var i=0;i<e;i++){var o=t.getItem(i);o instanceof _&&this.$_sortItem(o)}},x.prototype.$_sort=function(t,e,i,o){var n,r=this._sortFields[e],s=this._sortDirections[e],a=this.dataSource,l=this._sortCases[e]==lt.SortCase.INSENSITIVE;if(this._sorter.run(t,r,s,l,i,o,e+1==this._sortFields.length),n=a.getField(r).dataType==lt.ValueType.TEXT&&l?a.equalTexts.bind(a):a.equalValues.bind(a),e+1<this._sortFields.length){for(var h=i,d=h;h<o;)h++,n(r,t.getItem(h).row,t.getItem(h-1).row)||(this.$_sort(t,e+1,d,h-1),d=h);d<o&&this.$_sort(t,e+1,d,o)}},x.prototype.$_buildTree=function(t,e){void 0===t&&(t=!1);var i=this.dataSource;this._rootItem._dataRow=i.rootRow,this._itemMap[this._rootItem._dataRow.rowId]=this._rootItem,this.$_buildItems(this._rootItem,t,e),this.$_clearSummary();for(var o=i.fieldCount,n=this._sortFields,r=this._sortDirections,s=this._sortCases,a=n.length;a--;)(n[a]<0||n[a]>=o)&&(n.splice(a,1),r.splice(a,1),s.splice(a,1));this.sorted&&0<this._rootItem.count&&this.$_sortItem(this._rootItem),this.$_resetVisibleItems(),this._checkableTag&&this._checkableTag.setRows()},x.prototype.$_resetSummary=function(){this._summaryMap=[]},x.prototype.$_resetGroupSummary=function(){},x.prototype.$_clearSummary=function(){if(this._summaryMap)for(var t=this._summaryMap.length;t--;)this._summaryMap[t]&&this._summaryMap[t].clear()},x.prototype.$_getSummary=function(t){var e=this._summaryMap[t];if(!e){var i=this.dataSource;i&&i.canSummarize(t)&&(e=new rt.FieldSummary(t),this._summaryMap[t]=e)}return e&&0==e.count&&0<this.itemCount&&this.$_summarize(e),e},x.prototype.$_summarize=function(t){var e=this.dataSource;if(e)if(this._filtered||this.hideDeleted||0<e.hiddenCount){for(var i=this._rootItem.getDescendants(!1),o=i.length,n=[],r=0;r<o;r++){var s=i[r];s instanceof _&&!e.isHiddenRow(s.rowId)&&n.push(s.row)}t.count=n.length,e.summarizeRange(t,n,this.summaryMode==lt.SummaryMode.STATISTICAL)}else t.count=e.rowCount,e.summarize(t,this.summaryMode==lt.SummaryMode.STATISTICAL)},x.prototype._fireItemChanged=function(t){this._eventLock<=0&&this.fireEvent(x.ITEM_CHANGED,t)},x.prototype._fireExpanding=function(t){return!(this._eventLock<=0)||this.fireConfirmEvent(x.EXPANDING,t)},x.prototype._fireExpanded=function(t){this._eventLock<=0&&this.fireEvent(x.EXPANDED,t)},x.prototype._fireCollapsing=function(t){return!(this._eventLock<=0)||this.fireConfirmEvent(x.COLLAPSING,t)},x.prototype._fireCollapsed=function(t){this._eventLock<=0&&this.fireEvent(x.COLLAPSED,t)},x.prototype._fireParentChanging=function(t,e,i){return!(this._eventLock<=0)||this.fireConfirmEvent(x.PARENT_CHANGING,t,e,i)},x.prototype._fireParentChanged=function(t,e,i){this._eventLock<=0&&this.fireEvent(x.PARENT_CHANGED,t,e,i)},x.prototype._refreshItems=function(){this.$_clearItems(),this.$_buildTree(),this._fireRefresh()},x.prototype._saveAndRefresh=function(){this.$_clearItems(),this.$_buildTree(),this._fireRefresh()},x.prototype.onDataSourceCommandStackChanged=function(t,e,i){this._fireCommandStackChanged(e,i)},x.prototype.onTreeDataProviderDisposed=function(t){this.$_clearItems(),this.$_resetSummary(),this._fireReset(),this.dataSource=null},x.prototype.onTreeDataProviderReset=function(t){this.$_clearItems(),this.$_resetSummary(),this.$_buildTree(),this._fireReset()},x.prototype.onTreeDataProviderRefresh=function(t){this._refreshItems()},x.prototype.onTreeDataProviderRefreshClient=function(t){this._fireRefreshClient()},x.prototype.onDataProvderCleared=function(t){this._refreshItems()},x.prototype.onTreeDataProviderRowCountChanged=function(t,e){},x.prototype.onTreeDataProviderRowAdding=function(t,e,i){return!0},x.prototype.onTreeDataProviderRowAdded=function(t,e){if(this.$_needSort())this._saveAndRefresh();else{var i=this._itemMap[e.parent.rowId];if(i){var o=this.$_internalAddItem(i,e);o?(this.$_buildItems(o),this.$_clearSummary(),i.expanded?this._expandItem(i,!0,!1,0,!1):this._fireItemChanged(i)):this.$_resetVisibleItems()}}this._checkableTag&&(this._checkableTag.addRow(e,!1),0<e.parent.level&&this._checkableTag.addRow(e.parent,!1))},x.prototype.onTreeDataProviderRowsAdded=function(t,e,i){if(this.$_needSort())this._saveAndRefresh();else{var o,n=this._itemMap[e.rowId];if(n&&i&&0<(o=i.length)){for(var r=0;r<o;r++){var s=i[r],a=this.$_internalAddItem(n,s);a&&this.$_buildItems(a)}this.$_clearSummary(),n.expanded?this._expandItem(n,!0,!1,0,!1):this._fireItemChanged(n),this._checkableTag&&(this._checkableTag.addRows(i),0<e.level&&this._checkableTag.addRow(e))}}},x.prototype.onTreeDataProviderRowRemoving=function(t,e){return!0},x.prototype.onTreeDataProviderRowRemoved=function(t,e){var i=this._itemMap[e.rowId];if(i){var o=i.parent;this.$_internalRemoveItem(i),this.$_clearSummary(),o.expanded&&o.visible&&(this._visibleItems.remove(i),this._fireRefresh())}},x.prototype.onTreeDataProviderRowsRemoving=function(t,e){return!0},x.prototype.onTreeDataProviderRowsRemoved=function(t,e){for(var i=e.length,o=!1,n=0;n<i;n++){var r=e[n],s=this._itemMap[r.rowId];if(s){var a=s.parent;this.$_internalRemoveItem(s),a.expanded&&a.visible&&(this._visibleItems.remove(s),o=!0)}}this.$_clearSummary(),o&&this._fireRefresh()},x.prototype.onTreeDataProviderRowUpdating=function(t,e){return!0},x.prototype.onTreeDataProviderRowUpdated=function(t,e){if(this.$_needSort())this._saveAndRefresh();else{var i=this._itemMap[e.rowId];this.$_clearSummary(),this._fireItemUpdated(i)}this._checkableTag&&this._checkableTag.updateRow(e)},x.prototype.onTreeDataProviderRowsUpdating=function(t,e){return!0},x.prototype.onTreeDataProviderRowsUpdated=function(t,e){this.$_needSort()?this._saveAndRefresh():(this.$_clearSummary(),this._fireRefresh()),this._checkableTag&&this._checkableTag.updateRows(e)},x.prototype.onTreeDataProviderValueChanging=function(t,e,i){return!0},x.prototype.onTreeDataProviderValueChanged=function(t,e,i){if(this.$_needSort())this._saveAndRefresh();else{var o=this._itemMap[e.rowId];this.$_clearSummary(),this._fireItemUpdated(o)}this._checkableTag&&this._checkableTag.updateRow(e)},x.prototype.onTreeDataProviderIconIndexChanged=function(t,e){var i=this._itemMap[e.rowId];i&&i.visible&&this._fireItemChanged(i)},x.prototype.onTreeDataProviderHasChildrenChanged=function(t,e){var i=this._itemMap[e.rowId];i&&i.visible&&this._fireItemChanged(i)},x.prototype.onTreeDataProviderRowStateChanged=function(t,e,i){var o=this._itemMap[e.rowId];this.$_internalRowStateChanged(o,i),this._checkableTag&&this._checkableTag.updateRow(e),!o&&i&&this._saveAndRefresh()},x.prototype.onTreeDataProviderRowStatesChanged=function(t,e){var i=e.length,o=!1;if(1==i){var n=e[0];o=!(l=this._itemMap[n.rowId]),this.$_internalRowStateChanged(l),this._checkableTag&&this._checkableTag.updateRow(n),o&&this._saveAndRefresh()}else if(0<i){var r=!1;if(this.hideDeleted)for(var s=0,a=e.length;s<a;s++){var l=this._itemMap[e[s].rowId];if(o=o||!l,l&&I.isDeletedState(l.rowState)){var h=l.parent;this.$_internalRemoveItem(l),h.expanded&&h.visible&&this._visibleItems.remove(l),r=!0}}this._checkableTag&&this._checkableTag.changeStates(e),r&&this.$_clearSummary(),o?this._saveAndRefresh():this._fireRefresh()}},x.prototype.onTreeDataProviderRowSiblingMoved=function(t,e,i){if(!this.$_needSort()){var o=this._itemMap[e.rowId];o&&(o.parent.moveChild(o.childIndex,i),this.$_resetVisibleItems(),this._fireRefresh())}},x.prototype.onTreeDataProviderRowsSiblingMoved=function(t,e,i){if(!this.$_needSort()){var o=this._itemMap[e[0].rowId];o&&(o.parent.moveChildren(o.childIndex,e.length,i),this.$_resetVisibleItems(),this._fireRefresh())}},x.prototype.onTreeDataProviderRowParentChanged=function(t,e,i,o){var n=this._itemMap[e.rowId];if(n){var r=this._itemMap[i.rowId];this.$_needSort()&&(o=r?r.count():0),n.changeParent(r,o),this.$_resetVisibleItems(),this._fireRefresh()}},x.prototype.onTreeDataProviderRowsParentChanged=function(t,e,i,o){var n=this._itemMap[e[0].rowId];if(n){var r=this._itemMap[i.rowId];this.$_needSort()&&(o=r?r.count():0);for(var s=0;s<e.length;s++){var a=e[s];(n=this._itemMap[a.rowId]).changeParent(r,o+s)}this.$_resetVisibleItems(),this._fireRefresh()}},x.prototype.onTreeDataProviderRowHiddenChanged=function(t,e,i){if(i){for(var o=!1,n=0,r=e.length;n<r;n++){var s=e[n],a=this._itemMap[s];if(a){var l=a.parent;this.$_internalRemoveItem(a),l.expanded&&l.visible&&this._visibleItems.remove(a),o=!0}}o&&this.$_clearSummary(),this._fireRefresh()}else this._saveAndRefresh()},x.ITEM_CHANGED="onTreeItemProviderItemChanged",x.EXPANDING="onTreeItemProviderExpanding",x.EXPANDED="onTreeItemProviderExpanded",x.COLLAPSING="onTreeItemProviderCollapsing",x.COLLAPSED="onTreeItemProviderCollapsed",x.PARENT_CHANGING="onTreeItemProviderParentChanging",x.PARENT_CHANGED="onTreeItemProviderParentChanged",x);function x(){var t=w.call(this,null)||this;return t._sortMode=lt.SortMode.AUTO,t._expandWhenGrouping=!0,t._footerWhenExpanded=!0,t._footerWhenCollapsed=!0,t._labelComparer={},t._summaryMode=lt.SummaryMode.AGGREGATE,t._groupSummaryMode=lt.SummaryMode.AGGREGATE,t._checkableExpression=null,t._checkableCallback=null,t._extents=new s,t._filters={},t._filterRuntime=new pt.ColumnFilterRuntime,t._filtered=!1,t._sorter=new Le.TreeItemsSorter,t._sortFields=[],t._sortDirections=[],t._sortCases=[],t._visibleItems=new y(t),t._itemMap=[],t._itemCount=0,t._summaryMap=null,t._filterLock=0,t._includeParentItem=!0,t._checkFieldIndex=-1,t}e.TreeItemProvider=C});t(Ve);Ve.TreeItemFooter,Ve.TreeItem,Ve.RootTreeItem,Ve.TreeItemProvider;var Oe=e(function(t,e){Object.defineProperty(e,"__esModule",{value:!0});var r,i=(r=Te.RowBarElement,oe.__extends(s,r),s.prototype.rowOf=function(t){return t.parentElement[lt.T_ROW]},s.prototype._getCssSelector=function(){return"rg-checkbar"},s.prototype._doPrepareContent=function(t){var e=t.grid.checkBar;(this._typeChanged=e.exclusive!==this._exclusive)&&(this._exclusive=e.exclusive),(this._imageChanged=e.useImages!==this._useImage)&&(this._useImage=e.useImages)},s.prototype._clearCellContent=function(t){t[this._textProp]="",r.prototype._clearCellContent.call(this,t)},s.prototype._prepareCellContent=function(t){var e=ne.getDoc(t),i=e.createElement("input"),o=i.style;i.type=this._exclusive?"radio":"checkbox",i.tabIndex=-1,i.className=this._exclusive?"rg-radio":"rg-checkbox",o.display=this._useImage?"none":"inline-block",t.appendChild(i);var n=e.createElement("span");(o=n.style).display=this._useImage?"inline-blick":"none",t.appendChild(n)},s.prototype.measureWidth=function(t){return this.model.width},s.prototype._layoutCell=function(t,e,i){r.prototype._layoutCell.call(this,t,e,i);var o=this.model.getCell(e);ne.Utils.setClassName(i,this.$_getCellSelector(i)),this._updateCellContent(t,o,i.firstElementChild.firstElementChild)},s.prototype._updateCellContent=function(t,e,i){var o=e.item,n=i;n.checked=o&&o.checked,n.disabled=o&&!o.checkable,n.style.visibility=t.checkBar.showGroup&&t.checkBar.fieldIndex<0||o instanceof dt.GridRow||o instanceof Ve.TreeItem?"visible":"hidden";var r=this._useImage;this._typeChanged&&(n.setAttribute("type",this._exclusive?"radio":"checkbox"),n.className=this._exclusive?"rg-radio":"rg-checkbox");var s=n.nextElementSibling;if(this._imageChanged&&s&&(n.style.display=r?"none":"inline-block",s.style.display=r?"inline-block":"none"),r&&s){var a=n.checked?this._exclusive?"rg-checkbar-radio-checked":"rg-checkbar-checked":this._exclusive?"rg-checkbar-radio-unchecked":"rg-checkbar-unchecked";a+=n.disabled?" disabled":"",s.className=a}},s.prototype.getCheckBox=function(t){return t.firstElementChild.firstElementChild},s.prototype.$_getCellSelector=function(t,e){var i=s.CELL_CSS,o=t.parentElement[lt.T_ROW],n=this.grid.getItem(o);return i+=n&&n.checkable?"":" rg-checkbar-disabled",i+=r.prototype.$_getCellSelector.call(this,t,e)},s.prototype.$_setPrevChecked=function(t){this._prevChecked=t},s.CELL_CSS="rg-checkbar-cell",s);function s(t,e){var i=r.call(this,t,e,"checkBarView")||this;return i._fixedCount=0,i._prevChecked=-1,i._exclusive=!1,i._typeChanged=!1,i._useImage=!1,i._imageChanged=!1,i}e.CheckBarElement=i});t(Oe);Oe.CheckBarElement;var Ne=e(function(t,e){Object.defineProperty(e,"__esModule",{value:!0});var o,i=(o=Yt.DataTableElement,oe.__extends(n,o),n.prototype._doDispose=function(){this._bars=this._views=null,o.prototype._doDispose.call(this)},_dp(n,"rowIndicator",{get:function(){return this._indicatorView}}),_dp(n,"stateBar",{get:function(){return this._stateView}}),_dp(n,"checkBar",{get:function(){return this._checkView}}),_dp(n,"stateError",{get:function(){return this._stateView._error},set:function(t){this._stateView._error=t}}),n.prototype.getCellIndex=function(t){return t.parentElement[lt.T_ROW]},n.prototype.refresh=function(t){this._indicatorView.visible&&this._indicatorView.refresh(t,this._count)},n.prototype.rowOf=function(t){return t.parentElement[lt.T_ROW]},n.prototype.getCheckBox=function(t){return this._checkView.getCheckBox(t)},n.prototype.getCellType=function(t){var e=this._views[t.cellIndex];return e instanceof ke.RowIndicatorElement?"indicator":e instanceof Me.StateBarElement?"state":e instanceof Oe.CheckBarElement?"check":void 0},n.prototype.isRowIndicator=function(t){return this._views[t.cellIndex]instanceof ke.RowIndicatorElement},n.prototype._getCssSelector=function(){return"rg-rowbarcontainer"},n.prototype._isFixedHeight=function(){return!0},n.prototype._doPrepareContent=function(t){for(var e=0,i=this._views;e<i.length;e++)i[e]._doPrepareContent(t);o.prototype._doPrepareContent.call(this,t)},n.prototype._prepareCellContent=function(t,e){return this._views[e]._prepareContent(t,e)},n.prototype._getTableRowHeight=function(t,e){var i=t.fixedItemCount;return 0<i&&i<e?t.getTableItemHeight(e-1):t.getTableItemHeight(e)},n.prototype._doMeasure=function(t,e,i){this.$_prepareBars(t);for(var o=0,n=0,r=this._views;n<r.length;n++){var s=r[n];o+=s.width=s.measureWidth(t)}return new jt.Size(o,i)},n.prototype._doLayoutContent=function(t){for(var e=t.grid,i=t.topIndex,o=t.itemCount,n=t.fixedItemCount,r=this._count=n+o,s=this._bars.length,a=e.focusedRow,l=this._views,h=0;h<r;h++){var d=h<n?h:h+i,u=kt.CellIndex.temp(e,d),_=this._getTableRow(t,h);ne.Utils.setClassName(_,this.getStyleName(u.item)),_[lt.T_ROW]=d;for(var c=0;c<s;c++){var p=_.cells[c];p[lt.T_FOC]=d==a,l[c]._layoutCell(e,u,p)}}0<n&&this._layoutFixedBar(e.fixedOptions,n)},n.prototype._doUpdateCellContent=function(t,e,i){i[this._textProp]=e.text},n.prototype._doRender=function(t){},n.prototype._getCellCount=function(t){return this._bars.length},n.prototype._getCellWidth=function(t,e){return this._views[e].width},n.prototype.$_prepareBars=function(t){var e=this._bars=[],i=this._views=[];t.rowIndicator.visible&&e.push(t.rowIndicator),t.stateBar.visible&&e.push(t.stateBar),t.checkBar.visible&&e.push(t.checkBar),1<e.length&&e.sort(function(t,e){var i=t.displayOrder,o=e.displayOrder;return i==o?t.staticOrder-e.staticOrder:i-o});for(var o=0,n=e.length;o<n;o++){var r=e[o],s=void 0;(s=r instanceof Nt.RowIndicator?this._indicatorView:r instanceof Pt.StateBar?this._stateView:this._checkView).$_setCol(o),s._colChanged=s._colChanged||r.visChanged,i.push(s),r.visChanged=!1}this._indicatorView.visible=0<=i.indexOf(this._indicatorView),this._stateView.visible=0<=i.indexOf(this._stateView),this._checkView.visible=0<=i.indexOf(this._checkView)},n.prototype._layoutFixedBar=function(t,e){var i=this._tbody.children[e];i[lt.T_IDX]=e,i[lt.T_ROW]=-99,ne.Utils.setClassName(i,Ht.FixedOptions.ROW_BAR_STYLE);for(var o=0;o<i.childElementCount;o++){var n=i.children[o];n[lt.T_FOC]=!1,ne.Utils.setClassName(n,Ht.FixedOptions.ROW_BAR_CELL_STYLE)}},n.prototype.getStyleName=function(t){var e=n.ROW_STYLE;return(e+=At.GridBody.STATE_ROW_STYLES[t.rowState]||"").trim()},n.ROW_STYLE="rg-row-bar",n);function n(t){var e=o.call(this,t.doc,null,"rowBarContainer")||this;e._count=0;var i=t.doc;return e._bars=[t.rowIndicator,t.stateBar,t.checkBar],e.addChild(e._indicatorView=new ke.RowIndicatorElement(i,t.rowIndicator)),e.addChild(e._stateView=new Me.StateBarElement(i,t.stateBar)),e.addChild(e._checkView=new Oe.CheckBarElement(i,t.checkBar)),e._views=[e._indicatorView,e._stateView,e._checkView],e}e.RowBarContainer=i});t(Ne);Ne.RowBarContainer;var Pe=e(function(t,e){Object.defineProperty(e,"__esModule",{value:!0});var I=(r.getData=function(t){var e=new r;return e.cellType=t,e},r.getSub=function(t,e){var i=new r;return i.cellType=t,i.subType=e,i},r.getField=function(t,e){var i=new r;return i.cellType=t,i.field=e,i},r.getItem=function(t,e){var i=new r;return i.cellType=t,i.itemIndex=e,i},r.getLayout=function(t,e){var i=new r;return i.cellType=t,i.column=e.firstColumn&&e.firstColumn.name,i},r.getCell=function(t,e){var i=new r;return"data"===t&&(i.editable=e.editable,i.readOnly=e.readonly),i.cellType=t,i.itemIndex=e.item.index,i.column=e.layout.firstColumn&&e.layout.firstColumn.name,i},r.getGroupFooter=function(t,e,i){var o=new r,n=i.firstColumn;return o.cellType=t,o.itemIndex=e,o.index=n&&n.grid&&n.grid.getItem(e).footerIndex,o.column=n&&n.name,o},r.getSummary=function(t,e,i){var o=new r;return o.cellType=t,o.index=e,o.column=i.firstColumn&&i.firstColumn.name,o},r.getGroupElt=function(t,e){var i=new r;return i.cellType=t,i.groupLevel=e,i},r);function r(){}e.ClickData=I;var s,o=(s=Ut.LayerElement,oe.__extends(i,s),_dp(i,"focusType",{get:function(){return this._focusType},set:function(t){t!==this._focusType&&(this._focusType=t,this.$_typeChanged(t))}}),i.prototype.$_createLine=function(t){function e(t,e,i){var o=t.createElement("div");o.className=e?"rg-focus-inner-line":"rg-focus-line";var n=o.style;return n.display="none",n.position="absolute",n.boxSizing="border-box",n.left="0px",n.top="0px",1!==i&&(n.borderTop="none"),2!==i&&(n.borderBottom="none"),3!==i&&(n.borderLeft="none"),4!==i&&(n.borderRight="none"),o}var i=ne.getDoc(t);t.appendChild(this._topLine=e(i,this._inner,1)),t.appendChild(this._bottomLine=e(i,this._inner,2)),t.appendChild(this._leftLine=e(i,this._inner,3)),t.appendChild(this._rightLine=e(i,this._inner,4))},i.prototype.$_typeChanged=function(t){var e=this._dom.style;this._topLine||this.$_createLine(this._dom),"line"===t?(e.height="0px",e.width="0px",e.border="none",this._topLine.style.display=this._bottomLine.style.display=this._leftLine.style.display=this._rightLine.style.display="block",this.invalidate()):(e.removeProperty("border"),this._topLine.style.display=this._bottomLine.style.display=this._leftLine.style.display=this._rightLine.style.display="none")},i.prototype.$_linePosition=function(t,e,i,o){var n=this._topLine.style,r=this._bottomLine.style,s=this._leftLine.style,a=this._rightLine.style,l=this.parent.width,h=this.parent.height;r.left=n.left=-t+"px",r.width=n.width=l+t+"px",r.top=o-2+"px",a.height=s.height=h+"px",a.left=i-2+"px",r.display=h<o?"none":"block",s.display=t<0?"none":"block",a.display=l<i?"none":"block"},i.prototype.setEditing=function(t,e,i){t!=this._editing&&(this._editing=t,this._buttonWidth=e,this._isLeftImageButton=i,this.resetStyleName())},i.prototype._getCssSelector=function(){return this._inner?"rg-focus-inner":this._editing?"rg-focus-editing":"rg-focus"},i.prototype.setBounds=function(t,e,i,o){if("line"===this._focusType){var n=this._dom.style;n.left=t+"px",n.top=e+"px",this.width=i,this.height=o,this.$_linePosition(t,e,i,o)}else this.x++,s.prototype.setBounds.call(this,t,e,i,o)},i.prototype._initDom=function(t){s.prototype._initDom.call(this,t),this.setImportantStyle("pointer-events","none")},i.prototype._beforeDraw=function(t){if("line"===this._focusType){this._setClassName(t);var e=t.style;e.left=this.x+"px",e.top=this.y+"px"}else s.prototype._beforeDraw.call(this,t)},i);function i(t,e){var i=s.call(this,t,"focusView")||this;return i._editing=!1,i._focusType="layer",i._buttonWidth=0,i._isLeftImageButton=!1,i._inner=e,i}e.FocusView=o;var n,a=(n=Ut.LayerElement,oe.__extends(l,n),l.prototype._doDispose=function(){this._focusView&&this._focusView.dispose(),this._focusView=null,n.prototype._doDispose.call(this)},_dp(l,"focusType",{get:function(){return this._focusType},set:function(t){t!==this._focusType&&(this._focusType=t,this._focusView.focusType=t,this.$_typeChanged(t))}}),l.prototype.$_typeChanged=function(t){var e=this._dom.style;"line"===t?(e.removeProperty("overflow"),e.width="0px",e.height="0px"):(e.overflow="hidden",e.width=this.width+"px",e.height=this.height+"px")},l.prototype.updateElement=function(t,e,i,o,n){this._focusView.setBounds(t,e,i,o),this._focusView.setEditing(n,0,!1)},l.prototype._getCssSelector=function(){return"rg-focus-mask"},l.prototype._initDom=function(t){n.prototype._initDom.call(this,t),this.setImportantStyle("pointer-events","none"),this.setImportantStyle("background","none"),this.setImportantStyle("border","none"),this.setImportantStyle("overflow","hidden")},l.prototype._beforeDraw=function(t){if("line"===this._focusType){this._setClassName(t);var e=t.style;e.left=this.x+"px",e.top=this.y+"px"}else n.prototype._beforeDraw.call(this,t)},l.prototype.setRect=function(t){"line"===this._focusType?t.x==this.x&&t.y==this.y&&t.width==this.width&&t.height==this.height||(this.x=t.x,this.y=t.y,this.width=t.width,this.height=t.height):n.prototype.setRect.call(this,t)},l);function l(t,e){void 0===e&&(e=!1);var i=n.call(this,t,"focusMask")||this;return i._focusType="layer",i._focusView=new o(t,e),i.addChild(i._focusView),i}e.FocusMask=a;var h,d=(h=Ut.LayerElement,oe.__extends(u,h),u.prototype._doDispose=function(){h.prototype._doDispose.call(this)},u.prototype._getCssSelector=function(){return"rg-rowblock"},u.prototype._initDom=function(t){h.prototype._initDom.call(this,t),this.setImportantStyle("pointer-events","none")},u);function u(t){var e=h.call(this,t,"rowBlockView")||this;return e.visible=!1,e}e.RowBlockView=d;var _,c=(_=Ut.LayerElement,oe.__extends(p,_),p.prototype._getCssSelector=function(){return"_rg-col-resizer_"},p.prototype._initDom=function(t){_.prototype._initDom.call(this,t),this.setImportantStyle("pointer-events","none")},p);function p(t){return _.call(this,t,"headerCellResizer")||this}e.HeaderCellResizer=c;var f,g=(f=Ut.LayerElement,oe.__extends(m,f),m.prototype._doDispose=function(){this._model=null,f.prototype._doDispose.call(this)},_dp(m,"model",{set:function(t){this._model=t,this._modelChanged=!0}}),m.prototype._createDom=function(t){var e=t.createElement("table");e.style.setProperty("table-layout","fixed","important");var i=t.createElement("tbody");e.appendChild(i);var o=t.createElement("tr");i.appendChild(o);var n=this._cell=t.createElement("td");return o.appendChild(n),n.className="rg-header rg-header-cell _rg-header-cell-feedback_",e},m.prototype._getCssSelector=function(){return"rg-table"},m.prototype._doDraw=function(t){this.dragging&&!this._modelChanged||(Xt.HeaderElement.renderCell(this._model,this._cell),this._modelChanged=!1)},m);function m(t){var e=f.call(this,t,"headerCellFeedback")||this;return e._modelChanged=!1,e.dragging=!1,e}e.HeaderCellFeedback=g;var y,v=(y=Ut.LayerElement,oe.__extends(w,y),w.prototype._getCssSelector=function(){return"_rg-header-cell-mover_"},w.prototype._initDom=function(t){y.prototype._initDom.call(this,t)},w.prototype._doDraw=function(t){},w);function w(t){return y.call(this,t,"headerCellMover")||this}e.HeaderCellMover=v;var C,x=(C=Ut.LayerElement,oe.__extends(b,C),b.prototype._getCssSelector=function(){return"_rg-row-mover-line_"},b.prototype._initDom=function(t){C.prototype._initDom.call(this,t),this.setImportantStyle("pointer-events","none")},b);function b(t){return C.call(this,t,"rowMoverLine")||this}e.RowMoverLine=x;var E,S=(E=Ut.LayerElement,oe.__extends(R,E),R.prototype.setEnabled=function(t){if(t!=this._enabled)return this._enabled=t,this.invalidate(),!0},R.prototype.setLabel=function(t){if(t!=this._label)return this._label=t,this.invalidate(),!0},R.prototype.setZIndex=function(t){this._dom.style.zIndex=String(t)},R.prototype._getCssSelector=function(){var t="_rg-row-mover-proxy_";return this._enabled||(t+=" _rg-row-mover-proxy-disabled_"),t},R.prototype._initDom=function(t){E.prototype._initDom.call(this,t),this.setImportantStyle("pointer-events","none"),t.style.whiteSpace="nowrap"},R.prototype._setSizeStyle=function(t){},R.prototype._doDraw=function(t){t[ne.Utils.TextProp]=this._label},R);function R(t){var e=E.call(this,t,"rowMover")||this;return e._enabled=!0,e._label="1행 이동",e}e.RowMoverProxy=S;var D,T=(D=he.VisualTool,oe.__extends(k,D),k.prototype._doDispose=function(){this._skipIndex&&this._skipIndex.dispose(),this._skipIndex=null,this._focusMask=this._focusMask.dispose(),this._innerFocusMask=this._innerFocusMask.dispose(),this._rowFocusView&&this._rowFocusView.dispose(),this._rowFocusView=null,this._rowBlockMask&&this._rowBlockMask.dispose(),this._rowBlockMask=null,this._grid=null,D.prototype._doDispose.call(this)},_dp(k,"grid",{get:function(){return this._grid}}),_dp(k,"focused",{get:function(){return this._grid.focusedIndex}}),k.prototype.setFocused=function(t,e){var i=this._grid;if(i.isValid(t)){var o=i.getItem(t.itemIndex);return!i.isEditing()&&o instanceof at.DummyEditItem&&i.append(),this._grid.setFocusedIndex(t,e,!0)}},k.prototype.layoutChanged=function(){this.$_resetFocusView(),this.$_resetRowBlockMask(),this._doLayoutChanged()},k.prototype.resetFocused=function(){this.$_resetFocusView()},k.prototype.focusedIndexChanging=function(t){},k.prototype.focusedIndexChanged=function(t,e){var i=this.grid.layoutManager,o=i.fixedItemCount,n=e.itemIndex;(!this.grid.isValid(e)||0<o&&n<o||n>=i.topIndex+o&&n<=o+i.topIndex+i.fullItemCount)&&this.$_resetFocusView()},k.prototype.currentRowChanged=function(t,e){var i=this.grid,o=i.displayOptions;if(this._rowBlockStart=-1,this._rowBlockEnd=-1,o.rowBlockType!=lt.RowMaskType.NONE){var n,r=o.rowBlockCallback;if(r)(n=r(i.handler,i.getItemIndexOfRow(e)))?(this._rowBlockStart=n.start,this._rowBlockEnd=n.end):this._rowBlockStart=this._rowBlockEnd=-1}this.$_resetRowBlockMask()},k.prototype.getNextRequest=function(t,e,i,o){return null},k.prototype.isMouseEventTarget=function(t){if(t instanceof Kt.CellElement){var e=t.getAncestor(Yt.TableBaseElement);if(e)return e.getContentAt(t.index)==this.mouseEventTarget}return D.prototype.isMouseEventTarget.call(this,t)},k.prototype._doSetFocus=function(t){this.grid.setFocus(t)},k.prototype._doFocusLeave=function(t){if(this.grid.editOptions.commitWhenLeave&&this.grid.isEditing()){for(var e=t.target;e;){if(0<=(e.className||"").indexOf("rg-"))return;e=e.parentElement}this.grid.commit(!1)}},k.prototype._doLayoutChanged=function(){},k.prototype.$_resetFocusView=function(){var t=this._grid,e=t.layoutManager,i=t.displayOptions,o=t.focusedIndex,n=this._tempIndex.assign(o),r=!1,s=!1,a=!1;if(i.focusVisible&&t.isValid(n)&&!t.isEditing()){var l=n.item,h=t.getBodyViewAt(n),d=h.getCellAt(e,n),u=d;if(!d&&n.layout.merged){var _=e.getMergeRoom(n);_&&(n.itemIndex=e.fixedItemCount+e.topIndex,_.contains(n)&&(d=h.getCellAt(e,n)),d||(n.itemIndex=e.fixedItemCount+e.topIndex+e.itemCount-1,_.contains(n)&&(d=h.getCellAt(e,n))))}if(d&&!d.grouped){var c=t.isEditing(),p=h.getCellRectAt(e,n,!0);if(0<(p=h.boundsByContainer(p)).width&&0<p.height){var f=0,g=p.width;if(!n.colFixed&&!n.rightFixed){var m=e.fixedContentBounds;f=Math.max(0,m.right-p.x),g=Math.max(0,p.width-f),m=e.rightContentBounds,g-=p.right-m.x}if(0<g){c&&(p.y--,p.height+=1);var y=p.clone();if((m=e.footerBounds.clone()).y+=e.contentBounds.y,Math.max(0,p.bottom-m.y),p.width=Math.min(p.width,g),p.x+=f,p.bottom=Math.min(p.bottom,m.y),this._focusMask.setRect(p),this._focusMask.focusType=i.focusType,this._focusMask.updateElement(-f,0,y.width,y.height,c),r=!0,u&&u.merged){if(i.showInnerFocus&&(x=h.getCellRectAt(e,n,!1)).height<p.height){this._innerFocusMask.focusType=i.focusType,x.height=Math.min(x.height,p.height);var v=(x=h.boundsByContainer(x)).width-8,w=x.height-8;x.bottom=Math.min(p.bottom+4,x.bottom),this._innerFocusMask.setRect(x.inflate(-4,-4,-4,-4)),this._innerFocusMask.updateElement(0,0,v,w,c),a=!0}}else{var C=h.getCellAt(e,n);if(C&&C.renderer2&&C.editable&&C.renderer2.canShowInnerFocus()){var x=h.getCellRectAt(e,n,!1);v=(x=h.boundsByContainer(x)).width-8,w=x.height-8,x.bottom=Math.min(p.bottom+4,x.bottom),this._innerFocusMask.setRect(x.inflate(-4,-4,-4,-4)),this._innerFocusMask.updateElement(0,0,v,w,c),a=!0}}}}}else if(!l.isData){var b=t.getRowView(h,l);b&&(p=b.boundsByContainer(),this._focusMask.updateElement(0,0,p.width,p.height,!1),p.x<e.leftContentBounds.right&&(p.x=e.leftContentBounds.right,p.width-=e.leftContentBounds.right-p.x),this._focusMask.setRect(p),r=!0)}}var I=i.rowFocusType;if(I!=lt.RowMaskType.NONE){var E=e.footerBounds.y+e.contentBounds.y,S=e.fixedItemCount,R=n.itemIndex;if(0<=(R=S<=R?R-e.topIndex:R)&&R<=e.itemCount-1){switch((p=e.getTableItemBounds(R)).y+=e.contentBounds.y+e.bodyBounds.y,p.bottom>E&&(p.bottom=E),I){case lt.RowMaskType.DATA:p.x=t.fixedContentPane.x,p.right=t.rightContentPane.width?t.rightContentPane.right:t.contentPane.right;break;case lt.RowMaskType.FILL:p.x=0,p.width=t.width;break;case lt.RowMaskType.ROW:p.x=0,p.right=t.rightContentPane.width?t.rightContentPane.right:t.contentPane.right}this._rowFocusView.setRect(p),s=!0}else s=!1}this._rowFocusView.visible=s,this._focusMask.visible=r,this._innerFocusMask.visible=a,this._focusMask.visible},k.prototype.$_resetRowBlockMask=function(){var t=this.grid,e=t.layoutManager,i=e.fixedItemCount,o=t.topItem,n=this._rowBlockMask,r=t.displayOptions.rowBlockType,s=this._rowBlockStart,a=this._rowBlockEnd,l=Math.max(s-o+i,i),h=Math.min(Math.max(a-o+i),e.itemCount+i-1);if(n.visible=r&&r!=lt.RowMaskType.NONE&&0<=l&&0<=h&&l<e.itemCount&&l<=h&&s!==a,n.visible){var d=e.footerBounds.y+e.contentBounds.y,u=e.getTableItemBounds(l),_=e.getTableItemBounds(h);switch((u=u.union(_)).y+=e.contentBounds.y+e.bodyBounds.y,u.bottom>d&&(u.bottom=d),r){case lt.RowMaskType.DATA:u.x=t.fixedContentPane.x,u.right=t.rightContentPane.width?t.rightContentPane.right:t.contentPane.right;break;case lt.RowMaskType.FILL:u.x=0,u.width=t.width;break;case lt.RowMaskType.ROW:u.x=0,u.right=t.rightContentPane.width?t.rightContentPane.right:t.contentPane.right}n.setRect(u)}},k.prototype._doCancel=function(t){if(t.closeFilterSelector(),t.isEditing())t.cancelEditor(!0);else if(t.isItemEditing())t.itemEditCancel()&&t.cancel();else if(this.dragging&&this.dragTracker)try{this._stopDragTracker(null,null,!0),this.dragTracker.cancel(),this.dragTracker.linkable&&t.container.cancelOtherContainer(this.dragTracker)}catch(t){throw t}finally{this.dragTracker=null}},k.prototype._doEnter=function(e,i,t){var o=e.isEditing();if(o&&!i.enterToTab)e.commitEditor(!0);else{var n=t.clone(),r=i.skipReadOnly,s=i.skipReadOnlyCell;if(e.isValid(n))if(i.enterToNextRow&&n.itemIndex<e.itemCount-1)n.down(),s&&this._checkReadOnly(n)&&(this._skipReadOnlyCell(n,1)||n.assign(t));else if((!o||i.enterToTab)&&i.crossWhenExitLast&&(n.isLast||i.skipReadOnly&&n.isEditableLast)&&n.itemIndex<e.itemCount-1)n.down(),n.home(),r&&this._skipReadOnly(n,1);else if((!o||i.enterToTab)&&i.commitWhenExitLast&&n.isLast){try{e.commit(i.commitWhenNoEdit)}catch(t){throw t instanceof It.ValidationError&&(t=e._fireValidationFail(n.item.index,t.column,t))&&alert(i.showOnlyValidationMessage&&t.userMessage?t.userMessage:t.toString()),t}i.appendWhenExitLast&&(e.append(),e.isItemEditing()&&(n.down(),n.home()))}else i.enterToTab&&(e.isEditing()||this._checkReadOnly(n))?(e.isEditing()&&e.commitEditor(!0),n.next(),this._getNextVisible(e,n),r&&!this._skipReadOnly(n,1)&&n.assign(t)):i.enterToEdit||(n.next(),this._getNextVisible(e,n),r&&!this._skipReadOnly(n,1)&&n.assign(t));else n.normalize(e);kt.CellIndex.areEquals(n,t)?e.isValid(n)&&i.enterToEdit&&!e.isEditing()&&t&&t.dataColumn&&!this._checkReadOnly(t)&&e.showEditor(t):this.setFocused(n,!0)}return!0},k.prototype._doTab=function(e,i,t,o,n,r){var s=t.clone(),a=!1;if(e.isValid(s)){if(i.useTabKey){var l=i.exitGridWhenTab;if(n){if(i.crossWhenExitLast&&(s.isFirst||i.skipReadOnly&&s.isEditableFirst)&&0<s.itemIndex?(s.up(),s.end()):(s.prev(),this._getPrevVisible(e,s)),i.skipReadOnly&&!this._skipReadOnly(s,-1)&&s.assign(t),kt.CellIndex.areEquals(s,t)&&l){switch(l){case"row":a=!0;break;case"grid":a=s.itemIndex<=0}if(a)return ne.Utils.isMobile()||e.container._containerDom.setAttribute("tabindex","-1"),!1}}else{if(i.crossWhenExitLast&&(s.isLast||i.skipReadOnly&&s.isEditableLast)&&s.itemIndex<e.itemCount-1)s.down(null,i.skipReadOnly&&s.isEditableLast&&i.crossWhenExitLast),s.home();else if(i.commitWhenExitLast&&s.isLast){try{e.commit(i.commitWhenNoEdit)}catch(t){throw t instanceof It.ValidationError&&(t=e._fireValidationFail(s.itemIndex,t.column,t))&&alert(i.showOnlyValidationMessage&&t.userMessage?t.userMessage:t.toString()),t}i.appendWhenExitLast&&(e.append(),e.isItemEditing()&&(s.down(),s.home()))}else s.next(),this._getNextVisible(e,s);if(i.skipReadOnly&&!this._skipReadOnly(s,1)&&s.assign(t),kt.CellIndex.areEquals(s,t)&&l){switch(l){case"row":a=!0;break;case"grid":a=s.itemIndex>=e.itemCount-1}if(a)return!1}}return kt.CellIndex.areEquals(s,t)||this.setFocused(s,!0),ne.Utils.isMobile()&&r&&r.preventDefault&&r.preventDefault(),!0}}else s.normalize(e),this._skipReadOnly(s,1);return n&&!ne.Utils.isMobile()&&e.container._containerDom.setAttribute("tabindex","-1"),!1},k.prototype._getNextVisible=function(t,e){t.getBodyViewAt(e).getNextVisibleCell(e)},k.prototype._getPrevVisible=function(t,e){t.getBodyViewAt(e).getPrevVisibleCell(e)},k.prototype._checkReadOnly=function(t){var e=this.grid;if(!e.isValid(t))return!0;var i=e.canWriteAt(t);return null!=i?!i:!t.dataColumn.isWritable()},k.prototype._skipReadOnly=function(t,e){var i=!1;if(this.grid.editOptions.skipReadOnly){var o=this._skipIndex;if(o.assign(t),!(i=!this._checkReadOnly(o)))if(0<e){for(;o.next();)if(!this._checkReadOnly(o)){t.assign(o),i=!0;break}}else for(;o.prev();)if(!this._checkReadOnly(o)){t.assign(o),i=!0;break}}return i},k.prototype._skipReadOnlyCell=function(t,e,i){var o=this.grid,n=!t.dataColumn.isWritable()&&!0;if(!n&&o.editOptions.skipReadOnlyCell){var r=this._skipIndex;r.assign(t),n=!this._checkReadOnly(r)}return n},k.prototype._commitCancel=function(e,i){var o=this.grid;try{switch(e.itemState){case dt.ItemState.INSERTING:return o.commit(i.forceInsert)||o.cancel(!0),!0;case dt.ItemState.APPENDING:return o.commit(i.forceAppend)||o.cancel(!0),!0;case dt.ItemState.UPDATING:return o.commit(i.commitWhenNoEdit)||o.cancel(!0),!0}}catch(t){if(t instanceof It.ValidationError)return(t=o._fireValidationFail(e.index,t.column,t))&&alert(i.showOnlyValidationMessage&&t.userMessage?t.userMessage:t.toString()),!1;if(t instanceof It.AbortError)return!1;throw t}return!1},k.prototype._doColumnHeaderClicked=function(t,e){},k.prototype._editButtonClicked=function(t){},k);function k(t,e){var i=D.call(this,t,e)||this;i._rowBlockStart=-1,i._rowBlockEnd=-1;var o=t.doc,n=i._grid=t.gridView;return i._skipIndex=n.getIndex(),i._tempIndex=n.getIndex(),n.addFeedbackElement(i._rowBlockMask=new d(o)),n.addFeedbackElement(i._rowFocusView=new O(o)),n.addFeedbackElement(i._focusMask=new a(o)),n.addFeedbackElement(i._innerFocusMask=new a(o,!0)),i}e.GridTool=T;var M,L=(M=Ut.LayerElement,oe.__extends(F,M),F.prototype._doDispose=function(){M.prototype._doDispose.call(this)},F.prototype._getCssSelector=function(){return"rg-rowhover"},F.prototype._initDom=function(t){M.prototype._initDom.call(this,t),this.setImportantStyle("pointer-events","none")},F);function F(t){var e=M.call(this,t,"rowHoverView")||this;return e.visible=!1,e}e.RowHoverView=L;var V,O=(V=Ut.LayerElement,oe.__extends(N,V),N.prototype._doDispose=function(){V.prototype._doDispose.call(this)},N.prototype._getCssSelector=function(){return"rg-rowfocus"},N.prototype._initDom=function(t){V.prototype._initDom.call(this,t),this.setImportantStyle("pointer-events","none")},N);function N(t){var e=V.call(this,t,"rowFocusView")||this;return e.visible=!1,e}e.RowFocusView=O;var P,B=(P=T,oe.__extends(A,P),A.prototype._doDispose=function(){this._clickCell=null,this._clickElement=null,this._cellResizer=this._cellResizer.dispose(),this._cellMover=this._cellMover.dispose(),this._cellFeedback=this._cellFeedback.dispose(),this._rowMoverLine=this._rowMoverLine.dispose(),this._rowMoverProxy=this._rowMoverProxy.dispose(),this._colResizeReq=this._colResizeReq.dispose(),this._colMoveReq=this._colMoveReq.dispose(),this._rowMoveReq=this._rowMoveReq.dispose(),this._rowResizeReq=this._rowResizeReq.dispose(),this._headerResizeReq=this._headerResizeReq.dispose(),this._touchManager=this._touchManager&&this._touchManager.dispose(),P.prototype._doDispose.call(this)},A.prototype.$_getIndexAt=function(t,e,i,o,n){var r=t.getDataCellIndex(o,this._tempIndex),s=i.getCellAt(e,r);if(s&&s.merged){var a=e.getTableRowIndex(n),l=i.getRowIndex(a);r.itemIndex=Math.min(Math.max(s.item.index,l),s.item.index+s.rowSpan-1)}return r},A.prototype._doMouseDown=function(t){var e=t.mouseX,i=t.mouseY,o=t.ctrlKey||t.metaKey,n=t.shiftKey,r=t.altKey,s="mousedown"===t.type?t.button:0,a=this.grid,l=a.layoutManager,h=a.editOptions,d=a.focusedIndex.clone();this._hideTooltip(),a.closePopups();var u=this._clickCell=null,_=this._clickElement=null;if(0==s||a.displayOptions.rightClickable){var c=this._tempIndex,p=this.mouseEventTarget,f=0==s&&(this._getEditRequest(p,d,e,i,o,n,r)||this._getSelectRequest(p,e,i,o,n,r));if(!(f instanceof xe.GridEditRequest)||f.canFocus())if(u=this._clickCell=this._findTableCell(),_=this._clickElement=this.findElementAt(e,i,!1),u){var g=a.getTableView(u),m=g instanceof Xt.HeaderElement,y=g instanceof te.GridBodyElement,v=g instanceof Ne.RowBarContainer&&g.isRowIndicator(u);if(m||y||v){var w=a.getSelection();if(y?c=this.$_getIndexAt(a,l,g,u,i):m?(c.assign(a.focusedIndex),c.layout=g.layoutByCell(u)):(c.assign(a.focusedIndex),c.itemIndex=u.parentElement[lt.T_ROW]),m){if(o&&n)w&&this.$_resizeSelection(w,c,Wt.SelectionStyle.COLUMNS);else if(n)return}else{if(n&&w){var C=m?Wt.SelectionStyle.COLUMNS:v?Wt.SelectionStyle.ROWS:null;return void this.$_resizeSelection(w,c,C)}if(y){if(this.$_checkAppending(a.focusedIndex,!0,c))return this._clickElement=null,void(this._clickCell=null);kt.CellIndex.areEquals(c,this.focused)&&h.editWhenClickFocused?a.showEditor():this.setFocused(c,!0)}else if(v&&!(f instanceof xe.RowResizeRequest)&&a.rowIndicator.selectable){null==c.column&&c.item.isDataRow&&(c.layout=a.getFirstLayout()),a.displayOptions.saveSelectionStyle(Wt.SelectionStyle.ROWS);try{this.setFocused(c,!0),Wt.isRowSelection(w)||a.selections.clearAndAdd(c,c,Wt.SelectionStyle.ROWS)}finally{a.displayOptions.restoreSelectionStyle()}}}}}else qt.isItemElement(_)&&(c.assign(a.focusedIndex),c.itemIndex=_.itemIndex,this.setFocused(c,!0));!f||a.isItemEditing()&&f.selectable||(this.dragTracker=this._getDragTracker(f,e,i))}a.$_resetHovering(e,i);var x=this.dragTracker;x&&x.startWhenCreated&&(x instanceof Ie.SelectTracker&&t.shiftKey?this._startDragTracker(e,i,n):this._startDragTracker(e,i,!1))},A.prototype.$_checkOtherGridRowMoving=function(t,e){var i=this.grid,o=i.container,n=o.getMouseContainer();if(n&&n!==o)if(o.findContainer(t)!==o)i.removeFeedbackElement(this._rowMoverLine);else if(e instanceof be.RowMoveTracker){var r=o.eventToContainer(t),s=o.findElementAt(r.x,r.y,!1);if(0==i.itemCount||s instanceof Qt.RowElement||s instanceof Te.RowBarElement||s instanceof Ne.RowBarContainer){var a=be.RowMoveTracker.updateLineFeedback(i,Number.MAX_VALUE,1,this._rowMoverLine,r.x,r.y,!0),l=i.canMoveRow(!0)&&i.dataDropOptions.getEnabled(n.gridView,e.sourceItems,a),h=i.dataDropOptions.getLabel(n.gridView,e.sourceItems,a);return e.setEnabled(l),e.setLabel(h),i.addFeedbackElement(this._rowMoverLine),l?a:-1}s&&e.setEnabled(!1),i.removeFeedbackElement(this._rowMoverLine)}return-1},A.prototype.dragFrom=function(t,e){e instanceof be.RowMoveTracker&&this.$_checkOtherGridRowMoving(t,e)},A.prototype.dropFrom=function(t,e){if(e instanceof be.RowMoveTracker){var i=this.grid,o=0==i.itemCount?0:this.$_checkOtherGridRowMoving(t,e);i.removeFeedbackElement(this._rowMoverLine),0<=o&&i.$_dropData(e.grid,e.sourceItems,o)}},A.prototype.cancelFrom=function(t){var e=this.grid;t instanceof be.RowMoveTracker&&e.removeFeedbackElement(this._rowMoverLine)},A.prototype._doMouseMove=function(t){var e=t.mouseX,i=t.mouseY,o=t.ctrlKey||t.metaKey,n=t.shiftKey,r=t.altKey,s=this.grid,a=s.layoutManager;s.$_resetHovering(e,i)||this._hideTooltip();var l=this._getEditRequest(this.mouseEventTarget,s.focusedIndex,e,i,o,n,r);if(l&&l.cursor?s.setCursor(this.mouseEventTarget,l.cursor):s.setCursor(this.mouseEventTarget,"default"),!l&&!this.dragging){var h=this._findTableCell(),d=h&&s.getTableView(h);if(d instanceof te.GridBodyElement){var u=d.bodyCellByCell(h);if(u&&u.merged&&u.buttons&&!(u=u.head).contains(s.focusedIndex)){var _=this.$_getIndexAt(s,a,d,h,i),c=d.getRowView(u.item);c instanceof Qt.RowElement&&c.moveCellButtons(a,u,_.itemIndex)}}}},A.prototype._doMouseUp=function(t){var e=t.mouseX,i=t.mouseY,o=(this.findElementAt(e,i,!1),this._findTableCell()),n=this.grid;if(n.setCursor(this.mouseEventTarget,"default"),o&&o==this._clickCell&&"header"===n.getCellType(o)&&!(this._getEditRequest(this.mouseEventTarget,n.focusedIndex,e,i,!1,!1,!1)instanceof xe.ColumnResizeRequest)){var r=n.getHeaderView(o).columnByCell(o);r&&this.$_columnHeaderClicked(t,r)}},A.prototype._doClick=function(t,e,i){e=e||t.mouseX,i=i||t.mouseY;var o=this.grid,n=(this.focused,this.findElementAt(e,i,!1)),r=this._findTableCell(),s=ne.getWin(t.target);if(r&&r==this._clickCell){var a=o.getCellType(r);switch(a){case"head":this.$_gridCellClicked(I.getSub(a,o.headView.getCellType(r))),t.target instanceof s.HTMLInputElement&&this._checkAllClicked();break;case"foot":this.$_gridCellClicked(I.getSub(a,o.footView.getCellType(r)));break;case"indicator":case"state":this.$_gridCellClicked(I.getItem(a,o.rowBarContainer.rowOf(r)));break;case"check":this.$_checkCellClicked2(r,t),this.$_gridCellClicked(I.getItem(a,o.rowBarContainer.rowOf(r)));break;case"header":var l=o.getHeaderView(r);this.$_gridCellClicked(I.getLayout(a,l.layoutByCell(r)));break;case"data":var h=o.getBodyView(r).bodyCellByCell(r);if(h.grouped)this.$_gridCellClicked(I.getItem("groupHeader",h.item.index));else{if(h.isCellButton(t.target))return this.$_cellButtonClicked(h),void(o.editOptions.exceptDataClickWhenButton||this.$_gridCellClicked(I.getCell(a,h)));if(h.isEditButton(t.target))return h.getEditIndex(this._tempIndex),ne.Utils.isMobile()?o.showEditList(this._tempIndex):this._editButtonClicked(this._tempIndex),void this.$_gridCellClicked(I.getCell(a,h));var d=h.renderer2;if(d&&this.$_performRendererClick(h,t))return void(o.editOptions.exceptDataClickWhenButton&&d.itemClickable||this.$_gridCellClicked(I.getCell(a,h)));this.$_gridCellClicked(I.getCell(a,h))}break;case"footer":var u=o.getFooterView(r).tableCellByCell(r);this.$_gridCellClicked(I.getSummary(a,u.summaryIndex,u.layout));break;case"summary":var _=o.getSummaryView(r).tableCellByCell(r);this.$_gridCellClicked(I.getSummary(a,_.summaryIndex,_.layout));break;case"sum":this.$_gridCellClicked(I.getSub(a,o.sumView.getCellType(r)));break;case"groupFooter":var c=o.getBodyView(r).bodyCellByCell(r);this.$_gridCellClicked(I.getGroupFooter(a,c.item.index,c.layout));break;case"groupHead":case"groupFoot":var p=r[lt.T_LEV];this.$_gridCellClicked(I.getGroupElt(a,p));break;case"groupBar":var f=r[lt.T_ROW];this.$_gridCellClicked(I.getItem(a,f))}}else if(n&&n===this._clickElement){if(qt.isItemElement(n))return void this.$_gridCellClicked(I.getItem("groupHeader",n.itemIndex));var g=this._getClickData(n);g&&this.$_gridCellClicked(g)}},A.prototype._getClickData=function(t){},A.prototype.$_commitRendererEdit=function(e,t,i){var o=t.item,n=t.dataField,r=t.dataColumn,s=!1;try{(s=e.editorCommit(t,o.getData(n),i))&&(e.undoable?e.execute(new De.EditValueCommand(t.item,n,i,t.column)):o.setData(n,i))}catch(t){if(!e.editOptions.showCommitError)throw t;alert(t.message||t)}if(s&&e.isCellEditing()){var a=e.itemSource,l=a.editingItem.invalidFields;if(r.error)return l.push(r.dataIndex),void(e.editOptions.showCommitError&&alert(r.error));if(0<=l.indexOf(r.dataIndex)&&l.splice(l.indexOf(r.dataIndex),1),0<l.length)return;a.commit()||a.cancel()}},A.prototype.$_performRendererClick=function(t,e){var i=t.renderer2;if(i){var o=this.grid,n=i.index;if(o.canWriteAt(n)&&i.canEdit()&&kt.CellIndex.areEquals(n,o.focusedIndex)&&i.canEditClickAt(e)&&o.edit(n)){var r=i.editClick(n,e);if(r)return r.commit&&this.$_commitRendererEdit(o,n,r.value),!0}if(i.canClick(e)){var s=i.click(n,e);if(s)return!1===o._fireCellItemClicked(n,s)&&i.preventDefaultClick(e),!0}return i.preventDefaultEditClick(e),!1}},A.prototype.$_performRendererKey=function(t,e){var i=t.renderer2;if(i){var o=this.grid,n=i.index,r=o.canWriteAt(n)&&i.canEdit();if(kt.CellIndex.areEquals(n,o.focusedIndex))if(r&&i.canEditKey(e)){if(o.edit(n)){var s=i.editKey(n,e);if(s)return s.commit&&this.$_commitRendererEdit(o,n,s.value),!0}}else if(i.canClickSpaceKey(e)){var a=i.click(n,e);if(a)return!1!==o._fireCellItemClicked(n,a)&&i.itemClick(),!0}else if(32===e.keyCode&&o.editOptions.buttonClickWhenSpace)return t.button===lt.CellButton.ACTION||t.button===lt.CellButton.POPUP?(o.closePopups(),this.$_cellButtonClicked(t)):this.$_gridCellClicked(I.getCell(o.getCellType(t.cell),t)),!0}},A.prototype._doDblClick=function(t){var e=t.mouseX,i=t.mouseY,o=t.ctrlKey||t.metaKey,n=t.shiftKey,r=t.altKey,s=this.grid,a=s.layoutManager,l=this.focused,h=this.findElementAt(e,i,!1),d=this._findTableCell();if(d&&d==this._clickCell){var u=s.getCellType(d);switch(u){case"head":this.$_gridCellDblClicked(I.getSub(u,s.headView.getCellType(d)));break;case"foot":this.$_gridCellDblClicked(I.getSub(u,s.footView.getCellType(d)));break;case"indicator":case"state":case"check":this.$_gridCellDblClicked(I.getItem(u,s.rowBarContainer.rowOf(d)));break;case"header":var _=s.getHeaderView(d);this.$_gridCellDblClicked(I.getLayout(u,_.layoutByCell(d)));var c=this._getEditRequest(this.mouseEventTarget,s.focusedIndex,e,i,o,n,r);if(c instanceof xe.ColumnResizeRequest){var p=c.layout;p instanceof Tt.CellLayoutColumnItem&&s.fitLayoutWidth(p)}break;case"data":var f=s.getBodyView(d),g=f.bodyCellByCell(d),m=this.$_getIndexAt(s,a,f,d,i);g.grouped?this.$_gridCellDblClicked(I.getItem("groupHeader",g.item.index)):(this.$_gridCellDblClicked(I.getCell(u,g)),kt.CellIndex.areEquals(m,l)&&s.showEditor(m));break;case"footer":var y=s.getFooterView(d).tableCellByCell(d);this.$_gridCellDblClicked(I.getSummary(u,y.summaryIndex,y.layout));break;case"summary":var v=s.getSummaryView(d).tableCellByCell(d);this.$_gridCellDblClicked(I.getSummary(u,v.summaryIndex,v.layout));break;case"sum":this.$_gridCellDblClicked(I.getSub(u,s.sumView.getCellType(d)));break;case"groupFooter":var w=s.getBodyView(d).bodyCellByCell(d);this.$_gridCellDblClicked(I.getGroupFooter(u,w.item.index,w.layout));break;case"groupHead":case"groupFoot":var C=d[lt.T_LEV];this.$_gridCellDblClicked(I.getGroupElt(u,C));break;case"groupBar":var x=d[lt.T_ROW];this.$_gridCellDblClicked(I.getItem(u,x))}}else if(h&&h===this._clickElement){if(qt.isItemElement(h))return void this.$_gridCellDblClicked(I.getItem("groupHeader",h.itemIndex));var b=this._getClickData(h);b&&this.$_gridCellDblClicked(b)}},A.prototype._doMouseWheel=function(t){var e=this.grid,i=e.displayOptions;if(!i.wheelEnabled||t.ctrlKey)return!1;if((t.shiftKey||Math.abs(t.deltaX)>Math.abs(t.deltaY))&&0!==i.wheelScrollHorz){var o=e.leftPos,n=Math.abs(i.wheelScrollHorz||16)*(0<(t.deltaX||t.deltaY)?1:-1);return e.leftPos=o+n,!0}var r=e.topIndex,s=Date.now(),a=Math.abs(i.wheelScrollLines);if(a=a||3,0<i.wheelAccelDelay)if(s>this._prevScroll+300)this._checkScroll=s;else if(this._checkScroll+i.wheelAccelDelay<s){e.itemCount;var l=i.wheelAccelScroll;if(l&&!isNaN(l))a=parseInt(l);else if("string"==typeof l){var h=l.trim();if(0<h.indexOf("%")){var d=e.itemCount;a=parseInt(h.substr(0,h.length-1))/100*d}}}return this._prevScroll=s,e.topIndex=e.topIndex+(0<t.deltaY?a:-a),!i.wheelEventPropagate||r!=e.topIndex},A.prototype._doMouseEnter=function(t){},A.prototype._doMouseLeave=function(t){var e=t.mouseX,i=t.mouseY;this._hideTooltip(),this.$_setHoveredHeaderCell(null,e,i),this.$_setHoveredCell(null,e,i)},A.prototype._doMouseOver=function(t){},A.prototype._doContextMenu=function(t){return this.grid.doContextMenu(t)},A.prototype.$_doHome=function(t,e,i){var o=t.clone();if(t.first(),i&&this._checkReadOnly(t)&&!this._skipReadOnlyCell(t,1,o))return t.assign(e),!0},A.prototype.$_doEnd=function(t,e,i){var o=t.clone();if(t.last(),i&&this._checkReadOnly(t)&&!this._skipReadOnlyCell(t,-1,o))return t.assign(e),!0},A.prototype._doKeyDown=function(t){var e,i=t.keyCode,o=t.ctrlKey,n=ne.Utils.isMac,r=n&&t.metaKey||!n&&t.ctrlKey,s=t.shiftKey,a=t.altKey,l=this.grid,h=l.editOptions,d=l.layoutManager,u=l.popupMenuManager,_=h.skipReadOnly,c=h.skipReadOnlyCell,p=l.focusedIndex,f=p.clone(),g=h.verticalMoveStep;if(!l._fireKeyDown(t))return!0;if(p){var m=l.getBodyCellAt(p);if(m&&this.$_performRendererKey(m,t))return!0}if(u.isShow()&&ne.Utils.included(i,37,39,38,40,13,32))return u.keyDown(t),!0;if(27==i)l.closePopups(),this._doCancel(l);else{if(13==i)return this._doEnter(l,h,f);if(9==i)return this._doTab(l,h,f,o,s,t);if(113==i)!l.isEditing()&&f.dataColumn&&l.showEditor(f,s);else{if(ne.Utils.isMac&&t.metaKey&&t.shiftKey&&90===t.keyCode)return l.redo();if(90==i&&r)return l.undo();if(89==i&&r)return l.redo();if(45==i)h.appendWhenInsertKey||0==l.itemCount?l.append():l.insert(f.item,t.shiftKey,o);else{if(46==i)return o&&s?(l.revertSelection(),!0):o?(l.deleteSelection(),!0):!!s&&(l.eraseSelection(),!0);if(a&&s&&40==i)l.moveSelection(1);else if(a&&s&&38==i)l.moveSelection(-1);else if(32==i&&s&&r&&l.rowBarContainer.rowIndicator.visible){var y=l.selections.getItem(0);if(!y||y.style!==Wt.SelectionStyle.BLOCK&&y.style!==Wt.SelectionStyle.ROWS)l.toggleCheck(f.itemIndex);else{var v=y.getItems();l.toggleChecks(v,f.item)}}else if(ne.Utils.included(i,36,35,39,37,40,38,34,33)){ne.Utils.isMobile()&&t&&t.preventDefault&&t.preventDefault();var w=l.itemCount;if(40==i&&0==w)return l.append(),!0;if(!l.isValid(f))return f.normalize(l),this.setFocused(f,!0),!0;if((ne.Utils.included(i,40,34)||35==i&&o)&&f.isBottom&&this.$_checkAppending(f))return!0;if((ne.Utils.included(i,38,33)||36==i&&o)&&f.isTop&&this.$_checkAppending(f,!0))return!0;var C=l.getBodyViewAt(f);if(!C)return!0;switch(i){case 36:if(o){if(this.$_doHome(f,p,_))break}else f.home(),this._skipReadOnly(f,1);break;case 35:if(o){if(this.$_doEnd(f,p,_))break}else f.end(),this._skipReadOnly(f,-1);break;case 39:if(C.spanRight(d,f),f.right(),_&&this._checkReadOnly(f)&&!this._skipReadOnly(f,1)){f.assign(p);break}break;case 37:if(f.left(),_&&this._checkReadOnly(f)&&!this._skipReadOnly(f,-1)){f.assign(p);break}break;case 38:if(n&&r){this.$_doHome(f,p,_);break}try{if(0==f.itemIndex&&f.isTop){if(this.$_commitCancel(f.item,h))return!0;o&&n?f.first():f.up(g)}else o&&n?f.first():o?l.topIndex--:f.up(g,l.isItemEditing(f.item))}finally{c&&this._checkReadOnly(f)&&(this._skipReadOnlyCell(f,-1)||f.assign(p))}break;case 33:if(o&&!n)return l.topIndex=l.topIndex-d.fullItemCount,!0;if(e=f.clone(),f.incRow(-d.fullItemCount),_&&this._checkReadOnly(f)&&!this._skipReadOnlyCell(f,1,e)){f.assign(p);break}break;case 40:if(n&&r){this.$_doEnd(f,p,_);break}try{if(f.itemIndex!=w-1||!f.isBottom&&g!=kt.VerticalMoveStep.ROW)if(o&&n)f.last();else{if(o)return l.topIndex=l.topIndex+1,!0;f.down(g,l.isItemEditing(f.item))}else{if(f.isBottom&&this._commitCancel(f.item,h))return!0;l.append(),o&&n?f.last():f.down(g,l.isItemEditing(f.item))}}finally{c&&this._checkReadOnly(f)&&(this._skipReadOnlyCell(f,1)||f.assign(p))}break;case 34:if(f.itemIndex==l.itemCount-1&&f.isBottom&&dt.ItemState_isInserting(f.item.itemState))return l.commit(h.forceAppend),!0;if(o&&!n)return l.topIndex=l.topIndex+d.fullItemCount,!0;if(e=f.clone(),f.incRow(d.fullItemCount),_&&this._checkReadOnly(f)&&!this._skipReadOnlyCell(f,-1,e)){f.assign(p);break}}return C.spanHead(d,f),s&&0<l.selections.count&&!Wt.isSingleSelectionStyle(l.displayOptions.selectionStyle)?(this.setFocused(f,!1),l.selections.getItem(0).resizeTo(f)):this.setFocused(f,!0),!0}}}}return P.prototype._doKeyDown.call(this,t)},A.prototype._doKeyPress=function(t){this.grid._fireKeyPress(t)},A.prototype._doKeyUp=function(t){if(ne.Utils.isIE){var e=t.ctrlKey,i=t.keyCode,o=this.grid;90===i&&e&&o.undo()}this.grid._fireKeyUp(t)},A.prototype._editButtonClicked=function(t){this.grid.makeCellVisible(t),this.grid.showEditor(t)&&this.grid.editorButtonClicked(t),P.prototype._editButtonClicked.call(this,t)},A.prototype._getSelectRequest=function(t,e,i,o,n,r){var s=this.grid,a=s.displayOptions,l=a.selectionMode,h=a.selectionStyle,d=this._findTableCell(t);if(!d)return null;var u=s.getCellType(d);if("indicator"==u){if(s.rowIndicator.selectable&&l!=Wt.SelectionMode.NONE&&h!=Wt.SelectionStyle.NONE&&!Wt.isSingleSelectionStyle(h))return new xe.SelectRequest(s.getIndex(s.rowBarContainer.getCellIndex(d)),Wt.SelectionStyle.ROWS)}else if("header"==u){if(o){var _=s.headerView.columnByCell(d);if(s.rowIndicator.selectable&&l!=Wt.SelectionMode.NONE&&h!=Wt.SelectionStyle.NONE&&!Wt.isSingleSelectionStyle(h))return new xe.SelectRequest(s.getIndex(-1,_),Wt.SelectionStyle.COLUMNS)}}else if("data"==u){var c=s.getDataCellIndex(d);if(l!=Wt.SelectionMode.NONE&&h!=Wt.SelectionStyle.NONE&&!Wt.isSingleSelectionStyle(h)&&!ne.Utils.isMobile())return new xe.SelectRequest(c,h);this.grid.displayOptions.selectionStyle}return null},A.prototype._getEditRequest=function(t,e,i,o,n,r,s){var a=ne.getDocWin(this.grid.doc),l=this.grid,h=l.layoutManager,d=l.displayOptions,u=this._findTableCell(t);if(!u)return null;var _=l.getTableView(u),c=this.$_getRowResizeRequest(_,u,i,o,n,r,s);if(c)return c;if(_ instanceof Ne.RowBarContainer&&_.isRowIndicator(u)){if(s&&(ne.Utils.isIE||ne.Utils.isEdge)&&(s=n),s&&l.canMoveRow(!1)){var p=l.getSelection(),f=l.rowBarContainer.rowOf(u),g=!1;if(p?g=p.containsItem(f):f==e.itemIndex&&(g=!0),g)return this._rowMoveReq.init(p,f)}}else if(_ instanceof Xt.HeaderElement){if(t instanceof a.HTMLInputElement)return null;if(!n){var m=_.layoutByCell(u);if(m){var y=l.cellToContainer(u,this._reqPoint.setEmpty());if(d.columnResizable&&m._isResizable()&&(l.fixedOptions.resizable||m.root.vindex>=h.fixedLayoutCount&&m.root.vindex<h.rightFirstLayout)){var v=l.headerView.tableCellByLayout2(h,m);if(y.x+=v?v.width:m.cellWidth,i>=y.x-3&&i<=y.x+3)return this._colResizeReq.init(m,i,o,i-y.x)}if(d.columnMovable&&m._isMovable()&&(!m.isRoot||l.canMoveLayout(m)))return this._colMoveReq.init(m,i,o,i-y.x)}}}else if(_ instanceof te.GridBodyElement){var w=l.getDataCellIndex(u);if(f=w&&w.itemIndex,l.canMoveRow(!1)&&0<=f){var C=!1;if(p=l.getSelection(),(v=l.getBodyCellAt(w,!0)).expander===t)return null;if(s&&(ne.Utils.isIE||ne.Utils.isEdge)&&(s=n),p?(C=p.containsItem(f))&&!s&&(C=p.containsLayout(w.layout)&&this._canMoveRowAt(_,w,i)):e&&f==e.itemIndex&&(C=!!s||kt.CellIndex.areEquals(w,e)&&this._canMoveRowAt(_,w,i)),C)return this._rowMoveReq.init(l.getSelection(),f)}}else if(_ instanceof _e.GridHeadElement){var x=_.boundsByContainer();if(l.header.resizable&&o<=x.bottom+1&&o>=x.bottom-2)return this._headerResizeReq.init(x.top,o-x.bottom-1)}},A.prototype.$_resizeSelection=function(t,e,i){var o=this.grid.selections,n=t?t.runStyle:i;if(!Wt.isSingleSelectionStyle(n)&&ne.Utils.included(i,Wt.SelectionStyle.ROWS,Wt.SelectionStyle.COLUMNS,Wt.SelectionStyle.SINGLE_COLUMN)&&(n=i),t){if(t.runStyle!=n){this.grid.selections.clear();var r=t.getBounds();t=o.add(r.firstCell,r.lastCell,n)}o.canResize(t)&&t.resizeTo(e)}else t=o.add(e,e,n)},A.prototype._canMoveRowAt=function(t,e,i){return i<t.boundsByContainer(t.getCellRectAt(this.grid.layoutManager,e,!1)).x+20},A.prototype.$_getRowResizeRequest=function(t,e,i,o,n,r,s){var a=-1;if(t instanceof Ne.RowBarContainer&&(a=e.parentElement.$_row),a<0)return null;var l=this.grid,h=l.layoutManager,d=l.displayOptions,u=d.eachRowResizable&&!n,_=h.fixedItemCount,c=h.contentBounds.y,p=t.boundsByContainer(this._tempRect.setWidth(t.width));if(p.width<=0||i<p.x||i>=p.right)return null;if(a<_){if(l.fixedOptions.rowResizable&&((p=h.getItemRect(a)).y+=c,o<=p.bottom+1&&o>=p.bottom-2))return this._rowResizeReq.init(a,u,p.y,o-p.bottom-1)}else if(d.rowResizable)for(var f=h.itemCount,g=l.topIndex,m=0;m<f;m++){var y=m+g+_;if(y==a&&((p=h.getItemRect(m+_)).y+=c,o<=p.bottom+1&&o>=p.bottom-2))return this._rowResizeReq.init(y,u,p.y,o-p.bottom-1)}return null},A.prototype._getDragTracker=function(t,e,i){if(t instanceof xe.SelectRequest)switch(t.style){case Wt.SelectionStyle.ROWS:return new Ie.RowsSelectTracker(t,e,i);case Wt.SelectionStyle.COLUMNS:return new Ie.ColumnsSelectTracker(t,e,i);case Wt.SelectionStyle.BLOCK:return new Ie.BlockSelectTracker(t,e,i)}else{if(t instanceof xe.ColumnResizeRequest)return new be.ColumnResizeTracker(t,this._cellResizer);if(t instanceof xe.ColumnMoveRequest)return new be.ColumnMoveTracker(t,this._cellFeedback,this._cellMover);if(t instanceof xe.RowResizeRequest)return new be.RowResizeTracker(t,this._cellResizer);if(t instanceof xe.RowMoveRequest)return new be.RowMoveTracker(t,this._rowMoverProxy,this._rowMoverLine);if(t instanceof xe.HeaderResizeRequest)return new be.HeaderResizeTracker(t,this._cellResizer)}return null},A.prototype.$_checkCellClicked2=function(t,e){var i=ne.getWin(t),o=this.grid,n=o.rowBarContainer.getCheckBox(t);e.target instanceof i.HTMLSpanElement&&(n.checked=!n.checked);var r=o.getItem(t.parentElement[lt.T_ROW]);this._doCheck(n,r,e.shiftKey)},A.prototype._doCheck=function(t,e,i){var o=this.grid,n=o.checkBar,r=o.rowBarContainer.checkBar;if(o.editOptions.checkable){var s=o.checkBar;if(e.checkable&&(s.showGroup||0<=e.dataRow)&&t){var a=e.index,l=r._prevChecked;if(o.makeItemVisible(a),i&&0<=l&&!n.exclusive){for(var h=o.getItem(r._prevChecked),d=[],u=Math.min(l,a);u<=Math.max(l,a);u++){var _=o.getItem(u);_.checkable&&0<=_.dataRow&&d.push(_)}0<d.length&&o.itemSource.checkItems(d,h.checked,!0)}else o.itemSource.checkItem(e,t.checked,s.exclusive,!0),r.$_setPrevChecked(e.index)}}},A.prototype._checkAllClicked=function(){var t=this.grid;if(!t.empty&&t.editOptions.checkable){var e=t.checkBar,i=t.headView;e.showAll&&!e.exclusive&&(i.allChecked=!i.allChecked,t.itemSource.checkAll(i.allChecked,e.visibleOnly,e.checkableOnly,!0,e.showGroup))}},A.prototype._doColumnHeaderClicked=function(t,e){if(P.prototype._doColumnHeaderClicked.call(this,t,e),2!=t.button){var i=e,o=this.grid;if(i){var n=o.getHeaderView(this._clickCell).tableCellByCell(this._clickCell);if(t.target===n.check)n.check.checked=i.checked=!i.checked,o._columnCheckedChanged(i);else if(t.target===n.filter&&i.hasFilters)o.selectColumnFilters(n);else if(t.target===n.popup){var r=e.header.popupMenuName,s=o.getCellViewOf(n.cell);r&&s&&o.popupMenuManager.show(r,s,null)}else i.sortable&&o.sortingOptions.enabled&&o.sortColumn(i,t)}}},A.prototype.$_columnHeaderClicked=function(t,e){t.button,this._doColumnHeaderClicked(t,e),t.preventDefault()},A.prototype.$_gridCellClicked=function(t){this.grid._fireCellClicked(t)},A.prototype.$_gridCellDblClicked=function(t){this.grid._fireCellDblClicked(t)},A.prototype.$_setHoveredCell=function(t,e,i){var o=this.grid,n=this._findTableCell();if(t&&n){var r=o.getTableView(n),s=this.$_getIndexAt(o,o.layoutManager,r,n,i);if(t!==this._tooltipCell||!kt.CellIndex.areEquals(this._tooltipIndex,s)){this._hideTooltip(e,i),this._tooltipShowTimer&&clearTimeout(this._tooltipShowTimer);var a=o.displayOptions.hintDelay;if(t)if(0<a){var l=this;this._tooltipShowTimer=setTimeout(function(){l.$_showTooltip2(t,s)}.bind(l),a)}else this.$_showTooltip2(t,s)}}},A.prototype._hideTooltip=function(t,e){this.grid.tooltipManager.close(t,e)&&(this._tooltipCell=null,this._tooltipIndex.reset())},A.prototype.$_showTooltip2=function(t,e){ne.Utils.trace("TOOLTIP...");var i=this.grid,o=e.dataColumn,n=e.item.dataId,r=i.validationManager._cellList[n]&&i.validationManager._cellList[n][o.dataIndex],s=this._tooltipOptions;if(i.editOptions.hintOnError&&o&&i.isItemEditing(t.item)&&o.error||r)s.message=r?r.message:o.error.message||o.error,this.$_showTooltip(t,e,s);else{var a=t.renderer2;if((t.item.isDataRow||t.item instanceof St.MergedGroupHeader)&&a&&a.showTooltip&&!kt.CellIndex.areEquals(e,this._tooltipIndex)){var l=a.getTooltip(t,e);if(l||i.displayOptions.showEmptyTooltip){var h=i._fireShowTooltip(e,l);h&&(this._tooltipOptions.assignFrom(h),this.$_showTooltip(t,e,this._tooltipOptions))}}}},A.prototype.$_showTooltip=function(t,e,i){var o=this.grid,n=o.tooltipManager,r=o.layoutManager;if(!n.visible||this._tooltipCell!=t){this._hideTooltip();var s=o.getBodyView(t.cell),a=s.getCellRectAt(r,e,!1),l=(a=s.boundsByContainer(a)).x,h=a.y+a.height;n.show(i,l,h,a.height,!1),this._tooltipCell=t,this._tooltipIndex.assign(e)}},A.prototype.$_showStateError=function(t){var e=this.grid,i=e.tooltipManager,o=e.layoutManager,n=this._tooltipOptions;this._hideTooltip(),n.message=t;var r=e.focusedIndex.itemIndex,s=e.rowBarContainer.boundsByContainer(),a=o.getItemBounds(r<o.fixedItemCount?r:r-o.topIndex);i.show(n,s.x,s.y+a.bottom,a.height,!0)},A.prototype.$_setHoveredHeaderCell=function(t,e,i){if(t!=this._tooltipCell){this._hideTooltip(e,i),this._tooltipShowTimer&&clearTimeout(this._tooltipShowTimer);var o=this.grid.displayOptions.hintDelay;if(0<o){var n=this;this._tooltipShowTimer=setTimeout(function(){n.$_showHeaderTooltip2(t)}.bind(n),o)}else this.$_showHeaderTooltip2(t)}},A.prototype.$_showHeaderTooltip2=function(t){var e=this.grid;if(e.header.showTooltip&&this._tooltipCell!=t&&t&&t.showTooltip){var i=t.tooltip||t.text;if(i){var o=e._fireShowHeaderTooltip(t.layout.firstColumn,i);o&&(this._tooltipOptions.assignFrom(o),this.$_showHeaderTooltip(t,this._tooltipOptions))}}},A.prototype.$_showHeaderTooltip=function(t,e){var i=this.grid,o=i.tooltipManager,n=i.layoutManager;if(!o.visible||this._tooltipCell!=t){this._hideTooltip();var r=n.getHeaderCellRect(t.layout),s=r.x,a=r.y+r.height;o.show(e,s,a,0,!0),this._tooltipCell=t}},A.prototype.$_cellButtonClicked=function(t){var e=this.grid,i=t.layout.firstColumn;if(i){var o=e.layoutManager,n=t.getEditIndex(this._tempIndex);switch(o.getMergeRoom(n),i.button){case lt.CellButton.POPUP:var r=i.popupMenuName,s=e.getCellViewOf(t.cell);r&&s&&e.popupMenuManager.show(r,s,n);break;case lt.CellButton.ACTION:e._doCellButtonClicked(n)}}},A.prototype.$_commitCancel=function(e,i){var o=this.grid;try{switch(e.itemState){case dt.ItemState.INSERTING:return o.commit(i.forceInsert)||o.cancel(!0),!0;case dt.ItemState.APPENDING:return o.commit(i.forceAppend)||o.cancel(!0),!0;case dt.ItemState.UPDATING:return o.commit(i.commitWhenNoEdit)||o.cancel(!0),!0}}catch(t){if(t instanceof It.ValidationError)return(t=o._fireValidationFail(e.index,t.column,t))&&alert(i.showOnlyValidationMessage&&t.userMessage?t.userMessage:t.toString()),!1;if(t instanceof It.AbortError)return!1;throw t}return!1},A.prototype.$_checkAppending=function(t,e,i){void 0===e&&(e=!1),void 0===i&&(i=null);var o=this.grid;if(t.itemIndex==o.itemCount-1&&dt.ItemState_isInserting(t.item.itemState)){var n=t.itemIndex;if(!i||i.itemIndex!=n){try{o.commit(o.editOptions.forceAppend,!0)?((t=t.clone()).itemIndex=n,o.isValid(t)||(t.itemIndex=o.getItemIndexOfRow(o.dataSource.rowCount-1)),this.setFocused(t,!0)):e&&(o.cancel(!0),i&&this.setFocused(i,!0))}catch(t){if(t instanceof It.ValidationError)return(t=o._fireValidationFail(n,t.column,t))&&alert(o.editOptions.showOnlyValidationMessage&&t.userMessage?t.userMessage:t.toString()),!0;if(t instanceof It.AbortError)return!0;throw t}return!0}}return!1},A.prototype._stopTapTracker=function(t){if(this.dragTracker)try{this.dragTracker=null}catch(t){throw t}},A.prototype._getTouchTracker=function(t,e,i){return null},A.prototype.onTouch=function(t,e,i){clearInterval(this._swipeTimer),this.touchManager.swipeHandler=null,this._stopTapTracker(!1);var o=this.grid,n=this._clickCell=o.getCellViewOf(t.target);return n&&o.getCellType(n)&&o.container._containerDom.focus({preventScroll:!0}),o.closePopups(),this._getTouchTracker(t,e,i),this.dragTracker?this.dragTracker:null},A.prototype.onTap=function(t,e,i){if(ne.Utils.isiOS&&this.touchManager){var o=ne.Utils.getTimer();if(this.touchManager.touchEndt+50>o)return}var n=this.grid,r=this._clickCell=n.getCellViewOf(t.target),s=n.getTableView(r);r&&s instanceof te.GridBodyElement&&n.cellToIndex(r),this._hideTooltip(),n.closeFilterSelector(),n.getCellType(r)},A.prototype.onDoubleTapHandler=function(t,e,i){var o=this.focused,n=this.grid,r=this._clickCell,s=n.getTableView(r);if("data"===n.getCellType(r)){t.mouseX=e,t.mouseY=i,this.dblclick(t),s.bodyCellByCell(r);var a=n.cellToIndex(r);n.isValid(o)&&!n.isEditing()&&kt.CellIndex.areEquals(a,o)&&n.showEditor(a.clone())}},A.prototype.onLongTapHandler=function(t,e,i){},A.prototype.onDragStartHandler=function(t,e,i,o){var n=this.dragTracker;return n&&n.start(null,i,o)?n:null},A.prototype.onDragHandler=function(t,e,i,o){var n=this.dragTracker,r=!1;if(n&&n.dragging&&!(r=n.drag(this.mouseEventTarget,i,o))){var s=n.getNextRequest(i,o);if(s)return this._stopDragTracker(i,o,!0),this.dragTracker=this._getDragTracker(s,i,o),this._startDragTracker(i,o,!1),!!this.dragTracker;this._stopDragTracker(i,o,!0),n.cancel()}return r},A.prototype.onDragEndHandler=function(t,e,i){this._stopDragTracker(t,e,i)},A.prototype.onSwipeHandler=function(t,e,i,o){var n=this.grid;if(n.getCellType(this._clickCell),n.getTableView(this._clickCell)instanceof te.GridBodyElement){var r=1;switch(i){case"right":n.leftPos=n.leftPos-e/20;break;case"left":n.leftPos=n.leftPos+e/20;break;case"bottom":r=-1;case"top":this._swipeDistance=r*e/20,this._swipeDuration=t,this._swipePrev=this._swipeStarted=ne.Utils.getTimer(),this._swipeAmount=0,this._swipeTimer=setInterval(this.$_scrollRow.bind(this),50)}}},A.prototype.$_scrollRow=function(){var t=ne.Utils.getTimer();if(t-this._swipeStarted<this._swipeDuration){var e=t-this._swipePrev,i=Math.floor((this._swipeDistance-this._swipeAmount)*e/this._swipeDuration);this._swipeAmount-=i,this._swipePrev=t,this.grid.topIndex+=i}else clearInterval(this._swipeTimer)},A.prototype.$_createTouchManager=function(t){if(!ne.Utils.isMobile())return null;var e=new Se.SingleTouchManager(t);return e.touchHandler=this.onTouch.bind(this),e.tapHandler=this.onTap.bind(this),e.doubleTapHandler=this.onDoubleTapHandler.bind(this),e.longTapHandler=this.onLongTapHandler.bind(this),e.dragStartHandler=this.onDragStartHandler.bind(this),e.dragHandler=this.onDragHandler.bind(this),e.dragEndHandler=this.onDragEndHandler.bind(this),e},A);function A(t,e){var i=P.call(this,t,e)||this;i._tooltipOptions=new Ee.TooltipOptions,i._checkScroll=Date.now(),i._prevScroll=Date.now(),i._tempRect=new ht.Rectangle,i._reqPoint=new Gt.Point,i._swipeTimer=null,i._swipeDistance=0,i._swipeDuration=0,i._swipeStarted=null,i._swipePrev=void 0,i._swipeAmount=0,i._tapX=NaN,i._tapY=NaN;var o=t.doc,n=i.grid;return i._cellResizer=new c(o),i._cellMover=new v(o),i._cellFeedback=new g(o),i._rowMoverLine=new x(o),i._rowMoverProxy=new S(o),i._colResizeReq=new xe.ColumnResizeRequest(n),i._colMoveReq=new xe.ColumnMoveRequest(n),i._rowResizeReq=new xe.RowResizeRequest(n),i._headerResizeReq=new xe.HeaderResizeRequest(n),i._rowMoveReq=new xe.RowMoveRequest(n),i._tooltipIndex=new kt.CellIndex(n),i._touchManager=i.$_createTouchManager(t),i}e.GridSelectionTool=B});t(Pe);Pe.ClickData,Pe.FocusView,Pe.FocusMask,Pe.RowBlockView,Pe.HeaderCellResizer,Pe.HeaderCellFeedback,Pe.HeaderCellMover,Pe.RowMoverLine,Pe.RowMoverProxy,Pe.GridTool,Pe.RowHoverView,Pe.RowFocusView,Pe.GridSelectionTool;var Be=e(function(t,e){Object.defineProperty(e,"__esModule",{value:!0});var i,o=(i=re.Base,oe.__extends(n,i),n.prototype._doDispose=function(){this._grid=null,i.prototype._doDispose.call(this)},_dp(n,"grid",{get:function(){return this._grid}}),n.prototype.getDefaultCellEditor=function(){if(!this._defaultEditor){var t=this._grid.container._container;this._defaultEditor=new Jt.LineCellEditor(this._grid,t),this._defaultEditor.setController(this._grid.editController)}return this._defaultEditor},n.prototype.getCellEditor=function(t){var e=this._grid.container._container,i=this._cellEditors[t];if(!i){switch(t){case"list":case"dropdown":i=new ye.DropDownCellEditor(this._grid,e);break;case"nlist":i=new ye.NativeListCellEditor(this._grid,e);break;case"multiline":i=new Jt.MultiLineCellEditor(this._grid,e);break;case"number":i=new Jt.NumberCellEditor(this._grid,e);break;case"date":i=new ve.DateCellEditor(this._grid,e);break;case"btdate":i=new ve.BTDateCellEditor(this._grid,e);break;case"search":i=new ye.SearchCellEditor(this._grid,e);break;case"checklist":i=new ye.MultiCheckCellEditor(this._grid,e);break;case"password":i=new Jt.PasswordCellEditor(this._grid,e);break;case"ndate":i=new ve.NativeDateCellEditor(this._grid,e);break;case"line":default:i=this.getDefaultCellEditor()}(this._cellEditors[t]=i)&&i.setController(this._grid.editController)}return i},n.prototype.$_checkFlexible=function(t,e){if(!ne.Utils.ieOld&&!ne.Utils.ieTen)return t&&t.flexible||e&&e.flexible},n.prototype.createRenderer=function(t,e,i){var o=null;if(t){switch(t){case xt.TextCellRenderer.TYPE:o=new xt.TextCellRenderer;break;case xt.BarCellRenderer.TYPE:o=new xt.BarCellRenderer;break;case xt.ImageCellRenderer.TYPE:o=new xt.ImageCellRenderer;break;case xt.IconCellRenderer.TYPE:o=this.$_checkFlexible(e,i)?new xt.FlexIconCellRenderer:new xt.IconCellRenderer;break;case xt.CheckCellRenderer.TYPE:o=this.$_checkFlexible(e,i)?new xt.FlexCheckCellRenderer:new xt.CheckCellRenderer;break;case xt.ButtonCellRenderer.TYPE:o=new xt.ButtonCellRenderer;break;case xt.ShapeCellRenderer.TYPE:o=this.$_checkFlexible(e,i)?new xt.FlexShapeCellRenderer:new xt.ShapeCellRenderer;break;case xt.LinkCellRenderer.TYPE:o=new xt.LinkCellRenderer;break;case xt.SignalBarCellRenderer.TYPE:o=new xt.SignalBarCellRenderer;break;case xt.Code39CellRenderer.TYPE:o=new xt.Code39CellRenderer;break;case xt.Code128CellRenderer.TYPE:o=new xt.Code128CellRenderer;break;case Zt.SeriesTextCellRenderer.SERIES_TYPE:o=new Zt.SeriesTextCellRenderer;break;case Zt.SparkLineRenderer.TYPE:o=new Zt.SparkLineRenderer;break;case Zt.SparkColumnRenderer.TYPE:o=new Zt.SparkColumnRenderer;break;case Zt.SparkWinLossRenderer.TYPE:o=new Zt.SparkWinLossRenderer;break;case bt.TemplateCellRenderer.TYPE:o=new bt.TemplateCellRenderer}if(!o){var n=this._customRenderers[t];o="function"==typeof n?new n(t):new Re.CustomCellRendererImpl(n,t)}o||(ne.Utils.log("Renderer type is invalid: "+t),o=new xt.TextCellRenderer),e&&o.assignFrom(e),i&&o.assignFrom(i)}return o},n.prototype.hasEditorButton=function(t,e){if(t)switch(t){case"list":case"dropdown":case"date":case"btdate":case"search":case"checklist":return!0;case"ndate":case"nlist":return e;case"multiline":case"number":case"line":default:return!1}return!1},n.prototype.addCustomRenderer=function(t,e){t&&e&&(this._customRenderers[t]=e)},n.prototype.removeCustomRenderer=function(t){delete this._customRenderers[t]},n.prototype.existsCustomRenderer=function(t){return this._customRenderers.hasOwnProperty(t)},n.prototype.clearCustomRenderers=function(){this._customRenderers={}},n);function n(t){var e=i.call(this)||this;return e._cellEditors={},e._customRenderers={},e._grid=t,e}e.GridDelegate=o});t(Be);Be.GridDelegate;var Ae=e(function(t,e){Object.defineProperty(e,"__esModule",{value:!0});var i,o=(i=$.EventAware,oe.__extends(n,i),_dp(n,"id",{get:function(){return this._id}}),n.prototype.exists=function(t){return!1},n.prototype._changed=function(){this.fireEvent(n.CHANGED)},n.CHANGED="onLookupSourceChanged",n);function n(t){var e=i.call(this)||this;return e._id=t,e}e.LookupSource=o;var r,s=(r=o,oe.__extends(a,r),a.prototype._doDispose=function(){this._tree=this._listMap=null,r.prototype._doDispose.call(this)},a.prototype.clear=function(){this._tree=this._listMap={},this._changed()},a.prototype.exists=function(t){var e;if((t=ne.Utils.makeArray(t))&&0<(e=t.length)&&e<=this._levels){if(0<(e=Math.min(e,this._levels)-1)){for(var i=this._tree,o=0;o<e&&(i=i[t[o]]);o++);return null!=i&&i.hasOwnProperty(t[e])}return this._tree.hasOwnProperty(t[0])}return!1},a.prototype.fill=function(t,e){if(t&&0<t.length&&e&&0<e.length){for(var i=Math.min(t.length,e.length),o=0;o<i;o++){var n=ne.Utils.makeArray(t[o]);this.$_add(n,e[o])}this._changed()}},a.prototype.fillRows=function(t){if(t&&0<t.length){for(var e=0,i=t.length;e<i;e++)this.$_addRow(t[e]);this._changed()}},a.prototype.add=function(t,e){t&&(this.$_add(t,e),this._changed())},a.prototype.addRow=function(t){t&&(this.$_addRow(t),this._changed())},a.prototype.lookup=function(t,e){var i,o;if(1<this._levels){var n=void 0,r=this._levels-1;for(i=this._tree,n=0;n<r&&(i=i[o=t[n]]);n++);}else i=this._tree;if(o=t[t.length-1],i&&o&&e){for(var s=o.split(e),a=[],l=(n=0,s.length);n<l;n++)a.push(i[s[n]]?i[s[n]]:s[n]);return a.join(e)}return i?i[o]:void 0},a.prototype.getDomain=function(t){if(!t||t.length!=this._levels-1)throw"Keys length must be "+(this._levels-1);var e,i,o=this._tree,n=[],r=[];if(1<this._levels)for(e=0,i=t.length;e<i;e++)if(t[e],!(o=o[t[e]]))return{keys:n,values:r};if(this._listMap){var s=this._listMap[t.slice(0,t.length).join("~!~")];for(i=s?s.length:0,e=0;e<i;e++)n.push(s[e]),r.push(o[s[e]])}else for(var a in o)n.push(a),r.push(o[a]);return{keys:n,values:r}},a.prototype.getTextDomain=function(t){for(var e=this.getDomain(t),i=e.keys,o=e.values,n=0,r=e.keys.length;n<r;n++)i[n]=i[n]?String(i[n]):null,o[n]=o[n]?String(o[n]):null;return e},a.prototype.$_add=function(t,e){if(t){t=ne.Utils.makeArray(t);var i,o,n,r,s=this._levels;if(t.length<s)throw Error("Keys length must be equals or greater than "+s);var a=this._tree;for(o=0;o<s-1;o++)(r=a[n=t[o]])||(r={},a[n]=r),a=r;if(a[i=t[s-1]]=e,this._listMap){var l=t.slice(0,t.length-1).join("~!~"),h=this._listMap[l];ne.Utils.isArray(h)||(h=[],this._listMap[l]=h),h.push(i)}}},a.prototype.$_addRow=function(t){if(t){if(t.length-1<this._levels)throw Error("Keys length must be equals or greater than "+this._levels);var e=t[this._levels];t=t.slice(0,this._levels),this.$_add(t,e)}},a);function a(t,e,i){void 0===e&&(e=0),void 0===i&&(i=!1);var o=r.call(this,t)||this;if(e<1)throw"LookupTable levels must be equals or greater than 1";return o._levels=e,o._tree={},o._listMap=i?{}:null,o}var l,h=(l=$.EventAware,oe.__extends(d,l),d.prototype._changed=function(){this.fireEvent(d.CHANGED)},d.CHANGED="onLookupSourceProviderChanged",d);function d(){return l.call(this)||this}e.LookupSourceProvider=h;var u,_=(u=h,oe.__extends(c,u),c.prototype.dispose=function(){return u.prototype.dispose.call(this)},c.prototype.load=function(t){if(t=ne.Utils.makeArray(t)){this._sources={};for(var e=0,i=t.length;e<i;e++)this.$_add(t[e]);this._changed()}},c.prototype.add=function(t){var e=this.$_add(t);return e&&this._changed(),e},c.prototype.remove=function(t){this.$_remove(t)&&this._changed()},c.prototype.getSource=function(t){return this._sources[t]},c.prototype.$_createSource=function(t){if(t){var e=new s(t.id,t.levels,t.ordered);return e.fill(t.keys,t.values),e}return null},c.prototype.$_add=function(t){if(t&&t.id&&this._sources[t.id]!=t){var e=this.$_createSource(t);if(e)return this.$_remove(t.id),(this._sources[t.id]=e).addListener(this),e}},c.prototype.$_remove=function(t){if(t){var e=this._sources[t];if(e)return e.removeListener(this),delete this._sources[t],!0}return!1},c.prototype.onLookupSourceChanged=function(t){this._changed()},c.CHANGED="onLookupSourceProviderChanged",c);function c(t){void 0===t&&(t=null);var e=u.call(this)||this;return e._sources={},t&&e.load(t),e}e.LocalLookupSourceProvider=_});t(Ae);Ae.LookupSource,Ae.LookupSourceProvider,Ae.LocalLookupSourceProvider;var $e=e(function(t,e){Object.defineProperty(e,"__esModule",{value:!0});var i,D=lt,o=(i=re.Base,oe.__extends(n,i),n.prototype._doDispose=function(){i.prototype._doDispose.call(this)},n.prototype.lastLayout=function(){throw new Error("Method not implemented.")},n.prototype.getText=function(t,e){throw new Error("Method not implemented.")},n.prototype.getCellText=function(t,e){throw new Error("Method not implemented.")},n.prototype.getRows=function(t,e,i){throw new Error("Method not implemented.")},n.prototype.getCell=function(t,e,i){throw new Error("Method not implemented.")},n);function n(){return i.call(this)||this}e.ClipboardData=o;var r,b=(r=re.Base,oe.__extends(s,r),s.prototype._doDispose=function(){r.prototype._doDispose.call(this)},_dp(s,"rowCount",{get:function(){return this._lines.length}}),_dp(s,"colCount",{get:function(){return this._colCount},set:function(t){this._colCount=t}}),_dp(s,"empty",{get:function(){return 0==this._lines.length||0==this._colCount}}),_dp(s,"single",{get:function(){return 1==this._lines.length&&1==this._colCount}}),_dp(s,"blockPaste",{get:function(){return this._blockPaste},set:function(t){this._blockPaste=t}}),_dp(s,"startIndex",{get:function(){return this._startIndex}}),s.prototype.get=function(t){return this._lines[t]},s.prototype._parse=function(t,e){var i,o,n,r,s,a=this._lines,l=[],h=t.length,d=0,u="";if(""===t)l.push(t),a.push(l),this._colCount=1;else{for(;d<h;)s=!1,i=t.charAt(d),o=d<h-1?t.charAt(d+1):"",'"'==i?r?n&&'"'==o?(u+=i,d++):n?n=!1:u+=i:n=r=!0:n||"\r"!=i&&"\n"!=i&&"\t"!=i?(r=!0,u+=i):("\t"==i&&(l.push(u),s=!0),"\r"!=i&&"\n"!=i||(l.push(u),this._colCount=Math.max(this._colCount,l.length),a.push(l),l=[],"\n"==o&&d++),u="",r=!1),d++;n&&(u='"'+u),(0<u.length||s)&&l.push(u),0<l.length&&(this._colCount=Math.max(this._colCount,l.length),a.push(l))}if(e&&e instanceof Wt.BlockSelection&&!e.single){var _=e.startIndex,c=e.endIndex;if(_&&c){var p=e.grid,f=_.layout,g=c.layout,m=_.itemIndex,y=c.itemIndex;if(f.col>g.col){var v=f;f=g,g=v}if(y<m){var w=m;m=y,y=w}f=p.activeCellLayout.getTopOf(f);for(var C=(g=p.activeCellLayout.getBottomOf(g,!0)).col-f.col+1,x=(g.row-f.row+1)*(y-m+1),b=d=0,I=a.length;b<I;b++){for(var E=a[b].slice(),S=E.length;S<C;S++)a[b].push(E[d]),d=d>=E.length?0:d;this._colCount=Math.max(this._colCount,a[b].length)}for(d=0,b=a.length;b<x;b++)a.push(a[d++]),d=d>=a.length?0:d;this._blockPaste=!0,this._startIndex=kt.CellIndex.temp(p,m,f)}}},s);function s(t,e){var i=r.call(this)||this;return i._colCount=0,i._blockPaste=!1,i._lines=[],i._colCount=0,i._blockPaste=!1,i._parse(t,e),i}e.ClipboardSource=b;var a,l=(a=o,oe.__extends(h,a),h.prototype._doDispose=function(){return a.prototype._doDispose.call(this)},h.prototype.lastLayout=function(){return this._lastLayout},h.prototype.getText=function(t,e){var i,o,n,r,s,a,l=t.grid,h=this._rangeToCells(t,null,e),d=[];if(l.copyOptions.includeHeaderText)for(s=0;s<h.length;s++){var u=[];for(a=0;a<h[s].length;a++)(i=ne.Utils.cast(h[s][a],Dt.DataColumn))?u.push(i.header.displayText):u.push("");d.push(u.join("\t"))}for(n=e.r1,r=e.r2;n<=r;n++){var _=l.getItem(n);if(0<=_.dataRow||dt.ItemState_isInserting(_.itemState))for(s=0;s<h.length;s++){for(u=[],a=0;a<h[s].length;a++)(i=ne.Utils.cast(h[s][a],Dt.DataColumn))&&!i.blankWhenCopy?(o=kt.CellIndex.temp(l,n,i).clone(),u.push(t.getData(o))):u.push("");d.push(u.join("\t"))}}return d.join("\r\n")+"\r\n"},h.prototype.getCellText=function(t,e){var i="";return t.grid.copyOptions.includeHeaderText&&(i=e.dataColumn.header.displayText+"\r\n"),i+=t.getData(e)},h.prototype.getRows=function(t,e,i){if(null==e)return null;var o=i.grid,n=o.pasteOptions.selectBlockPaste&&o.getSelection(),r=new b(e,n);if(r.empty)return null;if(r.single)return r.get(0)[0];r.blockPaste&&r.startIndex&&i.assign(r.startIndex);for(var s=o.activeCellLayout._dataCells,a=s[0][i.layout.col],l=s[s.length-1][Math.min(s[0].length-1,i.layout.col+r.colCount-1)],h=new kt.CellIndex(o,i.itemIndex,a),d=new kt.CellIndex(o,i.itemIndex,l),u=kt.CellRange.create(h,d),_=this._rangeToCells(t,r,u),c=void 0,p=void 0,f=void 0,g=void 0,m=[],y=0,v=r.rowCount;y<v;){var w={columns:[],values:[]};for(c=0;c<_.length&&y<v;c++,y++){var C=_[c],x=r.get(y);for(w.columns.push(C),w.values.push(g=[]),f=Math.min(x.length,C.length),p=0;p<f;p++)C[p]?g.push(x[p]):g.push("")}m.push(w)}return m},h.prototype.getCell=function(t,e,i){if(!e)return null;var o=new b(e);return o.empty?null:o.get(0)[0]},h.prototype._rangeToCells=function(t,e,i){i.normalizeData(),this._lastLayout=null;for(var o=i.c1,n=i.c2,r=t.grid.activeCellLayout._dataCells,s=o===n?o.row:0,a=o===n?o.row:r.length-1,l=[],h=s;h<=a;h++){for(var d=[],u=o.col;u<=n.col;u++){var _=r[h][u];_ instanceof Tt.CellLayoutColumnItem?d.push(_.firstColumn):d.push(null)}l.push(d)}return this._lastLayout=r[a][n.col],l},h);function h(){var t=a.call(this)||this;return t._lastLayout=null,t}e.DefaultClipboardData=l;var d,u=(d=dt.GridItem,oe.__extends(_,d),_dp(_,"isLeaf",{get:function(){return!0}}),_dp(_,"dataSource",{get:function(){return this._dataSource},set:function(t){this._dataSource=t}}),_.prototype._getExtents=function(){return 0},_.prototype._setExtents=function(t){},_dp(_,"values",{set:function(t){this._values=t}}),_dp(_,"dataRow",{get:function(){return this._dataRow},set:function(t){this._dataRow=t}}),_dp(_,"dataId",{get:function(){return this._dataSource.getRowId(this._dataRow)}}),_.prototype.getRowObject=function(){for(var t={},e=this._dataSource,i=0,o=e.fieldCount;i<o;i++){var n=e.getOrgFieldName(i),r=this._values[i];t[n]=r}return t},_.prototype.getData=function(t){return this._values[t]},_.prototype.setIndex=function(t){this._setIndex(t)},_);function _(){var t=d.call(this)||this;return t._dataSource=null,t._values=null,t._dataRow=-1,t}e.ClipboardItem=u;var c,p=(c=kt.CellIndex,oe.__extends(f,c),f.prototype._doDispose=function(){return c.prototype._doDispose.call(this)},_dp(f,"item",{get:function(){return this._item}}),f);function f(t,e){var i=c.call(this,t)||this;return i._item=e,i}e.ClipboardIndex=p;var g=(m.prototype.dispose=function(){return null},_dp(m,"grid",{get:function(){return this._grid}}),_dp(m,"appendingIndex",{get:function(){return this._appendingIndex}}),m.prototype.getDataRoots=function(){var t=this._grid._activeCellLayout._dataCells,e=[];if(t.length<0||t[0].length<0)return e;for(var i=0,o=t[0].length;i<o;i++)t[0][i].dataRoot,e.push(t[0][i].dataRoot);return e},m.prototype.getData=function(t){var e,i,o,n=this.grid,r=t.layout.firstColumn,s=n.getItem(t.itemIndex),a=n.copyOptions;if(!s||!(dt.ItemState_isInserting(s.itemState)||0<=s.dataRow))return"";if(o=s.getData(r.dataIndex),r&&null!=(e=n.dataSource.getField(r.dataIndex))){if(a.copyDisplayText)i=n.getDisplayText(t);else switch(e.dataType){case lt.ValueType.DATETIME:case lt.ValueType.DATE:i=o?String(o):"";break;case lt.ValueType.BOOLEAN:i=null!=o?String(o):"";break;case lt.ValueType.NUMBER:i=o==isNaN(o)?"":String(o);case lt.ValueType.OBJECT:i=o&&"object"==typeof o?JSON.stringify(o):"";default:i=null!=o?String(o):""}return i&&(0<=i.indexOf("\n")||0<=i.indexOf("\r\n")||'"'==i.charAt(0))&&(i='"'+(i=i.replace(/\"/g,'""'))+'"'),i}return""},m.prototype.copyEmtpyToClipboard=function(){return""},m.prototype.copyToClipboard=function(t){return this._data.getText(this,t)},m.prototype.copyCellToClipboard=function(t){return this._data.getCellText(this,t)},m.prototype.pasteCellFromClipboard=function(t,e){if((t=this._correctIndex(t))&&this._grid.isValid(t)&&null!=e){var i=this._data.getCell(this,e,t);this._pasteSingleCell(t,i)}},m.prototype.pasteFromClipboard=function(t,e,i){var o=this._grid&&this._grid.dataSource;this._appendingItem.dataSource=o;var n=t.clone();if((t=this._correctIndex(t))&&this._grid.isValid(t)){if(null!=e){var r=this._data.getRows(this,e,t);null!=r&&("string"==typeof r?this._pasteSingleCell(t,r):1==r.length?this._pasteSingleLine(t,r[0]):1<r.length&&this._pasteMultiLines(t,r,i))}kt.CellIndex.areEquals(t,n)||this._grid.setFocusedIndex(n,!1,!1)}},m.prototype._correctIndex=function(t){if(t){var e=this._grid;if(t.normalize(e),this._grid.isValid(t)&&e.pasteOptions.selectionBase&&0<e.selections.count){var i=e.selections.getItem(0).getBounds().firstCell;t.column=i.column,t.itemIndex=i.itemIndex}}return t},m.prototype._createDate=function(){return new l},m.prototype._readValue=function(t,e,i){var o=void 0;switch(t.getField(e.dataIndex).dataType){case lt.ValueType.NUMBER:o=Number(i);break;case lt.ValueType.DATETIME:o=new Date(i);break;case lt.ValueType.BOOLEAN:o=Boolean(i);break;default:o=i}return o},m.prototype._convertValue=function(t,e,i,o,n){var r=void 0,s=i.dataIndex,a=t.getField(s),l=this._grid.delegate.getCellEditor(Jt.CellEditor.getEditorType(i.editor));switch(a.dataType){case lt.ValueType.NUMBER:r=NaN;var h=void 0;if(o){var d=i.name;if(e.applyNumberFormat){var u=i.getCellStyle(null),_=l instanceof Jt.NumberCellEditor&&l.editFormat||"object"==typeof u&&u.numberFormat;_&&(h=new W.DecimalFormatter(_))}var c=e.numberCharExpOfCol(d);c&&(o=o.replace(c,""));var p=e.numberSeparatorOfCol(d);if(p&&(o=o.replace(p,".")),r=h?+parseFloat(o).toFixed(h.maxDigits):parseFloat(o),e.applyMaxLength){var f=String(r).split(".");l instanceof Jt.NumberCellEditor&&0<l.maxIntegerLength&&(f[0]=f[0].substr(0,l.maxIntegerLength)),o=f.join("."),l instanceof Jt.NumberCellEditor&&0<l.maxLength&&(o=o.substr(0,l.maxLength)),r=parseFloat(o)}}else""==o&&(r=null);break;case lt.ValueType.DATETIME:r=null;var g=e.dateReaders;if(o&&g)for(var m=0;m<g.length&&!(r=g[m].toDate(o));m++);null===r&&(r=new Date(o),isNaN(r.getTime())&&(r=null)),null===r&&(r=a.readValue(o));break;case lt.ValueType.BOOLEAN:r=void 0;var y=e.boolReader;o&&y&&(r=y.toBoolStrict(o)),void 0===r&&(r=a.readValue(o));break;default:if(o=String(o))if(l instanceof ye.DropDownCellEditor){var v=e.checkDomainOnly&&l.domainOnly,w=e.convertLookupLabel,C=-1,x=[],b=[];if(v||w)if(l.values&&0<l.values.length)b=l.values,x=l.labels;else if(i.lookupSource){var I=i.lookupSource,E=i.lookupKeyFieldIds,S=[];for(m=0;m<E.length-1;m++)S.push(n[E[m]]);var R=I.getTextDomain(S);b=R&&R.keys,x=R&&R.values}else i.values&&0<i.values.length&&(b=i.values,x=i.labels);o=w&&b&&x&&b.indexOf(o)<0&&0<=(C=x.indexOf(o))?b[C]:o,o=b&&0<=b.indexOf(o)||!v?o:""}else e.applyMaxLength&&l&&l instanceof Jt.TextCellEditor&&0<l.maxLength&&(o=o.substr(0,l.maxLength)),i.textInputCase==D.TextInputCase.LOWER?o=o.toLocaleLowerCase():i.textInputCase==D.TextInputCase.UPPER&&(o=o.toLocaleUpperCase());r=o}return r},m.prototype._removeChars=function(t,e){if(e)for(;;){var i=t.replace(e,"");if(i.length==t.length)break;t=i}return t},m.prototype._fireRowsPasted=function(t){for(var e=this._grid,i=[],o=0;o<t.length;o++)i.push(e.getItemIndexOfRow(t[o]));0<i.length&&e._fireItemsPasted(i)},m.prototype._cellWritable=function(t,e,i){var o=this._grid,n=o._fireCellPasting(t,i);if("boolean"==typeof n)return n;if(!o.pasteOptions.checkReadOnly)return!0;var r=o.body.getIndexCellStyle(t);if(r&&(null!=r.readOnly||null!=r.editable))return!r.readOnly&&r.editable;var s=o.fixedOptions;if((t.colFixed||t.rightFixed)&&!s.editable||t.rowFixed&&!s.rowEditable)return!1;var a=!0;switch(t.item&&t.item.itemState||e){case dt.ItemState.NORMAL:case dt.ItemState.FOCUSED:case dt.ItemState.UPDATING:a=o.canUpdate(t.item,t.dataField);break;case dt.ItemState.INSERTING:case dt.ItemState.APPENDING:a=!0}return a&&t.dataColumn.editable&&!t.dataColumn.readOnly},m.prototype._applyMaskValue=function(t,e){return e},m.prototype._pasteSingleCell=function(t,e){var i,o=this._grid,n=o.dataSource,r=t.dataColumn,s=o.pasteOptions;if(null!=e&&n&&r&&o.editOptions.editable&&!o.editOptions.readOnly&&t.item.canEdit()){e.lastIndexOf("\r\n")==e.length-1&&(e=e.substr(0,e.length-2)),e.lastIndexOf("\n")==e.length-1&&(e=e.substr(0,e.length-1));var a=this._convertValue(n,s,r,e,t.item&&t.item.getRowData());if(a=s.applyEditMask?this._applyMaskValue(t,a):a,this._cellWritable(t,null,a))if(o.isItemEditing()||s.startEdit&&o.edit(t)){var l=(i=t.item).getData(t.dataField);o.setCellUpdateEventLock(s.noEditEvent);try{i.setData(r.dataIndex,a)}finally{o.setCellUpdateEventLock(!1)}o.validateCellCommit(t,t.item.getData(t.dataField)),o._fireEditItemPasted(i,[t.dataField],[l],[a]),o.refreshView()}else{var h=o.validationManager,d=s.forceRowValidation,u=s.forceColumnValidation;i=t.item;var _=d||u?i.getRowData():[];_[r.dataIndex]=a,this._appendingItem.values=_;var c=dt.ItemState_isInserting(i.itemState);this._appendingItem.dataRow=i.dataRow,this._appendingItem.setIndex(i.index),this._appendingIndex.column=null,this._appendingIndex.itemIndex=t.itemIndex,d&&(h.hasRowValidation&&h.validateRow(this._appendingItem,!1,!0),o._fireValidateRow(this._appendingItem,c,this._appendingItem.getRowObject())),u&&(this._appendingIndex.column=r,h.validateCell(this._appendingIndex,!1),o._fireValidateCell(this._appendingIndex,!1,this._appendingItem.getData(r.dataIndex))),o.updatePastedRow(i,_,!d)}}},m.prototype._pasteSingleLine=function(t,e){var i,o,n,r,s,a,l,h=this._grid,d=h.dataSource,u=h.pasteOptions,_=h.editOptions,c=!1;if(d&&_.editable&&!_.readOnly&&d){if(h.isItemEditing()||u.startEdit&&h.edit(t)){var p=[],f=[],g=t.column;o=t.item;var m=[];for(n=Math.min(e.columns.length,e.values.length),r=0;r<n;r++){var y=e.columns[r],v=e.values[r];for(s=0;s<v.length;s++){var w=y[s],C=v[s];if(w){f.push(o.getData(w.dataIndex));var x=kt.CellIndex.temp(h,t.itemIndex,w);i=this._convertValue(d,u,w,C,o&&o.getRowData()),i=u.applyEditMask?this._applyMaskValue(x,i):i,h.setCellUpdateEventLock(u.noEditEvent);try{(a=this._cellWritable(x,null,i))&&o.setData(w.dataIndex,i)}finally{h.setCellUpdateEventLock(!1)}a&&(t.column=w,h.validateCellCommit(t,o.getData(w.dataIndex)),p.push(w.dataIndex),m.push(i),c=!0)}}}c&&(h._fireEditItemPasted(o,p,f,m),t.column=g,h.refreshView())}else{var b=h.validationManager,I=u.forceRowValidation,E=u.forceColumnValidation;for(o=t.item,m=I||E?o.getRowData():[],n=Math.min(e.columns.length,e.values.length),v=y=void 0,r=0;r<n;r++)for(y=e.columns[r],v=e.values[r],s=0;s<v.length;s++)(l=y[s])&&(x=kt.CellIndex.temp(h,t.itemIndex,l),i=this._convertValue(d,u,l,v[s],o&&o.getRowData()),i=u.applyEditMask?this._applyMaskValue(x,i):i,this._cellWritable(x,null,i)&&(m[l.dataIndex]=i,c=!0));if(c){var S=dt.ItemState_isInserting(o.itemState);if(this._appendingItem.values=m,this._appendingItem.setIndex(o.index),this._appendingItem.dataRow=o.dataRow,this._appendingIndex.column=null,this._appendingIndex.itemIndex=t.itemIndex,I&&(b.hasRowValidation&&b.validateRow(this._appendingItem,S,!0),h._fireValidateRow(this._appendingItem,S,this._appendingItem.getRowObject())),E)for(s=0;s<v.length;s++)this._appendingIndex.column=y[s],b.validateCell(this._appendingIndex,S),h._fireValidateCell(this._appendingIndex,S,this._appendingItem.getData(y[s].dataIndex));h.updatePastedRow(o,m,!I)}}h.selections.clear(),h.selections.add(t,new kt.CellIndex(h,t.itemIndex,this._data.lastLayout()),Wt.SelectionStyle.BLOCK)}},m.prototype._pasteMultiLines=function(e,t,i){var o=this._grid,n=o.dataSource;if(n){var r=o.pasteOptions,s=r.checkReadOnly;if(s&&(!o.editOptions.editable||o.editOptions.readOnly))return;var a=t.length,l=e.itemIndex,h=n.fieldCount,d=o.getDataColumns(!1),u=d.length,_=o.validationManager,c=r.forceRowValidation,p=r.forceColumnValidation,f=this._appendingItem,g=this._appendingIndex,m=void 0,y=void 0,v=void 0,w=void 0,C=r.eventEachRow,x=[];r.commitEdit&&o.commit(!1)||o.cancel();var b=o.itemCount;f.dataSource=n,i&&n.beginUpdate();try{for(m=0;m<a&&l<b;m++)try{if((B=o.getItem(l)).itemState==dt.ItemState.APPENDING)break;for(;B&&B.dataRow<0;)l++,B=o.getItem(l);if(null==B)break;var I=t[m],E=c||p?B.getRowData():[],S=!1,R=[],D=[];for(v=Math.min(I.columns.length,I.values.length),y=0;y<v;y++){var T=I.columns[y],k=I.values[y];for(w=0;w<k.length;w++)if((V=T[w])&&V instanceof Dt.DataColumn){R.push(B.getData(V.dataIndex));var M=kt.CellIndex.temp(o,B.index,V),L=this._convertValue(n,r,V,k[w],B&&B.getRowData());L=r.applyEditMask?this._applyMaskValue(M,L):L,(O=this._cellWritable(M,null,L))&&(S=S||O||!s,E[V.dataIndex]=L,D.push(V.dataIndex))}}if(S)try{f.values=E,f.setIndex(B.index),f.dataRow=B.dataRow,g.column=null,g.itemIndex=B.index;var F=dt.ItemState_isInserting(B.itemState);if(c&&(_.hasRowValidation&&_.validateRow(f,F,!0),o._fireValidateRow(f,F,f.getRowObject())),p)for(y=0;y<v;y++)for(T=I.columns[y],w=0;w<u;w++){var V=d[w];g.column=V,_.validateCell(g,F),o._fireValidateCell(g,F,f.getData(V.dataIndex))}o.updatePastedRow(B,E,!c),C&&o._fireEditItemPasted(B,D,R,E),x.push(B.dataRow)}catch(t){if(r.stopOnError)throw t}l++}catch(t){throw l=Math.max(e.itemIndex,l-1),o.setFocusedIndex(e,!1),o.selections.clear(),o.selections.add(e,new kt.CellIndex(o,l,this._data.lastLayout()),Wt.SelectionStyle.BLOCK),t}if(m<a&&r.enableAppend){for(;m<a;m++){I=t[m],E=[];try{for(D=[],v=Math.min(I.columns.length,I.values.length),y=0;y<v;y++){for(T=I.columns[y],k=I.values[y],w=0;w<k.length;w++){var O;if(V=T[w])M=kt.CellIndex.temp(o,-1,V),L=this._convertValue(n,r,V,k[w],E),L=r.applyEditMask?this._applyMaskValue(M,L):L,(O=this._cellWritable(M,dt.ItemState.APPENDING,L))&&(E[V.dataIndex]=L,D.push(V.dataIndex))}if(r.fillColumnDefaults)for(w=0;w<u;w++)void 0===E[(V=d[w]).dataIndex]&&(E[V.dataIndex]=V.defaultValue());if(r.fillFieldDefaults)for(w=0;w<h;w++)if(void 0===E[w]){var N=n.getField(w);E[w]=N.defaultValue()}}try{if(f.values=E,f.dataRow=-1,f.setIndex(-1),this._appendingIndex.column=null,this._appendingIndex.itemIndex=-1,c&&(_.hasRowValidation&&_.validateRow(f,!0,!0),o._fireValidateRow(f,!0,f.getRowObject())),r.forceColumnValidation)for(w=0;w<u;w++)V=d[w],this._appendingIndex.column=V,_.validateCell(this._appendingIndex,!0),o._fireValidateCell(g,!0,f.getData(V.dataIndex));o.appendPastedRow(E);var P=n.rowCount-1;if(C){var B=o.getItem(o.getItemIndexOfRow(P));o._fireEditItemPasted(B,D,[],E)}x.push(P)}catch(t){if(r.stopOnError)throw t}}catch(t){throw l=Math.max(e.itemIndex,o.itemCount-1),o.setFocusedIndex(e,!1),o.selections.clear(),o.selections.add(e,new kt.CellIndex(e.grid,l,this._data.lastLayout()),Wt.SelectionStyle.BLOCK),t}}l=i?-1:o.itemCount}this._fireRowsPasted(x)}catch(t){throw this._fireRowsPasted(x),t}finally{i&&(n.endUpdate(),l<0&&(l=n.rowCount))}o.setFocusedIndex(e,!1),o.selections.clear(),o.selections.add(e,new kt.CellIndex(e.grid,l-1,this._data.lastLayout()),Wt.SelectionStyle.BLOCK)}},m);function m(t){this._grid=t,this._data=new l,this._appendingItem=new u,this._appendingIndex=new p(t,this._appendingItem)}e.ClipboardManager=g});t($e);$e.ClipboardData,$e.ClipboardSource,$e.DefaultClipboardData,$e.ClipboardItem,$e.ClipboardIndex,$e.ClipboardManager;var He=e(function(t,e){Object.defineProperty(e,"__esModule",{value:!0});var i,o=(i=$.EventAware,oe.__extends(n,i),n.prototype._doDispose=function(){return i.prototype._doDispose.call(this)},_dp(n,"visible",{get:function(){return this._visible},set:function(t){this._visible=t}}),_dp(n,"enabled",{get:function(){return this._enabled},set:function(t){this._enabled=t}}),_dp(n,"label",{get:function(){return this._label},set:function(t){this._label=t}}),_dp(n,"tag",{get:function(){return this._tag},set:function(t){this._tag=t}}),_dp(n,"group",{get:function(){return null}}),_dp(n,"manager",{get:function(){return null}}),_dp(n,"type",{get:function(){return null}}),_dp(n,"checked",{get:function(){return null}}),n.prototype.click=function(){},n.prototype.isSeparator=function(){return!1},n);function n(t){var e=i.call(this)||this;return e._visible=!0,e._enabled=!0,t&&e.assignFrom(t),e}var r,c=(r=o,oe.__extends(s,r),s.prototype._doDispose=function(){this._parent=null,this._callback=null,r.prototype._doDispose.call(this)},_dp(s,"type",{get:function(){return this._type},set:function(t){this._type=t}}),_dp(s,"group",{get:function(){return this._group},set:function(t){this._group=t}}),_dp(s,"checked",{get:function(){return this._checked},set:function(t){this._checked=t}}),_dp(s,"callback",{get:function(){return this._callback},set:function(t){this._callback=t}}),_dp(s,"parent",{get:function(){return this._parent},set:function(t){this._parent=t}}),s.prototype.isSeparator=function(){return"-"===this._label||this._type===lt.MenuItemType.SEPARATOR},s.prototype.getData=function(){return{label:this._label,checked:this._checked,enabled:this._enabled,tag:this.tag}},s.prototype.click=function(){"check"===this._type&&(this._checked=!this._checked),this._parent&&this._parent.itemClicked(this)},_dp(s,"manager",{get:function(){return this._parent.manager}}),s.prototype._itemClicked=function(t){},s);function s(t,e){var i=r.call(this,e)||this;return i._parent=t,i}e.PopupMenuItem=c;var a,y=(a=o,oe.__extends(l,a),l.prototype._doDispose=function(){this._items&&this._items.forEach(function(t,e){t.dispose()}),this._items=null,this._parent=null,a.prototype._doDispose.call(this)},_dp(l,"name",{get:function(){return this._name},set:function(t){this._name=t}}),_dp(l,"items",{get:function(){return this._items}}),_dp(l,"parent",{get:function(){return this._parent}}),_dp(l,"manager",{get:function(){for(var t=this._parent;t;){if(t.popupMenuManager instanceof u)return t.popupMenuManager;if(t instanceof u)return t;t=t._parent}return null}}),l.prototype.count=function(){return this._items?this._items.length:0},l.prototype.itemClicked=function(t){if(t.parent==this&&t.type===lt.MenuItemType.RADIO){var e=t.group,i=void 0;if(e){for(var o=0;o<this._items.length;o++)(i=this._items[o])instanceof c&&i.type===lt.MenuItemType.RADIO&&i.group===e&&(i.checked=!1);t.checked=!0}}var n=this.manager.grid;"function"==typeof t.callback?t.callback.call(this,n.handler,t.toProxy(),this.manager.clickData):this._parent instanceof u?this._parent.doMenuItemClick(t,this.manager.clickData):this._parent.onMenuItemClick?this._parent.onMenuItemClick(t,this.manager.clickData):this._parent.itemClicked(t)},l.prototype._load=function(t){var e=[];if(t)for(var i=0,o=t.length;i<o;i++){var n=t[i];if(ne.Utils.isArray(n.children)&&0<n.children.length){var r=new l(this,n);e.push(r)}else r=new c(this,n),e.push(r)}return e},l.CLICKED="onPopupMenuClicked",l);function l(t,e){var i=a.call(this,e)||this;return i._name=e.name,i._parent=t,i._items=i._load(e.children),i}e.PopupMenu=y;var h,v=(h=$.EventAware,oe.__extends(p,h),p._borrowView=function(t){var e=p.$_views[t.$_hash]||[];return(p.$_views[t.$_hash]=e).pop()||new p(t)},p._returnView=function(t){p.$_views[t._container.$_hash].push(t)},p.prototype._doDispose=function(){h.prototype._doDispose.call(this)},_dp(p,"parentView",{get:function(){return this._parentView},set:function(t){this._parentView=t}}),_dp(p,"childView",{get:function(){return this._childView},set:function(t){this._childView=t}}),_dp(p,"currDiv",{get:function(){return this._currDiv}}),_dp(p,"manager",{get:function(){return this._menu.manager}}),p.prototype.show=function(t,e,i,o,n,r,s,a){if(!this._showing){this._showing=!0;try{var l=i.parent;for(this._containerElement=t._container,this._parentView=e,this._firstItem=null,this._menu=i;l._parent&&!(l instanceof oi.GridBase);)l=l.parent;l&&(this._viewGridInside=l instanceof oi.GridBase?l.editorOptions.viewGridInside:l instanceof u&&l.grid.editorOptions.viewGridInside),this.$_show(t,this._menu,o,n,r,s)}finally{this._showing=!1}}},p.prototype.boundsByContainer=function(){return null},p.prototype.hide=function(t){if(void 0===t&&(t=!0),t&&this._parentView)this._parentView.hide(!0);else{this.$_hideChildView();var e=this._element;e&&e.parentElement&&e.parentElement.removeChild(e)}},p.prototype.hideChild=function(){this.$_hideChildView()},p.prototype.changeItemIndex=function(t){var e,i=this._itemIndex,o=this._menu._items;if(0==t)return this._itemIndex=-1,void this.$_refreshItems(this._itemIndex);if(o&&!(i>=o.length)){for(;(e=o[i+=t])&&!e.enabled;);e&&(this._itemIndex=i,this.$_refreshItems(this._itemIndex))}},p.prototype.menuItemClicked=function(t){this._menuItemClicked(t)},p.prototype.$_show=function(t,e,i,o,n,r){if(this._element){var s=t.doc,a=ne.getDocWin(s),l=this._element,h=l.style,d=this.manager,u=t.gridView.displayOptions.baseZindex;this._element.style.zIndex=String(u+4);var _=d.dropdownCount,c=this._viewGridInside?t._container:s.documentElement;this._menu=e,this._itemIndex=-1,ne.Utils.clearElements(this._element),this.$_buildItems(e),ne.Utils.disableSelection(l),c.appendChild(l);var p=0;if(_&&e.items.length>_)for(var f=0,g=0;f<e.items.length&&g<_;f++){var m=this._element.children[f];m.menuItem.isSeparator()||(p+=m.offsetHeight,g++)}0<p&&p<l.offsetHeight?(h.height=p+2+"px",h.overflow="auto"):(h.removeProperty("height"),h.overflow="hidden");var y=ne.Utils.getBrowserSize(),v=ne.Utils.ieTen||ne.Utils.ieOld?ne.Utils.getClientRect(s.body):ne.Utils.getClientRect(s.documentElement),w=ne.Utils.getClientRect(t._container),C=y.width,x=y.height,b=ne.Utils.getClientRect(l),I=a.pageXOffset||s.documentElement.scrollLeft,E=a.pageYOffset||s.documentElement.scrollTop;s.documentElement.scrollWidth>s.documentElement.clientWidth&&(x-=18),s.documentElement.scrollHeight>s.documentElement.clientHeight&&(C-=18),this._viewGridInside?(b.height>=w.height&&(h.height=w.height-4+"px",h.overflow="auto",b=ne.Utils.getClientRect(this._element)),o+w.top+b.height>w.bottom&&(o=this._parentView?w.bottom-b.height-w.top-3:o-b.height-r),i+w.left+b.width>w.right&&(i=this._parentView?w.right-b.width-w.left-3:i-b.width-n)):(this._parentView||(i+=w.left-v.left,o+=w.top-v.top),b.height>=x&&(h.height=x-4+"px",h.overflow="auto",b=ne.Utils.getClientRect(this._element)),o+b.height>=x+E-3&&(o=o-b.height-3)<0&&(o=Math.max(0,x-b.height-3)),i+b.width>=C+I-3?i=Math.max(0,C-b.width-3):void 0!==n&&b.width<n&&(i+=n-b.width)),ne.Utils.move(this._element,Math.max(0,i),Math.max(0,o))}},p.prototype._createElement=function(){var t=function(t){27==t.keyCode&&this.hide()}.bind(this),e=this._container.doc.createElement("div");return e.style.setProperty("position","absolute","important"),e.className="rg-popup-menu",this._container.$_addListener(e,"keydown",t,!1),e},p.prototype._showChild=function(t){if(this==this.manager.showingView&&!(this._childView&&this._childView._menu===t.menuItem||this._currDiv!==t)){this.$_hideChildView();var e=t.menuItem,i=this._element.getBoundingClientRect(),o=this._element.offsetLeft+i.width-4,n=this._element.offsetTop+t.offsetTop-this._element.scrollTop;this._childView=p._borrowView(this._container),this._childView.show(this._container,this,e,o,n)}},p.prototype.$_hideChildView=function(){this.manager.showingView=null,this._childView&&(this._childView.$_hideChildView(),this._childView._element&&this._childView._element.parentElement&&this._childView._element.parentElement.removeChild(this._childView._element),p._returnView(this._childView)),this._childView=null},p.prototype._menuItemActived=function(t){ne.getWin(t);var e=(this._currDiv=t).menuItem,i=this.manager.showingView=this.manager.activeView=t.menuView;e instanceof c?i.childView&&i.$_hideChildView():e instanceof y&&e.enabled&&(this._timer&&clearTimeout(this._timer),this._timer=setTimeout(function(){i._showChild(t)},200))},p.prototype._menuItemDeactived=function(t){},p.prototype._menuItemClicked=function(t){var e=t.menuItem;e instanceof y?e.enabled&&this._showChild(t):e?(this.hide(!0),e.enabled&&e.click(),this.manager.close()):this.$_hideChildView()},p.prototype.$_refreshItems=function(t){for(var e=this._element,i=0,o=e.childElementCount;i<o;i++){var n=e.childNodes[i];if(n.style.background=i===t?"rgba(0,255,0,0.2)":"",i==t){var r=n.offsetTop,s=n.offsetHeight+4,a=e.offsetHeight,l=e.scrollTop;r<l?e.scrollTop=Math.max(0,e.scrollTop+(r-l)):l+a<r+s&&(e.scrollTop=e.scrollTop+r+s-(l+a)),this._menuItemActived(n)}}},p.prototype.$_buildItems=function(t){for(var e=t.items,i=[],o=this._container.doc,n=0,r=e.length;n<r;n++){var s=e[n];if(s.visible){var a=o.createElement("div");if(a.menuView=this,a.menuItem=s,a.style.position="relative",a.style.cssFloat="none",a.style.width="100%",s instanceof c&&s.isSeparator()){a.className="rg-popup-separator";var l=o.createElement("hr");l.className="rg-popup-separator-hr",a.appendChild(l),a.onmouseover=function(t){this._menuItemActived(t.currentTarget)}.bind(this)}else{this._firstItem||(this._firstItem=a),i.length=0,i.push("rg-popup-item"),s.group&&i.push("rg-popup-"+s.group),s.enabled||i.push("rg-popup-item-disable"),a.className=i.join(" "),a.style.whiteSpace="pre",a.onclick=function(t){this._menuItemClicked(t.currentTarget)}.bind(this),a.onmouseover=function(t){this._menuItemActived(t.currentTarget)}.bind(this),a.onmouseout=function(t){this._menuItemDeactived(t.currentTarget)}.bind(this);var h=o.createElement("span"),d=h.style;i.length=0,d.setProperty("display","inline-block"),d.setProperty("min-width","20px"),d.setProperty("min-height","7px"),d.setProperty("vertical-align","middle"),d.setProperty("pointer-events","none","important"),h.textContent="",ne.Utils.included(s.type,[lt.MenuItemType.CHECK,lt.MenuItemType.RADIO])&&i.push(s.group?"rg-popup-radio":"rg-popup-check"),s.checked&&i.push(s.group?"rg-popup-radio-checked":"rg-popup-check-checked"),h.className=i.join(" "),h.tabIndex=-1,ne.Utils.disableSelection(h),a.appendChild(h);var u=o.createElement("span");if(u.id="$popupMenu_item_"+p.$_menuId++,u.style.paddingRight="24px",u.style.pointerEvents="none",u.style.verticalAlign="middle",u.innerHTML=s.label,u.tabIndex=-1,ne.Utils.disableSelection(u),a.appendChild(u),s instanceof y){var _=o.createElement("span");_.className="rg-popup-expander",a.appendChild(_),_.style.position="absolute",_.style.right="0px",_.style.width="24px",_.style.height="17px",_.style.verticalAlign="middle",_.style.setProperty("pointer-events","none","important"),_.innerHTML=" ",_.tabIndex=-1,ne.Utils.disableSelection(_),a.appendChild(_)}}ne.Utils.disableSelection(a),this._element.appendChild(a)}}},p.$_menuId=0,p.$_views={},p);function p(t){var e=h.call(this)||this;return e._showing=!1,e._viewGridInside=!1,e._container=t,e._element=e._createElement(),e._element.addEventListener("contextmenu",function(t){t.preventDefault()}),e}e.PopupMenuView=v;var d,u=(d=$.EventAware,oe.__extends(_,d),_.prototype._doDispose=function(){this.close(),this._mainView=null,this._showingView=null,this._clickData=null,this._activeView=null,this._container=this._containerDom=null,d.prototype._doDispose.call(this)},_dp(_,"clickData",{get:function(){return this._clickData},set:function(t){this._clickData=t}}),_dp(_,"grid",{get:function(){return this._container.gridView}}),_dp(_,"dropdownCount",{get:function(){if(this._container&&this._container.gridView)return this._container.gridView.displayOptions.popupDropdownCount}}),_dp(_,"showingView",{get:function(){return this._showingView},set:function(t){this._showingView=t}}),_dp(_,"activeView",{get:function(){return this._activeView},set:function(t){this._activeView=t}}),_.prototype.popupManager=function(){return this},_.prototype.isShow=function(){return!!this._mainView},_.prototype.indexOf=function(t){for(var e=this._menus.length;e--;)if(ne.Utils.compareTextValue(this._menus[e].name,t,!0,!1))return e;return-1},_.prototype.getMenu=function(t){for(var e=this._menus.length;e--;)if(ne.Utils.compareTextValue(this._menus[e].name,t,!0,!1))return this._menus[e];return null},_.prototype.addMenu=function(t,e,i,o){if(void 0===i&&(i=!1),void 0===o&&(o=null),ne.Utils.isWhiteSpace(t))throw"Menu name is empty.";var n;if(0<=(n=this.indexOf(t))&&!i)return this._menus[n];var r=new y(o||this,{name:t,children:e});return i&&-1<n?this._menus[n]=r:this._menus.push(r),r},_.prototype.removeMenu=function(t){var e=this.indexOf(t);if(-1<e){var i=this._menus.splice(e,1);for(e=i.length;0<e;e--)i[e-1].dispose()}},_.prototype.clearMenus=function(){this._menus.length=0},_.prototype.show=function(t,e,i,o,n,r,s){void 0===o&&(o=null),void 0===n&&(n=null),void 0===r&&(r=null),void 0===s&&(s=null);var a=this.grid,l=ne.getWin(this._containerDom),h=i&&a.getBodyCellAt(i);if("string"==typeof t?t=this.getMenu(t):t instanceof y||(t=new y(this,{children:t})),t){if(null!=o&&null!=n)r=isNaN(r=Math.round(r))?0:r,s=isNaN(s=Math.round(s))?0:s;else{var d=this.grid.container.getBound(),u=void 0;if(h&&h.merged){var _=a.layoutManager;u=(f=a.getBodyViewAt(i)).getCellRect(_,h,!1),u=f.boundsByScreen(u)}else u=e.getBoundingClientRect();var c=u.bottom;o=u.left-d.x,n=c-d.y,r=u.width,s=u.height}if(this._mainView=this._activeView=v._borrowView(this._container),e instanceof l.HTMLTableCellElement){var p=a.getCellType(e),f=a.getTableView(e),g=void 0;if("data"===p)g=(h=h||f.bodyCellByCell(e)).grouped?Pe.ClickData.getItem("groupHeader",h.item.index):Pe.ClickData.getCell(p,h);else if("header"===p){var m=f.layoutByCell(e);g=Pe.ClickData.getLayout(p,m)}this.clickData=g}this._mainView.show(this._container,null,t,o,n,r,s),l.addEventListener("mousedown",this._grolbalMouseHandler,!1)}},_.prototype.showContext=function(t,e,i,o,n){if(t&&!this._mainView){var r=ne.getWin(this._containerDom);this.clickData=n,this._mainView=this._activeView=v._borrowView(this._container),this._mainView.show(this._container,null,t,i,o,0,0,e),r.addEventListener("mousedown",this._grolbalMouseHandler,!1)}},_.prototype.close=function(){if(this._mainView){var t=ne.getWin(this._containerDom);this._mainView.hide(),v._returnView(this._mainView),this._mainView=null,t.removeEventListener("mousedown",this._grolbalMouseHandler,!1)}},_.prototype.keyDown=function(t){this._doKeydown(t)},_.prototype.doMenuItemClick=function(t,e){this.fireEvent(_.MENU_ITEM_CLICKED,t,e)},_.prototype._doKeydown=function(t){var e=this._activeView,i=null==e?void 0:e.currDiv;switch(t.keyCode){case 40:e.changeItemIndex(1);break;case 38:e.changeItemIndex(-1);break;case 37:e.parentView&&(e.changeItemIndex(0),e.hideChild(),this._showingView=this._activeView=e.parentView||this._mainView);break;case 39:e&&e.childView&&(e=this._showingView=this._activeView=e.childView).changeItemIndex(1);break;case 13:case 32:e.menuItemClicked(i)}},_.prototype.$_buildItems=function(t){},_.MENU_ITEM_CLICKED="onPopupMenuManagerMenuItemClicked",_);function _(t){var e=d.call(this)||this;return e._grolbalMouseHandler=function(t){for(var e=t.target;e;){if(e===this._mainView._element||e.menuItem)return;e=e.parentElement}this.close()}.bind(e),e._container=t,e._containerDom=t._containerDom,e._menus=[],e}e.PopupMenuManager=u});t(He);He.PopupMenuItem,He.PopupMenu,He.PopupMenuView,He.PopupMenuManager;var Ge=e(function(t,e){Object.defineProperty(e,"__esModule",{value:!0});var i,o=(i=Vt.SummaryCell,oe.__extends(n,i),n.prototype._doDispose=function(){i.prototype._doDispose.call(this)},_dp(n,"summaryIndex",{get:function(){return this._childIndex},set:function(t){this._childIndex=t}}),n.prototype._getSummary=function(t,e){return t&&t.headerSummaries.get(e)},n);function n(){return i.call(this,"summaryCell")||this}e.HeaderSummaryCell=o;var r,s=(r=Vt.GridSummaryObject,oe.__extends(a,r),_dp(a,"summaryIndex",{get:function(){return this._childIndex}}),a.prototype.getCellStyleName=function(){return a.CELL_CSS},a.prototype._createCell=function(){return new o},a.CELL_CSS="rg-header-summary-cell",a);function a(t){return r.call(this,t)||this}e.HeaderSummary=s;var l,h=(l=Vt.SummaryCollection,oe.__extends(d,l),d.prototype._createSummary=function(t){return new s(t||this._grid)},d);function d(t){var e=l.call(this,t)||this;return e.visible=!1,e}e.HeaderSummaryCollection=h});t(Ge);Ge.HeaderSummaryCell,Ge.HeaderSummary,Ge.HeaderSummaryCollection;var Ue=e(function(t,e){Object.defineProperty(e,"__esModule",{value:!0});var i,o=(i=ie.SummaryElement,oe.__extends(n,i),n.prototype._doDispose=function(){i.prototype._doDispose.call(this)},n.prototype._getCssSelector=function(){return"rg-header-summary"},n.prototype._getRendererStyle=function(){return"rg-header-summary-renderer"},n.prototype._getSummaryRows=function(t){return t.headerSummaryRows},n.prototype._getCollection=function(){return this.model},n.prototype._getSummaryHeight=function(t){return t.summaryHeight},n.prototype._getSummaryCount=function(t){return t.headerSummaryCount},n.prototype._getSpanOf=function(t,e){return t.getSummarySpan(e)},n.prototype._getSummaryItem=function(t,e){return t.firstColumn.headerSummaries.get(e)},n.prototype._getTableRowCount=function(t){return t.headerSummaryRows*t.headerSummaryCount},n);function n(t,e){return i.call(this,t,e,"headerSummaryView")||this}e.HeaderSummaryElement=o;var r,s=(r=o,oe.__extends(a,r),a.prototype._getCssSelector=function(){return"rg-fixed-header-summary"},a.prototype._getExplicitWidth=function(t){return t.fixedWidth-t.fixedBarWidth},a.prototype._getFirstCell=function(t){return this._getStartCell(t)},a.prototype._getLastCell=function(t){return this._getEndCell(t)},a.prototype._getStartCell=function(t){return 0},a.prototype._getEndCell=function(t){return t.fixedCellCount-1},a.prototype._getCellCount=function(t){return t.fixedCellCount},a.prototype._getCellWidth=function(t,e){return t.getFixedCellWidth(e)},a);function a(){return null!==r&&r.apply(this,arguments)||this}e.FixedHeaderSummaryElement=s;var l,h=(l=o,oe.__extends(d,l),d.prototype._getCssSelector=function(){return"rg-fixed-header-summary"},d.prototype._getFirstCell=function(t){return this._getStartCell(t)},d.prototype._getLastCell=function(t){return this._getEndCell(t)},d.prototype._getStartCell=function(t){return t.cellCount-t.rightCellCount},d.prototype._getEndCell=function(t){return t.cellCount-1},d.prototype._getCellCount=function(t){return t.rightCellCount},d.prototype._getCellWidth=function(t,e){return t.getRightCellWidth(e)},d);function d(){return null!==l&&l.apply(this,arguments)||this}e.RightHeaderSummaryElement=h});t(Ue);Ue.HeaderSummaryElement,Ue.FixedHeaderSummaryElement,Ue.RightHeaderSummaryElement;var We=e(function(t,e){Object.defineProperty(e,"__esModule",{value:!0});var i,o=(i=Kt.CellElement,oe.__extends(n,i),_dp(n,"model",{get:function(){return this._model},set:function(t){t!==this._model&&(this._model=t,this._changed())}}),_dp(n,"text",{get:function(){return this._text},set:function(t){t!=this._text&&(this._text=t||"",this._textChanged=!0,this._changed())}}),n.prototype.setStyleName=function(t,e){e!=this._styleName&&(this._styleName=e,this._setClassName(t))},n.prototype._getCssSelector=function(){return this._styleName},n.prototype._doUpdateContent=function(t,e,i){this._textChanged&&(this._textChanged=!1,i[ne.Utils.TextProp]=this._text)},n.prototype._doRender=function(t){},n);function n(t){var e=i.call(this,t,"gridSumCellView")||this;return e._text="",e._styleName="",e._textChanged=!1,e}e.GridSumCellElement=o;var r,s=(r=Yt.SimpleTableElement,oe.__extends(a,r),a.prototype._doDispose=function(){this._cells=null,r.prototype._doDispose.call(this)},a.prototype.getSumModel=function(t){for(var e=0;e<this._cells.length;e++)if(t===this._getTableCell(0,e))return this._cells[e].model},a.prototype.getCellType=function(t){var e=this.getSumModel(t);return e===this.grid.rowIndicator?"indicator":e===this.grid.stateBar?"state":e===this.grid.checkBar?"check":void 0},a.prototype._getCssSelector=function(){return"rg-sum"},a.prototype._doPrepareTableExtents=function(t){for(var e,i=t.grid.rowBarContainer,o=t.sectionObjects,n=this._count=0,r=o;n<r.length;n++){var s=r[n];s.visible&&(((e=this._cells[this._count++]).model=s)instanceof Nt.RowIndicator?e.width=i.rowIndicator.width:s instanceof Pt.StateBar?e.width=i.stateBar.width:s instanceof Bt.CheckBar&&(e.width=i.checkBar.width))}},a.prototype._prepareCellContent=function(t,e){return this.grid.doc.createElement("div")},a.prototype._doLayoutContent=function(t){for(var e=t.grid,i=this._count,o=this._getTableRowCount(t);this.childCount<i;)this.addChild(this._cells[this.childCount]);for(;this.childCount>i;)this.removeLast();for(var n=0;n<i;n++){var r=this.getChild(n),s=r.model,a=s.getSumCell(),l=this._getTableCell(0,n),h=l.firstElementChild,d=this.$_getCellSelector()+" "+s.getSumStyleName();if(this._chromium){l.rowSpan=o;for(var u=1;u<o;u++)this._getTableCell(u,n).style.display="none"}r.setStyleName(h,d),r.text=s.sumText,r.updateCell(e,a,h)}},a.prototype._doRender=function(t){},a.prototype._getTableRowCount=function(t){return this._chromium?t.headerSummaryRows*t.headerSummaryCount:1},a.prototype._getTableRowHeight=function(t,e){if(this._chromium){var i=t.grid.headerSummaryView._rowPoints;return i[e+1]-i[e]}return this.height},a.prototype._getCellCount=function(t){return this._count},a.prototype._getCellWidth=function(t,e){return this._cells[e].width},a.prototype.$_getCellSelector=function(){return"rg-sum-cell"},a.CELL_CSS="rg-sum-cell",a);function a(t){var e=r.call(this,t,null,"gridSumView")||this;e._cells=[];for(var i=e._count=0;i<3;i++)e.addChild(e._cells[i]=new o(t));return e}e.GridSumElement=s});t(We);We.GridSumCellElement,We.GridSumElement;var ze=e(function(t,e){Object.defineProperty(e,"__esModule",{value:!0});var i,o=(i=$t.GridBaseOptions,oe.__extends(n,i),n.prototype._doDispose=function(){this._selector=this._selector.dispose(),this._automating=this._automating.dispose(),i.prototype._doDispose.call(this)},_dp(n,"enabled",{get:function(){return this._enabled},set:function(t){t!=this._enabled&&(this._enabled=t)}}),_dp(n,"handleVisibility",{get:function(){return this._handleVisibility},set:function(t){t!=this._handleVisibility&&(this._handleVisibility=t,this._refreshOwner())}}),_dp(n,"commitBeforeFiltering",{get:function(){return this._enabled},set:function(t){t!=this._commitBeforeFiltering&&(this._commitBeforeFiltering=t)}}),_dp(n,"includeParentItem",{get:function(){return this._includeParentItem},set:function(t){t!=this._includeParentItem&&(this._includeParentItem=t)}}),_dp(n,"selector",{get:function(){return this._selector}}),_dp(n,"automating",{get:function(){return this._automating}}),_dp(n,"toast",{get:function(){return this._toast}}),n.prototype.assignFrom=function(t){i.prototype.assignFrom.call(this,t),this._selector.assignFrom(t.selector)},n);function n(t){var e=i.call(this,t)||this;return e._enabled=!0,e._handleVisibility=lt.HandleVisibility.VISIBLE,e._commitBeforeFiltering=!0,e._toast=new fe.ToastOptions({visible:!1,message:"Filtering..."}),e._includeParentItem=!0,e._selector=new s(t),e._automating=new h(t),e}e.FilteringOptions=o;var r,s=(r=$t.GridBaseOptions,oe.__extends(a,r),_dp(a,"listHeight",{get:function(){return this._listHeight},set:function(t){t!=this._listHeight&&(this._listHeight=t)}}),_dp(a,"showButtons",{get:function(){return this._showButtons},set:function(t){t!=this._showButtons&&(this._showButtons=t)}}),_dp(a,"partialSearch",{get:function(){return this._partialSearch},set:function(t){t!=this._partialSearch&&(this._partialSearch=t)}}),_dp(a,"acceptText",{get:function(){return this._acceptText},set:function(t){t!=this._acceptText&&(this._acceptText=t)}}),_dp(a,"cancelText",{get:function(){return this._cancelText},set:function(t){t!=this._cancelText&&(this._cancelText=t)}}),_dp(a,"allCheckText",{get:function(){return this._allCheckText},set:function(t){t!=this._allCheckText&&(this._allCheckText=t)}}),_dp(a,"emptyFilterText",{get:function(){return this._emptyFilterText},set:function(t){t!=this._emptyFilterText&&(this._emptyFilterText=t)}}),_dp(a,"searchPlaceholder",{get:function(){return this._searchPlaceholder},set:function(t){t!=this._searchPlaceholder&&(this._searchPlaceholder=t)}}),_dp(a,"excludeCheck",{get:function(){return this._excludeCheck},set:function(t){t!=this._excludeCheck&&(this._excludeCheck=t)}}),_dp(a,"searchedCheckText",{get:function(){return this._searchedCheckText},set:function(t){t!=this._searchedCheckText&&(this._searchedCheckText=t)}}),_dp(a,"userFilterAddCallback",{get:function(){return this._userFilterAddCallback},set:function(t){t!=this._userFilterAddCallback&&(this._userFilterAddCallback=t)}}),_dp(a,"style",{get:function(){return this._style},set:function(t){t!=this._style&&(this._style=t)}}),_dp(a,"closeWhenClick",{get:function(){return this._closeWhenClick},set:function(t){t!=this._closeWhenClick&&(this._closeWhenClick=t)}}),_dp(a,"filterReset",{get:function(){return this._filterReset},set:function(t){t!=this._filterReset&&(this._filterReset=t)}}),_dp(a,"filtersResetText",{get:function(){return this._filtersResetText},set:function(t){t!=this._filtersResetText&&(this._filtersResetText=t)}}),a);function a(t){var e=r.call(this,t)||this;return e._listHeight=170,e._showButtons=!1,e._partialSearch=!0,e._excludeCheck=!1,e._filterReset=!0,e._filtersResetText="필터 초기화",e._acceptText="확인",e._cancelText="취소",e._allCheckText="(전체 선택)",e._searchedCheckText="(조회 전체 선택)",e._emptyFilterText="(값 없음)",e._searchPlaceholder="검색...",e._closeWhenClick=!1,e._style="rg-filter-selector",e}e.FilterSelectorOptions=s;var l,h=(l=$t.GridBaseOptions,oe.__extends(d,l),_dp(d,"dateCategorize",{get:function(){return this._dateCategorize},set:function(t){t!=this._dateCategorize&&(this._dateCategorize=t)}}),_dp(d,"numberCategorize",{get:function(){return this._numberCategorize},set:function(t){t!=this._numberCategorize&&(this._numberCategorize=t)}}),_dp(d,"textCategorize",{get:function(){return this._textCategorize},set:function(t){t!=this._textCategorize&&(this._textCategorize=t)}}),_dp(d,"dateCategoryCallback",{get:function(){return this._dateCategoryCallback},set:function(t){t!=this._dateCategoryCallback&&(this._dateCategoryCallback=t)}}),_dp(d,"numberCategoryCallback",{get:function(){return this._dateCategoryCallback},set:function(t){t!=this._numberCategoryCallback&&(this._numberCategoryCallback=t)}}),_dp(d,"textCategoryCallback",{get:function(){return this._textCategoryCallback},set:function(t){t!=this._textCategoryCallback&&(this._textCategoryCallback=t)}}),_dp(d,"dateYearFormat",{get:function(){return this._dateYearFormat},set:function(t){this._dateYearFormat=t}}),_dp(d,"dateQuarterFormat",{get:function(){return this._dateQuarterFormat},set:function(t){this._dateQuarterFormat=t}}),_dp(d,"dateMonthFormat",{get:function(){return this._dateMonthFormat},set:function(t){this._dateMonthFormat=t}}),_dp(d,"dateDayFormat",{get:function(){return this._dateDayFormat},set:function(t){this._dateDayFormat=t}}),d);function d(t){var e=l.call(this,t)||this;return e._dateCategorize=!0,e._numberCategorize=!0,e._textCategorize=!1,e._dateYearFormat="YYYY년도",e._dateQuarterFormat="Q사분기",e._dateMonthFormat="M월",e._dateDayFormat="YYYY-MM-DD",e}e.FilterAutomatingOptions=h});t(ze);ze.FilteringOptions,ze.FilterSelectorOptions,ze.FilterAutomatingOptions;var je=e(function(t,e){var S,i,o,n;Object.defineProperty(e,"__esModule",{value:!0}),(i=S=S||{})[i.ALL=0]="ALL",i[i.YQ=1]="YQ",i[i.YM=2]="YM",i[i.Y=3]="Y",i[i.QM=4]="QM",i[i.Q=5]="Q",i[i.M=6]="M",i[i.NONE=7]="NONE",(n=o=o||{}).CHECK="checked",n.UNCHK="unchecked",n.PCHK="partialChecked",n.PUNCHK="partialUnchecked",n.NONE="none";var r=(w.HasPartial=function(t,e){return!(!t&&!e)&&t.match(e)},w.prototype.dispose=function(){},_dp(w,"searched",{get:function(){return this._searched}}),w.prototype.buildItems=function(t,e,i,o){this._autoRunFilter&&(this._autoRunFilter=null);var n=o.selector,r=this._automating=o.automating,s=n.emptyFilterText;this._autoFilter=i;var a=this._filters=i?t.autoFilters:t.filters;if(i){this._activeNames=[],0<t.autoFilters.activeCount&&this._getActivatedFilters(t.autoFilters),t.autoFilters.clear(!1);var l,h=!1,d=void 0;switch(this._valueType=t.valueType,l=e.getDistinctValues(t.dataIndex),this._valueType){case lt.ValueType.DATETIME:d=(h=r.dateCategorize)&&r.dateCategoryCallback?r.dateCategoryCallback(t,l):this._categorizeDateValues(l,h,s);break;case lt.ValueType.NUMBER:d=(h=r.numberCategorize)&&r.numberCategoryCallback?r.numberCategoryCallback(t,l):this._categorizeNumberValues(l,h,s);break;case lt.ValueType.BOOLEAN:for(var u=!(d=[]),_=0;_<l.length;_++){var c=l[_];null!=c?d.push({text:c.toString().toUpperCase(),value:c}):u=!0}u&&d.push({text:s,empty:!0});break;case lt.ValueType.TEXT:d=(h=r.textCategorize)&&r.textCategoryCallback?r.textCategoryCallback(t,l):this._categorizeTextValues(l,h,s)}d&&this._createCategories(d,null,t.valueType,a),this._filters.activateItems(this._activeNames,!0)}},w.prototype.search=function(t){var o=[];function e(t){if(o.indexOf(t)<0){for(var e=[],i=t;i;)o.indexOf(i)<0&&e.push(i),i=i.category;Array.prototype.push.apply(o,e.reverse())}}for(var i=t?new RegExp(t,"gi"):void 0,n=0,r=this._filters.count;n<r;n++){var s=this._filters.getItem(n);if(!(s instanceof pt.ColumnFilterCategory)){var a=this._autoFilter?s.tag:s.toString();w.HasPartial(a,i)&&e(s)}}return o},w.prototype._getActivatedFilters=function(t){for(var e=t.count;e--;){var i=t.getItem(e);i instanceof pt.ColumnFilterCategory||!i.active||this._activeNames.push(i.name)}},w.prototype._createCategories=function(t,e,i,o){function n(t,e,i){return e!=lt.ValueType.DATETIME?e!=lt.ValueType.BOOLEAN?e==lt.ValueType.NUMBER?"value = "+t:"value = '"+t+"'":i.value?"value":"not(value)":"(year(value) = "+i.year+") and (month(value) = "+(i.month+1)+") and (day(value) = "+i.day+")"}for(var r=ne.Utils.pad,s=0,a=t.length;s<a;s++){var l=t[s],h=l.hasOwnProperty("childs"),d=l.hasOwnProperty("values"),u=void 0;(u=h||d?new pt.ColumnFilterCategory:new pt.ColumnFilter(n(l.value,i,l))).text=l.text;var _="";if(_=l.empty?w.EMPTY_FILTER:i==lt.ValueType.DATETIME&&h&&e?e.name+" "+l.text:l.text,u.name=_,this._filters.add(u,!1),e&&e.addChild(u),u instanceof pt.ColumnFilterCategory){if(h)this._createCategories(l.childs,u,i,o);else if(ne.Utils.isArray(l.values))for(var c=l.values,p=0,f=c.length;p<f;p++){var g=c[p],m=g+"",y=new pt.ColumnFilter(n(g,i,l));y.name=m,y.text=m,y.tag=m,u.addChild(y),this._filters.add(y,!1)}}else if(i==lt.ValueType.DATETIME){var v=l;u.tag=v.year+r(v.month+1,2)+r(v.day,2)}else u.tag=l.text}},w.prototype._categorizeDateValues=function(t,e,o){if(!t)return null;for(var C=!1,x=!1,b=!1,i=_t.DateTimeConverter.getDateProperty,n=0,r=0,s=0,a={year:null,quarter:null,month:null,day:null},l=t.length,h=0;h<l;h++){var d=t[h];if(d){var u=i(d,_t.DateProperty.YEAR),_=i(d,_t.DateProperty.QUARTER),c=i(d,_t.DateProperty.MONTH),p=i(d,_t.DateProperty.DAY);a&&u==a.year?_!=a.quarter||c!=a.month?(r++,s++):p!=a.day&&s++:(n++,r++,s++),a.year=u,a.quarter=_,a.month=c,a.day=p}}function f(t,e){var i=e+"";return t?t.replace("YYYY",i).replace("YY",i.slice(-2)):i}function g(t,e){var i=e+1+"";if(!t)return i;var o=("0"+i).slice(-2);return t.replace("QQ",o).replace("Q",i)}function m(t,e){var i=e+1+"";if(!t)return i;var o=("0"+i).slice(-2);return t.replace("MM",o).replace("M",i)}var y=this._automating,I=[],E=[];e&&((C=1<n&&6<r)&&(I.push(_t.DateProperty.YEAR),E.push(function(t,e,i){return f(y.dateYearFormat,i)})),(x=6<r/n)&&(I.push(_t.DateProperty.QUARTER),E.push(C?function(t,e,i){return g(y.dateQuarterFormat,i)}:function(t,e,i){return f(y.dateYearFormat,t)+" "+g(y.dateQuarterFormat,i)})),(b=9<s&&3<r)&&(I.push(_t.DateProperty.MONTH),E.push(C||x?function(t,e,i){return m(y.dateMonthFormat,i)}:function(t,e,i){return f(y.dateYearFormat,t)+" "+m(y.dateMonthFormat,i)}))),I.push(_t.DateProperty.DAY),E.push(function(t,e,i){var o=f(y.dateDayFormat,t);return o=function(t,e){var i=e+"";if(!t)return i;var o=("0"+i).slice(-2);return t.replace("DD",o).replace("D",i)}(o=m(o,e),i)});var v=[];return function u(_,c,p,f,t){void 0===f&&(f=0),void 0===t&&(t=-1),t=-1==t?_.length-1:t;for(var g,m,y=null,v=f,w=!1,e=function(t){var e=_[t],i=function(t,e,i){for(var o=[],n=0;n<=i;n++)o.push(_t.DateTimeConverter.getDateProperty(t,e[n]));return o}(e,I,c),o=function(t){for(var e="",i=0,o=t.length;i<o;i++)e+=t[i]+"-";return e}(i);if(f<t&&o!=y){var n=g[c];if(m)if(c===I.length-1){var r={text:"",year:m.getFullYear(),month:m.getMonth(),day:m.getDate()};r.text=E[c](r.year,r.month,r.day),p.push(r)}else{var s={text:"",childs:[]},a=function(){s.year=m.getFullYear()},l=function(){var t=m.getMonth();0<=t&&t<3?s.quarter=0:3<=t&&t<6?s.quarter=1:6<=t&&t<9?s.quarter=2:9<=t&&t<12&&(s.quarter=3)},h=function(){s.month=m.getMonth()},d=C&&x&&b?S.ALL:C&&x?S.YQ:C&&b?S.YM:C?S.Y:x&&b?S.QM:x?S.Q:b?S.M:S.NONE;d===S.ALL?0===c?a():1===c?(a(),l()):2===c&&(a(),l(),h()):d===S.YQ?0===c?a():1===c&&(a(),l()):d===S.YM?0===c?a():1===c&&(a(),h()):d===S.Y?a():d===S.QM?0===c?l():1===c&&(l(),h()):d===S.Q?l():d===S.M&&h(),s.text=E[c](m.getFullYear(),m.getMonth(),n),p.push(s),u(_,c+1,s.childs,v,t-1)}v=t}f<t&&null==m&&(w=!0),y=o,g=i,m=e},i=f;i<=t+1;i++)e(i);0==c&&w&&p.push({text:o,empty:!0})}(t,0,v),v},w.prototype._categorizeNumberValues=function(t,e,i){if(!t||t.length<0)return null;var o=t.filter(function(t){return null!=t&&null!=t&&!isNaN(t)}).sort(function(t,e){return t-e}),n=o.length,r=o.length!==t.length,s=1,a=[];if(e&&15<n)for(s=Math.round(n/Math.min(Math.max(4,Math.round(n/5)),8));0<o.length;){var l=o.splice(0,s);a.push({text:l[0]+" ~ "+l[l.length-1],values:l})}else for(var h=0;h<n;h++)a.push({text:o[h],value:o[h]});return r&&a.push({text:i,empty:!0}),a},w.prototype._categorizeTextValues=function(t,e,i){if(!t)return null;var o=t.length,n=[],r=!1;if(e&&15<o){for(var s=[{},{},{},{}],a=[0,0,0,0],l=[0,0,0,0],h=0;h<o;h++)if(b=t[h]){var d=(C=b[0]).charCodeAt(0),u=!1,_=void 0;s[_=48<=d&&d<=57?0:65<=d&&d<=90||97<=d&&d<=122?1:1e4<=d?2:3][C]?s[_][C].push(b):(s[_][C]=[b],u=!0),a[_]++,u&&l[_]++}else r=!0;for(var c=Math.min(Math.max(4,Math.round(o/5)),8),p=0;p<4;p++){var f=0==a[p]?0:Math.max(1,Math.min(l[p],Math.round(a[p]/o*c))),g=Math.round(l[p]/f),m=g,y=(Object.keys(s[p]),s[p]),v="",w=[];for(var C in y)m===g&&(v=C),Array.prototype.push.apply(w,s[p][C]),0==--m&&(n.push({text:1==g?C:v+" ~ "+C,values:w}),w=[],m=g)}}else{h=0;for(var x=t.length;h<x;h++){var b;(b=t[h])?n.push({text:b,value:b}):r=!0}}return r&&n.push({text:i,empty:!0}),n},w.AUTO_FILTER="$$auto_filter",w.EMPTY_FILTER="$$empty",w.ROOT_ITEM="$$rootItem",w.DAY_TIME=864e5,w);function w(){this._activeNames=null}e.FilteringManager=r});t(je);je.FilteringManager;var qe=e(function(t,e){var i,o;Object.defineProperty(e,"__esModule",{value:!0}),(o=i=i||{}).Check="check",o.UnCheck="uncheck",o.None="none";var s,n=(s=$.EventAware,oe.__extends(l,s),_dp(l,"opened",{get:function(){return this._opened}}),_dp(l,"column",{get:function(){return this._targetColumn}}),_dp(l,"doc",{get:function(){return ne.getDoc(this._element)}}),l.prototype._doDispose=function(){this._soptions=null,this._manager.dispose(),this._manager=null,this._grid=null,this._parent.removeChild(this._element),s.prototype._doDispose.call(this)},l.prototype.show=function(t,e,i){this._opened&&this.hide(),this._targetColumn=t,this._element.className=this._soptions.style,this._element.style.display="block",this._autoFiltering=t.autoFilter;var o=e.getBoundingClientRect(),n=this._parent.getBoundingClientRect(),r=this._gridContainer.parentElement.clientWidth,s=o.right-n.left,a=o.bottom-n.top,l=this._element.getBoundingClientRect();this._element.style.left=Math.max(0,Math.min(s,r)-l.width)+"px",this._element.style.top=a+"px",this._build(t,i,this._autoFiltering);var h=ne.getWin(this._gridContainer);h.addEventListener("mousedown",this._globalMouseDownHandler.bind(this),!1),h.addEventListener("keydown",this._globalKeyDownHandler.bind(this),!1),this._opened=!0},l.prototype.hide=function(){if(this._opened){var t=ne.getWin(this._gridContainer);t.removeEventListener("mousedown",this._globalMouseDownHandler.bind(this),!1),t.removeEventListener("keydown",this._globalKeyDownHandler.bind(this),!1),this._finalize(),this._element.style.display="none",this._opened=!1}},l.prototype._createItemInfo=function(t){this._items=[],this._roots=[],this._visbleItemMap={};for(var e=t instanceof pt.ColumnFilterCollection?t.count:t.length,i=[],o=0;o<e;o++){var n=t instanceof pt.ColumnFilterCollection?t.getItem(o):t[o],r=n instanceof pt.ColumnFilterCategory,s=n.level,a=void 0;a=n instanceof pt.ColumnFilterCategory?n.activeState:n.active?pt.ActiveState.ACTIVE:pt.ActiveState.UNACTIVE;var l={text:n.toString(),state:a,index:o,level:s,filter:n};if(r&&(l.expanded=!1),i[s]=l,0<s){var h=i[s-1];(l.parent=h).childs||(h.childs=[]),h.childs.push(l)}this._items.push(l),0==s&&this._roots.push(l),this._visbleItemMap[o]=l}this._visibleAllCount=this._items.length,this._visibleCount=this._calcVisibleItems(),i=[],this._dirties=[]},l.prototype._build=function(t,e,i){var o=this._soptions,n=this._applyBatch=o.showButtons,r=this.doc;this._manager.buildItems(t,e,i,this._options),this._filters=i?t.autoFilters:t.filters,this._createItemInfo(this._filters),this._headerDiv=r.createElement("div"),this._headerDiv.className="rg-filter-header",o.filterReset&&this._buildReset(this._headerDiv),this._soptions.partialSearch&&this._buildSearchbox(this._headerDiv),this._buildSelectAllBox(),this._element.appendChild(this._headerDiv);var s=this._viewportDiv=r.createElement("div");s.className="rg-filter-list-viewport",s.style.height=o.listHeight+"px",s.addEventListener("scroll",this._scrollHandler.bind(this)),s.addEventListener("wheel",this._wheelHandler.bind(this)),this._listDiv=r.createElement("div"),this._listDiv.className="rg-filter-list",this._listDiv.style.position="relative",s.appendChild(this._listDiv),this._element.appendChild(s),this._calcAllChecked(),this._buildItems(),n&&this._buildFooter(this._element),this._searched=!1},l.prototype._finalize=function(){var t;this._roots=[],this._visbleItemMap={};for(var e=this._items.length;e--;)this._items[e].filter=null,this._items[e].parent=null,this._items[e].childs=null,this._items[e]=null;for(this._items=[],(t=this._resetDiv)&&(t.addEventListener("click",this._resetClickHandler.bind(this)),this._headerDiv.removeChild(t),this._resetDiv=null),(t=this._searchDiv)&&(this._searchInput.removeEventListener("input",this._searchInputHandler.bind(this)),this._searchInput.removeEventListener("keydown",this._searchKeyDownHandler.bind(this)),this._headerDiv.removeChild(this._searchDiv),this._searchInput=null,this._searchDiv=null),this._selectAllDiv.removeEventListener("click",this._checkAllClickHandler.bind(this)),this._headerDiv.removeChild(this._selectAllDiv),this._element.removeChild(this._headerDiv),this._headerDiv=null,this._footerDiv&&(this._confirmButton.addEventListener("click",this._confirmClickHandler.bind(this)),this._cancelButton.addEventListener("click",this._cancelClickHandler.bind(this)),this._element.removeChild(this._footerDiv),this._confirmButton=null,this._cancelButton=null,this._footerDiv=null),e=this._itemElements.length;e--;)this._removeItem(e);this._itemElements=[];var i=this._viewportDiv;i.addEventListener("scroll",this._scrollHandler.bind(this)),i.addEventListener("wheel",this._wheelHandler.bind(this)),this._element.removeChild(i),this._listDiv=null,this._viewportDiv=null},l.prototype._buildSelectAllBox=function(){var t=this._soptions.allCheckText;this._selectAllDiv=this._buildItemElement(t,0,this._allCheck,"rg-filter-select-all"),this._selectAllCheck=this._selectAllDiv.childNodes[l.INDEX_CHECKBOX],this._headerDiv.appendChild(this._selectAllDiv),this._selectAllDiv.addEventListener("click",this._checkAllClickHandler.bind(this))},l.prototype._buildReset=function(t){var e=this.doc,i=this._resetDiv=e.createElement("div");i.className="rg-filter-reset",i.appendChild(e.createTextNode(this._soptions.filtersResetText)),i.addEventListener("click",this._resetClickHandler.bind(this)),t.appendChild(i)},l.prototype._buildItems=function(){var t=this._buildItemElement("temp임시",0,void 0,"rg-filter-item");this._listDiv.appendChild(t),this._itemHeight=Math.floor(t.getBoundingClientRect().height),this._listDiv.removeChild(t);var e=this._visibleCount,i=this._viewportDiv.offsetHeight;this._pageCount=Math.min(this._items.length,Math.ceil(i/this._itemHeight));var o=this._pageCount;this._listDiv.style.height=e*this._itemHeight+"px";var n=e<o?e:o;this._itemElements=[];for(var r=0;r<n;r++){var s=this._visibleItems[r];this._itemElements.push(this._buildItem(s,r))}},l.prototype._buildSearchbox=function(t){var e=this.doc,i=this._searchDiv=e.createElement("div");i.className="rg-filter-searchbox",this._searchInput=this.doc.createElement("input"),this._searchInput.type="text";var o=this._soptions.searchPlaceholder;this._searchInput.placeholder=o,this._searchInput.className="rg-filter-search-input",this._searchInput.addEventListener("input",this._searchInputHandler.bind(this)),this._searchInput.addEventListener("keydown",this._searchKeyDownHandler.bind(this)),i.appendChild(this._searchInput),t.appendChild(i)},l.prototype._buildFooter=function(t){var e=this.doc;this._footerDiv=e.createElement("div"),this._footerDiv.className="rg-filter-button";var i=this._confirmButton=e.createElement("input");i.type="button",i.className="rg-filter-accept",i.value=this._soptions.acceptText,i.addEventListener("click",this._confirmClickHandler.bind(this)),this._footerDiv.appendChild(i);var o=this._cancelButton=e.createElement("input");o.type="button",o.className="rg-filter-cancel",o.value=this._soptions.cancelText,o.addEventListener("click",this._cancelClickHandler.bind(this)),this._footerDiv.appendChild(o),t.appendChild(this._footerDiv)},l.prototype._buildItem=function(t,e){var i=this._items,o=this._listDiv,n=i[t],r=n.expanded,s=this._buildItemElement(n.text,n.level,n.state,"rg-filter-item",r);return s.id=t+"",s.style.position="absolute",s.style.height=this._itemHeight+"px",s.style.top=e*this._itemHeight+"px",s.addEventListener("click",this._itemClickHandler.bind(this)),o.appendChild(s),s},l.prototype._removeItem=function(t){var e=this._itemElements[t];e.removeEventListener("click",this._itemClickHandler.bind(this)),this._listDiv.removeChild(e),this._itemElements[t]=null,this._itemElements.splice(t,1)},l.prototype._buildItemElement=function(t,e,i,o,n){var r=this.doc,s=r.createElement("div");o&&(s.className=o);var a=r.createElement("div");a.className="rg-filter-item-indent-"+e,s.appendChild(a);var l=r.createElement("div"),h="rg-filter-expander";void 0!==n&&(h+=" "+(n?"rg-filter-expander-expanded":"rg-filter-expander-collapsed")),l.className=h,s.appendChild(l);var d=r.createElement("input");d.type="checkbox",d.className="rg-filter-checkbox",this._setCheckState(d,i),s.appendChild(d);var u=r.createTextNode(t);return s.appendChild(u),s},l.prototype._calculateState=function(t){for(var e=void 0,i=0,o=t.length;i<o;i++){var n=t[i];if(e&&n.state!=e)return pt.ActiveState.INDETERMINATE;e=n.state}return e||pt.ActiveState.UNACTIVE},l.prototype._calcluateStates=function(){for(var t=this._items.length;t--;){var e=this._items[t];e.childs&&(e.state=this._calculateState(e.childs))}},l.prototype._calcVisibleItems=function(){var t=0;this._visibleItems=[];for(var e=0,i=this._items.length;e<i;e++){var o=this._items[e];o.parent&&!o.parent.expanded||(t++,this._visibleItems.push(e))}return t},l.prototype._setCheckState=function(t,e){t.checked=e==pt.ActiveState.ACTIVE,t.indeterminate=e==pt.ActiveState.INDETERMINATE},l.prototype._calcAllChecked=function(){this._allCheck=this._calculateState(this._roots),this._setCheckState(this._selectAllCheck,this._allCheck)},l.prototype._redrawCheck=function(){for(var t=this._itemElements.length;t--;){var e=this._itemElements[t],i=parseInt(e.id),o=this._visbleItemMap[i],n=e.childNodes[l.INDEX_CHECKBOX];this._setCheckState(n,o.state)}},l.prototype._doRedraw=function(){for(var t=this._itemElements,e=this._pageCount,i=Math.min(e,this._visibleCount),o=0,n=0;n<i;n++){var r=this._visibleItems[n];!t[n]&&n<i&&t.push(this._buildItem(r,n)),this._changeItemModel(t[n],r),o++}for(n=t.length-1;o-1<n;n--)this._removeItem(n);this._listDiv.style.height=this._visibleCount*this._itemHeight+"px"},l.prototype._changeItemModel=function(t,e){var i=this._items[e];t.id=e+"";for(var o=t.childNodes.length;o--;){var n=t.childNodes.item(o);if(n instanceof HTMLElement){var r=n.className;if(r){if(-1<r.indexOf("rg-filter-item-indent-")&&(n.className="rg-filter-item-indent-"+i.level),-1<r.indexOf("rg-filter-expander")){var s="rg-filter-expander";void 0!==i.expanded&&(s+=" "+(i.expanded?"rg-filter-expander-expanded":"rg-filter-expander-collapsed")),n.className=s}n instanceof HTMLInputElement&&"rg-filter-checkbox"==r&&this._setCheckState(n,i.state)}}else n.nodeType==Node.TEXT_NODE&&(n.textContent=i.text)}},l.prototype._doScroll=function(){for(var t=this._itemElements,e=(this._viewportDiv.scrollTop,this._viewportDiv.offsetHeight,Math.max(0,Math.floor(Math.min(this._viewportDiv.scrollTop,this._listDiv.offsetHeight-this._viewportDiv.offsetHeight)/this._itemHeight))),i=(Math.min(this._visibleCount-e,t.length),0),o=t.length;i<o;i++){var n=this._visibleItems[e+i];this._changeItemModel(t[i],n),t[i].style.top=(e+i)*this._itemHeight+"px"}},l.prototype._doSearch=function(t){var e=this._manager.search(t);t?this._createItemInfo(e):this._createItemInfo(this._filters),this._selectAllDiv.childNodes[l.INDEX_TEXT].textContent=t?this._soptions.searchedCheckText:this._soptions.allCheckText,this._doRedraw(),this._searched=!!t},l.prototype._resetActive=function(){for(var t=this._items.length;t--;)this._items[t].state,pt.ActiveState.UNACTIVE;this._filters.activateAll(!1),this._redrawCheck()},l.prototype._activateAll=function(t){var e=!this._applyBatch;if(e&&!this._searched){this._filters.activateAll(t);for(var i=this._items.length;i--;)(o=this._items[i]).childs||(o.state=t?pt.ActiveState.ACTIVE:pt.ActiveState.UNACTIVE)}else for(i=this._items.length;i--;){var o;(o=this._items[i]).childs||(o.state=t?pt.ActiveState.ACTIVE:pt.ActiveState.UNACTIVE,e?o.filter.active=t:this._dirties.push(o))}e&&this._searched&&this._doFilterApply(),this._calcluateStates(),this._doRedraw()},l.prototype._doCheck=function(t,s){var e=s?pt.ActiveState.ACTIVE:pt.ActiveState.UNACTIVE,i=this._applyBatch||void 0!==t.childs,o=this._applyBatch?this._dirties:[];if(function t(e,i,o,n){if(e.state!=i)if(e.state=i,e.childs)for(var r=e.childs.length;r--;)t(e.childs[r],i,o,n);else o?n.push(e):e.filter.active=s}(t,e,i,o),i&&!this._applyBatch){for(var n=[],r=0,a=o.length;r<a;r++)n.push(o[r].filter.name);0<n.length&&this._filters.activateItems(n,s)}for(var l=t.parent;l;)l.state=this._calculateState(l.childs),l=l.parent;(t.parent||t.childs)&&this._redrawCheck(),this._calcAllChecked()},l.prototype._doFilterApply=function(){for(var t=this._dirties.length;t--;){var e=this._dirties[t];e.filter.active=e.state==pt.ActiveState.ACTIVE}this._dirties=[]},l.prototype._doExpand=function(t,e){t.expanded=e,this._visibleCount=this._calcVisibleItems(),this._doRedraw()},l.prototype._globalMouseDownHandler=function(t){for(var e=t.target;e;){if(e===this._element)return;e=e.parentElement}this.hide()},l.prototype._globalKeyDownHandler=function(t){27==t.keyCode&&this.hide()},l.prototype._wheelHandler=function(t){var e=t.deltaY;0!==e&&(e=(0<e?2:-2)*this._itemHeight,this._viewportDiv.scrollTop+=e,this._doScroll()),t.preventDefault()},l.prototype._scrollHandler=function(t){this._doScroll()},l.prototype._searchInputHandler=function(t){var e=t.target;e instanceof HTMLInputElement&&this._doSearch(e.value)},l.prototype._searchKeyDownHandler=function(t){13==t.keyCode&&this._doSearch(this._searchInput.value)},l.prototype._resetClickHandler=function(){var t=this._grid.getFilteredColumns(),e=t.length;this._searched&&this._doSearch(null);var i=this._selectAllDiv;this._setCheckState(i,pt.ActiveState.UNACTIVE),this._resetActive();for(var o=0;o<e;o++)t[o].activateAllFilters(!1);this._soptions.closeWhenClick&&this.hide()},l.prototype._checkAllClickHandler=function(t){"rg-filter-checkbox"==t.target.className||(this._selectAllCheck.checked=!this._selectAllCheck.checked);var e=this._selectAllCheck.checked;this._activateAll(e),this._allCheck=e?pt.ActiveState.ACTIVE:pt.ActiveState.UNACTIVE,!this._applyBatch&&this._soptions.closeWhenClick&&this.hide()},l.prototype._itemClickHandler=function(t){var e=t.target,i=-1<e.className.indexOf("rg-filter-expander"),o="rg-filter-checkbox"==e.className,n=e;"rg-filter-item"!==e.className&&(n=n.parentElement);var r=parseInt(n.id),s=this._visbleItemMap[r];if(i)void 0!==s.expanded&&this._doExpand(s,!s.expanded);else{var a=void 0;o?a=e:(a=n.children.item(l.INDEX_CHECKBOX)).checked=!a.checked,this._doCheck(s,a.checked)}},l.prototype._confirmClickHandler=function(){this._doFilterApply(),this.hide()},l.prototype._cancelClickHandler=function(){this.hide()},l.INDEX_PADDING=0,l.INDEX_EXPANDER=1,l.INDEX_CHECKBOX=2,l.INDEX_TEXT=3,l);function l(t,e,i){var o=s.call(this)||this;o._opened=!1,o._grid=i,o._gridContainer=i.container._containerDom;var n,r=ne.getDoc(o._gridContainer);return o._element=r.createElement("div"),o._element.style.position="absolute",o._element.style.display="none",o._element.className=e.selector.style,o._parent=t._containerDiv.parentElement,(n=t._containerDiv.nextSibling)?o._parent.insertBefore(o._element,n):o._parent.appendChild(o._element),o._options=e,o._soptions=e.selector,o._manager=new je.FilteringManager,o}e.FilterSelector=n});t(qe);qe.FilterSelector;var Ye=e(function(t,e){Object.defineProperty(e,"__esModule",{value:!0});var c=(l.decode=function(t){for(var e=l.CHARACTERS,i=l.SUFFIX,o=t.split(""),n=[],r=o.length;o[--r]==i;);for(var s=0;s<r;){var a=e.indexOf(o[s++])<<18;s<=r&&(a|=e.indexOf(o[s++])<<12),s<=r&&(a|=e.indexOf(o[s++])<<6),s<=r&&(a|=e.indexOf(o[s++])),n.push(a>>>16&255),n.push(a>>>8&255),n.push(255&a)}for(;0==n[n.length-1];)n.pop();return n},l.SUFFIX="=",l.CHARACTERS="ABCDEFGHIJKLMNOPQRSTUVWXYZabcdefghijklmnopqrstuvwxyz0123456789+/",l);function l(){}var h=(p.union=function(t,e){var i=e.s3[255&t];t>>=8;var o=e.s2[255&t];t>>=8;var n=e.s1[255&t];t>>=8;var r=e.s0[255&t],s=(r>>16)+(n>>16)+((65535&r)+(65535&n)>>16)<<16|(65535&r)+(65535&n)&65535;return((s=(s>>16^o>>16)<<16|65535&(65535&s^65535&o))>>16)+(i>>16)+((65535&s)+(65535&i)>>16)<<16|(65535&s)+(65535&i)&65535},p.xor=function(t,e){return(t>>16^e>>16)<<16|65535&(65535&t^65535&e)},p._encryptBlock=function(t,e){var i=t.left,o=t.right,n=p.xor,r=p.union;i=n(i,e.p[0]),o=n(o,n(r(i,e),e.p[1])),i=n(i,n(r(o,e),e.p[2])),o=n(o,n(r(i,e),e.p[3])),i=n(i,n(r(o,e),e.p[4])),o=n(o,n(r(i,e),e.p[5])),i=n(i,n(r(o,e),e.p[6])),o=n(o,n(r(i,e),e.p[7])),i=n(i,n(r(o,e),e.p[8])),o=n(o,n(r(i,e),e.p[9])),i=n(i,n(r(o,e),e.p[10])),o=n(o,n(r(i,e),e.p[11])),i=n(i,n(r(o,e),e.p[12])),o=n(o,n(r(i,e),e.p[13])),i=n(i,n(r(o,e),e.p[14])),o=n(o,n(r(i,e),e.p[15])),i=n(i,n(r(o,e),e.p[16])),t.right=i,t.left=n(o,e.p[17])},p._decryptBlock=function(t,e){var i=t.left,o=t.right,n=p.xor,r=p.union;i=n(i,e.p[17]),o=n(o,n(r(i,e),e.p[16])),i=n(i,n(r(o,e),e.p[15])),o=n(o,n(r(i,e),e.p[14])),i=n(i,n(r(o,e),e.p[13])),o=n(o,n(r(i,e),e.p[12])),i=n(i,n(r(o,e),e.p[11])),o=n(o,n(r(i,e),e.p[10])),i=n(i,n(r(o,e),e.p[9])),o=n(o,n(r(i,e),e.p[8])),i=n(i,n(r(o,e),e.p[7])),o=n(o,n(r(i,e),e.p[6])),i=n(i,n(r(o,e),e.p[5])),o=n(o,n(r(i,e),e.p[4])),i=n(i,n(r(o,e),e.p[3])),o=n(o,n(r(i,e),e.p[2])),i=n(i,n(r(o,e),e.p[1])),t.right=i,t.left=n(o,e.p[0])},p._init=function(t){var e,i,o,n=t.split("").map(function(t){return 255&t.charCodeAt(0)}),r=p.kb,s=p._encryptBlock,a=0,l=0,h={left:0,right:0},d={p:r.p.slice(0).map(function(t){var e,i=n.length;for(e=0;e<4;e++)l=l*p.POW8|n[a++%i];return(t>>16^l>>16)<<16|65535&(65535&t^65535&l)}),s0:r.s0.slice(0),s1:r.s1.slice(0),s2:r.s2.slice(0),s3:r.s3.slice(0)};for(e=0,o=d.p.length;e<o;)s(h,d),d.p[e++]=h.left,d.p[e++]=h.right;for(e=0;e<4;e++)for(i=0,o=d["s"+e].length;i<o;)s(h,d),d["s"+e][i++]=h.left,d["s"+e][i++]=h.right;return d},p.decrypt=function(t,e){for(var i=p._decryptBlock,o=p._init(e),n=[],r=c.decode(t),s=r.length>>3,a=0,l={left:null,right:null},h=0;h<s;h++){l.left=r[a]*p.POW24|r[a+1]*p.POW16|r[a+2]*p.POW8|r[a+3],l.right=r[a+4]*p.POW24|r[a+5]*p.POW16|r[a+6]*p.POW8|r[a+7],i(l,o);var d=l.left,u=l.right;n.push(d>>24&255),n.push(d>>16&255),n.push(d>>8&255),n.push(255&d),n.push(u>>24&255),n.push(u>>16&255),n.push(u>>8&255),n.push(255&u),a+=8}if(n[n.length-1]==n[n.length-2]||1==n[n.length-1]){var _=n[n.length-1];n.splice(n.length-_,_)}return n.map(function(t){return String.fromCharCode(t)}).join("")},p.POW2=Math.pow(2,2),p.POW3=Math.pow(2,3),p.POW4=Math.pow(2,4),p.POW8=Math.pow(2,8),p.POW16=Math.pow(2,16),p.POW24=Math.pow(2,24),p.kb={p:[608135816,2242054355,320440878,57701188,2752067618,698298832,137296536,3964562569,1160258022,953160567,3193202383,887688300,3232508343,3380367581,1065670069,3041331479,2450970073,2306472731],s0:[3509652390,2564797868,805139163,3491422135,3101798381,1780907670,3128725573,4046225305,614570311,3012652279,134345442,2240740374,1667834072,1901547113,2757295779,4103290238,227898511,1921955416,1904987480,2182433518,2069144605,3260701109,2620446009,720527379,3318853667,677414384,3393288472,3101374703,2390351024,1614419982,1822297739,2954791486,3608508353,3174124327,2024746970,1432378464,3864339955,2857741204,1464375394,1676153920,1439316330,715854006,3033291828,289532110,2706671279,2087905683,3018724369,1668267050,732546397,1947742710,3462151702,2609353502,2950085171,1814351708,2050118529,680887927,999245976,1800124847,3300911131,1713906067,1641548236,4213287313,1216130144,1575780402,4018429277,3917837745,3693486850,3949271944,596196993,3549867205,258830323,2213823033,772490370,2760122372,1774776394,2652871518,566650946,4142492826,1728879713,2882767088,1783734482,3629395816,2517608232,2874225571,1861159788,326777828,3124490320,2130389656,2716951837,967770486,1724537150,2185432712,2364442137,1164943284,2105845187,998989502,3765401048,2244026483,1075463327,1455516326,1322494562,910128902,469688178,1117454909,936433444,3490320968,3675253459,1240580251,122909385,2157517691,634681816,4142456567,3825094682,3061402683,2540495037,79693498,3249098678,1084186820,1583128258,426386531,1761308591,1047286709,322548459,995290223,1845252383,2603652396,3431023940,2942221577,3202600964,3727903485,1712269319,422464435,3234572375,1170764815,3523960633,3117677531,1434042557,442511882,3600875718,1076654713,1738483198,4213154764,2393238008,3677496056,1014306527,4251020053,793779912,2902807211,842905082,4246964064,1395751752,1040244610,2656851899,3396308128,445077038,3742853595,3577915638,679411651,2892444358,2354009459,1767581616,3150600392,3791627101,3102740896,284835224,4246832056,1258075500,768725851,2589189241,3069724005,3532540348,1274779536,3789419226,2764799539,1660621633,3471099624,4011903706,913787905,3497959166,737222580,2514213453,2928710040,3937242737,1804850592,3499020752,2949064160,2386320175,2390070455,2415321851,4061277028,2290661394,2416832540,1336762016,1754252060,3520065937,3014181293,791618072,3188594551,3933548030,2332172193,3852520463,3043980520,413987798,3465142937,3030929376,4245938359,2093235073,3534596313,375366246,2157278981,2479649556,555357303,3870105701,2008414854,3344188149,4221384143,3956125452,2067696032,3594591187,2921233993,2428461,544322398,577241275,1471733935,610547355,4027169054,1432588573,1507829418,2025931657,3646575487,545086370,48609733,2200306550,1653985193,298326376,1316178497,3007786442,2064951626,458293330,2589141269,3591329599,3164325604,727753846,2179363840,146436021,1461446943,4069977195,705550613,3059967265,3887724982,4281599278,3313849956,1404054877,2845806497,146425753,1854211946],s1:[1266315497,3048417604,3681880366,3289982499,290971e4,1235738493,2632868024,2414719590,3970600049,1771706367,1449415276,3266420449,422970021,1963543593,2690192192,3826793022,1062508698,1531092325,1804592342,2583117782,2714934279,4024971509,1294809318,4028980673,1289560198,2221992742,1669523910,35572830,157838143,1052438473,1016535060,1802137761,1753167236,1386275462,3080475397,2857371447,1040679964,2145300060,2390574316,1461121720,2956646967,4031777805,4028374788,33600511,2920084762,1018524850,629373528,3691585981,3515945977,2091462646,2486323059,586499841,988145025,935516892,3367335476,2599673255,2839830854,265290510,3972581182,2759138881,3795373465,1005194799,847297441,406762289,1314163512,1332590856,1866599683,4127851711,750260880,613907577,1450815602,3165620655,3734664991,3650291728,3012275730,3704569646,1427272223,778793252,1343938022,2676280711,2052605720,1946737175,3164576444,3914038668,3967478842,3682934266,1661551462,3294938066,4011595847,840292616,3712170807,616741398,312560963,711312465,1351876610,322626781,1910503582,271666773,2175563734,1594956187,70604529,3617834859,1007753275,1495573769,4069517037,2549218298,2663038764,504708206,2263041392,3941167025,2249088522,1514023603,1998579484,1312622330,694541497,2582060303,2151582166,1382467621,776784248,2618340202,3323268794,2497899128,2784771155,503983604,4076293799,907881277,423175695,432175456,1378068232,4145222326,3954048622,3938656102,3820766613,2793130115,2977904593,26017576,3274890735,3194772133,1700274565,1756076034,4006520079,3677328699,720338349,1533947780,354530856,688349552,3973924725,1637815568,332179504,3949051286,53804574,2852348879,3044236432,1282449977,3583942155,3416972820,4006381244,1617046695,2628476075,3002303598,1686838959,431878346,2686675385,1700445008,1080580658,1009431731,832498133,3223435511,2605976345,2271191193,2516031870,1648197032,4164389018,2548247927,300782431,375919233,238389289,3353747414,2531188641,2019080857,1475708069,455242339,2609103871,448939670,3451063019,1395535956,2413381860,1841049896,1491858159,885456874,4264095073,4001119347,1565136089,3898914787,1108368660,540939232,1173283510,2745871338,3681308437,4207628240,3343053890,4016749493,1699691293,1103962373,3625875870,2256883143,3830138730,1031889488,3479347698,1535977030,4236805024,3251091107,2132092099,1774941330,1199868427,1452454533,157007616,2904115357,342012276,595725824,1480756522,206960106,497939518,591360097,863170706,2375253569,3596610801,1814182875,2094937945,3421402208,1082520231,3463918190,2785509508,435703966,3908032597,1641649973,2842273706,3305899714,1510255612,2148256476,2655287854,3276092548,4258621189,236887753,3681803219,274041037,1734335097,3815195456,3317970021,1899903192,1026095262,4050517792,356393447,2410691914,3873677099,3682840055],s2:[3913112168,2491498743,4132185628,2489919796,1091903735,1979897079,3170134830,3567386728,3557303409,857797738,1136121015,1342202287,507115054,2535736646,337727348,3213592640,1301675037,2528481711,1895095763,1721773893,3216771564,62756741,2142006736,835421444,2531993523,1442658625,3659876326,2882144922,676362277,1392781812,170690266,3921047035,1759253602,3611846912,1745797284,664899054,1329594018,3901205900,3045908486,2062866102,2865634940,3543621612,3464012697,1080764994,553557557,3656615353,3996768171,991055499,499776247,1265440854,648242737,3940784050,980351604,3713745714,1749149687,3396870395,4211799374,3640570775,1161844396,3125318951,1431517754,545492359,4268468663,3499529547,1437099964,2702547544,3433638243,2581715763,2787789398,1060185593,1593081372,2418618748,4260947970,69676912,2159744348,86519011,2512459080,3838209314,1220612927,3339683548,133810670,1090789135,1078426020,1569222167,845107691,3583754449,4072456591,1091646820,628848692,1613405280,3757631651,526609435,236106946,48312990,2942717905,3402727701,1797494240,859738849,992217954,4005476642,2243076622,3870952857,3732016268,765654824,3490871365,2511836413,1685915746,3888969200,1414112111,2273134842,3281911079,4080962846,172450625,2569994100,980381355,4109958455,2819808352,2716589560,2568741196,3681446669,3329971472,1835478071,660984891,3704678404,4045999559,3422617507,3040415634,1762651403,1719377915,3470491036,2693910283,3642056355,3138596744,1364962596,2073328063,1983633131,926494387,3423689081,2150032023,4096667949,1749200295,3328846651,309677260,2016342300,1779581495,3079819751,111262694,1274766160,443224088,298511866,1025883608,3806446537,1145181785,168956806,3641502830,3584813610,1689216846,3666258015,3200248200,1692713982,2646376535,4042768518,1618508792,1610833997,3523052358,4130873264,2001055236,3610705100,2202168115,4028541809,2961195399,1006657119,2006996926,3186142756,1430667929,3210227297,1314452623,4074634658,4101304120,2273951170,1399257539,3367210612,3027628629,1190975929,2062231137,2333990788,2221543033,2438960610,1181637006,548689776,2362791313,3372408396,3104550113,3145860560,296247880,1970579870,3078560182,3769228297,1714227617,3291629107,3898220290,166772364,1251581989,493813264,448347421,195405023,2709975567,677966185,3703036547,1463355134,2715995803,1338867538,1343315457,2802222074,2684532164,233230375,2599980071,2000651841,3277868038,1638401717,4028070440,3237316320,6314154,819756386,300326615,590932579,1405279636,3267499572,3150704214,2428286686,3959192993,3461946742,1862657033,1266418056,963775037,2089974820,2263052895,1917689273,448879540,3550394620,3981727096,150775221,3627908307,1303187396,508620638,2975983352,2726630617,1817252668,1876281319,1457606340,908771278,3720792119,3617206836,2455994898,1729034894,1080033504],s3:[976866871,3556439503,2881648439,1522871579,1555064734,1336096578,3548522304,2579274686,3574697629,3205460757,3593280638,3338716283,3079412587,564236357,2993598910,1781952180,1464380207,3163844217,3332601554,1699332808,1393555694,1183702653,3581086237,1288719814,691649499,2847557200,2895455976,3193889540,2717570544,1781354906,1676643554,2592534050,3230253752,1126444790,2770207658,2633158820,2210423226,2615765581,2414155088,3127139286,673620729,2805611233,1269405062,4015350505,3341807571,4149409754,1057255273,2012875353,2162469141,2276492801,2601117357,993977747,3918593370,2654263191,753973209,36408145,2530585658,25011837,3520020182,2088578344,530523599,2918365339,1524020338,1518925132,3760827505,3759777254,1202760957,3985898139,3906192525,674977740,4174734889,2031300136,2019492241,3983892565,4153806404,3822280332,352677332,2297720250,60907813,90501309,3286998549,1016092578,2535922412,2839152426,457141659,509813237,4120667899,652014361,1966332200,2975202805,55981186,2327461051,676427537,3255491064,2882294119,3433927263,1307055953,942726286,933058658,2468411793,3933900994,4215176142,1361170020,2001714738,2830558078,3274259782,1222529897,1679025792,2729314320,3714953764,1770335741,151462246,3013232138,1682292957,1483529935,471910574,1539241949,458788160,3436315007,1807016891,3718408830,978976581,1043663428,3165965781,1927990952,4200891579,2372276910,3208408903,3533431907,1412390302,2931980059,4132332400,1947078029,3881505623,4168226417,2941484381,1077988104,1320477388,886195818,18198404,3786409e3,2509781533,112762804,3463356488,1866414978,891333506,18488651,661792760,1628790961,3885187036,3141171499,876946877,2693282273,1372485963,791857591,2686433993,3759982718,3167212022,3472953795,2716379847,445679433,3561995674,3504004811,3574258232,54117162,3331405415,2381918588,3769707343,4154350007,1140177722,4074052095,668550556,3214352940,367459370,261225585,2610173221,4209349473,3468074219,3265815641,314222801,3066103646,3808782860,282218597,3406013506,3773591054,379116347,1285071038,846784868,2669647154,3771962079,3550491691,2305946142,453669953,1268987020,3317592352,3279303384,3744833421,2610507566,3859509063,266596637,3847019092,517658769,3462560207,3443424879,370717030,4247526661,2224018117,4143653529,4112773975,2788324899,2477274417,1456262402,2901442914,1517677493,1846949527,2295493580,3734397586,2176403920,1280348187,1908823572,3871786941,846861322,1172426758,3287448474,3383383037,1655181056,3139813346,901632758,1897031941,2986607138,3066810236,3447102507,1393639104,373351379,950779232,625454576,3124240540,4148612726,2007998917,544563296,2244738638,2330496472,2058025392,1291430526,424198748,50039436,29584100,3605783033,2429876329,2791104160,1057563949,3255363231,3075367218,3463963227,1469046755,985887462],k:[202,218,204,100]},p);function p(){}e.Cryptor=h;var a=(i.eqaulsUpperDomain=function(t,e){return t==e||0===t.indexOf("*")&&(t=t.substr(1,t.length-1),e.substr(e.indexOf(t),t.length)==t)},i._getLDKey=function(t){for(var e="",i=0,o=t.length;i<o;i++)e+=String.fromCharCode(t[i]>>1);return e},i.includedDomains=function(t,e){for(var i=t.split(","),o=0,n=i.length;o<n;o++)if(this.eqaulsUpperDomain(i[o],e))return!0;return!1},i.decrypt=function(t){for(var e={},i=h.decrypt(t,ae._gk+this._getLDKey(h.kb.k)).split(";"),o=0,n=i.length;o<n;o++){var r=i[o].split("="),s=r[0],a=r[1];a&&0<a.length&&(e[s]=a)}return e},i);function i(){}e.lk=function(){var t,e=location.hostname;try{t=realGrid2Lic}catch(t){return!1}if(!t)return!1;var i=a.decrypt(t);if("RealGrid2"!=i.name)return!1;var o=i.server.toLowerCase();if(d.globalRealGridInfo.license!=d.LicenseType.Developer&&!a.includedDomains(o,e.toLowerCase()))return!1;var n=i.lic.toLowerCase();if(d.globalRealGridInfo.code=i.code,d.globalRealGridInfo.license=i.lic,n==d.LicenseType.Evaluation||n==d.LicenseType.Limited){var r=i.expire.split(".").map(function(t){return parseInt(t)}),s=new Date(r[0],r[1],r[2],23,59,59,999);if(new Date>s)return!1}return!0}});t(Ye);Ye.Cryptor,Ye.lk;var Xe=e(function(t,e){Object.defineProperty(e,"__esModule",{value:!0});var i,o=(i=mt.GridCell,oe.__extends(n,i),n.prototype._doDispose=function(){this._rowGroup=null,i.prototype._doDispose.call(this)},_dp(n,"text",{get:function(){return this.item instanceof dt.GroupItemImpl?this._rowGroup.getHeaderText(this.item):""}}),_dp(n,"value",{get:function(){}}),n);function n(t){var e=i.call(this,"rowGroupHeaderCell")||this;return e._rowGroup=t,e}e.RowGroupHeaderCell=o;var r,s=(r=mt.GridCell,oe.__extends(a,r),a.$_getValue=function(t,e){if(e&&0<=e.dataIndex){var i=e.grid,o=t.parent,n=o.getFooterIndex(t),r=e.groupFooters.get(n);if(r&&r.expression){var s=i.rowGroupSummaryRuntime;return s.setColumn(e,e.grid.summarizer),s.setItem(o),r.evaluate(s)}if(r&&r.valueCallback)return(0,r.valueCallback)(i.handler,e.toProxy(),n,o,null);if(o&&e&&i.isGroupedColumn(e)){var a=i.rowGroup.getFooterText(o);return null==a?void 0:a}}},a.getValue=function(t,e){try{return a.$_getValue(t,e)}catch(t){return mt.GridCell.ERROR}},a.$_displayText=function(t,e,i,o){var n="";if(void 0!==i&&e){if(e.valueType==lt.ValueType.DATETIME){var r=void 0;i instanceof Date&&(r=o.datetimeWriter)?n=r.getText(i):i&&(n=i)}else{var s=void 0,a=parseFloat(i);!isNaN(a)&&(s=o.numberFormatter)?n=s.getText(a):i&&(n=i)}if(n){var l=o.prefix;l&&(n=l+n),(l=o.suffix)&&(n+=l)}}if(!n){var h=e.grid,d=ne.Utils.cast(t.parent,dt.GroupItemImpl),u=h.rowGroup,_=void 0;if(d&&e&&h.isGroupedColumn(e)&&(_=u.getFooterText(d)))n=_;else if(e){var c=e.groupFooters.get(d.getFooterIndex(t));c&&(n=c.text)}}return n||""},a.prototype._doDispose=function(){this._rowGroup=null,r.prototype._doDispose.call(this)},_dp(a,"footerIndex",{get:function(){return this._footerIndex}}),a.prototype.calculate=function(t){this._value=NaN,this._error=null;try{this._value=a.$_getValue(this.index.item||t,this.index.dataColumn)}catch(t){this._error=t,this._errorDetail=t,ne.Utils.log("FOOTER ERROR: "+t)}},a.prototype.getDisplayText=function(t){return this._error?mt.GridCell.ERROR:a.$_displayText(this.index.item,this.index.dataColumn,this._value,t)},a.prototype.getSummary=function(){return this._getSummary(this.valueColumn,this._footerIndex)},a.prototype.getTemplate=function(t){var e=this._getSummary(this.valueColumn,this._footerIndex);return e?e.realizeGroupSummary(this,t):void 0},_dp(a,"value",{get:function(){return this._value}}),_dp(a,"level",{get:function(){return this.index.item.level}}),a.prototype.setIndex=function(t){r.prototype.setIndex.call(this,t),this._footerIndex=t.item.$_footerIndex},a.prototype._getSummary=function(t,e){return t.groupFooters.get(e)},a);function a(t){var e=r.call(this,"rowGroupFooterCell")||this;return e._footerIndex=0,e._value=NaN,e._rowGroup=t,e}e.RowGroupFooterCell=s;var l,h=(l=mt.GridCell,oe.__extends(d,l),_dp(d,"level",{get:function(){return this.item.level}}),_dp(d,"getText",{get:function(){return""}}),_dp(d,"value",{get:function(){}}),d);function d(){var t=l.call(this,"rowGroupBarCell")||this;return t._level=0,t}e.RowGroupBarCell=h;var u,_=(u=re.Base,oe.__extends(c,u),c.prototype._doDispose=function(){u.prototype._doDispose.call(this)},_dp(c,"index",{get:function(){return this._index}}),_dp(c,"styleName",{get:function(){return this._styleName},set:function(t){t!=this._styleName&&(this._styleName=t,this._changed())}}),_dp(c,"styleCallback",{get:function(){return this._styleCallback},set:function(t){t!==this._styleCallback&&(this._styleCallback=t,this._changed())}}),_dp(c,"cellStyleCallback",{get:function(){return this._cellStyleCallback},set:function(t){t!==this._cellStyleCallback&&(this._cellStyleCallback=t,this._changed())}}),c.prototype._changed=function(){this.$_owner&&this.$_owner.$_itemChanged(this)},c);function c(){var t=u.call(this)||this;return t._index=0,t}e.RowGroupFooter=_;var p,f=(p=re.Base,oe.__extends(g,p),g.prototype._doDispose=function(){for(var t=0,e=this._items;t<e.length;t++)e[t].dispose();this._items=null,p.prototype._doDispose.call(this)},_dp(g,"owner",{get:function(){return this._owner}}),_dp(g,"count",{get:function(){return this._items.length}}),g.prototype.get=function(t){return this._items[t]},g.prototype.assignFrom=function(t){var e=this._items;if(ne.Utils.isArray(t)){for(var i=t.length;e.length<i;)e.push(null);0<i&&e.length>i&&(e.length=i),0<i&&(e[0].assignFrom(t[0]),e[0]._index=0);for(var o=1;o<i;o++)t[o]?(e[o]||(e[o]=new _),e[o].assignFrom(t[o]),e[o].$_collection=this,e[o]._index=o):e[o]=null}else e[0].assignFrom(t),e[0]._index=0;this.$_itemChanged(null)},g.prototype.$_itemChanged=function(t){this._owner&&this._owner.rowGroupFooterChanged(t)},g);function g(t){var e=p.call(this)||this;return e._items=[],e._owner=t,e._items.push(new _),e._items[0].$_collection=e}e.RowGroupFooterCollection=f;var m,y=(m=ft.VisualObject,oe.__extends(v,m),v.prototype._doDispose=function(){this._footers=this._footers.dispose(),m.prototype._doDispose.call(this)},v.prototype.rowGroupFooterChanged=function(t){this._counterAware&&this._counterAware.groupfFooterCounterChanged(this)},v.prototype.getGroupFooterCount=function(t){return this._footers.count},v.prototype.setCounterAware=function(t){this._counterAware=t},_dp(v,"mergeMode",{get:function(){return this._mergeMode},set:function(t){t!=this._mergeMode&&(this._mergeMode=t,this._changed())}}),_dp(v,"sorting",{get:function(){return this._sorting},set:function(t){t!=this._sorting&&(this._sorting=t,this._changed())}}),_dp(v,"expandedAdornments",{get:function(){return this._expandedAdornments},set:function(t){t!=this._expandedAdornments&&(this._expandedAdornments=t,this._grid&&this._grid.$_rowGroupAdornmentsChanged(this))}}),_dp(v,"collapsedAdornments",{get:function(){return this._collapsedAdornments},set:function(t){t!=this._collapsedAdornments&&(this._collapsedAdornments=t,this._grid&&this._grid.$_rowGroupAdornmentsChanged(this))}}),_dp(v,"createFooterCallback",{get:function(){return this._createFooterCallback},set:function(t){t!==this._createFooterCallback&&(this._createFooterCallback=t,this._grid&&this._grid.$_rowGroupAdornmentsChanged(this))}}),_dp(v,"indentVisible",{get:function(){return this._indentVisible},set:function(t){t!=this._indentVisible&&(this._indentVisible=t,this._changed())}}),_dp(v,"levelIndent",{get:function(){return this._levelIndent},set:function(t){(t=Math.max(0,t))!=this._levelIndent&&(this._levelIndent=t,this._changed())}}),_dp(v,"mergeHeaderIndenting",{get:function(){return this._mergeHeaderIndenting},set:function(t){t!=this._mergeHeaderIndenting&&(this._mergeHeaderIndenting=t,this._changed())}}),_dp(v,"mergeFooterIndenting",{get:function(){return this._mergeFooterIndenting},set:function(t){t!=this._mergeFooterIndenting&&(this._mergeFooterIndenting=t,this._changed())}}),_dp(v,"footers",{get:function(){return this._footers}}),v.prototype.setFooters=function(t){this._footers.assignFrom(t)},_dp(v,"headerStatement",{get:function(){return this._headerStatement},set:function(t){t!==this._headerStatement&&(this._headerStatement=t,this._headerStatementExpr.source=t,this._changed())}}),_dp(v,"footerStatement",{get:function(){return this._footerStatement},set:function(t){t!=this._footerStatement&&(this._footerStatement=t,this._footerStatementExpr.source=t,this._changed())}}),_dp(v,"mergeExpanderVisibility",{get:function(){return this._mergeExpanderVisibility},set:function(t){t!=this._mergeExpanderVisibility&&(this._mergeExpanderVisibility=t,this._changed())}}),v.prototype.getHeaderCell=function(t){return this._headerCell.setIndex(kt.CellIndex.temp(this.owner,t.index)),this._headerCell},v.prototype.getFooterCell=function(t){var e=t.item;return this._footerCell.setIndex(t),this._footerCell.calculate(e),this._footerCell},v.prototype.getFooterStyleName=function(t){var e=this._footers.get(t.$_footerIndex),i="rg-rowgroup-footer rg-rowgroup-footer-level-"+String(t.parent.level),o=e.styleName,n=e.styleCallback;return o&&(i+=" "+o),n&&(o=n(this._grid.handler,t.index,e.index))&&(i+=" "+o),i},v.prototype.getFooterCellStyle=function(t,e){var i=t.footerIndex,o=this._footers.get(i).cellStyleCallback,n=t.index.column.groupFooters.get(t.footerIndex);if(o){var r=o(this._grid.handler,t);e.assign(r)}if(n){var s=n.styleCallback;if(s){var a=s(this._grid.handler,t);e.assign(a)}}return!e.styleName&&n&&(e.styleName=n.styleName),e.styleName?e.styleName=v.FOOTER_CELL_STYLE+" "+e.styleName:e.styleName=v.FOOTER_CELL_STYLE,e},v.prototype.getFooterCellFormatters=function(t,e){return e&&t?(e.numberFormatter=e.numberFormatter||t.numberFormatter,e.datetimeWriter=e.datetimeWriter||t.datetimeWriter,e.booleanFormatter=e.booleanFormatter||t.boolFormatter,e.textFormatter=e.textFormatter||t.textFormatter,e.prefix=e.prefix||t.prefix,e.suffix=e.suffix||t.suffix):t&&((e=this._footerFormatter).numberFormatter=t.numberFormatter,e.datetimeWriter=t.datetimeWriter,e.booleanFormatter=t.boolFormatter,e.textFormatter=t.textFormatter,e.prefix=t.prefix,e.suffix=t.suffix),e},v.prototype.getBarCell=function(t){return this._barCell.setIndex(t),this._barCell},v.prototype.getHeaderText=function(t){return this._statementRuntime.setGrid(this.owner),this._statementRuntime.setGroup(t),this._headerStatementExpr.evaluate(this._statementRuntime)},v.prototype.getFooterText=function(t){return this._footerStatementExpr?(this._statementRuntime.setGrid(this.owner),this._statementRuntime.setGroup(t),this._footerStatementExpr.evaluate(this._statementRuntime)):null},v.prototype._doChanged=function(){this.owner.$_rowGroupChanged(this)},v.prototype.$_isMultiLine=function(t){var e=t.visible?1:0,i=t.footerCount;if(1<(e+=t.count-i))return!0;for(var o=0;o<i;o++)if(t.getFooter(o).visible&&1<++e)return!0;return!1},v.prototype.$_isMergeExpanderVisible=function(t){if(this._mergeMode){if(!t.expanded)return!0;switch(this._mergeExpanderVisibility){case lt.ExpanderVisibility.NONE:return!1;case lt.ExpanderVisibility.ALWAYS:return!0;default:return this.$_isMultiLine(t)}}},v.FOOTER_CELL_STYLE="rg-rowgroup-footer-cell",v);function v(t){var e=m.call(this,t)||this;return e._mergeMode=!1,e._sorting=!0,e._expandedAdornments=lt.RowGroupAdornments.BOTH,e._collapsedAdornments=lt.RowGroupAdornments.HEADER,e._indentVisible=!0,e._levelIndent=20,e._mergeHeaderIndenting=!0,e._mergeFooterIndenting=!0,e._headerStatement="${groupField}: ${groupValue} - ${rowCount} rows",e._mergeExpanderVisibility=lt.ExpanderVisibility.DEFAULT,e._headerCell=new o(e),e._footerCell=new s(e),e._barCell=new h,e._headerStatementExpr=new ut.ExpressionStatement(e._headerStatement),e._footerStatementExpr=new ut.ExpressionStatement,e._statementRuntime=new gt.RowGroupStatementRuntime,e._footerFormatter={numberFormatter:null,datetimeWriter:null,booleanFormatter:null,textFormatter:null,prefix:"",suffix:""},e._footers=new f(e),e}e.RowGroup=y});t(Xe);Xe.RowGroupHeaderCell,Xe.RowGroupFooterCell,Xe.RowGroupBarCell,Xe.RowGroupFooter,Xe.RowGroupFooterCollection,Xe.RowGroup;var Ke=e(function(t,e){Object.defineProperty(e,"__esModule",{value:!0});var o,i=(o=Ut.VisualElement,oe.__extends(n,o),n.prototype._doDispose=function(){this._owner=null,o.prototype._doDispose.call(this)},_dp(n,"selectionMask",{get:function(){return this._owner}}),_dp(n,"dir",{get:function(){return this._dir}}),n.prototype._getCssSelector=function(){return n.STYLE_NAME+this._dir+"-handle"},n.prototype._initDom=function(t){o.prototype._initDom.call(this,t),t.style.background="red"},n.prototype._doDraw=function(){},n.STYLE_NAME="rg-selection-handle",n);function n(t,e){var i=o.call(this,t.doc,"mobileSelectionHandle")||this;return i._dir=e,i._owner=t,i}e.MobileSelectionHandle=i;var r,s=(r=Wt.SelectionLayer,oe.__extends(a,r),a.prototype._doDispose=function(){},a.prototype.getSelectHandle=function(t){for(var e in this._views){var i=this._views[e];if(i.leftHandle._dom===t)return i.leftHandle;if(i.topHandle._dom===t)return i.topHandle;if(i.bottomHandle._dom===t)return i.bottomHandle;if(i.rightHandle._dom===t)return i.rightHandle}},a.prototype.addView=function(t){var e=t.$_hash,i=this._views[e];return i||(i=this._pool.pop()||new h(this.doc),this._views[e]=i),i._item=t,this.addChild(i),this.addChild(i.leftHandle),this.addChild(i.topHandle),this.addChild(i.bottomHandle),this.addChild(i.rightHandle),i},a.prototype.clearViews=function(){for(var t in this._views){var e=this._views[t];this.removeChild(e.leftHandle),this.removeChild(e.topHandle),this.removeChild(e.bottomHandle),this.removeChild(e.rightHandle),this.removeChild(e),this._pool.push(e)}this._views={}},a.prototype.layout=function(){var t=this._grid.layoutManager;for(var e in this._grid.selections,this._views){var i=this._views[e],o=i.item,n=!1,r=new ht.Rectangle;if(i.prepare(),o instanceof Wt.RowSelection||o instanceof Wt.ColumnSelection||(n=this.$_getMobileSelectionRangeRect(t,o,i,r)),n){var s=t.footerBounds.y;r.bottom>s&&(i._bottomed=!0,r.bottom=s)}i.visible=n,i.visible&&(i.setRectI(r),i.updateElement(),this._layoutHandle(i,r),i.invalidate(!1,!0))}},a.prototype._layoutHandle=function(t,e){var i,o;i=e.x-6.5,o=e.y+(e.height-13)/2,t.leftHandle.setBounds(i,o,13,13),i=e.x+(e.width-13)/2,o=e.y-6.5,t.topHandle.setBounds(i,o,13,13),i=e.x+(e.width-13)/2,o=e.bottom-6.5,t.bottomHandle.setBounds(i,o,13,13),i=e.right-6.5,o=e.y+(e.height-13)/2,t.rightHandle.setBounds(i,o,13,13)},a.prototype.$_getMobileSelectionRowsRect=function(t,e,i,o){return r.prototype.$_getSelectionRowsRect.call(this,t,e,i,o)},a.prototype.$_getMobileSelectionColumnsRect=function(t,e,i,o){return r.prototype.$_getSelectionColumnsRect.call(this,t,e,i,o)},a.prototype.$_getMobileSelectionRangeRect=function(t,e,i,o){return r.prototype.$_getSelectionRangeRect.call(this,t,e,i,o)},a);function a(t,e){return r.call(this,t,e)||this}e.MobileSelectionLayer=s;var l,h=(l=Wt.SelectionMask,oe.__extends(d,l),d.prototype._doDispose=function(){this._leftHandle=this._leftHandle.dispose(),this._topHandle=this._topHandle.dispose(),this._bottomHandle=this._bottomHandle.dispose(),this._rightHandle=this._rightHandle.dispose(),l.prototype._doDispose.call(this)},_dp(d,"leftHandle",{get:function(){return this._leftHandle}}),_dp(d,"topHandle",{get:function(){return this._topHandle}}),_dp(d,"bottomHandle",{get:function(){return this._bottomHandle}}),_dp(d,"rightHandle",{get:function(){return this._rightHandle}}),d.prototype.prepare=function(){l.prototype.prepare.call(this)},d.prototype.updateElement=function(){l.prototype.updateElement.call(this)},d.prototype._initDom=function(t){l.prototype._initDom.call(this,t),this.setImportantStyle("overflow","hidden"),this.setImportantStyle("pointer-events","none")},d.prototype._visibleChanged=function(){this._leftHandle.visible=this._topHandle.visible=this._bottomHandle.visible=this._rightHandle.visible=this.visible},d);function d(t){var e=l.call(this,t)||this;return e._leftHandle=new i(e,"left"),e._topHandle=new i(e,"top"),e._bottomHandle=new i(e,"bottom"),e._rightHandle=new i(e,"right"),e}e.MobileSelectionMask=h});t(Ke);Ke.MobileSelectionHandle,Ke.MobileSelectionLayer,Ke.MobileSelectionMask;var Ze=e(function(t,e){var r,i;Object.defineProperty(e,"__esModule",{value:!0}),(i=r=e.DataDropMode||(e.DataDropMode={})).COPY="copy",i.MOVE="move";var o,n=(o=$t.GridBaseOptions,oe.__extends(s,o),s.prototype._doDispose=function(){o.prototype._doDispose.call(this)},_dp(s,"dragCallback",{get:function(){return this._dragCallback},set:function(t){this._dragCallback=t}}),_dp(s,"callback",{get:function(){return this._callback},set:function(t){this._callback=t}}),_dp(s,"dropMode",{get:function(){return this._dropMode},set:function(t){this._dropMode=t}}),_dp(s,"fieldMap",{get:function(){return this._fieldMap},set:function(t){this._fieldMap=t}}),_dp(s,"fieldMapCallback",{get:function(){return this._fieldMapCallback},set:function(t){this._fieldMapCallback=t}}),_dp(s,"proxyLabel",{get:function(){return this._proxyLabel},set:function(t){this._proxyLabel=t}}),_dp(s,"labelCallback",{get:function(){return this._labelCallback},set:function(t){this._labelCallback=t}}),s.prototype.getEnabled=function(t,e,i){var o=this._dragCallback;return!o||!1!==o(t.handler,e,this.grid.handler,i)},s.prototype.getLabel=function(t,e,i){var o=this._labelCallback,n=void 0;return o&&(n=o(t.handler,e,this.grid.handler,i)),void 0===n&&this._proxyLabel&&(n=(n=(n=(n=this._proxyLabel.replace("${rows}",e.length+"")).replace("${mode}",t==this.grid||this.dropMode==r.MOVE?"이동":"복사")).replace("${from}",e[0]+"")).replace("${to}",i+"")),n},s);function s(t){var e=o.call(this,t)||this;return e._dropMode=r.COPY,e._proxyLabel="${rows}행 ${mode}",e}e.DataDropOptions=n});t(Ze);Ze.DataDropMode,Ze.DataDropOptions;var Qe=e(function(t,e){Object.defineProperty(e,"__esModule",{value:!0});var i,o=(i=Ut.LayerElement,oe.__extends(n,i),n.prototype._doDispose=function(){i.prototype._doDispose.call(this)},n.prototype.layout=function(){var t=this._owner.layoutManager;this.$_setBounds(this._grid,t.gridBounds.clone().inflate(-1,-1));var e=t.dataBounds.clone();e.offset(t.contentBounds.x,t.contentBounds.y),this.$_setBounds(this._data,e)},n.prototype._getCssSelector=function(){return"rg-debug-layer"},n.prototype._initDom=function(t){var e=t.style,i=ne.getDoc(t);e.position="absolute",t.appendChild(this._client=this.$_createElement(i,"Client")),t.appendChild(this._topContent=this.$_createElement(i,"Top Content")),t.appendChild(this._leftContent=this.$_createElement(i,"Left Content")),t.appendChild(this._fixedContent=this.$_createElement(i,"Fixed Content")),t.appendChild(this._content=this.$_createElement(i,"Content")),t.appendChild(this._rightContent=this.$_createElement(i,"Right Content")),t.appendChild(this._grid=this.$_createElement(i,"Grid Bounds","b")),t.appendChild(this._data=this.$_createElement(i,"Data Bounds","g")),t.appendChild(this._nonFixed=this.$_createElement(i,"Non Fixed","g"))},n.prototype.$_createElement=function(t,e,i){void 0===i&&(i="r");var o=t.createElement("span"),n=o.style;return n.display="inline-block",n.position="absolute",n.boxSizing="border-box",n.pointerEvents="none","b"==i?(n.border="2px dashed rgba(0, 0, 255, 0.5)",n.color="blue"):"g"==i?(n.paddingTop="20px",n.border="2px solid rgba(0, 128, 0, 0.5)",n.color="rgb(0, 128, 0)"):(n.border="1px solid rgba(255, 0, 0, 0.7)",n.color="red"),n.fontWeight="bold",n.textAlign="center",n.verticalAlign="middle",n.whiteSpace="normal",o[ne.Utils.TextProp]=e,o},n.prototype.$_setBounds=function(t,e){var i=t.style;e.isEmpty?i.display="none":(i.display="inline-block",i.left=e.x+"px",i.top=e.y+"px",i.width=e.width+"px",i.height=e.height+"px",i.lineHeight=e.height+"px")},n);function n(t){var e=i.call(this,t.doc,"gridDebugLayer")||this;return e._owner=t,e}e.DebugLayer=o});t(Qe);Qe.DebugLayer;var Je=e(function(t,e){Object.defineProperty(e,"__esModule",{value:!0});var i;i=$.EventAware,oe.__extends(o,i),_dp(o,"min",{get:function(){return this._min},set:function(t){this._min=t}}),_dp(o,"max",{get:function(){return this._max},set:function(t){this._max=t}}),_dp(o,"step",{get:function(){return this._step},set:function(t){this._step=t}}),o.prototype.execute=function(t){if(t){this._runner=t,this._next=this._min;var e=ne.getWin(t.container);t.container instanceof e.HTMLElement&&(this._view.setProperties(this._min,this._max,this._min),this._view.show(t.container)),this.$_runNext()}},o.prototype.$_runNext=function(){if(this._next<this._max){var t=this._runner.run(this._next);if(this._next+=this._step,this._view.setPosition(this._next,t),this._next<this._max)return void setTimeout(function(){this.$_runNext()}.bind(this),0)}this._completed||this.$_complete()},o.prototype.$_complete=function(){try{this._runner.complete&&this._runner.complete()}finally{this._completed=!0,this._view.close()}};function o(){var t=i.call(this)||this;return t._min=0,t._max=100,t._step=1,t._next=0,t._completed=!1,t._timer=void 0,t}var n,r=(n=$.EventAware,oe.__extends(s,n),_dp(s,"message",{get:function(){return this._message},set:function(t){this._message=t}}),_dp(s,"position",{get:function(){return this._pos}}),s.prototype.setPosition=function(t,e){(t=Math.max(this._min,Math.min(this._max,t)))!=this._pos&&(this._pos=t,this._message=e,this.$_refreshView())},s.prototype.setProperties=function(t,e,i,o,n){void 0===o&&(o=null),void 0===n&&(n=!1),this._min=t,this._max=Math.max(t,e),this._max==this._min&&(this._max=this._min+1),this._pos=Math.max(this._min,Math.min(this._max,i)),this._message=o,n&&this.$_refreshView()},s.prototype.setZIndex=function(t){this._dom.style.zIndex=String(t+5)},s.prototype.show=function(t,e){void 0===e&&(e=null),this._container=t,e&&this.$_setMessage(e),t.appendChild(this._dom);var i=t.getBoundingClientRect(),o=ne.Utils.getSize(this._dom);ne.Utils.move(this._dom,(i.width-o.width)/2,(i.height-o.height)/3)},s.prototype.close=function(){this._dom.parentElement.removeChild(this._dom)},s.prototype.$_createElement=function(t){var e=t.createElement("div");e.className="rg-progress";var i=e.style;return i.position="absolute",i.zIndex="3001",i.minWidth="250px",i.padding="8px 10px",e.appendChild(e.$_bar=this.$_createBar(t)),e.appendChild(e.$_msg=this.$_createMsg(t)),e},s.prototype.$_createBar=function(t){var e=t.createElement("div");e.className="rg-progress-bar";var i=e.style;i.width="100%",i.height="13px",i.marginBottom="4px";var o=t.createElement("div");return o.className="rg-progress-progress",(i=o.style).height="100%",i.width="0px",e.appendChild(e.$_led=o),e},s.prototype.$_createMsg=function(t){var e=t.createElement("div"),i=t.createElement("span");i.className="rg-progress-message";var o=e.style;return o.width="100%",o.textAlign="center",e.appendChild(e.$_span=i),e},s.prototype.$_refreshView=function(){var t=this._dom,e=t.$_bar,i=e.$_led;t.$_msg.$_span.innerHTML=ne.Utils.htmlEncode(this._message);var o=ne.Utils.getSize(e);i.style.width=Math.min(o.width-1,Math.floor(o.width*(this._pos-this._min)/(this._max-this._min)))+"px"},s.prototype.$_setMessage=function(t){this._dom.$_msg.$_span.innerHTML=ne.Utils.htmlEncode(this._message)},s);function s(t){var e=n.call(this)||this;e._message="Load data...",e._min=0,e._max=0,e._pos=0;var i=ne.getDoc(t);return e._dom=e.$_createElement(i),e}var a,l=(a=$.EventAware,oe.__extends(h,a),h.prototype.show=function(t,e,i){this._view||(this._view=new r(t)),this._view.setZIndex(i),this._view.show(t||this._container,e||"Load data...")},h.prototype.close=function(){this._view&&this._view.close()},h.prototype.setProperties=function(t,e,i,o){this._view&&(o||(o=this._title||"Load data... ",t<e&&(o+=Math.floor(100*(i-t)/(e-t))+"% ("+i+" / "+e+")")),this._view.setProperties(t,e,i,o,!0))},h.prototype.showLoader=function(t,e){this._loaderView||(this._loaderView=new u(t)),this._loaderView.setZIndex(e),this._loaderView.show(t||this._container)},h.prototype.closeLoader=function(){this._loaderView&&this._loaderView.close()},h);function h(t){var e=a.call(this)||this;return e._container=t,e}e.ProgressManager=l;var d,u=(d=$.EventAware,oe.__extends(_,d),_.prototype.show=function(t){(this._container=t).appendChild(this._dom);var e=t.getBoundingClientRect(),i=ne.Utils.getSize(this._dom);ne.Utils.move(this._dom,(e.width-i.width)/2,(e.height-i.height)/3)},_.prototype.setZIndex=function(t){this._dom.style.zIndex=String(t+5)},_.prototype.close=function(){ne.Utils.detach(this._dom)},_.prototype.$_createElement=function(t){var e=t.createElement("div");return e.className="rg-load-indicator",e.style.position="absolute",e},_);function _(t){var e=d.call(this)||this,i=ne.getDoc(t);return e._dom=e.$_createElement(i),e}});t(Je);Je.ProgressManager;var ti=e(function(t,e){Object.defineProperty(e,"__esModule",{value:!0});var i,o=(i=re.Base,oe.__extends(n,i),n.prototype.getCount=function(t){return this._rs.itemCount},n.prototype.getSum=function(t){return this._rs.getSum(t)},n.prototype.getMax=function(t){return this._rs.getMax(t)},n.prototype.getMin=function(t){return this._rs.getMin(t)},n.prototype.getAvg=function(t){return this._rs.getAvg(t)},n.prototype.getVar=function(t){return this._rs.getVar(t)},n.prototype.getVarp=function(t){return this._rs.getVarp(t)},n.prototype.getStdev=function(t){return this._rs.getStdev(t)},n.prototype.getStdevp=function(t){return this._rs.getStdevp(t)},n.prototype.getDataCount=function(t){return this._rs.getDataCount(t)},n.prototype.getDataAvg=function(t){return this._rs.getDataAvg(t)},n);function n(t){var e=i.call(this)||this;return e._rs=t,e}e.DefaultSummarizer=o});t(ti);ti.DefaultSummarizer;var ei=e(function(t,e){Object.defineProperty(e,"__esModule",{value:!0});var n,s=(n=Ve.TreeItem,oe.__extends(i,n),i.prototype.dispose=function(){this._values=null,n.prototype.dispose.call(this)},_dp(i,"values",{get:function(){return this._values.concat()},set:function(t){var e=this.dataSource,i=e.fieldCount;if(t){i=Math.min(i,t.length);for(var o=0;o<i;o++){var n=e.getField(o),r=this._values[o],s=n.readValue(t[o]);this._values[o]=s,this._started&&parent&&!n.equalValues(r,s)&&this._rs._editItemCellUpdated(this,o,r,s)}}else this._values=[]}}),i.prototype.beginEdit=function(t,e){this._started=!0,this._checkDiff=t,this._strictDiff=e},i.prototype.setValue=function(t,e){var i=this.dataSource;if(t<0&&t>=i.fieldCount)throw new RangeError("field index is out of bounds: "+t);var o=i.getField(t),n=this._values[t];e=o.readValue(e),this._values[t]=e,this._started&&this.parent&&!o.equalValues(n,e)&&this._rs._editItemCellUpdated(this,t,n,e)},_dp(i,"dataSource",{get:function(){return this._rs.dataSource}}),_dp(i,"itemState",{get:function(){return this._state}}),_dp(i,"rowState",{get:function(){return this._target?this._target.rowState:I.RowState.NONE}}),_dp(i,"editable",{get:function(){return!0}}),_dp(i,"expanded",{get:function(){return!!this._target&&this._target.expanded}}),i.prototype.getData=function(t){if(t<0&&t>=this.dataSource.fieldCount)throw new RangeError("field index is out of bounds: "+t);return this._values[t]},i.prototype.setData=function(t,e){var i=this.dataSource;if(t<0&&t>=i.fieldCount)throw new RangeError("field index is out of bounds: "+t);var o=i.getField(t),n=this._values[t];e=o.readValue(e);var r=!this._checkDiff;(r=r||(this._strictDiff?!o.equalValues(n,e):!o.sameValues(n,e)))&&(this._values[t]=e,this.parent&&(this._rs._editItemCellUpdated(this,t,n,e),this._rs._editItemCellEdited(this,t)))},i.prototype.getRowData=function(){return this._values.concat()},i.prototype.getRowObject=function(){var t=this.dataSource;if(t){for(var e={},i=0,o=t.fieldCount;i<o;i++)e[t.getOrgFieldName(i)]=this._values[i];return e}return null},i);function i(t,e,i){var o=n.call(this,e&&e.row)||this;return o._values=[],o._started=!1,o._checkDiff=!1,o._strictDiff=!1,o._rs=t,o._target=e,o._state=i,o}e.TreeEditItem=s;var o,r=(o=at.EditableItemProvider,oe.__extends(a,o),a.prototype._doDispose=function(){this._rs=null,this._summarizer=null,o.prototype._doDispose.call(this)},_dp(a,"summarizer",{get:function(){return this._summarizer}}),a.prototype.getLevels=function(t){return this._rs.getLevels(t)},a.prototype.setLabelComparer=function(t){this._rs.labelComparer=t},a.prototype.orderBy=function(t,e,i){this._rs.orderBy(t,e,i)},a.prototype.getSortFields=function(){return this._rs.getSortFields()},a.prototype.getSortDirections=function(){return this._rs.getSortDirections()},a.prototype.getSortCases=function(){return this._rs.getSortCases()},_dp(a,"labelComparer",{get:function(){return this._rs.labelComparer},set:function(t){this._rs.labelComparer=t}}),a.prototype.isFiltered=function(t){return null!=t?this._rs.hasFilter(t):this._rs.hasFilters()},a.prototype.addFilter=function(t,e){this._rs.addFilter(t,e)},a.prototype.removeFilter=function(t,e){this._rs.removeFilter(t,e)},a.prototype.clearFilters=function(t){this._rs.clearFilters(t)},a.prototype.clearAllFilters=function(){this._rs.clearAllFilters()},a.prototype.beginFiltering=function(){this._rs.beginFiltering()},a.prototype.endFiltering=function(t,e){this._rs.endFiltering(!0,t,e)},_dp(a,"includeParentItem",{set:function(t){this._rs.includeParentItem=t}}),a.prototype.expand=function(t,e,i,o){this._rs.expand(t,e,i,o)},a.prototype.collapse=function(t,e){this._rs.collapse(t,e)},a.prototype.expandAll=function(t){this._rs.expandAll(t)},a.prototype.collapseAll=function(){this._rs.collapseAll()},a.prototype.getCheckedRows=function(){return this._rs.getCheckedRows()},a.prototype.getCheckedRowIds=function(){return this._rs.getCheckedRowIds()},_dp(a,"checkableExpression",{set:function(t){this._rs.checkableExpression=t}}),_dp(a,"checkableCallback",{set:function(t){this._rs.checkableCallback=t}}),a.prototype.resetCheckables=function(){this._rs.resetCheckables()},a.prototype.applyCheckables=function(){this._rs.applyCheckables()},a.prototype.getAllItems=function(){return this._rs.getAllItems()},a.prototype.getItem=function(t){return this._rs.getItem(t)},a.prototype.getItemOfRow=function(t){return this._rs.getItemOfRow(t)},a.prototype.findItem=function(t,e,i,o,n){return this._rs.findItem(t,e,i,o,n)},a.prototype.findCell=function(t,e,i,o,n,r){return this._rs.findCell(t,e,i,o,n,r)},a.prototype.checkItem=function(t,e,i,o){this._rs.checkItem(t,e,i,o)},a.prototype.checkAll=function(t,e,i,o){this._rs.checkAll(t,e,i,o)},a.prototype.setCheckFieldIndex=function(t){this._rs.setCheckFieldIndex(t)},_dp(a,"summaryMode",{get:function(){return this._rs.summaryMode},set:function(t){this._rs.summaryMode=t}}),_dp(a,"groupSummaryMode",{set:function(t){this._rs.groupSummaryMode=t}}),_dp(a,"hideDeleted",{get:function(){return this._rs.hideDeleted},set:function(t){this._rs.hideDeleted=t}}),_dp(a,"sortMode",{get:function(){return this._rs.sortMode},set:function(t){this._rs.sortMode=t}}),_dp(a,"itemCount",{get:function(){return this._rs.itemCount}}),_dp(a,"rowCount",{get:function(){return this._rs.rowCount}}),_dp(a,"sorted",{get:function(){return this._rs.sorted}}),_dp(a,"movable",{get:function(){return this._rs.movable}}),a.prototype.getItems=function(t,e){throw new Error("Method not implemented.")},a.prototype.canAppend=function(){return!1},a.prototype.canInsert=function(t){return!!t},a.prototype.canDelete=function(t){return!!t},a.prototype.$_replaceItem=function(t,e){t.parent.setItem(t,e),this._rs._setItem(t,e)},a.prototype._doBeginUpdate=function(t){return this._editingItem=this._editItem=this._createEditItem(t,dt.ItemState.UPDATING,null),this.$_replaceItem(t,this._editItem),this._editItem},a.prototype._doBeginAppend=function(t){return this._editingItem=this._editItem=this._createEditItem(null,dt.ItemState.APPENDING,t),this._editItem},a.prototype._doBeginInsert=function(t,e,i,o){if(void 0===i&&(i=!1),void 0===o&&(o=!1),o)this._appending=!0,t.setExpanded(!0,!1,!1),this._editingItem=this._editItem=this._createEditItem(null,dt.ItemState.INSERTING,e),this._rs.appendItem(t,this._editItem);else{var n=t.parent;this._appending=!1,this._insertAfter=i,this._insertIndex=n.indexOf(t),this._editingItem=this._editItem=this._createEditItem(t,dt.ItemState.INSERTING,e),this._rs.insertItem(n,this._editItem,this._insertIndex,this._insertAfter)}return this._editItem},a.prototype._doCompleteUpdate=function(e){var t=!1;if(this.dataSource){this.$_replaceItem(this._editItem,e);var i=this._editItem.row;try{t=i.update(this._editItem.values,!1)}catch(t){throw this.$_replaceItem(e,this._editItem),t}t||this.$_replaceItem(e,this._editItem)}return t},a.prototype._doCompleteInsert=function(t){var e=this.dataSource,i=!1;if(e){var o=this._editItem.parent,n=o.row,r=e.createRow(this._editItem.values,-1,!1),s=this._editItem.parent.indexOf(this._editItem);this._rs.removeItem(this._editItem);try{i=this.isAppending?n.addChild(r,!1):n.insertChild(s,r,!1)}catch(t){throw this._appending?this._rs.appendItem(o,this._editItem):this._rs.insertItem(o,this._editItem,this._insertIndex,this._insertAfter),t}if(i){var a=o.itemOfRow(r.rowId);this._copyExtents(this._editItem,a)}else this._appending?this._rs.appendItem(o,this._editItem):this._rs.insertItem(o,this._editItem,this._insertIndex,this._insertAfter)}return i},a.prototype._doCancelEdit=function(t,e){t==dt.ItemState.UPDATING?(this.$_replaceItem(this._editItem,e),this._copyExtents(this._editItem,e)):t==dt.ItemState.INSERTING&&this._editItem.parent&&this._rs.removeItem(this._editItem),o.prototype._doCancelEdit.call(this,t,e)},a.prototype._doCommitEdit=function(t,e){return t==dt.ItemState.UPDATING||dt.ItemState.INSERTING,o.prototype._doCommitEdit.call(this,t,e)},a.prototype.remove=function(t){if(t){var e=t.row;e&&e.parent.removeChild(e)}},a.prototype.removeAll=function(t){if(t&&0<t.length){for(var e=[],i=0,o=t.length;i<o;i++){var n=this._rs.getItem(t[i]);e.push(n.row)}this.dataSource.removeRows(e)}},a.prototype.getRemovableRows=function(t){if(0<t.length){for(var e=[],i=0,o=t.length;i<o;i++){var n=this._rs.getItem(t[i]);e.push(n.row)}return e}},a.prototype.removeRows=function(t){t&&this.dataSource.removeRows(t)},a.prototype.setDataSource=function(t){this._rs.dataSource=t},_dp(a,"rootItem",{get:function(){return this._rs._rootItem}}),a.prototype._createEditItem=function(t,e,i){this._editingItem=null;var o=this.dataSource;if(!o)return null;var n=o.fieldCount;switch(e){case dt.ItemState.UPDATING:this._editingItem=new s(this,t,e);for(var r=0;r<n;r++)this._editingItem.setValue(r,t.getData(r));this._copyExtents(t,this._editingItem);break;case dt.ItemState.INSERTING:case dt.ItemState.APPENDING:if(this._editingItem=new s(this,null,e),i)for(r=0;r<n;r++)i.length>r&&this._editingItem.setValue(r,i[r])}return this._editingItem},a.prototype.onItemProviderFilterAdd=function(t,e,i){},a.prototype.onItemProviderFilterRemove=function(t,e,i){},a.prototype.onItemProviderFilterClear=function(t,e){},a.prototype.onItemProviderFilterClearAll=function(t){},a.prototype.onItemProviderFilterAdded=function(t,e,i){this._fireFilterAdded(e,i)},a.prototype.onItemProviderFilterRemoved=function(t,e,i){this._fireFilterRemoved(e,i)},a.prototype.onItemProviderFilterCleared=function(t,e){this._fireFilterCleared(e)},a.prototype.onItemProviderFilterAllCleared=function(t){this._fireFilterAllCleared()},a.prototype.onItemProviderFiltered=function(t,e,i){this._fireFiltered(e,i)},a.prototype.onItemProviderSort=function(t,e,i){this._fireSort(e,i,null)},a.prototype.onItemProviderSorted=function(t){this._fireSorted()},a.prototype.onTreeItemProviderItemChanged=function(t,e){this._eventLock<=0&&this.fireEvent(Ve.TreeItemProvider.ITEM_CHANGED,e)},a.prototype.onTreeItemProviderExpanding=function(t,e){return!(this._eventLock<=0)||this.fireConfirmEvent(Ve.TreeItemProvider.EXPANDING,e)},a.prototype.onTreeItemProviderExpanded=function(t,e){this._eventLock<=0&&this.fireEvent(Ve.TreeItemProvider.EXPANDED,e)},a.prototype.onTreeItemProviderCollapsing=function(t,e){return!(this._eventLock<=0)||this.fireConfirmEvent(Ve.TreeItemProvider.COLLAPSING,e)},a.prototype.onTreeItemProviderCollapsed=function(t,e){this._eventLock<=0&&this.fireEvent(Ve.TreeItemProvider.COLLAPSED,e)},a);function a(t){var e=o.call(this,null,t)||this;return e._observers=[],e._appending=!1,e._insertAfter=!1,e._insertIndex=-1,e._rs=new Ve.TreeItemProvider,e.source=e._rs,e._summarizer=new ti.DefaultSummarizer(e._rs),e}e.TreeGridItemProvider=r});t(ei);ei.TreeEditItem,ei.TreeGridItemProvider;var ii=e(function(t,e){Object.defineProperty(e,"__esModule",{value:!0});var i,o=(i=$t.GridBaseOptions,oe.__extends(n,i),n.prototype._doDispose=function(){i.prototype._doDispose.call(this)},_dp(n,"count",{get:function(){return this._count},set:function(t){this._count!==t&&(this._count=t)}}),_dp(n,"title",{get:function(){return this._title},set:function(t){this.title!==t&&(this.title=t)}}),_dp(n,"description",{get:function(){return this._description},set:function(t){this._description!==t&&(this._description=t)}}),_dp(n,"autoDrawing",{get:function(){return this._autoDrawing},set:function(t){this._autoDrawing!==t&&(this._autoDrawing=t)}}),_dp(n,"indicatorTitle",{get:function(){return this._indicatorTitle},set:function(t){this._indicatorTitle!==t&&(this._indicatorTitle=t)}}),_dp(n,"checkBarTitle",{get:function(){return this._checkBarTitle},set:function(t){this._checkBarTitle!==t&&(this._checkBarTitle=t)}}),_dp(n,"stateBarTitle",{get:function(){return this._stateBarTitle},set:function(t){this.stateBarTitle!==t&&(this.stateBarTitle=t)}}),_dp(n,"emptyMessage",{get:function(){return this._emptyMessage},set:function(t){this._emptyMessage!==t&&(this._emptyMessage=t)}}),_dp(n,"editButtonText",{get:function(){return this._editButtonText},set:function(t){this._editButtonText!==t&&(this._editButtonText=t)}}),_dp(n,"cellButtonTexts",{get:function(){return this._cellButtonTexts},set:function(t){this._cellButtonTexts!==t&&(this._cellButtonTexts=t)}}),_dp(n,"stateTexts",{get:function(){return this._stateTexts},set:function(t){this._stateTexts!==t&&(this._stateTexts=t)}}),_dp(n,"rowText",{get:function(){return this._rowText},set:function(t){this._rowText!==t&&(this._rowText=t)}}),_dp(n,"linkText",{get:function(){return this._linkText},set:function(t){this._linkText!==t&&(this._linkText=t)}}),_dp(n,"groupSummaryText",{get:function(){return this._groupSummaryText},set:function(t){this._groupSummaryText!==t&&(this._groupSummaryText=t)}}),_dp(n,"summaryText",{get:function(){return this._summaryText},set:function(t){this._summaryText!==t&&(this._summaryText=t)}}),_dp(n,"insertButtonText",{get:function(){return this._insertButtonText},set:function(t){this._insertButtonText!==t&&(this._insertButtonText=t)}}),_dp(n,"deleteButtonText",{get:function(){return this._deleteButtonText},set:function(t){this._deleteButtonText!==t&&(this._deleteButtonText=t)}}),_dp(n,"appendButtonText",{get:function(){return this._appendButtonText},set:function(t){this._appendButtonText!==t&&(this._appendButtonText=t)}}),_dp(n,"alreadyEditMessage",{get:function(){return this._alreadyEditMessage},set:function(t){this._alreadyEditMessage!==t&&(this._alreadyEditMessage=t)}}),_dp(n,"editor",{get:function(){return this._editor}}),_dp(n,"beforeEditPopupCallback",{get:function(){return this._beforeEditPopupCallback},set:function(t){this._beforeEditPopupCallback!==t&&(this._beforeEditPopupCallback=t)}}),_dp(n,"afterEditPopupCallback",{get:function(){return this._afterEditPopupCallback},set:function(t){this._afterEditPopupCallback!==t&&this._afterEditPopupCallback}}),n);function n(t){var e=i.call(this,t)||this;return e._count=10,e._title="리얼그리드 테이블 (테이블에서 엔터키로 버튼 링크등의 기능이 실행됩니다)",e._description="${columns} 열로 이루어진 데이터 테이블입니다.",e._autoDrawing=!0,e._indicatorTitle="순번",e._checkBarTitle="선택",e._stateBarTitle="행 상태",e._emptyMessage="데이터가 존재하지 않습니다.",e._editButtonText="편집",e._cellButtonTexts={action:"실행",popup:"팝업"},e._stateTexts={c:"추가",u:"수정",d:"삭제",x:"추가 후 삭제"},e._rowText="${index} 행",e._linkText="링크",e._groupSummaryText="${groupText} 부분 합계 행",e._summaryText="합계 행",e._insertButtonText="행 삽입",e._deleteButtonText="행 추가",e._appendButtonText="행 삭제",e._alreadyEditMessage="이미 편집중입니다.",e._hasShadowDom=!1,e._editor=new s(t),e}e.ShadowDomOptions=o;var r,s=(r=$t.GridBaseOptions,oe.__extends(a,r),_dp(a,"yearText",{get:function(){return this._yearText},set:function(t){this._yearText!==t&&(this._yearText=t)}}),_dp(a,"monthText",{get:function(){return this._monthText},set:function(t){this._monthText!==t&&(this._monthText=t)}}),_dp(a,"dayText",{get:function(){return this._dayText},set:function(t){this._dayText!==t&&(this._dayText=t)}}),_dp(a,"ampmText",{get:function(){return this._ampmText},set:function(t){this._ampmText!==t&&(this._ampmText=t)}}),_dp(a,"amText",{get:function(){return this._amText},set:function(t){this._amText!==t&&(this._amText=t)}}),_dp(a,"pmText",{get:function(){return this._pmText},set:function(t){this._pmText!==t&&(this._pmText=t)}}),_dp(a,"hourText",{get:function(){return this._hourText},set:function(t){this._hourText!==t&&(this._hourText=t)}}),_dp(a,"minuteText",{get:function(){return this._minuteText},set:function(t){this._minuteText!==t&&(this._minuteText=t)}}),_dp(a,"secondText",{get:function(){return this._secondText},set:function(t){this._secondText!==t&&(this._secondText=t)}}),_dp(a,"validationMessage",{get:function(){return this._validationMessage},set:function(t){this._validationMessage!==t&&(this._validationMessage=t)}}),a);function a(t){var e=r.call(this,t)||this;return e._yearText="년도",e._monthText="월",e._dayText="일자",e._ampmText="오전/오후",e._amText="오전",e._pmText="오후",e._hourText="시",e._minuteText="분",e._secondText="초",e._validationMessage="잘못된 입력입니다.",e}e.ShadowDomEditorOptions=s;var l,h,d,u=(l=$.EventAware,oe.__extends(_,l),_.prototype.dispose=function(){return this.$_clearBody(),this._container.$_removeListener(this._prevButton,"click"),this._container.$_removeListener(this._nextButton,"click"),this._editor.dispose(),this._table.parentNode&&this._table.parentNode.removeChild(this._table),this._numberFormatter=null,delete this._numberFormatter,delete this._datetimeWriter,this._booleanFormatter=null,delete this._booleanFormatter,this._columns=[],this._dataProvider=null,this._itemProvider=null,this._containerDiv=null,this._container=null,l.prototype.dispose.call(this)},_dp(_,"numberFormat",{get:function(){return this._numberFormat},set:function(t){t!=this._numberFormat&&(this._numberFormat=t,this._numberFormatter=t?W.DecimalFormatter.getFormatter(t):null,this._changed())}}),_.prototype._createTable=function(t){var e=this._doc;this._table=e.createElement("table"),this._caption=e.createElement("caption"),this._table.appendChild(this._caption),this._head=e.createElement("thead"),this._table.appendChild(this._head),this._body=e.createElement("tbody"),this._table.appendChild(this._body);var i=e.createElement("tfoot"),o=e.createElement("tr"),n=e.createElement("td");this._prevButton=this.$_addButton(n,"prev page",this.$_prevButtonHandler),this._nextButton=this.$_addButton(n,"next page",this.$_nextButtonHandler),o.appendChild(n),i.appendChild(o),this._table.appendChild(i),t.appendChild(this._table)},_.prototype.setColumns=function(t){var e=this._grid,i=this._columns=[];if(this._fields=[],this._editables=[],t)for(var o=e.collectColumns(!0,!0,!0),n=0,r=o.length;n<r;n++)o[n]instanceof Dt.DataColumn&&i.push(o[n]);else for(n=0,r=e.columnCount;n<r;n++){var s=e.getColumn(n);s instanceof Dt.DataColumn&&s.visible&&i.push(s)}this._options.autoDrawing&&this._itemProvider&&this.reset()},_.prototype.setItemProvider=function(t){var e=this._options;if(t instanceof ei.TreeGridItemProvider)throw new Error("TreeView not support Web Accessibility.");var i=t!=this._itemProvider;if(i){var o=void 0;this._itemProvider&&(o=this._itemProvider.dataSource).unregisterClient(this),this._itemProvider=t,(o=this._dataProvider=this._itemProvider.dataSource).registerClient(this),o.addListener(this),this._itemProvider.addListener(this)}e.autoDrawing&&0<this._columns.length&&(i||0==this._rows)&&this.reset()},_.prototype.reset=function(){setTimeout(function(){this.$_setOptions(),this.$_fillHead(),this.$_setItems(0)}.bind(this),50)},_.prototype.$_setOptions=function(){var t=this._grid;this._options,this._indicatorVisible=t.rowIndicator.visible;var e=t.footers;e.count,this._footersVisible=e.visible;var i=t.checkBar;this._checkBarVisible=i.visible,this._checkBarExclusive=i.exclusive,this._stateBarVisible=t.stateBar.visible;var o=t.editOptions;this._insertable=o.insertable,this._appendable=o.appendable,this._deletable=o.deletable},_.prototype.$_setItems=function(t){this._start=t,this.$_clearBody(),this.$_fillBody()},_.prototype.$_fillHead=function(){var t=this._doc,e=this._options,i=this._head.querySelector("tr");i&&this._head.removeChild(i),this._colCount=0;var o,n="";i=t.createElement("tr"),this._indicatorVisible&&((o=t.createElement("th")).scope="col",o.innerText=e.indicatorTitle,i.appendChild(o),n+=e.indicatorTitle+", ",this._colCount++),this._stateBarVisible&&((o=t.createElement("th")).scope="col",o.innerText=e.stateBarTitle,i.appendChild(o),n+=e.stateBarTitle+", ",this._colCount++),this._checkBarVisible&&((o=t.createElement("th")).scope="col",o.innerText=e.checkBarTitle,i.appendChild(o),n+=e.checkBarTitle+", ",this._colCount++),this._colTitles=[];for(var r=0,s=this._columns.length;r<s;r++){var a=this._columns[r];if(a.visible&&0<a.width){var l=a.header,h=l.text?l.text:a.name;(o=t.createElement("th")).scope="col",o.innerText=h,i.appendChild(o),n+=h+", ",this._colTitles.push(h),this._colCount++}else this._colTitles.push(null)}this._head.appendChild(i),o=t.createElement("th"),this._head.appendChild(i);var d="";e.title&&(d+="<strong>"+e.title+"</strong>"),e.description&&(d+="<span>"+e.description.replace("${columns}",n.substr(0,n.length-2))+"</span>"),this._caption.innerHTML=d},_.prototype.$_clearBody=function(){for(var t=this._checkboxes.length;t--;)this._container.$_removeListener(this._checkboxes[t],"click");for(this._checkboxes=[],t=this._buttons.length;t--;){var e=this._buttons[t];e!=this._prevButton&&e!=this._nextButton&&this._container.$_removeListener(this._buttons[t],"click")}for(this._buttons=[];0<this._body.childNodes.length;)this._body.removeChild(this._body.lastChild)},_.prototype.$_fillBody=function(){var t=this._doc,e=this._options;this._rows=this._itemProvider.itemCount;var i=Math.min(this._rows-this._start,e.count);if(this._prevButton.disabled=0==this._start,this._nextButton.disabled=i<e.count,0<i){for(var o=0;o<i;o++)this.$_buildItem(this._start+o);this._footersVisible}else{var n=t.createElement("tr"),r=t.createElement("td");r.colSpan=this._colCount,r.innerText=e.emptyMessage,n.appendChild(r),this._body.appendChild(n)}},_.prototype.$_buildItem=function(t){var e,i=this._grid,o=this._doc,n=this._options,r=i.isTree()?null:i.rowGroup,s=i.editOptions,a=s.isWritable()&&s.canUpdate(),l=this._itemProvider.getItem(t),h=o.createElement("tr");if(h.id=t.toString(),this._indicatorVisible&&((e=o.createElement("td")).id="indicator",e.innerText=this.$_getRowText(t+1),h.appendChild(e)),this._stateBarVisible){(e=o.createElement("td")).id="state";var d=l.rowState;e.innerText=n.stateTexts&&d!=I.RowState.NONE?n.stateTexts[d]:"",h.appendChild(e)}if(this._checkBarVisible&&((e=o.createElement("td")).id="checkbox",this.$_addCheckBox(e,t,l.checked,this._checkBarExclusive,this.$_checkboxHandler),h.appendChild(e)),l instanceof dt.GroupItemImpl){var u=r.getHeaderText(l);(e=o.createElement("td")).colSpan=this._columns.length,e.innerText=n.groupSummaryText.replace("${groupText}",u),h.appendChild(e)}else if(l instanceof dt.GroupFooter)for(var _=0,c=this._columns.length;_<c;_++){var p=this._columns[_];null!=this._colTitles[_]&&(u="",e=o.createElement("td"),u&&(e.innerText=u),h.appendChild(e))}else{for(_=0,c=this._columns.length;_<c;_++)if(p=this._columns[_],null!=this._colTitles[_]){(e=o.createElement("td")).id="col_"+_;var f=this.$_getRowText(t+1)+" "+this._colTitles[_]+" ",g=kt.CellIndex.temp(i,t,p),m=(u=i.getDisplayText(g),i.getBodyCellAt(g)),y=i.body.getCell(g,!1),v=m.renderer2;if(v instanceof xt.LinkCellRenderer){var w=v.$_getUrl(i,y);e.innerHTML="<a href='"+w+"' title='"+n.linkText+"' tabindex='-1' target='_blank'>"+u+"</a>"}else e.innerHTML="<span>"+u+"</span>";a&&p.isWritable()&&this.$_addButton(e,f+n.editButtonText,this.$_editButtonHandler);var C=p.button;if(C!=lt.CellButton.NONE)this.$_addButton(e,f+n.cellButtonTexts[C],"action"==C?this.$_actionButtonHandler:this.$_popupButtonHandler);else if(v&&v instanceof xt.ImageCellRenderer){var x=v.$_getTitle;x&&this.$_addButton(e,f+x,this.$_imageClickHandler,0)}h.appendChild(e)}(this._insertable||this._appendable||this._deletable)&&(e=o.createElement("td"),this._insertable&&(this.$_addButton(e,n.insertButtonText,this.$_insertRowButtonHandler),t<this._start+n.count-1&&this.$_addButton(e,n.appendButtonText,this.$_appendRowButtonHandler)),this._deletable&&this.$_addButton(e,n.deleteButtonText,this.$_deleteRowButtonHandler),h.appendChild(e))}this._body.appendChild(h)},_.prototype.$_getRowText=function(t){return this._options.rowText?this._options.rowText.replace("${index}",String(t)):String(t)},_.prototype.$_getItemIndex=function(t){var e=t.parentElement,i=e?e.parentElement:null;return i&&i.id?parseInt(i.id):-1},_.prototype.$_getCellIndex=function(t){var e=t.parentElement,i=e?e.parentElement:null;if(i){var o=parseInt(i.id);if(!isNaN(o)){var n=e.id;n=n.substring(4,n.length);var r=this._columns[parseInt(n)];if(r)return kt.CellIndex.temp(this._grid,o,r)}}return null},_.prototype.$_addCheckBox=function(t,e,i,o,n){var r=this._doc.createElement("input");return r.type=o?"radio":"checkbox",r.name="rg_shadow_item",r.tabIndex=-1,r.title=this.$_getRowText(e+1),r.$$value=e,r.checked=i,this._container.$_addListener(r,"click",n.bind(this),!1),t.appendChild(r),this._checkboxes.push(r),r},_.prototype.$_addButton=function(t,e,i,o){var n=this._doc.createElement("input");return n.type="button",n.title=e,n.tabIndex=-1,null!=o&&n.setAttribute("$$value",o.toString()),this._container.$_addListener(n,"click",i.bind(this),!1),t.appendChild(n),this._buttons.push(n),n},_.prototype.isDataEditing=function(){return this._editing&&!this._internalSet},_.prototype.cancelDataEditing=function(){return!1},_.prototype.commitDataEditing=function(){return!1},_.prototype.commit=function(){return!1},_.prototype._changed=function(){},_.prototype.$_prevButtonHandler=function(t){this.$_setItems(this._start-this._options.count)},_.prototype.$_nextButtonHandler=function(t){this.$_setItems(this._start+this._options.count)},_.prototype.$_checkboxHandler=function(t){var e=t.target||t.srcElement||t.originalTarget,i=e.$$value;"radio"==e.type?this._grid.checkItem(i,e.checked,!0,!0):this._grid.checkItem(i,e.checked,!1,!1)},_.prototype.$_actionButtonHandler=function(t){var e=t.target||t.srcElement||t.originalTarget,i=this.$_getCellIndex(e);i&&this._grid._fireCellButtonClicked(i)},_.prototype.$_popupButtonHandler=function(t){},_.prototype.$_imageClickHandler=function(t){var e=t.target||t.srcElement||t.originalTarget,i=this.$_getCellIndex(e);i&&this._grid._fireDataCellClicked(i)},_.prototype.$_editButtonHandler=function(t){var e=t.target||t.srcElement||t.originalTarget,i=this.$_getCellIndex(e).clone(),o=this.$_getRowText(i.itemIndex+1),n=this._grid,r={itemIndex:i.itemIndex,column:i.column.name};r.column||(r.fieldName=i.column.fieldName);var s=n.focusedIndex.clone();s.assignFrom(r),n.setFocusedIndex(s,!1,!0),this._editElement=e.parentElement,this._editor.popup(i,o,this._colTitles[r.column],e)},_.prototype.$_appendRowButtonHandler=function(t){var e=t.target||t.srcElement||t.originalTarget,i=this.$_getItemIndex(e);if(-1==i)this._dataProvider.addRow([]);else{var o=this._itemProvider.getItem(i);this._dataProvider.insertRow(o.dataRow+1,[])}},_.prototype.$_insertRowButtonHandler=function(t){var e=t.target||t.srcElement||t.originalTarget,i=this.$_getItemIndex(e);if(-1!=i){var o=this._itemProvider.getItem(i);this._dataProvider.insertRow(o.dataRow,[])}},_.prototype.$_deleteRowButtonHandler=function(t){var e=t.target||t.srcElement||t.originalTarget,i=this.$_getItemIndex(e);if(-1!=i){var o=this._itemProvider.getItem(i);this._dataProvider.removeRow(o.dataRow,[])}},_.prototype.$_editorCommitedHandler=function(t,e){var i=t.dataColumn,o=t.item,n=i.fieldName;this._internalSet=!0;try{o.setData(i.dataIndex,e)}finally{this._internalSet=!1}this.$_setElementText(this._editElement,t,o,i,e);for(var r=this._editElement.parentNode.childNodes,s=r.length;s--;){var a=r[s];if(a!=this._editElement){var l=this.$_getCellIndex(a.firstChild);if(l){var h=l.column;h&&h.fieldName===n&&this.$_setElementText(a,l,o,h,e)}}}},_.prototype.$_setElementText=function(t,e,i,o,n){var r=this._grid,s=r.getDisplayText(e),a=r.getBodyCellAt(e),l=r.body.getCell(e,!1),h=a.renderer2;if(h instanceof xt.LinkCellRenderer){var d=h.$_getUrl(r,l),u=t.getElementsByTagName("a")[0];u.text=s,u.href=d}else t.getElementsByTagName("span")[0].innerText=s;var _=t.parentElement.querySelector("#state");if(_){var c=i.rowState;_.innerText=this._options.stateTexts&&c!=I.RowState.NONE?this._options.stateTexts[c]:""}},_);function _(t,e){var i=l.call(this)||this;i._start=0,i._indicatorVisible=!0,i._checkBarVisible=!0,i._stateBarVisible=!0,i._dataProvider=null,i._itemProvider=null,i._columns=[],i._colCount=0,i._buttons=[],i._checkboxes=[],i._colTitles=[],i._editing=!1,i._editElement=null,i._rows=0,i._internalSet=!1,i._numberFormatter=null,i._datetimeWriter=null,i._booleanFormatter=null,i._numberFormat=null,i._datetimeFormat=null,i._booleanFormat=null,i.onGroupedItemProviderGrouped=function(t){0<this._columns.length&&this.$_setItems(0)},i.onDataProviderDataChanged=function(t){this._autoDrawing&&this._itemProvider&&!this._internalSet&&this.$_setItems(this._start)},i.onDataProviderReset=function(t){this._autoDrawing&&this._itemProvider&&!this._internalSet&&this.$_setItems(this._start)},i.onDataProviderRefresh=function(t){this._autoDrawing&&this._itemProvider&&!this._internalSet&&this.$_setItems(this._start)},i.onDataProviderRefreshClient=function(t){this._autoDrawing&&this._itemProvider&&!this._internalSet&&this.$_setItems(this._start)},i.onDataProviderRowCountChanged=function(t){this._autoDrawing&&this._itemProvider&&!this._internalSet&&this.$_setItems(this._start)},i.onDataProviderRowMoved=function(t,e,i){this._autoDrawing&&this._itemProvider&&!this._internalSet&&this.$_setItems(this._start)},i.onDataProviderRowsMoved=function(t,e,i,o){this._autoDrawing&&this._itemProvider&&!this._internalSet&&this.$_setItems(this._start)},i.onDataProviderStateChanged=function(t,e){this._autoDrawing&&this._itemProvider&&!this._internalSet&&this.$_setItems(this._start)},i.onDataProviderStatesChanged=function(t,e){this._autoDrawing&&this._itemProvider&&!this._internalSet&&this.$_setItems(this._start)},i.onDataProviderStatesCleared=function(t){this._autoDrawing&&this._itemProvider&&!this._internalSet&&this.$_setItems(this._start)},i.onDataProviderRestoreRows=function(t){this._autoDrawing&&this._itemProvider&&!this._internalSet&&this.$_setItems(this._start)},i._grid=t;var o=i._doc=t.doc,n=t.container;i._container=n;var r=o.createElement("div");r.style.visibility="hidden",r.style.height="0px",n._containerDiv.parentNode.insertBefore(r,n._containerDiv),i._createTable(r),i._start=0,i._options=e,i._editor=new p(t,r,i._options.editor);var s=i;return i._editor.beforeCallback=function(t){return s._editing?(alert(s._options.alreadyEditMessage),s._editor.focusEditor(),!1):(s._editing=!0,s._options.beforeEditPopupCallback&&s._options.beforeEditPopupCallback(t),!0)},i._editor.afterCallback=function(t){s._options.afterEditPopupCallback&&s._options.afterEditPopupCallback(t),s._editing=!1},i._editor.editorCommited=function(t,e){s.$_editorCommitedHandler(t,e)},i}e.ShadowDom=u,(d=h=h||{}).AM="am",d.PM="pm";var c,p=(c=$.EventAware,oe.__extends(f,c),_dp(f,"beforeCallback",{get:function(){return this._beforeCallback},set:function(t){this._beforeCallback!==t&&(this._beforeCallback=t)}}),_dp(f,"afterCallback",{get:function(){return this._afterCallback},set:function(t){this._afterCallback!==t&&(this._afterCallback=t)}}),_dp(f,"editorCommited",{get:function(){return this._editorCommited},set:function(t){this._editorCommited!==t&&(this._editorCommited=t)}}),f.prototype.popup=function(t,e,i,o){var n=!1;if(this._beforeCallback&&(n=this._beforeCallback(t)),n){this._focusControl=o;var r=(this._index=t).column,s=void 0;if(r instanceof Dt.DataColumn)switch(r.valueType){case lt.ValueType.NUMBER:s="number";break;case lt.ValueType.DATETIME:s="date"}if(!s){var a=this._grid.getBodyCellAt(t);s=(s=Jt.CellEditor.getEditorType(a))||"line"}this._value=t.item.getData(r.dataIndex),this.$_buildEditor(s,e,i),this.$_setEditValue(s,this._value),this._dialog.style.display="block",this._defaultInput&&this._defaultInput.focus()}},f.prototype.focusEditor=function(){this._defaultInput&&this._defaultInput.focus()},f.prototype.$_closeUp=function(t){if(void 0===t&&(t=!1),t){var e=this.$_getEditValue(this._type);e!=this._value&&this._editorCommited(this._index,e)}this._dialog.style.display="none",this._afterCallback&&this._afterCallback(this._index),this._focusControl&&this._focusControl.focus()},f.prototype.$_clearControls=function(){for(var t=this._activeControls.length;t--;)this._container.$_removeListenerAll(this._activeControls[t]),this._body.removeChild(this._activeControls[t]),delete this._activeControls[t];this._activeControls=[]},f.prototype.$_buildEditor=function(t,e,i){var o,n=this._doc;this.$_clearControls();var r=e+" "+i;switch(t){case"multiline":(o=this._multiInput=n.createElement("textarea")).title=r,this._body.appendChild(o),this._activeControls.push(o);break;case"number":o=this._numberInput=this.$_addNumberInput(r);break;case"dropDown":(o=this._selector=n.createElement("select")).title=r,this.$_buildSelectOptions(o,this._index),this._body.appendChild(o),this._activeControls.push(o);break;case"date":var s=this._options;o=this._yearInput=this.$_addNumberInput(s.yearText,2e3,4,0,9999),this._monthInput=this.$_addNumberInput(s.monthText,1,2,1,12),this._dayInput=this.$_addNumberInput(s.dayText,1,2,1,31),this._ampmSelector=n.createElement("select"),this._ampmSelector.title=s.ampmText,this._ampmSelector.options[0]=new Option(s.amText,h.AM),this._ampmSelector.options[1]=new Option(s.pmText,h.PM),this._body.appendChild(this._ampmSelector),this._activeControls.push(this._ampmSelector),this._hourInput=this.$_addNumberInput(s.hourText,0,2,0,11),this._minuteInput=this.$_addNumberInput(s.minuteText,0,2,0,59),this._secondInput=this.$_addNumberInput(s.secondText,0,2,0,59);break;default:(o=this._lineInput=n.createElement("input")).type="text",o.title=r,this._body.appendChild(o),this._activeControls.push(o)}this._defaultInput=o,this._type=t},f.prototype.$_buildSelectOptions=function(t,e){var i,o,n,r,s=this._doc,a=e.item,l=e.dataColumn,h=!1;if(l.lookupSource){for(var d=l.lookupKeyFieldIds,u=[],_=0;_<d.length-1;_++)u.push(a.getData(d[_]));var c=l.lookupSource.getTextDomain(u);c&&c.values&&0<c.values.length&&(o=c.values,i=c.keys,h=!0)}else(n=l.values)&&0<n.length&&((r=l.labels)&&r.length>=n.length?(o=r,i=n,h=!0):o=n);if(o)for(_=0;_<o.length;_++){var p=s.createElement("option");p.innerText=o[_],p.value=h&&_<i.length?i[_]:o[_],t.appendChild(p)}},f.prototype.$_addNumberInput=function(t,e,i,o,n){var r=this._doc.createElement("input");return(r.type="number")==r.type?(null!=o&&(r.min=o+""),null!=o&&(r.max=n+"")):(null!=i&&(r.maxLength=i),null!=o&&(r.dataset.min=o+""),null!=n&&(r.dataset.max=n+""),this._container.$_addListener(r,"keypress",this.$_numberEditHandler.bind(this),!1)),r.title=t,null!=e&&(r.value=e),this._body.appendChild(r),this._activeControls.push(r),r},f.prototype.$_setEditValue=function(t,e){switch(t){case"multiline":this._multiInput.value=e||"";break;case"number":isNaN(e)||(this._numberInput.value=e||"");break;case"dropDown":this._selector.value=e||"";break;case"date":var i=e;if(e&&"string"==typeof e&&(i=new Date(e)),i instanceof Date&&!isNaN(i.getTime())){this._yearInput.value=i.getFullYear(),this._monthInput.value=i.getMonth()+1,this._dayInput.value=i.getDate();var o=i.getHours();this._ampmSelector.value=o<12?h.AM:h.PM,this._hourInput.value=o%12,this._minuteInput.value=i.getMinutes(),this._secondInput.value=i.getSeconds()}else this._yearInput.value="",this._monthInput.value="",this._dayInput.value="",this._ampmSelector.value=h.AM,this._hourInput.value="",this._minuteInput.value="",this._secondInput.value="";break;default:this._lineInput.value=e||""}},f.prototype.$_getEditValue=function(t){switch(t){case"multiline":return this._multiInput.value;case"number":var e=Number(this._numberInput.value);return isNaN(e)?null:e;case"dropDown":return this._selector.value;case"date":var i=parseInt(this._yearInput.value),o=parseInt(this._monthInput.value)-1,n=parseInt(this._dayInput.value),r=parseInt(this._hourInput.value)+(this._ampmSelector.value==h.PM?12:0),s=parseInt(this._minuteInput.value),a=parseInt(this._secondInput.value);return new Date(i,o,n,r,s,a);default:return this._lineInput.value}},f.prototype.$_checkValue=function(t){if("date"!=t)return!0;var e=parseInt(this._yearInput.value);if(isNaN(e)||e<0)return alert(this._yearInput.title+" "+this._options.validationMessage),this._yearInput.focus(),!1;var i=parseInt(this._monthInput.value);if(isNaN(i)||i<1||12<i)return alert(this._monthInput.title+" "+this._options.validationMessage),this._monthInput.focus(),!1;var o=parseInt(this._dayInput.value);if(isNaN(o)||o<1||31<o)return alert(this._dayInput.title+" "+this._options.validationMessage),this._dayInput.focus(),!1;var n=parseInt(this._hourInput.value);if(isNaN(n)||n<0||11<n)return alert(this._hourInput.title+" "+this._options.validationMessage),this._hourInput.focus(),!1;var r=parseInt(this._minuteInput.value);if(isNaN(r)||r<0||59<r)return alert(this._minuteInput.title+" "+this._options.validationMessage),this._minuteInput.value.focus(),!1;var s=parseInt(this._secondInput.value);if(isNaN(s)||s<0||59<s)return alert(this._secondInput.title+" "+this._options.validationMessage),this._secondInput.value.focus(),!1;var a=new Date(e,i,o,n,r,s);return!(!a||isNaN(a.getTime()))||(alert(this._options.validationMessage),this._monthInput.focus(),!1)},f.prototype.$_numberEditHandler=function(t){return 48<=t.charCode&&t.charCode<=57},f.prototype.$_applyButtonHandler=function(t){this.$_checkValue(this._type)&&this.$_closeUp(!0)},f.prototype.$_cancelButtonHandler=function(t){this.$_closeUp()},f);function f(t,e,i){var o=c.call(this)||this;o._activeControls=[],o._lineInput=null,o._multiInput=null,o._numberInput=null,o._selector=null,o._yearInput=null,o._monthInput=null,o._dayInput=null,o._ampmSelector=null,o._hourInput=null,o._minuteInput=null,o._secondInput=null,o._defaultInput=null,o._focusControl=null,o._beforeCallback=null,o._afterCallback=null,o._editorCommited=null,o._grid=t;var n=o._doc=t.doc;o._container=t.container,o._options=i,o._valueChanged=!1,o._type=null,o._value=null,o._column=null,o._itemIndex=null;n.createElement("input");o._dialog=n.createElement("div");var r=o._dialog;r.class="popup",r.role="dialog",r.ariaLabelledby="popuptitle",r.style.display="none",r.style.position="absolute",r.style.left="0px",r.style.top="0px";var s=n.createElement("div");s.id=r.ariaLabelledby,s.style.display="none",r.appendChild(s),o._body=n.createElement("div"),r.appendChild(o._body);var a=n.createElement("div"),l=n.createElement("input");l.type="button",l.value="Apply",l.title="Apply",o._container.$_addListener(l,"click",o.$_applyButtonHandler.bind(o),!1),a.appendChild(l);var h=n.createElement("input");return h.type="button",h.value="Cancel",h.title="Cancel",o._container.$_addListener(h,"click",o.$_cancelButtonHandler.bind(o),!1),a.appendChild(h),r.appendChild(a),e.firstElementChild?e.insertBefore(r,e.firstElementChild):e.appendChild(r),o}e.ShadowEditor=p});t(ii);ii.ShadowDomOptions,ii.ShadowDomEditorOptions,ii.ShadowDom,ii.ShadowEditor;var oi=e(function(t,e){Object.defineProperty(e,"__esModule",{value:!0});var a,b=lt,l=new ht.Rectangle(-1e4,-1e4,100,100),i=(a=Ut.ViewLayer,oe.__extends(n,a),n.createColumn=function(t){return t?"series"==t.type?new Dt.SeriesColumn(t):new Dt.DataColumn(t):null},n.prototype._doDispose=function(){return this.clearListener(),this._container=this._container.dispose(),this._gridObjects.length=0,this._header=this._header.dispose(),this._headerSummaries=this._headerSummaries.dispose(),this._footers=this._footers.dispose(),this._rowIndicator=this._rowIndicator.dispose(),this._stateBar=this._stateBar.dispose(),this._checkBar=this._checkBar.dispose(),this._body=this._body.dispose(),this._rootElement=this._rootElement.dispose(),this._contentPane=this._contentPane.dispose(),this._rightContentPane=this._rightContentPane.dispose(),this._fixedContentPane=this._fixedContentPane.dispose(),this._leftContentPane=this._leftContentPane.dispose(),this._sideContentPane=this._sideContentPane&&this._sideContentPane.dispose(),this._topContentPane=this._topContentPane&&this._topContentPane.dispose(),this._bodyView=this._bodyView.dispose(),this._fixedBodyView=this._fixedBodyView.dispose(),this._rightBodyView=this._rightBodyView.dispose(),this._mergeView=this._mergeView&&this._mergeView.dispose(),this._fixedMergeView=this._fixedMergeView.dispose(),this._rightMergeView=this._rightMergeView.dispose(),this._headerView=this._headerView.dispose(),this._fixedHeaderView=this._fixedHeaderView.dispose(),this._rightHeaderView=this._rightHeaderView.dispose(),this._headerSummaryView=this._headerSummaryView.dispose(),this._fixedHeaderSummaryView=this._fixedHeaderSummaryView.dispose(),this._rightHeaderSummaryView=this._rightHeaderSummaryView.dispose(),this._footerView=this._footerView.dispose(),this._fixedFooterView=this._fixedFooterView.dispose(),this._rightFooterView=this._rightFooterView.dispose(),this._rowBarContainer=this._rowBarContainer.dispose(),this._headView=this._headView.dispose(),this._sumView=this._sumView.dispose(),this._footView=this._footView.dispose(),this._selectionLayer=this._selectionLayer.dispose(),this._feedbackLayer=this._feedbackLayer.dispose(),this._hscrollBar=this._hscrollBar.dispose(),this._vscrollBar=this._vscrollBar.dispose(),this._scrollEdge=this._scrollEdge.dispose(),this._selections=this._selections.dispose(),this._fixedOptions=this._fixedOptions.dispose(),this._displayOptions=this._displayOptions.dispose(),this._formatOptions=this._formatOptions.dispose(),this._editOptions=this._editOptions.dispose(),this._editorOptions=this._editorOptions.dispose(),this._copyOptions=this._copyOptions.dispose(),this._pasteOptions=this._pasteOptions.dispose(),this._sortingOptions=this._sortingOptions.dispose(),this._filteringOptions=this._filteringOptions.dispose(),this._shadowDomOptions=this._shadowDomOptions.dispose(),this._mobileOptions=this._mobileOptions&&this._mobileOptions.dispose(),this._columns=this._columns.dispose(),this._activeCellLayout=null,this._defaultCellLayout=this._defaultCellLayout.dispose(),this._delegate=this._delegate.dispose(),this._layoutManager=this._layoutManager.dispose(),this._editController=this._editController&&this._editController.dispose(),this._filterSelector=this._filterSelector.dispose(),this._toastManager=this._toastManager.dispose(),this._tableViews=null,this._lookupProvider=this._lookupProvider&&this._lookupProvider.dispose(),this._columnSummaryRuntime=this._columnSummaryRuntime&&this._columnSummaryRuntime.dispose(),this._popupMenuManager=this._popupMenuManager&&this._popupMenuManager.dispose(),this._tooltipManager=this._tooltipManager&&this._tooltipManager.dispose(),this._focusedIndex=this._focusedIndex.dispose(),this._scrollTipView=this._scrollTipView&&this._scrollTipView.dispose(),this._shadowDom&&(this._shadowDom=this._shadowDom.dispose()),kt.CellIndex.clearTemp(),a.prototype._doDispose.call(this)},_dp(n,"debugging",{get:function(){return this._debugging},set:function(t){t!=this._debugging&&((this._debugging=t)?(this.addChild(this._debugView),this.invalidateLayout()):this.removeChild(this._debugView))}}),_dp(n,"activeTool",{get:function(){return this.container.activeTool}}),_dp(n,"scrollBarWidth",{get:function(){return this._scrollBarWidth},set:function(t){(t=Math.max(0,t))!=this._scrollBarWidth&&(this._scrollBarWidth=t,this.invalidateLayout())}}),_dp(n,"scrollBarHeight",{get:function(){return this._scrollBarHeight},set:function(t){(t=Math.max(0,t))!=this._scrollBarHeight&&(this._scrollBarHeight=t,this.invalidateLayout())}}),_dp(n,"editorLender",{get:function(){return this._editorLender},set:function(t){this._editorLender=t}}),_dp(n,"body",{get:function(){return this._body}}),_dp(n,"header",{get:function(){return this._header}}),_dp(n,"footers",{get:function(){return this._footers}}),_dp(n,"footer",{get:function(){return this._footers.get(0)}}),n.prototype.setFooters=function(t){this._footers.assignFrom(t)},_dp(n,"headerSummaries",{get:function(){return this._headerSummaries}}),_dp(n,"headerSummary",{get:function(){return this._headerSummaries.get(0)}}),n.prototype.setHeaderSummaries=function(t){this._headerSummaries.assignFrom(t)},_dp(n,"rowIndicator",{get:function(){return this._rowIndicator}}),_dp(n,"checkBar",{get:function(){return this._checkBar}}),_dp(n,"stateBar",{get:function(){return this._stateBar}}),_dp(n,"activeCellLayout",{get:function(){return this._activeCellLayout}}),_dp(n,"cellLayout",{set:function(t){this._activeCellLayout&&this._activeCellLayout!==this._defaultCellLayout&&this._activeCellLayout.dispose();var e=t&&new Tt.GridCellLayout(this).load(t),i=this._focusedIndex&&this._focusedIndex.clone();this._activeCellLayout=e||this._defaultCellLayout,this._activeCellLayout.invalidate(),this.refreshView(),i&&i.layout&&setTimeout(function(){i.layout=this._activeCellLayout.layoutByColumn(i.layout.firstColumn),this.setFocusedIndex(i)}.bind(this),0),this._cellLayoutDirty=!0,this.clearRowHeights(),this._populateMerges()}}),n.prototype._cellLayoutChanged=function(){this._cellLayoutDirty=!0,this._shadowDom&&this._shadowDom.setColumns(!1)},_dp(n,"layoutCount",{get:function(){return this._activeCellLayout.visibleCount}}),_dp(n,"visibleLayoutCount",{get:function(){return this._activeCellLayout.visibleCount}}),_dp(n,"columnCount",{get:function(){return this._columns.count}}),_dp(n,"dataSource",{get:function(){return this._items?this._items.dataSource:null},set:function(t){this.dataSource,this._items&&(this._items.dataSource=t),this.dataSource}}),_dp(n,"itemSource",{get:function(){return this._items},set:function(t){this._items&&this._items.removeListener(this),this._items=t,this._items&&this._items.addListener(this)}}),_dp(n,"maxItemCount",{get:function(){return this.itemSource.maxItemCount},set:function(t){this.itemSource.maxItemCount=Math.max(0,t)}}),_dp(n,"itemCount",{get:function(){return this._items?this._items.itemCount:0}}),_dp(n,"rowCount",{get:function(){return this._items?this._items.rowCount:0}}),_dp(n,"visibleRowCount",{get:function(){return this._items?this._items.rowCount:0}}),_dp(n,"dataCount",{get:function(){var t=this.dataSource;return t?t.rowCount:0}}),_dp(n,"columnSummaryRuntime",{get:function(){return this._columnSummaryRuntime}}),_dp(n,"columnValidationRuntime",{get:function(){return this._columnValidationRuntime}}),_dp(n,"rowValidationRuntime",{get:function(){return this._rowValidationRuntime}}),_dp(n,"focusedIndex",{get:function(){return this._focusedIndex}}),_dp(n,"focusedLayout",{get:function(){return this._focusedIndex&&this._focusedIndex.layout}}),_dp(n,"focusedColumn",{get:function(){return this._focusedIndex&&this._focusedIndex.layout&&this._focusedIndex.layout.firstColumn}}),_dp(n,"focusedRow",{get:function(){return this._focusedIndex?this._focusedIndex.itemIndex:-1}}),_dp(n,"focusedItem",{get:function(){return this._focusedIndex&&this._focusedIndex.item}}),_dp(n,"rowBarContainer",{get:function(){return this._rowBarContainer}}),_dp(n,"topContentPane",{get:function(){return this._topContentPane}}),_dp(n,"sideContentPane",{get:function(){return this._sideContentPane}}),_dp(n,"leftContentPane",{get:function(){return this._leftContentPane}}),_dp(n,"contentPane",{get:function(){return this._contentPane}}),_dp(n,"fixedContentPane",{get:function(){return this._fixedContentPane}}),_dp(n,"rightContentPane",{get:function(){return this._rightContentPane}}),_dp(n,"bodyView",{get:function(){return this._bodyView}}),_dp(n,"fixedBodyView",{get:function(){return this._fixedBodyView}}),_dp(n,"rightBodyView",{get:function(){return this._rightBodyView}}),_dp(n,"mergeView",{get:function(){return this._mergeView}}),_dp(n,"fixedMergeView",{get:function(){return this._fixedMergeView}}),_dp(n,"rightMergeView",{get:function(){return this._rightMergeView}}),_dp(n,"headerView",{get:function(){return this._headerView}}),_dp(n,"fixedHeaderView",{get:function(){return this._fixedHeaderView}}),_dp(n,"rightHeaderView",{get:function(){return this._rightHeaderView}}),_dp(n,"headerSummaryView",{get:function(){return this._headerSummaryView}}),_dp(n,"fixedHeaderSummaryView",{get:function(){return this._fixedHeaderSummaryView}}),_dp(n,"rightHeaderSummaryView",{get:function(){return this._rightHeaderSummaryView}}),_dp(n,"footerView",{get:function(){return this._footerView}}),_dp(n,"fixedFooterView",{get:function(){return this._fixedFooterView}}),_dp(n,"rightFooterView",{get:function(){return this._rightFooterView}}),_dp(n,"headView",{get:function(){return this._headView}}),_dp(n,"sumView",{get:function(){return this._sumView}}),_dp(n,"footView",{get:function(){return this._footView}}),_dp(n,"fixedOptions",{get:function(){return this._fixedOptions}}),_dp(n,"displayOptions",{get:function(){return this._displayOptions}}),_dp(n,"formatOptions",{get:function(){return this._formatOptions}}),_dp(n,"editOptions",{get:function(){return this._editOptions}}),_dp(n,"editorOptions",{get:function(){return this._editorOptions}}),_dp(n,"copyOptions",{get:function(){return this._copyOptions}}),_dp(n,"pasteOptions",{get:function(){return this._pasteOptions}}),_dp(n,"dataDropOptions",{get:function(){return this._dataDropOptions}}),_dp(n,"sortingOptions",{get:function(){return this._sortingOptions}}),_dp(n,"filteringOptions",{get:function(){return this._filteringOptions}}),_dp(n,"mobileOptions",{get:function(){return this._mobileOptions}}),_dp(n,"shadowDomOptions",{get:function(){return this._shadowDomOptions}}),_dp(n,"delegate",{get:function(){return this._delegate}}),_dp(n,"heightMeasurer",{get:function(){return this.container.heightMeasurer}}),_dp(n,"layoutManager",{get:function(){return this._layoutManager}}),_dp(n,"selections",{get:function(){return this._selections}}),_dp(n,"selectionLayer",{get:function(){return this._selectionLayer}}),_dp(n,"editController",{get:function(){return this._editController}}),_dp(n,"validations",{get:function(){return this._validations},set:function(t){this._validations.assignFrom(t)}}),_dp(n,"validationManager",{get:function(){return this._validationManager}}),_dp(n,"popupMenuManager",{get:function(){return this._popupMenuManager}}),_dp(n,"tooltipManager",{get:function(){return this._tooltipManager}}),_dp(n,"toastManager",{get:function(){return this._toastManager}}),_dp(n,"topIndex",{get:function(){return this._topIndex},set:function(t){(t=Math.max(0,Math.min(t,this.itemCount-this.layoutManager.fixedItemCount-1,this._vscrollBar?this._vscrollBar.maxPosition:0)))!=this._topIndex&&(this._topIndex=t,this.refreshView(),ne.Utils.isMobile()&&this.isEditing()&&!this.isItemEditing()?this.closePopups(!1):this.closePopups())}}),_dp(n,"topItem",{get:function(){return this._topIndex+this.layoutManager.fixedItemCount}}),_dp(n,"leftPos",{get:function(){return this._leftPos},set:function(t){(t=Math.max(0,Math.min(t,this._hscrollBar?this._hscrollBar._maxPosition:0)))!=this._leftPos&&(this._leftPos=t,this._displayOptions.refreshMode==lt.RefreshMode.VISIBLE_ONLY?this.refreshView():(this._horzScrolled=!0,this.invalidate()),this.closePopups()),this._displayOptions.refreshMode!=lt.RefreshMode.VISIBLE_ONLY&&this._debugging&&this._debugView.layout()}}),_dp(n,"leftCell",{get:function(){return this._layoutManager.getCellIndex(this.leftPos)},set:function(t){this.leftPos=this._layoutManager.getCellPoint(t)}}),_dp(n,"leftLayout",{get:function(){return this._layoutManager.firstLayout},set:function(t){var e=this._layoutManager;t=Math.max(e.fixedLayoutCount,Math.min(t,e.layoutCount-1)),this.leftPos=e.getLayoutBounds(t).x}}),_dp(n,"undoable",{get:function(){return!1},set:function(t){}}),_dp(n,"undoing",{get:function(){return!1}}),_dp(n,"redoing",{get:function(){return!1}}),_dp(n,"filtering",{get:function(){return!1}}),_dp(n,"lookupProvider",{get:function(){return this._lookupProvider}}),_dp(n,"canHovering",{get:function(){return!this.isEditing()}}),_dp(n,"hoveredCell",{get:function(){return this._hoveredCell}}),_dp(n,"empty",{get:function(){return 0==this.itemCount||0==this.visibleLayoutCount}}),_dp(n,"sorted",{get:function(){return this.itemSource.sorted}}),_dp(n,"spanned",{get:function(){return this._bodyView.visible&&this._bodyView.spanned||this._fixedBodyView.visible&&this._fixedBodyView.spanned||this._rightBodyView.visible&&this._rightBodyView.spanned}}),n.prototype.addFeedbackElement=function(t){if(t&&!this._feedbackLayer.contains(t))return this._feedbackLayer.addChild(t),!0},n.prototype.removeFeedbackElement=function(t){var e=this._feedbackLayer.indexOf(t);return 0<=e&&(this._feedbackLayer.removeChildAt(e),!0)},n.prototype.getVisibleLayout=function(t){return this._activeCellLayout.getVisible(t)},n.prototype.getColumn=function(t){return this._columns.getColumn(t)},n.prototype.setColumns=function(t){this._columns.setColumns(t),this._columnMap={};for(var e=this._columns.count-1;0<=e;e--){var i=this._columns.getColumn(e);this._columnMap[i.$_hash]=i}this._columnsReset(),this.dataSource&&this.applyFilters()},n.prototype._checkEditing=function(){if(this.itemSource instanceof at.EditableItemProvider&&this.itemSource.isEditing())throw"Item is editing"},n.prototype.addColumn=function(t,e){this._checkEditing();var i=this._columns.add(t,e);return i&&(this._columnMap[i.$_hash]=i,this._columnsReset(),this.dataSource&&this.applyFilters()),i},n.prototype.removeColumn=function(t){return"string"==typeof t&&(t=this.columnByName(t)),!!t&&(this._checkEditing(),!!this._columns.remove(t)&&(delete this._columnMap[t.$_hash],this._columnsReset(),this.dataSource&&this.applyFilters(),!0))},n.prototype.restoreColumns=function(t){this._columns.restoreColumns(),this._columnsReset()},n.prototype.linearizeColumns=function(r){var t=this._activeCellLayout.collectColumns(!0,!0,!0);if(r=ne.Utils.makeArray(r),t&&0<t.length){if(r&&0<r.length)for(var e=function(n){t.sort(function(t,e){var i=t[r[n]],o=e[r[n]];return i<o?1:o<i?-1:0})},i=0;i<r.length;i++)e(i);var o=[];t.forEach(function(t){o.push(t.name)}),this.cellLayout=o}},n.prototype.registerColumnLayouts=function(t){this._columnLayouts.load(t)},n.prototype.findColumnLayout=function(t){return this._columnLayouts.find(t)},n.prototype.invalidateColumn=function(t){this._columnLock<=0&&this._resetColumnIndices(t),this._columnsDirty||(this._columnsDirty=!0,this.refreshView())},n.prototype.invalidateColumns=function(){this._columnLock,this._columnsDirty||(this._columnsDirty=!0,this.refreshView())},n.prototype.beginUpdate=function(){this._updateLock=!0},n.prototype.endUpdate=function(t){(t||this._updateLock)&&(this._updateLock=!1,this.refreshView())},n.prototype.invalidate=function(){this._container&&this._container.invalidate(!1)},n.prototype.invalidateLayout=function(){this._updateLock||this._loading||(a.prototype.invalidateLayout.call(this),this._columnsDirty=!0)},n.prototype.invalidateCellLayouts=function(){this._updateLock||(this.clearRowHeights(),a.prototype.invalidateLayout.call(this),this._columnsDirty=!0)},n.prototype.refreshView=function(){this._loading||(this.invalidateLayout(),this.topIndex=this.topIndex,this.leftPos=this.leftPos)},n.prototype.resetGrid=function(){this._resetting=!0,this.topIndex=0,this.leftPos=0,this.refreshView()},n.prototype.getFirstCell=function(){if(0<this.itemCount){for(var t=0,e=0,i=this.itemCount;e<i;e++)if(this.getItem(e)instanceof dt.GridRow){t=e;break}return new kt.CellIndex(this,0<=t?t:0,this.getFirstColumn())}return null},n.prototype.$_setEditFocused=function(t,e){if(t!=this.$_editFocused){if((this.$_editFocused=t)&&this.$_showFocusCell){var i=this.focusedIndex;i&&this.isValid(i)}this.$_showFocusCell=!1}t&&"focusin"==e.type&&ne.Utils.isAncestorOf(this._container._container,e.target)&&ue.VisualContainer.setActiveGrid(this.container.$_hash)},n.prototype.getItem=function(t){return this._items.getItem(t)},n.prototype.getItemIndexOfRow=function(t){return this._items.getIndexOfRow(t)},n.prototype.getItemOfRow=function(t,e){return this._items.getItemOfRow(t,e)},n.prototype.getItemIndicesOfRows=function(t){return this._items.getIndicesOfRows(t)},n.prototype.getRowOfItem=function(t){var e=this.getItem(t);return e?e.dataRow:-1},n.prototype.getItemOfModel=function(t){return null},n.prototype.getRowsOfItems=function(t,e){void 0===e&&(e=!1);for(var i=[],o=0,n=t;o<n.length;o++){var r=n[o],s=this.getItem(r),a=s?s.dataRow:-1;(e||0<=a)&&i.push(a)}return i},n.prototype.getIndicatorIndex=function(t){return t.index},n.prototype.getAllItems=function(){return this._items.getAllItems()},n.prototype.getImage=function(t){return null},n.prototype.getIndex=function(t,e){return void 0===t&&(t=-1),void 0===e&&(e=null),new kt.CellIndex(this,t,e)},n.prototype.getDataCellIndex=function(t,e){var i=t.parentElement,o=this._tableViews[i.$_view],n=i.$_row,r=o.layoutByCell(t);return null!=e?e.set(n,r):new kt.CellIndex(this,n,r)},_dp(n,"handler",{get:function(){return this.$_handler}}),n.prototype.getDataColumns=function(t){return void 0===t&&(t=!0),this._activeCellLayout.getDataColumns(t)},n.prototype.optionsChanged=function(t){this.refreshView()},n.prototype.scrollRow=function(t){var e=this.topIndex;this.topIndex=e+t,t=this.topIndex-e},n.prototype.selectColumnFilters=function(t){this.isItemEditing(null)||this._fireFiltering()&&this._filterSelector.show(t.layout.firstColumn,t.cell,this.dataSource)},n.prototype.closeFilterSelector=function(){this._filterSelector.hide()},n.prototype.clearColumnAutoFilter=function(t){},n.prototype.closePopups=function(t){void 0===t&&(t=!0),this.filtering||this._filterSelector.hide(),this._popupMenuManager.close(),this._tooltipManager.close(),t&&this._editController.closeList(!1)},n.prototype.layoutByDataCell=function(t){var e=t.parentElement;return this._tableViews[e.$_view].layoutByCell(t)},n.prototype.columnByHash=function(t){return this._columnMap[t]},n.prototype.columnByDataCell=function(t){return this._bodyView.columnByCell(t)||this._fixedBodyView.columnByCell(t)||this._rightBodyView.columnByCell(t)},n.prototype.columnByName=function(t){return this._columns.columnByName(t)},n.prototype.columnByField=function(t){return"string"==typeof t&&(t=this.dataSource.getFieldIndex(t)),this._columns.columnByField(t)},n.prototype.getHorzColumns=function(t,e){return this._activeCellLayout.getHorzColumns(t,e)},n.prototype.getGroupLevel=function(t){return-1},n.prototype.isGroupedColumn=function(t){return!1},n.prototype.layoutByColumn=function(t){return t instanceof Dt.GridColumn||(t=this.columnByName(t)),t?this._activeCellLayout.layoutByColumn(t):null},n.prototype.layoutByName=function(t){return this._activeCellLayout.layoutByName(t)},n.prototype.setFocus=function(t){this.$_showFocusCell=!0;var e=this.focusedIndex.clone();e&&!this.isValid(e)&&(e.set(Math.max(this.topItem,0),this.getFirstColumn(),this),this.setFocusedIndex(e,!0,!0)),this._editController.setFocus(!0,t),ue.VisualContainer.getActiveGrid()!==this&&ue.VisualContainer.setActiveGrid(this.container.$_hash)},n.prototype.getFirstLayout=function(){return this._activeCellLayout.first},n.prototype.getFirstColumn=function(){return this._activeCellLayout.firstColumn},n.prototype.collectColumns=function(t,e,i){return this._activeCellLayout.collectColumns(t,e,i)},n.prototype.collectColumnNames=function(t,e){return this._activeCellLayout.collectColumnNames(t,e)},n.prototype.collectGroupNames=function(){return this._activeCellLayout.collectColumnNames(!1,!1,!0)},n.prototype.getChildColumnNames=function(t){return this._activeCellLayout.collectColumnNames(!1,!1,!1,t)},n.prototype.collectDataColumns=function(t,e){return this._activeCellLayout.collectDataColumns(t,e)},n.prototype.isValid=function(t){return t&&t.grid===this&&0<=t.itemIndex&&t.itemIndex<this.itemCount&&t.layout&&t.layout.grid===this},n.prototype.getSelection=function(){return 0<this._selections.count?this._selections.getItem(0):null},n.prototype.clearSelection=function(){var t=this.focusedIndex;this._selections.clear(),this.isValid(t)&&0<this.itemCount&&0<this.visibleLayoutCount&&this._selections.add(t,t,this._displayOptions.selectionStyle)},n.prototype.deleteSelection=function(t){void 0===t&&(t=!1),this.$_deleteSelection(null,t)},n.prototype.$_deleteSelection=function(t,r){function s(t,e){try{if(e&&0<e.length){for(var i=[],o=0,n=e.length;o<n;o++){var r=t.getItem(e[o]);r&&0<=r.dataRow&&i.push(r.dataRow)}if(0<i.length&&!t._fireRowsDeleting(i))return!1}}catch(t){return alert(t),!1}return!0}function n(t,e){return e&&((r||!t.editOptions.confirmWhenDelete||confirm(t.editOptions.deleteRowsMessage)&&(i=t,o=e.dataRow,(n=[]).push(o),s(i,n)))&&(t.cancel(),dt.ItemState_isInserting(e.itemState)||t.itemSource.remove(e)),1);var i,o,n}function e(t,e){for(var i=null,o=e.length;o--;){var n=t.getItem(e[o]),r=n.itemState;if(dt.ItemState_isEditing(r)){i=n,dt.ItemState_isInserting(r)&&e.splice(o,1);break}}var s=null;0<e.length&&(s=t.itemSource.getRemovableRows(e)),i&&t.cancel(),s&&t.itemSource.removeRows(s)}void 0===r&&(r=!1);var i=this.editOptions,o=this.selections,a=this.itemSource;if((r||i.deletable)&&a instanceof at.EditableItemProvider)if(!this.isItemEditing(null)||i.deletableWhenEdit){if(this.commitEditor(!0),n(this,t))return!0;if(!function(t,e){if(0==e.count||1==e.count&&e.getItem(0).single){var i,o=-1;return 0<=(o=0==e.count?t.focusedIndex.itemIndex:e.getItem(0).getBounds().r1)&&t.canDelete(i=t.getItem(o))&&n(t,i),1}}(this,o)){for(var l=o.count,h=[],d=0;d<l;d++){var u=o.getItem(d);if(u.style==Wt.SelectionStyle.ROWS||u.style==Wt.SelectionStyle.BLOCK)for(var _=u.getBounds(),c=Math.min(_.r1,_.r2),p=Math.max(_.r1,_.r2),f=c;f<=p;f++){var g=this.getItem(f);(0<=g.dataRow||g.editable)&&h.push(f)}}h.sort(function(t,e){return e-e});var m=-1;for(d=h.length;d--;)h[d]==m?h.splice(d,1):m=h[d];0<h.length&&this.canDelete(this.getItem(h[0]))&&(r||!i.confirmWhenDelete?s(this,h)&&(e(this,h),this.clearSelection()):confirm(i.deleteRowsMessage)&&s(this,h)&&(e(this,h),this.clearSelection()))}}else alert(window.RG_CONST&&window.RG_CONST.COMMITEDITING?window.RG_CONST.COMMITEDITING:"먼저 편집을 완료 하십시오.")},n.prototype.revertSelection=function(t){void 0===t&&(t=!1);var e=this.editOptions,i=this.selections,o=this.itemSource;if((t||e.revertable)&&o instanceof at.EditableItemProvider&&(this.commitEditor(!0),!function(t,e){if(0==e.count||1==e.count&&e.getItem(0).single){var i=-1;if(0<=(i=0==e.count?t.focusedIndex.itemIndex:e.getItem(0).getBounds().r1))return t.itemSource.revert(i),1}}(this,i))){for(var n=i.count,r=[],s=0;s<n;s++){var a=i.getItem(s);if(a.style==Wt.SelectionStyle.ROWS||a.style==Wt.SelectionStyle.BLOCK)for(var l=a.getBounds(),h=Math.min(l.r1,l.r2),d=Math.max(l.r1,l.r2),u=h;u<=d;u++){var _=this.getItem(u);(0<=_.dataRow||_.editable)&&r.push(u)}}r.sort(function(t,e){return e-e});var c=-1;for(s=r.length;s--;)r[s]==c?r.splice(s,1):c=r[s];0<r.length&&o.revertAll(r)}},n.prototype.eraseSelection=function(){var t=this.editOptions,e=this.selections,i=this.itemSource;if(t.readOnly||!t.erasable||!t.updatable)return!1;if(!(i instanceof at.EditableItemProvider))return!1;if(this.isItemEditing())return!1;if(function(t,e){if(0==e.count||1==e.count&&e.getItem(0).single){var i=t.focusedIndex;return t.setCellValue(i,void 0),1}}(this,e))return!0;var o=e.count;if(o<1)return!1;for(var n=[],r=0;r<o;r++){var s=e.getItem(r);s.style!=Wt.SelectionStyle.ROWS&&s.style!=Wt.SelectionStyle.BLOCK||(n=n.concat(s.getItems()))}if(0<n.length){for(r=0;r<o;r++)e.getItem(r).setValues(void 0);return!0}},n.prototype.getSelectedItems=function(t){void 0===t&&(t=!1);var e=this._selections.getItem(0);return e&&e.getItems(t)},n.prototype.getSelectedItemIndices=function(t){void 0===t&&(t=!1);var e=this._selections.getItem(0);return e&&e.getItemIndices(t)},n.prototype.getSelectedRows=function(){var t=this._selections.getItem(0);return t&&t.getRows()},n.prototype.setFocusedIndex=function(t,e,i){if(void 0===e&&(e=!0),void 0===i&&(i=!1),!this._focusing&&!this.disposing){this._focusing=!0;try{this.$_doSetFocusedIndex(t,e,i)}finally{this._focusing=!1}}},n.prototype.setFocusedItem=function(t){t instanceof dt.GridItem&&(t=t.index),this.setFocusedIndex(this.getIndex(t))},n.prototype.resetFocusedIndex=function(){this.setFocusedIndex(this._focusedIndex)},n.prototype.clearFocusedIndex=function(){if(!this._focusing&&!this.disposing){this._focusing=!0;try{this.$_doSetFocusedIndex(null,!1,!1,!1)}finally{this._focusing=!1}}},n.prototype.getTableCell=function(t){if(!t)return null;for(var e=t,i=ne.getWin(e);e&&!(e instanceof i.HTMLTableCellElement);)e=e.parentElement;if(e instanceof i.HTMLTableCellElement&&e.parentElement){var o=e.parentElement[lt.T_VIEW];if(o)return e;for(e=e.parentElement;e;){if(e instanceof i.HTMLTableCellElement&&(o=e.parentElement[lt.T_VIEW]))return e;e=e.parentElement}}return null},n.prototype.getTableView=function(t){return this._tableViews[t.parentElement[lt.T_VIEW]]},n.prototype.getBodyViewAt=function(t){return this._layoutManager.getBodyView(t)},n.prototype.getBodyView=function(t){return this.getTableView(t)},n.prototype.getRowView=function(t,e){return t.getRowView(e)},n.prototype.getHeaderView=function(t){return this.getTableView(t)},n.prototype.getFooterView=function(t){return this.getTableView(t)},n.prototype.getSummaryView=function(t){return this.getTableView(t)},n.prototype.getCellType=function(t){if(t){var e=t.parentElement;if(-99===e[lt.T_ROW])return"fixedbar";var i=this._tableViews[e[lt.T_VIEW]];if(!(i instanceof te.GridBodyElement))return i instanceof Ne.RowBarContainer?i.getCellType(t):i instanceof Xt.HeaderElement?"header":i instanceof se.FooterElement?"footer":i instanceof Ue.HeaderSummaryElement?"summary":i instanceof _e.GridHeadElement?"head":i instanceof ce.GridFootElement?"foot":i instanceof We.GridSumElement?"sum":this._getCellTypeOf(i);var o=i.bodyCellByCell(t);if(o)return o.item instanceof dt.GroupFooter?"groupFooter":"data"}},n.prototype._getCellTypeOf=function(t){},n.prototype.getBodyCellAt=function(t,e){var i=this._layoutManager,o=this._bodyView.visible&&this._bodyView.getCellAt(i,t)||this._fixedBodyView.visible&&this._fixedBodyView.getCellAt(i,t)||this._rightBodyView.visible&&this._rightBodyView.getCellAt(i,t);return e&&o.merged&&o.head?o.head:o},n.prototype.cellToIndex=function(t){var e=kt.CellIndex.temp(this,-1,null);if((t=this.getCellViewOf(t))instanceof ne.getWin(t).HTMLTableCellElement){var i=this.getBodyView(t);i&&(e.layout=i.layoutByCell(t),e.itemIndex=t.parentElement[lt.T_ROW])}return e},n.prototype.cellToContainer=function(t,e){void 0===e&&(e=null);var i=e||new Gt.Point,o=this.getTableView(t);o.getCellPoint(t,e);var n=o.boundsByContainer(ht.Rectangle.Temp.set(e.x,e.y,0,0));return i.set(n.x,n.y),i},n.prototype.pointToIndex=function(t,e,i,o){var n=kt.CellIndex.temp(this,-1,null);return o?this._layoutManager.mouseToIndex(this.getCellViewOf(t),e,i,n):this._layoutManager.mouseToIndexEx(this.getCellViewOf(t),e,i,n),n},n.prototype.getEditCellBounds=function(t,e){if(this._editorLender)return this._editorLender.getEditBounds(t,e);var i=this.layoutManager,o=i.getBodyView(e);if(i.getMergeRoom(e),o.getCellAt(i,e)){var n=o.getCellRectAt(i,e,!1);return n=o.boundsByContainer(n)}return l.clone()},n.prototype.getEditBounds=function(t,e){if(this._editorLender)return this._editorLender.getEditBounds(t,e);var i=e.item;if(!i)return null;var o=this.layoutManager,n=o.fixedItemCount;if(0<n&&i.index>=n&&i.index-n<o.topIndex)return l.clone();var r=o.getBodyView(e),s=r.getCellAt(o,e);if(s){var a=r.getCellRectAt(o,e,!1);return(a=r.boundsByContainer(a)).width-=(t.native?0:s.editWidth)+s.buttonWidth+s.errorWidth,a}return l.clone()},n.prototype.getCellViewOf=function(t){for(var e=ne.getWin(t);t;){if(t instanceof e.HTMLTableCellElement)return t;t=t.parentElement}return null},n.prototype.getFocusedCellView=function(t){var e=t.item;if(!e)return null;var i=this.layoutManager,o=i.fixedItemCount;if(0<o&&e.index>=o&&e.index-o<i.topIndex)return null;var n=e.merged,r=t.colFixed,s=t.rightFixed;return e.isData||n?(s?this._rightBodyView:r?this._fixedBodyView:this._bodyView).getCellView(i,t):null},n.prototype.isFocusedCell=function(t){return kt.CellIndex.areEquals(t,this._focusedIndex)},n.prototype.isFocusedRow=function(t){return this._focusedIndex.itemIndex==t},n.prototype.isFocusedColumn=function(t){return this._focusedIndex.column===t},n.prototype.pasteFromClipboard=function(t,e){var i=this.focusedIndex.clone();if(i.normalize(this),this.isValid(i)&&i.dataColumn&&this.pasteOptions.enabled&&this._firePaste(i,event))try{if(this._pasteOptions.singleMode)this._clipboardManager.pasteCellFromClipboard(i,t);else{var o=this._pasteOptions.noDataEvent;if(this._clipboardManager.pasteFromClipboard(i,t,o),i.item&&dt.ItemState_isEditing(i.item.itemState)){var n=i.item.getData(i.dataField);this.validateCellCommit(i,n),this.refreshView()}}this.requestPrepareEditor(),this._firePasted()}catch(t){throw t instanceof It.ValidationError&&(t=this._fireValidationFail(this._clipboardManager.appendingIndex.itemIndex,t.column,t))&&alert(this._editOptions.showOnlyValidationMessage&&t.userMessage?t.userMessage:t.toString()),t}},n.prototype.copyToClipboard=function(t,e,i){void 0===i&&(i=!1);var o,n=!1,r=this.focusedIndex;if(i||this.copyOptions.enabled){if(!i){var s=this.selections;o=(n=this.copyOptions.singleMode||0==s.count||s.single)?new Wt.BlockSelection(s,Wt.SelectionStyle.BLOCK,r,r):s.getItem(0),i=this._fireCopy(o,t)}return i?(e=e||o.getBounds(),n?this._clipboardManager.copyCellToClipboard(r):this._clipboardManager.copyToClipboard(e)):null}return this._clipboardManager.copyEmtpyToClipboard()},n.prototype.toClipboard=function(t,e){void 0===e&&(e=!0);var i=function(t){var e;return"string"==typeof t?e=this.columnByName(t):t instanceof Dt.GridColumn&&(e=t),e&&e.layout}.bind(this);if(!this.empty){var o;if(!(t&&t instanceof kt.CellRange)){var n=void 0,r=void 0;if(r=t?(n=i(t.startColumn),i(t.endColumn)):(n=this._activeCellLayout.getVisible(0),this._activeCellLayout.getVisible(this._activeCellLayout.visibleCount-1)),!n||!r)return;var s=null==(t=t||{}).startItem?0:Math.max(0,t.startItem),a=null==t.endItem?this.itemCount-1:Math.min(t.endItem,this.itemCount-1);o=kt.CellRange.createRange(s,n,a,r)}var l=this.copyToClipboard(null,o,!0);if(l=null==l?"":l,!e)return l;if(window.clipboardData)window.clipboardData.setData("text",l);else{var h=this.doc,d=h.createElement("textarea");h.body.appendChild(d),d.value=l,d.select(),h.execCommand("copy"),setTimeout(function(){h.body.removeChild(d),d=null},100)}}},n.prototype.showToast=function(t,e){this._toastManager.show(t,e,null)},n.prototype.hideToast=function(t){this._toastManager.close(),t&&setTimeout(t,0)},n.prototype.isEditing=function(t){return this._editorLender?this._editController.editing&&this._editorLender.isEditing():this._editController.editing&&(!t||kt.CellIndex.areEquals(t,this._editController.editIndex))},n.prototype.getEditItem=function(){return this._editorLender?this._editorLender.getEditItem(this):this.itemSource instanceof at.EditableItemProvider&&this.itemSource.editingItem},n.prototype.isItemEditing=function(t){return(t=this._editorLender?this._editorLender.getEditItem(this):t||this.focusedIndex.item)&&this.itemSource instanceof at.EditableItemProvider&&this.itemSource.isEditing(t)},n.prototype.isItemEdited=function(t){return(t=this._editorLender?this._editorLender.getEditItem(this):t||this.focusedIndex.item)&&this.itemSource instanceof at.EditableItemProvider&&this.itemSource.isEdited(t)},n.prototype.getEditValue=function(t,e,i){this._doGetEditValue(e,i)},n.prototype._doGetEditValue=function(t,e){this._fireGetEditValue(t,e)},n.prototype.isCellEditing=function(){return!!this._editOptions.commitByCell&&this._items.isUpdating},n.prototype.editorCommit=function(t,e,i){return this._doCellCommit(t,e,i)},n.prototype._doCellCommit=function(t,e,i){return this._editorLender?this._editorLender.editCellCommit(t,e,i):this._fireEditCommit(t,e,i)},n.prototype.editorActivated=function(t){this._doEditorActivated(t.editIndex,!0)},n.prototype._doEditorActivated=function(t,e){var i=this.getBodyCellAt(t,!0),o=i&&this.getBodyView(i.cell);o&&o.$_buttonZIndexChanged(this,i,e)},n.prototype.setCellUpdateEventLock=function(t){this._cellUpdateEventLock=t},n.prototype.$_validateCell=function(e,t,i){try{this._fireValidateCell(e,i,t)}catch(t){if(t instanceof It.ValidationError&&t.level!==lt.ValidationLevel.IGNORE){var o=t.column=e.dataColumn;throw o.error=t.message||t,o.errorLevel=t.level||lt.ValidationLevel.ERROR,t}throw t}},n.prototype.$_validateRow=function(t,e){for(var i=this.getDataColumns(),o=0,n=i.length;o<n;o++){var r=i[o],s=kt.CellIndex.temp(this,t.index,r),a=t.getData(r.dataIndex);this.$_validateCell(s,a,e)}var l=t.getRowObject();try{this._fireValidateRow(t,e,l)}catch(t){if(t instanceof It.ValidationError&&t.level!==lt.ValidationLevel.IGNORE)throw t;throw t}},n.prototype.$_validateCellValue=function(e,t){var i=e.dataColumn;try{var o=dt.ItemState_isInserting(e.item.itemState);this._validationManager.validateCell(e,o),this.$_validateCell(e,t,o),i.error=null,i.errorLevel=lt.ValidationLevel.IGNORE;var n=e.dataId,r=i.dataIndex,s=this._validationManager._cellList[n];return s&&s[r]&&delete s[r],!0}catch(t){if(!(t instanceof It.ValidationError))throw t;i.error=t.message||t,i.errorLevel=t.level||lt.ValidationLevel.ERROR,this._validationManager._userValidations&&this._validationManager.addInvalidateCell(e,t)}return!1},n.prototype.validateCellCommit=function(t,e){this.editOptions.validateOnEdited&&this.$_validateCellValue(t,e)},n.prototype.validateCells=function(t,e){return this._validationManager.validateCells(t,e)},n.prototype.getInvalidCells=function(){return this._validationManager.getInvalidCells()},n.prototype.clearInvalidCells=function(){this._validationManager.clearInvalidCells()},n.prototype.getEditableAt=function(t,e){if(!this._editorLender){var i=t.dataColumn;return!!i&&(e&&null!=e.editable?e.editable:!(!this._editOptions.editable||!i.editable||t.colFixed&&!this._fixedOptions.editable||t.rowFixed&&!this._fixedOptions.rowEditable))}},n.prototype.getReadOnlyAt=function(t,e){if(!this._editorLender){var i=t.dataColumn;if(!i)return!0;var o=this._items.getItem(t.itemIndex);return!o||(e&&null!=e.readOnly?e.readOnly:!this.editOptions.updatable&&o.rowState===I.RowState.NONE||!this._items.canUpdate(o,i.dataIndex)||!!this._editOptions.readOnly||!!i.readOnly)}},n.prototype.canEditAt=function(t){var e=this.getBodyViewAt(t);if(e){var i=e.getCellAt(this._layoutManager,t);return i&&void 0!==i.editable?i.editable:this.getEditableAt(t,null)}},n.prototype.canWriteAt=function(t){var e=this.getBodyViewAt(t);if(e){var i=e.getCellAt(this._layoutManager,t);return i&&void 0!==i.readonly?!i.readonly:!this.getReadOnlyAt(t,null)}},n.prototype.canUpdate=function(t,e){return this.editOptions.canUpdate()&&(this._editorLender||0<this.visibleLayoutCount)&&this.itemSource&&this.itemSource.canUpdate(t,e)},n.prototype.canAppend=function(){var t=this.itemSource,e=!this.isEditing()&&this.editOptions.canAppend()&&0<this.visibleLayoutCount&&t&&t.canAppend();if(e)try{if(!this._fireRowInserting(t.itemCount,-1))return!1}catch(t){return alert(t.message||t),!1}return e},n.prototype.canInsert=function(t,e,i){var o=this.itemSource,n=!this.isEditing()&&this._doCanInsert(t,e,i)&&this.editOptions.canInsert()&&0<this.visibleLayoutCount&&o&&o.canInsert(t);if(n)try{if(!this._fireRowInserting(t.index+(e?1:0),-1))return!1}catch(t){return alert(t.message||t),!1}return n},n.prototype._doCanInsert=function(t,e,i){return!0},n.prototype.canDelete=function(t){var e=this.itemSource;return this.editOptions.canDelete()&&0<this.visibleLayoutCount&&e&&(this.isItemEditing(t)||e.canDelete(t))},n.prototype.canCommit=function(t){return this.isItemEditing(t)&&(this.isItemEdited()||this.editOptions.commitWhenNoEdit)},n.prototype.canCancel=function(t){return this.isItemEditing(t)},n.prototype.edit=function(t){return t=t||this.focusedIndex,!!(this.isValid(t)&&this.itemSource instanceof at.EditableItemProvider)&&!(t.dataColumn&&!this.canUpdate(t.item,t.dataField))&&this.itemSource.edit(t.item)},n.prototype.insertAt=function(t,e){return this.insert(this.getItem(t),e)},n.prototype.insert=function(t,e,i){if(void 0===t&&(t=null),void 0===e&&(e=!1),void 0===i&&(i=!1),!(t=t||(this.focusedIndex?this.focusedIndex.item:null)))return!1;var o=this.itemSource;if(o instanceof at.EditableItemProvider&&this.canInsert(t,e,i)){var n=this.$_getInsertDefaults(null);return this._cancelDummy(),o.insert(t,n,e,i)}return!1},n.prototype.append=function(){var t=this.itemSource;if(t instanceof at.EditableItemProvider&&t.dataSource&&this.canAppend()){var e=this.$_getInsertDefaults(null);return this._cancelDummy(),t.append(e)}return!1},n.prototype._appendDummy=function(){var t=this._editOptions;t.displayEmptyEditRow&&t.appendable&&this._items.appendDummy()},n.prototype._cancelDummy=function(){this._items.cancelDummy()},n.prototype.setValueAt=function(t,e,i){var o=this.getItem(t);if(o&&0<=e)if(o instanceof at.EditItem||o instanceof ei.TreeEditItem)o.setValue(e,i);else{var n=o.dataRow;0<=n&&this.dataSource.setValue(n,e,i)}},n.prototype.setCellValue=function(t,e){this.isValid(t)&&this.setValueAt(t.itemIndex,t.dataField,e)},n.prototype.$_canShowEditor=function(t,e,i){return!!this.isValid(t)&&this._fireShowEditor(this._editorIndex.assign(t),e,i)},n.prototype.hideEditor=function(t){void 0===t&&(t=!1),this._editController.closeList(!1),this._editController.hideEditor(),t&&this.activeTool.resetFocused()},n.prototype.reprepareEditor=function(){this._editController.reprepareEditor(this.focusedIndex)},n.prototype.requestPrepareEditor=function(){this._editController.requestPrepareEditor()},n.prototype.fillEditSearchItems=function(t,e,i,o){this._editController.fillSearchItems(t,e,i,o)},n.prototype.showEditor=function(t,e,i){if(void 0===e&&(e=!1),void 0===i&&(i=!1),t=t||this.focusedIndex,this._editController.showEditor(t,i))return this.activeTool.resetFocused(),e&&this._editController.caretToLast(),!0},n.prototype.showEditList=function(t){if(this._editController.showList(t))return!0},n.prototype.editorButtonClicked=function(t){this._editController.buttonClicked(t),this._fireEditButtonClicked(t)},_dp(n,"canUndo",{get:function(){var t=this.dataSource;return t&&t.canUndo&&!this.isItemEditing()}}),n.prototype.undo=function(){return!!this.canUndo&&(this.dataSource.undo(),!0)},_dp(n,"canRedo",{get:function(){var t=this.dataSource;return t&&t.canRedo&&!this.isItemEditing()}}),n.prototype.redo=function(){return!!this.canRedo&&(this.dataSource.redo(),!0)},n.prototype.execute=function(t){},n.prototype.clearCommandStack=function(t){this.dataSource.clearCommandStack()},n.prototype.setLookups=function(t){t&&(this._lookupProvider||(this._lookupProvider=new Ae.LocalLookupSourceProvider,this._lookupProvider.addListener(this)),this._lookupProvider.load(t))},n.prototype.addLookupSource=function(t){(this._lookupProvider||(this._lookupProvider=new Ae.LocalLookupSourceProvider)).add(t)},n.prototype.removeLookupSource=function(t){this._lookupProvider&&this._lookupProvider.remove(t)},n.prototype.existsLookupData=function(t,e){if(t&&e){var i=this._lookupProvider&&this._lookupProvider.getSource(t);if(!i)throw"Invalid lookup source id: "+t;return i.exists(ne.Utils.makeArray(e))}},n.prototype.fillLookupData=function(t,e){if(t&&e){var i=this._lookupProvider&&this._lookupProvider.getSource(t);if(!i)throw"Invalid lookup source id: "+t;e.rows?i.fillRows(e.rows):i.fill(e.keys,e.values)}},n.prototype.clearLookupData=function(t){if(t){var e=this._lookupProvider&&this._lookupProvider.getSource(t);if(!e)throw"Invalid lookup source id: "+t;e.clear()}},n.prototype.addLookupData=function(t,e,i){if(void 0===i&&(i=null),t&&e){e=ne.Utils.makeArray(e);var o=this._lookupProvider&&this._lookupProvider.getSource(t);if(!o)throw"Invalid lookup source id: "+t;i?o.add(e,i):o.addRow(e)}},n.prototype.setOptions=function(t){},n.prototype.doContextMenu=function(t){var e,i,o,n,r,s,a,l=t.mouseX,h=t.mouseY,d=this.activeTool,u=d._findTableCell(),_=d.findElementAt(l,h,!1);if(u){var c=this.getTableView(u),p=this.getCellType(u);switch(p){case"head":e=Pe.ClickData.getSub(p,this.headView.getCellType(u)),s=(i=this.headView.getHeadModel(u))&&i.popupMenuName;break;case"foot":e=Pe.ClickData.getSub(p,this.footView.getCellType(u)),s=(i=this.footView.getFootModel(u))&&i.popupMenuName;break;case"indicator":e=Pe.ClickData.getItem(p,this.rowBarContainer.rowOf(u)),s=this.rowIndicator.popupMenuName;break;case"state":e=Pe.ClickData.getItem(p,this.rowBarContainer.rowOf(u)),s=this.stateBar.popupMenuName;break;case"check":e=Pe.ClickData.getItem(p,this.rowBarContainer.rowOf(u)),s=this.checkBar.popupMenuName;break;case"header":a=c.layoutByCell(u),e=Pe.ClickData.getLayout(p,a),s=a.firstColumn.header.popupMenuName;break;case"data":if((n=c.bodyCellByCell(u)).grouped)e=Pe.ClickData.getItem("groupHeader",n.item.index);else{if(n.merged&&n.item!==_._item&&_ instanceof Qt.RowElement){var f=kt.CellIndex.temp(this,_.itemIndex,n.layout);n=c.bodyCellAt(f)}e=Pe.ClickData.getCell(p,n),s=n.dataColumn.popupMenuName}break;case"groupFooter":n=c.bodyCellByCell(u),e=Pe.ClickData.getCell(p,n),r=n.item.$_footerIndex;var g=n.dataColumn.groupFooters.get(r);s=g&&g.popupMenuName;break;case"footer":case"summary":var m=c.tableCellByCell(u);r=m.summaryIndex;var y="footer"===p?m.layout.firstColumn.footers.get(r):m.layout.firstColumn.headerSummaries.get(r);e=Pe.ClickData.getSummary(p,m.summaryIndex,m.layout),s=y&&y.popupMenuName;break;case"groupHead":case"groupFoot":var v=u[b.T_LEV];e=Pe.ClickData.getGroupElt(p,v);break;case"groupBar":var w=u[lt.T_ROW];e=Pe.ClickData.getItem(p,w)}}else _&&_===d._clickElement&&(e=qt.isItemElement(_)?Pe.ClickData.getItem("groupHeader",_.itemIndex):d._getClickData(_));if(!1!==(o=this._fireContextMenuPopup(l,h,e))){var C=this._popupMenuManager;if("string"==typeof o?s=o:null!=o&&"object"==typeof o||(s=s||this._contextMenu),s){t.preventDefault();var x=C.getMenu(s);x&&C.showContext(x,t,l,h,e)}}},n.prototype.setContextMenu=function(t){return(t=ne.Utils.makeArray(t))?(this._contextMenu="gridContextMenu",this.popupMenuManager.addMenu(this._contextMenu,t,!0,this)):this._contextMenu=null,this.popupMenuManager.getMenu(this._contextMenu)},n.prototype.addPopupMenu=function(t,e,i){void 0===i&&(i=!0),e=ne.Utils.makeArray(e),t&&e&&this.popupMenuManager.addMenu(t,e,i)},n.prototype.removePopupMenu=function(t){this.popupMenuManager.removeMenu(t)},n.prototype.setCursor=function(t,e){if(t){var i=this.getTableCell(t);if(i){var o=this.getTableView(i);if(o instanceof qt.VisualObjectElement)return void o.setCursor(e)}}this._container.setCursor(e)},n.prototype.canMoveLayout=function(t){var e=t.root.vindex,i=this.layoutManager;return!(i.mergedRowGrouped&&e<i.rowGroupLevels)&&(this.fixedOptions.movable||e>=i.fixedLayoutCount&&e<i.rightFirstLayout)},n.prototype.canMoveToLayout=function(t){return this.canMoveLayout(t)},n.prototype.getEditCellValue=function(){return this._editController.editValue},n.prototype.setEditCellValue=function(t,e,i){(this.isEditing()||e)&&this._editController.setEditValue(t,i)},n.prototype.searchItem=function(t){t instanceof y.SearchOptions||(t=new y.SearchOptions(t));var e=t.fields,i=t.values,o=this.itemSource,n=t.startIndex,r=-1;if(e&&0<e.length&&i&&0<i.length&&o){var s=void 0,a=void 0,l=void 0,h=void 0,d=e.length,u=[];for(s=0;s<d;s++)a=parseFloat(e[s]),!isNaN(a)&&0<=a?u.push(a):0<=(l=this.dataSource.getFieldIndex(e[s]))&&u.push(l);0<u.length&&(d=o.itemCount,(r=(n=Math.max(0,n))<d?o.findItem(u,i,t,n,d-1):-1)<0&&t.wrap&&0<n&&(r=o.findItem(u,i,t,0,n-1))),0<=r&&t.select&&(h=this.getIndex(r,ne.Utils.pick(this.focusedIndex.column,this.getFirstColumn())),this.setFocusedIndex(h,!0,!0))}return r},n.prototype.searchCell=function(t){var e,i,o,n=t instanceof y.SearchCellOptions?t:new y.SearchCellOptions(t),r=n.wrap,s=n.select,a=ne.Utils.makeArray(n.fields),l=this.itemSource,h=null,d=l&&l.dataSource,u=ne.Utils.makeArray(n.columns),_=[],c=n.value;if(d){if(!a&&u)for(e=0,i=u.length;e<i;e++){var p=this.columnByName(u[e]);if(p instanceof Dt.DataColumn){if(p.dataIndex<0)throw new Error("invalid search Column "+u[e]);_.push(p.dataIndex)}}else if(a&&0<a.length)for(e=0,i=a.length;e<i;e++)o=parseFloat(a[e]),!isNaN(o)&&0<=o?_.push(o):_.push(d.getFieldIndex(a[e]));if(_&&0<_.length&&null!=c){if(0<_.length){i=l.itemCount;var f=Math.max(0,n.startIndex),g=Math.max(0,n.startFieldIndex);!(h=f<i?l.findCell(_,c,n,f,i-1,g):null)&&r&&0<f&&(h=l.findCell(_,c,n,0,f-1,0)),h&&(h.fieldName=d.getOrgFieldName(h.fieldIndex))}if(h&&s){var m=void 0;(m=u?this.getIndex(h.itemIndex,ne.Utils.pick(this.columnByName(u[h.searchFieldIndex]),this.focusedIndex.column)):this.getIndex(h.itemIndex,ne.Utils.pick(this.columnByField(h.fieldIndex),this.focusedIndex.column)))&&this.setFocusedIndex(m,!0,!0)}}}return h},n.prototype.isCheckable=function(t){var e=this.getItem(t);return e&&e.checkable},n.prototype.isCheckableOfRow=function(t){var e=this.getItemOfRow(t,!0);return e&&e.checkable},n.prototype.setCheckable=function(t,e){var i=this.getItem(t);i&&i.setCheckable(e)},n.prototype.setCheckableOfRow=function(t,e){var i=this.getItemOfRow(t,!0);i&&i.setCheckable(e)},n.prototype.isCheckedItem=function(t){var e=this.getItem(t);return e&&e.checked},n.prototype.isCheckedRow=function(t){var e=this._items.getItemOfRow(t,!0);return e&&e.checked},n.prototype.checkAll=function(t,e,i,o){var n=this._checkBar.showGroup;this._items.checkAll(t,e,i,o,n)},n.prototype.toggleCheck=function(t){var e=this.getItem(t);e&&e.checkable&&this.checkItem(e.index,!e.checked,this.checkBar.exclusive,!0)},n.prototype.toggleChecks=function(t,e){var i=[];if(e&&e.isDataRow&&e.checkable){for(var o=0;o<t.length;o++)t[o].checkable&&0<=t[o].dataRow&&i.push(t[o]);0<i.length&&this._items.checkItems(i,!e.checked,!0)}},n.prototype.checkItem=function(t,e,i,o){var n=this.getItem(t);n&&this._items.checkItem(n,e,i,o)},n.prototype.checkRow=function(t,e,i,o){var n,r=this.getItemIndexOfRow(t);-1<r&&(n=this.getItem(r))&&(n=n instanceof at.EditItem?n:null),(n=n||this.getItemOfRow(t,!0))&&this._items.checkItem(n,e,i,o)},n.prototype.checkItems=function(t,e,i){var o=this._items.getItemsByIndices(t);this._items.checkItems(o,e,i)},n.prototype.checkRows=function(t,e,i){var o=this._items.getItemsByRows(t,!0);this._items.checkItems(o,e,i)},n.prototype.setAllCheck=function(t,e){if(this._headView.allChecked=t,e){var i=this.checkBar;this.checkAll(t,i.visibleOnly,i.checkableOnly,!1)}},_dp(n,"allChecked",{get:function(){return this._headView.allChecked}}),n.prototype.resetCheckables=function(){},n.prototype.applyCheckables=function(){},n.prototype.registerCustomRenderer=function(t,e){this._delegate.addCustomRenderer(t,e)},n.prototype.unregisterCustomRenderer=function(t){this._delegate.removeCustomRenderer(t)},n.prototype.existsCustomRenderer=function(t){return this._delegate.existsCustomRenderer(t)},n.prototype.unregisterAllCustomRenderer=function(){this._delegate.clearCustomRenderers()},n.prototype.getValueAt=function(t,e){var i=this.getItem(e),o=t.firstColumn;if(o instanceof Dt.DataColumn)return i&&i.getData(o.dataIndex)},n.prototype.getCellValue=function(t){if(this.isValid(t)){var e=this.getItem(t.itemIndex),i=t.dataColumn;if(e&&i)return e.getData(i.dataIndex)}},n.prototype.getDistinctItemValues=function(t,e,i){void 0===e&&(e=-1),void 0===i&&(i=lt.SortDirection.ASCENDING);var o=this.itemCount;e=e<0?o:e;var n=this.columnByField(t);if(!n)return null;if(0<e){for(var r=n.getField().dataType,s=[],a=[],l=0,h=this.itemCount;l<h;l++){var d=this.getItem(l);if(d instanceof dt.GridRow||d instanceof Ve.TreeItem){var u=d.getData(t);switch(r){case lt.ValueType.NUMBER:null!=u&&isNaN(u)||s.indexOf(u)<0&&s.push(u);break;case lt.ValueType.DATE:case lt.ValueType.DATETIME:u?a.indexOf(u.getTime())<0&&(a.push(u.getTime()),s.push(u)):(a.push(u),s.push(u));break;default:s.indexOf(u)<0&&s.push(u)}}}return i!==lt.SortDirection.NONE&&(s=ne.Utils.included(r,lt.ValueType.DATETIME,lt.ValueType.DATE,lt.ValueType.NUMBER)?s.sort(function(t,e){return t-e}):s.sort(),i===lt.SortDirection.DESCENDING&&(s=s.reverse())),s.slice(0,e)}return null},n.prototype.getDisplayText=function(t){var e=t.dataColumn;if(e){var i=e.dataIndex;if(0<=i){var o=t.item;if(o instanceof dt.GridRow){var n=o.getData(i);if(e instanceof Dt.SeriesColumn)return mt.SeriesCell.getText(n,null);var r=new Dt.ColumnStyle,s=this._body.getCellFormatters(e,null,this._formatOptions,t,r);return mt.DataCell._getDisplayText(this,o,e,n,s)}if(o instanceof dt.GroupFooter){var a=e.groupFooters.get(o.$_footerIndex);return n=Xe.RowGroupFooterCell.getValue(o,e),s=this._rowGroup.getFooterCellFormatters(a,null),Xe.RowGroupFooterCell.$_displayText(o,e,n,s)}}}return""},n.prototype.fitLayoutWidth=function(t){var e=this.itemSource,i=this.getIndex(this.topIndex,t.firstColumn),o="",n="",r=0;o=n=t.firstColumn.header.displayText;var s=ne.Utils.getTextLength(o),a=this.getBodyCellAt(i,!1),l=a&&a.renderer2._dom,h=null;if(l){var d=ne.getWin(l).getComputedStyle(l);if(d){n=d.paddingLeft;var u=parseInt(n.substr(0,n.indexOf("px")));r+=0<u?u:0,n=d.paddingRight,r+=0<(u=parseInt(n.substr(0,n.indexOf("px"))))?u:0,h={fontSize:d.fontSize,fontFamily:d.fontFamily,fontWeight:d.fontWeight,fontStyle:d.fontStyle}}}for(var _=0,c=e.itemCount;_<c;_++)i.itemIndex=_,n=this.getDisplayText(i),ne.Utils.getTextLength(n)>s&&(s=ne.Utils.getTextLength(n),o=n);return 0<s&&(r+=this.container.measureText("rg-data-cell",o,h)+6),t.cellWidth=r},n.prototype.canMoveRow=function(t){return!this.isEditing()&&!this.isItemEditing()&&this._editOptions.movable&&(!t||this.itemSource.movable)},n.prototype.canMoveRows=function(t,e){if(this.canMoveRow(e)&&t){for(var i=!1,o=0;o<t.length;o++){var n=t[o];n&&n.isDataRow&&(i=!0)}return i}},n.prototype.moveRows=function(t,e){if(this.canMoveRows(t,!0))return this._doMoveRows(t,e)},n.prototype.moveSelection=function(t){var e=this.getSelectedItems(!1);if(e&&0<e.length){var i=e[0].index,o=this.itemSource;if(0<t&&i+t<=o.itemCount||t<0&&0<i){this.moveRows(e,this.getItem(i+t));var n=this.getSelection();n.moveRow(t),this._selections.clear(),this._selections.$_addItem(n);var r=this._focusedIndex.clone();r.itemIndex=i+t,this.setFocusedIndex(r,!1,!0)}}},n.prototype.isSelectedItem=function(t){var e=this.getSelection();return e&&e.containsItem(t)},n.prototype.isSelectedLayout=function(t){var e=this.getSelection();return e&&e.containsLayout(t)},n.prototype.getFilteredColumns=function(){for(var t=this.columnCount,e=[],i=0;i<t;i++){var o=this.getColumn(i);o.hasFilters&&e.push(o)}return e},n.prototype.showProgress=function(){this._progressManager.show(this._container._containerDom,null,this.displayOptions.baseZindex)},n.prototype.setProgress=function(t,e,i,o){this._progressManager.setProperties(t,e,i,o)},n.prototype.closeProgress=function(){this._progressManager.close()},n.prototype.showLoading=function(t){this._progressManager._gridDisabled=this.container.disabled,t&&(this.container.disabled=!0),this._progressManager.showLoader(this._container._containerDom,this._displayOptions.baseZindex)},n.prototype.hideLoading=function(){this._progressManager.closeLoader(),this.container.disabled=this._progressManager._gridDisabled},n.prototype.beginExportProgress=function(t){this._progressManager.show(this._container._containerDom,t,this._displayOptions.baseZindex)},n.prototype.endExportProgress=function(){this._progressManager.close()},n.prototype.setExportProgress=function(t,e,i){this._progressManager.setProperties(0,t,e,i)},n.prototype.setEmptyMessage=function(t){this._emptyView.setMessage(t)},n.prototype._getCssSelector=function(){return""},_dp(n,"container",{get:function(){return this._container}}),n.prototype._createDelegate=function(){return new Be.GridDelegate(this)},n.prototype._createLayoutManager=function(){return new ee.GridLayoutManager(this)},n.prototype._createEditController=function(){return new De.DefaultEditController(this)},n.prototype._createSelectionLayer=function(){return ne.Utils.isMobile()?new Ke.MobileSelectionLayer(this,"mobileSelectionLayer"):new Wt.SelectionLayer(this,"selectionLayer")},n.prototype._initDom=function(t){a.prototype._initDom.call(this,t),t.style.setProperty("overflow","hidden","important")},n.prototype._doActivateView=function(){this._container.activeTool=this._container.defaultTool,this._editController.prepareEditor(this._focusedIndex),this.visible=!0,this._fireViewActivated(!0)},n.prototype._dodDeactivateView=function(){this._fireViewActivated(!1)},n.prototype.setRect=function(t){var e=t.width!=this.width||t.height!=this.height;a.prototype.setRect.call(this,t),e&&(this._dirty=!0)},n.prototype._doDraw=function(t){},n.prototype.$_containerResized=function(){this._layoutManager.requestZoom(),ne.Utils.isMobile()&&this.isEditing()&&!this.isItemEditing()&&setTimeout(function(){var t=this.topItem,e=this.layoutManager.fullItemCount,i=this.focusedIndex.itemIndex;t+e<i&&(this.topIndex=i-Math.round(e/2))}.bind(this),10)},n.prototype._doCreateOtherElements=function(){},n.prototype._doContentPanesCreated=function(){},n.prototype._createSidePane=function(){return null},n.prototype.isSidePaneVisible=function(){return!1},n.prototype._createBodyView=function(t){return new te.GridBodyElement(this.doc,t)},n.prototype._createFixedBodyView=function(t){return new te.FixedBodyElement(this.doc,t)},n.prototype._createRightBodyView=function(t){return new te.RightBodyElement(this.doc,t)},n.prototype._createGridPanel=function(){return null},n.prototype._createGridFooter=function(){return new Vt.GridFooter(this)},n.prototype._initStyles=function(){},n.prototype._columnsReset=function(){this._resetColumnIndices(),this._activeCellLayout._columnsChanged(this._columns),this._columnsDirty=!0,this._shadowDom&&this._shadowDom.setColumns(!1)},n.prototype._columnVisibleChanged=function(t){this._activeCellLayout._columnChanged(t)},n.prototype._resetColumnIndices=function(t){void 0===t&&(t=null),t?t._resetIndices(this):this._columns.resetIndices(),t||this._cellLayoutDirty||this.clearSelection()},n.prototype._resetColumnSortStates=function(){this._columns.resetSortStates()},n.prototype._cleanGridObjects=function(){for(var t=0,e=this._gridObjects.length;t<e;t++)this._gridObjects[t].clean()},n.prototype._visualObjectChanged=function(t){this.invalidateLayout()},n.prototype._addGridObject=function(t){this._gridObjects.push(t)},n.prototype.addElement=function(t){this._rootElement.addChild(t)},n.prototype.$_prepareRender=function(t){this._doPrepareRender(t)},n.prototype._doPrepareRender=function(t){if(this._horzScrolled)try{var e=this._layoutManager;e.setLeftPos(t,this._leftPos),this._leftPos=e.leftPos,this.$_updateScrollBars(e),this._layoutSelectionViews(),this._editController.resetEditor(!1),this.container.defaultTool.layoutChanged()}finally{this._horzScrolled=!1}},n.prototype.$_layout=function(t){this._doLayout(t)},n.prototype.$_afterRender=function(){this._layoutManager.needRelayout()&&this.invalidateLayout()},n.prototype._doLayout=function(t){var e=this._layoutManager;this._resetting=!1;try{this.$_doLayout(e,t)}finally{this._loading=!1}if(this.$_checkFocusedLayout(),this._emptyView.visible=this.empty&&this._displayOptions.showEmptyMessage){var i=e.contentBounds;i.topBy(e.headerBounds.bottom),this._emptyView.setBounds(0,i.y,this.width,i.height)}if(this._debugging&&this._debugView.layout(),this._horzScrolled=!1,this._cleanGridObjects(),this._columnsDirty&&(this._columnsDirty=!1,this._activeCellLayout.cleanColumns()),this.$_resetHovering(this.container._currentX,this.container._currentY,!0),this.$_resetRowHover(),0<e.itemCount){var o=e.topIndex,n=o+e.itemCount;o!=this._prevTop&&setTimeout(function(){this._fireTopIndexChanged(o)}.bind(this),0),this._prevTop=o,n!=this._prevLast&&n==this.itemCount&&setTimeout(function(){this._fireScrollToBottom()}.bind(this),1),this._prevLast=n}this.$_checkCurrentRow(),this._editController.prepareEditor(this.focusedIndex),this._cellLayoutDirty=!1,this.container.defaultTool.layoutChanged()},n.prototype.$_doLayout=function(t,e){var i=e.clone(),o=this._displayOptions.vscrollBar?this._scrollBarWidth:0,n=this._displayOptions.hscrollBar?this._scrollBarHeight:0,r=this.$_fixedColCount=this._fixedOptions.colCount,s=this.$_rfixedColCount=this._fixedOptions.rightCount;this._activeCellLayout.$_refresh(this._columns,this._displayOptions.minCellWidth),this._activeCellLayout.$_prepareLayout(this,r,s),this._needMerge&&(this.$_populateMerges(),this._needMerge=!1),this._body._prepareUpdate(),t.measure(i,this._leftPos,this._topIndex,o,n),t.layout(i),this._leftPos=t.leftPos,this._topIndex=t.topIndex,this.$_updateScrollBars(t,i),this._layoutSelectionViews(),this._layouted=!0,!this._editController.resetEditor(!1)&&this.isValid(this._focusedIndex)&&this._editController.resetEditable(this._focusedIndex),this.container.defaultTool.layoutChanged()},n.prototype._columnCheckedChanged=function(t){this._fireColumnCheckedChanged(t)},n.prototype.$_updateScrollBars=function(t,e){if(t.hscrollBar){var i=t.bodyBounds.width,o=Math.min(t.scrollWidth);this._hscrollBar.setProperties(0,i,o),this._hscrollBar.setPosition(t.leftPos),this._hscrollBar.visible=!0}else this._hscrollBar&&(this._hscrollBar.setProperties(0,0,0),this._hscrollBar.setPosition(0),this._hscrollBar.visible=!1);if(t.vscrollBar){var n=this.itemCount,r=n-t.fixedItemCount,s=Math.min(t.fullItemCount,n-t.topIndex);this._vscrollBar.setProperties(0,r,s),this._vscrollBar.setPosition(t.topIndex),this._vscrollBar.visible=!0}else this._vscrollBar&&(this._vscrollBar.setProperties(0,0,0),this._vscrollBar.setPosition(0),this._vscrollBar.visible=!1);e&&this.$_layoutScrollBars(t,e)},n.prototype.$_layoutScrollBars=function(t,e){var i=t.scrollBarWidth,o=t.scrollBarHeight,n=this._hscrollBar,r=this._vscrollBar;t.hscrollBar&&(n.setBounds(e.x,e.bottom-o,e.width-i,o),n.layoutContent()),t.vscrollBar&&(r.setBounds(e.right-i,e.y,i,e.height-o),r.layoutContent()),(this._scrollEdge.visible=t.vscrollBar&&t.hscrollBar)&&this._scrollEdge.setBounds(e.right-i,e.bottom-o,i,o)},n.prototype._columnMergeRuleChanged=function(t){this._populateMerges(),this.refreshView()},n.prototype._canMerge=function(){return!1},n.prototype._populateMerges=function(){this._needMerge=!0},n.prototype.$_populateMerges=function(){if(this._canMerge())for(var t=this.getHorzColumns(),e=0,i=t.length;e<i;e++){var o=t[e],n=o&&o.layout;if(n&&n.canMerge()){var r=n._merges;r||(r=new Rt.ColumnMergeManager(n),n._merges=r),r.clear(),o instanceof Dt.DataColumn&&o.mergeGrouped?0<this.getGroupLevel(o.dataIndex)&&r.initialize(Rt.RowGroupMergeRule.INIT_COUNT):r.initialize(Rt.ColumnMergeRule.INIT_COUNT)}}},n.prototype._doRowGroupMergeModeChanged=function(){},n.prototype._addSelectionView=function(t){this._selectionLayer.addView(t)},n.prototype._clearSelectionViews=function(){this._selectionLayer.clearViews()},n.prototype._layoutSelectionViews=function(){this._layouted&&!this._resetting&&this._selectionLayer.layout()},n.prototype.$_checkCurrentRow=function(t){if(void 0===t&&(t=!1),this._focusedIndex){var e=this._focusedIndex.dataId,i=this._focusedIndex.dataRow;if(t||e!=this._currentRowId){clearTimeout(this._rowChangeTimer);var o=this.container.defaultTool,n=this._currentRow,r=this._displayOptions.rowChangeDelay,s=t||r<=0;return this._currentRowId=e,this._currentRow=i,s?(this._fireCurrentRowChanged(n,i),o.currentRowChanged(n,i)):0<r&&(this._rowChangeTimer=setTimeout(function(){this._fireCurrentRowChanged(n,i),o.currentRowChanged(n,i)}.bind(this),r)),!0}}return!1},n.prototype.$_doSetFocusedIndex=function(t,e,i,o){if(void 0===o&&(o=!0),!t){if(o)return!1;t=this.getIndex(-1,null)}var n,r;if(!this.isValid(t)&&o&&(t=t.clone()).normalize(this),!this.isValid(t)){var s=this.dataSource;if(!s||0==s.rowCount||0==this.itemCount)return this._focusedIndex.itemIndex=-1,this._focusedIndex.layout=this.getFirstLayout(),!1}if(kt.CellIndex.areEquals(t,this._focusedIndex))return!0;var a=this._editOptions,l=this._focusedIndex.clone(),h=this.itemSource,d=this.container.defaultTool,u=this.layoutManager;if(!this._editController.focusedIndexChanging())return!1;if(!this._fireCurrentChanging(l,t))return!1;var _=l.item;if(h&&t.itemIndex!=l.itemIndex)try{if(_)switch(_.itemState){case dt.ItemState.INSERTING:if(!this.commit(a.forceInsert,!0))return this.cancel(!0),!1;break;case dt.ItemState.APPENDING:if(!this.commit(a.forceAppend,!0))return this.cancel(!0),!1;break;case dt.ItemState.UPDATING:if(!this.commit(this.isEditing()&&a.commitWhenNoEdit,!0))return this.cancel(!0),!1}}catch(t){if(t instanceof It.ValidationError)return(t=this._fireValidationFail(_.index,t.column,t))&&alert(a.showOnlyValidationMessage&&t.userMessage?t.userMessage:t.toString()),!1;if(t instanceof It.AbortError)return!1;throw t}else _&&this.isItemEditing(_)&&a.validateOnExit&&this.invalidateLayout();d.focusedIndexChanging(t),this._focusedIndex.assign(t),this.$_checkFocusedLayout(),this.isValid(l)&&(r=(n=u.getBodyView(l)).getCellAt(u,l),n.$_focusChanged(this,r,!1)),this.isValid(t)&&(r=(n=u.getBodyView(t)).getCellAt(u,t),n.$_focusChanged(this,r,!0)),h instanceof at.EditableItemProvider&&h.setDiffs(this._editOptions.checkDiff,this._editOptions.checkCellDiff,this._editOptions.strictDiff),this._editController.focusedIndexChanged(l,t,!1),d.focusedIndexChanged(l,t);var c=this._focusedIndex,p=this.isValid(c);!e&&p||this.clearSelection(),this._layouted&&this._refreshSideViews();var f,g,m=!kt.CellIndex.areEquals(c,u._prevFocused);!i&&!m||this.$_makeFocusedIndexVisible()||(this._editController.resetEditor(!1),this.isValid(c)&&this.getItem(c.itemIndex).canEdit()&&this._editController.prepareEditor(c),!this.isValid(l)||(f=this.getBodyViewAt(l))&&(g=f.getRowView(l.item))instanceof Qt.RowElement&&g.resetButtons(this),!this.container.isLayoutNeeded()&&p&&(f=this.getBodyViewAt(c))&&(g=f.getRowView(c.item))instanceof Qt.RowElement&&g.resetButtons(this));return this._fireCurrentChanged(this._currentIndex.assign(c)),this.$_checkCurrentRow(),!0},n.prototype._refreshSideViews=function(){this.container.isLayoutNeeded()||(this._rowBarContainer.visible&&this._rowBarContainer.refresh(this),this._headerView.visible&&this._headerView.refresh(this),this._fixedHeaderView.visible&&this._fixedHeaderView.refresh(this),this._rightHeaderView.visible&&this._rightHeaderView.refresh(this))},n.prototype.$_makeFocusedIndexVisible=function(){return this.makeCellVisible(this._focusedIndex)},n.prototype.makeCellVisible=function(t){if(this._editorLender)return this._editorLender.makeCellVisible(t);if(this.isValid(t)||t&&t.column){if(this.layoutManager.makeCellVisible(t),!this.layoutManager.focusIsVisible())return this.invalidateLayout(),!0;this.layoutManager.clearFocusRequest()}return!1},n.prototype.makeColumnVisible=function(t){if(t){var e=this.getIndex(this._focusedIndex?this._focusedIndex.itemIndex:-1,t);this.makeCellVisible(e)}},n.prototype.makeItemVisible=function(t){if(0<=t){var e=this.getIndex(t,this._focusedIndex&&this._focusedIndex.layout);this.makeCellVisible(e)}},n.prototype.makeLayoutVisible=function(t){if(t){var e=this.getIndex(this._focusedIndex?this._focusedIndex.itemIndex:-1,t);this.makeCellVisible(e)}},n.prototype.cancelEditor=function(t){this.isEditing()&&(t=!(0<arguments.length)||t,this._editController.cancelEditor(t))},n.prototype.itemEditCancel=function(){return this._fireItemEditCancel(this.itemSource.editingItem)},n.prototype.$_cancelItem=function(t,e){void 0===e&&(e=!1);var i=ne.Utils.cast(this.itemSource,at.EditableItemProvider);return!!(i&&t&&i.isEditing(t))&&(i.cancel(),e&&this.resetFocusedIndex(),!0)},n.prototype.cancel=function(t){void 0===t&&(t=!1);var e=this.editController;this.isEditing()&&(e.cancelEditor(!0),e.invalidateEditor());var i=this.focusedIndex;if(this.itemSource,this.isValid(i)){var o=i.dataId;if(this.$_cancelItem(i.item))return i=i.clone(),this._validationManager.userValidations&&-1<o&&(this._validationManager.validateCells(i.itemIndex),this._setColumnErrors(i.item)),this._rowBarContainer.stateError=void 0,e._prepareEditor(e._editIndex),i.normalize(this),this.setFocusedIndex(i),t&&this.$_makeFocusedIndexVisible(),!0}return!1},n.prototype.commitEditor=function(t){void 0===t&&(t=!0),this.isEditing()&&this.editController.commitEditor(t,!1)},n.prototype.$_commitItem=function(t,e,i){void 0===i&&(i=!1);var o=ne.Utils.cast(this.itemSource,at.EditableItemProvider);if(o&&t&&o.isEditing(t)&&(e||o.isEdited(t))){var n=dt.ItemState_isInserting(t.itemState);try{this._validationManager.validateRow(t,n,!1),this.$_validateRow(t,n),this._rowBarContainer.stateError=void 0}catch(t){throw t instanceof It.ValidationError&&(t.level=t.level||lt.ValidationLevel.ERROR,this._rowBarContainer.stateError=t),t}if(o.commit())return!0;if(i)throw new It.AbortError("Commit failed.");return!1}},n.prototype.commit=function(t,e){void 0===e&&(e=!1);var i=this.focusedIndex;return!!this.isValid(i)&&(this.isEditing()&&(this.editController.commitEditor(!0,!1),this.editController.invalidateEditor()),this.$_commitItem(i.item,t,e))},n.prototype.editorCancel=function(t,e){this._doCellCancel(e)},n.prototype._doCellCancel=function(t){return this._fireEditCanceled(t)},n.prototype.editorCanceled=function(){this.activeTool.resetFocused()},n.prototype._editorStarted=function(t,e){if(this.closePopups(!1),this.edit(e))return!0},n.prototype._editorChange=function(t,e,i){this._fireEditChange(e,i)},n.prototype._editorSearch=function(t,e,i){this._fireEditSearch(e,i)},n.prototype._searchCellButtonClick=function(t,e,i){return this._fireSearchCellButtonClick(e,i)},n.prototype.$_getFieldDefaults=function(t){function e(t,e){for(var i=0;i<t.columnCount;i++){var o=t.getColumn(i);if(o instanceof Dt.DataColumn&&o.dataIndex==e){var n=o.getField();return n&&n.defaultValue}}}for(var i=this.dataSource.fieldCount,o=[],n=0;n<i;n++)o.push(void 0);for(n=0;n<i;n++){var r=e(this,n);r&&(o[n]=r)}return o},n.prototype.$_getColumnDefaults=function(t){for(var e=0,i=this.columnCount;e<i;e++){var o=this.getColumn(e);o instanceof Dt.DataColumn&&null!=o.defaultValue&&(t[o.dataIndex]=o.defaultValue)}},n.prototype.$_getItemDefaults=function(t,e){},n.prototype.$_readDefaultValues=function(t){},n.prototype.$_getInsertDefaults=function(t){var e=this.$_getFieldDefaults(this.itemSource.dataSource);return this.$_getColumnDefaults(e),this.$_getItemDefaults(null,e),this.$_readDefaultValues(e),e},n.prototype._clearColumnErrors=function(){for(var t=this._activeCellLayout.getDataColumns(),e=0,i=t.length;e<i;e++){var o=t[e];o instanceof Dt.DataColumn&&(o.error=null)}},n.prototype._setColumnErrors=function(t){var e=this._validationManager.cellList&&this._validationManager.cellList[t.dataId];if(e)for(var i=this._activeCellLayout.getDataColumns(),o=0,n=i.length;o<n;o++){var r=i[o];if(r instanceof Dt.DataColumn){var s=e[r.dataIndex];s&&(r.error=s.message,r.errorLevel=s.level)}}},n.prototype.sortColumn=function(t,e){t&&(this.sortingOptions.style==lt.SortStyle.EXCLUSIVE?e&&e.shiftKey?this.sortColumnWithStyle(lt.SortStyle.INCLUSIVE,t):this.sortColumnWithStyle(lt.SortStyle.EXCLUSIVE,t):this.sortColumnWithStyle(this.sortingOptions.style,t))},n.prototype.sortColumnWithStyle=function(t,e){if(!e)throw new Error("column is null");if(!(this.isItemEditing(null)||e.dataIndex<0)){var i=this._sortingOptions.textCase;t==lt.SortStyle.EXCLUSIVE?e.sortOrder<0?this.orderBy([e],[lt.SortDirection.ASCENDING],[i]):e.sortDirection==lt.SortDirection.ASCENDING?this.orderBy([e],[lt.SortDirection.DESCENDING],[i]):this.isGroupedColumn(e)&&this.itemSource._groupSorting?this.orderBy([e],[lt.SortDirection.ASCENDING],[i]):this.unsortColumnWithStyle(t,e):t!=lt.SortStyle.INCLUSIVE&&t!=lt.SortStyle.REVERSE||(e.sortOrder<0?this.$$_addSort(e,lt.SortDirection.ASCENDING,i,t==lt.SortStyle.REVERSE):e.sortDirection==lt.SortDirection.ASCENDING?this.$$_addSort(e,lt.SortDirection.DESCENDING,i,t==lt.SortStyle.REVERSE):this.isGroupedColumn(e)&&this.itemSource._groupSorting?this.$$_addSort(e,lt.SortDirection.ASCENDING,i,t==lt.SortStyle.REVERSE):this.unsortColumnWithStyle(t,e))}},n.prototype.orderBy=function(t,e,i){if(!this.isItemEditing(null))if(!t||t.length<1)this._sortItems([],[],[]);else{for(var o=[],n=t.length,r=0;r<n;r++){var s=t[r];o.push(s.dataIndex)}this._sortItems(o,e,i)}},n.prototype.unsortColumnWithStyle=function(t,e){if(!this.isItemEditing()&&e){var i=this.getSortFields(),o=this.getSortDirections(),n=this.getSortCases(),r=i.indexOf(e.dataIndex);r<0||(t==lt.SortStyle.EXCLUSIVE?this.orderBy([],[],[]):t!=lt.SortStyle.INCLUSIVE&&t!=lt.SortStyle.REVERSE||(i.splice(r,1),o.splice(r,1),n.splice(r,1),this._sortItems(i,o,n)))}},n.prototype.$$_addSort=function(t,e,i,o){var n=this.getSortFields(),r=this.getSortDirections(),s=this.getSortCases(),a=t.dataIndex,l=n.indexOf(a);0<=l?(r[l]=e,s[l]=i):o?(n.splice(0,0,a),r.splice(0,0,e),s.splice(0,0,i)):(n.push(a),r.push(e),s.push(i)),this._sortItems(n,r,s)},n.prototype._sortItems=function(i,t,e){var o=i.concat(),n=t?t.concat():[],r=e?e.concat():[];this._fireSorting(o,n)&&this._toastManager.show(this.sortingOptions.toast,!0,function(){var t=this.sortingOptions.keepFocusedRow&&this.focusedIndex?this.focusedIndex.dataRow:-1;if(this._doSortItems(i,n,r),0<=t){var e=kt.CellIndex.temp(this,this.getItemIndexOfRow(t),this.focusedIndex.column);this.setFocusedIndex(e,!0,!0)}}.bind(this))},n.prototype._doPrepareComparer=function(t){for(var e={},i=0;i<t.length;i++){var o=this.columnByField(t[i]);o.sortByLabel&&(e[t[i]]=n(o))}return e;function n(a){var l=a.grid;return function(t,e,i){var o=l.getItemOfRow(e,!0),n=l.getItemOfRow(i,!0),r=mt.DataCell.getText(o,a),s=mt.DataCell.getText(n,a);return r==s?0:null==r?null==s?0:-1:null==s||s<r?1:r<s?-1:0}}},n.prototype._doSortItems=function(t,e,i){},n.prototype.getSortFields=function(){return null},n.prototype.getSortDirections=function(){return null},n.prototype.getSortCases=function(){return null},n.prototype.canFiltering=function(){return this._fireFiltering()},_dp(n,"filterSelecting",{get:function(){return this._filterSelector.opened}}),_dp(n,"filterSelector",{get:function(){return this._filterSelector}}),n.prototype.applyFilters=function(t,e){return!this.isItemEditing(null)&&!!this._fireFiltering()&&(this._toastManager.show(this.filteringOptions.toast,!0,function(){this.$_doApplyFilters(t,e)}.bind(this)),!0)},n.prototype.$_doApplyFilters=function(t,e){var i=this._items.itemCount;this._items.beginFiltering();try{this._filterRunning=!0,this._items.clearAllFilters(),this.$_addFilters()}finally{this._items.endFiltering(t,e),this._filterRunning=!1}i!==this._items.itemCount&&(this.topIndex=0)},n.prototype.$_addFilters=function(){for(var t=this.columnCount,e=0;e<t;e++){var i=this.getColumn(e),o=i.autoFilter?i.autoFilters:i.filters;if(o&&0<o.activeCount)for(var n=0,r=o.count;n<r;n++){var s=o.getItem(n);s.active&&this._items.addFilter(i.dataIndex,s)}}},n.prototype.columnFilterChanged=function(t,e){this._doColumnFiltersChanged(t,e)},n.prototype.canGrouping=function(){return!1},n.prototype.$_layoutRowHover=function(t,e,i){var o=this._layoutManager,n=o.footerBounds.y+o.contentBounds.y,r=this.getBodyView(t.cell);if(r){var s=o.getTableRowIndex(e);if(!(s<0)){s=r.getViewIndex(s);var a=o.getTableItemBounds(s);switch(a.y+=o.contentBounds.y+o.bodyBounds.y,a.bottom>n&&(a.bottom=n),i){case lt.RowMaskType.DATA:a.x=this._fixedContentPane.x,a.right=this._rightContentPane.width?this._rightContentPane.right:this._contentPane.right;break;case lt.RowMaskType.FILL:a.x=0,a.width=this.width;break;case lt.RowMaskType.CELL:var l=r.pointByContainer(0,0),h=r.getCellRect(o,t,!0);a.x=h.x+l.x,a.width=h.width;break;case lt.RowMaskType.ROW:a.x=0,a.right=this._rightContentPane.width?this._rightContentPane.right:this._contentPane.right}this._rowHoverView.setRect(a)}}},n.prototype.$_resetHovering=function(t,e,i){void 0===i&&(i=!1);var o=this.activeTool;if(o instanceof Pe.GridSelectionTool&&this.canHovering){var n=this.container.getTableCell(o.mouseEventTarget),r=this.getCellType(n),s=!1,a=!1;if("data"===r){var l=this.getBodyView(n).bodyCellByCell(n);this.$_setHoveredCell(l,e,i),o.$_setHoveredCell(l,t,e),s=!0}else if("header"===r)l=this.getHeaderView(n).tableCellByCell(n),o.$_setHoveredHeaderCell(l,t,e),a=!0;else if("state"===r&&this._rowBarContainer.stateError&&this._stateBar.errorVisible&&this.editOptions.hintOnError){var h=this._rowBarContainer.rowOf(n);this.isItemEditing(this.getItem(h))&&o.$_showStateError(this._rowBarContainer.stateError.message)}return s||a||o._hideTooltip(),s||this.$_setHoveredCell(null,e,!1),!0}},n.prototype.$_setHoveredCell=function(t,e,i){void 0===i&&(i=!1),!i&&t===this._hoveredCell||(this._hoveredCell&&this._hoveredCell.cell&&this.getBodyView(this._hoveredCell.cell).$_mouseEnteredChanged(this,this._hoveredCell,!1),this._hoveredCell=t,this._hoveredCell&&this.getBodyView(this._hoveredCell.cell).$_mouseEnteredChanged(this,this._hoveredCell,!0),this._doHoveredCellChanged(t)),!i&&e==this._hoveredY||(this._hoveredY=e,this.$_resetRowHover())},n.prototype.$_resetRowHover=function(){var t=this._displayOptions.rowHoverType;this._hoveredCell&&t&&t!=lt.RowMaskType.NONE?(this._rowHoverView.visible=!0,this.$_layoutRowHover(this._hoveredCell,this._hoveredY,t)):this._rowHoverView.visible=!1},n.prototype._doHoveredCellChanged=function(t){},n.prototype._doCellButtonClicked=function(t){this._fireCellButtonClicked(t)},n.prototype._syncHeadCheck=function(t,e){var i=this.checkBar;if(i.syncHeadCheck){this._needSyncHeadCheck=!1;var o=i.showGroup;if(!1===e)this._headView.allChecked=e;else if(null==t)this._headView.allChecked=e;else{var n=!0;if(i.visibleOnly){for(var r=0,s=this._items.itemCount;r<s;r++)if(((l=this._items.getItem(r)).isDataRow||o)&&l.checkable&&!l.checked){n=!1;break}}else{var a=this.getAllItems();for(r=0,s=a.length;r<s;r++){var l;if(((l=a[r]).isDataRow||o)&&l.checkable&&!l.checked){n=!1;break}}}this._headView.allChecked=n}}},n.prototype.getRowHeight=function(t){var e=this.getItem(t);return e?e.height:NaN},n.prototype.setRowHeight=function(t,e,i){void 0===i&&(i=!0);var o=this.getItem(t);o&&(this._items.setRowHeight(o,e,!0),i&&this.refreshView())},n.prototype.clearRowHeights=function(t){void 0===t&&(t=!1),this._items.clearRowHeights(t)&&this.refreshView()},n.prototype.$_rendererChanged=function(t){var e=this._layoutManager.getBodyView(t);e&&e.$_rendererChanged(t)},n.prototype.$_clearDropData=function(t){var e=this.getRowsOfItems(t,!1);0<e.length&&this.dataSource.removeRows(e)},n.prototype.$_dropData=function(t,e,i){var o=this.dataDropOptions,n=o.callback;if(n)n(t.handler,e,this.handler,i);else if(0<=i){var r=t.getRowsOfItems(e),s=void 0,a=o.fieldMapCallback;if(a&&(s=a(t.handler,e,this.handler,i)),s=s||o.fieldMap,i<this.itemCount){var l=this.getRowOfItem(i);0<=l&&this.dataSource.insertRowsFrom(t.dataSource,s,r,l)}else this.dataSource.appendRowsFrom(t.dataSource,s,r)}o.dropMode==Ze.DataDropMode.MOVE&&t.$_clearDropData(e)},n.prototype.$_checkFocusedLayout=function(){if(this._focusedIndex){var t=this.getBodyCellAt(this._focusedIndex);t&&t.spanned&&(t=this.getBodyView(t.cell).getCheckedLayout(t),this._focusedIndex.layout=t&&t.layout)}},n.prototype.$_isBottomCell=function(t){var e=this.getBodyCellAt(t);if(e)return this.getBodyView(e.cell).isBottomCell(e)},n.prototype.$_getLowerOfCell=function(t){var e=this.getBodyCellAt(t);if(e)return(e=this.getBodyView(e.cell).getLowerOf(e))&&e.layout.source},n.prototype.$_isTopCell=function(t){var e=this.getBodyCellAt(t);if(e)return this.getBodyView(e.cell).isTopCell(e)},n.prototype.$_getUpperOfCell=function(t){var e=this.getBodyCellAt(t);if(e)return(e=this.getBodyView(e.cell).getUpperOf(e))&&e.layout.source},n.prototype._checkFieldIndex=function(t){this._items.setCheckFieldIndex(t)},n.prototype._fireViewActivated=function(t){this.fireEvent(n.VIEW_ACTIVATED,t)},n.prototype._fireCurrentChanging=function(t,e){return this.fireConfirmEvent(n.CURRENT_CHANGING,t,e)},n.prototype._fireCurrentChanged=function(t){this.fireEvent(n.CURRENT_CHANGED,t)},n.prototype._fireCurrentRowChanged=function(t,e){this.fireEvent(n.CURRENT_ROW_CHANGED,t,e)},n.prototype._fireValidateCell=function(t,e,i){this.fireEvent(n.VALIDATE_CELL,t,e,i)},n.prototype._fireValidateRow=function(t,e,i){this.fireEvent(n.VALIDATE_ROW,t,e,i)},n.prototype._fireValidationFail=function(t,e,i){return this.fireObjectEvent(n.VALIDATION_FAIL,t,e,i)},n.prototype._fireCellClicked=function(t){this.fireEvent(n.CELL_CLICKED,t)},n.prototype._fireCellDblClicked=function(t){this.fireEvent(n.CELL_DBL_CLICKED,t)},n.prototype._fireCellItemClicked=function(t,e){return this.fireConfirmEvent(n.CELL_ITEM_CLICKED,t,e)},n.prototype._fireColumnCheckedChanged=function(t){this.fireEvent(n.COLUMN_CHECKED_CHANGED,t,t.checked)},n.prototype._fireMenuItemClicked=function(t,e){this.fireEvent(n.MENU_ITEM_CLICKED,t,e)},n.prototype._fireContextMenuPopup=function(t,e,i){return this.fireObjectEvent(n.CONTEXT_MENU_POPUP,t,e,i)},n.prototype._fireContextMenuItemClicked=function(t,e){this.fireEvent(n.CONTEXT_MENU_ITEM_CLICKED,t,e)},n.prototype._fireCellButtonClicked=function(t){this.fireEvent(n.CELL_BUTTON_CLICKED,t)},n.prototype._fireEditButtonClicked=function(t){this.fireEvent(n.EDIT_BUTTON_CLICKED,t)},n.prototype._fireScrollToBottom=function(){this.fireEvent(n.SCROLL_TO_BOTTOM)},n.prototype._fireTopIndexChanged=function(t){this.fireEvent(n.TOP_INDEX_CHANGED,t)},n.prototype._fireDataCellClicked=function(t){this.fireEvent(n.DATA_CELL_CLICKED,t)},n.prototype._fireDataCellDblClicked=function(t){this.fireEvent(n.DATA_CELL_DBL_CLICKED,t)},n.prototype._fireRowsDeleting=function(t){return this.fireConfirmEvent(n.ROWS_DELETING,t)},n.prototype._fireRowInserting=function(t,e){return this.fireConfirmEvent(n.ROW_INSERTING,t,e)},n.prototype._fireItemCommit=function(t,e){this.fireEvent(n.ITEM_COMMIT)},n.prototype._fireSelectionChanged=function(){return this.fireEvent(n.SELECTION_CHANGED)},n.prototype._fireSelectionAdded=function(t){return this.fireEvent(n.SELECTION_ADDED,t)},n.prototype._fireSelectionRemoved=function(){return this.fireEvent(n.SELECTION_REMOVED)},n.prototype._fireSelectionCleared=function(){return this.fireEvent(n.SELECTION_CLEARED)},n.prototype._fireSelectionResized=function(t){return this.fireEvent(n.SELECTION_RESIZED)},n.prototype._fireSelectionEnded=function(t){return this.fireEvent(n.SELECTION_ENDED,t)},n.prototype._fireUpdateStarted=function(t,e){this.fireEvent(n.UPDATE_STARTED,t)},n.prototype._fireInsertStarted=function(t,e){this.fireEvent(n.INSERT_STARTED,t,e)},n.prototype._fireShowEditor=function(t,e,i){return this.fireConfirmEvent(n.SHOW_EDITOR,t,e,i)},n.prototype._fireHideEditor=function(t){return this._doEditorActivated(t,!1),this.fireEvent(n.HIDE_EDITOR,t)},n.prototype._fireEditChange=function(t,e){this.fireEvent(n.EDIT_CHANGE,t,e)},n.prototype._fireGetEditValue=function(t,e){this.fireEvent(n.GET_EDIT_VALUE,t,e)},n.prototype._fireEditCommit=function(t,e,i){return this.fireConfirmEvent(n.EDIT_COMMIT,t,e,i)},n.prototype._fireEditCanceled=function(t){this.fireEvent(n.EDIT_CANCELED,t)},n.prototype._fireItemEditCancel=function(t){return this.fireConfirmEvent(n.ITEM_EDIT_CANCEL,t)},n.prototype._fireItemEditCanceled=function(t){this.fireEvent(n.ITEM_EDIT_CANCELED,t)},n.prototype._fireEditSearch=function(t,e){this.fireEvent(n.EDIT_SEARCH,t,e)},n.prototype._fireSearchCellButtonClick=function(t,e){return this.fireObjectEvent(n.SEARCH_BUTTON_CLICK,t,e)},n.prototype._fireCellEdited=function(t,e){this.fireEvent(n.CELL_EDITED,t,e)},n.prototype._fireEditRowChanged=function(t,e,i,o){this.fireEvent(n.EDIT_ROW_CHANGED,t,e,i,o)},n.prototype._fireEditItemPasted=function(t,e,i,o){this.fireEvent(n.EDIT_ROW_PASTED,t,e,i,o)},n.prototype._fireItemsPasted=function(t){this.fireEvent(n.ROWS_PASTED,t)},n.prototype._fireCellPasting=function(t,e){return this.fireObjectEvent(n.CELL_PASTING,t,e)},n.prototype._fireItemChecked=function(t){this.fireEvent(n.ITEM_CHECKED,t,t.checked)},n.prototype._fireItemsChecked=function(t,e){this.fireEvent(n.ITEMS_CHECKED,t,e)},n.prototype._fireItemAllChecked=function(t){this.fireEvent(n.ITEM_ALL_CHECKED,t)},n.prototype._fireErrorClicked=function(t,e){this.fireEvent(n.ERROR_CLICKED,e)},n.prototype._fireSorting=function(t,e){return this.fireConfirmEvent(n.SORTING,t,e)},n.prototype._fireFiltering=function(){return this.fireConfirmEvent(n.FILTERING)},n.prototype._fireKeyDown=function(t){return this.fireConfirmEvent(n.KEY_DOWN,t)},n.prototype._fireKeyPress=function(t){this.fireEvent(n.KEY_PRESS,t)},n.prototype._fireKeyUp=function(t){this.fireEvent(n.KEY_UP,t)},n.prototype._fireShowTooltip=function(t,e){return this.fireObjectEvent(n.SHOW_TOOLTIP,t,e)},n.prototype._fireShowHeaderTooltip=function(t,e){return this.fireObjectEvent(n.SHOW_HEADER_TOOLTIP,t,e)},n.prototype._fireColumnPropertyChanged=function(t,e,i,o){this.fireEvent(n.COLUMN_PROPERTY_CHANGED,t,e,i,o)},n.prototype._fireGridActivated=function(){return this.fireEvent(n.GRID_ACTIVATED,this)},n.prototype._fireCopy=function(t,e){return this.fireConfirmEvent(n.COPY,t,e)},n.prototype._firePaste=function(t,e){return this.fireConfirmEvent(n.PASTE,t,e)},n.prototype._firePasted=function(){this.fireEvent(n.PASTED)},n.prototype._fireCommandStackChanged=function(t,e){this.fireEvent(n.COMMAND_STACK_CHANGED,t,e)},n.prototype.onPopupMenuManagerMenuItemClicked=function(t,e,i){this._fireMenuItemClicked(e,i)},n.prototype.onScrollBarScrolled=function(t,e,i,o){var n,r,s,a=this.displayOptions,l=this.fixedOptions,h=(this.layoutManager,a.scrollMessageCallback),d=e===de.ScrollEventType.SCROLL_END;if(t.vertical){var u=-1;switch(e){case de.ScrollEventType.LINE:return void this.scrollRow(i);case de.ScrollEventType.PAGE:u=this.topIndex+i*t._page;break;case de.ScrollEventType.THUMB_TRACK:var _=a.scrollDuration;a.liveScroll||0<this._scrolledTime&&ne.Utils.getTimer()-this._scrolledTime>_?(u=o,this._scrolledTime=0):(this._scrollTipView||(this._scrollTipView=new de.ScrollTipView(this.container)),this._vscrollBar.tipView=this._scrollTipView,this._vscrollBar.setPosition(o,!0),r=this._vscrollBar.pos+l.rowCount,n=h?h(this.handler,t.vertical,r):String(r+1),this._vscrollBar.setText(n),0<_&&0==this._scrolledTime&&(this._scrolledTime=ne.Utils.getTimer()));break;case de.ScrollEventType.THUMB_END:this._scrollTipView&&this._scrollTipView.hide(),u=o,d=!(this._vscrollBar.tipView=null);break;default:u=o}0<=u&&(this.topIndex=u)}else{var c=-1;switch(e){case de.ScrollEventType.LINE:c=this.leftPos+8*i;break;case de.ScrollEventType.PAGE:c=0<i?this._layoutManager.scrollToNextCell():this._layoutManager.scrollToPrevCell();break;case de.ScrollEventType.THUMB_TRACK:_=a.hscrollDuration,a.liveScroll||0<this._scrolledTime&&ne.Utils.getTimer()-this._scrolledTime>_?(c=o,this._scrolledTime=0):(this._scrollTipView||(this._scrollTipView=new de.ScrollTipView(this.container)),this._hscrollBar.tipView=this._scrollTipView,-1<(s=this._layoutManager.getPositionToVIndex(o))&&(n=h?h(this.handler,t.vertical,s):this.getVisibleLayout(s).getDataColumn().header.displayText,this._hscrollBar.setText(n)),this._hscrollBar.setPosition(o,!0),0<_&&0==this._scrolledTime&&(this._scrolledTime=ne.Utils.getTimer()));break;case de.ScrollEventType.THUMB_END:this._scrollTipView&&this._scrollTipView.hide(),c=o,d=!(this._hscrollBar.tipView=null);break;default:c=o}0<=c&&(this.leftPos=c)}d&&!ne.Utils.isMobile()&&this.setFocus()},n.prototype.$_checkFocusedRow=function(){this.focusedRow>=this.itemCount&&this.clearFocusedIndex()},n.prototype.onItemProviderReset=function(t){this.hideEditor(),this._dataChanged=!0,this.clearRowHeights(),this._populateMerges(),this.$_checkFocusedRow(),this.resetGrid(),this._syncHeadCheck([]),this._shadowDom&&t&&this._shadowDom.setItemProvider(t),this._editorLender&&this._editorLender.itemsChanged(this)},n.prototype.onItemProviderRefresh=function(t){this.hideEditor(),this._dataChanged=!0,this._resetColumnSortStates(),this.clearRowHeights(),this._populateMerges(),this.$_checkFocusedRow(),this.refreshView(),this._needSyncHeadCheck&&this._syncHeadCheck([]),this._shadowDom&&t&&this._shadowDom.setItemProvider(t),this._editorLender&&this._editorLender.itemsChanged(this)},n.prototype.onItemProviderRefreshClient=function(t){this.hideEditor(),this._dataChanged=!0,this._populateMerges(),this.$_checkFocusedRow(),this.refreshView(),this._needSyncHeadCheck&&this._syncHeadCheck([]),this._shadowDom&&t&&this._shadowDom.setItemProvider(t)},n.prototype.onItemProviderItemInserted=function(t,e){if(this.hideEditor(),this._dataChanged=!0,this._needSyncHeadCheck=!0,this.clearRowHeights(),this._populateMerges(),this.refreshView(),t.dataSource.undoing||t.dataSource.redoing){var i=this._focusedIndex.clone();i.itemIndex=e.index,this.setFocusedIndex(i,!0,!0)}this._editorLender&&(this._editorLender.itemInserted(this,e),this._editorLender.itemsChanged(this))},n.prototype.onItemProviderItemDeleted=function(t,e){if(this.hideEditor(),this._dataChanged=!0,this._needSyncHeadCheck=!0,this.clearRowHeights(),this._populateMerges(),this.$_checkFocusedRow(),this.refreshView(),t.dataSource.undoing||t.dataSource.redoing){var i=this._focusedIndex.clone();i.itemIndex=e.index,this.setFocusedIndex(i,!0,!0)}this._editorLender&&this._editorLender.itemsChanged(this)},n.prototype.onItemProviderItemUpdated=function(t,e){if(this.hideEditor(),this._dataChanged=!0,this._updateRows?this._updateRows.push(e.dataId):this._updateRows=[e.dataId],this.clearRowHeights(),this._populateMerges(),this.refreshView(),t.dataSource.undoing||t.dataSource.redoing){var i=this._focusedIndex.clone();i.itemIndex=e.index,this.setFocusedIndex(i,!0,!0)}this._editorLender&&this._editorLender.itemsChanged(this)},n.prototype.onItemProviderCheckableChanged=function(t,e){this.refreshView(),this._syncHeadCheck([])},n.prototype.onItemProviderItemChecked=function(t,e){this.refreshView(),this._fireItemChecked(e)},n.prototype.onItemProviderItemsChecked=function(t,e,i){this.refreshView(),this._fireItemsChecked(e,i)},n.prototype.onItemProviderItemAllChecked=function(t,e){this.refreshView(),this._fireItemAllChecked(e)},n.prototype.onItemProviderItemCheckChanged=function(t,e,i){this._syncHeadCheck(e,i),this._editorLender&&this._editorLender.itemsChanged(this)},n.prototype.onItemProviderRowStateChanged=function(t,e){this.refreshView()},n.prototype.onItemProviderRowStatesChanged=function(t,e){this.refreshView()},n.prototype.onItemProviderRowStatesCleared=function(t){this.refreshView()},n.prototype.onItemProviderSort=function(t,e,i){this.refreshView()},n.prototype.onItemProviderSorted=function(t){this.refreshView(),this.fireEvent(n.SORTING_CHANGED),this._shadowDom&&t&&this._shadowDom.reset()},n.prototype.onItemProviderFilterAdded=function(t){},n.prototype.onItemProviderFilterRemoved=function(t){},n.prototype.onItemProviderFilterCleared=function(t){},n.prototype.onItemProviderFilterAllCleared=function(t){},n.prototype.onItemProviderFiltered=function(t,e,i){this._populateMerges(),this.$_checkFocusedRow(),this.refreshView(),this._loading||this._syncHeadCheck([]),this.fireEvent(n.FILTERING_CHANGED,e,i),this._shadowDom&&t&&this._shadowDom.reset()},n.prototype.onItemProviderCommandStackChanged=function(t,e,i){this._fireCommandStackChanged(e,i)},n.prototype.$_focusEditItem=function(t){if(null==this._editorLender){var e=this.getIndex(t.index,this.focusedIndex?this.focusedIndex.column:null);!e.column&&0<this.visibleLayoutCount&&(e._layout=this.getVisibleLayout(0)),this.setFocusedIndex(e,!0),this.makeCellVisible(this.focusedIndex)}},n.prototype.$_beforeEditing=function(t,e){},n.prototype.onItemEditUpdateStarted=function(t,e){this.$_beforeEditing(t,e),this._clearColumnErrors(),this._setColumnErrors(e),this.refreshView(),this._fireUpdateStarted(e,!1),this._editorLender&&this._editorLender.itemUpdateStarted(this,e)},n.prototype.onItemEditAppendStarted=function(t,e){this.$_beforeEditing(t,e),this.hideEditor(),this._clearColumnErrors(),this._populateMerges(),this.refreshView(),this.$_focusEditItem(e),this.requestPrepareEditor(),this._fireInsertStarted(e,!0),this._editorLender&&this._editorLender.itemAppendStarted(this,e)},n.prototype.onItemEditInsertStarted=function(t,e){this.$_beforeEditing(t,e),this.hideEditor(),this._clearColumnErrors(),this._populateMerges(),this.refreshView(),this.$_focusEditItem(e),this.requestPrepareEditor(),this._fireInsertStarted(e,!1),this._editorLender&&this._editorLender.itemInsertStarted(this,e)},n.prototype.onItemEditCellEdited=function(t,e,i){this.refreshView(),this._cellUpdateEventLock||this._fireCellEdited(e,i)},n.prototype.onItemEditCellUpdated=function(t,e,i,o,n){this.refreshView(),this._cellUpdateEventLock||this._fireEditRowChanged(e,i,o,n)},n.prototype.onItemEditCommitting=function(t,e){},n.prototype.onItemEditCommitted=function(t,e){this._appendDummy(),this.hideEditor(),this.refreshView(),this._editorLender&&this._editorLender.itemCommited(this,e)},n.prototype.onItemEditCanceled=function(t){this._appendDummy(),this.hideEditor(),this._populateMerges(),this.refreshView(),this._fireItemEditCanceled(t._editingItem),this._editorLender&&this._editorLender.itemCanceled(this)},n.prototype.onItemEditCommitRequest=function(t){this.commit(!1)},n.prototype.onItemEditCancelReuqest=function(t){this.cancel()},n.prototype.onLookupSourceProviderChanged=function(t){this._resetColumnIndices(),this.refreshView()},n.prototype.onSelectionChanged=function(t){this._refreshSideViews(),this._fireSelectionChanged()},n.prototype.onSelectionAdded=function(t,e){this._addSelectionView(e),this._layoutSelectionViews(),this._fireSelectionAdded(e)},n.prototype.onSelectionRemoved=function(t){this._fireSelectionRemoved()},n.prototype.onSelectionCleared=function(t){this._clearSelectionViews(),this._fireSelectionCleared()},n.prototype.onSelectionResized=function(t,e){this._layoutSelectionViews(),this._fireSelectionResized(e)},n.prototype.onSelectionEnded=function(t,e){this._fireSelectionEnded(e)},n.prototype.onMenuItemClick=function(t,e){this._fireContextMenuItemClicked(t,e)},n.VIEW_ACTIVATED="onGridBaseViewActivated",n.CURRENT_CHANGING="onGridBaseCurrentChanging",n.CURRENT_CHANGED="onGridBaseCurrentChanged",n.CURRENT_ROW_CHANGED="onGridBaseCurrentRowChanged",n.VALIDATE_CELL="onGridBaseValidateCell",n.VALIDATE_ROW="onGridBaseValidateRow",n.VALIDATION_FAIL="onGridBaseValidationFail",n.CELL_CLICKED="onGridBaseCellClicked",n.CELL_DBL_CLICKED="onGridBaseCellDblClicked",n.CELL_ITEM_CLICKED="onGridBaseCellItemClicked",n.COLUMN_CHECKED_CHANGED="onGridBaseColumnCheckedChanged",n.MENU_ITEM_CLICKED="onGridBaseMenuItemClicked",n.CONTEXT_MENU_POPUP="onGridBaseContextMenuPopup",n.CONTEXT_MENU_ITEM_CLICKED="onGridBaseContextMenuItemClicked",n.CELL_BUTTON_CLICKED="onGridBaseCellButtonClicked",n.EDIT_BUTTON_CLICKED="onGridBaseEditButtonClicked",n.SCROLL_TO_BOTTOM="onGridBaseScrollToBottom",n.TOP_INDEX_CHANGED="onGridBaseTopIndexChanged",n.DATA_CELL_CLICKED="onGridBaseDataCellClicked",n.DATA_CELL_DBL_CLICKED="onGridBaseDataCellDblClicked",n.ROWS_DELETING="onGridBaseRowsDeleting",n.ROW_INSERTING="onGridBaseRowInserting",n.ITEM_COMMIT="onGridBaseItemCommit",n.SELECTION_ADDED="onGridBaseSelectionAdded",n.SELECTION_CHANGED="onGridBaseSelectionChanged",n.SELECTION_REMOVED="onGridBaseSelectionRemoved",n.SELECTION_CLEARED="onGridBaseSelectionCleared",n.SELECTION_RESIZED="onGridBaseSelectionResized",n.SELECTION_ENDED="onGridBaseSelectionEnded",n.INSERT_STARTED="onGridBaseInsertStarted",n.UPDATE_STARTED="onGridBaseUpdateStarted",n.SHOW_EDITOR="onGridBaseShowEditor",n.HIDE_EDITOR="onGridBaseHideEditor",n.EDIT_CHANGE="onGridBaseEditChange",n.GET_EDIT_VALUE="onGridBaseGetEditValue",n.EDIT_COMMIT="onGridBaseEditCommit",n.EDIT_CANCELED="onGridBaseEditCanceled",n.ITEM_EDIT_CANCELED="onGridBaseItemEditCanceled",n.ITEM_EDIT_CANCEL="onGridBaseItemEditCancel",n.EDIT_SEARCH="onGridBaseEditSearch",n.SEARCH_BUTTON_CLICK="onGridBaseSearchCellButtonClick",n.CELL_EDITED="onGridBaseCellEdited",n.EDIT_ROW_CHANGED="onGridBaseEditRowChanged",n.EDIT_ROW_PASTED="onGridBaseEditRowPasted",n.ROWS_PASTED="onGridBaseRowsPasted",n.CELL_PASTING="onGridBaseCellPasting",n.ITEM_CHECKED="onGridBaseItemChecked",n.ITEMS_CHECKED="onGridBaseItemsChecked",n.ITEM_ALL_CHECKED="onGridBaseItemAllChecked",n.ERROR_CLICKED="onGridBaseErrorClicked",n.SORTING="onGridBaseSorting",n.SORTING_CHANGED="onGridBaseSortingChanged",n.FILTERING="onGridBaseFiltering",n.FILTERING_CHANGED="onGridBaseFilteringChanged",n.KEY_PRESS="onGridBaseKeyPress",n.KEY_DOWN="onGridBaseKeyDown",n.KEY_UP="onGridBaseKeyUp",n.SHOW_TOOLTIP="onGridBaseShowTooltip",n.SHOW_HEADER_TOOLTIP="onGridBaseShowHeaderTooltip",n.COLUMN_PROPERTY_CHANGED="onGridBaseColumnPropertyChanged",n.GRID_ACTIVATED="onGridBaseGridActivated",n.COPY="onGridBaseCopy",n.PASTE="onGridBasePaste",n.PASTED="onGridBasePasted",n.COMMAND_STACK_CHANGED="onGridBaseCommandStackChanged",n);function n(t,e){void 0===e&&(e=!1);var i=a.call(this,t.doc,!0)||this;i._debugging=!1,i._scrollBarWidth=16,i._scrollBarHeight=16,i._filterRunning=!1,i._loading=!0,i._userMode=!1,i._userModeError=null,i._gridObjects=[],i._tableViews={},i._columnMap={},i._columnLayouts=new Dt.ColumnLayoutCollection,i._columnLock=0,i._columnsDirty=!1,i._columnSummaryRuntime=new Mt.ColumnSummaryRuntime,i._columnValidationRuntime=new It.DataCellValidationRuntime,i._rowValidationRuntime=new It.DataRowValidationRuntime,i._layouted=!1,i._resetting=!1,i._needMerge=!1,i._leftPos=0,i._horzScrolled=!1,i._topIndex=0,i._prevTop=0,i._prevLast=-1,i._updateLock=!1,i._hoveredY=-1,i._focusing=!1,i._dataChanged=!1,i._validations=new It.EditValidationCollection,i.$_editFocused=!1,i.$_showFocusCell=!1,i._needSyncHeadCheck=!1,i._cellUpdateEventLock=!1,i._currentRowId=-1,i._currentRow=-1,i._scrolledTime=0,i.$_fixedColCount=0,i.$_rfixedColCount=0,i._cellLayoutDirty=!1,i._currentRatio=1,i._zoomRatio=1,i._chkCount=0;var o=t.doc;if(!Ye.lk())return i;i._container=t,i._addGridObject(i._header=new Ft.GridHeader(i)),i._addGridObject(i._footers=new Vt.GridFooterCollection(i)),i._addGridObject(i._headerSummaries=new Ge.HeaderSummaryCollection(i)),i._addGridObject(i._rowIndicator=new Nt.RowIndicator(i)),i._addGridObject(i._stateBar=new Pt.StateBar(i)),i._addGridObject(i._checkBar=new Bt.CheckBar(i)),i._addGridObject(i._body=new At.GridBody(i)),i._rootElement=new Ut.LayerElement(o,"grid root view"),i.addChild(i._rootElement),i._debugView=new Qe.DebugLayer(i),i._emptyView=new qt.EmptyGridElement(o),i.addChild(i._emptyView),i._contentPane=new me.DataContentPane(o,"contentPane"),i.addElement(i._contentPane),i._rightContentPane=new me.RightContentPane(o,"rightContentPane"),i.addElement(i._rightContentPane),i._fixedContentPane=new me.FixedContentPane(o,"fixedContentPane"),i.addElement(i._fixedContentPane),i._doContentPanesCreated(),i._leftContentPane=new me.LeftContentPane(o,"leftContentPane"),i.addElement(i._leftContentPane),i._sideContentPane=i._createSidePane(),i._sideContentPane&&i.addElement(i._sideContentPane),i._topContentPane=new me.ContentPane(o,"topContentPane"),i.addElement(i._topContentPane),i._bodyView=i._createBodyView(i._body),i._fixedBodyView=i._createFixedBodyView(i._body),i._rightBodyView=i._createRightBodyView(i._body),i._mergeView=new Ce.ColumnMergeElement(i._bodyView),i._fixedMergeView=new Ce.ColumnMergeElement(i._fixedBodyView),i._rightMergeView=new Ce.ColumnMergeElement(i._rightBodyView),i._headerView=new Xt.HeaderElement(o,i._header),i._fixedHeaderView=new Xt.FixedHeaderElement(o,i._header),i._rightHeaderView=new Xt.RightHeaderElement(o,i._header),i._headerSummaryView=new Ue.HeaderSummaryElement(o,i._headerSummaries),i._fixedHeaderSummaryView=new Ue.FixedHeaderSummaryElement(o,i._headerSummaries),i._rightHeaderSummaryView=new Ue.RightHeaderSummaryElement(o,i._headerSummaries),i._footerView=new se.FooterElement(o,i.footers),i._fixedFooterView=new se.FixedFooterElement(o,i.footers),i._rightFooterView=new se.RightFooterElement(o,i.footers),i._rowBarContainer=new Ne.RowBarContainer(i),i._headView=new _e.GridHeadElement(i),i._sumView=new We.GridSumElement(o),i._footView=new ce.GridFootElement(o);for(var n=[i._rowBarContainer,i._bodyView,i._fixedBodyView,i._rightBodyView,i._headerView,i._fixedHeaderView,i._rightHeaderView,i._headerSummaryView,i._fixedHeaderSummaryView,i._rightHeaderSummaryView,i._footerView,i._fixedFooterView,i._rightFooterView,i._headView,i._sumView,i._footView],r=n.length-1;0<=r;r--){var s=n[r];i._tableViews[s.$_hash]=s}return i._contentPane.addChild(i._bodyView),i._contentPane.addChild(i._mergeView),i._contentPane.addChild(i._footerView),i._contentPane.addChild(i._headerSummaryView),i._contentPane.addChild(i._headerView),i._fixedContentPane.addChild(i._fixedBodyView),i._fixedContentPane.addChild(i._fixedMergeView),i._fixedContentPane.addChild(i._fixedFooterView),i._fixedContentPane.addChild(i._fixedHeaderSummaryView),i._fixedContentPane.addChild(i._fixedHeaderView),i._rightContentPane.addChild(i._rightBodyView),i._rightContentPane.addChild(i._rightMergeView),i._rightContentPane.addChild(i._rightFooterView),i._rightContentPane.addChild(i._rightHeaderSummaryView),i._rightContentPane.addChild(i._rightHeaderView),i._leftContentPane.addChild(i._rowBarContainer),i._leftContentPane.addChild(i._footView),i._leftContentPane.addChild(i._sumView),i._leftContentPane.addChild(i._headView),i._doCreateOtherElements(),i._selectionLayer=i._createSelectionLayer(),i.addElement(i._selectionLayer),i._feedbackLayer=new Ut.LayerElement(o,"feedbackLayer"),i.addElement(i._feedbackLayer),i._rowHoverView=new Pe.RowHoverView(o),i.addFeedbackElement(i._rowHoverView),i._hscrollBar=new de.ScrollBar(t,!1),i._vscrollBar=new de.ScrollBar(t,!0),i._scrollEdge=new de.ScrollEdge(o),i.addElement(i._hscrollBar),i.addElement(i._vscrollBar),i.addElement(i._scrollEdge),i._hscrollBar.addListener(i),i._vscrollBar.addListener(i),i._selections=new Wt.SelectionManager(i),i._selections.addListener(i),i._fixedOptions=new Ht.FixedOptions(i),i._displayOptions=new zt.DisplayOptions(i),i._formatOptions=new pe.FormatOptions(i),i._editOptions=new we.EditOptions(i),i._editorOptions=new we.EditorOptions(i),i._copyOptions=new we.CopyOptions(i),i._pasteOptions=new we.PasteOptions(i),i._dataDropOptions=new Ze.DataDropOptions(i),i._sortingOptions=new ge.SortingOptions(i),i._filteringOptions=new ze.FilteringOptions(i),i._shadowDomOptions=new ii.ShadowDomOptions(i),i._mobileOptions=new we.MobileOptions(i),i._initStyles(),i._columns=new Lt.ColumnCollection(i),i._activeCellLayout=i._defaultCellLayout=new Tt.DefaultCellLayout(i),i._delegate=i._createDelegate(),i._layoutManager=i._createLayoutManager(),i._editController=i._createEditController(),i._validationManager=new It.ValidationManager(i),i._lookupProvider=new Ae.LocalLookupSourceProvider,i._lookupProvider.addListener(i),i._clipboardManager=new $e.ClipboardManager(i),i._progressManager=new Je.ProgressManager(i._container._containerDom),i._popupMenuManager=new He.PopupMenuManager(i._container),i._popupMenuManager.addListener(i),i._tooltipManager=new Ee.TooltipManager(i),i._filterSelector=new qe.FilterSelector(i._container,i._filteringOptions,i),i._toastManager=new fe.ToastManager(i),i._currentIndex=new kt.CellIndex(i),i._editorIndex=new kt.CellIndex(i),i._focusedIndex=new kt.CellIndex(i),e&&(i._shadowDom=new ii.ShadowDom(i,i._shadowDomOptions)),i}e.GridBase=i});t(oi);oi.GridBase;var ni=e(function(t,i){Object.defineProperty(i,"__esModule",{value:!0});var o,r,e,s,n,a=(o=re.Base,oe.__extends(l,o),l.prototype._doDispose=function(){this._styles=null,o.prototype._doDispose.call(this)},_dp(l,"cssStyle",{get:function(){return this._styles}}),l);function l(t){var e=o.call(this)||this;return e._styles=null,e.message="",e.visible=!0,e.spaceTop=0,e.spaceBottom=0,e.height=-1,t&&e.extend(t),e._styles=t&&t.styles?t.styles:null,e}i.DocumentTitle=a,i.VIS_DEFAULT="default",i.VIS_HIDDEN="hidden",i.VIS_VISIBLE="visible",i.INDICATOR_DEFAULT="default",i.INDICATOR_ITEM="item",i.INDICATOR_ROW="row",i.PIXELS_PER_CHAR=7,(e=r=i.ExportType||(i.ExportType={})).EXCEL="excel",e.CSV="csv",(n=s=i.ExportTarget||(i.ExportTarget={})).LOCAL="local",n.TARGET="target",n.STREAM="stream";var h,d=(h=re.Base,oe.__extends(u,h),_dp(u,"fileName",{get:function(){if(this._fileName){if(this._fileName.indexOf(".")<0){var t=this.type===r.CSV?".csv":".xlsx";return this._fileName+t}return this._fileName}return this.type===r.CSV?"realgrid.csv":"realgrid.xlsx"},set:function(t){t!=this._fileName&&(this._fileName=t?t.trim():null)}}),_dp(u,"datetimeFormat",{get:function(){return this._datetimeFormat},set:function(t){t!=this._datetimeFormat&&(this._datetimeFormat=t)&&(this._datetimeWritter=G.DateTimeWriter.getFormatter(t))}}),_dp(u,"booleanFormat",{get:function(){return this._booleanFormat},set:function(t){t!=this._booleanFormat&&(this._booleanFormat=t,this._booleanFormatter=t?U.BooleanFormatter.getFormatter(t):null)}}),_dp(u,"numberFormat",{get:function(){return this._numberFormat},set:function(t){t!=this._numberFormat&&(this._numberFormat=t,this._numberFormatter=t?W.DecimalFormatter.getFormatter(t):null)}}),_dp(u,"booleanFormatter",{get:function(){return this._booleanFormatter}}),_dp(u,"datetimeWriter",{get:function(){return this._datetimeWritter}}),_dp(u,"numberFormatter",{get:function(){return this._numberFormatter}}),u);function u(t){var e=h.call(this)||this;return e._booleanFormatter=null,e._numberFormatter=null,e._datetimeWritter=null,e.type=r.EXCEL,e.target=s.LOCAL,e.url=void 0,e.nullDateText="",e.datetimeCallback=null,e.numberCallback=null,e.booleanCallback=null,e.objectCallback=null,e.textCallback=null,e.start=0,e.count=-1,e.done=null,e.showProgress=!1,e.progressMessage=null,e.progressMax=0,e.prepareProgress=10,e.progressMessage=e.progressMessage||"Exporting...",e}i.ExportBaseOptions=d;var _,c=(_=d,oe.__extends(p,_),p.prototype._doDispose=function(){this._documentTitle&&(this._documentTitle=this._documentTitle.dispose()),this._documentSubtitle&&(this._documentSubtitle=this._documentSubtitle.dispose()),this._documentTail&&(this._documentTail=this._documentTail.dispose()),_.prototype._doDispose.call(this)},_dp(p,"documentTitle",{get:function(){return this._documentTitle}}),_dp(p,"documentSubtitle",{get:function(){return this._documentSubtitle}}),_dp(p,"documentTail",{get:function(){return this._documentTail}}),p.prototype.indicatorVisible=function(t){if(t)switch(this.indicator){case i.VIS_VISIBLE:return!0;case i.VIS_HIDDEN:return!1;case i.VIS_DEFAULT:default:return t.rowIndicator.visible}return!1},p.prototype.checkBarVisible=function(t){if(t)switch(this.checkBar){case i.VIS_VISIBLE:return!0;case i.VIS_HIDDEN:return!1;case i.VIS_DEFAULT:default:return t.checkBar.visible}return!1},p.prototype.headerVisible=function(t){if(t)switch(this.header){case i.VIS_VISIBLE:return!0;case i.VIS_HIDDEN:return!1;case i.VIS_DEFAULT:default:return t.header.visible}return!1},p.prototype.headerSummaryVisible=function(t){if(t)switch(this.headerSummary){case i.VIS_VISIBLE:return!0;case i.VIS_HIDDEN:return!1;case i.VIS_DEFAULT:default:return t.headerSummary.visible}return!1},p.prototype.footerVisible=function(t){if(t)switch(this.footer){case i.VIS_VISIBLE:return!0;case i.VIS_HIDDEN:return!1;case i.VIS_DEFAULT:default:return t.footer.visible}return!1},p.prototype.showIndicatorRow=function(t){if(t)switch(this.indicatorValue){case i.INDICATOR_ITEM:return!1;case i.INDICATOR_ROW:return!0;case i.INDICATOR_DEFAULT:default:return t.rowIndicator.displayValue==Nt.IndicatorValue.ROW}return!1},p.prototype.assignFrom=function(t){var e=Object.getPrototypeOf(this);for(var i in t)if("documentTitle"==i||"documentSubtitle"==i||"documentTail"==i)this["_"+i]=new a(t[i]);else if(this.hasOwnProperty(i))this[i]=t[i];else{var o=Object.getOwnPropertyDescriptor(e,i);if(o)o.set&&o.set.call(this,t[i]);else for(var n=Object.getPrototypeOf(e);n;){var r=Object.getOwnPropertyDescriptor(n,i);n=r?(r.set&&r.set.call(this,t[i]),null):Object.getPrototypeOf(n)}}},p);function p(t){var e=_.call(this,t)||this;return e._documentTitle=null,e._documentSubtitle=null,e._documentTail=null,e.linear=!1,e.allColumns=!1,e.allItems=!0,e.onlyCheckedItems=!1,e.pagingAllItems=!1,e.indicator=i.VIS_DEFAULT,e.checkBar=i.VIS_HIDDEN,e.header=i.VIS_DEFAULT,e.footer=i.VIS_DEFAULT,e.headerSummary=i.VIS_DEFAULT,e.indicatorValue=i.INDICATOR_DEFAULT,e.checkMark="v",e.indenting=!0,e.checkNumber=!1,e.separateRows=!1,e.showConfirm=!0,e.confirmMessage="Excel 문서로 저장하시겠습니까?",e.confirmTitle="Excel 저장",e.lookupDisplay=!1,e.compatibility=!1,e.showLevelOutline=!0,e.showProgress=!1,e.progressMessage=null,e.sheetName=null,e.exportSeriesColumn=!1,e.replaceCrText=null,e.replaceLfText=null,e.showColumns=[],e.hideColumns=[],e.assignFrom(t),e}i.GridExportOptions=c;var f,g=(f=d,oe.__extends(m,f),m.prototype.assignFrom=function(t){var e=Object.getPrototypeOf(this);for(var i in t)if("type"==i||"target"==i){t[i];var o=t[i].toUpperCase();"type"!=i||"EXCEL"!=o&&"CSV"!=o||(this.type=r[o]),"target"!=i||"LOCAL"!=o&&"REMOTE"!=o||(this.target=s[o])}else{var n=Object.getOwnPropertyDescriptor(e,i);n&&n.set&&n.set.call(this,t[i])}},m);function m(t){var e=f.call(this,t)||this;return e.lfText=null,e.crText=null,e.seperator=null,e.exportFields=null,e.hideFields=null,e.includeFieldNames=!1,e}i.DataExportOptions=g;var y,v=(y=c,oe.__extends(w,y),_dp(w,"exportGrids",{get:function(){return this._grids}}),w.prototype._doDispose=function(){for(var t=this._grids.length;t--;)delete this._grids[t];this._grids=null,y.prototype._doDispose.call(this)},w.prototype._parseGrids=function(t,e){var i=e.exportGrids;if(i&&Array.isArray(i))for(var o=0,n=i.length;o<n;o++){var r={grid:i[o].grid,sheetName:i[o].sheetName};this._grids.push(r)}else this._grids.push({grid:t,sheetName:"sheet1"})},w);function w(t,e){var i=y.call(this,e)||this;return i._grids=[],i._parseGrids(t,e),i}i.GridMultiExportOptions=v});t(ni);ni.DocumentTitle,ni.VIS_DEFAULT,ni.VIS_HIDDEN,ni.VIS_VISIBLE,ni.INDICATOR_DEFAULT,ni.INDICATOR_ITEM,ni.INDICATOR_ROW,ni.PIXELS_PER_CHAR,ni.ExportType,ni.ExportTarget,ni.ExportBaseOptions,ni.GridExportOptions,ni.DataExportOptions,ni.GridMultiExportOptions;var ri=e(function(t,e){Object.defineProperty(e,"__esModule",{value:!0});var i=(o.prototype.export=function(t,e){this.grid=t,this.options=e},o);function o(){this.progressMax=0,this.prepareProgress=10,this.indicatorNo=1}e.ExporterBase=i});t(ri);ri.ExporterBase;var si=e(function(t,e){Object.defineProperty(e,"__esModule",{value:!0});var i,T=function(t,e){this.colIndex=0,this.colSpan=0,this.rowIndex=0,this.rowSpan=0,this.width=0,this.valueType=lt.ValueType.TEXT,this.layout=t,e instanceof Dt.GridColumn&&(this.column=e,this.dataColumn=e instanceof Dt.DataColumn?e:null)};e.ColumnArrayItem=T,(i=e.ExportSparkType||(e.ExportSparkType={})).NONE="",i.LINE="line",i.COLUMN="column",i.STACKED="stacked";var o=(_dp(n,"grid",{get:function(){return this._grid}}),_dp(n,"colCount",{get:function(){return this._headerRows.length&&this._headerRows[0].length}}),_dp(n,"headerRowCount",{get:function(){return this._headerRows.length}}),_dp(n,"dataRowCount",{get:function(){return this._dataRows.length}}),n.prototype.getHeader=function(t,e){return this._headerRows[t][e]},n.prototype.getItem=function(t,e){return this._dataRows[t][e]},n.prototype.setItem=function(t,e,i){this._dataRows[t][e]=i},n.prototype.parse=function(){var t,e=this._grid,i=e.layoutManager,o=this._linearize,n=this._allColumns,r=this._includes,s=(this._excludes,o?1:i.headerRows),a=o?1:i.headerSummaryRows;for(n||0<r.length?e.columnCount:e.visibleLayoutCount,t=0;t<s;t++)this._headerRows.push([]);for(t=0;t<a;t++)this._dataRows.push([]);this._parseRows(!0,this._headerRows),this._parseRows(!1,this._dataRows)},n.prototype._parseRows=function(v,w){var t=this._grid,e=t.layoutManager,C=this._linearize,x=this._allColumns,b=this._includes,I=this._excludes,E=0;function S(t,e,i,o,n){for(var r=0;r<o;r++)for(var s=0;s<i;s++){var a=new T(n.layout,n);a.colIndex=s,a.colSpan=i,a.rowIndex=r,a.rowSpan=o,w[e+r][t+s]=a,n instanceof Dt.DataColumn?a.valueType=n.valueType||lt.ValueType.TEXT:a.valueType=lt.ValueType.TEXT}}function R(t,e,i,o){var n=D?o.visibleCount:o.count,r=C||o.horizontal,s=function t(e){for(var i=D?e.visibleCount:e.count,o=0,n=0;n<i;n++){var r=D?e.getItem(n):e.getVisible(n),s=r instanceof Tt.CellLayoutColumnItem?r.firstColumn:null;(x||e.visible)&&(!s||I.indexOf(s.name)<0||0<=b.indexOf(s.name))&&(r instanceof Tt.CellLayoutGroupItem?e.horizontal?o+=t(r):o=Math.max(o,t(r)):e.horizontal||C?o+=C?1:r.cspan:o=Math.max(o,r.cspan))}return o}(o),a=0,l=o.header;!C&&v&&l.visible&&(function(t,e,i,o,n){for(var r=0;r<o;r++)for(var s=0;s<i;s++){var a=new T(n);a.colIndex=s,a.colSpan=i,a.rowIndex=r,a.rowSpan=o,w[e+r][t+s]=a}}(t,e++,s,1,o),a++,i--);for(var h=!1,d=0,u=0;u<n;u++){var _=0,c=0,p=D?o.getItem(u):o.getVisible(u);if(p instanceof Tt.CellLayoutGroupItem)_=R(t,e,i,p),c=E,h=!0;else{var f=p.firstColumn;if((x||p.visible)&&(I.indexOf(f.name)<0||0<=b.indexOf(f.name))){for(var g=p.group,m=p,y=p.cspan;(m=m&&g.nextOf(m))&&m.isNull;)y+=m.cspan,u++;S(t,e,y,r?i:1,p.firstColumn),_=y,c=Math.max(c,1),h=!0}}d=Math.max(d,c),r?t+=_:(e+=c,a+=c,i-=c)}return r&&h&&(i-=d,a++),E=a,s}for(var i=w.length,o=0,D=!x&&0==b.length,n=D?t.visibleLayoutCount:e.layoutCount,r=0;r<n;r++){var s=D?t.getVisibleLayout(r):e.getLayout(r),a=s instanceof Tt.CellLayoutColumnItem?s.firstColumn:null;(x||s.visible)&&(!a||I.indexOf(a.name)<0||0<=b.indexOf(a.name))&&(s instanceof Tt.CellLayoutGroupItem?o+=R(o,0,i,s):S(o++,0,s.cspan,i,a))}},n.prototype.setDataColumns=function(t){var e,i;this._dataColumns=[];for(var o=0,n=t.length;o<n;o++){e=[];for(var r=0,s=t[o].length;r<s;r++)i=t[o][r],e.push(i.column.name);this._dataColumns.push(e)}},n.prototype.setSparkInfo=function(t){},n);function n(t,e,i,o,n){this._grid=t,this._linearize=e,this._allColumns=i,this._includes=o,this._excludes=n,this._headerRows=[],this._dataRows=[],this._dataColumns=[],this.parse()}e.ColumnArray=o;var r=(d.encode=function(t){var e,i,o,n,r,s,a,l="",h=0;for(t=d.utf8_encode(t);h<t.length;)n=(e=t.charCodeAt(h++))>>2,r=(3&e)<<4|(i=t.charCodeAt(h++))>>4,s=(15&i)<<2|(o=t.charCodeAt(h++))>>6,a=63&o,isNaN(i)?s=a=64:isNaN(o)&&(a=64),l=l+this._keyStr.charAt(n)+this._keyStr.charAt(r)+this._keyStr.charAt(s)+this._keyStr.charAt(a);return l},d.decode=function(t){var e,i,o,n,r,s,a="",l=0;for(t=t.replace(/[^A-Za-z0-9\+\/\=]/g,"");l<t.length;)e=d._keyStr.indexOf(t.charAt(l++))<<2|(n=d._keyStr.indexOf(t.charAt(l++)))>>4,i=(15&n)<<4|(r=d._keyStr.indexOf(t.charAt(l++)))>>2,o=(3&r)<<6|(s=d._keyStr.indexOf(t.charAt(l++))),a+=String.fromCharCode(e),64!=r&&(a+=String.fromCharCode(i)),64!=s&&(a+=String.fromCharCode(o));return a=d.utf8_decode(a)},d.utf8_encode=function(t){t=t.replace(/\r\n/g,"\n");for(var e="",i=0;i<t.length;i++){var o=t.charCodeAt(i);o<128?e+=String.fromCharCode(o):(127<o&&o<2048?e+=String.fromCharCode(o>>6|192):(e+=String.fromCharCode(o>>12|224),e+=String.fromCharCode(o>>6&63|128)),e+=String.fromCharCode(63&o|128))}return e},d.utf8_decode=function(t){for(var e="",i=0,o=0,n=0,r=0,s=t.length;i<s;)(o=t.charCodeAt(i))<128?(e+=String.fromCharCode(o),i++):191<o&&o<224?(n=t.charCodeAt(i+1),e+=String.fromCharCode((31&o)<<6|63&n),i+=2):(n=t.charCodeAt(i+1),r=t.charCodeAt(i+2),e+=String.fromCharCode((15&o)<<12|(63&n)<<6|63&r),i+=3);return e},d);function d(){}e.Base64=r;var s=(a.convertNumberFormat=function(t){return 0<t.indexOf(".#")?t.replace(".#",".0"):t},a.convertDateFormat=function(t){for(var e="",i=t.length,o=0;o<i;o++){var n=t.charAt(o);switch(n){case"y":case"d":case"m":case"s":case":":e+=n;break;case"M":e+="m";break;case"a":e+="AM/PM";break;case"H":e+="h",(i-1<=o||"H"!=t.charAt(o+1))&&(e+="h");break;case"h":0!=o&&"h"==t.charAt(o-1)||(e+="h");break;case"S":break;case".":case"/":case"-":case" ":(i-1<=o||"S"!=t.charAt(o+1))&&(e=e+"\\"+n);break;default:e=e+'"'+n+'"'}}return e},a);function a(){}e.ExcelFormatConverter=s});t(si);si.ColumnArrayItem,si.ExportSparkType,si.ColumnArray,si.Base64,si.ExcelFormatConverter;var ai=e(function(t,e){Object.defineProperty(e,"__esModule",{value:!0});var a,i=(a=ri.ExporterBase,oe.__extends(o,a),o.prototype.export=function(t,e){a.prototype.export.call(this,t,e);var i=e;this._cols=[];for(var o=0,n=t.visibleLayoutCount;o<n;o++){var r=t.getVisibleLayout(o);if(r instanceof Tt.CellLayoutColumnItem){var s=r.column instanceof Dt.ValueColumn?r.column:t.columnByName(r.column);this._cols.push(s)}}this.indicator=i.indicatorVisible(t)?t.rowIndicator:null,this.header=i.headerVisible(t)?t.header:null,this.headerSummary=i.headerSummaryVisible(t)?t.headerSummary:null,this.footer=i.footerVisible(t)?t.footer:null,this.indicatorHead=t.rowIndicator.headText||"No",this.indicatorFoot=t.rowIndicator.footText||"",this.indicatorSummary=t.rowIndicator.sumText,this.done=function(){this.save()},this.buildBook()},o.prototype.prepare=function(){},o.prototype.finallize=function(){},o.prototype.buildBook=function(){this.buildSheet(this.grid)},o.prototype.buildSheet=function(t){this._rows=[],this.header&&this.buildHeader(t),this.headerSummary&&this.buildHeaderSummary(t),this.buildItems(t),this.footer&&this.buildFooter(t),this.done()},o.prototype.addQuatation=function(t,e){if(null!=t){if(this.options){var i=this.options,o=i.replaceCrText,n=i.replaceLfText;o&&t&&(t=t.replace(/\n/g,o)),n&&t&&(t=t.replace(/\r/g,n))}(e===lt.ValueType.TEXT||0<=t.indexOf("\n")||0<=t.indexOf(",")||0<=t.indexOf('"'))&&(t='"'+t.replace(/\"/g,'""')+'"')}return null===t?"":t},o.prototype.buildHeader=function(t){var e=[],i=this._cols;this.indicator&&e.push(this.indicatorHead);for(var o=i.length,n=0;n<o;n++){var r=i[n];e.push(this.addQuatation(r.header.text))}this._rows.push(e.join(","))},o.prototype.buildHeaderSummary=function(t){var e,i=[],o=this.options,n=t.headerSummaries;if(n.visible){var r,s,a,l=n.visibleCount;for(r=0;r<l;r++){var h=n.getVisible(r);for(s=0,a=this._cols.length;s<a;s++){var d=this._cols[r],u=d.name,_=h.getCell(d.layout),c=_.value;e="number"==typeof c?isNaN(c)?_.text:String(c):c instanceof Date?!o.datetimeCallback||(c=o.datetimeCallback(-1,u,c))instanceof Date?_t.DateTimeConverter.Default.getText(c):c:null==c?_.text:String(c),i.push(this.addQuatation(e))}this._rows.push(i.join(","))}}},o.prototype.buildFooter=function(t){var e,i=this.options,o=t.footers;if(o.visible)for(var n=o.visibleCount,r=0;r<n;r++){var s=[];this.indicator&&s.push(0==r?this.indicatorFoot:"");for(var a=o.getVisible(r),l=0,h=this._cols.length;l<h;l++){var d=this._cols[l],u=a.getCell(d.layout),_=u.value;e="number"==typeof _?isNaN(_)?u.text:String(_):_ instanceof Date?!i.datetimeCallback||(_=i.datetimeCallback(-1,d.name,_))instanceof Date?_t.DateTimeConverter.Default.getText(_):_:null==_?u.text:String(_),s.push(this.addQuatation(e))}this._rows.push(s.join(","))}},o.prototype.buildItems=function(t){for(var e=this.allItems?this.allItems.length:t.itemSource.itemCount,i=this.allItems,o=0;o<e;o++){var n=i?i[o]:t.getItem(o);this.buildRow(t,n)}},o.prototype.buildRow=function(t,e){var i,o=this.options,n=[];if(this.indicator){var r=o.showIndicatorRow(t)?e.dataRow:this.indicatorNo++;n.push(r.toString())}for(var s=0,a=this._cols.length;s<a;s++){var l=this._cols[s],h=void 0;if(i=void 0,l instanceof Dt.DataColumn)if(h=l.getField()){var d=new kt.CellIndex(t,e.index,l);i=t.getDisplayText(d)}else i="";n.push(this.addQuatation(i,h&&h.dataType))}this._rows.push(n.join(","))},o.prototype.buildGroupHeader=function(t,e){},o.prototype.buildGroupFooter=function(t,e){},o.prototype.buildMergedGroupHeader=function(t,e){},o.prototype.buildMergedGroupFooter=function(t,e){},o.prototype.buildTreeSheet=function(t){this._rows=[],this.header&&this.buildHeader(t),this.headerSummary&&this.buildHeaderSummary(t),this.buildTreeItems(t),this.footer&&this.buildFooter(t),this.done()},o.prototype.buildTreeItems=function(t){for(var e=this.allItems?this.allItems.length:t.itemCount,i=this.allItems,o=0;o<e;o++){var n=i?i[o]:t.getItem(o);if(!(n instanceof Ve.TreeItem))throw"Unkonw tree item type";this.buildTreeRow(t,n)}},o.prototype.buildTreeRow=function(t,e){},o.prototype.save=function(){var t=this.options,e=t.fileName,i="\ufeff"+this._rows.join("\n");t.target==ni.ExportTarget.LOCAL?this.saveLocal(e,i):this.saveServer(e,i)},o.prototype.saveLocal=function(t,e){var i=this.grid.doc,o=ne.getDocWin(i);e=e;var n=new Blob([e],{type:"text/csv charset=UTF-8"});if(o.navigator.msSaveOrOpenBlob)o.navigator.msSaveOrOpenBlob(n,t);else if(o.navigator.msSaveBlob)o.navigator.msSaveBlob(n,t);else{var r=i.createElement("a");i.body.appendChild(r);var s=URL.createObjectURL(n);r.href=s,r.download=t,r.click(),i.body.removeChild(r)}},o.prototype.saveServer=function(t,e){var i=this.grid.doc,o='<form name="tempForm" action="'+this.options.url+'" method="post">';o+='<input type="hidden" name="fileName" value = "'+t+'"/>',o+='<input type="hidden" name="data" value = "'+si.Base64.encode(e)+'"/>',o+='<input id="submitBtn" type="submit"/>',o+="</form>";var n=i.createElement("div");n.innerHTML=o,i.body.appendChild(n),i.getElementById("submitBtn").click(),i.body.removeChild(n)},o.prototype.prepareColumns=function(){},o);function o(){return a.call(this)||this}e.GridCsvExporter=i});t(ai);ai.GridCsvExporter;var li=e(function(t,e){Object.defineProperty(e,"__esModule",{value:!0});var i=/\<|\>|\&|\"/;function r(t){return i.test(t)?t.replace(/\&/g,"&amp;").replace(/\</g,"&lt;").replace(/\>/g,"&gt;").replace(/\"/g,"&quot;"):t}var o=(s.createDocument=function(t,e){var i={name:t,attrs:{}};for(var o in e)i.attrs[o]=e[o];return i},s.removeItem=function(t){if(t.texts=null,t.attrs=null,t.childs)for(var e=t.childs.length;e--;)s.removeItem(t.childs[e]),delete t.childs[e];t.childs=null},s.addChild=function(t,e,i,o){var n={name:e,attrs:i};return o&&s.addText(n,r(o)),s.addChildElement(t,n),n},s.addChildElement=function(t,e){t.childs||(t.childs=[]),t.childs.push(e)},s.addProperty=function(t,e,i){t.attrs||(t.attrs={}),t.attrs[e]=r(i)},s.addText=function(t,e){t.texts||(t.texts=[]),t.texts.push(e)},s.toString=function(t){var e="<"+t.name;for(var i in t.attrs)e+=" "+i+'="'+t.attrs[i]+'"';if(t.childs||t.texts){if(e+=">",t.texts)for(var o=0,n=t.texts.length;o<n;o++)e+=t.texts[o];if(t.childs)for(o=0,n=t.childs.length;o<n;o++)e+=s.toString(t.childs[o]);e+="</"+t.name+">"}else e+="/>";return e},s);function s(){}e.TextXmlManager=o});t(li);li.TextXmlManager;var hi=e(function(t,s){Object.defineProperty(s,"__esModule",{value:!0});var e=ne.Utils.hex,a=(o.createFrom=function(t,e){void 0===e&&(e=!1);var i=o._parse(t,n,e,!1);return i?i instanceof o?i:n.clone():null},o.getColorStringArray=function(t){return t.trim().toLowerCase().split(/\s+|(rgba\(.*\))|(rgb\(.*\))|(pal\(.*\))/).filter(Boolean)},o.getColorCsvArray=function(t){return t.trim().toLowerCase().split(/\s*,\s*|\s+|(rgba\(.*\))|(rgb\(.*\))|(pal\(.*\))/).filter(Boolean)},o._parse=function(t,e,i,o){if(t){var n=t.length;if("#"==(t=t.trim().toLowerCase()).charAt(0))if(t=t.substr(1),6<=--n&&n<=8)e._b=ne.Utils.toInt(t.substr(n-2,2),16),e._g=ne.Utils.toInt(t.substr(n-4,2),16),e._r=ne.Utils.toInt(t.substr(n-6,2),16),e._a=6==n?i?NaN:1:ne.Utils.toInt(t.substr(0,n-6),16)/255;else{if(3!=n){if(o)throw"Invalid color value text: "+t;return!1}e._r=ne.Utils.toInt(t.charAt(0)+t.charAt(0),16),e._g=ne.Utils.toInt(t.charAt(1)+t.charAt(1),16),e._b=ne.Utils.toInt(t.charAt(2)+t.charAt(2),16),e._a=i?NaN:1}else if(0==t.indexOf("rgba(")&&")"==t.charAt(n-1)){var r=(t=t.substring(5,n-1)).split(",");e._r=ne.Utils.toInt(r[0]),e._g=ne.Utils.toInt(r[1]),e._b=ne.Utils.toInt(r[2]),e._a=ne.Utils.toFloat(r[3])}else{if(0!=t.indexOf("rgb(")||")"!=t.charAt(n-1)){if(i&&s.StrictColors.hasOwnProperty(t))return r=s.StrictColors[t],e._r=r._r,e._g=r._g,e._b=r._b,e._a=r._a,r;if(!i&&s.Colors.hasOwnProperty(t))return r=s.Colors[t],e._r=r._r,e._g=r._g,e._b=r._b,e._a=r._a,r;if(o)throw new Error("Invalid color text: "+t);return!1}var r=(t=t.substring(4,n-1)).split(",");e._r=ne.Utils.toInt(r[0]),e._g=ne.Utils.toInt(r[1]),e._b=ne.Utils.toInt(r[2]),e._a=i?NaN:1}return!0}return!1},o.areEqual=function(t,e){return t&&e&&t._r==e._r&&t._g==e._g&&t._b==e._b&&t._a==e._a},o.prototype.clone=function(){return new o(this)},o.prototype.copy=function(t,e){return void 0===t&&(t=null),void 0===e&&(e=1),t?(this._r=t._r,this._g=t._g,this._b=t._b,this._a=isNaN(t._a)?e:t._a):this._a=e,this},o.prototype.value=function(){return"rgba("+this._r+","+this._g+","+this._b+","+this._a+")"},o.prototype.valueWithBrightness=function(t){var e=this._r,i=this._g,o=this._b,n=Number(t);return isNaN(n)||1==n||(e=Math.floor(Math.max(0,Math.min(255,e*n))),i=Math.floor(Math.max(0,Math.min(255,i*n))),o=Math.floor(Math.max(0,Math.min(255,o*n))),255==e&&this._r<255&&(e=Math.floor((255+this._r)/2)),255==i&&this._g<255&&(i=Math.floor((255+this._g)/2)),255==o&&this._b<255&&(o=Math.floor((255+this._b)/2))),"rgba("+e+","+i+","+o+","+this._a+")"},o.prototype.argb=function(){return Math.floor(255*this._a)<<24|this._r<<16|this._g<<8|this._b},o.prototype.rgb=function(){return this._r<<16|this._g<<8|this._b},o.prototype.extractAlpha=function(){var t=this._a;return this._a=NaN,t},o.prototype.toHex=function(){return""+e(Math.floor(255*this._a))+e(this._r)+e(this._g)+e(this._b)},o.prototype.toColorHex=function(){return""+e(this._r)+e(this._g)+e(this._b)},o.prototype.toString=function(){return"#"+e(Math.floor(255*this._a))+e(this._r)+e(this._g)+e(this._b)},o.prototype.toColorString=function(){return"#"+e(this._r)+e(this._g)+e(this._b)},o);function o(t,e){void 0===t&&(t=null),void 0===e&&(e=!1),this._r=0,this._g=0,this._b=0,this._a=0,"string"==typeof t?o._parse(t,this,e,!1):t instanceof o?(this._r=t._r,this._g=t._g,this._b=t._b,this._a=t._a):isNaN(t)?(this._r=this._g=this._b=0,this._a=e?NaN:1):(this._a=(t>>>24)/255,this._r=(16711680&t)>>16,this._g=(65280&t)>>8,this._b=255&t)}var n=new(s.Color=a);new a,new a;s.Colors={transparent:new a("#00000000"),ltGray:new a("#d3d3d3"),ltgray:new a("#d3d3d3"),aliceblue:new a("#f0f8ff"),antiquewhite:new a("#faebd7"),aqua:new a("#00ffff"),aquamarine:new a("#7fffd4"),azure:new a("#f0ffff"),beige:new a("#f5f5dc"),bisque:new a("#ffe4c4"),black:new a("#000000"),blanchedalmond:new a("#ffebcd"),blue:new a("#0000ff"),blueviolet:new a("#8a2be2"),brown:new a("#a52a2a"),burlywood:new a("#deb887"),cadetblue:new a("#5f9ea0"),chartreuse:new a("#7fff00"),chocolate:new a("#d2691e"),coral:new a("#ff7f50"),cornflowerblue:new a("#6495ed"),cornsilk:new a("#fff8dc"),crimson:new a("#dc143c"),cyan:new a("#00ffff"),darkblue:new a("#00008b"),darkcyan:new a("#008b8b"),darkgoldenrod:new a("#b8860b"),darkgray:new a("#a9a9a9"),darkgreen:new a("#006400"),darkgrey:new a("#a9a9a9"),darkkhaki:new a("#bdb76b"),darkmagenta:new a("#8b008b"),darkolivegreen:new a("#556b2f"),darkorange:new a("#ff8c00"),darkorchid:new a("#9932cc"),darkred:new a("#8b0000"),darksalmon:new a("#e9967a"),darkseagreen:new a("#8fbc8f"),darkslateblue:new a("#483d8b"),darkslategray:new a("#2f4f4f"),darkslategrey:new a("#2f4f4f"),darkturquoise:new a("#00ced1"),darkviolet:new a("#9400d3"),deeppink:new a("#ff1493"),deepskyblue:new a("#00bfff"),dimgray:new a("#696969"),dimGray:new a("#696969"),dimgrey:new a("#696969"),dodgerblue:new a("#1e90ff"),firebrick:new a("#b22222"),floralwhite:new a("#fffaf0"),forestgreen:new a("#228b22"),fuchsia:new a("#ff00ff"),gainsboro:new a("#dcdcdc"),ghostwhite:new a("#f8f8ff"),goldenrod:new a("#daa520"),gold:new a("#ffd700"),gray:new a("#808080"),green:new a("#008000"),greenyellow:new a("#adff2f"),grey:new a("#808080"),honeydew:new a("#f0fff0"),hotpink:new a("#ff69b4"),indianred:new a("#cd5c5c"),indigo:new a("#4b0082"),ivory:new a("#fffff0"),khaki:new a("#f0e68c"),lavenderblush:new a("#fff0f5"),lavender:new a("#e6e6fa"),lawngreen:new a("#7cfc00"),lemonchiffon:new a("#fffacd"),lightblue:new a("#add8e6"),lightcoral:new a("#f08080"),lightcyan:new a("#e0ffff"),lightgoldenrodyellow:new a("#fafad2"),lightgray:new a("#d3d3d3"),lightgreen:new a("#90ee90"),lightgrey:new a("#d3d3d3"),lightpink:new a("#ffb6c1"),lightsalmon:new a("#ffa07a"),lightseagreen:new a("#20b2aa"),lightskyblue:new a("#87cefa"),lightslategray:new a("#778899"),lightslategrey:new a("#778899"),lightsteelblue:new a("#b0c4de"),lightyellow:new a("#ffffe0"),lime:new a("#00ff00"),limegreen:new a("#32cd32"),linen:new a("#faf0e6"),magenta:new a("#ff00ff"),maroon:new a("#800000"),mediumaquamarine:new a("#66cdaa"),mediumblue:new a("#0000cd"),mediumorchid:new a("#ba55d3"),mediumpurple:new a("#9370db"),mediumseagreen:new a("#3cb371"),mediumslateblue:new a("#7b68ee"),mediumspringgreen:new a("#00fa9a"),mediumturquoise:new a("#48d1cc"),mediumvioletred:new a("#c71585"),midnightblue:new a("#191970"),mintcream:new a("#f5fffa"),mistyrose:new a("#ffe4e1"),moccasin:new a("#ffe4b5"),navajowhite:new a("#ffdead"),navy:new a("#000080"),oldlace:new a("#fdf5e6"),olive:new a("#808000"),olivedrab:new a("#6b8e23"),orange:new a("#ffa500"),orangered:new a("#ff4500"),orchid:new a("#da70d6"),palegoldenrod:new a("#eee8aa"),palegreen:new a("#98fb98"),paleturquoise:new a("#afeeee"),palevioletred:new a("#db7093"),papayawhip:new a("#ffefd5"),peachpuff:new a("#ffdab9"),peru:new a("#cd853f"),pink:new a("#ffc0cb"),plum:new a("#dda0dd"),powderblue:new a("#b0e0e6"),purple:new a("#800080"),rebeccapurple:new a("#663399"),red:new a("#ff0000"),rosybrown:new a("#bc8f8f"),royalblue:new a("#4169e1"),saddlebrown:new a("#8b4513"),salmon:new a("#fa8072"),sandybrown:new a("#f4a460"),seagreen:new a("#2e8b57"),seashell:new a("#fff5ee"),sienna:new a("#a0522d"),silver:new a("#c0c0c0"),skyblue:new a("#87ceeb"),slateblue:new a("#6a5acd"),slategray:new a("#708090"),slategrey:new a("#708090"),snow:new a("#fffafa"),springgreen:new a("#00ff7f"),steelblue:new a("#4682b4"),tan:new a("#d2b48c"),teal:new a("#008080"),thistle:new a("#d8bfd8"),tomato:new a("#ff6347"),turquoise:new a("#40e0d0"),violet:new a("#ee82ee"),wheat:new a("#f5deb3"),white:new a("#ffffff"),whitesmoke:new a("#f5f5f5"),yellow:new a("#ffff00"),yellowgreen:new a("#9acd32")},s.StrictColors={transparent:new a("#00000000"),ltGray:new a("#ffd3d3d3",!0),ltgray:new a("#ffd3d3d3",!0),aliceblue:new a("#fff0f8ff",!0),antiquewhite:new a("#fffaebd7",!0),aqua:new a("#ff00ffff",!0),aquamarine:new a("#ff7fffd4",!0),azure:new a("#fff0ffff",!0),beige:new a("#fff5f5dc",!0),bisque:new a("#ffffe4c4",!0),black:new a("#ff000000",!0),blanchedalmond:new a("#ffffebcd",!0),blue:new a("#ff0000ff",!0),blueviolet:new a("#ff8a2be2",!0),brown:new a("#ffa52a2a",!0),burlywood:new a("#ffdeb887",!0),cadetblue:new a("#ff5f9ea0",!0),chartreuse:new a("#ff7fff00",!0),chocolate:new a("#ffd2691e",!0),coral:new a("#ffff7f50",!0),cornflowerblue:new a("#ff6495ed",!0),cornsilk:new a("#fffff8dc",!0),crimson:new a("#ffdc143c",!0),cyan:new a("#ff00ffff",!0),darkblue:new a("#ff00008b",!0),darkcyan:new a("#ff008b8b",!0),darkgoldenrod:new a("#ffb8860b",!0),darkgray:new a("#ffa9a9a9",!0),darkgreen:new a("#ff006400",!0),darkgrey:new a("#ffa9a9a9",!0),darkkhaki:new a("#ffbdb76b",!0),darkmagenta:new a("#ff8b008b",!0),darkolivegreen:new a("#ff556b2f",!0),darkorange:new a("#ffff8c00",!0),darkorchid:new a("#ff9932cc",!0),darkred:new a("#ff8b0000",!0),darksalmon:new a("#ffe9967a",!0),darkseagreen:new a("#ff8fbc8f",!0),darkslateblue:new a("#ff483d8b",!0),darkslategray:new a("#ff2f4f4f",!0),darkslategrey:new a("#ff2f4f4f",!0),darkturquoise:new a("#ff00ced1",!0),darkviolet:new a("#ff9400d3",!0),deeppink:new a("#ffff1493",!0),deepskyblue:new a("#ff00bfff",!0),dimgray:new a("#ff696969",!0),dimGray:new a("#ff696969",!0),dimgrey:new a("#ff696969",!0),dodgerblue:new a("#ff1e90ff",!0),firebrick:new a("#ffb22222",!0),floralwhite:new a("#fffffaf0",!0),forestgreen:new a("#ff228b22",!0),fuchsia:new a("#ffff00ff",!0),gainsboro:new a("#ffdcdcdc",!0),ghostwhite:new a("#fff8f8ff",!0),goldenrod:new a("#ffdaa520",!0),gold:new a("#ffffd700",!0),gray:new a("#ff808080",!0),green:new a("#ff008000",!0),greenyellow:new a("#ffadff2f",!0),grey:new a("#ff808080",!0),honeydew:new a("#fff0fff0",!0),hotpink:new a("#ffff69b4",!0),indianred:new a("#ffcd5c5c",!0),indigo:new a("#ff4b0082",!0),ivory:new a("#fffffff0",!0),khaki:new a("#fff0e68c",!0),lavenderblush:new a("#fffff0f5",!0),lavender:new a("#ffe6e6fa",!0),lawngreen:new a("#ff7cfc00",!0),lemonchiffon:new a("#fffffacd",!0),lightblue:new a("#ffadd8e6",!0),lightcoral:new a("#fff08080",!0),lightcyan:new a("#ffe0ffff",!0),lightgoldenrodyellow:new a("#fffafad2",!0),lightgray:new a("#ffd3d3d3",!0),lightgreen:new a("#ff90ee90",!0),lightgrey:new a("#ffd3d3d3",!0),lightpink:new a("#ffffb6c1",!0),lightsalmon:new a("#ffffa07a",!0),lightseagreen:new a("#ff20b2aa",!0),lightskyblue:new a("#ff87cefa",!0),lightslategray:new a("#ff778899",!0),lightslategrey:new a("#ff778899",!0),lightsteelblue:new a("#ffb0c4de",!0),lightyellow:new a("#ffffffe0",!0),lime:new a("#ff00ff00",!0),limegreen:new a("#ff32cd32",!0),linen:new a("#fffaf0e6",!0),magenta:new a("#ffff00ff",!0),maroon:new a("#ff800000",!0),mediumaquamarine:new a("#ff66cdaa",!0),mediumblue:new a("#ff0000cd",!0),mediumorchid:new a("#ffba55d3",!0),mediumpurple:new a("#ff9370db",!0),mediumseagreen:new a("#ff3cb371",!0),mediumslateblue:new a("#ff7b68ee",!0),mediumspringgreen:new a("#ff00fa9a",!0),mediumturquoise:new a("#ff48d1cc",!0),mediumvioletred:new a("#ffc71585",!0),midnightblue:new a("#ff191970",!0),mintcream:new a("#fff5fffa",!0),mistyrose:new a("#ffffe4e1",!0),moccasin:new a("#ffffe4b5",!0),navajowhite:new a("#ffffdead",!0),navy:new a("#ff000080",!0),oldlace:new a("#fffdf5e6",!0),olive:new a("#ff808000",!0),olivedrab:new a("#ff6b8e23",!0),orange:new a("#ffffa500",!0),orangered:new a("#ffff4500",!0),orchid:new a("#ffda70d6",!0),palegoldenrod:new a("#ffeee8aa",!0),palegreen:new a("#ff98fb98",!0),paleturquoise:new a("#ffafeeee",!0),palevioletred:new a("#ffdb7093",!0),papayawhip:new a("#ffffefd5",!0),peachpuff:new a("#ffffdab9",!0),peru:new a("#ffcd853f",!0),pink:new a("#ffffc0cb",!0),plum:new a("#ffdda0dd",!0),powderblue:new a("#ffb0e0e6",!0),purple:new a("#ff800080",!0),rebeccapurple:new a("#ff663399",!0),red:new a("#ffff0000",!0),rosybrown:new a("#ffbc8f8f",!0),royalblue:new a("#ff4169e1",!0),saddlebrown:new a("#ff8b4513",!0),salmon:new a("#fffa8072",!0),sandybrown:new a("#fff4a460",!0),seagreen:new a("#ff2e8b57",!0),seashell:new a("#fffff5ee",!0),sienna:new a("#ffa0522d",!0),silver:new a("#ffc0c0c0",!0),skyblue:new a("#ff87ceeb",!0),slateblue:new a("#ff6a5acd",!0),slategray:new a("#ff708090",!0),slategrey:new a("#ff708090",!0),snow:new a("#fffffafa",!0),springgreen:new a("#ff00ff7f",!0),steelblue:new a("#ff4682b4",!0),tan:new a("#ffd2b48c",!0),teal:new a("#ff008080",!0),thistle:new a("#ffd8bfd8",!0),tomato:new a("#ffff6347",!0),turquoise:new a("#ff40e0d0",!0),violet:new a("#ffee82ee",!0),wheat:new a("#fff5deb3",!0),white:new a("#ffffffff",!0),whitesmoke:new a("#fff5f5f5",!0),yellow:new a("#ffffff00",!0),yellowgreen:new a("#ff9acd32",!0)};var i=(r.createFrom=function(t,e){void 0===e&&(e=!1);var i=e?t.trim().toLowerCase():t;if(0!=i.indexOf("pal(")||")"!=i.charAt(i.length-1))return null;if(1<=(i=i.substring(4,i.length-1)).indexOf(",")){var o=i.split(",");return 1<o.length?new r(o[0],parseInt(o[1])):new r(o[0])}return new r(i)},r.prototype.clone=function(){var t=new r(this._paletteName,this._index);return t._palette=this._palette,t},r.prototype.getColor=function(){var t=this.getIndex();return 0<=t?this._palette.getColor(t):s.Colors.transparent},r.prototype.getIndex=function(){var t=this._palette;return t||(this._palette=t=l.getPalette(this._paletteName)),t?((this._index<0||this._index>=t.count)&&(this._index=t.next()),this._index):-1},r);function r(t,e){void 0===e&&(e=-1),this._index=-1,this._paletteName=t,this._index=e}s.ColorPaletteItem=i;var l=(h.register=function(t,e){t&&e&&(h._palettes[t]=e)},h.loadPalettes=function(t){if(t){var e=ne.Utils.toArray(t);if(e)for(var i=0;i<e.length;i++){var o=e[i].name,n=e[i].colors;if(o&&n){var r=new h(n);h.register(o,r)}}}},h.getPalette=function(t){return h._palettes.hasOwnProperty(t)?h._palettes[t]:h._palettes.default},_dp(h,"count",{get:function(){return this._colors.length}}),_dp(h,"colors",{get:function(){return this._colors.slice()}}),h.prototype.next=function(){var t=this._next;return this._next=(this._next+1)%this._colors.length,t},h.prototype.getColor=function(t){return this._colors[t]},h.prototype._parse=function(t,e){if(this._colors=[],t){var i=t;i instanceof Array||(i=String(t).split(","));for(var o=0,n=i.length;o<n;o++){var r=a.createFrom(i[o],!0);this._colors.push(r)}}this._colors.length<1&&this._colors.push(a.createFrom("#00000000"))},h._palettes={default:new h("#eeeeee")},h);function h(t){this._colors=[],this._next=0,this._parse(t)}s.ColorPalette=l});t(hi);hi.Color,hi.Colors,hi.StrictColors,hi.ColorPaletteItem,hi.ColorPalette;var di=e(function(t,e){var c,i,p,o,d,n,r,s;Object.defineProperty(e,"__esModule",{value:!0}),(i=c=e.ExcelHorzAlign||(e.ExcelHorzAlign={})).NEAR="left",i.CENTER="center",i.FAR="right",(o=p=e.ExcelVertAlign||(e.ExcelVertAlign={})).NEAR="top",o.CENTER="center",o.FAR="bottom",(n=d=d||{}).NONE="none",n.SOLID="solid",n.GRAY125="gray125",(s=r=r||{}).NONE="none",s.SOLID="solid",s.DASHED="dashed";var _=(a.toColCaption=function(t){for(var e="";0<=t;)e=String.fromCharCode(t%26+65)+e,t=Math.floor(t/26)-1;return e},a.toRange=function(t,e){return a.toColCaption(t)+(e+1)},a.XML_HEAD_STRING='<?xml version="1.0" encoding="UTF-8" standalone="yes"?>',a.formatIndentXml=function(t){for(var e="",i=0,o=(t=t.replace(/(>)(<)(\/*)/g,"$1\r\n$2$3")).split("\r\n"),n=0,r=o.length;n<r;n++){var s=o[n],a=0;s.match(/.+<\/\w[^>]*>$/)?a=0:s.match(/^<\/\w/)?0!=i&&--i:a=s.match(/^<\w[^>]*[^\/]>.*$/)?1:0;for(var l="",h=0;h<i;h++)l+="  ";e+=l+s+"\r\n",i+=a}return e},a);function a(){}e.ExcelUtil=_;var l=(h.prototype.dispose=function(){for(var t=this._strings.length;t--;)delete this._strings[t];for(var e in this._strings=null,this._stringMap)delete this._stringMap[e];this._stringMap=null},_dp(h,"count",{get:function(){return this._count}}),h.prototype.uniqueCount=function(){return this._nextId},h.prototype.add=function(t){this._count++;var e=this._stringMap[t];return void 0===e&&(e=this._nextId++,this._stringMap[t]=e,this._strings[e]=t),e},h.prototype.getIndex=function(t){return this._stringMap[t]},h.prototype.createPart=function(){var t=li.TextXmlManager.createDocument("sst",{xmlns:"http://schemas.openxmlformats.org/spreadsheetml/2006/main"});li.TextXmlManager.addProperty(t,"count",this._count.toString()),li.TextXmlManager.addProperty(t,"uniqueCount",this._nextId.toString());for(var e=/^\s|\s$|\r|\n|\r\n/,i=0,o=this._strings.length;i<o;i++){var n=li.TextXmlManager.addChild(t,"si"),r=li.TextXmlManager.addChild(n,"t",null,this._strings[i]);e.test(this._strings[i])&&li.TextXmlManager.addProperty(r,"xml:space","preserve")}var s=li.TextXmlManager.toString(t);return _.XML_HEAD_STRING+s},h);function h(){this._nextId=0,this._count=0,this._stringMap={},this._strings=[]}var u=(f.EqualsById=function(t,e){return!t&&!e||!(!t&&e||t&&!e)&&t._id==e.id},_dp(f,"id",{get:function(){return this._id}}),f.prototype.dispose=function(){},f);function f(t){this._id=t}var g=(m.prototype.dispose=function(){for(var t=this._items.length;t--;)this._items[t].dispose(),this._items[t]=null,delete this._items[t]},m.prototype.getIndexer=function(){return this._indexer++},m.prototype.create=function(){for(var t=[],e=0;e<arguments.length;e++)t[e]=arguments[e];for(var i=this._items.length;i--;){var o=this._items[i];if(o.equals.apply(o,t))return o}var n=this.createInstance.apply(this,t);return this._items.push(n),n},m.prototype.createUnique=function(){for(var t=[],e=0;e<arguments.length;e++)t[e]=arguments[e];var i=this.createInstance.apply(this,t);return this._items.push(i),i},m);function m(){this._items=[],this._indexer=0}var y,v=(y=u,oe.__extends(w,y),w.prototype.clone=function(t,e){return new w(t,e._name||this._name,e._size||this._size,e._color||this._color,this._bold,this._italic)},w.prototype.equals=function(t,e,i,o,n){return void 0===t&&(t="Tahoma"),void 0===e&&(e=10),void 0===i&&(i="ff000000"),void 0===o&&(o=!1),void 0===n&&(n=!1),this._name==t&&this._size==e&&this._color==i&&this._bold==o&&this._italic==n},w.prototype.toXml=function(t,e){ct.XmlUtils.addChildWithAttr(t,e,"sz","val",this._size||10),ct.XmlUtils.addChildWithAttr(t,e,"name","val",this._name||"Calibri"),ct.XmlUtils.addChildWithAttr(t,e,"color","rgb",this._color||"ff000000"),ct.XmlUtils.addChildWithAttr(t,e,"b","val",this._bold?"true":"false"),ct.XmlUtils.addChildWithAttr(t,e,"i","val",this._italic?"true":"false")},w);function w(t,e,i,o,n,r){void 0===e&&(e="Tahoma"),void 0===i&&(i=10),void 0===o&&(o="ff000000"),void 0===n&&(n=!1),void 0===r&&(r=!1);var s=y.call(this,t)||this;return s._bold=!1,s._italic=!1,s._name=e,s._size=i,s._color=o,s._bold=n,s._italic=r,s}var C,x=(C=g,oe.__extends(b,C),b.prototype.createInstance=function(t,e,i,o,n){return new v(this.getIndexer(),t,e,i,o,n)},b.prototype.createFromCss=function(t){var e=t["font-family"];e=e?(-1<e.indexOf(",")&&(e=e.split(",")[0]),e.replace(/\"/g,"")):void 0;var i=parseInt(t["font-size"]);i=isNaN(i)?void 0:72*i/96;var o=t.color;o=o&&("#"==o.charAt(0)?t.color:new hi.Color(o).toColorHex());var n="bold"==t["font-weight"],r="italic"==t["font-style"];return e||i||o?this.create(e,i,o,n,r):this._items[0]},b.prototype.clone=function(t,e){var i=t.clone(this.getIndexer(),e);return this._items.push(i),i},b.prototype.toXml=function(t,e){for(var i=this._items.length,o=0;o<i;o++){var n=ct.XmlUtils.addChild(t,e,"font");this._items[o].toXml(t,n)}ct.XmlUtils.setAttr(e,"count",i)},b);function b(){return null!==C&&C.apply(this,arguments)||this}var I,E=(I=u,oe.__extends(S,I),S.prototype.clone=function(t,e){return new S(t,e._pattern||this._pattern,e._color||this._color,e._tint||this._tint,e._linear||this._linear,e._color2||this._color2,e._degree||this._degree)},S.prototype.equals=function(t,e,i,o,n,r){return void 0===t&&(t=d.SOLID),void 0===i&&(i=0),void 0===o&&(o=!1),void 0===r&&(r=90),this._pattern==t&&this._color==e&&this._color2==n&&this._linear==o&&this._degree==r&&this._tint==i},S.prototype.toXml=function(t,e){var i;if(this._linear){var o=ct.XmlUtils.addChildWithAttr(t,e,"gradientFill","degree",this._degree),n=ct.XmlUtils.addChildWithAttr(t,o,"stop","position","0");i=ct.XmlUtils.addChild(t,n,"color"),ct.XmlUtils.setAttr(i,"rgb",this._color),ct.XmlUtils.setAttr(i,"tint",this._tint),n=ct.XmlUtils.addChildWithAttr(t,o,"stop","position","1"),i=ct.XmlUtils.addChild(t,n,"color"),ct.XmlUtils.setAttr(i,"rgb",this._color2),ct.XmlUtils.setAttr(i,"tint",this._tint)}else{var r=ct.XmlUtils.addChildWithAttr(t,e,"patternFill","patternType",this._pattern.toString());if(this._pattern!=d.NONE){var s=ct.XmlUtils.addChild(t,r,"fgColor");ct.XmlUtils.setAttr(s,"rgb",this._color),ct.XmlUtils.setAttr(s,"tint",this._tint)}}},S);function S(t,e,i,o,n,r,s){void 0===e&&(e=d.SOLID),void 0===o&&(o=0),void 0===n&&(n=!1),void 0===s&&(s=90);var a=I.call(this,t)||this;return a._linear=!1,a._color2=void 0,a._degree=90,a._tint=0,a._pattern=e,a._color=i,a._linear=n,a._color2=r,a._degree=s,a._tint=o,a}var R,D=(R=g,oe.__extends(T,R),T.prototype.createInstance=function(t,e,i,o,n,r){return new E(this.getIndexer(),t,e,i,o,n,r)},T.prototype.createFromCss=function(t){var e=t["background-image"],i="linear-gradient(",o=e?e.indexOf(i):-1;if(-1<o){var n=this._splitEscape(e.slice(o+i.length,e.length-1)),r=void 0,s=void 0,a=void 0;a=((a=2<n.length?(r=new hi.Color(n[1]),s=new hi.Color(n[2]),parseInt(n[0])):(r=new hi.Color(n[0]),s=new hi.Color(n[1]),180))+270)%360;var l=1-r._a;return this.create(d.NONE,r.toColorHex(),l,!0,s.toColorHex(),a)}var h=new hi.Color(t["background-color"]);return l=1-h._a,h?this.create(d.SOLID,h.toColorHex(),l):this._items[0]},T.prototype.clone=function(t,e){var i=t.clone(this.getIndexer(),e);return this._items.push(i),i},T.prototype.toXml=function(t,e){for(var i=this._items.length,o=0;o<i;o++){var n=ct.XmlUtils.addChild(t,e,"fill");this._items[o].toXml(t,n)}ct.XmlUtils.setAttr(e,"count",i)},T.prototype._splitEscape=function(t,e){if(void 0===e&&(e=","),t){for(var i=[],o=!1,n="",r=0;r<t.length;r++){var s=t[r];s!=e||o?" "==s&&!o||(n+=s):(i.push(n),n=""),"("==s&&(o=!0),")"==s&&(o=!1)}return n&&i.push(n),i}return null},T);function T(){return null!==R&&R.apply(this,arguments)||this}var k,M=(k=u,oe.__extends(L,k),L.prototype.equals=function(t,e,i){return void 0===e&&(e=1),void 0===i&&(i=r.NONE),this._color==t&&this._width==e&&this._type==i},L.prototype.toXml=function(t,e){ct.XmlUtils.setAttr(e,"style","thin"),ct.XmlUtils.addChildWithAttr(t,e,"color","rgb",this._color)},L);function L(t,e,i,o){void 0===i&&(i=1),void 0===o&&(o=r.NONE);var n=k.call(this,t)||this;return n._width=1,n._color=e,n._width=i,n._type=o,n}var F,V=(F=g,oe.__extends(O,F),O.prototype.createInstance=function(t,e,i){return new M(this.getIndexer(),t,e,i)},O.prototype.createFromCss=function(t,e){var i=t[e+"-style"];if(i&&"none"!=i){var o=new hi.Color(t[e+"-color"]),n=i,r=parseInt(t[e+"-width"]);return!o&&isNaN(r)?this._items[0]:(isNaN(r)&&(r=0),this.create(o.toColorHex(),r,n))}},O);function O(){return null!==F&&F.apply(this,arguments)||this}var N,P=(N=u,oe.__extends(B,N),_dp(B,"left",{get:function(){return this._left}}),_dp(B,"right",{get:function(){return this._right}}),_dp(B,"top",{get:function(){return this._top}}),_dp(B,"bottom",{get:function(){return this._bottom}}),B.prototype.dispose=function(){this._left=null,this._top=null,this._right=null,this._bottom=null,N.prototype.dispose.call(this)},B.prototype.equals=function(t,e,i,o){return M.EqualsById(this._left,t)&&M.EqualsById(this._top,e)&&M.EqualsById(this._right,i)&&M.EqualsById(this._bottom,o)},B.prototype.toXml=function(t,e){this.borderToXml(t,e,"left"),this.borderToXml(t,e,"right"),this.borderToXml(t,e,"top"),this.borderToXml(t,e,"bottom")},B.prototype.getBorder=function(t){return this[t]},B.prototype.borderToXml=function(t,e,i){var o=ct.XmlUtils.addChild(t,e,i),n=this[i];n&&n.toXml(t,o)},B);function B(t,e,i,o,n){var r=N.call(this,t)||this;return r._left=e,r._top=i,r._right=o,r._bottom=n,r}var A,$=(A=g,oe.__extends(H,A),H.prototype.dispose=function(){this._lines=null,A.prototype.dispose.call(this)},H.prototype.createInstance=function(t,e,i,o){return new P(this.getIndexer(),t,e,i,o)},H.prototype.createFromCss=function(t){var e=this._lines,i=e.createFromCss(t,"border-left"),o=e.createFromCss(t,"border-right"),n=e.createFromCss(t,"border-top"),r=e.createFromCss(t,"border-bottom");return i||o||n||r?this.create(i,n,o,r):void 0},H.prototype.toXml=function(t,e){for(var i=this._items.length,o=0;o<i;o++){var n=ct.XmlUtils.addChild(t,e,"border");this._items[o].toXml(t,n)}ct.XmlUtils.setAttr(e,"count",i)},H);function H(t){var e=A.call(this)||this;return e._lines=t,e}var G,U=(G=u,oe.__extends(W,G),_dp(W,"horzAlign",{get:function(){return this._horzAlign},set:function(t){this._horzAlign=t}}),_dp(W,"vertAlign",{get:function(){return this._vertAlign},set:function(t){this._vertAlign=t}}),W.prototype.dispose=function(){this._font=null,this._fill=null,this._border=null,G.prototype.dispose.call(this)},W.prototype.equals=function(t,e,i,o,n,r,s){return this._horzAlign==t&&this._vertAlign==e&&this._wrapText==i&&this._formatId==o&&v.EqualsById(this._font,n)&&E.EqualsById(this._fill,r)&&P.EqualsById(this._border,s)},W.prototype.toXml=function(t,e){ct.XmlUtils.setAttr(e,"borderId",(this._border?this._border.id:0)+""),ct.XmlUtils.setAttr(e,"fillId",(this._fill?this._fill.id:0)+""),ct.XmlUtils.setAttr(e,"fontId",(this._font?this._font.id:0)+""),ct.XmlUtils.setAttr(e,"numFmtId",this._formatId+""),ct.XmlUtils.setAttr(e,"xfId","0");var i=ct.XmlUtils.addChild(t,e,"alignment");ct.XmlUtils.setAttr(i,"horizontal",this._horzAlign),ct.XmlUtils.setAttr(i,"vertical",this._vertAlign),this._wrapText&&ct.XmlUtils.setAttr(i,"wrapText","1")},W.prototype.cloneAsNew=function(t,e,i,o,n,r,s,a){return new W(t,e||this._horzAlign,i||this._vertAlign,o||this._wrapText,n||this._formatId,r||this._font,s||this._fill,a||this._border)},W.prototype.cloneAsNew2=function(t,e,i){return this.cloneAsNew(t,e._horzAlign,e._vertAlign,i,e._formatId,e._font,e._fill,e._border)},W.FIRST_STYLE=0,W);function W(t,e,i,o,n,r,s,a){void 0===e&&(e=c.CENTER),void 0===i&&(i=p.CENTER),void 0===o&&(o=!1),void 0===n&&(n=0),void 0===r&&(r=null),void 0===s&&(s=null),void 0===a&&(a=null);var l=G.call(this,t)||this;return l._horzAlign=e,l._vertAlign=i,l._wrapText=o,l._formatId=n,l._font=r,l._fill=s,l._border=a,l}e.ExcelStyle=U;var z,j=(z=g,oe.__extends(q,z),q.prototype.dispose=function(){this._fonts=null,this._fills=null,this._borders=null,z.prototype.dispose.call(this)},q.prototype.cloneAsNew=function(t,e,i,o,n,r,s,a){var l=t.cloneAsNew(this.getIndexer(),e,i,o,n,r,s,a);return this._items.push(l),l},q.prototype.cloneAsNew2=function(t,e,i){var o=t.cloneAsNew2(this.getIndexer(),e,i);return this._items.push(o),o},q.prototype.createInstance=function(t,e,i,o,n,r,s){return void 0===t&&(t=c.NEAR),void 0===e&&(e=p.CENTER),void 0===i&&(i=!1),void 0===o&&(o=0),void 0===n&&(n=null),void 0===r&&(r=null),void 0===s&&(s=null),new U(this.getIndexer(),t,e,i,o,n,r,s)},q.prototype.createFromCss=function(t,e,i,o,n,r){void 0===e&&(e=!0),void 0===i&&(i=!0),void 0===o&&(o=!0),void 0===n&&(n=!1),void 0===r&&(r=0);var s=e?this._borders.createFromCss(t):null,a=i?this._fonts.createFromCss(t):null,l=o?this._fills.createFromCss(t):null,h=c.NEAR,d=p.CENTER,u=t["text-align"];u&&("center"==u?h=c.CENTER:"right"==u&&(h=c.FAR));var _=t["vertical-align"];return _&&("top"==_?d=p.NEAR:"bottom"==_&&(d=p.FAR)),this.create(h,d,n,r,a,l,s)},q.prototype.toXml=function(t,e){for(var i=this._items.length,o=0;o<i;o++){var n=ct.XmlUtils.addChild(t,e,"xf");this._items[o].toXml(t,n)}ct.XmlUtils.setAttr(e,"count",i)},q);function q(t,e,i){var o=z.call(this)||this;return o._fonts=t,o._fills=e,o._borders=i,o}var Y=(X.prototype.dispose=function(){this._styles.dispose(),this._borders.dispose(),this._lines.dispose(),this._fills.dispose(),this._fonts.dispose()},X.prototype.addFont=function(t){return t?this._fonts.createFromCss(t):null},X.prototype.addFill=function(t){return t?this._fills.createFromCss(t):null},X.prototype.addBorder=function(t){return t?this._borders.createFromCss(t):null},X.prototype.addNumberFormat=function(t){var e=this._numberFmts.indexOf(t);return e<0&&(this._numberFmts.push(t),e=this._numberFmts.length-1),X.EXCEL_NUMFMT_START+e},X.prototype.addStyle=function(t,e,i,o,n,r){return t?this._styles.createFromCss(t,e,i,o,n,r):null},X.prototype.extendStyle=function(t,e,i,o){var n=this._styles.createFromCss(e),r=this._styles.cloneAsNew2(t,n,i);return o&&(r._formatId=o),r},X.prototype.addStyleWithFormat=function(t,e){return this._styles.cloneAsNew(t,null,null,null,e)},X.prototype.createPart=function(){var t='<styleSheet xmlns="http://schemas.openxmlformats.org/spreadsheetml/2006/main"></styleSheet>',e=ct.XmlUtils.parse(t),i=e.documentElement;if(0<this._numberFmts.length){var o=ct.XmlUtils.addChild(e,i,"numFmts");this._createNumberFormats(e,o)}var n=ct.XmlUtils.addChild(e,i,"fonts");this._createFonts(e,n);var r=ct.XmlUtils.addChild(e,i,"fills");this._createFills(e,r);var s=ct.XmlUtils.addChild(e,i,"borders");this._createBorders(e,s);var a=ct.XmlUtils.addChild(e,i,"cellStyleXfs");this._createDefXfs(e,a);var l=ct.XmlUtils.addChild(e,i,"cellXfs");return this._createStyles(e,l),t=ct.XmlUtils.toString(e),_.XML_HEAD_STRING+t},X.prototype._createNumberFormats=function(t,e){for(var i=0,o=this._numberFmts.length;i<o;i++){var n=ct.XmlUtils.addChild(t,e,"numFmt");ct.XmlUtils.setAttr(n,"formatCode",this._numberFmts[i]),ct.XmlUtils.setAttr(n,"numFmtId",X.EXCEL_NUMFMT_START+i)}},X.prototype._createFonts=function(t,e){this._fonts.toXml(t,e)},X.prototype._createFills=function(t,e){this._fills.toXml(t,e)},X.prototype._createBorders=function(t,e){this._borders.toXml(t,e)},X.prototype._createDefXfs=function(t,e){var i=ct.XmlUtils.addChildWithAttr(t,e,"xf","count",1);ct.XmlUtils.setAttr(i,"borderId",0),ct.XmlUtils.setAttr(i,"fillId",0),ct.XmlUtils.setAttr(i,"fontId",0),ct.XmlUtils.setAttr(i,"numFmtId",0)},X.prototype._createStyles=function(t,e){this._styles.toXml(t,e)},X.EXCEL_NUMFMT_START=200,X);function X(){this._numberFmts=[],this._classStyles={},this._fonts=new x,this._fills=new D,this._lines=new V,this._borders=new $(this._lines),this._styles=new j(this._fonts,this._fills,this._borders),this._fills.create(d.NONE),this._fills.create(d.NONE,"ffffff"),this._borders.create(),this._fonts.create(),this._defStyle=this._styles.create()}e.ExcelWorkbookStyles=Y;var K,Z=(K=u,oe.__extends(Q,K),Q.prototype.dispose=function(){this._style=null,K.prototype.dispose.call(this)},Q.prototype.equals=function(t){return this.id==t},Q.prototype.toXml=function(t,e){ct.XmlUtils.setAttr(e,"min",this.id),ct.XmlUtils.setAttr(e,"max",this.id),ct.XmlUtils.setAttr(e,"width",this._width),this._style&&ct.XmlUtils.setAttr(e,"style",this._style.id)},Q.prototype.toTextXml=function(t){var e=this.id+1,i={min:e,max:e,width:this._width};this._style&&(i.style=this._style.id),li.TextXmlManager.addChild(t,"col",i)},Q);function Q(t,e,i){void 0===e&&(e=10),void 0===i&&(i=null);var o=K.call(this,t)||this;return o._width=10,o._style=null,o._width=e,o._style=i,o}e.ExcelColumn=Z;var J,tt,et,it=(J=g,oe.__extends(ot,J),ot.prototype.createInstance=function(t,e){return void 0===t&&(t=10),void 0===e&&(e=null),new Z(this.getIndexer(),t,e)},_dp(ot,"count",{get:function(){return this._items.length}}),ot.prototype.toTextXml=function(t){for(var e=li.TextXmlManager.addChild(t,"cols"),i=0,o=this.count;i<o;i++)this._items[i].toTextXml(e)},ot);function ot(){return null!==J&&J.apply(this,arguments)||this}(et=tt=e.ExcelCellType||(e.ExcelCellType={})).NONE="",et.TEXT="s",et.NUMBER="n",et.BOOLEAN="b";var nt=(rt.prototype.dispose=function(){this._style=null},rt.prototype.toXml=function(t,e){var i=ct.XmlUtils.addChild(t,e,rt.ELEMENT_NAME);ct.XmlUtils.setAttr(i,"r",this._range),this._type!=tt.NONE&&ct.XmlUtils.setAttr(i,"t",this._type.toString()),this._style&&ct.XmlUtils.setAttr(i,"s",this._style.id),this._fomula&&ct.XmlUtils.addChildWithValue(t,i,"f",this._fomula),this._value&&ct.XmlUtils.addChildWithValue(t,i,"v",this._value)},rt.prototype.toXmlText=function(){var t=[];t.push("<"+rt.ELEMENT_NAME),t.push(' r="'+this._range+'"'),this._type!=tt.NONE&&t.push(' t="'+this._type+'"'),this._style&&t.push(' s="'+this._style.id+'"'),t.push(">"),this._fomula&&t.push("<f>"+this._fomula+"</f>"),-1<this._value&&t.push("<v>"+this._value+"</v>"),t.push("</"+rt.ELEMENT_NAME+">");var e=t.join("");return t=null,e},rt.ELEMENT_NAME="c",rt);function rt(t,e,i,o,n,r){void 0===n&&(n=tt.NONE),this._range=_.toRange(e,t),this._style=i,this._type=n,this._fomula=r,this._value=o}var st=(_dp(at,"outLineLevel",{get:function(){return this._outlineLevel},set:function(t){this._outlineLevel=t}}),at.prototype.dispose=function(){for(var t=this._cells.length;t--;)this._cells[t].dispose(),this._cells[t]=null,delete this._cells[t]},at.prototype.toXml=function(t,e){var i=ct.XmlUtils.addChild(t,e,at.ELEMENT_NAME);ct.XmlUtils.setAttr(i,"r",this._index+1),this._height&&-1<this._height&&(ct.XmlUtils.setAttr(i,"ht",this._height),ct.XmlUtils.setAttr(i,"customHeight","1")),null!=this._outlineLevel&&ct.XmlUtils.setAttr(i,"outlineLevel",this._outlineLevel);for(var o=0,n=this._cells.length;o<n;o++)this._cells[o].toXml(t,i)},at.prototype.toXmlText=function(){var t,e=[];e.push("<"+at.ELEMENT_NAME),e.push(' r="'+(this._index+1)+'"'),this._height&&-1<this._height&&(e.push(' ht="'+this._height+'"'),e.push(' customHeight="1"')),null!=this._outlineLevel&&e.push(' outlineLevel="'+this._outlineLevel+'"'),e.push(">");for(var i=0,o=this._cells.length;i<o;i++)this._cells[i],e.push(this._cells[i].toXmlText());return e.push("</"+at.ELEMENT_NAME+">"),t=e.join(""),e=null,t},at.prototype.borrowCell=function(t,e,i,o,n){if(void 0===o&&(o=tt.NONE),!this._cells[t]){var r=new nt(this._index,t,e,i,o,n);this._cells[t]=r}},at.prototype.addBlank=function(t,e){this.borrowCell(t,e)},at.prototype.addCell=function(t,e,i,o,n){this.borrowCell(t,o,i,e,n)},at.prototype.addText=function(t,e,i){var o=e||"",n=this._book.addSharedString(o);this.addCell(t,tt.TEXT,n,i)},at.prototype.addNumber=function(t,e,i,o){var n=isNaN(e)||null==e?"":String(e);this.addCell(t,tt.NUMBER,n,i,o)},at.prototype.addBool=function(t,e,i){this.addCell(t,tt.BOOLEAN,e?1:0,i)},at.prototype.addDate=function(t,e,i){if(e){var o=_t.DateTimeConverter.Default.toExcelDate(e);this.addNumber(t,o,i)}else this.addCell(t,tt.TEXT,"",i)},at.ELEMENT_NAME="row",at);function at(t,e,i){this._sheet=t,this._book=t.workbook,this._index=e,this._height=i,this._cells=[]}e.ExcelRow=st;var lt=(ht.prototype.dispose=function(){this._txdim=null,this._txview=null,this._txdata=null,this._txmerge=null,li.TextXmlManager.removeItem(this._txdoc),this._txdoc=null,this._columns=null,this.clearRows(),this._dataRows=null},_dp(ht,"id",{get:function(){return ht.RELATION_ID+this._index}}),_dp(ht,"name",{get:function(){return this._name}}),_dp(ht,"colCount",{get:function(){return this._columns.count}}),_dp(ht,"rowCount",{get:function(){return this._dataRows.length}}),_dp(ht,"workbook",{get:function(){return this._book}}),ht.prototype.clearRows=function(){for(var t=this._dataRows.length;t--;)this._dataRows[t].dispose(),this._dataRows[t]=null,delete this._dataRows[t];this._dataRows=[]},ht.prototype.addColumn=function(t,e){return this._columns.createUnique(t,e)},ht.prototype.addRow=function(t,e){return this._dataRows[t]=new st(this,t,e)},ht.prototype.getRow=function(t){return this._dataRows[t]},ht.prototype.borrowRow=function(t,e){var i=this._dataRows[t];return i=i||this.addRow(t,e)},ht.prototype.setRowLevel=function(t,e){if(0<=e){var i=this._dataRows[t];i&&(i.outLineLevel=e,this._outlineLevel=Math.max(e,this._outlineLevel))}},ht.prototype.addSparkLine=function(t,e,i,o,n){},ht.prototype.addMerge=function(t,e,i,o){if(1<i||1<o){var n=_.toRange(e,t)+":"+_.toRange(e+o-1,t+i-1);li.TextXmlManager.addChild(this._txmerge,"mergeCell",{ref:n}),this._mergeCount++}},ht.prototype.createPart=function(){var t=this._txdoc,e="A1:"+_.toRange(this._columns.count-1,this._dataRows.length-1);li.TextXmlManager.addChild(t,"dimension",{ref:e}),0<this._outlineLevel&&li.TextXmlManager.addChild(t,"sheetFormatPtr",{outlineLevelRow:this._outlineLevel});var i=li.TextXmlManager.addChild(t,"sheetViews"),o={workbookViewId:0,showOutlineSymbols:"true"};0==this._book.count&&(o.tabSelected=1),li.TextXmlManager.addChild(i,"sheetView",o),this._columns&&this._columns.toTextXml(t);for(var n=li.TextXmlManager.addChild(t,"sheetData"),r=this._dataRows,s=0,a=r.length;s<a;s++)r[s]&&li.TextXmlManager.addText(n,r[s].toXmlText());return 0<this._mergeCount&&(li.TextXmlManager.addChildElement(this._txdoc,this._txmerge),li.TextXmlManager.addProperty(this._txmerge,"count",this._mergeCount+"")),_.XML_HEAD_STRING+li.TextXmlManager.toString(t)},ht.prototype._prepare=function(){this._txdoc=li.TextXmlManager.createDocument("worksheet",{xmlns:"http://schemas.openxmlformats.org/spreadsheetml/2006/main","xmlns:r":"http://schemas.openxmlformats.org/officeDocument/2006/relationships"}),this._txmerge=li.TextXmlManager.createDocument("mergeCells")},ht.RELATION_ID="rId",ht);function ht(t,e,i){this._doc=null,this._mergeCount=0,this._outlineLevel=0,this._dataRows=[],this._sparkGroups={},this._book=t,this._index=e,this._name=i,this._columns=new it,this._prepare()}e.ExcelWorksheet=lt;var dt=(ut.prototype.dispose=function(){if(this._parts={},this._strings.dispose(),this._strings=null,this._styles.dispose(),this._styles=null,this._sheets.length)for(var t=0,e=this._sheets.length;t<e;t++)this._sheets[t].dispose(),delete this._sheets[t];this._sheets=null},_dp(ut,"currentSheet",{get:function(){return this._currentSheet}}),_dp(ut,"count",{get:function(){return this._sheets?this._sheets.length:0}}),ut.prototype.createSheet=function(t){var e=new lt(this,this._sheet_indexer++,t||"Sheet"+(this._sheets.length+1));return this._sheets.push(e),this._currentSheet=e},ut.prototype.addSharedString=function(t){return this._strings.add(t)},ut.prototype.addNumberFormat=function(t){return this._styles.addNumberFormat(t)},ut.prototype.addStyle=function(t,e,i,o,n,r){return this._styles.addStyle(t,e,i,o,n,r)},ut.prototype.addStyleWithFormat=function(t,e){return this._styles.addStyleWithFormat(t,e)},ut.prototype.extendStyle=function(t,e,i,o){return this._styles.extendStyle(t,e,i,o)},ut.prototype.createParts=function(){var t=this._parts,e=li.TextXmlManager.createDocument("Types",{xmlns:"http://schemas.openxmlformats.org/package/2006/content-types"});li.TextXmlManager.addChild(e,"Default",{Extension:"rels",ContentType:"application/vnd.openxmlformats-package.relationships+xml"}),li.TextXmlManager.addChild(e,"Default",{Extension:"xml",ContentType:"application/xml"}),li.TextXmlManager.addChild(e,"Override",{PartName:"/docProps/app.xml",ContentType:"application/vnd.openxmlformats-officedocument.extended-properties+xml"}),li.TextXmlManager.addChild(e,"Override",{PartName:"/docProps/core.xml",ContentType:"application/vnd.openxmlformats-package.core-properties+xml"}),li.TextXmlManager.addChild(e,"Override",{PartName:"/xl/sharedStrings.xml",ContentType:"application/vnd.openxmlformats-officedocument.spreadsheetml.sharedStrings+xml"}),li.TextXmlManager.addChild(e,"Override",{PartName:"/xl/styles.xml",ContentType:"application/vnd.openxmlformats-officedocument.spreadsheetml.styles+xml"}),li.TextXmlManager.addChild(e,"Override",{PartName:"/xl/workbook.xml",ContentType:"application/vnd.openxmlformats-officedocument.spreadsheetml.sheet.main+xml"});var i=li.TextXmlManager.createDocument("Relationships",{xmlns:"http://schemas.openxmlformats.org/package/2006/relationships"});li.TextXmlManager.addChild(i,"Relationship",{Id:"rId1",Type:"http://schemas.openxmlformats.org/officeDocument/2006/relationships/sharedStrings",Target:"sharedStrings.xml"}),li.TextXmlManager.addChild(i,"Relationship",{Id:"rId2",Type:"http://schemas.openxmlformats.org/officeDocument/2006/relationships/styles",Target:"styles.xml"});var o=li.TextXmlManager.createDocument("workbook",{xmlns:"http://schemas.openxmlformats.org/spreadsheetml/2006/main","xmlns:r":"http://schemas.openxmlformats.org/officeDocument/2006/relationships"});li.TextXmlManager.addChild(o,"workbookPr",{date1904:"false"});var n=li.TextXmlManager.addChild(o,"bookViews");li.TextXmlManager.addChild(n,"workbookView",{activeTab:"0"});for(var r=li.TextXmlManager.addChild(o,"sheets"),s=0,a=this._sheets.length;s<a;s++){var l=this._sheets[s],h="worksheets/sheet"+(s+1).toString()+".xml",d="xl/"+h;t[d]=l.createPart(),e&&li.TextXmlManager.addChild(e,"Override",{PartName:"/"+d,ContentType:"application/vnd.openxmlformats-officedocument.spreadsheetml.worksheet+xml"}),r&&li.TextXmlManager.addChild(r,"sheet",{name:l.name||"Sheet"+(s+1).toString(),sheetId:(s+1).toString(),"r:id":l.id}),i&&li.TextXmlManager.addChild(i,"Relationship",{Id:l.id,Type:"http://schemas.openxmlformats.org/officeDocument/2006/relationships/worksheet",Target:h})}var u=_.XML_HEAD_STRING;return t["[Content_Types].xml"]=u+li.TextXmlManager.toString(e),t["xl/workbook.xml"]=u+li.TextXmlManager.toString(o),t["xl/_rels/workbook.xml.rels"]=u+li.TextXmlManager.toString(i),t["xl/sharedStrings.xml"]=this._strings.createPart(),t["xl/styles.xml"]=this._styles.createPart(),t},ut.prototype._preapreTemplateParts=function(){var t=this._parts,e=_.XML_HEAD_STRING,i=(new Date).toISOString();t["_rels/.rels"]=e+'<Relationships xmlns="http://schemas.openxmlformats.org/package/2006/relationships"><Relationship Id="rId1" Type="http://schemas.openxmlformats.org/officeDocument/2006/relationships/officeDocument" Target="xl/workbook.xml"/><Relationship Id="rId2" Type="http://schemas.openxmlformats.org/officeDocument/2006/relationships/extended-properties" Target="docProps/app.xml"/><Relationship Id="rId3" Type="http://schemas.openxmlformats.org/package/2006/relationships/metadata/core-properties" Target="docProps/core.xml"/></Relationships>',t["docProps/app.xml"]=e+'<Properties xmlns="http://schemas.openxmlformats.org/officeDocument/2006/extended-properties"><Application>RealGrid</Application><AppVersion>2.0</AppVersion></Properties>',t["docProps/core.xml"]=e+'<coreProperties xmlns="http://schemas.openxmlformats.org/package/2006/metadata/core-properties" xmlns:cp="http://schemas.openxmlformats.org/package/2006/metadata/core-properties" xmlns:dc="http://purl.org/dc/elements/1.1/" xmlns:dcterms="http://purl.org/dc/terms/" xmlns:xsi="http://www.w3.org/2001/XMLSchema-instance"><dcterms:created xsi:type="dcterms:W3CDTF">'+i+"</dcterms:created><dc:creator>Wooritech</dc:creator></coreProperties>"},ut);function ut(){this._sheet_indexer=3,this._parts={},this._parts={},this._strings=new l,this._styles=new Y,this._sheets=[],this._preapreTemplateParts()}e.ExcelWorkbook=dt});t(di);di.ExcelHorzAlign,di.ExcelVertAlign,di.ExcelUtil,di.ExcelStyle,di.ExcelWorkbookStyles,di.ExcelColumn,di.ExcelCellType,di.ExcelRow,di.ExcelWorksheet,di.ExcelWorkbook;var ui=e(function(t,e){Object.defineProperty(e,"__esModule",{value:!0});var r,i=(r=at.EditableItemProviderImpl,oe.__extends(o,r),o.prototype._doDispose=function(){this.clearListener(),this._rs&&this._rs.dispose(),this._rs=null,this._groupedProvider&&this._groupedProvider.dispose(),this._groupedProvider=null,this._summarizer&&this._summarizer.dispose(),this._summarizer=null,r.prototype._doDispose.call(this)},_dp(o,"maxRowCount",{get:function(){return this._rs.maxItemCount},set:function(t){this._rs.maxItemCount=Math.max(0,t)}}),_dp(o,"hideDeleted",{get:function(){return this._rs.hideDeleted},set:function(t){this._rs.hideDeleted=t}}),_dp(o,"inclusiveFiltering",{get:function(){return this._rs.isFilterOr},set:function(t){this._rs.isFilterOr=t}}),_dp(o,"summaryMode",{get:function(){return this._rs.summaryMode},set:function(t){this._rs.summaryMode=t}}),_dp(o,"groupSummaryMode",{get:function(){return this._groupedProvider.summaryMode},set:function(t){this._groupedProvider.summaryMode=t}}),_dp(o,"sortMode",{get:function(){return this._rs.sortMode},set:function(t){this._rs.sortMode=t}}),_dp(o,"filterMode",{get:function(){return this._rs.filterMode},set:function(t){this._rs.filterMode=t}}),_dp(o,"grouped",{get:function(){return this._groupedProvider.grouped}}),_dp(o,"mergedGrouped",{get:function(){return this._groupedProvider.grouped&&this._groupedProvider.mergeMode}}),_dp(o,"groupLevels",{get:function(){return this._groupedProvider.groupCount}}),_dp(o,"groupByFieldCount",{get:function(){return this._groupedProvider.groupCount}}),_dp(o,"groupByFields",{get:function(){return this._groupedProvider.groupedFields}}),_dp(o,"expandWhenGrouping",{set:function(t){this._groupedProvider.expandWhenGrouping=t}}),_dp(o,"summarizer",{get:function(){return this._summarizer}}),o.prototype.canGrouping=function(t){return this._groupedProvider.canGrouping(t)},o.prototype.getFieldDomain=function(t){return this._rs.getFieldDomain(t)},o.prototype.isFiltered=function(t){return null!=t?this._rs.hasFilter(t):this._rs.hasFilters()},o.prototype.addFilter=function(t,e){this._rs.addFilter(t,e)},o.prototype.removeFilter=function(t,e){this._rs.removeFilter(t,e)},o.prototype.clearFilters=function(t){this._rs.clearFilters(t)},o.prototype.clearAllFilters=function(){this._rs.clearAllFilters()},o.prototype.beginFiltering=function(){this._rs.beginFilter()},o.prototype.endFiltering=function(t,e){this._rs.endFilter(!0,t,e)},o.prototype.setHideDeletedRows=function(t){this._rs.hideDeleted=t},o.prototype.orderBy=function(t,e,i){if(this._groupedProvider.grouped&&this._groupSorting){for(var o=e?e.length:0,n=i?i.length:0,r=this._groupedProvider.groupedFields,s=this._rs.getSortDirections(),a=this._rs.getSortCases(),l=[],h=0,d=r.length;h<d;h++)l.push(r[h]);for(h=0,d=t.length;h<d;h++){var u=t[h],_=l.indexOf(u),c=void 0,p=void 0;c=h<o?e[h]:0<o?e[o-1]:lt.SortDirection.ASCENDING,p=h<n?i[h]:0<n?i[n-1]:lt.SortCase.SENSITIVE,_<0?(l.push(u),s[l.length-1]=c,a[l.length-1]=p):(s[_]=c,a[_]=p)}r=l,this._rs.orderBy(r,s,a)}else this._rs.orderBy(t,e,i)},o.prototype.getSortFields=function(){return this._rs.getSortFields()},o.prototype.getSortDirections=function(){return this._rs.getSortDirections()},o.prototype.getSortCases=function(){return this._rs.getSortCases()},o.prototype.setLabelComparer=function(t){this._rs.labelComparer=t},o.prototype.groupBy=function(t,e,i,o){void 0===e&&(e=!0),void 0===i&&(i=lt.SortDirection.ASCENDING),void 0===o&&(o=lt.SortCase.SENSITIVE),(t&&!(t.length<1)||this._groupedProvider.grouped)&&this._groupedProvider.canGrouping(t)&&(this._groupSorting=e,this._groupSortDirection=i,e&&this._rs.orderBy(t,[i],[o],!1),this._groupedProvider.groupBy(t))},o.prototype.groupByMode=function(t,e){this._groupSorting&&this._rs.orderBy(t,[this._groupSortDirection],[this._groupSortCase],!1),this._groupedProvider.canGrouping(t)&&this._groupedProvider.groupByMode(t,e)},o.prototype.addGroupBy=function(t,e,i){var o;if(this._groupedProvider.groupCount<1?o=[e]:(o=this._groupedProvider.groupedFields).splice(t,0,e),this._groupSorting=0===t?i:this._groupSorting,this._groupedProvider.canGrouping(o)){if(this._groupSorting){var n=[this._groupSortDirection];this._rs.orderBy(o,n,null,!1)}this._groupedProvider.groupBy(o)}},o.prototype.removeGroupBy=function(t,e){if(this._groupedProvider.grouped){for(var i=this._groupedProvider.groupedFields,o=-1,n=0,r=i.length-1;0<=r;r--)if(n++,i[r]==t){o=r;break}if(0<=o){if(i.splice(o,e?n:1),!this._groupedProvider.canGrouping(i))return;this._groupSorting&&this._rs.orderBy(i,[this._groupSortDirection],null,!1),this._groupedProvider.groupBy(i)}else{if(!this._groupedProvider.canGrouping(null))return;this._groupSorting&&this._rs.orderBy(null,null,null,!1)}}},o.prototype.isGroupedField=function(t){return this._groupedProvider.isGroupedField(t)},o.prototype.getGroupLevel=function(t){return this._groupedProvider.getGroupLevel(t)},_dp(o,"isGroupSorting",{set:function(t){this._groupSorting=t,this._groupedProvider._groupSorting=t}}),o.prototype.expand=function(t,e,i,o){this._groupedProvider.expand(t,e,i,o)},o.prototype.collapse=function(t,e,i){this._groupedProvider.collapse(t,e,i)},o.prototype.collapseAll=function(t){this._groupedProvider.collapseAll(t)},o.prototype.expandAll=function(t,e){this._groupedProvider.expandAll(t,e)},o.prototype.setPaging=function(t,e,i,o){this._rs.setPaging(t,e,i,o)},_dp(o,"page",{get:function(){return this._rs.page}}),o.prototype.setPage=function(t,e){this._rs.setPage(t,e)},_dp(o,"pageCount",{get:function(){return this._rs.pageCount},set:function(t){this._rs.pageCount=t}}),o.prototype.getDisplayItemIndex=function(t){return this._rs.isPaging?t.index+this._rs.pageStartIndex:t.index},o.prototype.getCheckedRows=function(t){return this._rs.getCheckedRows(t)},_dp(o,"checkableExpression",{set:function(t){this._rs.checkableExpression=t}}),_dp(o,"checkableCallback",{set:function(t){this._rs.checkableCallback=t}}),o.prototype.resetCheckables=function(){this._rs.resetCheckables()},o.prototype.applyCheckables=function(){this._rs.applyCheckables()},o.prototype.setCheckFieldIndex=function(t){this._rs.setCheckFieldIndex(t)},o.prototype.getFirstRow=function(){if(0<this.itemCount)return this._groupedProvider.grouped?this._groupedProvider.getFirstRow():this._rs.getItem(0)},o.prototype.getLastRow=function(){if(0<this.itemCount)return this._groupedProvider.grouped?this._groupedProvider.getLastRow():this._rs.getItem(this._rs.itemCount-1)},o.prototype.getPrevRow=function(t){if(0<this.itemCount)return this._groupedProvider.grouped?this._groupedProvider.getPrevRow(t):t&&0<t.index?this._rs.getItem(t.index-1):this._rs.getItem(0)},o.prototype.getNextRow=function(t){if(0<this.itemCount)return this._groupedProvider.grouped?this._groupedProvider.getNextRow(t):t&&t.index<this._rs.itemCount-1?this._rs.getItem(t.index+1):this._rs.getItem(0)},o.prototype.getGroupItem=function(t){if(this._groupedProvider.grouped)return this._groupedProvider.getGroupItem(t)},_dp(o,"rowCount",{get:function(){return this._rs.rowCount}}),_dp(o,"visibleRowCount",{get:function(){return this.grouped?this._groupedProvider.visibleRowCount:this._rs.rowCount}}),_dp(o,"sorted",{get:function(){return this._rs.sorted}}),_dp(o,"movable",{get:function(){return!this.grouped&&this._rs.movable}}),o.prototype.getAllItems=function(){return this._groupedProvider.getAllItems()},o.prototype.getPagingAllItems=function(){var t=this._rs;return t.isSorted?t._sortedItems.slice():t._items.slice()},o.prototype.findItem=function(t,e,i,o,n){return this._groupedProvider.findItem(t,e,i,o,n)},o.prototype.findCell=function(t,e,i,o,n,r){return this._groupedProvider.findCell(t,e,i,o,n,r)},o.prototype.checkItems=function(t,e,i){this._groupedProvider.checkItems(t,e,i)},o.prototype.checkItem=function(t,e,i,o){this._groupedProvider.checkItem(t,e,i,o)},o.prototype.checkAll=function(t,e,i,o,n){this._groupedProvider.checkAll(t,e,i,o,n)},o.prototype.setItemChecked=function(t,e){var i=this._rs._checkFieldIndex;return-1<i&&(this.isEditing(t)?t.setValue(i,e):t.setData(i,e),!0)},o.prototype.getItemChecked=function(t,e){var i=this._rs._checkFieldIndex;return-1<i?t.getData(i):e},o.prototype.getItemOfRow=function(t,e){return void 0===e&&(e=!1),this._rs.getItemOfRow(t,e)},o.prototype._doBeginUpdate=function(t){var e=r.prototype._doBeginUpdate.call(this,t);return this._groupedProvider.$_setEditItem(e),e},o.prototype._doBeginAppendDummy=function(){var t=r.prototype._doBeginAppendDummy.call(this);return this._groupedProvider.$_setDummyEditItem(t),t},o.prototype._doBeginAppend=function(t){var e=r.prototype._doBeginAppend.call(this,t);return this._groupedProvider.$_setEditItem(e),e},o.prototype._doBeginInsert=function(t,e,i,o){var n=r.prototype._doBeginInsert.call(this,t,e,i,o);return this._groupedProvider.$_setEditItem(n),n},o.prototype._doCancelDummyEdit=function(){r.prototype._doCancelDummyEdit.call(this),this._groupedProvider.$_setDummyEditItem(null)},o.prototype._doCancelEdit=function(t,e){r.prototype._doCancelEdit.call(this,t,e),this._groupedProvider.$_setEditItem(null)},o.prototype._doCommitEdit=function(t,e){return!!r.prototype._doCommitEdit.call(this,t,e)&&(this._groupedProvider.$_setEditItem(null),!0)},o.prototype.onGroupedItemProviderGrouping=function(t,e){return this.fireConfirmEvent(St.GroupedItemProvider.GROUPING,e)},o.prototype.onGroupedItemProviderGrouped=function(t){this.fireEvent(St.GroupedItemProvider.GROUPED)},o.prototype.onGroupedItemProviderExpand=function(t,e){this.fireEvent(St.GroupedItemProvider.EXPAND,e)},o.prototype.onGroupedItemProviderExpanded=function(t,e){this.fireEvent(St.GroupedItemProvider.EXPANDED,e)},o.prototype.onGroupedItemProviderCollapse=function(t,e){this.fireEvent(St.GroupedItemProvider.COLLAPSE,e)},o.prototype.onGroupedItemProviderCollapsed=function(t,e){this.fireEvent(St.GroupedItemProvider.COLLAPSED,e)},o.prototype.onItemProviderFilterAdded=function(t,e,i){this._fireFilterAdded(e,i)},o.prototype.onItemProviderFilterRemoved=function(t,e,i){this._fireFilterRemoved(e,i)},o.prototype.onItemProviderFilterCleared=function(t,e){this._fireFilterCleared(e)},o.prototype.onItemProviderFilterAllCleared=function(t){this._fireFilterAllCleared()},o.prototype.onItemProviderFiltered=function(t,e,i){this._fireFiltered(e,i)},o.prototype.onItemProviderSort=function(t,e,i){this._fireSort(e,i,null)},o.prototype.onItemProviderSorted=function(t){this._fireSorted()},o);function o(t,e){void 0===e&&(e=null);var i=r.call(this,null,t)||this;return i._groupSorting=!0,i._groupSortDirection=lt.SortDirection.ASCENDING,i._groupSortCase=lt.SortCase.SENSITIVE,i._rs=new Fe.DefaultItemProvider(!1),i._rs.addListener(i),i._groupedProvider=new St.GroupedItemProvider(i._rs,!1),i._groupedProvider.footerCounter=e,i.source=i._groupedProvider,i._summarizer=new ti.DefaultSummarizer(i._rs),i}e.GridItemProvider=i});t(ui);ui.GridItemProvider;var _i=e(function(t,e){Object.defineProperty(e,"__esModule",{value:!0});var n,i=(n=Ut.VisualElement,oe.__extends(o,n),o.prototype._doDispose=function(){n.prototype._doDispose.call(this)},_dp(o,"owner",{get:function(){return this._owner}}),_dp(o,"clickable",{get:function(){return this._clickable},set:function(t){t!=this._clickable&&(this._clickable=t,this._changed())}}),o.prototype._getCssSelector=function(){return""},o.prototype._doDraw=function(t){},o.prototype._hoverChanged=function(){this.invalidate()},o.prototype._changed=function(){this.invalidate()},o);function o(t,e,i){void 0===i&&(i=null);var o=n.call(this,t,i)||this;return o._clickable=!1,o._owner=e,o}e.HandleElement=i;var r,s=(r=i,oe.__extends(a,r),a.prototype._doDispose=function(){r.prototype._doDispose.call(this)},_dp(a,"cellView",{get:function(){return this.owner}}),a);function a(t,e,i){return void 0===i&&(i=null),r.call(this,t,e,i)||this}e.CellHandle=s});t(_i);_i.HandleElement,_i.CellHandle;var ci=e(function(t,e){Object.defineProperty(e,"__esModule",{value:!0});var i,o=(i=Kt.CellElement,oe.__extends(n,i),n.prototype._doUpdateContent=function(t,e,i){i[ne.Utils.TextProp]=""},n.prototype._doRender=function(t){},n);function n(t){return i.call(this,t,"rowGroupHeadCellView")||this}var r,s=(r=Yt.SimpleTableElement,oe.__extends(a,r),a.prototype._doDispose=function(){this._cells=null,r.prototype._doDispose.call(this)},a.prototype.prepare=function(t,e){for(this._levels=t,this._count=e?2*t:t;this._cells.length<this._count;){var i=new o(this.doc);this._cells.push(i)}},a.prototype._getCssSelector=function(){return"rg-rowgroup-head"},a.prototype._getTableRowHeight=function(t,e){return 1==e?t.summaryBounds.height:t.headBounds.height},a.prototype._doPrepareTableExtents=function(t){if(0<this._count)for(var e=this.width/this._levels,i=0;i<this._count;i++)this._cells[i].width=e},a.prototype._prepareCellContent=function(t,e){var i=ne.getDoc(t);return t[lt.T_LEV]=e+1,i.createElement("div")},a.prototype._doLayoutContent=function(t){for(var e=this._count;this.childCount<e;)this.addChild(this._cells[this.childCount]);for(;this.childCount>e;)this.removeLast()},a.prototype._doRender=function(t){},a.prototype._getTableRowCount=function(t){return 2},a.prototype._getCellCount=function(t){return this._count},a.prototype._getCellWidth=function(t,e){return this._cells[e].width},a);function a(t){var e=r.call(this,t,null,"rowGroupHeadView")||this;return e._cells=[],e._levels=0,e._count=0,e}e.RowGroupHeadElement=s;var l,h=(l=Kt.CellElement,oe.__extends(d,l),d.prototype._doUpdateContent=function(t,e,i){i[ne.Utils.TextProp]=""},d.prototype._doRender=function(t){},d);function d(t){return l.call(this,t,"rowGroupFootCellView")||this}var u,_=(u=Yt.SimpleTableElement,oe.__extends(c,u),c.prototype._doDispose=function(){this._cells=null,u.prototype._doDispose.call(this)},c.prototype.prepare=function(t){for(this._levels=t;this._cells.length<t;){var e=new h(this.doc);this._cells.push(e)}},c.prototype._getCssSelector=function(){return"rg-rowgroup-foot"},c.prototype._getTableRowHeight=function(t,e){return t.footBounds.height},c.prototype._doPrepareTableExtents=function(t){if(0<this._levels)for(var e=this.width/this._levels,i=0;i<this._levels;i++)this._cells[i].width=e},c.prototype._prepareCellContent=function(t,e){var i=ne.getDoc(t);return t[lt.T_LEV]=e+1,i.createElement("div")},c.prototype._doLayoutContent=function(t){t.grid;for(var e=this._levels;this.childCount<e;)this.addChild(this._cells[this.childCount]);for(;this.childCount>e;)this.removeLast()},c.prototype._doRender=function(t){},c.prototype._getTableRowCount=function(t){return 1},c.prototype._getCellCount=function(t){return this._levels},c.prototype._getCellWidth=function(t,e){return this._cells[e].width},c);function c(t){var e=u.call(this,t,null,"rowGroupFootView")||this;return e._cells=[],e._levels=0,e}e.RowGroupFootElement=_;var p,f="rg-rowgroup-expander",g=(p=_i.CellHandle,oe.__extends(m,p),m.isExpander=function(t){var e=t.className;return e&&0<=e.indexOf(f)},_dp(m,"expanded",{get:function(){return this._expanded},set:function(t){t!=this._expanded&&(this._expanded=t,this._changed())}}),m.prototype._createDom=function(t){return t.createElement("span")},m.prototype._initDom=function(t){p.prototype._initDom.call(this,t),t.style.position="",t.style.display="inline-block"},m.prototype._getCssSelector=function(){return this._expanded?"rg-rowgroup-expander rg-rowgroup-expander-expanded":"rg-rowgroup-expander rg-rowgroup-expander-collapsed"},m.prototype._getCssDisplay=function(){return""},m.prototype._beforeDraw=function(t){this._setClassName(t)},m);function m(t,e){var i=p.call(this,t,e,"rowGroupExpandHandle")||this;return i._expanded=!1,i.clickable=!0,i}e.RowGroupExpandHandle=g;var y,v=(y=Kt.CellElement,oe.__extends(w,y),_dp(w,"level",{get:function(){return this._level},set:function(t){this._level=t}}),w.prototype.updateCell=function(t,e,i){y.prototype.updateCell.call(this,t,e,i);var o=e.item;if(o instanceof dt.GroupItemImpl&&o.level==this.bar.l||o instanceof dt.GroupFooter&&o.expandable&&o.displayLevel===this.bar.l){var n=this._expander._dom,r=o instanceof dt.GroupItemImpl?o:o.parent;i.appendChild(n),this._expander.setBounds(1,1,this.width-2,this.width-2),this._expander.expanded=r.expanded,this._expander.visible=!0,n[lt.T_ROW]=o.index}else this._expander.visible=!1;i.style.paddingTop="2px"},w.prototype.validate=function(){y.prototype.validate.call(this);var t=this._expander._dom;t&&t.parentElement&&t.parentElement.removeChild(t)},w);function w(t){var e=y.call(this,t,"rowGroupBarCell")||this;return e._level=0,e._expander=new g(t,e),e.addChild(e._expander),e}var C,x=(C=Yt.DataTableElement,oe.__extends(b,C),b.prototype._doDispose=function(){this._cells=null,C.prototype._doDispose.call(this)},b.prototype.prepare=function(t,e){this._levels=e},b.prototype.getLevelIndent=function(t){return t*this.width/this._levels},b.prototype._getCssSelector=function(){return"rg-rowgroup-bar"},b.prototype._prepareCellContent=function(t,e){return ne.getDoc(t).createElement("div")},b.prototype._doLayoutContent=function(t){for(var e,i=t.grid,o=i.rowGroup,n=this.width/this._levels,r=this._bars,s=r.length,a=t.topIndex,l=t.fixedItemCount,h=0<l;this.childCount<s;)e=0<this._cells.length?this._cells.pop():this._createCell(),this.addChild(e);for(;this.childCount>s;)(e=this.removeLast()).validate(),this._cells.push(e);for(var d=0;d<s;d++){var u=r[d];e=this.getChild(d);var _=u.tr1,c=h?_<l?_:_-1+a:_+a,p=kt.CellIndex.temp(i,c),f=o.getBarCell(p),g=t.getTableItemBounds(u.r);e.bar=u,e.level=u.c+1,e.updateCell(i,f,this.getCellContent(_,u.c)),g.x=n*u.c,g.width=n,e.setRect(g)}},b.prototype._doRender=function(t){},b.prototype._doPrepareTableRows=function(t,e){C.prototype._doPrepareTableRows.call(this,t,e),this.$_layoutBarCells(t,e)},b.prototype._getTableRowHeight=function(t,e){var i=0<t.fixedItemCount&&e>t.fixedItemCount?1:0;return t.getTableItemHeight(e-i)},b.prototype._getCellCount=function(t){return this._levels},b.prototype._getCellWidth=function(t,e){return this.width/this._levels},b.prototype._createCell=function(){return new v(this.doc)},b.prototype.$_calcLevels=function(t,e,i,o){for(var n=new Array,r=i;r<o;r++){var s=t[r];n.push(s instanceof dt.GroupFooter?s.displayLevel:s.level)}var a=-1,l=0;for(r=0;r<n.length;r++){var h=n[r];h<e?(n[r]=1,0<=a&&(n[a]=l,a=-1,l=0)):h==e?(0<=a&&(n[a]=l),a=r,l=1):(a<0?a=r:n[r]=-1,l++)}return 0<=a&&(n[a]=l),n},b.prototype.$_layoutBarCells=function(t,e){t.grid;var i=t.$_getItems(),o=i.length,n=t.fixedItemCount,r=e.children,s=this._bars=[];if(!(o<1)){for(var a=0,l=this._getCellCount(t);a<l;a++){var h=a+1,d=0,u=0;if(0<n){for(var _=void 0,c=void 0;d<n;d++,u++)(c=(_=r[u]).children[a]).style.display="",c.removeAttribute("rowspan"),ne.Utils.setClassName(c,""),0===a&&ne.Utils.setClassName(_,""),c[lt.T_ROW]=d;_=r[u++],0===a&&ne.Utils.setClassName(_,Ht.FixedOptions.ROW_BAR_STYLE),(c=_.children[a]).style.display="",c.removeAttribute("rowspan"),ne.Utils.setClassName(c,Ht.FixedOptions.ROW_BAR_CELL_STYLE)}if(d<o)for(var p=this.$_calcLevels(i,h,d,o),f=0;d<o;d++,f++,u++){var g=p[f],m=(c=(_=r[u]).children[a],i[d]);0===a&&ne.Utils.setClassName(_,""),0<g?(1<g||m instanceof dt.GroupItemImpl&&m.level==h?(s.push({r:d,tr1:u,tr2:u+g-1,c:a,l:h}),c.rowSpan=g):c.removeAttribute("rowspan"),c.style.display="",ne.Utils.setClassName(c,"rg-rowgroup-bar-cell rg-rowgorup-bar-level-"+String(h)),c[lt.T_ROW]=m.index):(c.removeAttribute("rowspan"),c.style.display="none",ne.Utils.setClassName(c,""))}}s.sort(function(t,e){return t.r-e.r})}},b);function b(t){var e=C.call(this,t,null,"rowGroupBarContainer")||this;return e._cells=[],e._levels=0,e._bars=[],e}e.RowGroupBarContainer=x;var I,E=(I=me.DataContentPane,oe.__extends(S,I),S.prototype._doDispose=function(){I.prototype._doDispose.call(this)},_dp(S,"levelCount",{get:function(){return this.grid.layoutManager.rowGroupLevels}}),S.prototype.getLevelIndent=function(t){return this._barContainer.getLevelIndent(t)},S.prototype._doMeasure=function(t,e,i){var o=this.levelCount;return this._headView.prepare(o,t.headerSummaries.visible),this._footView.prepare(o),this._barContainer.prepare(t,o),new jt.Size(this.levelCount*t.rowGroup.levelIndent,i)},S.prototype._doLayoutContent=function(t){var e=t.headBounds,i=t.summaryBounds;(this._headView.visible=!e.isEmpty||!i.isEmpty)&&(this._headView.setBounds(0,e.y,this.width,e.height+i.height),this._headView.layoutContent(t)),e=t.footBounds,(this._footView.visible=!e.isEmpty)&&(this._footView.setBounds(0,e.y,this.width,e.height),this._footView.layoutContent(t)),e=t.rowBarBounds,this._barContainer.setBounds(0,e.y,this.width,e.height),this._barContainer.layoutContent(t)},S.prototype._getCssSelector=function(){return"rg-rowgroup-bar-container"},S);function S(t){var e=I.call(this,t,"rowGroupBarPane")||this;return e._barContainer=new x(t),e.addChild(e._barContainer),e._footView=new _(t),e.addChild(e._footView),e._headView=new s(t),e.addChild(e._headView),e}e.RowGroupBarPane=E;var R,D=(R=me.DataContentPane,oe.__extends(T,R),T.prototype._doDispose=function(){R.prototype._doDispose.call(this)},T);function T(t){return R.call(this,t,"rowGroupPane")||this}e.RowGroupPane=D;var k,M=(k=Kt.CellElement,oe.__extends(L,k),L.prototype._doDispose=function(){k.prototype._doDispose.call(this)},_dp(L,"indent",{get:function(){return this._indent},set:function(t){this._indent=Math.max(0,t)}}),L.prototype._createDom=function(t){return t.createElement("div")},L.prototype._initDom=function(t){k.prototype._initDom.call(this,t);var e=t.style;e.top="50%",e.msTransform=e.transform="translate(0px, -50%)",e.setProperty("overflow","hidden","important"),e.setProperty("pointer-events","none","important")},L.prototype._beforeDraw=function(t){},L.prototype._doUpdateContent=function(t,e,i){i[ne.Utils.TextProp]=e.text,i.style.left=0<this._indent?this._indent+"px":""},L);function L(t){var e=k.call(this,t,"rowGroupHeaderCellView")||this;return e._indent=0,e}e.RowGroupHeaderCellElement=M;var F,V=(F=qt.GridElement,oe.__extends(O,F),O.prototype._doDispose=function(){this._item=null,this._cellView=null,F.prototype._doDispose.call(this)},_dp(O,"item",{get:function(){return this._item},set:function(t){this._item=t}}),_dp(O,"itemIndex",{get:function(){return this._item.index}}),O.prototype._initDom=function(t){F.prototype._initDom.call(this,t),t.style.setProperty("overflow","hidden","important")},O.prototype._getCssSelector=function(){return"rg-rowgroup-header rg-rowgroup-header-level-"+String(this._item.level)},O.prototype._doLayoutContent=function(t){var e=t.grid,i=e.rowGroup;this._cellView.indent=i.indentVisible?0:e.groupBarPane.getLevelIndent(this._item.level-1),this._cellView.updateCell(e,i.getHeaderCell(this._item),this._cellView._dom)},O);function O(t){var e=F.call(this,t,"rowGroupHeaderView")||this;return e._cellView=new M(t),e.addChild(e._cellView),e}e.RowGroupHeaderElement=V;var N,P=(N=qt.GridElement,oe.__extends(B,N),B.prototype._doDispose=function(){this._item=null,N.prototype._doDispose.call(this)},_dp(B,"item",{get:function(){return this._item},set:function(t){this._item=t}}),B.prototype._getCssSelector=function(){return"rg-rowgroup-header rg-rowgroup-header-level-"+String(this._item.level)},B);function B(t){return N.call(this,t,"rowGroupRightHeaderView")||this}e.RowGroupRightHeaderElement=P;var A,$=(A=Qt.ItemElement,oe.__extends(H,A),H.prototype._doLayoutContent=function(t){var e=t.grid,i=e.rowGroup,o=t.cellLayouts._dataCells.length,n=this._getFirstCell(t),r=this._getStartCell(t)-n,s=r,a=this._getEndCell(t)-n;this._item instanceof St.MergedGroupFooter&&(s=Math.max(r,this._item.parent.level-n)),this.$_refreshSpans(this._item.index,this._item.$_footerIndex,o,s,a);for(var l=0;l<o;l++){var h=this._getTableRow(t,this._domIndex+l),d=this._getBodyCells(this._domIndex+l),u=i.getFooterStyleName(this._item);h.className=u;for(var _=s;_<=a;_++){var c=d[_],p=c.layout;if(c.clearExpander(),c.renderer2&&c.renderer2.clearContent(),c.visible)if(p.isNull)p.isProxy||c.setClassName(Xe.RowGroup.FOOTER_CELL_STYLE);else{var f=kt.CellIndex.temp(e,this._item.index,p),g=i.getFooterCell(f);this._updateCell(e,i,g,c)}}}},H.prototype._getBodyCells=function(t){return this.parent.$_getBodyCells(t)},H.prototype._getTableRow=function(t,e){return this.parent.$_getTableRow(t,e)},H.prototype._getTableCell=function(t){return this.parent.$_getTableCell(this._domIndex,t)},H.prototype._getFirstCell=function(t){return t._firstCell},H.prototype._getLastCell=function(t){return t._lastCell},H.prototype._getStartCell=function(t){return t.getStartCell()},H.prototype._getEndCell=function(t){return t.getEndCell()},H.prototype._getBodyView=function(){return this.parent._bodyView},H.prototype._updateCell=function(t,e,i,o){var n=i.dataColumn.groupFooters.get(i.footerIndex),r=e.getFooterCellStyle(i,o.style.clear()),s=i.getSummary();if(o.setClassName(r.styleName),o.refreshFormatters(r),e.getFooterCellFormatters(n,o),s){var a=i.getTemplate(o);void 0===a?o.cell.lastElementChild[ne.Utils.TextProp]=i.getDisplayText(o):o.cell.lastElementChild.innerHTML=a}else o.cell.lastElementChild[ne.Utils.TextProp]=""},H.prototype.$_refreshSpans=function(t,e,i,o,n){for(var r=0;r<i;r++)for(var s=this._getBodyCells(this._domIndex+r),a=o;a<=n;a++){var l=s[a],h=l.layout,d=h.parent,u=d&&d.vertical;if(!l.spanned)if(h.isProxy)l.clear(!1);else{var _=0,c=h.getGroupFooterSpan(t,e)-1;if(0<c){var p=0,f=h.vindex+1;if(u)for(;p++<c&&p<i;)_+=d.getVisible(f++)._dspan,this._getBodyCells(this._domIndex+r+1)[a].span(l);else for(;p++<c&&f<Math.min(n-o+1,d.visibleCount);)_+=d.getVisible(f++)._cspan,s[a+p].span(l)}h.isNull&&l.clear(!0),u?l.set(h._cspan,h._dspan+_,!0):l.set(h._cspan+_,h._dspan,!0)}}},H);function H(t){return A.call(this,t,"rowGroupFooterView")||this}e.RowGroupFooterElement=$;var G,U=(G=$,oe.__extends(W,G),W.prototype._getBodyCells=function(t){return this.parent.$_getFixedBodyCells(t)},W.prototype._getTableRow=function(t,e){return this.parent.$_getFixedTableRow(e)},W.prototype._getTableCell=function(t){return this.parent.$_getFixedTableCell(this._domIndex,t)},W.prototype._getBodyView=function(){return this.parent._fixedView},W.prototype._getFirstCell=function(t){return this._getStartCell(t)},W.prototype._getLastCell=function(t){return this._getEndCell(t)},W.prototype._getStartCell=function(t){return 0},W.prototype._getEndCell=function(t){return t.fixedLayoutCount-1},W);function W(){return null!==G&&G.apply(this,arguments)||this}e.RowGroupFixedFooterElement=U;var z,j=(z=$,oe.__extends(q,z),q.prototype._getBodyCells=function(t){return this.parent.$_getRightBodyCells(t)},q.prototype._getTableRow=function(t,e){return this.parent.$_getRightTableRow(e)},q.prototype._getTableCell=function(t){return this.parent.$_getRightTableCell(this._domIndex,t)},q.prototype._getBodyView=function(){return this.parent._rightView},q.prototype._getFirstCell=function(t){return this._getStartCell(t)},q.prototype._getLastCell=function(t){return this._getEndCell(t)},q.prototype._getStartCell=function(t){return t.layoutCount-t.rightLayoutCount},q.prototype._getEndCell=function(t){return t.layoutCount-1},q);function q(){return null!==z&&z.apply(this,arguments)||this}e.RowGroupRightFooterElement=j;var Y,X=(Y=Ut.LayerElement,oe.__extends(K,Y),K.prototype._doDispose=function(){this._bodyView=this._fixedView=this._rightView=null,Y.prototype._doDispose.call(this)},_dp(K,"grid",{get:function(){return this.getAncestor(gi.GridView)}}),K.prototype.layout=function(t){this._doPrepareContent(t),this._doLayoutContent(t)},K.prototype.getHeaderView=function(t){for(var e=0,i=this._headerViews;e<i.length;e++){var o=i[e];if(o.item===t)return o}},K.prototype._initDom=function(t){Y.prototype._initDom.call(this,t);var e=t.style;e.setProperty("overflow","hidden","important"),e.setProperty("pointer-events","none","important")},K.prototype._getCssSelector=function(){return"rg-rowgroup-layer"},K.prototype._doDraw=function(t){},K.prototype._doPrepareContent=function(t){this.$_prepareHeaders(t)},K.prototype.$_prepareIndents=function(t){for(var e=this._indents,i=t.rowGroupLevels+1,o=0;o<e.length;o++)e[o]=t.getLevelIndent(o);for(;e.length<i;)e.push(t.getLevelIndent(e.length));return e},K.prototype._doLayoutContent=function(t){var e,i=this.$_prepareIndents(t),o=t.$_getItems(),n=o.length,r=t.fixedItemCount,s=0<r,a=this._rightView,l=t.contentBounds.right-t.sideContentBounds.x,h=0,d=0,u=t.trs,_=r,c=s?_*u+1:_*u;for(a&&(e=t.rightContentBounds.clone(),l=Math.min(l,this.width-e.width),e.x-=this.x,e.leftBy(t.rightBarWidth));_<n;_++){var p=o[_];if(p instanceof dt.GroupItemImpl){var f=this._headerViews[h],g=t.getTableItemBounds(_),m=i[p.level];if(f.item=p,f.setBounds(m,g.y,l-m,g.height),f.layoutContent(t),a){var y=this._rightHeaderViews[h];y.item=p,y.setBounds(e.x,g.y,e.width,g.height),y.layoutContent(t)}h++,c++}else if(p instanceof dt.GroupFooter){if(this._fixedView){var v=this._fixedFooterViews[d];v.updateItem(p,c,u,!0),v.layoutContent(t)}if(this._rightView){var w=this._rightFooterViews[d];w.updateItem(p,c,u,!0),w.layoutContent(t)}f=this._footerViews[d++],ne.Utils.isDebugging(),f.updateItem(p,c,u,!0),f.layoutContent(t),c+=u}else c+=u}},K.prototype.$_prepareHeaders=function(t){for(var e=t.$_getItems(),i=0,o=t.fixedItemCount,n=e.length;o<n;o++)e[o]instanceof dt.GroupItemImpl&&i++;for(var r=this._headerPool,s=this._headerViews;s.length<i;)a=(a=r.pop())||new V(this.doc),this.addChild(a),s.push(a);for(;s.length>i;){var a=s.pop();this.removeChild(a),r.push(a)}if(this._rightView){for(var l=this._rightHeaderPool,h=this._rightHeaderViews;h.length<i;)a=(a=l.pop())||new P(this.doc),this.addChild(a),h.push(a);for(;h.length>i;)a=h.pop(),this.removeChild(a),l.push(a)}else for(var d=this._rightHeaderPool,u=this._rightHeaderViews;0<u.length;)a=u.pop(),this.removeChild(a),d.push(a)},K.prototype.$_prepareGroupItems=function(t,e,i,o){this._bodyView=e,this._fixedView=i,this._rightView=o},K.prototype.$_prepareGroupFooters=function(t,e){for(var i=0,o=e.fixedItemCount,n=t.length;o<n;o++)t[o]instanceof dt.GroupFooter&&i++;for(;this._footerViews.length<i;)r=(r=this._footerPool.pop())||new $(this.doc),this.addChild(r),this._footerViews.push(r);for(;this._footerViews.length>i;){var r=this._footerViews.pop();this.removeChild(r),this._footerPool.push(r)}if(this._fixedView){for(;this._fixedFooterViews.length<i;)r=(r=this._fixedFooterPool.pop())||new U(this.doc),this.addChild(r),this._fixedFooterViews.push(r);for(;this._fixedFooterViews.length>i;)r=this._fixedFooterViews.pop(),this.removeChild(r),this._fixedFooterPool.push(r)}else for(;0<this._fixedFooterViews.length;)r=this._fixedFooterViews.pop(),this.removeChild(r),this._fixedFooterPool.push(r);if(this._rightView){for(;this._rightFooterViews.length<i;)r=(r=this._rightFooterPool.pop())||new j(this.doc),this.addChild(r),this._rightFooterViews.push(r);for(;this._rightFooterViews.length>i;)r=this._rightFooterViews.pop(),this.removeChild(r),this._rightFooterPool.push(r)}else for(;0<this._rightFooterViews.length;)r=this._rightFooterViews.pop(),this.removeChild(r),this._rightFooterPool.push(r)},K.prototype.$_getTableRow=function(t,e){return this._bodyView._tbody.children[e]},K.prototype.$_getTableCell=function(t,e){return this._bodyView._tbody.children[t].children[e]},K.prototype.$_getFixedTableRow=function(t){return this._fixedView._tbody.children[t]},K.prototype.$_getFixedTableCell=function(t,e){return this._fixedView._tbody.children[t].children[e]},K.prototype.$_getRightTableRow=function(t){return this._rightView._tbody.children[t]},K.prototype.$_getRightTableCell=function(t,e){return this._rightView._tbody.children[t].children[e]},K.prototype.$_getBodyCells=function(t){return this._bodyView._cells[t]},K.prototype.$_getFixedBodyCells=function(t){return this._fixedView._cells[t]},K.prototype.$_getRightBodyCells=function(t){return this._rightView._cells[t]},K);function K(t,e){var i=Y.call(this,t,e||"rowGroupLayer")||this;return i._headerPool=[],i._headerViews=[],i._rightHeaderPool=[],i._rightHeaderViews=[],i._footerPool=[],i._footerViews=[],i._fixedFooterPool=[],i._fixedFooterViews=[],i._rightFooterPool=[],i._rightFooterViews=[],i._indents=[],i}e.RowGroupElement=X});t(ci);ci.RowGroupHeadElement,ci.RowGroupFootElement,ci.RowGroupExpandHandle,ci.RowGroupBarContainer,ci.RowGroupBarPane,ci.RowGroupPane,ci.RowGroupHeaderCellElement,ci.RowGroupHeaderElement,ci.RowGroupRightHeaderElement,ci.RowGroupFooterElement,ci.RowGroupFixedFooterElement,ci.RowGroupRightFooterElement,ci.RowGroupElement;var pi=e(function(t,e){Object.defineProperty(e,"__esModule",{value:!0});var i,o=(i=$t.GridBaseOptions,oe.__extends(n,i),n.prototype._doDispose=function(){i.prototype._doDispose.call(this)},_dp(n,"enabled",{get:function(){return this._enabled},set:function(t){t!=this._enabled&&(this._enabled=t,this._changed())}}),_dp(n,"prompt",{get:function(){return this._prompt},set:function(t){t!=this._prompt&&(this._prompt=t,this._changed())}}),_dp(n,"expandWhenGrouping",{get:function(){return this._expandWhenGrouping},set:function(t){t!=this._expandWhenGrouping&&(this._expandWhenGrouping=t,this._changed())}}),_dp(n,"summarizing",{get:function(){return this._summarizing},set:function(t){t!=this._summarizing&&(this._summarizing=t,this._changed())}}),_dp(n,"commitBeforeGrouping",{get:function(){return this._commitBeforeGrouping},set:function(t){this._commitBeforeGrouping=t}}),_dp(n,"commitBeforeExpand",{get:function(){return this._commitBeforeExpand},set:function(t){this._commitBeforeExpand=t}}),_dp(n,"commitBeforeCollapse",{get:function(){return this._commitBeforeCollapse},set:function(t){this._commitBeforeCollapse=t}}),_dp(n,"fixMergedColumns",{get:function(){return this._fixMergedColumns},set:function(t){this._fixMergedColumns=t}}),_dp(n,"headerClickable",{get:function(){return this._headerClickable},set:function(t){this._headerClickable=t}}),_dp(n,"toast",{get:function(){return this._toast}}),n.prototype._changed=function(){this.grid._groupingOptionsChanged(this),this._layoutOwner()},n);function n(t){var e=i.call(this,t)||this;return e._enabled=!0,e._prompt="컬럼 헤더를 이 곳으로 끌어다 놓으면 그 컬럼으로 그룹핑합니다.",e._expandWhenGrouping=!0,e._summarizing=!0,e._commitBeforeGrouping=!0,e._commitBeforeExpand=!0,e._commitBeforeCollapse=!0,e._fixMergedColumns=!0,e._toast=new fe.ToastOptions({visible:!1,message:"Grouping..."}),e._headerClickable=!1,e}e.GroupingOptions=o});t(pi);pi.GroupingOptions;var fi=e(function(t,e){Object.defineProperty(e,"__esModule",{value:!0});var i,s=(i=qt.GridElement,oe.__extends(o,i),o.prototype._doDispose=function(){ne.Utils.detach(this._textView),ne.Utils.detach(this._closeView),this._textView=this._closeView=null,i.prototype._doDispose.call(this)},_dp(o,"field",{get:function(){return this._field}}),_dp(o,"text",{get:function(){return this._text}}),o.prototype.setColumn=function(t){this._field=t.dataIndex,this._textView[ne.Utils.TextProp]=this._text=t.displayText},o.prototype.isCloseButton=function(t){return t===this._closeView},o.prototype._getCssSelector=function(){return"rg-header rg-header-cell rg-group-panel-item"},o.prototype._initDom=function(t){i.prototype._initDom.call(this,t);var e=ne.getDoc(t);this._textView=e.createElement("span"),this._textView.className="rg-group-panel-item-text",this._textView.style.display="inline-block",t.appendChild(this._textView),this._closeView=e.createElement("span"),this._closeView.className="rg-group-panel-item-close",t.appendChild(this._closeView)},o.prototype._doMeasure=function(t,e,i){var o=(this._textWidth=this._textView.offsetWidth)+this._itemGap+this._closeView.offsetWidth+2*this._padHorz,n=this._textHeight=this._textView.offsetHeight;return n=Math.max(n,this._closeHeight=this._closeView.offsetHeight),n+=2*this._padVert,new jt.Size(o,n)},o.prototype._doLayoutContent=function(t){},o.prototype._doDraw=function(t){var e=this._dom.clientHeight;this._textView.style.left=this._padHorz+"px",this._textView.style.top=Math.floor((e-this._textHeight)/2)+"px",this._closeView.style.left=this._padHorz+this._textWidth+this._itemGap+"px",this._closeView.style.top=Math.floor((e-this._closeHeight)/2)+"px"},o);function o(t){var e=i.call(this,t)||this;return e._field=-1,e._text="",e._textWidth=0,e._textHeight=0,e._closeHeight=0,e._padHorz=5,e._padVert=4,e._itemGap=8,e}e.GroupPanelItemView=s;var n,r=(n=qt.VisualObjectElement,oe.__extends(a,n),a.prototype._doDispose=function(){this._itemViews&&this._itemViews.forEach(function(t,e){t.dispose()}),this._itemViews=null,ne.Utils.detach(this._messageView),this._messageView=null,n.prototype._doDispose.call(this)},_dp(a,"minHeight",{get:function(){return this._minHeight},set:function(t){this._minHeight!==t&&(this._minHeight=t,this._doSizeChanged())}}),a.prototype._getCssSelector=function(){return"rg-group-panel"},a.prototype._initDom=function(t){n.prototype._initDom.call(this,t);var e=ne.getDoc(t);t.style.overflow="hidden";var i=this._messageView=e.createElement("span");i.className="rg-group-panel-message",t.appendChild(i)},a.prototype._doMeasure=function(t,e,i){var o=t.groupingOptions;this._count=t.rowGroupLevels;var n=this.minHeight,r=0,s=this._messageView.style;if(0<this._count?s.display="none":(s.display="",this._messageView[ne.Utils.TextProp]=o.prompt,r=this._messageView.offsetHeight,n=Math.max(n,r+2*this._padVert),s.left=this._padHorz+"px",s.top=(n-r)/2+"px"),this.$_prepareItemViews(t,this._count),0<this._count){for(var a=0;a<this._count;a++){var l=(h=this._itemViews[a]).measure(t,e,i);h.width=l.width,r=Math.max(r,l.height)}for(n=Math.max(n,r+2*this._padVert),a=0;a<this._count;a++){var h;(h=this._itemViews[a]).height=r,h.y=(n-r)/2}}return new jt.Size(e,n)},a.prototype._doPrepareContent=function(t){},a.prototype._doLayoutContent=function(t){if(0<this._count)for(var e=this._padHorz,i=(this._padVert,0);i<this._count;i++){var o=this._itemViews[i];o.x=e,e+=this._itemGap+o.width}},a.prototype._doDraw=function(t){},a.prototype._visibleChanged=function(){this.grid&&this.grid.invalidateLayout()},a.prototype._doSizeChanged=function(){this.grid&&this.grid.invalidateLayout()},a.prototype.$_prepareItemViews=function(t,e){for(var i=this._itemViews,o=t.rowGroupFields,n=i.length;n<e;n++)i.push(new s(t.doc));for(n=0;n<e;n++){var r=i[n];r.setColumn(t.columnByField(o[n])),r.visible=!0,this.addChild(r)}for(n=e;n<i.length;n++)this.removeChild(i[n])},a);function a(t,e){var i=n.call(this,t,e)||this;return i._minHeight=0,i._itemViews=[],i._count=0,i._padHorz=16,i._padVert=10,i._itemGap=20,i.visible=!1,i}e.GroupPanelElement=r});t(fi);fi.GroupPanelItemView,fi.GroupPanelElement;var gi=e(function(t,e){Object.defineProperty(e,"__esModule",{value:!0});var s,i=(s=oi.GridBase,oe.__extends(o,s),o.prototype._doDispose=function(){this._rs.dispose(),this._rs=null,this._groupPanelView=this.groupPanelView.dispose(),this._rowGroup=this._rowGroup.dispose(),this._groupingOptions=this._groupingOptions.dispose(),s.prototype._doDispose.call(this)},o.prototype._doCreateOtherElements=function(){this._groupView=new ci.RowGroupElement(this.doc),this.addElement(this._groupView)},_dp(o,"maxRowCount",{get:function(){return this._rs.maxRowCount},set:function(t){this._rs.maxRowCount=t}}),_dp(o,"rowGroup",{get:function(){return this._rowGroup}}),_dp(o,"groupPanelView",{get:function(){return this._groupPanelView}}),_dp(o,"groupBarPane",{get:function(){return this._groupBarPane}}),_dp(o,"groupView",{get:function(){return this._groupView}}),_dp(o,"groupingOptions",{get:function(){return this._groupingOptions}}),_dp(o,"paged",{get:function(){return 0<=this._rs.page}}),_dp(o,"page",{get:function(){return this._rs.page},set:function(t){this.setPage(t)}}),_dp(o,"pageCount",{get:function(){return this._rs.pageCount},set:function(t){var e=this._rs.pageCount;this._rs.pageCount=t,this._rs.pageCount!=e&&this.$_firePageCountChanged(this._rs.pageCount)}}),_dp(o,"pageSorting",{set:function(t){}}),_dp(o,"rowGroupLevels",{get:function(){return this._rs.groupLevels}}),_dp(o,"rowGroupFields",{get:function(){return this._rs.groupByFields}}),_dp(o,"rowGrouped",{get:function(){return this._rs.grouped}}),_dp(o,"mergedRowGrouped",{get:function(){return this._rs.mergedGrouped}}),_dp(o,"rowGroupSummaryRuntime",{get:function(){return this._rowGroupSummaryRuntime}}),o.prototype.isTree=function(){return!1},o.prototype.isGrouped=function(t){return t&&0<t.groupLevel},o.prototype.isGroupedField=function(t){return this._rs.isGroupedField(t)},o.prototype.isSortByLabelColumn=function(t){return this.columnByField(t).sortByLabel},o.prototype.getGroupLevel=function(t){return this._rs.getGroupLevel(t)},o.prototype.groupByFieldNames=function(t,e,i){void 0===i&&(i=lt.SortDirection.ASCENDING);var o=this.dataSource;if(o&&t&&0<t.length){for(var n=[],r=0;r<t.length;r++){var s=t[r],a=o.getFieldIndex(s);0<=a&&n.push(a)}0<n.length&&(e=void 0===e?this.rowGroup.sorting:e,this.groupBy(n,e,i))}else this.ungroupBy()},o.prototype.groupBy=function(t,e,i){this.isItemEditing(null)||this.toastManager.show(this.groupingOptions.toast,!0,function(){this.$_doGroupBy(t,e,i)}.bind(this))},o.prototype.clearGroupBy=function(){this.isItemEditing(null)||(this._rs.setLabelComparer(null),this._rs.groupBy(null,!0,lt.SortDirection.ASCENDING),this.$_doRowGroupFooterMergeChanged(),this.$_clearColumnMergeGrouped())},o.prototype.ungroupBy=function(){this.clearGroupBy()},o.prototype.addGroupBy=function(t,e){e&&(this.isItemEditing(null)||this.isGrouped(e)||e.layout&&e.layout.visible&&(!e.layout.isRoot&&this.rowGroup.mergeMode||0<=e.dataIndex&&this.toastManager.show(this.groupingOptions.toast,!0,function(){this.$_doAddGroupBy(t,e)}.bind(this))))},o.prototype.addGroupByField=function(t,e){var i=this.columnByField(e);i&&this.addGroupBy(t,i)},o.prototype.removeGroupByField=function(t){t<0||this.isItemEditing(null)||!this.isGroupedField(t)||(this._rs.groupByFields,this._rs.removeGroupBy(t,!1),this._rs.groupByFields.length,this.$_doRowGroupFooterMergeChanged())},o.prototype.removeGroupBy=function(t){this.removeGroupByField(t.dataIndex)},o.prototype.expand=function(t,e,i,o){this.isItemEditing(null)||this._rs.expand(t,e,i,o)},o.prototype.expandAll=function(t,e){this.isItemEditing(null)||this._rs.expandAll(t,e)},o.prototype.collapse=function(t,e,i){this.isItemEditing(null)||this._rs.collapse(t,e,i)},o.prototype.collapseAll=function(t){this.isItemEditing(null)||this._rs.collapseAll(t)},o.prototype.isGroupedColumn=function(t){return t&&0<=t.dataIndex&&this._rs.isGroupedField(t.dataIndex)},o.prototype.getSortFields=function(){return this.itemSource.getSortFields()},o.prototype.getSortDirections=function(){return this.itemSource.getSortDirections()},o.prototype.getSortCases=function(){return this.itemSource.getSortCases()},o.prototype.setPaging=function(t,e,i){void 0===e&&(e=10),void 0===i&&(i=-1),this._rs.setPaging(t,e,i,null)},o.prototype.setPage=function(t,e){if(void 0===e&&(e=-1),(t=Math.max(0,Math.min(t,this._rs.pageCount-1)))!=this._rs.page){var i=!1;this.$_firePageChanging(t)&&(this._rs.setPage(t,e),i=!0),i&&this.$_firePageChanged(this._rs.page)}},_dp(o,"isLayer",{get:function(){return!1}}),_dp(o,"summarizer",{get:function(){return this._rs.summarizer}}),o.prototype._createSidePane=function(){return this._groupBarPane=new ci.RowGroupBarPane(this.doc)},o.prototype.isSidePaneVisible=function(){return this.rowGrouped&&!this.mergedRowGrouped&&this._rowGroup.indentVisible},o.prototype._createLayoutManager=function(){return new n(this)},o.prototype.canGrouping=function(){return this._groupPanelView.visible},o.prototype._canMerge=function(){return!0},_dp(o,"undoable",{get:function(){return this._rs.undoable},set:function(t){this._rs.undoable=t}}),_dp(o,"canUndo",{get:function(){return this._rs.canUndo}}),_dp(o,"canRedo",{get:function(){return this._rs.canRedo}}),_dp(o,"undoing",{get:function(){return this._rs.undoing}}),_dp(o,"redoing",{get:function(){return this._rs.redoing}}),o.prototype.undo=function(){return!!this._rs.canUndo&&(this._rs.cancelWhenLastUndo=this.editOptions.cancelWhenLastUndo,this.editController.cancelEditor(!0),this._rs.undo(),!0)},o.prototype.redo=function(){return!!this._rs.canRedo&&(this._rs.redo(),!0)},o.prototype.execute=function(t){this._rs.execute(t)},o.prototype.clearCommandStack=function(t){void 0===t&&(t=!0),this._rs.clearCommandStack(t)},o.prototype.getRowView=function(t,e){return e instanceof dt.GroupItemImpl?this._groupView.getHeaderView(e):s.prototype.getRowView.call(this,t,e)},o.prototype._doSortItems=function(t,e,i){var o=this.itemSource;o.setLabelComparer(this._doPrepareComparer(t)),o.orderBy(t,e,i)},o.prototype._doColumnFiltersChanged=function(t,e){this.applyFilters(t,e),this.invalidateLayout()},o.prototype.setOptions=function(t){if(t){var e=this._rs;void 0!==t.hideDeleted&&(e.hideDeleted=t.hideDeleted),void 0!==t.hideDeletedRows&&(e.hideDeleted=t.hideDeletedRows),void 0!==t.inclusiveFiltering&&(e.inclusiveFiltering=t.inclusiveFiltering),void 0!==t.filterOr&&(e.inclusiveFiltering=t.filterOr),void 0!==t.summaryMode&&(e.summaryMode=t.summaryMode),void 0!==t.groupSummaryMode&&(e.groupSummaryMode=t.groupSummaryMode),void 0!==t.sortMode&&(e.sortMode=t.sortMdoe),void 0!==t.filterMode&&(e.filterMode=t.filterMode),s.prototype.setOptions.call(this,t)}},o.prototype._visualObjectChanged=function(t){s.prototype._visualObjectChanged.call(this,t),t instanceof Bt.CheckBar&&(this._rs.checkableExpression=t.checkableExpression)},o.prototype.resetCheckables=function(){this._rs.resetCheckables()},o.prototype.applyCheckables=function(){this._rs.applyCheckables()},o.prototype.getCheckedRows=function(t,e,i){var o,n;if(e){o=[];for(var r=0,s=this.itemCount;r<s;r++)(n=this.getItem(r)).checked&&0<=n.dataRow&&o.push(n.dataRow)}else o=this._rs.getCheckedRows(i);return t&&o.sort(function(t,e){return t-e}),o},o.prototype.getCheckedItemIndices=function(t){for(var e=[],i=0,o=this.itemCount;i<o;i++){var n=this.getItem(i);n.checked&&(t||0<=n.dataRow)&&e.push(n.index)}return e},o.prototype.getCheckedItems=function(t){for(var e=[],i=0,o=this.itemCount;i<o;i++){var n=this.getItem(i);n.checked&&(t||0<=n.dataRow)&&e.push(n)}return e},o.prototype.findGroupItem=function(t,e){var i=this.getGroupLevel(e);if(0<i)for(var o=t instanceof dt.GroupItem?t:t.parent;o;){if(o.level==i)return o;o=o.parent}return null},o.prototype.getItemOfModel=function(t){return 0<=t.itemIndex?this.getItem(t.itemIndex):0<=t.id?this._rs.getGroupItem(t.id):null},o.prototype.getIndicatorIndex=function(t){return this._rs.getDisplayItemIndex(t)},o.prototype.getFirstRow=function(){return this._rs.getFirstRow()},o.prototype.getLastRow=function(){return this._rs.getLastRow()},o.prototype.getPrevRow=function(t){return this._rs.getPrevRow(t)},o.prototype.getNextRow=function(t){return this._rs.getNextRow(t)},o.prototype._doMoveRows=function(t,e){var i=e&&e.dataRow;if(0<=i){for(var o=[],n=0,r=t;n<r.length;n++){var s=r[n],a=s&&s.dataRow;0<=a&&o.push(a)}if(0<o.length)return this.dataSource.moveRowList(o,i),!0}},o.prototype._getCellTypeOf=function(t){return t instanceof ci.RowGroupHeadElement?"groupHead":t instanceof ci.RowGroupFootElement?"groupFoot":t instanceof ci.RowGroupBarContainer?"groupBar":void 0},o.prototype.updatePastedRow=function(t,e,i){var o=t.dataRow;if(0<=o){var n=this.dataSource;n&&n.updateRow(o,e,i)}},o.prototype.appendPastedRow=function(t){var e=this.dataSource;e&&e.appendRow(t)},o.prototype._createItemSource=function(){return new ui.GridItemProvider(!0,this._rowGroup)},o.prototype.$_rowGroupChanged=function(t){this._doRowGroupMergeModeChanged()},o.prototype._groupingOptionsChanged=function(t){this._rs.expandWhenGrouping=t.expandWhenGrouping},o.prototype.$_rowGroupAdornmentsChanged=function(t){this._rs._groupedProvider.resetAdornments(t.expandedAdornments,t.collapsedAdornments,this.handler,t.createFooterCallback)},o.prototype.$_getVisibleRootByField=function(t){for(var e=this.visibleLayoutCount,i=0;i<e;i++){var o=this.getVisibleLayout(i),n=o instanceof Tt.CellLayoutColumnItem&&ne.Utils.cast(o.firstColumn,Dt.DataColumn);if(n&&n.dataIndex==t)return n}return null},o.prototype.$_clearColumnMergeGrouped=function(){this._activeCellLayout._clearMergeGrouped()},o.prototype._doRowGroupMergeModeChanged=function(){s.prototype._doRowGroupMergeModeChanged.call(this),this.$_clearColumnMergeGrouped();var t=this._rs.groupByFields;if(this.rowGroup.mergeMode){if(t&&0<t.length)for(var e=t.length-1;0<=e;e--){var i=this.$_getVisibleRootByField(t[e]);i?i.$_setMergeGrouped(!0):t.splice(e,1)}this._rs.groupByMode(t,!0)}else this._rs.groupByMode(t,!1)},o.prototype.$_doRowGroupFooterMergeChanged=function(){},o.prototype.$_doGroupBy=function(t,e,i){var o,n=this.dataSource;if(this.$_clearColumnMergeGrouped(),n&&t&&0<(o=t.length)){for(var r=n.fieldCount,s=[],a=0;a<o;a++)0<=t[a]&&t[a]<r&&s.push(t[a]);if(0<s.length){if(this.rowGroup.mergeMode)for(a=s.length-1;0<=a;a--){var l=this.$_getVisibleRootByField(s[a]);l?l.$_setMergeGrouped(!0):s.splice(a,1)}0<s.length&&(this._rs.setLabelComparer(this._doPrepareComparer(s)),this._rs.groupBy(s,e,i))}}else this._rs.setLabelComparer(null),this._rs.groupBy(null,!0,lt.SortDirection.ASCENDING);this.$_doRowGroupFooterMergeChanged()},o.prototype.$_doAddGroupBy=function(t,e){var i=e.dataIndex;e.$_setMergeGrouped(this.rowGroup.mergeMode);try{var o=this.rowGroupFields?this.rowGroupFields.slice():[];o.push(i),this._rs.setLabelComparer(this._doPrepareComparer(o)),this._rs.addGroupBy(t,i,this.rowGroup.sorting),this.$_doRowGroupFooterMergeChanged()}catch(t){throw e.$_setMergeGrouped(!1),t}},o.prototype.$_clearGroupedIndices=function(){for(var t=this.columnCount-1;0<=t;t--){var e=ne.Utils.cast(this.getColumn(t),Dt.DataColumn);e&&e.$_setGroupLevel(this._rs.getGroupLevel(-1))}},o.prototype.$_setGroupedIndices=function(){for(var t=this.columnCount-1;0<=t;t--){var e=ne.Utils.cast(this.getColumn(t),Dt.DataColumn);e&&e.$_setGroupLevel(this._rs.getGroupLevel(e.dataIndex))}},o.prototype.$_firePageChanging=function(t){return this.fireConfirmEvent(o.PAGE_CHANGING,t)},o.prototype.$_firePageChanged=function(t){this.fireEvent(o.PAGE_CHANGED,t)},o.prototype.$_firePageCountChanged=function(t){this.fireEvent(o.PAGE_COUNT_CHANGED,t)},o.prototype.$_fireGrouping=function(t){return this.fireConfirmEvent(o.GROUPING,t)},o.prototype.$_fireGrouped=function(){this.fireEvent(o.GROUPED)},o.prototype.$_fireExpanding=function(t){return this.fireConfirmEvent(o.EXPANDING,t)},o.prototype.$_fireExpanded=function(t){this.fireEvent(o.EXPANDED,t)},o.prototype.$_fireCollapsing=function(t){return this.fireConfirmEvent(o.COLLAPSING,t)},o.prototype.$_fireCollapsed=function(t){this.fireEvent(o.COLLAPSED,t)},o.prototype.onGroupedItemProviderGrouping=function(t,e){return this.$_fireGrouping(e)},o.prototype.onGroupedItemProviderGrouped=function(t){this.selections.clear(),this.$_clearGroupedIndices();var e=this._rs.groupByFields;if(e&&0<e.length&&this.$_setGroupedIndices(),this.rowGroup.mergeMode){for(var i=[],o=this.visibleLayoutCount,n=0;n<o;n++){var r=this.getVisibleLayout(n);(s=ne.Utils.cast(r.firstColumn,Dt.DataColumn))&&(s.mergeGrouped&&s.groupLevel<=0?((a=s._merges)&&a.clear(),s.$_setMergeGrouped(!1)):s.mergeGrouped&&((a=s._merges)||(a=new Rt.ColumnMergeManager(r),s._merges=a),i.push(s)))}if(0<(o=i.length))for(i=i.sort(function(t,e){return t.groupLevel-e.groupLevel}),n=0;n<o;n++)(a=i[n]._merges).clear(),a.initialize(Rt.RowGroupMergeRule.INIT_COUNT),i[n].layout.vindex=n;for(o=this.visibleLayoutCount,n=0;n<o;n++){var s,a;(s=ne.Utils.cast(this.getVisibleLayout(n).firstColumn,Dt.DataColumn))&&!s.mergeGrouped&&(a=s._merges)&&(a.clear(),a.initialize(Rt.RowGroupMergeRule.INIT_COUNT))}}this.requestPrepareEditor(),this._syncHeadCheck([]),this.$_fireGrouped(),this._cellLayoutChanged(),this.container.defaultTool.layoutChanged()},o.prototype.onGroupedItemProviderExpand=function(t,e){return this.$_fireExpanding(e)},o.prototype.onGroupedItemProviderExpanded=function(t,e){this.$_fireExpanded(e)},o.prototype.onGroupedItemProviderCollapse=function(t,e){return this.$_fireCollapsing(e)},o.prototype.onGroupedItemProviderCollapsed=function(t,e){this.$_fireCollapsed(e)},o.PAGE_CHANGING="onGridViewPageChanging",o.PAGE_CHANGED="onGridViewPageChanged",o.PAGE_COUNT_CHANGED="onGridViewPageCountChanged",o.GROUPING="onGridViewGrouping",o.GROUPED="onGridViewGrouped",o.EXPANDING="onGridViewExpanding",o.EXPANDED="onGridViewExpanded",o.COLLAPSING="onGridViewCollapsing",o.COLLAPSED="onGridViewCollapsed",o);function o(t,e){void 0===e&&(e=!1);var i=s.call(this,t,e)||this;i._rowGroupSummaryRuntime=new Mt.RowGroupSummaryRuntime,i._addGridObject(i._rowGroup=new Xe.RowGroup(i)),i._rs=i._createItemSource(),i.itemSource=i._rs,i._groupingOptions=new pi.GroupingOptions(i),i._groupingOptionsChanged(i._groupingOptions),i._groupPanelView=new fi.GroupPanelElement(i.doc,i.rowGroup),i.topContentPane.addChild(i._groupPanelView);for(var o=[i._groupBarPane._headView,i._groupBarPane._footView,i._groupBarPane._barContainer],n=o.length-1;0<=n;n--){var r=o[n];i._tableViews[r.$_hash]=r}return i}e.GridView=i;var a,n=(a=ee.GridLayoutManager,oe.__extends(r,a),_dp(r,"panelVisible",{get:function(){return this.grid.groupPanelView.visible}}),r.prototype.getLevelIndent=function(t){var e=this.grid;if(this.mergedRowGrouped){for(var i=this.fixedLayoutCount,o=0,n=0;n<t&&n<i;n++)o+=this.getFixedLayoutWidth(n);for(n=i;n<t;n++)o+=this.getLayoutWidth(n-i);return i?i<t?o=Math.max(this.fixedWidth,o+this.fixedBarWidth-this.leftPos):o+=this.fixedBarWidth:o-=this.leftPos,o}return e.rowGroup.indentVisible?e.groupBarPane.getLevelIndent(t):0},_dp(r,"grid",{get:function(){return this._grid}}),_dp(r,"topPanelVisible",{get:function(){return this.panelVisible}}),_dp(r,"rowGrouped",{get:function(){return!this.grid.rowGroup.mergeMode&&this.grid.rowGrouped}}),_dp(r,"mergedRowGrouped",{get:function(){return this.grid.rowGroup.mergeMode&&this.grid.rowGrouped}}),_dp(r,"rowGroupLevels",{get:function(){return this.grid.rowGroupLevels}}),_dp(r,"rowGroupFields",{get:function(){return this.grid.rowGroupFields}}),r.prototype.$_groupView=function(t){return this.grid._groupView},r.prototype.setLeftPos=function(t,e){a.prototype.setLeftPos.call(this,t,e);var i=this.grid,o=i.mergedRowGrouped,n=this.$_groupView(o);n.visible&&this.$_layoutRowGroupView(i,n)},r.prototype._prepareItems=function(){a.prototype._prepareItems.call(this);var t=this.grid;if(t.rowGrouped){var e=t.mergedRowGrouped,i=this.$_groupView(e),o=this.contentBounds.isEmpty?null:t.bodyView,n=this.fixedContentBounds.isEmpty?null:t.fixedBodyView,r=this.rightContentBounds.isEmpty?null:t.rightBodyView;i.$_prepareGroupItems(this,o,n,r),i.$_prepareGroupFooters(this._items,this)}},r.prototype._doMeasureTopPane=function(t,e){t.groupingOptions;var i=t.groupPanelView;if(this.panelVisible){var o=i.measure(t,e.width,e.height);e.height=o.height}else e.height=1,e.width=1},r.prototype._doLayoutTopPane=function(t,e){var i=t.groupPanelView;i.setBounds(0,0,e.width,e.height),this.panelVisible&&i.layoutContent(this)},r.prototype._doLayout=function(t,e){a.prototype._doLayout.call(this,t,e)},r.prototype._adjustLayout=function(t,e){a.prototype._adjustLayout.call(this,t,e);var i=t.rowGrouped,o=t.mergedRowGrouped,n=t._sideContentPane;n&&this._layoutSidePane(t,n);var r=this.$_groupView(o);this.$_groupView(!o).visible=!1,(r.visible=i)&&this.$_layoutRowGroupView(t,r)},r.prototype.isMergedCell=function(t){var e=this.grid;if(e.rowGroup.mergeMode&&e.isGroupedColumn(t.dataColumn))return!0;var i=t.layout;if(i&&i.isColumn&&t.layout.merged){var o=i.firstColumn._merges;if(o)return null!=o.getRoom(t)}return!1},r.prototype.$_layoutRowGroupView=function(t,e){var i=this.contentBounds,o=this.sideContentBounds.clone();o.top=i.y+this.bodyBounds.y,o.right=this.rightContentBounds.right,o.bottom=Math.min(this.footBounds.y+i.y,i.bottom),e.setRect(o),e.layout(this)},r);function r(t){return a.call(this,t)||this}e.GridViewLayoutManager=n;var f,l=(f=Pe.GridSelectionTool,oe.__extends(h,f),h.prototype._doDispose=function(){this._panelCellReq=null,f.prototype._doDispose.call(this)},h.prototype._doMouseDown=function(t){var e=t.mouseX,i=t.mouseY,o=this.grid,n=(this.findElementAt(e,i,!1),this.mouseEventTarget),r=ne.getWin(t.target);if(n instanceof r.HTMLElement&&Qt.RowElement.isExpander(n)){var s=this._findTableCell(n),a=o.getTableView(s);if(a instanceof te.GridBodyElement){var l=o.getDataCellIndex(s,this._tempIndex),h=a.getCellAt(o.layoutManager,l),d=o.findGroupItem(h.item,h.layout.firstColumn.dataIndex);this.$_toggleExpanded(o,d)}}else if(n instanceof r.HTMLElement&&ci.RowGroupExpandHandle.isExpander(n))return(d=o.getItem(n[lt.T_ROW]))instanceof dt.GroupFooter&&(d=d.parent),void(d instanceof dt.GroupItemImpl&&this.$_toggleExpanded(o,d));f.prototype._doMouseDown.call(this,t)},h.prototype._doClick=function(t){var e=t.mouseX,i=t.mouseY,o=this.grid,n=this.findElementAt(e,i,!1);n instanceof fi.GroupPanelItemView&&n.isCloseButton(t.target)&&o.removeGroupByField(n.field),f.prototype._doClick.call(this,t)},h.prototype._doDblClick=function(t){var e=t.mouseX,i=t.mouseY,o=this.grid,n=this.findElementAt(e,i,!1);n instanceof ci.RowGroupHeaderElement&&o.groupingOptions.headerClickable?this.$_toggleExpanded(o,n.item):f.prototype._doDblClick.call(this,t)},h.prototype._getEditRequest=function(t,e,i,o,n,r,s){var a=f.prototype._getEditRequest.call(this,t,e,i,o,n,r,s);if(a)return a;var l=this.grid,h=this.findElementAt(i,o,!1),d=this._findTableCell(t),u=d&&l.getTableView(d);if(u instanceof Xt.HeaderElement){var _=u.layoutByCell(d),c=_.firstColumn;if(_.isFixed&&!l.fixedOptions.movable&&l.groupPanelView.visible&&c){var p=l.layoutManager.getHeaderCellRect(_);return this._groupingReq.init(_,p,i,o)}}return h instanceof fi.GroupPanelItemView?this._panelCellReq.init(h,i,o):void 0},h.prototype._getDragTracker=function(t,e,i){var o=this.grid;return t instanceof u?new y(o,t,this._panelCellFeedback):t instanceof C?new I(o,t,this._panelCellFeedback):f.prototype._getDragTracker.call(this,t,e,i)},h.prototype.getNextRequest=function(t,e,i,o){if(t instanceof xe.ColumnMoveRequest&&t.layout instanceof Tt.CellLayoutColumnItem){var n=this.grid,r=t.layout.firstColumn;if(n.groupingOptions.enabled&&n.layoutManager.topPanelVisible&&r instanceof Dt.DataColumn&&r.groupable&&o<n.groupPanelView.bottom)return this._groupingReq.init(t.layout,e,i,o)}},h.prototype._getClickData=function(t){return t instanceof fi.GroupPanelElement?Pe.ClickData.getData("groupPanel"):t instanceof fi.GroupPanelItemView?Pe.ClickData.getField("groupColumn",t.field):t instanceof oi.GridBase?Pe.ClickData.getData("gridEmpty"):void 0},h.prototype.$_toggleExpanded=function(t,e){e.expanded?t.collapse(e,!1,!1):t.expand(e,!1,!1,0)},h);function h(t){var e=f.call(this,t,"gridSelectionTool")||this;return e._panelCellReq=new u,e._panelCellFeedback=new p(t.doc),e._groupingReq=new C,e}e.GridViewSelectionTool=l;var d,u=(d=he.EditRequest,oe.__extends(_,d),_dp(_,"source",{get:function(){return this._source}}),_dp(_,"x",{get:function(){return this._x}}),_dp(_,"y",{get:function(){return this._y}}),_dp(_,"field",{get:function(){return this._field}}),_.prototype.init=function(t,e,i){return this._source=t,this._x=e,this._y=i,this._field=t.field,this},_dp(_,"cursor",{get:function(){return"pointer"}}),_);function _(){var t=d.call(this)||this;return t._field=-1,t}var c,p=(c=Ut.VisualElement,oe.__extends(g,c),g.prototype.setField=function(t,e){void 0===e&&(e=!1),this._textView[ne.Utils.TextProp]=t,this._noMark.style.display=(this._no=e)?"inline-block":"none"},g.prototype._getCssSelector=function(){return"rg-header rg-header-cell rg-group-panel-item rg-group-panel-cell-feedback"},g.prototype._initDom=function(t){c.prototype._initDom.call(this,t);var e=this.doc;this._textView=e.createElement("span"),this._textView.className="rg-group-panel-item-text",this._textView.style.display="inline-block",t.appendChild(this._textView),this._noMark=e.createElement("span"),this._noMark.className="rg-group-panel-no-mark",this._noMark.style.display="none",t.appendChild(this._noMark)},g.prototype._doDraw=function(t){var e=this._textView.offsetWidth,i=this._textView.offsetHeight,o=this._textView.style;if(o.left=Math.max(0,(this.width-e)/2)+"px",o.top=Math.max(0,(this.height-i)/2)+"px",this._no){var n=this._noMark.offsetWidth,r=this._noMark.offsetHeight,s=this._noMark.style;s.left=Math.max(0,(this.width-n)/2)+"px",s.top=Math.max(0,(this.height-r)/2)+"px"}},g);function g(t){var e=c.call(this,t)||this;return e._no=!1,e}var m,y=(m=be.GridDragTracker,oe.__extends(v,m),v.prototype._doDispose=function(){this._request=null,this._feedback=null,m.prototype._doDispose.call(this)},v.prototype.getRequest=function(){return this._request},v.prototype._doStart=function(t,e,i,o){var n=this.grid,r=(n.layoutManager,this._request.source.boundsByContainer());return this._feedback.setRect(r),this._feedback.setField(this._request.source.text),this._feedback.visible=!0,n.addFeedbackElement(this._feedback),this._offsetX=e-r.x,this._offsetY=i-r.y,!0},v.prototype._doDrag=function(t,e,i){return e-=this._offsetX,i-=this._offsetY,this._feedback.move(e,i),!0},v.prototype._doCompleted=function(){var t=this.grid,e=t.layoutManager;this.currentY>e.contentBounds.y&&t.removeGroupByField(this._request.field)},v.prototype._doEnded=function(){this.grid.removeFeedbackElement(this._feedback)},v);function v(t,e,i){var o=m.call(this,t,"groupPanelCellTracker")||this;return o._request=e,o._feedback=i,o}var w,C=(w=he.EditRequest,oe.__extends(x,w),x.prototype._doDispose=function(){this._layout=null,this._source=null,w.prototype._doDispose.call(this)},_dp(x,"layout",{get:function(){return this._layout}}),_dp(x,"source",{get:function(){return this._source}}),_dp(x,"x",{get:function(){return this._x}}),_dp(x,"y",{get:function(){return this._y}}),x.prototype.init=function(t,e,i,o){return this._layout=t,this._source=e,this._x=i,this._y=o,this},_dp(x,"cursor",{get:function(){return"pointer"}}),x);function x(){return w.call(this)||this}var b,I=(b=be.GridDragTracker,oe.__extends(E,b),E.prototype._doDispose=function(){this._request=null,this._feedback=null,b.prototype._doDispose.call(this)},E.prototype.getRequest=function(){return this._request},E.prototype._doStart=function(t,e,i,o){var n=this.grid,r=this._request.source,s=r instanceof Ut.VisualElement?r.boundsByContainer():r,a=n.isGroupedField(this._request.layout.firstColumn.dataIndex);return this._feedback.setRect(s),this._feedback.setField(this._request.layout.firstColumn.displayText,a),this._feedback.visible=!0,n.addFeedbackElement(this._feedback),this._offsetX=e-s.x,this._offsetY=s.height/3,!0},E.prototype._doDrag=function(t,e,i){return e-=this._offsetX,i-=this._offsetY,this._feedback.move(e,i),!0},E.prototype._doCompleted=function(){var t=this.grid,e=t.layoutManager;this.currentY<e.contentBounds.y&&t.addGroupByField(e.rowGroupLevels,this._request.layout.firstColumn.dataIndex)},E.prototype._doEnded=function(){this.grid.removeFeedbackElement(this._feedback)},E);function E(t,e,i){var o=b.call(this,t,"groupingCellTracker")||this;return o._request=e,o._feedback=i,o}});t(gi);gi.GridView,gi.GridViewLayoutManager,gi.GridViewSelectionTool;var mi=e(function(t,e){Object.defineProperty(e,"__esModule",{value:!0});var i,o=(i=$.EventAware,oe.__extends(n,i),n.prototype._doDispose=function(){this._header=this._header.dispose(),this._footer=this._footer.dispose(),this._body=this._body.dispose(),i.prototype._doDispose.call(this)},n.prototype.itemVisibleChanged=function(t){},n.prototype.itemChanged=function(t){},_dp(n,"header",{get:function(){return this._header}}),_dp(n,"footer",{get:function(){return this._footer}}),_dp(n,"body",{get:function(){return this._body}}),_dp(n,"itemCount",{get:function(){return this._items.length}}),_dp(n,"visibleItemCount",{get:function(){return this._visibleItems.length}}),n.prototype.load=function(t){t&&(t.title&&this._header.assignFrom(t.title),t.footer&&this._footer.assignFrom(t.footer),t.body&&this._body.assignFrom(t.body),ne.Utils.isArray(t.items)&&this.$_loadItems(t.items,this._items=[]),this._itemChanged=!0,this._changed())},n.prototype.getItem=function(t){return this._items[t]},n.prototype.getVisibleItem=function(t){return this._visibleItems[t]},n.prototype._changed=function(){this.fireEvent(n.CHANGED)},n.prototype.$_loadItems=function(t,e,i){void 0===i&&(i=null);for(var o=0,n=t;o<n.length;o++){var r=n[o];if(r){var s=void 0;if(!i&&ne.Utils.isArray(r.items)){var a=s=new k;this.$_loadItems(r.items,a._items,a)}else"string"==typeof r.template?s=new N:"string"!=typeof r.column&&"string"!=typeof r||(s=new F);s.assignFrom(r),s&&(i?(i._items.push(s),s.$_attached(i)):(this._items.push(s),s.$_attached(this)))}}},n.prototype.$_refreshItems=function(){var t=this._items;if(t)for(var e=t.length-1;0<=e;e--){var i=t[e];i._index=e,i._vindex=-1,i.$_refresh(this)}},n.prototype.$_resetvisibles=function(){for(var t=this._visibleItems=[],e=0,i=this._items;e<i.length;e++){var o=i[e];if(o.visible&&(t.push(o),o._vindex=t.length-1,o instanceof k&&o.expanded))for(var n=0,r=o._items;n<r.length;n++){var s=r[n];s.visible&&(t.push(s),s._vindex=t.length-1)}}},n.prototype.$_prepareLayout=function(){this._itemChanged?(this.$_refreshItems(),this._itemChanged=!1,this.$_resetvisibles(),this._visibleChanged=!1):this._visibleItems&&(this.$_resetvisibles(),this._visibleChanged=!1)},n.CHANGED="onFormChanged",n);function n(){var t=i.call(this)||this;return t._modal=!1,t._items=[],t._itemChanged=!1,t._visibleChanged=!1,t._visibleItems=[],t._header=new _(t),t._footer=new y(t),t._body=new f(t),t}e.Form=o;var r,s=(r=re.Base,oe.__extends(a,r),a.prototype._doDispose=function(){r.prototype._doDispose.call(this)},a.prototype._changed=function(){},a);function a(){return r.call(this)||this}e.FormObject=s;var l,h=(l=s,oe.__extends(d,l),d.prototype._doDispose=function(){l.prototype._doDispose.call(this)},_dp(d,"owner",{get:function(){return this._owner}}),_dp(d,"visible",{get:function(){return this._visible},set:function(t){t!=this._visible&&(this._visible=t,this._changed())}}),_dp(d,"styleName",{get:function(){var t=this._getDefaultStyle();return this._styleName&&(t+=" "+this._styleName),t}}),d.prototype._changed=function(){l.prototype._changed.call(this)},d);function d(t){var e=l.call(this)||this;return e._visible=!0,e._styleName="",e._owner=t,e}e.FormSection=h;var u,_=(u=h,oe.__extends(c,u),c.prototype._doDispose=function(){u.prototype._doDispose.call(this)},_dp(c,"height",{get:function(){return this._height},set:function(t){t!=this._height&&(this._height=t,this._changed())}}),c.prototype.getLabelCell=function(){return this._labelCell},c.prototype.getValueCell=function(){return this._valueCell},c.prototype._getDefaultStyle=function(){return c.STYLE_NAME},c.STYLE_NAME="rg-form-header",c);function c(t){var e=u.call(this,t)||this;return e._height=24,e._labelCell={displayText:"Field"},e._valueCell={displayText:"Value"},e}e.FormHeader=_;var p,f=(p=h,oe.__extends(g,p),g.prototype._doDispose=function(){p.prototype._doDispose.call(this)},_dp(g,"minRowHeight",{get:function(){return this._minRowHeight},set:function(t){t!=this._minRowHeight&&(this._minRowHeight=t,this._changed())}}),g.prototype._getDefaultStyle=function(){return g.STYLE_NAME},g.STYLE_NAME="rg-form-body",g);function g(t){var e=p.call(this,t)||this;return e._minRowHeight=24,e}e.FormBody=f;var m,y=(m=h,oe.__extends(v,m),v.prototype._doDispose=function(){m.prototype._doDispose.call(this)},_dp(v,"height",{get:function(){return this._height},set:function(t){t!=this._height&&(this._height=t,this._changed())}}),_dp(v,"popupMenu",{get:function(){return this._popupMenu},set:function(t){t!=this._popupMenu&&(this._popupMenu=t,this._popupMenuName="string"==typeof t?t:null)}}),v.prototype.getPopupMenuName=function(t){return this._popupMenuName?this._popupMenuName:this._popupMenu?(this._popupMenuName="form_footer_menu",t.addPopupMenu(this._popupMenuName,this._popupMenu,!0),this._popupMenuName):null},v.prototype._getDefaultStyle=function(){return v.STYLE_NAME},v.STYLE_NAME="rg-form-footer",v);function v(t){var e=m.call(this,t)||this;return e._height=26,e}e.FormFooter=y;var w,C=(w=re.Base,oe.__extends(x,w),x.prototype._doDispose=function(){w.prototype._doDispose.call(this)},_dp(x,"visible",{get:function(){return this._visible},set:function(t){t!=this._visible&&(this._visible=t)}}),_dp(x,"vindex",{get:function(){return this._vindex}}),x.prototype.canEdit=function(){return!1},x.prototype.$_attached=function(t){this._group=t},x.prototype._changed=function(){},x.prototype._headerChanged=function(){this._changed()},x.prototype.$_refresh=function(t){},x.prototype.$_prepareLayout=function(t,e,i){this._doPrepare(t,e,i)},x.prototype._doPrepare=function(t,e,i){},x);function x(){var t=w.call(this)||this;return t._visible=!0,t._height=0,t._vindex=-1,t}e.FormItem=C;var b,I=(b=s,oe.__extends(E,b),E.prototype._doDispose=function(){this._owner=null,b.prototype._doDispose.call(this)},_dp(E,"text",{get:function(){return this._text},set:function(t){t!=this._text&&(this._text=t,this._changed())}}),_dp(E,"owner",{get:function(){return this._owner}}),_dp(E,"displayText",{get:function(){return this._text||this._owner.displayLabel}}),E.prototype.doAssignSimple=function(t){if("string"==typeof t)return this._text=t,!0},E.prototype._changed=function(){this._owner&&this._owner._headerChanged()},E);function E(t){var e=b.call(this)||this;return e._text="",e._owner=t,e}e.FormItemHeader=I;var S,R=(S=C,oe.__extends(D,S),D.prototype._doDispose=function(){S.prototype._doDispose.call(this)},_dp(D,"header",{get:function(){return this._header}}),_dp(D,"renderer",{get:function(){return this._renderer},set:function(t){this._renderer=t,this._changed()}}),_dp(D,"valueChanged",{get:function(){return!1}}),D.prototype.assignFrom=function(t){S.prototype.assignFrom.call(this,t),t.header&&this._header.assignFrom(t.header)},D);function D(){var t=S.call(this)||this;return t._header=new I(t),t}e.FormValueItem=R;var T,k=(T=C,oe.__extends(M,T),M.prototype._doDispose=function(){T.prototype._doDispose.call(this)},M.prototype.itemVisibleChanged=function(t){this._group&&this._group.itemVisibleChanged(this)},M.prototype.itemChanged=function(t){this._group&&this._group.itemChanged(this)},_dp(M,"expanded",{get:function(){return this._expanded}}),M.prototype.expand=function(){return!this._expanded&&(this._expanded=!0)},M.prototype.collapse=function(){return!!this._expanded&&!(this._expanded=!1)},M.prototype._doPrepare=function(t,e,i){},M);function M(){var t=T.call(this)||this;return t._items=[],t._expanded=!0,t}e.FormItemGroup=k;var L,F=(L=R,oe.__extends(V,L),V.prototype._doDispose=function(){L.prototype._doDispose.call(this)},_dp(V,"column",{get:function(){return this._column},set:function(t){t!=this._column&&(this._column=t,this._changed())}}),_dp(V,"editor",{get:function(){return this._editor},set:function(t){this._editor=t,this._changed()}}),_dp(V,"button",{get:function(){return this._button},set:function(t){t!=this._button&&(this._button=t,this._changed())}}),_dp(V,"buttonVisibility",{get:function(){return this._buttonVisibility},set:function(t){t!=this._buttonVisibility&&(this._buttonVisibility=t,this._changed())}}),_dp(V,"editButtonVisibility",{get:function(){return this._editButtonVisibility},set:function(t){t!=this._editButtonVisibility&&(this._editButtonVisibility=t,this._changed())}}),V.prototype.doAssignSimple=function(t){if("string"==typeof t)return this.column=t,!0},_dp(V,"displayLabel",{get:function(){return this._columnObj&&this._columnObj.displayText}}),_dp(V,"value",{get:function(){return""}}),V.prototype._doPrepare=function(t,e,i){this._columnObj=e.getColumnObject(this._column)},V);function V(){return L.call(this)||this}e.FormColumnItem=F;var O,N=(O=R,oe.__extends(P,O),P.prototype._doDispose=function(){O.prototype._doDispose.call(this)},_dp(P,"template",{get:function(){return this._template},set:function(t){t!=this._template&&(this._template=t,this._dirty=!0,this._changed())}}),_dp(P,"valueField",{get:function(){return this._valueField},set:function(t){t!=this._valueField&&(this._valueField=t,this._valueIndex=-99,this._changed())}}),_dp(P,"displayLabel",{get:function(){return this._valueField}}),_dp(P,"value",{get:function(){return"Template"}}),P.prototype._doPrepare=function(t,e,i){this._valueIndex<-1&&(this._valueIndex=e.getDataFieldIndex(this._valueField))},P);function P(){var t=O.call(this)||this;return t._dirty=!1,t._valueIndex=-1,t}e.FormTemplateItem=N});t(mi);mi.Form,mi.FormObject,mi.FormSection,mi.FormHeader,mi.FormBody,mi.FormFooter,mi.FormItem,mi.FormItemHeader,mi.FormValueItem,mi.FormItemGroup,mi.FormColumnItem,mi.FormTemplateItem;var yi=e(function(t,e){Object.defineProperty(e,"__esModule",{value:!0});var i,o=(i=re.Base,oe.__extends(n,i),n.prototype._doDispose=function(){i.prototype._doDispose.call(this)},_dp(n,"name",{get:function(){return this._name}}),n.prototype.start=function(t,e,i,o){return this._doStart(t,e,i,o)},n.prototype.move=function(t,e){},n.prototype.stop=function(t,e){this._doEnd()},n.prototype.drag=function(t,e,i,o){return this._doDrag(t,e,i,o)},n.prototype.drop=function(t,e){try{this._doDrop(t,e)}finally{this._doEnd()}},n.prototype.cancel=function(){try{this._doCancel()}finally{this._doEnd()}},n.prototype.end=function(t){this._doEnd()},n.prototype._doStart=function(t,e,i,o){},n.prototype._doDrag=function(t,e,i,o){return!1},n.prototype._doDrop=function(t,e){},n.prototype._doCancel=function(){},n.prototype._doEnd=function(){},n);function n(t){var e=i.call(this)||this;return e._name=t,e}e.MobileDragTracker=o;var r,s=(r=xe.GridEditRequest,oe.__extends(a,r),a.prototype._doDispose=function(){r.prototype._doDispose.call(this)},_dp(a,"targetElement",{get:function(){return this._targetElement},set:function(t){this._targetElement=t}}),a);function a(t){return r.call(this,t)||this}e.MobileEditRequest=s;var l,h=(l=s,oe.__extends(d,l),d.prototype._doDispose=function(){l.prototype._doDispose.call(this)},d);function d(t){return l.call(this,t)||this}e.TouchScorllRequest=h;var u,_=(u=s,oe.__extends(c,u),c.prototype._doDispose=function(){u.prototype._doDispose.call(this)},_dp(c,"handle",{get:function(){return this._handle},set:function(t){this._handle=t}}),c);function c(t){return u.call(this,t)||this}e.TouchSelectRequest=_;var p,f=(p=be.GridDragTracker,oe.__extends(g,p),_dp(g,"request",{get:function(){return this._request},set:function(t){this._request=t}}),g.prototype.stop=function(){},g.prototype.end=function(t){this._doEnd(t)},g.prototype._doEnd=function(t){},g.prototype.getRequest=function(){return this._request},g);function g(t,e){return p.call(this,t,e)||this}e.TouchDragTracker=f;var m,y=(m=f,oe.__extends(v,m),v.prototype._doDispose=function(){this._grid=null,m.prototype._doDispose.call(this)},v.prototype._doStart=function(t,e,i,o){var n=this._grid;if(n.isEditing())switch(n.mobileOptions.scrollOnEditing){case lt.ScrollOnEditing.CANCEL:n.cancelEditor(!0);break;case lt.ScrollOnEditing.COMMIT:n.commitEditor(!0);break;case lt.ScrollOnEditing.DEFAULT:}return this._tapX=e,this._tapY=i,!0},v.prototype._doDrag=function(t,e,i){var o=this._grid,n=e-this._tapX,r=i-this._tapY,s=Math.abs(r)>=Math.abs(n);if(s!=this._vertical&&(s&&Math.abs(r)>2*Math.abs(n)||!s&&Math.abs(n)>2*Math.abs(r))&&(this._vertical=s),this._vertical){if(5<Math.abs(r)){var a=o.topIndex,l=o.layoutManager.fullItemCount;if(r=0<r?-1:1,o.itemCount<=a+l&&1==r||0==a&&-1==r)return!1;o.topIndex=o.topIndex+r,this._tapY=i}}else o.leftPos=o.leftPos-n,this._tapX=e;return!0},v);function v(t){var e=m.call(this,t,"mobileBodyScrollTracker")||this;return e._tapX=NaN,e._tapY=NaN,e._vertical=!0,e}e.TouchScrollTracker=y;var w,C=(w=f,oe.__extends(x,w),x.prototype._doStart=function(t,e,i,o){return!0},x.prototype._doDrag=function(t,e,i){var o=this._grid.pointToIndex(null,e,i,!1);if(o&&0<=o.itemIndex){var n=this.request.handle,r=n.selectionMask.item;r&&r.inflate(n.dir,o)}return!0},x);function x(t){return w.call(this,t)||this}e.TouchSelectTracker=C});t(yi);yi.MobileDragTracker,yi.MobileEditRequest,yi.TouchScorllRequest,yi.TouchSelectRequest,yi.TouchDragTracker,yi.TouchScrollTracker,yi.TouchSelectTracker;var vi=e(function(t,e){Object.defineProperty(e,"__esModule",{value:!0});var o,i=(o=he.VisualTool,oe.__extends(n,o),n.prototype._doDispose=function(){this._focusMask=this._focusMask.dispose(),this._colResizeReq=this._colResizeReq.dispose(),o.prototype._doDispose.call(this)},_dp(n,"form",{get:function(){return this._form}}),_dp(n,"grid",{get:function(){return this._form.container.gridView}}),n.prototype.focuseIndexChanging=function(t){},n.prototype.focusedChanged=function(t,e){this.$_resetFocusView()},n.prototype.resetFocused=function(){this.$_resetFocusView()},n.prototype._doSetFocus=function(t){this.grid.editController.setFocus(!0,t)},n.prototype._doFocusLeave=function(){},n.prototype._doKeyDown=function(t){var e=t.keyCode,i=t.ctrlKey,o=(t.shiftKey,this._form),n=o.options,r=this.grid;if(27==e)r.closePopups();else if(13==e)r.isEditing()&&(o.$_commitEditor(),n.enterToNextCell&&o.focusedIndex++);else if(9!=e&&113!=e&&(90!=e||!i)&&(89!=e||!i)&&ne.Utils.included(e,36,35,39,37,40,38,34,33)){var s=o.model.itemCount;if(0==s)return!0;if(!o.focusedItem)return!(o.focusedIndex=0);var a=o.focusedIndex;switch(e){case 36:a=0;break;case 35:a=s-1;break;case 37:case 38:case 33:a=Math.max(0,a-1);break;case 39:case 40:case 34:a=Math.min(s-1,a+1)}o.focusedIndex=a}},n.prototype._doMouseDown=function(t){var e=t.mouseX,i=t.mouseY,o=t.ctrlKey||t.metaKey,n=this.form,r=n.container.gridView;if(clearInterval(this._swipeTimer),this._stopTapTracker(!1),r.closePopups(),this.dragTracker&&(this.dragTracker.dispose(),this.dragTracker=null),0==t.button){var s=this._clickTarget=this.mouseEventTarget,a=this._getEditRequest(s,e,i,o,t.shiftKey),l=this._getDragTracker(a,e,i),h=this._findTableCell(s);h?(n.container._containerDom.focus(),n.focusedIndex=h.parentElement.sectionRowIndex):n.$_commitEditor(),this.dragTracker=l}},n.prototype._doMouseMove=function(t){var e=t.mouseX,i=t.mouseY;if(this.form,!this.dragTracker){this.mouseEventTarget.style.cursor="default";var o=this._getEditRequest(this.mouseEventTarget,e,i,!1,!1);o&&o.cursor&&(this.mouseEventTarget.style.cursor=o.cursor)}},n.prototype._doClick=function(t){var e=t.target,i=this.form;if(e instanceof ne.getWin(t.target).HTMLElement){if(i.$_elementClicked(e))return;i.footerView.isCheck(e)&&i.container.gridView.toggleCheck(i.currentRow),i.headerView.isClose(e)&&(i.visible=!1)}var o=this._findTableCell(t.target);if(o){var n=this.form.bodyView.bodyCellByCell(o);if(n&&n.isEditButton(t.target)){var r=i.focusedIndex=o.parentElement.$_row;ne.Utils.isMobile()?i.showList(r)&&i.editorButtonClicked(r):(i.makeCellVisible(n.getEditIndex(null)),i.showEditor(r)&&i.editorButtonClicked(r))}}},n.prototype._doDblClick=function(t){t.target;var e=this.form,i=this._findTableCell(t.target);if(i){var o=i.parentElement.$_row;0<=o&&o==e.focusedIndex&&1==i.cellIndex&&(e.showEditor(o),t.preventDefault(),t.stopImmediatePropagation())}},n.prototype._getEditRequest=function(t,e,i,o,n){var r=this.form,s=r._headerView;if(s.visible){var a=r.labelWidth;if(i<s.height&&a-1<=e&&e<=a+1)return this._colResizeReq.init(e,i,e-a)}return null},n.prototype._getDragTracker=function(t,e,i){return t instanceof h?new f(t,this._cellResizer):null},n.prototype.$_resetFocusView=function(){var t=this._form,e=t.container.gridView,i=t.options,o=t.focusedItem,n=!1;if(o&&i.focusVisible&&!t.isEditing()){var r=t._bodyView,s=r.getValueCellRect(o);if(s.y+=r.y,0<s.width&&0<s.height){var a=e.isEditing();s.width-=1+t.$_getScrollBarWidth(),a&&(s.y--,s.height+=1),this._focusMask.updateElement(0,0,s.width,s.height,a),this._focusMask.setRect(s),n=!0}}this._focusMask.visible=n},n.prototype._stopTapTracker=function(t){this._tapTracker},n.prototype.onTouch=function(t,e,i){clearInterval(this._swipeTimer),this._stopTapTracker(!1);var o=this.form;return this._clickTarget=t.target,(this._clickCell=this._findTableCell(this._clickTarget))&&o.container._containerDom.focus(),null},n.prototype.onTap=function(t,e,i){if(ne.Utils.isiOS&&this.touchManager){var o=ne.Utils.getTimer();if(this.touchManager.touchEndt+50>o)return}},n.prototype.onDoubleTapHandler=function(t,e,i){this.form,this._findTableCell(t.target),t.mouseX=e,t.mouseY=i,this._doDblClick(t)},n.prototype.onLongTapHandler=function(t,e,i){},n.prototype.onDragStartHandler=function(t,e,i,o){var n=null;return(n=this.form.$_isScrollBar(this._clickTarget)?new R(this._form):new I(this._form,this._focusMask))&&n.start(t,e,i,o)&&(this._tapTracker=n),this._tapTracker},n.prototype.onDragHandler=function(t,e,i,o){var n=this._tapTracker,r=!1;return n&&(this._tapTracker,(r=n.drag(t,e,i,o))?this.$_resetFocusView():(n.cancel(),this._tapTracker=null)),r},n.prototype.onDragEndHandler=function(t,e,i){if(this._tapTracker){var o=this._form;if(i||o.canSwipeCommit()||(i=!0),this._tapTracker instanceof I){var n=this._form._bodyView2;if(n.visible){var r=o.width;this._swipePrev=this._swipeStarted=ne.Utils.getTimer(),this._swipeAmount=0,this._swipeDelta=i?0:o.canSwipe(n.x),0<this._swipeDelta||this._swipeDelta<0?(this._swipeDistance=n.x,this._swipeDuration=200,this._swipeTimer=setInterval(this.$_scrollBody.bind(this),50)):0<n.x?(this._swipeDistance=-(r-n.x),this._swipeDuration=120,this._swipeTimer=setInterval(this.$_scrollBody.bind(this),50)):n.x<0&&(this._swipeDistance=r+n.x,this._swipeDuration=120,this._swipeTimer=setInterval(this.$_scrollBody.bind(this),50))}}this._tapTracker.end(i),this._tapTracker=null}},n.prototype.onSwipeHandler=function(t,e,i,o){var n=this.form,r=(this._form.width,this._form._bodyView2);this._swipePrev=this._swipeStarted=ne.Utils.getTimer(),this._swipeAmount=0;var s=this._touchManager._events,a=s[s.length-1],l=o.timeStamp-a.t;if(!n.canSwipeCommit()||!n.canSwipe(r.x)&&300<l)return!1;if("left"===i||"right"===i)for(var h=Math.sign(s[0].x-s[1].x),d=1,u=s.length;d<u-1;d++)if(h!==Math.sign(s[d].x-s[d+1].x))return!1;switch(this._startDragTracker&&(this._tapTracker.end(!0),this._tapTracker=null),this._swipeDelta=1,i){case"right":this._swipeDelta=-1;case"left":this._swipeDistance=r.x,this._swipeDuration=200,this._swipeTimer=setInterval(this.$_scrollBody.bind(this),50);break;case"bottom":this._swipeDelta=-1;case"top":this._swipeDistance=this._swipeDelta*e,this._swipeDuration=200,this._swipeTimer=setInterval(this.$_scrollRow.bind(this),50)}return!0},n.prototype.$_scrollBody=function(){var t=this.form,e=t.container.gridView,i=ne.Utils.getTimer();if(i-this._swipeStarted<this._swipeDuration){var o=i-this._swipePrev,n=Math.floor((this._swipeDistance-this._swipeAmount)*o/this._swipeDuration);this._swipeAmount-=Math.abs(n),this._swipePrev=i,t._bodyView2.x-=n}else if(clearInterval(this._swipeTimer),t._bodyView2.visible&&(t._bodyView2.visible=!1,t._bodyView._dom.style.opacity="",this._focusMask._dom.style.opacity="",0!=this._swipeDelta)){var r=e.getItem(t.currentRow),s=0<this._swipeDelta?e.getNextRow(r):e.getPrevRow(r);s.index!=t.currentRow&&(t.container.gridView.commit(!0,!0),t.currentRow=s?s.index:-1)}},n.prototype.$_scrollRow=function(){this.form;var t=ne.Utils.getTimer();if(t-this._swipeStarted<this._swipeDuration){var e=t-this._swipePrev,i=Math.floor((this._swipeDistance-this._swipeAmount)*e/this._swipeDuration);this._swipeAmount-=i,this._swipePrev=t,this.form.topPos+=i}else clearInterval(this._swipeTimer)},n.prototype.$_createTouchManager=function(t){var e=new Se.SingleTouchManager(t);return e.touchHandler=this.onTouch.bind(this),e.tapHandler=this.onTap.bind(this),e.doubleTapHandler=this.onDoubleTapHandler.bind(this),e.longTapHandler=this.onLongTapHandler.bind(this),e.dragStartHandler=this.onDragStartHandler.bind(this),e.dragHandler=this.onDragHandler.bind(this),e.dragEndHandler=this.onDragEndHandler.bind(this),e.swipeHandler=this.onSwipeHandler.bind(this),e},n);function n(t){var e=o.call(this,t,"formSelectionTool")||this;e._focusMask=null,e._cellResizer=null,e._tapTracker=null,e._swipeTimer=null,e._swipeDistance=0,e._swipeDelta=0,e._swipeDuration=0,e._swipeStarted=null,e._swipePrev=void 0,e._swipeAmount=0,e._tapX=NaN,e._tapY=NaN;var i=e._form=t.formView;return e._focusMask=new Pe.FocusMask(t.doc),e._cellResizer=new Pe.HeaderCellResizer(t.doc),i.addBodyElement(e._focusMask),e._colResizeReq=new h(i),e._touchManager=e.$_createTouchManager(t),e}e.FormSelectionTool=i;var r,s=(r=he.EditRequest,oe.__extends(a,r),a.prototype._doDispose=function(){this._form=null,r.prototype._doDispose.call(this)},_dp(a,"form",{get:function(){return this._form}}),a);function a(t){var e=r.call(this)||this;return e._form=t,e}e.FormEditRequest=s;var l,h=(l=s,oe.__extends(d,l),d.prototype._doDispose=function(){l.prototype._doDispose.call(this)},_dp(d,"x",{get:function(){return this._x}}),_dp(d,"y",{get:function(){return this._y}}),_dp(d,"offset",{get:function(){return this._offset}}),d.prototype.init=function(t,e,i){return this._x=t,this._y=e,this._offset=i,this},_dp(d,"cursor",{get:function(){return"col-resize"}}),d);function d(t){return l.call(this,t)||this}e.FormColumnResizeRequest=h;var u,_=(u=le.DragTracker,oe.__extends(c,u),c.prototype._doDispose=function(){this._form=null,u.prototype._doDispose.call(this)},_dp(c,"form",{get:function(){return this._form}}),_dp(c,"startWhenCreated",{get:function(){return!1}}),c);function c(t,e){var i=u.call(this,t.container,e)||this;return i._form=t,i}e.FormDragTracker=_;var p,f=(p=_,oe.__extends(g,p),g.prototype._doDispose=function(){try{this.form.removeFeedbackElement(this._feedback)}catch(t){}this._request=null,this._feedback=null,p.prototype._doDispose.call(this)},g.prototype._doStart=function(t,e,i,o){var n=this._form._footerView.y;return this._feedback.resize(2,+n),this._feedback.move(e-this._offset,0),this.form.addFeedbackElement(this._feedback),!0},g.prototype._doDrag=function(t,e,i){var o=this._form.options.minLabelWidth;return this._form.labelWidth,(e-=this._offset)>=this._start+o&&e<this._start+1e6&&(this._feedback.x=e,!0)},g.prototype._doEnded=function(){var t=this._feedback.x-this._start;this.form.removeFeedbackElement(this._feedback),this.form.labelWidth=t,this.form.container.setCursor("default")},g);function g(t,e){var i=p.call(this,t.form,"formColumnResizeTracker")||this;return i._request=t,i._feedback=e,i._start=t.x+t.offset-i.form.labelWidth,i._offset=t.offset,i}var m,y=(m=Ut.LayerElement,oe.__extends(v,m),v.prototype._getCssSelector=function(){return 0<this.delta?"rg-form-swipe-left":"rg-form-swipe-right"},v);function v(){var t=null!==m&&m.apply(this,arguments)||this;return t.delta=0,t}var w,C=(w=Ut.LayerElement,oe.__extends(x,w),x.prototype._getCssSelector=function(){return 0<this.delta?"rg-form-end-right":"rg-form-end-left"},x);function x(){var t=null!==w&&w.apply(this,arguments)||this;return t.delta=0,t}var b,I=(b=yi.MobileDragTracker,oe.__extends(E,b),E.prototype._doDispose=function(){try{this._form.removeFeedbackElement(this._swipeMarker),this._form.removeFeedbackElement(this._endMakrer)}catch(t){}this._form=null,this._focusMask=null,this._body=null,this._body2=null,this._swipeMarker=this._swipeMarker.dispose(),this._endMakrer=this._endMakrer.dispose(),b.prototype._doDispose.call(this)},E.prototype._doStart=function(t,e,i,o){var n=this._form,r=n.container.gridView,s=i-t,a=o-e;if(n.$_commitEditor(),this._vertical=Math.abs(a)>=Math.abs(s),this._moving=!1,!this._vertical&&0!=s&&n.canSwipeCommit()){var l=n.currentRow,h=r.rowCount;if(0<s&&(0==h||0==l))this._ending=-1;else if(s<0&&(0==h||r.getLastRow().index==l))this._ending=1;else{var d=this._body.x,u=this._body.width;0<s?d-=u-s:d+=u+s,this._body._dom.style.opacity="0.5",this._focusMask._dom.style.opacity="0.1";var _=this._form._layoutInfo,c=r.getItem(l);c=0<s?r.getPrevRow(c):r.getNextRow(c),_.gridRow=c.index,this._body2.setBounds(d,this._body.y,u,this._body.height),this._body2.layoutContent(_),this._body2.visible=!0,_.gridRow=l,this._moving=!0}}return this._tapX=i,this._tapY=o,!0},E.prototype._doDrag=function(t,e,i,o){var n=this._form,r=i-t,s=o-e;if(this._vertical)n.topPos-=s;else if(this._moving){var a=this._swipeMarker,l=n.canSwipe(this._body2.x);if(0!=l){var h=n.width,d=n.height;a.delta=l,a.resetStyleName(),a.setBounds((h-80)/2,(d-80)/2,80,80),a.applyBounds(),n.addFeedbackElement(a)}else n.removeFeedbackElement(a);this._body2.x+=r}else if(0!=this._ending){a=this._endMakrer,h=.12*(d=n.height);var u=this._ending<0?0:n.width-h;a.delta=this._ending,a.resetStyleName(),a.setBounds(u,0,h,d),a.applyBounds(),n.addFeedbackElement(a)}return!0},E.prototype._doEnd=function(){this._moving?this._form.removeFeedbackElement(this._swipeMarker):this._form.removeFeedbackElement(this._endMakrer)},E);function E(t,e){var i=b.call(this)||this;return i._tapX=NaN,i._tapY=NaN,i._vertical=!0,i._moving=!1,i._ending=-1,i._form=t,i._focusMask=e,i._body=t._bodyView,i._body2=t._bodyView2,i._swipeMarker=new y(e.doc,"swipeMarker"),i._endMakrer=new C(e.doc,"endMarker"),i}e.FormMobileScrollTracker=I;var S,R=(S=yi.MobileDragTracker,oe.__extends(D,S),D.prototype._doDispose=function(){this._form=null,S.prototype._doDispose.call(this)},D.prototype._doStart=function(t,e,i,o){var n=this._form;return n.container.gridView,n.$_commitEditor(),!0},D.prototype._doDrag=function(t,e,i,o){var n=o-e;return this._form.topPos+=n,!0},D.prototype._doEnd=function(){},D);function D(t){var e=S.call(this)||this;return e._form=t,e}e.FormMobileScrollBarTracker=R});t(vi);vi.FormSelectionTool,vi.FormEditRequest,vi.FormColumnResizeRequest,vi.FormDragTracker,vi.FormMobileScrollTracker,vi.FormMobileScrollBarTracker;var wi=e(function(t,e){Object.defineProperty(e,"__esModule",{value:!0});var i,o=(i=xt.DataCellRenderer,oe.__extends(n,i),n.prototype._doDispose=function(){i.prototype._doDispose.call(this)},_dp(n,"template",{get:function(){return this._parser.template},set:function(t){t!=this._parser.template&&(this._parser.template=t,this._changed())}}),_dp(n,"output",{get:function(){return this._output},set:function(t){this._output=t}}),_dp(n,"valueCallback",{get:function(){return this._valueCallback},set:function(t){t!==this._valueCallback&&(this._valueCallback=t,this._changed())}}),n.prototype.renderFormCell=function(t,e){this.$_setHtml(this._parser.realizeForm(t,e,this._valueCallback))},_dp(n,"type",{get:function(){return n.TYPE}}),n.prototype.$_setHtml=function(t){t!=this._html&&(this._html=t,this._dom.innerHTML=t)},n.TYPE="formHtml",n);function n(){var t=i.call(this)||this;return t._output=void 0,t._html="",t._parser=new bt.HtmlTemplateParser,t.template="<span>${value}</span>",t}e.FormTemplateRenderer=o});t(wi);wi.FormTemplateRenderer;var Ci=e(function(t,e){Object.defineProperty(e,"__esModule",{value:!0});var i,r=(i=re.Base,oe.__extends(o,i),_dp(o,"modal",{get:function(){return this._modal},set:function(t){t!=this._modal&&(this._modal=t,this._changed())}}),_dp(o,"modalPadding",{get:function(){return this._modalPadding},set:function(t){if(t!=this._modalPadding){if(this._modalPadding=t,this._padTop=this._padBottom=this._padLeft=this._padRight=0,this._padTopP=this._padBottomP=this._padLeftP=this._padRightP=NaN,t){var e,i=t.split(/\s+/),o=i.length;0<o&&("%"==(e=i[0]).charAt(e.length-1)?this._padTopP=parseFloat(e):this._padTop=ne.Utils.toFloat(e)),1<o&&("%"==(e=i[1]).charAt(e.length-1)?this._padRightP=parseFloat(e):this._padRight=ne.Utils.toFloat(e)),2<o&&("%"==(e=i[2]).charAt(e.length-1)?this._padBottomP=parseFloat(e):this._padBottom=ne.Utils.toFloat(e)),3<i.length&&("%"==(e=i[3]).charAt(e.length-1)?this._padLeftP=parseFloat(e):this._padLeft=ne.Utils.toFloat(e)),3==i.length&&(this._padLeftP=this._padRightP,this._padLeft=this._padRight),2==i.length&&(this._padBottomP=this._padTopP,this._padBottom=this._padTop,this._padLeftP=this._padRightP,this._padLeft=this._padRight),1==i.length&&(this._padRightP=this._padBottomP=this._padLeftP=this._padTopP,this._padRight=this._padBottom=this._padLeft=this._padTop)}this._changed()}}}),_dp(o,"modalOpacity",{get:function(){return this._modalOpacity},set:function(t){this._modalOpacity=Math.max(0,Math.min(1,t))}}),_dp(o,"autoClose",{get:function(){return this._autoClose},set:function(t){this._autoClose=t}}),_dp(o,"editable",{get:function(){return this._editable},set:function(t){this._editable=t}}),_dp(o,"itemResizable",{get:function(){return this._itemResizable},set:function(t){t!=this._itemResizable&&(this._itemResizable=t,this._changed())}}),_dp(o,"minLabelWidth",{get:function(){return this._minLabelWidth},set:function(t){(t=Math.max(0,t))!=this._minLabelWidth&&(this._minLabelWidth=t,this._changed())}}),_dp(o,"focusVisible",{get:function(){return this._focusVisible},set:function(t){t!=this._focusVisible&&(this._focusVisible=t,this._changed())}}),_dp(o,"scrollBarWidth",{get:function(){return this._scrollBarWidth},set:function(t){(t=Math.max(0,t))!=this._scrollBarWidth&&(this._scrollBarWidth=t,this._changed())}}),_dp(o,"commitWhenSwipe",{get:function(){return this._commitWhenSwipe},set:function(t){this._commitWhenSwipe=t}}),_dp(o,"enterToNextCell",{get:function(){return this._enterToNextCell},set:function(t){this._enterToNextCell=t}}),_dp(o,"editWhenFocused",{get:function(){return this._editWhenFocused},set:function(t){this._editWhenFocused=t}}),_dp(o,"checkBarSync",{get:function(){return this._checkBarSync},set:function(t){t!=this._checkBarSync&&(this._checkBarSync=t,this._changed())}}),_dp(o,"saveLabel",{get:function(){return this._saveLabel},set:function(t){t!=this._saveLabel&&(this._saveLabel=t,this._changed())}}),_dp(o,"cancelLabel",{get:function(){return this._cancelLabel},set:function(t){t!=this._cancelLabel&&(this._cancelLabel=t,this._changed())}}),o.prototype.setModalPadding=function(t,e,i,o){this.modalPadding=t+" "+(e||"")+" "+(i||"")+" "+(o||"")},o.prototype.padRect=function(t){isNaN(this._padLeftP)?t.leftBy(this._padLeft):t.leftBy(Math.floor(this._padLeftP*t.width/100)),isNaN(this._padRightP)?t.rightBy(this._padRight):t.rightBy(-Math.floor(this._padRightP*t.width/100)),isNaN(this._padTopP)?t.topBy(this._padTop):t.topBy(Math.floor(this._padTopP*t.height/100)),isNaN(this._padBottomP)?t.bottomBy(this._padBottom):t.bottomBy(-Math.floor(this._padBottomP*t.height/100))},o.prototype._changed=function(){this._owner&&this._owner.invalidateLayout()},o);function o(t){var e=i.call(this)||this;return e._modal=!1,e._modalPadding="10%",e._modalOpacity=.15,e._autoClose=!1,e._editable=!0,e._itemResizable=!0,e._minLabelWidth=60,e._focusVisible=!0,e._scrollBarWidth=9,e._commitWhenSwipe=!1,e._enterToNextCell=!0,e._editWhenFocused=!0,e._checkBarSync=!0,e._saveLabel="Save",e._cancelLabel="Cancel",e._padTopP=10,e._padBottomP=10,e._padLeftP=10,e._padRightP=10,e._padTop=NaN,e._padBottom=NaN,e._padLeft=NaN,e._padRight=NaN,e._owner=t,e}e.FormOptions=r;var n,s=function(){},a=(n=Ut.VisualElement,oe.__extends(l,n),l.prototype._getCssSelector=function(){return"rg-form-marquee"},l.prototype._doDraw=function(t){},l);function l(){return null!==n&&n.apply(this,arguments)||this}e.FormMarquee=a;var h,d=(h=Ut.VisualElement,oe.__extends(u,h),u.prototype._doDispose=function(){h.prototype._doDispose.call(this)},u.prototype._doDraw=function(t){},u.prototype._changed=function(){},u);function u(t,e){return h.call(this,t,e)||this}var _,c=(_=d,oe.__extends(p,_),p.prototype._doDispose=function(){_.prototype._doDispose.call(this)},p.prototype._getCssSelector=function(){return"rg-form-scrollbar"},p);function p(t){return _.call(this,t,"formScrollBar")||this}var f,g=(f=Ut.LayerElement,oe.__extends(m,f),m.prototype._doDispose=function(){f.prototype._doDispose.call(this)},_dp(m,"model",{get:function(){return this._model}}),_dp(m,"formView",{get:function(){var t=this.parent;do{if(t instanceof k)return t;t=t.parent}while(t)}}),m.prototype.measure=function(t,e,i){return this.resetStyleName(),this._doMeasure(t,e,i)},m.prototype.layoutContent=function(t){ne.Utils.isMobile()?this._doLayoutMobile(t,this.width,this.height):this._doLayoutContent(t,this.width,this.height)},m.prototype._getCssSelector=function(){return this._model.styleName},m.prototype._doLayoutMobile=function(t,e,i){this._doLayoutContent(t,e,i)},m.prototype._changed=function(){},m);function m(t,e,i){var o=f.call(this,t,i)||this;return o._model=e,o}var y,v=(y=Ut.VisualElement,oe.__extends(w,y),w.prototype._doDispose=function(){y.prototype._doDispose.call(this)},w.prototype.updateContent=function(t){this._doUpdateContent(t)},w.prototype._getCssSelector=function(){return"rg-form-cell"},w.prototype._changed=function(){},w.prototype._doUpdateContent=function(t){},w.prototype._doDraw=function(t){},w);function w(t){return y.call(this,t)||this}var C;C=Ut.VisualElement,oe.__extends(x,C),x.prototype._doDispose=function(){C.prototype._doDispose.call(this)},x.prototype._changed=function(){};function x(t){return C.call(this,t)||this}var b,I=(b=mt.DataCell,oe.__extends(E,b),E.prototype.getValue=function(){var t,e=this._column.dataIndex;if(0<=e)return null===(t=this.$_getItem())||void 0===t?void 0:t.getData(e)},E.prototype.getBlankState=function(){return lt.BlankState.NONE},E.prototype.isValueChanged=function(){var t,e=this._column.dataIndex;return 0<=e&&(null===(t=this.$_getItem())||void 0===t?void 0:t.isChanged(e))},E.prototype.getDisplayText=function(t,e){return mt.DataCell._getDisplayText(t,this.$_getItem(),this._column,this.getValue(),e)},E.prototype.$_getItem=function(){return this._column.grid.getItem(this.index.itemIndex)},E);function E(){return null!==b&&b.apply(this,arguments)||this}var S,R=(S=kt.CellIndex,oe.__extends(D,S),D);function D(){return null!==S&&S.apply(this,arguments)||this}var T,k=(T=Ut.ViewLayer,oe.__extends(M,T),M.prototype._doDispose=function(){this._dataCell=this._dataCell.dispose(),this._literalCell=this._literalCell.dispose(),this._seriesCell=this._seriesCell.dispose(),this._rowRuntime=this._rowRuntime.dispose(),this._cellRuntime=this._cellRuntime.dispose(),this._options=this._options.dispose(),T.prototype._doDispose.call(this)},M.prototype.getColumnObject=function(t){var e=this.container.gridView;return e&&e.columnByName(t)},M.prototype.getDataFieldIndex=function(t){var e=this.container.gridView;return e&&e.dataSource?e.dataSource.getFieldIndex(t):-1},M.prototype.getEditItem=function(t){return t.getItem(this._currentRow)},M.prototype.canWrite=function(t){return!0},M.prototype.getEditor=function(t){if(t instanceof R)return t.formItem.editor},M.prototype.getEditBounds=function(t,e){var i=this._bodyView,o=this._model.getItem(this._editIndex),n=i.boundsByContainer(i.getValueCellRect(o)),r=i.bodyCellAt(o),s=(t.native?0:r.editWidth)+r.buttonWidth+r.errorWidth;return n.width-=this.$_getScrollBarWidth(),0<s&&n.width>s+10&&(n.width-=s+10,n.width<0&&(n.width+=s+10)),n.width=Math.max(0,n.width),n},M.prototype.isEditing=function(){return 0<=this._editIndex},M.prototype.isItemEditing=function(){return this.container.gridView.isItemEditing()},M.prototype.validateCellCommit=function(t,e){},M.prototype.makeCellVisible=function(t){return!0},M.prototype.editCellCommit=function(t,e,i){return this.invalidateLayout(),!0},M.prototype.editorChange=function(t,e,i){},M.prototype.editorShow=function(t){this._selectionTool.resetFocused()},M.prototype.editorHide=function(t){this._editIndex=-1,this._selectionTool.resetFocused()},M.prototype.itemUpdateStarted=function(t,e){this._saveRow=this._currentRow,this.invalidateLayout()},M.prototype.itemAppendStarted=function(t,e){this._saveRow=this._currentRow,this._currentRow=e.index,this.invalidateLayout()},M.prototype.itemInsertStarted=function(t,e){this._saveRow=this._currentRow,this._currentRow=e.index,this.invalidateLayout()},M.prototype.itemCommited=function(t,e){this.invalidateLayout()},M.prototype.itemCanceled=function(t){this._currentRow=this._saveRow,this.invalidateLayout()},M.prototype.itemInserted=function(t,e){this._currentRow=e.index,this.invalidateLayout()},M.prototype.itemsChanged=function(t){this.invalidateLayout()},_dp(M,"container",{get:function(){return this._container}}),_dp(M,"delegate",{get:function(){return this._delegate}}),_dp(M,"model",{get:function(){return this._model}}),_dp(M,"options",{get:function(){return this._options}}),_dp(M,"dataSource",{get:function(){var t=this.container.gridView;return t&&t.dataSource}}),_dp(M,"headerView",{get:function(){return this._headerView}}),_dp(M,"footerView",{get:function(){return this._footerView}}),_dp(M,"topPos",{get:function(){return this._topPos},set:function(t){(t=Math.max(0,t))!=this._topPos&&(this._topPos=t,this.invalidateLayout())}}),_dp(M,"labelWidth",{get:function(){return this._labelWidth},set:function(t){(t=Math.max(0,t))!=this._labelWidth&&(this._labelWidth=t,this.invalidateLayout())}}),_dp(M,"valueWidth",{get:function(){return this._valueWidth}}),_dp(M,"currentRow",{get:function(){return this._currentRow},set:function(t){t!==this._currentRow&&(this.$_commitEditor(),this._currentRow=t,this.invalidateLayout())}}),_dp(M,"focusedItem",{get:function(){return this._focusedItem},set:function(t){if(t!=this._focusedItem){var e=this._focusedItem;this.$_commitEditor();var i=this._focusedItem=t;if(this._selectionTool.focusedChanged(e,t),this.$_focusedChanged(e,t),this.$_makeCellVisible(i),i instanceof mi.FormColumnItem){var o=this.container.gridView,n=this.$_getIndex(i);this._editIndex=i.vindex,o._editController._needPrepare=!0,o._editController.prepareEditor(n),this._options.editWhenFocused&&(this._needEditor=!0,this.showEditor(this.focusedIndex))}}}}),_dp(M,"focusedIndex",{get:function(){return this._focusedItem?this._focusedItem.vindex:-1},set:function(t){var e=this.model;0<=t&&0<e.itemCount?(t=Math.min(t,e.itemCount-1),this.focusedItem=ne.Utils.cast(e.getItem(t),mi.FormValueItem)):this.focusedItem=null}}),_dp(M,"bodyView",{get:function(){return this._bodyView}}),M.prototype.getHandler=function(){return this},M.prototype.invalidateLayout=function(){this.visible&&this._container.invalidateLayout()},M.prototype.addFeedbackElement=function(t){if(t&&!this._feedbackLayer.contains(t))return this._feedbackLayer.addChild(t),!0},M.prototype.removeFeedbackElement=function(t){var e=this._feedbackLayer.indexOf(t);return 0<=e&&(this._feedbackLayer.removeChildAt(e),!0)},M.prototype.canSwipeCommit=function(){return!(this.isItemEditing()&&!this._options.commitWhenSwipe)},M.prototype.canSwipe=function(t){var e=this.width;return 0<t&&t<.6*e?1:t<0&&.4*e<t+e?-1:0},M.prototype.$_getIndex=function(t){var e=this.container.gridView,i=t._columnObj,o=new R;return o.assign(e.getIndex(this.currentRow,i)),o.layout=this._layout.setColumn(e,i),o.formItem=t,o},M.prototype.showEditor=function(t){var e=this.container.gridView,i=this._model.getItem(t);if(i instanceof mi.FormColumnItem){var o=this.$_getIndex(i);return this._editIndex=t,e.showEditor(o)}},M.prototype.showList=function(t){var e=this.container.gridView,i=this._model.getItem(t);if(i instanceof mi.FormColumnItem){var o=this.$_getIndex(i);return this._editIndex=t,e.showEditList(o)}},M.prototype.deleteRow=function(){var t=this;setTimeout(function(){t.$_deleteRow()},0)},M.prototype.appendRow=function(){this.$_appendRow()},M.prototype.addBodyElement=function(t){return this._bodyContainer.addChild(t)},M.prototype.removeBodyElement=function(t){return this._bodyContainer.removeChild(t)},M.prototype.close=function(){this.visible&&(this.visible=!1)},M.prototype.editorButtonClicked=function(t){var e=this.container.gridView,i=this._model.getItem(t);if(i instanceof mi.FormColumnItem){var o=this.$_getIndex(i);this._editIndex=i.vindex,e._editController.buttonClicked(o)}},M.prototype.setModel=function(t){this.model.load(t)},_dp(M,"isLayer",{get:function(){return!1}}),M.prototype._getCssSelector=function(){return this._options.modal?M.STYLE_MODAL:M.STYLE_NAME},M.prototype._doActivateView=function(){var t=this._container.gridView.focusedItem;t instanceof dt.GroupItem&&(t=t.firstDataItem),this.currentRow=t?t.index:-1,this._container.activeTool=this._selectionTool,this._container.gridView.editorLender=this},M.prototype._dodDeactivateView=function(){this._container.gridView.hideEditor(),this._container.gridView.editorLender=null},M.prototype._visibleChanged=function(){this.visible,this.container.invalidateLayout()},M.prototype.$_initialzie=function(){this._selectionTool=new vi.FormSelectionTool(this._container)},M.prototype.$_prepareRender=function(t){},M.prototype.$_layout=function(t,e){var i,o,n=e.x,r=e.y,s=e.width,a=e.height,l=this._model,h=this._options,d=this._layoutInfo;if(this._delegate=t,this._model.$_prepareLayout(),d.form=l,d.formView=this,d.columnBinder=this,d.gridRow=this._currentRow,d.items=l._visibleItems,d.labelWidth=this.labelWidth,d.valueWidth=this._valueWidth=e.width-d.labelWidth,((i=this._headerView).visible=i.model.visible)&&(o=i.measure(d,s,a),i.setBounds(n,r,s,o.height),i.layoutContent(d),a-=o.height,r+=o.height),((i=this._footerView).visible=i.model.visible)&&(o=i.measure(d,s,a),i.setBounds(n,e.bottom-o.height,o.width,o.height),i.layoutContent(d),a-=o.height),this._bodyContainer.setBounds(n,r,s,a),this._bodyView2.visible=!1,(i=this._bodyView).visible=0<=d.gridRow){i._dom.style.opacity="",i.measure(d,s,a),i.layoutContent(d);var u=i._dom.offsetHeight,_=this._topPos=Math.max(0,Math.min(u-a,this._topPos));i.setBounds(0,-_,s,u);var c=this._scrollBar;if(c.visible=a<u){var p=h.scrollBarWidth,f=u,g=a,m=Math.max(0,f-g),y=Math.min(a,Math.max(20,a*g/f)),v=Math.min(a-y,Math.max(0,(a-y)*(this._topPos/m)));c.setBoundsI(n+s-p-2,r+v,p,y)}this._selectionTool.$_resetFocusView(),this._needEditor&&(this._needEditor=!1),this.container.gridView._editController.resetEditor(!1)}},M.prototype.$_getScrollBarWidth=function(){return this._scrollBar.visible?this._scrollBar.width:0},M.prototype._changed=function(){},M.prototype.$_getGridCell=function(t,e){var i,o=t._columnObj;return o instanceof Dt.DataColumn?(i=this._dataCell)._column=o:i=o instanceof Dt.SeriesColumn?this._seriesCell:o instanceof mt.LiteralCell?this._literalCell:this._dataCell,i.setIndex2(this.container.gridView,e,o),i},M.prototype.$_elementClicked=function(t){return!!this._footerView.$_elementClicked(t)},M.prototype.$_focusedChanged=function(t,e){this._bodyView.$_focusedChanged(t?t.vindex:-1,e?e.vindex:-1)},M.prototype.$_commitEditor=function(){this.container.gridView.isEditing()&&this.container.gridView.commitEditor(!0)},M.prototype.$_deleteRow=function(){var t=this.container.gridView,e=t.getItem(this._currentRow);e&&t.$_deleteSelection(e)},M.prototype.$_appendRow=function(){this.container.gridView.append()},M.prototype.$_isScrollBar=function(t){return this._scrollBar._dom===t},M.prototype.$_makeCellVisible=function(t){var e=this.topPos,i=this._bodyView.getValueCellRect(t,this._cellRect);i.y<e?this.topPos=i.y:i.bottom>=e+this._bodyContainer.height&&(this.topPos+=i.bottom-(e+this._bodyContainer.height))},M.STYLE_NAME="rg-form-root rg-form",M.STYLE_MODAL="rg-form-root rg-form rg-form-modal",M);function M(t,e){var i=T.call(this,t.doc)||this;i._topPos=0,i._labelWidth=120,i._currentRow=-1,i._valueWidth=0,i._needEditor=!1,i._layout=new tt(null),i._editIndex=-1,i._saveRow=-1,i._cellRect=new ht.Rectangle;var o=t.doc;i._container=t;var n=i._model=new mi.Form;return i._options=new r(i),e&&i._options.assignFrom(e),i.addChild(i._headerView=new A(o,n.header)),i.addChild(i._bodyContainer=new Ut.LayerElement(o)),i._bodyContainer._dom.style.overflow="hidden",i._bodyContainer.addChild(i._bodyView=i._bodyView1=new ot(o,n.body)),i._bodyContainer.addChild(i._bodyView2=new ot(o,n.body)),i._bodyView2.visible=!1,i._bodyView2._dom.style.background="white",i._bodyView2._dom.style.borderLeft="1px solid gray",i._bodyView2._dom.style.borderRight="1px solid gray",i.addChild(i._footerView=new G(o,n.footer)),i.addChild(i._feedbackLayer=new Ut.LayerElement(o,"feedbackLayer")),i.addChild(i._scrollBar=new c(o)),i._layoutInfo=new s,i._dataCell=new I,i._literalCell=new mt.LiteralCell,i._seriesCell=new mt.SeriesCell,i._rowRuntime=new gt.DataRowExpressionRuntime,i._cellRuntime=new gt.DataCellExpressionRuntime,i.visible=!1,i}e.FormView=k;var L,F=(L=v,oe.__extends(V,L),V.prototype._doDispose=function(){L.prototype._doDispose.call(this)},V.prototype._getCssSelector=function(){return this._right?L.prototype._getCssSelector.call(this)+" rg-form-cell-right":L.prototype._getCssSelector.call(this)},V.prototype._createDom=function(t){var e=L.prototype._createDom.call(this,t),i=this._div=t.createElement("div");return this._div.className=V.STYLE_NAME,e.appendChild(i),this._span=t.createElement("span"),i.appendChild(this._span),e},V.prototype._doAttached=function(t){},V.prototype._doUpdateContent=function(t){this._span.textContent=t.displayText},V.STYLE_NAME="rg-form-header-cell",V);function V(t,e){void 0===e&&(e=!1);var i=L.call(this,t)||this;return i._right=e,i}e.FormHeaderCellElement=F;var O,N=(O=Ut.VisualElement,oe.__extends(P,O),P.prototype._getCssSelector=function(){return""},P.prototype._createDom=function(t){var e=O.prototype._createDom.call(this,t),i=t.createElement("span");return e.appendChild(i),i.className="rg-form-close",e},P.prototype.isDom=function(t){return t===this._dom.firstElementChild||O.prototype.isDom.call(this,t)},P.prototype._doDraw=function(t){},P);function P(){return null!==O&&O.apply(this,arguments)||this}e.FormCloseView=N;var B,A=(B=g,oe.__extends($,B),$.prototype._doDispose=function(){B.prototype._doDispose.call(this)},$.prototype.isClose=function(t){return this._closeView.isDom(t)},$.prototype._doMeasure=function(t,e,i){var o=this.model;return jt.Size.create(e,o.height)},$.prototype._doLayoutContent=function(t,e,i){var o=this.model;this._labelCell.setBounds(0,0,t.labelWidth,i),this._labelCell.updateContent(o.getLabelCell()),this._valueCell.setBounds(t.labelWidth,0,t.valueWidth,i),this._valueCell.updateContent(o.getValueCell()),this._closeView.setBounds(0,0,i,i),this._closeView.visible=!this.formView.isItemEditing()},$.prototype._doDraw=function(t){},$);function $(t,e){var i=B.call(this,t,e,"headerView")||this;return i._labelCell=new F(t),i.addChild(i._labelCell),i._valueCell=new F(t,!0),i.addChild(i._valueCell),i._closeView=new N(t),i.addChild(i._closeView),i}e.FormHeaderView=A;var H,G=(H=g,oe.__extends(U,H),U.prototype._doDispose=function(){H.prototype._doDispose.call(this)},_dp(U,"editMode",{get:function(){return this._editMode},set:function(t){t!=this._editMode&&(this._editMode=t,this.invalidateLayout())}}),U.prototype.isCheck=function(t){return t==this._checkView},U.prototype._initDom=function(t){H.prototype._initDom.call(this,t),this.$_createElements(t)},U.prototype._doMeasure=function(t,e,i){var o=this.model;return jt.Size.create(e,o.height)},U.prototype._doLayoutContent=function(t,e,i){var o,n=this.formView,r=n.container.gridView,s=n.options,a=n.currentRow;this._currView.textContent=a+1+"",this._totalView.textContent=r.itemCount+"",this._headView.style.left="0px",this._headView.style.top="0px",this._headView.style.height=i+"px";var l=(i-this._menuView.offsetHeight)/2;this._menuView.style.top=l+"px",this._footView.style.right="0px",this._footView.style.top="0px",this._footView.style.height=i+"px",l=(i-this._checkView.offsetHeight)/2,this._checkView.style.right="0px",this._checkView.style.top=l+"px",n.options.checkBarSync?this._checkView.style.visibility=r.checkBar.visible?"":"hidden":this._checkView.style.visibility="",this._cancelLabel.textContent=s.cancelLabel||"Cancel",this._commitLabel.textContent=s.saveLabel||"Save";var h=this._checkView.offsetWidth+30;l=(i-this._cancelLabel.offsetHeight)/2+1,this._cancelLabel.style.right=h+"px",this._cancelLabel.style.top=l+"px",h+=this._cancelLabel.offsetWidth+5,l=(i-this._cancelView.offsetHeight)/2,this._cancelView.style.right=h+"px",this._cancelView.style.top=l+"px",h+=this._cancelView.offsetWidth+16,l=(i-this._commitLabel.offsetHeight)/2+1,this._commitLabel.style.right=h+"px",this._commitLabel.style.top=l+"px",h+=this._commitLabel.offsetWidth+5,l=(i-this._commitView.offsetHeight)/2,this._commitView.style.right=h+"px",this._commitView.style.top=l+"px",o=this._posView.offsetWidth,l=(i-this._posView.offsetHeight)/2+1;var d=(e-o)/2,u=d+o;this._posView.style.left=d+"px",this._posView.style.top=l+"px",h=d-8,this._leftView.style.top="0px",this._leftView.style.height="100%",this._leftView.style.left=h+"px",h=8,l=(i-this._prevView.offsetHeight)/2,this._prevView.style.right=h+"px",this._prevView.style.top=l+"px",h+=this._prevView.offsetWidth+8,l=(i-this._firstView.offsetHeight)/2,this._firstView.style.right=h+"px",this._firstView.style.top=l+"px",this._rightView.style.top="0px",this._rightView.style.height="100%",u+=8,this._rightView.style.left=u+"px",h=8,l=(i-this._nextView.offsetHeight)/2,this._nextView.style.left=h+"px",this._nextView.style.top=l+"px",h+=this._nextView.offsetWidth+8,l=(i-this._lastView.offsetHeight)/2,this._lastView.style.left=h+"px",this._lastView.style.top=l+"px",this.invalidate()},U.prototype._doDraw=function(t){var e=this.formView,i=e.container.gridView,o=e.currentRow,n=i.getItem(o),r=i.isItemEditing(n),s=i.getFirstRow()!==n;s!=this._firstEnabled&&(this._firstEnabled=s,this._firstView.style.opacity=s?"":"0.3"),s!=this._prevEnabled&&(this._prevEnabled=s,this._prevView.style.opacity=s?"":"0.3"),(s=i.getLastRow()!==n)!=this._lastEnabled&&(this._lastEnabled=s,this._lastView.style.opacity=s?"":"0.3"),s!=this._nextEnabled&&(this._nextEnabled=s,this._nextView.style.opacity=s?"":"0.3");var a=!r;a!=this._firstVisible&&(this._firstVisible=a,this._firstView.style.opacity=a?"":"0"),a!=this._prevVisible&&(this._prevVisible=a,this._prevView.style.opacity=a?"":"0"),a!=this._lastVisible&&(this._lastVisible=a,this._lastView.style.opacity=a?"":"0"),a!=this._nextVisible&&(this._nextVisible=a,this._nextView.style.opacity=a?"":"0"),a!=this._posVisible&&(this._posVisible=a,this._posView.style.opacity=a?"":"0"),(a=r)!=this._commitVisible&&(this._commitVisible=a,this._commitView.style.opacity=a?"":"0",this._commitLabel.style.opacity=a?"":"0",this._commitView.style.pointerEvents=a?"":"none",this._commitLabel.style.pointerEvents=a?"":"none"),a!=this._cancelVisible&&(this._cancelVisible=a,this._cancelView.style.opacity=a?"":"0",this._cancelLabel.style.opacity=a?"":"0",this._cancelView.style.pointerEvents=a?"":"none",this._cancelLabel.style.pointerEvents=a?"":"none"),n&&(s=n.checked)!=this._checkEnabled&&(this._checkEnabled=s,this._checkView.style.opacity=s?"":"0.3")},U.prototype.$_createElements=function(t){var e=ne.getDoc(t);t.appendChild(this._posView=this.$_createPosition(e)),t.appendChild(this._leftView=this.$_createLeft(e)),t.appendChild(this._rightView=this.$_createRight(e)),t.appendChild(this._headView=this.$_createHead(e)),t.appendChild(this._footView=this.$_createFoot(e))},U.prototype.$_setIconStyle=function(t){var e=t.style;return e.position="absolute",e.display="inline-block",t},U.prototype.$_createHead=function(t){var e=t.createElement("div");return e.className="rg-footer-form-head",e.style.position="absolute",e.appendChild(this._menuView=this.$_setIconStyle(t.createElement("span"))),this._menuView.className="rg-form-menu",e},U.prototype.$_createFoot=function(t){var e=t.createElement("div");return e.className="rg-footer-form-foot",e.style.position="absolute",e.appendChild(this._checkView=this.$_setIconStyle(t.createElement("span"))),this._checkView.className="rg-form-check",e.appendChild(this._cancelView=this.$_setIconStyle(t.createElement("span"))),this._cancelView.className="rg-form-cancel",e.appendChild(this._cancelLabel=this.$_setIconStyle(t.createElement("span"))),this._cancelLabel.className="rg-form-label",this._cancelLabel.textContent="Cancel",e.appendChild(this._commitView=this.$_setIconStyle(t.createElement("span"))),this._commitView.className="rg-form-commit",e.appendChild(this._commitLabel=this.$_setIconStyle(t.createElement("span"))),this._commitLabel.className="rg-form-label",this._commitLabel.textContent="Save",e},U.prototype.$_createPosition=function(t){var e=t.createElement("div");return e.style.position="absolute",e.appendChild(this._currView=t.createElement("span")),this._currView.className="rg-form-position rg-form-position-current",this._currView.textContent="0",e.appendChild(this._slashView=t.createElement("span")),this._slashView.className="rg-form-position rg-form-position-slash",this._slashView.textContent="/",e.appendChild(this._totalView=t.createElement("span")),this._totalView.className="rg-form-position rg-form-position-total",this._totalView.textContent="0",e},U.prototype.$_createLeft=function(t){var e=t.createElement("div");return e.style.position="absolute",e.appendChild(this._firstView=this.$_setIconStyle(t.createElement("span"))),this._firstView.className="rg-form-first",e.appendChild(this._prevView=this.$_setIconStyle(t.createElement("span"))),this._prevView.className="rg-form-prev",e},U.prototype.$_createRight=function(t){var e=t.createElement("div");return e.style.position="absolute",e.appendChild(this._lastView=this.$_setIconStyle(t.createElement("span"))),this._lastView.className="rg-form-last",e.appendChild(this._nextView=this.$_setIconStyle(t.createElement("span"))),this._nextView.className="rg-form-next",e},U.prototype.$_elementClicked=function(t){var e,i=this.formView,o=i.model,n=i.container.gridView,r=i.currentRow;try{if(t===this._menuView&&this._menuEnabled){var s=o.footer.getPopupMenuName(n);s?n.popupMenuManager.show(s,t,null):i.visible=!1}else if(t===this._firstView&&this._firstEnabled)e=n.getFirstRow(),i.currentRow=e.index;else if(t===this._lastView&&this._lastEnabled)e=n.getLastRow(),i.currentRow=e.index;else if(t===this._prevView&&this._prevEnabled)e=n.getPrevRow(n.getItem(r)),i.currentRow=e.index;else if(t===this._nextView&&this._nextEnabled)e=n.getNextRow(n.getItem(r)),i.currentRow=e.index;else if(t!=this._commitLabel&&t!=this._commitView||!this._commitVisible){if(t!=this._cancelLabel&&t!=this._cancelView||!this._cancelVisible)return!1;e=n.getItem(r),n.$_cancelItem(e,!0),i.options.autoClose&&i.close()}else e=n.getItem(r),n.$_commitItem(e,!0,!0),i.options.autoClose&&i.close()}catch(t){alert(t)}return!0},U);function U(t,e){var i=H.call(this,t,e,"footerView")||this;return i._editMode=!1,i._menuEnabled=!0,i._posVisible=!0,i._firstVisible=!0,i._prevVisible=!0,i._nextVisible=!0,i._lastVisible=!0,i._firstEnabled=!0,i._prevEnabled=!0,i._nextEnabled=!0,i._lastEnabled=!0,i._commitVisible=!0,i._cancelVisible=!0,i._checkEnabled=!0,i}e.FormFooterView=G;var W,z=(W=v,oe.__extends(j,W),j.prototype._doDispose=function(){W.prototype._doDispose.call(this)},j.prototype._getCssSelector=function(){return""},j.prototype._doDraw=function(t){},j);function j(t){return W.call(this,t)||this}e.FormBodyCellElement=z;var q,Y=(q=d,oe.__extends(X,q),X.prototype._doDispose=function(){q.prototype._doDispose.call(this)},X.prototype._getCssSelector=function(){return""},X.prototype._doDraw=function(t){},X);function X(t){return q.call(this,t)||this}e.FormGroupHeaderElement=Y;var K,Z=(K=te.BodyTableCell,oe.__extends(Q,K),Q);function Q(t,e){var i=K.call(this,t)||this;return i.tcol=e,i}var J,tt=(J=Tt.CellLayoutColumnItem,oe.__extends(et,J),et.prototype.setColumn=function(t,e){return this._grid=t,this._columnObj=e,this},_dp(et,"grid",{get:function(){return this._grid}}),et);function et(){return null!==J&&J.apply(this,arguments)||this}var it,ot=(it=g,oe.__extends(nt,it),nt.prototype._doDispose=function(){this._tbody=this._thead=this._table=null;for(var t=0;t<2;t++)for(var e=this._cells[t],i=0,o=e.length;i<o;i++)e[i].dispose(),e[i]=null;this._cells=null,it.prototype._doDispose.call(this)},nt.prototype.bodyCellByCell=function(t){for(var e=0;e<this._cells.length;e++)for(var i=this._cells[e],o=0;o<i.length;o++){var n=i[o];if(n&&n.cell===t)return n}},nt.prototype.bodyCellAt=function(t){return this._cells[1][t.vindex]},nt.prototype.getValueCellRect=function(t,e){var i=this.formView,o=this._rowPoints,n=t.vindex;return(e=e||new ht.Rectangle).set(i.labelWidth,o[n],i.valueWidth,o[n+1]-o[n]),e},nt.prototype._createDom=function(t){var e=t.createElement("div"),i=this._table=t.createElement("table"),o=i.style;return o.setProperty("table-layout","fixed","important"),o.setProperty("width","0px","important"),i.className="rg-form-table",e.appendChild(i),this._thead=t.createElement("thead"),i.appendChild(this._thead),this._tbody=t.createElement("tbody"),i.appendChild(this._tbody),this.$_initTable(),e},nt.prototype._initDom=function(t){it.prototype._initDom.call(this,t),t.style.overflow="hidden"},nt.prototype._doMeasure=function(t,e,i){return jt.Size.create(e,i)},nt.prototype._doLayoutContent=function(t,e,i){var o=this.model;this.$_prepareRows(t,this._tbody),this.$_refreshCells(t.items,this._tbody),this.$_setCellsDisplay(this._cells,t.items),this.$_updateHead(t),this.$_updateRows(t,o)},nt.prototype._doDraw=function(t){},nt.prototype.$_initTable=function(){var t=ne.getDoc(this._thead),e=this._thead,i=t.createElement("tr");e.appendChild(i),i.setAttribute("aria-hidden","true");var o=i.style;o.setProperty("border","0px none","important");for(var n=0;n<2;n++){var r=t.createElement("th");r.scope="col",(o=r.style).setProperty("visibility","hidden","important"),o.setProperty("margin","0px","important"),o.setProperty("padding","0px","important"),o.setProperty("font-size","0px","important"),o.setProperty("line-height","0px","important"),o.height="0px",i.appendChild(r)}},nt.prototype.$_prepareRows=function(t,e){for(var i=ne.getDoc(e),o=t.items.length;e.childElementCount<o;){var n=i.createElement("tr");n.$_view=this.$_hash;for(var r=0;r<2;r++){var s=i.createElement("td");s.className=0==r?"rg-form-label-cell":"rg-form-value-cell",n.appendChild(s);var a=i.createElement("div");s.appendChild(a)}e.appendChild(n)}for(;e.childElementCount>o;)e.removeChild(e.lastChild)},nt.prototype.$_refreshCells=function(t,e){for(var i=this.formView.focusedIndex,o=this._cells,n=t.length,r=e.children,s=0;s<n;s++)for(var a=t[s],l=r[s].children,h=0;h<2;h++){var d=o[h][s];d?(d.cell,l[h]):d=o[h][s]=new Z(l[h],h),d.formItem=a,d.trow=s,d.focused=s==i}for(h=0;h<2;h++){var u=this._cells[h];for(s=n;s<o.length;s++)u[h]=null}o.length=n},nt.prototype.$_setCellsDisplay=function(t,e){for(var i=e.length,o=0;o<i;o++)for(var n=e[o],r=0;r<2;r++){var s=t[r][o];s.spanned=!1,n instanceof mi.FormItemGroup?0==r?(s.setColSpan(2),s.setVisible(!0)):s.clear(!1):(s.setColSpan(1),s.setVisible(!0))}},nt.prototype.$_updateHead=function(t){var e=this._thead.firstElementChild.children,i=e[0].style;i.width=t.labelWidth+"px",(i=e[1].style).width=t.valueWidth+"px"},nt.prototype.$_updateRows=function(t,e){for(var i=t.form,o=this.formView.container.gridView,n=this._tbody.rows,r=e.minRowHeight+"px",s=this._rowPoints=[0],a=0,l=n.length;a<l;a++){var h=i.getVisibleItem(a),d=n[a];d.style.height=r,d.$_row=a,h.$_prepareLayout(i,t.columnBinder,a),this.$_updateRow(t,o,h,a,d),s[a+1]=s[a]+d.getBoundingClientRect().height}},nt.prototype.$_setLabelStyle=function(t,e){t.className=e?"rg-form-label-cell rg-form-label-focused":"rg-form-label-cell"},nt.prototype.$_updateRow=function(t,e,i,o,n){var r=this._cells,s=n.children[0];n.children[1],i instanceof mi.FormValueItem&&(s.firstElementChild.textContent=i.header.displayText,this.$_setLabelStyle(s,r[1][o].focused),this.$_updateValueCell(t,e,t.gridRow,i,this._cells[1][o]))},nt.prototype.$_updateValueCell=function(t,e,i,o,n){var r=o instanceof mi.FormColumnItem&&t.formView.$_getGridCell(o,i);if(r){var s=o;e.body.getCellFormatters(s._columnObj,n,e.formatOptions),this.$_renderColumnCell(t,e,i,s,r,n)}else this.$_renderDataCell(t,o,n)},nt.prototype.$_createRenderer=function(t,e,i){if(e!==wi.FormTemplateRenderer.TYPE)return t.delegate.createRenderer(e,i,null);var o=new wi.FormTemplateRenderer;return i&&o.assignFrom(i),o},nt.prototype.$_getButtonVisible=function(t,e,i){var o=!1;switch(i){case lt.ButtonVisibility.ALWAYS:o=!0;break;case lt.ButtonVisibility.HIDDEN:o=!1;break;case lt.ButtonVisibility.VISIBLE:case lt.ButtonVisibility.ROWFOCUSED:o=e.focused;break;case lt.ButtonVisibility.DEFAULT:default:o=e.focused||e.mouseEntered}return o},nt.prototype.$_buttonWidth=function(t,e,i){var o=0;if((t.button||i.button)!=lt.CellButton.NONE){var n=e.grid,r=e,s=t.buttonVisibility||r.buttonVisibility;this.$_getButtonVisible(n,i,s)&&(o=n.body.cellButtonWidth)}return o},nt.prototype.$_editButtonWidth=function(t,e,i,o){var n=0;if(!o.readonly&&e){var r=i.grid,s=o.editorType;if(r.delegate.hasEditorButton(s,r.displayOptions.showNativeEditButton)){var a=!1;if(kt.CellIndex.equalsTo(r.focusedIndex,e.index,i.layout)){var l=r.delegate.getCellEditor(s);a=!!l&&l.listing}(a||this.$_getButtonVisible(r,o,t.editButtonVisibility||i.editButtonVisibility))&&(n=r.body.cellButtonWidth)}}return n},nt.prototype.$_errorWidth=function(t,e){return e.error?t.body.errorIconWidth:0},nt.prototype.$_renderColumnCell=function(t,e,i,o,n,r){var s,a,l=r.cell,h=o._columnObj,d=o.renderer||h.renderer;r.setEditor(null,o.editor||h.editor),"string"==typeof d?s=d:(s=d&&d.type||(h instanceof Dt.SeriesColumn?Zt.SeriesTextCellRenderer.SERIES_TYPE:xt.TextCellRenderer.TYPE),a=d);var u=!1;r.renderer2&&!r.rendererChanged&&r.renderer2.type==s||(r.renderer2&&r.renderer2.clearAndDispose(),r.renderer2=this.$_createRenderer(t.formView,s,a),u=!(r.rendererChanged=!1));var _=l.firstElementChild,c=r.renderer2,p=ne.getDoc(_);!u&&c&&c._dom!=_&&(c.clearContent(),u=!0);var f,g=e.getItem(i),m=this.$_buttonWidth(o,h,r),y=this.$_editButtonWidth(o,g,h,r),v=this.$_errorWidth(e,r),w=6+this.formView.$_getScrollBarWidth(),C=r.cellButton,x=r.editButton,b=r.errorIcon;0<m?(C?f=C.style:(C=p.createElement("span"),(f=(r.cellButton=C).style).position="absolute",f.display="inline-block",f.height="100%",f.top="0px"),r.buttonWidth<=0&&(l.appendChild(C),r.buttonWidth=m),f.right=w+"px",f.width=m+"px",r.resetButtonClass()):0<r.buttonWidth&&(l.removeChild(C),r.buttonWidth=0),0<y?(x?f=x.style:(x=p.createElement("span"),(f=(r.editButton=x).style).position="absolute",f.display="inline-block",f.height="100%",f.top="0px"),r.editWidth<=0&&(l.appendChild(x),r.editWidth=y),f.right=w+m+"px",f.width=y+"px",r.resetEditClass()):0<r.editWidth&&(l.removeChild(x),r.editWidth=0),0<v?(b?f=b.style:(b=p.createElement("span"),(f=(r.errorIcon=b).style).position="absolute",f.display="inline-block",f.top="0px",f.height="100%"),r.errorWidth<=0&&(l.appendChild(b),r.errorWidth=v),f.right=w+m+y+"px",f.width=v+"px",r.resetErrorClass()):0<r.errorWidth&&(l.removeChild(b),r.errorWidth=0);var I=c.styleName;u?c.initContent(n._index,_,I):c.checkClassName(I)&&(c.clearContent(),c.initContent(n._index,_,I)),c.renderCell(e,n,r);var E=n.isValueChanged()&&e.body._showChangeMarker;if(E!=r.valueChanged){if(E){var S=r.changedMarker;S||((S=r.changedMarker=p.createElement("div")).className="rg-changed-marker",S.style.position="absolute",S.style.display="block",S.style.top="0px",r.changedMarker=S),l.appendChild(S)}else r.changedMarker&&r.valueChanged&&l.removeChild(r.changedMarker);r.valueChanged=E}},nt.prototype.$_renderDataCell=function(t,e,i){var o,n,r=i.cell,s=e.renderer;e instanceof mi.FormTemplateItem?o=wi.FormTemplateRenderer.TYPE:"string"==typeof s?o=s:(o=s&&s.type||xt.TextCellRenderer.TYPE,n=s);var a=!1;i.renderer2&&!i.rendererChanged&&i.renderer2.type==o||(i.renderer2&&i.renderer2.clearAndDispose(),i.renderer2=this.$_createRenderer(t.formView,o,n),a=!(i.rendererChanged=!1));var l=r.firstElementChild,h=i.renderer2;!a&&h&&h._dom!=l&&(h.clearContent(),a=!0);var d=h.styleName;a?h.initFormContent(l,d):h.checkClassName(d)&&(h.clearContent(),h.initFormContent(l,d)),h instanceof wi.FormTemplateRenderer&&(h.template=e.template,h.renderFormCell(t.formView,e))},nt.prototype.$_focusedChanged=function(t,e){var i=this._tbody.rows;0<=t&&this.$_setLabelStyle(i[t].cells[0],!1),0<=e&&this.$_setLabelStyle(i[e].cells[0],!0)},nt);function nt(t,e){var i=it.call(this,t,e,"bodyView")||this;return i._cells=[[],[]],i._rowPoints=[],i}e.FormBodyView=ot;var rt,st=(rt=g,oe.__extends(at,rt),at.prototype._doDispose=function(){for(var t=0,e=this._headerViews;t<e.length;t++)e[t].dispose();this._headerViews=null,rt.prototype._doDispose.call(this)},at.prototype._getCssSelector=function(){return""},at.prototype._doMeasure=function(t,e,i){return jt.Size.create(e,i)},at.prototype._doLayoutContent=function(t,e,i){},at.prototype._doDraw=function(t){},at);function at(t,e){var i=rt.call(this,t,e,"groupContainer")||this;return i._headerViews=[],i}e.FormGroupContainer=st});t(Ci);Ci.FormOptions,Ci.FormMarquee,Ci.FormView,Ci.FormHeaderCellElement,Ci.FormCloseView,Ci.FormHeaderView,Ci.FormFooterView,Ci.FormBodyCellElement,Ci.FormGroupHeaderElement,Ci.FormBodyView,Ci.FormGroupContainer;var xi=e(function(t,e){Object.defineProperty(e,"__esModule",{value:!0});var a,i=(a=gi.GridViewSelectionTool,oe.__extends(o,a),o.prototype._doDispose=function(){a.prototype._doDispose.call(this)},o.prototype._getTouchRequest=function(t){var e=this.grid,i=e.selectionLayer;if(i instanceof Ke.MobileSelectionLayer){var o=i.getSelectHandle(t.target);if(o)return this._touchSelectRequest.handle=o,this._touchSelectRequest}var n=e.getCellViewOf(t.target);switch(e.getCellType(n)){case"data":return this._touchScrollRequest}},o.prototype._getTouchTracker=function(t,e,i){var o=ne.getWin(t.target);if(t.target instanceof o.HTMLInputElement)return null;var n=this._getTouchRequest(t);if(n instanceof yi.TouchScorllRequest)return this._touchScrollTracker.request=n,this.dragTracker=this._touchScrollTracker,void(this.touchManager.swipeHandler=this.onSwipeHandler.bind(this));if(n instanceof yi.TouchSelectRequest)return this._touchSelectTracker.request=n,void(this.dragTracker=this._touchSelectTracker);var r=this.mouseEventTarget;n=this._getEditRequest(r,null,e,i,!1,!1,!1)||this._getSelectRequest(r,e,i,!1,!1,!1);var s=this._getDragTracker(n,e,i);if(s)return this.dragTracker=s,this.dragTracker;a.prototype._getTouchTracker.call(this,t,e,i)},o);function o(t){var e=a.call(this,t)||this;return e._touchScrollRequest=new yi.TouchScorllRequest(e.grid),e._touchScrollTracker=new yi.TouchScrollTracker(e.grid),e._touchSelectRequest=new yi.TouchSelectRequest(e.grid),e._touchSelectTracker=new yi.TouchSelectTracker(e.grid),e}e.MobileGridTool=i});t(xi);xi.MobileGridTool;var bi=e(function(t,e){Object.defineProperty(e,"__esModule",{value:!0});var n,i=(n=ue.VisualContainer,oe.__extends(o,n),o.prototype._doDispose=function(){this._gridView=null,n.prototype._doDispose.call(this)},_dp(o,"gridView",{get:function(){return this._gridView}}),_dp(o,"formView",{get:function(){return this._formView||(this._formMarquee=new Ci.FormMarquee(this.doc),this.addElement(this._formMarquee),this._formView=new Ci.FormView(this),this._formView.$_initialzie(),this.addElement(this._formView)),this._formView}}),_dp(o,"heightMeasurer",{get:function(){return this._heightMeasurer}}),o.prototype.getTableCell=function(t){return this._gridView.getTableCell(t)},o.prototype._doResized=function(t){n.prototype._doResized.call(this,t),this._gridView.$_containerResized()},o.prototype._doPrepareContainer=function(t,e){t.className="rg-root rg-grid",ne.Utils.isMobile()&&(t.style.touchAction="manipulation"),t.attributes["aria-hidden"]=!0,this._gridView=this._createGridView(e),this.addElement(this._gridView),this._activeView=this._gridView,this._heightMeasurer=new s(this.measurer)},o.prototype._createDefaultTool=function(){return ne.Utils.isMobile()?new xi.MobileGridTool(this):new gi.GridViewSelectionTool(this)},o.prototype._doLayout=function(t){var e=this._gridView,i=this._formView,o=this._formMarquee;if(i&&i.visible){if(this._activeView!==i){if(e.$_deactivateView(),i.$_activateView(),0<=e.focusedRow){var n=e.focusedItem;!n||n instanceof dt.GridRow||(n=e.getNextRow(n)),n=n||e.getFirstRow(),i.currentRow=n?n.index:-1}this._activeView=i}}else this._activeView===i&&(i&&i.$_deactivateView(),e.$_activateView(),i&&0<=i.currentRow&&e.setFocusedItem(i.currentRow),this._activeView=e);if(o&&(o.visible=i.visible),this._activeView==e||i.options.modal){var r=t.clone();e.setRect(r),r.x=r.y=0,e.$_layout(r)}if(e._dom.style.opacity=this._activeView!=e&&i.options.modal?i.options.modalOpacity+"":"",this._activeView===i){var s=t.clone();this._formView.options.padRect(s),this._formView.setRect(s),s.x=s.y=0,i.$_layout(e.delegate,s),o.setRect(t)}},o.prototype._doAfterRender=function(){this._gridView.visible&&this._gridView.$_afterRender()},o.prototype._doPrepareRender=function(t){var e=t.clone();this._gridView.visible&&(this._gridView.setRect(e),e.x=e.y=0,this._gridView.$_prepareRender(e)),this._formView&&this._formView.visible&&(this._formView.options.padRect(e),this._formView.setRect(e),e.x=e.y=0,this._formView.$_prepareRender(e))},o.prototype._createGridView=function(t){return void 0===t&&(t=!1),new gi.GridView(this,t)},o);function o(t,e,i){void 0===i&&(i=!1);var o=n.call(this,t,i)||this;return o._gridView&&(o._gridView.$_handler=e),o}e.GridContainer=i;var r,s=(r=re.Base,oe.__extends(a,r),a.prototype._doDispose=function(){this._container=null,r.prototype._doDispose.call(this)},_dp(a,"rowHeight",{get:function(){return this._rowHeight}}),_dp(a,"headerHeight",{get:function(){return this._headerHeight}}),_dp(a,"summaryHeight",{get:function(){return this._summaryHeight}}),_dp(a,"footerHeight",{get:function(){return this._footerHeight}}),_dp(a,"groupFooterHeight",{get:function(){return this._gfooterHeight}}),a.prototype.measure=function(t){if(this._dirty){this._dirty=!1;var e=this._container,i=this._container.firstElementChild.tBodies[0].rows[0],o=i.cells[0],n=o.firstElementChild;this._rowHeight=this.$_measureBody(e,i,o,n),this._headerHeight=this.$_measureHeader(e,i,o,n),this._summaryHeight=this.$_measureSummary(e,i,o,n),this._footerHeight=this.$_measureFooter(e,i,o,n),this._gfooterHeight=this.$_measureGroupFooter(e,i,o,n)}},a.prototype.invalidate=function(){this._dirty=!0},a.prototype.$_prepareElements=function(t){var e=ne.getDoc(t),i=e.createElement("table");t.appendChild(i);var o=i.style;o.width="1000px",o.height="1px",o.left="-10000px",o.position="absolute",i.className="rg-table";var n=e.createElement("tbody");i.appendChild(n);var r=e.createElement("tr");n.appendChild(r);var s=e.createElement("td");s.className="rg-data-cell",r.appendChild(s);var a=e.createElement("div");s.appendChild(a),a[ne.Utils.TextProp]="AYwyhi우리테크"},a.prototype.$_measureBody=function(t,e,i,o){return t.className=this._bodyStyle,e.className=this._dataRowStyle,i.className=this._dataCellStyle,e.offsetHeight},a.prototype.$_measureGroupFooter=function(t,e,i,o){return t.className=this._bodyStyle,e.className=this._groupFooterStyle,i.className=this._groupFooterCellStyle,e.offsetHeight},a.prototype.$_measureGroupHeader=function(t,e,i,o){return t.className=this._bodyStyle,e.className=this._groupHeaderStyle,i.className="",e.offsetHeight},a.prototype.$_measureHeader=function(t,e,i,o){return t.className=this._headerStyle,e.className=this._headerRowStyle,i.className=this._headerCellStyle,e.offsetHeight},a.prototype.$_measureSummary=function(t,e,i,o){return t.className=this._summaryStyle,e.className=this._summaryRowStyle,i.className=this._summaryCellStyle,e.offsetHeight},a.prototype.$_measureFooter=function(t,e,i,o){return t.className=this._footerStyle,e.className=this._footerRowStyle,i.className=this._footerCellStyle,e.offsetHeight},a);function a(t){var e=r.call(this)||this;return e._bodyStyle="rg-body",e._headerStyle="rg-header",e._summaryStyle="rg-header-summary",e._footerStyle="rg-footer",e._tableStyle="rg-table",e._dataRowStyle="rg-data-row",e._headerRowStyle="",e._summaryRowStyle="",e._footerRowStyle="",e._groupHeaderStyle="rg-rowgroup-header",e._groupFooterStyle="rg-rowgroup-footer",e._dataCellStyle="rg-data-cell",e._headerCellStyle="rg-header-cell",e._summaryCellStyle="rg-header-summary-cell",e._footerCellStyle="rg-footer-cell",e._groupFooterCellStyle="rg-rowgroup-footer-cell",e._rowHeight=0,e._headerHeight=0,e._summaryHeight=0,e._footerHeight=0,e._gfooterHeight=0,e._dirty=!0,e._container=t,e.$_prepareElements(t),e}e.GridMeasurer=s});t(bi);bi.GridContainer,bi.GridMeasurer;var Ii=e(function(t,e){Object.defineProperty(e,"__esModule",{value:!0});var i,o=(i=$t.GridBaseOptions,oe.__extends(n,i),n.prototype._doDispose=function(){i.prototype._doDispose.call(this)},_dp(n,"levelIndent",{get:function(){return this._levelIndent}}),_dp(n,"lineVisible",{get:function(){return this._lineVisible},set:function(t){t!=this._lineVisible&&(this._lineVisible=t,this._changed())}}),_dp(n,"showCheckBox",{get:function(){return this._showCheckBox},set:function(t){t!=this._showCheckBox&&(this._showCheckBox=t,this._changed())}}),_dp(n,"iconImagesRoot",{get:function(){return this._iconImagesRoot},set:function(t){t!==this._iconImagesRoot&&(this._iconImagesRoot=t,this._changed())}}),_dp(n,"iconImages",{get:function(){return this._iconImages},set:function(t){t!==this._iconImages&&(this._iconImages=t?t.slice():[],this._changed())}}),_dp(n,"defaultIcon",{get:function(){return this._defaultIcon},set:function(t){t!=this._defaultIcon&&(this._defaultIcon=t,this._changed())}}),_dp(n,"expandedIcon",{get:function(){return this._expandedIcon},set:function(t){t!=this._expandedIcon&&(this._expandedIcon=t,this._changed())}}),_dp(n,"collapsedIcon",{get:function(){return this._collapsedIcon},set:function(t){t!=this._collapsedIcon&&(this._collapsedIcon=t,this._changed())}}),_dp(n,"iconCallback",{get:function(){return this._iconCallback},set:function(t){t!=this._iconCallback&&(this._iconCallback=t,this._changed())}}),_dp(n,"collapseWhenLeftKey",{get:function(){return this._collapseWhenLeftKey},set:function(t){t!=this._collapseWhenLeftKey&&(this._collapseWhenLeftKey=t,this._changed())}}),_dp(n,"collapseWhenCtrlKey",{get:function(){return this._collapseWhenCtrlKey},set:function(t){t!=this._collapseWhenCtrlKey&&(this._collapseWhenCtrlKey=t,this._changed())}}),_dp(n,"expandWhenRightKey",{get:function(){return this._expandWhenRightKey},set:function(t){t!=this._expandWhenRightKey&&(this._expandWhenRightKey=t,this._changed())}}),_dp(n,"expandWhenCtrlKey",{get:function(){return this._expandWhenCtrlKey},set:function(t){t!=this._expandWhenCtrlKey&&(this._expandWhenCtrlKey=t,this._changed())}}),_dp(n,"iconVisible",{get:function(){return this._iconVisible},set:function(t){t!=this._iconVisible&&(this._iconVisible=t,this._changed())}}),n);function n(t){var e=i.call(this,t)||this;return e._levelIndent=16,e._lineVisible=!0,e._showCheckBox=!1,e._iconImagesRoot="",e._defaultIcon=-1,e._collapseWhenLeftKey=!0,e._collapseWhenCtrlKey=!0,e._expandWhenRightKey=!0,e._expandWhenCtrlKey=!0,e._iconVisible=!0,e._expandedIcon=-1,e._collapsedIcon=-1,e}e.TreeOptions=o});t(Ii);Ii.TreeOptions;var Ei=e(function(t,p){Object.defineProperty(p,"__esModule",{value:!0});var o,e=(o=_i.CellHandle,oe.__extends(i,o),_dp(i,"expanded",{get:function(){return this._expanded},set:function(t){t!=this._expanded&&(this._expanded=t,this._changed())}}),i.prototype._createDom=function(){return null},i);function i(t,e){var i=o.call(this,t,e,"treeExpandHandle")||this;return i._expanded=!1,i.clickable=!0,i}p.TreeExpandHandle=e,p.TREE_INDENT=3;var n,a=(n=xt.DataCellRenderer,oe.__extends(r,n),r.prototype._doDispose=function(){this._expander=this._check=this._icon=this._span=null,n.prototype._doDispose.call(this)},_dp(r,"type",{get:function(){return r.TYPE}}),_dp(r,"styleName",{get:function(){return r.STYLE_NAME}}),r.prototype._doInitContent=function(t){var e=ne.getDoc(t),i=this._expander=e.createElement("span");t.appendChild(i);var o=this._check=e.createElement("input");o.type="checkbox",o.className="rg-tree-checkbox",o.style.display="inline-block",t.appendChild(o);var n=this._icon=e.createElement("img");n.className="rg-tree-icon",t.appendChild(n);var r=this._span=e.createElement("span");t.appendChild(r)},r.prototype._doRenderCell=function(t,e,i,o,n){var r=t.treeOptions,s=r.showCheckBox,a=r.levelIndent,l=this._expander,h=this._dom,d=this._check,u=this._icon,_=this._span,c=e.item;l.className=c.isLeaf?"rg-tree-leaf":c.expanded?"rg-tree-expanded":"rg-tree-collapsed",this._exclusive!=t.checkBar.exclusive&&(this._exclusive=t.checkBar.exclusive,d.setAttribute("type",this._exclusive?"radio":"checkbox"),d.className=this._exclusive?"rg-tree-radio":"rg-tree-checkebox"),s?(d.parentElement||h.insertBefore(d,this._span),d.checked=c.checked):d.parentElement&&h.removeChild(d),r.iconVisible?(u.parentElement||h.insertBefore(u,this._span),u.src=t.getTreeIcon(c)||""):u.parentElement&&h.removeChild(u),_[ne.Utils.TextProp]=this._makeText(t,e,i),h.style.setProperty("padding-left",p.TREE_INDENT+(c.level-1)*a+"px","important")},r.TYPE="tree",r.STYLE_NAME="rg-renderer "+(r.STYLE="rg-tree-renderer"),r);function r(){var t=n.call(this)||this;return t._exclusive=!1,t}p.TreeCellRenderer=a;var l,s=(l=Qt.RowElement,oe.__extends(h,l),h.prototype.isTreeExpander=function(t){var e=t.className;return"rg-tree-expanded"==e||"rg-tree-collapsed"==e},h.prototype.isCheckBox=function(t){var e=t.className;return"rg-tree-checkbox"==e||"rg-tree-radio"==e},h.prototype._doLayoutContent=function(t){l.prototype._doLayoutContent.call(this,t)},h.prototype._createRenderer=function(t,e,i,o,n){var r=t.layoutManager,s=e.dataColumn.layout;return 0===r.getHorzColumnIndex(s)?new a:l.prototype._createRenderer.call(this,t,e,i,o,n)},h);function h(t){return l.call(this,t,"treeItemView")||this}p.TreeItemElement=s;var d,u=(d=s,oe.__extends(_,d),_.prototype._getFirstCell=function(t){return this._getStartCell(t)},_.prototype._getLastCell=function(t){return this._getEndCell(t)},_.prototype._getStartCell=function(t){return 0},_.prototype._getEndCell=function(t){return t.fixedCellCount-1},_);function _(){return null!==d&&d.apply(this,arguments)||this}p.FixedTreeItemElement=u;var c,f=(c=s,oe.__extends(g,c),g.prototype._getFirstCell=function(t){return this._getStartCell(t)},g.prototype._getLastCell=function(t){return this._getEndCell(t)},g.prototype._getStartCell=function(t){return t.cellCount-t.rightCellCount},g.prototype._getEndCell=function(t){return t.cellCount-1},g);function g(){return null!==c&&c.apply(this,arguments)||this}p.RightTreeItemElement=f;var m,y=(m=te.GridBodyElement,oe.__extends(v,m),v.prototype.isTreeCell=function(t){var e=this.bodyCellAt(t);return e&&e.renderer2 instanceof a},v.prototype.createRowElement=function(){return new s(this.doc)},v);function v(t,e){return m.call(this,t,e)||this}p.TreeBodyElement=y;var w,C=(w=te.FixedBodyElement,oe.__extends(x,w),x.prototype.isTreeCell=function(t){var e=this.bodyCellAt(t);return e&&e.renderer2 instanceof a},x.prototype.createRowElement=function(){return new u(this.doc)},x);function x(){return null!==w&&w.apply(this,arguments)||this}p.FixedTreeBodyElement=C;var b,I=(b=te.RightBodyElement,oe.__extends(E,b),E.prototype.isTreeCell=function(t){var e=this.bodyCellAt(t);return e&&e.renderer2 instanceof a},E.prototype.createRowElement=function(){return new f(this.doc)},E);function E(){return null!==b&&b.apply(this,arguments)||this}p.RightTreeBodyElement=I;var S,R=(S=Ut.LayerElement,oe.__extends(D,S),D.prototype._doDispose=function(){this._linePool=null,this._lines=null,S.prototype._doDispose.call(this)},_dp(D,"levelWidth",{get:function(){return this._levelWidth},set:function(t){t!=this._levelWidth&&(this._levelWidth=t,this.invalidate())}}),_dp(D,"handleWidth",{get:function(){return this._handleWidth},set:function(t){t!=this._handleWidth&&(this._handleWidth=t,this.invalidate())}}),_dp(D,"handleHeight",{get:function(){return this._handleHeight},set:function(t){t!=this._handleHeight&&(this._handleHeight=t,this.invalidate())}}),_dp(D,"stroke",{get:function(){return this._stroke},set:function(t){t!=this._stroke&&(this._stroke=t,this.invalidate())}}),D.prototype.setRange=function(t,e,i){e==this._startIndex&&i==this._endIndex||(this._startIndex=e,this._endIndex=i,this.invalidate())},D.prototype.layout=function(t){var e=this._treeView;if(this.$_hideAll(),!(!e||this._startIndex<0||this._endIndex<0||this._startIndex>this._endIndex)){var i,o=null;for(i=this._startIndex;i<=this._endIndex&&!(o=e.getItem(i));i++);if(o){var n=o.level;if(1<n||0<o.childIndex){for(var r=0;r<n;r++){var s=o.getAncestor(r);(a=s.last)&&a.index>=i&&(a=this.$_findLevelItem(r+1,i),this.$_drawVertLine(t,this.$_borrowLine(),null,a,s.level))}0<o.childIndex&&this.$_drawVertLine(t,this.$_borrowLine(),null,o,o.parent.level)}for(;i<=this._endIndex;i++){var a,l=e.getItem(i),h=l.parent;(r=l.childIndex)<h.count-1&&((a=h.getItem(r+1)).index>this._endIndex&&(a=null),this.$_drawVertLine(t,this.$_borrowLine(),l,a,h.level)),(h=l)&&h.expanded&&0<h.count&&((a=h.getItem(0)).index>this._endIndex&&(a=null),this.$_drawChildLine(t,this.$_borrowLine(),l,a)),this.$_drawHorzLine(t,this.$_borrowLine(),l)}}}},D.prototype._getCssSelector=function(){return"rg-tree-lines"},D.prototype._initDom=function(t){S.prototype._initDom.call(this,t);var e=t.style;e.setProperty("pointer-events","none","important"),e.setProperty("overflow","hidden")},D.prototype._doDraw=function(t){},D.prototype.$_borrowLine=function(){var t=this._linePool.pop();return t||((t=this._treeView.doc.createElement("div")).className="rg-tree-line",t.style.position="absolute",this._dom.appendChild(t)),t.style.display="inline-block",this._lines.push(t),t},D.prototype.$_hideAll=function(){for(var t=this._lines.length-1;0<=t;t--)"none"!=this._lines[t].style.display&&(this._lines[t].style.display="none");this._linePool=this._linePool.concat(this._lines.splice(0,this._lines.length))},D.prototype.$_findLevelItem=function(t,e){for(var i=e;i<=this._endIndex;i++){var o=this._treeView.getItem(i);if(o&&o.level==t)return o}return null},D.prototype.$_setBounds=function(t,e,i,o,n){var r=t.style;r.left=p.TREE_INDENT+e+"px",r.top=i+"px",r.width=1==o?"1px":o+"px",r.height=1==n?"1px":n+"px"},D.prototype.$_drawVertLine=function(t,e,i,o,n){var r=t.topIndex,s=n*this._levelWidth+this._levelWidth/2,a=0,l=this.height;if(i){var h=t.getItemBounds(i.index-r),d=i instanceof Ve.TreeItem&&i.hasChildren?this._handleHeight:0;a=h.y+h.height/2+d/2}o&&(h=t.getItemBounds(o.index-r),d=o instanceof Ve.TreeItem&&o.hasChildren?this._handleHeight:0,l=h.y+h.height/2-d/2),this.$_setBounds(e,s,a,1,l-a)},D.prototype.$_drawHorzLine=function(t,e,i){var o,n=t.topIndex,r=i.parent.level*this._levelWidth+this._levelWidth/2,s=i.level*this._levelWidth;i.hasChildren&&(r+=this._handleWidth/2);var a=t.getItemBounds(i.index-n);o=a.y+a.height/2,this.$_setBounds(e,r,o,s-r,1)},D.prototype.$_drawChildLine=function(t,e,i,o){var n,r=t.topIndex,s=i.level*this._levelWidth+this._levelWidth/2,a=this.height,l=t.getItemBounds(i.index-r);if(n=l.y+l.height/2+5,o){l=t.getItemBounds(o.index-r);var h=o.hasChildren?this._handleHeight:0;a=l.y+l.height/2-h/2}this.$_setBounds(e,s,n,1,a-n)},D);function D(t){var e=S.call(this,t.doc)||this;return e._levelWidth=16,e._handleWidth=9,e._handleHeight=9,e._stroke="gray",e._linePool=[],e._lines=[],e._startIndex=-1,e._endIndex=-1,e._treeView=t,e}p.TreeLinesElement=R});t(Ei);Ei.TreeExpandHandle,Ei.TREE_INDENT,Ei.TreeCellRenderer,Ei.TreeItemElement,Ei.FixedTreeItemElement,Ei.RightTreeItemElement,Ei.TreeBodyElement,Ei.FixedTreeBodyElement,Ei.RightTreeBodyElement,Ei.TreeLinesElement;var Si=e(function(t,e){Object.defineProperty(e,"__esModule",{value:!0});var l,i=(l=Pe.GridSelectionTool,oe.__extends(o,l),o.prototype._doDispose=function(){l.prototype._doDispose.call(this)},o.prototype._doKeyDown=function(t){var e,i=this.focused.clone(),o=this.grid.treeOptions,n=t.which,r=t.ctrlKey||t.metaKey;if(i&&(e=i.item))switch(n){case 39:if(!r&&1==this.grid.visibleLayoutCount&&i.isRight&&o.expandWhenRightKey||r&&o.expandWhenCtrlKey){if(!e.expanded)return e.setExpanded(!0,!1,!1),!0;if(0<e.count)return i.down(),this.setFocused(i,!0),!0}break;case 37:if(!r&&i.isLeft&&o.collapseWhenLeftKey||r&&o.collapseWhenCtrlKey){if(e.expanded)return e.setExpanded(!1,!1,!1),!0;if(!(e.parent instanceof Ve.RootTreeItem))return i.itemIndex=e.parent.index,this.setFocused(i,!0),!0}}return l.prototype._doKeyDown.call(this,t)},o.prototype._doMouseDown=function(t){var e=t.mouseX,i=t.mouseY,o=(t.ctrlKey||t.metaKey,t.shiftKey,t.altKey),n=this.grid,r=this.findElementAt(e,i,!1),s=this.mouseEventTarget;if(r instanceof Ei.TreeItemElement&&r.isTreeExpander(s)&&!o){var a=r._item;a instanceof Ve.TreeItem&&(a.expanded?n.collapse(a,!1):n.expand(a,!1,!1))}else l.prototype._doMouseDown.call(this,t)},o.prototype._doClick=function(t,e,i){e=e||t.mouseX,i=i||t.mouseY;var o=t.shiftKey,n=this.grid,r=(this.focused,this.findElementAt(e,i,!1)),s=this.mouseEventTarget;if(r instanceof Ei.TreeItemElement&&r.isCheckBox(s)){var a=n.getItem(r.itemIndex);this._doCheck(s,a,o)}l.prototype._doClick.call(this,t,e,i)},o.prototype._canMoveRowAt=function(t,e,i){var o=t.boundsByContainer(t.getCellRectAt(this.grid.layoutManager,e,!1)),n=Ei.TREE_INDENT+(e.item.level-1)*this.grid.treeOptions.levelIndent;if(i<o.x+(t.isTreeCell(e)?n:20)){var r=this.grid.getSelectedItems();if(1<r.length)for(var s=r[0].level,a=1;a<r.length;a++)if(r[a].level<s)return!1;return!0}},o);function o(t){return l.call(this,t,"treeViewSelectionTool")||this}e.TreeViewSelectionTool=i;var n,r=(n=bi.GridContainer,oe.__extends(s,n),s.prototype._doDispose=function(){n.prototype._doDispose.call(this)},_dp(s,"treeView",{get:function(){return this.gridView}}),s.prototype._createGridView=function(){return new f(this)},s.prototype._createDefaultTool=function(){return new i(this)},s);function s(t,e,i){return n.call(this,t,e)||this}e.TreeContainer=r;var a,h=(a=mt.GridCell,oe.__extends(d,a),_dp(d,"getText",{get:function(){return null}}),_dp(d,"value",{get:function(){return null}}),d);function d(){return a.call(this,"treeItemExpanderCell")||this}var u,_=(u=mt.GridCell,oe.__extends(c,u),_dp(c,"getText",{get:function(){var t=String(this.value());if(!t){var e=this.index;e.dataColumn&&(t=e.column.footer.text)}return t}}),_dp(c,"value",{get:function(){return null}}),c);function c(){return u.call(this,"treeItemFooterCell")||this}var p,f=(p=oi.GridBase,oe.__extends(g,p),g.prototype._doDispose=function(){p.prototype._doDispose.call(this)},g.prototype.isTree=function(){return!0},_dp(g,"treeOptions",{get:function(){return this._treeOptions}}),_dp(g,"linesView",{get:function(){return this._linesView}}),g.prototype.getLevels=function(t){return this._rs.getLevels(t)},g.prototype.getExpanderCell=function(t){return this._expanderCell.setIndex(kt.CellIndex.temp(this,t)),this._expanderCell},g.prototype.getFooterCell=function(t){return this._footerCell.setIndex(t),this._footerCell},g.prototype.expand=function(t,e,i,o){this.isItemEditing(null)||this._rs.expand(t,e,i,o)},g.prototype.collapse=function(t,e){this.isItemEditing(null)||this._rs.collapse(t,e)},g.prototype.expandAll=function(t){void 0===t&&(t=0),this.isItemEditing(null)||this._rs.expandAll(t)},g.prototype.collapseAll=function(){this.isItemEditing(null)||this._rs.collapseAll()},g.prototype.getTreeIcon=function(t){var e=this.treeOptions,i=e.iconImages;if(i){var o=void 0;o=t.hasChildren&&t.expanded&&-1<e.expandedIcon?e.expandedIcon:t.hasChildren&&t.collapsed&&-1<e.collapsedIcon?e.collapsedIcon:t.iconIndex;var n=e.iconCallback;if(n){var r=n(this.handler,t.index,t.dataRow,o);isNaN(r)||(o=r)}if((o<0||o>=i.length)&&(o=e.defaultIcon),0<=o&&o<i.length)return e.iconImagesRoot+i[o]}},g.prototype.getCheckedItems=function(){for(var t=[],e=0,i=this.itemCount;e<i;e++){var o=this.getItem(e);o.checked&&t.push(o)}return t},g.prototype.getCheckedItemIndices=function(){for(var t=[],e=0,i=this.itemCount;e<i;e++){var o=this.getItem(e);o.checked&&t.push(o.index)}return t},g.prototype.getCheckedRows=function(t){var e=null;if(t){e=[];for(var i=0,o=this.itemCount;i<o;i++){var n=this.getItem(i);n.checked&&e.push(n.row)}}else e=this._rs.getCheckedRows();return e},g.prototype.getCheckedRowIds=function(t){var e=null;if(t){e=[];for(var i=0,o=this.itemCount;i<o;i++){var n=this.getItem(i);n.checked&&e.push(n.dataRow)}}else e=this._rs.getCheckedRowIds();return e},g.prototype.checkChildren=function(t,e,i,o,n,r){if(void 0===n&&(n=!0),void 0===r&&(r=!1),t)for(var s=0,a=t.count;s<a;s++){var l=t.getItem(s);n&&!l.checkable||l.setChecked(e,r),!i||!l.expanded&&o||this.checkChildren(l,e,!0,o,n,r)}},g.prototype.resetCheckables=function(){this._rs.resetCheckables()},g.prototype.applyCheckables=function(){this._rs.applyCheckables()},g.prototype.getItemOfModel=function(t){return 0<=t.itemIndex?this.getItem(t.itemIndex):0<=t.dataRow?this.getItemOfRow(t.dataRow,!1):null},_dp(g,"dataSource",{get:function(){return this._rs&&this._rs.dataSource},set:function(t){this._rs&&(this._rs.dataSource=t)}}),_dp(g,"maxItemCount",{get:function(){return this._rs?this._rs.maxItemCount:0},set:function(t){this._rs&&(this._rs.maxItemCount=t)}}),_dp(g,"summarizer",{get:function(){throw new Error("Method not implemented.")}}),g.prototype._initStyles=function(){p.prototype._initStyles.call(this),this._treeOptions=new Ii.TreeOptions(this)},g.prototype._createItemSource=function(){return new ei.TreeGridItemProvider(!0)},g.prototype._doContentPanesCreated=function(){this._linesView=new Ei.TreeLinesElement(this),this.addElement(this._linesView)},g.prototype._createSidePane=function(){return p.prototype._createSidePane.call(this)},g.prototype._createLayoutManager=function(){return new y(this)},g.prototype._createBodyView=function(t){return new Ei.TreeBodyElement(this.doc,t)},g.prototype._createFixedBodyView=function(t){return new Ei.FixedTreeBodyElement(this.doc,t)},g.prototype._createRightBodyView=function(t){return new Ei.RightTreeBodyElement(this.doc,t)},g.prototype._visualObjectChanged=function(t){p.prototype._visualObjectChanged.call(this,t),Bt.CheckBar},g.prototype.append=function(){return this.insert(this._rs.rootItem,!1,!0)},g.prototype._doCanInsert=function(t,e,i){return t&&(0<t.count||!i||0==t.level||this.editOptions.appendable)},g.prototype.getSummarizer=function(){return this._rs.summarizer},g.prototype._doMaxRowCountChanged=function(){this._rs.maxItemCount=this.maxItemCount},g.prototype.getSortFields=function(){return this._rs.getSortFields()},g.prototype.getSortDirections=function(){return this._rs.getSortDirections()},g.prototype.getSortCases=function(){return this._rs.getSortCases()},g.prototype._doSortItems=function(t,e,i){this._rs.setLabelComparer(this._doPrepareComparer(t)),this._rs.orderBy(t,e,i)},g.prototype._doColumnFiltersChanged=function(t,e){this._rs.includeParentItem=this.filteringOptions.includeParentItem,this.applyFilters(t,e)},g.prototype.setOptions=function(t){if(t){var e=this._rs;void 0!==t.hideDeleted&&(e.hideDeleted=t.hideDeleted),void 0!==t.hideDeletedRows&&(e.hideDeleted=t.hideDeletedRows),void 0!==t.summaryMode&&(e.summaryMode=t.summaryMode),void 0!==t.sortMode&&(e.sortMode=t.sortMdoe),p.prototype.setOptions.call(this,t)}},g.prototype._doPrepareRender=function(t){var e=this._horzScrolled;p.prototype._doPrepareRender.call(this,t),e&&this.layoutManager.$_layoutLines()},g.prototype.$_doLayout=function(t,e){this._treeOptions,p.prototype.$_doLayout.call(this,t,e)},g.prototype.assignImageList=function(t){},g.prototype.refreshView=function(){p.prototype.refreshView.call(this)},g.prototype.getEditBounds=function(t,e){return p.prototype.getEditBounds.call(this,t,e)},g.prototype.updatePastedRow=function(t,e,i){if(t instanceof Ve.TreeItem){var o=t.row;o&&o.update(e,i)}},g.prototype.appendPastedRow=function(t){var e=this.dataSource;if(e){var i=e.createRow(t,-1,!1);e.rootRow.addChild(i,!1)}},_dp(g,"undoable",{get:function(){return this._rs.undoable},set:function(t){this._rs.undoable=t}}),_dp(g,"canUndo",{get:function(){return this._rs.canUndo}}),_dp(g,"canRedo",{get:function(){return this._rs.canRedo}}),_dp(g,"undoing",{get:function(){return this._rs.undoing}}),_dp(g,"redoing",{get:function(){return this._rs.redoing}}),g.prototype.undo=function(){return!!this._rs.canUndo&&(this._rs.cancelWhenLastUndo=this.editOptions.cancelWhenLastUndo,this.editController.cancelEditor(!0),this._rs.undo(),!0)},g.prototype.redo=function(){return!!this._rs.canRedo&&(this._rs.redo(),!0)},g.prototype.execute=function(t){this._rs.execute(t)},g.prototype.clearCommandStack=function(t){void 0===t&&(t=!0),this._rs.clearCommandStack(t)},g.prototype.getFirstRow=function(){return null},g.prototype.getLastRow=function(){return null},g.prototype.getPrevRow=function(t){return null},g.prototype.getNextRow=function(t){return null},g.prototype._doMoveRows=function(t,e){var i=e&&e.dataId;if(0<=i){for(var o=[],n=0,r=t;n<r.length;n++){var s=r[n],a=s&&s.dataId;0<=a&&o.push(a)}if(0<o.length){var l=this.dataSource,h=l.rowsByIds(o,!1);0<h.length&&l.moveRows(h,l.rowById(i))}}return!1},g.prototype.$_getVisibleAncestor=function(t){var e=this._rs.getItemOfRow(t);if(e){for(;e&&!e.visible;)e=e.parent;return e}return null},g.prototype.onItemProviderReset=function(t){this._currentRowId=-1,p.prototype.onItemProviderReset.call(this,t)},g.prototype.onTreeItemProviderItemChanged=function(t,e){this.invalidateLayout(),this.fireEvent(g.CHANGED,e)},g.prototype.onTreeItemProviderExpanding=function(t,e){return this._focusedRow=this.focusedIndex?this.focusedIndex.dataRow:-1,this.editController.editing&&!t.isEditing()&&this.editController.cancelEditor(!0),!this.editController.editing&&!t.isEditing()&&this.fireConfirmEvent(g.EXPANDING,e)},g.prototype.onTreeItemProviderExpanded=function(t,e){if(e&&0<=e.index){var i=this.focusedIndex.clone();i.itemIndex=e?e.index:-1,this.setFocusedIndex(i,!0)}this.fireEvent(g.EXPANDED,e)},g.prototype.onTreeItemProviderCollapsing=function(t,e){return this._focusedRow=this.focusedIndex?this.focusedIndex.dataRow:-1,this.editController.editing&&!t.isEditing()&&this.editController.cancelEditor(!0),!this.editController.editing&&!t.isEditing()&&this.fireConfirmEvent(g.COLLAPSING,e)},g.prototype.onTreeItemProviderCollapsed=function(t,e){if(e&&0<=e.index){var i=this.focusedIndex.clone();i.itemIndex=e?e.index:-1,this.setFocusedIndex(i,!0)}this.fireEvent(g.COLLAPSED,e)},g.EXPANDING="onTreeViewExpanding",g.EXPANDED="onTreeViewExpanded",g.COLLAPSING="onTreeViewCollapsing",g.COLLAPSED="onTreeViewCollapsed",g.CHANGED="onTreeViewChanged",g);function g(t,e){void 0===e&&(e=!1);var i=p.call(this,t,e)||this;return i._expanderCell=new h,i._footerCell=new _,i._focusedRow=-1,i.itemSource=i._rs=i._createItemSource(),i}e.TreeView=f;var m,y=(m=ee.GridLayoutManager,oe.__extends(v,m),v.prototype.layout=function(t){m.prototype.layout.call(this,t),this.$_layoutLines()},v.prototype.$_layoutLines=function(){var t=this.grid,e=t.linesView;if(e.visible=t.treeOptions.lineVisible){var i=0<this.fixedLayoutCount,o=(i?this.fixedBodyBounds:this.bodyBounds).clone();i?(o.y+=this.fixedContentBounds.y,o.x+=this.fixedContentBounds.x):(o.y+=this.contentBounds.y,o.x+=this.contentBounds.x),0<this.layoutCount?o.width=Math.max(0,this.getLayoutWidth(0)):o.width=0,e.setRect(o),e.levelWidth=16,e.setRange(t,this.topIndex,Math.min(t.itemCount,this.topIndex+this.itemCount)-1),e.layout(this)}},v);function v(t){return m.call(this,t)||this}e.TreeGridLayoutManager=y});t(Si);Si.TreeViewSelectionTool,Si.TreeContainer,Si.TreeView,Si.TreeGridLayoutManager;var Ri=e(function(t,e){Object.defineProperty(e,"__esModule",{value:!0});var h,i=(h=ri.ExporterBase,oe.__extends(U,h),U.prototype.dispose=function(){},U.prototype._progressCallback=function(t){var e=this._progressGrid,i=this._multiOptions;e&&e.setExportProgress(this._progressMax,t+i.prepareProgress,i.progressMessage)},U.prototype.export=function(t,i){if(h.prototype.export.call(this,t,i),i){var o=this._multiOptions=i instanceof ni.GridMultiExportOptions?i:new ni.GridMultiExportOptions(t,i),e=this._multiOptions.exportGrids;if(this._gridIndex=0,e&&!(e.length<=0)){var n=new di.ExcelWorkbook;if(this._mergeHeads=[],this._multiOptions.showProgress)this._allCount=this._prepareCount(o,e),this._progressMax=this._allCount+this._multiOptions.prepareProgress,this._progressPos=0,this._progressStep=Math.max(this._allCount/10|0,1),this._progressGrid&&this._progressGrid.beginExportProgress(this._multiOptions.progressMessage),this.setProgress=this._progressCallback,this._exportGridAsync(n,o,0,function t(){this._progressGrid&&this._progressGrid.endExportProgress();var e=++this._gridIndex;e<o.exportGrids.length?(this._progressGrid=o.exportGrids[e].grid,this._exportGridAsync(n,o,e,t.bind(this))):(this.save(),i.done&&i.done())}.bind(this));else{for(var r=o,s=0,a=e.length;s<a;s++){var l=e[s].grid;r.grid=l instanceof oi.GridBase?l:l._view,r.sheetName=e[s].sheetName,this._exportGrid(n,r,i.done)}this.save()}}}},U.prototype.buildBook=function(t){var e=this.options,i=e.grid;if(i instanceof gi.GridView){if(e.allItems&&this._rowGrouped){this.allItems=i.itemSource.getAllItems();var o=i.layoutManager.fixedItemCount;if(0<o)for(var n=0;n<o;n++)this.allItems.splice(n,0,i.getItem(n))}else if(e.pagingAllItems&&i.paged){var r=i.itemSource;r instanceof ui.GridItemProvider&&(this.allItems=r.getPagingAllItems())}else e.onlyCheckedItems&&!i.rowGrouped&&(this.allItems=i.getCheckedItems(!1));this.buildSheet(i,t)}else i instanceof Si.TreeView&&(e.allItems&&(this.allItems=i.getAllItems()),this.buildTreeSheet(i,t))},U.prototype.buildSheet=function(t,e){var i=this._workbook,o=this.allItems,n=o?o.length:t.itemCount;i.createSheet(this._sheetName);var r=t.displayOptions;if(this._defaultHeight=r.rowHeight||r.minRowHeight,this._rowGrouped=t.rowGrouped,this._mergedGrouped=t.mergedRowGrouped,this._rowGrouped&&(this._rowLevels=t.rowGroupLevels),this._startItem=this._indexItem=0,!this._rowGrouped){this._startItem=0<this.options.start?this.options.start:0;var s=0<this.options.count?this.options.count:n;n=!(0<s)||this._startItem+s>n?n-this._startItem:s}this._lastItem=this._startItem+n,this._prepareCommonStyles(),this._prepareFormats(i),this._buildColumns(t),this._currentRow=0,this._buildDocumentTitle(i),this.header&&this.buildHeader(t),this.headerSummary&&this.buildHeaderSummary(t),this.buildItems(t,function(){this.footer&&this.buildFooter(t),this._buildDocumentTail(i),e&&e()}.bind(this))},U.prototype.buildHeader=function(t){var e=this._workbook,i=e.currentSheet,o=this._colArr,n=o.colCount,r=o.headerRowCount,s=t.headerView.height;s&&(s/=r);var a,l=this._indents,h=this._currentRow,d=0,u=this._headCellStyle,_=[];for(a=0;a<r;a++)_.push(i.borrowRow(h+a,s));if(this.indicator){if((f=_[0]).addText(d,this.indicatorHead,u),1<r){for(a=1;a<r;a++)_[a].addBlank(d,u);i.addMerge(h,d,r,1)}d++}if(0<l){for(var c=0;c<l;c++){for(a=0;a<r;a++)_[a].addBlank(c+d,this._indentHeadStyle);i.addMerge(h,c+d,r,1)}d+=l}for(a=0;a<r;a++){var p=h+a,f=_[a];for(c=0;c<n;c++){var g=o.getHeader(a,c),m=(g.layout,g.column),y=c+d;if(0<g.colIndex||0<g.rowIndex)f.addBlank(y,u);else{var v=g.layout,w=v.header,C=v instanceof Tt.CellLayoutColumnItem?m.header.displayText:w.text,x=!!C&&!!C.match(U.LINE_REGEX);u=x?this._wrapHeadCellStyle:this._headCellStyle,v.header.styleName&&(u=this._parseStyles(e,this._inheritStyles([this._headCssStyle,this._getSelectorStyle("."+v.header.styleName)]),x)),f.addText(y,C,u),i.addMerge(p,y,g.rowSpan,g.colSpan)}}}this._startItem+=r,this._currentRow+=r},U.prototype.buildHeaderSummary=function(t){function e(t,e,i,o,n){var r=h.getCell(i.layout),s=r.value;if(s instanceof Date)!this.options.datetimeCallback||(s=this.options.datetimeCallback(-1,i.name,s))instanceof Date?t.addDate(e,s,n):t.addText(e,s,n);else if(isNaN(s)){var a=h.getCellFormatters(i.headerSummary,null),l=r.getDisplayText(a);t.addText(e,l||"",n)}else t.addNumber(e,s,n)}var i,o,n,h,r=this._workbook.currentSheet,s=this._colArr,a=s.colCount,l=s.dataRowCount,d=this._indents,u=this._footCellStyle,_=t.headerSummaries;if(_.visible){var c,p=_.visibleCount,f=p*l,g=t.headerSummaryView.height/f,m=this._currentRow,y=0;if(this.indicator){if((c=r.borrowRow(m,g)).addText(y,this.indicatorFoot,u),1<l||1<p){for(i=1;i<f;i++)(c=r.borrowRow(m+i,g)).addBlank(y,u);r.addMerge(m,y,f,1)}y++}if(0<d){for(o=0;o<d;o++){for(i=0;i<f;i++)(c=r.borrowRow(m+i,g)).addBlank(o+y,this._indentFootStyle);r.addMerge(m,o+y,f,1)}y+=d}var v=m;for(n=0;n<p;n++)for(h=_.get(n),i=0;i<l;i++){for(c=r.borrowRow(v,g),o=0;o<a;o++){var w=s.getItem(i,o),C=w.column,x=o+y;0<w.colIndex||0<w.rowIndex?c.addBlank(x,u):(C.index,e(c,x,C,0,u),r.addMerge(v,x,w.rowSpan,w.colSpan))}v++}this._rowGrouped&&this.options.showLevelOutline&&r.setRowLevel(v,1),this._startItem+=f,this._currentRow+=f}},U.prototype.buildFooter=function(t){function e(t,e,i,o,n){var r=l.getCell(i.layout),s=r.value;if(s instanceof Date)!this.options.datetimeCallback||(s=this.options.datetimeCallback(-1,i.name,s))instanceof Date?t.addDate(e,s,n):t.addText(e,s,n);else if(isNaN(s)){var a=r.getDisplayText(null);t.addText(e,a||"",n)}else t.addNumber(e,s,n)}var i,o,n,l,r=this._workbook.currentSheet,s=this._colArr,a=s.colCount,h=s.dataRowCount,d=this._indents,u=this._footCellStyle,_=t.footers;if(_.visible){var c,p=_.visibleCount,f=p*h,g=t.footerView.height/f,m=this._currentRow,y=0;if(this.indicator){if((c=r.borrowRow(m,g)).addText(y,this.indicatorFoot,u),1<h||1<p){for(i=1;i<f;i++)(c=r.borrowRow(m+i,g)).addBlank(y,u);r.addMerge(m,y,f,1)}y++}if(0<d){for(o=0;o<d;o++){for(i=0;i<f;i++)(c=r.borrowRow(m+i,g)).addBlank(o+y,this._indentFootStyle);r.addMerge(m,o+y,f,1)}y+=d}var v=m;for(n=0;n<p;n++)for(l=_.get(0),i=0;i<h;i++){for(c=r.borrowRow(v,g),o=0;o<a;o++){var w=s.getItem(i,o),C=w.column,x=o+y;0<w.colIndex||0<w.rowIndex?c.addBlank(x,u):(C.index,e(c,x,C,0,u),r.addMerge(v,x,w.rowSpan,w.colSpan))}v++}this._rowGrouped&&this.options.showLevelOutline&&r.setRowLevel(v,1),this._startItem+=f,this._currentRow+=f}},U.prototype.buildItems=function(t,e){for(var i=this.options.showIndicatorRow(t),o=this.allItems,n=this._progressStep?this._indexItem+Math.min(this._progressStep,this._lastItem-this._indexItem):this._lastItem,r=(this._currentRow,this._indexItem);r<n;r++){var s=o?o[r]:t.getItem(r);if(s._index=r,this._indicatorNo=s instanceof dt.GridRow&&i?s.dataRow:r+1,s instanceof dt.GridRow)this.buildRow(t,s);else if(s instanceof St.MergedGroupHeader)this.buildMergedGroupHeader(t,s);else if(s instanceof St.MergedGroupFooter)this.buildMergedGroupFooter(t,s);else if(s instanceof dt.GroupItemImpl)this.buildGroupHeader(t,s);else{if(!(s instanceof dt.GroupFooter))throw"Unkown item type";this.buildGroupFooter(t,s)}this._progressPos+=1}this.setProgress&&this.setProgress(this._progressPos),this._indexItem=n,this._indexItem>=this._lastItem?e&&e():setTimeout(function(){this.buildItems(t,e)}.bind(this),0)},U.prototype.buildRow=function(t,e){for(var i,o,n=t.rowGroup,r=this._colArr,s=r.dataRowCount,a=r.colCount,l=t.layoutManager,h=this._columnMerged,d=this._mergeHeads,u=this._indents,_=this._currentRow,c=0,p=this._workbook.currentSheet,f=t.displayOptions.minRowHeight,g=n.expandedAdornments===lt.RowGroupAdornments.SUMMARY&&n.mergeMode,m=[],y=0;y<s;y++)m.push(p.borrowRow(_+y,f));for(this.indicator&&(this._buildIndicatorCell(t,p,m,this._indicatorNo,_,c,s),c++),y=0;y<s;y++){var v=m[y],w=_+y,C=c;for(i=0;i<u;i++)v.addBlank(C,this._indentBarStyle),C++;for(i=0;i<a;i++){var x=i+C,b=r.getItem(y,i),I=b.column,E=I.index,S=this._columnStyles[I.index];if(0<b.colIndex||0<b.rowIndex)v.addBlank(x,S);else{var R=b.rowSpan,D=b.colSpan,T=!1;if(h){var k=kt.DummyCellIndex.tempItem(t,e,I),M=l.getMergeRoom(k);if(M)M.isHead(k)&&0==y||0<this._startItem&&e.index==this._startItem&&!g?(this._buildValueCell(t,p,v,e,I,x),d[I.index]=w):(v.addBlank(x,S),(M.isTail(k)||0<this._lastItem&&e.index==this._lastItem-1)&&(R=w-d[I.index]+s,p.addMerge(d[I.index],x,R,1),delete d[I.index])),T=!0;else if(this.allItems&&!e.visible&&t.isGroupedColumn(I)&&this._mergedGrouped){for(v.addBlank(x,S),T=!0,o=e.parent;I.groupLevel!=o.level&&o;)o=o.parent;switch(this.tempExpandedAdornment()){case lt.RowGroupAdornments.NONE:e==o.firstItem&&e==o.lastDataItem?T=!1:e==o.firstItem?(this._buildValueCell(t,p,v,e,I,x),d[I.index]=w):e==o.lastDataItem&&(R=w-d[E]+s,p.addMerge(d[E],x,R,1));break;case lt.RowGroupAdornments.BOTH:e!=o.lastDataItem||o.footer.visible||(R=w-d[E]+s,p.addMerge(d[E],x,R,1));break;case lt.RowGroupAdornments.HEADER:case lt.RowGroupAdornments.SUMMARY:e==o.firstItem&&e==o.lastDataItem?d[E]?(R=w-d[E]+s,p.addMerge(d[E],x,R,1),delete d[E]):T=!1:e==o.lastDataItem?(R=w-d[E]+s,p.addMerge(d[E],x,R,1),delete d[E]):o.firstDataItem;break;case lt.RowGroupAdornments.FOOTER:e==o.firstItem&&(this._buildValueCell(t,p,v,e,I,x),d[E]=w),e==o.lastDataItem&&(o.getLastItem(!0)instanceof dt.GroupFooter||(R=w-d[E]+s,p.addMerge(d[E],x,R,1),delete d[E]))}}}T||(this._buildValueCell(t,p,v,e,I,x),(1<R||1<D)&&p.addMerge(w,x,R,D))}}this._rowGrouped&&this.options.showLevelOutline&&p.setRowLevel(w,e.level)}this._currentRow+=s},U.prototype.buildGroupHeader=function(t,e){var i=this._workbook.currentSheet,o=this._colArr,n=e.level-1,r=this._indentBarStyle,s=o.colCount,a=this._currentRow,l=0,h=this._defaultHeight,d=this.options,u=i.borrowRow(a,h);if(this.indicator&&(this._buildIndicatorCell(t,i,u,this._indicatorNo,a,l,1),l++),d.indenting)for(var _=0;_<n;_++)u.addBlank(l,r),l++;var c=t.rowGroup.getHeaderText(e);u.addText(l,c,this._groupHeaderStyle),0<this._indents&&(s+=this._indents-(e.level-1));for(var p=1;p<s;p++)u.addBlank(p+l,this._groupHeaderStyle);i.addMerge(a,l,1,s),this._rowGrouped&&d.showLevelOutline&&i.setRowLevel(a,e.level),this._currentRow++},U.prototype.buildGroupFooter=function(l,h){function t(t,e,i,o){var n=Xe.RowGroupFooterCell.getValue(h,i);if(n instanceof Date)!this.options.datetimeCallback||(n=this.options.datetimeCallback(h.index,i.name,n))instanceof Date?t.addDate(e,n,o):t.addText(e,n,o);else if("string"==typeof n)t.addText(e,n,o);else if(isNaN(n)){var r=n,s=void 0;if(h){var a=kt.DummyCellIndex.tempItem(l,h,i);r=void 0===n||"number"==typeof n?l.getDisplayText(a)||"":n}else(s=i.groupFooter.text)&&(r=s);t.addText(e,r,o)}else t.addNumber(e,n,o)}for(var e,i,o,n,r,s=this._workbook.currentSheet,a=this.options,d=(l.rowGroup,l.fixedOptions.rowCount,this._colArr),u=d.getItem(0,0).column,_=(kt.DummyCellIndex.tempItem(l,h,u),d.dataRowCount),c=d.colCount,p=this._groupFootCellStyle,f=this._indentBarStyle,g=this._indents,m=h.level,y=this._currentRow,v=0,w=l.rowGroup.expandedAdornments==lt.RowGroupAdornments.SUMMARY,C=this._defaultHeight/_,x=[],b=0;b<_;b++)x.push(s.borrowRow(y+b,C));for(this.indicator&&(this._buildIndicatorCell(l,s,x,this._indicatorNo,y,v,_),v++),b=0;b<_;b++){var I=y+b,E=v,S=x[b];if(0<g)for(n=u,e=0;e<g;e++)!w||e<m-2?S.addBlank(E,f):S.addBlank(E,p),0==b&&1<_&&s.addMerge(I,E,_,1),E++;for(var R=0;R<c;R++)i=R+E,n=(o=d.getItem(b,R)).column,r=this._groupFootCellStyle,0<o.colIndex||0<o.rowIndex?S.addBlank(i,r):t(S,i,n,r),this._rowGrouped&&a.showLevelOutline&&s.setRowLevel(I,h.level)}this._currentRow+=_},U.prototype.buildMergedGroupHeader=function(t,e){var i=this._workbook.currentSheet,o=this._colArr,n=e.level,r=this._defaultHeight,s=o.colCount,a=this._currentRow,l=0,h=i.borrowRow(a,r);this.indicator&&(this._buildIndicatorCell(t,i,h,this._indicatorNo,a,l,1),l++);for(var d=0;d<n-1;d++){var u=o.getItem(0,l+d).column;h.addBlank(l+d,this._columnStyles[u.index])}var _=n-1,c=o.getItem(0,_).column;this._buildValueCell(t,i,h,e.firstItem,c,l+_),this._mergeHeads[c.index]=a;var p=t.rowGroup.getHeaderText(e);d=l+n;var f=this._groupHeaderStyle;for(n<o.colCount&&h.addText(d++,p,f);d<s+l;d++)h.addBlank(d,f);1<s-n&&i.addMerge(a,n+l,1,s-n),this._currentRow++},U.prototype.buildMergedGroupFooter=function(a,l){function t(t,e,i,o){var n=Xe.RowGroupFooterCell.getValue(l,i);if(n instanceof Date)!this.options.datetimeCallback||(n=this.options.datetimeCallback(l.index,i.name,n))instanceof Date?t.addDate(e,n,o):t.addText(e,n,o);else if(isNaN(n)){var r=kt.DummyCellIndex.tempItem(a,l,i),s=a.getDisplayText(r)||"";t.addText(e,s,o)}else t.addNumber(e,n,o)}for(var e,i,o,n,r=this._workbook.currentSheet,s=this.options,h=(a.rowGroup,a.fixedOptions.rowCount,this._colArr),d=h.getItem(0,0).column,u=(kt.CellIndex.temp(a,l.index,d),h.dataRowCount),_=h.colCount,c=(this._groupFootCellStyle,this._indentBarStyle,this._indents,l.level),p=this._currentRow,f=(a.rowGroup.expandedAdornments,lt.RowGroupAdornments.SUMMARY,this._defaultHeight/u),g=[],m=0;m<u;m++)g.push(r.borrowRow(p+m,f));for(this.indicator&&this._buildIndicatorCell(a,r,g[0],this._indicatorNo,p,0,u),e=0;e<c;e++)if(o=h.getItem(0,e).column,this.allItems||l.parent.expanded)for(m=0;m<u;m++)g[m].addBlank(0+e,void 0);else for(m=0;m<u;m++)this._buildValueCell(a,r,g[m],l.parent.firstItem,o,0+e);for(m=0;m<u;m++){var y=p+m;for(e=c;e<_;e++)i=e+0,o=(n=h.getItem(m,e)).column,0<n.colIndex||0<n.rowIndex?g[m].addBlank(i,void 0):(t(g[m],i,o,void 0),(1<n.rowSpan||1<n.colSpan)&&r.addMerge(y,i,n.rowSpan,n.colSpan)),this._rowGrouped&&s.showLevelOutline&&r.setRowLevel(y,c)}this._currentRow+=u},U.prototype.buildTreeSheet=function(t,e){var i=this._workbook,o=this.allItems,n=o?o.length:t.itemCount;i.createSheet(this._sheetName);var r=t.displayOptions;if(this._defaultHeight=r.rowHeight||r.minRowHeight,this._rowLevels=t.getLevels(!1),this._startItem=this._indexItem=0,!this._rowGrouped){this._startItem=0<this.options.start?this.options.start:0;var s=0<this.options.count?this.options.count:n;n=!(0<s)||this._startItem+s>n?n-this._startItem:s}this._lastItem=this._startItem+n,this._prepareCommonStyles(),this._prepareFormats(i),this._buildColumns(t),this._currentRow=0,this._buildDocumentTitle(i),this.header&&this.buildHeader(t),this.headerSummary&&this.buildHeaderSummary(t),this.buildTreeItems(t,function(){this.footer&&this.buildFooter(t),this._buildDocumentTail(i),this.done()}.bind(this))},U.prototype.buildTreeItems=function(t,e){for(var i=this.options.showIndicatorRow(t),o=this.allItems,n=this._progressStep?this._indexItem+Math.min(this._progressStep,this._lastItem-this._indexItem):this._lastItem,r=(this._currentRow,this._indexItem);r<n;r++){var s=o?o[r]:t.getItem(r);if(s._index=r,this._indicatorNo=s instanceof dt.GridRow&&i?s.dataRow:r+1,!(s instanceof Ve.TreeItem))throw"Unkown tree item type";this.buildTreeRow(t,s),this._progressPos+=1}this.setProgress&&this.setProgress(this._progressPos),this._indexItem=n,this._indexItem>=this._lastItem?e():setTimeout(function(){this.buildItems(t,e)}.bind(this),0)},U.prototype.buildTreeRow=function(t,e){for(var i,o=this._workbook.currentSheet,n=this._colArr,r=n.dataRowCount,s=n.colCount,a=(this._columnStyles,this._indents),l=e.level,h=(t.layoutManager,this._currentRow),d=0,u=t.displayOptions.minRowHeight,_=[],c=0;c<r;c++)_.push(o.borrowRow(h+c,u));this.indicator&&(this._buildIndicatorCell(t,o,_,this._indicatorNo,h,d,r),d++);for(var p=this._bodyCellStyle,f=0;f<r;f++){var g=_[f],m=h+f,y=0<a?d+l-1:d,v=n.getItem(f,0),w=v.column,C=this._columnStyles[w.index],x=0<a?a-l+1:0;for(i=0;i<l-1;i++)g.addBlank(i+d,p);for(0<v.colIndex||0<v.rowIndex?g.addBlank(y,C):(this._buildValueCell(t,o,g,e,w,y),o.addMerge(m,y,v.rowSpan,v.colSpan+x)),i=0;i<x;i++)g.addBlank(1+i+y,C);for(y=0<a?d+a:d,i=1;i<s;i++){var b=i+y;w=(v=n.getItem(f,i)).column,C=this._columnStyles[w.index],0<v.colIndex||0<v.rowIndex?g.addBlank(b,C):(this._buildValueCell(t,o,g,e,w,b),o.addMerge(m,b,v.rowSpan,v.colSpan))}o.setRowLevel(h,e.level)}this._currentRow+=r},U.prototype.prepare=function(){},U.prototype.finallize=function(){},U.prototype.save=function(){var o=this.grid.doc,n=ne.getDocWin(o),r=this.options;function e(t){if(n.navigator.msSaveOrOpenBlob)n.navigator.msSaveOrOpenBlob(t,s);else if(n.navigator.msSaveBlob)n.navigator.msSaveBlob(t,s);else{var e=o.createElement("a");o.body.appendChild(e);var i=URL.createObjectURL(t);e.href=i,e.download=s,e.click(),o.body.removeChild(e)}}function i(t){var e='<form name="tempForm" action="'+r.url+'" method="post">';e+='<input type="hidden" name="fileName" value = "'+s+'"/>',e+='<input type="hidden" name="data" value = "'+t+'"/>',e+='<input id="submitBtn" type="submit"/>',e+="</form>";var i=o.createElement("div");i.innerHTML=e,o.body.appendChild(i),o.getElementById("submitBtn").click(),o.body.removeChild(i)}var s=r.fileName,t="local"==r.target;if(JSZip.support.blob||!t){var a=new JSZip,l=this._workbook.createParts();for(var h in l){var d=l[h];0<=d.indexOf('xmlns=""')&&(d=d.replace(/ xmlns=""/g,"").replace(/xmlns=""/g,"")),a.file(h,d)}if(t)a.generateAsync?a.generateAsync({type:"blob",compression:"DEFLATE"}).then(function(t){e(t)}):e(a.generate({type:"blob",compression:"DEFLATE"}));else if(r.target===ni.ExportTarget.STREAM)if(a.generateAsync)a.generateAsync({type:"base64",compression:"DEFLATE"}).then(function(t){r.done&&"function"==typeof r.done&&r.done(t)});else{var u=a.generate({type:"base64",compression:"DEFLATE"});r.done&&"function"==typeof r.done&&r.done(u)}else a.generateAsync?a.generateAsync({type:"base64",compression:"DEFLATE"}).then(function(t){i(t)}):i(a.generate({type:"base64",compression:"DEFLATE"}))}else alert("not supported on this browser")},U.prototype._prepareCount=function(t,e){for(var i=0,o=0,n=e.length;o<n;o++){var r=void 0,s=e[o].grid;if((this._progressGrid=s)instanceof gi.GridView&&t.allItems&&this._rowGrouped){r=s.itemSource.getAllItems();var a=s.layoutManager.fixedItemCount;if(0<a)for(var l=0;l<a;l++)r.splice(l,0,s.getItem(l))}i+=r?r.length:s.itemCount}return i},U.prototype._prepareDocumentStyles=function(){var t,e,i,o=this.grid.doc.styleSheets;this._documentStyles={};for(var n=o.length;n--;){t=o[n];try{t.rules?e=t.rules:t.cssRules&&(e=t.cssRules)}catch(t){continue}if(e)for(var r=e.length;r--;){var s=(i=e[r]).selectorText;if(s)if(-1<s.indexOf(","))for(var a=s.split(","),l=a.length;l--;){var h=a[l].trim();h&&(this._documentStyles[h]=i.style)}else this._documentStyles[i.selectorText]=i.style}}},U.prototype._extendCssStyle=function(t,e){for(var i=0,o=t.length;i<o;i++){var n=t[i];e[n]?e[n]=t[n]:(e[e.length]=n,e.length++),e[n]=t[n]}},U.prototype._inheritStyles=function(t){for(var e={length:0},i=0,o=t.length;i<o;i++)t[i]&&this._extendCssStyle(t[i],e);return e},U.prototype._prepareCommonStyles=function(){this._prepareDocumentStyles();for(var t=this._getSelectorStyle("table"),e=this._getSelectorStyle("tr"),i=this._getSelectorStyle("td"),o=this._inheritStyles([t,e,i]),n=this._getSelectorStyle(".rg-root"),r=this._getSelectorStyle(".rg-header"),s=this._getSelectorStyle(".rg-footer"),a=this._getSelectorStyle(".rg-fixed-footer"),l=this._getSelectorStyle(".rg-body"),h=this._getSelectorStyle(".rg-fixed-body"),d=this._inheritStyles([this._getSelectorStyle(".rg-root table"),this._getSelectorStyle(".rg-root .rg-table"),this._getSelectorStyle(".rg-root table tr"),this._getSelectorStyle(".rg-root .rg-table tr"),this._getSelectorStyle(".rg-root table tr td"),this._getSelectorStyle(".rg-root .rg-table tr td")]),u=this._inheritStyles([d,this._getSelectorStyle(".rg-header table"),this._getSelectorStyle(".rg-header .rg-table"),this._getSelectorStyle(".rg-header table tr"),this._getSelectorStyle(".rg-header .rg-table tr"),this._getSelectorStyle(".rg-header table tr td"),this._getSelectorStyle(".rg-header .rg-table tr td")]),_=this._inheritStyles([d,this._getSelectorStyle(".rg-footer table"),this._getSelectorStyle(".rg-footer .rg-table"),this._getSelectorStyle(".rg-footer table tr"),this._getSelectorStyle(".rg-footer .rg-table tr"),this._getSelectorStyle(".rg-footer table tr td"),this._getSelectorStyle(".rg-footer .rg-table tr td")]),c=this._inheritStyles([d,this._getSelectorStyle(".rg-fixed-footer .rg-table"),this._getSelectorStyle(".rg-fixed-footer .rg-table tr"),this._getSelectorStyle(".rg-fixed-footer table tr"),this._getSelectorStyle(".rg-fixed-footer .rg-table tr td"),this._getSelectorStyle(".rg-fixed-footer table tr td")]),p=this._inheritStyles([d,this._getSelectorStyle(".rg-body table"),this._getSelectorStyle(".rg-body .rg-table"),this._getSelectorStyle(".rg-body table tr"),this._getSelectorStyle(".rg-body .rg-table tr"),this._getSelectorStyle(".rg-body table tr td"),this._getSelectorStyle(".rg-body .rg-table tr td")]),f=this._inheritStyles([d,this._getSelectorStyle(".rg-fixed-body .rg-table"),this._getSelectorStyle(".rg-fixed-body .rg-table tr"),this._getSelectorStyle(".rg-fixed-body table tr"),this._getSelectorStyle(".rg-fixed-body .rg-table tr td"),this._getSelectorStyle(".rg-fixed-body table tr td")]),g=this._inheritStyles([d,this._getSelectorStyle(".rg-rowgroup-bar .rg-table"),this._getSelectorStyle(".rg-rowgroup-bar .rg-table tr"),this._getSelectorStyle(".rg-rowgroup-bar table tr"),this._getSelectorStyle(".rg-rowgroup-bar .rg-table tr td"),this._getSelectorStyle(".rg-rowgroup-bar table tr td")]),m=this._inheritStyles([d,this._getSelectorStyle(".rg-rowgroup-head .rg-table"),this._getSelectorStyle(".rg-rowgroup-head .rg-table tr"),this._getSelectorStyle(".rg-rowgroup-head table tr"),this._getSelectorStyle(".rg-rowgroup-head .rg-table tr td"),this._getSelectorStyle(".rg-rowgroup-head table tr td")]),y=this._inheritStyles([d,this._getSelectorStyle(".rg-rowgroup-foot .rg-table"),this._getSelectorStyle(".rg-rowgroup-foot .rg-table tr"),this._getSelectorStyle(".rg-rowgroup-foot table tr"),this._getSelectorStyle(".rg-rowgroup-foot .rg-table tr td"),this._getSelectorStyle(".rg-rowgroup-foot table tr td")]),v=this._getSelectorStyle(".rg-header-cell"),w=this._getSelectorStyle(".rg-footer-cell"),C=this._getSelectorStyle(".rg-body-cell"),x=this._getSelectorStyle(".rg-rowgroup-header"),b=this._getSelectorStyle(".rg-rowgroup-footer"),I=this._getSelectorStyle(".rg-rowgroup-footer-cell"),E=this._inheritStyles([n,this._getSelectorStyle(".rg-rowgroup-head"),o,m]),S=this._inheritStyles([n,this._getSelectorStyle(".rg-rowgroup-foot"),o,y]),R=this._inheritStyles([n,this._getSelectorStyle(".rg-rowgroup-bar"),o,this._getSelectorStyle(".rg-rowgroup-bar-cell"),g]),D=this._getSelectorStyle(".rg-data-row"),T={},k=0,M=this.grid.itemCount;k<M;k++){var L=this.grid.getItem(k),F=this.grid.body.getRowStyle(L,!1);"rg-data-row"==F||T[F]||(T[F]=this._getSelectorStyle(F))}var V=this._inheritStyles([this._getSelectorStyle(".rg-rowbarcontainer"),o,this._getSelectorStyle(".rg-rowbarcontainer-cell"),d,this._getSelectorStyle(".rg-rowbarcontainer .rg-table tr"),this._getSelectorStyle(".rg-rowbarcontainer table tr"),this._getSelectorStyle(".rg-rowbarcontainer .rg-table tr td"),this._getSelectorStyle(".rg-rowbarcontainer table tr td")]);this._indicatorCellStyle=this._parseStyles(this._workbook,V);var O=this._headCssStyle=this._inheritStyles([n,r,o,v,u]);this._headCellStyle=this._parseStyles(this._workbook,O),this._wrapHeadCellStyle=this._parseStyles(this._workbook,O,!0),O=this._inheritStyles([n,s,o,w,_]),this._footCellStyle=this._parseStyles(this._workbook,O),O=this._inheritStyles([n,a,o,w,c]),this._fixedFootCellStyle=this._parseStyles(this._workbook,O),O=this._cellCssStyle=this._inheritStyles([n,l,t,D,C,p]),this._bodyCellStyle=this._parseStyles(this._workbook,O),this._wrapBodyCellStyle=this._parseStyles(this._workbook,O,!0),O=this._inheritStyles([n,l,t,D,C,this._getSelectorStyle(".rg-merged-cell"),p]),this._bodyMergedCellStyle=this._parseStyles(this._workbook,O),O=this._inheritStyles([n,h,t,D,C,f]),this._fixedCellStyle=this._parseStyles(this._workbook,O),this._wrapFixedCellStyle=this._parseStyles(this._workbook,O,!0),this._groupHeaderStyle=this._parseStyles(this._workbook,this._inheritStyles([n,x])),this._groupFootCellStyle=this._parseStyles(this._workbook,this._inheritStyles([n,t,b,I,p])),this._indentHeadStyle=this._parseStyles(this._workbook,E),this._indentFootStyle=this._parseStyles(this._workbook,S),this._indentBarStyle=this._parseStyles(this._workbook,R),this._dynamicStyles={}},U.prototype._getSelectorStyle=function(t){var e=this._documentStyles;for(var i in e)if(i===t)return e[i];return null},U.prototype._exportGridAsync=function(t,e,i,o){void 0===o&&(o=null);var n=e;if(i<n.exportGrids.length){var r=n.exportGrids[i];n.grid=r.grid instanceof oi.GridBase?r.grid:r.grid._view,n.sheetName=r.sheetName,setTimeout(function(){this._exportGrid(t,e,function(){o()}.bind(this))}.bind(this))}},U.prototype._exportGrid=function(t,e,i){void 0===i&&(i=null);var o=e.grid;this.options=e,this._colArr=new si.ColumnArray(o,e.linear,e.allColumns,e.showColumns,e.hideColumns),this.indicator=e.indicatorVisible(o)?o.rowIndicator:null,this.header=e.headerVisible(o)?o.header:null,this.headerSummary=e.headerSummaryVisible(o)?o.headerSummary:null,this.footer=e.footerVisible(o)?o.footer:null,this.indicatorHead=this.indicator&&this.indicator.headText||"No",this.indicatorFoot=this.indicator&&this.indicator.footText||"",this.indicatorSummary=this.indicator&&this.indicator.sumText||"",this._sheetName=e.sheetName,this._workbook=t,this.buildBook(function(){i&&i()})},U.prototype._createStyles=function(t,e,i){return this._workbook.addStyleWithFormat(e,i)},U.prototype._parseStyles=function(t,e,i){return void 0===i&&(i=!1),t.addStyle(e,!0,!0,!0,i)},U.prototype._extendStyles=function(t,e,i,o,n){return void 0===o&&(o=!1),t.extendStyle(e,i,o,n)},U.prototype._prepareFormats=function(t){var e=this.options,i=t,o=e.numberFormat;"number"==typeof o&&0<Math.floor(o)?this._numberFormatId=Math.floor(o):o&&(this._numberFormatId=i.addNumberFormat(si.ExcelFormatConverter.convertNumberFormat(o))),"number"==typeof(o=e.datetimeFormat)&&0<Math.floor(o)?this._dateFormatId=Math.floor(o):o&&(this._dateFormatId=i.addNumberFormat(o))},U.prototype._prepareStyles=function(t){},U.prototype._buildColumns=function(t){var e,i,o,n,r,s,a,l=this.options,h=this._workbook,d=h.currentSheet,u=this._colArr;if(this.indicator&&(a=Math.round(t.rowIndicator.minWidth/U.PIXELS_PER_CHAR),d.addColumn(a,null)),l.indenting&&(t instanceof gi.GridView&&this._rowGrouped&&!this._mergedGrouped?this._indents=this._rowLevels-(t.rowGroup.expandedAdornments===lt.RowGroupAdornments.SUMMARY?0:1):t instanceof Si.TreeView&&(this._indents=this._rowLevels-1),0<this._indents))for(e=0;e<this._indents;e++)a=Math.max(this._indentWidth,1),d.addColumn(a,null);var _=t.layoutManager.fixedItemCount,c=t.layoutManager.fixedCellCount,p=t.formatOptions;this._columnStyles={},this._columnWrapStyles={},this._columnFixedStyles={},this._columnWrapFixedStyles={},this._columnFixed=[];var f=u.colCount,g=u.dataRowCount,m=!1;for(e=0;e<g;e++)for(i=0;i<f;i++)if(s=(r=u.getItem(e,i).column).index,!this._columnStyles[s]){a=Math.round(r.width/U.PIXELS_PER_CHAR),o=i<c?this._fixedCellStyle:this._bodyCellStyle,n=i<c?this._wrapFixedCellStyle:this._wrapBodyCellStyle;var y=t.dataSource;if(r instanceof Dt.DataColumn){var v=y.getField(r.dataIndex),w=o._formatId,C=r.excelFormat,x=v?v.dataType:lt.ValueType.TEXT;if(x==lt.ValueType.NUMBER?"string"==typeof(C=r.excelFormat||r.numberFormat||p.numberFormat)&&(C=si.ExcelFormatConverter.convertNumberFormat(C)):x==lt.ValueType.DATETIME?"string"==typeof(C=r.excelFormat||r.datetimeFormat||p.datetimeFormat)&&(C=si.ExcelFormatConverter.convertDateFormat(C)):x==lt.ValueType.TEXT&&(C=r.excelFormat),"number"==typeof C||0<parseInt(C))w=parseInt(C);else if(C){var b=r.prefix;b&&(C='"'+b+'"'+C);var I=r.suffix;I&&(C=C+'"'+I+'"'),w=h.addNumberFormat(C)}else switch(x){case lt.ValueType.TEXT:w=this._textFormatId;break;case lt.ValueType.NUMBER:w=this._numberFormatId;break;case lt.ValueType.DATETIME:w=this._dateFormatId}this._columnStyles[s]=this._createStyles(h,o,w),this._columnWrapStyles[s]=this._createStyles(h,n,w),(0<_||i<c)&&(this._columnFixedStyles[s]=this._createStyles(h,this._fixedCellStyle,w),this._columnWrapFixedStyles[s]=this._createStyles(h,this._wrapFixedCellStyle,w),this._columnFixed[s]=!0)}d.addColumn(a,null),t instanceof gi.GridView&&(l.separateRows||l.onlyCheckedItems&&!t.rowGrouped||r instanceof Dt.DataColumn&&(r.mergeRule||t.rowGroup.mergeMode&&t.isGroupedColumn(r))&&(m=!0))}this._columnMerged=m},U.prototype._buildTitleCommon=function(t,e,i){if(e&&e.visible){var o=this._currentRow,n=void 0,r=t.currentSheet,s=void 0;for(s=0;s<e.spaceTop;s++)for(n=r.addRow(o+s,void 0);s<i;s++)n.addBlank(0+s,void 0);o+=e.spaceTop;var a=e.message,l=a&&null!=a.match(U.LINE_REGEX),h=this._parseStyles(t,e.cssStyle,l);for(n=r.addRow(o,e.height),s=0;s<i;s++)0==s?(n.addText(0,a,h),r.addMerge(o,0,1,i)):n.addBlank(0+s,h);for(o++,s=0;s<e.spaceBottom;s++)for(n=r.addRow(o+s,void 0);s<i;s++)n.addBlank(0+s,void 0);o+=e.spaceBottom,this._currentRow=o}},U.prototype._buildDocumentTitle=function(t){var e=this.options,i=t,o=this._colArr.colCount;this.indicator&&o++,this._buildTitleCommon(i,e.documentTitle,o),this._buildTitleCommon(i,e.documentSubtitle,o)},U.prototype._buildDocumentTail=function(t){var e=this.options,i=t,o=(t.currentSheet,this._colArr.colCount);this.indicator&&o++,this._buildTitleCommon(i,e.documentTail,o)},U.prototype._buildIndicatorCell=function(t,e,i,o,n,r,s){var a=this._indicatorCellStyle;if((Array.isArray(i)?i[0]:i).addNumber(r,o,a),1<s){for(var l=1;l<s;l++)i[l].addBlank(r,a);e.addMerge(n,r,s,1)}},U.prototype._buildValueCell=function(t,e,i,o,n,r){var s,a,l=this._workbook,h=(t.layoutManager,this._columnFixed[n.index]),d=0<=o.index&&o.index<t.fixedOptions.rowCount,u=t.body,_=this.options,c=kt.DummyCellIndex.tempItem(t,o,n),p=h||d,f=!1,g=n.dataIndex,m=t.dataSource.getField(g);if(m&&m.dataType==lt.ValueType.TEXT){if(a=o.getData(g),n.displayCallback&&n.displayCallback(),_.lookupDisplay&&(-1<n.labelFieldIndex||n.lookupDisplay))s=mt.DataCell.getText(o,n);else if(a)if(_.checkNumber)a=Number(a),s=isNaN(a)?"":a;else{var y,v=void 0;s=(y=n.displayRegExp)&&(v=n.displayReplace)?a.replace(y,v):a}else s="";s&&"number"!=typeof s&&s.match(U.LINE_REGEX)&&(f=!0)}var w,C=u.getRowStyle(o,h||d),x=u.getCell(c,!1),b=n.styleName,I=n.getCellStyle(x),E=null;if(p&&(w=f?this._columnWrapFixedStyles[n.index]:this._columnFixedStyles[n.index]),w=(w=w||(f?this._columnWrapStyles[n.index]:this._columnStyles[n.index]))||this._bodyCellStyle,C||b||I){var S=[],R=void 0,D=void 0,T=[];if("object"==typeof I){var k=I;R=I.style;var M=t.dataSource.getField(n.dataIndex),L=void 0;if(M.dataType==lt.ValueType.NUMBER?D=(L=k.numberFormat)?si.ExcelFormatConverter.convertNumberFormat(L):void 0:M.dataType==lt.ValueType.DATETIME&&(D=(L=k.datetimeFormat)?si.ExcelFormatConverter.convertDateFormat(L):void 0),D){var F=k.prefix;F&&(D='"'+F+'"'+D);var V=k.suffix;V&&(D=D+'"'+V+'"')}}else R=I;var O=n.index+"="+C+"="+b+"="+I+"="+f;if(this._dynamicStyles[O])w=this._dynamicStyles[O];else{C&&Array.prototype.push.apply(S,C.trim().split(" ")),b&&Array.prototype.push.apply(S,b.trim().split(" ")),R&&Array.prototype.push.apply(S,R.trim().split(" "));for(var N=0,P=S.length;N<P;N++)T.push(this._getSelectorStyle("."+S[N]));var B=void 0;D&&(B=l.addNumberFormat(D)),E=this._inheritStyles(T),w=this._extendStyles(l,w,E,!1,B),this._dynamicStyles[O]=w}}if(n.blankWhenExport)i.addBlank(r,w);else if(n instanceof Dt.DataColumn){var A,$,H=n.dataIndex,G=t.dataSource.getField(H);if(G)switch(A=o.getData(H),$=n.displayCallback&&n.displayCallback(),G.dataType){case"number":(_.numberCallback||$)&&(A=_.numberCallback?_.numberCallback(o.index,n.name,A):$(t.handler,c.proxy(),A)),null!=A?"number"==typeof A?i.addNumber(r,A,w,void 0):i.addText(r,A,w):i.addBlank(r,w);break;case"datetime":case"date":A?!_.datetimeCallback&&!$||(A=_.datetimeCallback?_.datetimeCallback(o.index,n.name,A):$(t.handler,c.proxy(),A))instanceof Date?i.addDate(r,A,w):i.addText(r,A,w):_.nullDateText?i.addText(r,_.nullDateText,w):i.addBlank(r,w);break;case"boolean":_.booleanCallback||$?(A=_.booleanCallback?_.booleanCallback(o.index,n.name,A):$(t.handler,c.proxy(),A),i.addText(r,A,w)):_.booleanFormatter?(A=_.booleanFormatter.formatValue(A),i.addText(r,A,w)):i.addBool(r,A,w);break;default:"number"==typeof s?i.addNumber(r,s,w):s?i.addText(r,s,w):i.addBlank(r,w)}else i.addBlank(r,w)}},U.prototype._findPrevCellStyle=function(t,e,i){var o=t._dataRows[e],n=o?o.childNodes():null;if(!n)return null;for(var r=di.ExcelUtil.toRange(i,e),s=0,a=n.length;s<a;s++)if(n[s]._attributes&&n[s]._attributes.r==r){var l=n[s]._attributes.s;return l?{id:l}:null}return null},U.prototype.tempExpandedAdornment=function(){return lt.RowGroupAdornments.BOTH},U.prototype.tempCollapsedAdornment=function(){return lt.RowGroupAdornments.HEADER},U.CSS_HEAD="rg-header",U.CSS_FOOT="rg-footer",U.CSS_BODY="rg-body",U.CSS_FIXED="rg-fixed-body",U.CSS_TABLE="rg-table",U.CSS_ROWGROUP_BAR="rg-rowgroup-bar",U.CSS_ROWGROUP_HEAD="rg-rowgroup-head",U.CSS_ROWGROUP_FOOT="rg-rowgroup-foot",U.CSS_HEAD_CELL="rg-header-cell",U.CSS_INDICATOR="rg-rowindicator-cell",U.CSS_DATA_ROW="rg-data-row",U.CSS_BODY_CELL="rg-body-cell",U.LINE_REGEX=/\r|\n|\r\n/,U.PIXELS_PER_CHAR=7,U);function U(){var t=h.call(this)||this;return t._numberFormatId=0,t._textFormatId=49,t._dateFormatId=14,t._rowGrouped=!1,t._mergedGrouped=!1,t._rowLevels=0,t._indents=0,t._indentWidth=3,t._columnMerged=!1,t._styleCount=0,t._columnFixed=[],t}e.GridExcelExporter=i});t(Ri);Ri.GridExcelExporter;var Di=e(function(t,i){Object.defineProperty(i,"__esModule",{value:!0});var n=dt,a=Dt,l=(r.getColumn=function(t,e){if(e){if("string"==typeof e)return t.columnByName(e);if(e instanceof Dt.GridColumn)return e;if(e.$_hash)return t.columnByHash(e.$_hash);if(e.name)return t.columnByName(e.name)}return null},r.getItemProxy=function(t,e){void 0===e&&(e=!1);var i=t.parent,o={type:void 0,id:t.id,parentId:null==i?-1:i.id,itemIndex:t.index,dataRow:-1,checked:t.checked};return e&&(o.childIndex=t.childIndex,o.level=t.level),t instanceof n.GridRow?(o.type="row",o.dataRow=t.dataRow):t instanceof dt.GroupItem?(o.count=t.children.length,o.expanded=t.expanded,t instanceof n.GroupItemImpl||t instanceof St.MergedGroupHeader?(o.type="group",o.footerId=t.footer?t.footer.id:-1,e&&(o.firstItem=r.getItemProxy(t.firstItem),o.firstDataItem=r.getItemProxy(t.firstDataItem),o.dataRows=t.getRows())):t instanceof Ve.TreeItem&&(o.type="tree",o.dataRow=t.dataRow?t.dataRow:-1)):t instanceof n.GroupFooter&&(o.type="footer"),o},r.getItemIndices=function(t){for(var e=[],i=0,o=t.length;i<o;i++)e.push(t[i].id);return e},r.getValues=function(t,e){var i={},o=e.dataSource;if(t.isItemEditing(e))return(i=e.getRowObject()).__rowId=e.dataRow,i;if(0<=e.dataRow){if(e instanceof Ve.TreeItem){var n=e.row,r=n.values;i.__rowId=n.rowId;for(var s=0,a=o.fieldCount;s<a;s++)i[o.getOrgFieldName(s)]=r[s]}else(i=o.getRowObject(e.dataRow)).__rowId=e.dataRow;return i}return null},r.getDisplayValues=function(t,e){var i=t.getDataColumns();if(e){for(var o=e.getRowObject(),n=new Dt.ColumnStyle,r=0,s=i.length;r<s;r++){var a=0<=e.index?kt.CellIndex.temp(t,e.index,i[r]):kt.DummyCellIndex.tempItem(t,e,i[r]),l=t.body.getCell(a,!1);l._index=a,n.clear(),n.assign(i[r]),t.body.getCellStyle(l,n);var h=n.toFormatter(null);o[i[r].fieldName]=mt.DataCell._getDisplayText(t,e,i[r],o[i[r].fieldName],h)}return o}},r.setValues=function(t,e,i,o){var n,r,s=e.dataSource,a=s.fieldCount,l=!1;if(t.isItemEditing(e))if(e)e.values=i;else for(var h=0;h<a;h++){var d=s.getOrgFieldName(h);i.hasOwnProperty(d)&&e.setData(h,i[d])}else if(0<=(r=e.dataRow))if(s instanceof et.LocalTreeDataProvider){var u=s.rowById(r);if(u){if(l=!1,n=u.values||[],Array.isArray(i)){h=0;for(var _=i.length;h<_&&!(l=!s.getField(h).equalValues(n[h],i[h]));h++);}else for(h=0;h<a&&(d=s.getOrgFieldName(h),!i.hasOwnProperty(d)||!(l=!s.getField(h).equalValues(n[h],i[d])));h++);if(!l)return;u.update(i,o)}}else if(s instanceof j.LocalDataProvider){if(l=!1,n=s.getRow(r),Array.isArray(i))for(h=0,_=i.length;h<_&&!(l=!s.getField(h).equalValues(n[h],i[h]));h++);else for(h=0;h<a&&(d=s.getOrgFieldName(h),!i.hasOwnProperty(d)||!(l=!s.getField(h).equalValues(n[h],i[d])));h++);if(!l)return;s.updateRow(r,i,o)}},r);function r(){}var e=(o.prototype.dispose=function(){this._view.dispose(),this._view=null,this._container&&this._container.dispose(),this._container=null},_dp(o,"summaryMode",{get:function(){return this._view.itemSource.summaryMode},set:function(t){this._view.itemSource.summaryMode=t}}),_dp(o,"hideDeletedRows",{get:function(){return this._view.itemSource.hideDeleted},set:function(t){this._view.itemSource.hideDeleted=t}}),_dp(o,"sortMode",{get:function(){return this._view.itemSource.sortMode},set:function(t){this._view.itemSource.sortMode=t}}),_dp(o,"undoable",{get:function(){return this._view.undoable},set:function(t){this._view.undoable=t}}),_dp(o,"undoing",{get:function(){return this._view.undoing}}),_dp(o,"redoing",{get:function(){return this._view.redoing}}),_dp(o,"disabled",{get:function(){return this._view.container.disabled},set:function(t){this._view.container.disabled=t}}),_dp(o,"fixedOptions",{get:function(){return this._view.fixedOptions}}),_dp(o,"displayOptions",{get:function(){return this._view.displayOptions}}),_dp(o,"formatOptions",{get:function(){return this._view.formatOptions}}),_dp(o,"editOptions",{get:function(){return this._view.editOptions}}),_dp(o,"editorOptions",{get:function(){return this._view.editorOptions}}),_dp(o,"copyOptions",{get:function(){return this._view.copyOptions}}),_dp(o,"pasteOptions",{get:function(){return this._view.pasteOptions}}),_dp(o,"sortingOptions",{get:function(){return this._view.sortingOptions}}),_dp(o,"filteringOptions",{get:function(){return this._view.filteringOptions}}),_dp(o,"mobileOptions",{get:function(){return this._view.mobileOptions}}),_dp(o,"dataDropOptions",{get:function(){return this._view.dataDropOptions}}),_dp(o,"formOptions",{get:function(){return this.formView.options}}),_dp(o,"rowIndicator",{get:function(){return this._view.rowIndicator}}),_dp(o,"stateBar",{get:function(){return this._view.stateBar}}),_dp(o,"checkBar",{get:function(){return this._view.checkBar}}),_dp(o,"header",{get:function(){return this._view.header}}),_dp(o,"footer",{get:function(){return this._view.footer}}),_dp(o,"footers",{get:function(){return this._view.footers}}),_dp(o,"headerSummary",{get:function(){return this._view.headerSummary}}),_dp(o,"headerSummaries",{get:function(){return this._view.headerSummaries}}),_dp(o,"formView",{get:function(){return this._view.container.formView}}),o.prototype.ping=function(t){this._view instanceof oi.GridBase&&alert(t)},o.prototype.refresh=function(){this._view.refreshView()},o.prototype.beginUpdate=function(){this._view.beginUpdate()},o.prototype.endUpdate=function(t){this._view.endUpdate(t)},o.prototype.isVisible=function(){return this._view.visible},o.prototype.setVisible=function(t){this._view.visible=t},o.prototype.getItemCount=function(){return this._view.itemCount},o.prototype.getDataRow=function(t){var e=this._view.getItem(t);return e?e.dataRow:-1},o.prototype.getRowsOfItems=function(t){var e=[];if(t)for(var i=0,o=t.length;i<o;i++){var n=this._view.getItem(t[i]);n&&e.push(n.dataRow)}return e},o.prototype.getItemIndex=function(t){return this._view.getItemIndexOfRow(t)},o.prototype.getItemsOfRows=function(t){return this._view.getItemIndicesOfRows(t)},o.prototype.removeColumn=function(t){return this._view.removeColumn(t)},o.prototype.restoreColumns=function(){this._view.restoreColumns()},o.prototype.getDataSource=function(){return this._dataDelegator},o.prototype.setDataSource=function(t){this._dataDelegator=t,this._dataProvider=t?t.getProvider():null,this._view.dataSource=this._dataProvider},o.prototype.getOptions=function(){return{summaryMode:this._view.itemSource.summaryMode.toString(),fixed:this.fixedOptions,display:this.displayOptions,format:this.formatOptions,edit:this.editOptions,editor:this.editorOptions,copy:this.copyOptions,paste:this.pasteOptions,sorting:this.sortingOptions,filtering:this.filteringOptions,dataDrop:this.dataDropOptions,rowIndicator:this.rowIndicator,checkBar:this.checkBar,stateBar:this.stateBar,header:this.header,footer:this.footer,footers:this.footers,headerSummary:this.headerSummary,headerSummaries:this.headerSummaries}},o.prototype.setOptions=function(t){t&&(this._view.setOptions(t),t.fixed&&this.setFixedOptions(t.fixed),t.display&&this.setDisplayOptions(t.display),t.format&&this.setFormatOptions(t.format),t.edit&&this.setEditOptions(t.edit),t.editor&&this.setEditorOptions(t.editor),t.copy&&this.setCopyOptions(t.copy),t.paste&&this.setPasteOptions(t.paste),t.sorting&&this.setSortingOptions(t.sorting),t.filtering&&this.setFilteringOptions(t.filtering),t.dataDrop&&this.setDataDropOptions(t.dataDrop),t.rowIndicator&&this.setRowIndicator(t.rowIndicator),t.checkBar&&this.setCheckBar(t.checkBar),t.stateBar&&this.setStateBar(t.stateBar),t.header&&this.setHeader(t.header),t.footer&&this.setFooter(t.footer),t.footers&&this.setFooters(t.footers),t.headerSummary&&this.setHeaderSummary(t.headerSummary),t.headerSummaries&&this.setHeaderSummaries(t.headerSummaries))},o.prototype.getFixedOptions=function(){return this._view.fixedOptions.toProxy()},o.prototype.setFixedOptions=function(t){this._view.fixedOptions.assignFrom(t)},o.prototype.getDisplayOptions=function(){return this._view.displayOptions.toProxy()},o.prototype.setDisplayOptions=function(t){this._view.displayOptions.assignFrom(t)},o.prototype.getFormatOptions=function(){return this._view.formatOptions.toProxy()},o.prototype.setFormatOptions=function(t){this._view.formatOptions.assignFrom(t)},o.prototype.getEditOptions=function(){return this._view.editOptions.toProxy()},o.prototype.setEditOptions=function(t){this._view.editOptions.assignFrom(t)},o.prototype.getEditorOptions=function(){return this._view.editorOptions.toProxy()},o.prototype.setEditorOptions=function(t){this._view.editorOptions.assignFrom(t)},o.prototype.getCopyOptions=function(){return this._view.copyOptions.toProxy()},o.prototype.setCopyOptions=function(t){this._view.copyOptions.assignFrom(t)},o.prototype.getPasteOptions=function(){return this._view.pasteOptions.toProxy()},o.prototype.setPasteOptions=function(t){this._view.pasteOptions.assignFrom(t)},o.prototype.getSortingOptions=function(){return this._view.sortingOptions.toProxy()},o.prototype.setSortingOptions=function(t){this._view.sortingOptions.assignFrom(t)},o.prototype.getFilteringOptions=function(){return this._view.filteringOptions.toProxy()},o.prototype.setFilteringOptions=function(t){this._view.filteringOptions.assignFrom(t)},o.prototype.getMobileOptions=function(){return this._view.mobileOptions.toProxy()},o.prototype.setMobileOptions=function(t){this._view.mobileOptions.assignFrom(t)},o.prototype.getDataDropOptions=function(){return this._view.dataDropOptions.toProxy()},o.prototype.setDataDropOptions=function(t){this._view.dataDropOptions.assignFrom(t)},o.prototype.getFormOptions=function(){return this.formView.options.toProxy()},o.prototype.getRowIndicator=function(){return this._view.rowIndicator.toProxy()},o.prototype.setRowIndicator=function(t){this._view.rowIndicator.assignFrom(t)},o.prototype.getStateBar=function(){return this._view.stateBar.toProxy()},o.prototype.setStateBar=function(t){this._view.stateBar.assignFrom(t)},o.prototype.getCheckBar=function(){return this._view.checkBar.toProxy()},o.prototype.setCheckBar=function(t){this._view.checkBar.assignFrom(t)},o.prototype.getHeader=function(){return this._view.header.toProxy()},o.prototype.setHeader=function(t){this._view.header.assignFrom(t)},o.prototype.getFooter=function(){return this._view.footer.toProxy()},o.prototype.setFooter=function(t){this._view.footer.assignFrom(t)},o.prototype.getFooters=function(){return this._view.footers.toProxy()},o.prototype.setFooters=function(t){this._view.footers.assignFrom(t)},o.prototype.getHeaderSummary=function(){return this._view.headerSummary.toProxy()},o.prototype.setHeaderSummary=function(t){this._view.headerSummary.assignFrom(t)},o.prototype.getHeaderSummaries=function(){return this._view.headerSummaries.toProxy()},o.prototype.setHeaderSummaries=function(t){this._view.headerSummaries.assignFrom(t)},o.prototype.setCellStyleCallback=function(t){this._view.body.cellStyleCallback=t},o.prototype.setRowStyleCallback=function(t){this._view.body.rowStyleCallback=t},o.prototype.orderBy=function(t,e,i){if(t){var o=[],n=[],r=[],s=this._dataProvider;if(e)for(var a=0,l=t.length;a<l;a++)o.push(this._view.columnByField(s.getFieldIndex(t[a]))),n.push(e&&a<e.length&&e[a]||lt.SortDirection.ASCENDING),r.push(i&&a<i.length&&i[a]||lt.SortCase.SENSITIVE);this._view.orderBy(o,n,r)}},o.prototype.getSortedFields=function(){var t,e=this._view,i=e.getSortFields(),o=e.getSortDirections();if(i&&0<(t=i.length)){for(var n=this._dataProvider,r=[],s=0;s<t;s++)r.push({fieldName:n.getFieldName(i[s]),orgFieldName:n.getOrgFieldName(i[s]),direction:o[s]});return r}return null},o.prototype.setFocus=function(){this._view.setFocus()},o.prototype.getColumn=function(t){return this._view.getColumn(t)},o.prototype.getColumns=function(){for(var t=this._view.columnCount,e=[],i=0;i<t;i++)e.push(this._view.getColumn(i));return e},o.prototype.setColumns=function(t){this._view.setColumns(t)},o.prototype.addColumn=function(t,e){this._view.addColumn(t,e)},o.prototype.layoutByColumn=function(t){return this._view.layoutByColumn(t)},o.prototype.layoutByName=function(t){return this._view.layoutByName(t)},o.prototype.getColumnNames=function(t,e){return this._view.collectColumnNames(t,e)},o.prototype.columnByName=function(t){return this._view.columnByName(t)},o.prototype.columnByField=function(t){return this._view.columnByField(t)},o.prototype.getColumnProperty=function(t,e){var i=l.getColumn(this._view,t);if(i&&e)return i[e]instanceof re.Base?i[e].toProxy():i[e]},o.prototype.setColumnProperty=function(t,e,i){var o=l.getColumn(this._view,t);o&&e&&(o[e]instanceof re.Base?o[e].assignFrom(i):o[e]=i)},o.prototype.setColumn=function(t){var e=l.getColumn(this._view,t);e&&e.assignFrom(t)},o.prototype.getDisplayColumns=function(){return this._view.collectColumns(!0,!0,!0)},o.prototype.setColumnLayout=function(t){"string"==typeof t&&!(t=this._view.findColumnLayout(t))||(this._view.cellLayout=t)},o.prototype.getLayoutByColumn=function(t){var e=this._view.layoutByColumn(t);return e?e.toProxy():null},o.prototype.saveColumnLayout=function(){function s(t){var e,i,o;if(t instanceof Tt.CellLayoutColumnItem)return(e=t.firstColumn)?{column:e.name,visible:e.visible,width:e.width}:t.group.direction===Tt.ColumnLayoutDirection.VERTICAL?0:t.width;if(t instanceof Tt.CellLayoutGroupItem){i=[];for(var n=0,r=(o=t._items).length;n<r;n++)i.push(s(o[n]));return{name:t.name,items:i,visible:t.visible,direction:t.direction,width:t.cellWidth,header:{visible:t.header.isVisible(),text:t.header.text}}}}var t=this._view._activeCellLayout||this._view._defaultCellLayout,e=[];if(!t||!(e=t._root._items))return null;for(var i=[],o=0,n=e.length;o<n;o++)i.push(s(e[o]));return i},o.prototype.linearizeColumns=function(t){this._view.linearizeColumns(t)},o.prototype.registerColumnLayouts=function(t){this._view.registerColumnLayouts(t)},o.prototype.setRowHeight=function(t,e,i){void 0===e&&(e=0),void 0===i&&(i=!0),this._view.setRowHeight(t,e,i)},o.prototype.getRowHeight=function(t){var e=this._view.getRowHeight(t);if(isNaN(e)){var i=this._view.getItem(t);e=this._view.layoutManager.getItemHeight(i)}return e},o.prototype.clearRowHeights=function(t){this._view.clearRowHeights(t)},o.prototype.getCurrent=function(){var t=this._view.focusedIndex;return t?t.proxy():null},o.prototype.setCurrent=function(t,e){void 0===e&&(e=!0);var i=this._view.focusedIndex.clone();i.assignFrom(t),this._view.setFocusedIndex(i,e,!0)},o.prototype.resetCurrent=function(){this._view.setFocusedIndex(this._view.focusedIndex.clone().reset())},o.prototype.clearCurrent=function(){this._view.clearFocusedIndex()},o.prototype.mouseToIndex=function(t,e){var i=this._view.pointToIndex(null,t,e,!1);return i?i.proxy():null},o.prototype.getCellBounds=function(t,e,i){void 0===i&&(i=!0);var o=l.getColumn(this._view,e),n=new kt.CellIndex(this._view,t,o);if(o&&n){var r=this._view.layoutManager,s=r.getBodyView(n),a=s.getCellRectAt(r,n,!0);if(a=a&&(i?s.boundsByScreen(a):s.boundsByContainer(a)))return{x:a.x,y:a.y,width:a.width,height:a.height}}return null},o.prototype.getIndexOfElement=function(t){var e=this._view.getCellViewOf(t),i=this._view.getDataCellIndex(e);return i?i.proxy():null},o.prototype.setColumnFilters=function(t,e){var i=l.getColumn(this._view,t);i instanceof a.DataColumn&&i.setFilters(e)},o.prototype.clearColumnFilters=function(t){var e=l.getColumn(this._view,t);e instanceof a.DataColumn&&e.clearFilters()},o.prototype.addColumnFilters=function(t,e,i){void 0===i&&(i=!1);var o=l.getColumn(this._view,t);o instanceof a.DataColumn&&o.addFilters(e,i)},o.prototype.removeColumnFilters=function(t,e){var i=l.getColumn(this._view,t);i instanceof a.DataColumn&&i.removeFilters(e)},o.prototype.activateColumnFilters=function(t,e,i){var o=l.getColumn(this._view,t);o instanceof a.DataColumn&&o.activateFilters(e,i)},o.prototype.activateAllColumnFilters=function(t,e){var i=l.getColumn(this._view,t);i instanceof a.DataColumn&&i.activateAllFilters(e)},o.prototype.hideColumnFilters=function(t,e,i){void 0===i&&(i=!0);var o=l.getColumn(this._view,t);o instanceof a.DataColumn&&(o.hideColumnFilters(e,i),this._view.closePopups())},o.prototype.hideAllColumnFilters=function(t,e){void 0===e&&(e=!0);var i=l.getColumn(this._view,t);i instanceof a.DataColumn&&(i.hideAllColumnFilters(e),this._view.closePopups())},o.prototype.toggleColumnFilters=function(t,e){var i=l.getColumn(this._view,t);i instanceof a.DataColumn&&i.toggleFilters(e)},o.prototype.toggleAllColumnFilters=function(t){var e=l.getColumn(this._view,t);e instanceof a.DataColumn&&e.toggleAllFilters()},o.prototype.getColumnFilter=function(t,e){var i=l.getColumn(this._view,t);return i instanceof a.DataColumn&&i.getFilter(e)?i.getFilter(e).toProxy():null},o.prototype.getColumnFilters=function(t){var e=l.getColumn(this._view,t);if(e instanceof a.DataColumn){for(var i=e.filters.items,o=[],n=0,r=i.length;n<r;n++)o.push(i[n].toProxy());return o}return null},o.prototype.getActiveColumnFilters=function(t,e){void 0===e&&(e=!0);var i=l.getColumn(this._view,t);if(i instanceof a.DataColumn){for(var o=i.getActiveFilters(e),n=[],r=0,s=o.length;r<s;r++)n.push(o[r].toProxy());return n}return null},o.prototype.isFiltered=function(t){var e=l.getColumn(this._view,t);return e instanceof a.DataColumn&&e.isFiltered()},o.prototype.getValues=function(t){var e=this._view.getItem(t);return e?l.getValues(this._view,e):null},o.prototype.getDisplayValues=function(t){var e=this._view.getItem(t);if(e)return l.getDisplayValues(this._view,e)},o.prototype.getDisplayValuesOfRow=function(t){var e=this._view.getItemOfRow(t,!0);if(e)return l.getDisplayValues(this._view,e)},o.prototype.setValues=function(t,e,i){void 0===i&&(i=!1);var o=this._view.getItem(t);o&&l.setValues(this._view,o,e,i)},o.prototype.getValue=function(t,e){var i=this._view.getItem(t);if(i){var o="string"==typeof e?this._dataProvider.getFieldIndex(e):e;return i.getData(o)}return null},o.prototype.setValue=function(t,e,i){var o="string"==typeof e?this._dataProvider.getFieldIndex(e):e;this._view.setValueAt(t,o,i)},o.prototype.getEditValue=function(){return this._view.getEditCellValue()},o.prototype.setEditValue=function(t,e,i){void 0===e&&(e=!1),void 0===i&&(i=!0),this._view.setEditCellValue(t,e,i)},o.prototype.registerCustomRenderer=function(t,e){this._view.registerCustomRenderer(t,e)},o.prototype.unregisterCustomRenderer=function(t){this._view.unregisterCustomRenderer(t)},o.prototype.existsCustomRenderer=function(t){return this._view.existsCustomRenderer(t)},o.prototype.unregisterAllCustomRenderer=function(){this._view.unregisterAllCustomRenderer()},o.prototype.addPopupMenu=function(t,e){this._view.addPopupMenu(t,e)},o.prototype.removePopupMenu=function(t){this._view.removePopupMenu(t)},o.prototype.setContextMenu=function(t){this._view.setContextMenu(t)},o.prototype.getSelection=function(){var t=this._view.getSelection();return t?t.toProxy():null},o.prototype.setSelection=function(t){if(t.style&&"string"==typeof t.style){var e,i,o=Wt.SelectionStyle[t.style.toUpperCase()]||Wt.SelectionStyle.BLOCK,n=0,r=0;if(t.hasOwnProperty("startItem"))n=t.startItem;else if(t.hasOwnProperty("startRow"))n=this._view.getItemIndexOfRow(t.startRow);else if("singleColumn"!=o&&"columns"!=o)return;if(t.hasOwnProperty("endItem"))r=t.endItem;else if(t.hasOwnProperty("endRow"))r=this._view.getItemIndexOfRow(t.endRow);else if("singleColumn"!=o&&"columns"!=o)return;e=l.getColumn(this._view,t.startColumn),i=l.getColumn(this._view,t.endColumn);var s=new kt.CellIndex(this._view,n,e),a=new kt.CellIndex(this._view,r,i);this._view.clearSelection(),this._view.selections.add(s,a,o)}},o.prototype.clearSelection=function(){this._view.clearSelection()},o.prototype.getSelectedItems=function(t){return this._view.getSelectedItemIndices(t)},o.prototype.getSelectedRows=function(){return this._view.getSelectedRows()},o.prototype.deleteSelection=function(t){this._view.deleteSelection(t)},o.prototype.eraseSelection=function(){this._view.eraseSelection()},o.prototype.getSelectionData=function(t){return void 0===t&&(t=-1),0<this._view.selections.count?this._view.selections.getItem(0).getData(t):null},o.prototype.copyToClipboard=function(t,e){return void 0===e&&(e=!0),this._view.toClipboard(t,e)},o.prototype.commitEditor=function(t){void 0===t&&(t=!0),this._view.commitEditor(t)},o.prototype.commit=function(t){return void 0===t&&(t=!1),this._view.commit(t)},o.prototype.cancel=function(){return this._view.cancel()},o.prototype.fillEditSearchItems=function(t,e,i,o){var n=l.getColumn(this._view,t);this._view.fillEditSearchItems(n,e,i,o)},o.prototype.isItemEditing=function(){return this._view.isItemEditing()},o.prototype.isEditing=function(){return this._view.isEditing()},o.prototype.showEditor=function(t){void 0===t&&(t=!1),this._view.showEditor(null,null,t)},o.prototype.hideEditor=function(){this._view.hideEditor(!0)},o.prototype.cancelEditor=function(){this._view.cancelEditor(!0)},o.prototype.setValidations=function(t){this._view.validations=t},o.prototype.validateCells=function(t,e){return void 0===e&&(e=!0),this._view.validateCells(t,e)},o.prototype.getInvalidCells=function(){return this._view.getInvalidCells()},o.prototype.clearInvalidCells=function(){return this._view.clearInvalidCells()},o.prototype.getEditingItem=function(){var t=this._view.getEditItem();return t?(t.getRowObject(),{itemIndex:t.index,dataRow:t.dataRow,values:t.getRowObject()}):null},o.prototype.getItemState=function(t){var e=this._view.getItem(t);if(e){var i=e.itemState;return i==dt.ItemState.NORMAL&&this._view.focusedIndex.itemIndex==e.index&&(i=dt.ItemState.FOCUSED),i}return null},o.prototype.showToast=function(t,e){this._view.showToast(t,e)},o.prototype.hideToast=function(t){this._view.hideToast(t)},o.prototype.setLookups=function(t){this._view.setLookups(t)},o.prototype.addLookupSource=function(t){this._view.addLookupSource(t)},o.prototype.removeLookupSource=function(t){this._view.removeLookupSource(t)},o.prototype.existsLookupData=function(t,e){return this._view.existsLookupData(t,e)},o.prototype.fillLookupData=function(t,e){this._view.fillLookupData(t,e)},o.prototype.clearLookupData=function(t){this._view.clearLookupData(t)},o.prototype.isCheckable=function(t){return this._view.isCheckable(t)},o.prototype.isCheckableOfRow=function(t){return this._view.isCheckableOfRow(t)},o.prototype.setCheckable=function(t,e){this._view.setCheckable(t,e)},o.prototype.setCheckableOfRow=function(t,e){this._view.setCheckableOfRow(t,e)},o.prototype.isCheckedItem=function(t){return this._view.isCheckedItem(t)},o.prototype.isCheckedRow=function(t){return this._view.isCheckedRow(t)},o.prototype.checkItem=function(t,e,i,o){void 0===e&&(e=!0),void 0===i&&(i=!1),void 0===o&&(o=!0),this._view.checkItem(t,e,i,o)},o.prototype.checkRow=function(t,e,i,o){void 0===e&&(e=!0),void 0===i&&(i=!1),void 0===o&&(o=!0),this._view.checkRow(t,e,i,o)},o.prototype.checkItems=function(t,e,i){void 0===e&&(e=!0),void 0===i&&(i=!0),this._view.checkItems(t,e,i)},o.prototype.checkRows=function(t,e,i){void 0===e&&(e=!0),void 0===i&&(i=!0),this._view.checkRows(t,e,i)},o.prototype.checkAll=function(t,e,i,o){void 0===t&&(t=!0),void 0===e&&(e=!1),void 0===i&&(i=!0),void 0===o&&(o=!0),this._view.checkAll(t,e,i,o)},o.prototype.setAllCheck=function(t,e){void 0===t&&(t=!0),void 0===e&&(e=!0),this._view.setAllCheck(t,e)},o.prototype.isAllChecked=function(){return this._view.allChecked},o.prototype.resetCheckables=function(t){this._view.resetCheckables(),t&&(this._view.checkBar.checkableExpression=null,this._view.checkBar.checkableCallback=null)},o.prototype.applyCheckables=function(){this._view.applyCheckables()},o.prototype.setCheckableExpression=function(t,e){void 0===e&&(e=!0),this._view.checkBar.checkableExpression=t,e&&this._view.applyCheckables()},o.prototype.setCheckableCallback=function(t,e){void 0===e&&(e=!0),this._view.checkBar.checkableCallback=t,e&&this._view.applyCheckables()},o.prototype.getSummary=function(t,e){var i=this._view.summarizer,o="string"==typeof t?this._dataProvider.getFieldIndex(t):t;if(-1==o)return null;switch(e){case"count":return i.getCount(o);case"sum":return i.getSum(o);case"max":return i.getMax(o);case"min":return i.getMin(o);case"avg":return i.getAvg(o);case"var":return i.getVar(o);case"varp":return i.getVarp(o);case"stdev":return i.getStdev(o);case"stdevp":return i.getStdevp(o);case"datacount":return i.getDataCount(o);case"dataavg":return i.getDataAvg(o)}},o.prototype.getModel=function(t,e){void 0===e&&(e=!1);var i=this._view.getItem(t);return i&&l.getItemProxy(i,e)},o.prototype.getModelAs=function(t,e,i){void 0===i&&(i=!1);var o=this._view.getItem(t);switch(e){case"row":o=ne.Utils.cast(o,n.GridRow);break;case"group":o=ne.Utils.cast(o,dt.GroupItem);break;case"footer":o=ne.Utils.cast(o,n.GroupFooter);break;case"tree":o=ne.Utils.cast(o,Ve.TreeItem)}return o?l.getItemProxy(o,i):null},o.prototype.getGroupModel=function(t,e){void 0===e&&(e=!1);var i=this._view.getItem(t);return!i||i instanceof dt.GroupItem||(i=i.parent),i?l.getItemProxy(i,e):null},o.prototype.getRootModel=function(t,e){if(void 0===e&&(e=!1),t){var i=this._view.getItem(t.itemIndex);if(i)return i.root?l.getItemProxy(i.root,e):null}},o.prototype.getModels=function(t,e){if(t=ne.Utils.makeArray(t)){for(var i=[],o=0,n=t.length;o<n;o++){var r=this._view.getItem(t[o]);r&&i.push(l.getItemProxy(r))}return i}},o.prototype.getModelOfRow=function(t,e){void 0===e&&(e=!1);var i=this._view.getItemOfRow(t,!1);return i?l.getItemProxy(i,e):null},o.prototype.getModelsOfRows=function(t,e){if(t=ne.Utils.makeArray(t)){for(var i=[],o=0,n=t.length;o<n;o++){var r=this._view.getItemOfRow(t[o],!1);r&&i.push(l.getItemProxy(r))}return i}},o.prototype.getParentModel=function(t,e){var i;return void 0===e&&(e=!1),t&&(i=this._view.getItemOfModel(t)),i&&i instanceof at.EditItem||!i?null:l.getItemProxy(i.parent,e)},o.prototype.getChildModel=function(t,e,i){void 0===i&&(i=!1);var o=t&&this._view.getItemOfModel(t);if(o instanceof dt.GroupItem){var n=o.getItem(e);return n?l.getItemProxy(n,i):null}},o.prototype.getChildModels=function(t,e){void 0===e&&(e=!1);var i=t&&this._view.getItemOfModel(t);if(i instanceof dt.GroupItem){for(var o=[],n=0,r=i.count;n<r;n++)o.push(l.getItemProxy(i.children[n],e));return o}return null},o.prototype.getDescendantModels=function(t,e){void 0===e&&(e=!1);var i=t&&this._view.getItemOfModel(t);if(i instanceof dt.GroupItem){var o=i.getDescendants(!1),n=[];if(o)for(var r=0,s=o.length;r<s;r++)n.push(l.getItemProxy(o[r],e));return n}return null},o.prototype.getGroupSummary=function(t,e,i){if(void 0===i&&(i=!1),t){var o=this._view.getItemOfModel(t),n="string"==typeof e?this._dataProvider.getFieldIndex(e):e;if(o instanceof dt.GroupItem&&0<=n){var r={count:o.getNumber(n),sum:o.getSum(n),max:o.getMax(n),min:o.getMin(n),avg:o.getAvg(n),datacount:o.getDataCount(n),dataavg:o.getSum(n)/o.getDataCount(n)};return i&&(r.var=o.getVar(n,1),r.varp=o.getVar(n,0),r.stdev=o.getStdev(n,1),r.stdevp=o.getStdev(n,0)),r}}},o.prototype.showProgress=function(){this._view.showProgress()},o.prototype.setProgress=function(t,e,i,o){this._view.setProgress(t,e,i,o)},o.prototype.closeProgress=function(){this._view.closeProgress()},o.prototype.showLoading=function(t){this._view.showLoading(t)},o.prototype.closeLoading=function(){this._view.hideLoading()},o.prototype.searchItem=function(t){return t?this._view.searchItem(t):-1},o.prototype.searchCell=function(t){return t?this._view.searchCell(t):null},o.prototype.resetSize=function(t){this._view.container.resetSize(t)},o.prototype.closeList=function(){this._view.closePopups()},o.prototype.exportGrid=function(t){if("csv"===t.type){var e=new ni.GridExportOptions(t);(new ai.GridCsvExporter).export(this._view,e)}else"excel"===t.type&&(e=new ni.GridMultiExportOptions(this._view,t),(new Ri.GridExcelExporter).export(this._view,e))},o.prototype.scrollPage=function(t){this._view._vscrollBar._doScroll(de.ScrollEventType.PAGE,t,0)},o.prototype.getTopItem=function(){return this._view.topIndex},o.prototype.setTopItem=function(t){void 0===t&&(t=0),this._view.topIndex=t},o.prototype.getLeftPos=function(){return this._view.leftPos},o.prototype.setLeftPos=function(t){this._view.leftPos=t},o.prototype.setLeftCol=function(t){this._view.leftCell=t},o.prototype.getContainer=function(){return this._view.container._containerDiv},o.prototype.destroy=function(){this.dispose()},o.prototype.fullItemCount=function(){return this._view.layoutManager.fullItemCount},o.prototype.undo=function(){return this._view.undo()},o.prototype.redo=function(){return this._view.redo()},o.prototype.clearCommandStack=function(t){void 0===t&&(t=!0),this._view.clearCommandStack(t)},o.prototype._getView=function(){return this._view},o);function o(t,e){void 0===e&&(e=!1),this.onViewActivated=null,this.onCurrentChanging=null,this.onCurrentChanged=null,this.onCurrentRowChanged=null,this.onValidateColumn=null,this.onValidateRow=null,this.onValidationFail=null,this.onColumnCheckedChanged=null,this.onMenuItemClicked=null,this.onContextMenuPopup=null,this.onContextMenuItemClicked=null,this.onCellButtonClicked=null,this.onScrollToBottom=null,this.onTopIndexChanged=null,this.onRowsDeleting=null,this.onRowInserting=null,this.onSelectionChanged=null,this.onSelectionAdded=null,this.onSelectionEnded=null,this.onShowEditor=null,this.onHideEditor=null,this.onEditChange=null,this.onGetEditValue=null,this.onEditCommit=null,this.onEditCanceled=null,this.onItemEditCanceled=null,this.onItemEditCancel=null,this.onEditSearch=null,this.onSearchCellButtonClick=null,this.onCellEdited=null,this.onEditRowChanged=null,this.onEditRowPasted=null,this.onRowsPasted=null,this.onCellPasting=null,this.onItemChecked=null,this.onItemAllChecked=null,this.onErrorClicked=null,this.onSorting=null,this.onSortingChanged=null,this.onFiltering=null,this.onFilteringChanged=null,this.onKeyDown=null,this.onKeyPress=null,this.onKeyUp=null,this.onShowTooltip=null,this.onShowHeaderTooltip=null,this.onColumnPropertyChanged=null,this.onGridActivated=null,this.onCopy=null,this.onPaste=null,this.onPasted=null,this.onItemsChecked=null,this.onCellClicked=null,this.onCellDblClicked=null,this.onCellItemClicked=null,this.onCommandStackChanged=null,this._view=this._createView(t,e),this._listener=this._createListener(this._view),i.firstGrid||(i.firstGrid=this)}i.GridBase=e;var s,h=(s=e,oe.__extends(d,s),_dp(d,"rowGroup",{get:function(){return this._view.rowGroup}}),_dp(d,"groupPanel",{get:function(){return this._view.groupPanelView}}),_dp(d,"filterMode",{get:function(){return this._view._rs.filterMode},set:function(t){this._view._rs.filterMode=t}}),_dp(d,"filterOr",{get:function(){return this._view._rs.inclusiveFiltering},set:function(t){this._view._rs.inclusiveFiltering=t}}),_dp(d,"groupSummaryMode",{get:function(){return this._view._rs.groupSummaryMode},set:function(t){this._view._rs.groupSummaryMode=t}}),_dp(d,"groupingOptions",{get:function(){return this._view.groupingOptions}}),d.prototype.getRowGroup=function(){return this._view.rowGroup.toProxy()},d.prototype.setRowGroup=function(t){this._view.rowGroup.assignFrom(t)},d.prototype.getGroupPanel=function(){return{visible:this._view.groupPanelView.visible,height:this._view.groupPanelView.height,minHeight:this._view.groupPanelView.minHeight}},d.prototype.setGroupPanel=function(t){this._view.groupPanelView.assignFrom(t)},d.prototype.getOptions=function(){var t=s.prototype.getOptions.call(this);return t.grouping=this.groupingOptions,t.groupPanel=this.groupPanel,t},d.prototype.setOptions=function(t){s.prototype.setOptions.call(this,t),t.grouping&&this._view.groupingOptions.assignFrom(t.grouping),t.groupPanel&&this._view.groupPanelView.assignFrom(t.groupPanel)},d.prototype.getGroupingOptions=function(){return this._view.groupingOptions.toProxy()},d.prototype.setGroupingOptions=function(t){this._view.groupingOptions.assignFrom(t)},d.prototype.groupBy=function(t,e,i){this._view.groupByFieldNames(t,e,i)},d.prototype.isGrouped=function(){return this._view.rowGrouped},d.prototype.isMergedGrouped=function(){return this._view.mergedRowGrouped},d.prototype.getGroupFields=function(){return this._view.rowGroupFields},d.prototype.getGroupFieldNames=function(t){void 0===t&&(t=!0);var e=this._view.rowGroupFields;if(e){var i=this._dataProvider;if(i){for(var o=[],n=0,r=e.length;n<r;n++)o.push(t?i.getOrgFieldName(e[n]):i.getFieldName(e[n]));return o}return e}return null},d.prototype.getGroupLevels=function(){return this._view.rowGroupLevels},d.prototype.getGroupLevel=function(t){var e="string"==typeof t?this._dataProvider.getFieldIndex(t):t;return-1<e?this._view.getGroupLevel(e):-1},d.prototype.getGroupIndex=function(t){var e=this._view.getItem(t);if(e){var i=e.parent;return i?i.index:-1}return-1},d.prototype.isGroupItem=function(t){return this._view.getItem(t)instanceof dt.GroupItem},d.prototype.isParentVisible=function(t){var e=this._view.getItem(t);return e&&e.parent&&e.parent.visible},d.prototype.expandGroup=function(t,e,i,o){void 0===i&&(i=!1),void 0===o&&(o=0);var n=this._view.getItem(t);n&&n instanceof dt.GroupItem&&this._view.expand(n,e,i,o)},d.prototype.collapseGroup=function(t,e,i){void 0===i&&(i=!1);var o=this._view.getItem(t);o&&o instanceof dt.GroupItem&&this._view.collapse(o,e,i)},d.prototype.expandParent=function(t,e,i,o){void 0===i&&(i=!1),void 0===o&&(o=0);var n=this._view.getItem(t);if(n){var r=n.parent;r&&r.expandable&&(r.collapsed||i)&&this._view.expand(r,e,i,o)}},d.prototype.collapseParent=function(t,e,i){void 0===i&&(i=!1);var o=this._view.getItem(t);if(o){var n=o.parent;n&&n instanceof dt.GroupItem&&this._view.collapse(n,e,i)}},d.prototype.expandAll=function(t,e){void 0===t&&(t=!0),void 0===e&&(e=void 0),0<this._view.itemCount&&this._view.expandAll(t,e)},d.prototype.collapseAll=function(t){void 0===t&&(t=!1),0<this._view.itemCount&&this._view.collapseAll(t)},d.prototype.beginInsertRow=function(t,e){void 0===t&&(t=-1),void 0===e&&(e=!1),this._view.insertAt(t,e)},d.prototype.beginAppendRow=function(){this._view.append()},d.prototype.beginUpdateRow=function(t){if(this._view.focusedIndex){var e=this._view.focusedIndex.clone();void 0!==t&&(e.itemIndex=t),this._view.edit(e)}},d.prototype.setPaging=function(t,e,i){void 0===e&&(e=10),void 0===i&&(i=-1),this._view.setPaging(t,e,i)},d.prototype.getPage=function(){return this._view.page},d.prototype.setPage=function(t,e){void 0===e&&(e=-1),this._view.setPage(t,e)},d.prototype.getPageCount=function(){return this._view.pageCount},d.prototype.setPageCount=function(t){this._view.pageCount=t},d.prototype.getCheckedItems=function(t){return void 0===t&&(t=!0),this._view.getCheckedItemIndices(!t)},d.prototype.getCheckedRows=function(t,e,i){return void 0===t&&(t=!0),void 0===e&&(e=!1),void 0===i&&(i=!1),this._view.getCheckedRows(t,e,i)},d.prototype._createView=function(t,e){return(this._container=new bi.GridContainer(t,this,e)).gridView},d.prototype._createListener=function(t){return new y(this,t)},d);function d(){var t=null!==s&&s.apply(this,arguments)||this;return t.onPageChanging=null,t.onPageChanged=null,t.onPageCountChanged=null,t.onGrouping=null,t.onGrouped=null,t.onExpanding=null,t.onExpanded=null,t.onCollapsing=null,t.onCollapsed=null,t}i.GridView=h;var u,_=(u=e,oe.__extends(c,u),_dp(c,"treeOptions",{get:function(){return this._view.treeOptions}}),c.prototype.getTreeOptions=function(){return this._view.treeOptions.toProxy()},c.prototype.setTreeOptions=function(t){this._view.treeOptions.assignFrom(t)},c.prototype.getParent=function(t){var e=this._view.getItem(t);return e?e.parentIndex:-1},c.prototype.getChildren=function(t){var e=this._view.getItem(t);if(e){for(var i=[],o=0,n=e.count;o<n;o++)i.push(e.getItem(o).index);return i}return null},c.prototype.getDescendants=function(t){var e=this._view.getItem(t);if(e){for(var i=[],o=e.getDescendants(!1),n=0,r=o.length;n<r;n++)i.push(o[n].index);return i}return null},c.prototype.getAncestors=function(t,e){void 0===e&&(e=!0);var i=this._view.getItem(t);if(i){for(var o=[],n=i.getAncestors(),r=0,s=n.length;r<s;r++)!e&&n[r]instanceof st.RootItem||o.push(n[r].dataId);return o}return null},c.prototype.expand=function(t,e,i,o){void 0===e&&(e=!1),void 0===i&&(i=!1),void 0===o&&(o=0);var n=this._view.getItem(t);n&&this._view.expand(n,e,i,o)},c.prototype.expandModel=function(t,e,i,o){void 0===e&&(e=!1),void 0===i&&(i=!1),void 0===o&&(o=0);var n=this._view.getItemOfModel(t);n&&this._view.expand(n,e,i,o)},c.prototype.collapse=function(t,e){void 0===e&&(e=!1);var i=this._view.getItem(t);i&&this._view.collapse(i,e)},c.prototype.collapseModel=function(t,e){void 0===e&&(e=!1);var i=this._view.getItemOfModel(t);i&&this._view.collapse(i,e)},c.prototype.expandAll=function(t){void 0===t&&(t=0),this._view.expandAll(t)},c.prototype.collapseAll=function(){this._view.collapseAll()},c.prototype.getCheckedItems=function(){return this._view.getCheckedItemIndices()},c.prototype.getCheckedRows=function(t){return this._view.getCheckedRowIds(t)},c.prototype.checkChildren=function(t,e,i,o,n,r){void 0===r&&(r=!0);var s=this._view.getItem(t);s&&this._view.checkChildren(s,e,i,o,n,r)},c.prototype._createView=function(t,e){return(this._container=new Si.TreeContainer(t,this,e)).gridView},c.prototype._createListener=function(t){return new C(this,t)},c);function c(){var t=null!==u&&u.apply(this,arguments)||this;return t.onTreeItemExpanding=null,t.onTreeItemExpanded=null,t.onTreeItemCollapsing=null,t.onTreeItemCollapsed=null,t.onTreeItemChanged=null,t}i.TreeView=_;var p,f=(p=ot.EventListenerBase,oe.__extends(g,p),g.prototype.dispose=function(){this._view.removeListener(this),this._view=null,this._del=null},g.prototype.onGridBaseViewActivated=function(t,e){this._del.onViewActivated?this._del.onViewActivated(this._del,e):ne.Utils.log("onViewActivated",e)},g.prototype.onGridBaseCurrentChanging=function(t,e,i){return this._del.onCurrentChanging?this._del.onCurrentChanging(this._del,e.proxy(),i.proxy()):(ne.Utils.log("onCurrentChanging",e,i),!0)},g.prototype.onGridBaseCurrentChanged=function(t,e){this._del.onCurrentChanged?this._del.onCurrentChanged(this._del,e.proxy()):ne.Utils.log("onCurrentChanged",e)},g.prototype.onGridBaseCurrentRowChanged=function(t,e,i){this._del.onCurrentRowChanged?this._del.onCurrentRowChanged(this._del,e,i):ne.Utils.log("onCurrentRowChanged",e,i)},g.prototype.onGridBaseValidateCell=function(t,e,i,o){if(this._del.onValidateColumn){var n=e.itemIndex,r=e.item&&e.item.dataRow,s=this._del.onValidateColumn(this._del,e.column,i,o,n,r);if(s&&s.level&&s.message)throw new It.ValidationError(s.level,s.message,e.column&&e.column,s.message);if("string"==typeof s||"number"==typeof s)throw new It.ValidationError(lt.ValidationLevel.ERROR,s,e.column&&e.column,s)}},g.prototype.onGridBaseValidateRow=function(t,e,i,o){if(this._del.onValidateRow){var n=this._del.onValidateRow(this._del,e.index,e.dataRow,i,o);if(n&&n.level&&n.message)throw new It.ValidationError(n.level,n.message,null,n.message);if("string"==typeof n||"number"==typeof n)throw new It.ValidationError(lt.ValidationLevel.ERROR,n,null,n)}},g.prototype.onGridBaseValidationFail=function(t,e,i,o){if(!this._del.onValidationFail)return o;var n=this._del.onValidationFail(this._del,e,i,{level:o.level,message:o.message});return n&&n.level&&n.message?(o.level=n.level,o.message=n.message,o.userMessage=n.message,o):"string"==typeof n||"number"==typeof n?(o.message=n,o.userMessage=n,o):void 0},g.prototype.onGridBaseCellClicked=function(t,e){this._del.onCellClicked?this._del.onCellClicked(this._del,e):ne.Utils.log("onCellClicked: ",e)},g.prototype.onGridBaseCellDblClicked=function(t,e){this._del.onCellDblClicked?this._del.onCellDblClicked(this._del,e):ne.Utils.log("onCellDblClicked: ",e)},g.prototype.onGridBaseCellItemClicked=function(t,e,i){return this._del.onCellItemClicked?this._del.onCellItemClicked(this._del,e.toProxy(),i):ne.Utils.log("onCellItemClicked: ",i)},g.prototype.onGridBaseColumnCheckedChanged=function(t,e,i){this._del.onColumnCheckedChanged?this._del.onColumnCheckedChanged(this._del,e,i):ne.Utils.log("onColumnCheckedChanged: ("+e.name+", "+i+")")},g.prototype.onGridBaseMenuItemClicked=function(t,e,i){this._del.onMenuItemClicked?this._del.onMenuItemClicked(this._del,e.toProxy(),i):ne.Utils.log("onMenuItemClicked: ",e.toProxy(),i)},g.prototype.onGridBaseContextMenuPopup=function(t,e,i,o){return this._del.onContextMenuPopup?this._del.onContextMenuPopup(this._del,e,i,o):ne.Utils.log("onContextMenuPopup: x = ",e,", y = ",i,", clickData =",o)},g.prototype.onGridBaseContextMenuItemClicked=function(t,e,i){this._del.onContextMenuItemClicked?this._del.onContextMenuItemClicked(this._del,e.toProxy(),i):ne.Utils.log("onContextMenuItemClicked: ",e.toProxy(),i)},g.prototype.onGridBaseCellButtonClicked=function(t,e){this._del.onCellButtonClicked?this._del.onCellButtonClicked(this._del,e.proxy(),e.column):ne.Utils.log("onCellButtonClicked: ",e)},g.prototype.onGridBaseScrollToBottom=function(t){this._del.onScrollToBottom?this._del.onScrollToBottom(this._del):ne.Utils.log("onScrollToBottom")},g.prototype.onGridBaseTopIndexChanged=function(t,e){this._del.onTopIndexChanged?this._del.onTopIndexChanged(this._del,e):ne.Utils.log("onTopItemIndexChanged: "+e)},g.prototype.onGridBaseRowsDeleting=function(t,e){return this._del.onRowsDeleting?this._del.onRowsDeleting(this._del,e):(ne.Utils.log("onRowsDeleting:",e),!0)},g.prototype.onGridBaseRowInserting=function(t,e,i){if(this._del.onRowInserting)return this._del.onRowInserting(this._del,e,i);ne.Utils.log("onRowInserting: "+e,i)},g.prototype.onGridBaseSelectionChanged=function(t){this._del.onSelectionChanged?this._del.onSelectionChanged(this._del):ne.Utils.keyLog("onSelectionChanged")},g.prototype.onGridBaseSelectionAdded=function(t,e){this._del.onSelectionAdded?this._del.onSelectionAdded(this._del,e):ne.Utils.keyLog("onSelectionAdded: ",e)},g.prototype.onGridBaseSelectionEnded=function(t){this._del.onSelectionEnded?this._del.onSelectionEnded(this._del):ne.Utils.keyLog("onSelectionEnded")},g.prototype.onGridBaseShowEditor=function(t,e,i,o){return this._del.onShowEditor?this._del.onShowEditor(this._del,e.proxy(),i,o):ne.Utils.log("onShowEditor",e.proxy(),i,o)},g.prototype.onGridBaseHideEditor=function(t,e){this._del.onHideEditor?this._del.onHideEditor(this._del,e.proxy()):ne.Utils.log("onHideEditor: ",e.proxy())},g.prototype.onGridBaseEditChange=function(t,e,i){this._del.onEditChange?this._del.onEditChange(this._del,e.proxy(),i):ne.Utils.log("onEditChange: "+i,e.proxy())},g.prototype.onGridBaseGetEditValue=function(t,e,i){this._del.onGetEditValue?this._del.onGetEditValue(this._del,e.proxy(),i):ne.Utils.log("onGetEditValue: ",e,i)},g.prototype.onGridBaseEditCommit=function(t,e,i,o){return this._del.onEditCommit?this._del.onEditCommit(this._del,e.proxy(),i,o):(ne.Utils.log("onEditCommit",e.proxy(),i,o),!0)},g.prototype.onGridBaseEditCanceled=function(t,e){this._del.onEditCanceled?this._del.onEditCanceled(this._del,e.proxy()):ne.Utils.log("onEditCanceled",e.proxy())},g.prototype.onGridBaseItemEditCanceled=function(t,e){this._del.onItemEditCanceled?this._del.onItemEditCanceled(this._del,e.index,e.itemState):ne.Utils.log("onItemEditCanceled: "+e.index+", "+e.itemState)},g.prototype.onGridBaseItemEditCancel=function(t,e){return this._del.onItemEditCancel?this._del.onItemEditCancel(this._del,e.index,e.itemState):(ne.Utils.log("onItemEditCancel: "+e.index+", "+e.itemState),!0)},g.prototype.onGridBaseEditSearch=function(t,e,i){this._del.onEditSearch?this._del.onEditSearch(this._del,e.proxy(),i):ne.Utils.log("onEditSearch: "+i,e.proxy())},g.prototype.onGridBaseSearchCellButtonClick=function(t,e,i){return this._del.onSearchCellButtonClick?this._del.onSearchCellButtonClick(this._del,e.proxy(),i):(ne.Utils.log("onSearchCellButtonClick: "+i,e.proxy()),null)},g.prototype.onGridBaseCellEdited=function(t,e,i){return this._del.onCellEdited?this._del.onCellEdited(this._del,e.index,e.dataRow,i):ne.Utils.log("onCellEdited: "+e.index+", "+e.dataRow+", "+i)},g.prototype.onGridBaseEditRowChanged=function(t,e,i,o,n){return this._del.onEditRowChanged?this._del.onEditRowChanged(this._del,e.index,e.dataRow,i,o,n):ne.Utils.log("onEditRowChanged: "+e.index+", "+e.dataRow+", "+i+", "+o+" => "+n)},g.prototype.onGridBaseEditRowPasted=function(t,e,i,o,n){return this._del.onEditRowPasted?this._del.onEditRowPasted(this._del,e.index,e.dataRow,i,o,n):ne.Utils.log("onEditRowPasted: "+e.index+", "+e.dataRow,i,o,n)},g.prototype.onGridBaseRowsPasted=function(t,e){return this._del.onRowsPasted?this._del.onRowsPasted(this._del,e):ne.Utils.log("onRowsPasted: ",e)},g.prototype.onGridBaseCellPasting=function(t,e,i){return this._del.onCellPasting?this._del.onCellPasting(this._del,e.proxy(),i):ne.Utils.log("onCellPasting: ",e,i)},g.prototype.onGridBaseItemChecked=function(t,e,i){return this._del.onItemChecked?this._del.onItemChecked(this._del,e.index,i):ne.Utils.log("onItemChecked",e.index,i)},g.prototype.onGridBaseItemsChecked=function(t,e,i){var o=l.getItemIndices(e);return this._del.onItemsChecked?this._del.onItemsChecked(this._del,o,i):ne.Utils.log("onItemsChecked: "+i,o)},g.prototype.onGridBaseItemAllChecked=function(t,e){return this._del.onItemAllChecked?this._del.onItemAllChecked(this._del,e):ne.Utils.log("onItemAllChecked: "+e)},g.prototype.onGridBaseErrorClicked=function(t,e){this._del.onErrorClicked?this._del.onErrorClicked(this._del,e):ne.Utils.log("onErrorClicked: "+e)},g.prototype.onGridBaseSorting=function(t,e,i){for(var o=[],n=0,r=i.length;n<r;n++)o.push(i[n]?i[n].toString():"ascending");return this._del.onSorting?this._del.onSorting(this._del,e,i):ne.Utils.log("onSorting: ",e,o)},g.prototype.onGridBaseSortingChanged=function(t){this._del.onSortingChanged?this._del.onSortingChanged(this._del):ne.Utils.log("onSortingChanged")},g.prototype.onGridBaseFiltering=function(t){return this._del.onFiltering?this._del.onFiltering(this._del):ne.Utils.log("onFiltering")},g.prototype.onGridBaseFilteringChanged=function(t,e,i){var o=e?e.getOwner():null,n=i?i.toProxy():null,r=o?o.name:"",s=i?i.name:"";return this._del.onFilteringChanged?this._del.onFilteringChanged(this._del,o,n):ne.Utils.log("onFilteringChanged: "+r+", "+s)},g.prototype.onGridBaseKeyDown=function(t,e){return this._del.onKeyDown?this._del.onKeyDown(this._del,e):ne.Utils.keyLog("onKeyDown: "+e)},g.prototype.onGridBaseKeyPress=function(t,e){this._del.onKeyPress?this._del.onKeyPress(this._del,e):ne.Utils.keyLog("onKeyPress: "+e)},g.prototype.onGridBaseKeyUp=function(t,e){this._del.onKeyUp?this._del.onKeyUp(this._del,e):ne.Utils.keyLog("onKeyUp: "+e)},g.prototype.onGridBaseShowTooltip=function(t,e,i){return this._del.onShowTooltip?this._del.onShowTooltip(this._del,e.proxy(),i):(ne.Utils.log("onShowTooltip: "+i,e.proxy()),i)},g.prototype.onGridBaseShowHeaderTooltip=function(t,e,i){return this._del.onShowHeaderTooltip?this._del.onShowHeaderTooltip(this._del,e,i):(ne.Utils.log("onShowHeaderTooltip: "+e.name+", "+i),i)},g.prototype.onGridBaseColumnPropertyChanged=function(t,e,i,o,n){this._del.onColumnPropertyChanged?this._del.onColumnPropertyChanged(this._del,e,i,o,n):ne.Utils.log("onColumnPropertyChanged: "+e.name+", "+i+", "+o+", "+n)},g.prototype.onGridBaseGridActivated=function(t){this._del.onGridActivated?this._del.onGridActivated(this._del):ne.Utils.log("onGridActivated")},g.prototype.onGridBasePaste=function(t,e,i){if(this._del.onPaste)return this._del.onPaste(this._del,e.proxy(),i);ne.Utils.log("onPaste: ",e)},g.prototype.onGridBaseCopy=function(t,e,i){if(this._del.onCopy)return this._del.onCopy(this._del,e.toProxy(),i);ne.Utils.log("onCopy: ",e.toProxy())},g.prototype.onGridBasePasted=function(t){return this._del.onPasted?this._del.onPasted(this._del):ne.Utils.log("onPasted")},g.prototype.onGridBaseCommandStackChanged=function(t,e,i){this._del.onCommandStackChanged?this._del.onCommandStackChanged(t,e,i):ne.Utils.log("onCommandStackChanged: undoable "+e+", redoable "+i)},g);function g(t,e){var i=p.call(this)||this;return i._del=t,i._view=e,i._view.addListener(i),i}var m,y=(m=f,oe.__extends(v,m),v.prototype.dispose=function(){m.prototype.dispose.call(this)},v.prototype.onGridViewPageChanging=function(t,e){return this._del.onPageChanging?this._del.onPageChanging(this._del,e):(ne.Utils.log("onPageChanging:"+e),!0)},v.prototype.onGridViewPageChanged=function(t,e){this._del.onPageChanged?this._del.onPageChanged(this._del,e):ne.Utils.log("onPageChanged:"+e)},v.prototype.onGridViewPageCountChanged=function(t,e){this._del.onPageCountChanged?this._del.onPageCountChanged(this._del,e):ne.Utils.log("onPageCountChanged:"+e)},v.prototype.onGridViewGrouping=function(t,e){return this._del.onGrouping?this._del.onGrouping(this._del,e):(ne.Utils.log("onGrouping",e),!0)},v.prototype.onGridViewGrouped=function(t){this._del.onGrouped?this._del.onGrouped(this._del):ne.Utils.log("onGrouped")},v.prototype.onGridViewExpanding=function(t,e){return this._del.onExpanding?this._del.onExpanding(this._del,e.id):(ne.Utils.log("onExpanding: "+e.id),!0)},v.prototype.onGridViewExpanded=function(t,e){this._del.onExpanded?this._del.onExpanded(this._del,e.id):ne.Utils.log("onExpanded: "+e.id)},v.prototype.onGridViewCollapsing=function(t,e){return this._del.onCollapsing?this._del.onCollapsing(this._del,e.id):(ne.Utils.log("onCollapsing: "+e.id),!0)},v.prototype.onGridViewCollapsed=function(t,e){this._del.onCollapsed?this._del.onCollapsed(this._del,e.id):ne.Utils.log("onCollapsed: "+e.id)},v);function v(t,e){return m.call(this,t,e)||this}var w,C=(w=f,oe.__extends(x,w),x.prototype.dispose=function(){w.prototype.dispose.call(this)},x.prototype.onTreeViewExpanding=function(t,e){return this._del.onTreeItemExpanding?this._del.onTreeItemExpanding(this._del,e.index,e.rowId):(ne.Utils.log("TreeItem expanding: "+e),!0)},x.prototype.onTreeViewExpanded=function(t,e){this._del.onTreeItemExpanded?this._del.onTreeItemExpanded(this._del,e.index,e.rowId):ne.Utils.log("TreeItem expanded: "+e)},x.prototype.onTreeViewCollapsing=function(t,e){return this._del.onTreeItemCollapsing?this._del.onTreeItemCollapsing(this._del,e.index,e.rowId):(ne.Utils.log("TreeItem collapsing: "+e),!0)},x.prototype.onTreeViewCollapsed=function(t,e){this._del.onTreeItemCollapsed?this._del.onTreeItemCollapsed(this._del,e.index,e.rowId):ne.Utils.log("TreeItem collapsed: "+e)},x.prototype.onTreeViewChanged=function(t,e){this._del.onTreeItemChanged?this._del.onTreeItemChanged(this._del,e.index,e.rowId):ne.Utils.log("TreeItem item changed: "+e)},x);function x(t,e){return w.call(this,t,e)||this}});t(Di);Di.firstGrid,Di.GridBase,Di.GridView,Di.TreeView;return t(e(function(t,e){Object.defineProperty(e,"__esModule",{value:!0});n.defineProp;var i=(o.getVersion=function(){return d.globalRealGridInfo.version},o.getLicenseType=function(){return d.globalRealGridInfo.license},o.getLicenseCode=function(){return d.globalRealGridInfo.code},o.getActiveGrid=function(){var t=ue.VisualContainer.getActiveGrid();return t&&t.handler},o.exportGrid=function(t){var e=Di.firstGrid;if(e){if(!t.exportGrids)throw new Error("multiExport must have exportGrids.");e.exportGrid(t)}},o.setDebug=function(t,e,i){ne.Utils.setDebugging(t,e,i)},o.setMobile=function(t){ne.Utils.setMobile(t)},Object.defineProperty(o,"ImageList",{get:function(){return nt.ImageList}}),Object.defineProperty(o,"GridView",{get:function(){return Di.GridView}}),Object.defineProperty(o,"TreeView",{get:function(){return Di.TreeView}}),Object.defineProperty(o,"LocalDataProvider",{get:function(){return ot.LocalDataProvider}}),Object.defineProperty(o,"LocalTreeDataProvider",{get:function(){return ot.LocalTreeDataProvider}}),Object.defineProperty(o,"ValueType",{get:function(){return lt.ValueType}}),o);function o(){}e.default=i}))}();
